<html><head><title>
dlib/CMakeLists.txt
</title></head><body bgcolor='white'><pre>
<font color='#009900'>#</font>
<font color='#009900'># This is a CMake makefile.  You can find the cmake utility and</font>
<font color='#009900'># information about it at http://www.cmake.org</font>
<font color='#009900'>#</font>

<font color='#009900'># setting this makes CMake allow normal looking IF ELSE statements</font>
<font color='blue'>SET</font>(CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS true)
<font color='blue'>cmake_minimum_required</font>(VERSION 2.4)
<font color='blue'>if</font>(COMMAND cmake_policy) 
<font color='blue'>   cmake_policy</font>(SET CMP0003 NEW) 
<font color='blue'>endif</font>()


<font color='#009900'># make macros that can add #define directives to the entire project.  Not just </font>
<font color='#009900'># to the dlib library itself.  I.e. to dlib and to any projects that depend</font>
<font color='#009900'># on dlib.</font>
<font color='blue'>MACRO </font>( add_global_define def_name )
<font color='blue'>   if </font>(NOT CMAKE_CXX_FLAGS MATCHES "<font color='#CC0000'>-D${<font color='#BB00BB'>def_name</font>}</font>")
<font color='blue'>      set </font>(CMAKE_CXX_FLAGS "<font color='#CC0000'>${<font color='#BB00BB'>CMAKE_CXX_FLAGS</font>} -D${<font color='#BB00BB'>def_name</font>}</font>" 
         CACHE STRING "<font color='#CC0000'>Flags used by the compiler during all C++ builds.</font>" 
         FORCE)
<font color='blue'>   endif </font>()
<font color='blue'>ENDMACRO</font>()
<font color='blue'>MACRO </font>( remove_global_define def_name )
<font color='blue'>   if </font>(CMAKE_CXX_FLAGS MATCHES "<font color='#CC0000'> -D${<font color='#BB00BB'>def_name</font>}</font>")
<font color='blue'>      string </font>(REGEX REPLACE "<font color='#CC0000'> -D${<font color='#BB00BB'>def_name</font>}</font>" "<font color='#CC0000'></font>" temp_var ${<font color='#BB00BB'>CMAKE_CXX_FLAGS</font>}) 
<font color='blue'>      set </font>(CMAKE_CXX_FLAGS "<font color='#CC0000'>${<font color='#BB00BB'>temp_var</font>}</font>" 
         CACHE STRING "<font color='#CC0000'>Flags used by the compiler during all C++ builds.</font>" 
         FORCE)
<font color='blue'>   endif </font>()
<font color='blue'>ENDMACRO</font>()


<font color='#009900'># Make sure ENABLE_ASSERTS is defined for debug builds</font>
<font color='blue'>if </font>(NOT CMAKE_CXX_FLAGS_DEBUG MATCHES "<font color='#CC0000'>-DENABLE_ASSERTS</font>")
<font color='blue'>   set </font>(CMAKE_CXX_FLAGS_DEBUG "<font color='#CC0000'>${<font color='#BB00BB'>CMAKE_CXX_FLAGS_DEBUG</font>} -DENABLE_ASSERTS</font>" 
      CACHE STRING "<font color='#CC0000'>Flags used by the compiler during C++ debug builds.</font>" 
      FORCE)
<font color='blue'>endif </font>()

<font color='blue'>set </font>(DLIB_ISO_CPP_ONLY_STR 
"<font color='#CC0000'>Enable this if you don't want to compile any non-ISO C++ code (i.e. you don't use any of the API Wrappers)</font>" )
<font color='blue'>set </font>(DLIB_NO_GUI_SUPPORT_STR 
"<font color='#CC0000'>Enable this if you don't want to compile any of the dlib GUI code</font>" )
<font color='blue'>set </font>(DLIB_ENABLE_STACK_TRACE_STR 
"<font color='#CC0000'>Enable this if you want to turn on the DLIB_STACK_TRACE macros</font>" )
<font color='blue'>set </font>(DLIB_ENABLE_ASSERTS_STR 
"<font color='#CC0000'>Enable this if you want to turn on the DLIB_ASSERT macro</font>" )

<font color='blue'>OPTION</font>(DLIB_ISO_CPP_ONLY ${<font color='#BB00BB'>DLIB_ISO_CPP_ONLY_STR</font>} OFF)
<font color='blue'>OPTION</font>(DLIB_NO_GUI_SUPPORT ${<font color='#BB00BB'>DLIB_NO_GUI_SUPPORT_STR</font>} OFF)
<font color='blue'>OPTION</font>(DLIB_ENABLE_STACK_TRACE ${<font color='#BB00BB'>DLIB_ENABLE_STACK_TRACE_STR</font>} OFF)
<font color='blue'>OPTION</font>(DLIB_ENABLE_ASSERTS ${<font color='#BB00BB'>DLIB_ENABLE_ASSERTS_STR</font>} OFF)


<font color='blue'>add_library</font>(dlib all/source.cpp )


<font color='blue'>IF </font>(NOT DLIB_ISO_CPP_ONLY)
<font color='#009900'>   # we want to link to the right stuff depending on our platform.  </font>
<font color='blue'>   IF </font>(WIN32 AND NOT CYGWIN) ###############################################################################
<font color='blue'>      if </font>(DLIB_NO_GUI_SUPPORT)
<font color='blue'>         set </font>(dlib_needed_libraries ws2_32)
<font color='blue'>      else</font>()
<font color='blue'>         set </font>(dlib_needed_libraries ws2_32 comctl32 gdi32 imm32)
<font color='blue'>      endif</font>()
<font color='blue'>   ELSEIF</font>(APPLE) ############################################################################
<font color='blue'>      FIND_LIBRARY</font>(pthreadlib pthread)
<font color='blue'>      set </font>(dlib_needed_libraries ${<font color='#BB00BB'>pthreadlib</font>})

<font color='blue'>      if </font>(NOT DLIB_NO_GUI_SUPPORT)
<font color='blue'>         FIND_LIBRARY</font>(xlib X11)
<font color='#009900'>         # make sure X11 is in the include path</font>
<font color='blue'>         FIND_PATH</font>(xlib_path Xlib.h
            PATHS 
            /Developer/SDKs/MacOSX10.4u.sdk/usr/X11R6/include
            PATH_SUFFIXES X11
            )
<font color='blue'>         if </font>(xlib AND xlib_path)
<font color='blue'>            GET_FILENAME_COMPONENT</font>(x11_path ${<font color='#BB00BB'>xlib_path</font>} PATH CACHE)
<font color='blue'>            INCLUDE_DIRECTORIES</font>(${<font color='#BB00BB'>x11_path</font>})
<font color='blue'>            set</font>(dlib_needed_libraries ${<font color='#BB00BB'>dlib_needed_libraries</font>} ${<font color='#BB00BB'>xlib</font>} )
<font color='blue'>         else</font>()
<font color='blue'>            message</font>("<font color='#CC0000'> ***********************************************************************************</font>")
<font color='blue'>            message</font>("<font color='#CC0000'> ****** DLIB GUI SUPPORT DISABLED BECAUSE X11 DEVELOPMENT LIBRARIES NOT FOUND ******</font>")
<font color='blue'>            message</font>("<font color='#CC0000'> ****** Make sure libx11-dev is installed if you want GUI support             ******</font>")
<font color='blue'>            message</font>("<font color='#CC0000'> ***********************************************************************************</font>")
<font color='blue'>            set</font>(DLIB_NO_GUI_SUPPORT ON CACHE STRING ${<font color='#BB00BB'>DLIB_NO_GUI_SUPPORT_STR</font>} FORCE )
<font color='blue'>         endif</font>()
<font color='blue'>      endif</font>()

<font color='blue'>      MARK_AS_ADVANCED</font>(pthreadlib xlib xlib_path x11_path)
<font color='blue'>   ELSE </font>() ##################################################################################
<font color='blue'>      FIND_LIBRARY</font>(pthreadlib pthread)
<font color='blue'>      set </font>(dlib_needed_libraries ${<font color='#BB00BB'>pthreadlib</font>})

<font color='#009900'>      # link to the nsl library if it exists.  this is something you need sometimes </font>
<font color='blue'>      FIND_LIBRARY</font>(nsllib nsl)
<font color='blue'>      if </font>(nsllib)
<font color='blue'>         set </font>(dlib_needed_libraries ${<font color='#BB00BB'>dlib_needed_libraries</font>} ${<font color='#BB00BB'>nsllib</font>})
<font color='blue'>      endif </font>()

<font color='#009900'>      # link to the socket library if it exists.  this is something you need on solaris</font>
<font color='blue'>      FIND_LIBRARY</font>(socketlib socket)
<font color='blue'>      if </font>(socketlib)
<font color='blue'>         set </font>(dlib_needed_libraries ${<font color='#BB00BB'>dlib_needed_libraries</font>} ${<font color='#BB00BB'>socketlib</font>})
<font color='blue'>      endif </font>()

<font color='blue'>      if </font>(NOT DLIB_NO_GUI_SUPPORT)
<font color='blue'>         INCLUDE</font>(FindX11)
<font color='blue'>         if </font>(X11_FOUND)
<font color='blue'>            INCLUDE_DIRECTORIES</font>(${<font color='#BB00BB'>X11_INCLUDE_DIR</font>})
<font color='blue'>            set </font>(dlib_needed_libraries ${<font color='#BB00BB'>dlib_needed_libraries</font>} ${<font color='#BB00BB'>X11_LIBRARIES</font>})
<font color='blue'>         else</font>()
<font color='blue'>            message</font>("<font color='#CC0000'> ***********************************************************************************</font>")
<font color='blue'>            message</font>("<font color='#CC0000'> ****** DLIB GUI SUPPORT DISABLED BECAUSE X11 DEVELOPMENT LIBRARIES NOT FOUND ******</font>")
<font color='blue'>            message</font>("<font color='#CC0000'> ****** Make sure libx11-dev is installed if you want GUI support             ******</font>")
<font color='blue'>            message</font>("<font color='#CC0000'> ***********************************************************************************</font>")
<font color='blue'>            set</font>(DLIB_NO_GUI_SUPPORT ON CACHE STRING ${<font color='#BB00BB'>DLIB_NO_GUI_SUPPORT_STR</font>} FORCE )
<font color='blue'>         endif</font>()
<font color='blue'>      endif</font>()

<font color='blue'>      MARK_AS_ADVANCED</font>(nsllib pthreadlib socketlib)
<font color='blue'>   ENDIF </font>() ##### end of if NOT DLIB_ISO_CPP_ONLY ##########################################################



<font color='#009900'>   # try to find libpng </font>
<font color='blue'>   SET</font>(ZLIB_FIND_QUIETLY ON)
<font color='blue'>   SET</font>(PNG_FIND_QUIETLY ON)
<font color='blue'>   INCLUDE</font>(FindPNG)
<font color='blue'>   if </font>(PNG_FOUND)
<font color='blue'>      INCLUDE_DIRECTORIES</font>(${<font color='#BB00BB'>PNG_PNG_INCLUDE_DIR</font>})
<font color='blue'>      set </font>(dlib_needed_libraries ${<font color='#BB00BB'>dlib_needed_libraries</font>} ${<font color='#BB00BB'>PNG_LIBRARY</font>})
<font color='blue'>      add_global_define</font>(DLIB_PNG_SUPPORT)
<font color='blue'>   endif</font>()


<font color='blue'>   TARGET_LINK_LIBRARIES</font>(dlib ${<font color='#BB00BB'>dlib_needed_libraries</font>} )

<font color='blue'>ENDIF </font>()


<font color='#009900'>#test for some things that really should be true about the compiler</font>
<font color='blue'>INCLUDE</font>(TestForSTDNamespace)
<font color='blue'>INCLUDE</font>(TestForANSIStreamHeaders)


<font color='blue'>if </font>(DLIB_ISO_CPP_ONLY)
<font color='blue'>   add_global_define</font>(DLIB_ISO_CPP_ONLY)
<font color='blue'>else</font>()
<font color='blue'>   remove_global_define</font>(DLIB_ISO_CPP_ONLY)
<font color='blue'>endif</font>()


<font color='blue'>if </font>(DLIB_NO_GUI_SUPPORT)
<font color='blue'>   add_global_define</font>(DLIB_NO_GUI_SUPPORT)
<font color='blue'>else</font>()
<font color='blue'>   remove_global_define</font>(DLIB_NO_GUI_SUPPORT)
<font color='blue'>endif</font>()

<font color='blue'>if </font>(DLIB_ENABLE_STACK_TRACE)
<font color='blue'>   add_global_define</font>(DLIB_ENABLE_STACK_TRACE)
<font color='blue'>else</font>()
<font color='blue'>   remove_global_define</font>(DLIB_ENABLE_STACK_TRACE)
<font color='blue'>endif</font>()


<font color='blue'>if </font>(DLIB_ENABLE_ASSERTS)
<font color='blue'>   add_global_define</font>(ENABLE_ASSERTS)
<font color='blue'>else</font>()
<font color='blue'>   remove_global_define</font>(ENABLE_ASSERTS)
<font color='blue'>endif</font>()

