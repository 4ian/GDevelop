{"version":3,"file":"TileMapHelper.js","sources":["../../../SharedLibs/src/model/GID.ts","../../../SharedLibs/src/model/TileMapModel.ts","../../../SharedLibs/src/render/ResourceCache.ts","../../../SharedLibs/src/render/TileTextureCache.ts","../../../SharedLibs/src/load/tiled/TiledTileMapLoaderHelper.ts","../../../SharedLibs/src/render/tiled/TiledPixiHelper.ts","../../../SharedLibs/src/render/ldtk/LDtkPixiHelper.ts","../../../SharedLibs/src/render/TileMapPixiHelper.ts","../../../SharedLibs/src/load/ldtk/LDtkTileMapLoader.ts","../../../SharedLibs/src/load/tiled/TiledTileMapLoader.ts","../../../SharedLibs/src/load/TileMapLoader.ts","../../../SharedLibs/src/load/ldtk/LDtkTileMapLoaderHelper.ts","../../../SharedLibs/src/render/TileMapManager.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null],"names":["FLIPPED_HORIZONTALLY_FLAG","FLIPPED_VERTICALLY_FLAG","FLIPPED_DIAGONALLY_FLAG","FlippingHelper","getPixiRotate","tileGID","flippedDiagonally","isFlippedDiagonally","flippedHorizontally","isFlippedHorizontally","flippedVertically","isFlippedVertically","rotate","getTileGID","tileId","tileIdMask","getTileId","setFlippedHorizontally","setFlippedVertically","setFlippedDiagonally","EditableTileMap","constructor","tileWidth","tileHeight","dimX","dimY","tileSet","this","_tileSet","_layers","from","editableTileMapAsJsObject","tileSize","tileSetColumnCount","tileSetRowCount","Map","Array","fill","forEach","_","index","set","TileDefinition","tileMap","layers","layerAsJsObject","addTileLayer","EditableTileMapLayer","addNewTileLayer","toJSObject","map","layer","getWidth","getHeight","getTileHeight","getTileWidth","getDimensionX","getDimensionY","setDimensionX","dim","setDimensionY","getTileDefinition","get","getTileDefinitions","values","id","push","getTileLayer","matchingLayer","find","addObjectLayer","EditableObjectLayer","getBackgroundResourceName","_backgroundResourceName","getLayers","pointIsInsideTile","x","y","tag","indexX","Math","floor","indexY","tileLayer","undefined","hasTaggedHitBox","setBackgroundResourceName","resourceName","isEmpty","every","layerId","setTile","flipTileOnY","flip","flipTileOnX","isTileFlippedOnX","isTileFlippedOnY","removeTile","AbstractEditableLayer","visible","setVisible","isVisible","super","objects","add","object","length","TileObject","buildEmptyLayer","_alpha","dimensionX","dimensionY","_tiles","Int32Array","editableTileMapLayerAsJsObject","isTileIdValid","setAlpha","alpha","tiles","row","setTileGID","getAlpha","cell","reduceDimensions","columnsToPop","columnsToShift","rowsToPop","rowsToShift","initialRowCount","initialColumnCount","slice","rowIndex","increaseDimensions","columnsToAppend","columnsToUnshift","rowsToAppend","rowsToUnshift","newRow","unshift","console","error","rowsToAdd","max","columnsToAdd","abs","min","newX","newY","tilesRow","unshiftedRows","unshiftedColumns","appendedRows","appendedColumns","trimEmptyColumnsAndRow","initialDimensionX","initialDimensionY","columnsToShiftByRow","columnsToPopByRow","isFirstNonEmptyRowFound","isFirstNonEmptyColumnFound","shiftedColumns","shiftedRows","poppedColumns","poppedRows","animationLength","taggedHitBoxes","stackedTiles","addHitBox","polygon","taggedHitBox","hitbox","polygons","some","getHitBoxes","getAnimationLength","getStackTileId","stackTileId","getStackedTiles","hasStackedTiles","setStackedTiles","ResourceCache","_cachedValues","_callbacks","getOrLoad","key","load","callback","value","callbacks","delete","TileTextureCache","_levelBackgroundTextures","_textures","setTexture","texture","getTexture","getLevelBackgroundTexture","name","setLevelBackgroundTexture","decodeBase64LayerData","pako","tiledLayer","data","compression","decodedData","step1","atob","split","charCodeAt","decodeArray","arr","binData","Uint8Array","decompressedData","inflate","extractTileUidFlippedStates","globalTileUid","getTileIdFromTiledGUI","tiledGUI","TiledPixiHelper","LDtkPixiHelper","PixiTileMapHelper","LDtkTileMapLoader","TiledTileMapLoader","TileMapLoader","getLDtkTileId","tileSetId","uniqueId","getAtlasTexture","atlasTextures","tilesetCache","tilesetId","tileset","relPath","baseTexture","_a","cacheId","identifier","parseAtlas","levelIndex","atlasTexture","tiledversion","warn","tilesets","tiledSet","tilewidth","tileheight","tilecount","image","columns","spacing","margin","firstGid","firstgid","rows","expectedAtlasWidth","expectedAtlasHeight","width","height","textureCache","tileSetIndex","rect","PIXI","Rectangle","Texture","level","levels","layerInstances","defs","uid","levelTileCache","iLayer","__type","__tilesetDefUid","layerTileCache","gridSize","tileGridSize","tile","autoLayerTiles","gridTiles","t","src","bgRelPath","pxWid","pxHei","exports","kind","parseSimpleTileMapAtlas","columnCount","rowCount","updatePixiTileMap","untypedPixiTileMap","displayMode","layerIndex","pixiTileMap","clear","bgResourceName","objectLayer","xPos","yPos","tileDefinition","tileTexture","pixiTilemapFrame","tileAnimX","updatePixiCollisionMask","pixiGraphics","typeFilter","outlineSize","outlineColor","outlineOpacity","fillColor","fillOpacity","lineStyle","drawRect","hitboxes","vertices","beginFill","vertexX","vertexY","swap","moveTo","lineTo","closePath","endFill","ldtkTileMap","ldtkLevel","tileCache","has","tileDef","__gridSize","__cWid","__cHei","editableTileMap","composedTileMap","nextComposedTileId","editableTileLayer","__opacity","px","oldTileId","f","oldTileDef","hash","join","oldTileGID","tiledTileMap","definitions","tiledTileSet","animation","tileClass","type","class","objectgroup","angle","rotation","PI","cos","sin","point","tileIndex","collisionTileMap","tiledObject","gid","tileGid","tileSlotIndex","layerData","encoding","collisionTileLayer","opacity","tileUid","tileMapFileContent","TileMapManager","_tileMapCache","_textureCacheCaches","getManager","instanceHolder","tileMapCollisionMaskManager","identify","info","__header__","app","getOrLoadTileMap","loadTileMap","tileMapJsonResourceName","tileSetJsonResourceName","getOrLoadSimpleTileMap","tileMapAsJsObject","objectName","getOrLoadTextureCache","atlasImageResourceName","getOrLoadSimpleTileMapTextureCache","textureCacheLoadingCallback","clearCaches"],"mappings":"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"}