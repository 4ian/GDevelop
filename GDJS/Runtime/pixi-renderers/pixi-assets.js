/*!
 * @pixi/assets - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/assets is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
this.PIXI=this.PIXI||{};var _pixi_assets=function(e,t,r,n,s,i,a,o,u){"use strict";var c=function(){return c=Object.assign||function(e){for(var t,r=arguments,n=1,s=arguments.length;n<s;n++)for(var i in t=r[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)};function l(e,t,r,n){return new(r||(r=Promise))((function(s,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function o(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&i[0]?n.return:i[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}var f=function(){function e(e,t){void 0===t&&(t=!1),this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}return e.prototype.add=function(e){var t=this;e.forEach((function(e){t._assetList.push(e)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()},e.prototype._next=function(){return l(this,void 0,Promise,(function(){var e,t,r;return h(this,(function(n){switch(n.label){case 0:if(!this._assetList.length||!this._isActive)return[3,2];for(this._isLoading=!0,e=[],t=Math.min(this._assetList.length,this._maxConcurrent),r=0;r<t;r++)e.push(this._assetList.pop());return[4,this._loader.load(e)];case 1:n.sent(),this._isLoading=!1,this._next(),n.label=2;case 2:return[2]}}))}))},Object.defineProperty(e.prototype,"active",{get:function(){return this._isActive},set:function(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())},enumerable:!1,configurable:!0}),e}(),A=function(e,t){return Array.isArray(e)||(e=[e]),t?e.map((function(e){return"string"==typeof e?t(e):e})):e};function d(e,t,r,n,s){for(var i=t[r],a=0;a<i.length;a++){var o=i[a];r<t.length-1?d(e.replace(n[r],o),t,r+1,n,s):s.push(e.replace(n[r],o))}}function p(e){var t=e.match(/\{(.*?)\}/g),r=[];if(t){var n=[];t.forEach((function(e){var t=e.substring(1,e.length-1).split(",");n.push(t)})),d(e,n,0,t,r)}else r.push(e);return r}var v=function(e){return!Array.isArray(e)},m=new(function(){function e(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}return e.prototype.reset=function(){this._cacheMap.clear(),this._cache.clear()},e.prototype.has=function(e){return this._cache.has(e)},e.prototype.get=function(e){var t=this._cache.get(e);return t},e.prototype.set=function(e,r){for(var n,s=this,i=A(e),a=0;a<this.parsers.length;a++){var o=this.parsers[a];if(o.test(r)){n=o.getCacheableAssets(i,r);break}}n||(n={},i.forEach((function(e){n[e]=r})));var u=Object.keys(n),c={cacheKeys:u,keys:i};if(i.forEach((function(e){s._cacheMap.set(e,c)})),u.forEach((function(e){s._cache.has(e)&&s._cache.get(e),s._cache.set(e,n[e])})),r instanceof t.Texture){var l=r;i.forEach((function(e){l.baseTexture!==t.Texture.EMPTY.baseTexture&&t.BaseTexture.addToCache(l.baseTexture,e),t.Texture.addToCache(l,e)}))}},e.prototype.remove=function(e){var t=this;if(this._cacheMap.get(e),this._cacheMap.has(e)){var r=this._cacheMap.get(e);r.cacheKeys.forEach((function(e){t._cache.delete(e)})),r.keys.forEach((function(e){t._cacheMap.delete(e)}))}},Object.defineProperty(e.prototype,"parsers",{get:function(){return this._parsers},enumerable:!1,configurable:!0}),e}());function g(e,t,r){var s={};if(e.forEach((function(e){s[e]=t})),Object.keys(t.textures).forEach((function(e){s[e]=t.textures[e]})),!r){var i=n.path.dirname(e[0]);t.linkedSheets.forEach((function(e,r){var n=g([i+"/"+t.data.meta.related_multi_packs[r]],e,!0);Object.assign(s,n)}))}return s}var b={extension:t.ExtensionType.CacheParser,test:function(e){return e instanceof r.Spritesheet},getCacheableAssets:function(e,t){return g(e,t,!1)}},y={extension:t.ExtensionType.CacheParser,test:function(e){return Array.isArray(e)&&e.every((function(e){return e instanceof t.Texture}))},getCacheableAssets:function(e,t){var r={};return e.forEach((function(e){t.forEach((function(t,n){r[e+(0===n?"":n+1)]=t}))})),r}};function _(){for(var e=arguments,t=this,r=[],n=0;n<arguments.length;n++)r[n]=e[n];return function(e){return l(t,void 0,void 0,(function(){return h(this,(function(t){return e.unshift.apply(e,r),[2,e]}))}))}}function P(){for(var e=arguments,t=this,r=[],n=0;n<arguments.length;n++)r[n]=e[n];return function(e){return l(t,void 0,void 0,(function(){var t,n,s,i;return h(this,(function(a){for(t=0,n=r;t<n.length;t++)s=n[t],-1!==(i=e.indexOf(s))&&e.splice(i,1);return[2,e]}))}))}}var x,B,E={extension:t.ExtensionType.DetectionParser,test:function(){return l(void 0,void 0,Promise,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return globalThis.createImageBitmap?("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",[4,s.settings.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then((function(e){return e.blob()}))]):[2,!1];case 1:return e=t.sent(),[2,createImageBitmap(e).then((function(){return!0}),(function(){return!1}))]}}))}))},add:_("avif"),remove:P("avif")};function w(){B={s3tc:x.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:x.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:x.getExtension("WEBGL_compressed_texture_etc"),etc1:x.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:x.getExtension("WEBGL_compressed_texture_atc"),astc:x.getExtension("WEBGL_compressed_texture_astc")}}var T={extension:t.ExtensionType.DetectionParser,test:function(){return l(void 0,void 0,Promise,(function(){var e,t;return h(this,(function(r){return e=s.settings.ADAPTER.createCanvas(),(t=e.getContext("webgl"))?(x=t,[2,!0]):[2,!1]}))}))},add:function(e){return l(void 0,void 0,Promise,(function(){var t,r;return h(this,(function(n){for(r in B||w(),t=[],B)B[r]&&t.push(r);return e.unshift.apply(e,t),[2,e]}))}))},remove:function(e){return l(void 0,void 0,Promise,(function(){return h(this,(function(t){return B||w(),[2,e.filter((function(e){return!(e in B)}))]}))}))}},I={extension:t.ExtensionType.DetectionParser,test:function(){return l(void 0,void 0,Promise,(function(){return h(this,(function(e){return[2,!(!i.BasisParser.basisBinding||!i.BasisParser.TranscoderWorker.wasmSource)]}))}))},add:_("basis"),remove:P("basis")},L={extension:t.ExtensionType.DetectionParser,test:function(){return l(void 0,void 0,Promise,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return globalThis.createImageBitmap?("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",[4,s.settings.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((function(e){return e.blob()}))]):[2,!1];case 1:return e=t.sent(),[2,createImageBitmap(e).then((function(){return!0}),(function(){return!1}))]}}))}))},add:_("webp"),remove:P("webp")},k=[".xml",".fnt"],O={extension:t.ExtensionType.LoadParser,test:function(e){return k.includes(n.path.extname(e))},testParse:function(e){return l(this,void 0,Promise,(function(){return h(this,(function(t){return[2,a.TextFormat.test(e)||a.XMLStringFormat.test(e)]}))}))},parse:function(e,t,r){return l(this,void 0,Promise,(function(){var s,i,o,u,c,l,f,A,d;return h(this,(function(h){switch(h.label){case 0:for(s=a.TextFormat.test(e)?a.TextFormat.parse(e):a.XMLStringFormat.parse(e),i=t.src,o=s.page,u=[],c=0;c<o.length;++c)l=o[c].file,f=n.path.join(n.path.dirname(i),l),u.push(f);return[4,r.load(u)];case 1:return A=h.sent(),d=u.map((function(e){return A[e]})),[2,a.BitmapFont.install(s,d,!0)]}}))}))},load:function(e,t){return l(this,void 0,Promise,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,s.settings.ADAPTER.fetch(e)];case 1:return[2,t.sent().text()]}}))}))},unload:function(e){e.destroy()}},R={extension:t.ExtensionType.LoadParser,test:function(e){return n.path.extname(e).includes(".json")},load:function(e){return l(this,void 0,Promise,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,s.settings.ADAPTER.fetch(e)];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}}))}))}},M={extension:t.ExtensionType.LoadParser,testParse:function(e,t){return l(this,void 0,Promise,(function(){return h(this,(function(r){return[2,n.path.extname(t.src).includes(".json")&&!!e.frames]}))}))},parse:function(e,t,s){var i,a;return l(this,void 0,Promise,(function(){var o,u,c,l,f,A,d,p,v,m,g,b;return h(this,(function(h){switch(h.label){case 0:return(o=n.path.dirname(t.src))&&o.lastIndexOf("/")!==o.length-1&&(o+="/"),u=o+e.meta.image,[4,s.load([u])];case 1:return c=h.sent(),l=c[u],[4,(f=new r.Spritesheet(l.baseTexture,e,t.src)).parse()];case 2:if(h.sent(),A=null===(i=null==e?void 0:e.meta)||void 0===i?void 0:i.related_multi_packs,!Array.isArray(A))return[3,4];for(d=[],p=0,v=A;p<v.length;p++)"string"==typeof(m=v[p])&&(g=o+m,(null===(a=t.data)||void 0===a?void 0:a.ignoreMultiPack)||d.push(s.load({src:g,data:{ignoreMultiPack:!0}})));return[4,Promise.all(d)];case 3:b=h.sent(),f.linkedSheets=b,b.forEach((function(e){e.linkedSheets=[f].concat(f.linkedSheets.filter((function(t){return t!==e})))})),h.label=4;case 4:return[2,f]}}))}))},unload:function(e){e.destroy(!0)}},j={extension:t.ExtensionType.LoadParser,test:function(e){return n.path.extname(e).includes(".txt")},load:function(e){return l(this,void 0,Promise,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,s.settings.ADAPTER.fetch(e)];case 1:return[4,t.sent().text()];case 2:return[2,t.sent()]}}))}))}},F=["normal","bold","100","200","300","400","500","600","700","800","900"],C=["woff","woff2","ttf","otf"];function W(e){var t=n.path.extname(e);return n.path.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}var S={extension:t.ExtensionType.LoadParser,test:function(e){var t=e.split("?")[0].split(".").pop();return C.includes(t)},load:function(e,t){var r,n,s,i,a,o;return l(this,void 0,Promise,(function(){var u,l,f,A,d,p,v;return h(this,(function(h){switch(h.label){case 0:if(!window.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");if(!("FontFace"in window))return[3,5];u=[],l=null!==(n=null===(r=t.data)||void 0===r?void 0:r.family)&&void 0!==n?n:W(e),f=null!==(a=null===(i=null===(s=t.data)||void 0===s?void 0:s.weights)||void 0===i?void 0:i.filter((function(e){return F.includes(e)})))&&void 0!==a?a:["normal"],A=null!==(o=t.data)&&void 0!==o?o:{},d=0,h.label=1;case 1:return d<f.length?(p=f[d],[4,(v=new FontFace(l,"url("+e+")",c(c({},A),{weight:p}))).load()]):[3,4];case 2:h.sent(),document.fonts.add(v),u.push(v),h.label=3;case 3:return d++,[3,1];case 4:return[2,1===u.length?u[0]:u];case 5:return[2,null]}}))}))},unload:function(e){(Array.isArray(e)?e:[e]).forEach((function(e){return document.fonts.delete(e)}))}};function D(e,t){var r=e.split("?")[0],s=n.path.extname(r).toLowerCase();return Array.isArray(t)?t.includes(s.toLowerCase()):s.toLowerCase()===t}function G(e,r,n){var s=new t.Texture(e);return s.baseTexture.on("dispose",(function(){delete r.promiseCache[n]})),s}var X,U,H={extension:t.ExtensionType.LoadParser,test:function(e){return D(e,".basis")},load:function(e,r,n){return l(this,void 0,Promise,(function(){var a,l,f,A,d;return h(this,(function(h){switch(h.label){case 0:return[4,i.TranscoderWorker.onTranscoderInitialized];case 1:return h.sent(),[4,s.settings.ADAPTER.fetch(e)];case 2:return[4,h.sent().arrayBuffer()];case 3:return a=h.sent(),[4,i.BasisParser.transcode(a)];case 4:return l=h.sent(),f=i.BASIS_FORMAT_TO_TYPE[l.basisFormat],A=l.basisFormat!==i.BASIS_FORMATS.cTFRGBA32?u.FORMATS.RGB:u.FORMATS.RGBA,[2,1===(d=l.map((function(s){return G(new t.BaseTexture(s,c({mipmap:s instanceof o.CompressedTextureResource&&s.levels>1?u.MIPMAP_MODES.ON_MANUAL:u.MIPMAP_MODES.OFF,alphaMode:u.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,type:f,format:A},r.data)),n,e)}))).length?d[0]:d]}}))}))},unload:function(e){Array.isArray(e)?e.forEach((function(e){return e.destroy(!0)})):e.destroy(!0)}},Q={extension:t.ExtensionType.LoadParser,test:function(e){return D(e,".dds")},load:function(e,r,i){return l(this,void 0,Promise,(function(){var a,l,f;return h(this,(function(h){switch(h.label){case 0:return[4,s.settings.ADAPTER.fetch(e)];case 1:return[4,h.sent().arrayBuffer()];case 2:return a=h.sent(),l=o.parseDDS(a),[2,1===(f=l.map((function(s){return G(new t.BaseTexture(s,c({mipmap:u.MIPMAP_MODES.OFF,alphaMode:u.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:n.getResolutionOfUrl(e)},r.data)),i,e)}))).length?f[0]:f]}}))}))},unload:function(e){Array.isArray(e)?e.forEach((function(e){return e.destroy(!0)})):e.destroy(!0)}},N={extension:t.ExtensionType.LoadParser,test:function(e){return D(e,".ktx")},load:function(e,r,i){return l(this,void 0,Promise,(function(){var a,l,f,A,d,p,v,m;return h(this,(function(h){switch(h.label){case 0:return[4,s.settings.ADAPTER.fetch(e)];case 1:return[4,h.sent().arrayBuffer()];case 2:return a=h.sent(),l=o.parseKTX(e,a),f=l.compressed,A=l.uncompressed,d=l.kvData,p=null!=f?f:A,v=c({mipmap:u.MIPMAP_MODES.OFF,alphaMode:u.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:n.getResolutionOfUrl(e)},r.data),[2,1===(m=p.map((function(r){p===A&&Object.assign(v,{type:r.type,format:r.format});var n=new t.BaseTexture(r,v);return n.ktxKeyValueData=d,G(n,i,e)}))).length?m[0]:m]}}))}))},unload:function(e){Array.isArray(e)?e.forEach((function(e){return e.destroy(!0)})):e.destroy(!0)}},Y=0,z={id:"checkImageBitmap",code:"\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    "},K="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };",V=new(function(){function e(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}return e.prototype.isImageBitmapSupported=function(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((function(e){var t=URL.createObjectURL(new Blob([z.code],{type:"application/javascript"})),r=new Worker(t);r.addEventListener("message",(function(n){r.terminate(),URL.revokeObjectURL(t),e(n.data)}))}))),this._isImageBitmapSupported},e.prototype.loadImageBitmap=function(e){return this._run("loadImageBitmap",[e])},e.prototype._initWorkers=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){return this._initialized||(this._initialized=!0),[2]}))}))},e.prototype.getWorker=function(){var e=this;void 0===X&&(X=navigator.hardwareConcurrency||4);var t=this.workerPool.pop();return!t&&this._createdWorkers<X&&(U||(U=URL.createObjectURL(new Blob([K],{type:"application/javascript"}))),this._createdWorkers++,(t=new Worker(U)).addEventListener("message",(function(t){e.complete(t.data),e.returnWorker(t.target),e.next()}))),t},e.prototype.returnWorker=function(e){this.workerPool.push(e)},e.prototype.complete=function(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null},e.prototype._run=function(e,t){return l(this,void 0,Promise,(function(){var r,n=this;return h(this,(function(s){switch(s.label){case 0:return[4,this._initWorkers()];case 1:return s.sent(),r=new Promise((function(r,s){n.queue.push({id:e,arguments:t,resolve:r,reject:s})})),this.next(),[2,r]}}))}))},e.prototype.next=function(){if(this.queue.length){var e=this.getWorker();if(e){var t=this.queue.pop(),r=t.id;this.resolveHash[Y]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Y++,id:r})}}},e}()),Z=[".jpg",".png",".jpeg",".avif",".webp"];function q(e){return l(this,void 0,Promise,(function(){var t,r;return h(this,(function(n){switch(n.label){case 0:return[4,s.settings.ADAPTER.fetch(e)];case 1:if(!(t=n.sent()).ok)throw new Error("[loadImageBitmap] Failed to fetch "+e+": "+t.status+" "+t.statusText);return[4,t.blob()];case 2:return r=n.sent(),[4,createImageBitmap(r)];case 3:return[2,n.sent()]}}))}))}var J={extension:t.ExtensionType.LoadParser,config:{preferWorkers:!0},test:function(e){for(var t=!1,r=0;r<Z.length;r++)if(0===e.indexOf("data:image/"+Z[r].slice(1))){t=!0;break}return t||D(e,Z)},load:function(e,r,s){return l(this,void 0,Promise,(function(){var i,a,o;return h(this,(function(u){switch(u.label){case 0:return i=null,window.createImageBitmap?(a=this.config.preferWorkers)?[4,V.isImageBitmapSupported()]:[3,2]:[3,7];case 1:a=u.sent(),u.label=2;case 2:return a?[4,V.loadImageBitmap(e)]:[3,4];case 3:return i=u.sent(),[3,6];case 4:return[4,q(e)];case 5:i=u.sent(),u.label=6;case 6:return[3,9];case 7:return[4,new Promise((function(t){(i=new Image).crossOrigin="anonymous",i.src=e,i.complete?t(i):i.onload=function(){t(i)}}))];case 8:i=u.sent(),u.label=9;case 9:return(o=new t.BaseTexture(i,c({resolution:n.getResolutionOfUrl(e)},r.data))).resource.src=e,[2,G(o,s,e)]}}))}))},unload:function(e){e.destroy(!0)}},$={extension:t.ExtensionType.LoadParser,test:function(e){return n.path.extname(e).includes(".svg")},testParse:function(e){return l(this,void 0,Promise,(function(){return h(this,(function(r){return[2,t.SVGResource.test(e)]}))}))},parse:function(e,r,s){var i,a,o;return l(this,void 0,Promise,(function(){var u,l,f;return h(this,(function(h){switch(h.label){case 0:return u=new t.SVGResource(e,null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.resourceOptions),(l=new t.BaseTexture(u,c({resolution:n.getResolutionOfUrl(e)},null==r?void 0:r.data))).resource.src=e,f=G(l,s,e),(null===(o=null===(a=null==r?void 0:r.data)||void 0===a?void 0:a.resourceOptions)||void 0===o?void 0:o.autoLoad)?[3,2]:[4,u.load()];case 1:h.sent(),h.label=2;case 2:return[2,f]}}))}))},load:function(e,t){return l(this,void 0,Promise,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,s.settings.ADAPTER.fetch(e)];case 1:return[2,t.sent().text()]}}))}))},unload:J.unload},ee=function(){function e(){this._parsers=[],this.promiseCache={}}return e.prototype.reset=function(){this.promiseCache={}},e.prototype._getLoadPromiseAndParser=function(e,t){var r=this,n={promise:null,parser:null};return n.promise=l(r,void 0,void 0,(function(){var r,s,i,a,o,u;return h(this,(function(c){switch(c.label){case 0:r=null,s=0,c.label=1;case 1:return s<this.parsers.length?(i=this.parsers[s]).load&&(null===(o=i.test)||void 0===o?void 0:o.call(i,e,t,this))?[4,i.load(e,t,this)]:[3,3]:[3,4];case 2:return r=c.sent(),n.parser=i,[3,4];case 3:return s++,[3,1];case 4:if(!n.parser)return[2,null];s=0,c.label=5;case 5:return s<this.parsers.length?(i=this.parsers[s]).parse?(a=i.parse)?[4,null===(u=i.testParse)||void 0===u?void 0:u.call(i,r,t,this)]:[3,7]:[3,9]:[3,10];case 6:a=c.sent(),c.label=7;case 7:return a?[4,i.parse(r,t,this)]:[3,9];case 8:r=c.sent()||r,n.parser=i,c.label=9;case 9:return s++,[3,5];case 10:return[2,r]}}))})),n},e.prototype.load=function(e,t){return l(this,void 0,Promise,(function(){var r,s,i,a,o,u,c=this;return h(this,(function(f){switch(f.label){case 0:return r=0,s={},i=v(e),a=A(e,(function(e){return{src:e}})),o=a.length,u=a.map((function(e){return l(c,void 0,void 0,(function(){var i,a,u,c;return h(this,(function(l){switch(l.label){case 0:if(i=n.path.toAbsolute(e.src),s[e.src])return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),this.promiseCache[i]||(this.promiseCache[i]=this._getLoadPromiseAndParser(i,e)),a=s,u=e.src,[4,this.promiseCache[i].promise];case 2:return a[u]=l.sent(),t&&t(++r/o),[3,4];case 3:throw c=l.sent(),delete this.promiseCache[i],delete s[e.src],new Error("[Loader.load] Failed to load "+i+".\n"+c);case 4:return[2]}}))}))})),[4,Promise.all(u)];case 1:return f.sent(),[2,i?s[a[0].src]:s]}}))}))},e.prototype.unload=function(e){return l(this,void 0,Promise,(function(){var t,r,s=this;return h(this,(function(i){switch(i.label){case 0:return t=A(e,(function(e){return{src:e}})),r=t.map((function(e){return l(s,void 0,void 0,(function(){var t,r,s,i,a;return h(this,(function(o){switch(o.label){case 0:return t=n.path.toAbsolute(e.src),(r=this.promiseCache[t])?[4,r.promise]:[3,2];case 1:s=o.sent(),null===(a=null===(i=r.parser)||void 0===i?void 0:i.unload)||void 0===a||a.call(i,s,e,this),delete this.promiseCache[t],o.label=2;case 2:return[2]}}))}))})),[4,Promise.all(r)];case 1:return i.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"parsers",{get:function(){return this._parsers},enumerable:!1,configurable:!0}),e}(),te=["jpg","png","jpeg","avif","webp"],re={extension:t.ExtensionType.ResolveParser,test:function(e){var t=e.split("?")[0].split("."),r=t.pop(),n=t.pop();return"json"===r&&te.includes(n)},parse:function(e){var t,r,n=e.split(".");return{resolution:parseFloat(null!==(r=null===(t=s.settings.RETINA_PREFIX.exec(e))||void 0===t?void 0:t[1])&&void 0!==r?r:"1"),format:n[n.length-2],src:e}}},ne={extension:t.ExtensionType.ResolveParser,test:J.test,parse:function(e){var t,r;return{resolution:parseFloat(null!==(r=null===(t=s.settings.RETINA_PREFIX.exec(e))||void 0===t?void 0:t[1])&&void 0!==r?r:"1"),format:e.split(".").pop(),src:e}}},se={extension:t.ExtensionType.ResolveParser,test:function(e){var t=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(t)},parse:function(e){var t,r,n,i;if("ktx"===e.split("?")[0].split(".").pop()){var a=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(a.some((function(t){return e.endsWith(t)})))return{resolution:parseFloat(null!==(r=null===(t=s.settings.RETINA_PREFIX.exec(e))||void 0===t?void 0:t[1])&&void 0!==r?r:"1"),format:a.find((function(t){return e.endsWith(t)})),src:e}}return{resolution:parseFloat(null!==(i=null===(n=s.settings.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==i?i:"1"),format:e.split(".").pop(),src:e}}},ie=function(){function e(){this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}return e.prototype.prefer=function(){for(var e=arguments,t=this,r=[],n=0;n<arguments.length;n++)r[n]=e[n];r.forEach((function(e){t._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))})),this._resolverHash={}},Object.defineProperty(e.prototype,"basePath",{get:function(){return this._basePath},set:function(e){this._basePath=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootPath",{get:function(){return this._rootPath},set:function(e){this._rootPath=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parsers",{get:function(){return this._parsers},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null},e.prototype.addManifest=function(e){var t=this;this._manifest,this._manifest=e,e.bundles.forEach((function(e){t.addBundle(e.name,e.assets)}))},e.prototype.addBundle=function(e,t){var r=this,n=[];Array.isArray(t)?t.forEach((function(e){"string"==typeof e.name?n.push(e.name):n.push.apply(n,e.name),r.add(e.name,e.srcs)})):Object.keys(t).forEach((function(e){n.push(e),r.add(e,t[e])})),this._bundles[e]=n},e.prototype.add=function(e,t,r){var s=this,i=A(e);i.forEach((function(e){s._assetMap[e]})),Array.isArray(t)||(t="string"==typeof t?p(t):[t]);var a=t.map((function(e){var t,a=e;if("string"==typeof e){for(var o=!1,u=0;u<s._parsers.length;u++){var c=s._parsers[u];if(c.test(e)){a=c.parse(e),o=!0;break}}o||(a={src:e})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(s._basePath||s._rootPath)&&(a.src=n.path.toAbsolute(a.src,s._basePath,s._rootPath)),a.data=null!==(t=a.data)&&void 0!==t?t:r,a}));i.forEach((function(e){s._assetMap[e]=a}))},e.prototype.resolveBundle=function(e){var t=this,r=v(e);e=A(e);var n={};return e.forEach((function(e){var r=t._bundles[e];r&&(n[e]=t.resolve(r))})),r?n[e[0]]:n},e.prototype.resolveUrl=function(e){var t=this.resolve(e);if("string"!=typeof e){var r={};for(var n in t)r[n]=t[n].src;return r}return t.src},e.prototype.resolve=function(e){var t=this,r=v(e);e=A(e);var s={};return e.forEach((function(e){var r;if(!t._resolverHash[e])if(t._assetMap[e]){var i=t._assetMap[e],a=t._getPreferredOrder(i),o=i[0];null==a||a.priority.forEach((function(e){a.params[e].forEach((function(t){var r=i.filter((function(r){return!!r[e]&&r[e]===t}));r.length&&(i=r)}))})),t._resolverHash[e]=null!==(r=i[0])&&void 0!==r?r:o}else{var u=e;(t._basePath||t._rootPath)&&(u=n.path.toAbsolute(u,t._basePath,t._rootPath)),t._resolverHash[e]={src:u}}s[e]=t._resolverHash[e]})),r?s[e[0]]:s},e.prototype._getPreferredOrder=function(e){for(var t=function(t){var n=e[0],s=r._preferredOrder.find((function(e){return e.params.format.includes(n.format)}));if(s)return{value:s}},r=this,n=0;n<e.length;n++){var s=t();if("object"==typeof s)return s.value}return this._preferredOrder[0]},e}(),ae=function(){function e(){this._detections=[],this._initialized=!1,this.resolver=new ie,this.loader=new ee,this.cache=m,this._backgroundLoader=new f(this.loader),this._backgroundLoader.active=!0,this.reset()}return e.prototype.init=function(e){var t,r,n,s;return void 0===e&&(e={}),l(this,void 0,Promise,(function(){var i,a,o,u,c,l,f,A,d,p;return h(this,(function(h){switch(h.label){case 0:return this._initialized?[2]:(this._initialized=!0,e.basePath&&(this.resolver.basePath=e.basePath),e.manifest?"string"!=typeof(i=e.manifest)?[3,2]:[4,this.load(i)]:[3,3]);case 1:i=h.sent(),h.label=2;case 2:this.resolver.addManifest(i),h.label=3;case 3:if(a=null!==(r=null===(t=e.texturePreference)||void 0===t?void 0:t.resolution)&&void 0!==r?r:1,o="number"==typeof a?[a]:a,!(null===(n=e.texturePreference)||void 0===n?void 0:n.format))return[3,9];c=null===(s=e.texturePreference)||void 0===s?void 0:s.format,u="string"==typeof c?[c]:c,l=0,f=this._detections,h.label=4;case 4:return l<f.length?[4,(p=f[l]).test()]:[3,8];case 5:return h.sent()?[3,7]:[4,p.remove(u)];case 6:u=h.sent(),h.label=7;case 7:return l++,[3,4];case 8:return[3,14];case 9:u=["png","jpg","jpeg"],A=0,d=this._detections,h.label=10;case 10:return A<d.length?[4,(p=d[A]).test()]:[3,14];case 11:return h.sent()?[4,p.add(u)]:[3,13];case 12:u=h.sent(),h.label=13;case 13:return A++,[3,10];case 14:return this.resolver.prefer({params:{format:u,resolution:o}}),[2]}}))}))},e.prototype.add=function(e,t,r){this.resolver.add(e,t,r)},e.prototype.load=function(e,t){return l(this,void 0,Promise,(function(){var r,n,s,i,a=this;return h(this,(function(o){switch(o.label){case 0:return this._initialized?[3,2]:[4,this.init()];case 1:o.sent(),o.label=2;case 2:return r=v(e),n=A(e).map((function(e){return"string"!=typeof e?(a.resolver.add(e.src,e),e.src):e})),s=this.resolver.resolve(n),[4,this._mapLoadToResolve(s,t)];case 3:return i=o.sent(),[2,r?i[n[0]]:i]}}))}))},e.prototype.addBundle=function(e,t){this.resolver.addBundle(e,t)},e.prototype.loadBundle=function(e,t){return l(this,void 0,Promise,(function(){var r,n,s,i,a,o,u,c,l=this;return h(this,(function(h){switch(h.label){case 0:return this._initialized?[3,2]:[4,this.init()];case 1:h.sent(),h.label=2;case 2:return r=!1,"string"==typeof e&&(r=!0,e=[e]),n=this.resolver.resolveBundle(e),s={},i=Object.keys(n),a=0,o=0,u=function(){null==t||t(++a/o)},c=i.map((function(e){var t=n[e];return o+=Object.keys(t).length,l._mapLoadToResolve(t,u).then((function(t){s[e]=t}))})),[4,Promise.all(c)];case 3:return h.sent(),[2,r?s[e[0]]:s]}}))}))},e.prototype.backgroundLoad=function(e){return l(this,void 0,Promise,(function(){var t;return h(this,(function(r){switch(r.label){case 0:return this._initialized?[3,2]:[4,this.init()];case 1:r.sent(),r.label=2;case 2:return"string"==typeof e&&(e=[e]),t=this.resolver.resolve(e),this._backgroundLoader.add(Object.values(t)),[2]}}))}))},e.prototype.backgroundLoadBundle=function(e){return l(this,void 0,Promise,(function(){var t,r=this;return h(this,(function(n){switch(n.label){case 0:return this._initialized?[3,2]:[4,this.init()];case 1:n.sent(),n.label=2;case 2:return"string"==typeof e&&(e=[e]),t=this.resolver.resolveBundle(e),Object.values(t).forEach((function(e){r._backgroundLoader.add(Object.values(e))})),[2]}}))}))},e.prototype.reset=function(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1},e.prototype.get=function(e){if("string"==typeof e)return m.get(e);for(var t={},r=0;r<e.length;r++)t[r]=m.get(e[r]);return t},e.prototype._mapLoadToResolve=function(e,t){return l(this,void 0,Promise,(function(){var r,n,s,i;return h(this,(function(a){switch(a.label){case 0:return r=Object.values(e),n=Object.keys(e),this._backgroundLoader.active=!1,[4,this.loader.load(r,t)];case 1:return s=a.sent(),this._backgroundLoader.active=!0,i={},r.forEach((function(e,t){var r=s[e.src],a=[e.src];e.alias&&a.push.apply(a,e.alias),i[n[t]]=r,m.set(a,r)})),[2,i]}}))}))},e.prototype.unload=function(e){return l(this,void 0,Promise,(function(){var t,r;return h(this,(function(n){switch(n.label){case 0:return this._initialized?[3,2]:[4,this.init()];case 1:n.sent(),n.label=2;case 2:return t=A(e).map((function(e){return"string"!=typeof e?e.src:e})),r=this.resolver.resolve(t),[4,this._unloadFromResolved(r)];case 3:return n.sent(),[2]}}))}))},e.prototype.unloadBundle=function(e){return l(this,void 0,Promise,(function(){var t,r,n=this;return h(this,(function(s){switch(s.label){case 0:return this._initialized?[3,2]:[4,this.init()];case 1:s.sent(),s.label=2;case 2:return e=A(e),t=this.resolver.resolveBundle(e),r=Object.keys(t).map((function(e){return n._unloadFromResolved(t[e])})),[4,Promise.all(r)];case 3:return s.sent(),[2]}}))}))},e.prototype._unloadFromResolved=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(r){switch(r.label){case 0:return(t=Object.values(e)).forEach((function(e){m.remove(e.src)})),[4,this.loader.unload(t)];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"detections",{get:function(){return this._detections},enumerable:!1,configurable:!0}),e}(),oe=new ae;return t.extensions.handleByList(t.ExtensionType.LoadParser,oe.loader.parsers).handleByList(t.ExtensionType.ResolveParser,oe.resolver.parsers).handleByList(t.ExtensionType.CacheParser,oe.cache.parsers).handleByList(t.ExtensionType.DetectionParser,oe.detections),t.extensions.add(J,$,j,R,M,O,S,b,y,ne,re,L,E),e.Assets=oe,e.AssetsClass=ae,e.Cache=m,e.addFormats=_,e.cacheSpritesheet=b,e.cacheTextureArray=y,e.convertToList=A,e.createStringVariations=p,e.detectAvif=E,e.detectBasis=I,e.detectCompressedTextures=T,e.detectWebp=L,e.getFontFamilyName=W,e.isSingleItem=v,e.loadBasis=H,e.loadBitmapFont=O,e.loadDDS=Q,e.loadImageBitmap=q,e.loadJson=R,e.loadKTX=N,e.loadSVG=$,e.loadSpritesheet=M,e.loadTextures=J,e.loadTxt=j,e.loadWebFont=S,e.removeFormats=P,e.resolveCompressedTextureUrl=se,e.resolveSpriteSheetUrl=re,e.resolveTextureUrl=ne,Object.defineProperty(e,"__esModule",{value:!0}),e}({},PIXI,PIXI,PIXI.utils,PIXI,PIXI,PIXI,PIXI,PIXI);Object.assign(PIXI,_pixi_assets);
var PIXI_ASSETS = _pixi_assets;
// Disabled to avoid warnings in Chrome (see https://github.com/4ian/GDevelop/pull/3947)
//# sourceMappingURL=assets.min.js.map
