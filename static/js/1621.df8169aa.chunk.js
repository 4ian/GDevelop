(self.webpackChunkgdevelop_ide=self.webpackChunkgdevelop_ide||[]).push([[1621],{98769:function(e,t,n){"use strict";n.d(t,{X0:function(){return b},mh:function(){return C}});var r=n(74165),i=n(15861),a=n(4942),o=n(93433),s=n(1413),l=n(29439),c=n(28381),u=n(39688),d=n(71106),p=n(2066),f=n(4900),h=n(19438),g=n(997),m=n(29343),x={aiRequests:{},nextPageUri:null},v={aiRequestStorage:{fetchAiRequests:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onLoadMoreAiRequests:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),canLoadMore:!0,error:null,isLoading:!1,aiRequests:{},updateAiRequest:function(){},refreshAiRequest:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isSendingAiRequest:function(){return!1},getLastSendError:function(){return null},setSendingAiRequest:function(){},setLastSendError:function(){}},aiRequestHistory:{handleNavigateHistory:function(e){e.direction,e.currentText,e.onChangeText},resetNavigation:function(){}},editorFunctionCallResultsStorage:{getEditorFunctionCallResults:function(){return[]},addEditorFunctionCallResults:function(){return[]},clearEditorFunctionCallResults:function(){}},getAiSettings:function(){return null}},b=c.createContext(v),C=function(e){var t=e.children,n=function(){var e=c.useState({}),t=(0,l.Z)(e,2),n=t[0],r=t[1];return{getEditorFunctionCallResults:c.useCallback((function(e){return n[e]||null}),[n]),addEditorFunctionCallResults:c.useCallback((function(e,t){var i=(n[e]||[]).filter((function(e){return!t.some((function(t){return t.call_id===e.call_id}))})),l=(0,s.Z)((0,s.Z)({},n),{},(0,a.Z)({},e,[].concat((0,o.Z)(i),(0,o.Z)(t))));return r(l),l[e]}),[n]),clearEditorFunctionCallResults:c.useCallback((function(e){r((function(t){return(0,s.Z)((0,s.Z)({},t),{},(0,a.Z)({},e,null))}))}),[])}}(),v=function(){var e=c.useContext(d.ZP),t=e.profile,n=e.getAuthorizationHeader,o=c.useState(x),p=(0,l.Z)(o,2),f=p[0],h=p[1],g=c.useState(null),m=(0,l.Z)(g,2),v=m[0],b=m[1],C=c.useState(!1),j=(0,l.Z)(C,2),y=j[0],Z=j[1],k=c.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return Z(!0),b(null),e.prev=4,e.next=7,(0,u.hP)(n,{userId:t.id,forceUri:null});case 7:if(i=e.sent){e.next=10;break}return e.abrupt("return");case 10:a=i.aiRequests.reduce((function(e,t){return e[t.id]=t,e}),{}),h({aiRequests:a,nextPageUri:i.nextPageUri}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),b(e.t0),console.error("Error fetching AI requests:",e.t0);case 18:return e.prev=18,Z(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,14,18,21]])}))),[t,n]),w=c.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var i,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return Z(!0),b(null),e.prev=4,e.next=7,(0,u.hP)(n,{userId:t.id,forceUri:f.nextPageUri});case 7:if(i=e.sent){e.next=10;break}return e.abrupt("return");case 10:a=i.aiRequests,o=f.aiRequests,a.forEach((function(e){o[e.id]||(o[e.id]=e)})),h({aiRequests:o,nextPageUri:i.nextPageUri}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),b(e.t0),console.error("Error fetching AI requests:",e.t0);case 20:return e.prev=20,Z(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,16,20,23]])}))),[t,n,f.nextPageUri,f.aiRequests]),T=c.useCallback((function(e,t){h((function(n){return(0,s.Z)((0,s.Z)({},n),{},{aiRequests:(0,s.Z)((0,s.Z)({},n.aiRequests||{}),{},(0,a.Z)({},e,t))})}))}),[]),S=c.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,u.zn)(n,{userId:t.id,aiRequestId:i});case 5:a=e.sent,T(a.id,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while background refreshing AI request - ignoring:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[n,t,T]);c.useEffect((function(){t||h(x)}),[t]);var P=c.useState({}),I=(0,l.Z)(P,2),E=I[0],M=I[1],L=c.useCallback((function(e){return!!E[e||""]&&E[e||""].isSending}),[E]),A=c.useCallback((function(e){return E[e||""]&&E[e||""].lastSendError||null}),[E]),O=c.useCallback((function(e,t){var n=e||"";M((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},n,{isSending:t,lastSendError:null}))}))}),[M]),R=c.useCallback((function(e,t){var n=e||"";M((function(e){return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},n,{isSending:!1,lastSendError:t}))}))}),[M]);return{fetchAiRequests:k,onLoadMoreAiRequests:w,canLoadMore:!!f.nextPageUri,error:v,isLoading:y,aiRequests:f.aiRequests,updateAiRequest:T,refreshAiRequest:S,isSendingAiRequest:L,setSendingAiRequest:O,setLastSendError:R,getLastSendError:A}}(),C=function(e){var t=e.aiRequests,n=c.useState(-1),r=(0,l.Z)(n,2),i=r[0],a=r[1],s=c.useState(""),u=(0,l.Z)(s,2),d=u[0],p=u[1],f=c.useMemo((function(){var e=[];return Object.values(t).sort((function(e,t){return new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime()})).forEach((function(t){var n=t.output.filter((function(e){return"message"===e.type&&"user"===e.role})).map((function(e){var t=e.content.find((function(e){return"user_request"===e.type}));return t?t.text:""})).filter((function(e){return""!==e}));e.push.apply(e,(0,o.Z)(n))})),e}),[t]);return{handleNavigateHistory:c.useCallback((function(e){var t=e.direction,n=e.currentText,r=e.onChangeText;if("up"===t){-1===i&&p(n);var o=i+1;o<f.length&&(a(o),r(f[f.length-1-o]))}else if("down"===t){var s=i-1;-1===s?(a(-1),r(d)):s>=0&&(a(s),r(f[f.length-1-s]))}}),[i,f,d]),resetNavigation:c.useCallback((function(){a(-1),p("")}),[])}}(v),j=p.ZP.isDev()?"staging":"live",y=(0,h.o)(c.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.x)({times:2},(function(){return(0,u.I8)({environment:j})}));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error while fetching AI settings:",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[j]));c.useEffect((function(){var e=setTimeout((function(){y()}),f.kA);return function(){return clearTimeout(e)}}),[y]);var Z=c.useMemo((function(){return{aiRequestStorage:v,aiRequestHistory:C,editorFunctionCallResultsStorage:n,getAiSettings:y}}),[v,C,n,y]);return(0,m.jsx)(b.Provider,{value:Z,children:t})}},96210:function(e,t,n){"use strict";n.d(t,{i:function(){return g},X:function(){return m}});var r=n(29439),i=n(74165),a=n(15861),o=n(28381),s=n(14446),l=n.n(s),c=n(45911),u=n(90349),d=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(c.bw.baseUrl,"/announcement"));case 2:return t=e.sent,e.abrupt("return",(0,u.TC)({data:t.data,endpointName:"/announcement of Release API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(c.bw.baseUrl,"/promotion"));case 2:return t=e.sent,e.abrupt("return",(0,u.TC)({data:t.data,endpointName:"/promotion of Release API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=n(4900),h=n(29343),g=o.createContext({announcements:null,promotions:null,error:null,fetchAnnouncementsAndPromotions:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),m=function(e){var t=e.children,n=o.useState(null),s=(0,r.Z)(n,2),l=s[0],c=s[1],u=o.useState(null),m=(0,r.Z)(u,2),x=m[0],v=m[1],b=o.useState(null),C=(0,r.Z)(b,2),j=C[0],y=C[1],Z=o.useRef(!1),k=o.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var t,n,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z.current){e.next=2;break}return e.abrupt("return");case 2:return v(null),Z.current=!0,e.prev=4,e.next=7,Promise.all([d(),p()]);case 7:t=e.sent,n=(0,r.Z)(t,2),a=n[0],o=n[1],c(a),y(o),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("Unable to load the announcements from the api:",e.t0),v(e.t0);case 19:Z.current=!1;case 20:case"end":return e.stop()}}),e,null,[[4,15]])}))),[]);o.useEffect((function(){if(!l&&!Z.current){var e=setTimeout((function(){console.info("Pre-fetching announcements from the api..."),k()}),f.UY);return function(){return clearTimeout(e)}}}),[k,l,Z]);var w=o.useMemo((function(){return{announcements:l,promotions:j,error:x,fetchAnnouncementsAndPromotions:k}}),[l,j,x,k]);return(0,h.jsx)(g.Provider,{value:w,children:t})}},34193:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(29439),o=n(36600),s=n(28381),l=n(84140),c=n(86278),u=n(1773),d=n(42699),p=n(60022),f=n(57244),h=n(40243),g=n(87706),m=n(87262),x=n(30141),v=n(64480),b=n(24347),C=n(38428),j=n.n(C),y=n(61325),Z=n(3698),k=n(50463),w=n(18455),T=n(19345),S=n(38092),P=n(77987),I=n(48210),E=n(60575),M=n.n(E),L=n(29343),A=n.g.gd;t.Z=function(e){var t=e.assetPack,n=e.assetShortHeaders,C=e.addedAssetIds,E=e.onClose,O=e.onAssetsAdded,R=e.onWillInstallExtension,F=e.onExtensionInstalled,D=e.project,N=e.objectsContainer,_=e.resourceManagementProps,B=e.targetObjectFolderOrObjectWithContext,U=n.filter((function(e){return!C.has(e.id)})),V=0===U.length,H=!V&&U.length===n.length,z=n.length>200,W=s.useState(!1),G=(0,a.Z)(W,2),Y=G[0],q=G[1],J=s.useMemo((function(){return n.some((function(e){return(0,l.kt)(e)}))}),[n]),X=s.useMemo((function(){return _.canInstallPrivateAsset()}),[_]),K=s.useContext(b.Z).installPrivateAsset,Q=s.useContext(I.H).translatedExtensionShortHeadersByName,$=(0,m.WF)(),ee=(0,P.$$)(),te=s.useState(""),ne=(0,a.Z)(te,2),re=ne[0],ie=ne[1],ae=(0,w.mapFor)(0,D.getLayoutsCount(),(function(e){return D.getLayoutAt(e).getName()})),oe=N?null:(0,L.jsxs)(y.ak,{noMargin:!0,children:[(0,L.jsx)(c.Z,{children:(0,L.jsx)(o.Trans,{id:"Choose where to add the assets:"})}),(0,L.jsxs)(k.Z,{"aria-label":"Associated scene",name:"associated-layout",value:re,onChange:function(e){return ie(e.target.value)},children:[(0,L.jsx)(T.Z,{value:"",control:(0,L.jsx)(Z.Z,{color:"secondary"}),label:(0,L.jsx)(o.Trans,{id:"Global objects in the project"}),disabled:Y}),ae.map((function(e){return(0,L.jsx)(T.Z,{value:e,control:(0,L.jsx)(Z.Z,{color:"secondary"}),label:e,disabled:Y},e)}))]})]}),se=N||(D.hasLayoutNamed(re)?D.getLayout(re):D).getObjects(),le=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,o,s,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:if(!(t.length>200)){e.next=4;break}return e.abrupt("return");case 4:return q(!0),e.prev=5,e.next=8,ee(t);case 8:return n=e.sent,e.next=11,(0,g.Sg)({assets:n,project:D,extensionShortHeadersByName:Q});case 11:return a=e.sent,e.next=14,$({project:D,requiredExtensionInstallation:a,importedSerializedExtensions:[],onWillInstallExtension:R,onExtensionInstalled:F,updateMode:"all",reason:"asset"});case 14:if(e.sent){e.next=17;break}return e.abrupt("return");case 17:return o=M()(n.map((function(e){return e.objectAssets.map((function(e){return e.object.type}))})).flat().filter((function(e){return!!e}))).some((function(e){return!A.UsedObjectTypeFinder.scanProject(D,e)})),e.next=20,j().withConcurrency(6).for(n).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.objectAssets.every((function(e){return!e.requiredExtensions||e.requiredExtensions.every((function(e){return a.incompatibleWithIdeExtensionShortHeaders.every((function(t){return t.name!==e.extensionName}))}))}))){e.next=3;break}throw new Error("Unable to install the asset. Please upgrade the editor to the latest version.");case 3:return n=(0,l.kt)(t)?K:g.Lu,e.next=6,n({asset:t,project:D,objectsContainer:se,targetObjectFolderOrObject:B&&!B.global?B.objectFolderOrObject:null});case 6:if(i=e.sent){e.next=9;break}throw new Error("Unable to install the asset.");case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 20:if(s=e.sent,c=s.errors,u=s.results,!c.length){e.next=25;break}throw new Error("Error(s) while installing assets. The first error is: "+c[0].message);case 25:return e.next=27,_.onFetchNewlyAddedResources();case 27:_.onNewResourcesAdded(),q(!1),d=u.map((function(e){return e.createdObjects})).flat(),(0,g.Im)(D,d),O({createdObjects:d,isTheFirstOfItsTypeInProject:o}),e.next=39;break;case 34:e.prev=34,e.t0=e.catch(5),q(!1),console.error("Error while installing the assets",e.t0),(0,x.gR)({message:"There was an error while installing the assets. Verify your internet connection or try again later.",rawError:e.t0,errorId:"install-asset-pack-error"});case 39:case"end":return e.stop()}}),e,null,[[5,34]])})));return function(t){return e.apply(this,arguments)}}(),[ee,D,Q,$,R,F,_,O,K,se,B]),ce=J&&!X?{actionButton:(0,L.jsx)(p.Z,{label:(0,L.jsx)(o.Trans,{id:"Add the assets"}),primary:!0,disabled:!0,onClick:function(){}},"continue"),onApply:function(){},content:(0,L.jsx)(S.Z,{kind:"warning",children:(0,L.jsx)(o.Trans,{id:"You need to save this project as a cloud project to install premium assets. Please save your project and try again."})})}:z?{actionButton:(0,L.jsx)(p.Z,{label:(0,L.jsx)(o.Trans,{id:"Add the assets"}),primary:!0,disabled:!0,onClick:function(){}},"continue"),onApply:function(){},content:(0,L.jsx)(S.Z,{kind:"warning",children:(0,L.jsx)(o.Trans,{id:"You can only install up to {MAX_ASSETS_TO_INSTALL} assets at once. Try filtering the assets you would like to install, or install them one by one.",values:{MAX_ASSETS_TO_INSTALL:200}})})}:Y?{actionButton:(0,L.jsx)(d.Z,{label:(0,L.jsx)(o.Trans,{id:"Please wait..."}),disabled:!0,onClick:function(){}},"loading"),onApply:function(){},content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(c.Z,{children:(0,L.jsx)(o.Trans,{id:"Installing assets..."})}),(0,L.jsx)(h.x1,{expand:!0,children:(0,L.jsx)(v.Z,{})})]})}:V?{actionButton:(0,L.jsx)(p.Z,{label:(0,L.jsx)(o.Trans,{id:"Install again"}),primary:!1,onClick:function(){return le(n)}},"install-again"),onApply:function(){return le(n)},content:(0,L.jsx)(c.Z,{children:(0,L.jsx)(o.Trans,{id:"You already have these {0} assets installed, do you want to add them again?",values:{0:n.length}})})}:H?{actionButton:(0,L.jsx)(p.Z,{label:n.length>1?(0,L.jsx)(o.Trans,{id:"Add the assets"}):(0,L.jsx)(o.Trans,{id:"Add asset"}),primary:!0,onClick:function(){return le(n)}},"continue"),onApply:function(){return le(n)},content:(0,L.jsx)(c.Z,{children:n.length>1?(0,L.jsx)(o.Trans,{id:"You're about to add {0} assets.",values:{0:n.length}}):(0,L.jsx)(o.Trans,{id:"You're about to add 1 asset."})})}:{actionButton:(0,L.jsx)(f.Z,{label:(0,L.jsx)(o.Trans,{id:"Install the missing assets"}),primary:!0,onClick:function(){le(U)},buildMenuTemplate:function(e){return[{label:e._({id:"Install all the assets"}),click:function(){return le(n)}}]}},"install-missing"),onApply:function(){return le(U)},content:(0,L.jsx)(c.Z,{children:(0,L.jsx)(o.Trans,{id:"You already have {0} asset(s) in your scene. Do you want to add the remaining {1} one(s)?",values:{0:n.length-U.length,1:U.length}})})};return(0,L.jsx)(u.ZP,{title:t?t.name:(0,L.jsx)(o.Trans,{id:"Assets"}),maxWidth:"sm",open:!0,onRequestClose:function(){Y||E()},cannotBeDismissed:!0,actions:[Y?null:(0,L.jsx)(d.Z,{label:(0,L.jsx)(o.Trans,{id:"Cancel"}),onClick:E},"cancel"),ce.actionButton],onApply:ce.onApply,children:(0,L.jsxs)(h.sg,{noMargin:!0,children:[ce.content,oe]})})}},10158:function(e,t,n){"use strict";n.d(t,{D:function(){return p}});var r=n(1413),i=n(29439),a=n(28381),o=n(84140),s=n(39909),l=n(23818),c=n(76683),u=n(29343),d={previewImage:{position:"relative",objectFit:"contain",verticalAlign:"middle",pointerEvents:"none",transition:"opacity 0.1s ease-in-out"},previewImagePixelated:{width:"100%",imageRendering:(0,s.g)(),padding:15}},p=function(e){var t=e.assetShortHeader,n=e.maxSize,s=e.loading,p=t.previewImageUrls[0],f=(0,o.kt)(t),h=a.useState(!1),g=(0,i.Z)(h,2),m=g[0],x=g[1],v=a.useCallback((function(){return x(!0)}),[]),b=a.useMemo((function(){return(0,r.Z)((0,r.Z)({maxWidth:n?n-20:"100%",maxHeight:n?n-20:"100%",opacity:m?1:0},d.previewImage),(0,o.V0)(t)?d.previewImagePixelated:void 0)}),[m,n,t]);return f?(0,u.jsx)(c.Z,{style:b,url:p,alt:t.name,onLoad:v},p):(0,u.jsx)(l.W,{style:b,src:p,alt:t.name,onLoad:v,loading:s},p)}},84090:function(e,t,n){"use strict";n.d(t,{KY:function(){return x},po:function(){return j}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(84140),l=n(36465),c=n(49819),u=n(39818),d=n(1525),p=n(71106),f=n(12123),h=n(65056),g=n(29343),m={filters:null,publicAssetPacks:null,privateAssetPackListingDatas:null,authors:null,licenses:null,environment:"live",setEnvironment:function(){},assetShortHeadersSearchResults:null,publicAssetPacksSearchResults:null,privateAssetPackListingDatasSearchResults:null,fetchAssetsAndFilters:function(){},error:null,assetFiltersState:{animatedFilter:new u.FL,setAnimatedFilter:function(e){},viewpointFilter:new u.GI,setViewpointFilter:function(e){},dimensionFilter:new u.C9,setDimensionFilter:function(e){},objectTypeFilter:new u.Jk,setObjectTypeFilter:function(e){},colorFilter:new u.ad,setColorFilter:function(e){},licenseFilter:new u.t3,setLicenseFilter:function(e){},assetSwappingFilter:new u.O3,setAssetSwappingFilter:function(e){}},assetPackFiltersState:{typeFilter:new u.lz({}),setTypeFilter:function(e){}},clearAllFilters:function(){},currentPage:d.h1,useSearchItem:function(e,t,n,r){return null},setInitialPackUserFriendlySlug:function(e){},getAssetShortHeaderFromId:function(e){return null}},x=o.createContext(m),v=function(e){return e.name+"\n"+e.shortDescription+"\n"+e.tags.join(", ")},b=function(e){return e.name+"\n"+e.tag},C=function(e){return e.name+"\n"+e.description},j=function(e){var t=e.children,n=o.useContext(d.xP),m=n.searchText,j=o.useState(null),y=(0,a.Z)(j,2),Z=y[0],k=y[1],w=o.useCallback((function(e){return Z&&Z[e]||null}),[Z]),T=o.useState(null),S=(0,a.Z)(T,2),P=S[0],I=S[1],E=o.useContext(p.ZP),M=E.receivedAssetShortHeaders,L=E.receivedAssetPacks,A=E.limits,O=o.useState(null),R=(0,a.Z)(O,2),F=R[0],D=R[1],N=o.useState(null),_=(0,a.Z)(N,2),B=_[0],U=_[1],V=o.useState(null),H=(0,a.Z)(V,2),z=H[0],W=H[1],G=o.useState(null),Y=(0,a.Z)(G,2),q=Y[0],J=Y[1],X=o.useState(null),K=(0,a.Z)(X,2),Q=K[0],$=K[1],ee=o.useState("live"),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],ie=o.useState(null),ae=(0,a.Z)(ie,2),oe=ae[0],se=ae[1],le=o.useState(null),ce=(0,a.Z)(le,2),ue=ce[0],de=ce[1],pe=o.useRef(!1),fe=(0,h.Z)().showAlert,he=o.useState(new u.FL),ge=(0,a.Z)(he,2),me=ge[0],xe=ge[1],ve=o.useState(new u.GI),be=(0,a.Z)(ve,2),Ce=be[0],je=be[1],ye=o.useState(new u.C9),Ze=(0,a.Z)(ye,2),ke=Ze[0],we=Ze[1],Te=o.useState(new u.Jk),Se=(0,a.Z)(Te,2),Pe=Se[0],Ie=Se[1],Ee=o.useState(new u.ad),Me=(0,a.Z)(Ee,2),Le=Me[0],Ae=Me[1],Oe=o.useState(new u.t3),Re=(0,a.Z)(Oe,2),Fe=Re[0],De=Re[1],Ne=o.useState(new u.O3),_e=(0,a.Z)(Ne,2),Be=_e[0],Ue=_e[1],Ve=o.useMemo((function(){return[me,Ce,ke,Pe,Le,Fe,Be]}),[me,Ce,ke,Pe,Le,Fe,Be]),He=o.useState(new u.lz({receivedAssetPacks:L})),ze=(0,a.Z)(He,2),We=ze[0],Ge=ze[1],Ye=o.useMemo((function(){return[We]}),[We]),qe=!!A&&!!A.capabilities.classrooms&&A.capabilities.classrooms.hidePremiumProducts,Je=o.useCallback((function(){(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a,o,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(null),e.prev=1,e.next=4,(0,s.FV)({environment:ne});case 4:return t=e.sent,n=t.publicAssetShortHeaders,i=t.publicFilters,a=t.publicAssetPacks,e.next=10,(0,s.Dz)({environment:ne});case 10:return o=e.sent,e.next=13,(0,s.$l)({environment:ne});case 13:return c=e.sent,e.next=16,(0,l.Ab)();case 16:u=e.sent,console.info("Loaded ".concat(n?n.length:0," assets from the asset store.")),U(a),I(n),D(i),J(o),$(c),W(u),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(1),console.error("Unable to load the assets from the asset store:",e.t0),se(e.t0);case 30:case"end":return e.stop()}}),e,null,[[1,26]])})))()}),[ne]);o.useEffect((function(){var e={};P&&P.forEach((function(t){e[t.id]=t})),M&&M.forEach((function(t){e[t.id]=t})),Object.keys(e).length>0&&k(e)}),[P,M]),o.useEffect((function(){if(ue&&!pe.current&&B&&L&&z&&ue){pe.current=!0;var e=(0,f.WY)({publicAssetPacks:B,receivedAssetPacks:L,userFriendlySlug:ue});if(e)return n.openPackPage({assetPack:e,storeSearchText:!0,clearSearchText:!1}),pe.current=!1,void de(null);var t=(0,f.Nh)({privateAssetPackListingDatas:z,userFriendlySlug:ue});if(t)return n.openPrivateAssetPackInformationPage({privateAssetPackListingData:t,storeSearchText:!0,clearSearchText:!1}),pe.current=!1,void de(null);fe({title:{id:"Asset pack not found"},message:{id:"The link to the asset pack you've followed seems outdated. Why not take a look at the other packs in the asset store?"}})}}),[B,L,z,n,fe,ue]),o.useEffect((function(){Je()}),[Je]);var Xe=o.useMemo((function(){if(!B||!B.starterPacks)return null;var e={};return B.starterPacks.forEach((function(t){var n=t.tag;e[n]&&!t.externalWebLink&&console.warn("Multiple public asset packs with the same tag: ".concat(n)),e[n]=t})),e}),[B]),Ke=o.useMemo((function(){if(!z)return null;var e={};return qe||z.forEach((function(t){var n=t.id;e[n]&&console.warn("Multiple private asset packs with the same id: ".concat(n)),e[n]=t})),e}),[z,qe]),Qe=n.getCurrentPage(),$e=Qe.filtersState,et=$e.chosenCategory,tt=$e.chosenFilters,nt=(0,c.az)(Z,v,m,et,tt,Ve),rt=(0,c.az)(Xe,b,m,et,null,Ye),it=(0,c.az)(Ke,C,m,et,null,Ye),at=o.useMemo((function(){return{animatedFilter:me,setAnimatedFilter:xe,viewpointFilter:Ce,setViewpointFilter:je,dimensionFilter:ke,setDimensionFilter:we,objectTypeFilter:Pe,setObjectTypeFilter:Ie,colorFilter:Le,setColorFilter:Ae,licenseFilter:Fe,setLicenseFilter:De,assetSwappingFilter:Be,setAssetSwappingFilter:Ue}}),[me,xe,Ce,je,ke,we,Pe,Ie,Le,Ae,Fe,De,Be,Ue]),ot=o.useMemo((function(){return{typeFilter:We,setTypeFilter:Ge}}),[We,Ge]),st=o.useCallback((function(){at.setAnimatedFilter(new u.FL),at.setViewpointFilter(new u.GI),at.setDimensionFilter(new u.C9),at.setObjectTypeFilter(new u.Jk),at.setColorFilter(new u.ad),at.setLicenseFilter(new u.t3),ot.setTypeFilter(new u.lz({}))}),[at,ot]),lt=o.useMemo((function(){return{assetShortHeadersSearchResults:nt,publicAssetPacksSearchResults:rt,privateAssetPackListingDatasSearchResults:qe?[]:it,fetchAssetsAndFilters:Je,filters:F,publicAssetPacks:B,privateAssetPackListingDatas:qe?[]:z,authors:q,licenses:Q,environment:ne,setEnvironment:re,error:oe,currentPage:Qe,assetFiltersState:at,assetPackFiltersState:ot,clearAllFilters:st,useSearchItem:function(e,t,n,r){return(0,c.az)(Z,v,e,t,n,r)},setInitialPackUserFriendlySlug:de,getAssetShortHeaderFromId:w}}),[nt,rt,qe,it,Je,F,B,z,q,Q,ne,oe,Qe,at,ot,st,w,Z]);return(0,g.jsx)(x.Provider,{value:lt,children:t})}},35721:function(e,t,n){"use strict";n.d(t,{K:function(){return E},a:function(){return P}});var r=n(28381),i=n(36600),a=n(3108),o=n(86278),s=n(73693),l=n(61325),c=n(39818),u=n(84090),d=n(10888),p=n(40243),f=n(1413),h=n(29439),g=n(29277),m=n(37237),x=n(11858),v=n(29343),b={container:{position:"relative",display:"inline-block"},picker:{position:"absolute",right:"8px",top:"19px"},pickerNoLabel:{position:"absolute",right:"8px",top:"8px"}},C=function(e){return/^#{0,1}[0-9a-fA-F]{6}$/.test(e)?(0,x.f5)(e):null},j=function(e){var t,n,i=e.fullWidth,a=e.disableAlpha,o=e.id,s=e.floatingLabelText,l=e.helperMarkdownText,c=e.onChange,u=e.color,d=r.useState(u?(0,x.TU)(u.r,u.g,u.b):""),p=(0,h.Z)(d,2),j=p[0],y=p[1];t=u,n=C(j),(t&&(0,x.Y9)(t.r,t.g,t.b))!==(n&&(0,x.Y9)(n.r,n.g,n.b))&&y(u?(0,x.TU)(u.r,u.g,u.b):"");var Z=function(e){var t=C(j),n=C(e);y(e),n!==t&&c(n)};return(0,v.jsxs)("div",{style:(0,f.Z)((0,f.Z)({},b.container),{},{width:i?"100%":void 0}),children:[(0,v.jsx)(g.ZP,{id:o,fullWidth:a,floatingLabelText:s,floatingLabelFixed:!0,helperMarkdownText:l,type:"text",hintText:"#ff8844",value:j,onChange:function(e){return Z(e.target.value)}}),(0,v.jsx)("div",{style:s?b.picker:b.pickerNoLabel,children:(0,v.jsx)(m.Z,{disableAlpha:!0,onChangeComplete:function(e){y((0,x.TU)(e.rgb.r,e.rgb.g,e.rgb.b)),c(e.rgb)},color:C(j)})})]})},y=n(91153),Z=n(71106),k=n(1525),w=function(e){var t=e.filterKey,n=e.title,r=e.choices,c=e.isChoiceChecked,u=e.setChoiceChecked;return(0,v.jsx)(i.I18n,{children:function(e){var i=e.i18n;return(0,v.jsxs)(a.UQ,{defaultExpanded:!0,children:[(0,v.jsx)(a._m,{children:(0,v.jsx)(o.Z,{displayInlineAsSpan:!0,children:n})}),(0,v.jsx)(a.X1,{children:(0,v.jsx)(l.ak,{children:r.map((function(e){return(0,v.jsx)(s.Z,{label:i._(e.label),checked:c(e.value),onCheck:function(t,n){return u(e.value,n)}},e.value)}))})})]},t)}})},T=function(e){var t=e.filterKey,n=e.title,r=e.choices,i=e.values,a=e.setValues;return(0,v.jsx)(w,{filterKey:t,title:n,choices:r,isChoiceChecked:function(e){return i.has(e)},setChoiceChecked:function(e,t){t?i.add(e):i.delete(e),a(i)}})},S=function(e){var t=e.filterKey,n=e.title,r=e.choices,i=e.searchFilter,a=e.setSearchFilter,o=e.onFilterChange;return(0,v.jsx)(T,{filterKey:t,title:n,choices:r,values:i.tags,setValues:function(e){a(new c.GI(e)),o()}})},P=function(e){var t=e.filterKey,n=e.title,r=e.min,i=e.max,s=e.scale,l=e.step,c=e.range,u=e.setRange,d=e.valueLabelFormat,f=e.marks;return(0,v.jsxs)(a.UQ,{defaultExpanded:!0,children:[(0,v.jsx)(a._m,{children:(0,v.jsx)(o.Z,{displayInlineAsSpan:!0,children:n})}),(0,v.jsx)(a.X1,{children:(0,v.jsx)(p.sg,{expand:!0,children:(0,v.jsx)(p.x1,{noMargin:!0,children:(0,v.jsx)(y.Z,{value:c,min:r,max:i,step:l,scale:s,marks:f||!0,valueLabelDisplay:"auto",onChange:function(e){return u(e)},valueLabelFormat:d})})})})]},t)},I=function(e){var t=e.filterKey,n=e.title,r=e.color,i=e.setColor;return(0,v.jsxs)(a.UQ,{defaultExpanded:!0,children:[(0,v.jsx)(a._m,{children:(0,v.jsx)(o.Z,{displayInlineAsSpan:!0,children:n})}),(0,v.jsx)(a.X1,{children:(0,v.jsx)(p.sg,{expand:!0,children:(0,v.jsx)(p.x1,{noMargin:!0,children:(0,v.jsx)(j,{disableAlpha:!0,fullWidth:!0,color:r,onChange:i})})})})]},t)},E=function(e){var t=e.assetSwappedObject,n=r.useContext(u.KY),a=n.assetFiltersState,o=n.assetPackFiltersState,s=n.clearAllFilters,l=r.useContext(k.xP),f=r.useContext(Z.ZP).receivedAssetPacks,h=r.useCallback((function(){l.openSearchResultPage()}),[l]);return(0,v.jsxs)(p.sg,{noMargin:!0,children:[t?null:(0,v.jsx)(w,{filterKey:"PackType",title:(0,v.jsx)(i.Trans,{id:"Pack type"}),choices:[{label:{id:"Free"},value:"free"},{label:{id:"Premium"},value:"premium"},{label:{id:"Owned"},value:"owned"}],isChoiceChecked:function(e){return"free"===e&&o.typeFilter.isFree||"premium"===e&&o.typeFilter.isPremium||"owned"===e&&o.typeFilter.isOwned},setChoiceChecked:function(e,t){var n=o.typeFilter,r="free"===e?t:n.isFree,i="premium"===e?t:n.isPremium,a="owned"===e?t:n.isOwned;o.setTypeFilter(new c.lz({isFree:r,isPremium:i,isOwned:a,receivedAssetPacks:f})),h()}}),(0,v.jsx)(w,{filterKey:"Animation",title:(0,v.jsx)(i.Trans,{id:"Animation"}),choices:[{label:{id:"Multiple frames"},value:"multiple-frames"},{label:{id:"Multiple states"},value:"multiple-states"}],isChoiceChecked:function(e){return"multiple-frames"===e&&a.animatedFilter.mustBeAnimated||"multiple-states"===e&&a.animatedFilter.mustHaveSeveralState},setChoiceChecked:function(e,t){var n=a.animatedFilter,r="multiple-frames"===e?t:n.mustBeAnimated,i="multiple-states"===e?t:n.mustHaveSeveralState;a.setAnimatedFilter(new c.FL(r,i)),h()}}),(0,v.jsx)(S,{filterKey:"Viewpoint",title:(0,v.jsx)(i.Trans,{id:"Viewpoint"}),choices:[{label:{id:"Top-down"},value:"top-down"},{label:{id:"Side view"},value:"side view"},{label:{id:"Isometric"},value:"isometric"}],searchFilter:a.viewpointFilter,setSearchFilter:a.setViewpointFilter,onFilterChange:h}),(0,v.jsx)(P,{filterKey:"PixelSize",title:(0,v.jsx)(i.Trans,{id:"Pixel size"}),min:Math.log2(c.C9.boundMin),max:Math.log2(c.C9.boundMax),step:.5,scale:function(e){return Math.round(Math.pow(2,e))},range:[Math.log2(a.dimensionFilter.dimensionMin),Math.log2(a.dimensionFilter.dimensionMax)],setRange:function(e){a.setDimensionFilter(new c.C9(Math.pow(2,e[0]),Math.pow(2,e[1]))),h()}}),t?null:(0,v.jsx)(T,{filterKey:"ObjectType",title:(0,v.jsx)(i.Trans,{id:"Type of objects"}),choices:[{label:{id:"Sprite"},value:"sprite"},{label:{id:"Tiled sprite"},value:"tiled"},{label:{id:"Panel sprite"},value:"9patch"},{label:{id:"3D model"},value:"Scene3D::Model3DObject"},{label:{id:"Tilemap"},value:"TileMap::SimpleTileMap"}],values:a.objectTypeFilter.objectTypes,setValues:function(e){a.setObjectTypeFilter(new c.Jk(e)),h()}}),(0,v.jsx)(I,{filterKey:"Color",title:(0,v.jsx)(i.Trans,{id:"Color"}),color:a.colorFilter.color,setColor:function(e){a.setColorFilter(new c.ad(e)),h()}}),(0,v.jsx)(w,{filterKey:"License",title:(0,v.jsx)(i.Trans,{id:"License"}),choices:[{label:{id:"Exclude attribution requirements"},value:"without-attribution"}],isChoiceChecked:function(e){return a.licenseFilter.attributionFreeOnly},setChoiceChecked:function(e,t){a.setLicenseFilter(new c.t3(t)),h()}}),(0,v.jsx)(p.x1,{justifyContent:"center",children:(0,v.jsx)(d.Z,{label:(0,v.jsx)(i.Trans,{id:"Clear all filters"}),primary:!1,onClick:function(){s(),h()}})})]})}},1525:function(e,t,n){"use strict";n.d(t,{C$:function(){return d},h1:function(){return c},qR:function(){return h},wA:function(){return p},xP:function(){return f}});var r=n(93433),i=n(1413),a=n(29439),o=n(28381),s=n(29343),l={chosenCategory:null,chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}},c={openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,openedBundleListingData:null,selectedFolders:[],filtersState:l,displayAssets:!1},u={openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,openedBundleListingData:null,selectedFolders:[],filtersState:l,displayAssets:!0},d=function(e){return e===c||!e.openedAssetShortHeader&&!e.openedPrivateAssetPackListingData&&!e.openedPrivateGameTemplateListingData&&!e.openedAssetPack&&!e.openedBundleListingData&&e.filtersState===l&&!e.displayAssets},p=function(e){return!d(e)&&!e.openedAssetShortHeader&&!e.openedPrivateAssetPackListingData&&!e.openedPrivateGameTemplateListingData&&!e.openedBundleListingData},f=o.createContext({searchText:"",setSearchText:function(){},getCurrentPage:function(){return c},isRootPage:!0,backToPreviousPage:function(){return c},openHome:function(){return c},openAssetSwapping:function(){return c},clearHistory:function(){},clearPreviousPageFromHistory:function(){},openSearchResultPage:function(){},openTagPage:function(e){},openShopCategoryPage:function(e){},openPackPage:function(){},openPrivateAssetPackInformationPage:function(){},openPrivateGameTemplateInformationPage:function(){},openBundleInformationPage:function(){},openAssetDetailPage:function(){},navigateInsideFolder:function(e){},goBackToFolderIndex:function(e){}}),h=function(e){var t=o.useState(""),n=(0,a.Z)(t,2),d=n[0],h=n[1],g=o.useState({previousPages:[c]}),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=x.previousPages,C=o.useMemo((function(){return{searchText:d,setSearchText:h,getCurrentPage:function(){return b[b.length-1]},isRootPage:b.length<=1,backToPreviousPage:function(){if(b.length>1){var e=b.slice(0,b.length-1),t=e[e.length-1];return v({previousPages:e}),t}return 1===b.length?b[0]:c},openHome:function(){return v({previousPages:[c]}),c},openAssetSwapping:function(){var e=(0,i.Z)({},u);return v({previousPages:[e]}),e},clearHistory:function(){v((function(e){if(e.previousPages.length<=1)return e;var t=e.previousPages[e.previousPages.length-1];return{previousPages:[c,t]}}))},clearPreviousPageFromHistory:function(){v((function(e){return e.previousPages.length<=1?e:{previousPages:e.previousPages.slice(0,e.previousPages.length-1)}}))},openSearchResultPage:function(){v((function(e){var t=e.previousPages[e.previousPages.length-1];if(p(t)){var n=(0,i.Z)((0,i.Z)({},t),{},{pageBreakIndex:0,scrollPosition:0});return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(e.previousPages.slice(0,-1)),[n])})}return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(e.previousPages),[u])})}))},openTagPage:function(e){v((function(t){return(0,i.Z)((0,i.Z)({},t),{},{previousPages:[].concat((0,r.Z)(t.previousPages),[{openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,openedBundleListingData:null,displayAssets:!0,filtersState:{chosenCategory:{node:{name:e,allChildrenTags:[],children:[]},parentNodes:[]},chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}},selectedFolders:[e]}])})}))},openShopCategoryPage:function(e){v((function(t){return(0,i.Z)((0,i.Z)({},t),{},{previousPages:[].concat((0,r.Z)(t.previousPages),[{openedAssetShortHeader:null,openedShopCategory:e,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,openedBundleListingData:null,filtersState:l,displayAssets:!1,selectedFolders:[]}])})}))},openPackPage:function(e){var t=e.assetPack,n=e.storeSearchText,a=e.clearSearchText;v((function(e){var a=e.previousPages[e.previousPages.length-1],o=(0,i.Z)((0,i.Z)({},a),{},{searchText:n?d:""}),s=e.previousPages.slice(0,e.previousPages.length-1),l=[].concat((0,r.Z)(s),[o]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(l),[{openedAssetShortHeader:null,openedShopCategory:a&&a.openedShopCategory||null,openedAssetPack:t,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,openedBundleListingData:null,displayAssets:!0,filtersState:{chosenCategory:{node:{name:t.tag,allChildrenTags:[],children:[]},parentNodes:[]},chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},setChosenCategory:function(){}},selectedFolders:[t.tag]}])})})),a&&h("")},openPrivateAssetPackInformationPage:function(e){var t=e.privateAssetPackListingData,n=e.storeSearchText,a=e.clearSearchText;v((function(e){var a=e.previousPages[e.previousPages.length-1],o=(0,i.Z)((0,i.Z)({},a),{},{searchText:n?d:""}),s=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(s),[o]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:t,openedPrivateGameTemplateListingData:null,openedBundleListingData:null,filtersState:l,displayAssets:!1,selectedFolders:[]}])})})),a&&h("")},openAssetDetailPage:function(e){var t=e.assetShortHeader,n=e.storeSearchText,a=e.clearSearchText;v((function(e){var a=e.previousPages[e.previousPages.length-1],o=(0,i.Z)((0,i.Z)({},a),{},{searchText:n?d:""}),s=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(s),[o]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:t,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,openedBundleListingData:null,filtersState:l,displayAssets:!1,selectedFolders:[]}])})})),a&&h("")},openPrivateGameTemplateInformationPage:function(e){var t=e.privateGameTemplateListingData,n=e.storeSearchText,a=e.clearSearchText;v((function(e){var a=e.previousPages[e.previousPages.length-1],o=(0,i.Z)((0,i.Z)({},a),{},{searchText:n?d:""}),s=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(s),[o]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:t,openedBundleListingData:null,filtersState:l,displayAssets:!1,selectedFolders:[]}])})})),a&&h("")},openBundleInformationPage:function(e){var t=e.bundleListingData,n=e.storeSearchText,a=e.clearSearchText;v((function(e){var a=e.previousPages[e.previousPages.length-1],o=(0,i.Z)((0,i.Z)({},a),{},{searchText:n?d:""}),s=e.previousPages.slice(0,e.previousPages.length-1),c=[].concat((0,r.Z)(s),[o]);return(0,i.Z)((0,i.Z)({},e),{},{previousPages:[].concat((0,r.Z)(c),[{openedAssetShortHeader:null,openedShopCategory:null,openedAssetPack:null,openedPrivateAssetPackListingData:null,openedPrivateGameTemplateListingData:null,openedBundleListingData:t,filtersState:l,displayAssets:!1,selectedFolders:[]}])})})),a&&h("")},navigateInsideFolder:function(e){v((function(t){var n=t.previousPages[t.previousPages.length-1],a=(0,i.Z)((0,i.Z)({},n),{},{selectedFolders:[].concat((0,r.Z)(n.selectedFolders),[e])}),o=t.previousPages.slice(0,t.previousPages.length-1),s=[].concat((0,r.Z)(o),[a]);return(0,i.Z)((0,i.Z)({},t),{},{previousPages:s})}))},goBackToFolderIndex:function(e){v((function(t){var n=t.previousPages[t.previousPages.length-1],a=(0,i.Z)((0,i.Z)({},n),{},{selectedFolders:n.selectedFolders.slice(0,e+1)}),o=t.previousPages.slice(0,t.previousPages.length-1),s=[].concat((0,r.Z)(o),[a]);return(0,i.Z)((0,i.Z)({},t),{},{previousPages:s})}))}}}),[d,b]);return(0,s.jsx)(f.Provider,{value:C,children:e.children})}},39818:function(e,t,n){"use strict";n.d(t,{C9:function(){return g},FL:function(){return h},GI:function(){return u},Jk:function(){return d},O3:function(){return b},ad:function(){return x},cx:function(){return C},lz:function(){return f},t3:function(){return p}});var r=n(37762),i=n(43144),a=n(15671),o=n(60136),s=n(29388),l=n(49819),c=n(11858),u=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return(0,a.Z)(this,n),t.call(this,e)}return(0,i.Z)(n)}(l.hM),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;(0,a.Z)(this,e),this.objectTypes=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){return 0===this.objectTypes.size||this.objectTypes.has(e.objectType)?1:0}},{key:"hasFilters",value:function(){return this.objectTypes.size>0}}]),e}(),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,a.Z)(this,e),this.attributionFreeOnly=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(t){return!this.attributionFreeOnly||e.noAttributionLicenses.includes(t.license)?1:0}},{key:"hasFilters",value:function(){return this.attributionFreeOnly}}]),e}();p.noAttributionLicenses=["CC0 (public domain)","Apache 2.0","Trademark of GDevelop Ltd (fair use authorised in GDevelop games)","SIL Open Font License 1.1 (OFL)"];var f=function(){function e(t){var n=t.isFree,r=void 0!==n&&n,i=t.isPremium,o=void 0!==i&&i,s=t.isOwned,l=void 0!==s&&s,c=t.receivedAssetPacks,u=void 0===c?[]:c;(0,a.Z)(this,e),this.isFree=r,this.isPremium=o,this.isOwned=l,this.receivedAssetPacks=u||[]}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){return this.isFree||this.isPremium||this.isOwned?this.isOwned&&e.prices&&this.receivedAssetPacks.map((function(e){return e.id})).includes(e.id)||this.isPremium&&e.prices||this.isFree&&!e.prices?1:0:1}},{key:"hasFilters",value:function(){return this.isFree||this.isPremium||this.isOwned}}]),e}(),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,a.Z)(this,e),this.mustBeAnimated=t,this.mustHaveSeveralState=n}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){var t=e.maxFramesCount>1,n=e.animationsCount>1;return this.mustBeAnimated&&!t||this.mustHaveSeveralState&&!n?0:1}},{key:"hasFilters",value:function(){return this.mustBeAnimated||this.mustHaveSeveralState}}]),e}(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.boundMin,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.boundMax;(0,a.Z)(this,e),this.dimensionMin=t,this.dimensionMax=n}return(0,i.Z)(e,[{key:"getPertinence",value:function(t){return t.width&&t.height?(this.dimensionMin===e.boundMin||this.dimensionMin<=t.width)&&(this.dimensionMin===e.boundMax||t.width<=this.dimensionMax)||(this.dimensionMin===e.boundMin||this.dimensionMin<=t.height)&&(this.dimensionMin===e.boundMax||t.height<=this.dimensionMax)?1:0:1}},{key:"hasFilters",value:function(){return this.dimensionMin!==e.boundMin||this.dimensionMax!==e.boundMax}}]),e}();g.boundMin=8,g.boundMax=2048;var m=function(e,t){var n=(0,c.lC)(e.r,e.g,e.b),r=(0,c.lC)(t.r,t.g,t.b),i=n[1],a=r[1];if(0===i){var o=a-i,s=r[2]-n[2];return 1-(o*o+s*s)/2}var l,u=0===a?1:2*Math.abs(((r[0]-n[0]+.5)%(l=1)+l)%l-.5),d=a-i,p=r[2]-n[2];return 1-(4*u*u+d*d+p*p)/6},x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,a.Z)(this,e),this.color=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){var t=this.color;if(!t)return 1;var n,i=Number.MIN_VALUE,a=(0,r.Z)(e.dominantColors);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=(0,c.D6)(o),l=m(s,t);i=Math.max(i,l)}}catch(u){a.e(u)}finally{a.f()}return i}},{key:"hasFilters",value:function(){return!!this.color}}]),e}(),v=new Set(["top-down","isometric","side view","pixel art","pirate","space","sea","city","medieval","nature","forest"]),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,a.Z)(this,e),t?(this.isEnabled=!0,this.objectType=n?n.objectType:function(e){switch(e){case"Sprite":return"sprite";case"TiledSpriteObject::TiledSprite":return"tiled";case"PanelSpriteObject::PanelSprite":return"9patch";default:return e}}(t.getType()),this.hasSeveralStates=t.getConfiguration().getAnimationsCount()>0,this.other=n,this.tags=n?n.tags.slice(1).filter((function(e){return!v.has(e)})):[]):(this.isEnabled=!1,this.objectType="",this.hasSeveralStates=!1,this.other=null,this.tags=[])}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){if(!this.isEnabled)return 1;if(this.objectType!==e.objectType)return 0;var t=1,n=this.other;if(!n){var r=e.animationsCount>1;return this.hasSeveralStates&&!r&&(t*=.8),t}var i=e.tags.includes("top-down"),a=e.tags.includes("isometric"),o=e.tags.includes("side view"),s=n.tags.includes("top-down"),l=n.tags.includes("isometric"),c=n.tags.includes("side view");(i&&s||a&&l||o&&c||!i&&!a&&!o&&!s&&!l&&!c||(t*=.8),this.tags.length>0)&&(t*=.8+.2*this.tags.reduce((function(t,n){return t+(e.tags.includes(n)?1:0)}),0)/this.tags.length);var u=e.width*e.height,d=n.width*n.height;t*=.95+.05*Math.min(u,d)/Math.max(u,d);var p=e.width/e.height,f=n.width/n.height;t*=.95+.05*Math.min(p,f)/Math.max(p,f);var h=e.maxFramesCount>1,g=e.animationsCount>1,m=n.maxFramesCount>1,x=n.animationsCount>1;return(m||x)&&h===m&&g===x&&(t=.76+2*(Math.max(.5,t)-.5)*.24),t}},{key:"hasFilters",value:function(){return!0}}]),e}(),C=function(){function e(t){(0,a.Z)(this,e),this.other=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){if(this.other===e||this.other.objectType!==e.objectType)return 0;var t=e.maxFramesCount>1,n=e.animationsCount>1,i=this.other.maxFramesCount>1,a=this.other.animationsCount>1;if(t!==i||n!==a)return 0;var o=e.tags.includes("top-down"),s=e.tags.includes("isometric"),l=e.tags.includes("side view"),u=this.other.tags.includes("top-down"),d=this.other.tags.includes("isometric"),p=this.other.tags.includes("side view");if(!(o&&u||s&&d||l&&p||!o&&!s&&!l&&!u&&!d&&!p))return 0;var f=e.width*e.height,h=this.other.width*this.other.height;if(2*Math.min(f,h)<Math.max(f,h))return 0;var g=e.width/e.height,x=this.other.width/this.other.height;if(1.5*Math.min(g,x)<Math.max(g,x))return 0;var v,b=0,C=(0,r.Z)(e.dominantColors);try{for(C.s();!(v=C.n()).done;){var j,y=v.value,Z=(0,c.D6)(y),k=(0,r.Z)(this.other.dominantColors);try{for(k.s();!(j=k.n()).done;){var w=j.value,T=(0,c.D6)(w),S=m(Z,T);b=Math.max(b,S)}}catch(P){k.e(P)}finally{k.f()}}}catch(P){C.e(P)}finally{C.f()}return b}},{key:"hasFilters",value:function(){return!0}}]),e}()},12123:function(e,t,n){"use strict";n.d(t,{WY:function(){return d},pz:function(){return b},Xk:function(){return g},El:function(){return h},gf:function(){return m},Ht:function(){return x},Nh:function(){return p},af:function(){return f},Cn:function(){return v}});var r=n(93433),i=n(37762),a=(n(28381),n(36465)),o=n(27230),s=n(29343),l=function(e){return e.toLowerCase().replace(/\xfc/g,"ue").replace(/\xe4/g,"ae").replace(/\xf6/g,"oe").replace(/\xdf/g,"ss").replace(new RegExp("["+[".","=","-"].join("")+"]","g")," ").replace(/-{2,}/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"").replace(/[^\w ]/gi,"").replace(/[ ]/gi,"-")},c=function(e){return"".concat(l(e.name),"-").concat(l(e.tag))},u=function(e){return e.slice(-36)},d=function(e){var t=e.receivedAssetPacks,n=e.publicAssetPacks,r=e.userFriendlySlug,a=u(r),o=t.find((function(e){return a===e.id}));if(o)return o;var s=function(e,t){var n,r=(0,i.Z)(e.starterPacks);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(c(a)===t)return a}}catch(o){r.e(o)}finally{r.f()}return null}(n,r);return s||null},p=function(e){var t=e.privateAssetPackListingDatas,n=e.userFriendlySlug,r=u(n),i=t.find((function(e){return r===e.id}));return i||null},f=function(e){var t=e.privateGameTemplateListingDatas,n=e.userFriendlySlug,r=u(n),i=t.find((function(e){return r===e.id}));return i||null},h=function(e){var t=e.bundleListingDatas,n=e.userFriendlySlug,r=u(n),i=t.find((function(e){return r===e.id}));return i||null},g=function(e){var t=e.bundleListingDatas,n=e.category,r=t.find((function(e){return e.categories.includes(n)}));return r||null},m=function(e){var t=e.allBundleListingDatas,n=e.displayedBundleListingDatas,i=e.onBundleSelection,l=e.receivedBundles,c=e.openedShopCategory,u=e.hasAssetFiltersApplied,d=e.onlyShowAssets;if(!t||!n||!i||u||d)return[];var p=[],f=[];n.filter((function(e){return!c||e.categories.includes(c)})).forEach((function(e){var t=!!l&&!!l.find((function(t){return t.id===e.id})),n=(0,s.jsx)(o.GM,{bundleListingData:e,onSelect:function(){i(e)},owned:t},e.id);t?f.push(n):p.push(n)}));var h=(l||[]).filter((function(e){return!t.find((function(t){return t.id===e.id}))})).map((function(e){var t=(0,a.zv)({bundle:e});return(0,s.jsx)(o.GM,{bundleListingData:t,onSelect:function(){i(t)},owned:!0},e.id)}));return[].concat(f,(0,r.Z)(h),p)},x=function(e){var t=e.allPrivateGameTemplateListingDatas,n=e.displayedPrivateGameTemplateListingDatas,i=e.onPrivateGameTemplateSelection,l=e.receivedGameTemplates,c=e.openedShopCategory,u=e.hasAssetFiltersApplied,d=e.hasAssetPackFiltersApplied,p=e.onlyShowAssets;if(!t||!n||!i||u||d||p)return[];var f=[],h=[];n.filter((function(e){return!c||"game-template"===c})).forEach((function(e){var t=!!l&&!!l.find((function(t){return t.id===e.id})),n=(0,s.jsx)(o.u7,{privateGameTemplateListingData:e,onSelect:function(){i(e)},owned:t},e.id);t?h.push(n):f.push(n)}));var g=(l||[]).filter((function(e){return!t.find((function(t){return t.id===e.id}))})).map((function(e){var t=(0,a.Gf)({gameTemplate:e});return(0,s.jsx)(o.u7,{privateGameTemplateListingData:t,onSelect:function(){i(t)},owned:!0},e.id)}));return[].concat(h,(0,r.Z)(g),f)},v=function(e){var t=e.publicAssetPacks,n=e.onPublicAssetPackSelection,r=e.openedShopCategory,i=e.hasAssetFiltersApplied;return t&&n&&!i?t.filter((function(e){return!r||e.categories.includes(r)})).map((function(e,t){return(0,s.jsx)(o.fV,{assetPack:e,onSelect:function(){return n(e)}},"".concat(e.tag,"-").concat(t))})):[]},b=function(e){var t=e.allPrivateAssetPackListingDatas,n=e.displayedPrivateAssetPackListingDatas,i=e.onPrivateAssetPackSelection,l=e.publicAssetPackTiles,c=e.receivedAssetPacks,u=e.openedShopCategory,d=e.hasAssetFiltersApplied;if(!t||!n||d)return{allAssetPackStandAloneTiles:[],allAssetPackBundleTiles:[]};var p=[],f=[],h=[],g=[],m=n.filter((function(e){return!u||e.categories.includes(u)}));i&&m.forEach((function(e){var t=!!c&&!!c.find((function(t){return t.id===e.id})),n=(0,s.jsx)(o.c7,{assetPackListingData:e,onSelect:function(){i(e)},owned:t},e.id);e.includedListableProductIds&&e.includedListableProductIds.length?t?g.push(n):h.push(n):t?f.push(n):p.push(n)}));var x=[],v=[];i&&(c||[]).filter((function(e){return!t.find((function(t){return t.id===e.id}))})).forEach((function(e){var t=(0,a.YO)({assetPack:e}),n=(0,s.jsx)(o.c7,{assetPackListingData:t,onSelect:function(){i(t)},owned:!0},e.id);t.includedListableProductIds&&t.includedListableProductIds.length?v.push(n):x.push(n)}));var b=[].concat(g,v,h);return{allAssetPackStandAloneTiles:[].concat(f,x,(0,r.Z)(function(e,t,n,r){for(var i=0,a=0,o=[];i<e.length||a<t.length;){var s=e.slice(i,i+n),l=t.slice(a,a+r);i+=n,a+=r,s.forEach((function(e){return o.push(e)})),l.forEach((function(e){return o.push(e)}))}return o}(p,l||[],2,1))),allAssetPackBundleTiles:b}}},8462:function(e,t,n){"use strict";n.d(t,{j:function(){return g},s:function(){return s}});var r=n(1413),i=n(37762),a=n(41006),o=["BBText::BBText","TextObject::Text","Lighting::LightObject","PrimitiveDrawing::Drawer","TileMap::TileMap","TileMap::CollisionMask","TileMap::SimpleTileMap","Video::VideoObject"],s=function(e){return!o.includes(e.getType())},l=function(e,t,n,a,o){var s,l=[],c=(0,i.Z)(n);try{var u=function(){var n=s.value,i=a.find((function(e){return e.name===n.name}))||(0,r.Z)((0,r.Z)({},a[0]),{},{name:n.name});l.push(o(e,t,n,i))};for(c.s();!(s=c.n()).done;)u()}catch(h){c.e(h)}finally{c.f()}var d,p=(0,i.Z)(a);try{var f=function(){var e=d.value;n.some((function(t){return t.name===e.name}))||l.push(e)};for(p.s();!(d=p.n()).done;)f()}catch(h){p.e(h)}finally{p.f()}return l},c=function(e,t,n){if(0===n.animations.length)return null;var r=n.animations[0].directions[0];if(0===r.sprites.length)return null;var i=t.getPIXITexture(e,r.sprites[0].image);return i.valid?{width:i.width,height:i.height}:null},u=function(e,t,n,r,i){var a=c(e,t,n),o=i?{width:i.width,height:i.height}:c(e,t,r);return a&&o?{scaleX:o.width/a.width,scaleY:o.height/a.height}:{scaleX:1,scaleY:1}},d=function(e,t,n){return(0,r.Z)((0,r.Z)({},e),{},{x:e.x*t,y:e.y*n})},p=function(e,t,n,i,a,o){var s=n.directions[0],l=i.directions[0];return(0,r.Z)((0,r.Z)({},i),{},{directions:[(0,r.Z)((0,r.Z)({},l),{},{sprites:l.sprites.map((function(e,t){return function(e,t,n,i,a,o){return(0,r.Z)((0,r.Z)({},i),{},{originPoint:d(n.originPoint,a,o),centerPoint:d(n.centerPoint,a,o),points:n.points.map((function(e){return d(e,a,o)}))})}(0,0,s.sprites[0],e,a,o)}))})]})},f=function(e,t,n,r){return r},h=function(e,t,n,r){return l(e,t,n,r,f)},g=function(e,t,n,i,o){var s=(0,a.XH)(n),c=(0,a.XH)(i);if("Sprite"===n.getType()){s.preScale=function(e,t,n,r,i){var a=u(e,t,n,r,i),o=a.scaleX,s=a.scaleY,l=(n.preScale||1)/Math.sqrt(o*s);return l>.5&&Math.abs(Math.round(l)-l)<.001?Math.round(l):l}(e,t,s,c,o);var d=u(e,t,s,c,o),f=d.scaleX,g=d.scaleY;s.animations=function(e,t,n,r,i,a){return l(e,t,n,r,(function(e,t,n,r){return p(0,0,n,r,i,a)}))}(e,t,s.animations,c.animations,f,g),s.assetStoreId=c.assetStoreId}else if("Scene3D::Model3DObject"===n.getType()){var m=s.content.width*s.content.height*s.content.depth,x=c.content.width*c.content.height*c.content.depth,v=Math.pow(m/x,1/3);s.content=(0,r.Z)((0,r.Z)({},c.content),{},{animations:h(e,t,s.content.animations,c.content.animations),width:c.content.width*v,height:c.content.height*v,depth:c.content.depth*v,originLocation:s.content.originLocation,centerLocation:s.content.centerLocation}),s.assetStoreId=c.assetStoreId}else s=(0,r.Z)((0,r.Z)({},c),{},{name:s.name,type:s.type,variables:s.variables,behaviors:s.behaviors,effects:s.effects});(0,a.qx)(n,s,"unserializeFrom",e)}},5946:function(e,t,n){"use strict";var r=n(1413),i=n(74165),a=n(37762),o=n(15861),s=n(29439),l=n(36600),c=n(28381),u=n(1773),d=n(10888),p=n(1637),f=n(61651),h=n(934),g=n(77987),m=n(8462),x=n(58247),v=n(65056),b=n(60022),C=n(1525),j=n(75333),y=n(29343);function Z(e){var t=e.project,n=(e.layout,e.eventsBasedObject,e.objectsContainer),r=e.object,f=e.resourceManagementProps,Z=e.onClose,k=e.minimalUI,w=e.onWillInstallExtension,T=e.onExtensionInstalled,S=c.useContext(C.xP),P=S.getCurrentPage().openedAssetShortHeader,I=c.useState(!1),E=(0,s.Z)(I,2),M=E[0],L=E[1],A=(0,g.wF)({project:t,resourceManagementProps:f,onWillInstallExtension:w,onExtensionInstalled:T}),O=(0,v.Z)().showAlert;c.useEffect((function(){(0,j.Ds)({originalObjectName:r.getName(),objectType:r.getType()})}),[]);var R=c.useCallback((0,o.Z)((0,i.Z)().mark((function e(){var o,s,l,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return L(!0),e.prev=3,e.next=6,A({assetShortHeader:P,objectsContainer:n,setIsAssetBeingInstalled:function(){}});case 6:if(o=e.sent){e.next=9;break}throw new Error("Failed to install asset");case 9:s=r.getName(),o.createdObjects.length>0&&(0,m.j)(t,x.Z,r,o.createdObjects[0],P),l=(0,a.Z)(o.createdObjects);try{for(l.s();!(c=l.n()).done;)u=c.value,n.removeObject(u.getName())}catch(i){l.e(i)}finally{l.f()}(0,j.HP)({originalObjectName:s,newObjectName:r.getName(),objectType:r.getType()}),Z({swappingDone:!0}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),O({title:{id:"Could not swap asset"},message:{id:"Something went wrong while swapping the asset. Please try again."}}),console.error("Error while installing asset:",e.t0);case 21:return e.prev=21,S.backToPreviousPage(),L(!1),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[3,17,21,25]])}))),[A,t,r,n,P,Z,S,O]),F=P&&!k?(0,y.jsx)(b.Z,{primary:!0,label:M?(0,y.jsx)(l.Trans,{id:"Adding..."}):(0,y.jsx)(l.Trans,{id:"Swap"}),onClick:R,disabled:M,id:"swap-asset-button"},"add-asset"):null;c.useEffect((function(){P&&!M&&k&&R()}),[M,P]);var D=c.useRef(null),N=c.useCallback((function(){D.current&&D.current.onClose(),Z({swappingDone:!1})}),[Z]);return(0,y.jsx)(l.I18n,{children:function(e){e.i18n;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.ZP,{title:(0,y.jsx)(l.Trans,{id:"Swap {0} with another asset",values:{0:r.getName()}}),actions:[F],secondaryActions:[(0,y.jsx)(d.Z,{label:(0,y.jsx)(l.Trans,{id:"Back"}),onClick:N,id:"close-button",fullWidth:!0,primary:!0},"close")],onApply:k?void 0:R,onRequestClose:N,open:!0,flexBody:!0,fullHeight:!0,id:"asset-swapping-dialog",actionsFullWidthOnMobile:!0,children:(0,y.jsx)(p.M,{ref:D,onlyShowAssets:!0,assetSwappedObject:r,minimalUI:k})}),M&&(0,y.jsx)(h.Z,{showImmediately:!0})]})}})}t.Z=function(e){return(0,y.jsx)(f.ZP,{componentTitle:(0,y.jsx)(l.Trans,{id:"Asset store dialog"}),scope:"new-object-dialog",onClose:function(){return e.onClose({swappingDone:!1})},children:(0,y.jsx)(Z,(0,r.Z)({},e))})}},36173:function(e,t,n){"use strict";n.d(t,{Z:function(){return Q},f:function(){return Y}});var r=n(1413),i=n(93433),a=n(74165),o=n(15861),s=n(29439),l=n(36600),c=n(28381),u=n(65522),d=n.n(u),p=n(84090),f=n(84140),h=n(40243),g=n(68196),m=n(74824),x=n(29343),v=function(e){return(0,x.jsx)(h.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,x.jsx)(g.$,{title:(0,x.jsx)(l.Trans,{id:"No result"}),description:e.message||(0,x.jsx)(l.Trans,{id:"Try something else, browse the packs or create your object from scratch!"}),actionLabel:(0,x.jsx)(l.Trans,{id:"Clear all filters"}),actionButtonId:"clear-filters-button",onAction:e.onClear,actionIcon:(0,x.jsx)(m.Z,{})})})},b=n(35038),C=n(6996),j=n(2632),y=n(78081),Z=n(75383),k=n(71106),w=n(27230),T=n(3679),S=n(23818),P=n(86278),I=n(61325),E=n(41418),M=n(96591),L=n(2066),A=n(6429),O=function(e){var t=e.steps;return(0,x.jsx)(A.Z,{separator:">","aria-label":"breadcrumb",children:t.map((function(e,t){return e.onClick?(0,x.jsx)(M.Z,{onClick:e.onClick,href:e.href,children:e.label},"breadcrumb".concat(t)):(0,x.jsx)(P.Z,{noMargin:!0,children:e.label},"breadcrumb".concat(t))}))})},R=n(2866),F=n(10888),D=n(14932),N=n(9734),_=n(41908),B=n(73412),U=n(49807),V=n(12123),H=n(67980),z=function(e,t){switch(e){case"small":return t?3:2;case"medium":default:return 2;case"large":return 4;case"xlarge":return 5}},W=function(e,t){switch(e){case"small":return t?2:1;case"medium":return 1;default:return 2}},G=function(e){return 60*(e+1)},Y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.filter((function(e){if(!t.length)return!0;var n=e.tags;return t.every((function(e){return n.includes(e)}))})),i=function(e){return 60*e}(n),a=Math.min(G(n),r.length);return 0===i&&a===r.length||(r=r.slice(i,a)),r},q=10,J=z("xlarge",!0),X={grid:{maxWidth:(H.LF+10)*J,width:"calc(100% + ".concat(q,"px)"),overflow:"unset"},scrollView:{display:"flex",flexDirection:"column"},previewImageContainer:{display:"flex",flex:.7,alignItems:"flex-start"},previewImage:{width:"100%",aspectRatio:"16 / 9",objectFit:"contain",position:"relative"},openProductContainer:{display:"flex",paddingLeft:32,marginTop:8,marginBottom:8}},K=function(e){var t=e.currentPage,n=e.pageBreakIndex,r=e.setPageBreakIndex,i=e.assetShortHeaders,a=e.scrollView;return(0,x.jsx)(h.sg,{children:(0,x.jsxs)(I.pJ,{justifyContent:"center",children:[(0,x.jsx)(F.Z,{label:(0,x.jsx)(l.Trans,{id:"Show previous assets"}),onClick:function(){t.pageBreakIndex=Math.max(0,(t.pageBreakIndex||0)-1),r(t.pageBreakIndex),a&&a.scrollToPosition(0)},disabled:n<=0},"previous-assets"),(0,x.jsx)(F.Z,{label:(0,x.jsx)(l.Trans,{id:"Show next assets"}),onClick:function(){t.pageBreakIndex=(t.pageBreakIndex||0)+1,r(t.pageBreakIndex),a&&a.scrollToPosition(0)},disabled:i.length<G(n)},"next-assets")]})})},Q=c.forwardRef((function(e,t){var n=e.assetShortHeaders,u=e.onOpenDetails,g=e.noResultsPlaceHolder,m=e.privateAssetPackListingDatas,A=e.privateGameTemplateListingDatas,H=e.bundleListingDatas,J=e.publicAssetPacks,Q=e.onPrivateAssetPackSelection,$=e.onPublicAssetPackSelection,ee=e.onPrivateGameTemplateSelection,te=e.onBundleSelection,ne=e.onFolderSelection,re=e.onGoBackToFolderIndex,ie=e.noScroll,ae=e.currentPage,oe=e.onlyShowAssets,se=e.hideDetails,le=c.useContext(p.KY),ce=le.error,ue=le.fetchAssetsAndFilters,de=le.clearAllFilters,pe=le.licenses,fe=le.authors,he=le.assetFiltersState,ge=le.assetPackFiltersState,me=le.privateAssetPackListingDatas,xe=c.useContext(R.mJ),ve=xe.error,be=xe.fetchGameTemplates,Ce=xe.privateGameTemplateListingDatas,je=c.useContext(U.bQ),ye=je.error,Ze=je.fetchBundles,ke=je.bundleListingDatas,we=c.useContext(k.ZP),Te=we.receivedAssetPacks,Se=we.receivedGameTemplates,Pe=we.receivedBundles,Ie=we.assetPackPurchases,Ee=we.bundlePurchases,Me=c.useState(null),Le=(0,s.Z)(Me,2),Ae=Le[0],Oe=Le[1],Re=c.useContext(B.Z).openUserPublicProfile,Fe=c.useState(!1),De=(0,s.Z)(Fe,2),Ne=De[0],_e=De[1],Be=c.useState(ae&&ae.pageBreakIndex||0),Ue=(0,s.Z)(Be,2),Ve=Ue[0],He=Ue[1],ze=c.useMemo((function(){return ae?{openedAssetPack:ae.openedAssetPack,selectedFolders:ae.selectedFolders}:{openedAssetPack:null,selectedFolders:[]}}),[ae]),We=ze.openedAssetPack,Ge=ze.selectedFolders,Ye=(0,C.UQ)(),qe=Ye.windowSize,Je=Ye.isLandscape,Xe=c.useRef(null);c.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=Xe.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=Xe.current;t&&t.scrollToPosition(e)},setPageBreakIndex:function(e){He(e)}}}));var Ke=c.useCallback((function(){ue(),be(),Ze()}),[ue,be,Ze]),Qe=ce||ve||ye,$e=c.useMemo((function(){return!We&&ge.typeFilter.hasFilters()}),[ge,We]),et=c.useMemo((function(){return he.animatedFilter.hasFilters()||he.viewpointFilter.hasFilters()||he.colorFilter.hasFilters()||he.dimensionFilter.hasFilters()||he.licenseFilter.hasFilters()||he.objectTypeFilter.hasFilters()}),[he]),tt=c.useMemo((function(){return!We&&ge.typeFilter.isOwned&&!ge.typeFilter.isPremium&&!ge.typeFilter.isFree&&!et}),[ge,et,We]),nt=g||(tt?(0,x.jsx)(v,{message:(0,x.jsx)(l.Trans,{id:"You don't own any pack yet!"}),onClear:de}):$e&&et?(0,x.jsx)(v,{message:(0,x.jsx)(l.Trans,{id:"Cannot filter on both asset packs and assets at the same time. Try clearing one of the filters!"}),onClear:de}):(0,x.jsx)(v,{onClear:de}));c.useEffect((function(){_e(!0);var e=setTimeout((function(){return _e(!1)}),100);return function(){return clearTimeout(e)}}),[Ge]);var rt=c.useMemo((function(){return Ge.length&&n?function(e){var t=e.assetShortHeaders,n=e.selectedFolders,r=[],i=new Set;t.forEach((function(e){var t=e.tags,a=n[n.length-1],o=n.filter((function(e){return e===a})).length,s=function(e,t,n){var r=0,i=-1;do{i=e.indexOf(t,i+1)}while(-1!==i&&++r<n);return i}(t,n[n.length-1],o);if(-1===s)return t;var l=t.filter((function(e,t){return t>s}));l.length>0&&r.push(l),l.forEach((function(e){return i.add(e)}))}));var a=Array.from(i).filter((function(e){return r.filter((function(t){return t.includes(e)})).length===r.length})),o=r.map((function(e){return e.filter((function(e){return!a.includes(e)}))})),s=new Set;return o.forEach((function(e){return s.add(e[0])})),Array.from(s).filter(Boolean)}({assetShortHeaders:n,selectedFolders:Ge}):[]}),[n,Ge]),it=c.useMemo((function(){return rt.length&&ne?rt.map((function(e){return(0,x.jsx)(w.Zq,{tag:e,onSelect:function(){ne(e)}},e)})):[]}),[rt,ne]),at=c.useMemo((function(){return me&&We&&We.id?me.find((function(e){return e.id===We.id})):null}),[me,We]),ot=c.useMemo((function(){if(!n)return null;if($e&&!We)return[];var e=function(e){switch(e){case"small":return 80;case"medium":default:return 120;case"large":case"xlarge":return 130}}(qe);return Y(n,Ge,Ve).map((function(t){return(0,x.jsx)(w.TT,{assetShortHeader:t,onOpenDetails:function(){return u(t)},size:e,margin:5,hideShortDescription:!!se},t.id)}))}),[n,$e,We,Ge,Ve,qe,u,se]),st=c.useMemo((function(){return(0,V.Cn)({publicAssetPacks:J,onPublicAssetPackSelection:$,hasAssetFiltersApplied:et})}),[J,$,et]),lt=c.useMemo((function(){return(0,V.pz)({allPrivateAssetPackListingDatas:me,displayedPrivateAssetPackListingDatas:m,onPrivateAssetPackSelection:Q,publicAssetPackTiles:st,receivedAssetPacks:Te,hasAssetFiltersApplied:et})}),[me,m,Q,st,Te,et]),ct=lt.allAssetPackStandAloneTiles,ut=lt.allAssetPackBundleTiles,dt=c.useMemo((function(){return(0,V.Ht)({allPrivateGameTemplateListingDatas:Ce,displayedPrivateGameTemplateListingDatas:A,onPrivateGameTemplateSelection:ee,receivedGameTemplates:Se,hasAssetFiltersApplied:et,hasAssetPackFiltersApplied:$e,onlyShowAssets:oe})}),[Ce,A,ee,Se,et,$e,oe]),pt=c.useMemo((function(){return(0,V.gf)({allBundleListingDatas:ke,displayedBundleListingDatas:H,onBundleSelection:te,receivedBundles:Pe,hasAssetFiltersApplied:et,onlyShowAssets:oe})}),[ke,H,te,Pe,et,oe]),ft=We?We.thumbnailUrl?We.thumbnailUrl:We.previewImageUrls?We.previewImageUrls[0]:null:null;c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(at){e.next=3;break}return Oe(null),e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,E.D1)(at.sellerId);case 6:t=e.sent,Oe(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()}),[at]);var ht=c.useMemo((function(){return We&&fe&&We.authors?We.authors.map((function(e){return fe.find((function(t){return t.name===e.name}))})).filter(Boolean):[]}),[We,fe]),gt=c.useMemo((function(){return We&&pe&&We.licenses?We.licenses.map((function(e){return pe.find((function(t){return t.name===e.name}))})).filter(Boolean):[]}),[We,pe]),mt=c.useMemo((function(){return(0,_.aS)({productId:We&&We.id?We.id:null,receivedProducts:[].concat((0,i.Z)(Te||[]),(0,i.Z)(Pe||[])),productPurchases:[].concat((0,i.Z)(Ie||[]),(0,i.Z)(Ee||[])),allProductListingDatas:[].concat((0,i.Z)(me||[]),(0,i.Z)(H||[]))})}),[Ie,Ee,We,me,H,Te,Pe]);return(0,x.jsxs)(j.Z,{ref:Xe,id:"asset-store-listing",style:(0,r.Z)((0,r.Z)({},X.scrollView),ie?{overflow:"hidden"}:{}),children:[!ot&&!Qe&&(0,x.jsx)(y.Z,{}),!ot&&Qe&&(0,x.jsx)(Z.Z,{onRetry:Ke,children:(0,x.jsx)(l.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}),ae&&n&&n.length>G(0)&&Ve>0&&(0,x.jsx)(K,{currentPage:ae,pageBreakIndex:Ve,setPageBreakIndex:He,assetShortHeaders:n,scrollView:Xe.current}),!We&&pt.length&&0===Ve?(0,x.jsx)(h.x1,{children:(0,x.jsx)(h.sg,{noMargin:!0,expand:!0,children:(0,x.jsx)(b.Z,{cols:z(qe,Je),style:X.grid,cellHeight:"auto",spacing:q,children:pt})})}):null,!We&&dt.length&&0===Ve?(0,x.jsx)(h.x1,{children:(0,x.jsx)(h.sg,{noMargin:!0,expand:!0,children:(0,x.jsx)(b.Z,{cols:z(qe,Je),style:X.grid,cellHeight:"auto",spacing:q,children:dt})})}):null,!We&&ut.length&&0===Ve?(0,x.jsx)(h.x1,{children:(0,x.jsx)(h.sg,{noMargin:!0,expand:!0,children:(0,x.jsx)(b.Z,{cols:z(qe,Je),style:X.grid,cellHeight:"auto",spacing:q,children:ut})})}):null,!We&&ct.length&&0===Ve?(0,x.jsx)(h.x1,{children:(0,x.jsx)(h.sg,{noMargin:!0,expand:!0,children:(0,x.jsx)(b.Z,{cols:z(qe,Je),style:X.grid,cellHeight:"auto",spacing:q,children:ct})})}):null,We&&(0,x.jsx)(h.sg,{children:(0,x.jsxs)(I.ep,{noResponsiveLandscape:!0,children:[ft&&(0,x.jsxs)("div",{style:X.previewImageContainer,children:[(0,x.jsx)(S.W,{style:X.previewImage,src:We.thumbnailUrl?We.thumbnailUrl:We.previewImageUrls?We.previewImageUrls[0]:"",alt:"Preview image of asset pack ".concat(We.name)},We.name),(0,x.jsx)(h.hS,{})]}),(0,x.jsxs)(h.sg,{noMargin:!0,alignItems:"flex-start",expand:!0,children:[(0,x.jsx)(P.Z,{size:"bold-title",children:We.name}),!!ht&&ht.length>0&&(0,x.jsxs)(P.Z,{size:"body",displayInlineAsSpan:!0,children:[(0,x.jsx)(l.Trans,{id:"by"})," ",ht.map((function(e,t){return(0,x.jsxs)(c.Fragment,{children:[t>0&&(0,x.jsx)(x.Fragment,{children:", "}),(0,x.jsx)(M.Z,{href:e.website,onClick:function(){return L.ZP.openExternalURL(e.website)},children:e.name},e.name)]},e.name)}))]}),!!gt&&gt.length>0&&(0,x.jsx)(P.Z,{size:"body",children:(0,x.jsx)(l.Trans,{id:"Type of License: <0>{0}</0>",values:{0:gt[0].name},components:[(0,x.jsx)(M.Z,{href:gt[0].website,onClick:function(){return L.ZP.openExternalURL(gt[0].website)}})]})}),Ae&&(0,x.jsxs)(P.Z,{displayInlineAsSpan:!0,size:"sub-title",children:[(0,x.jsx)(l.Trans,{id:"by"})," ",(0,x.jsx)(M.Z,{onClick:function(){return Re({userId:Ae.id,callbacks:{onAssetPackOpen:Q||void 0,onGameTemplateOpen:ee||void 0}})},href:"#",children:Ae.username||""})]}),mt&&Q&&(0,x.jsxs)(h.sg,{noMargin:!0,children:[(0,x.jsxs)(h.x1,{noMargin:!0,children:[(0,x.jsx)(P.Z,{size:"sub-title",children:(0,x.jsx)(l.Trans,{id:"Licensing"})}),(0,x.jsx)(D.Z,{size:"small",helpPagePath:"https://gdevelop.io/page/asset-store-license-agreement"})]}),(0,x.jsx)(N.i,{productType:"asset-pack",ownedLicense:mt}),(0,x.jsx)("div",{style:X.openProductContainer,children:(0,x.jsx)(F.Z,{label:(0,x.jsx)(l.Trans,{id:"Open in Store"}),onClick:function(){if(We.id&&me&&ae){var e=me.find((function(e){return e.id===We.id}));e&&Q(e,{forceProductPage:!0})}},primary:!0})})]})]})]})}),We&&(it.length||ot&&ot.length)?(0,x.jsx)(h.sg,{children:(0,x.jsx)(P.Z,{size:"section-title",children:(0,x.jsx)(l.Trans,{id:"Content"})})}):null,Ge.length>1&&re?(0,x.jsx)(h.sg,{children:(0,x.jsx)(h.x1,{children:(0,x.jsx)(O,{steps:Ge.map((function(e,t){return t===Ge.length-1?{label:d()(e)}:{label:d()(e),onClick:function(){re(t)},href:"#"}}))})})}):null,We&&it.length?(0,x.jsxs)(h.sg,{justifyContent:"center",noMargin:!0,children:[(0,x.jsx)(b.Z,{style:X.grid,cellHeight:"auto",cols:W(qe,Je),spacing:q,children:it}),(0,x.jsx)(h.hS,{})]}):null,Ne?(0,x.jsx)(y.Z,{}):ot&&ot.length?(0,x.jsx)(b.Z,{style:X.grid,cellHeight:"auto",children:ot}):We&&We.content&&(0,f.s0)(We)?(0,x.jsx)(T.Z,{assetPack:We}):null,ot&&!ot.length&&!pt.length&&!ut.length&&!ct.length&&!dt.length&&(!We||!We.content||!(0,f.s0)(We))&&nt,ae&&n&&n.length>G(0)&&(0,x.jsx)(K,{currentPage:ae,pageBreakIndex:Ve,setPageBreakIndex:He,assetShortHeaders:n,scrollView:Xe.current})]})}))},8162:function(e,t,n){"use strict";n.d(t,{N:function(){return C},y:function(){return b}});var r=n(93433),i=n(37762),a=n(74165),o=n(1413),s=n(15861),l=n(29439),c=n(28381),u=n(81442),d=n(39126),p=n(82069),f=n(36262),h=n(4900),g=n(29343),m=n.g.gd,x=new Set,v=new Set(["experimental"]),b=c.createContext({filters:null,searchResults:null,fetchBehaviors:function(){},error:null,searchText:"",setSearchText:function(){},allCategories:[],chosenCategory:"",setChosenCategory:function(){},setInstalledBehaviorMetadataList:function(){},translatedBehaviorShortHeadersByType:{},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}),C=function(e){var t=e.children,n=e.i18n,C=e.defaultSearchText,j=c.useState([]),y=(0,l.Z)(j,2),Z=y[0],k=y[1],w=c.useState({}),T=(0,l.Z)(w,2),S=T[0],P=T[1],I=c.useContext(f.ZP).values,E=I.showExperimentalExtensions,M=I.language,L=c.useState([]),A=(0,l.Z)(L,2),O=A[0],R=A[1],F=c.useState(null),D=(0,l.Z)(F,2),N=D[0],_=D[1],B=c.useState(null),U=(0,l.Z)(B,2),V=U[0],H=U[1],z=c.useRef(!1),W=c.useState(C||""),G=(0,l.Z)(W,2),Y=G[0],q=G[1],J=c.useState(""),X=(0,l.Z)(J,2),K=X[0],Q=X[1],$=(0,u.m)(),ee=c.useCallback((function(){Object.keys(S).length&&N===M||z.current||(0,s.Z)((0,a.Z)().mark((function e(){var t,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(null),q(""),z.current=!0,e.prev=3,e.next=6,(0,d.E)();case 6:t=e.sent,r=t.headers,i={},r.forEach((function(e){var t=(0,o.Z)((0,o.Z)({},e),{},{fullName:n._(e.fullName),description:n._(e.description),englishFullName:e.fullName,englishDescription:e.description});i[e.type]=t})),console.info("Loaded ".concat(r?r.length:0," behaviors from the extension store.")),P(i),_(M),R(t.views.default.firstIds.map((function(e){var t=e.extensionName,n=e.behaviorName;return m.PlatformExtension.getBehaviorFullType(t,n)}))),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.error("Unable to load the behaviors from the extension store:",e.t0),H(e.t0);case 20:z.current=!1;case 21:case"end":return e.stop()}}),e,null,[[3,16]])})))()}),[S,z,n,M,N]);c.useEffect((function(){if(!(Object.keys(S).length&&N===M||z.current)){var e=setTimeout((function(){console.info("Pre-fetching behaviors from extension store..."),ee()}),h.wi);return function(){return clearTimeout(e)}}}),[ee,S,z,M,N]);var te=c.useMemo((function(){var e={};for(var t in S){var n=(0,o.Z)({},S[t]);delete n.englishFullName,delete n.englishDescription,e[t]=n}var r,a=(0,i.Z)(Z);try{for(a.s();!(r=a.n()).done;){var s=r.value,l=S[s.type],c=l?{isInstalled:!0,tier:l.tier,version:l.version,changelog:l.changelog,url:l.url,headerUrl:l.headerUrl,authorIds:l.authorIds,authors:l.authors,extensionNamespace:l.extensionNamespace,objectType:s.objectType,allRequiredBehaviorTypes:s.allRequiredBehaviorTypes,previewIconUrl:s.previewIconUrl,category:s.category,tags:s.tags,type:s.type,name:s.name,extensionName:s.extensionName,fullName:s.fullName===l.englishFullName?l.fullName:s.fullName,description:s.description===l.englishDescription?l.description:s.description}:s;e[s.type]=c}}catch(u){a.e(u)}finally{a.f()}return e}),[Z,S]),ne=c.useMemo((function(){var e=new Set;for(var t in te)e.add(te[t].category);return(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))}),[te]),re=c.useMemo((function(){var e=new Set,t=function(){var t=te[n];t.tags.forEach((function(n){!E&&t.tier&&v.has(t.tier)||e.add(n)}))};for(var n in te)t();var i=(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}));return{allTags:i,defaultTags:i,tagsTree:[]}}),[te,E]),ie=c.useMemo((function(){return[].concat((0,r.Z)(Z.map((function(e){return e.type}))),(0,r.Z)(O))}),[O,Z]),ae=(0,p.qg)(te,{searchText:Y,chosenItemCategory:K,chosenCategory:$.chosenCategory,chosenFilters:$.chosenFilters,excludedTiers:E?x:v,defaultFirstSearchItemIds:ie}),oe=c.useMemo((function(){return{searchResults:ae,fetchBehaviors:ee,filters:re,allCategories:ne,chosenCategory:K,setChosenCategory:Q,error:V,searchText:Y,setSearchText:q,setInstalledBehaviorMetadataList:k,translatedBehaviorShortHeadersByType:S,filtersState:$}}),[ae,V,re,ne,K,Q,Y,k,S,$,ee]);return(0,g.jsx)(b.Provider,{value:oe,children:t})}},87779:function(e,t,n){"use strict";n.d(t,{Z:function(){return ge}});var r=n(1413),i=n(74165),a=n(15861),o=n(93433),s=n(29439),l=n(28381),c=n(36600),u=n(40243),d=n(20914),p=n(86278),f=n(61325),h=n(6996),g=n(92078),m=n(15859),x=n(41908),v=n(51137),b=n(71106),C=n(49807),j=n(75333),y=n(36465),Z=n(1773),k=n(54458),w=n(21676),T=n(2066),S=n(66789),P=n(1589),I=n(30268),E=n(10888),M=n(65056),L=n(91),A=n(23883),O=n(99328),R=n(29343),F=function(e){var t=e.bundleListingData,n=e.usageType,r=e.onClose,o=e.simulateAppStoreProduct,d=e.fastCheckout,h=e.onCloseAfterPurchaseDone,g=l.useContext(b.ZP),m=g.profile,x=g.onOpenLoginDialog,C=g.onOpenCreateAccountDialog,j=g.receivedBundles,F=g.onPurchaseSuccessful,D=g.onRefreshBundlePurchases,N=g.bundlePurchases,_=l.useState(!1),B=(0,s.Z)(_,2),U=B[0],V=B[1],H=l.useState(!j),z=(0,s.Z)(H,2),W=z[0],G=z[1],Y=l.useState(!1),q=(0,s.Z)(Y,2),J=q[0],X=q[1],K=l.useState(!1),Q=(0,s.Z)(K,2),$=Q[0],ee=Q[1],te=l.useState(""),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],ae=(0,M.Z)().showAlert,oe=l.useState(!1),se=(0,s.Z)(oe,2),le=se[0],ce=se[1],ue=(0,v.PN)()||o,de=!m&&d,pe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var r,a,o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(!1),!ue){e.next=12;break}if(m){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,V(!0),e.next=8,(0,v.ZA)(t.appStoreProductId);case 8:return e.prev=8,V(!1),e.finish(8);case 11:return e.abrupt("return");case 12:if(r=t.prices.find((function(e){return e.usageType===n}))){e.next=18;break}return console.error("Unable to find the price for the usage type",n),e.next=17,ae({title:{id:"An error happened"},message:{id:"Unable to find the price for this bundle. Please try again later."}});case 17:return e.abrupt("return");case 18:if(e.prev=18,V(!0),!d){e.next=25;break}return a=(0,y.GT)({productId:t.id,priceName:r.name,userId:m?m.id:void 0,userEmail:m?m.email:void 0,userUuid:m?void 0:(0,O.T)(),password:re||void 0}),ce(de),T.ZP.openExternalURL(a,{shouldOpenInSameTabIfPossible:de}),e.abrupt("return");case 25:if(m){e.next=27;break}return e.abrupt("return");case 27:o=(0,y.RB)({productId:t.id,priceName:r.name,userId:m.id,userEmail:m.email,password:re||void 0}),T.ZP.openExternalURL(o),e.next=43;break;case 31:if(e.prev=31,e.t0=e.catch(18),!(s=(0,L.T)(e.t0))||403!==s.status||"auth/wrong-password"!==s.code){e.next=39;break}return e.next=37,ae({title:{id:"Operation not allowed"},message:{id:"The password you entered is incorrect. Please try again."}});case 37:e.next=42;break;case 39:return console.error("Unable to get the checkout URL",e.t0),e.next=42,ae({title:{id:"An error happened"},message:{id:"Unable to get the checkout URL. Please try again later."}});case 42:V(!1);case 43:return e.prev=43,ie(""),e.finish(43);case 46:case"end":return e.stop()}}),e,null,[[4,,8,11],[18,31,43,46]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){T.ZP.isDev()?ee(!0):pe()};l.useEffect((function(){fe()}),[]);var he=l.useCallback((function(){h&&J&&h(),r()}),[h,J,r]);l.useEffect((function(){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(U&&N&&N.find((function(e){return e.productId===t.id})))){e.next=3;break}return e.next=3,F();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[U,N,t,F,h,D]),(0,w.Y)((function(){D()}),U&&!de?3900:null),l.useEffect((function(){var e;return(0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j&&(e=setTimeout((function(){return G(!1)}),3e3));case 1:case"end":return t.stop()}}),t)})))(),function(){clearTimeout(e)}}),[j]),l.useEffect((function(){j&&(j.find((function(e){return e.id===t.id}))&&(U?(V(!1),X(!0)):J||he()))}),[j,t,U,he,W,J]);var ge=m||d?J?{subtitle:(0,R.jsx)(c.Trans,{id:"Your purchase has been processed!"}),content:(0,R.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,R.jsx)(p.Z,{children:(0,R.jsx)(c.Trans,{id:"You can now go back to use your new bundle."})})})}:U?{subtitle:ue?(0,R.jsx)(c.Trans,{id:"Complete your purchase with the app store."}):(0,R.jsx)(c.Trans,{id:"Complete your payment on the web browser"}),content:ue?(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(f.ak,{justifyContent:"center",alignItems:"center",children:[(0,R.jsx)(S.Z,{size:40}),(0,R.jsx)(p.Z,{children:(0,R.jsx)(c.Trans,{id:"The purchase will be linked to your account once done."})})]})}):(0,R.jsxs)(R.Fragment,{children:[!de&&(0,R.jsxs)(u.x1,{justifyContent:"center",alignItems:"center",children:[(0,R.jsx)(S.Z,{size:20}),(0,R.jsx)(u.LZ,{}),(0,R.jsx)(p.Z,{children:(0,R.jsx)(c.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,R.jsx)(u.LZ,{}),(0,R.jsx)(u.x1,{justifyContent:"center",children:(0,R.jsx)(P.Z,{children:de?(0,R.jsx)(c.Trans,{id:"Once you're done, you will receive an email confirmation so that you can link the bundle to your account."}):(0,R.jsx)(c.Trans,{id:"Once you're done, come back to GDevelop and the bundle will be added to your account automatically."})})})]})}:W?{subtitle:(0,R.jsx)(c.Trans,{id:"Loading your profile..."}),content:(0,R.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,R.jsx)(S.Z,{size:20})})}:{subtitle:m?(0,R.jsx)(c.Trans,{id:"The bundle {0} will be linked to your account {1}.",values:{0:t.name,1:m.email}}):(0,R.jsx)(c.Trans,{id:"The bundle {0} will be sent to the email address provided in the checkout.",values:{0:t.name}}),content:ue?null:(0,R.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,R.jsx)(p.Z,{children:(0,R.jsx)(c.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,R.jsx)(c.Trans,{id:"Log-in to purchase this item"}),content:(0,R.jsx)(k.Z,{onOpenLoginDialog:x,onOpenCreateAccountDialog:C,message:(0,R.jsx)(c.Trans,{id:"Bundles and their content will be linked to your user account and available for all your projects. Log-in or sign-up to purchase this bundle. (or restore your existing purchase)."}),justifyContent:"center"})},me=m&&!U&&!J&&!W,xe=[(0,R.jsx)(E.Z,{label:le?(0,R.jsx)(c.Trans,{id:"Loading..."}):J||de?(0,R.jsx)(c.Trans,{id:"Close"}):(0,R.jsx)(c.Trans,{id:"Cancel"}),onClick:he,disabled:le},"cancel"),me?(0,R.jsx)(Z.vF,{primary:!0,label:(0,R.jsx)(c.Trans,{id:"Continue"}),onClick:fe},"continue"):null];return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(Z.ZP,{title:(0,R.jsx)(c.Trans,{id:"{0}",values:{0:t.name}}),maxWidth:"sm",open:!0,onRequestClose:he,actions:xe,onApply:J?he:fe,flexColumnBody:!0,fullscreen:"never-even-on-mobile",children:[(0,R.jsxs)(f.pJ,{justifyContent:"center",alignItems:"center",children:[J&&(0,R.jsx)(I.Z,{}),(0,R.jsx)(p.Z,{size:"sub-title",children:ge.subtitle})]}),ge.content]}),$&&(0,R.jsx)(A.Z,{onApply:pe,onClose:function(){return ee(!1)},passwordValue:re,setPasswordValue:ie})]})},D=n(20928),N=n(68151),_=n(78081),B=n(11374),U=n(46976),V=n(38092),H=n(10283),z=function(e){var t=e.onClose,n=l.useContext(b.ZP),r=n.profile,o=n.getAuthorizationHeader,u=l.useState(null),d=(0,s.Z)(u,2),h=d[0],g=d[1];return l.useEffect((function(){if(r){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.w6)(o,r.id);case 2:t=e.sent,g(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[r,o]),r?(0,R.jsxs)(Z.ZP,{title:(0,R.jsx)(c.Trans,{id:"Redemption Codes"}),maxWidth:"md",open:!0,onRequestClose:t,actions:[(0,R.jsx)(E.Z,{label:(0,R.jsx)(c.Trans,{id:"Close"}),onClick:t,id:"close-button",fullWidth:!0,primary:!0},"close")],flexColumnBody:!0,children:[(0,R.jsx)(V.Z,{kind:"info",children:(0,R.jsx)(c.Trans,{id:"To use a code, go to your profile!"})}),(0,R.jsxs)(f.pJ,{children:[(0,R.jsx)(D.Z,{}),(0,R.jsx)(p.Z,{size:"sub-title",children:(0,R.jsx)(c.Trans,{id:"Here are your redemption codes:"})})]}),h?(0,R.jsxs)(B.iA,{children:[(0,R.jsx)(B.xD,{children:(0,R.jsxs)(B.SC,{children:[(0,R.jsx)(B.bY,{children:(0,R.jsx)(c.Trans,{id:"Code"})}),(0,R.jsx)(B.bY,{children:(0,R.jsx)(c.Trans,{id:"Subscription Plan"})}),(0,R.jsx)(B.bY,{children:(0,R.jsx)(c.Trans,{id:"Duration"})}),(0,R.jsx)(B.bY,{children:(0,R.jsx)(c.Trans,{id:"Remaining usage"})})]})}),(0,R.jsx)(B.RM,{children:h.map((function(e){var t=e.givenSubscriptionPlanId;return(0,R.jsxs)(B.SC,{children:[(0,R.jsx)(B.Nn,{children:(0,R.jsx)(p.Z,{noMargin:!0,allowSelection:!0,children:e.code})}),(0,R.jsx)(B.Nn,{children:t&&(0,R.jsxs)(f.pJ,{noMargin:!0,alignItems:"center",children:[(0,U.sG)({planId:t,logoSize:20}),(0,R.jsx)(p.Z,{children:(0,U.FZ)(t)})]})}),(0,R.jsx)(B.Nn,{children:(0,R.jsx)(p.Z,{children:(0,H.v)(e.durationInDays)})}),(0,R.jsx)(B.Nn,{children:(0,R.jsx)(p.Z,{children:e.remainingUsageCount?1===e.remainingUsageCount?(0,R.jsx)(c.Trans,{id:"{0} use left",values:{0:e.remainingUsageCount}}):(0,R.jsx)(c.Trans,{id:"{0} uses left",values:{0:e.remainingUsageCount}}):(0,R.jsx)(c.Trans,{id:"No uses left"})})})]},e.code)}))})]}):(0,R.jsx)(_.Z,{})]}):null},W=n(80287),G=n(2866),Y=n(62903),q=n(84090),J=n(97890),X=n(40480),K=n(8511),Q=n(33714),$=n(48784),ee=n(86682),te={title:{overflowWrap:"anywhere",textWrap:"wrap"},image:{width:300,aspectRatio:"16 / 9"},imageContainer:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",borderRadius:8,overflow:"hidden"},discountedPrice:{textDecoration:"line-through",opacity:.7},discountChip:{height:24,backgroundColor:"#F03F18",color:"white"}},ne=function(e){var t=e.bundle,n=e.bundleListingData,r=e.simulateAppStoreProduct,y=e.i18n,Z=e.fastCheckout,k=e.onCloseAfterPurchaseDone,w=l.useContext(G.mJ).privateGameTemplateListingDatas,T=l.useContext(Y.q$).creditsPackageListingDatas,S=l.useContext(C.bQ).bundleListingDatas,P=l.useContext(q.KY).privateAssetPackListingDatas,I=l.useContext(J.ZP).listedCourses,M=l.useContext(b.ZP),L=M.receivedBundles,A=M.bundlePurchases,O=l.useState(null),D=(0,s.Z)(O,2),N=D[0],_=D[1],B=(0,h.UQ)(),U=B.isMobile,V=B.isMediumScreen,H=U||V,ne=l.useState(!1),re=(0,s.Z)(ne,2),ie=re[0],ae=re[1],oe=(0,v.PN)()||r,se=!!l.useMemo((function(){return(0,x.aS)({productId:n?n.id:null,receivedProducts:L,productPurchases:A,allProductListingDatas:S})}),[A,n,S,L]),le=l.useMemo((function(){return n&&S&&w&&P&&I&&T?(0,x.QS)({productListingDatas:[].concat((0,o.Z)(S),(0,o.Z)(w),(0,o.Z)(P),(0,o.Z)(I),(0,o.Z)(T)),productListingData:n}):null}),[n,S,w,P,I,T]),ce=l.useMemo((function(){return n?n.includedRedemptionCodes||[]:null}),[n]),ue=l.useMemo((function(){if(!le||!ce||!n)return U?(0,R.jsxs)(f.ak,{noMargin:!0,children:[(0,R.jsxs)(u.sg,{expand:!0,noMargin:!0,children:[(0,R.jsx)($.Z,{height:25}),(0,R.jsx)($.Z,{height:20}),(0,R.jsx)($.Z,{height:20})]}),(0,R.jsxs)(u.sg,{expand:!0,noMargin:!0,children:[(0,R.jsx)($.Z,{height:25}),(0,R.jsx)($.Z,{height:20}),(0,R.jsx)($.Z,{height:20})]})]}):(0,R.jsxs)(u.sg,{expand:!0,noMargin:!0,children:[(0,R.jsx)($.Z,{height:25}),(0,R.jsx)($.Z,{height:20}),(0,R.jsx)($.Z,{height:20})]});if(se)return(0,R.jsx)(u.x1,{noMargin:!0,children:(0,R.jsx)(E.Z,{primary:!0,label:(0,R.jsx)(c.Trans,{id:"See my subscription codes"}),onClick:function(){return ae(!0)}})});var e=(0,W.bP)({redemptionCodesIncludedInBundle:ce,bundleListingData:n,productListingDatasIncludedInBundle:le});return U?e.mobileLines:e.desktopLines}),[se,ce,n,le,U]),de=l.useMemo((function(){return(0,W.O1)({i18n:y,bundleListingData:n,productListingDatasIncludedInBundle:le,redemptionCodesIncludedInBundle:ce})}),[y,n,le,ce]),pe=l.useMemo((function(){return(0,W.Tm)({i18n:y,bundleListingData:n,productListingDatasIncludedInBundle:le,redemptionCodesIncludedInBundle:ce})}),[y,n,le,ce]),fe=l.useMemo((function(){return(0,m.e3)({i18n:y,productListingData:n,usageType:"default",plainText:!0})}),[y,n]),he=l.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!se){e.next=4;break}return e.abrupt("return");case 4:try{r=n.prices.find((function(e){return"default"===e.usageType})),(0,j.lA)({bundleId:t.id,bundleName:t.name,bundleTag:t.tag,usageType:"default",priceValue:r&&r.value,priceCurrency:r&&r.currency}),_(n)}catch(i){console.warn("Unable to send event",i)}case 5:case"end":return e.stop()}}),e)}))),[t,n,se]);return(0,R.jsx)(c.I18n,{children:function(e){var i=e.i18n;return(0,R.jsxs)(u.sg,{noOverflowParent:!0,noMargin:!0,children:[!se&&!H&&(0,R.jsx)(ee.L,{children:(0,R.jsx)(d.Z,{background:"medium",style:{padding:16},children:!!n&&(0,R.jsxs)(f.pJ,{noMargin:!0,justifyContent:"space-between",children:[n.visibleUntil?(0,R.jsx)(Q.Z,{visibleUntil:n.visibleUntil}):de?(0,R.jsxs)(u.sg,{noMargin:!0,alignItems:"flex-start",justifyContent:"center",children:[(0,R.jsx)(K.Z,{label:(0,R.jsx)(c.Trans,{id:"Bundle"}),style:te.discountChip}),(0,R.jsx)(p.Z,{color:"secondary",children:(0,R.jsx)(c.Trans,{id:"Get {estimatedTotalPriceFormatted} worth of value for less!",values:{estimatedTotalPriceFormatted:de}})})]}):(0,R.jsx)($.Z,{height:24,width:100}),de&&pe&&fe?(0,R.jsxs)(f.pJ,{justifyContent:"flex-end",noMargin:!0,children:[(0,R.jsxs)(u.sg,{noMargin:!0,alignItems:"flex-end",children:[(0,R.jsxs)(f.pJ,{children:[(0,R.jsx)(p.Z,{noMargin:!0,color:"secondary",size:"block-title",children:(0,R.jsx)("span",{style:te.discountedPrice,children:de})}),n.visibleUntil&&(0,R.jsx)(K.Z,{label:(0,R.jsx)(c.Trans,{id:"{0} OFF",values:{0:pe.savingsPercentageFormatted}}),style:te.discountChip})]}),(0,R.jsx)(p.Z,{noMargin:!0,size:"block-title",children:fe})]}),(0,R.jsxs)(f.ak,{noMargin:!0,alignItems:"center",children:[(0,R.jsx)(x.dP,{i18n:i,productListingData:n,selectedUsageType:"default",onUsageTypeChange:function(){},simulateAppStoreProduct:r,isAlreadyReceived:se,onClickBuy:he,onClickBuyWithCredits:function(){},customLabel:(0,R.jsx)(c.Trans,{id:"Buy now and save {0}",values:{0:pe.savingsPriceFormatted}})}),!oe&&(0,R.jsx)(X.Z,{})]})]}):(0,R.jsxs)(u.sg,{noMargin:!0,justifyContent:"flex-end",children:[(0,R.jsx)($.Z,{height:24,width:100}),(0,R.jsx)($.Z,{height:24,width:100})]})]})})}),!se&&H&&n&&n.visibleUntil&&(0,R.jsx)(ee.L,{children:(0,R.jsx)(Q.Z,{visibleUntil:n.visibleUntil})}),(0,R.jsx)(ee.L,{children:(0,R.jsxs)(f.ep,{noMargin:!0,alignItems:"center",justifyContent:"flex-start",forceMobileLayout:V,expand:!0,children:[(0,R.jsx)("div",{style:te.imageContainer,children:(0,R.jsx)("img",{src:t.previewImageUrls[0],style:te.image,alt:""})}),(0,R.jsxs)(f.ak,{expand:!0,justifyContent:"flex-start",noMargin:U,children:[(0,R.jsx)(p.Z,{size:"title",noMargin:!0,style:te.title,children:(0,g.a)(i,t.nameByLocale)}),(0,R.jsx)(u.x1,{noMargin:!0,children:(0,R.jsx)(p.Z,{noMargin:!0,children:(0,g.a)(i,t.longDescriptionByLocale)})}),ue]})]})}),!se&&H&&n&&(0,R.jsx)(ee.L,{children:(0,R.jsx)(d.Z,{background:"medium",style:{padding:16},children:de&&pe&&fe?(0,R.jsxs)(f.ep,{justifyContent:"flex-end",noMargin:!0,children:[(0,R.jsxs)(f.pJ,{alignItems:"center",justifyContent:"center",children:[n.visibleUntil&&(0,R.jsx)(K.Z,{label:(0,R.jsx)(c.Trans,{id:"{0} OFF",values:{0:pe.savingsPercentageFormatted}}),style:te.discountChip}),(0,R.jsx)(p.Z,{noMargin:!0,color:"secondary",size:"block-title",children:(0,R.jsx)("span",{style:te.discountedPrice,children:de})}),(0,R.jsx)(p.Z,{noMargin:!0,size:"block-title",children:fe})]}),(0,R.jsxs)(f.ak,{noMargin:!0,alignItems:"center",children:[(0,R.jsx)(x.dP,{i18n:i,productListingData:n,selectedUsageType:"default",onUsageTypeChange:function(){},simulateAppStoreProduct:r,isAlreadyReceived:se,onClickBuy:he,onClickBuyWithCredits:function(){},fullWidth:!0,customLabel:(0,R.jsx)(c.Trans,{id:"Buy now and save {0}",values:{0:((0,W.Tm)({i18n:i,bundleListingData:n,productListingDatasIncludedInBundle:le,redemptionCodesIncludedInBundle:ce})||{}).savingsPriceFormatted}})}),!oe&&(0,R.jsx)(X.Z,{})]})]}):(0,R.jsxs)(u.sg,{noMargin:!0,expand:!0,justifyContent:"flex-end",children:[(0,R.jsx)($.Z,{height:U?60:40}),(0,R.jsx)($.Z,{height:U?60:40})]})})}),!!N&&(0,R.jsx)(F,{bundleListingData:N,usageType:"default",onClose:function(){return _(null)},fastCheckout:Z,onCloseAfterPurchaseDone:k}),ie&&(0,R.jsx)(z,{onClose:function(){return ae(!1)}})]})}})},re=n(84140),ie=n(35038),ae=n(16021),oe=n(56885),se=n(54998),le=n(59202),ce=n(24910),ue=n(67980),de=n(72037),pe=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},fe=pe("xlarge",!0),he={grid:{maxWidth:(ue.LF+10)*fe,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")}},ge=function(e){var t=e.bundleListingData,n=e.onBack,d=e.onAssetPackOpen,g=e.onGameTemplateOpen,m=e.onBundleOpen,v=e.onCourseOpen,j=e.courses,y=e.getCourseCompletion,Z=e.noPadding,k=e.noActions,w=e.fastCheckout,T=e.onCloseAfterPurchaseDone,S=(0,h.UQ)(),P=S.windowSize,I=S.isLandscape,E=S.isMobile,M=l.useContext(C.bQ).bundleListingDatas,A=l.useContext(G.mJ).privateGameTemplateListingDatas,O=l.useContext(q.KY).privateAssetPackListingDatas,F=l.useContext(J.ZP).listedCourses,D=l.useContext(b.ZP),N=D.receivedBundles,B=D.receivedGameTemplates,H=D.receivedAssetPacks,z=(0,l.useContext(oe.J).getSubscriptionPlansWithPricingSystems)(),W=l.useState(null),Y=(0,s.Z)(W,2),X=Y[0],K=Y[1],Q=l.useState(null),$=(0,s.Z)(Q,2),te=$[0],ue=$[1],fe=l.useContext(ce.Z).palette.type,ge=l.useMemo((function(){if(!X||!t||!j)return null;var e=(0,x.QS)({productListingData:t,productListingDatas:(0,o.Z)(F||[])});return e?(e.filter((function(e){return"COURSE"===e.productType}))||[]).map((function(e){var t=j.find((function(t){return t.id===e.id}));return t?{course:t,courseListingData:e}:null})).filter(Boolean):null}),[X,t,F,j]),me=l.useMemo((function(){return X&&t?(0,x.dv)({product:X,productListingDatas:[].concat((0,o.Z)(M||[]),(0,o.Z)(A||[]),(0,o.Z)(O||[])),productListingData:t,receivedProducts:[].concat((0,o.Z)(N||[]),(0,o.Z)(B||[]),(0,o.Z)(H||[])),onPrivateAssetPackOpen:d,onPrivateGameTemplateOpen:g,onBundleOpen:m,onCourseOpen:v,discountedPrice:!0,disabled:k}):null}),[X,M,A,O,N,B,H,t,d,g,m,v,k]),xe=l.useMemo((function(){if(!t)return null;var e=(t.includedRedemptionCodes||[]).sort((function(e,t){return(0,U.eO)(e.givenSubscriptionPlanId,t.givenSubscriptionPlanId)}));if(!e.length)return null;var n=e[e.length-1].givenSubscriptionPlanId;return z?z.find((function(e){return e.id===n})):null}),[t,z]);l.useEffect((function(){(0,a.Z)((0,i.Z)().mark((function e(){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,re.z4)(t.id);case 3:n=e.sent,K(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(r=(0,L.T)(e.t0))&&404===r.status?ue((0,R.jsx)(c.Trans,{id:"Bundle not found - An error occurred, please try again later."})):ue((0,R.jsx)(c.Trans,{id:"An error occurred, please try again later."}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[t.id]);var ve=(0,r.Z)((0,r.Z)({},Z?{padding:0}:{}),t.visibleUntil&&!Z?{backgroundAttachment:"local",backgroundRepeat:"no-repeat",backgroundPosition:"top",backgroundSize:E&&!I?"contain":"auto",backgroundImage:"".concat("dark"===fe?"linear-gradient(180deg, #6B1A18 0px, #2D2331 5%, #1d1d2600 10%)":"linear-gradient(180deg, #F03F18 0px, #f5f5f700 10%)")}:{});return te?(0,R.jsx)(ee.ZP,{flexBody:!0,backAction:n,customPaperStyle:ve,children:(0,R.jsx)(ee.L,{expand:!0,children:(0,R.jsx)(u.x1,{alignItems:"center",justifyContent:"center",expand:!0,children:(0,R.jsx)(V.Z,{kind:"error",children:te})})})}):t&&X?(0,R.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,R.jsxs)(ee.ZP,{backAction:n,customPaperStyle:ve,children:[(0,R.jsx)(ne,{bundleListingData:t,bundle:X,i18n:r,fastCheckout:w,onCloseAfterPurchaseDone:T}),(0,R.jsx)(u.x1,{noMargin:!0,children:(0,R.jsx)(p.Z,{size:"section-title",children:(0,R.jsx)(c.Trans,{id:"What's included:"})})}),ge&&ge.length>0&&(0,R.jsx)(u.x1,{children:(0,R.jsx)(ie.Z,{cols:pe(P,I),style:he.grid,cellHeight:"auto",spacing:10,children:ge.map((function(e){var t=e.course,n=e.courseListingData,r=y(t.id);return(0,R.jsx)(ae.Z,{children:(0,R.jsx)(de.ZP,{course:t,courseListingData:n,completion:r,onClick:function(){v(n)},discountedPrice:!0,disabled:k})},t.id)}))})}),me&&(0,R.jsx)(u.x1,{children:(0,R.jsx)(ie.Z,{cols:pe(P,I),cellHeight:"auto",spacing:10,style:he.grid,children:me})}),xe&&(0,R.jsxs)(f.ep,{expand:!0,noColumnMargin:!0,children:[(0,R.jsx)(u.sg,{noMargin:!0,justifyContent:"center",children:(0,R.jsx)(u.x1,{expand:!0,children:(0,R.jsx)(se.Z,{subscriptionPlanWithPricingSystems:xe,disabled:!1,onClickChoosePlan:(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),seatsCount:0,setSeatsCount:function(){},period:"month",setPeriod:function(){},onlyShowDiscountedPrice:!0})})}),(0,R.jsx)(u.LZ,{}),(0,R.jsx)(u.sg,{noMargin:!0,children:(0,R.jsx)(le.Z,{subscriptionPlanWithPricingSystems:xe,hideFullTableLink:!0})})]})]})}}):(0,R.jsx)(ee.ZP,{flexBody:!0,customPaperStyle:ve,children:(0,R.jsx)(ee.L,{expand:!0,children:(0,R.jsx)(_.Z,{})})})}},49807:function(e,t,n){"use strict";n.d(t,{bQ:function(){return b},op:function(){return C}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(49819),l=n(36465),c=n(27817),u=n(1525),d=n(12123),p=n(65056),f=n(75333),h=n(4900),g=n(71106),m=n(29343),x=function(e){return e.name+"\n"+e.description+"\n"+e.categories.join("\n")},v={bundleFilters:null,fetchBundles:function(){},bundleListingDatas:null,error:null,shop:{bundleListingDatasSearchResults:null,filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}},setInitialBundleUserFriendlySlug:function(e){},setInitialBundleCategory:function(e){}}},b=o.createContext(v),C=function(e){var t=e.children,n=o.useContext(u.xP),v=n.searchText,C=n.setSearchText,j=o.useContext(g.ZP).limits,y=o.useState(null),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=o.useState(null),S=(0,a.Z)(T,2),P=S[0],I=S[1],E=o.useState(null),M=(0,a.Z)(E,2),L=M[0],A=M[1],O=o.useState(null),R=(0,a.Z)(O,2),F=R[0],D=R[1],N=o.useState(null),_=(0,a.Z)(N,2),B=_[0],U=_[1],V=o.useRef(!1),H=o.useRef(!1),z=(0,p.Z)().showAlert,W=!!j&&!!j.capabilities.classrooms&&j.capabilities.classrooms.hidePremiumProducts,G=o.useCallback((function(){H.current||L||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(null),H.current=!0,e.prev=2,e.next=5,(0,l.vq)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," bundles from the store.")),A(t),n=t.reduce((function(e,t){return e.concat(t.categories.map((function(e){return(0,c.capitalize)(e)})))}),[]),i=Array.from(new Set(n)),w({allTags:[],defaultTags:i,tagsTree:[]}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load the bundles from the store:",e.t0),I(e.t0);case 18:H.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[L]);o.useEffect((function(){if((F||B)&&!V.current&&L){V.current=!0;var e=null;if(F?e=(0,d.El)({bundleListingDatas:L,userFriendlySlug:F}):B&&(e=(0,d.Xk)({bundleListingDatas:L,category:B})),!e)return z({title:{id:"Bundle not found"},message:{id:"The link to the bundle you've followed seems outdated. Why not take a look at the other bundles in the store?"}}),D(null),U(null),void(V.current=!1);var t=e.prices.find((function(e){return"default"===e.usageType}));(0,f.VW)({bundleName:e.name,bundleId:e.id,source:"web-link",priceValue:t&&t.value,priceCurrency:t&&t.currency}),n.openBundleInformationPage({bundleListingData:e,storeSearchText:!0,clearSearchText:!1}),V.current=!1,D(null),U(null)}}),[L,n,z,F,B]),o.useEffect((function(){if(!H.current){var e=setTimeout((function(){console.info("Pre-fetching bundles from the store..."),G()}),h.ze);return function(){return clearTimeout(e)}}}),[G]);var Y=o.useMemo((function(){if(!L)return null;var e={};return W||L.forEach((function(t){var n=t.id;e[n]&&console.warn("Multiple bundles with the same id: ".concat(n)),e[n]=t})),e}),[L,W]),q=n.getCurrentPage(),J=(0,s.az)(Y,x,v,q.filtersState.chosenCategory,q.filtersState.chosenFilters),X=o.useMemo((function(){return{bundleListingDatas:W?[]:L,error:P,bundleFilters:k,fetchBundles:G,shop:{bundleListingDatasSearchResults:W?[]:J,searchText:v,setSearchText:C,filtersState:q.filtersState,setInitialBundleUserFriendlySlug:D,setInitialBundleCategory:U}}}),[W,L,P,k,G,J,v,C,q.filtersState]);return(0,m.jsx)(b.Provider,{value:X,children:t})}},80287:function(e,t,n){"use strict";n.d(t,{O1:function(){return y},Tm:function(){return Z},bP:function(){return E}});var r=n(37762),i=n(15859),a=(n(28381),n(36600)),o=n(86278),s=n(40243),l=n(61325),c=n(46976),u=n(84482),d=n(10283),p=n(98981),f=n(68789),h=n(6879),g=n(18930),m=n(62903),x=n(29343),v={discountedPrice:{textDecoration:"line-through",opacity:.7},coinIcon:{width:13,height:13,position:"relative",top:-1}},b=function(e,t){var n=e.givenSubscriptionPlanId;if(!n)return 0;var r=null;if(e.estimatedPrices){var i=e.estimatedPrices.find((function(e){return e.currency===t}));i&&(r=i.value)}null===r&&(r=("gdevelop_silver"===n?599:"gdevelop_gold"===n?1099:"gdevelop_startup"===n?3499:0)*Math.max(1,Math.round(e.durationInDays/30)));return r},C=function(e,t,n){var r=e.prices.find((function(e){return"default"===e.usageType})),a=r?r.currency:"USD",o=b(t,a);return(0,i.GG)(o,a,n)},j=function(e){var t=e.bundleListingData,n=e.productListingDatasIncludedInBundle,i=e.redemptionCodesIncludedInBundle,a=e.filter,o=0;if(!t||!n||!i)return null;var s,l=t.prices.find((function(e){return"default"===e.usageType})),c=l?l.currency:"USD",u=l?l.value:0,d=(0,r.Z)(t.includedListableProducts||[]);try{var p=function(){var e=s.value;if("ASSET_PACK"!==e.productType||a&&"ASSET_PACK"!==a)if("GAME_TEMPLATE"!==e.productType||a&&"GAME_TEMPLATE"!==a)if("COURSE"!==e.productType||a&&"COURSE"!==a)if("BUNDLE"!==e.productType||a&&"BUNDLE"!==a){if("CREDITS_PACKAGE"===e.productType&&(!a||"CREDITS_PACKAGE"===a)){var t=n.find((function(t){return t.id===e.productId}))||null;if(t){var r=t.prices.find((function(t){return t.usageType===e.usageType}));o+=r?r.value:0}}}else{var i=n.find((function(t){return t.id===e.productId}));if(i){var l=i.prices.find((function(t){return t.usageType===e.usageType}));o+=l?l.value:0}}else{var c=n.find((function(t){return t.id===e.productId}));if(c){var u=c.prices.find((function(t){return t.usageType===e.usageType}));o+=u?u.value:0}}else{var d=n.find((function(t){return t.id===e.productId}))||null;if(d){var p=d.prices.find((function(t){return t.usageType===e.usageType}));o+=p?p.value:0}}else{var f=n.find((function(t){return t.id===e.productId}))||null;if(f){var h=f.prices.find((function(t){return t.usageType===e.usageType}));o+=h?h.value:0}}};for(d.s();!(s=d.n()).done;)p()}catch(x){d.e(x)}finally{d.f()}if(i.length>0&&(!a||"REDEMPTION_CODE"===a)){var f,h=(0,r.Z)(i);try{for(h.s();!(f=h.n()).done;){var g=f.value,m=b(g,c);o+=m||0}}catch(x){h.e(x)}finally{h.f()}}return{totalPrice:o,bundlePrice:u,currencyCode:c}},y=function(e){var t=e.i18n,n=e.bundleListingData,r=e.productListingDatasIncludedInBundle,a=e.redemptionCodesIncludedInBundle,o=e.filter,s=j({bundleListingData:n,productListingDatasIncludedInBundle:r,redemptionCodesIncludedInBundle:a,filter:o});return s&&n?(0,i.GG)(s.totalPrice,s.currencyCode,t):null},Z=function(e){var t=e.i18n,n=e.bundleListingData,r=e.productListingDatasIncludedInBundle,a=e.redemptionCodesIncludedInBundle,o=j({bundleListingData:n,productListingDatasIncludedInBundle:r,redemptionCodesIncludedInBundle:a});if(!o||!n)return null;var s=o.totalPrice-o.bundlePrice;return{savingsPriceFormatted:(0,i.GG)(s,o.currencyCode,t),savingsPercentageFormatted:"".concat(Math.round(s/o.totalPrice*100),"%")}},k=function(e){var t=e.reduce((function(e,t){return e+Math.round(20)}),0);return Math.round(t)},w=function(e){var t=e.courseListingDatasIncludedInBundle,n=e.bundleListingData,r=e.productListingDatasIncludedInBundle,i=e.redemptionCodesIncludedInBundle;return(0,x.jsx)(a.I18n,{children:function(e){var c=e.i18n;return(0,x.jsxs)(l.pJ,{noMargin:!0,alignItems:"flex-start",children:[(0,x.jsx)(p.Z,{}),(0,x.jsxs)(s.sg,{noMargin:!0,children:[(0,x.jsx)(o.Z,{noMargin:!0,size:"sub-title",children:(0,x.jsx)(a.Trans,{id:"{0}",values:{0:1===t.length?(0,x.jsx)(a.Trans,{id:"{0} Course",values:{0:t.length}}):(0,x.jsx)(a.Trans,{id:"{0} Courses",values:{0:t.length}})}})}),(0,x.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,x.jsx)(a.Trans,{id:"{0} hours of material",values:{0:k(t)}})}),(0,x.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,x.jsx)("span",{style:v.discountedPrice,children:y({i18n:c,bundleListingData:n,productListingDatasIncludedInBundle:r,redemptionCodesIncludedInBundle:i,filter:"COURSE"})})})]})]})}})},T=function(e){var t=e.assetPackListingDatasIncludedInBundle,n=e.bundleListingData,r=e.productListingDatasIncludedInBundle,i=e.redemptionCodesIncludedInBundle;return(0,x.jsx)(a.I18n,{children:function(e){var c=e.i18n;return(0,x.jsxs)(l.pJ,{noMargin:!0,alignItems:"flex-start",children:[(0,x.jsx)(h.Z,{}),(0,x.jsxs)(s.sg,{noMargin:!0,children:[(0,x.jsx)(o.Z,{noMargin:!0,size:"sub-title",children:(0,x.jsx)(a.Trans,{id:"{0}",values:{0:1===t.length?(0,x.jsx)(a.Trans,{id:"{0} Asset pack",values:{0:t.length}}):(0,x.jsx)(a.Trans,{id:"{0} Asset packs",values:{0:t.length}})}})}),(0,x.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,x.jsx)(a.Trans,{id:"Commercial License"})}),(0,x.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,x.jsx)("span",{style:v.discountedPrice,children:y({i18n:c,bundleListingData:n,productListingDatasIncludedInBundle:r,redemptionCodesIncludedInBundle:i,filter:"ASSET_PACK"})})})]})]})}})},S=function(e){var t=e.gameTemplateListingDatasIncludedInBundle,n=e.bundleListingData,r=e.productListingDatasIncludedInBundle,i=e.redemptionCodesIncludedInBundle;return(0,x.jsx)(a.I18n,{children:function(e){var c=e.i18n;return(0,x.jsxs)(l.pJ,{noMargin:!0,alignItems:"flex-start",children:[(0,x.jsx)(f.Z,{}),(0,x.jsxs)(s.sg,{noMargin:!0,children:[(0,x.jsx)(o.Z,{noMargin:!0,size:"sub-title",children:(0,x.jsx)(a.Trans,{id:"{0}",values:{0:1===t.length?(0,x.jsx)(a.Trans,{id:"{0} Game template",values:{0:t.length}}):(0,x.jsx)(a.Trans,{id:"{0} Game templates",values:{0:t.length}})}})}),(0,x.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,x.jsx)(a.Trans,{id:"Lifetime access"})}),(0,x.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,x.jsx)("span",{style:v.discountedPrice,children:y({i18n:c,bundleListingData:n,productListingDatasIncludedInBundle:r,redemptionCodesIncludedInBundle:i,filter:"GAME_TEMPLATE"})})})]})]})}})},P=function(e){var t=e.includedRedemptionCode,n=e.bundleListingData;return(0,x.jsx)(a.I18n,{children:function(e){var r=e.i18n;return(0,x.jsxs)(l.pJ,{noMargin:!0,alignItems:"flex-start",children:[(0,c.sG)({planId:t.givenSubscriptionPlanId,logoSize:20}),(0,x.jsxs)(s.sg,{noMargin:!0,children:[(0,x.jsx)(o.Z,{noMargin:!0,size:"sub-title",children:(0,x.jsx)(a.Trans,{id:"{0} subscription",values:{0:(0,c.FZ)(t.givenSubscriptionPlanId)}})}),(0,x.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,d.v)(t.durationInDays)}),(0,x.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,x.jsx)("span",{style:v.discountedPrice,children:C(n,t,r)})})]})]})}})},I=function(e){var t=e.includedCreditsAmount;return(0,x.jsxs)(l.pJ,{noMargin:!0,alignItems:"center",children:[(0,x.jsx)(u.Z,{style:v.coinIcon}),(0,x.jsx)(o.Z,{noMargin:!0,size:"sub-title",children:(0,x.jsx)(a.Trans,{id:"{includedCreditsAmount} credits",values:{includedCreditsAmount:t}})})]})},E=function(e){var t=e.redemptionCodesIncludedInBundle,n=e.bundleListingData,r=e.productListingDatasIncludedInBundle,i=n.includedListableProducts||[],a=[],o=i.filter((function(e){return"COURSE"===e.productType})).map((function(e){return r.find((function(t){return t.id===e.productId&&"COURSE"===t.productType}))})).filter(Boolean);o.length&&a.push((0,x.jsx)(w,{courseListingDatasIncludedInBundle:o,bundleListingData:n,productListingDatasIncludedInBundle:r,redemptionCodesIncludedInBundle:t}));var c=i.filter((function(e){return"ASSET_PACK"===e.productType})).map((function(e){return r.find((function(t){return t.id===e.productId&&"ASSET_PACK"===t.productType}))})).filter(Boolean);c.length&&a.push((0,x.jsx)(T,{assetPackListingDatasIncludedInBundle:c,bundleListingData:n,productListingDatasIncludedInBundle:r,redemptionCodesIncludedInBundle:t}));var u=i.filter((function(e){return"GAME_TEMPLATE"===e.productType})).map((function(e){return r.find((function(t){return t.id===e.productId&&"GAME_TEMPLATE"===t.productType}))})).filter(Boolean);u.length&&a.push((0,x.jsx)(S,{gameTemplateListingDatasIncludedInBundle:u,bundleListingData:n,productListingDatasIncludedInBundle:r,redemptionCodesIncludedInBundle:t})),t.length&&t.forEach((function(e){a.push((0,x.jsx)(P,{includedRedemptionCode:e,bundleListingData:n}))}));var d=i.filter((function(e){return"CREDIT_PACKAGE"===e.productType})).reduce((function(e,t){return e+(0,m.dV)(t.productId)}),0);d&&a.push((0,x.jsx)(I,{includedCreditsAmount:d}));var p=[],f=[];a.forEach((function(e,t){0!==t&&(f.push((0,x.jsxs)(s.x1,{noMargin:!0,children:[(0,x.jsx)(s.LZ,{}),(0,x.jsx)(s.sg,{children:(0,x.jsx)(g.Z,{orientation:"vertical"})}),(0,x.jsx)(s.LZ,{})]},"divider-".concat(t))),t%2===1&&p.push((0,x.jsx)(s.sg,{children:(0,x.jsx)(g.Z,{orientation:"vertical"})},"divider-".concat(t)))),f.push(e),p.push((0,x.jsx)(s.sg,{expand:!0,noMargin:!0,children:e},"item-".concat(t)))}));var h=[];h.push((0,x.jsx)(l.ep,{expand:!0,children:f},"desktop-line"));for(var v=[],b=0;b<p.length;b+=3)v.push((0,x.jsx)(l.pJ,{expand:!0,children:p.slice(b,b+3)},"mobile-line-".concat(b)));return{mobileLines:v,desktopLines:h}}},62903:function(e,t,n){"use strict";n.d(t,{q$:function(){return J},_S:function(){return K},dV:function(){return X}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(36465),l=n(1413),c=n(36600),u=n(40243),d=n(24910),p=n(61325),f=n(10888),h=n(86278),g=n(1773),m=n(36401),x=n(75383),v=n(78081),b=n(60022),C=n(15859),j=n(1589),y=n(96591),Z=n(2066),k=n(71106),w=n(54458),T=n(21676),S=n(66789),P=n(30268),I=n(65056),E=n(51137),M=n(91),L=n(23883),A=n(29343),O=function(e){var t=e.creditsPackageListingData,n=e.onClose,l=e.onCloseWhenPurchaseSuccessful,d=e.simulateAppStoreProduct,m=o.useContext(k.ZP),x=m.profile,v=m.onOpenLoginDialog,b=m.onOpenCreateAccountDialog,C=m.limits,y=m.onRefreshLimits,O=o.useState(null),R=(0,a.Z)(O,2),F=R[0],D=R[1],N=o.useState(!1),_=(0,a.Z)(N,2),B=_[0],U=_[1],V=o.useState(!1),H=(0,a.Z)(V,2),z=H[0],W=H[1],G=o.useState(!1),Y=(0,a.Z)(G,2),q=Y[0],J=Y[1],X=o.useState(""),K=(0,a.Z)(X,2),Q=K[0],$=K[1],ee=(0,I.Z)().showAlert,te=(0,E.PN)()||d,ne=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if(J(!1),!te){e.next=12;break}return e.prev=4,U(!0),e.next=8,(0,E.ZA)(t.appStoreProductId);case 8:return e.prev=8,U(!1),e.finish(8);case 11:return e.abrupt("return");case 12:return e.prev=12,U(!0),e.next=16,(0,s.RB)({productId:t.id,priceName:t.prices[0].name,userId:x.id,userEmail:x.email,password:Q});case 16:n=e.sent,Z.ZP.openExternalURL(n),e.next=32;break;case 20:if(e.prev=20,e.t0=e.catch(12),!(i=(0,M.T)(e.t0))||403!==i.status||"auth/wrong-password"!==i.code){e.next=28;break}return e.next=26,ee({title:{id:"Operation not allowed"},message:{id:"The password you entered is incorrect. Please try again."}});case 26:e.next=31;break;case 28:return console.error("Unable to get the checkout URL",e.t0),e.next=31,ee({title:{id:"An error happened"},message:{id:"Unable to get the checkout URL. Please try again later."}});case 31:U(!1);case 32:return e.prev=32,$(""),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[4,,8,11],[12,20,32,35]])})));return function(){return e.apply(this,arguments)}}(),re=function(){Z.ZP.isDev()?J(!0):ne()};o.useEffect((function(){re()}),[]),(0,T.Y)((function(){y()}),B?3900:null),o.useEffect((function(){(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C&&null===F&&D(C.credits.userBalance.amount);case 1:case"end":return e.stop()}}),e)})))()}),[C,F]),o.useEffect((function(){null!==F&&C&&B&&(C.credits.userBalance.amount>F&&(U(!1),W(!0)))}),[F,B,z,C]);var ie=x?z?{subtitle:(0,A.jsx)(c.Trans,{id:"Your purchase has been processed!"}),content:(0,A.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,A.jsx)(h.Z,{children:(0,A.jsx)(c.Trans,{id:"You can now use them across the app!"})})})}:B?{subtitle:te?(0,A.jsx)(c.Trans,{id:"Complete your purchase with the app store."}):(0,A.jsx)(c.Trans,{id:"Complete your payment on the web browser"}),content:te?(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(p.ak,{justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(S.Z,{size:40}),(0,A.jsx)(h.Z,{children:(0,A.jsx)(c.Trans,{id:"The purchase will be linked to your account once done."})})]})}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(u.x1,{justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(S.Z,{size:20}),(0,A.jsx)(u.LZ,{}),(0,A.jsx)(h.Z,{children:(0,A.jsx)(c.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,A.jsx)(u.LZ,{}),(0,A.jsx)(u.x1,{justifyContent:"center",children:(0,A.jsx)(j.Z,{children:(0,A.jsx)(c.Trans,{id:"Once you're done, come back to GDevelop and the credits will be added to your account automatically."})})})]})}:C?{subtitle:(0,A.jsx)(c.Trans,{id:"{0} will be added to your account {1}.",values:{0:t.name,1:x.email}}),content:te?null:(0,A.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,A.jsx)(h.Z,{children:(0,A.jsx)(c.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,A.jsx)(c.Trans,{id:"Loading your profile..."}),content:(0,A.jsx)(u.x1,{justifyContent:"center",alignItems:"center",children:(0,A.jsx)(S.Z,{size:20})})}:{subtitle:(0,A.jsx)(c.Trans,{id:"Log-in to purchase these credits"}),content:(0,A.jsx)(w.Z,{onOpenLoginDialog:v,onOpenCreateAccountDialog:b,message:(0,A.jsx)(c.Trans,{id:"Credits will be linked to your user account. Log-in or sign-up to purchase them!"}),justifyContent:"center"})},ae=x&&!B&&!z&&!!C,oe=[(0,A.jsx)(f.Z,{label:z?(0,A.jsx)(c.Trans,{id:"Close"}):(0,A.jsx)(c.Trans,{id:"Cancel"}),onClick:function(){z&&l(),n()}},"cancel"),ae?(0,A.jsx)(g.vF,{primary:!0,label:(0,A.jsx)(c.Trans,{id:"Continue"}),onClick:re},"continue"):null];return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(g.ZP,{title:t.name,maxWidth:"sm",open:!0,onRequestClose:n,actions:oe,onApply:z?n:re,cannotBeDismissed:!0,flexColumnBody:!0,fullscreen:"never-even-on-mobile",children:[(0,A.jsxs)(p.pJ,{justifyContent:"center",alignItems:"center",children:[z&&(0,A.jsx)(P.Z,{}),(0,A.jsx)(h.Z,{size:"sub-title",children:ie.subtitle})]}),ie.content]}),q&&(0,A.jsx)(L.Z,{onApply:ne,onClose:function(){return J(!1)},passwordValue:Q,setPasswordValue:$})]})},R=n(78118),F=o.memo((function(e){return(0,A.jsxs)(R.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"63",height:"74",viewBox:"0 0 63 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"31.7268",cy:"38.541",r:"11.3768",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"31.7268",cy:"37.2768",r:"11.3768",fill:"url(#paint0_linear_1959_155)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.727 45.4932C36.2649 45.4932 39.9436 41.8146 39.9436 37.2767C39.9436 32.7388 36.2649 29.0601 31.727 29.0601C27.1891 29.0601 23.5104 32.7388 23.5104 37.2767C23.5104 41.8146 27.1891 45.4932 31.727 45.4932ZM31.727 46.7573C36.963 46.7573 41.2076 42.5127 41.2076 37.2767C41.2076 32.0407 36.963 27.796 31.727 27.796C26.491 27.796 22.2463 32.0407 22.2463 37.2767C22.2463 42.5127 26.491 46.7573 31.727 46.7573Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.9432 37.2767C39.9432 31.5883 35.1508 29.4175 33.9388 28.7441C32.7268 28.0707 31.7267 27.796 31.7267 27.796C36.9627 27.796 41.2073 32.0407 41.2073 37.2767C41.2073 42.5127 36.9627 46.7573 31.7267 46.7573C31.7267 46.7573 32.043 46.7522 33.9388 46.1253C35.8347 45.4984 39.9432 41.8146 39.9432 37.2767Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M31.286 41.7013C30.1582 41.7013 29.0724 41.3923 28.1132 40.7194C27.4446 40.2506 26.6708 39.1921 26.6708 37.3975C26.6708 34.0682 28.3491 32.8531 31.7219 32.8531L36.5682 32.8531C36.5682 32.8531 36.7175 32.8453 36.7598 32.8957C36.8131 32.9591 36.7598 33.1089 36.7598 33.1089L36.3037 34.5264C36.3037 34.5264 36.2434 34.6582 36.1807 34.7011C36.1073 34.7514 35.9881 34.7494 35.9881 34.7494H32.1846C29.9585 34.7494 28.6349 34.9253 28.6349 37.3975C28.6349 38.2141 28.8621 38.7953 29.3299 39.1739C30.1204 39.814 31.657 39.8412 32.5959 39.7495C32.5959 39.7495 32.9811 38.4943 33.0446 38.2905C33.1189 38.0517 33.0863 37.9948 32.8545 37.9948C32.5197 37.9948 31.9177 37.9948 31.2788 37.9948C30.8311 37.9948 30.3912 37.7664 30.3912 37.218C30.3912 36.6883 30.8005 36.3809 31.3615 36.3809C32.3328 36.3809 34.3334 36.3809 34.7078 36.3809C35.1987 36.3809 35.6996 36.4522 35.4441 37.2397L34.0905 41.3992C34.0905 41.3992 32.9848 41.7013 31.286 41.7013Z",fill:"#E2A60B"}),(0,A.jsx)("defs",{children:(0,A.jsxs)("linearGradient",{id:"paint0_linear_1959_155",x1:"31.7268",y1:"25.9",x2:"31.7268",y2:"48.6536",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})})]}))})),D=o.memo((function(e){return(0,A.jsxs)(R.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"64",height:"74",viewBox:"0 0 64 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"20.8768",cy:"48.6405",r:"11.3768",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"20.8768",cy:"47.3761",r:"11.3768",fill:"url(#paint0_linear_1959_189)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.8769 55.5926C25.4148 55.5926 29.0935 51.9139 29.0935 47.376C29.0935 42.8382 25.4148 39.1595 20.8769 39.1595C16.339 39.1595 12.6603 42.8382 12.6603 47.376C12.6603 51.9139 16.339 55.5926 20.8769 55.5926ZM20.8769 56.8567C26.1129 56.8567 30.3575 52.6121 30.3575 47.376C30.3575 42.14 26.1129 37.8954 20.8769 37.8954C15.6409 37.8954 11.3962 42.14 11.3962 47.376C11.3962 52.6121 15.6409 56.8567 20.8769 56.8567Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.0932 47.376C29.0932 41.6876 24.3007 39.5168 23.0887 38.8435C21.8767 38.1701 20.8766 37.8954 20.8766 37.8954C26.1126 37.8954 30.3572 42.14 30.3572 47.376C30.3572 52.6121 26.1126 56.8567 20.8766 56.8567C20.8766 56.8567 21.1929 56.8515 23.0887 56.2246C24.9846 55.5978 29.0932 51.9139 29.0932 47.376Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M20.4361 51.8006C19.3082 51.8006 18.2224 51.4916 17.2632 50.8187C16.5946 50.3499 15.8208 49.2914 15.8208 47.4968C15.8208 44.1675 17.4991 42.9524 20.8719 42.9524L25.7182 42.9524C25.7182 42.9524 25.8675 42.9446 25.9098 42.995C25.9631 43.0584 25.9098 43.2082 25.9098 43.2082L25.4538 44.6257C25.4538 44.6257 25.3934 44.7575 25.3307 44.8005C25.2574 44.8507 25.1381 44.8487 25.1381 44.8487H21.3347C19.1086 44.8487 17.7849 45.0246 17.7849 47.4968C17.7849 48.3134 18.0122 48.8946 18.4799 49.2732C19.2705 49.9133 20.807 49.9405 21.7459 49.8488C21.7459 49.8488 22.1311 48.5936 22.1946 48.3898C22.2689 48.151 22.2364 48.0941 22.0045 48.0941C21.6697 48.0941 21.0677 48.0941 20.4288 48.0941C19.9811 48.0941 19.5412 47.8657 19.5412 47.3173C19.5412 46.7876 19.9505 46.4802 20.5115 46.4802C21.4828 46.4802 23.4834 46.4802 23.8578 46.4802C24.3487 46.4802 24.8497 46.5515 24.5941 47.339L23.2405 51.4985C23.2405 51.4985 22.1348 51.8006 20.4361 51.8006Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"42.5233",cy:"23.5445",r:"11.3768",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"42.5233",cy:"22.2803",r:"11.3768",fill:"url(#paint1_linear_1959_189)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.5234 30.4968C47.0613 30.4968 50.7399 26.8181 50.7399 22.2802C50.7399 17.7423 47.0613 14.0636 42.5234 14.0636C37.9855 14.0636 34.3068 17.7423 34.3068 22.2802C34.3068 26.8181 37.9855 30.4968 42.5234 30.4968ZM42.5234 31.7609C47.7594 31.7609 52.004 27.5162 52.004 22.2802C52.004 17.0442 47.7594 12.7996 42.5234 12.7996C37.2874 12.7996 33.0427 17.0442 33.0427 22.2802C33.0427 27.5162 37.2874 31.7609 42.5234 31.7609Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.7398 22.2802C50.7398 16.5918 45.9473 14.421 44.7353 13.7476C43.5234 13.0742 42.5232 12.7996 42.5232 12.7996C47.7592 12.7996 52.0038 17.0442 52.0038 22.2802C52.0038 27.5162 47.7592 31.7609 42.5232 31.7609C42.5232 31.7609 42.8395 31.7557 44.7353 31.1288C46.6312 30.502 50.7398 26.8181 50.7398 22.2802Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M42.0825 26.7048C40.9547 26.7048 39.8689 26.3958 38.9097 25.723C38.2411 25.2542 37.4673 24.1956 37.4673 22.401C37.4673 19.0717 39.1456 17.8566 42.5184 17.8566L47.3647 17.8566C47.3647 17.8566 47.514 17.8489 47.5563 17.8992C47.6096 17.9626 47.5563 18.1124 47.5563 18.1124L47.1002 19.5299C47.1002 19.5299 47.0399 19.6617 46.9772 19.7047C46.9038 19.755 46.7846 19.7529 46.7846 19.7529H42.9811C40.755 19.7529 39.4314 19.9288 39.4314 22.401C39.4314 23.2177 39.6586 23.7988 40.1264 24.1775C40.9169 24.8175 42.4535 24.8447 43.3924 24.753C43.3924 24.753 43.7776 23.4978 43.8411 23.2941C43.9154 23.0553 43.8828 22.9983 43.651 22.9983C43.3162 22.9983 42.7142 22.9983 42.0753 22.9983C41.6276 22.9983 41.1877 22.77 41.1877 22.2215C41.1877 21.6919 41.597 21.3845 42.158 21.3845C43.1293 21.3845 45.1299 21.3845 45.5043 21.3845C45.9952 21.3845 46.4962 21.4558 46.2406 22.2432L44.887 26.4028C44.887 26.4028 43.7813 26.7048 42.0825 26.7048Z",fill:"#E2A60B"}),(0,A.jsxs)("defs",{children:[(0,A.jsxs)("linearGradient",{id:"paint0_linear_1959_189",x1:"20.8768",y1:"35.9993",x2:"20.8768",y2:"58.7529",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint1_linear_1959_189",x1:"42.5233",y1:"10.9036",x2:"42.5233",y2:"33.6571",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})]})]}))})),N=o.memo((function(e){return(0,A.jsxs)(R.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"64",height:"74",viewBox:"0 0 64 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"30.8266",cy:"21.3643",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"30.8266",cy:"20.1528",r:"10.9028",fill:"url(#paint0_linear_1959_217)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.8267 28.0269C35.1755 28.0269 38.7009 24.5014 38.7009 20.1526C38.7009 15.8038 35.1755 12.2784 30.8267 12.2784C26.4779 12.2784 22.9525 15.8038 22.9525 20.1526C22.9525 24.5014 26.4779 28.0269 30.8267 28.0269ZM30.8267 29.2383C35.8446 29.2383 39.9123 25.1705 39.9123 20.1526C39.9123 15.1348 35.8446 11.067 30.8267 11.067C25.8089 11.067 21.7411 15.1348 21.7411 20.1526C21.7411 25.1705 25.8089 29.2383 30.8267 29.2383Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.7006 20.1526C38.7006 14.7013 34.1079 12.6209 32.9464 11.9756C31.7849 11.3303 30.8264 11.067 30.8264 11.067C35.8443 11.067 39.912 15.1348 39.912 20.1526C39.912 25.1705 35.8443 29.2383 30.8264 29.2383C30.8264 29.2383 31.1296 29.2333 32.9464 28.6326C34.7632 28.0318 38.7006 24.5014 38.7006 20.1526Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M30.4043 24.3928C29.3234 24.3928 28.2829 24.0966 27.3636 23.4518C26.7229 23.0026 25.9813 21.9881 25.9813 20.2683C25.9813 17.0777 27.5897 15.9133 30.822 15.9133L35.4663 15.9133C35.4663 15.9133 35.6094 15.9058 35.65 15.9541C35.701 16.0148 35.65 16.1584 35.65 16.1584L35.2129 17.5168C35.2129 17.5168 35.155 17.6431 35.095 17.6843C35.0247 17.7325 34.9104 17.7305 34.9104 17.7305H31.2654C29.1321 17.7305 27.8636 17.8991 27.8636 20.2683C27.8636 21.0509 28.0814 21.6078 28.5296 21.9707C29.2872 22.5841 30.7598 22.6102 31.6596 22.5223C31.6596 22.5223 32.0287 21.3194 32.0895 21.1241C32.1607 20.8953 32.1296 20.8407 31.9074 20.8407C31.5865 20.8407 31.0096 20.8407 30.3974 20.8407C29.9683 20.8407 29.5467 20.6219 29.5467 20.0963C29.5467 19.5887 29.9389 19.2941 30.4766 19.2941C31.4074 19.2941 33.3247 19.2941 33.6835 19.2941C34.1539 19.2941 34.634 19.3624 34.3891 20.1171L33.0919 24.1033C33.0919 24.1033 32.0322 24.3928 30.4043 24.3928Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"16.8028",cy:"51.3587",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"16.8028",cy:"50.1473",r:"10.9028",fill:"url(#paint1_linear_1959_217)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8029 58.0214C21.1517 58.0214 24.6771 54.496 24.6771 50.1471C24.6771 45.7983 21.1517 42.2729 16.8029 42.2729C12.4541 42.2729 8.9287 45.7983 8.9287 50.1471C8.9287 54.496 12.4541 58.0214 16.8029 58.0214ZM16.8029 59.2328C21.8208 59.2328 25.8885 55.165 25.8885 50.1471C25.8885 45.1293 21.8208 41.0615 16.8029 41.0615C11.7851 41.0615 7.71729 45.1293 7.71729 50.1471C7.71729 55.165 11.7851 59.2328 16.8029 59.2328Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.6768 50.1472C24.6768 44.6958 20.0841 42.6154 18.9226 41.9701C17.7611 41.3248 16.8026 41.0615 16.8026 41.0615C21.8205 41.0615 25.8882 45.1293 25.8882 50.1472C25.8882 55.165 21.8205 59.2328 16.8026 59.2328C16.8026 59.2328 17.1058 59.2278 18.9226 58.6271C20.7394 58.0263 24.6768 54.496 24.6768 50.1472Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M16.3804 54.3873C15.2995 54.3873 14.2589 54.0912 13.3397 53.4464C12.699 52.9971 11.9574 51.9827 11.9574 50.2629C11.9574 47.0723 13.5658 45.9078 16.7981 45.9078L21.4424 45.9078C21.4424 45.9078 21.5855 45.9004 21.626 45.9486C21.6771 46.0094 21.626 46.153 21.626 46.153L21.189 47.5114C21.189 47.5114 21.1311 47.6377 21.0711 47.6789C21.0008 47.7271 20.8865 47.7251 20.8865 47.7251H17.2415C15.1082 47.7251 13.8397 47.8937 13.8397 50.2629C13.8397 51.0455 14.0574 51.6024 14.5057 51.9653C15.2633 52.5787 16.7359 52.6048 17.6356 52.5169C17.6356 52.5169 18.0048 51.314 18.0656 51.1187C18.1368 50.8899 18.1056 50.8353 17.8835 50.8353C17.5626 50.8353 16.9857 50.8353 16.3734 50.8353C15.9444 50.8353 15.5228 50.6164 15.5228 50.0909C15.5228 49.5833 15.915 49.2887 16.4526 49.2887C17.3835 49.2887 19.3007 49.2887 19.6596 49.2887C20.13 49.2887 20.6101 49.357 20.3651 50.1116L19.068 54.0979C19.068 54.0979 18.0083 54.3873 16.3804 54.3873Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"46.7973",cy:"51.3587",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"46.7973",cy:"50.1473",r:"10.9028",fill:"url(#paint2_linear_1959_217)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.7974 58.0214C51.1462 58.0214 54.6716 54.496 54.6716 50.1471C54.6716 45.7983 51.1462 42.2729 46.7974 42.2729C42.4486 42.2729 38.9232 45.7983 38.9232 50.1471C38.9232 54.496 42.4486 58.0214 46.7974 58.0214ZM46.7974 59.2328C51.8153 59.2328 55.883 55.165 55.883 50.1471C55.883 45.1293 51.8153 41.0615 46.7974 41.0615C41.7796 41.0615 37.7118 45.1293 37.7118 50.1471C37.7118 55.165 41.7796 59.2328 46.7974 59.2328Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54.6713 50.1472C54.6713 44.6958 50.0786 42.6154 48.9171 41.9701C47.7556 41.3248 46.7971 41.0615 46.7971 41.0615C51.815 41.0615 55.8827 45.1293 55.8827 50.1472C55.8827 55.165 51.815 59.2328 46.7971 59.2328C46.7971 59.2328 47.1003 59.2278 48.9171 58.6271C50.7339 58.0263 54.6713 54.496 54.6713 50.1472Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M46.3749 54.3873C45.294 54.3873 44.2534 54.0912 43.3342 53.4464C42.6935 52.9971 41.9519 51.9827 41.9519 50.2629C41.9519 47.0723 43.5603 45.9078 46.7926 45.9078L51.4369 45.9078C51.4369 45.9078 51.58 45.9004 51.6205 45.9486C51.6716 46.0094 51.6205 46.153 51.6205 46.153L51.1835 47.5114C51.1835 47.5114 51.1256 47.6377 51.0656 47.6789C50.9953 47.7271 50.881 47.7251 50.881 47.7251H47.236C45.1027 47.7251 43.8342 47.8937 43.8342 50.2629C43.8342 51.0455 44.052 51.6024 44.5002 51.9653C45.2578 52.5787 46.7304 52.6048 47.6301 52.5169C47.6301 52.5169 47.9993 51.314 48.0601 51.1187C48.1313 50.8899 48.1001 50.8353 47.878 50.8353C47.5571 50.8353 46.9802 50.8353 46.3679 50.8353C45.9389 50.8353 45.5173 50.6164 45.5173 50.0909C45.5173 49.5833 45.9095 49.2887 46.4471 49.2887C47.378 49.2887 49.2952 49.2887 49.6541 49.2887C50.1245 49.2887 50.6046 49.357 50.3596 50.1116L49.0625 54.0979C49.0625 54.0979 48.0028 54.3873 46.3749 54.3873Z",fill:"#E2A60B"}),(0,A.jsxs)("defs",{children:[(0,A.jsxs)("linearGradient",{id:"paint0_linear_1959_217",x1:"30.8266",y1:"9.25",x2:"30.8266",y2:"31.0555",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint1_linear_1959_217",x1:"16.8028",y1:"39.2445",x2:"16.8028",y2:"61.05",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint2_linear_1959_217",x1:"46.7973",y1:"39.2445",x2:"46.7973",y2:"61.05",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})]})]}))})),_=o.memo((function(e){return(0,A.jsxs)(R.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"64",height:"74",viewBox:"0 0 64 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"17.5528",cy:"21.3643",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"17.5528",cy:"20.1528",r:"10.9028",fill:"url(#paint0_linear_1982_12)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5529 28.0269C21.9017 28.0269 25.4271 24.5014 25.4271 20.1526C25.4271 15.8038 21.9017 12.2784 17.5529 12.2784C13.2041 12.2784 9.6787 15.8038 9.6787 20.1526C9.6787 24.5014 13.2041 28.0269 17.5529 28.0269ZM17.5529 29.2383C22.5708 29.2383 26.6385 25.1705 26.6385 20.1526C26.6385 15.1348 22.5708 11.067 17.5529 11.067C12.5351 11.067 8.46729 15.1348 8.46729 20.1526C8.46729 25.1705 12.5351 29.2383 17.5529 29.2383Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.4268 20.1526C25.4268 14.7013 20.8341 12.6209 19.6726 11.9756C18.5111 11.3303 17.5526 11.067 17.5526 11.067C22.5705 11.067 26.6382 15.1348 26.6382 20.1526C26.6382 25.1705 22.5705 29.2383 17.5526 29.2383C17.5526 29.2383 17.8558 29.2333 19.6726 28.6326C21.4894 28.0318 25.4268 24.5014 25.4268 20.1526Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M17.1305 24.3928C16.0496 24.3928 15.0091 24.0966 14.0898 23.4518C13.4491 23.0026 12.7075 21.9881 12.7075 20.2683C12.7075 17.0777 14.3159 15.9133 17.5482 15.9133L22.1925 15.9133C22.1925 15.9133 22.3356 15.9058 22.3762 15.9541C22.4272 16.0148 22.3762 16.1584 22.3762 16.1584L21.9391 17.5168C21.9391 17.5168 21.8812 17.6431 21.8212 17.6843C21.7509 17.7325 21.6366 17.7305 21.6366 17.7305H17.9916C15.8583 17.7305 14.5898 17.8991 14.5898 20.2683C14.5898 21.0509 14.8076 21.6078 15.2558 21.9707C16.0134 22.5841 17.486 22.6102 18.3858 22.5223C18.3858 22.5223 18.7549 21.3194 18.8157 21.1241C18.8869 20.8953 18.8558 20.8407 18.6336 20.8407C18.3127 20.8407 17.7358 20.8407 17.1236 20.8407C16.6945 20.8407 16.2729 20.6219 16.2729 20.0963C16.2729 19.5887 16.6651 19.2941 17.2028 19.2941C18.1336 19.2941 20.0509 19.2941 20.4097 19.2941C20.8801 19.2941 21.3602 19.3624 21.1152 20.1171L19.8181 24.1033C19.8181 24.1033 18.7584 24.3928 17.1305 24.3928Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"17.1028",cy:"51.3587",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"17.1028",cy:"50.1473",r:"10.9028",fill:"url(#paint1_linear_1982_12)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.103 58.0214C21.4518 58.0214 24.9772 54.496 24.9772 50.1471C24.9772 45.7983 21.4518 42.2729 17.103 42.2729C12.7542 42.2729 9.22875 45.7983 9.22875 50.1471C9.22875 54.496 12.7542 58.0214 17.103 58.0214ZM17.103 59.2328C22.1208 59.2328 26.1886 55.165 26.1886 50.1471C26.1886 45.1293 22.1208 41.0615 17.103 41.0615C12.0851 41.0615 8.01733 45.1293 8.01733 50.1471C8.01733 55.165 12.0851 59.2328 17.103 59.2328Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.9769 50.1471C24.9769 44.6958 20.3841 42.6154 19.2226 41.9701C18.0611 41.3248 17.1027 41.0615 17.1027 41.0615C22.1205 41.0615 26.1883 45.1293 26.1883 50.1471C26.1883 55.165 22.1205 59.2328 17.1027 59.2328C17.1027 59.2328 17.4058 59.2278 19.2226 58.6271C21.0395 58.0263 24.9769 54.496 24.9769 50.1471Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M16.6804 54.3873C15.5995 54.3873 14.559 54.0912 13.6398 53.4464C12.999 52.9971 12.2574 51.9827 12.2574 50.2629C12.2574 47.0723 13.8659 45.9078 17.0981 45.9078L21.7425 45.9078C21.7425 45.9078 21.8855 45.9004 21.9261 45.9486C21.9771 46.0094 21.9261 46.153 21.9261 46.153L21.489 47.5114C21.489 47.5114 21.4312 47.6377 21.3711 47.6789C21.3008 47.7271 21.1865 47.7251 21.1865 47.7251H17.5416C15.4082 47.7251 14.1397 47.8937 14.1397 50.2629C14.1397 51.0455 14.3575 51.6024 14.8058 51.9653C15.5634 52.5787 17.0359 52.6048 17.9357 52.5169C17.9357 52.5169 18.3049 51.314 18.3657 51.1187C18.4369 50.8899 18.4057 50.8353 18.1835 50.8353C17.8626 50.8353 17.2858 50.8353 16.6735 50.8353C16.2444 50.8353 15.8229 50.6164 15.8229 50.0909C15.8229 49.5833 16.2151 49.2887 16.7527 49.2887C17.6836 49.2887 19.6008 49.2887 19.9596 49.2887C20.43 49.2887 20.9101 49.357 20.6652 50.1116L19.368 54.0979C19.368 54.0979 18.3084 54.3873 16.6804 54.3873Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"47.0973",cy:"51.3587",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"47.0973",cy:"50.1473",r:"10.9028",fill:"url(#paint2_linear_1982_12)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.0975 58.0214C51.4463 58.0214 54.9717 54.496 54.9717 50.1471C54.9717 45.7983 51.4463 42.2729 47.0975 42.2729C42.7487 42.2729 39.2233 45.7983 39.2233 50.1471C39.2233 54.496 42.7487 58.0214 47.0975 58.0214ZM47.0975 59.2328C52.1153 59.2328 56.1831 55.165 56.1831 50.1471C56.1831 45.1293 52.1153 41.0615 47.0975 41.0615C42.0796 41.0615 38.0118 45.1293 38.0118 50.1471C38.0118 55.165 42.0796 59.2328 47.0975 59.2328Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54.9714 50.1471C54.9714 44.6958 50.3786 42.6154 49.2171 41.9701C48.0557 41.3248 47.0972 41.0615 47.0972 41.0615C52.115 41.0615 56.1828 45.1293 56.1828 50.1471C56.1828 55.165 52.115 59.2328 47.0972 59.2328C47.0972 59.2328 47.4003 59.2278 49.2171 58.6271C51.034 58.0263 54.9714 54.496 54.9714 50.1471Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M46.6749 54.3873C45.5941 54.3873 44.5535 54.0912 43.6343 53.4464C42.9935 52.9971 42.252 51.9827 42.252 50.2629C42.252 47.0723 43.8604 45.9078 47.0926 45.9078L51.737 45.9078C51.737 45.9078 51.88 45.9004 51.9206 45.9486C51.9717 46.0094 51.9206 46.153 51.9206 46.153L51.4835 47.5114C51.4835 47.5114 51.4257 47.6377 51.3656 47.6789C51.2953 47.7271 51.181 47.7251 51.181 47.7251H47.5361C45.4027 47.7251 44.1342 47.8937 44.1342 50.2629C44.1342 51.0455 44.352 51.6024 44.8003 51.9653C45.5579 52.5787 47.0304 52.6048 47.9302 52.5169C47.9302 52.5169 48.2994 51.314 48.3602 51.1187C48.4314 50.8899 48.4002 50.8353 48.178 50.8353C47.8571 50.8353 47.2803 50.8353 46.668 50.8353C46.2389 50.8353 45.8174 50.6164 45.8174 50.0909C45.8174 49.5833 46.2096 49.2887 46.7472 49.2887C47.6781 49.2887 49.5953 49.2887 49.9541 49.2887C50.4246 49.2887 50.9046 49.357 50.6597 50.1116L49.3625 54.0979C49.3625 54.0979 48.3029 54.3873 46.6749 54.3873Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"46.0973",cy:"21.1142",r:"10.9028",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"46.0973",cy:"19.9028",r:"10.9028",fill:"url(#paint3_linear_1982_12)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.0975 27.7769C50.4463 27.7769 53.9717 24.2514 53.9717 19.9026C53.9717 15.5538 50.4463 12.0284 46.0975 12.0284C41.7487 12.0284 38.2233 15.5538 38.2233 19.9026C38.2233 24.2514 41.7487 27.7769 46.0975 27.7769ZM46.0975 28.9883C51.1153 28.9883 55.1831 24.9205 55.1831 19.9026C55.1831 14.8848 51.1153 10.817 46.0975 10.817C41.0796 10.817 37.0118 14.8848 37.0118 19.9026C37.0118 24.9205 41.0796 28.9883 46.0975 28.9883Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.9714 19.9026C53.9714 14.4513 49.3786 12.3709 48.2171 11.7256C47.0557 11.0803 46.0972 10.817 46.0972 10.817C51.115 10.817 55.1828 14.8848 55.1828 19.9026C55.1828 24.9205 51.115 28.9883 46.0972 28.9883C46.0972 28.9883 46.4003 28.9833 48.2171 28.3826C50.034 27.7818 53.9714 24.2514 53.9714 19.9026Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M45.6749 24.1429C44.5941 24.1429 43.5535 23.8467 42.6343 23.2019C41.9935 22.7527 41.252 21.7382 41.252 20.0184C41.252 16.8278 42.8604 15.6634 46.0926 15.6634L50.737 15.6634C50.737 15.6634 50.88 15.656 50.9206 15.7042C50.9717 15.7649 50.9206 15.9085 50.9206 15.9085L50.4835 17.2669C50.4835 17.2669 50.4257 17.3932 50.3656 17.4344C50.2953 17.4826 50.181 17.4806 50.181 17.4806H46.5361C44.4027 17.4806 43.1342 17.6492 43.1342 20.0184C43.1342 20.801 43.352 21.358 43.8003 21.7208C44.5579 22.3342 46.0304 22.3603 46.9302 22.2724C46.9302 22.2724 47.2994 21.0695 47.3602 20.8743C47.4314 20.6454 47.4002 20.5908 47.178 20.5908C46.8571 20.5908 46.2803 20.5908 45.668 20.5908C45.2389 20.5908 44.8174 20.372 44.8174 19.8464C44.8174 19.3388 45.2096 19.0442 45.7472 19.0442C46.6781 19.0442 48.5953 19.0442 48.9541 19.0442C49.4246 19.0442 49.9046 19.1126 49.6597 19.8672L48.3625 23.8534C48.3625 23.8534 47.3029 24.1429 45.6749 24.1429Z",fill:"#E2A60B"}),(0,A.jsxs)("defs",{children:[(0,A.jsxs)("linearGradient",{id:"paint0_linear_1982_12",x1:"17.5528",y1:"9.25",x2:"17.5528",y2:"31.0555",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint1_linear_1982_12",x1:"17.1028",y1:"39.2445",x2:"17.1028",y2:"61.05",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint2_linear_1982_12",x1:"47.0973",y1:"39.2445",x2:"47.0973",y2:"61.05",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint3_linear_1982_12",x1:"46.0973",y1:"9",x2:"46.0973",y2:"30.8055",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})]})]}))})),B=o.memo((function(e){return(0,A.jsxs)(R.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"64",height:"74",viewBox:"0 0 64 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("circle",{cx:"14.2842",cy:"16.3522",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"14.2842",cy:"15.2397",r:"10.0103",fill:"url(#paint0_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2844 22.4694C18.2772 22.4694 21.5141 19.2326 21.5141 15.2397C21.5141 11.2469 18.2772 8.01008 14.2844 8.01008C10.2916 8.01008 7.05476 11.2469 7.05476 15.2397C7.05476 19.2326 10.2916 22.4694 14.2844 22.4694ZM14.2844 23.5816C18.8915 23.5816 22.6263 19.8468 22.6263 15.2397C22.6263 10.6326 18.8915 6.89783 14.2844 6.89783C9.6773 6.89783 5.9425 10.6326 5.9425 15.2397C5.9425 19.8468 9.6773 23.5816 14.2844 23.5816Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5138 15.2397C21.5138 10.2346 17.297 8.32452 16.2306 7.73202C15.1642 7.13952 14.2842 6.89783 14.2842 6.89783C18.8913 6.89783 22.6261 10.6326 22.6261 15.2397C22.6261 19.8468 18.8913 23.5816 14.2842 23.5816C14.2842 23.5816 14.5625 23.5771 16.2306 23.0255C17.8987 22.4739 21.5138 19.2326 21.5138 15.2397Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M13.8967 19.1327C12.9043 19.1327 11.949 18.8608 11.105 18.2688C10.5167 17.8563 9.83582 16.9249 9.83582 15.3459C9.83582 12.4164 11.3126 11.3473 14.2802 11.3473L18.5444 11.3473C18.5444 11.3473 18.6758 11.3405 18.713 11.3848C18.7599 11.4405 18.713 11.5724 18.713 11.5724L18.3117 12.8196C18.3117 12.8196 18.2586 12.9356 18.2035 12.9734C18.1389 13.0176 18.034 13.0158 18.034 13.0158H14.6874C12.7287 13.0158 11.564 13.1706 11.564 15.3459C11.564 16.0644 11.764 16.5757 12.1755 16.9089C12.8711 17.4721 14.2231 17.4961 15.0493 17.4154C15.0493 17.4154 15.3882 16.3109 15.444 16.1316C15.5094 15.9215 15.4808 15.8714 15.2768 15.8714C14.9822 15.8714 14.4525 15.8714 13.8904 15.8714C13.4964 15.8714 13.1094 15.6705 13.1094 15.1879C13.1094 14.7219 13.4695 14.4514 13.9631 14.4514C14.8178 14.4514 16.578 14.4514 16.9075 14.4514C17.3394 14.4514 17.7802 14.5141 17.5553 15.207L16.3643 18.8669C16.3643 18.8669 15.3914 19.1327 13.8967 19.1327Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"13.8712",cy:"58.9897",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"13.8712",cy:"57.8774",r:"10.0103",fill:"url(#paint1_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8713 65.107C17.8641 65.107 21.101 61.8701 21.101 57.8773C21.101 53.8845 17.8641 50.6477 13.8713 50.6477C9.8785 50.6477 6.64167 53.8845 6.64167 57.8773C6.64167 61.8701 9.8785 65.107 13.8713 65.107ZM13.8713 66.2192C18.4784 66.2192 22.2132 62.4844 22.2132 57.8773C22.2132 53.2702 18.4784 49.5354 13.8713 49.5354C9.26422 49.5354 5.52942 53.2702 5.52942 57.8773C5.52942 62.4844 9.26422 66.2192 13.8713 66.2192Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.1006 57.8773C21.1006 52.8722 16.8838 50.9621 15.8174 50.3696C14.751 49.7771 13.871 49.5354 13.871 49.5354C18.4781 49.5354 22.2129 53.2702 22.2129 57.8773C22.2129 62.4844 18.4781 66.2192 13.871 66.2192C13.871 66.2192 14.1493 66.2147 15.8174 65.6631C17.4855 65.1115 21.1006 61.8701 21.1006 57.8773Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M13.4834 61.7703C12.491 61.7703 11.5356 61.4984 10.6916 60.9064C10.1034 60.4939 9.42249 59.5625 9.42249 57.9835C9.42249 55.0541 10.8992 53.9849 13.8669 53.9849L18.1311 53.9849C18.1311 53.9849 18.2624 53.9781 18.2997 54.0224C18.3466 54.0782 18.2997 54.21 18.2997 54.21L17.8984 55.4572C17.8984 55.4572 17.8453 55.5732 17.7901 55.611C17.7256 55.6553 17.6207 55.6534 17.6207 55.6534H14.2741C12.3153 55.6534 11.1507 55.8082 11.1507 57.9835C11.1507 58.702 11.3506 59.2134 11.7622 59.5466C12.4578 60.1097 13.8098 60.1337 14.6359 60.053C14.6359 60.053 14.9749 58.9486 15.0307 58.7693C15.0961 58.5592 15.0674 58.509 14.8635 58.509C14.5688 58.509 14.0392 58.509 13.477 58.509C13.0831 58.509 12.696 58.3081 12.696 57.8256C12.696 57.3595 13.0561 57.089 13.5498 57.089C14.4044 57.089 16.1647 57.089 16.4942 57.089C16.9261 57.089 17.3669 57.1518 17.142 57.8446L15.951 61.5046C15.951 61.5046 14.9781 61.7703 13.4834 61.7703Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"50.2178",cy:"58.9897",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"50.2178",cy:"57.8774",r:"10.0103",fill:"url(#paint2_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M50.2179 65.107C54.2107 65.107 57.4475 61.8701 57.4475 57.8773C57.4475 53.8845 54.2107 50.6477 50.2179 50.6477C46.2251 50.6477 42.9882 53.8845 42.9882 57.8773C42.9882 61.8701 46.2251 65.107 50.2179 65.107ZM50.2179 66.2192C54.825 66.2192 58.5598 62.4844 58.5598 57.8773C58.5598 53.2702 54.825 49.5354 50.2179 49.5354C45.6108 49.5354 41.876 53.2702 41.876 57.8773C41.876 62.4844 45.6108 66.2192 50.2179 66.2192Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M57.4474 57.8773C57.4474 52.8722 53.2306 50.9621 52.1642 50.3696C51.0978 49.7771 50.2178 49.5354 50.2178 49.5354C54.8249 49.5354 58.5597 53.2702 58.5597 57.8773C58.5597 62.4844 54.8249 66.2192 50.2178 66.2192C50.2178 66.2192 50.4961 66.2147 52.1642 65.6631C53.8323 65.1115 57.4474 61.8701 57.4474 57.8773Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M49.83 61.7703C48.8376 61.7703 47.8822 61.4984 47.0382 60.9064C46.4499 60.4939 45.769 59.5625 45.769 57.9835C45.769 55.0541 47.2458 53.9849 50.2135 53.9849L54.4776 53.9849C54.4776 53.9849 54.609 53.9781 54.6462 54.0224C54.6931 54.0782 54.6462 54.21 54.6462 54.21L54.245 55.4572C54.245 55.4572 54.1918 55.5732 54.1367 55.611C54.0721 55.6553 53.9672 55.6534 53.9672 55.6534H50.6206C48.6619 55.6534 47.4972 55.8082 47.4972 57.9835C47.4972 58.702 47.6972 59.2134 48.1088 59.5466C48.8044 60.1097 50.1564 60.1337 50.9825 60.053C50.9825 60.053 51.3214 58.9486 51.3772 58.7693C51.4426 58.5592 51.414 58.509 51.21 58.509C50.9154 58.509 50.3857 58.509 49.8236 58.509C49.4296 58.509 49.0426 58.3081 49.0426 57.8256C49.0426 57.3595 49.4027 57.089 49.8963 57.089C50.751 57.089 52.5113 57.089 52.8407 57.089C53.2727 57.089 53.7134 57.1518 53.4885 57.8446L52.2976 61.5046C52.2976 61.5046 51.3246 61.7703 49.83 61.7703Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"49.2998",cy:"16.1223",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"49.2998",cy:"15.0103",r:"10.0103",fill:"url(#paint3_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M49.2998 22.2399C53.2926 22.2399 56.5294 19.0031 56.5294 15.0102C56.5294 11.0174 53.2926 7.78059 49.2998 7.78059C45.307 7.78059 42.0701 11.0174 42.0701 15.0102C42.0701 19.0031 45.307 22.2399 49.2998 22.2399ZM49.2998 23.3521C53.9069 23.3521 57.6417 19.6173 57.6417 15.0102C57.6417 10.4031 53.9069 6.66833 49.2998 6.66833C44.6927 6.66833 40.9579 10.4031 40.9579 15.0102C40.9579 19.6173 44.6927 23.3521 49.2998 23.3521Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M56.5291 15.0102C56.5291 10.0051 52.3123 8.09503 51.2459 7.50253C50.1795 6.91002 49.2994 6.66833 49.2994 6.66833C53.9065 6.66833 57.6413 10.4031 57.6413 15.0102C57.6413 19.6173 53.9065 23.3521 49.2994 23.3521C49.2994 23.3521 49.5778 23.3476 51.2459 22.796C52.914 22.2444 56.5291 19.0031 56.5291 15.0102Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M48.9119 18.9032C47.9195 18.9032 46.9641 18.6313 46.1201 18.0393C45.5318 17.6268 44.851 16.6954 44.851 15.1164C44.851 12.187 46.3277 11.1178 49.2954 11.1178L53.5596 11.1178C53.5596 11.1178 53.6909 11.111 53.7281 11.1553C53.775 11.2111 53.7281 11.3429 53.7281 11.3429L53.3269 12.5901C53.3269 12.5901 53.2737 12.7061 53.2186 12.7439C53.1541 12.7881 53.0491 12.7863 53.0491 12.7863H49.7025C47.7438 12.7863 46.5791 12.9411 46.5791 15.1164C46.5791 15.8349 46.7791 16.3462 47.1907 16.6794C47.8863 17.2426 49.2383 17.2666 50.0644 17.1859C50.0644 17.1859 50.4033 16.0814 50.4592 15.9021C50.5245 15.692 50.4959 15.6419 50.2919 15.6419C49.9973 15.6419 49.4677 15.6419 48.9055 15.6419C48.5115 15.6419 48.1245 15.441 48.1245 14.9584C48.1245 14.4924 48.4846 14.2219 48.9782 14.2219C49.8329 14.2219 51.5932 14.2219 51.9226 14.2219C52.3546 14.2219 52.7953 14.2847 52.5704 14.9775L51.3795 18.6374C51.3795 18.6374 50.4066 18.9032 48.9119 18.9032Z",fill:"#E2A60B"}),(0,A.jsx)("circle",{cx:"32.4925",cy:"37.2631",r:"10.0103",fill:"#CE8C0C"}),(0,A.jsx)("circle",{cx:"32.4925",cy:"36.151",r:"10.0103",fill:"url(#paint4_linear_1982_56)"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.4924 43.3806C36.4852 43.3806 39.7221 40.1438 39.7221 36.151C39.7221 32.1582 36.4852 28.9213 32.4924 28.9213C28.4996 28.9213 25.2628 32.1582 25.2628 36.151C25.2628 40.1438 28.4996 43.3806 32.4924 43.3806ZM32.4924 44.4929C37.0995 44.4929 40.8343 40.7581 40.8343 36.151C40.8343 31.5439 37.0995 27.8091 32.4924 27.8091C27.8853 27.8091 24.1505 31.5439 24.1505 36.151C24.1505 40.7581 27.8853 44.4929 32.4924 44.4929Z",fill:"#E2AB1A"}),(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.7217 36.151C39.7217 31.1458 35.5049 29.2358 34.4385 28.6433C33.3721 28.0508 32.4921 27.8091 32.4921 27.8091C37.0992 27.8091 40.834 31.5439 40.834 36.151C40.834 40.7581 37.0992 44.4929 32.4921 44.4929C32.4921 44.4929 32.7704 44.4883 34.4385 43.9368C36.1066 43.3852 39.7217 40.1438 39.7217 36.151Z",fill:"#D89C00"}),(0,A.jsx)("path",{d:"M32.1044 40.044C31.112 40.044 30.1566 39.7721 29.3126 39.1801C28.7243 38.7676 28.0435 37.8362 28.0435 36.2572C28.0435 33.3278 29.5202 32.2586 32.4879 32.2586L36.7521 32.2586C36.7521 32.2586 36.8834 32.2518 36.9207 32.2961C36.9675 32.3519 36.9207 32.4837 36.9207 32.4837L36.5194 33.7309C36.5194 33.7309 36.4662 33.8469 36.4111 33.8847C36.3466 33.929 36.2416 33.9271 36.2416 33.9271H32.895C30.9363 33.9271 29.7716 34.0819 29.7716 36.2572C29.7716 36.9757 29.9716 37.4871 30.3832 37.8202C31.0788 38.3834 32.4308 38.4074 33.2569 38.3267C33.2569 38.3267 33.5958 37.2223 33.6517 37.0429C33.7171 36.8328 33.6884 36.7827 33.4844 36.7827C33.1898 36.7827 32.6602 36.7827 32.098 36.7827C31.7041 36.7827 31.317 36.5818 31.317 36.0992C31.317 35.6332 31.6771 35.3627 32.1707 35.3627C33.0254 35.3627 34.7857 35.3627 35.1151 35.3627C35.5471 35.3627 35.9878 35.4255 35.763 36.1183L34.572 39.7782C34.572 39.7782 33.5991 40.044 32.1044 40.044Z",fill:"#E2A60B"}),(0,A.jsxs)("defs",{children:[(0,A.jsxs)("linearGradient",{id:"paint0_linear_1982_56",x1:"14.2842",y1:"5.22937",x2:"14.2842",y2:"25.2499",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint1_linear_1982_56",x1:"13.8712",y1:"47.8671",x2:"13.8712",y2:"67.8877",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint2_linear_1982_56",x1:"50.2178",y1:"47.8671",x2:"50.2178",y2:"67.8877",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint3_linear_1982_56",x1:"49.2998",y1:"5",x2:"49.2998",y2:"25.0206",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,A.jsxs)("linearGradient",{id:"paint4_linear_1982_56",x1:"32.4925",y1:"26.1407",x2:"32.4925",y2:"46.1613",gradientUnits:"userSpaceOnUse",children:[(0,A.jsx)("stop",{stopColor:"#FEDC28"}),(0,A.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})]})]}))})),U=n(38092),V=n(6996),H={creditsPackage:{display:"flex",flex:1,borderRadius:8,padding:16},iconStyle:{width:30,height:30},titleContainer:{width:"100%",display:"flex",justifyContent:"center"},iconContainer:{marginRight:8,display:"flex",alignItems:"center",justifyContent:"center",width:30},backgroundText:{textAlign:"left"}},z=function(e){switch(e){case 0:return(0,A.jsx)(F,{style:H.iconStyle});case 1:return(0,A.jsx)(D,{style:H.iconStyle});case 2:return(0,A.jsx)(N,{style:H.iconStyle});case 3:return(0,A.jsx)(_,{style:H.iconStyle});default:return(0,A.jsx)(B,{style:H.iconStyle})}},W=function(e){var t=e.onClose,n=e.suggestedPackage,r=e.missingCredits,i=e.showCalloutTip,s=o.useContext(J),k=s.error,w=s.fetchCreditsPackages,T=s.creditsPackageListingDatas,S=o.useContext(d.Z),P=o.useState(null),I=(0,a.Z)(P,2),E=I[0],M=I[1],L=(0,V.UQ)().isMediumScreen;o.useEffect((function(){w()}),[w]);var R=o.useMemo((function(){return function(e,t){if(!e)return null;var n=[];if(t){for(var r=0;r<e.length;r+=3){if(e.length-r===4){n.push(e.slice(r,r+2)),n.push(e.slice(r+2,r+4));break}n.push(e.slice(r,r+3))}return n}for(var i=0;i<e.length;i+=4){if(e.length-i===5){n.push(e.slice(i,i+3)),n.push(e.slice(i+3,i+5));break}if(e.length-i===6){n.push(e.slice(i,i+3)),n.push(e.slice(i+3,i+6));break}n.push(e.slice(i,i+4))}return n}(T,L)}),[T,L]);return(0,A.jsx)(c.I18n,{children:function(e){var a=e.i18n;return(0,A.jsxs)(g.ZP,{title:(0,A.jsx)(c.Trans,{id:"Purchase credits"}),open:!0,maxWidth:"md",onRequestClose:t,actions:[(0,A.jsx)(f.Z,{label:(0,A.jsx)(c.Trans,{id:"Close"}),onClick:t},"close")],children:[(0,A.jsxs)(p.ak,{noMargin:!0,children:[(0,A.jsx)(m.Z,{displayPurchaseAction:!1}),i&&(0,A.jsx)(U.Z,{kind:"info",children:(0,A.jsx)(c.Trans,{id:"You can use credits to feature a game or purchase asset packs and game templates in the store!"})}),!!r&&(0,A.jsxs)(u.sg,{noMargin:!0,children:[(0,A.jsx)(h.Z,{size:"sub-title",children:(0,A.jsx)(c.Trans,{id:"You're {missingCredits} credits short.",values:{missingCredits:r}})}),(0,A.jsx)(h.Z,{noMargin:!0,children:(0,A.jsx)(c.Trans,{id:"Recharge your account to purchase this item."})})]}),k?(0,A.jsx)(x.Z,{onRetry:w,children:(0,A.jsx)(c.Trans,{id:"Can't load the credits packages. Verify your internet connection or retry later."})}):R?R.map((function(e,t){return(0,A.jsx)(p.ep,{noColumnMargin:!0,children:e.map((function(e){var t,r=e.id,i=e.name,o=e.description,s=!n||n.id===r;return(0,A.jsx)("div",{style:(0,l.Z)((0,l.Z)({},H.creditsPackage),{},{border:"1px solid ".concat(S.palette.secondary)}),children:(0,A.jsxs)(p.ak,{alignItems:"center",justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,A.jsxs)("div",{style:H.titleContainer,children:[(0,A.jsx)("div",{style:H.iconContainer,children:z((t=e,T?T.findIndex((function(e){return e.id===t.id})):0))}),(0,A.jsxs)(p.pJ,{justifyContent:"space-between",alignItems:"flex-end",expand:!0,children:[(0,A.jsx)(u.x1,{noMargin:!0,alignItems:"flex-end",children:(0,A.jsx)(h.Z,{size:"sub-title",noMargin:!0,children:i})}),(0,A.jsx)(h.Z,{size:"body-small",color:"secondary",noMargin:!0,children:(0,C.e3)({productListingData:e,usageType:"default",i18n:a})})]})]}),(0,A.jsx)(u.sg,{noMargin:!0,alignItems:"center",expand:!0,children:(0,A.jsx)(h.Z,{size:"body-small",noMargin:!0,color:"secondary",align:"left",children:o})}),s?(0,A.jsx)(b.Z,{primary:!0,onClick:function(){return M(e)},label:(0,A.jsx)(c.Trans,{id:"Purchase"}),fullWidth:!0}):(0,A.jsx)(f.Z,{primary:!0,onClick:function(){return M(e)},label:(0,A.jsx)(c.Trans,{id:"Purchase"}),fullWidth:!0})]})},r)}))},"line-".concat(t))})):(0,A.jsx)(v.Z,{}),(0,A.jsxs)(j.Z,{style:H.backgroundText,children:[(0,A.jsx)(c.Trans,{id:"Not sure how many credits you need? Check <0>this guide</0> to help you decide.",components:[(0,A.jsx)(y.Z,{href:"https://wiki.gdevelop.io/gdevelop5/interface/profile/credits",onClick:function(){return Z.ZP.openExternalURL("https://wiki.gdevelop.io/gdevelop5/interface/profile/credits")}})]})," ",(0,A.jsx)(c.Trans,{id:"Follow GDevelop on socials and check your profile to get some free credits!"})]})]}),!!E&&(0,A.jsx)(O,{creditsPackageListingData:E,onClose:function(){return M(null)},onCloseWhenPurchaseSuccessful:function(){n&&t()}})]})}})},G=function(e){var t=e.onClose,n=e.title,s=e.message,l=e.onConfirm,d=e.successMessage,x=e.closeAutomaticallyAfterSuccess,C=o.useState(!1),j=(0,a.Z)(C,2),y=j[0],Z=j[1],w=o.useState(!1),T=(0,a.Z)(w,2),S=T[0],P=T[1],E=(0,I.Z)().showAlert,L=o.useContext(k.ZP),O=L.onRefreshGameTemplatePurchases,R=L.onRefreshAssetPackPurchases,F=L.onPurchaseSuccessful,D=L.onRefreshLimits,N=o.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,l();case 4:O(),R(),F(),D(),x&&t(),P(!0),e.next=22;break;case 12:if(e.prev=12,e.t0=e.catch(1),!(n=(0,M.T)(e.t0))||409!==n.status||"product-buy-with-credits/already-purchased"!==n.code){e.next=19;break}return e.next=18,E({title:{id:"You already own this product"},message:{id:"If you don't have access to it, restart GDevelop. If you still can't access it, please contact us."}});case 18:return e.abrupt("return");case 19:return console.error("An error happened while purchasing a product:",e.t0),e.next=22,E({title:{id:"Could not purchase this product"},message:{id:"An error happened while purchasing this product. Verify your internet connection or try again later."}});case 22:return e.prev=22,Z(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,12,22,25]])}))),[l,O,R,F,D,E,x,t]);return(0,A.jsx)(c.I18n,{children:function(e){e.i18n;return(0,A.jsx)(g.ZP,{title:n,open:!0,maxWidth:"sm",cannotBeDismissed:!0,onRequestClose:t,actions:[(0,A.jsx)(f.Z,{label:(0,A.jsx)(c.Trans,{id:"Close"}),onClick:t,disabled:y},"close"),!S&&(0,A.jsx)(b.Z,{label:(0,A.jsx)(c.Trans,{id:"Purchase"}),primary:!0,onClick:N,disabled:y},"confirm")],children:(0,A.jsxs)(p.ak,{noMargin:!0,children:[(0,A.jsx)(m.Z,{displayPurchaseAction:!1}),(0,A.jsx)(u.sg,{noMargin:!0,children:y?(0,A.jsx)(v.Z,{}):S?(0,A.jsx)(h.Z,{children:d}):(0,A.jsx)(h.Z,{children:s})})]})})}})},Y=n(4900),q={fetchCreditsPackages:function(){},creditsPackageListingDatas:null,error:null,openCreditsPackageDialog:function(){},closeCreditsPackageDialog:function(){},openCreditsUsageDialog:function(){}},J=o.createContext(q),X=function(e){return parseInt(e.split("_")[0],10)},K=function(e){var t=e.children,n=o.useState(null),l=(0,a.Z)(n,2),c=l[0],u=l[1],d=o.useState(null),p=(0,a.Z)(d,2),f=p[0],h=p[1],g=o.useState(!1),m=(0,a.Z)(g,2),x=m[0],v=m[1],b=o.useState(null),C=(0,a.Z)(b,2),j=C[0],y=C[1],Z=o.useState(!1),k=(0,a.Z)(Z,2),w=k[0],T=k[1],S=o.useState(null),P=(0,a.Z)(S,2),I=P[0],E=P[1],M=o.useRef(!1),L=o.useCallback((function(){M.current||f||(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),M.current=!0,e.prev=2,e.next=5,(0,s.Af)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," credit packages from the store.")),h(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Unable to load the credit packages from the store:",e.t0),u(e.t0);case 14:M.current=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()}),[f]);o.useEffect((function(){if(!M.current){var e=setTimeout((function(){console.info("Pre-fetching credit packages from the store..."),L()}),Y.lu);return function(){return clearTimeout(e)}}}),[L]);var O=o.useCallback((function(e){y(e&&e.missingCredits?e.missingCredits:0),T(!(!e||!e.showCalloutTip)&&e.showCalloutTip),v(!0)}),[]),R=o.useMemo((function(){if(!j||!f)return null;var e=null;return f.forEach((function(t){var n=X(t.id),r=e?X(e.id):null;n>=j&&(!r||n<r)&&(e=t)})),e||(e=f.reduce((function(e,t){return X(e.id)>X(t.id)?e:t}))),e}),[f,j]),F=o.useCallback((function(){v(!1)}),[]),D=o.useCallback((function(e){E(e)}),[]),N=o.useMemo((function(){return{creditsPackageListingDatas:f,fetchCreditsPackages:L,openCreditsPackageDialog:O,closeCreditsPackageDialog:F,error:c,openCreditsUsageDialog:D}}),[f,L,O,F,c,D]);return(0,A.jsxs)(J.Provider,{value:N,children:[t,x&&(0,A.jsx)(W,{onClose:function(){return v(!1)},suggestedPackage:R,missingCredits:j,showCalloutTip:w}),I&&(0,A.jsx)(G,{onClose:function(){return E(null)},message:I.message,title:I.title,onConfirm:I.onConfirm,successMessage:I.successMessage,closeAutomaticallyAfterSuccess:I.closeAutomaticallyAfterSuccess})]})}},25808:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var r=n(93433),i=n(18455),a=function(e){var t=new Set;return(0,i.mapFor)(0,e.getObjectsCount(),(function(n){var r=e.getObjectAt(n).getAssetStoreId();r&&t.add(r)})),t},o=function(e,t){var n=a(e.getObjects());if(t){var o=a(t);n=new Set([].concat((0,r.Z)(n),(0,r.Z)(o)))}else(0,i.mapFor)(0,e.getLayoutsCount(),(function(t){var i=e.getLayoutAt(t);n=new Set([].concat((0,r.Z)(n),(0,r.Z)(a(i.getObjects()))))}));return n}},30227:function(e,t,n){"use strict";n.d(t,{I:function(){return h},h:function(){return g}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(81442),l=n(69197),c=n(82069),u=n(4900),d=n(29343),p=new Set,f=[],h=o.createContext({exampleFilters:null,exampleShortHeadersSearchResults:null,fetchExamplesAndFilters:function(){},exampleShortHeaders:null,error:null,searchText:"",setSearchText:function(){},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}),g=function(e){var t=e.children,n=o.useState(null),g=(0,a.Z)(n,2),m=g[0],x=g[1],v=o.useState(null),b=(0,a.Z)(v,2),C=b[0],j=b[1],y=o.useState(null),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=o.useState(null),S=(0,a.Z)(T,2),P=S[0],I=S[1],E=o.useRef(!1),M=o.useState(""),L=(0,a.Z)(M,2),A=L[0],O=L[1],R=(0,s.m)(),F=o.useCallback((function(){m||E.current||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(null),E.current=!0,e.prev=2,e.next=5,(0,l.rx)();case 5:t=e.sent,n=t.exampleShortHeaders,i=t.filters,console.info("Loaded ".concat(n?n.length:0," examples from the example store.")),I(n),j(i),a={},n.forEach((function(e){a[e.id]=e})),x(a),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Unable to load the examples from the example store:",e.t0),w(e.t0);case 19:E.current=!1;case 20:case"end":return e.stop()}}),e,null,[[2,15]])})))()}),[m,E]);o.useEffect((function(){if(!m&&!E.current){var e=setTimeout((function(){console.info("Pre-fetching examples from the example store..."),F()}),u.oN);return function(){return clearTimeout(e)}}}),[F,m,E]);var D=R.chosenCategory,N=R.chosenFilters,_=(0,c.qg)(m,{searchText:A,chosenCategory:D,chosenFilters:N,excludedTiers:p,defaultFirstSearchItemIds:f,shuffleResults:!1}),B=o.useMemo((function(){return{exampleShortHeadersSearchResults:_,fetchExamplesAndFilters:F,exampleShortHeaders:P,exampleFilters:C,error:k,searchText:A,setSearchText:O,filtersState:R}}),[_,P,k,C,A,R,F]);return(0,d.jsx)(h.Provider,{value:B,children:t})}},48210:function(e,t,n){"use strict";n.d(t,{D:function(){return v},H:function(){return x}});var r=n(93433),i=n(74165),a=n(1413),o=n(15861),s=n(29439),l=n(28381),c=n(81442),u=n(39126),d=n(82069),p=n(36262),f=n(4900),h=n(29343),g=new Set,m=new Set(["experimental"]),x=l.createContext({filters:null,searchResults:null,fetchExtensionsAndFilters:function(){},error:null,searchText:"",setSearchText:function(){},allCategories:[],chosenCategory:"",setChosenCategory:function(){},translatedExtensionShortHeadersByName:{},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}},hasExtensionNamed:function(){return!1}}),v=function(e){var t=e.children,n=e.i18n,v=e.defaultSearchText,b=l.useState({}),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=l.useContext(p.ZP).values,k=Z.showExperimentalExtensions,w=Z.language,T=l.useState([]),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=l.useState(null),M=(0,s.Z)(E,2),L=M[0],A=M[1],O=l.useState(null),R=(0,s.Z)(O,2),F=R[0],D=R[1],N=l.useRef(!1),_=l.useState(v||""),B=(0,s.Z)(_,2),U=B[0],V=B[1],H=l.useState(""),z=(0,s.Z)(H,2),W=z[0],G=z[1],Y=(0,c.m)(),q=l.useCallback((function(){Object.keys(j).length&&L===w||N.current||(0,o.Z)((0,i.Z)().mark((function e(){var t,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(null),V(""),N.current=!0,e.prev=3,e.next=6,(0,u.In)();case 6:t=e.sent,r=t.headers,o={},r.forEach((function(e){var t=(0,a.Z)((0,a.Z)({},e),{},{fullName:n._(e.fullName),shortDescription:n._(e.shortDescription)});o[e.name]=t})),console.info("Loaded ".concat(r?r.length:0," extensions from the extension store.")),y(o),A(w),I(t.views.default.firstIds),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.error("Unable to load the extensions from the extension store:",e.t0),D(e.t0);case 20:N.current=!1;case 21:case"end":return e.stop()}}),e,null,[[3,16]])})))()}),[j,N,n,w,L]);l.useEffect((function(){if(!(Object.keys(j).length&&L===w||N.current)){var e=setTimeout((function(){console.info("Pre-fetching extensions from extension store..."),q()}),f.hT);return function(){return clearTimeout(e)}}}),[q,j,N,w,L]);var J=l.useMemo((function(){var e=new Set;for(var t in j)e.add(j[t].category);return(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))}),[j]),X=l.useMemo((function(){var e=new Set;for(var t in j)j[t].tags.forEach((function(t){return e.add(t)}));var n=(0,r.Z)(e).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}));return{allTags:n,defaultTags:n,tagsTree:[]}}),[j]),K=(0,d.qg)(j,{searchText:U,chosenItemCategory:W,chosenCategory:Y.chosenCategory,chosenFilters:Y.chosenFilters,excludedTiers:k?g:m,defaultFirstSearchItemIds:P}),Q=l.useCallback((function(e){return!!j[e]}),[j]),$=l.useMemo((function(){return{searchResults:K,fetchExtensionsAndFilters:q,filters:X,allCategories:J,chosenCategory:W,setChosenCategory:G,error:F,searchText:U,setSearchText:V,translatedExtensionShortHeadersByName:j,filtersState:Y,hasExtensionNamed:Q}}),[K,F,X,J,W,G,U,j,Y,q,Q]);return(0,h.jsx)(x.Provider,{value:$,children:t})}},87262:function(e,t,n){"use strict";n.d(t,{Fk:function(){return T},WC:function(){return P},WF:function(){return I},bg:function(){return S},wO:function(){return A}});var r=n(93433),i=n(74165),a=n(37762),o=n(15861),s=n(28381),l=n(30141),c=n(39126),u=n(18455),d=n(65056),p=n(28923),f=n(29118),h=n.n(f),g=n(10952),m=n.n(g),x=n(48210),v=n(52578),b=n(60575),C=n.n(b),j=n(11896),y=n(3550),Z=n(38428),k=n.n(Z),w=n.g.gd,T=function(e,t){var n=e[t];if(!n)throw new Error("Unable to find extension "+t+" in the registry.");return n},S=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,o,s,l,c,u,d,p,f,h,g,m,x,b,C,y;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requiredExtensions,r=t.project,o=t.extensionShortHeadersByName,0!==n.length){e.next=3;break}return e.abrupt("return",{requiredExtensionShortHeaders:[],missingExtensionShortHeaders:[],outOfDateExtensionShortHeaders:[],breakingChangesExtensionShortHeaders:[],incompatibleWithIdeExtensionShortHeaders:[],safeToUpdateExtensions:[],isGDevelopUpdateNeeded:!1});case 3:s=n.map((function(e){return T(o,e.extensionName)})),l=0;case 5:if(!(l<s.length)){e.next=16;break}if(c=s[l],u=c.requiredExtensions){e.next=10;break}return e.abrupt("continue",13);case 10:u=u.filter((function(e){var t=e.extensionName;return!s.some((function(e){return e.name===t}))})),d=(0,a.Z)(u);try{for(d.s();!(p=d.n()).done;)f=p.value,h=T(o,f.extensionName),s.push(h)}catch(i){d.e(i)}finally{d.f()}case 13:l++,e.next=5;break;case 16:return g=s.filter((function(e){return!(0,j.XB)((0,v.r1)(),e.gdevelopVersion)})),m=s.filter((function(e){return r.hasEventsFunctionsExtensionNamed(e.name)&&r.getEventsFunctionsExtension(e.name).getVersion()!==e.version})),x=m.filter((function(e){return r.hasEventsFunctionsExtensionNamed(e.name)&&(0,j.dY)(r.getEventsFunctionsExtension(e.name).getVersion(),e).length>0})),b=E(w,s),C=m.filter((function(e){return!g.includes(e)&&!x.includes(e)})),y=g.some((function(e){return b.includes(e)})),e.abrupt("return",{requiredExtensionShortHeaders:s,missingExtensionShortHeaders:b,outOfDateExtensionShortHeaders:m,breakingChangesExtensionShortHeaders:x,incompatibleWithIdeExtensionShortHeaders:g,safeToUpdateExtensions:C,isGDevelopUpdateNeeded:y});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){return h()(m()(e.map((function(e){return e.requiredExtensions||[]}))),(function(e){return e.extensionName}))},I=function(){var e=function(){var e=(0,d.Z)(),t=e.showConfirmation,n=e.showDeleteConfirmation,r=s.useContext(y.Z).currentlyRunningInAppTutorial;return function(){var e=(0,o.Z)((0,i.Z)().mark((function e(o){var s,l,c,u,d,p,f,h,g,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=o.project,l=o.outOfDateExtensionShortHeaders,c=o.reason,!r){e.next=3;break}return e.abrupt("return","skip");case 3:u=new Map,d=(0,a.Z)(l),e.prev=5,d.s();case 7:if((p=d.n()).done){e.next=16;break}if(f=p.value,s.hasEventsFunctionsExtensionNamed(f.name)){e.next=11;break}return e.abrupt("continue",14);case 11:h=s.getEventsFunctionsExtension(f.name).getVersion(),(g=(0,j.dY)(h,f)).length>0&&u.set(f,g);case 14:e.next=7;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),d.e(e.t0);case 21:return e.prev=21,d.f(),e.finish(21);case 24:if(m=l.filter((function(e){return!u.has(e)})),!(u.size>0)){e.next=36;break}return e.next=28,n({title:{id:"Breaking changes"},message:"asset"===c?{id:"This asset requires updates to extensions that have breaking changes{0}Do you want to update them now?",values:{0:"\n\n"+(0,j.nG)(u)+"\n"}}:"behavior"===c?{id:"This behavior requires updates to extensions that have breaking changes{0}Do you want to update them now?",values:{0:"\n\n"+(0,j.nG)(u)+"\n"}}:{id:"This extension requires updates to extensions that have breaking changes{0}Do you want to update them now?",values:{0:"\n\n"+(0,j.nG)(u)+"\n"}},confirmButtonLabel:{id:"Update the extension"},dismissButtonLabel:{id:"Abort"}});case 28:if(!e.sent){e.next=32;break}e.t1="update",e.next=33;break;case 32:e.t1="abort";case 33:return e.abrupt("return",e.t1);case 36:if(!(m.length>0)){e.next=47;break}return e.next=39,t({title:{id:"Extension update"},message:"asset"===c?{id:"Before installing this asset, it's strongly recommended to update these extensions{0}Do you want to update them now?",values:{0:"\n\n - "+m.map((function(e){return e.fullName})).join("\n - ")+"\n\n"}}:"behavior"===c?{id:"Before installing this behavior, it's strongly recommended to update these extensions{0}Do you want to update them now?",values:{0:"\n\n - "+m.map((function(e){return e.fullName})).join("\n - ")+"\n\n"}}:{id:"Before installing this extension, it's strongly recommended to update these extensions{0}Do you want to update them now?",values:{0:"\n\n - "+m.map((function(e){return e.fullName})).join("\n - ")+"\n\n"}},confirmButtonLabel:{id:"Update the extension"},dismissButtonLabel:{id:"Skip the update"}});case 39:if(!e.sent){e.next=43;break}e.t2="update",e.next=44;break;case 43:e.t2="skip";case 44:return e.abrupt("return",e.t2);case 47:return e.abrupt("return","update");case 48:case"end":return e.stop()}}),e,null,[[5,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()}(),t=(0,d.Z)().showAlert,n=s.useContext(p.Z);return function(){var r=(0,o.Z)((0,i.Z)().mark((function r(a){var o,s,l,c,u,d,p,f,h,g;return(0,i.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=a.project,s=a.requiredExtensionInstallation,l=a.importedSerializedExtensions,c=a.onWillInstallExtension,u=a.onExtensionInstalled,d=a.updateMode,p=a.reason,!s.isGDevelopUpdateNeeded){r.next=4;break}return t({title:{id:"Could not install the extension"},message:{id:"Please upgrade the editor to the latest version."}}),r.abrupt("return",!1);case 4:if(f=s.outOfDateExtensionShortHeaders,h=s.safeToUpdateExtensions,0!==f.length){r.next=9;break}r.t0="skip",r.next=12;break;case 9:return r.next=11,e({project:o,outOfDateExtensionShortHeaders:"all"===d?f:h,reason:p});case 11:r.t0=r.sent;case 12:if("abort"!==(g=r.t0)){r.next=15;break}return r.abrupt("return",!1);case 15:return r.next=17,M({requiredExtensionInstallation:s,shouldUpdateExtension:"update"===g,eventsFunctionsExtensionsState:n,project:o,onWillInstallExtension:c,onExtensionInstalled:u,importedSerializedExtensions:l});case 17:return r.abrupt("return",!0);case 18:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},E=function(e,t){var n=(0,u.mapVector)(e.asPlatform(e.JsPlatform.get()).getAllPlatformExtensions(),(function(e){return e.getName()}));return t.filter((function(e){return!n.includes(e.name)}))},M=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,a,o,s,l,u,d,p,f,h,g,m,x,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requiredExtensionInstallation,a=t.shouldUpdateExtension,o=t.eventsFunctionsExtensionsState,s=t.project,l=t.onWillInstallExtension,u=t.onExtensionInstalled,d=t.importedSerializedExtensions,p=n.requiredExtensionShortHeaders,f=n.missingExtensionShortHeaders,h=n.outOfDateExtensionShortHeaders,0!==f.length||0!==h.length||0!==d.length){e.next=4;break}return e.abrupt("return");case 4:return g=C()(a?[].concat((0,r.Z)(f),(0,r.Z)(h)):f).filter((function(e){return!d.some((function(t){return t.name===e.name}))})),e.next=7,Promise.all(g.map((function(e){return(0,c.RT)(e)})));case 7:return m=e.sent,x=[].concat((0,r.Z)(d),(0,r.Z)(m)),v=x.map((function(e){return e.name})),l(v),e.next=13,L(o,s,x);case 13:if(u(v),!E(w,p).length){e.next=17;break}throw new Error("These extensions could not be installed: "+f.map((function(e){return e.name})).join(", "));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,s,l=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(l.length>3&&void 0!==l[3])||l[3],o=r.map((function(e){var t=e.name;if(!t)throw new Error("Malformed extension (missing name).");return t})),s=w.Serializer.fromJSObject(r),n.unserializeAndInsertExtensionsFrom(s),s.delete(),a&&o.forEach((function(e){n.hasEventsFunctionsExtensionNamed(e)&&n.getEventsFunctionsExtension(e).setOrigin("gdevelop-extension-store",e)})),e.abrupt("return",t.loadProjectEventsFunctionsExtensions(n));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=(0,d.Z)(),t=e.showConfirmation,n=e.showAlert,r=s.useContext(p.Z),a=I(),c=s.useContext(x.H).translatedExtensionShortHeadersByName;return function(){var e=(0,o.Z)((0,i.Z)().mark((function e(s){var d,p,f,h,g,m,x,v,b,C,j,y,Z;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=s.i18n,p=s.project,f=s.onWillInstallExtension,h=s.onExtensionInstalled,g=r.getEventsFunctionsExtensionOpener()){e.next=4;break}return e.abrupt("return",[]);case 4:return e.prev=4,e.next=7,g.chooseEventsFunctionExtensionFile();case 7:if(0!==(m=e.sent).length){e.next=10;break}return e.abrupt("return",[]);case 10:return e.next=12,k().withConcurrency(6).for(m).process(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.readEventsFunctionExtensionFile(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:if(x=e.sent,v=x.results,!(b=v.map((function(e){return e.name}))).includes((function(e){return p.hasEventsFunctionsExtensionNamed(e)}))){e.next=23;break}return e.next=18,t({title:{id:"Replace existing extension"},message:{id:"An extension with this name already exists in the project. Importing this extension will replace it."},confirmButtonLabel:"Replace"});case 18:if(e.sent){e.next=21;break}return e.abrupt("return",[]);case 21:e.next=30;break;case 23:if(C=!1,j=w.asPlatform(w.JsPlatform.get()).getAllPlatformExtensions(),(0,u.mapVector)(j,(function(e){b.includes(e.getName())&&(C=!0)})),!C){e.next=30;break}return e.next=29,n({title:{id:"Invalid name"},message:{id:"The extension can't be imported because it has the same name as a built-in extension."}});case 29:return e.abrupt("return",[]);case 30:return e.next=32,S({requiredExtensions:P(v),project:p,extensionShortHeadersByName:c});case 32:return y=e.sent,Z=function(e){return!b.includes(e.name)},y.breakingChangesExtensionShortHeaders=y.breakingChangesExtensionShortHeaders.filter(Z),y.incompatibleWithIdeExtensionShortHeaders=y.incompatibleWithIdeExtensionShortHeaders.filter(Z),y.missingExtensionShortHeaders=y.missingExtensionShortHeaders.filter(Z),y.outOfDateExtensionShortHeaders=y.outOfDateExtensionShortHeaders.filter(Z),y.requiredExtensionShortHeaders=y.requiredExtensionShortHeaders.filter(Z),y.safeToUpdateExtensions=y.safeToUpdateExtensions.filter(Z),y.isGDevelopUpdateNeeded=y.incompatibleWithIdeExtensionShortHeaders.some((function(e){return y.missingExtensionShortHeaders.includes(e)})),e.next=43,a({project:p,requiredExtensionInstallation:y,importedSerializedExtensions:v,onWillInstallExtension:f,onExtensionInstalled:h,updateMode:"all",reason:"extension"});case 43:if(e.sent){e.next=46;break}return e.abrupt("return",[]);case 46:return e.abrupt("return",b);case 49:return e.prev=49,e.t0=e.catch(4),(0,l.gR)({message:d._({id:"An error happened while loading this extension. Please check that it is a proper extension file and compatible with this version of GDevelop"}),rawError:e.t0,errorId:"extension-loading-error"}),e.abrupt("return",[]);case 53:case"end":return e.stop()}}),e,null,[[4,49]])})));return function(t){return e.apply(this,arguments)}}()}},87706:function(e,t,n){"use strict";n.d(t,{Im:function(){return j},Lu:function(){return x},Pr:function(){return m},Sg:function(){return C}});var r=n(74165),i=n(37762),a=n(15861),o=n(84140),s=n(79431),l=n(41006),c=n(84360),u=n(68145),d=n(17037),p=n(87262),f=n.g.gd,h=function(e,t,n,r){var i=n.name;if(!r[i]){var a=e.getResourcesManager(),c=n.file,u=n.origin?n.origin.name:"",p=(0,o.d0)(c)?(0,o.Lj)(c):u,f=n.origin?n.origin.identifier:"",h=p&&f?a.getResourceNameWithOrigin(p,f):"",g=a.getResourceNameWithFile(c);if(h)r[i]=h;else if(g)r[i]=g;else{var m=d.QP.find((function(e){return e.kind===n.kind}));if(!m)throw new Error('Resource of kind "'.concat(n.kind,'" is not supported.'));var x=m.createNewResource();(0,l.qx)(x,n),"image"===x.getKind()&&x.setSmooth("nearest"!==e.getScaleMode()&&!(0,o.V0)(t));var v=(0,s.Z)(i,(function(e){return a.hasResource(e)}));x.setName(v),x.setOrigin(p,f),a.addResource(x),x.delete(),r[i]=v}}},g=function(e,t,n){for(var r=0;r<e.getVariantsCount();r++){var i=e.getVariantAt(r);if(i.getAssetStoreAssetId()===t&&i.getAssetStoreOriginalName()===n)return i}return null},m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,o,d,p,m,x,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.asset,a=t.project,o=t.objectsContainer,d=t.targetObjectFolderOrObject,p=t.requestedObjectName,m={},x={},v=[],n.objectAssets.forEach((function(e){var t=e.object.type;if(!t)throw new Error("An object has no type specified");var r=[],b=e.variants;if(b){var C,j=(0,i.Z)(b);try{var y=function(){var e=C.value,t=e.objectType,i=e.variant;if(a.hasEventsBasedObject(t)){var o=a.getEventsBasedObject(t).getVariants(),c=g(o,n.id,i.name);if(!c){var u=(0,s.Z)(i.name||n.name,(function(e){return o.hasVariantNamed(e)})),d=(c=o.insertNewVariant(u,o.getVariantsCount())).getName();(0,l.qx)(c,i,"unserializeFrom",a),c.setName(d),c.setAssetStoreAssetId(n.id),c.setAssetStoreOriginalName(i.name)}c.getName()!==i.name&&r.push({objectType:t,oldVariantName:i.name,newVariantName:c.getName()})}};for(j.s();!(C=j.n()).done;)y()}catch(V){j.e(V)}finally{j.f()}var Z,k=(0,i.Z)(b);try{for(k.s();!(Z=k.n()).done;){var w=Z.value,T=w.objectType,S=w.variant;if(a.hasEventsBasedObject(T)){var P=a.getEventsBasedObject(T).getVariants(),I=g(P,n.id,S.name);if(I)for(var E=function(){var e=I.getObjects().getObjectAt(M);if(a.hasEventsBasedObject(e.getType())){var t=f.asCustomObjectConfiguration(e.getConfiguration()),n=r.find((function(t){return t.objectType===e.getType()}));n&&t.setVariantName(n.newVariantName)}},M=0;M<I.getObjects().getObjectsCount();M++)E()}}}catch(V){k.e(V)}finally{k.f()}}var L,A=f.Project.getSafeName(p||e.object.name),O=(0,s.Z)(A,(function(e){return o.hasObjectNamed(e)}));if(d){var R=(0,u.c)(d),F=R.folder,D=R.position;L=o.insertNewObjectInFolder(a,t,O,F,D)}else L=o.insertNewObject(a,t,O,o.getObjectsCount());if(m[A]=O,(0,l.qx)(L,e.object,"unserializeFrom",a),L.setName(O),L.setAssetStoreId(n.id),a.hasEventsBasedObject(L.getType())){var N=f.asCustomObjectConfiguration(L.getConfiguration());N.getVariantName()&&N.setMarkedAsOverridingEventsBasedObjectChildrenConfiguration(!1);var _=r.find((function(e){return e.objectType===L.getType()}));_&&N.setVariantName(_.newVariantName)}e.resources.forEach((function(e){h(a,n,e,x)}));var B=(0,c.R)(x),U=new f.ResourcesRenamer(a.getResourcesManager(),B);B.delete(),L.getConfiguration().exposeResources(U),U.delete(),v.push(L)})),e.abrupt("return",{createdObjects:v});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=m,v=function(e){return(0,p.WC)(e.objectAssets)},b=function(e){var t,n=[],r=(0,i.Z)(e);try{for(r.s();!(t=r.n()).done;){var a,o=t.value,s=(0,i.Z)(v(o));try{var l=function(){var e=a.value;n.some((function(t){return t.extensionName===e.extensionName}))||n.push(e)};for(s.s();!(a=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}}}catch(c){r.e(c)}finally{r.f()}return n},C=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assets,i=t.project,a=t.extensionShortHeadersByName,o=b(n),e.next=4,(0,p.bg)({requiredExtensions:o,project:i,extensionShortHeadersByName:a});case 4:return(s=e.sent).isGDevelopUpdateNeeded=s.isGDevelopUpdateNeeded||s.incompatibleWithIdeExtensionShortHeaders.length>0,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e,t){var n,r=new Set,a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;e.hasEventsBasedObject(o.getType())&&r.add(o.getType())}}catch(u){a.e(u)}finally{a.f()}var s,l=(0,i.Z)(r);try{for(l.s();!(s=l.n()).done;){var c=s.value;f.EventsBasedObjectVariantHelper.complyVariantsToEventsBasedObject(e,e.getEventsBasedObject(c))}}catch(u){l.e(u)}finally{l.f()}}},77987:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ae},$$:function(){return ne},wF:function(){return re}});var r=n(1413),i=n(29439),a=n(74165),o=n(15861),s=n(36600),l=n(28381),c=n(1773),u=n(10888),d=n(4076),p=n(28894),f=n(1637),h=n(75333),g=n(36262),m=n(60022),x=n(84090),v=n(34193),b=n(87706),C=n(87262),j=n(84140),y=n(2066),Z=n(24347),k=n(65056),w=n(6996),T=n(25808),S=n(38428),P=n.n(S),I=n(37762),E=n(4942),M=n(74044),L=n(36607),A=n(15169),O=n(23816),R=n(40243),F=n(2632),D=n(3429),N=n(51771),_=n(42699),B=n(45047),U=n(36173),V=n(29343),H=n.g.gd,z=function(e){var t=e.enumeratedObjectMetadata,n=e.onClick,r=e.id;if(""===t.name)return null;var i=t.iconFilename||"";return(0,V.jsx)(A.HC,{id:r,leftIcon:(0,V.jsx)(M.Z,{src:i,iconSize:40,isGDevelopIcon:!0}),primaryText:t.fullName,secondaryText:t.description,secondaryTextLines:2,onClick:n,disabled:!!t.isDependentWithParent},t.name)},W=function(e){var t=e.packTag,n=e.onAssetSelect,r=e.onBack,i=e.isAssetBeingInstalled,a=l.useContext(x.KY),o=a.useSearchItem,c=a.error,u=o("",l.useMemo((function(){return{node:{name:t,allChildrenTags:[],children:[]},parentNodes:[]}}),[t]),null,l.useMemo((function(){return[]}),[]));return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(R.sg,{noMargin:!0,expand:!0,children:[(0,V.jsx)(R.x1,{children:(0,V.jsx)(_.Z,{icon:(0,V.jsx)(B.Z,{}),label:(0,V.jsx)(s.Trans,{id:"Back"}),onClick:r,disabled:i})}),(0,V.jsx)(U.Z,{assetShortHeaders:u,error:c,onOpenDetails:function(e){i||n(e)}})]})})},G=function(e){var t,n=e.i18n,i=e.project,a=e.eventsBasedObject,o=(0,O.ND)(i),s=(t={},(0,E.Z)(t,(0,N.X)("General",n),[{name:"Sprite"},{name:"TiledSpriteObject::TiledSprite"},{name:"PanelSpriteObject::PanelSprite"},{name:"Scene3D::Cube3DObject"},{name:"Scene3D::Model3DObject"},{name:"TileMap::SimpleTileMap",assetStorePackTag:"starter tilemaps"},a&&{name:"Sprite3D::Sprite3D",fullName:n._({id:"3D sprite"}),description:n._({id:"An animated sprite in 3D."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWdob3N0LW91dGxpbmUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgMkM3LjAzIDIgMyA2LjAzIDMgMTFWMjJMNiAxOUw5IDIyTDEyIDE5TDE1IDIyTDE4IDE5TDIxIDIyVjExQzIxIDYuMDMgMTYuOTcgMiAxMiAyTTE5IDE3LjE3TDE4IDE2LjE3TDE2LjU5IDE3LjU5TDE1IDE5LjE3TDEzLjQxIDE3LjU5TDEyIDE2LjE3TDEwLjU5IDE3LjU5TDkgMTkuMTdMNy40MSAxNy41OUw2IDE2LjE3TDUgMTcuMTdWMTFDNSA3LjE0IDguMTQgNCAxMiA0UzE5IDcuMTQgMTkgMTFWMTcuMTdNMTEgMTBDMTEgMTEuMTEgMTAuMTEgMTIgOSAxMlM3IDExLjExIDcgMTAgNy45IDggOSA4IDExIDguOSAxMSAxME0xNyAxMEMxNyAxMS4xMSAxNi4xMSAxMiAxNSAxMlMxMyAxMS4xMSAxMyAxMCAxMy45IDggMTUgOCAxNyA4LjkgMTcgMTBaIiAvPjwvc3ZnPg==",isRenderedIn3D:!0,requiredExtensions:[{extensionName:"Sprite3D",extensionVersion:"1.0.0"}]}].filter(Boolean)),(0,E.Z)(t,(0,N.X)("Input",n),[{name:"SpriteMultitouchJoystick::SpriteMultitouchJoystick",fullName:n._({id:"Multitouch Joystick"}),description:n._({id:"Joystick for touchscreens."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMTYiIGN5PSIxNiIgcj0iMTMiLz4NCjxwb2x5bGluZSBjbGFzcz0ic3QwIiBwb2ludHM9IjI4LjQsMTIgMjAsMTIgMjAsMy42ICIvPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMjAsMjguNCAyMCwyMCAyOC40LDIwICIvPg0KPHBvbHlsaW5lIGNsYXNzPSJzdDAiIHBvaW50cz0iMy42LDIwIDEyLDIwIDEyLDI4LjQgIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSIxMiwzLjYgMTIsMTIgMy42LDEyICIvPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIxNiw2IDE2LjcsNyAxNS4zLDcgIi8+DQo8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjE2LDI2IDE1LjMsMjUgMTYuNywyNSAiLz4NCjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNiwxNiA3LDE1LjMgNywxNi43ICIvPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIyNiwxNiAyNSwxNi43IDI1LDE1LjMgIi8+DQo8L3N2Zz4NCg==",isRenderedIn3D:!1,assetStorePackTag:"multitouch joysticks",requiredExtensions:[{extensionName:"SpriteMultitouchJoystick",extensionVersion:"1.0.0"}]}]),(0,E.Z)(t,(0,N.X)("Text",n),[{name:"TextObject::Text"},{name:"BBText::BBText"},{name:"BitmapText::BitmapTextObject"},a&&{name:"Text3D::Text3D",fullName:n._({id:"3D text"}),description:n._({id:"Display a text in 3D."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWZvcm1hdC10ZXh0IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTE4LjUsNEwxOS42Niw4LjM1TDE4LjcsOC42MUMxOC4yNSw3Ljc0IDE3Ljc5LDYuODcgMTcuMjYsNi40M0MxNi43Myw2IDE2LjExLDYgMTUuNSw2SDEzVjE2LjVDMTMsMTcgMTMsMTcuNSAxMy4zMywxNy43NUMxMy42NywxOCAxNC4zMywxOCAxNSwxOFYxOUg5VjE4QzkuNjcsMTggMTAuMzMsMTggMTAuNjcsMTcuNzVDMTEsMTcuNSAxMSwxNyAxMSwxNi41VjZIOC41QzcuODksNiA3LjI3LDYgNi43NCw2LjQzQzYuMjEsNi44NyA1Ljc1LDcuNzQgNS4zLDguNjFMNC4zNCw4LjM1TDUuNSw0SDE4LjVaIiAvPjwvc3ZnPg==",isRenderedIn3D:!0,requiredExtensions:[{extensionName:"Text3D",extensionVersion:"1.0.0"}]}].filter(Boolean)),(0,E.Z)(t,(0,N.X)("User interface",n),[{name:"PanelSpriteButton::PanelSpriteButton",fullName:n._({id:"Panel sprite button"}),description:n._({id:"Resizable button with text customization."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI5LDIzSDNjLTEuMSwwLTItMC45LTItMlYxMWMwLTEuMSwwLjktMiwyLTJoMjZjMS4xLDAsMiwwLjksMiwydjEwQzMxLDIyLjEsMzAuMSwyMywyOSwyM3oiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMywxOUwxMywxOWMtMS4xLDAtMi0wLjktMi0ydi0yYzAtMS4xLDAuOS0yLDItMmgwYzEuMSwwLDIsMC45LDIsMnYyQzE1LDE4LjEsMTQuMSwxOSwxMywxOXoiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIxOCIgeTE9IjEzIiB4Mj0iMTgiIHkyPSIxOSIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjIxIiB5MT0iMTMiIHgyPSIxOCIgeTI9IjE3Ii8+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMjEiIHkxPSIxOSIgeDI9IjE5IiB5Mj0iMTYiLz4NCjwvc3ZnPg0K",isRenderedIn3D:!1,assetStorePackTag:"menu buttons",requiredExtensions:[{extensionName:"PanelSpriteButton",extensionVersion:"1.0.0"}]},{name:"PanelSpriteSlider::PanelSpriteSlider",fullName:n._({id:"Slider"}),description:n._({id:"Let users select a numerical value by dragging a slider."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMjMiIGN5PSI3IiByPSIzIi8+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMyIgeTE9IjciIHgyPSIyMCIgeTI9IjciLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjciIHgyPSIyNiIgeTI9IjciLz4NCjxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjEyIiBjeT0iMTYiIHI9IjMiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIzIiB5MT0iMTYiIHgyPSI5IiB5Mj0iMTYiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjE2IiB4Mj0iMTUiIHkyPSIxNiIvPg0KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMjMiIGN5PSIyNSIgcj0iMyIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjMiIHkxPSIyNSIgeDI9IjIwIiB5Mj0iMjUiLz4NCjxsaW5lIGNsYXNzPSJzdDAiIHgxPSIyOSIgeTE9IjI1IiB4Mj0iMjYiIHkyPSIyNSIvPg0KPC9zdmc+DQo=",isRenderedIn3D:!1,assetStorePackTag:"slider",requiredExtensions:[{extensionName:"PanelSpriteSlider",extensionVersion:"1.0.0"}]},{name:"SpriteToggleSwitch::SpriteToggleSwitch",fullName:n._({id:"Toggle switch"}),description:n._({id:"A toggle switch that users can click or touch."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTIzLDIzSDljLTMuOSwwLTctMy4xLTctN3YwYzAtMy45LDMuMS03LDctN2gxNGMzLjksMCw3LDMuMSw3LDd2MEMzMCwxOS45LDI2LjksMjMsMjMsMjN6Ii8+DQo8Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI5IiBjeT0iMTYiIHI9IjQiLz4NCjwvc3ZnPg0K",isRenderedIn3D:!1,assetStorePackTag:"toggle switch",requiredExtensions:[{extensionName:"SpriteToggleSwitch",extensionVersion:"1.0.0"}]},{name:"PanelSpriteContinuousBar::PanelSpriteContinuousBar",fullName:n._({id:"Resource bar (continuous)"}),description:n._({id:"A bar that represents a resource in the game (health, mana, ammo, etc)."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBkPSJNMjgsMTJIMTRINGMtMi4yLDAtNCwxLjgtNCw0czEuOCw0LDQsNGgxMGgxNGMyLjIsMCw0LTEuOCw0LTRTMzAuMiwxMiwyOCwxMnogTTQsMThjLTEuMSwwLTItMC45LTItMnMwLjktMiwyLTJoMTANCgljMS4xLDAsMiwwLjksMiwycy0wLjksMi0yLDJINHoiLz4NCjwvc3ZnPg0K",isRenderedIn3D:!1,assetStorePackTag:"resource bars",requiredExtensions:[{extensionName:"PanelSpriteContinuousBar",extensionVersion:"1.0.0"}]},{name:"TiledUnitsBar::TiledUnitsBar",fullName:n._({id:"Resource bar (separated units)"}),description:n._({id:"A bar that represents a resource in the game (health, mana, ammo, etc)."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWRvdHMtaG9yaXpvbnRhbCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xNiwxMkEyLDIgMCAwLDEgMTgsMTBBMiwyIDAgMCwxIDIwLDEyQTIsMiAwIDAsMSAxOCwxNEEyLDIgMCAwLDEgMTYsMTJNMTAsMTJBMiwyIDAgMCwxIDEyLDEwQTIsMiAwIDAsMSAxNCwxMkEyLDIgMCAwLDEgMTIsMTRBMiwyIDAgMCwxIDEwLDEyTTQsMTJBMiwyIDAgMCwxIDYsMTBBMiwyIDAgMCwxIDgsMTJBMiwyIDAgMCwxIDYsMTRBMiwyIDAgMCwxIDQsMTJaIiAvPjwvc3ZnPg==",isRenderedIn3D:!1,assetStorePackTag:"resource bars",requiredExtensions:[{extensionName:"TiledUnitsBar",extensionVersion:"1.0.0"}]},{name:"TextInput::TextInputObject"},{name:"Video::VideoObject"}]),(0,E.Z)(t,(0,N.X)("Visual effect",n),[{name:"Lighting::LightObject"},{name:"ParticleSystem::ParticleEmitter",assetStorePackTag:"particles emitter",requiredExtensions:[]},{name:"ParticleEmitter3D::ParticleEmitter3D",fullName:n._({id:"3D particle emitter"}),description:n._({id:"Displays a large number of particles to create visual effects."}),iconFilename:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLWZpcmUiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTcuNjYgMTEuMkMxNy40MyAxMC45IDE3LjE1IDEwLjY0IDE2Ljg5IDEwLjM4QzE2LjIyIDkuNzggMTUuNDYgOS4zNSAxNC44MiA4LjcyQzEzLjMzIDcuMjYgMTMgNC44NSAxMy45NSAzQzEzIDMuMjMgMTIuMTcgMy43NSAxMS40NiA0LjMyQzguODcgNi40IDcuODUgMTAuMDcgOS4wNyAxMy4yMkM5LjExIDEzLjMyIDkuMTUgMTMuNDIgOS4xNSAxMy41NUM5LjE1IDEzLjc3IDkgMTMuOTcgOC44IDE0LjA1QzguNTcgMTQuMTUgOC4zMyAxNC4wOSA4LjE0IDEzLjkzQzguMDggMTMuODggOC4wNCAxMy44MyA4IDEzLjc2QzYuODcgMTIuMzMgNi42OSAxMC4yOCA3LjQ1IDguNjRDNS43OCAxMCA0Ljg3IDEyLjMgNSAxNC40N0M1LjA2IDE0Ljk3IDUuMTIgMTUuNDcgNS4yOSAxNS45N0M1LjQzIDE2LjU3IDUuNyAxNy4xNyA2IDE3LjdDNy4wOCAxOS40MyA4Ljk1IDIwLjY3IDEwLjk2IDIwLjkyQzEzLjEgMjEuMTkgMTUuMzkgMjAuOCAxNy4wMyAxOS4zMkMxOC44NiAxNy42NiAxOS41IDE1IDE4LjU2IDEyLjcyTDE4LjQzIDEyLjQ2QzE4LjIyIDEyIDE3LjY2IDExLjIgMTcuNjYgMTEuMk0xNC41IDE3LjVDMTQuMjIgMTcuNzQgMTMuNzYgMTggMTMuNCAxOC4xQzEyLjI4IDE4LjUgMTEuMTYgMTcuOTQgMTAuNSAxNy4yOEMxMS42OSAxNyAxMi40IDE2LjEyIDEyLjYxIDE1LjIzQzEyLjc4IDE0LjQzIDEyLjQ2IDEzLjc3IDEyLjMzIDEzQzEyLjIxIDEyLjI2IDEyLjIzIDExLjYzIDEyLjUgMTAuOTRDMTIuNjkgMTEuMzIgMTIuODkgMTEuNyAxMy4xMyAxMkMxMy45IDEzIDE1LjExIDEzLjQ0IDE1LjM3IDE0LjhDMTUuNDEgMTQuOTQgMTUuNDMgMTUuMDggMTUuNDMgMTUuMjNDMTUuNDYgMTYuMDUgMTUuMSAxNi45NSAxNC41IDE3LjVIMTQuNVoiIC8+PC9zdmc+",isRenderedIn3D:!0,assetStorePackTag:"3d particles",requiredExtensions:[{extensionName:"ParticleEmitter3D",extensionVersion:"1.0.0"}]}]),(0,E.Z)(t,(0,N.X)("Advanced",n),[{name:"TileMap::TileMap"},{name:"TileMap::CollisionMask"},{name:"PrimitiveDrawing::Drawer"}]),t);if(o.forEach((function(e){var t=(0,N.X)(e.categoryFullName,n);s[t]=s[t]||[];var i=s[t].findIndex((function(t){return t.name===e.name}));-1!==i?s[t][i]=(0,r.Z)((0,r.Z)((0,r.Z)({},s[t][i]),e),{},{requiredExtensions:[]}):s[t].push(e)})),a)for(var l in s){var c,u=s[l],d=(0,I.Z)(u);try{for(d.s();!(c=d.n()).done;){var p=c.value;if(i.hasEventsBasedObject(p.name)){var f=i.getEventsBasedObject(p.name);p.isDependentWithParent=H.EventsBasedObjectDependencyFinder.isDependentFromEventsBasedObject(i,f,a)}}}catch(h){d.e(h)}finally{d.f()}}return s};function Y(e){var t=e.project,n=e.eventsBasedObject,r=e.onObjectTypeSelected,i=e.i18n,a=l.useMemo((function(){return G({project:t,eventsBasedObject:n,i18n:i})}),[t,n,i]),o=(0,D.Z)("intro-object-types").DismissableTutorialMessage;return(0,V.jsxs)(F.Z,{children:[o&&(0,V.jsx)(R.x1,{children:(0,V.jsx)(R.sg,{expand:!0,children:o})}),(0,V.jsx)(A.aV,{children:Object.keys(a).map((function(e){var t=a[e].filter((function(e){return!n||n.isRenderedIn3D()===e.isRenderedIn3D}));return 0===t.length?null:(0,V.jsxs)(l.Fragment,{children:[(0,V.jsx)(L.Z,{children:e}),t.map((function(e){return(0,V.jsx)(z,{enumeratedObjectMetadata:e,id:"object-category-".concat(e.name).replace(/:/g,"-"),onClick:function(){(0,h.Tq)(e.name),r(e)}},e.name)}))]},e)}))})]})}var q=n(61651),J=n(934),X=n(1525),K=n(60575),Q=n.n(K),$=n(48210),ee=n.g.gd,te=y.ZP.isDev(),ne=function(){var e=l.useContext(x.KY).environment,t=l.useContext(Z.Z).fetchPrivateAsset;return function(){var n=(0,o.Z)((0,a.Z)().mark((function n(r){var i,s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P().withConcurrency(6).for(r).process(function(){var n=(0,o.Z)((0,a.Z)().mark((function n(r){var i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(0,j.kt)(r)){n.next=6;break}return n.next=3,t(r,{environment:e});case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,(0,j.WY)(r,{environment:e});case 8:n.t0=n.sent;case 9:if(i=n.t0){n.next=12;break}throw new Error("Unable to install the asset because it could not be fetched.");case 12:return n.abrupt("return",i);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 2:if(!(i=n.sent).errors.length){n.next=5;break}throw new Error("Error(s) while installing assets. The first error is: "+i.errors[0].message);case 5:return s=i.results,n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},re=function(e){var t=e.project,n=e.targetObjectFolderOrObjectWithContext,r=e.resourceManagementProps,i=e.onWillInstallExtension,s=e.onExtensionInstalled,c=l.useContext(X.xP).getCurrentPage().openedAssetPack,u=l.useContext(Z.Z).installPrivateAsset,d=(0,k.Z)().showAlert,p=ne(),f=function(e){var t=(0,k.Z)().showAlert;return function(){var n=(0,o.Z)((0,a.Z)().mark((function n(r){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(0,j.kt)(r)){n.next=9;break}return n.next=4,e();case 4:if(n.sent){n.next=9;break}return n.next=8,t({title:{id:"Save your project"},message:{id:"You need to save this project as a cloud project to install this asset. Please save your project and try again."}});case 8:return n.abrupt("return",!0);case 9:return n.abrupt("return",!1);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(r.canInstallPrivateAsset),g=l.useContext($.H).translatedExtensionShortHeadersByName,m=(0,C.WF)();return function(){var e=(0,o.Z)((0,a.Z)().mark((function e(o){var l,x,v,C,y,Z,k,w,T,S,P;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=o.assetShortHeader,x=o.objectsContainer,v=o.requestedObjectName,C=o.setIsAssetBeingInstalled,t){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,C(!1),e.next=7,f(l);case 7:if(!e.sent){e.next=9;break}return e.abrupt("return",null);case 9:return C(!0),e.next=12,p([l]);case 12:return y=e.sent,Z=y[0],e.next=16,(0,b.Sg)({assets:y,project:t,extensionShortHeadersByName:g});case 16:return k=e.sent,C(!1),e.next=20,m({project:t,requiredExtensionInstallation:k,importedSerializedExtensions:[],onWillInstallExtension:i,onExtensionInstalled:s,updateMode:"all",reason:"asset"});case 20:if(w=e.sent,C(!0),w){e.next=24;break}return e.abrupt("return",null);case 24:if(T=Q()(Z.objectAssets.map((function(e){return e.object.type}))).some((function(e){return!ee.UsedObjectTypeFinder.scanProject(t,e)})),!(S=(0,j.kt)(l))){e.next=32;break}return e.next=29,u({asset:Z,project:t,objectsContainer:x,requestedObjectName:v,targetObjectFolderOrObject:n&&!n.global?n.objectFolderOrObject:null});case 29:e.t0=e.sent,e.next=35;break;case 32:return e.next=34,(0,b.Lu)({asset:Z,project:t,objectsContainer:x,requestedObjectName:v,targetObjectFolderOrObject:n&&!n.global?n.objectFolderOrObject:null});case 34:e.t0=e.sent;case 35:if(P=e.t0){e.next=38;break}throw new Error("Unable to install private Asset.");case 38:return(0,h.Kr)({id:l.id,name:l.name,assetPackName:c?c.name:null,assetPackTag:c?c.tag:null,assetPackId:c&&c.id?c.id:null,assetPackKind:S?"private":"public"}),(0,b.Im)(t,P.createdObjects),e.next=42,r.onFetchNewlyAddedResources();case 42:return r.onNewResourcesAdded(),e.abrupt("return",{createdObjects:P.createdObjects,isTheFirstOfItsTypeInProject:T});case 46:return e.prev=46,e.t1=e.catch(3),console.error("Error while installing the asset:",e.t1),d({title:{id:"Could not install the asset"},message:{id:'There was an error while installing the asset "{0}". Verify your internet connection or try again later.',values:{0:l.name}}}),e.abrupt("return",null);case 51:case"end":return e.stop()}}),e,null,[[3,46]])})));return function(t){return e.apply(this,arguments)}}()};function ie(e){var t=e.project,n=(e.layout,e.eventsBasedObject),r=e.objectsContainer,h=e.resourceManagementProps,b=e.onClose,j=e.onCreateNewObject,y=e.onObjectsAddedFromAssets,Z=e.targetObjectFolderOrObjectWithContext,S=e.onWillInstallExtension,P=e.onExtensionInstalled,I=(0,w.UQ)().isMobile,E=l.useContext(g.ZP),M=E.setNewObjectDialogDefaultTab,L=E.getNewObjectDialogDefaultTab,A=l.useState(L()),O=(0,i.Z)(A,2),R=O[0],F=O[1];l.useEffect((function(){return M(R)}),[M,R]);var D=l.useContext(x.KY),N=D.assetShortHeadersSearchResults,_=D.environment,B=D.setEnvironment,H=l.useContext(X.xP).getCurrentPage(),z=H.openedAssetPack,G=H.openedAssetShortHeader,q=H.selectedFolders,K=l.useState(!1),Q=(0,i.Z)(K,2),ee=Q[0],ne=Q[1],ie=(0,T.f)(t,r),ae=l.useState(!1),oe=(0,i.Z)(ae,2),se=oe[0],le=oe[1],ce=l.useState(null),ue=(0,i.Z)(ce,2),de=ue[0],pe=ue[1],fe=G&&ie.has(G.id),he=(0,k.Z)().showAlert,ge=re({project:t,resourceManagementProps:h,targetObjectFolderOrObjectWithContext:Z,onWillInstallExtension:S,onExtensionInstalled:P}),me=l.useContext($.H).translatedExtensionShortHeadersByName,xe=(0,C.WF)(),ve=l.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return le(!0),e.next=5,ge({assetShortHeader:t,objectsContainer:r,setIsAssetBeingInstalled:le});case 5:return n=e.sent,le(!1),n&&y(n),e.abrupt("return",!!n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ge,y,r]),be=l.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.requiredExtensions){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,le(!0),e.next=7,(0,C.bg)({requiredExtensions:r,project:t,extensionShortHeadersByName:me});case 7:return i=e.sent,e.next=10,xe({project:t,requiredExtensionInstallation:i,importedSerializedExtensions:[],onWillInstallExtension:S,onExtensionInstalled:P,updateMode:"safeOnly",reason:"asset"});case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:j(n.name),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.error("Error while creating the object:",e.t0),he({title:{id:"Could not create the object"},message:{id:'There was an error while creating the object "{0}". Verify your internet connection or try again later.',values:{0:n.fullName}}});case 20:return e.prev=20,le(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[3,16,20,23]])})));return function(t){return e.apply(this,arguments)}}(),[t,me,xe,S,P,j,he]),Ce=l.useMemo((function(){return N?(0,U.f)(N,q):[]}),[N,q]),je="asset-store"===R?z?(0,V.jsx)(m.Z,{primary:!0,label:1===Ce.length?(0,V.jsx)(s.Trans,{id:"Add this asset to my scene"}):(0,V.jsx)(s.Trans,{id:"Add these assets to my scene"}),onClick:function(){return ne(!0)},disabled:!Ce||0===Ce.length},"add-all-assets"):G?(0,V.jsx)(m.Z,{primary:!fe,label:se?(0,V.jsx)(s.Trans,{id:"Adding..."}):fe?(0,V.jsx)(s.Trans,{id:"Add again"}):(0,V.jsx)(s.Trans,{id:"Add to the scene"}),onClick:(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ve(G);case 1:case"end":return e.stop()}}),e)}))),disabled:se,id:"add-asset-button"},"add-asset"):te?(0,V.jsx)(m.Z,{label:"staging"===_?(0,V.jsx)(s.Trans,{id:"Show live assets"}):(0,V.jsx)(s.Trans,{id:"Show staging assets"}),onClick:function(){B("staging"===_?"live":"staging")}},"show-dev-assets"):null:de&&"new-object"===R?(0,V.jsx)(m.Z,{label:se?(0,V.jsx)(s.Trans,{id:"Adding..."}):(0,V.jsx)(s.Trans,{id:"Skip and create from scratch"}),primary:!0,onClick:function(){return de&&be(de)},id:"skip-and-create-button",disabled:se},"skip-and-create"):null,ye=l.useRef(null),Ze=l.useCallback((function(){ye.current&&ye.current.onClose(),b()}),[b]),ke=l.useCallback((function(e){e.assetStorePackTag?pe(e):e.requiredExtensions?be(e):j(e.name)}),[j,be]);return(0,V.jsx)(s.I18n,{children:function(e){var i=e.i18n;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(c.ZP,{title:(0,V.jsx)(s.Trans,{id:"New object"}),secondaryActions:[(0,V.jsx)(d.Z,{helpPagePath:"/objects"},"help")],actions:[(0,V.jsx)(u.Z,{label:(0,V.jsx)(s.Trans,{id:"Close"}),primary:!1,onClick:Ze,id:"close-button"},"close"),je],onRequestClose:Ze,onApply:z?function(){return ne(!0)}:G?(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(G);case 2:case"end":return e.stop()}}),e)}))):void 0,open:!0,flexBody:!0,fullHeight:!0,id:"new-object-dialog",fixedContent:(0,V.jsx)(p.m,{value:R,onChange:F,options:[{label:(0,V.jsx)(s.Trans,{id:"Asset Store"}),value:"asset-store",id:"asset-store-tab"},{label:(0,V.jsx)(s.Trans,{id:"New object from scratch"}),value:"new-object",id:"new-object-from-scratch-tab"}],variant:I?"scrollable":void 0}),children:["asset-store"===R&&(0,V.jsx)(f.M,{ref:ye,onlyShowAssets:!0}),"new-object"===R&&(de&&de.assetStorePackTag?(0,V.jsx)(W,{packTag:de.assetStorePackTag,onAssetSelect:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t);case 2:e.sent&&Ze();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isAssetBeingInstalled:se,onBack:function(){return pe(null)}}):(0,V.jsx)(Y,{project:t,eventsBasedObject:n,onObjectTypeSelected:ke,i18n:i}))]}),se&&(0,V.jsx)(J.Z,{showImmediately:!0}),ee&&Ce&&z&&(0,V.jsx)(v.Z,{assetPack:z,assetShortHeaders:Ce,addedAssetIds:ie,onClose:function(){return ne(!1)},onAssetsAdded:function(e){ne(!1),y(e)},project:t,objectsContainer:r,resourceManagementProps:h,targetObjectFolderOrObjectWithContext:Z,onWillInstallExtension:S,onExtensionInstalled:P})]})}})}var ae=function(e){return(0,V.jsx)(q.ZP,{componentTitle:(0,V.jsx)(s.Trans,{id:"New Object dialog"}),scope:"new-object-dialog",onClose:e.onClose,children:(0,V.jsx)(ie,(0,r.Z)({},e))})}},23883:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(1773)),a=n(10888),o=n(86567),s=n(29277),l=n(29343);t.Z=function(e){return(0,l.jsx)(i.ZP,{open:!0,maxWidth:"xs",title:(0,l.jsx)(r.Trans,{id:"Store password"}),onApply:e.onApply,onRequestClose:e.onClose,actions:[(0,l.jsx)(a.Z,{label:(0,l.jsx)(r.Trans,{id:"Close"}),onClick:e.onClose},"cancel"),(0,l.jsx)(i.vF,{primary:!0,label:(0,l.jsx)(r.Trans,{id:"Continue"}),onClick:e.onApply},"continue")],children:(0,l.jsx)(o.Z,{onSubmit:e.onApply,name:"store-password",children:(0,l.jsx)(s.ZP,{fullWidth:!0,autoFocus:"desktopAndMobileDevices",value:e.passwordValue,floatingLabelText:(0,l.jsx)(r.Trans,{id:"Password"}),type:"password",onChange:function(t,n){e.setPasswordValue(n)}})})})}},76683:function(e,t,n){"use strict";var r=n(1413),i=n(29439),a=n(28381),o=n(24347),s=n(78081),l=n(36465),c=n(29343);t.Z=function(e){var t=e.url,n=e.style,u=e.alt,d=e.onError,p=e.onLoad,f=e.hideLoader,h=a.useState(null),g=(0,i.Z)(h,2),m=g[0],x=g[1],v=a.useState(!1),b=(0,i.Z)(v,2),C=b[0],j=b[1],y=a.useContext(o.Z),Z=y.authorizationToken,k=y.updateAuthorizationToken,w=a.useRef(0);a.useEffect((function(){C||(Z?x((0,l.mR)(t,Z)):k())}),[Z,k,t,C]);return a.useEffect((function(){t&&j(!1)}),[t]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("img",{alt:u,src:m,style:(0,r.Z)((0,r.Z)({},n),{},{display:f||C?"block":"none"}),onError:function(){console.warn("Error while fetching authorized image"),w.current>=3?d&&d():(j(!1),console.info("Error while fetching image, fetching a new token..."),k(),w.current+=1)},onLoad:function(e){j(!0),p&&p(e)}}),!f&&!C&&(0,c.jsx)(s.Z,{})]})}},3679:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(29439),o=n(36600),s=n(28381),l=n(24347),c=n(60022),u=n(43717),d=n(2066),p=n(40243),f=n(6996),h=n(29343);t.Z=function(e){var t=e.assetPack,n=(0,f.UQ)().isMobile,g=s.useContext(l.Z).getPrivateAssetPackAudioArchiveUrl,m=s.useState(!1),x=(0,a.Z)(m,2),v=x[0],b=x[1];return(0,h.jsx)(p.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,h.jsx)(c.Z,{primary:!0,label:v?(0,h.jsx)(o.Trans,{id:"Loading..."}):n?(0,h.jsx)(o.Trans,{id:"Pack sounds"}):(0,h.jsx)(o.Trans,{id:"Download pack sounds"}),icon:(0,h.jsx)(u.Z,{}),disabled:v,onClick:(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,g(t.id);case 3:if(n=e.sent,b(!1),n){e.next=8;break}return console.error("Could not generate url for premium asset pack with name ".concat(t.name)),e.abrupt("return");case 8:d.ZP.openExternalURL(n);case 9:case"end":return e.stop()}}),e)})))})})}},24347:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(28381),o={authorizationToken:null,updateAuthorizationToken:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchPrivateAsset:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),installPrivateAsset:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPrivateAssetPackAudioArchiveUrl:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},s=a.createContext(o);t.Z=s},46308:function(e,t,n){"use strict";n.d(t,{Z:function(){return ne}});var r=n(1413),i=n(74165),a=n(15861),o=n(93433),s=n(29439),l=n(28381),c=n(36600),u=n(36465),d=n(84140),p=n(86278),f=n(38092),h=n(78081),g=n(61325),m=n(40243),x=n(41418),v=n(96591),b=n(22726),C=n(6996),j=n(75333),y=n(32832),Z=n(2066),k=n(2632),w=n(51137),T=n(71106),S=n(91),P=n(46538),I=n(35038),E=n(2866),M=n(41908),L=n(9734),A=n(14932),O=n(40480),R=n(62903),F=n(24910),D=n(60022),N=n(14331),_=n(1773),B=n(54458),U=n(21676),V=n(66789),H=n(1589),z=n(30268),W=n(10888),G=n(65056),Y=n(23883),q=n(29343),J=function(e){var t=e.privateGameTemplateListingData,n=e.usageType,o=e.onClose,d=e.simulateAppStoreProduct,f=l.useContext(T.ZP),h=f.profile,x=f.onOpenLoginDialog,v=f.onOpenCreateAccountDialog,b=f.receivedGameTemplates,C=f.onPurchaseSuccessful,j=f.onRefreshGameTemplatePurchases,y=f.gameTemplatePurchases,k=l.useState(!1),P=(0,s.Z)(k,2),I=P[0],E=P[1],M=l.useState(!b),L=(0,s.Z)(M,2),A=L[0],O=L[1],R=l.useState(!1),F=(0,s.Z)(R,2),D=F[0],N=F[1],J=l.useState(!1),X=(0,s.Z)(J,2),K=X[0],Q=X[1],$=l.useState(""),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],re=(0,G.Z)().showAlert,ie=(0,w.PN)()||d,ae=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var a,o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:if(Q(!1),!ie){e.next=12;break}return e.prev=4,E(!0),e.next=8,(0,w.ZA)(t.appStoreProductId);case 8:return e.prev=8,E(!1),e.finish(8);case 11:return e.abrupt("return");case 12:if(a=t.prices.find((function(e){return e.usageType===n}))){e.next=18;break}return console.error("Unable to find the price for the usage type",n),e.next=17,re({title:{id:"An error happened"},message:{id:"Unable to find the price for this game template. Please try again later."}});case 17:return e.abrupt("return");case 18:e.prev=18,E(!0),o=(0,u.RB)((0,r.Z)({productId:t.id,priceName:a.name,userId:h.id,userEmail:h.email},te?{password:te}:void 0)),Z.ZP.openExternalURL(o),e.next=36;break;case 24:if(e.prev=24,e.t0=e.catch(18),!(s=(0,S.T)(e.t0))||403!==s.status||"auth/wrong-password"!==s.code){e.next=32;break}return e.next=30,re({title:{id:"Operation not allowed"},message:{id:"The password you entered is incorrect. Please try again."}});case 30:e.next=35;break;case 32:return console.error("Unable to get the checkout URL",e.t0),e.next=35,re({title:{id:"An error happened"},message:{id:"Unable to get the checkout URL. Please try again later."}});case 35:E(!1);case 36:return e.prev=36,ne(""),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[4,,8,11],[18,24,36,39]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){Z.ZP.isDev()?Q(!0):ae()};l.useEffect((function(){oe()}),[]),l.useEffect((function(){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(I&&y&&y.find((function(e){return e.productId===t.id})))){e.next=3;break}return e.next=3,C();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[I,y,t,C,j]),(0,U.Y)((function(){j()}),I?3900:null),l.useEffect((function(){var e;return(0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b&&(e=setTimeout((function(){return O(!1)}),3e3));case 1:case"end":return t.stop()}}),t)})))(),function(){clearTimeout(e)}}),[b]),l.useEffect((function(){b&&(b.find((function(e){return e.id===t.id}))&&(I?(E(!1),N(!0)):D||o()))}),[b,t,I,o,A,D]);var se=h?D?{subtitle:(0,q.jsx)(c.Trans,{id:"Your purchase has been processed!"}),content:(0,q.jsx)(m.x1,{justifyContent:"center",alignItems:"center",children:(0,q.jsx)(p.Z,{children:(0,q.jsx)(c.Trans,{id:"You can now go back to the store to use your new game template."})})})}:I?{subtitle:ie?(0,q.jsx)(c.Trans,{id:"Complete your purchase with the app store."}):(0,q.jsx)(c.Trans,{id:"Complete your payment on the web browser"}),content:ie?(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(g.ak,{justifyContent:"center",alignItems:"center",children:[(0,q.jsx)(V.Z,{size:40}),(0,q.jsx)(p.Z,{children:(0,q.jsx)(c.Trans,{id:"The purchase will be linked to your account once done."})})]})}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(m.x1,{justifyContent:"center",alignItems:"center",children:[(0,q.jsx)(V.Z,{size:20}),(0,q.jsx)(m.LZ,{}),(0,q.jsx)(p.Z,{children:(0,q.jsx)(c.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,q.jsx)(m.LZ,{}),(0,q.jsx)(m.x1,{justifyContent:"center",children:(0,q.jsx)(H.Z,{children:(0,q.jsx)(c.Trans,{id:"Once you're done, come back to GDevelop and the game template will be added to your account automatically."})})})]})}:A?{subtitle:(0,q.jsx)(c.Trans,{id:"Loading your profile..."}),content:(0,q.jsx)(m.x1,{justifyContent:"center",alignItems:"center",children:(0,q.jsx)(V.Z,{size:20})})}:{subtitle:(0,q.jsx)(c.Trans,{id:"The game template {0} will be linked to your account {1}.",values:{0:t.name,1:h.email}}),content:ie?null:(0,q.jsx)(m.x1,{justifyContent:"center",alignItems:"center",children:(0,q.jsx)(p.Z,{children:(0,q.jsx)(c.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,q.jsx)(c.Trans,{id:"Log-in to purchase this item"}),content:(0,q.jsx)(B.Z,{onOpenLoginDialog:x,onOpenCreateAccountDialog:v,message:(0,q.jsx)(c.Trans,{id:"Game templates will be linked to your user account and available for all your projects. Log-in or sign-up to purchase this game template. (or restore your existing purchase)."}),justifyContent:"center"})},le=h&&!I&&!D&&!A,ce=[(0,q.jsx)(W.Z,{label:D?(0,q.jsx)(c.Trans,{id:"Close"}):(0,q.jsx)(c.Trans,{id:"Cancel"}),onClick:o},"cancel"),le?(0,q.jsx)(_.vF,{primary:!0,label:(0,q.jsx)(c.Trans,{id:"Continue"}),onClick:oe},"continue"):null];return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(_.ZP,{title:(0,q.jsx)(c.Trans,{id:"{0}",values:{0:t.name}}),maxWidth:"sm",open:!0,onRequestClose:o,actions:ce,onApply:D?o:oe,cannotBeDismissed:!0,flexColumnBody:!0,fullscreen:"never-even-on-mobile",children:[(0,q.jsxs)(g.pJ,{justifyContent:"center",alignItems:"center",children:[D&&(0,q.jsx)(z.Z,{}),(0,q.jsx)(p.Z,{size:"sub-title",children:se.subtitle})]}),se.content]}),K&&(0,q.jsx)(Y.Z,{onApply:ae,onClose:function(){return Q(!1)},passwordValue:te,setPasswordValue:ne})]})},X=n(73412),K=n(67980),Q=n(49807),$=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},ee=$("xlarge",!0),te={disabledText:{opacity:.6},scrollview:{overflowX:"hidden"},grid:{maxWidth:(K.LF+10)*ee,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")},leftColumnContainer:{flex:3,minWidth:0},rightColumnContainer:{flex:2},leftColumnContainerMobile:{flex:1,minWidth:0},rightColumnContainerMobile:{flex:1},avatar:{width:20,height:20},ownedTag:{padding:"4px 8px",borderRadius:4,color:"black"},playIcon:{width:20,height:20}},ne=function(e){var t=e.privateGameTemplateListingData,n=e.privateGameTemplateListingDatasFromSameCreator,_=e.onGameTemplateOpen,B=e.onAssetPackOpen,U=e.onBundleOpen,V=e.onCreateWithGameTemplate,H=e.simulateAppStoreProduct,z=t.id,W=t.name,G=t.sellerId,K=l.useContext(E.mJ).privateGameTemplateListingDatas,ee=l.useContext(Q.bQ).bundleListingDatas,ne=l.useContext(T.ZP),re=ne.receivedGameTemplates,ie=ne.receivedBundles,ae=ne.profile,oe=ne.limits,se=ne.gameTemplatePurchases,le=ne.bundlePurchases,ce=ne.getAuthorizationHeader,ue=ne.onOpenLoginDialog,de=l.useContext(R.q$),pe=de.openCreditsPackageDialog,fe=de.openCreditsUsageDialog,he=l.useState(null),ge=(0,s.Z)(he,2),me=ge[0],xe=ge[1],ve=l.useState(t.prices.length?t.prices[0].usageType:""),be=(0,s.Z)(ve,2),Ce=be[0],je=be[1],ye=l.useState(null),Ze=(0,s.Z)(ye,2),ke=Ze[0],we=Ze[1],Te=l.useState(!1),Se=(0,s.Z)(Te,2),Pe=Se[0],Ie=Se[1],Ee=l.useContext(X.Z).openUserPublicProfile,Me=l.useState(null),Le=(0,s.Z)(Me,2),Ae=Le[0],Oe=Le[1],Re=l.useState(!1),Fe=(0,s.Z)(Re,2),De=Fe[0],Ne=Fe[1],_e=l.useState(""),Be=(0,s.Z)(_e,2),Ue=Be[0],Ve=Be[1],He=l.useState(null),ze=(0,s.Z)(He,2),We=ze[0],Ge=ze[1],Ye=(0,C.UQ)(),qe=Ye.windowSize,Je=Ye.isLandscape,Xe=Ye.isMediumScreen,Ke=Ye.isMobile,Qe=l.useContext(F.Z),$e=(0,w.PN)()||H,et=l.useMemo((function(){return(0,M.aS)({productId:t.id,receivedProducts:[].concat((0,o.Z)(re||[]),(0,o.Z)(ie||[])),productPurchases:[].concat((0,o.Z)(se||[]),(0,o.Z)(le||[])),allProductListingDatas:[].concat((0,o.Z)(K||[]),(0,o.Z)(ee||[]))})}),[se,le,t,K,ee,re,ie]),tt=!!et,nt=l.useMemo((function(){return(0,M.dv)({product:me,productListingDatas:(0,o.Z)(K||[]),productListingData:t,receivedProducts:(0,o.Z)(re||[]),onPrivateAssetPackOpen:B?function(e){return B(e,{forceProductPage:!0})}:void 0,onPrivateGameTemplateOpen:_,onBundleOpen:U})}),[me,K,re,B,_,U,t]),rt=l.useMemo((function(){return(0,M._N)({product:me,productListingData:t,productListingDatas:[].concat((0,o.Z)(K||[]),(0,o.Z)(ee||[])),receivedProducts:[].concat((0,o.Z)(re||[]),(0,o.Z)(ie||[])),onPrivateAssetPackOpen:B?function(e){return B(e,{forceProductPage:!0})}:void 0,onPrivateGameTemplateOpen:_,onBundleOpen:U})}),[me,t,K,ee,re,ie,B,_,U]),it=l.useMemo((function(){return(0,M.W7)({otherProductListingDatasFromSameCreator:n,currentProductListingData:t,receivedProducts:re,onProductOpen:_})}),[n,t,re,_]);l.useEffect((function(){(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie(!0),e.prev=1,e.next=4,Promise.all([(0,d.kI)(z),(0,x.D1)(G)]);case 4:t=e.sent,n=(0,s.Z)(t,2),r=n[0],a=n[1],xe(r),Oe(a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),(o=(0,S.T)(e.t0))&&404===o.status?Ge((0,q.jsx)(c.Trans,{id:"Game template not found - An error occurred, please try again later."})):Ge((0,q.jsx)(c.Trans,{id:"An error occurred, please try again later."}));case 16:return e.prev=16,Ie(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))()}),[z,G]);var at=l.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(me){e.next=2;break}return e.abrupt("return");case 2:if(!tt||!V){e.next=5;break}return V(t),e.abrupt("return");case 5:try{n=t.prices.find((function(e){return e.usageType===Ce})),(0,j.ux)({gameTemplateId:me.id,gameTemplateName:me.name,gameTemplateTag:me.tag,usageType:Ce,priceValue:n&&n.value,priceCurrency:n&&n.currency}),we(t)}catch(r){console.warn("Unable to send event",r)}case 6:case"end":return e.stop()}}),e)}))),[me,t,tt,V,Ce]),ot=l.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&me){e.next=2;break}return e.abrupt("return");case 2:if(Ne(!1),ae&&oe){e.next=6;break}return ue(),e.abrupt("return");case 6:if(!tt||!V){e.next=9;break}return V(t),e.abrupt("return");case 9:if(n=oe.credits.userBalance.amount,r=t.creditPrices.find((function(e){return e.usageType===Ce}))){e.next=14;break}return console.error("Unable to find the price for the selected usage type",Ce),e.abrupt("return");case 14:if(a=r.amount,(0,j.ux)({gameTemplateId:me.id,gameTemplateName:me.name,gameTemplateTag:me.tag,usageType:Ce,priceValue:a,priceCurrency:"CREDITS"}),!(n<a)){e.next=19;break}return pe({missingCredits:a-n}),e.abrupt("return");case 19:fe({title:(0,q.jsx)(c.Trans,{id:"Purchase {0}",values:{0:me.name}}),message:(0,q.jsx)(c.Trans,{id:"You are about to use {gameTemplateCreditsAmount} credits to purchase the game template {0}. Continue?",values:{0:me.name,gameTemplateCreditsAmount:a}}),onConfirm:function(){return(0,u.LN)(ce,{productId:t.id,usageType:Ce,userId:ae.id,password:Ue})},successMessage:(0,q.jsx)(c.Trans,{id:"\ud83c\udf89 You can now use your template!"})});case 20:case"end":return e.stop()}}),e)}))),[ae,oe,t,me,V,tt,pe,Ce,fe,ce,ue,Ue]),st=function(){Z.ZP.isDev()?Ne(!0):ot()},lt=l.useMemo((function(){return(0,M.$z)({product:me,productListingData:t,shouldSimulateAppStoreProduct:H})}),[me,t,H]);return(0,q.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,q.jsxs)(q.Fragment,{children:[We?(0,q.jsx)(m.x1,{alignItems:"center",justifyContent:"center",expand:!0,children:(0,q.jsx)(f.Z,{kind:"error",children:We})}):Pe?(0,q.jsx)(m.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,q.jsx)(h.Z,{})}):me&&Ae?(0,q.jsx)(m.sg,{noOverflowParent:!0,expand:!0,noMargin:!0,children:(0,q.jsxs)(k.Z,{autoHideScrollbar:!0,style:te.scrollview,children:[(0,q.jsxs)(g.ep,{noColumnMargin:!0,noMargin:!0,forceMobileLayout:Xe,noResponsiveLandscape:!0,useLargeSpacer:!0,children:[(0,q.jsx)("div",{style:Ke?te.leftColumnContainerMobile:te.leftColumnContainer,children:(0,q.jsx)(b.Z,{mediaItems:lt,altTextTemplate:"Game template ".concat(W," preview image {mediaIndex}"),horizontalOuterMarginToEatOnMobile:8})}),(0,q.jsx)("div",{style:Ke?te.rightColumnContainerMobile:te.rightColumnContainer,children:(0,q.jsxs)(g.ak,{noMargin:!0,children:[(0,q.jsxs)(g.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,q.jsx)(p.Z,{noMargin:!0,size:"title",children:me.name}),tt&&(0,q.jsx)("div",{style:(0,r.Z)((0,r.Z)({},te.ownedTag),{},{backgroundColor:Qe.statusIndicator.success}),children:(0,q.jsx)(p.Z,{color:"inherit",noMargin:!0,children:(0,q.jsx)(c.Trans,{id:"OWNED"})})})]}),(0,q.jsxs)(g.pJ,{noMargin:!0,alignItems:"center",children:[(0,q.jsx)(P.Z,{src:Ae.iconUrl,style:te.avatar}),(0,q.jsx)(p.Z,{displayInlineAsSpan:!0,size:"sub-title",children:(0,q.jsx)(v.Z,{onClick:function(){return Ee({userId:Ae.id,callbacks:{onAssetPackOpen:B,onGameTemplateOpen:_}})},href:"#",children:Ae.username||""})})]}),(0,q.jsxs)(g.pJ,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,q.jsxs)(m.x1,{noMargin:!0,children:[(0,q.jsx)(p.Z,{size:"sub-title",children:(0,q.jsx)(c.Trans,{id:"Licensing"})}),(0,q.jsx)(A.Z,{size:"small",helpPagePath:"https://gdevelop.io/page/asset-store-license-agreement"})]}),!tt&&!t.includedListableProductIds&&(0,q.jsx)(m.sg,{noMargin:!0,children:(0,q.jsx)(D.Z,{primary:!0,label:(0,q.jsx)(c.Trans,{id:"Try it online"}),onClick:function(){return Z.ZP.openExternalURL(me.gamePreviewLink)},icon:(0,q.jsx)(N.Z,{style:te.playIcon})})})]}),(0,q.jsx)(L.Z,{value:Ce,onChange:je,product:t,ownedLicense:et}),(0,q.jsx)(m.LZ,{}),tt?V?(0,q.jsx)(M.ai,{productListingData:t,onClick:function(){return V(t)},label:(0,q.jsx)(c.Trans,{id:"Open template"})}):null:(0,q.jsxs)(g.ak,{noMargin:!0,children:[!We&&(0,q.jsx)(M.dP,{i18n:n,productListingData:t,selectedUsageType:Ce,onUsageTypeChange:je,simulateAppStoreProduct:H,isAlreadyReceived:tt,onClickBuy:at,onClickBuyWithCredits:st}),!$e&&(0,q.jsx)(O.Z,{})]})]})})]}),(0,q.jsx)(m.sg,{noMargin:!0,children:(0,q.jsx)(p.Z,{size:"body2",displayInlineAsSpan:!0,children:(0,q.jsx)(y.r,{source:me.longDescription,allowParagraphs:!0})})}),rt&&rt.length?(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(g.ak,{noMargin:!0,children:[(0,q.jsx)(m.hS,{}),rt,(0,q.jsx)(m.hS,{})]})}):null,nt&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(m.x1,{children:(0,q.jsx)(p.Z,{size:"block-title",children:(0,q.jsx)(c.Trans,{id:"Included in this bundle"})})}),(0,q.jsx)(m.x1,{children:(0,q.jsx)(I.Z,{cols:$(qe,Je),cellHeight:"auto",spacing:10,style:te.grid,children:nt})})]}),it&&it.length>0&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(m.x1,{children:(0,q.jsx)(p.Z,{size:"block-title",children:(0,q.jsx)(c.Trans,{id:"From the same author"})})}),(0,q.jsx)(m.x1,{children:(0,q.jsx)(I.Z,{cols:$(qe,Je),cellHeight:"auto",spacing:10,style:te.grid,children:it})})]})]})}):null,De&&(0,q.jsx)(Y.Z,{onApply:ot,onClose:function(){return Ne(!1)},passwordValue:Ue,setPasswordValue:Ve}),!!ke&&(0,q.jsx)(J,{privateGameTemplateListingData:ke,usageType:Ce,onClose:function(){return we(null)}})]})}})}},2866:function(e,t,n){"use strict";n.d(t,{G_:function(){return k},mJ:function(){return Z}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(81442),l=n(82069),c=n(49819),u=n(36465),d=n(27817),p=n(1525),f=n(12123),h=n(65056),g=n(75333),m=n(4900),x=n(71106),v=n(29343),b=new Set,C=[],j=function(e){return e.name+"\n"+e.description+"\n"+e.categories.join("\n")},y={gameTemplateFilters:null,fetchGameTemplates:function(){},privateGameTemplateListingDatas:null,error:null,shop:{privateGameTemplateListingDatasSearchResults:null,filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}},setInitialGameTemplateUserFriendlySlug:function(e){}},exampleStore:{privateGameTemplateListingDatasSearchResults:null,searchText:"",setSearchText:function(){},filtersState:{chosenFilters:new Set,addFilter:function(){},removeFilter:function(){},chosenCategory:null,setChosenCategory:function(){}}}},Z=o.createContext(y),k=function(e){var t=e.children,n=o.useContext(p.xP),y=n.searchText,k=n.setSearchText,w=o.useContext(x.ZP).limits,T=o.useState(null),S=(0,a.Z)(T,2),P=S[0],I=S[1],E=o.useState(null),M=(0,a.Z)(E,2),L=M[0],A=M[1],O=o.useState(null),R=(0,a.Z)(O,2),F=R[0],D=R[1],N=o.useState(null),_=(0,a.Z)(N,2),B=_[0],U=_[1],V=o.useRef(!1),H=o.useRef(!1),z=(0,h.Z)().showAlert,W=o.useState(""),G=(0,a.Z)(W,2),Y=G[0],q=G[1],J=(0,s.m)(),X=!!w&&!!w.capabilities.classrooms&&w.capabilities.classrooms.hidePremiumProducts,K=o.useCallback((function(){H.current||F||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(null),H.current=!0,e.prev=2,e.next=5,(0,u.GN)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," game templates from the store.")),D(t),n=t.reduce((function(e,t){return e.concat(t.categories.map((function(e){return(0,d.capitalize)(e)})))}),[]),i=Array.from(new Set(n)),I({allTags:[],defaultTags:i,tagsTree:[]}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load the game templates from the store:",e.t0),A(e.t0);case 18:H.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[F]);o.useEffect((function(){if(B&&!V.current&&F&&B){V.current=!0;var e=(0,f.af)({privateGameTemplateListingDatas:F,userFriendlySlug:B});if(e){var t=e.prices.find((function(e){return"default"===e.usageType}));return(0,g.rG)({gameTemplateName:e.name,gameTemplateId:e.id,source:"web-link",priceValue:t&&t.value,priceCurrency:t&&t.currency}),n.openPrivateGameTemplateInformationPage({privateGameTemplateListingData:e,storeSearchText:!0,clearSearchText:!1}),V.current=!1,void U(null)}z({title:{id:"Game template not found"},message:{id:"The link to the game template you've followed seems outdated. Why not take a look at the other templates in the store?"}})}}),[F,n,z,B]),o.useEffect((function(){if(!H.current){var e=setTimeout((function(){console.info("Pre-fetching game templates from the store..."),K()}),m.Cr);return function(){return clearTimeout(e)}}}),[K]);var Q=o.useMemo((function(){if(!F)return null;var e={};return X||F.forEach((function(t){var n=t.id;e[n]&&console.warn("Multiple private game templates with the same id: ".concat(n)),e[n]=t})),e}),[F,X]),$=n.getCurrentPage(),ee=(0,l.qg)(Q,{searchText:Y,chosenCategory:J.chosenCategory,chosenFilters:J.chosenFilters,excludedTiers:b,defaultFirstSearchItemIds:C,shuffleResults:!1}),te=(0,c.az)(Q,j,y,$.filtersState.chosenCategory,$.filtersState.chosenFilters),ne=o.useMemo((function(){return{privateGameTemplateListingDatas:X?[]:F,error:L,gameTemplateFilters:P,fetchGameTemplates:K,shop:{privateGameTemplateListingDatasSearchResults:X?[]:te,searchText:y,setSearchText:k,filtersState:$.filtersState,setInitialGameTemplateUserFriendlySlug:U},exampleStore:{privateGameTemplateListingDatasSearchResults:X?[]:ee,searchText:Y,setSearchText:q,filtersState:J}}}),[X,F,L,P,K,ee,te,y,k,Y,$.filtersState,J]);return(0,v.jsx)(Z.Provider,{value:ne,children:t})}},9734:function(e,t,n){"use strict";n.d(t,{i:function(){return Z}});var r=n(28381),i=n(36600),a=n(86278),o=n(65875),s=n(78081),l=n(92078),c=n(75383),u=n(69186),d=n(67674),p=n(3698),f=n(3798),h=n(65111),g=n(61325),m=n(40243),x=n(15859),v=n(82422),b=n(29343),C={buttonBase:{borderRadius:8,padding:8,cursor:"default",overflow:"hidden",boxSizing:"border-box",margin:1},contentWrapper:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},radio:{padding:0},descriptionContainer:{paddingLeft:32}},j=function(e){var t=e.selected,n=e.onClick,r=e.name,i=e.description,o=e.formattedPrice,s=e.isLicenseOwned;return(0,b.jsxs)(g.ak,{noMargin:!0,children:[(0,b.jsxs)(g.pJ,{noMargin:!0,alignItems:"center",children:[(0,b.jsx)(m.sg,{noMargin:!0,children:s?(0,b.jsx)(v.Z,{}):n?(0,b.jsx)(p.Z,{color:"secondary",checked:t,onChange:n,style:C.radio}):null}),(0,b.jsxs)(g.pJ,{justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,b.jsx)(a.Z,{noMargin:!0,size:"sub-title",children:r}),!s&&o]})]}),(0,b.jsx)(m.x1,{expand:!0,noMargin:!0,children:(0,b.jsx)("div",{style:C.descriptionContainer,children:(0,b.jsx)(a.Z,{noMargin:!0,align:"left",children:i})})})]})},y=function(e){var t=e.id,n=e.onClick,r=e.selected,i=e.name,a=e.description,o=e.formattedPrice,s=e.ownedLicense,l=e.disabled,c=function(e){return(0,u.Z)((function(t){return(0,d.Z)({root:{outline:e?"2px solid ".concat(t.palette.secondary.dark):"1px solid ".concat(t.palette.text.disabled),"&:focus":{backgroundColor:t.palette.action.hover},"&:hover":{backgroundColor:t.palette.action.hover},transition:"background-color 100ms ease"}})}))()}(r);if(s&&s!==t)return null;var p=s===t;return(0,b.jsx)(f.Z,{onClick:n,elevation:2,style:C.buttonBase,classes:c,tabIndex:0,onKeyPress:function(e){(0,h.ph)(e)&&!r&&n()},disableTouchRipple:r,disabled:l||p,children:(0,b.jsx)("div",{style:C.contentWrapper,children:(0,b.jsx)(j,{description:a,formattedPrice:o,isLicenseOwned:p,name:i,onClick:n,selected:r})})})},Z=function(e){var t=e.ownedLicense,n=e.productType,a=r.useContext(o.v),s=a.gameTemplateLicenses,l=a.assetPackLicenses,c="game-template"===n?s:l;if(a.error||!c)return null;var u=c.find((function(e){return e.id===t}));return u?(0,b.jsx)(i.I18n,{children:function(e){e.i18n;return(0,b.jsx)(j,{selected:!0,name:u.nameByLocale.en,description:u.descriptionByLocale.en,isLicenseOwned:!0})}}):null};t.Z=function(e){var t=e.value,n=e.onChange,a=e.product,u=e.ownedLicense,d=e.disabled,p=r.useContext(o.v),f=p.gameTemplateLicenses,h=p.assetPackLicenses,m=p.error,v=p.fetchProductLicenses,C="GAME_TEMPLATE"===a.productType?"game-template":"asset-pack",j="game-template"===C?f:h;return r.useEffect((function(){v({productType:C})}),[v,C]),m?(0,b.jsx)(c.Z,{onRetry:function(){return v({productType:C})},children:(0,b.jsx)(i.Trans,{id:"Can't load the licenses. Verify your internet connection or try again later."})}):j?(0,b.jsx)(i.I18n,{children:function(e){var r=e.i18n;return(0,b.jsx)(g.ak,{noMargin:!0,children:j.map((function(e){return a.prices.find((function(t){return t.usageType===e.id}))?(0,b.jsx)(y,{id:e.id,onClick:function(){return n(e.id)},selected:e.id===t,name:(0,l.a)(r,e.nameByLocale),description:(0,l.a)(r,e.descriptionByLocale),formattedPrice:(0,x.e3)({i18n:r,productListingData:a,usageType:e.id}),ownedLicense:u,disabled:d},e.id):null}))})}}):(0,b.jsx)(s.Z,{})}},65875:function(e,t,n){"use strict";n.d(t,{K:function(){return d},v:function(){return u}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(36465),l=n(4900),c=n(29343),u=o.createContext({fetchProductLicenses:function(){},assetPackLicenses:null,gameTemplateLicenses:null,error:null}),d=function(e){var t=e.children,n=o.useState(null),d=(0,a.Z)(n,2),p=d[0],f=d[1],h=o.useState(null),g=(0,a.Z)(h,2),m=g[0],x=g[1],v=o.useState(null),b=(0,a.Z)(v,2),C=b[0],j=b[1],y=o.useRef(!1),Z=o.useCallback((function(){y.current||m&&C||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),y.current=!0,e.prev=2,e.next=5,Promise.all([(0,s.yw)({productType:"asset-pack"}),(0,s.yw)({productType:"game-template"})]);case 5:t=e.sent,n=(0,a.Z)(t,2),i=n[0],o=n[1],console.info("Loaded ".concat(i?i.length:0," asset pack licenses and ").concat(o?o.length:0," game template licenses")),j(i),x(o),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Unable to load product licenses:",e.t0),f(e.t0);case 18:y.current=!1;case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))()}),[C,m]);o.useEffect((function(){if(!(y.current||m&&C)){var e=setTimeout((function(){console.info("Pre-fetching product licenses..."),Z()}),l.KB);return function(){return clearTimeout(e)}}}),[Z,C,m]);var k=o.useMemo((function(){return{assetPackLicenses:C,gameTemplateLicenses:m,fetchProductLicenses:Z,error:p}}),[C,m,Z,p]);return(0,c.jsx)(u.Provider,{value:k,children:t})}},33714:function(e,t,n){"use strict";var r=n(29439),i=n(36600),a=n(28381),o=n(86278),s=n(40243),l=n(61325),c=n(29343),u={limitedTimeContainer:{display:"flex",backgroundColor:"#F03F18",color:"white",borderRadius:4,padding:"8px 0"}};t.Z=function(e){var t=e.visibleUntil,n=e.hideMinutesAndSeconds,d=e.alignCenter,p=a.useState({days:0,hours:0,minutes:0,seconds:0}),f=(0,r.Z)(p,2),h=f[0],g=f[1];return a.useEffect((function(){var e=function(){var e=(new Date).getTime(),n=new Date(t).getTime()-e;g(n>0?{days:Math.floor(n/864e5),hours:Math.floor(n%864e5/36e5),minutes:Math.floor(n%36e5/6e4),seconds:Math.floor(n%6e4/1e3)}:{days:0,hours:0,minutes:0,seconds:0})};e();var n=setInterval(e,1e3);return function(){return clearInterval(n)}}),[t]),h?(0,c.jsx)("div",{style:u.limitedTimeContainer,children:(0,c.jsxs)(s.sg,{justifyContent:"center",expand:!0,alignItems:d?"center":void 0,children:[(0,c.jsx)(o.Z,{children:(0,c.jsx)(i.Trans,{id:"Limited time offer:"})}),(0,c.jsxs)(l.pJ,{alignItems:"center",noMargin:!0,children:[(0,c.jsx)(o.Z,{noMargin:!0,size:"block-title",children:String(h.days).padStart(2,"0")}),(0,c.jsx)(o.Z,{noMargin:!0,children:(0,c.jsx)(i.Trans,{id:"Days"})}),(0,c.jsx)(s.LZ,{}),(0,c.jsx)(o.Z,{noMargin:!0,size:"block-title",style:{fontVariantNumeric:"tabular-nums"},children:String(h.hours).padStart(2,"0")}),(0,c.jsx)(o.Z,{noMargin:!0,children:(0,c.jsx)(i.Trans,{id:"Hours"})}),!n&&(0,c.jsxs)(l.pJ,{alignItems:"center",noMargin:!0,children:[(0,c.jsx)(s.LZ,{}),(0,c.jsx)(o.Z,{noMargin:!0,size:"block-title",style:{fontVariantNumeric:"tabular-nums"},children:String(h.minutes).padStart(2,"0")}),(0,c.jsx)(o.Z,{noMargin:!0,children:(0,c.jsx)(i.Trans,{id:"Minutes"})}),(0,c.jsx)(s.LZ,{}),(0,c.jsx)(o.Z,{noMargin:!0,size:"block-title",style:{fontVariantNumeric:"tabular-nums"},children:String(h.seconds).padStart(2,"0")}),(0,c.jsx)(o.Z,{noMargin:!0,children:(0,c.jsx)(i.Trans,{id:"Seconds"})})]})]})]})}):null}},41908:function(e,t,n){"use strict";n.d(t,{$z:function(){return w},QS:function(){return C},W7:function(){return v},_N:function(){return b},aS:function(){return y},ai:function(){return k},dP:function(){return Z},dv:function(){return j}});var r=n(93433),i=n(36600),a=n(28381),o=n(27230),s=n(71106),l=n(51137),c=n(61325),u=n(60022),d=n(86278),p=n(96591),f=n(84482),h=n(15859),g=n(10888),m=n(40243),x=n(29343),v=function(e){var t=e.otherProductListingDatasFromSameCreator,n=e.currentProductListingData,r=e.receivedProducts,i=e.onProductOpen;return!t||t.length<2?null:t.filter((function(e){return e.id!==n.id})).map((function(e){var t=!!r&&!!r.find((function(t){return t.id===e.id}));return"GAME_TEMPLATE"===e.productType?(0,x.jsx)(o.u7,{privateGameTemplateListingData:e,onSelect:function(){return i(e)},owned:t},e.id):"ASSET_PACK"===e.productType?(0,x.jsx)(o.c7,{assetPackListingData:e,onSelect:function(){return i(e)},owned:t},e.id):"BUNDLE"===e.productType?(0,x.jsx)(o.GM,{bundleListingData:e,onSelect:function(){return i(e)},owned:t},e.id):(console.error("Unexpected product type:",e.productType),null)})).filter(Boolean)},b=function(e){var t=e.product,n=e.productListingData,i=e.productListingDatas,a=e.receivedProducts,s=e.onPrivateAssetPackOpen,l=e.onPrivateGameTemplateOpen,c=e.onBundleOpen;if(!t||!i)return null;var u=function(e){var t=e.product;return e.productListingDatas.filter((function(e){return e.includedListableProductIds&&e.includedListableProductIds.includes(t.id)||"BUNDLE"===e.productType&&e.includedListableProducts&&e.includedListableProducts.some((function(e){return e.productId===t.id}))})).sort((function(e,t){return"BUNDLE"===e.productType&&"BUNDLE"!==t.productType?-1:"BUNDLE"!==e.productType&&"BUNDLE"===t.productType?1:0}))}({product:t,productListingDatas:i});if(!u.length)return null;var d=u.filter((function(e){return!!a&&!!a.find((function(t){return t.id===e.id}))})),p=u.filter((function(e){return!d.find((function(t){return t.id===e.id}))}));return[].concat((0,r.Z)(d.map((function(e){return{product:e,owned:!0}}))),(0,r.Z)(p.map((function(e){return{product:e,owned:!1}})))).map((function(e){var t=e.product,r=e.owned;return"ASSET_PACK"===t.productType?s?(0,x.jsx)(o.$v,{bundleProductListingData:t,includedProductListingData:n,onSelect:function(){return s(t)},owned:r},t.id):(console.error("Trying to render a promo ASSET_PACK tile without onPrivateAssetPackOpen handler."),null):"GAME_TEMPLATE"===t.productType?l?(0,x.jsx)(o.$v,{bundleProductListingData:t,includedProductListingData:n,onSelect:function(){return l(t)},owned:r},t.id):(console.error("Trying to render a promo GAME_TEMPLATE tile without onPrivateGameTemplateOpen handler."),null):"BUNDLE"===t.productType?c?(0,x.jsx)(o.$v,{bundleProductListingData:t,includedProductListingData:n,onSelect:function(){return c(t)},owned:r},t.id):(console.error("Trying to render a promo BUNDLE tile without onBundleOpen handler."),null):(console.error("Unexpected product type for Promo Tile:",t.productType),null)}))},C=function(e){var t=e.productListingData,n=e.productListingDatas,r=t.includedListableProductIds||"BUNDLE"===t.productType&&t.includedListableProducts&&t.includedListableProducts.map((function(e){return e.productId}));return r?r.map((function(e){return n.find((function(t){return t.id===e}))})).filter(Boolean):null},j=function(e){var t=e.product,n=e.productListingDatas,r=e.productListingData,i=e.receivedProducts,a=e.onPrivateAssetPackOpen,s=e.onPrivateGameTemplateOpen,l=e.onBundleOpen,c=e.onCourseOpen,u=e.discountedPrice,d=e.disabled;if(!t||!n)return null;var p=C({productListingData:r,productListingDatas:n});return p&&p.length?p.map((function(e){var t=!!i&&!!i.find((function(t){return t.id===e.id}));return"GAME_TEMPLATE"===e.productType?s?(0,x.jsx)(o.u7,{privateGameTemplateListingData:e,onSelect:function(){return s(e)},owned:t,discountedPrice:u,disabled:d},e.id):(console.error("Trying to render a GAME_TEMPLATE tile without onPrivateGameTemplateOpen handler."),null):"ASSET_PACK"===e.productType?a?(0,x.jsx)(o.c7,{assetPackListingData:e,onSelect:function(){return a(e)},owned:t,discountedPrice:u,disabled:d},e.id):(console.error("Trying to render an ASSET_PACK tile without onPrivateAssetPackOpen handler."),null):"BUNDLE"===e.productType?l?(0,x.jsx)(o.GM,{bundleListingData:e,onSelect:function(){return l(e)},owned:t,discountedPrice:u,disabled:d},e.id):(console.error("Trying to render a BUNDLE tile without onBundleOpen handler."),null):"COURSE"===e.productType?c?(0,x.jsx)(o.tx,{courseListingData:e,onSelect:function(){return c(e)},owned:t,discountedPrice:u,disabled:d},e.id):(console.error("Trying to render a COURSE tile without onCourseOpen handler."),null):(console.error("Unexpected product type:",e.productType),null)})).filter(Boolean):null},y=function(e){var t=e.productId,n=e.receivedProducts,r=e.productPurchases,i=e.allProductListingDatas;if(!t)return null;if(!n||!r||!i)return null;var a=n.find((function(e){return e.id===t}));if(!a)return null;var o=r.find((function(e){return e.productId===a.id}));if(!o){var s=function(e){var t=e.product,n=e.receivedProducts;return n?n.filter((function(e){return e.includedTemplateIds&&e.includedTemplateIds.includes(t.id)||e.includedPackIds&&e.includedPackIds.includes(t.id)||e.includedProducts&&e.includedProducts.some((function(e){return e.productId===t.id}))})):[]}({product:a,receivedProducts:n});if(!s.length)return null;var l=r.filter((function(e){return s.some((function(t){return t.id===e.productId}))}));if(!l.length)return null;if(s[0].includedProducts){var c=s[0].includedProducts.find((function(e){return e.productId===t}));return c?c.usageType:null}return l[0].usageType}return o.usageType},Z=function(e){var t=e.productListingData,n=e.selectedUsageType,r=e.onUsageTypeChange,o=e.simulateAppStoreProduct,m=e.i18n,v=e.isAlreadyReceived,b=e.onClickBuy,C=e.onClickBuyWithCredits,j=e.customLabel,y=e.fullWidth,Z=a.useContext(s.ZP).authenticated,k=o||(0,l.PN)(),w=t.productType.toLowerCase(),T="BUNDLE"!==t.productType?t.creditPrices.find((function(e){return e.usageType===n})):null;if(!T&&"BUNDLE"!==t.productType&&(r(t.prices[0].usageType),!(T=t.creditPrices.find((function(e){return e.usageType===t.prices[0].usageType})))))return console.error("Unable to find a credit price for product ".concat(t.id,", usage type ").concat(t.prices[0].usageType)),null;var S=(0,h.e3)({i18n:m,usageType:n,productListingData:t,plainText:!0});return k&&T?(0,x.jsxs)(c.pJ,{children:[(0,x.jsx)(u.Z,{primary:!0,label:j||(0,x.jsx)(i.Trans,{id:"Buy for {formattedProductPriceText}",values:{formattedProductPriceText:S}}),onClick:C,id:"buy-".concat(w,"-with-credits"),icon:(0,x.jsx)(f.Z,{fontSize:"small"}),size:"medium"}),!v&&!Z&&(0,x.jsx)(d.Z,{size:"body-small",children:(0,x.jsx)(p.Z,{onClick:b,href:"",children:(0,x.jsx)(i.Trans,{id:"Restore a previous purchase"})})})]}):y&&!T?(0,x.jsx)(u.Z,{primary:!0,label:j||(0,x.jsx)(i.Trans,{id:"Buy for {formattedProductPriceText}",values:{formattedProductPriceText:S}}),onClick:b,id:"buy-".concat(w),size:"medium",fullWidth:y}):(0,x.jsxs)(c.pJ,{noMargin:!0,children:[T&&(0,x.jsx)(g.Z,{primary:!0,label:j||(0,x.jsx)(i.Trans,{id:"Buy for {0} credits",values:{0:T.amount}}),onClick:C,id:"buy-".concat(w,"-with-credits"),leftIcon:(0,x.jsx)(f.Z,{fontSize:"small"}),size:"medium"}),(0,x.jsx)(u.Z,{primary:!0,label:j||(0,x.jsx)(i.Trans,{id:"Buy for {formattedProductPriceText}",values:{formattedProductPriceText:S}}),onClick:b,id:"buy-".concat(w),size:"medium"})]})},k=function(e){var t=e.productListingData,n=e.onClick,r=e.label;if("GAME_TEMPLATE"===t.productType&&t.includedListableProductIds)return null;var i=t.productType.toLowerCase();return(0,x.jsx)(m.sg,{noMargin:!0,alignItems:"flex-end",children:(0,x.jsx)(u.Z,{primary:!0,label:r,onClick:n,id:"open-".concat(i)})})},w=function(e){var t=e.productListingData,n=e.product,i=e.additionalThumbnails,a=e.shouldSimulateAppStoreProduct;if(!n)return[];var o=a||(0,l.PN)(),s=(0,r.Z)(new Set([o&&t.appStoreThumbnailUrls&&t.appStoreThumbnailUrls[0]||t.thumbnailUrls[0]].concat((0,r.Z)(n.previewImageUrls),(0,r.Z)(i||[])))).map((function(e){return{kind:"image",url:e}}));return n.previewSoundUrls&&s.push.apply(s,(0,r.Z)(n.previewSoundUrls.map((function(e){return{kind:"audio",url:e}})))),s}},15859:function(e,t,n){"use strict";n.d(t,{JP:function(){return b},ZP:function(){return j},MS:function(){return C},GG:function(){return x},e3:function(){return v}});var r=n(28381),i=n(36600),a=n(69186),o=n(29343),s=(0,a.Z)((function(e){return{container:{borderRadius:4,padding:"2px 4px",backdropFilter:function(t){return t.withOverlay&&"light"===e.palette.type?"brightness(40%)":void 0},backgroundColor:function(t){return t.withOverlay&&"light"===e.palette.type?void 0:e.palette.background.alternate.startsWith("#")?e.palette.background.alternate+"BB":e.palette.background.alternate},color:function(t){return t.withOverlay&&"light"===e.palette.type?"#FAFAFA":void 0}}}}));var l=function(e){var t=e.label,n=e.withOverlay,r=s({withOverlay:n});return(0,o.jsx)("div",{className:r.container,children:t})},c=n(51137),u=n(84482),d=n(61325),p=n(86278),f=n(40243),h=n(82422),g=n(24910),m={icon:{width:13,height:13,position:"relative",top:-1},creditPriceContainer:{display:"flex",alignItems:"center",gap:3},columnOrSeparator:{marginTop:-3,marginBottom:-1},discountedPrice:{textDecoration:"line-through",opacity:.7}},x=function(e,t,n){return"".concat("USD"===t?"$":"\u20ac","\xa0").concat(n.number(e/100,{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/\D00$/,""))},v=function(e){var t=e.i18n,n=e.productListingData,r=e.usageType,a=e.plainText,s=e.showBothPrices,l=e.discountedPrice;if((0,c.PN)()&&("CREDITS_PACKAGE"===n.productType||"BUNDLE"===n.productType)){var h=(0,c.e_)(n.appStoreProductId);return h?h.price:""}var g=n.creditPrices||[],v=r?g.find((function(e){return e.usageType===r})):g.length>0?g[0]:null;if((0,c.PN)()&&!l)return v?a?t._({id:"{0} credits",values:{0:v.amount}}):(0,o.jsxs)(d.pJ,{noMargin:!0,alignItems:"center",children:[(0,o.jsx)(u.Z,{style:m.icon}),(0,o.jsx)(p.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:v.amount})]}):"";var b=n.prices,C=r?b.find((function(e){return e.usageType===r})):b.length>0?b[0]:null;if(!C)return"";var j=x(C.value,C.currency,t);return a?j:s&&v&&!l?"column"===s?(0,o.jsxs)(f.sg,{alignItems:"flex-end",children:[(0,o.jsxs)("div",{style:m.creditPriceContainer,children:[(0,o.jsx)(u.Z,{style:m.icon}),(0,o.jsx)(p.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:v.amount})]}),(0,o.jsx)("span",{style:m.columnOrSeparator,children:(0,o.jsx)(p.Z,{noMargin:!0,color:"inherit",children:(0,o.jsx)(i.Trans,{id:"or"})})}),(0,o.jsx)(p.Z,{noMargin:!0,size:"sub-title",color:"primary",children:j})]}):(0,o.jsxs)(d.pJ,{noMargin:!0,children:[(0,o.jsxs)("div",{style:m.creditPriceContainer,children:[(0,o.jsx)(u.Z,{style:m.icon}),(0,o.jsx)(p.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:v.amount})]}),(0,o.jsx)(p.Z,{noMargin:!0,color:"inherit",children:(0,o.jsx)(i.Trans,{id:"or"})}),(0,o.jsx)(p.Z,{noMargin:!0,size:"sub-title",color:"primary",children:j})]}):(0,o.jsx)(p.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:l?(0,o.jsx)("span",{style:m.discountedPrice,children:j}):j})},b=function(){var e=r.useContext(g.Z);return(0,o.jsxs)(d.pJ,{noMargin:!0,alignItems:"center",children:[(0,o.jsx)(h.Z,{style:{color:e.message.valid}}),(0,o.jsx)(p.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:(0,o.jsx)(i.Trans,{id:"Owned"})})]})},C=function(e){var t=e.i18n,n=e.productListingData,r=e.usageType,i=e.owned,a=e.showBothPrices,s=e.discountedPrice;return i?(0,o.jsx)(b,{}):v({i18n:t,productListingData:n,usageType:r,showBothPrices:a,discountedPrice:s})},j=function(e){var t=e.productListingData,n=e.usageType,r=e.withOverlay,a=e.owned,s=e.discountedPrice;return(0,o.jsx)(i.I18n,{children:function(e){var i=e.i18n,c=C({i18n:i,productListingData:t,usageType:n,owned:a,discountedPrice:s});return(0,o.jsx)(l,{withOverlay:r,label:c})}})}},23375:function(e,t,n){"use strict";n.d(t,{E:function(){return m},Z:function(){return h}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(84140),l=n(49819),c=n(84090),u=n(4194),d=n(96591),p=n(2066),f=n(29343),h=o.createContext({filters:null,authors:null,licenses:null,searchResults:null,fetchResourcesAndFilters:function(){},error:null,searchText:"",setSearchText:function(){},clearAllFilters:function(){},setSearchResourceKind:function(){},getAuthorsDisplayLinks:function(){return null},audioFiltersState:{durationFilter:new u.zz,setDurationFilter:function(e){},audioTypeFilter:new u.HA,setAudioTypeFilter:function(e){}},fontFiltersState:{alphabetSupportFilter:new u.is,setAlphabetSupportFilter:function(){}}}),g=function(e){return e.name+"\n"+e.tags.join(", ")},m=function(e){var t=e.children,n=o.useState(null),m=(0,a.Z)(n,2),x=m[0],v=m[1],b=o.useState(null),C=(0,a.Z)(b,2),j=C[0],y=C[1],Z=o.useState(null),k=(0,a.Z)(Z,2),w=k[0],T=k[1],S=o.useState(null),P=(0,a.Z)(S,2),I=P[0],E=P[1],M=o.useState(null),L=(0,a.Z)(M,2),A=L[0],O=L[1],R=o.useState(null),F=(0,a.Z)(R,2),D=F[0],N=F[1],_=o.useState(null),B=(0,a.Z)(_,2),U=B[0],V=B[1],H=o.useState(null),z=(0,a.Z)(H,2),W=z[0],G=z[1],Y=o.useRef(!1),q=o.useState("audio"),J=(0,a.Z)(q,2),X=J[0],K=J[1],Q=o.useState(""),$=(0,a.Z)(Q,2),ee=$[0],te=$[1],ne=o.useState(new u.zz),re=(0,a.Z)(ne,2),ie=re[0],ae=re[1],oe=o.useState(new u.HA),se=(0,a.Z)(oe,2),le=se[0],ce=se[1],ue=o.useState(new u.is),de=(0,a.Z)(ue,2),pe=de[0],fe=de[1],he=o.useContext(c.KY).environment,ge=o.useCallback((function(e){return D?e.authors.map((function(e){if(D[e]){var t=D[e].website;return(0,f.jsx)(d.Z,{onClick:function(){return p.ZP.openExternalURL(t)},href:t,children:e},e)}return e})):e.authors.join(", ")}),[D]),me=o.useCallback((function(){x&&j&&w||Y.current||(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a,o,l,c,u,d,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(null),Y.current=!0,e.prev=2,e.next=5,(0,s.R5)({environment:he});case 5:return t=e.sent,n=t.resources,i=t.resourcesV2,a=t.filters,e.next=11,(0,s.Dz)({environment:he});case 11:return o=e.sent,e.next=14,(0,s.$l)({environment:he});case 14:l=e.sent,c={},u={},d={},i.forEach((function(e){"font"===e.type?u[e.url]=e:"audio"===e.type&&(d[e.url]=e)})),n.forEach((function(e){"svg"===e.type&&(c[e.url]=e)})),p={},o.forEach((function(e){p[e.name]=e})),console.info("Loaded ".concat(i?i.length:0," resources from the asset store.")),v(c),y(u),T(d),E(a),O(o),N(p),V(l),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(2),console.error("Unable to load the assets from the asset store:",e.t0),G(e.t0);case 36:Y.current=!1;case 37:case"end":return e.stop()}}),e,null,[[2,32]])})))()}),[x,w,j,Y,he]),xe=o.useMemo((function(){return{durationFilter:ie,setDurationFilter:ae,audioTypeFilter:le,setAudioTypeFilter:ce}}),[ie,le]),ve=o.useMemo((function(){return{alphabetSupportFilter:pe,setAlphabetSupportFilter:fe}}),[pe]),be=o.useMemo((function(){return[le,ie]}),[le,ie]),Ce=o.useMemo((function(){return[pe]}),[pe]),je=o.useCallback((function(){xe.setDurationFilter(new u.zz),xe.setAudioTypeFilter(new u.HA),ve.setAlphabetSupportFilter(new u.is)}),[xe,ve]),ye=(0,l.az)(w,g,ee,null,null,be),Ze=(0,l.az)(j,g,ee,null,null,Ce),ke=(0,l.az)(x,g,ee,null,null),we=o.useMemo((function(){return{searchResults:"audio"===X?ye:"svg"===X?ke:Ze,fetchResourcesAndFilters:me,setSearchResourceKind:K,filters:I,authors:A,licenses:U,error:W,searchText:ee,setSearchText:te,clearAllFilters:je,audioFiltersState:xe,fontFiltersState:ve,getAuthorsDisplayLinks:ge}}),[Ze,ye,ke,W,I,A,U,ee,xe,ve,je,me,X,ge]);return(0,f.jsx)(h.Provider,{value:we,children:t})}},4194:function(e,t,n){"use strict";n.d(t,{HA:function(){return o},is:function(){return s},zz:function(){return a}});var r=n(15671),i=n(43144),a=(n(49819),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.durationMarks[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.durationMarks[e.durationMarks.length-1];(0,r.Z)(this,e),this.durationMin=t,this.durationMax=n}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){return e.metadata.duration>=this.durationMin&&e.metadata.duration<=this.durationMax?1:0}},{key:"hasFilters",value:function(){return this.durationMin!==e.durationMarks[0]||this.durationMax!==e.durationMarks[e.durationMarks.length-1]}}]),e}());a.durationMarks=[0,2,5,20,60,300,1800];var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.Z)(this,e),this.type=t}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){return null===this.type||this.type===e.metadata.type?1:0}},{key:"hasFilters",value:function(){return null!==this.type}}]),e}(),s=function(){function e(t){(0,r.Z)(this,e),this.alphabets=t||[]}return(0,i.Z)(e,[{key:"getPertinence",value:function(e){return 0===this.alphabets.length||this.alphabets.every((function(t){return e.metadata.supportedAlphabets.some((function(e){return e.replace("_limited","")===t}))}))?1:0}},{key:"hasFilters",value:function(){return this.alphabets.length>0}}]),e}()},7660:function(e,t,n){"use strict";n.d(t,{L:function(){return Se}});var r=n(29439),i=n(36600),a=n(28381),o=n(38509),s=n(2860),l=n(12949),c=n(40243),u=n(23375),d=n(1413),p=n(61325),f=n(65512),h=n(14331),g=n(58758),m=n(17358),x=n(24910),v=n(29343),b=function(e){var t=a.useContext(x.Z).soundPlayer.playButton[e.primary?"primary":"secondary"],n=(0,m.Z)({root:{color:t.color,backgroundColor:t.backgroundColor,outlineColor:t.borderColor,outlineWidth:2,outlineStyle:"solid","&:hover":{backgroundColor:t.hover.backgroundColor,outlineColor:t.hover.borderColor}}})();return(0,v.jsx)(f.Z,{classes:n,onClick:e.onClick,children:e.isPlaying?(0,v.jsx)(g.Z,{}):(0,v.jsx)(h.Z,{})})},C=n(68107),j=n(86278),y=n(20914),Z=n(31318),k=n(6996),w={paper:{display:"flex",padding:8,flex:1},clickableLine:{flex:1,maxWidth:"100%"}},T=function(e){var t=e.audioResource,n=e.onClickPlay,r=e.onClickLine,i=e.isPlaying,o=e.isSelected,s=(0,k.UQ)().isMobile,l=a.useContext(x.Z),c=a.useContext(u.Z).getAuthorsDisplayLinks;return(0,v.jsx)(y.Z,{background:o?"light":"medium",style:(0,d.Z)((0,d.Z)({},w.paper),{},{borderColor:l.palette.secondary}),variant:o?"outlined":void 0,children:(0,v.jsx)("div",{style:w.clickableLine,onClick:r,children:(0,v.jsxs)(p.pJ,{noMargin:!0,expand:!0,alignItems:"center",justifyContent:s?"space-between":"flex-start",children:[(0,v.jsxs)(p.pJ,{noMargin:!0,alignItems:"center",children:[(0,v.jsx)(b,{onClick:n,isPlaying:i}),(0,v.jsx)("div",{style:{overflow:"hidden",width:s?"unset":400},children:(0,v.jsxs)(p.ak,{noMargin:!0,children:[(0,v.jsx)(j.Z,{noMargin:!0,size:"sub-title",style:Z.t,children:t.name}),(0,v.jsxs)(j.Z,{noMargin:!0,color:"secondary",style:Z.t,size:"body-small",children:[c(t)," -"," ",t.license.replace(", click for details","")]})]})})]}),(0,v.jsx)(j.Z,{noMargin:!0,size:"sub-title",color:"secondary",children:(0,C.L)(t.metadata.duration)})]})})})},S=n(97228),P=n(2632),I=n(82676),E=n(36607),M=n(51598),L=n(93433),A=n(4194),O=n(10888),R=n(3108),F=n(35721),D=n(70619),N=n(90242),_=n(31595),B={af:{languageName:"Afrikaans",languageNativeName:"Afrikaans"},am:{languageName:"Amharic",languageNativeName:"\u12a0\u121b\u122d\u129b"},ar:{languageName:"Arabic",languageNativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},az:{languageName:"Azerbaijani",languageNativeName:"Az\u0259rbaycan dili"},be:{languageName:"Belarusian",languageNativeName:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f"},bg:{languageName:"Bulgarian",languageNativeName:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},bn:{languageName:"Bengali",languageNativeName:"\u09ac\u09be\u0982\u09b2\u09be"},bs:{languageName:"Bosnian",languageNativeName:"bosanski"},ca:{languageName:"Catalan",languageNativeName:"catal\xe0"},cs:{languageName:"Czech",languageNativeName:"\u010de\u0161tina"},cy:{languageName:"Welsh",languageNativeName:"Cymraeg"},da:{languageName:"Danish",languageNativeName:"dansk"},de:{languageName:"German",languageNativeName:"Deutsch"},el:{languageName:"Greek",languageNativeName:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},en:{languageName:"English",languageNativeName:"English"},es:{languageName:"Spanish",languageNativeName:"espa\xf1ol"},et:{languageName:"Estonian",languageNativeName:"eesti keel"},eu:{languageName:"Basque",languageNativeName:"euskara"},fa:{languageName:"Persian",languageNativeName:"\u0641\u0627\u0631\u0633\u06cc"},fi:{languageName:"Finnish",languageNativeName:"suomi"},fil:{languageName:"Filipino",languageNativeName:"Filipino"},fo:{languageName:"Faroese",languageNativeName:"f\xf8royskt"},fr:{languageName:"French",languageNativeName:"fran\xe7ais"},ga:{languageName:"Irish",languageNativeName:"Gaeilge"},gl:{languageName:"Galician",languageNativeName:"galego"},gu:{languageName:"Gujarati",languageNativeName:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0"},he:{languageName:"Hebrew",languageNativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea"},hi:{languageName:"Hindi",languageNativeName:"\u0939\u093f\u0928\u094d\u0926\u0940"},hr:{languageName:"Croatian",languageNativeName:"hrvatski"},hu:{languageName:"Hungarian",languageNativeName:"magyar"},hy:{languageName:"Armenian",languageNativeName:"\u0570\u0561\u0575\u0565\u0580\u0565\u0576"},id:{languageName:"Indonesian",languageNativeName:"Bahasa Indonesia"},is:{languageName:"Icelandic",languageNativeName:"\xedslenska"},it:{languageName:"Italian",languageNativeName:"italiano"},ja:{languageName:"Japanese",languageNativeName:"\u65e5\u672c\u8a9e"},ka:{languageName:"Georgian",languageNativeName:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8"},kk:{languageName:"Kazakh",languageNativeName:"\u049b\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456"},km:{languageName:"Khmer",languageNativeName:"\u1781\u17d2\u1798\u17c2\u179a"},kn:{languageName:"Kannada",languageNativeName:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1"},ko:{languageName:"Korean",languageNativeName:"\ud55c\uad6d\uc5b4"},ky:{languageName:"Kyrgyz",languageNativeName:"\u043a\u044b\u0440\u0433\u044b\u0437\u0447\u0430"},lo:{languageName:"Lao",languageNativeName:"\u0ea5\u0eb2\u0ea7"},lt:{languageName:"Lithuanian",languageNativeName:"lietuvi\u0173"},lv:{languageName:"Latvian",languageNativeName:"latvie\u0161u"},mk:{languageName:"Macedonian",languageNativeName:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438"},ml:{languageName:"Malayalam",languageNativeName:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02"},mn:{languageName:"Mongolian",languageNativeName:"\u041c\u043e\u043d\u0433\u043e\u043b"},mr:{languageName:"Marathi",languageNativeName:"\u092e\u0930\u093e\u0920\u0940"},ms:{languageName:"Malay",languageNativeName:"Bahasa Melayu"},my:{languageName:"Burmese",languageNativeName:"\u1019\u103c\u1014\u103a\u1019\u102c"},nb:{languageName:"Norwegian Bokm\xe5l",languageNativeName:"Norsk Bokm\xe5l"},ne:{languageName:"Nepali",languageNativeName:"\u0928\u0947\u092a\u093e\u0932\u0940"},nl:{languageName:"Dutch",languageNativeName:"Nederlands"},pa:{languageName:"Punjabi",languageNativeName:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40"},pl:{languageName:"Polish",languageNativeName:"polski"},pt:{languageName:"Portuguese",languageNativeName:"portugu\xeas"},ro:{languageName:"Romanian",languageNativeName:"rom\xe2n\u0103"},ru:{languageName:"Russian",languageNativeName:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439"},si:{languageName:"Sinhala",languageNativeName:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd"},sk:{languageName:"Slovak",languageNativeName:"sloven\u010dina"},sl:{languageName:"Slovenian",languageNativeName:"sloven\u0161\u010dina"},sq:{languageName:"Albanian",languageNativeName:"shqip"},sr:{languageName:"Serbian",languageNativeName:"\u0441\u0440\u043f\u0441\u043a\u0438"},sv:{languageName:"Swedish",languageNativeName:"svenska"},sw:{languageName:"Swahili",languageNativeName:"Kiswahili"},ta:{languageName:"Tamil",languageNativeName:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"},te:{languageName:"Telugu",languageNativeName:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},th:{languageName:"Thai",languageNativeName:"\u0e44\u0e17\u0e22"},to:{languageName:"Tongan",languageNativeName:"lea fakatonga"},tr:{languageName:"Turkish",languageNativeName:"T\xfcrk\xe7e"},uk:{languageName:"Ukrainian",languageNativeName:"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},ur:{languageName:"Urdu",languageNativeName:"\u0627\u0631\u062f\u0648"},uz:{languageName:"Uzbek",languageNativeName:"o\u02bbzbekcha"},vi:{languageName:"Vietnamese",languageNativeName:"Ti\u1ebfng Vi\u1ec7t"},yue:{languageName:"Cantonese",languageNativeName:"\u7cb5\u8a9e"},zh:{languageName:"Chinese",languageNativeName:"\u4e2d\u6587"},zu:{languageName:"Zulu",languageNativeName:"isiZulu"}},U=[{value:"",label:"",disabled:!0}].concat((0,L.Z)(Object.keys(B).map((function(e){return{value:e,label:B[e].languageNativeName}})))),V=function(e){var t=e.filterKey,n=e.title,r=e.choices,i=e.value,a=e.onChange;return(0,v.jsxs)(R.UQ,{defaultExpanded:!0,children:[(0,v.jsx)(R._m,{children:(0,v.jsx)(j.Z,{displayInlineAsSpan:!0,children:n})}),(0,v.jsx)(R.X1,{children:(0,v.jsx)(c.sg,{expand:!0,noMargin:!0,children:(0,v.jsx)(D.Z,{value:i,onChange:a,children:r.map((function(e){return(0,v.jsx)(N.Z,{value:e.value,label:e.label},e.value)}))})})})]},t)},H=A.zz.durationMarks.map((function(e){return{value:e?Math.log10(e):e,label:e<60?e:(0,C.L)(e,{noNullDuration:!1})}})),z=function(e){var t=e.filterKey,n=e.title,r=e.choices,i=e.values,a=e.onChange;return(0,v.jsxs)(R.UQ,{defaultExpanded:!0,children:[(0,v.jsx)(R._m,{children:(0,v.jsx)(j.Z,{displayInlineAsSpan:!0,children:n})}),(0,v.jsx)(R.X1,{children:(0,v.jsxs)(c.sg,{expand:!0,noMargin:!0,children:[(0,v.jsx)(D.Z,{value:"",onChange:function(e){var t=r.find((function(t){return t.value===e})),n=[].concat((0,L.Z)(i),[t?{label:t.label,value:t.value}:void 0]).filter(Boolean);a(n)},children:r.map((function(e){return i.findIndex((function(t){return t.value===e.value}))>=0?(0,v.jsx)(N.Z,{value:e.value,label:"string"===typeof e.label?e.label+" \u2713":e.label,disabled:!0},e.value):(0,v.jsx)(N.Z,{value:e.value,label:e.label},e.value)}))}),(0,v.jsx)(_.Z,{tagsWithLabel:i,onRemove:function(e){var t=i.findIndex((function(t){return t.value===e}));if(t>=0){var n=(0,L.Z)(i);n.splice(t,1),a(n)}}})]})})]},t)},W=function(e){var t=e.resourceKind,n=a.useContext(u.Z),r=n.audioFiltersState,o=n.fontFiltersState,s=n.clearAllFilters;return(0,v.jsxs)(c.sg,{noMargin:!0,expand:!0,children:["audio"===t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V,{title:(0,v.jsx)(i.Trans,{id:"Audio type"}),filterKey:"AudioType",choices:[{value:"",label:{id:"All"}},{value:"music",label:{id:"Music"}},{value:"sound",label:{id:"Sound"}}],value:r.audioTypeFilter.type||"",onChange:function(e){return r.setAudioTypeFilter(new A.HA(e||null))}}),(0,v.jsx)(F.a,{filterKey:"Duration",title:(0,v.jsx)(i.Trans,{id:"Duration"}),min:H[0].value,max:H[H.length-1].value,step:null,scale:function(e){return e?Math.round(Math.pow(10,e)):e},range:[r.durationFilter.durationMin?Math.log10(r.durationFilter.durationMin):r.durationFilter.durationMin,r.durationFilter.durationMax?Math.log10(r.durationFilter.durationMax):r.durationFilter.durationMax],setRange:function(e){r.setDurationFilter(new A.zz(Math.pow(10,e[0]),Math.pow(10,e[1])))},valueLabelFormat:function(e){return(0,C.L)(e,{noNullDuration:!1})},marks:H})]}),"font"===t&&(0,v.jsx)(z,{filterKey:"AlphabetSupport",title:(0,v.jsx)(i.Trans,{id:"Alphabet"}),choices:U,onChange:function(e){return o.setAlphabetSupportFilter(new A.is(e.map((function(e){return e.value}))))},values:o.alphabetSupportFilter.alphabets.map((function(e){return{value:e,label:B[e].languageNativeName}}))}),(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)(O.Z,{label:(0,v.jsx)(i.Trans,{id:"Clear all filters"}),primary:!1,onClick:s})})]})},G=n(18930),Y=n(33712);function q(e,t){var n=a.useState(null),i=(0,r.Z)(n,2),o=i[0],s=i[1],l=a.useMemo((function(){return Object.entries(t).flat()}),[t]);return a.useEffect((function(){if(e.current){var n=Y.Z.create((0,d.Z)((0,d.Z)({},t),{},{container:e.current}));return s(n),function(){n.destroy()}}}),[e].concat((0,L.Z)(l))),o}var J=/^on([A-Z])/,X=function(e){return J.test(e)};function K(e,t){var n=a.useMemo((function(){return Object.entries(t).flat()}),[t]);a.useEffect((function(){if(e){var n=Object.entries(t);if(n.length){var i=n.map((function(t){var n=(0,r.Z)(t,2),i=n[0],a=n[1],o=i.replace(J,(function(e,t){return t.toLowerCase()}));return e.on(o,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.apply(void 0,[e].concat(n))}))}));return function(){i.forEach((function(e){return e()}))}}}}),[e].concat((0,L.Z)(n)))}var Q=a.memo((function(e){var t=a.useRef(null),n=function(e){return a.useMemo((function(){var t=(0,d.Z)({},e),n=(0,d.Z)({},e);for(var r in t)X(r)?delete t[r]:delete n[r];return[t,n]}),[e])}(e),i=(0,r.Z)(n,2),o=i[0],s=i[1];return K(q(t,o),s),(0,v.jsx)("div",{ref:t})}));var $=n(86022),ee=n(78118),te=a.memo((function(e){return(0,v.jsxs)(ee.Z,(0,d.Z)((0,d.Z)({width:"17",height:"16",viewBox:"0 0 24 24",fill:"none"},e),{},{children:[(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.41141 5.08078C5.66376 4.95311 5.96646 4.97824 6.19429 5.14577L14.6943 11.3958C14.8865 11.5371 15 11.7614 15 12C15 12.2386 14.8865 12.4629 14.6943 12.6042L6.19429 18.8542C5.96646 19.0218 5.66376 19.0469 5.41141 18.9192C5.15907 18.7916 5 18.5328 5 18.25V5.75C5 5.4672 5.15907 5.20845 5.41141 5.08078ZM6.5 7.2324V16.7676L12.9839 12L6.5 7.2324Z",fill:"currentColor"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.25 5C18.6642 5 19 5.33579 19 5.75V18.25C19 18.6642 18.6642 19 18.25 19C17.8358 19 17.5 18.6642 17.5 18.25V5.75C17.5 5.33579 17.8358 5 18.25 5Z",fill:"currentColor"})]}))})),ne={waveSurferContainer:{height:80,width:"calc(100% - 100px)"},textContainer:{display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"hidden",justifyContent:"center",flexGrow:0,flexShrink:1},container:{minHeight:70,paddingLeft:c.XW/2,paddingRight:c.XW/2,display:"flex"},waveSurferAndTimeContainer:{display:"flex",alignItems:"stretch",overflow:"hidden",justifyContent:"space-between",marginTop:c.XW,marginBottom:c.XW,flexGrow:1,flexShrink:0}},re=a.forwardRef((function(e,t){var n=e.soundSrc,i=e.onSoundLoaded,o=e.onSkipBack,s=e.onSkipForward,l=e.title,u=e.subtitle,f=a.useContext(x.Z),h=a.useRef(!1),g=(0,k.UQ)().isMobile,m=a.useRef(null),y=a.useRef(null),w=a.useState(null),T=(0,r.Z)(w,2),S=T[0],P=T[1],I=a.useState(null),E=(0,r.Z)(I,2),L=E[0],A=E[1],O=a.useState(!1),R=(0,r.Z)(O,2),F=R[0],D=R[1],N=a.useCallback((function(e){y.current=e,P(Math.ceil(e.getDuration())),A(0),i(),h.current&&D(!0)}),[i]),_=a.useCallback((function(){m.current&&(P(Math.ceil(m.current.duration)),A(0),i(),h.current&&D(!0))}),[i]),B=a.useCallback((function(){h.current=F,o&&o()}),[F,o]),U=a.useCallback((function(){h.current=F,s&&s()}),[F,s]),V=a.useCallback((function(){D(!1)}),[]);a.useEffect((function(){(y.current||m.current)&&(F?y.current?y.current.play():m.current&&m.current.play():y.current?y.current.pause():m.current&&m.current.pause())}),[F]);var H=a.useCallback((function(e){n&&D((function(t){return e||!t}))}),[n]),z=a.useCallback((function(){D(!1)}),[]);a.useImperativeHandle(t,(function(){return{playPause:H}}));var W=a.useCallback((function(){A((function(e){var t=m.current?m.current.currentTime:y.current?y.current.getCurrentTime():null;return null===t||e===t?e:t}))}),[]);return a.useEffect((function(){if(g){if(n){m.current&&m.current.pause();var e=new Audio(n);e.addEventListener("timeupdate",W),e.addEventListener("ended",z),e.addEventListener("loadstart",V),e.addEventListener("loadedmetadata",_),m.current=e}y.current=null}else m.current=null;V()}),[g,n,W,z,V,_]),(0,v.jsx)("div",{style:ne.container,children:(0,v.jsxs)(p.pJ,{alignItems:"stretch",noMargin:!0,expand:!0,children:[(0,v.jsxs)(p.pJ,{alignItems:"center",children:[(0,v.jsx)(M.Z,{size:"small",onClick:B,disabled:!o,children:(0,v.jsx)($.Z,{})}),(0,v.jsx)(b,{primary:!0,isPlaying:F,onClick:function(){return H()}}),(0,v.jsx)(M.Z,{size:"small",onClick:U,disabled:!s,children:(0,v.jsx)(te,{})})]}),(0,v.jsx)(c.x1,{noMargin:!0,children:(0,v.jsx)(G.Z,{orientation:"vertical"})}),(0,v.jsxs)(p.pJ,{justifyContent:"space-between",alignItems:"stretch",noMargin:!0,expand:!0,children:[(0,v.jsxs)("div",{style:ne.textContainer,children:[(0,v.jsx)(j.Z,{size:"sub-title",noMargin:!0,children:l||"-"}),(0,v.jsx)(j.Z,{size:"body-small",noMargin:!0,color:"secondary",style:Z.t,children:u||"-"})]}),(0,v.jsxs)("div",{style:(0,d.Z)((0,d.Z)({},ne.waveSurferAndTimeContainer),{},{justifyContent:n?"space-between":"flex-end"}),children:[!g&&(0,v.jsx)("div",{style:ne.waveSurferContainer,children:(0,v.jsx)(Q,{url:n,waveColor:f.soundPlayer.waveColor,progressColor:f.soundPlayer.progressColor,barWidth:2,barGap:1,barRadius:3,height:80,normalize:!0,onReady:N,onTimeupdate:W,onLoad:V,onFinish:z})}),(0,v.jsx)(c.sg,{justifyContent:"center",noMargin:!0,children:(0,v.jsxs)(c.x1,{noMargin:!0,children:[(0,v.jsx)(j.Z,{noMargin:!0,size:"sub-title",children:"number"!==typeof L?"..":(0,C.L)(L)}),"\xa0",(0,v.jsxs)(j.Z,{noMargin:!0,size:"sub-title",color:"secondary",children:["/"," ","number"!==typeof S?"..":(0,C.L)(S)]})]})})]})]})]})})})),ie=n(3798),ae=n(23818),oe={paper:{padding:8,width:"calc(100% - ".concat(18,"px)")},container:{display:"flex",flexDirection:"column",gap:8,alignItems:"flex-start"},previewContainer:{backgroundColor:"white",padding:8,height:60,display:"flex",overflowX:"scroll",width:"calc(100% - ".concat(16,"px)")},previewImage:{objectFit:"contain",verticalAlign:"middle",pointerEvents:"none",maxHeight:"100%"},button:{width:"100%",display:"flex",justifyContent:"flex-start",overflowX:"hidden"}},se=/\.(otf|ttf)$/,le=function(e){var t=e.fontResource,n=e.isSelected,r=e.onSelect,i=a.useContext(x.Z),o=t.name.replace(se,"");return(0,v.jsx)(ie.Z,{onClick:r,disableRipple:!0,disableTouchRipple:!0,style:oe.button,children:(0,v.jsx)(y.Z,{background:n?"light":"medium",style:(0,d.Z)((0,d.Z)({},oe.paper),{},{borderColor:i.palette.secondary}),variant:n?"outlined":void 0,children:(0,v.jsxs)("div",{style:oe.container,children:[(0,v.jsxs)(p.pJ,{noMargin:!0,alignItems:"center",children:[(0,v.jsx)(j.Z,{noMargin:!0,size:"sub-title",align:"left",style:Z.t,children:o}),(0,v.jsx)(j.Z,{noMargin:!0,color:"secondary",align:"left",style:Z.t,children:t.license})]}),(0,v.jsx)("div",{style:oe.previewContainer,children:(0,v.jsx)(ae.W,{style:oe.previewImage,src:t.previewImageUrl,alt:t.name})})]})})})},ce=n(2351),ue=n(48812),de=n(60022),pe=n(58893),fe=n(81730),he=n(62981),ge={previewContainer:{display:"flex",position:"relative",justifyContent:"center",alignItems:"center"},previewImage:{position:"relative",objectFit:"contain",verticalAlign:"middle",pointerEvents:"none"},previewIconDarkTheme:{width:40,height:40,filter:"grayscale(1) invert(1)"},previewIconLightTheme:{width:40,height:40},cardContainer:{overflow:"hidden",position:"relative"},titleContainer:{position:"absolute",bottom:0,left:0,right:0,height:48,color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"rgb(0,0,0,0.5)"},title:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},icon:{width:32,height:32},audioElement:{width:128,height:40}},me=function(e){var t=e.resource,n=e.onChoose,r=e.size,i=e.isSelected,o=e.imageStyle,s=a.useContext(x.Z);return(0,v.jsx)(ie.Z,{onClick:n,focusRipple:!0,children:(0,v.jsxs)("div",{style:(0,d.Z)((0,d.Z)({},ge.cardContainer),{},{width:r,height:r,outline:i?"1px solid ".concat(s.palette.secondary):void 0}),children:[(0,v.jsxs)("div",{style:(0,d.Z)((0,d.Z)({},ge.previewContainer),{},{width:r,height:r}),children:[(0,v.jsx)(pe.Z,{}),(0,v.jsx)(ae.W,{style:(0,d.Z)((0,d.Z)({},ge.previewImage),{},{maxWidth:108,maxHeight:108},o),src:t.url,alt:t.name},t.url)]}),(0,v.jsxs)("div",{style:ge.titleContainer,children:[(0,v.jsx)(j.Z,{noMargin:!0,style:ge.title,color:"inherit",children:t.name}),(0,v.jsx)(j.Z,{noMargin:!0,style:ge.title,color:"inherit",size:"body2",children:t.license})]})]})})},xe=function(e){var t=e.resource,n=(e.onChoose,e.size),r=e.children;return(0,v.jsxs)("div",{style:(0,d.Z)((0,d.Z)({},ge.cardContainer),{},{width:n,height:n}),children:[(0,v.jsx)(c.sg,{children:r}),(0,v.jsxs)("div",{style:ge.titleContainer,children:[(0,v.jsx)(j.Z,{noMargin:!0,style:ge.title,children:t.name}),(0,v.jsx)(j.Z,{noMargin:!0,style:ge.title,size:"body2",children:t.license})]})]})},ve=function(e){var t=e.resource,n=e.onChoose,r=e.size,o=e.isSelected,s=t.type,l=a.useContext(x.Z);switch(s){case"image":return(0,v.jsx)(me,{isSelected:o,resource:t,onChoose:n,size:r});case"svg":return(0,v.jsx)(me,{isSelected:o,resource:t,onChoose:n,size:r,imageStyle:"light"===l.palette.type?ge.previewIconLightTheme:ge.previewIconDarkTheme});case"audio":return(0,v.jsxs)(xe,{onChoose:n,resource:t,size:r,children:[(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)("audio",{controls:!0,src:t.url,style:ge.audioElement,children:"Audio preview is unsupported."})}),(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)(de.Z,{onClick:n,label:(0,v.jsx)(i.Trans,{id:"Choose"})})})]});case"json":case"tilemap":case"tileset":case"spine":return(0,v.jsxs)(xe,{onChoose:n,resource:t,size:r,children:[(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)(he.Z,{style:ge.icon})}),(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)(de.Z,{onClick:n,label:(0,v.jsx)(i.Trans,{id:"Choose"})})})]});case"video":return(0,v.jsxs)(xe,{onChoose:n,resource:t,size:r,children:[(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)(fe.Z,{style:ge.icon})}),(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)(de.Z,{onClick:n,label:(0,v.jsx)(i.Trans,{id:"Choose"})})})]});case"font":case"model3D":case"atlas":return(0,v.jsxs)(xe,{onChoose:n,resource:t,size:r,children:[(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)(ue.Z,{style:ge.icon})}),(0,v.jsx)(c.x1,{justifyContent:"center",children:(0,v.jsx)(de.Z,{onClick:n,label:(0,v.jsx)(i.Trans,{id:"Choose"})})})]});default:return null}},be=n(86578),Ce=n(75383),je=n(78081),ye=function(e){var t=e.index,n=e.style,r=e.data,i=r.items[t];return"audio"!==i.type?null:(0,v.jsx)("div",{style:n,children:(0,v.jsx)(T,{audioResource:i,isSelected:r.selectedResourceIndex===t,isPlaying:!1,onClickPlay:function(){return r.onClickPlay(t)},onClickLine:function(){return r.onSelect(t)}})})},Ze=function(e){var t=e.index,n=e.style,r=e.data,i=r.items[t];return"font"!==i.type?null:(0,v.jsx)("div",{style:n,children:(0,v.jsx)(le,{fontResource:i,isSelected:r.selectedResourceIndex===t,onSelect:function(){return r.onSelect(t)}})})},ke=function(e){var t=e.searchResults,n=e.isFiltersPanelOpen,r=e.setIsFiltersPanelOpen,l=e.error,d=e.onRetry,p=e.selectedResourceIndex,f=e.onSelectResource,h=a.useRef(null),g=a.useRef(null),m=a.useRef(!1),x=a.useContext(u.Z).getAuthorsDisplayLinks,b=t&&"number"===typeof p?t[p]:null,C=a.useCallback((function(e){e===p&&h.current&&h.current.playPause(!0),m.current=!0,f(e)}),[f,p]),j=a.useCallback((function(){var e="number"===typeof p?p+1:0;f(e),g.current&&g.current.scrollToItem(e,"smart")}),[p,f]),Z=a.useCallback((function(){var e="number"===typeof p?Math.max(p-1,0):0;f(e),g.current&&g.current.scrollToItem(e,"smart")}),[p,f]),k=a.useCallback((function(){h.current&&m.current&&h.current.playPause(!0),m.current=!1}),[]),w=null;if(b){w=[];var T=x(b);T&&(w.push(T),w.push(" - ")),w.push(b.license.replace(", click for details",""))}return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(c.x1,{expand:!0,noMargin:!0,children:[(0,v.jsx)(c.sg,{noMargin:!0,noOverflowParent:!0,expand:!0,children:(0,v.jsx)(c.x1,{noMargin:!0,expand:!0,children:l?(0,v.jsxs)(Ce.Z,{onRetry:d,children:[(0,v.jsx)(i.Trans,{id:"An error occurred while loading audio resources."})," ",(0,v.jsx)(i.Trans,{id:"Please check your internet connection or try again later."})]}):!!t&&(0===t.length?(0,v.jsx)(be.Z,{children:(0,v.jsx)(i.Trans,{id:"Your search and filters did not return any result."})}):(0,v.jsx)(o.qj,{children:function(e){var n=e.height,r=e.width;return(0,v.jsx)(s.t7,{ref:g,height:n,width:r,overscanCount:10,itemCount:t.length,itemSize:66,itemData:{items:t,onClickPlay:C,onSelect:f,selectedResourceIndex:p},children:ye})}}))})}),(0,v.jsx)(S.y,{onClose:function(){return r(!1)},open:n,children:(0,v.jsx)(P.Z,{children:(0,v.jsxs)(c.sg,{children:[(0,v.jsx)(c.sg,{noMargin:!0,children:(0,v.jsxs)(c.x1,{alignItems:"center",children:[(0,v.jsx)(I.Z,{}),(0,v.jsx)(E.Z,{children:(0,v.jsx)(i.Trans,{id:"Filters"})})]})}),(0,v.jsx)(c.x1,{justifyContent:"space-between",alignItems:"center",children:(0,v.jsx)(W,{resourceKind:"audio"})})]})})})]}),(0,v.jsx)(y.Z,{background:"dark",children:(0,v.jsx)(re,{ref:h,soundSrc:b?b.url:null,onSoundLoaded:k,onSkipBack:"number"===typeof p&&t&&p<=0?void 0:Z,onSkipForward:"number"===typeof p&&t&&p>=t.length-1?void 0:j,title:b?b.name:null,subtitle:w})})]})},we=function(e){var t=e.searchResults,n=e.isFiltersPanelOpen,r=e.setIsFiltersPanelOpen,a=e.error,l=e.onRetry,u=e.selectedResourceIndex,d=e.onSelectResource;return(0,v.jsxs)(c.x1,{expand:!0,noMargin:!0,children:[(0,v.jsx)(c.sg,{noMargin:!0,noOverflowParent:!0,expand:!0,children:(0,v.jsx)(c.x1,{noMargin:!0,expand:!0,children:a?(0,v.jsxs)(Ce.Z,{onRetry:l,children:[(0,v.jsx)(i.Trans,{id:"An error occurred while loading fonts."})," ",(0,v.jsx)(i.Trans,{id:"Please check your internet connection or try again later."})]}):!!t&&(0===t.length?(0,v.jsx)(be.Z,{children:(0,v.jsx)(i.Trans,{id:"Your search and filters did not return any result.<0/>If you need support for a specific language, please contact us.",components:[(0,v.jsx)("br",{})]})}):(0,v.jsx)(o.qj,{children:function(e){var n=e.height,r=e.width;return(0,v.jsx)(s.t7,{height:n,width:r,overscanCount:10,itemCount:t.length,itemSize:130,itemData:{items:t,selectedResourceIndex:u,onSelect:d},children:Ze})}}))})}),(0,v.jsx)(S.y,{onClose:function(){return r(!1)},open:n,children:(0,v.jsx)(P.Z,{children:(0,v.jsxs)(c.sg,{children:[(0,v.jsx)(c.sg,{noMargin:!0,children:(0,v.jsxs)(c.x1,{alignItems:"center",children:[(0,v.jsx)(I.Z,{}),(0,v.jsx)(E.Z,{children:(0,v.jsx)(i.Trans,{id:"Filters"})})]})}),(0,v.jsx)(c.x1,{justifyContent:"space-between",alignItems:"center",children:(0,v.jsx)(W,{resourceKind:"font"})})]})})})]})},Te=function(e){var t=e.searchResults,n=(e.isFiltersPanelOpen,e.setIsFiltersPanelOpen,e.error),r=e.onRetry,i=e.selectedResourceIndex,a=e.onSelectResource;return(0,v.jsx)(c.x1,{expand:!0,overflow:"hidden",noMargin:!0,children:(0,v.jsx)(ce.t,{baseSize:128,spacing:8,onRetry:r,error:n,searchItems:t,renderSearchItem:function(e,t,n){return(0,v.jsx)(ve,{size:t,resource:e,onChoose:function(){return a(n)},isSelected:i===n})}})})},Se=function(e){var t=e.onSelectResource,n=e.selectedResourceIndex,i=e.resourceKind,o=a.useContext(u.Z),s=o.searchResults,d=o.fetchResourcesAndFilters,f=o.searchText,h=o.error,g=o.setSearchText,m=o.setSearchResourceKind,x=o.fontFiltersState,b=o.audioFiltersState,C=a.useState((function(){return"audio"===i?b.durationFilter.hasFilters()||b.audioTypeFilter.hasFilters():"font"===i&&x.alphabetSupportFilter.hasFilters()})),j=(0,r.Z)(C,2),y=j[0],Z=j[1];a.useEffect((function(){return m(i),function(){g("")}}),[i,m,g]),a.useEffect((function(){d()}),[d]);var k=s?s.filter((function(e){return e.type===i})):null;return a.useEffect((function(){t(null)}),[s,t]),(0,v.jsxs)(c.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,v.jsxs)(p.pJ,{children:[(0,v.jsx)(c.sg,{expand:!0,noMargin:!0,children:(0,v.jsx)(l.Z,{value:f,onChange:g,onRequestSearch:function(){},placeholder:{id:"Search resources"}})}),("audio"===i||"font"===i)&&(0,v.jsx)(M.Z,{onClick:function(){return Z(!y)},selected:y,size:"small",children:(0,v.jsx)(I.Z,{})})]}),s?"audio"===i?(0,v.jsx)(ke,{error:h,selectedResourceIndex:n,onSelectResource:t,onRetry:d,isFiltersPanelOpen:y,setIsFiltersPanelOpen:Z,searchResults:k}):"font"===i?(0,v.jsx)(we,{error:h,selectedResourceIndex:n,onSelectResource:t,onRetry:d,isFiltersPanelOpen:y,setIsFiltersPanelOpen:Z,searchResults:k}):"svg"===i?(0,v.jsx)(Te,{error:h,selectedResourceIndex:n,onSelectResource:t,onRetry:d,isFiltersPanelOpen:!1,setIsFiltersPanelOpen:function(){},searchResults:k}):null:(0,v.jsx)(je.Z,{})]})}},40480:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(36600),i=n(28381),a=n(61325),o=n(86278),s=n(24910),l=n(1413),c=n(78118),u=n(29343),d=i.memo((function(e){return(0,u.jsx)(c.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 3.82609L10.9891 2H5.51087L3 3.82609V7.47826C3 8.16304 3.45652 11.3587 8.25 13.8696C13.5 11.3587 13.5 8.16304 13.5 7.47826V3.82609ZM11.0835 4.59989C11.2242 4.69716 11.2594 4.8901 11.1622 5.03085L8.41572 9.00489C7.97122 9.64806 7.02495 9.66033 6.56393 9.02891L5.49418 7.56374C5.3933 7.42556 5.42353 7.23177 5.5617 7.13088C5.69988 7.03 5.89367 7.06023 5.99456 7.1984L7.06431 8.66357C7.27385 8.95057 7.70399 8.945 7.90605 8.65264L10.6525 4.67861C10.7498 4.53786 10.9427 4.50262 11.0835 4.59989Z",fill:"currentColor"})}))})),p=i.memo((function(e){return(0,u.jsx)(c.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"11",height:"12",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.64541 1.12752C4.72629 0.948424 4.90458 0.833313 5.10109 0.833313C5.60843 0.833313 6.09657 1.03158 6.45772 1.38699C6.81913 1.74267 7.02366 2.22679 7.02366 2.7333V4.09996H9.2051C9.41278 4.09808 9.61864 4.14042 9.80867 4.22435C9.99965 4.30871 10.1704 4.43321 10.3087 4.58973C10.447 4.74627 10.5495 4.93108 10.6087 5.13153C10.6678 5.332 10.682 5.54291 10.6501 5.7495L9.99575 9.94941C9.99573 9.94956 9.99577 9.94926 9.99575 9.94941C9.94268 10.2931 9.76541 10.6051 9.49895 10.828C9.23337 11.0501 8.89668 11.1697 8.55073 11.1666H1.78176C1.40018 11.1666 1.03265 11.0175 0.760435 10.7496C0.487947 10.4814 0.333374 10.116 0.333374 9.73326V6.46661C0.333374 6.08387 0.487947 5.71844 0.760435 5.45028C1.03265 5.18238 1.40018 5.03329 1.78176 5.03329H2.88151L4.64541 1.12752ZM2.70433 6.03329H1.78176C1.66028 6.03329 1.54536 6.08085 1.46186 6.16302C1.37864 6.24493 1.33337 6.35429 1.33337 6.46661V9.73326C1.33337 9.84558 1.37864 9.95495 1.46186 10.0368C1.54536 10.119 1.66028 10.1666 1.78176 10.1666H2.70433V6.03329ZM3.70433 10.1666H8.55877C8.66916 10.1678 8.77515 10.1297 8.85733 10.0609C8.93932 9.99236 8.99182 9.89835 9.00742 9.79711L9.66181 5.59707C9.6618 5.59711 9.66182 5.59703 9.66181 5.59707C9.67118 5.53616 9.66704 5.47383 9.64953 5.41448C9.632 5.35506 9.60139 5.29952 9.55929 5.25187C9.51717 5.20419 9.46451 5.16554 9.40464 5.1391C9.34474 5.11265 9.27938 5.09919 9.21316 5.09993L9.20759 5.09999L6.52366 5.09996C6.24752 5.09996 6.02366 4.8761 6.02366 4.59996V2.7333C6.02366 2.49722 5.92844 2.26915 5.75629 2.09973C5.65606 2.00109 5.53451 1.92711 5.40172 1.88244L3.70433 5.64095V10.1666Z",fill:"currentColor"})}))})),f=n(40243),h=function(e){var t=e.includeCancelInformation,n=e.noMargin,l=i.useContext(s.Z);return(0,u.jsxs)(a.pJ,{noMargin:n,justifyContent:"center",alignItems:"center",children:[(0,u.jsx)(d,{style:{color:l.message.valid}}),(0,u.jsx)(o.Z,{color:"secondary",children:(0,u.jsx)(r.Trans,{id:"Paypal secure"})}),(0,u.jsx)(d,{style:{color:l.message.valid}}),(0,u.jsx)(o.Z,{color:"secondary",children:(0,u.jsx)(r.Trans,{id:"Stripe secure"})}),t&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(p,{style:{color:l.message.valid,width:20,height:20}}),(0,u.jsx)(f.LZ,{}),(0,u.jsx)(o.Z,{color:"secondary",children:(0,u.jsx)(r.Trans,{id:"Cancel anytime"})})]})]})}},27230:function(e,t,n){"use strict";n.d(t,{TT:function(){return E},Zq:function(){return M},GM:function(){return N},AP:function(){return R},tx:function(){return D},Hm:function(){return _},c7:function(){return A},u7:function(){return F},$v:function(){return O},fV:function(){return L}});var r=n(1413),i=n(28381),a=n(36600),o=n(65522),s=n.n(o),l=n(16021),c=n(23818),u=n(31318),d=n(40243),p=n(86278),f=n(15859),h=n(58893),g=n(10158),m=n(29343),x={previewContainer:{display:"flex",justifyContent:"center",alignItems:"center"},cardContainer:{overflow:"hidden",position:"relative",borderRadius:8},titleContainer:{position:"absolute",bottom:0,left:0,right:0,color:"#fff",backgroundColor:"rgb(0,0,0,0.5)",display:"inline-block",textAlign:"center",flexDirection:"column"},title:(0,r.Z)((0,r.Z)({},u.t),{},{overflowWrap:"break-word"})},v=function(e){var t=e.id,n=e.assetShortHeader,i=e.size,a=!e.hideShortDescription&&!!n.shortDescription;return(0,m.jsxs)("div",{id:t,style:(0,r.Z)((0,r.Z)({},x.cardContainer),{},{width:i,height:i}),children:[(0,m.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},x.previewContainer),{},{width:i,height:i}),children:[(0,m.jsx)(h.Z,{}),(0,m.jsx)(g.D,{assetShortHeader:n,maxSize:i,loading:"lazy"})]}),(0,m.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},x.titleContainer),{},{height:a?40:20}),children:[(0,m.jsx)(p.Z,{noMargin:!0,style:x.title,color:"inherit",children:n.name}),a&&(0,m.jsx)(p.Z,{noMargin:!0,style:x.title,size:"body2",color:"inherit",children:n.shortDescription})]})]})},b=n(68262),C=n(10888),j=n(60022),y=n(24910),Z=n(61325),k=n(48784),w=n(86578),T=n(6996),S=n(67980),P=n(92078),I={priceTagContainer:{position:"absolute",top:10,left:10,cursor:"default"},previewImage:{width:"100%",display:"block",objectFit:"contain",borderRadius:8,border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out",position:"relative"},dataLoadingSkeleton:{borderRadius:8,border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9"},thumbnailContainer:{position:"relative",display:"flex",flexDirection:"column"},redeemableContainer:{position:"absolute",bottom:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",padding:"4px 8px",backgroundColor:"#FF8569",color:"#1D1D26"},redeemableDiamondIcon:{height:24},promoImage:{width:"20%",minWidth:200,margin:4},packTitle:(0,r.Z)((0,r.Z)({},u.t),{},{overflowWrap:"break-word"}),folderTitle:{marginLeft:8},folderPaper:{height:55},folderIcon:{width:32,height:32},promoLineContainer:{borderRadius:8,padding:2,flex:1},promoImageContainer:{display:"flex",flex:0,justifyContent:"center"}},E=function(e){var t=e.assetShortHeader,n=e.onOpenDetails,r=e.size,i=e.margin,a=e.hideShortDescription,o=e.disabled;return(0,m.jsx)(l.Z,{style:{margin:i},children:(0,m.jsx)(S.HB,{onClick:o?void 0:n,size:"large",disabled:o,noBorder:!0,children:(0,m.jsx)(v,{id:"asset-card-".concat(t.name.replace(/\s/g,"-")),assetShortHeader:t,size:r,hideShortDescription:a})})})},M=function(e){var t=e.tag,n=e.onSelect,r=e.style,i=e.disabled;return(0,m.jsx)(l.Z,{style:r,children:(0,m.jsx)(S.HB,{onClick:i?void 0:n,size:"large",disabled:i,noBorder:!0,children:(0,m.jsx)(d.sg,{noMargin:!0,id:"asset-folder-".concat(t.replace(/\s/g,"-")),noOverflowParent:!0,children:(0,m.jsxs)(d.x1,{alignItems:"center",children:[(0,m.jsx)(b.Z,{style:I.folderIcon}),(0,m.jsx)(p.Z,{noMargin:!0,style:I.folderTitle,size:"sub-title",children:s()(t)})]})})})})},L=function(e){var t=e.assetPack,n=e.onSelect,o=e.style,s=e.disabled,u=i.useContext(y.Z);return(0,m.jsx)(l.Z,{style:o,children:(0,m.jsx)(S.HB,{onClick:s?void 0:n,size:"large",disabled:s,noBorder:!0,children:(0,m.jsxs)(d.sg,{noMargin:!0,expand:!0,id:"asset-pack-".concat(t.tag.replace(/\s/g,"-")),noOverflowParent:!0,children:[(0,m.jsx)(c.W,{style:(0,r.Z)((0,r.Z)({},I.previewImage),{},{background:u.paper.backgroundColor.light}),src:t.thumbnailUrl,alt:"Preview image of asset pack ".concat(t.name),loading:"lazy"},t.name),(0,m.jsx)(d.sg,{children:(0,m.jsxs)(d.x1,{justifyContent:"space-between",noMargin:!0,children:[(0,m.jsx)(p.Z,{style:I.packTitle,size:"body2",children:t.name}),(0,m.jsxs)(p.Z,{style:I.packTitle,color:"primary",size:"body2",children:[(0,m.jsx)(a.Trans,{id:"{0} Assets",values:{0:t.assetsCount}}),t.userFriendlyPrice?" - "+t.userFriendlyPrice:null]})]})})]})})})},A=function(e){var t=e.assetPackListingData,n=e.onSelect,o=e.style,s=e.owned,u=e.disabled,h=e.discountedPrice,g=i.useContext(y.Z);return(0,m.jsx)(l.Z,{style:o,children:(0,m.jsx)(S.HB,{onClick:u?void 0:n,size:"large",disabled:u,noBorder:!0,children:(0,m.jsxs)(d.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,m.jsxs)("div",{style:I.thumbnailContainer,children:[(0,m.jsx)(c.W,{style:(0,r.Z)((0,r.Z)({},I.previewImage),{},{background:g.paper.backgroundColor.light}),src:t.thumbnailUrls[0],alt:"Preview image of asset pack ".concat(t.name),loading:"lazy"},t.name),t.redeemConditions&&!s&&(0,m.jsxs)("div",{style:I.redeemableContainer,children:[(0,m.jsx)("img",{src:"res/small-diamond.svg",style:I.redeemableDiamondIcon,alt:"diamond"}),(0,m.jsx)(p.Z,{color:"inherit",noMargin:!0,children:(0,m.jsx)(a.Trans,{id:"Claim this pack"})})]})]}),(0,m.jsx)("div",{style:I.priceTagContainer,children:(0,m.jsx)(f.ZP,{productListingData:t,withOverlay:!0,owned:s,discountedPrice:h})}),(0,m.jsx)(d.sg,{children:(0,m.jsxs)(d.x1,{justifyContent:"space-between",noMargin:!0,children:[(0,m.jsx)(p.Z,{style:I.packTitle,size:"body2",children:t.name}),(0,m.jsx)(p.Z,{style:I.packTitle,color:"primary",size:"body2",children:t.description})]})})]})})})},O=function(e){var t=e.bundleProductListingData,n=e.includedProductListingData,o=e.onSelect,s=e.owned,l=i.useContext(y.Z);return(0,m.jsx)(a.I18n,{children:function(e){var i=e.i18n;return(0,m.jsx)(d.x1,{expand:!0,children:(0,m.jsx)("div",{style:(0,r.Z)((0,r.Z)({},I.promoLineContainer),{},{border:"2px solid ".concat(l.palette.secondary)}),children:(0,m.jsxs)(Z.ep,{expand:!0,noMargin:!0,noResponsiveLandscape:!0,children:[(0,m.jsx)("div",{style:I.promoImageContainer,children:(0,m.jsx)(c.W,{style:(0,r.Z)((0,r.Z)({},I.previewImage),I.promoImage),src:t.thumbnailUrls[0],alt:"Preview image of bundle ".concat(t.name),loading:"lazy"},t.name)}),(0,m.jsxs)(d.sg,{expand:!0,alignItems:"flex-start",justifyContent:"center",children:[(0,m.jsx)(p.Z,{color:"primary",size:"section-title",children:s?(0,m.jsx)(a.Trans,{id:"You already own {0}!",values:{0:t.name}}):(0,m.jsx)(a.Trans,{id:"Get {0}!",values:{0:t.name}})}),(0,m.jsx)(p.Z,{color:"primary",size:"body2",children:s?(0,m.jsx)(a.Trans,{id:"{0} is included in the bundle {1}.",values:{0:n.name,1:t.name}}):(0,m.jsx)(a.Trans,{id:"{0} is included in this bundle for {1} !",values:{0:n.name,1:(0,f.e3)({i18n:i,productListingData:t,plainText:!0})}})})]}),(0,m.jsx)(d.sg,{justifyContent:"center",children:(0,m.jsx)(d.x1,{justifyContent:"center",children:s?(0,m.jsx)(j.Z,{label:(0,m.jsx)(a.Trans,{id:"See this bundle"}),onClick:o,primary:!0}):(0,m.jsx)(C.Z,{label:(0,m.jsx)(a.Trans,{id:"See this bundle"}),onClick:o,primary:!0})})})]})})})}})},R=function(e){var t=e.id,n=e.title,a=e.imageSource,o=e.imageAlt,s=e.onSelect,u=e.style,f=e.disabled,h=i.useContext(y.Z);return(0,m.jsx)(l.Z,{style:u,children:(0,m.jsx)(S.HB,{onClick:f?void 0:s,size:"large",disabled:f,noBorder:!0,children:(0,m.jsxs)(d.sg,{noMargin:!0,alignItems:"center",expand:!0,id:t,noOverflowParent:!0,children:[(0,m.jsx)(c.W,{style:(0,r.Z)((0,r.Z)({},I.previewImage),{},{background:h.palette.primary}),src:a,alt:o}),(0,m.jsx)(d.sg,{children:(0,m.jsx)(d.x1,{justifyContent:"center",noMargin:!0,children:(0,m.jsx)(p.Z,{style:I.packTitle,size:"sub-title",children:n})})})]})})})},F=function(e){var t=e.privateGameTemplateListingData,n=e.onSelect,a=e.style,o=e.owned,s=e.disabled,u=e.discountedPrice,h=(0,T.UQ)().isMobile,g=i.useContext(y.Z);return(0,m.jsx)(l.Z,{style:a,children:(0,m.jsx)(S.HB,{onClick:s?void 0:n,size:"large",disabled:s,noBorder:!0,children:(0,m.jsxs)(d.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,m.jsx)(c.W,{style:(0,r.Z)((0,r.Z)({},I.previewImage),{},{background:g.paper.backgroundColor.light}),src:t.thumbnailUrls[0],alt:"Preview image of game template ".concat(t.name),loading:"lazy"},t.name),(0,m.jsx)("div",{style:I.priceTagContainer,children:(0,m.jsx)(f.ZP,{productListingData:t,withOverlay:!0,owned:o,discountedPrice:u})}),(0,m.jsxs)(d.sg,{children:[h&&(0,m.jsx)(d.LZ,{}),(0,m.jsx)(d.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,m.jsx)(p.Z,{style:I.packTitle,size:"body2",noMargin:h,children:t.name})})]})]})})})},D=function(e){var t=e.courseListingData,n=e.onSelect,a=e.style,o=e.owned,s=e.disabled,u=e.discountedPrice,h=(0,T.UQ)().isMobile,g=i.useContext(y.Z);return(0,m.jsx)(l.Z,{style:a,children:(0,m.jsx)(S.HB,{onClick:s?void 0:n,size:"large",disabled:s,noBorder:!0,children:(0,m.jsxs)(d.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,m.jsx)(c.W,{style:(0,r.Z)((0,r.Z)({},I.previewImage),{},{background:g.paper.backgroundColor.light}),src:t.thumbnailUrls[0],alt:"Preview image of course ".concat(t.name),loading:"lazy"},t.name),(0,m.jsx)("div",{style:I.priceTagContainer,children:(0,m.jsx)(f.ZP,{productListingData:t,withOverlay:!0,owned:o,discountedPrice:u})}),(0,m.jsxs)(d.sg,{children:[h&&(0,m.jsx)(d.LZ,{}),(0,m.jsx)(d.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,m.jsx)(p.Z,{style:I.packTitle,size:"body2",noMargin:h,children:t.name})})]})]})})})},N=function(e){var t=e.bundleListingData,n=e.onSelect,o=e.style,s=e.owned,u=e.disabled,h=e.discountedPrice,g=(0,T.UQ)().isMobile,x=i.useContext(y.Z);return(0,m.jsx)(a.I18n,{children:function(e){var i=e.i18n;return(0,m.jsx)(l.Z,{style:o,children:(0,m.jsx)(S.HB,{onClick:u?void 0:n,size:"large",disabled:u,noBorder:!0,children:(0,m.jsxs)(d.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,m.jsx)(c.W,{style:(0,r.Z)((0,r.Z)({},I.previewImage),{},{background:x.paper.backgroundColor.light}),src:t.thumbnailUrls[0],alt:"Preview image of bundle ".concat(t.name),loading:"lazy"},t.name),(0,m.jsx)("div",{style:I.priceTagContainer,children:t?(0,m.jsx)(f.ZP,{productListingData:t,withOverlay:!0,owned:s,discountedPrice:h}):(0,m.jsx)(f.JP,{})}),(0,m.jsxs)(d.sg,{children:[g&&(0,m.jsx)(d.LZ,{}),(0,m.jsx)(d.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,m.jsx)(p.Z,{style:I.packTitle,size:"body2",noMargin:g,children:t.nameByLocale?(0,P.a)(i,t.nameByLocale):t.name})})]})]})})})}})},_=function(e){var t=e.exampleShortHeader,n=e.onSelect,a=e.style,o=e.customTitle,s=e.centerTitle,u=e.useQuickCustomizationThumbnail,f=e.disabled,h=(0,T.UQ)().isMobile,g=i.useContext(y.Z),x=i.useMemo((function(){if(!t)return"";var e=t.previewImageUrls[0]||"",n=t.quickCustomizationImageUrl;return u&&n?n:e}),[t,u]);return(0,m.jsx)(l.Z,{style:a,children:(0,m.jsx)(S.HB,{onClick:f?void 0:n,size:"large",disabled:f,noBorder:!0,children:(0,m.jsxs)(d.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[t?x?(0,m.jsx)(c.W,{style:(0,r.Z)((0,r.Z)({},I.previewImage),{},{background:g.paper.backgroundColor.light}),src:x,alt:"Preview image of example ".concat(t.name),loading:"lazy"},t.name):(0,m.jsx)(w.Z,{style:(0,r.Z)((0,r.Z)({},I.previewImage),{},{display:"flex"}),children:t.name}):(0,m.jsx)(k.Z,{variant:"rect",width:"100%",height:"100%",style:I.dataLoadingSkeleton}),(0,m.jsxs)(d.sg,{children:[h&&(0,m.jsx)(d.LZ,{}),(0,m.jsx)(d.x1,{justifyContent:s?"center":"flex-start",noMargin:!0,children:(0,m.jsx)(p.Z,{style:I.packTitle,size:"body2",hidden:!t,noMargin:h,children:o||(t?t.name:"Abcdef123")})})]})]})})})}},1637:function(e,t,n){"use strict";n.d(t,{M:function(){return mt}});var r,i=n(74165),a=n(15861),o=n(29439),s=n(28381),l=n(36600),c=n(45047),u=n(82676),d=n(12949),p=n(40243),f=n(2632),h=n(2066),g=n(75333),m=n(84140),x=n(35721),v=n(84090),b=n(6996),C=n(35213),j=n(36607),y=n(4942),Z=n(35038),k=n(86278),w=n(71106),T=n(27230),S=n(68009),P=(n(25625),n(96210)),I=n(30609),E=function(e){var t=e.promotion,n=e.navigateToRoute,r=t.productId;if(r){if("game-template"===t.type)return function(){return n("store",{"game-template":"product-".concat(r)})};if("asset-pack"===t.type)return function(){return n("store",{"asset-pack":"product-".concat(r)})}}var i=t.linkUrl;if(i){var a=function(e){if(e.startsWith("https://editor.gdevelop.io")){var t=new URL(e),n=t.searchParams.get("initial-dialog"),r={};return t.searchParams.forEach((function(e,t){"initial-dialog"!==t&&(r[t]=e)})),n?{route:n,params:r}:null}return null}(i);return a?function(){return n(a.route,a.params)}:function(){return h.ZP.openExternalURL(i)}}},M=n(1413),L=n(20914),A=n(48784),O=n(69186),R=n(67674),F=n(24910),D=n(84900),N=n(65111),_=n(29343),B={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute",borderRadius:4},U=function(e){var t=e.onClick,n=e.position,r=e.classes,i=s.useContext(F.Z);return(0,_.jsx)("div",{className:r.root,style:(0,M.Z)((0,M.Z)((0,M.Z)({},B),{},{backgroundColor:i.paper.backgroundColor.light,width:30,height:30},"left"===n?{left:5}:{right:5}),{},{zIndex:3,top:"calc(50% - ".concat(Math.floor(15),"px)")}),onClick:t,tabIndex:0,onKeyUp:function(e){(0,N.ph)(e)&&(t(),e.stopPropagation())},children:"left"===n?(0,_.jsx)(c.Z,{}):(0,_.jsx)(D.Z,{})})},V=n(51265),H=n(38501),z={itemSkeleton:{borderRadius:6},slidesContainer:{display:"flex",flex:1,position:"relative",overflow:"hidden",width:"100%",borderRadius:6},slideImage:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",borderRadius:6,transition:"opacity 0.5s ease-in-out, transform 0.3s ease-in-out"}},W=function(e){var t=e.items,n=e.itemDesktopRatio,r=e.itemMobileRatio,i=e.additionalMarginForWidthCalculation;(0,V.Z)((0,H.Z)());var a=window.innerWidth,l=(0,O.Z)((function(e){return(0,R.Z)({root:{"&:hover":{filter:"dark"===e.palette.type?"brightness(130%)":"brightness(90%)"},"&:focus":{filter:"dark"===e.palette.type?"brightness(130%)":"brightness(90%)",outline:"none"},transition:"filter 100ms ease"}})}))(),c=(0,b.UQ)(),u=c.isMobile,d=c.isLandscape,f=u&&!d,h="touch"===(0,C.BF)(),g=function(e){var t=e.useMobileImage,n=e.componentWidth,r=e.itemDesktopRatio,i=e.itemMobileRatio,a=n-2*p.XW;return t?a/i:a/r}({useMobileImage:f,componentWidth:a-(i||0),itemDesktopRatio:n,itemMobileRatio:r}),m=(0,O.Z)((function(e){return(0,R.Z)({root:{"&:hover img":{transform:"scale(1.02)"},"&:focus":{outline:"none"},"&:focus img":{transform:"scale(1.02)",outline:"none"}}})}))(),x=s.useState(!1),v=(0,o.Z)(x,2),j=v[0],y=v[1],Z=s.useRef(null),k=s.useRef(null),w=s.useState(0),T=(0,o.Z)(w,2),S=T[0],P=T[1],I=s.useCallback((function(){t&&1!==t.length&&(k.current&&(clearTimeout(k.current),k.current=null),P(0===S?t.length-1:S-1))}),[t,S]),E=s.useCallback((function(){t&&1!==t.length&&(k.current&&(clearTimeout(k.current),k.current=null),P(S===t.length-1?0:S+1))}),[t,S]);s.useEffect((function(){return k.current=setTimeout((function(){E()}),5e3),function(){clearTimeout(k.current),k.current=null}}),[E]);var F=s.useCallback((function(){Z.current&&(clearTimeout(Z.current),Z.current=null),j||y(!0)}),[j]),D=s.useCallback((function(){j&&!Z.current&&(Z.current=setTimeout((function(){y(!1)}),1e3))}),[j]);if(!t)return(0,_.jsx)(L.Z,{square:!0,background:"dark",children:(0,_.jsx)(p.x1,{expand:!0,noMargin:!0,children:(0,_.jsx)(p.sg,{expand:!0,noMargin:!0,children:(0,_.jsx)(A.Z,{variant:"rect",height:g,style:z.itemSkeleton})})})});if(!t.length)return null;var B=t.length>1&&(j||u||h);return(0,_.jsx)(L.Z,{square:!0,background:"dark",children:(0,_.jsxs)("div",{style:(0,M.Z)((0,M.Z)({},z.slidesContainer),{},{height:g}),onPointerOver:F,onPointerLeave:D,tabIndex:0,onKeyUp:function(e){if((0,N.ph)(e)){var n=t[S];n&&n.onClick&&n.onClick()}else!function(e){return"ArrowLeft"===e.key}(e)?function(e){return"ArrowRight"===e.key}(e)&&E():I()},onFocus:F,onBlur:D,className:m.root,children:[B&&(0,_.jsx)(U,{onClick:I,position:"left",classes:l}),t.map((function(e,t){return(0,_.jsx)("img",{src:f?e.mobileImageUrl:e.imageUrl,alt:"Slideshow item for ".concat(e.id),style:(0,M.Z)((0,M.Z)({},z.slideImage),{},{aspectRatio:f?r:n},t===S?{opacity:1,zIndex:2}:{opacity:0,zIndex:1}),onClick:e.onClick},e.id)})),B&&(0,_.jsx)(U,{onClick:E,position:"right",classes:l})]})})},G=n(80882),Y=n(86682),q=n(92078),J=function(e){var t=e.type,n=s.useContext(P.i),r=n.promotions,i=n.error,a=s.useContext(I.ZP).navigateToRoute,o=(0,b.UQ)(),c=o.isMobile,u=o.isMediumScreen;return i?null:(0,_.jsx)(l.I18n,{children:function(e){var n=function(e){var n=r&&t?r.filter((function(e){return e.type===t})):r;return n?n.map((function(t){var n=t.imageUrlByLocale?(0,q.a)(e,t.imageUrlByLocale):t.imageUrl,r=t.mobileImageUrlByLocale?(0,q.a)(e,t.mobileImageUrlByLocale):t.mobileImageUrl;return n&&r?{id:t.id,imageUrl:n,mobileImageUrl:r,onClick:E({promotion:t,navigateToRoute:a})}:null})).filter(Boolean):null}(e.i18n);return(0,_.jsx)(W,{items:n,itemDesktopRatio:10.9760348583878,itemMobileRatio:2.5714285714285716,additionalMarginForWidthCalculation:c?0:u?G.$s+2*Y.IP:G.iL+2*Y.IP})}})},X=n(61325),K=n(62463),Q=n(67980),$=n(12123),ee=10,te=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 5;case"xlarge":return 7}},ne=function(e,t){switch(e){case"small":return t?3:2;case"medium":return 3;case"large":return 4;case"xlarge":return 6;default:return 2}},re="game-template",ie=(r={},(0,y.Z)(r,re,{title:(0,_.jsx)(l.Trans,{id:"Ready-made games"}),imageAlt:"Premium game templates category",imageSource:"res/shop-categories/Game_Templates.jpeg"}),(0,y.Z)(r,"full-game-pack",{title:(0,_.jsx)(l.Trans,{id:"Full Game Asset Packs"}),imageAlt:"Full game asset packs category",imageSource:"res/shop-categories/Full_game_pack.jpeg"}),(0,y.Z)(r,"character",{title:(0,_.jsx)(l.Trans,{id:"Characters"}),imageAlt:"Characters asset packs category",imageSource:"res/shop-categories/Characters.jpeg"}),(0,y.Z)(r,"props",{title:(0,_.jsx)(l.Trans,{id:"Props"}),imageAlt:"Props asset packs category",imageSource:"res/shop-categories/Props.jpeg"}),(0,y.Z)(r,"background",{title:(0,_.jsx)(l.Trans,{id:"Backgrounds"}),imageAlt:"Backgrounds asset packs category",imageSource:"res/shop-categories/Backgrounds.jpeg"}),(0,y.Z)(r,"visual-effect",{title:(0,_.jsx)(l.Trans,{id:"Visual Effects"}),imageAlt:"Visual effects asset packs category",imageSource:"res/shop-categories/Visual_Effects.jpeg"}),(0,y.Z)(r,"interface",{title:(0,_.jsx)(l.Trans,{id:"UI/Interface"}),imageAlt:"User Interface asset packs category",imageSource:"res/shop-categories/Interface.jpeg"}),(0,y.Z)(r,"prefab",{title:(0,_.jsx)(l.Trans,{id:"Prefabs (Ready-to-use Objects)"}),imageAlt:"Prefabs asset packs category",imageSource:"res/shop-categories/Prefabs.jpeg"}),(0,y.Z)(r,"sounds",{title:(0,_.jsx)(l.Trans,{id:"Sounds and musics"}),imageAlt:"Sounds and musics asset packs category",imageSource:"res/shop-categories/Sounds.jpeg"}),r),ae=ne("xlarge",!0),oe={scrollview:{overflowX:"hidden"},grid:{maxWidth:(Q.LF+10)*ae,width:"calc(100% + ".concat(ee,"px)"),overflow:"unset"}},se=s.forwardRef((function(e,t){var n=e.publicAssetPacks.starterPacks,r=e.privateAssetPackListingDatas,i=e.privateGameTemplateListingDatas,a=e.bundleListingDatas,c=e.onPublicAssetPackSelection,u=e.onPrivateAssetPackSelection,d=e.onPrivateGameTemplateSelection,h=e.onBundleSelection,g=e.onCategorySelection,m=e.openedShopCategory,x=e.onlyShowAssets,v=e.displayPromotions,C=e.onOpenProfile,j=(0,b.UQ)(),y=j.windowSize,P=j.isLandscape,I=s.useContext(w.ZP),E=I.receivedAssetPacks,M=I.receivedGameTemplates,L=I.receivedBundles,A=I.badges,O=I.achievements,R=s.useRef(null);s.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=R.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=R.current;t&&t.scrollToPosition(e)}}}));var F=s.useMemo((function(){return Object.entries(ie).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1],i=r.title,a=r.imageSource,s=r.imageAlt;return x&&"game-template"===n?null:(0,_.jsx)(T.AP,{id:"asset-pack-category-".concat(n.replace(/\s/g,"-")),imageSource:a,imageAlt:s,title:i,onSelect:function(){g(n)}},n)}))}),[g,x]),D=m?ie[m].title:null,N=s.useMemo((function(){return(0,$.Cn)({publicAssetPacks:n,onPublicAssetPackSelection:c,openedShopCategory:m})}),[n,c,m]),B=s.useMemo((function(){return(0,$.pz)({allPrivateAssetPackListingDatas:r,displayedPrivateAssetPackListingDatas:r,onPrivateAssetPackSelection:u,publicAssetPackTiles:N,receivedAssetPacks:E,openedShopCategory:m})}),[r,m,u,N,E]),U=B.allAssetPackStandAloneTiles,V=B.allAssetPackBundleTiles,H=s.useMemo((function(){return(0,$.gf)({allBundleListingDatas:a,displayedBundleListingDatas:a,onBundleSelection:h,receivedBundles:L,openedShopCategory:m})}),[a,m,h,L]),z=s.useMemo((function(){return(0,$.Ht)({allPrivateGameTemplateListingDatas:i,displayedPrivateGameTemplateListingDatas:i,onPrivateGameTemplateSelection:d,receivedGameTemplates:M,openedShopCategory:m})}),[i,m,d,M]),W=function(e){var t=e.list,n=e.numberPerPage,r=s.useState(1),i=(0,o.Z)(r,2),a=i[0],l=i[1],c=(0,S.N)((function(){l(a+1)}),20);return{displayedList:t.slice(0,a*n),onShowMore:c}}({list:U,numberPerPage:25}),G=W.displayedList,Y=W.onShowMore;return(0,_.jsxs)(f.Z,{ref:R,style:oe.scrollview,id:"asset-store-home",data:{isFiltered:m?"true":"false"},onScroll:function(e){e.remainingScreensToBottom<=1.5&&Y()},children:[m?null:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.sg,{noMargin:!0,children:(0,_.jsx)(p.x1,{children:(0,_.jsx)(k.Z,{size:"block-title",children:(0,_.jsx)(l.Trans,{id:"Explore by category"})})})}),(0,_.jsx)(Z.Z,{cols:te(y,P),style:oe.grid,cellHeight:"auto",spacing:ee,children:F})]}),v&&!m?(0,_.jsxs)(X.ak,{noMargin:!0,children:[(0,_.jsx)(k.Z,{size:"block-title",children:(0,_.jsx)(l.Trans,{id:"Promotions + Earn credits"})}),(0,_.jsx)(J,{}),C&&(0,_.jsx)(K.Z,{achievements:O,badges:A,onOpenProfile:C})]}):null,H.length&&!x?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.sg,{noMargin:!0,children:(0,_.jsx)(p.x1,{children:(0,_.jsx)(k.Z,{size:"block-title",children:(0,_.jsx)(l.Trans,{id:"GDevelop Bundles"})})})}),(0,_.jsx)(Z.Z,{cols:ne(y,P),style:oe.grid,cellHeight:"auto",spacing:ee,children:H})]}):null,V.length?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.sg,{noMargin:!0,children:(0,_.jsx)(p.x1,{children:(0,_.jsx)(k.Z,{size:"block-title",children:(0,_.jsx)(l.Trans,{id:"Asset pack bundles"})})})}),(0,_.jsx)(Z.Z,{cols:ne(y,P),style:oe.grid,cellHeight:"auto",spacing:ee,children:V})]}):null,D&&(0,_.jsx)(p.sg,{noMargin:!0,children:(0,_.jsx)(p.x1,{children:(0,_.jsx)(k.Z,{size:"block-title",children:D})})}),!x&&(0,_.jsxs)(_.Fragment,{children:[!D&&(0,_.jsx)(p.sg,{noMargin:!0,children:(0,_.jsx)(p.x1,{children:(0,_.jsx)(k.Z,{size:"block-title",children:(0,_.jsx)(l.Trans,{id:"All game templates"})})})}),(0,_.jsx)(Z.Z,{cols:ne(y,P),style:oe.grid,cellHeight:"auto",spacing:ee,children:z})]}),!D&&(0,_.jsx)(p.sg,{noMargin:!0,children:(0,_.jsx)(p.x1,{children:(0,_.jsx)(k.Z,{size:"block-title",children:(0,_.jsx)(l.Trans,{id:"All asset packs"})})})}),(0,_.jsx)(Z.Z,{cols:ne(y,P),style:oe.grid,cellHeight:"auto",spacing:ee,children:G})]})})),le=n(42699),ce=n(51598),ue=n(8511),de=n(78081),pe=n(75383),fe=n(81683),he=n(90242),ge=n(35924),me=n(36173),xe=n(39818),ve=n(86578),be=n(96591),Ce=n(24347),je=n(32832),ye=n(41418),Ze=n(61062),ke=n(56809),we=n(10158),Te=n(73412),Se={previewBackground:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",padding:10,width:300,height:250},chip:{marginBottom:2,marginRight:2},arrowContainer:{padding:6}},Pe=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Ie=s.forwardRef((function(e,t){var n=e.onTagSelection,r=e.assetShortHeader,c=e.onOpenDetails,u=e.onAssetLoaded,d=e.onPrivateAssetPackSelection,g=e.onPrivateGameTemplateSelection,x=s.useContext(v.KY),b=x.authors,C=x.licenses,j=x.environment,y=x.error,Z=x.useSearchItem,w=s.useState(null),T=(0,o.Z)(w,2),S=T[0],P=T[1],I=s.useState(null),E=(0,o.Z)(I,2),M=E[0],O=E[1],R=s.useState(null),F=(0,o.Z)(R,2),D=F[0],N=F[1],B=(0,m.kt)(r),U=s.useContext(Ce.Z).fetchPrivateAsset,V=s.useState([]),H=(0,o.Z)(V,2),z=H[0],W=H[1],G=s.useContext(Te.Z).openUserPublicProfile,Y=s.useRef(null);s.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=Y.current;return e?e.getScrollPosition():0},scrollToPosition:function(e){var t=Y.current;t&&t.scrollToPosition(e)}}}));var q=s.useCallback((function(){(0,a.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,P(null),!B){e.next=8;break}return e.next=5,U(r,{environment:j});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,(0,m.WY)(r,{environment:j});case 10:e.t0=e.sent;case 11:if(t=e.t0){e.next=15;break}throw console.error("Cannot load private asset"),new Error("Cannot load private asset");case 15:P(t),"sprite"===t.objectType&&(n=t.objectAssets[0].object.animations[0].name,O(n)),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(0),console.error("Error while loading asset:",e.t1),N(e.t1);case 23:u&&u();case 24:case"end":return e.stop()}}),e,null,[[0,19]])})))()}),[u,B,U,r,j]),J=s.useMemo((function(){return!(0,m.V0)(r)}),[r]);s.useEffect((function(){S&&S.id===r.id||q()}),[S,q,r]);var K=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==(t=S&&S.authorIds||[]).length){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,ye.TL)(t);case 6:n=e.sent,r=Object.keys(n).map((function(e){return n[e]})),W(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error while loading author public profiles:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[S]);s.useEffect((function(){K()}),[K]);var Q=S&&b?S.authors.map((function(e){return b.find((function(t){return t.name===e}))})).filter(Boolean):[],$=!S||S.authors.length>0&&!b||S.authorIds&&z.length>0&&0===z.length,ee=S&&C?C.find((function(e){return e.name===S.license})):null,te=S&&S.objectAssets[0]?function(e){var t={};return e.resources.forEach((function(e){t[e.name]=e})),t}(S.objectAssets[0]):{},ne=S?S.objectAssets[0].object.animations:null,re=ne?ne.find((function(e){return e.name===M})):null,ie=re?re.directions[0]:null,ae=S&&ie?ie.sprites.map((function(e){return te[e.image]})):null,oe=Z("",null,null,s.useMemo((function(){return[new xe.cx(r)]}),[r])),se=oe&&oe.slice(0,60);return(0,_.jsx)(f.Z,{ref:Y,children:(0,_.jsxs)(p.sg,{expand:!0,noMargin:!0,children:[(0,_.jsx)(p.x1,{justifyContent:"space-between",noMargin:!0,children:(0,_.jsx)(p.sg,{children:(0,_.jsxs)(X.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,_.jsx)(k.Z,{size:"block-title",displayInlineAsSpan:!0,children:r.name}),(0,_.jsxs)(X.pJ,{noMargin:!0,alignItems:"center",children:[(0,_.jsx)(k.Z,{size:"body",children:(0,_.jsx)(l.Trans,{id:"by"})}),$&&(0,_.jsx)(A.Z,{variant:"rect",height:18,width:100}),!!Q&&Q.map((function(e){return(0,_.jsx)(k.Z,{size:"body",children:(0,_.jsx)(be.Z,{href:e.website,onClick:function(){return h.ZP.openExternalURL(e.website)},children:e.name},e.name)},e.name)})),!!z.length&&z.map((function(e){var t=e.username||"GDevelop user";return(0,_.jsx)(k.Z,{size:"body",children:(0,_.jsx)(be.Z,{href:"#",onClick:function(){return G({userId:e.id,callbacks:{onAssetPackOpen:d,onGameTemplateOpen:g}})},children:t},e.id)},e.id)}))]})]})})}),(0,_.jsxs)(X.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,_.jsxs)(p.sg,{alignItems:"center",justifyContent:"center",children:["sprite"!==r.objectType?(0,_.jsx)("div",{style:Se.previewBackground,children:(0,_.jsx)(we.D,{assetShortHeader:r})}):S?(0,_.jsx)("div",{style:Se.previewBackground,children:"sprite"===S.objectType&&ae&&"string"===typeof M&&ie&&(0,_.jsx)(ge.Z,{animationName:M,resourceNames:ae.map((function(e){return e.name})),getImageResourceSource:function(e){var t=te[e];return t?t.file:""},isImageResourceSmooth:function(){return J},timeBetweenFrames:ie.timeBetweenFrames,isLooping:!0,hideCheckeredBackground:!0,deactivateControls:!0,displaySpacedView:!0,fixedHeight:250,fixedWidth:300,isAssetPrivate:B})}):(0,_.jsx)("div",{style:Se.previewBackground,children:(0,_.jsx)(de.Z,{})}),ne&&ne.length>1&&"string"===typeof M&&(0,_.jsx)(L.Z,{elevation:4,variant:"outlined",background:"dark",children:(0,_.jsxs)(p.x1,{justifyContent:"center",alignItems:"center",noMargin:!0,children:[(0,_.jsx)("div",{style:Se.arrowContainer,children:(0,_.jsx)(ce.Z,{size:"small",onClick:function(){var e=ne.findIndex((function(e){return e.name===M})),t=0===e?ne.length-1:e-1;O(ne[t].name)},children:(0,_.jsx)(ke.Z,{})})}),(0,_.jsx)(fe.Z,{value:M,onChange:function(e,t,n){O(n)},fullWidth:!0,textAlign:"center",disableUnderline:!0,children:ne.map((function(e){var t=!e.name;return(0,_.jsx)(he.Z,{value:e.name,label:t?{id:"Default"}:Pe(e.name),shouldNotTranslate:!t},e.name)}))}),(0,_.jsx)("div",{style:Se.arrowContainer,children:(0,_.jsx)(ce.Z,{size:"small",onClick:function(){var e=ne.findIndex((function(e){return e.name===M})),t=e===ne.length-1?0:e+1;O(ne[t].name)},children:(0,_.jsx)(Ze.Z,{})})})]})})]}),(0,_.jsx)(p.sg,{expand:!0,children:D?(0,_.jsx)(pe.Z,{onRetry:q,children:(0,_.jsx)(l.Trans,{id:"Error while loading the asset. Verify your internet connection or try again later."})}):(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)(k.Z,{size:"body",children:(0,_.jsx)(l.Trans,{id:"Type of License: {0}",values:{0:ee?(0,_.jsx)(be.Z,{href:ee.website,onClick:function(){return h.ZP.openExternalURL(ee.website)},children:ee.name}):"-"}})}),(0,_.jsx)(k.Z,{size:"body",displayInlineAsSpan:!0,hidden:!S,children:(0,_.jsx)(je.r,{source:S?S.description:r.shortDescription,allowParagraphs:!0})}),(0,_.jsx)(p.x1,{alignItems:"center",children:(0,_.jsxs)("div",{style:{flexWrap:"wrap"},children:[r.tags.slice(0,5).map((function(e,t){return(0,_.jsxs)(s.Fragment,{children:[0!==t&&(0,_.jsx)(p.LZ,{}),(0,_.jsx)(ue.Z,{size:"small",style:Se.chip,label:Pe(e),onClick:function(){n(e)}})]},e)})),r.tags.length>5&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.LZ,{}),(0,_.jsx)(ue.Z,{size:"small",style:Se.chip,label:(0,_.jsx)(l.Trans,{id:"+ {0} tag(s)",values:{0:r.tags.length-5}})})]})]})})]})})]}),(0,_.jsxs)(p.sg,{expand:!0,children:[(0,_.jsx)(p.LZ,{}),(0,_.jsx)(p.x1,{noMargin:!0,children:(0,_.jsx)(k.Z,{size:"block-title",displayInlineAsSpan:!0,children:(0,_.jsx)(l.Trans,{id:"You might like"})})}),(0,_.jsx)(p.x1,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,_.jsx)(me.Z,{assetShortHeaders:se,onOpenDetails:function(e){P(null),c(e)},noScroll:!0,noResultsPlaceHolder:(0,_.jsx)(p.x1,{alignItems:"flex-start",children:(0,_.jsx)(ve.Z,{children:(0,_.jsx)(l.Trans,{id:"No similar asset was found."})})}),error:y})})]})]})})})),Ee=n(63843),Me=n(93433),Le=n(36465),Ae=n(38092),Oe=n(22726),Re=n(51137),Fe=n(91),De=n(41908),Ne=n(62903),_e=n(40480),Be=n(9734),Ue=n(14932),Ve=n(46538),He=n(56885),ze=n(65056),We=n(23883),Ge=n(60022),Ye=n(1773),qe=n(54458),Je=n(21676),Xe=n(66789),Ke=n(1589),Qe=n(30268),$e=n(10888),et=function(e){var t=e.privateAssetPackListingData,n=e.usageType,r=e.onClose,c=e.simulateAppStoreProduct,u=s.useContext(w.ZP),d=u.profile,f=u.onOpenLoginDialog,g=u.onOpenCreateAccountDialog,m=u.receivedAssetPacks,x=u.onPurchaseSuccessful,v=u.onRefreshAssetPackPurchases,b=u.assetPackPurchases,C=s.useState(!1),j=(0,o.Z)(C,2),y=j[0],Z=j[1],T=s.useState(!m),S=(0,o.Z)(T,2),P=S[0],I=S[1],E=s.useState(!1),L=(0,o.Z)(E,2),A=L[0],O=L[1],R=s.useState(!1),F=(0,o.Z)(R,2),D=F[0],N=F[1],B=s.useState(""),U=(0,o.Z)(B,2),V=U[0],H=U[1],z=(0,ze.Z)().showAlert,W=(0,Re.PN)()||c,G=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:if(N(!1),!W){e.next=12;break}return e.prev=4,Z(!0),e.next=8,(0,Re.ZA)(t.appStoreProductId);case 8:return e.prev=8,Z(!1),e.finish(8);case 11:return e.abrupt("return");case 12:if(r=t.prices.find((function(e){return e.usageType===n}))){e.next=18;break}return console.error("Unable to find the price for the usage type",n),e.next=17,z({title:{id:"An error happened"},message:{id:"Unable to find the price for this asset pack. Please try again later."}});case 17:return e.abrupt("return");case 18:e.prev=18,Z(!0),a=(0,Le.RB)((0,M.Z)({productId:t.id,priceName:r.name,userId:d.id,userEmail:d.email},V?{password:V}:void 0)),h.ZP.openExternalURL(a),e.next=36;break;case 24:if(e.prev=24,e.t0=e.catch(18),!(o=(0,Fe.T)(e.t0))||403!==o.status||"auth/wrong-password"!==o.code){e.next=32;break}return e.next=30,z({title:{id:"Operation not allowed"},message:{id:"The password you entered is incorrect. Please try again."}});case 30:e.next=35;break;case 32:return console.error("Unable to get the checkout URL",e.t0),e.next=35,z({title:{id:"An error happened"},message:{id:"Unable to get the checkout URL. Please try again later."}});case 35:Z(!1);case 36:return e.prev=36,H(""),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[4,,8,11],[18,24,36,39]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){h.ZP.isDev()?N(!0):G()};s.useEffect((function(){Y()}),[]),s.useEffect((function(){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y&&b&&b.find((function(e){return e.productId===t.id})))){e.next=3;break}return e.next=3,x();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[y,b,t,x,v]),(0,Je.Y)((function(){v()}),y?3900:null),s.useEffect((function(){var e;return(0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m&&(e=setTimeout((function(){return I(!1)}),3e3));case 1:case"end":return t.stop()}}),t)})))(),function(){clearTimeout(e)}}),[m]),s.useEffect((function(){m&&(m.find((function(e){return e.id===t.id}))&&(y?(Z(!1),O(!0)):A||r()))}),[m,t,y,r,P,A]);var q=d?A?{subtitle:(0,_.jsx)(l.Trans,{id:"Your purchase has been processed!"}),content:(0,_.jsx)(p.x1,{justifyContent:"center",alignItems:"center",children:(0,_.jsx)(k.Z,{children:(0,_.jsx)(l.Trans,{id:"You can now go back to the asset store to use the assets in your games."})})})}:y?{subtitle:W?(0,_.jsx)(l.Trans,{id:"Complete your purchase with the app store."}):(0,_.jsx)(l.Trans,{id:"Complete your payment on the web browser"}),content:W?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(X.ak,{justifyContent:"center",alignItems:"center",children:[(0,_.jsx)(Xe.Z,{size:40}),(0,_.jsx)(k.Z,{children:(0,_.jsx)(l.Trans,{id:"The purchase will be linked to your account once done."})})]})}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(p.x1,{justifyContent:"center",alignItems:"center",children:[(0,_.jsx)(Xe.Z,{size:20}),(0,_.jsx)(p.LZ,{}),(0,_.jsx)(k.Z,{children:(0,_.jsx)(l.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,_.jsx)(p.LZ,{}),(0,_.jsx)(p.x1,{justifyContent:"center",children:(0,_.jsx)(Ke.Z,{children:(0,_.jsx)(l.Trans,{id:"Once you're done, come back to GDevelop and the assets will be added to your account automatically."})})})]})}:P?{subtitle:(0,_.jsx)(l.Trans,{id:"Loading your profile..."}),content:(0,_.jsx)(p.x1,{justifyContent:"center",alignItems:"center",children:(0,_.jsx)(Xe.Z,{size:20})})}:{subtitle:(0,_.jsx)(l.Trans,{id:"The asset pack {0} will be linked to your account {1}.",values:{0:t.name,1:d.email}}),content:W?null:(0,_.jsx)(p.x1,{justifyContent:"center",alignItems:"center",children:(0,_.jsx)(k.Z,{children:(0,_.jsx)(l.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,_.jsx)(l.Trans,{id:"Log-in to purchase this item"}),content:(0,_.jsx)(qe.Z,{onOpenLoginDialog:f,onOpenCreateAccountDialog:g,message:(0,_.jsx)(l.Trans,{id:"Asset packs will be linked to your user account and available for all your projects. Log-in or sign-up to purchase this pack (or restore your existing purchase)."}),justifyContent:"center"})},J=d&&!y&&!A&&!P,K=[(0,_.jsx)($e.Z,{label:A?(0,_.jsx)(l.Trans,{id:"Close"}):(0,_.jsx)(l.Trans,{id:"Cancel"}),onClick:r},"cancel"),J?(0,_.jsx)(Ye.vF,{primary:!0,label:(0,_.jsx)(l.Trans,{id:"Continue"}),onClick:Y},"continue"):null];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(Ye.ZP,{title:(0,_.jsx)(l.Trans,{id:"{0}",values:{0:t.name}}),maxWidth:"sm",open:!0,onRequestClose:r,actions:K,onApply:A?r:Y,cannotBeDismissed:!0,flexColumnBody:!0,fullscreen:"never-even-on-mobile",children:[(0,_.jsxs)(X.pJ,{justifyContent:"center",alignItems:"center",children:[A&&(0,_.jsx)(Qe.Z,{}),(0,_.jsx)(k.Z,{size:"sub-title",children:q.subtitle})]}),q.content]}),D&&(0,_.jsx)(We.Z,{onApply:G,onClose:function(){return N(!1)},passwordValue:V,setPasswordValue:H})]})},tt=n(49807),nt=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},rt=["sprite","9patch","tiled","Scene3D::Model3DObject","TileMap::SimpleTileMap","ParticleSystem::ParticleEmitter","font","bitmapFont","audio"],it={sprite:{id:"sprites"},"9patch":{id:"panel sprites"},tiled:{id:"tiled sprites"},"Scene3D::Model3DObject":{id:"3D models"},"TileMap::SimpleTileMap":{id:"tile maps"},"ParticleSystem::ParticleEmitter":{id:"particle emitters"},font:{id:"fonts"},bitmapFont:{id:"bitmap fonts"},audio:{id:"audios"}},at=nt("xlarge",!0),ot={disabledText:{opacity:.6},scrollview:{overflowX:"hidden"},grid:{maxWidth:(Q.LF+10)*at,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")},leftColumnContainer:{flex:3,minWidth:0},rightColumnContainer:{flex:2},leftColumnContainerMobile:{flex:1,minWidth:0},rightColumnContainerMobile:{flex:1},avatar:{width:20,height:20},ownedTag:{padding:"4px 8px",borderRadius:4,color:"black"},redeemConditionsContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",backgroundColor:"#FF8569",color:"#1D1D26"},redeemDiamondIcon:{height:24}},st=function(e){var t=e.privateAssetPackListingData,n=e.privateAssetPackListingDatasFromSameCreator,r=e.onAssetPackOpen,c=e.onGameTemplateOpen,u=e.onBundleOpen,d=e.simulateAppStoreProduct,x=(0,b.UQ)().isMobile,C=t.id,j=t.name,y=t.sellerId,T=s.useContext(v.KY).privateAssetPackListingDatas,S=s.useContext(tt.bQ).bundleListingDatas,P=(0,ze.Z)().showAlert,I=s.useContext(w.ZP),E=I.receivedAssetPacks,L=I.receivedBundles,A=I.profile,O=I.limits,R=I.assetPackPurchases,D=I.bundlePurchases,N=I.getAuthorizationHeader,B=I.onOpenLoginDialog,U=I.subscription,V=I.onPurchaseSuccessful,H=I.onRefreshAssetPackPurchases,z=s.useContext(Ne.q$),W=z.openCreditsPackageDialog,G=z.openCreditsUsageDialog,Y=s.useState(t.prices.length?t.prices[0].usageType:""),q=(0,o.Z)(Y,2),J=q[0],K=q[1],Q=s.useState(null),$=(0,o.Z)(Q,2),ee=$[0],te=$[1],ne=s.useContext(He.J).openSubscriptionDialog,re=s.useState(null),ie=(0,o.Z)(re,2),ae=ie[0],oe=ie[1],se=s.useState(!1),le=(0,o.Z)(se,2),ce=le[0],ue=le[1],pe=s.useState(!1),fe=(0,o.Z)(pe,2),he=fe[0],ge=fe[1],me=s.useContext(Te.Z).openUserPublicProfile,xe=s.useState(null),ve=(0,o.Z)(xe,2),Ce=ve[0],Ze=ve[1],ke=s.useState(null),we=(0,o.Z)(ke,2),Se=we[0],Pe=we[1],Ie=s.useState(""),Ee=(0,o.Z)(Ie,2),Ye=Ee[0],qe=Ee[1],Je=s.useState(null),Xe=(0,o.Z)(Je,2),Ke=Xe[0],Qe=Xe[1],$e=(0,b.UQ)(),at=$e.isLandscape,st=$e.isMediumScreen,lt=$e.windowSize,ct=s.useContext(F.Z),ut=(0,Re.PN)()||d,dt=s.useMemo((function(){return(0,De.aS)({productId:t.id,receivedProducts:[].concat((0,Me.Z)(E||[]),(0,Me.Z)(L||[])),productPurchases:[].concat((0,Me.Z)(R||[]),(0,Me.Z)(D||[])),allProductListingDatas:[].concat((0,Me.Z)(T||[]),(0,Me.Z)(S||[]))})}),[R,D,t,T,S,E,L]),pt=!!dt,ft=s.useMemo((function(){return(0,De.dv)({product:ae,productListingDatas:(0,Me.Z)(T||[]),productListingData:t,receivedProducts:(0,Me.Z)(E||[]),onPrivateAssetPackOpen:function(e){return r(e,{forceProductPage:!0})},onPrivateGameTemplateOpen:c,onBundleOpen:u})}),[ae,T,E,r,c,u,t]),ht=s.useMemo((function(){return(0,De._N)({product:ae,productListingData:t,productListingDatas:[].concat((0,Me.Z)(T||[]),(0,Me.Z)(S||[])),receivedProducts:[].concat((0,Me.Z)(E||[]),(0,Me.Z)(L||[])),onPrivateAssetPackOpen:function(e){return r(e,{forceProductPage:!0})},onPrivateGameTemplateOpen:c,onBundleOpen:u})}),[ae,t,T,S,E,L,r,c,u]),gt=s.useMemo((function(){return(0,De.W7)({otherProductListingDatasFromSameCreator:n,currentProductListingData:t,receivedProducts:E,onProductOpen:function(e){return r(e,{forceProductPage:!0})}})}),[t,n,r,E]),mt=function(){h.ZP.isDev()?Pe("redeem"):vt()},xt=function(){h.ZP.isDev()?Pe("credits"):Ct()},vt=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A&&!he){e.next=2;break}return e.abrupt("return");case 2:return ge(!0),e.prev=3,e.next=6,(0,Le.Po)({privateAssetPackListingData:t,getAuthorizationHeader:N,userId:A.id,password:Ye});case 6:return e.next=8,Promise.all([H(),V()]);case 8:case 16:e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(3),!(n=(0,Fe.T)(e.t0))||402!==n.status||"product-redemption/old-redeemed-subscription"!==n.code){e.next=18;break}return e.next=16,P({title:{id:"Error when claiming asset pack"},message:{id:"The monthly free asset pack perk was not part of your plan at the time you got your subscription to GDevelop. To enjoy this perk, please purchase a new subscription."}});case 18:return console.error("An error occurred when claiming the asset pack:",n),e.next=21,P({title:{id:"Error when claiming asset pack"},message:{id:"Something wrong happened when claiming the asset pack. Please check your internet connection or try again later."}});case 21:return e.prev=21,ge(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,10,21,24]])}))),[t,N,A,P,Ye,V,he,H]);s.useEffect((function(){(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue(!0),e.prev=1,e.next=4,Promise.all([(0,m.tL)(C),(0,ye.D1)(y)]);case 4:t=e.sent,n=(0,o.Z)(t,2),r=n[0],a=n[1],oe(r),Ze(a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),(s=(0,Fe.T)(e.t0))&&404===s.status?Qe((0,_.jsx)(l.Trans,{id:"Asset pack not found - An error occurred, please try again later."})):Qe((0,_.jsx)(l.Trans,{id:"An error occurred, please try again later."}));case 16:return e.prev=16,ue(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})))()}),[C,y]);var bt=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae){e.next=2;break}return e.abrupt("return");case 2:if(!pt){e.next=5;break}return r(t),e.abrupt("return");case 5:try{n=t.prices.find((function(e){return e.usageType===J})),(0,g.GU)({assetPackId:ae.id,assetPackName:ae.name,assetPackTag:ae.tag,assetPackKind:"private",usageType:J,priceValue:n&&n.value,priceCurrency:n&&n.currency}),te(t)}catch(i){console.warn("Unable to send event",i)}case 6:case"end":return e.stop()}}),e)}))),[ae,t,pt,r,J]),Ct=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&ae){e.next=2;break}return e.abrupt("return");case 2:if(A&&O){e.next=5;break}return B(),e.abrupt("return");case 5:if(!pt){e.next=8;break}return r(t),e.abrupt("return");case 8:if(n=O.credits.userBalance.amount,a=t.creditPrices.find((function(e){return e.usageType===J}))){e.next=13;break}return console.error("Unable to find the price for the selected usage type",J),e.abrupt("return");case 13:if(o=a.amount,(0,g.GU)({assetPackId:ae.id,assetPackName:ae.name,assetPackTag:ae.tag,assetPackKind:"private",priceValue:o,priceCurrency:"CREDITS",usageType:J}),!(n<o)){e.next=18;break}return W({missingCredits:o-n}),e.abrupt("return");case 18:G({title:(0,_.jsx)(l.Trans,{id:"Purchase {0}",values:{0:ae.name}}),message:(0,_.jsx)(l.Trans,{id:"You are about to use {assetPackCreditsAmount} credits to purchase the asset pack {0}. Continue?",values:{0:ae.name,assetPackCreditsAmount:o}}),onConfirm:function(){return(0,Le.LN)(N,{productId:t.id,usageType:J,userId:A.id,password:Ye})},successMessage:(0,_.jsx)(l.Trans,{id:"\ud83c\udf89 You can now use your assets!"})});case 19:case"end":return e.stop()}}),e)}))),[A,O,t,ae,r,pt,W,J,G,N,B,Ye]),jt=s.useMemo((function(){return(0,De.$z)({product:ae,productListingData:t,shouldSimulateAppStoreProduct:d})}),[ae,t,d]),yt=(0,Le.ID)({subscription:U,privateAssetPackListingData:t,isAlreadyReceived:pt}),Zt=s.useMemo((function(){if(!ae)return 0;var e=0;for(var t in ae.content){var n=ae.content[t];rt.includes(t)||(e+=n)}return e}),[ae]);return(0,_.jsx)(l.I18n,{children:function(e){var n=e.i18n;return(0,_.jsxs)(_.Fragment,{children:[Ke?(0,_.jsx)(p.x1,{alignItems:"center",justifyContent:"center",expand:!0,children:(0,_.jsx)(Ae.Z,{kind:"error",children:Ke})}):ce?(0,_.jsx)(p.sg,{expand:!0,children:(0,_.jsx)(de.Z,{})}):ae&&Ce?(0,_.jsx)(p.sg,{noOverflowParent:!0,expand:!0,noMargin:!0,children:(0,_.jsxs)(f.Z,{autoHideScrollbar:!0,style:ot.scrollview,children:[(0,_.jsxs)(X.ep,{noColumnMargin:!0,noMargin:!0,forceMobileLayout:st,noResponsiveLandscape:!0,children:[(0,_.jsx)("div",{style:x?ot.leftColumnContainerMobile:ot.leftColumnContainer,children:(0,_.jsx)(Oe.Z,{mediaItems:jt,altTextTemplate:"Asset pack ".concat(j," preview image or sound {mediaIndex}"),horizontalOuterMarginToEatOnMobile:8})}),(0,_.jsx)("div",{style:x?ot.rightColumnContainerMobile:ot.rightColumnContainer,children:(0,_.jsxs)(X.ak,{children:[(0,_.jsxs)(X.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,_.jsx)(k.Z,{noMargin:!0,size:"title",children:ae.name}),pt&&(0,_.jsx)("div",{style:(0,M.Z)((0,M.Z)({},ot.ownedTag),{},{backgroundColor:ct.statusIndicator.success}),children:(0,_.jsx)(k.Z,{color:"inherit",noMargin:!0,children:(0,_.jsx)(l.Trans,{id:"OWNED"})})})]}),(0,_.jsxs)(X.pJ,{noMargin:!0,alignItems:"center",children:[(0,_.jsx)(Ve.Z,{src:Ce.iconUrl,style:ot.avatar}),(0,_.jsx)(k.Z,{displayInlineAsSpan:!0,size:"sub-title",children:(0,_.jsx)(be.Z,{onClick:function(){return me({userId:Ce.id,callbacks:{onAssetPackOpen:r,onGameTemplateOpen:c}})},href:"#",children:Ce.username||""})})]}),yt&&(0,_.jsxs)("div",{style:ot.redeemConditionsContainer,children:[(0,_.jsxs)(p.x1,{noMargin:!0,alignItems:"center",children:[(0,_.jsx)("img",{src:"res/small-diamond.svg",style:ot.redeemDiamondIcon,alt:"diamond"}),(0,_.jsx)(k.Z,{color:"inherit",noMargin:!0,children:yt.message})]}),(0,_.jsx)(p.LZ,{}),yt.actionLabel&&(0,_.jsx)("div",{style:{flexShrink:0},children:(0,_.jsx)(Ge.Z,{primary:!0,label:he?(0,_.jsx)(l.Trans,{id:"Please wait"}):yt.actionLabel,disabled:he,onClick:yt.canRedeemAssetPack?mt:function(){return ne({analyticsMetadata:{reason:"Claim asset pack",recommendedPlanId:"gdevelop_gold",placementId:"claim-asset-pack"},filter:"individual"})}})})]}),(0,_.jsxs)(p.x1,{noMargin:!0,children:[(0,_.jsx)(k.Z,{size:"sub-title",children:(0,_.jsx)(l.Trans,{id:"Licensing"})}),(0,_.jsx)(Ue.Z,{size:"small",helpPagePath:"https://gdevelop.io/page/asset-store-license-agreement"})]}),(0,_.jsx)(Be.Z,{value:J,onChange:K,product:t,ownedLicense:dt}),(0,_.jsx)(p.LZ,{}),pt?(0,_.jsx)(De.ai,{productListingData:t,onClick:function(){return r(t)},label:(0,_.jsx)(l.Trans,{id:"Browse assets"})}):(0,_.jsxs)(X.ak,{noMargin:!0,children:[!Ke&&(0,_.jsx)(De.dP,{i18n:n,productListingData:t,selectedUsageType:J,onUsageTypeChange:K,simulateAppStoreProduct:d,isAlreadyReceived:pt,onClickBuy:bt,onClickBuyWithCredits:xt}),!ut&&(0,_.jsx)(_e.Z,{})]})]})})]}),(0,_.jsxs)(p.sg,{noMargin:!0,children:[(0,_.jsx)(k.Z,{size:"body2",displayInlineAsSpan:!0,children:(0,_.jsx)(je.r,{source:ae.longDescription,allowParagraphs:!0})}),(0,_.jsx)(k.Z,{size:"sub-title",children:(0,_.jsx)(l.Trans,{id:"Content"})}),rt.map((function(e){return ae.content[e]?(0,_.jsx)("li",{children:(0,_.jsxs)(k.Z,{displayInlineAsSpan:!0,noMargin:!0,children:[ae.content[e]," ",n._(it[e])]})},e):null})),Zt>0?(0,_.jsx)("li",{children:(0,_.jsx)(k.Z,{displayInlineAsSpan:!0,noMargin:!0,children:(0,_.jsx)(l.Trans,{id:"{smartObjectsCount} smart objects",values:{smartObjectsCount:Zt}})})}):null]}),ht&&ht.length?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(X.ak,{noMargin:!0,children:[(0,_.jsx)(p.hS,{}),ht,(0,_.jsx)(p.hS,{})]})}):null,ft&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.x1,{children:(0,_.jsx)(k.Z,{size:"block-title",children:(0,_.jsx)(l.Trans,{id:"Included in this bundle"})})}),(0,_.jsx)(p.x1,{children:(0,_.jsx)(Z.Z,{cols:nt(lt,at),cellHeight:"auto",spacing:10,style:ot.grid,children:ft})})]}),gt&&gt.length>0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(p.x1,{children:(0,_.jsx)(k.Z,{size:"block-title",children:(0,_.jsx)(l.Trans,{id:"From the same author"})})}),(0,_.jsx)(p.x1,{children:(0,_.jsx)(Z.Z,{cols:nt(lt,at),cellHeight:"auto",spacing:10,style:ot.grid,children:gt})})]})]})}):null,Se&&(0,_.jsx)(We.Z,{onApply:"redeem"===Se?mt:Ct,onClose:function(){return Pe(null)},passwordValue:Ye,setPasswordValue:qe}),!!ee&&(0,_.jsx)(et,{privateAssetPackListingData:ee,usageType:J,onClose:function(){return te(null)}})]})}})},lt=n(1525),ct=n(97228),ut=n(3679),dt=n(27817),pt=n(46308),ft=n(2866),ht=n(58336),gt=n(87779),mt=s.forwardRef((function(e,t){var n=e.onlyShowAssets,r=e.displayPromotions,y=e.onOpenPrivateGameTemplateListingData,Z=e.onOpenProfile,T=e.courses,S=e.onCourseOpen,P=e.getCourseCompletion,I=e.assetSwappedObject,E=e.minimalUI,M=s.useContext(v.KY),L=M.assetShortHeadersSearchResults,A=M.publicAssetPacksSearchResults,O=M.privateAssetPackListingDatasSearchResults,R=M.publicAssetPacks,F=M.privateAssetPackListingDatas,D=M.error,N=M.fetchAssetsAndFilters,B=M.clearAllFilters,U=M.assetFiltersState,V=M.getAssetShortHeaderFromId,H=s.useContext(lt.xP),z=H.searchText,W=H.setSearchText,G=s.useRef(null);s.useEffect((function(){if(I){if(G.current!==I.ptr){H.openAssetSwapping(),W(""),B();var e=V(I.getAssetStoreId());U.setAssetSwappingFilter(new xe.O3(I,e));var t=Ge.current;t&&(t.scrollToPosition(0),t.setPageBreakIndex(0))}G.current=I.ptr}}),[U,I,B,V,W,H]);var Y=s.useContext(ft.mJ),q=Y.privateGameTemplateListingDatas,J=Y.error,K=Y.fetchGameTemplates,Q=Y.shop.privateGameTemplateListingDatasSearchResults,$=s.useContext(tt.bQ),ee=$.bundleListingDatas,te=$.error,ne=$.fetchBundles,ie=$.shop.bundleListingDatasSearchResults,ae=H.getCurrentPage(),oe=ae.openedAssetPack,ue=ae.openedAssetShortHeader,fe=ae.openedShopCategory,he=ae.openedPrivateAssetPackListingData,ge=ae.openedPrivateGameTemplateListingData,ve=ae.openedBundleListingData,be=ae.filtersState,Ce=(0,lt.C$)(ae),je=(0,lt.wA)(ae),ye=s.useRef(null),Ze=(0,C.bX)(),ke=(0,b.UQ)().isMobile,we=s.useState(!1),Te=(0,o.Z)(we,2),Se=Te[0],Pe=Te[1],Me=s.useCallback((function(){ke||Pe(!0)}),[ke]),Le=s.useContext(w.ZP),Oe=Le.receivedAssetPacks,Re=Le.receivedGameTemplates,Fe=s.useRef(!1),De=s.useRef(null!=ue),Ne=s.useCallback((function(e){Fe.current=!1,De.current=null!==e.openedAssetShortHeader}),[]),_e=s.useCallback((function(e){W(e)}),[W]),Be=s.useCallback((function(){N(),K(),ne()}),[N,K,ne]),Ue=D||J||te,Ve=s.useCallback((function(e){var t=e.searchText||"";return z!==t&&(_e(t),!0)}),[z,_e]),He=!ue&&!he&&!ge&&!ve&&!(oe&&oe.content&&(0,m.s0)(oe)),ze=s.useRef(null),We=s.useRef(null),Ge=s.useRef(null),Ye=s.useCallback((function(){return ze.current||We.current||Ge.current}),[]),qe=s.useCallback((function(){var e=Ye();e&&(ae.scrollPosition=e.getScrollPosition())}),[Ye,ae]),Je=s.useCallback((function(e){if(!Fe.current){var t=Ye();if(t){var n=e.scrollPosition;n?t.scrollToPosition(n):t.scrollToPosition(0),Fe.current=!0}}}),[Ye]);s.useLayoutEffect((function(){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ce){e.next=4;break}return B(),e.next=4,Pe(!1);case 4:De.current||Je(ae);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[Ce,Je,ae]),s.useImperativeHandle(t,(function(){return{onClose:qe}}));var Xe=s.useCallback((function(e){var t=oe?oe.name:null,n=oe?oe.tag:null,r=oe&&oe.id?oe.id:null,i=function(e){var t=e.privateAssetPackListingDatas,n=e.publicAssetPacks,r=e.assetPack;return r?r.id&&t&&t.find((function(e){return e.id===r.id}))?"private":n&&n.starterPacks.find((function(e){return e.tag===r.tag}))?"public":"unknown":"unknown"}({assetPack:oe,publicAssetPacks:R,privateAssetPackListingDatas:F});(0,g.In)({id:e.id,name:e.name,assetPackName:t,assetPackTag:n,assetPackId:r,assetPackKind:i}),qe(),H.openAssetDetailPage({assetShortHeader:e,storeSearchText:!0,clearSearchText:!1})}),[oe,R,F,qe,H]),Ke=s.useCallback((function(e){(0,g.BA)({assetPackTag:e.tag,assetPackId:null,assetPackName:e.name,assetPackKind:"public",source:"store-home"}),e.externalWebLink?h.ZP.openExternalURL(e.externalWebLink):(qe(),H.openPackPage({assetPack:e,storeSearchText:!0,clearSearchText:!0}),Me())}),[H,qe,Me]),Qe=s.useCallback((function(e,t){var n=Oe?Oe.find((function(t){return t.id===e.id})):null;if(!n||t&&t.forceProductPage){var r=e.prices.find((function(e){return"default"===e.usageType}));return(0,g.rg)({assetPackName:e.name,assetPackId:e.id,assetPackKind:"private",priceValue:r&&r.value,priceCurrency:r&&r.currency}),qe(),void H.openPrivateAssetPackInformationPage({privateAssetPackListingData:e,storeSearchText:!0,clearSearchText:!0})}(0,g.BA)({assetPackName:e.name,assetPackId:e.id,assetPackTag:null,assetPackKind:"private",source:"store-home"}),qe(),H.openPackPage({assetPack:n,storeSearchText:!0,clearSearchText:!0}),Me()}),[Oe,qe,H,Me]),$e=s.useCallback((function(e){H.navigateInsideFolder(e)}),[H]),et=s.useCallback((function(e){H.goBackToFolderIndex(e)}),[H]),nt=s.useCallback((function(e){var t=e.prices.find((function(e){return"default"===e.usageType}));(0,g.rG)({gameTemplateName:e.name,gameTemplateId:e.id,source:"store",priceValue:t&&t.value,priceCurrency:t&&t.currency}),qe(),H.openPrivateGameTemplateInformationPage({privateGameTemplateListingData:e,storeSearchText:!0,clearSearchText:!0})}),[qe,H]),rt=s.useCallback((function(e){var t=e.prices.find((function(e){return"default"===e.usageType}));(0,g.VW)({bundleName:e.name,bundleId:e.id,source:"store",priceValue:t&&t.value,priceCurrency:t&&t.currency}),qe(),H.openBundleInformationPage({bundleListingData:e,storeSearchText:!0,clearSearchText:!0})}),[qe,H]),it=s.useCallback((function(e){var t=e.prices.find((function(e){return"default"===e.usageType}));(0,g.o$)({courseName:e.name,courseId:e.id,source:"store",priceValue:t&&t.value,priceCurrency:t&&t.currency}),S&&S(e.id)}),[S]),at=s.useCallback((function(e){qe(),H.openShopCategoryPage(e)}),[H,qe]),ot=s.useCallback((function(e){var t=Oe&&Oe.find((function(t){return t.tag===e})),n=R&&R.starterPacks.find((function(t){return t.tag===e}));qe(),t?H.openPackPage({assetPack:t,storeSearchText:!1,clearSearchText:!0}):n?H.openPackPage({assetPack:n,storeSearchText:!1,clearSearchText:!0}):H.openTagPage(e),B(),Me()}),[Oe,R,qe,B,H,Me]);s.useEffect((function(){Ze&&ye.current&&ye.current.focus()}),[Ze]),s.useEffect((function(){n&&(fe===re||ge||ve)&&H.openHome()}),[fe,ge,ve,n,H]);var mt=s.useMemo((function(){if(!he||!F||!Oe)return null;var e=Oe.map((function(e){return e.id}));return F.filter((function(t){return t.sellerId===he.sellerId&&!e.includes(t.sellerId)})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[he,F,Oe]),xt=s.useMemo((function(){if(!ge||!q||!Re)return null;var e=Re.map((function(e){return e.id}));return q.filter((function(t){return t.sellerId===ge.sellerId&&!e.includes(t.sellerId)})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[ge,q,Re]),vt=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=H.backToPreviousPage(),!Ve(t)){e.next=9;break}return e.next=5,(0,ht.g)(500);case 5:Ne(t),Je(t),e.next=10;break;case 9:Ne(t);case 10:case"end":return e.stop()}}),e)}))),[H,Ve,Ne,Je]);return(0,_.jsx)(l.I18n,{children:function(e){e.i18n;return(0,_.jsxs)(p.sg,{expand:!0,noMargin:!0,useFullHeight:!0,noOverflowParent:!0,id:"asset-store",children:[(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(X.pJ,{children:[!(I&&E)&&(0,_.jsx)(ce.Z,{id:"home-button",tooltip:{id:"Back to discover"},onClick:function(){_e("");var e=I?H.openAssetSwapping():H.openHome();Ne(e),B(),Pe(!1)},size:"small",children:(0,_.jsx)(Ee.Z,{})},"back-discover"),(0,_.jsx)(p.sg,{expand:!0,useFullHeight:!0,noMargin:!0,children:(0,_.jsx)(d.Z,{placeholder:n?{id:"Search assets"}:{id:"Search the shop"},value:z,onChange:function(e){if(z!==e&&1!==e.length)if(_e(e),je){H.openSearchResultPage();var t=Ge.current;t&&(t.scrollToPosition(0),t.setPageBreakIndex(0))}else e&&(H.clearHistory(),H.openSearchResultPage(),Me())},onRequestSearch:function(){},ref:ye,id:"asset-store-search-bar"})}),!(I&&E)&&(0,_.jsx)(ce.Z,{onClick:function(){return Pe(!Se)},disabled:!He,selected:He&&Se,size:"small",children:(0,_.jsx)(u.Z,{})})]}),(0,_.jsx)(p.LZ,{})]}),(0,_.jsx)(p.sg,{noMargin:!0,children:(0,_.jsx)(p.x1,{justifyContent:"space-between",noMargin:!0,alignItems:"center",children:(!Ce||!!fe)&&!(I&&E)&&(0,_.jsxs)(_.Fragment,{children:[H.isRootPage||ve?null:(0,_.jsx)(p.sg,{expand:!0,alignItems:"flex-start",noMargin:!0,children:(0,_.jsx)(le.Z,{icon:(0,_.jsx)(c.Z,{}),label:(0,_.jsx)(l.Trans,{id:"Back"}),onClick:vt})}),(oe||he||be.chosenCategory)&&(0,_.jsxs)(_.Fragment,{children:[!oe&&!he&&(0,_.jsx)(p.sg,{expand:!0,alignItems:"center",children:(0,_.jsx)(k.Z,{size:"block-title",noMargin:!0,children:be.chosenCategory?(0,dt.capitalize)(be.chosenCategory.node.name):""})}),(0,_.jsx)(p.sg,{expand:!0,alignItems:"flex-end",noMargin:!0,justifyContent:"center",children:oe&&oe.content&&(0,m.O3)(oe)&&!(0,m.s0)(oe)?(0,_.jsx)(ut.Z,{assetPack:oe}):null})]})]})})}),(0,_.jsxs)(p.x1,{expand:!0,noMargin:!0,overflow:"hidden",children:[Ce?Ue?(0,_.jsx)(pe.Z,{onRetry:Be,children:(0,_.jsx)(Ae.Z,{kind:"error",children:(0,_.jsx)(l.Trans,{id:"An error occurred when fetching the store content. Please try again later."})})}):R&&F&&q&&ee?(0,_.jsx)(se,{ref:ze,publicAssetPacks:R,privateAssetPackListingDatas:F,privateGameTemplateListingDatas:q,bundleListingDatas:ee,onPublicAssetPackSelection:Ke,onPrivateAssetPackSelection:Qe,onPrivateGameTemplateSelection:nt,onBundleSelection:rt,onCategorySelection:at,openedShopCategory:fe,onlyShowAssets:n,displayPromotions:r,onOpenProfile:Z}):(0,_.jsx)(de.Z,{}):je?(0,_.jsx)(me.Z,{publicAssetPacks:I?[]:A,privateAssetPackListingDatas:I?[]:O,privateGameTemplateListingDatas:I?[]:Q,bundleListingDatas:I?[]:ie,assetShortHeaders:L,ref:Ge,error:Ue,onOpenDetails:Xe,onPrivateAssetPackSelection:Qe,onPublicAssetPackSelection:Ke,onPrivateGameTemplateSelection:nt,onBundleSelection:rt,onFolderSelection:$e,onGoBackToFolderIndex:et,currentPage:H.getCurrentPage(),onlyShowAssets:n,hideDetails:!!I&&!!E}):!ue||I&&E?he?(0,_.jsx)(st,{privateAssetPackListingData:he,onAssetPackOpen:Qe,onGameTemplateOpen:nt,onBundleOpen:rt,privateAssetPackListingDatasFromSameCreator:mt}):ge?(0,_.jsx)(pt.Z,{privateGameTemplateListingData:ge,onCreateWithGameTemplate:function(){y&&y(ge)},onAssetPackOpen:Qe,onGameTemplateOpen:nt,onBundleOpen:rt,privateGameTemplateListingDatasFromSameCreator:xt}):ve&&P?(0,_.jsx)(gt.Z,{bundleListingData:ve,noPadding:!0,onBack:vt,onBundleOpen:rt,onGameTemplateOpen:nt,onAssetPackOpen:Qe,onCourseOpen:it,courses:T,getCourseCompletion:P}):null:(0,_.jsx)(Ie,{ref:We,onTagSelection:ot,assetShortHeader:ue,onOpenDetails:Xe,onAssetLoaded:function(){return Je(ae)},onPrivateAssetPackSelection:Qe,onPrivateGameTemplateSelection:nt}),He&&(0,_.jsx)(ct.y,{onClose:function(){return Pe(!1)},open:Se,children:(0,_.jsx)(f.Z,{children:(0,_.jsxs)(p.sg,{children:[(0,_.jsx)(p.sg,{noMargin:!0,children:(0,_.jsxs)(p.x1,{alignItems:"center",children:[(0,_.jsx)(u.Z,{}),(0,_.jsx)(j.Z,{children:(0,_.jsx)(l.Trans,{id:"Object filters"})})]})}),(0,_.jsx)(p.x1,{justifyContent:"space-between",alignItems:"center",children:(0,_.jsx)(x.K,{assetSwappedObject:I})})]})})})]})]})}})}))},76288:function(e,t,n){"use strict";n.d(t,{YZ:function(){return a},gT:function(){return o}});var r=n(28381),i=n(59788),a=function(e,t,n){var a=r.useContext(i.Z),o=n.handler;r.useEffect((function(){if(t)return a.registerCommand(e,{handler:o}),function(){return a.deregisterCommand(e)}}),[a,e,t,o])},o=function(e,t,n){var a=r.useContext(i.Z),o=n.generateOptions;r.useEffect((function(){if(t)return a.registerCommand(e,{generateOptions:o}),function(){return a.deregisterCommand(e)}}),[a,e,t,o])}},59788:function(e,t,n){"use strict";n.d(t,{V:function(){return d},Z:function(){return p}});var r=n(28381),i=n(1413),a=n(43144),o=n(15671),s=(0,a.Z)((function e(){var t=this;(0,o.Z)(this,e),this.registerCommand=function(e,n){t._commands[e]||(t._commands[e]=n)},this.deregisterCommand=function(e){delete t._commands[e]},this.getNamedCommand=function(e){var n=t._commands[e];return n?(0,i.Z)({name:e},n):null},this.getAllNamedCommands=function(){return Object.keys(t._commands).map((function(e){var n=t._commands[e];return(0,i.Z)((0,i.Z)({},n),{},{name:e})}))},this._commands={}})),l=n(46771),c=n(29343),u=r.createContext(new s),d=function(e){var t=(0,l.Z)((function(){return new s}));return(0,c.jsx)(u.Provider,{value:t,children:e.children})},p=u},32072:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var r={GENERAL:{id:"General"},IDE:{id:"IDE"},PROJECT:{id:"Project"},SCENE:{id:"Scene"},EVENTS:{id:"Events"}};t.Z={QUIT_APP:{area:"GENERAL",displayText:{id:"Close GDevelop"},handledByElectron:!0},OPEN_PROJECT_MANAGER:{area:"IDE",displayText:{id:"Open project manager"},handledByElectron:!0},OPEN_PROFILE:{area:"IDE",displayText:{id:"Open My Profile"}},LAUNCH_NEW_PREVIEW:{area:"PROJECT",displayText:{id:"Launch new preview"}},LAUNCH_DEBUG_PREVIEW:{area:"PROJECT",displayText:{id:"Launch preview with debugger and profiler"}},LAUNCH_NETWORK_PREVIEW:{area:"PROJECT",displayText:{id:"Launch network preview over WiFi/LAN"}},HOT_RELOAD_PREVIEW:{area:"PROJECT",displayText:{id:"Apply changes to the running preview"}},LAUNCH_PREVIEW_WITH_DIAGNOSTIC_REPORT:{area:"PROJECT",displayText:{id:"Launch preview with diagnostic report"}},OPEN_HOME_PAGE:{area:"IDE",displayText:{id:"Show Home"}},CREATE_NEW_PROJECT:{area:"GENERAL",displayText:{id:"Create a new project"},handledByElectron:!0},OPEN_PROJECT:{area:"GENERAL",displayText:{id:"Open project"},handledByElectron:!0},SAVE_PROJECT:{area:"GENERAL",displayText:{id:"Save project"},handledByElectron:!0},SAVE_PROJECT_AS:{area:"GENERAL",displayText:{id:"Save project as..."},handledByElectron:!0},CLOSE_PROJECT:{area:"GENERAL",displayText:{id:"Close project"},handledByElectron:!0},EXPORT_GAME:{area:"PROJECT",displayText:{id:"Export game"},handledByElectron:!0},INVITE_COLLABORATORS:{area:"PROJECT",displayText:{id:"Invite collaborators"},handledByElectron:!0},OPEN_RECENT_PROJECT:{area:"GENERAL",displayText:{id:"Open recent project..."}},OPEN_COMMAND_PALETTE:{area:"IDE",displayText:{id:"Open command palette"},ghost:!0},RESTART_IN_GAME_EDITOR:{area:"IDE",displayText:{id:"Restart 3D editor"}},OPEN_PROJECT_PROPERTIES:{area:"PROJECT",displayText:{id:"Open project properties"}},OPEN_PROJECT_LOADING_SCREEN:{area:"PROJECT",displayText:{id:"Edit loading screen"}},OPEN_PROJECT_VARIABLES:{area:"PROJECT",displayText:{id:"Edit global variables"}},OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG:{area:"PROJECT",displayText:{id:"Open project icons"}},OPEN_PROJECT_RESOURCES:{area:"PROJECT",displayText:{id:"Open project resources"}},OPEN_SEARCH_EXTENSIONS_DIALOG:{area:"PROJECT",displayText:{id:"Search/import extensions"}},OPEN_LAYOUT:{area:"IDE",displayText:{id:"Open scene..."}},OPEN_EXTERNAL_EVENTS:{area:"IDE",displayText:{id:"Open external events..."}},OPEN_EXTERNAL_LAYOUT:{area:"IDE",displayText:{id:"Open external layout..."}},OPEN_EXTENSION:{area:"IDE",displayText:{id:"Open extension..."}},OPEN_SCENE_PROPERTIES:{area:"SCENE",displayText:{id:"Open scene properties"}},OPEN_SCENE_VARIABLES:{area:"SCENE",displayText:{id:"Open scene variables"}},OPEN_OBJECTS_PANEL:{area:"SCENE",displayText:{id:"Toggle Objects Panel"}},OPEN_OBJECT_GROUPS_PANEL:{area:"SCENE",displayText:{id:"Toggle Object Groups Panel"}},OPEN_PROPERTIES_PANEL:{area:"SCENE",displayText:{id:"Toggle Properties Panel"}},TOGGLE_INSTANCES_PANEL:{area:"SCENE",displayText:{id:"Toggle Instances List Panel"}},TOGGLE_LAYERS_PANEL:{area:"SCENE",displayText:{id:"Toggle Layers Panel"}},SCENE_EDITOR_UNDO:{area:"SCENE",displayText:{id:"Undo the last changes"},noShortcut:!0},SCENE_EDITOR_REDO:{area:"SCENE",displayText:{id:"Redo the last changes"},noShortcut:!0},DELETE_INSTANCES:{area:"SCENE",displayText:{id:"Delete the selected instances from the scene"},noShortcut:!0},TOGGLE_WINDOW_MASK:{area:"SCENE",displayText:{id:"Toggle mask"}},TOGGLE_GRID:{area:"SCENE",displayText:{id:"Toggle grid"}},OPEN_SETUP_GRID:{area:"SCENE",displayText:{id:"Setup grid"}},EDIT_LAYER_EFFECTS:{area:"SCENE",displayText:{id:"Edit layer effects..."}},EDIT_LAYER:{area:"SCENE",displayText:{id:"Edit layer..."}},EDIT_OBJECT:{area:"SCENE",displayText:{id:"Edit object..."}},EDIT_OBJECT_BEHAVIORS:{area:"SCENE",displayText:{id:"Edit object behaviors..."}},EDIT_OBJECT_EFFECTS:{area:"SCENE",displayText:{id:"Edit object effects..."}},EDIT_OBJECT_VARIABLES:{area:"SCENE",displayText:{id:"Edit object variables..."}},EDIT_OBJECT_GROUP:{area:"SCENE",displayText:{id:"Edit object group..."}},ADD_STANDARD_EVENT:{area:"EVENTS",displayText:{id:"Add a new empty event"}},ADD_SUBEVENT:{area:"EVENTS",displayText:{id:"Add a sub-event to the selected event"}},ADD_LOCAL_VARIABLE:{area:"EVENTS",displayText:{id:"Add a local variable to the selected event"}},ADD_COMMENT_EVENT:{area:"EVENTS",displayText:{id:"Add a comment"}},TOGGLE_EVENT_DISABLED:{area:"EVENTS",displayText:{id:"Toggle disabled event"}},TOGGLE_CONDITION_INVERTED:{area:"EVENTS",displayText:{id:"Toggle inverted condition"}},CHOOSE_AND_ADD_EVENT:{area:"EVENTS",displayText:{id:"Choose and add an event..."}},MOVE_EVENTS_IN_NEW_GROUP:{area:"EVENTS",displayText:{id:"Move events into a new group"}},EVENTS_EDITOR_UNDO:{area:"EVENTS",displayText:{id:"Undo the last changes"},noShortcut:!0},EVENTS_EDITOR_REDO:{area:"EVENTS",displayText:{id:"Redo the last changes"},noShortcut:!0},DELETE_SELECTION:{area:"EVENTS",displayText:{id:"Delete the selected event(s)"},noShortcut:!0},SEARCH_EVENTS:{area:"EVENTS",displayText:{id:"Search in events"},noShortcut:!0},OPEN_EXTENSION_SETTINGS:{area:"EVENTS",displayText:{id:"Open extension settings"}}}},70834:function(e,t,n){"use strict";n.d(t,{Gt:function(){return j},M2:function(){return y},_6:function(){return Z}});var r=n(29439),i=n(1413),a=n(37762),o=n(36600),s=n(28381),l=n(53731),c=n(10888),u=n(61325),d=n(29324),p=n(84900),f=n(86278),h=n(40243),g=(n(44634),n(25777)),m=n(29343),x={icon:{fontSize:18}},v=["basic","advanced","deprecated",""],b=function(e,t){return v[Math.min(v.indexOf(e),v.indexOf(t))]},C=function e(t){if(t.children){var n,r="",i=(0,a.Z)(t.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("basic"===(r=b(r,e(o))))return r}}catch(s){i.e(s)}finally{i.f()}return r}return t.visibility?t.visibility||"basic":""},j=function e(t,n){var r,o=[],s=(0,a.Z)(t);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(l.children){var c=e(l.children,n);c.length>0&&o.push((0,i.Z)((0,i.Z)({},l),{},{children:c}))}else l.getValue&&l.setValue?(C(l)||"basic")===n&&o.push(l):o.push(l)}}catch(u){s.e(u)}finally{s.f()}return o},y=function(e,t){var n,r=(0,a.Z)(e);try{var i,o=function(){var e=n.value;if(!e.getValue||!e.setValue||void 0===e.defaultValue||null===e.defaultValue)return 0;var r=e.getValue,i=e.defaultValue;return t.some((function(e){return r(e)!==i}))?{v:!0}:void 0};for(r.s();!(n=r.n()).done;)if(0!==(i=o())&&i)return i.v}catch(s){r.e(s)}finally{r.f()}return!1},Z=function(e){var t=e.onInstancesModified,n=e.instances,i=e.schema,a=e.placeholder,v=e.renderExtraDescriptionText,b=e.unsavedChanges,C=e.project,Z=(e.object,e.resourceManagementProps),k=(e.preventWrap,e.removeSpacers,e.customizeBasicSchema),w=e.onRefreshAllFields,T=s.useMemo((function(){var e=j(i,"basic");return k?k(e):e}),[i,k]),S=s.useMemo((function(){return j(i,"advanced")}),[i]),P=S.length>0,I=s.useMemo((function(){return(0,g.k)(T)||P}),[T,P]),E=s.useMemo((function(){return y(S,n)}),[n,S]),M=s.useState(E),L=(0,r.Z)(M,2),A=L[0],O=L[1];return(0,m.jsxs)(u.ak,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[!I&&(0,m.jsx)(h.x1,{justifyContent:"center",expand:!0,children:(0,m.jsx)(f.Z,{size:"body2",color:"secondary",align:"center",noMargin:!0,children:a})}),I&&(0,m.jsx)(l.ZP,{project:C,schema:T,instances:n,onInstancesModified:t,resourceManagementProps:Z,onRefreshAllFields:w,renderExtraDescriptionText:v,unsavedChanges:b}),!A&&P&&(0,m.jsx)(c.Z,{fullWidth:!0,primary:!0,leftIcon:(0,m.jsx)(p.Z,{style:x.icon}),label:(0,m.jsx)(o.Trans,{id:"Show more"}),onClick:function(){O(!0)}}),A&&P&&(0,m.jsx)(l.ZP,{project:C,schema:S,instances:n,onInstancesModified:t,resourceManagementProps:Z,onRefreshAllFields:w,renderExtraDescriptionText:v,unsavedChanges:b}),A&&P&&(0,m.jsx)(c.Z,{fullWidth:!0,primary:!0,leftIcon:(0,m.jsx)(d.Z,{style:x.icon}),label:(0,m.jsx)(o.Trans,{id:"Show less"}),onClick:function(){O(!1)}})]})}},53731:function(e,t,n){"use strict";n.d(t,{Z0:function(){return ve},ZP:function(){return ke}});var r=n(93433),i=n(45987),a=n(37762),o=n(1413),s=n(28381),l=n(90242),c=n(61325),u=n(70619),d=n(12470),p=n(29439),f=n(64949),h="CompactSemiControlledNumberField_container__afVTS",g=n(65111),m=function(e){return Object.is(e,-0)?"-0":e},x={"+":{func:function(e,t){return"".concat(m(Number(e)+Number(t)))},precedence:1,associativity:"left",arity:2},"-":{func:function(e,t){return"".concat(m(Number(e)-Number(t)))},precedence:1,associativity:"left",arity:2},"*":{func:function(e,t){return"".concat(m(Number(e)*Number(t)))},precedence:2,associativity:"left",arity:2},"/":{func:function(e,t){return"".concat(m(Number(e)/Number(t)))},precedence:2,associativity:"left",arity:2},"%":{func:function(e,t){return"".concat(m(Number(e)%Number(t)))},precedence:2,associativity:"left",arity:2},"^":{func:function(e,t){return"".concat(m(Math.pow(Number(e),Number(t))))},precedence:3,associativity:"right",arity:2}},v=Object.keys(x),b={min:{func:function(e,t){return"".concat(m(Math.min(Number(e),Number(t))))},arity:2},max:{func:function(e,t){return"".concat(m(Math.max(Number(e),Number(t))))},arity:2},sin:{func:function(e){return"".concat(m(Math.sin(Number(e))))},arity:1},cos:{func:function(e){return"".concat(m(Math.cos(Number(e))))},arity:1},tan:{func:function(e){return"".concat(m(Math.tan(Number(e))))},arity:1},exp:{func:function(e){return"".concat(Math.exp(Number(e)))},arity:1},log:{func:function(e){return"".concat(Math.log(Number(e)))},arity:1},pi:{func:function(){return"".concat(Math.PI)},arity:0},toDeg:{func:function(e){return"".concat(180*Number(e)/Math.PI)},arity:1},toRad:{func:function(e){return"".concat(Number(e)*Math.PI/180)},arity:1}},C=Object.keys(b),j=function(e){return e[e.length-1]};function y(e){var t=function(e){for(var t=e.replace(/\s+/g," "),n=[],r="",i="",a=0;a<t.length;a++){var o=t.charAt(a),s=t.charAt(a-1),l=t.charAt(a+1),c=j(n),u=""!==i;if(/\d/.test(o)||("+"===o||"-"===o)&&!u&&(void 0===c||","===c||"("===c||v.includes(c))&&/\d/.test(l))i+=o;else if("."===o){if(u&&i.includes("."))throw new Error("Double '.' in number: '".concat(i).concat(o,"'"));i+=o}else if(" "===o){if(/\d/.test(s)&&/\d/.test(l))throw new Error("Space in number: '".concat(i).concat(o).concat(l,"'"))}else if(C.includes(r+o))r+=o,C.includes(r+l)||(n.push(r),r="");else if(v.includes(o)||"("===o||")"===o||","===o){if(v.includes(o)&&!u&&v.includes(c))throw new Error("Consecutive operators: '".concat(c).concat(o,"'"));u&&n.push(i),n.push(o),i=""}else r+=o}if(""!==r)throw new Error("Invalid characters: '".concat(r,"'"));return""!==i&&n.push(i),"+"!==n[0]&&"-"!==n[0]||n.unshift("0"),n}(e),n=function(e){var t,n=[],r=[],i=(0,a.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(void 0!==b[o])r.push(o);else if(","===o){for(;r.length>0&&"("!==j(r);)n.push(r.pop());if(0===r.length)throw new Error("Misplaced ','")}else if(void 0!==x[o]){for(var s=o;r.length>0&&void 0!==j(r)&&"("!==j(r)&&(x[j(r)].precedence>x[s].precedence||x[s].precedence===x[j(r)].precedence&&"left"===x[s].associativity);)n.push(r.pop());r.push(s)}else if("("===o)r.push(o);else if(")"===o){for(;r.length>0&&"("!==j(r);)n.push(r.pop());if(!(r.length>0&&"("===j(r)))throw new Error("Parentheses mismatch");r.pop(),void 0!==b[j(r)]&&n.push(r.pop())}else n.push(o)}}catch(l){i.e(l)}finally{i.f()}for(;r.length>0;){if("("===j(r))throw new Error("Parentheses mismatch");n.push(r.pop())}return n}(t);return function(e){var t,n=[],i=(0,o.Z)((0,o.Z)({},x),b),s=(0,a.Z)(e);try{for(s.s();!(t=s.n()).done;){var l=t.value,c=i[l];if(void 0!==c){for(var u=[],d=0;d<c.arity;d++)u.push(n.pop());n.push(c.func.apply(c,(0,r.Z)(u.reverse())))}else n.push(l)}}catch(p){s.e(p)}finally{s.f()}if(n.length>1)throw new Error("Insufficient operators");return Number(n[0])}(n)}var Z=n(51598),k=n(78118),w=n(29343),T=s.memo((function(e){return(0,w.jsx)(k.Z,(0,o.Z)((0,o.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,w.jsx)("path",{d:"M4.79997 4.8335C3.05107 4.8335 1.6333 6.25126 1.6333 8.00016C1.6333 9.74905 3.05107 11.1668 4.79997 11.1668C5.83632 11.1668 6.75639 10.6684 7.33329 9.90047C7.33892 9.89296 7.34435 9.8853 7.34955 9.87749L7.52731 9.61083C7.68048 9.38106 7.61838 9.07062 7.3886 8.91746C7.15883 8.76429 6.8484 8.82639 6.69524 9.05617L6.52569 9.31051C6.12908 9.83181 5.50371 10.1668 4.79997 10.1668C3.60335 10.1668 2.6333 9.19677 2.6333 8.00016C2.6333 6.80355 3.60335 5.8335 4.79997 5.8335C5.50372 5.8335 6.12903 6.1686 6.52564 6.69003L8.6504 9.87749C8.65561 9.8853 8.66103 9.89296 8.66666 9.90046C9.24354 10.6684 10.1637 11.1668 11.2 11.1668C12.9489 11.1668 14.3667 9.74905 14.3667 8.00016C14.3667 6.25126 12.9489 4.8335 11.2 4.8335C10.1637 4.8335 9.24354 5.33185 8.66666 6.09988C8.50081 6.32067 8.54536 6.6341 8.76615 6.79995C8.98695 6.96579 9.30038 6.92124 9.46623 6.70045C9.86235 6.17307 10.4915 5.8335 11.2 5.8335C12.3966 5.8335 13.3667 6.80355 13.3667 8.00016C13.3667 9.19677 12.3966 10.1668 11.2 10.1668C10.4962 10.1668 9.87085 9.83181 9.47427 9.31052L7.34936 6.12283C7.34288 6.1131 7.33611 6.10368 7.32908 6.09455C6.75198 5.32965 5.83393 4.8335 4.79997 4.8335Z",fill:"currentColor"})}))})),S=["value","onChange","placeholder","canBeUnlimitedUsingMinus1","commitOnBlur","getValueFromDisplayedValue","getDisplayedValueFromValue"],P=function(e){var t=parseFloat(e);return!Number.isNaN(t)&&isFinite(t)?t:null},I={icon:{fontSize:18}},E=function(e,t){var n=P(e),r=(e.split(".")[1]||"").length;return null!==n?parseFloat((n+t).toFixed(r)):null},M=function(e){var t=e.value,n=e.onChange,r=e.placeholder,a=e.canBeUnlimitedUsingMinus1,l=e.commitOnBlur,c=e.getValueFromDisplayedValue,u=e.getDisplayedValueFromValue,d=(0,i.Z)(e,S),m=s.useRef(null),x=s.useRef(!1),v=s.useState(!1),b=(0,p.Z)(v,2),C=b[0],j=b[1],k=s.useState(t.toString()),M=(0,p.Z)(k,2),L=M[0],A=M[1],O=s.useCallback((function(e,t){var r=P(e);if("iconControl"===t)return null!==r&&n(r),void A(e);if("keyInput"===t||"wheel"===t||"blur"===t||"userValidation"===t){var i=/[+-]\s*\d+/.test(e),a=/[+-/*^()%]/.test(e),o=null!==r&&(!a||a&&i),s=!1,c=null;if("userValidation"===t||"blur"===t)try{c=y(e.toLowerCase()),!Number.isNaN(c)&&isFinite(c)||(c=null),s=!0}catch(u){console.warn("Error computing ".concat(e,":"),u)}null===c&&o&&(c=r),null===c||"blur"!==t&&l||n(c),A(s&&c?c.toString():e)}}),[l,n]),R=u?u(t.toString()):t.toString(),F=a&&-1===t;return(0,w.jsxs)("div",{className:h,children:[(0,w.jsx)(f.Z,(0,o.Z)({type:"text",ref:m,disabled:F,placeholder:F?"Unlimited":r,value:F?"":C?L:R,onChange:O,onFocus:function(e){j(!0);var t=c?c(R):R;A(t)},onKeyDown:function(e){if((0,g.ph)(e)&&O(L.toLowerCase(),"userValidation"),"ArrowDown"===e.key){var t=E(L,-1);if(null===t)return;e.preventDefault(),O(t.toString(),"keyInput")}if("ArrowUp"===e.key){var n=E(L,1);if(null===n)return;e.preventDefault(),O(n.toString(),"keyInput")}},onWheel:function(e){if(e.deltaY<0){var t=E(L,1);if(null===t)return;e.preventDefault(),O(t.toString(),"wheel")}if(e.deltaY>0){var n=E(L,-1);if(null===n)return;e.preventDefault(),O(n.toString(),"wheel")}},onKeyUp:function(e){var t=m.current;(0,g.W$)(e)&&t&&(x.current=!0,t.blur())},onBlur:function(e){var t=u?u(L):L;x.current||O(t,"blur"),j(!1),A(""),x.current=!1}},d)),a&&(0,w.jsx)(Z.Z,{size:"small",onClick:function(){F?(n(0),m.current&&m.current.focus()):n(-1)},selected:F,tooltip:F?{id:"Remove unlimited"}:{id:"Set to unlimited"},children:(0,w.jsx)(T,{style:I.icon})})]})},L=n(40243),A=n(86278),O=n(38501),R=n(37571),F=n(10888),D=n(24910),N={container:{display:"flex",alignSelf:"stretch",flexDirection:"column",justifyContent:"stretch",alignItems:"center"},verticalBar:{flex:1},childrenContainer:{flex:0}},_=function(e){var t=s.useContext(D.Z);return(0,w.jsxs)("div",{style:N.container,children:[(0,w.jsx)("div",{style:(0,o.Z)((0,o.Z)({},N.verticalBar),{},{borderLeft:"1px solid ".concat(t.palette.secondary)})}),(0,w.jsx)("div",{style:N.childrenContainer,children:e.children}),(0,w.jsx)("div",{style:(0,o.Z)((0,o.Z)({},N.verticalBar),{},{borderLeft:"1px solid ".concat(t.palette.secondary)})})]})},B=n(31318),U=n(3781),V=n(32832),H=n(84361),z={leftColumn:{flex:2,minWidth:0,maxWidth:150},rightColumn:{flex:3,minWidth:25},label:{overflow:"hidden",textOverflow:"ellipsis",lineHeight:"17px",maxHeight:34,opacity:.7}},W=function(e){var t=e.markdownDescription?[e.label," - ",(0,w.jsx)(V.r,{source:e.markdownDescription},"markdown-desc")]:e.label;return(0,w.jsxs)(c.pJ,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,w.jsx)("div",{style:z.leftColumn,children:(0,w.jsx)(U.ZP,{title:t,enterDelay:H.K,placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-20"}}},children:(0,w.jsx)(A.Z,{noMargin:!0,style:z.label,children:e.label})})}),(0,w.jsx)("div",{style:z.rightColumn,children:e.field})]})},G=n(15637),Y=n(70263),q=n(81040),J=n(4942),X=n(82954),K=n.n(X),Q="CompactColorField_container__Q5Xzw",$="CompactColorField_compactColorField__R+KFm",ee="CompactColorField_disabled__npIWS",te="CompactColorField_errored__KdudK",ne=n(28842),re=n(37237),ie=n(11858),ae=function(e){var t,n=e.color,r=e.alpha,i=e.disableAlpha,a=e.onChange,o=e.id,l=e.disabled,c=e.errored,u=e.placeholder,d=s.useRef(o||(0,ne._)()),f=s.useState(n),h=(0,p.Z)(f,2),g=h[0],m=h[1],x=s.useState(i||void 0===r?1:r),v=(0,p.Z)(x,2),b=v[0],C=v[1];return(0,w.jsx)("div",{className:K()((t={},(0,J.Z)(t,Q,!0),(0,J.Z)(t,ee,l),(0,J.Z)(t,te,c),t)),children:(0,w.jsxs)("div",{className:K()((0,J.Z)({},$,!0)),children:[(0,w.jsx)("input",{id:d.current,type:"text",disabled:l,value:g,onChange:function(e){return t=e.currentTarget.value,n=b,m(t),void C(n);var t,n},placeholder:u,onBlur:function(){var e=parseFloat(b);e<0&&(e=0),e>1&&(e=1),C(e),a(g,e)}}),(0,w.jsx)(re.Z,{size:"compact",disableAlpha:i,onChangeComplete:function(e){var t=(0,ie.KC)(e.rgb),n=i?1:e.rgb.a;m(t),n&&C(n),a(t,n)},color:(0,ie.A0)(g,b),disabled:l})]})})},oe=n(13035),se=n(36600),le=n(73321),ce=n(14737),ue=n(83297),de=n(3970),pe=n(54168),fe={icon:{fontSize:18}},he=function(e){var t=e.project,n=e.value,r=e.onChange,i=e.id,a=s.useRef(i||(0,ne._)()),o=(0,ue.k)(),f=(0,de.eh)(),h=s.useState(!1),g=(0,p.Z)(h,2),m=g[0],x=g[1],v=f&&!!f.find((function(e){return e.id===n})),b=s.useState(!f||!!n&&!v),C=(0,p.Z)(b,2),j=C[0],y=C[1],k=f&&f.length>0,T=s.useMemo((function(){return f?f.map((function(e){return(0,w.jsx)(l.Z,{value:e.id,label:"".concat(e.name," ").concat(e.id?"(".concat((0,ce.GA)(e.id),")"):""),shouldNotTranslate:!0},e.id)})):[]}),[f]);return(0,w.jsx)(se.I18n,{children:function(e){var i=e.i18n;return(0,w.jsxs)(c.pJ,{noMargin:!0,expand:!0,id:a.current,children:[(0,w.jsx)(L.sg,{noMargin:!0,expand:!0,children:j?(0,w.jsx)(d.Z,{onChange:r,value:n,errorText:f?null:o?(0,w.jsx)(se.Trans,{id:"Your game may not be registered, create one in the leaderboard manager."}):(0,w.jsx)(se.Trans,{id:"Unable to fetch leaderboards as you are offline."})}):(0,w.jsx)(u.Z,{value:k?n:"empty",onChange:r,children:k?T:(0,w.jsx)(l.Z,{disabled:!0,value:"empty",label:i._({id:"No leaderboards"})},"empty")})}),(0,w.jsx)(pe.Z,{element:(0,w.jsx)(Z.Z,{size:"small",children:(0,w.jsx)(R.Z,{style:fe.icon})}),buildMenuTemplate:function(e){return[{label:e._("Manage leaderboards"),click:function(){return x(!0)}},{label:j?e._({id:"Select the leaderboard from a list"}):e._({id:"Enter the leaderboard id"}),disabled:!f,click:function(){return y(!j)}}]}}),m&&!!t&&(0,w.jsx)(le.Z,{onClose:function(){return x(!1)},open:m,project:t,leaderboardId:v?n:void 0})]})}})},ge=["key"],me=["key"],xe={columnContainer:{display:"flex",flexDirection:"column"},fieldContainer:{flex:1,display:"flex",flexDirection:"row",alignItems:"baseline"},field:{flex:1,width:"auto"},subHeader:{paddingLeft:0},container:{flex:1,minWidth:0},separator:{marginTop:L.XW,borderTop:"1px solid black"},level2Separator:{flex:1,borderTop:"1px solid black"}},ve=function(){var e=s.useContext(D.Z);return(0,w.jsx)("div",{style:(0,o.Z)((0,o.Z)({},xe.separator),{},{borderColor:e.listItem.separatorColor})})},be=function(){var e=s.useContext(D.Z);return(0,w.jsx)("div",{style:(0,o.Z)((0,o.Z)({},xe.level2Separator),{},{borderColor:e.listItem.separatorColor})})},Ce=function(e){var t=e.instances,n=e.field;return!!n.disabled&&n.disabled(t)},je=function(e){var t=e.instances,n=e.field,r=e.defaultValue;if(!t[0])return console.warn("getFieldValue was called with an empty list of instances (or containing undefined). This is a bug that should be fixed."),r;var i=n.getValue;if(!i)return null;var a=i(t[0]);if("undefined"!==typeof r)for(var o=1;o<t.length;++o)if(a!==i(t[o])){a=r;break}return a},ye=function(e){var t=e.instances,n=e.field;if(!t[0])return console.warn("getFieldEndAdornmentIcon was called with an empty list of instances (or containing undefined). This is a bug that should be fixed."),null;if(!n.getEndAdornmentIcon)return null;var r,i=(0,a.Z)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.getEndAdornmentIcon(o);if(s)return s}}catch(l){i.e(l)}finally{i.f()}return null},Ze=function(e){var t=e.instances,n=e.field;return t[0]?n.getLabel?n.getLabel(t[0]):n.name:(console.warn("getFieldLabel was called with an empty list of instances (or containing undefined). This is a bug that should be fixed."),n.name)},ke=function e(t){var n=t.onInstancesModified,a=t.onRefreshAllFields,p=t.instances,f=t.schema,h=t.mode,g=t.renderExtraDescriptionText,m=t.unsavedChanges,x=t.project,v=t.resourceManagementProps,b=t.preventWrap,C=t.removeSpacers,j=t.isHidden,y=(0,O.Z)(),k=s.useCallback((function(e){var t=e.instances,r=e.hasImpactOnAllOtherFields;m&&m.triggerUnsavedChanges(),n&&n(t),r&&a&&a(),y()}),[m,n,a,y]),T=s.useCallback((function(e){if(p[0]){var t=[];return e.getDescription&&t.push(e.getDescription(p[0])),g&&e.getExtraDescription&&t.push(g(e.getExtraDescription(p[0]))),t.join("\n")||void 0}console.warn("getFieldDescription was called with an empty list of instances (or containing undefined). This is a bug that should be fixed.")}),[p,g]),S=s.useCallback((function(e){if("PLEASE_ALSO_SHOW_EDIT_BUTTON_THANKS"===e.name)return null;if("boolean"===e.valueType){var t=e.setValue;return(0,w.jsx)(Y.K,{label:Ze({instances:p,field:e}),markdownDescription:T(e),id:e.name,checked:je({instances:p,field:e}),onCheck:function(n){p.forEach((function(e){return t(e,n)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})},disabled:Ce({instances:p,field:e}),fullWidth:!0},e.name)}if("number"===e.valueType){var n=e.setValue,r=e.onClickEndAdornment,a={key:e.name,id:e.name,value:je({instances:p,field:e}),onChange:function(t){isNaN(t)||(p.forEach((function(e){return n(e,t)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields}))},disabled:Ce({instances:p,field:e}),renderEndAdornmentOnHover:ye({instances:p,field:e})||void 0,onClickEndAdornment:function(){r&&(p.forEach((function(e){return r(e)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields}))},getValueFromDisplayedValue:e.getValueFromDisplayedValue,getDisplayedValueFromValue:e.getDisplayedValueFromValue};if(e.renderLeftIcon||e.hideLabel)return(0,w.jsx)(M,(0,o.Z)((0,o.Z)({},a),{},{canBeUnlimitedUsingMinus1:e.canBeUnlimitedUsingMinus1,useLeftIconAsNumberControl:!0,renderLeftIcon:e.renderLeftIcon,leftIconTooltip:Ze({instances:p,field:e})}));var s=a.key,l=(0,i.Z)(a,ge);return(0,w.jsx)(W,{label:Ze({instances:p,field:e}),markdownDescription:T(e),field:(0,w.jsx)(M,(0,o.Z)({canBeUnlimitedUsingMinus1:e.canBeUnlimitedUsingMinus1},l))},s)}if("color"===e.valueType){var c=e.setValue;return(0,w.jsx)(W,{label:Ze({instances:p,field:e}),markdownDescription:T(e),field:(0,w.jsx)(ae,{id:e.name,disableAlpha:!0,color:je({instances:p,field:e}),onChange:function(t){var n=0===t.length?"":(0,ie.JO)(t);p.forEach((function(e){return c(e,n)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})}})},e.name)}if("enumIcon"===e.valueType){var u=je({instances:p,field:e});return(0,w.jsx)(Z.Z,{id:e.name,size:"small",tooltip:Ze({instances:p,field:e}),selected:e.isHighlighted(u),onClick:function(t){p.forEach((function(t){return e.setValue(t,e.getNextValue(u))})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})},children:e.renderIcon(u)},e.name)}if("multilinestring"===e.valueType){var f=e.setValue;return(0,w.jsx)(q.Q,{id:e.name,onChange:function(t){p.forEach((function(e){return f(e,t||"")})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})},value:je({instances:p,field:e}),label:Ze({instances:p,field:e}),markdownDescription:T(e)},e.name)}var h=e.setValue,g=e.onClickEndAdornment,m={key:e.name,id:e.name,value:je({instances:p,field:e,defaultValue:"(Multiple values)"}),onChange:function(t){p.forEach((function(e){return h(e,t||"")})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})},disabled:Ce({instances:p,field:e}),renderEndAdornmentOnHover:ye({instances:p,field:e})||void 0,onClickEndAdornment:function(){g&&(p.forEach((function(e){return g(e)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields}))}};if(e.renderLeftIcon||e.hideLabel)return(0,w.jsx)(d.Z,(0,o.Z)((0,o.Z)({},m),{},{renderLeftIcon:e.renderLeftIcon,leftIconTooltip:Ze({instances:p,field:e})}));var x=m.key,v=(0,i.Z)(m,me);return(0,w.jsx)(W,{label:Ze({instances:p,field:e}),markdownDescription:T(e),field:(0,w.jsx)(d.Z,(0,o.Z)({},v))},x)}),[p,k,T]),P=s.useCallback((function(e){if(e.getChoices&&e.getValue){var t=e.getChoices();if(!(t.length<2&&e.isHiddenWhenOnlyOneChoice)){var n,r=t.map((function(e){var t=e.value,n=e.label,r=e.labelIsUserDefined;return(0,w.jsx)(l.Z,{value:t,label:n,shouldNotTranslate:r},t)}));if("number"===e.valueType){var i=e.setValue;n=(0,w.jsx)(u.Z,{value:je({instances:p,field:e}),id:e.name,onChange:function(t){p.forEach((function(e){return i(e,parseFloat(t)||0)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})},disabled:e.disabled,children:r},e.name)}else if("string"===e.valueType){var a=e.setValue;n=(0,w.jsx)(u.Z,{value:je({instances:p,field:e,defaultValue:"(Multiple values)"}),id:e.name,onChange:function(t){p.forEach((function(e){return a(e,t||"")})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})},disabled:Ce({instances:p,field:e}),renderLeftIcon:e.renderLeftIcon,leftIconTooltip:Ze({instances:p,field:e}),children:r},e.name)}return n?e.renderLeftIcon||e.hideLabel?n:(0,w.jsx)(W,{label:Ze({instances:p,field:e}),markdownDescription:T(e),field:n},e.name):null}}}),[p,k,T]),I=s.useCallback((function(e){var t=!1;if("onValuesDifferent"===e.disabled){var n="DIFFERENT_VALUES";t=je({instances:p,field:e,defaultValue:n})===n}return(0,w.jsx)(F.Z,{fullWidth:!0,primary:!0,leftIcon:e.showRightIcon?null:e.getIcon?e.getIcon({fontSize:"small"}):(0,w.jsx)(R.Z,{fontSize:"small"}),rightIcon:e.showRightIcon?e.getIcon?e.getIcon({fontSize:"small"}):(0,w.jsx)(R.Z,{fontSize:"small"}):null,disabled:t,label:e.label,onClick:function(){p[0]&&e.onClick(p[0])}},"button-".concat(e.label))}),[p]),E=s.useCallback((function(e){var t=e.buttons.map((function(t){var n=p.filter((function(e){return t.getValue(e)})).length===p.length;return{id:t.name,renderIcon:t.renderIcon,tooltip:t.tooltip,isActive:n,onClick:function(){p.forEach((function(e){return t.setValue(e,!n)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})}}}));return(0,w.jsx)(s.Fragment,{children:(0,w.jsx)(G.Z,{id:e.name,buttons:t,expand:!0})},"toggle-buttons-".concat(e.name))}),[p,k]),D=j&&j(p)?function(e){return null}:"row"===h?function(e){return b?C?(0,w.jsx)(L.x1,{noMargin:!0,alignItems:"center",expand:!0,children:e}):(0,w.jsx)(c.pJ,{noMargin:!0,alignItems:"center",expand:!0,children:e}):(0,w.jsx)(c.ep,{noMargin:!0,alignItems:"center",expand:!0,children:e})}:function(e){return C?(0,w.jsx)(L.sg,{noMargin:!0,expand:!0,children:e}):(0,w.jsx)(c.ak,{noMargin:!0,expand:!0,children:e})},N=s.useCallback((function(e){var t=e.getValue,n=e.renderLeftIcon,r=null;if(t){var i=je({instances:p,field:e,defaultValue:e.defaultValue||"Multiple Values"});i&&(r=i)}return r?(0,w.jsxs)(c.pJ,{alignItems:"center",expand:!0,noMargin:!0,children:[n(),(0,w.jsx)(A.Z,{displayInlineAsSpan:!0,noMargin:!0,children:e.title}),(0,w.jsx)(A.Z,{displayInlineAsSpan:!0,noMargin:!0,children:"-"}),(0,w.jsx)(A.Z,{allowSelection:!0,displayInlineAsSpan:!0,noMargin:!0,style:B.t,children:r})]},"section-title-".concat(e.name)):(0,w.jsxs)(c.pJ,{expand:!0,noMargin:!0,alignItems:"center",children:[n(),(0,w.jsx)(A.Z,{displayInlineAsSpan:!0,size:"sub-title",noMargin:!0,children:e.title})]},"title-".concat(e.name))}),[p]),U=s.useCallback((function(e){return[(0,w.jsx)(ve,{},e.name+"-separator"),(0,w.jsx)(L.x1,{noMargin:!0,children:(0,w.jsx)(A.Z,{displayInlineAsSpan:!0,size:"sub-title",noMargin:!0,children:e.title})},"section-title-".concat(e.name))]}),[]),V=s.useCallback((function(e){return[(0,w.jsxs)(L.sg,{expand:!0,noMargin:!0,children:[(0,w.jsx)(L.LZ,{}),(0,w.jsxs)(c.pJ,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,w.jsx)(A.Z,{size:"body",noMargin:!0,children:e.title}),(0,w.jsx)(be,{},e.name+"-separator")]})]},e.name+"-title")]}),[]);return D(f.map((function(t){if(t.nonFieldType)return"title"===t.nonFieldType?N(t):"sectionTitle"===t.nonFieldType?U(t):"button"===t.nonFieldType?I(t):"toggleButtons"===t.nonFieldType?E(t):"verticalCenterWithBar"===t.nonFieldType?function(e){return e.child&&e.child.getValue?(0,w.jsx)(_,{children:S(e.child)},e.name):"TODO"}(t):null;if(t.children){var i="row"===t.type?(0,w.jsx)(e,{project:x,resourceManagementProps:v,schema:t.children,instances:p,mode:"row",unsavedChanges:m,onInstancesModified:n,onRefreshAllFields:a,preventWrap:t.preventWrap,removeSpacers:t.removeSpacers,isHidden:t.isHidden},t.name):(0,w.jsx)("div",{style:xe.container,children:(0,w.jsx)(e,{project:x,resourceManagementProps:v,schema:t.children,instances:p,mode:"column",unsavedChanges:m,onInstancesModified:n,onRefreshAllFields:a,preventWrap:t.preventWrap,removeSpacers:t.removeSpacers,isHidden:t.isHidden})},t.name);return t.title?[].concat((0,r.Z)(V({title:t.title,name:t.name})),[i]):i}return"resource"===t.valueType?function(e){if(!x||!v)return console.error("You tried to display a resource field in a PropertiesEditor that does not support display resources. If you need to display resources, pass additional props (project, resourceManagementProps)."),null;var t=e.setValue;return(0,w.jsx)(W,{label:Ze({instances:p,field:e}),markdownDescription:T(e),field:(0,w.jsx)(oe.t,{project:x,resourceManagementProps:v,resourceKind:e.resourceKind,resourceName:je({instances:p,field:e,defaultValue:"(Multiple values)"}),onChange:function(n){p.forEach((function(e){return t(e,n)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})}})},e.name)}(t):"leaderboardId"===t.valueType?function(e){if(!x)return null;var t=e.setValue;return(0,w.jsx)(W,{label:Ze({instances:p,field:e}),markdownDescription:T(e),field:(0,w.jsx)(he,{project:x,value:je({instances:p,field:e,defaultValue:"(Multiple values)"}),onChange:function(n){p.forEach((function(e){return t(e,n)})),k({instances:p,hasImpactOnAllOtherFields:e.hasImpactOnAllOtherFields})}},e.name)},e.name)}(t):t.getChoices&&t.getValue?P(t):t.getValue?S(t):null})))}},97890:function(e,t,n){"use strict";n.d(t,{uo:function(){return p}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(36465),l=n(4900),c=n(29343),u={listedCourses:null,listedCourseChapters:null},d=o.createContext(u),p=function(e){var t=o.useState(null),n=(0,a.Z)(t,2),u=n[0],p=n[1],f=o.useState(null),h=(0,a.Z)(f,2),g=h[0],m=h[1],x=o.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.eZ)();case 3:t=e.sent,p(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("An error occurred when fetching courses in Shop API:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),v=o.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.w7)();case 3:t=e.sent,m(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("An error occurred when fetching course chapters in Shop API:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);return o.useEffect((function(){console.info("Pre-fetching courses..."),x();var e=setTimeout((function(){console.info("Pre-fetching course chapters..."),v()}),l.SH);return function(){return clearTimeout(e)}}),[v,x]),(0,c.jsx)(d.Provider,{value:{listedCourses:u,listedCourseChapters:g},children:e.children})};t.ZP=d},36401:function(e,t,n){"use strict";var r=n(1413),i=n(36600),a=n(28381),o=n(40243),s=n(24910),l=n(61325),c=n(10888),u=n(86278),d=n(71106),p=n(84482),f=n(62903),h=n(29343),g={borderRadius:8,padding:8};t.Z=function(e){var t=e.displayPurchaseAction,n=e.actionButtonLabel,m=e.onActionButtonClick,x=a.useContext(s.Z),v=a.useContext(d.ZP),b=v.limits,C=v.onRefreshLimits,j=a.useContext(f.q$).openCreditsPackageDialog;return a.useEffect((function(){C()}),[C]),b?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{style:(0,r.Z)((0,r.Z)({},g),{},{backgroundColor:x.credits.backgroundColor,color:x.credits.color}),children:(0,h.jsxs)(l.ep,{alignItems:"center",justifyContent:"space-between",noMargin:!0,noResponsiveLandscape:!0,children:[(0,h.jsx)(o.sg,{children:(0,h.jsxs)(l.pJ,{alignItems:"flex-end",noMargin:!0,children:[(0,h.jsx)(p.Z,{}),(0,h.jsx)(u.Z,{noMargin:!0,color:"inherit",children:(0,h.jsx)(i.Trans,{id:"Credits available: {0}",values:{0:b.credits.userBalance.amount}})})]})}),t&&(0,h.jsx)(o.sg,{children:(0,h.jsx)(c.Z,{label:(0,h.jsx)(i.Trans,{id:"Get credit packs"}),onClick:function(){return j({showCalloutTip:!0})},noBackground:!0})}),n&&(0,h.jsx)(o.sg,{children:(0,h.jsx)(c.Z,{label:n,onClick:m,noBackground:!0})})]})})}):null}},84482:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"19",height:"20",viewBox:"0 0 19 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("ellipse",{cx:"9.5",cy:"11",rx:"9.5",ry:"9",fill:"#CE8C0C"}),(0,o.jsx)("circle",{cx:"9.5",cy:"9.5",r:"9.5",fill:"url(#paint0_linear_1964_314)"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 16.4333C13.3292 16.4333 16.4333 13.3292 16.4333 9.5C16.4333 5.67083 13.3292 2.56667 9.5 2.56667C5.67083 2.56667 2.56667 5.67083 2.56667 9.5C2.56667 13.3292 5.67083 16.4333 9.5 16.4333ZM9.5 17.5C13.9183 17.5 17.5 13.9183 17.5 9.5C17.5 5.08172 13.9183 1.5 9.5 1.5C5.08172 1.5 1.5 5.08172 1.5 9.5C1.5 13.9183 5.08172 17.5 9.5 17.5Z",fill:"#E2AB1A"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.4333 9.5C16.4333 4.7 12.3894 2.86822 11.3667 2.3C10.344 1.73178 9.5 1.5 9.5 1.5C13.9183 1.5 17.5 5.08172 17.5 9.5C17.5 13.9183 13.9183 17.5 9.5 17.5C9.5 17.5 9.76693 17.4956 11.3667 16.9667C12.9664 16.4377 16.4333 13.3292 16.4333 9.5Z",fill:"#D89C00"}),(0,o.jsx)("path",{d:"M9.13173 13C8.18994 13 7.28325 12.7555 6.48229 12.2233C5.92399 11.8524 5.27783 11.015 5.27783 9.59536C5.27783 6.96158 6.67931 6.00034 9.49569 6.00034L13.5425 6.00034C13.5425 6.00034 13.6672 5.99421 13.7025 6.03404C13.747 6.08418 13.7025 6.20269 13.7025 6.20269L13.3217 7.32404C13.3217 7.32404 13.2713 7.4283 13.2189 7.46231C13.1577 7.5021 13.0581 7.50045 13.0581 7.50045H9.88209C8.02323 7.50045 6.91792 7.63961 6.91792 9.59536C6.91792 10.2414 7.10769 10.7011 7.49828 11.0007C8.15841 11.507 9.44149 11.5285 10.2255 11.456C10.2255 11.456 10.5472 10.463 10.6002 10.3018C10.6622 10.1129 10.635 10.0678 10.4415 10.0678C10.1618 10.0678 9.65919 10.0678 9.1257 10.0678C8.75182 10.0678 8.38451 9.88722 8.38451 9.45335C8.38451 9.03435 8.72625 8.79115 9.19471 8.79115C10.0058 8.79115 11.6764 8.79115 11.989 8.79115C12.3989 8.79115 12.8172 8.84757 12.6038 9.47049L11.4736 12.761C11.4736 12.761 10.5502 13 9.13173 13Z",fill:"#E2A60B"}),(0,o.jsx)("defs",{children:(0,o.jsxs)("linearGradient",{id:"paint0_linear_1964_314",x1:"9.5",y1:"0",x2:"9.5",y2:"19",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#FEDC28"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]})})]}))}))},18870:function(e,t,n){"use strict";n.d(t,{o4:function(){return N},P6:function(){return O},uJ:function(){return E},Pt:function(){return A},FS:function(){return M},VL:function(){return I},qP:function(){return S},nj:function(){return L},dD:function(){return P}});var r=n(1413),i=n(29439),a=n(93433),o=n(36600),s=n(28381),l=n(65260),c=n(92582),u=n(86278),d="EmbeddedGameFrame_hintText__+gIIM",p=n(1773),f=n(18699),h=n(86268),g=n(50327),m=n(29343),x=function(e,t){return{shouldReloadProjectData:e.shouldReloadProjectData||t.shouldReloadProjectData,shouldReloadLibraries:e.shouldReloadLibraries||t.shouldReloadLibraries,shouldReloadResources:e.shouldReloadResources||t.shouldReloadResources,shouldHardReload:e.shouldHardReload||t.shouldHardReload,reasons:[].concat((0,a.Z)(e.reasons),(0,a.Z)(t.reasons))}},v=function(e){return e.shouldReloadProjectData||e.shouldReloadLibraries||e.shouldReloadResources||e.shouldHardReload},b=null,C=null,j=null,y=null,Z=null,k=null,w=null,T=null,S=function(e){var t=e.previewIndexHtmlLocation;if(!b)throw new Error("No EmbeddedGameFrame registered.");b({previewIndexHtmlLocation:t})},P=function(e){if(!C)throw new Error("No EmbeddedGameFrame registered.");C(e)},I=function(e){if(!j)throw new Error("No EmbeddedGameFrame registered.");j(e)},E=function(){if(!y)throw new Error("No EmbeddedGameFrame registered.");return y()},M=function(e,t){if(!w)throw new Error("No EmbeddedGameFrame registered.");w(e,t)},L=function(e){if(!Z)throw new Error("No EmbeddedGameFrame registered.");Z(e)},A=function(e){if(!k)throw new Error("No EmbeddedGameFrame registered.");k(e)},O=function(e){T&&T(e)},R=function(e){e.editorId;var t=e.sceneName,n=e.externalLayoutName,r=e.eventsBasedObjectType,i=e.eventsBasedObjectVariantName,a=e.reasons;console.info(r?'Switching in-game edition preview for variant "'.concat(i||"",'" of "').concat(r||"",'". Reason(s): ').concat(a.join(", "),"."):n?'Switching in-game edition previews to external layout "'.concat(n||"",'" (scene: "').concat(t||"",'". Reason(s): ').concat(a.join(", "),")."):'Switching in-game edition previews to scene "'.concat(t||"",'". Reason(s): ').concat(a.join(", "),"."))},F=(0,c.L)(l.eK),D={shouldReloadProjectData:!1,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:[]},N=function(e){var t=e.previewDebuggerServer,n=e.onLaunchPreviewForInGameEdition,a=e.enabled,l=s.useState(""),c=(0,i.Z)(l,2),S=c[0],E=c[1],M=s.useState(!1),L=(0,i.Z)(M,2),A=L[0],O=L[1],N=s.useRef(null),_=s.useRef(D),B=s.useRef(null),U=s.useRef(!1),V=s.useRef(new Map),H=s.useRef(new h.ZP({isActive:function(){return!0},shortcutCallbacks:{}})),z=(0,g.A)();s.useEffect((function(){t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"setInGameEditorSettings",payload:{inGameEditorSettings:z}})}))}),[t,z]),s.useEffect((function(){b=function(e){E(e.previewIndexHtmlLocation);var t=N.current;t&&t.contentWindow.focus()},k=function(e){O(e)},j=function(e){_.current=x(_.current,e)},y=function(){return v(_.current)},w=function(e,t){V.current.set(e,t)},C=function(e){if(t&&a){var i=e.editorId,o=e.sceneName,s=e.externalLayoutName,l=e.eventsBasedObjectType,c=e.eventsBasedObjectVariantName;if(B.current={editorId:i,sceneName:o,externalLayoutName:s,eventsBasedObjectType:l,eventsBasedObjectVariantName:c},U.current){var u=e.shouldReloadProjectData,d=e.shouldReloadLibraries,p=e.shouldReloadResources,f=e.shouldHardReload,h=e.reasons;I({shouldReloadProjectData:u,shouldReloadLibraries:d,shouldReloadResources:p,shouldHardReload:f,reasons:h})}else{var g=x(_.current,{shouldReloadProjectData:e.shouldReloadProjectData,shouldReloadLibraries:e.shouldReloadLibraries,shouldReloadResources:e.shouldReloadResources,shouldHardReload:e.shouldHardReload,reasons:e.reasons}),m=g.shouldReloadProjectData,b=g.shouldReloadLibraries,C=g.shouldReloadResources,j=g.shouldHardReload,y=g.reasons,Z=v({shouldReloadProjectData:m,shouldReloadLibraries:b,shouldReloadResources:C,shouldHardReload:j,reasons:y});!S||Z?(console.info(l?'Launching in-game edition preview for variant "'.concat(c||"",'" of "').concat(l||"",'". Reason(s): ').concat(y.join(", "),"."):s?'Launching in-game edition preview for external layout "'.concat(s||"",'" (scene: "').concat(o||"",'"). Reason(s): ').concat(y.join(", "),"."):'Launching in-game edition preview for scene "'.concat(o||"",'". Reason(s): ').concat(y.join(", "),".")),_.current=D,U.current=!0,n({editorId:i,sceneName:o,externalLayoutName:s,eventsBasedObjectType:l,eventsBasedObjectVariantName:c,shouldReloadProjectData:m,shouldReloadLibraries:b,shouldReloadResources:C,shouldHardReload:j,reasons:y,editorCameraState3D:V.current.get(i)||null}).finally((function(){U.current=!1,v(_.current)&&B.current&&P((0,r.Z)((0,r.Z)({},B.current),{},{shouldReloadProjectData:!1,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["post-launch-preview"]}))}))):(R({editorId:i,sceneName:o,externalLayoutName:s,eventsBasedObjectType:l,eventsBasedObjectVariantName:c,reasons:y}),t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"switchForInGameEdition",editorId:i,sceneName:o,externalLayoutName:s,eventsBasedObjectType:l,eventsBasedObjectVariantName:c,editorCamera3D:V.current.get(i)})})))}}},Z=function(e){var n=e.editorId,r=e.sceneName,i=e.externalLayoutName,o=e.eventsBasedObjectType,s=e.eventsBasedObjectVariantName;t&&a&&(v(_.current)||(B.current={editorId:n,sceneName:r,externalLayoutName:i,eventsBasedObjectType:o,eventsBasedObjectVariantName:s},R({editorId:n,sceneName:r,externalLayoutName:i,eventsBasedObjectType:o,eventsBasedObjectVariantName:s,reasons:["switched-editor-and-no-hot-reload-is-needed"]}),t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"switchForInGameEdition",editorId:n,sceneName:r,externalLayoutName:i,eventsBasedObjectType:o,eventsBasedObjectVariantName:s,cameraState3D:V.current.get(n)})}))))},T=function(e){var n=N.current;if(n){var r=n.getBoundingClientRect(),i=(0,f.d8)();i&&r&&t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(n){t.sendMessage(n,{command:e,payload:{visibleScreenArea:{minX:(i.left-r.left)/r.width,minY:(i.top-r.top)/r.height,maxX:(i.right-r.left)/r.width,maxY:(i.bottom-r.top)/r.height}}})}))}}}),[t,S,n,a]),s.useEffect((function(){var e=N.current;t&&e&&!!S&&t.registerEmbeddedGameFrame(e.contentWindow)})),s.useEffect((function(){var e=N.current,n=t;return function(){n&&e&&n.unregisterEmbeddedGameFrame(e.contentWindow)}}),[t]);var W=s.useState(!1),G=(0,i.Z)(W,2),Y=G[0],q=G[1],J=s.useRef(null),X=s.useCallback((function(e){var n=e.monitor,r=e.dropped,i=(e.isAltPressed,J.current);if(t&&i){var a=n.getItem().name;if(a){q(!!n.getItem().is3D);var o=n.getClientOffset(),s=i.getBoundingClientRect();t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"dragNewInstance",x:o.x-s.left,y:o.y-s.top,name:a,dropped:r,isAltPressed:H.current.shouldNotSnapToGrid()})}))}}}),[t]);return s.useEffect((function(){var e=!1,n=!1,r=function(){t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(r){t.sendMessage(r,{command:"setVisibleStatus",visible:!e&&n})}))},i=(0,p.N2)((function(t){var n=t.openedDialogsCount;e=n>0,r()})),a=(0,f.cS)((function(e){var t=e.activeEmbeddedGameFrameHoleCount;n=t>0,r()}));return function(){i(),a()}}),[t]),(0,m.jsx)("div",{style:{position:"absolute",top:78,left:0,right:0,bottom:0},onKeyDown:H.current.onKeyDown,onKeyUp:H.current.onKeyUp,children:(0,m.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[(0,m.jsx)("iframe",{ref:N,title:"Game Preview",src:S,tabIndex:0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none"}}),(0,m.jsx)(F,{canDrop:function(){return!0},hover:function(e){return X({monitor:e,dropped:!1,isAltPressed:!1})},drop:function(e){return X({monitor:e,dropped:!0,isAltPressed:!1})},children:function(e){var n=e.connectDropTarget,r=e.canDrop;return e.isOver||t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"cancelDragNewInstance"})})),n((0,m.jsx)("div",{style:{display:r||A?"flex":"none",position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none",alignItems:"center",justifyContent:"center"},id:"embedded-game-frame-drop-target",ref:J,children:r&&(0,m.jsx)("div",{className:d,children:Y?(0,m.jsx)(u.Z,{color:"inherit",children:(0,m.jsx)(o.Trans,{id:"Drag here to add to the scene"})}):(0,m.jsx)(u.Z,{color:"inherit",children:(0,m.jsx)(o.Trans,{id:"2D objects can't be edited when in 3D mode"})})})}))}})]})})}},18699:function(e,t,n){"use strict";n.d(t,{cS:function(){return l},d8:function(){return u},eh:function(){return a},jq:function(){return d}});var r=n(28381),i=n(29343),a="instances-editor-embedded-game-frame-hole",o=0,s=[],l=function(e){return s.push(e),e({activeEmbeddedGameFrameHoleCount:o}),function(){s.splice(s.indexOf(e),1)}},c=function(){s.forEach((function(e){return e({activeEmbeddedGameFrameHoleCount:o})}))},u=function(){var e=document.querySelector("#".concat(a));return e?e.getBoundingClientRect():null},d=function(e){return r.useEffect((function(){if(e.isActive)return o++,c(),function(){o--,c()}}),[e.isActive]),(0,i.jsx)("div",{style:{height:"calc(100% - ".concat(e.marginBottom||0,"px)"),display:"flex",justifyContent:"flex-end",alignItems:"flex-start",boxSizing:"border-box"},id:e.isActive?a:void 0,children:e.showRestartInGameEditorAfterErrorButton&&(0,i.jsx)("button",{style:{pointerEvents:"all"},onClick:function(){return e.onRestartInGameEditor("relaunched-manually-after-error")},children:"Restart 3D editor"})})}},50327:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(28381),i=n(24910),a=function(){var e=r.useContext(i.Z),t=e.iconButton.selectedBackgroundColor,n=e.iconButton.selectedColor,a=e.toolbar.backgroundColor,o=e.toolbar.separatorColor,s=e.text.color.primary;return r.useMemo((function(){return{theme:{iconButtonSelectedBackgroundColor:t,iconButtonSelectedColor:n,toolbarBackgroundColor:a,toolbarSeparatorColor:o,textColorPrimary:s}}}),[t,n,a,o,s])}},28923:function(e,t,n){"use strict";var r={eventsFunctionsExtensionsError:null,loadProjectEventsFunctionsExtensions:function(){return Promise.reject(new Error("Use a provider"))},unloadProjectEventsFunctionsExtensions:function(){},reloadProjectEventsFunctionsExtensions:function(){return Promise.reject(new Error("Use a provider"))},reloadProjectEventsFunctionsExtensionMetadata:function(){throw new Error("Use a provider")},unloadProjectEventsFunctionsExtension:function(){},getEventsFunctionsExtensionWriter:function(){return null},getEventsFunctionsExtensionOpener:function(){return null},ensureLoadFinished:function(){return Promise.reject(new Error("Use a provider"))},getIncludeFileHashs:function(){return{}}},i=n(28381).createContext(r);t.Z=i},51458:function(e,t,n){"use strict";n.d(t,{$5:function(){return g},At:function(){return a},Op:function(){return b},_u:function(){return v},e0:function(){return m},fP:function(){return o},mK:function(){return C},xo:function(){return x}});var r=n(18455),i=n.g.gd,a=function(e,t,n){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(r){return s(e,e.getEventsFunctionsExtensionAt(r),{skipCodeGeneration:!0,eventsFunctionCodeWriter:t,i18n:n})}))).then((function(){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(r){return s(e,e.getEventsFunctionsExtensionAt(r),{skipCodeGeneration:!1,eventsFunctionCodeWriter:t,i18n:n})})))}))},o=function(e,t,n,r){var a=u(e,t,{eventsFunctionCodeWriter:n,i18n:r});i.JsPlatform.get().addNewExtension(a),a.delete()},s=function(e,t,n){return c(e,t,n).then((function(e){i.JsPlatform.get().addNewExtension(e),e.delete()}))},l=function(e,t,n){var a=t.getEventsFunctions();return(0,r.mapFor)(0,a.getEventsFunctionsCount(),(function(e){var r=a.getEventsFunctionAt(e),o=i.MetadataDeclarationHelper.getFreeFunctionCodeName(t,r);return n.eventsFunctionCodeWriter.getIncludeFileFor(o)})).filter(Boolean)},c=function(e,t,n){var a=new i.PlatformExtension;i.MetadataDeclarationHelper.declareExtension(a,t);var o={codeNamespacePrefix:i.MetadataDeclarationHelper.getExtensionCodeNamespacePrefix(t),extensionIncludeFiles:l(0,t,n)};return Promise.all((0,r.mapVector)(t.getEventsBasedBehaviors(),(function(r){return function(e,t,n,r,a,o){return Promise.resolve().then((function(){var s=new i.MapStringString,l=f(e,t,n,r,a,o,s);if(a.skipCodeGeneration)return s.delete(),Promise.resolve();var c=i.MetadataDeclarationHelper.getBehaviorFunctionCodeNamespace(r,o.codeNamespacePrefix),u=new i.SetString,d=new i.BehaviorCodeGenerator(e),p=d.generateRuntimeBehaviorCompleteCode(n,r,c,s,u,!0);return d.delete(),s.delete(),u.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),u.delete(),a.eventsFunctionCodeWriter.writeBehaviorCode(c,p)}))}(e,a,t,r,n,o)}))).then((function(){return Promise.all((0,r.mapVector)(t.getEventsBasedObjects(),(function(r){return function(e,t,n,r,a,o){return Promise.resolve().then((function(){var s=new i.MapStringString,l=h(e,t,n,r,a,o,s);if(a.skipCodeGeneration)return s.delete(),Promise.resolve();var c=i.MetadataDeclarationHelper.getObjectFunctionCodeNamespace(r,o.codeNamespacePrefix),u=new i.SetString,d=new i.ObjectCodeGenerator(e),p=d.generateRuntimeObjectCompleteCode(n,r,c,s,u,!0);return d.delete(),s.delete(),u.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),u.delete(),a.eventsFunctionCodeWriter.writeObjectCode(c,p)}))}(e,a,t,r,n,o)})))})).then((function(){return Promise.all((0,r.mapFor)(0,t.getEventsFunctions().getEventsFunctionsCount(),(function(r){var i=t.getEventsFunctions().getEventsFunctionAt(r);return d(e,a,t,i,n,o)})))})).then((function(e){return a}))},u=function(e,t,n){var a=new i.PlatformExtension;i.MetadataDeclarationHelper.declareExtension(a,t);var o={codeNamespacePrefix:i.MetadataDeclarationHelper.getExtensionCodeNamespacePrefix(t),extensionIncludeFiles:l(0,t,n)};(0,r.mapVector)(t.getEventsBasedBehaviors(),(function(r){var s=new i.MapStringString;f(e,a,t,r,n,o,s),s.delete()})),(0,r.mapVector)(t.getEventsBasedObjects(),(function(r){var s=new i.MapStringString;h(e,a,t,r,n,o,s),s.delete()}));var s=new i.MetadataDeclarationHelper,c=t.getEventsFunctions();return(0,r.mapFor)(0,c.getEventsFunctionsCount(),(function(r){var i=c.getEventsFunctionAt(r);return p(e,a,t,i,n,o,s)})),s.delete(),a},d=function(e,t,n,r,a,o){var s=new i.MetadataDeclarationHelper,l=p(e,t,n,r,a,o,s).functionMetadata;if(a.skipCodeGeneration)return Promise.resolve();var c=new i.SetString,u=new i.EventsFunctionsExtensionCodeGenerator(e),d=i.MetadataDeclarationHelper.getFreeFunctionCodeNamespace(r,o.codeNamespacePrefix),f=u.generateFreeEventsFunctionCompleteCode(n,r,d,c,!0);c.toNewVectorString().toJSArray().forEach((function(e){l.addIncludeFile(e)})),c.delete(),u.delete(),s.delete();var h=i.MetadataDeclarationHelper.getFreeFunctionCodeName(n,r);return a.eventsFunctionCodeWriter.writeFunctionCode(h,f).then((function(){}))},p=function(e,t,n,r,a,o,s){var l=s.generateFreeFunctionMetadata(e,t,n,r),c=i.MetadataDeclarationHelper.getFreeFunctionCodeName(n,r),u=a.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.addIncludeFile(u),o.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),{functionFile:u,functionMetadata:l}};function f(e,t,n,r,a,o,s){var l=i.MetadataDeclarationHelper.generateBehaviorMetadata(e,t,n,r,s),c=i.MetadataDeclarationHelper.getBehaviorFunctionCodeNamespace(r,o.codeNamespacePrefix),u=a.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.addIncludeFile(u),o.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),l}function h(e,t,n,r,a,o,s){var l=i.MetadataDeclarationHelper.generateObjectMetadata(e,t,n,r,s),c=i.MetadataDeclarationHelper.getObjectFunctionCodeNamespace(r,o.codeNamespacePrefix),u=a.eventsFunctionCodeWriter.getIncludeFileFor(c);return l.addIncludeFile(u),o.extensionIncludeFiles.forEach((function(e){l.addIncludeFile(e)})),l}var g=function(e){return Promise.all((0,r.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(t){i.JsPlatform.get().removeExtension(e.getEventsFunctionsExtensionAt(t).getName())})))},m=function(e,t){i.JsPlatform.get().removeExtension(t)},x=function(e){var t=e.getParametersCount();return!(t<=0)&&"eventsFunctionContext"===e.getParameter(t-1).getType()},v=function(e){var t=e.split("::");return t.length?{name:t[t.length-1],behaviorName:t.length>2?t[1]:void 0,extensionName:t[0]}:{name:"",behaviorName:"",extensionName:""}},b=function(e,t){return e+"::"+t.getName()},C=Object.freeze({FreeFunction:1,BehaviorFunction:0,ObjectFunction:0})},23895:function(e,t,n){"use strict";n.d(t,{D8:function(){return f},FS:function(){return g},Jr:function(){return l},KZ:function(){return i},LC:function(){return v},LU:function(){return h},NJ:function(){return w},Pm:function(){return o},Qk:function(){return y},Sv:function(){return T},T8:function(){return k},Xr:function(){return x},aw:function(){return s},b_:function(){return c},eD:function(){return p},ed:function(){return b},fm:function(){return r},il:function(){return d},pf:function(){return j},pr:function(){return Z},qW:function(){return u},qv:function(){return a},yW:function(){return m},zk:function(){return C}});var r="selectable",i="selected",a="icon",o="large-selectable",s="large-selected",l="executable-event-container",c="actions-container",u="conditions-container",d="sub-instructions-container",p="warning-instruction",f="small-width-container",h="instruction-parameter",g="instruction-invalid-parameter",m="instruction-missing-parameter",x="instruction-warning-parameter",v="disabled-text",b="events-tree",C="with-search-results",j="drop-indicator",y="cant-drop-indicator",Z="move-handle",k="ai-generated-event-move-handle",w="link-container",T="name-and-icon-container"},92694:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(1413),i=n(29439),a=n(36600),o=n(28381),s=n(40755),l=n(15169),c=n(12949),u=n(30256),d=n(74044),p=n(29341),f=n(37090),h=n(29343),g=n(84506),m=n(36607),x=n(10952),v=n.n(x),b=function e(t){var n=t.instructionTreeNode,r=t.onChoose,i=t.iconSize,a=t.useSubheaders,o=t.selectedValue,s=t.selectedItemRef,c=t.initiallyOpenedPath,u=t.getGroupIconSrc,f=t.parentGroupIconSrc,x=c||[],b=(0,g.Z)(x),C=b[0],j=b.slice(1);return v()(Object.keys(n).map((function(t){var c=n[t];if(!c)return null;if("string"===typeof c.type){var g=c,x=(0,p.gq)(c.type),v=o===x;return(0,h.jsx)(l.HC,{primaryText:g.displayedName,selected:v,id:"instruction-item-"+g.type.replace(/:/g,"-"),leftIcon:(0,h.jsx)(d.Z,{iconSize:i,src:g.iconFilename}),onClick:function(){r(g.type,g)},ref:v?s:void 0},x)}var b=c;if(a){var y=u(t)||f;return[(0,h.jsx)(m.Z,{children:t},(0,p.mL)(t))].concat(e({instructionTreeNode:b,onChoose:r,iconSize:i,useSubheaders:!1,selectedValue:o,selectedItemRef:s,initiallyOpenedPath:j,getGroupIconSrc:u,parentGroupIconSrc:y}))}var Z=C===t,k=u(t)||f;return(0,h.jsx)(l.HC,{primaryText:t,autoGenerateNestedIndicator:!0,initiallyOpen:Z,leftIcon:k?(0,h.jsx)(d.Z,{iconSize:i,src:k}):null,renderNestedItems:function(){return e({instructionTreeNode:b,onChoose:r,iconSize:i,selectedValue:o,selectedItemRef:s,initiallyOpenedPath:Z?j:void 0,getGroupIconSrc:u,parentGroupIconSrc:k})}},t)})))},C=n(86578),j=n(2632),y=n(40243),Z=n(60022),k=n(61325),w=n(82069),T=n(1491),S=n.g.gd,P=function(e){return S.JsPlatform.get().getInstructionOrExpressionGroupMetadata(e).getIcon()},I=function(e){var t=e.focusOnMount,n=e.instructionsInfo,g=e.instructionsInfoTree,m=e.selectedType,x=e.onChoose,v=e.iconSize,S=e.useSubheaders,I=e.searchPlaceholderObjectName,E=e.searchPlaceholderIsCondition,M=e.helpPagePath,L=e.style,A=e.onClickMore,O=e.id,R=o.useRef(null),F=o.useRef(null),D=o.useRef(null),N=o.useState(""),_=(0,i.Z)(N,2),B=_[0],U=_[1],V=o.useMemo((function(){return new s.Z(n,(0,r.Z)((0,r.Z)({},w.KE),{},{keys:[{name:"displayedName",weight:2},{name:"fullGroupName",weight:1}]}))}),[n]),H=o.useRef((0,u.Z)(g,m)),z=B&&V?V.search((0,w.G9)(B,["displayedName","fullGroupName"])).map((function(e){return{item:e.item,matches:(0,w.zi)(e,B)}})):[],W=!B||!!z.length;return o.useEffect((function(){D.current&&F.current&&F.current.scrollTo(D.current)}),[]),(0,h.jsxs)("div",{style:(0,r.Z)({minHeight:0},L),id:O,children:[(0,h.jsx)(c.Z,{value:B,onChange:U,onRequestSearch:function(){z.length&&x(z[0].item.type,z[0].item)},placeholder:I?E?{id:"Search {searchPlaceholderObjectName} conditions",values:{searchPlaceholderObjectName:I}}:{id:"Search {searchPlaceholderObjectName} actions",values:{searchPlaceholderObjectName:I}}:void 0,helpPagePath:M,ref:R,autoFocus:t?"desktop":void 0}),(0,h.jsxs)(j.Z,{autoHideScrollbar:!0,ref:F,children:[W&&(0,h.jsx)(l.aV,{children:B?z.map((function(e){var t=e.item,n=e.matches;return function(e){var t=e.id,n=e.instructionOrExpressionMetadata,r=e.iconSize,i=e.onClick,a=e.selectedValue,o=e.matches,s=function(e){var t=n[e];if(o&&o.length){var r=o.filter((function(t){return t.key===e}));r.length&&(t=(0,h.jsx)(f.Z,{text:t,matchesCoordinates:r[0].indices}))}return t};return(0,h.jsx)(l.HC,{id:t,selected:a===(0,p.gq)(n.type),primaryText:s("displayedName"),secondaryText:s("fullGroupName"),leftIcon:(0,h.jsx)(d.Z,{iconSize:r,src:n.iconFilename}),onClick:i,disableAutoTranslate:!0},(0,p.rP)(n))}({instructionOrExpressionMetadata:t,id:(0,p.uv)(t),iconSize:v,onClick:function(){return x(t.type,t)},matches:n,selectedValue:(0,p.gq)(m)})})):(0,h.jsxs)(h.Fragment,{children:[b({instructionTreeNode:g,iconSize:v,onChoose:x,useSubheaders:S,selectedValue:(0,p.gq)(m),initiallyOpenedPath:H.current,selectedItemRef:D,getGroupIconSrc:P}),A&&(0,h.jsx)(k.ep,{justifyContent:"center",children:(0,h.jsx)(Z.Z,{primary:!0,icon:(0,h.jsx)(T.Z,{}),onClick:A,label:(0,h.jsx)(a.Trans,{id:"Add a new behavior to the object"})})})]})}),!W&&(0,h.jsx)(y.x1,{children:(0,h.jsx)(C.Z,{children:(0,h.jsx)(a.Trans,{id:"Nothing corresponding to your search. Try browsing the list instead."})})})]})]})}},29341:function(e,t,n){"use strict";n.d(t,{MG:function(){return o},gq:function(){return a},mL:function(){return s},rP:function(){return i},uv:function(){return l}});var r=n.g.gd,i=function(e){return"instruction-key-".concat(e.fullGroupName).concat(e.scope.objectMetadata?"-"+e.scope.objectMetadata.name:"","-").concat(e.type)},a=function(e){return"instruction-value-".concat(o(e))},o=function(e){var t=r.VariableInstructionSwitcher.getSwitchableVariableInstructionIdentifier(e);return t.length>0?t:e},s=function(e){return"subheader-key-".concat(e)},l=function(e){return"instruction-or-expression-".concat(e.scope.objectMetadata?e.scope.objectMetadata.name.replace(/:/g,"-")+"-":"").concat(e.type.replace(/:/g,"-"))}},70464:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(18455),i=n.g.gd,a=function(e,t,n){var a=t.getParametersForEvents(e);return(0,r.mapFor)(0,a.getParametersCount(),(function(e){var t=a.getParameterAt(e);return t.isCodeOnly()||i.ParameterMetadata.isObject(t.getType())||i.ParameterMetadata.isBehavior(t.getType())||0!==n.length&&!n.includes(i.ValueTypeMetadata.getPrimitiveValueType(t.getType()))?null:t})).filter(Boolean)}},35901:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ae}});var r=n(1413),i=n(15671),a=n(43144),o=n(60136),s=n(29388),l=n(28381),c=n(36600),u=n(16973),d=n(80845),p=n(20968),f=n(60022),h=n(42986),g=n(18455),m=n(45987),x=n(93433),v=n(10952),b=n.n(v),C=n(78296),j=n.g.gd,y=function(e){return"number"===e},Z=function(e,t,n){return(0,g.mapVector)(t.keys(),(function(r){var i=t.get(r);if(!i.isShown())return null;for(var a=[],o=0;o<i.getParametersCount();o++)n.objectMetadata&&0===o||n.behaviorMetadata&&o<=1||i.getParameter(o).isCodeOnly()||a.push(i.getParameter(o));var s=i.getGroup();return{type:r,name:r,displayedName:i.getFullName(),fullGroupName:[e,s].filter(Boolean).join(" \u276f "),iconFilename:i.getSmallIconFilename(),metadata:i,parameters:a,scope:n,isPrivate:i.isPrivate(),isRelevantForLayoutEvents:i.isRelevantForLayoutEvents(),isRelevantForFunctionEvents:i.isRelevantForFunctionEvents(),isRelevantForAsynchronousFunctionEvents:i.isRelevantForAsynchronousFunctionEvents(),isRelevantForCustomObjectEvents:i.isRelevantForCustomObjectEvents()}})).filter(Boolean)},k=function(e,t){var n=j.asPlatform(j.JsPlatform.get()).getAllPlatformExtensions();return b()((0,g.mapVector)(n,(function(n){var r=(0,C.R5)(n,t),i={extension:{name:n.getName()},objectMetadata:void 0,behaviorMetadata:void 0};return[].concat((0,x.Z)(y(e)?[]:Z(r,n.getAllStrExpressions(),i)),(0,x.Z)(Z(r,n.getAllExpressions(),i)))})))},w=function(e,t){var n=j.MetadataProvider.getExtensionAndObjectMetadata(j.JsPlatform.get(),t),r=n.getExtension(),i=n.getMetadata(),a={extension:{name:r.getName()},objectMetadata:{name:i.getName(),isPrivate:i.isPrivate()}},o=[].concat((0,x.Z)(y(e)?[]:Z("",r.getAllStrExpressionsForObject(t),a)),(0,x.Z)(Z("",r.getAllExpressionsForObject(t),a)));if(""!==t){var s=j.MetadataProvider.getExtensionAndObjectMetadata(j.JsPlatform.get(),"").getExtension();o=[].concat((0,x.Z)(o),(0,x.Z)(y(e)?[]:Z("",s.getAllStrExpressionsForObject(""),a)),(0,x.Z)(Z("",s.getAllExpressionsForObject(""),a)))}return o},T=function(e,t){var n=j.MetadataProvider.getExtensionAndBehaviorMetadata(j.JsPlatform.get(),t),r=n.getExtension(),i=n.getMetadata(),a={extension:{name:r.getName()},behaviorMetadata:{name:i.getName(),isPrivate:i.isPrivate()}};return[].concat((0,x.Z)(y(e)?[]:Z("",r.getAllStrExpressionsForBehavior(t),a)),(0,x.Z)(Z("",r.getAllExpressionsForBehavior(t),a)))},S=function(e,t){if(!t)return e;var n=t.toLowerCase();return function(e){if(!t)return e;for(var r=0;r<e.length;++r)if(e[r].type.toLowerCase()===n){var i=e[r];e.splice(r,1),e.unshift(i)}return e}(e.filter((function(e){return-1!==e.type.toLowerCase().indexOf(n)})))},P=n(92694),I=n(30256),E=n(550),M=n(29343),L=["expressionType","scope","i18n"],A={flex:1,display:"flex",flexDirection:"column"},O=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).instructionsInfo=(0,E.J)(function(e,t){var n=[],r=[],i=k(e,t),a=j.asPlatform(j.JsPlatform.get()).getAllPlatformExtensions();return(0,g.mapVector)(a,(function(i){var a=(0,C.R5)(i,t);(0,g.mapVector)(i.getExtensionObjectsTypes(),(function(t){var r=i.getObjectMetadata(t),o={extension:{name:i.getName()},objectMetadata:{name:r.getName(),isPrivate:r.isPrivate()}};y(e)||n.push.apply(n,Z(a,i.getAllStrExpressionsForObject(t),o)),n.push.apply(n,Z(a,i.getAllExpressionsForObject(t),o))})),(0,g.mapVector)(i.getBehaviorsTypes(),(function(t){var n=i.getBehaviorMetadata(t),o={extension:{name:i.getName()},behaviorMetadata:{name:n.getName(),isPrivate:n.isPrivate()}};y(e)||r.push.apply(r,Z(a,i.getAllStrExpressionsForBehavior(t),o)),r.push.apply(r,Z(a,i.getAllExpressionsForBehavior(t),o))}))})),[].concat((0,x.Z)(i),n,r)}(e.props.expressionType,e.props.i18n),e.props.scope),e.instructionsInfoTree=(0,I.f)(e.instructionsInfo,e.props.i18n),e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=(e.expressionType,e.scope,e.i18n,(0,m.Z)(e,L));return(0,M.jsx)(P.Z,(0,r.Z)({id:"expression-selector",style:A,instructionsInfo:this.instructionsInfo,instructionsInfoTree:this.instructionsInfoTree,iconSize:16,useSubheaders:!0,helpPagePath:"/all-features/expressions-reference"},t))}}]),n}(l.Component),R=n(29439),F=n(86578),D=n(61325),N=function(e){return 0!==(0,g.mapFor)(0,e.getParametersCount(),(function(t){return!e.getParameter(t).isCodeOnly()})).filter((function(e){return e})).length},_=function(e){var t=e.expressionMetadata,n=e.parameterValues,r=e.project,i=e.scope,a=e.globalObjectsContainer,o=e.objectsContainer,s=e.projectScopedContainersAccessor,u=e.parameterRenderingService,d=e.onChangeParameter;if(!u)return console.error("Missing parameterRenderingService for ExpressionParametersEditor"),null;var p=t.getParametersCount(),f={getParametersCount:function(){return p},getParameter:function(e){return n[e]||""}};return(0,M.jsxs)(D.ak,{children:[(0,g.mapFor)(0,t.getParametersCount(),(function(e){var c=t.getParameter(e),p=u.getParameterComponent(c.getType());return c.isCodeOnly()?null:(0,M.jsx)(l.Fragment,{children:(0,M.jsx)(p,{expressionMetadata:t,expression:f,parameterMetadata:c,parameterIndex:e,value:n[e],onChange:function(t){return d(e,t)},project:r,scope:i,globalObjectsContainer:a,objectsContainer:o,projectScopedContainersAccessor:s,parameterRenderingService:u})},e)})),!N(t)&&(0,M.jsx)(F.Z,{children:(0,M.jsx)(c.Trans,{id:"There is nothing to configure."})})]})},B=n(1773),U=n(86278),V=n(40243),H=n(4076),z={minHeightContainer:{minHeight:300,flex:1,flexDirection:"column"}},W=function(e){var t=e.project,n=e.scope,r=e.onDone,i=e.onRequestClose,a=e.globalObjectsContainer,o=e.objectsContainer,s=e.projectScopedContainersAccessor,u=e.expressionMetadata,d=e.parameterRenderingService,p=l.useState(Array(u.getParametersCount()).fill("")),f=(0,R.Z)(p,2),h=f[0],g=f[1];return(0,M.jsx)(B.ZP,{title:(0,M.jsx)(c.Trans,{id:"Enter the expression parameters"}),id:"expression-parameters-editor-dialog",open:!0,actions:[(0,M.jsx)(B.vF,{id:"apply-button",label:(0,M.jsx)(c.Trans,{id:"Apply"}),primary:!0,onClick:function(){return r(h)}},"apply")],secondaryActions:u.getHelpPath()?[(0,M.jsx)(H.Z,{helpPagePath:u.getHelpPath()},"help-button")]:[],onRequestClose:i,onApply:function(){return r(h)},children:(0,M.jsx)(V.sg,{noMargin:!0,children:(0,M.jsxs)("div",{style:z.minHeightContainer,children:[(0,M.jsx)(U.Z,{children:u.getDescription()}),(0,M.jsx)(_,{project:t,scope:n,globalObjectsContainer:a,objectsContainer:o,projectScopedContainersAccessor:s,expressionMetadata:u,parameterValues:h,onChangeParameter:function(e,t){g(h.map((function(n,r){return r===e?t:n})))},parameterRenderingService:d})]})})})},G=function(e,t,n){var r=t.getParametersCount();return e.filter((function(e,i){return!(i<n)&&(i<r&&!t.getParameter(i).isCodeOnly())}))},Y=function(e,t,n){var r=-1,i=-1,a=e.map((function(e,n){var a=t.getParameter(n);return a.isOptional()||(r=n),e.length>0?(i=n,e):a.getDefaultValue()})),o=Math.max(r,i,0);return a.filter((function(e,r){return n<=r&&r<=o&&!t.getParameter(r).isCodeOnly()}))},q=function(e){var t=e.metadata.getParameters(),n=(0,g.mapFor)(0,t.getParametersCount(),(function(e){return t.getParameterAt(e).getType()}));return e.scope.objectMetadata?G(n,e.metadata,1):e.scope.behaviorMetadata?G(n,e.metadata,2):G(n,e.metadata,0)},J={width:"100%",position:"absolute",whiteSpace:"pre-wrap",wordWrap:"break-word",color:"transparent"},X={backgroundColor:"rgba(244, 67, 54, 0.15)",borderSizing:"border-box",borderBottom:"3px solid rgba(244, 67, 54, 0.7)"},K=function(e){var t=e.value,n=e.style,i=e.highlights.slice().sort((function(e,t){return e.begin-t.begin})),a=[],o=0;return i.forEach((function(e,n){var r=Math.max(e.begin,o);r!==o&&a.push((0,M.jsx)("span",{children:t.substring(o,r)},"defaultText-".concat(n))),o<e.end&&(a.push((0,M.jsx)("span",{style:X,children:t.substring(r,e.end)},"highlightedText-".concat(n))),o=e.end)})),o<t.length&&a.push((0,M.jsx)("span",{children:t.substring(o)},"defaultText-end")),(0,M.jsx)("div",{style:(0,r.Z)((0,r.Z)({},J),n),children:a})},Q=n(71046),$=n.n(Q),ee=n(40041),te=n(49714),ne=n(82465),re=n(8278),ie=n(70464),ae=n.g.gd,oe=function(e,t,n,r,i,a){return e.filter((function(e){return!i||e.type===t})).map((function(e){return e.name&&e.parameters?{kind:"Expression",completion:e.name,replacementStartPosition:n,replacementEndPosition:r,enumeratedExpressionMetadata:e,addParenthesis:!0,hasVisibleParameters:0!==q(e).length,isExact:i,shouldConvertToString:"string"===a&&"number"===e.metadata.getReturnType()}:null})).filter(Boolean)},se=function(e,t,n){var r=e.gd;return b()((0,g.mapVector)(t,(function(t){var i=t.getCompletionKind();if(i===r.ExpressionCompletionDescription.ExpressionWithPrefix){var a=t.getObjectName();return t.getBehaviorName()?function(e,t){var n=t.getPrefix(),r=t.getType(),i=t.getBehaviorName(),a=t.isExact(),o=e.projectScopedContainersAccessor.get().getObjectsContainersList().getTypeOfBehavior(i,!0),s=T(r,o),l=(0,E.J)(S(s,n),e.scope);return oe(l,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),a,r)}(e,t):a?function(e,t){var n=t.getPrefix(),r=t.getType(),i=t.getObjectName(),a=t.isExact(),o=e.projectScopedContainersAccessor.get(),s=e.gd,l=o.getObjectsContainersList().getTypeOfObject(i),c=w(r,l),u=(0,E.J)(S(c,n),e.scope),d=oe(u,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),a,r),p=o.getObjectsContainersList().getBehaviorsOfObject(i,!0);return(0,g.mapVector)(p,(function(l){var c=o.getObjectsContainersList().getTypeOfBehaviorInObjectOrGroup(i,l,!0);if(c){var u=T(r,c),p=(0,E.J)(S(u,n),e.scope),f=oe(p,n,t.getReplacementStartPosition(),t.getReplacementEndPosition(),a,r);f.forEach((function(e){e.completion=l+s.PlatformExtension.getNamespaceSeparator()+e.completion})),d.push.apply(d,f)}})),d}(e,t):function(e,t,n){var r=t.getPrefix(),i=t.getType(),a=t.isExact(),o=k(i,n),s=(0,E.J)(S(o,r),e.scope);return oe(s,r,t.getReplacementStartPosition(),t.getReplacementEndPosition(),a,i)}(e,t,n)}return i===r.ExpressionCompletionDescription.Object?[{kind:"Object",completion:t.getCompletion(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),objectConfiguration:t.hasObjectConfiguration()?t.getObjectConfiguration():null,addDot:!r.ParameterMetadata.isObject(t.getType())}]:i===r.ExpressionCompletionDescription.BehaviorWithPrefix?function(e,t){var n=t.getPrefix().toLowerCase(),r=t.isExact(),i=t.getObjectName(),a=e.projectScopedContainersAccessor.get();return a.getObjectsContainersList().getBehaviorsOfObject(i,!0).toJSArray().filter((function(e){return e.toLowerCase().includes(n)})).map((function(e){var n=a.getObjectsContainersList().getTypeOfBehaviorInObjectOrGroup(i,e,!0);return{kind:"Behavior",completion:e,replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),addNamespaceSeparator:!0,isExact:r,behaviorType:n}}))}(e,t):i===r.ExpressionCompletionDescription.TextWithPrefix?function(e,t){var n=t.getPrefix(),r=t.getType(),i=e.project,a=e.scope,o=e.projectScopedContainersAccessor.get().getObjectsContainersList();if(0===o.getObjectsContainersCount())throw new Error("Called getAutocompletionsForText without any object container.");o.getObjectsContainersCount()>2&&console.error("Called getAutocompletionsForText with more than 2 object containers.");var s=o.getObjectsContainersCount()>1?o.getObjectsContainer(0):null,l=o.getObjectsContainer(o.getObjectsContainersCount()-1),c=[];if("layer"===r){var u=a.layout||a.eventsBasedObject;if(u)for(var d=u.getLayers(),p=0;p<d.getLayersCount();p++)c.push('"'.concat(d.getLayerAt(p).getName(),'"'))}else if("sceneName"===r){if(i)for(var f=0;f<i.getLayoutsCount();f++)c.push('"'.concat(i.getLayoutAt(f).getName(),'"'))}else if("stringWithSelector"===r)c=(0,te.kq)(t.getParameterMetadata()).map((function(e){return e.completion}));else if("objectPointName"===r){var h=t.getObjectName();if(!h)return[];var m=(0,ne.Z)(s,l,h);if(!m)return[];if("Sprite"!==m.getType())return[];var x=ae.asSpriteConfiguration(m.getConfiguration()).getAnimations();c=(0,re.ge)(x).map((function(e){return e.length>0?'"'.concat(e,'"'):null})).filter(Boolean)}else if("objectAnimationName"===r){var v=t.getObjectName();if(!v)return[];var b=(0,ne.Z)(s,l,v);if(!b)return[];if("Sprite"!==b.getType())return[];var C=ae.asSpriteConfiguration(b.getConfiguration()).getAnimations();c=(0,g.mapFor)(0,C.getAnimationsCount(),(function(e){var t=C.getAnimation(e).getName();return t.length>0?'"'.concat(t,'"'):null})).filter(Boolean)}else if("functionParameterName"===r){var j=a.eventsBasedBehavior||a.eventsBasedObject,y=j?j.getEventsFunctions():a.eventsFunctionsExtension?a.eventsFunctionsExtension.getEventsFunctions():null,Z=a.eventsFunction;if(Z&&y){var k=t.getParameterMetadata().getExtraInfo().split(",");c=(0,ie.I)(y,Z,k).map((function(e){return'"'.concat(e.getName(),'"')}))}}var w,T,S=(w=c,T=n,function(e,t,n){if(!t)return e;var r=t.toLowerCase();return e.filter((function(e){return-1!==n(e).toLowerCase().indexOf(r)}))}(w,T,(function(e){return e}))).sort(),P=t.isLastParameter();return S.map((function(e){return{kind:"Text",completion:e,replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),addParameterSeparator:!P}}))}(e,t):i===r.ExpressionCompletionDescription.Variable?[{kind:"Variable",completion:t.getCompletion(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),variableType:t.getVariableType(),variableScope:t.getVariableScope()}]:i===r.ExpressionCompletionDescription.Property?[{kind:"Property",completion:t.getCompletion(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),propertyType:t.getType()}]:i===r.ExpressionCompletionDescription.Parameter?[{kind:"Parameter",completion:t.getCompletion(),replacementStartPosition:t.getReplacementStartPosition(),replacementEndPosition:t.getReplacementEndPosition(),parameterType:t.getType()}]:[]})))},le=function(e){var t=e.expression,n=e.wordStartPosition,r=e.wordEndPosition,i=e.insertedWord,a=function(e){for(var t,n=[],r=new RegExp(/[^\w\d.:]/g);t=r.exec(e);)n.push(t.index);return Math.max.apply(Math,n)}(t.substring(0,n)),o=t.substring(0,a+1),s=t.substring(a+1,n);return{expression:o+"ToString("+s+i+")"+t.substring(r),caretLocation:o.length+s.length+i.length+9}},ce=n(65111),ue=function(e){return e.renderEverything?0:Math.max(0,e.autocompletions.length-7)},de=function(e,t){var n=e.autocompletions.length!==t.length;return{autocompletions:t,selectedCompletionIndex:n?0:e.selectedCompletionIndex,renderEverything:!n&&e.renderEverything}},pe=n(3798),fe=n(2632),he=n(29571),ge=n(20914),me=n(24910),xe=n(82811),ve=n(39361),be=n(37502),Ce=n(22536),je=n.g.gd,ye={overflow:"hidden",overflowWrap:"break-word"},Ze={maxWidth:16,maxHeight:16},ke=function(e){return"number"===e?(0,xe.q)()[je.Variable.Number]:"boolean"===e?(0,xe.q)()[je.Variable.Boolean]:(0,xe.q)()[je.Variable.String]},we=l.memo((function(e){var t=e.src,n="dark"===l.useContext(me.Z).palette.type&&(t.startsWith("data:image/svg+xml")||t.includes("_black"));return(0,M.jsx)("img",{src:t,alt:"",style:(0,r.Z)((0,r.Z)({},Ze),{},{filter:n?"grayscale(1) invert(1)":void 0})})})),Te=l.forwardRef((function(e,t){var n=e.icon,r=e.iconSrc,i=e.secondaryIcon,a=e.label,o=e.parametersLabel,s=e.isSelected,l=e.onClick,c=a.length>46?a.substr(0,46)+"\u2026":a;return(0,M.jsx)(pe.Z,{style:Pe.button,onPointerDown:function(e){return e.preventDefault()},onClick:l,ref:t,children:(0,M.jsxs)(D.pJ,{noMargin:!0,expand:!0,children:[n||(r?(0,M.jsx)(we,{src:r}):null),i,(0,M.jsxs)(U.Z,{style:ye,noMargin:!0,align:"left",children:[s?(0,M.jsx)("b",{children:c}):c,o&&(0,M.jsxs)(M.Fragment,{children:["(",(0,M.jsx)("i",{children:o}),")"]})]})]})})})),Se=function(e){var t=e.expressionMetadata,n=e.i18n,r=e.parameterRenderingService;return(0,M.jsxs)(V.sg,{noMargin:!0,children:[(0,M.jsx)(U.Z,{style:ye,size:"body2",children:t.getDescription()}),(0,g.mapFor)(0,t.getParameters().getParametersCount(),(function(e){var i=t.getParameters().getParameterAt(e);return function(e,t){var n=e.getParameter(t);return!n.isCodeOnly()&&(0!==t||"object"!==n.getType())&&(1!==t||"behavior"!==n.getType())}(t,e)&&(0,M.jsxs)(U.Z,{style:ye,size:"body2",children:[(0,M.jsx)("i",{children:n._(r.getUserFriendlyTypeName(i.getType()))})," \uff0d "+i.getDescription()]},e)}))]})},Pe={container:{width:370,maxHeight:150,display:"flex",overflowX:"hidden"},button:{width:"100%",paddingLeft:8,paddingRight:8,justifyContent:"flex-start"},tooManyTextContainer:{width:"100%"},popperStyle:{zIndex:d.Z.tooltip+100,flex:1,display:"flex",flexDirection:"row"}};function Ie(e){var t=e.project,n=e.expressionAutocompletions,r=e.remainingCount,i=e.selectedCompletionIndex,a=e.anchorEl,o=e.onChoose,s=e.onScroll,d=e.parameterRenderingService,p=l.useRef(null),f=l.useRef(null);return l.useEffect((function(){p.current&&f.current&&p.current.scrollTo(f.current)}),[p,f,i]),0===n.length?null:(0,M.jsx)(c.I18n,{children:function(e){var l=e.i18n;return(0,M.jsxs)(u.Z,{style:Pe.popperStyle,open:!0,anchorEl:a,placement:"bottom-start",disablePortal:!1,children:[(0,M.jsx)(ge.Z,{variant:"outlined",square:!0,style:Pe.container,background:"light",children:(0,M.jsxs)(fe.Z,{ref:p,onScroll:s,children:[n.map((function(e,n){var r=i===n,a=r?f:void 0,s=e.enumeratedExpressionMetadata?function(e,t,n){return q(n).map((function(n){var r=e.getUserFriendlyTypeName(n);return r?t._(r):n})).join(", ")}(d,l,e.enumeratedExpressionMetadata):null,c=e.completion,u="Expression"===e.kind?e.enumeratedExpressionMetadata.iconFilename:"Object"===e.kind?t&&e.objectConfiguration?he.Z.getThumbnail(t,e.objectConfiguration):"res/types/object.png":"Behavior"===e.kind?t&&e.behaviorType?je.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),e.behaviorType).getIconFilename():"res/types/behavior.png":null,p="Variable"===e.kind?e.variableScope===je.VariablesContainer.Unknown?null:(0,ve.ik)(e.variableScope):"Property"===e.kind?be.Z:"Parameter"===e.kind?Ce.Z:null,h=p?(0,M.jsx)(p,{style:Ze}):null,g="Variable"===e.kind?(0,xe.q)()[e.variableType]:"Property"===e.kind?ke(je.ValueTypeMetadata.getPrimitiveValueType(je.ValueTypeMetadata.convertPropertyTypeToValueType(e.propertyType))):"Parameter"===e.kind?ke(je.ValueTypeMetadata.getPrimitiveValueType(e.parameterType)):null,m=g?(0,M.jsx)(g,{style:Ze}):null;return"Expression"===e.kind&&e.isExact?null:(0,M.jsx)(Te,{icon:h,iconSrc:u,secondaryIcon:m,label:c,parametersLabel:s,onClick:function(){return o(e)},isSelected:r,ref:a},n)})),r>0&&(0,M.jsx)(V.sg,{justifyContent:"flex-start",children:(0,M.jsx)(U.Z,{children:(0,M.jsx)(c.Trans,{id:"And others..."})})})]})}),null!==i&&"Expression"===n[i].kind&&!n[i].isExact&&(0,M.jsx)(ge.Z,{variant:"outlined",square:!0,style:Pe.container,background:"light",children:(0,M.jsx)(fe.Z,{autoHideScrollbar:!0,children:(0,M.jsx)(V.sg,{children:(0,M.jsx)(V.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,M.jsx)(Se,{expressionMetadata:n[i].enumeratedExpressionMetadata.metadata,i18n:l,parameterRenderingService:d})})})})})]})}})}var Ee=n(6996),Me=n.g.gd,Le={container:{display:"flex",alignItems:"flex-start"},textFieldContainer:{flex:1,minWidth:200},textFieldAndHighlightContainer:{position:"relative"},expressionSelectorPopoverContentSmall:{display:"flex",maxHeight:250},expressionSelectorPopoverContent:{display:"flex",maxHeight:350},input:{fontFamily:'"Lucida Console", Monaco, monospace',lineHeight:1.4},backgroundHighlightingWithFloatingLabel:{marginTop:22,paddingLeft:12,paddingRight:12,boxSizing:"border-box"},backgroundHighlightingInline:{marginTop:0,paddingLeft:0,paddingRight:0},backgroundHighlightingInlineWithFloatingLabel:{marginTop:22,paddingLeft:0,paddingRight:0}},Ae=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o)))._field=null,e._fieldElementWidth=null,e._inputElement=null,e.state={popoverOpen:!1,parametersDialogOpen:!1,selectedExpressionInfo:null,validatedValue:e.props.value,errorText:null,errorHighlights:[],autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}},e.focus=function(t){e._field&&(e._field.focus(t),t&&t.selectAll&&e._inputElement&&e._inputElement.setSelectionRange(0,e.props.value.toString().length),e._enqueueValidation())},e._openExpressionPopover=function(){e.setState({popoverOpen:!0})},e._handleFocus=function(e){e.preventDefault()},e._handleRequestClose=function(){e.setState({popoverOpen:!1})},e._handleChange=function(t){e.setState({validatedValue:t},(function(){return e._enqueueValidation()}))},e._handleBlur=function(t){e.props.onChange&&e.props.onChange(t),e.setState({validatedValue:t},(function(){e._enqueueValidation.cancel(),e._doValidation(),e.setState({autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}})}))},e._handleBlurEvent=function(t){e._handleBlur(t.currentTarget.value)},e._shouldOpenParametersDialog=function(e){return N(e.metadata)},e._handleExpressionChosen=function(t){var n={popoverOpen:!1};e._shouldOpenParametersDialog(t)?n=(0,r.Z)((0,r.Z)({},n),{},{parametersDialogOpen:!0,selectedExpressionInfo:t}):e.insertExpression(t,[]),e.setState(n)},e.insertExpression=function(t,n){if(e._inputElement){var r=e.props,i=r.projectScopedContainersAccessor,a=r.expressionType,o=r.value,s=e._inputElement.selectionStart,l=new Me.ExpressionParser2,c=l.parseExpression(o.substr(0,s)+"fakeIdentifier"+o.substr(s)).get(),u=Me.ExpressionNodeLocationFinder.getNodeAtPosition(c,s+14-1),d=Me.ExpressionTypeFinder.getType(Me.JsPlatform.get(),i.get(),a,u),p="number"===t.metadata.getReturnType()&&"string"===d,f=function(e,t,n){var r=e.name||"",i="";if(e.scope.objectMetadata){var a=t[0],o=Y(t,e.metadata,1).join(", ");i="".concat(a,".").concat(r,"(").concat(o,")")}else if(e.scope.behaviorMetadata){var s=t[0],l=t[1],c=Y(t,e.metadata,2).join(", ");i="".concat(s,".").concat(l,"::").concat(r,"(").concat(c,")")}else{var u=Y(t,e.metadata,0).join(", ");i="".concat(r,"(").concat(u,")")}return n.shouldConvertToString?"ToString(".concat(i,")"):i}(t,n,{shouldConvertToString:p});l.delete();var h=o.substr(0,s)+f+o.substr(s);e.props.onChange&&e.props.onChange(h),e.setState({validatedValue:h},(function(){return e._enqueueValidation()})),setTimeout((function(){e._field&&e._field.focus(),setTimeout((function(){e._inputElement&&e._inputElement.setSelectionRange(s,s+f.length)}),5)}),5)}},e._onExpressionAutocompletionsScroll=function(){var t;e.state.autocompletions.renderEverything||e.setState({autocompletions:(t=e.state.autocompletions,(0,r.Z)((0,r.Z)({},t),{},{renderEverything:!0}))})},e._insertAutocompletion=function(t){if(!t.isExact){var n=e._inputElement?e._inputElement.selectionStart:0,r=e.state.validatedValue,i="FullExpression"===t.kind?{expression:t.completion,caretLocation:t.completion.length}:function(e,t){var n=e.expression,r=e.caretLocation,i=t.addDot,a=t.addParameterSeparator,o=t.addNamespaceSeparator,s=t.addParenthesis,l=t.completion,c=t.shouldConvertToString,u=t.replacementStartPosition,d=t.replacementEndPosition,p=t.hasVisibleParameters,f=function(e){var t=i?".":a?", ":o?"::":s?"()":"",n=!e||!t||e[0]!==t[0];return l+(n?t:"")};if(r>n.length&&(r=n.length),0===r||!n){var h=f(void 0)+n;return{caretLocation:h.length,expression:c?"ToString(".concat(h,")"):h}}var g=u||0,m=d||n.length,x=f(n[m]),v=c?le({expression:n,insertedWord:x,wordEndPosition:m,wordStartPosition:g}):function(e){var t=e.expression,n=e.wordStartPosition,r=e.wordEndPosition,i=e.insertedWord,a=t.substring(0,n);return{expression:a+i+t.substring(r),caretLocation:a.length+i.length}}({expression:n,insertedWord:x,wordEndPosition:m,wordStartPosition:g});return s&&p&&(v.caretLocation=v.caretLocation-1),v}({expression:r,caretLocation:n},{completion:t.completion,replacementStartPosition:t.replacementStartPosition,replacementEndPosition:t.replacementEndPosition,addParenthesis:t.addParenthesis,addDot:t.addDot,addParameterSeparator:t.addParameterSeparator,addNamespaceSeparator:t.addNamespaceSeparator,hasVisibleParameters:t.hasVisibleParameters,shouldConvertToString:"Expression"===t.kind?t.shouldConvertToString:null}),a=i.expression,o=i.caretLocation;e._field&&e._field.forceSetValue(a),e.props.onChange&&e.props.onChange(a),e.setState({validatedValue:a},(function(){e._enqueueValidation(),e._field&&e._field.forceSetSelection(o,o)}))}},e._enqueueValidation=$()((function(){e._doValidation()}),250),e._doValidation=function(){var t=e.props,n=t.project,r=t.projectScopedContainersAccessor,i=t.expressionType,a=t.parameterMetadata,o=t.scope,s=t.onGetAdditionalAutocompletions,l=t.onExtractAdditionalErrors;if(!n)return null;var c=e.state.validatedValue,u=new Me.ExpressionParser2,d=u.parseExpression(c).get(),p=function(e,t,n,r,i,a){var o=new Me.ExpressionValidator(Me.JsPlatform.get(),n.get(),r,i?i.getExtraInfo():"");a.visit(o);var s=o.getAllErrors(),l=(0,g.mapVector)(s,(function(e){return{begin:e.getStartPosition(),end:e.getEndPosition()+1,message:e.getMessage(),type:"error"}})),c=Math.max(0,l.length-10),u=l.length>1,d=(c>0?l.slice(0,10):l).map((function(e,t){return(u?"[".concat(t+1,"] "):"")+e.message})).join(" ");return o.delete(),{errorText:d,errorHighlights:l}}(Me.JsPlatform.get(),0,r,i,a,d),f=p.errorText,h=p.errorHighlights,m=[l?l(c,d):null,f].filter(Boolean).join(" - ");if(c.length>0&&" "===c.charAt(c.length-1))e.setState((function(e){return{errorText:m,errorHighlights:h,autocompletions:{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1}}}));else{var x=e._inputElement?e._inputElement.selectionStart:0,v=Me.ExpressionCompletionFinder.getCompletionDescriptionsFor(Me.JsPlatform.get(),r.get(),i,d,x-1),b=se({gd:Me,project:n,projectScopedContainersAccessor:r,scope:o},v,null),C=s?s(c).concat(b):b;u.delete(),e.setState((function(e){return{errorText:m,errorHighlights:h,autocompletions:de(e.autocompletions,C)}}))}},e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this._field&&(this._fieldElementWidth=this._field.getFieldWidth(),this._inputElement=this._field?this._field.getInputNode():null)}},{key:"componentWillUnmount",value:function(){this._enqueueValidation.cancel()}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,i=t.expressionType,a=t.parameterMetadata,o=t.project,s=t.scope,g=t.globalObjectsContainer,m=t.objectsContainer,x=t.projectScopedContainersAccessor,v=t.parameterRenderingService,b=a?a.getDescription():this.props.isInline?void 0:"-",C=a?a.getLongDescription():void 0,j={width:this._fieldElementWidth||"auto",marginLeft:-5,zIndex:d.Z.tooltip+100},y=this.props.isInline?b?Le.backgroundHighlightingInlineWithFloatingLabel:Le.backgroundHighlightingInline:Le.backgroundHighlightingWithFloatingLabel;return(0,M.jsx)(c.I18n,{children:function(t){var a=t.i18n;return(0,M.jsxs)(l.Fragment,{children:[(0,M.jsx)(D.ad,{margin:e.props.isInline?"none":"dense",renderTextField:function(){return(0,M.jsxs)("div",{style:Le.textFieldContainer,children:[(0,M.jsxs)("div",{style:Le.textFieldAndHighlightContainer,children:[(0,M.jsx)(K,{value:e.state.validatedValue,style:(0,r.Z)((0,r.Z)({},Le.input),y),highlights:e.state.errorHighlights}),(0,M.jsx)(h.Z,{id:e.props.id,margin:e.props.isInline?"none":"dense",value:n,floatingLabelText:b,helperMarkdownText:C,hintText:"string"===i?'""':void 0,inputStyle:Le.input,onChange:e._handleChange,onBlur:e._handleBlurEvent,ref:function(t){return e._field=t},onFocus:e._handleFocus,errorText:e.state.errorText,onClick:function(){return e._enqueueValidation()},onKeyDown:function(t){var n=function(e,t){var n=t.event,i=t.onUpdateAutocompletions,a=t.onInsertAutocompletion;if("ArrowDown"!==n.key&&"ArrowUp"!==n.key&&"ArrowLeft"!==n.key&&"ArrowRight"!==n.key||i(),!e.autocompletions.length)return e;if("ArrowDown"===n.key)return n.preventDefault(),(0,r.Z)((0,r.Z)({},e),{},{renderEverything:!0,selectedCompletionIndex:(e.selectedCompletionIndex+1)%e.autocompletions.length});if("ArrowUp"===n.key)return n.preventDefault(),(0,r.Z)((0,r.Z)({},e),{},{renderEverything:!0,selectedCompletionIndex:(e.autocompletions.length+e.selectedCompletionIndex-1)%e.autocompletions.length});if((0,ce.W$)(n))return n.preventDefault(),n.stopPropagation(),{autocompletions:[],selectedCompletionIndex:0,renderEverything:!1};if((0,ce.ph)(n)||(0,ce.xj)(n)){var o=e.autocompletions[e.selectedCompletionIndex];if(o){if(o.isExact)return e;a(o),n.stopPropagation()}n.preventDefault()}return e}(e.state.autocompletions,{event:t,onUpdateAutocompletions:e._enqueueValidation,onInsertAutocompletion:e._insertAutocompletion});if(e.setState({autocompletions:n}),(0,ce.W$)(t)||(0,ce.Fc)(t)||(0,ce.ph)(t)){var i=t.currentTarget.value;e.props.onChange&&e.props.onChange(i)}},multiline:!0,fullWidth:!0})]}),e._inputElement&&e.state.popoverOpen&&(0,M.jsx)(ee.Z,{onClickAway:e._handleRequestClose,children:(0,M.jsx)(u.Z,{style:j,open:e.state.popoverOpen,anchorEl:e._inputElement,placement:"bottom",disablePortal:!0,children:(0,M.jsx)(Ee.Ip,{children:function(t){var n=t.isMobile;return(0,M.jsx)(ge.Z,{style:n?Le.expressionSelectorPopoverContentSmall:Le.expressionSelectorPopoverContent,background:"light",children:(0,M.jsx)(O,{i18n:a,selectedType:"",onChoose:function(t,n){e._handleExpressionChosen(n)},expressionType:i,focusOnMount:!0,scope:s})})}})})}),e._inputElement&&!e.state.popoverOpen&&v&&(0,M.jsx)(Ie,{project:o,anchorEl:e._inputElement,expressionAutocompletions:(t=e.state.autocompletions,0===ue(t)?t.autocompletions:t.autocompletions.slice(0,7)),remainingCount:ue(e.state.autocompletions),selectedCompletionIndex:e.state.autocompletions.selectedCompletionIndex,onScroll:e._onExpressionAutocompletionsScroll,onChoose:function(t){e._insertAutocompletion(t),setTimeout((function(){return e.focus()}),50)},parameterRenderingService:v})]});var t},renderButton:function(t){return(0,M.jsxs)(l.Fragment,{children:[!e.props.isInline&&e.props.renderExtraButton&&e.props.renderExtraButton({style:t,onChange:e._handleBlur}),!e.props.isInline&&(0,M.jsx)(f.Z,{id:"open-".concat(i,"-expression-popover-button"),icon:(0,M.jsx)(p.Z,{}),label:"string"===i?'"ABC"':"number"===i?"123":"",primary:!0,style:t,onClick:e._openExpressionPopover})]})}}),e.state.parametersDialogOpen&&e.state.selectedExpressionInfo&&(0,M.jsx)(W,{project:o,scope:s,globalObjectsContainer:g,objectsContainer:m,projectScopedContainersAccessor:x,expressionMetadata:e.state.selectedExpressionInfo.metadata,onDone:function(t){e.state.selectedExpressionInfo&&(e.insertExpression(e.state.selectedExpressionInfo,t),e.setState({parametersDialogOpen:!1,selectedExpressionInfo:null}))},onRequestClose:function(){e.setState({parametersDialogOpen:!1,selectedExpressionInfo:null})},parameterRenderingService:v})]})}})}}]),n}(l.Component)},3970:function(e,t,n){"use strict";n.d(t,{eh:function(){return j},tJ:function(){return Z}});var r=n(1413),i=n(29439),a=n(74165),o=n(15861),s=n(28381),l=n(36600),c=n(81683),u=n(90242),d=n(61325),p=n(9708),f=n(73321),h=n(35901),g=n(14737),m=n(83297),x=n(9383),v=n(44634),b=n(29343),C=function(e,t){if(!e)return t;var n=e.find((function(e){return'"'.concat(e.id,'"')===t}));return n?n.name:t},j=function(){var e=s.useContext(p.Z),t=e.leaderboards,n=e.listLeaderboards,r=s.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Unable to fetch leaderboards",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[n]);return s.useEffect((function(){t||r()}),[r,t]),t};t.ZP=s.forwardRef((function(e,t){var n=(0,m.k)(),a=j(),o=s.useState(!1),p=(0,i.Z)(o,2),C=p[0],y=p[1],Z=s.useRef(null),k=function(e){Z.current&&Z.current.focus(e)};s.useImperativeHandle(t,(function(){return{focus:k}}));var w=a&&!!a.find((function(t){return'"'.concat(t.id,'"')===e.value})),T=s.useState(!a||!!e.value&&!w),S=(0,i.Z)(T,2),P=S[0],I=S[1],E=function(t,n){e.onChange(t.target.value)},M=function(t){e.onChange(t)},L=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,A=a&&a.length>0,O=s.useMemo((function(){return a&&A?a.map((function(e){return(0,b.jsx)(u.Z,{value:'"'.concat(e.id,'"'),label:"".concat(e.name," ").concat(e.id?"(".concat((0,g.GA)(e.id),")"):""),shouldNotTranslate:!0},e.id)})):[(0,b.jsx)(u.Z,{disabled:!0,value:"empty",label:""},"empty")]}),[a,A]);return(0,b.jsx)(l.I18n,{children:function(t){var i=t.i18n;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.ad,{renderTextField:function(){return P?(0,b.jsx)(h.Z,(0,r.Z)((0,r.Z)({ref:Z,expressionType:"string"},e),{},{onChange:M,onExtractAdditionalErrors:function(e,t){if(!a)return n?i._({id:"Your game may not be registered, create one in the leaderboard manager."}):i._({id:"Unable to fetch leaderboards as you are offline."})}})):(0,b.jsx)(c.Z,{ref:Z,value:e.value,onChange:E,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:L,translatableHintText:A?e.parameterMetadata&&e.parameterMetadata.isOptional()?{id:"Choose a leaderboard (optional)"}:{id:"Choose a leaderboard"}:{id:"No leaderboards"},helperMarkdownText:A?e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null:i._({id:"There are currently no leaderboards created for this game. Open the leaderboards manager to create one."}),children:O})},renderButton:function(e){return(0,b.jsx)(x.Z,{id:"open-leaderboard-admin-button",icon:(0,b.jsx)(v.Z,{}),style:e,primary:!0,onClick:function(){return y(!0)},buildMenuTemplate:function(e){return[{label:P?e._({id:"Select the leaderboard from a list"}):e._({id:"Enter the leaderboard id as a text or an expression"}),disabled:!a,click:function(){return I(!P)}}]}})}}),C&&!!e.project&&(0,b.jsx)(f.Z,{onClose:function(){return y(!1)},open:C,project:e.project,leaderboardId:w?e.value.replace(/"/g,""):void 0})]})}})}));var y=function(e){var t=e.value,n=e.parameterMetadata,r=e.InvalidParameterValue,i=j();return t?(0,b.jsx)("span",{children:C(i,t)}):n.isOptional()?(0,b.jsx)("span",{children:(0,b.jsx)(l.Trans,{id:"No leaderboard chosen"})}):(0,b.jsx)(r,{isEmpty:!0,children:(0,b.jsx)(l.Trans,{id:"Choose a leaderboard"})})},Z=function(e){return(0,b.jsx)(y,(0,r.Z)({},e))}},49714:function(e,t,n){"use strict";n.d(t,{c6:function(){return i},j2:function(){return c},jR:function(){return s},jz:function(){return o},kC:function(){return a},kq:function(){return l}});var r=n.g.gd,i=function(e){var t=e.instructionMetadata,n=e.instruction,i=e.expressionMetadata,a=e.expression,o=e.parameterIndex;if(void 0===o||null==o)return null;var s=null;if(t&&n){var l=r.ParameterMetadataTools.getObjectParameterIndexFor(t.getParameters(),o);l>=0&&l<n.getParametersCount()&&(s=n.getParameter(l).getPlainString())}else if(i&&a){var c=r.ParameterMetadataTools.getObjectParameterIndexFor(i.getParameters(),o);c>=0&&c<a.getParametersCount()&&(s=a.getParameter(c))}return s},a=function(e,t){var n=r.ParameterMetadataTools.getObjectParameterIndexFor(e,t);return n<0||n>=e.getParametersCount()?"":e.getParameterAt(n).getExtraInfo()},o=function(e){var t=e.instruction,n=e.expression,r=e.parameterIndex;if(void 0===r||null==r)return null;if(t){if(r>=1&&r<t.getParametersCount())return t.getParameter(r-1).getPlainString()}else if(n&&r>=1&&r<n.getParametersCount())return n.getParameter(r-1);return null},s=function(e){if(!e)return null;var t=e.trim();return t.length>=2&&'"'===t[0]&&'"'===t[t.length-1]?t.substr(1,t.length-2):null},l=function(e){return c(e).map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))},c=function(e){if(!e)return[];try{return JSON.parse(e.getExtraInfo())}catch(t){console.error("The parameter seems misconfigured, as an array of choices could not be extracted - verify that your properly wrote a list of choices in JSON format. Full exception is:",t)}return[]}},39361:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Y},mz:function(){return H},ik:function(){return W},Kn:function(){return G},qH:function(){return q}});var r=n(4942),i=n(93433),a=n(29439),o=n(28381),s=n(36600),l=n(60022),c=n(82954),u=n.n(c),d=n(23895),p=n(72402),f=n(61325),h=n(44634),g=n(81683),m=n(90242),x=n(99402),v=n(79441),b=n(22654),C=n(27195),j=n(92022),y=n(23198),Z=n(1413),k=n(78118),w=n(29343),T=o.memo((function(e){return(0,w.jsxs)(k.Z,(0,Z.Z)((0,Z.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.05 2.25C5.66527 2.25 1.30005 6.61522 1.30005 12C1.30005 17.3068 5.16195 21.75 10.15 21.75C10.5643 21.75 10.9 21.4142 10.9 21C10.9 20.9921 10.8999 20.9843 10.8997 20.9765C10.9044 20.8116 10.855 20.644 10.7476 20.5024L10.7447 20.4986L10.7275 20.475C10.7113 20.4525 10.6859 20.4169 10.6527 20.3683C10.5862 20.2713 10.4883 20.123 10.3695 19.9269C10.1316 19.5344 9.81063 18.9517 9.48855 18.2055C9.30174 17.7727 9.115 17.2858 8.94397 16.75H10C10.4142 16.75 10.75 16.4142 10.75 16C10.75 15.5858 10.4142 15.25 10 15.25H8.54497C8.33571 14.2722 8.19995 13.1822 8.19995 11.9999C8.19995 11.2063 8.26111 10.4544 8.36461 9.75H13.5585C13.6779 10.5907 13.75 11.5089 13.75 12.5C13.75 12.9142 14.0858 13.25 14.5 13.25C14.9142 13.25 15.25 12.9142 15.25 12.5C15.25 11.517 15.1839 10.5991 15.0725 9.75H19.0077C19.1972 10.5704 19.3 11.4852 19.3 12.5C19.3 12.9142 19.6358 13.25 20.05 13.25C20.4643 13.25 20.8 12.9142 20.8 12.5C20.8 9.09006 19.7385 6.50325 17.9332 4.77129C16.1348 3.04596 13.6827 2.25 11.05 2.25ZM8.66049 8.25C8.89434 7.30819 9.19135 6.48293 9.48855 5.79437C9.81063 5.04815 10.1316 4.46551 10.3695 4.07301C10.4432 3.95135 10.5089 3.84811 10.564 3.76408C10.7248 3.75474 10.8869 3.75 11.05 3.75C11.208 3.75 11.3647 3.75322 11.52 3.75964L11.5693 3.83921C11.6147 3.9122 11.6588 3.98297 11.6975 4.05062C11.9206 4.44049 12.2232 5.02758 12.5275 5.79773C12.7955 6.47634 13.0648 7.29687 13.2821 8.25H8.66049ZM14.8175 8.25C14.5712 7.07524 14.2476 6.06954 13.9226 5.24665C13.7347 4.77099 13.5463 4.35632 13.3719 4.00523C14.7414 4.32399 15.9433 4.94093 16.8948 5.85371C17.5558 6.48792 18.1135 7.28175 18.5249 8.25H14.8175ZM7.11905 8.25C7.38602 7.06669 7.7488 6.03994 8.11135 5.19995C8.28712 4.79273 8.46314 4.42865 8.62873 4.11103C6.48101 4.76942 4.70627 6.28078 3.69961 8.25H7.11905ZM3.1106 9.75C2.9083 10.4652 2.80005 11.22 2.80005 12C2.80005 13.1608 3.0095 14.2578 3.38654 15.25H7.01404C6.82147 14.2606 6.69995 13.1719 6.69995 11.9999C6.69995 11.2105 6.75508 10.4589 6.84992 9.75H3.1106ZM4.13147 16.75C5.20838 18.4661 6.8524 19.6874 8.74001 20.0984C8.54326 19.7347 8.3271 19.2998 8.11135 18.7999C7.85515 18.2063 7.59883 17.5195 7.37629 16.75H4.13147Z",fill:"currentColor"}),(0,w.jsx)("path",{d:"M22.4942 15.3819C22.3632 14.9889 21.9385 14.7766 21.5455 14.9075C21.1526 15.0385 20.9402 15.4632 21.0712 15.8562C21.3843 16.7958 21.2333 17.3532 21.0239 17.6528C20.8061 17.9644 20.4186 18.1536 19.9579 18.1536C19.4622 18.1536 19.1791 18.0254 18.9403 17.826C18.6567 17.5893 18.407 17.2324 18.0273 16.6628C17.6211 16.0535 17.1754 15.5874 16.6271 15.2828C16.0737 14.9753 15.4821 14.869 14.8487 14.869C13.1915 14.869 11.849 16.4885 12.2885 18.6857C12.3697 19.0919 12.7649 19.3553 13.171 19.2741C13.5772 19.1928 13.8406 18.7977 13.7594 18.3915C13.4689 16.9393 14.3162 16.369 14.8487 16.369C15.3101 16.369 15.6308 16.4452 15.8986 16.594C16.1713 16.7455 16.4555 17.0093 16.7792 17.4949L16.7899 17.5108C17.1369 18.0314 17.5024 18.5796 17.979 18.9775C18.5053 19.4168 19.1346 19.6536 19.9579 19.6536C20.8163 19.6536 21.7061 19.2953 22.2534 18.512C22.8091 17.7169 22.9109 16.632 22.4942 15.3819Z",fill:"currentColor"})]}))})),S=n(3247),P=o.memo((function(e){return(0,w.jsxs)(k.Z,(0,Z.Z)((0,Z.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5467 15.2885C21.9397 15.1575 22.3644 15.3699 22.4954 15.7628C22.9101 17.0072 22.809 18.0878 22.2554 18.88C21.7101 19.6604 20.8236 20.0172 19.9687 20.0172C19.1489 20.0172 18.522 19.7815 17.9977 19.3438C17.5231 18.9477 17.1593 18.4019 16.8142 17.8843L16.8034 17.8681C16.4817 17.3855 16.1994 17.1236 15.9288 16.9733C15.6632 16.8257 15.3449 16.75 14.8864 16.75C14.3597 16.75 13.5181 17.3145 13.8067 18.7571C13.8879 19.1633 13.6245 19.5584 13.2183 19.6396C12.8122 19.7209 12.417 19.4575 12.3358 19.0513C11.8982 16.8637 13.2349 15.25 14.8864 15.25C15.5169 15.25 16.1061 15.3558 16.6573 15.662C17.2035 15.9655 17.6472 16.4296 18.0515 17.0361C18.4293 17.6028 18.6774 17.9573 18.9589 18.1923C19.1958 18.39 19.4764 18.5172 19.9687 18.5172C20.4259 18.5172 20.8101 18.3295 21.0258 18.0208C21.2332 17.724 21.3836 17.171 21.0723 16.2372C20.9414 15.8442 21.1537 15.4195 21.5467 15.2885Z",fill:"currentColor"}),(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9432 4.31562C11.1384 4.22813 11.3616 4.22813 11.5568 4.31562L18.7912 7.55864C18.8534 7.58487 18.9113 7.61926 18.9637 7.66045C19.0011 7.68989 19.0354 7.72268 19.0663 7.75827C19.1807 7.88993 19.25 8.06188 19.25 8.25V13.5C19.25 13.9142 18.9142 14.25 18.5 14.25C18.0858 14.25 17.75 13.9142 17.75 13.5V9.40812L12 11.9857V14.5C12 14.9142 11.6642 15.25 11.25 15.25C10.8358 15.25 10.5 14.9142 10.5 14.5V11.9857L4.75 9.40812V15.7687L10.3125 18.3182C10.689 18.4908 10.8544 18.9359 10.6818 19.3125C10.5092 19.689 10.0641 19.8544 9.68751 19.6818L3.70293 16.9389C3.66548 16.9227 3.62961 16.9036 3.59562 16.8818C3.50238 16.8222 3.42589 16.7444 3.36877 16.6552C3.28869 16.5302 3.24668 16.383 3.25 16.2331V8.25C3.25 8.06185 3.31928 7.88988 3.43373 7.75821C3.46418 7.72314 3.49797 7.69079 3.53477 7.66169C3.58749 7.61994 3.64596 7.58513 3.70879 7.55863L10.9432 4.31562ZM5.83349 8.25L11.25 10.6781L16.6665 8.25L11.25 5.82191L5.83349 8.25Z",fill:"currentColor"})]}))})),I=n(64680),E=n(37502),M=n(22536),L=n(96591),A=n(1491),O=n.g.gd,R=0,F=1,D=2,N=3,_=4,B=5,U=6,V=7,H=function(e){var t=e.indexOf("."),n=e.indexOf("[");return-1!==t||-1!==n?e.substring(0,Math.min(-1===t?e.length:t,-1===n?e.length:n)):e},z=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)return R;for(var a=0;a<e.length;++a){var o=e[a];if("["===o)break;if(" "===o)return D;if('"'===o)return F;if("("===o||"+"===o||"-"===o||"/"===o||"*"===o)return N}var s=H(e);if(t&&!t.some((function(e){return e.has(s)})))return _;if(!r)return R;var l=r.get();if(!i&&l.getObjectsContainersList().hasObjectOrGroupNamed(s))return B;if(e.length!==s.length&&n){var c=n(s,l);if(c===O.VariablesContainer.Parameters)return U;if(c===O.VariablesContainer.Properties)return V}return R},W=function(e){switch(e){case O.VariablesContainer.Global:case O.VariablesContainer.ExtensionGlobal:return T;case O.VariablesContainer.Scene:case O.VariablesContainer.ExtensionScene:return S.Z;case O.VariablesContainer.Object:return P;case O.VariablesContainer.Local:return I.Z;case O.VariablesContainer.Parameters:return M.Z;case O.VariablesContainer.Properties:return E.Z;default:return y.Z}},G=function(e){switch(e){case O.Variable.Number:return v.Z;case O.Variable.String:return x.Z;case O.Variable.Boolean:return b.Z;case O.Variable.Array:return C.Z;case O.Variable.Structure:return j.Z;default:return y.Z}},Y=o.forwardRef((function(e,t){var n=e.project,r=e.projectScopedContainersAccessor,c=e.variablesContainers,u=e.enumerateVariables,d=e.instruction,x=e.forceDeclaration,v=e.value,b=e.onChange,C=e.isInline,j=e.onOpenDialog,y=e.parameterMetadata,Z=e.onRequestClose,k=e.onApply,T=e.id,S=e.onInstructionTypeChanged,P=e.isObjectVariable,I=e.getVariableSourceFromIdentifier,E=o.useRef(null),M=o.useState([]),R=(0,a.Z)(M,2),Y=R[0],q=R[1],J=o.useCallback((function(){q(u().map((function(e){return e.isValidName?e:null})).filter(Boolean).map((function(e){return{text:e.name,value:e.name,renderIcon:function(){var t=W(e.source),n=G(e.type);return(0,w.jsxs)(f.pJ,{children:[(0,w.jsx)(t,{fontSize:"small"}),(0,w.jsx)(n,{fontSize:"small"})]})}}})))}),[u]),X=function(e){E.current&&E.current.focus(e)};o.useImperativeHandle(t,(function(){return{focus:X,updateAutocompletions:J}})),o.useEffect((function(){J()}),[J]);var K=o.useCallback((function(){if(j){var e=E.current?E.current.getInputValue():v,t=r&&r.get().getVariablesContainersList().has(H(e));b(e),j({variableName:e,shouldCreate:!t})}}),[b,j,r,v]),Q=y?y.getDescription():void 0,$=z(v,c,I,r,P),ee=$===F?(0,w.jsx)(s.Trans,{id:"It seems you entered a name with a quote. Variable names should not be quoted."}):$===D?(0,w.jsx)(s.Trans,{id:"The variable name contains a space - this is not recommended. Prefer to use underscores or uppercase letters to separate words."}):$===N?(0,w.jsx)(s.Trans,{id:"The variable name looks like you're building an expression or a formula. You can only use this for structure or arrays. For example: Score[3]."}):x&&$===_?(0,w.jsx)(s.Trans,{id:"This variable does not exist. <0>Click to add it.</0>",components:[(0,w.jsx)(L.Z,{onClick:K,href:"#"})]}):x&&$===B?(0,w.jsx)(s.Trans,{id:"This variable has the same name as an object. Consider renaming one or the other."}):x&&$===U?(0,w.jsx)(s.Trans,{id:"Parameters can't have children."}):x&&$===V?(0,w.jsx)(s.Trans,{id:"Properties can't have children."}):null,te=x||$!==_?x||$!==B?null:{id:"This variable has the same name as an object. Consider renaming one or the other."}:{id:"This variable is not declared. It's recommended to use the *variables editor* to add it."},ne=d&&O.VariableInstructionSwitcher.isSwitchableVariableInstruction(d.getType()),re=n&&d&&ne?O.VariableInstructionSwitcher.getVariableTypeFromParameters(n.getCurrentPlatform(),r.get(),d):null,ie=ne&&re!==O.Variable.Number&&re!==O.Variable.String&&re!==O.Variable.Boolean&&!ee&&v;return(0,w.jsx)(s.I18n,{children:function(e){var t=e.i18n;return(0,w.jsxs)(f.ak,{noMargin:!0,expand:!0,children:[(0,w.jsx)(f.ad,{renderTextField:function(){return(0,w.jsx)(p.ZP,{margin:C?"none":"dense",floatingLabelText:Q,helperMarkdownText:te?t._(te):y?y.getLongDescription():void 0,errorText:ee,fullWidth:!0,value:v,onChange:b,onRequestClose:Z,onApply:k,dataSource:[].concat((0,i.Z)(Y),[j?{translatableValue:{id:"Add or edit variables..."},text:"",value:"",renderIcon:function(){return(0,w.jsx)(A.Z,{})},onClick:K}:null]).filter(Boolean),openOnFocus:!C,ref:E,id:T})},renderButton:function(e){return C?null:(0,w.jsx)(l.Z,{icon:(0,w.jsx)(h.Z,{}),disabled:!j,primary:!0,style:e,onClick:function(){j&&j({variableName:v,shouldCreate:!1})}})}}),!C&&ie&&d&&S&&(0,w.jsxs)(g.Z,{floatingLabelText:(0,w.jsx)(s.Trans,{id:"Use as..."}),value:function(){var e=O.VariableInstructionSwitcher.getSwitchableInstructionVariableType(d.getType());return e===O.Variable.Unknown?O.Variable.Number:e}(),onChange:function(e,t,n){O.VariableInstructionSwitcher.switchVariableInstructionType(d,n),S()},children:[(0,w.jsx)(m.Z,{value:O.Variable.Number,label:{id:"Number"}}),(0,w.jsx)(m.Z,{value:O.Variable.String,label:{id:"Text"}}),(0,w.jsx)(m.Z,{value:O.Variable.Boolean,label:{id:"Boolean"}})]})]})}})})),q=function(e,t,n){var i,a=e.value,s=e.parameterMetadata,l=e.expressionIsValid,c=e.InvalidParameterValue,p=e.MissingParameterValue,f=e.projectScopedContainersAccessor;if(!a&&!s.isOptional())return(0,w.jsx)(p,{});var h=W(n(a,f.get())),g=l?o.Fragment:c;return(0,w.jsx)("span",{title:t,className:u()((i={},(0,r.Z)(i,d.Sv,!0),(0,r.Z)(i,d.Xr,z(a)!==R),i)),children:(0,w.jsxs)(g,{children:[(0,w.jsx)(h,{className:u()((0,r.Z)({},d.qv,!0))}),a]})})}},98775:function(e,t,n){"use strict";n.d(t,{n:function(){return a}});var r=n(14446),i=n.n(r),a=function(e,t,n){return i().put(t.signedUrl,e,{headers:{"Content-Type":t.contentType},maxContentLength:1/0,onUploadProgress:function(e){e&&e.total?n(e.loaded,e.total):n(0,0)}}).then((function(){}))}},43370:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(36600),o=n(28381),s=n(60022),l=n(40243),c=n(86578),u=n(95100),d=n(86278),p=n(10959),f=n(16999),h=n(2066),g=n(61325),m=n(71106),x=n(57597),v=n(42699),b=n(17361),C=n(90264),j=n(14737),y=n(64480),Z=n(10888),k=n(44634),w=n(29343),T={"cordova-build":{estimatedTimeInSeconds:function(e){return 300},completeDescription:"You can download it on your Android phone and install it."},"cordova-ios-build":{estimatedTimeInSeconds:function(e){return 150},completeDescription:""},"electron-build":{estimatedTimeInSeconds:function(e){return 90+130*(e.targets?e.targets.length:0)},completeDescription:""},"web-build":{estimatedTimeInSeconds:function(e){return 5},completeDescription:""}},S=[{displayName:{id:"Download (APK)"},key:"apkKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Download (Android App Bundle)"},key:"aabKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Windows (zip)"},key:"windowsZipKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Windows (exe)"},key:"windowsExeKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"macOS (zip)"},key:"macosZipKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"IPA for App Store"},key:"iosAppStoreIpaKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"IPA for testing on registered devices"},key:"iosDevelopmentIpaKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Linux (AppImage)"},key:"linuxAppImageKey",icon:(0,w.jsx)(b.Z,{})},{displayName:{id:"Open build link"},key:"s3Key",icon:(0,w.jsx)(k.Z,{})}];t.Z=function(e){var t=e.build,n=e.game,b=e.onGameUpdated,k=e.gameUpdating,P=e.setGameUpdating,I=e.onCopyToClipboard,E=o.useContext(m.ZP),M=E.getAuthorizationHeader,L=E.profile,A=T[t.type],O=A.estimatedTimeInSeconds(t),R=Math.abs((0,u.Z)(t.updatedAt,Date.now())),F=O-R,D=F>0,N=!D&&F>=-O,_=!D&&F<-O,B=function(e){var n=(0,p.Fp)(t,e);n&&h.ZP.openExternalURL(n)},U=function(){var e=(0,p.Fp)(t,"s3Key");e&&navigator.clipboard.writeText(e),I&&I()},V=o.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,a){var o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L&&n&&b&&P){e.next=2;break}return e.abrupt("return");case 2:if(o=L.id,h.ZP.showConfirmDialog(i?a._({id:'"{0}" will be the new build of this game published on gd.games. Continue?',values:{0:t.name||(0,j.GA)(t.id)}}):a._({id:'"{0}" will be unpublished on gd.games. Continue?',values:{0:t.name||(0,j.GA)(t.id)}}))){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,P(!0),e.next=10,(0,f.Bi)(M,o,n.id,{publicWebBuildId:i});case 10:s=e.sent,b(s),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.error("Unable to update the game",e.t0);case 17:return e.prev=17,P(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[6,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}(),[L,n,b,P,t.name,t.id,M]),H=!!n&&n.publicWebBuildId===t.id;return(0,w.jsx)(a.I18n,{children:function(e){var r=e.i18n;return"error"===t.status?(0,w.jsxs)(g.ep,{alignItems:"center",justifyContent:"space-between",expand:!0,children:[(0,w.jsxs)(l.sg,{noMargin:!0,children:[(0,w.jsx)(d.Z,{noMargin:!0,children:(0,w.jsx)(a.Trans,{id:"Something wrong happened :("})}),(0,w.jsx)(c.Z,{style:{justifyContent:"flex-start",padding:0},children:(0,w.jsx)(a.Trans,{id:"Check the logs to see if there is an explanation about what went wrong, or try again later."})})]}),(0,w.jsx)(s.Z,{primary:!0,label:(0,w.jsx)(a.Trans,{id:"Download log files"}),onClick:function(){return B("logsKey")}})]}):"pending"===t.status?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(l.x1,{alignItems:"center",expand:!0,justifyContent:"center",children:[(D||N)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(y.Z,{value:D?(O-F)/O*100:0,variant:D?"determinate":"indeterminate"}),(0,w.jsx)(l.LZ,{})]}),D&&(0,w.jsx)(d.Z,{children:(0,w.jsx)(a.Trans,{id:"~{0} minutes.",values:{0:Math.round(F/60)}})}),N&&(0,w.jsx)(d.Z,{children:(0,w.jsx)(a.Trans,{id:"Should finish soon."})})]}),_&&(0,w.jsxs)(l.sg,{children:[(0,w.jsx)(l.x1,{justifyContent:"flex-end",noMargin:!0,children:(0,w.jsx)(d.Z,{noMargin:!0,children:(0,w.jsx)(a.Trans,{id:"Something wrong happened :("})})}),(0,w.jsx)(l.x1,{justifyContent:"flex-end",noMargin:!0,children:(0,w.jsx)(c.Z,{style:{justifyContent:"flex-end",padding:0},children:(0,w.jsx)(a.Trans,{id:"It looks like the build has timed out, please try again."})})})]})]}):"complete"===t.status?(0,w.jsxs)(g.ak,{noMargin:!0,expand:!0,children:[(0,w.jsxs)(g.ep,{expand:!0,justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,w.jsxs)(g.ep,{noMargin:!0,noColumnMargin:!0,alignItems:"center",children:[n&&!!t.s3Key&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x.Z,{label:(0,w.jsx)(a.Trans,{id:"Publish this build on gd.games"}),labelPosition:"left",toggled:H,onToggle:function(){V(H?null:t.id,r)},disabled:k}),(0,w.jsx)(l.LZ,{}),(0,w.jsx)(v.Z,{label:(0,w.jsx)(a.Trans,{id:"Copy build link"}),icon:(0,w.jsx)(C.Z,{}),onClick:U})]}),S.filter((function(e){return!!t[e.key]})).map((function(e){return(0,w.jsxs)(o.Fragment,{children:[(0,w.jsx)(s.Z,{primary:!0,label:r._(e.displayName),onClick:function(){return B(e.key)},icon:e.icon}),(0,w.jsx)(l.LZ,{})]},e.key)}))]}),(0,w.jsx)(Z.Z,{label:(0,w.jsx)(a.Trans,{id:"Download log files"}),onClick:function(){return B("logsKey")}})]}),A&&A.completeDescription&&(0,w.jsx)(l.x1,{expand:!0,justifyContent:"flex-start",noMargin:!0,children:(0,w.jsx)(d.Z,{noMargin:!0,size:"body2",children:A.completeDescription})})]}):(0,w.jsx)(l.x1,{children:(0,w.jsx)(a.Trans,{id:"Unknown status"})})}})}},14746:function(e,t,n){"use strict";var r=n(1413),i=n(36600),a=n(28381),o=n(21741),s=n(73211),l=n(40934),c=n(16413),u=n(75118),d=n(40243),p=n(43370),f=n(86578),h=n(86278),g=n(38092),m=n(64480),x=n(66789),v=n(17358),b=n(53949),C=n(24910),j=n(29343),y={flex:1,padding:8},Z=(0,v.Z)((function(e){return{text:{fill:e.palette.secondary.contrastText},completed:{fill:e.palette.secondary.main},active:{fill:e.palette.secondary.main}}})),k=(0,v.Z)((function(e){return{root:{flex:0}}})),w=function(e){var t=Z();return(0,j.jsx)(l.Z,(0,r.Z)((0,r.Z)({},e),{},{StepIconComponent:function(e){return(0,j.jsx)(b.Z,(0,r.Z)((0,r.Z)({},e),{},{classes:t}))},children:e.children}))};t.Z=function(e){var t=e.exportStep,n=e.build,l=e.stepMaxProgress,v=e.stepCurrentProgress,b=e.errored,Z=e.hasBuildStep,T=e.showSeeAllMyBuildsExplanation,S=a.useContext(C.Z),P=a.useCallback((function(){return"register"===t||"export"===t||"resources-download"===t?0:"compress"===t||"upload"===t?1:"waiting-for-build"===t||"build"===t?2:"done"===t?Z?2:1:-1}),[t,Z]),I=k();return(0,j.jsxs)(o.Z,{activeStep:P(),orientation:"vertical",style:(0,r.Z)((0,r.Z)({},y),{},{backgroundColor:S.paper.backgroundColor.medium}),connector:(0,j.jsx)(u.Z,{classes:I}),children:[(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(w,{children:(0,j.jsx)(i.Trans,{id:"Game export"})}),(0,j.jsx)(c.Z,{children:b?(0,j.jsxs)(g.Z,{kind:"error",children:[(0,j.jsx)(i.Trans,{id:"Can't properly export the game."})," ",(0,j.jsx)(i.Trans,{id:"Please check your internet connection or try again later."})]}):"resources-download"===t?(0,j.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[(0,j.jsx)(h.Z,{children:(0,j.jsx)(i.Trans,{id:"Downloading game resources..."})}),(0,j.jsx)(d.x1,{expand:!0,children:(0,j.jsx)(m.Z,{value:l>0?v/l*100:0,variant:"determinate"})})]}):(0,j.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[(0,j.jsx)(h.Z,{children:(0,j.jsx)(i.Trans,{id:"Export in progress..."})}),(0,j.jsx)(d.x1,{expand:!0,children:(0,j.jsx)(m.Z,{})})]})})]}),Z&&(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(w,{children:(0,j.jsx)(i.Trans,{id:"Upload to build service"})}),(0,j.jsx)(c.Z,{children:b?(0,j.jsxs)(g.Z,{kind:"error",children:[(0,j.jsx)(i.Trans,{id:"Can't upload your game to the build service."})," ",(0,j.jsx)(i.Trans,{id:"Please check your internet connection or try again later."})]}):"compress"===t?(0,j.jsxs)(d.x1,{alignItems:"center",children:[(0,j.jsx)(x.Z,{size:20}),(0,j.jsx)(d.LZ,{}),(0,j.jsx)(h.Z,{children:(0,j.jsx)(i.Trans,{id:"Compressing before upload..."})})]}):(0,j.jsx)(d.x1,{alignItems:"center",expand:!0,children:(0,j.jsx)(m.Z,{value:l>0?v/l*100:0,variant:"determinate"})})})]}),Z&&(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(w,{children:(0,j.jsx)(i.Trans,{id:"Build and download"})}),(0,j.jsxs)(c.Z,{children:[b&&(0,j.jsx)(g.Z,{kind:"error",children:(0,j.jsx)(i.Trans,{id:"Build could not start or errored. Please check your internet connection or try again later."})}),!n&&!b&&(0,j.jsx)(h.Z,{children:(0,j.jsx)(i.Trans,{id:"Build is starting..."})}),n&&(0,j.jsx)(p.Z,{build:n}),T&&(0,j.jsx)(f.Z,{children:(0,j.jsx)(i.Trans,{id:"If you close this window while the build is being done, you can see its progress and download the game later by clicking on See All My Builds below."})})]})]}),!Z&&(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(w,{children:(0,j.jsx)(i.Trans,{id:"Done"})}),(0,j.jsx)(c.Z,{})]})]})}},3498:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(74165),i=n(15861),a=n(15671),o=n(43144),s=n(10959),l=n(58336),c=18e5,u=function(){function e(){var t=this;(0,a.Z)(this,e),this.runningWatchers={},this.nextWatcherId=0,this._pollBuild=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,i){var a,o,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.nextWatcherId.toString(),t.nextWatcherId++,t.runningWatchers[a]=!0,o=null;case 4:if(t.authenticatedUser){e.next=6;break}return e.abrupt("return");case 6:if(c=t.authenticatedUser,u=c.getAuthorizationHeader,d=c.firebaseUser){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,console.info("Checking progress of build ".concat(n,"...")),e.next=13,(0,s.Xr)(u,d.uid,n);case 13:o=e.sent,t.onBuildUpdated&&t.onBuildUpdated(o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.warn("Error while watching build progress:",e.t0);case 20:return e.next=22,(0,l.g)(i);case 22:if(t.runningWatchers[a]){e.next=25;break}return console.info("Stopping watch of build ".concat(n,".")),e.abrupt("return");case 25:if(o&&"pending"===o.status){e.next=4;break}case 26:console.info("Watch of build ".concat(n," finished."));case 27:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t,n){return e.apply(this,arguments)}}()}return(0,o.Z)(e,[{key:"start",value:function(e){var t=this,n=e.authenticatedUser,r=e.builds,i=e.onBuildUpdated;this.stop(),this.authenticatedUser=n,this.onBuildUpdated=i,r.forEach((function(e){"pending"===e.status&&((!e.createdAt||e.createdAt<Date.now()-c)&&(!e.updatedAt||e.updatedAt<Date.now()-c)?console.info("Ignoring a build for polling as it's too old and still pending",e):t._pollBuild(e.id,r.length>1?5e3:1500))}))}},{key:"stop",value:function(){this.runningWatchers={}}}]),e}()},86335:function(e,t,n){"use strict";n.d(t,{Z:function(){return te}});var r=n(1413),i=n(15671),a=n(43144),o=n(60136),s=n(29388),l=n(28381),c=n(29439),u=n(36600),d=n(40243),p=n(86578),f=n(78081),h=n(61325),g=n(75383),m=n(81683),x=n(90242),v=n(74165),b=n(15861),C=n(93453),j=n(96522),y=n(51375),Z=n(86278),k=n(22537),w=n(51598),T=n(90264),S=n(24910),P=n(54168),I=n(29277),E=n(30141),M=n(1589),L=n(65111),A=n(87284),O=n(43370),R=n(6996),F=n(10959),D=n(2066),N=n(66789),_=n(61804),B=n(50583),U=n(35638),V=n(99221),H=n(29343),z={icon:{height:16,width:16,marginRight:4},buildButtonIcon:{height:16,width:16,opacity:.6},openForFeedbackIndicator:{height:4,width:4,borderRadius:4},cardContent:{flex:1},textField:{width:"70%"},circularProgress:{height:20,width:20}},W=function(e){switch(e){case"cordova-build":return(0,H.jsx)(u.Trans,{id:"Android Build"});case"cordova-ios-build":return(0,H.jsx)(u.Trans,{id:"iOS Build"});case"electron-build":return(0,H.jsx)(u.Trans,{id:"Windows/macOS/Linux Build"});case"web-build":return(0,H.jsx)(u.Trans,{id:"Web Build"});default:return e}},G=function(e){switch(e){case"cordova-build":return(0,H.jsx)(V.Z,{style:z.icon});case"cordova-ios-build":return(0,H.jsx)(U.Z,{style:z.icon});case"electron-build":return(0,H.jsx)(B.Z,{style:z.icon});default:return(0,H.jsx)(y.Z,{style:z.icon})}},Y=function(e){var t=e.build;return(0,H.jsxs)(d.x1,{alignItems:"end",children:[(0,H.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[G(t.type),(0,H.jsx)(Z.Z,{noMargin:!0,children:(0,H.jsx)(u.Trans,{id:"{0}",values:{0:W(t.type)}})})]}),(0,H.jsx)(d.LZ,{}),(0,H.jsx)(M.Z,{children:(0,H.jsx)(u.Trans,{id:"{0}",values:{0:(0,C.Z)(t.updatedAt,"yyyy-MM-dd HH:mm:ss")}})})]})},q="yyyy-MM-dd-HH-mm-ss",J=function(e){var t=e.build,n=e.game,i=e.onGameUpdated,a=e.gameUpdating,o=e.setGameUpdating,s=e.onBuildUpdated,f=e.onBuildDeleted,g=e.authenticatedUser,m=g.getAuthorizationHeader,x=g.profile,y="".concat(n.gameName.toLowerCase().replace(/ /g,"-").slice(0,30),"-").concat((0,C.Z)(t.updatedAt,q)),B=t.name?t.name:y,U=n.publicWebBuildId===t.id,V=t&&"web-build"!==t.type&&(0,j.Z)(Date.now(),t.updatedAt)>6,W=l.useContext(S.Z),G=l.useRef(null),J=(0,R.UQ)().isMobile,X=l.useState(!1),K=(0,c.Z)(X,2),Q=K[0],$=K[1],ee=l.useState(!1),te=(0,c.Z)(ee,2),ne=te[0],re=te[1],ie=l.useState(B),ae=(0,c.Z)(ie,2),oe=ae[0],se=ae[1],le=function(){navigator.clipboard.writeText(t.id),$(!0)},ce=function(){re(!0),G.current&&G.current.focus()},ue=function(){var e=(0,b.Z)((0,v.Z)().mark((function e(n){var i,a;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if(i=oe.trim()){e.next=7;break}se(t.name||""),e.next=26;break;case 7:if(i!==B){e.next=11;break}se(oe.trim()),e.next=26;break;case 11:return e.prev=11,o(!0),e.next=15,(0,F.QX)(m,x.id,t.id,{name:oe});case 15:a=e.sent,s((0,r.Z)((0,r.Z)({},t),{},{name:a.name})),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(11),se(t.name||""),(0,E.gR)({message:n._({id:"Could not update the build name. Verify your internet connection or try again later."}),rawError:e.t0,errorId:"build-name-update-error"});case 23:return e.prev=23,o(!1),e.finish(23);case 26:re(!1);case 27:case"end":return e.stop()}}),e,null,[[11,19,23,26]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=(0,b.Z)((0,v.Z)().mark((function e(n){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if(D.ZP.showConfirmDialog("You are about to delete this build. Continue?")){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,o(!0),e.next=9,(0,F.c8)(m,x.id,t.id);case 9:o(!1),f(t),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),(0,E.gR)({message:n._({id:"Could not delete the build. Verify your internet connection or try again later."}),rawError:e.t0,errorId:"build-delete-error"}),o(!1);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,H.jsx)(u.I18n,{children:function(e){var s=e.i18n;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(A.Z,{isHighlighted:U,cardCornerAction:(0,H.jsx)(P.Z,{element:(0,H.jsx)(w.Z,{size:"small",disabled:a,children:(0,H.jsx)(_.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Edit build name"}),click:ce},{type:"separator"},{label:e._({id:"Delete build"}),click:function(){return de(e)}}]}}),header:(0,H.jsxs)(h.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[!J&&(0,H.jsx)(Y,{build:t}),(0,H.jsx)(d.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,H.jsx)(d.x1,{noMargin:!0,justifyContent:"end",children:U?(0,H.jsx)(Z.Z,{size:"body2",children:(0,H.jsx)(u.Trans,{id:"Current build online"})}):n.acceptsBuildComments&&"web-build"===t.type&&(0,H.jsxs)(h.pJ,{alignItems:"center",noMargin:!0,children:[(0,H.jsx)("div",{style:(0,r.Z)((0,r.Z)({},z.openForFeedbackIndicator),{},{backgroundColor:W.message.valid})}),(0,H.jsx)(Z.Z,{size:"body2",children:(0,H.jsx)(u.Trans,{id:"Build open for feedbacks"})})]})})})]}),children:(0,H.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[J&&(0,H.jsx)(Y,{build:t}),(0,H.jsx)(d.LZ,{}),(0,H.jsx)(d.x1,{noMargin:!0,children:ne?(0,H.jsxs)(d.x1,{noMargin:!0,expand:!0,children:[(0,H.jsx)(I.ZP,{ref:G,style:z.textField,value:oe,margin:"none",onChange:function(e,t){return se(t)},onBlur:function(){ue(s)},hintText:B,disabled:a,onKeyPress:function(e){(0,L.ph)(e)&&G.current&&G.current.blur()},onKeyDown:function(e){(0,L.W$)(e)&&(e.stopPropagation(),re(!1),se(B))},maxLength:50}),a&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(d.LZ,{}),(0,H.jsx)(N.Z,{style:z.circularProgress})]})]}):(0,H.jsx)(d.x1,{noMargin:!0,alignItems:"baseline",children:(0,H.jsx)(Z.Z,{noMargin:!0,children:B})})}),(0,H.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,H.jsx)(M.Z,{style:{textAlign:"left"},children:t.id}),(0,H.jsx)(d.LZ,{}),(0,H.jsx)(w.Z,{size:"small",onClick:le,children:(0,H.jsx)(T.Z,{style:z.buildButtonIcon})})]}),(0,H.jsx)(d.hS,{}),(0,H.jsxs)(d.x1,{expand:!0,noMargin:!0,justifyContent:"space-between",children:[!V&&(0,H.jsx)(O.Z,{build:t,game:n,onGameUpdated:i,gameUpdating:a,setGameUpdating:o,onCopyToClipboard:function(){return $(!0)}}),V&&(0,H.jsx)(p.Z,{children:(0,H.jsx)(u.Trans,{id:"This build is old and the generated games can't be downloaded anymore."})})]})]})}),(0,H.jsx)(k.Z,{visible:Q,hide:function(){return $(!1)},message:(0,H.jsx)(u.Trans,{id:"Copied to clipboard!"})})]})}})},X={emptyMessageStyle:{textAlign:"left"}},K=[{key:"all-build",value:"all-build",label:{id:"All builds"}},{key:"web-build",value:"web-build",label:{id:"Web builds"}},{key:"cordova-build",value:"cordova-build",label:{id:"Android builds"}},{key:"cordova-ios-build",value:"cordova-ios-build",label:{id:"iOS builds"}},{key:"electron-build",value:"electron-build",label:{id:"Desktop builds"}}],Q={"web-build":(0,H.jsx)(u.Trans,{id:"You don't have any web builds for this game."}),"cordova-build":(0,H.jsx)(u.Trans,{id:"You don't have any Android builds for this game."}),"cordova-ios-build":(0,H.jsx)(u.Trans,{id:"You don't have any iOS builds for this game."}),"electron-build":(0,H.jsx)(u.Trans,{id:"You don't have any desktop builds for this game."}),"all-build":(0,H.jsx)(u.Trans,{id:"You don't have any builds for this game."})},$=function(e){var t=e.builds,n=e.authenticatedUser,r=e.error,i=e.loadBuilds,a=e.game,o=e.onGameUpdated,s=e.onBuildUpdated,v=e.onBuildDeleted,b=l.useState(!1),C=(0,c.Z)(b,2),j=C[0],y=C[1],Z=l.useState("all-build"),k=(0,c.Z)(Z,2),w=k[0],T=k[1],S=function(e,t){if(e)switch(t){case"web-build":return e.filter((function(e){return"web-build"===e.type}));case"cordova-build":return e.filter((function(e){return"cordova-build"===e.type}));case"cordova-ios-build":return e.filter((function(e){return"cordova-ios-build"===e.type}));case"electron-build":return e.filter((function(e){return"electron-build"===e.type}));default:return e}}(t,w);return(0,H.jsxs)(d.sg,{noMargin:!0,expand:!0,children:[(0,H.jsxs)(h.ep,{justifyContent:"space-between",children:[(0,H.jsx)(d.sg,{noMargin:!0,children:(0,H.jsx)(p.Z,{messageStyle:X.emptyMessageStyle,children:(0,H.jsx)(u.Trans,{id:"This is the list of builds that you've done for this game. <0/>Note that builds for mobile and desktop are available for 7 days, after which they are removed.",components:[(0,H.jsx)("br",{})]})})}),(0,H.jsx)(d.sg,{noMargin:!0,children:(0,H.jsx)(m.Z,{floatingLabelText:(0,H.jsx)(u.Trans,{id:"Show"}),value:w,onChange:function(e,t,n){T(n)},children:K.map((function(e){var t=e.key,n=e.value,r=e.label;return(0,H.jsx)(x.Z,{value:n,label:r},t)}))})})]}),(0,H.jsxs)(d.x1,{children:[!n.authenticated&&(0,H.jsx)(p.Z,{children:(0,H.jsx)(u.Trans,{id:"You need to login first to see your builds."})}),n.authenticated&&!S&&!r&&(0,H.jsx)(f.Z,{}),n.authenticated&&r&&(0,H.jsx)(g.Z,{onRetry:i,children:r.message}),n.authenticated&&S&&0===S.length&&(0,H.jsx)(p.Z,{children:Q[w]}),n.authenticated&&S&&0!==S.length&&(0,H.jsx)(h.ak,{expand:!0,noMargin:!0,children:S.map((function(e){return(0,H.jsx)(J,{build:e,game:a,onGameUpdated:o,gameUpdating:j,setGameUpdating:y,onBuildUpdated:s,onBuildDeleted:v,authenticatedUser:n},e.id)}))})]})]})},ee=n(3498),te=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={builds:null,error:null},e.buildsWatcher=new ee.Z,e._startBuildsWatcher=function(){e.state.builds&&e.buildsWatcher.start({authenticatedUser:e.props.authenticatedUser,builds:e.state.builds,onBuildUpdated:function(t){e.state.builds&&e.setState({builds:e.state.builds.map((function(e){return t.id===e.id?t:e}))})}})},e._refreshBuilds=function(){var t=e.props.authenticatedUser,n=t.getAuthorizationHeader,r=t.firebaseUser;if(r){var i=e.props.game.id;e.setState({builds:null,error:null}),(0,F.BY)(n,r.uid,i).then((function(t){e.setState({builds:t},(function(){e._startBuildsWatcher(),e.props.onBuildsUpdated&&e.props.onBuildsUpdated()}))}),(function(){e.setState({error:new Error("There was an issue getting the game builds, verify your internet connection or try again later.")})}))}},e._onBuildUpdated=function(t){e.setState((function(e){if(e.builds)return(0,r.Z)((0,r.Z)({},e),{},{builds:e.builds.map((function(e){return t.id===e.id?t:e}))})}))},e._onBuildDeleted=function(t){e.setState((function(e){if(e.builds)return(0,r.Z)((0,r.Z)({},e),{},{builds:e.builds.filter((function(e){return t.id!==e.id}))})}))},e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this._refreshBuilds()}},{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"render",value:function(){return(0,H.jsx)($,{builds:this.state.builds,authenticatedUser:this.props.authenticatedUser,error:this.state.error,loadBuilds:this._refreshBuilds,game:this.props.game,onGameUpdated:this.props.onGameUpdated,onBuildUpdated:this._onBuildUpdated,onBuildDeleted:this._onBuildDeleted})}}]),n}(l.Component)},76349:function(e,t,n){"use strict";n.d(t,{Eg:function(){return m},VU:function(){return x},if:function(){return h},yg:function(){return g}});var r=n(36600),i=(n(28381),n(86278)),a=n(40243),o=n(61325),s=n(24233),l=n(10888),c=n(86065),u=n(39949),d=n(2066),p=n(60022),f=n(29343),h=function(){return(0,f.jsx)(i.Z,{align:"center",children:(0,f.jsx)(r.Trans,{id:"This will export your game as a Cordova project. Cordova is a technology that enables HTML5 games to be packaged for iOS and Android."})})},g=function(e){var t=e.disabled,n=e.launchExport,i=e.isExporting,o=e.exportStep,s=e.exportPipelineName;return"done"!==o?(0,f.jsx)(a.x1,{justifyContent:"center",children:(0,f.jsx)(p.Z,{label:i?(0,f.jsx)(r.Trans,{id:"Packaging..."}):(0,f.jsx)(r.Trans,{id:"Package game files"}),primary:!0,id:"launch-export-".concat(s,"-button"),onClick:n,disabled:t||i})}):null},m=function(e){var t=e.renderGameButton;return(0,f.jsxs)(a.sg,{noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(o.pJ,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(s.Z,{fontSize:"small"}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Trans,{id:"Done!"})})]}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Trans,{id:"You can now compile the game by yourself using Cordova command-line tool to iOS (XCode is required) or Android (Android SDK is required)."})}),(0,f.jsxs)(o.ak,{justifyContent:"center",children:[(0,f.jsx)(a.x1,{justifyContent:"center",children:t()}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(r.Trans,{id:"Learn more about manual builds"}),primary:!0,onClick:function(){d.ZP.openExternalURL((0,u.vA)("/publishing/android_and_ios_with_cordova"))},leftIcon:(0,f.jsx)(c.Z,{})})]})]})},x={key:"cordovaexport",tabName:(0,f.jsx)(r.Trans,{id:"Mobile"}),name:(0,f.jsx)(r.Trans,{id:"iOS & Android (manual)"}),helpPage:"/publishing/android_and_ios_with_cordova"}},41426:function(e,t,n){"use strict";n.d(t,{Eg:function(){return m},c8:function(){return x},if:function(){return h},yg:function(){return g}});var r=n(36600),i=(n(28381),n(86278)),a=n(40243),o=n(61325),s=n(24233),l=n(10888),c=n(86065),u=n(39949),d=n(2066),p=n(60022),f=n(29343),h=function(){return(0,f.jsx)(i.Z,{align:"center",children:(0,f.jsx)(r.Trans,{id:"This will export your game so that you can package it for Windows, macOS or Linux. You will need to install third-party tools (Node.js, Electron Builder) to package your game."})})},g=function(e){var t=e.disabled,n=e.launchExport,i=e.isExporting,o=e.exportStep,s=e.exportPipelineName;return"done"!==o?(0,f.jsx)(a.x1,{justifyContent:"center",children:(0,f.jsx)(p.Z,{label:i?(0,f.jsx)(r.Trans,{id:"Packaging..."}):(0,f.jsx)(r.Trans,{id:"Package game files"}),primary:!0,id:"launch-export-".concat(s,"-button"),onClick:n,disabled:t||i})}):null},m=function(e){var t=e.renderGameButton;return(0,f.jsxs)(a.sg,{noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(o.pJ,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(s.Z,{fontSize:"small"}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Trans,{id:"Done!"})})]}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(r.Trans,{id:"The game was properly exported. You can now use Electron Builder (you need Node.js installed and to use the command-line on your computer to run it) to create an executable."})}),(0,f.jsxs)(o.ak,{justifyContent:"center",children:[(0,f.jsx)(a.x1,{justifyContent:"center",children:t()}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(r.Trans,{id:"Learn more about manual builds"}),primary:!0,onClick:function(){d.ZP.openExternalURL((0,u.vA)("/publishing/windows-macos-linux-with-electron"))},leftIcon:(0,f.jsx)(c.Z,{})})]})]})},x={key:"electronexport",tabName:(0,f.jsx)(r.Trans,{id:"Desktop"}),name:(0,f.jsx)(r.Trans,{id:"Windows/macOS/Linux (manual)"}),helpPage:"/publishing/windows-macos-linux-with-electron"}},15745:function(e,t,n){"use strict";n.d(t,{Eg:function(){return v},if:function(){return m},xu:function(){return b},yg:function(){return x}});var r=n(36600),i=(n(28381),n(86278)),a=n(40243),o=n(39949),s=n(2066),l=n(61325),c=n(22853),u=n(86065),d=n(24233),p=n(10888),f=n(60022),h=n(29343),g={icon:{height:48,width:48,margin:10}},m=function(){return(0,h.jsxs)(a.sg,{noMargin:!0,children:[(0,h.jsx)(a.x1,{children:(0,h.jsx)(i.Z,{align:"center",children:(0,h.jsx)(r.Trans,{id:"Prepare your game for Facebook Instant Games so that it can be play on Facebook Messenger. GDevelop will create a compressed file that you can upload on your Facebook Developer account."})})}),(0,h.jsx)(a.x1,{justifyContent:"center",children:(0,h.jsx)(c.Z,{color:"secondary",style:g.icon})})]})},x=function(e){var t=e.disabled,n=e.launchExport,i=e.isExporting,o=e.exportPipelineName;return(0,h.jsx)(a.x1,{justifyContent:"center",children:(0,h.jsx)(f.Z,{label:i?(0,h.jsx)(r.Trans,{id:"Packaging..."}):(0,h.jsx)(r.Trans,{id:"Package game files"}),primary:!0,id:"launch-export-".concat(o,"-button"),onClick:n,disabled:t||i})})},v=function(e){var t=e.renderGameButton;return(0,h.jsxs)(a.sg,{noMargin:!0,alignItems:"center",children:[(0,h.jsxs)(l.pJ,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,h.jsx)(d.Z,{fontSize:"small"}),(0,h.jsx)(i.Z,{children:(0,h.jsx)(r.Trans,{id:"Done!"})})]}),(0,h.jsx)(i.Z,{children:(0,h.jsx)(r.Trans,{id:"You can now create a game on Facebook Instant Games, if not already done, and upload the generated archive."})}),(0,h.jsxs)(l.ak,{justifyContent:"center",children:[(0,h.jsx)(a.x1,{justifyContent:"center",children:t()}),(0,h.jsx)(p.Z,{label:(0,h.jsx)(r.Trans,{id:"Learn more about Instant Games publication"}),primary:!0,onClick:function(){s.ZP.openExternalURL((0,o.vA)("/publishing/publishing-to-facebook-instant-games"))},leftIcon:(0,h.jsx)(u.Z,{})})]})]})},b={key:"facebookinstantgamesexport",tabName:(0,h.jsx)(r.Trans,{id:"Instant Games"}),name:(0,h.jsx)(r.Trans,{id:"Facebook Instant Games"}),helpPage:"/publishing/publishing-to-facebook-instant-games"}},39935:function(e,t,n){"use strict";n.d(t,{Eg:function(){return T},if:function(){return k},yg:function(){return w},BN:function(){return S}});var r=n(36600),i=n(28381),a=n(86278),o=n(39949),s=n(2066),l=n(10888),c=n(40243),u=n(38092),d=n(17581),p=n(1413),f=n(78118),h=n(29343),g=i.memo((function(e){return(0,h.jsx)(f.Z,(0,p.Z)((0,p.Z)({},e),{},{children:(0,h.jsx)("path",{d:"M7,2H17L13.5,9H17L10,22V14H7V2M9,4V12H12V14.66L14,11H10.24L13.76,4H9Z"})}))})),m=i.memo((function(e){return(0,h.jsx)(f.Z,(0,p.Z)((0,p.Z)({},e),{},{style:(0,p.Z)({transform:"rotate(90deg)"},e.style),children:(0,h.jsx)("path",{d:"M12 2C17.5 2 22 6.5 22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2M12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4M12 5C15.87 5 19 8.13 19 12C19 15.87 15.87 19 12 19V5Z"})}))})),x=i.memo((function(e){return(0,h.jsx)(f.Z,(0,p.Z)((0,p.Z)({},e),{},{width:"89",height:"100",viewBox:"0 0 89 100",fill:"none",children:(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M78.4857 3.49986C77.9777 2.92125 77.3215 2.67429 76.5735 2.67429L76.5665 2.70251C73.7863 2.70251 69.6867 6.10358 66.8148 8.8696C60.7677 5.92012 53.3376 4.47361 44.3127 4.47361C35.2879 4.47361 27.8577 5.92012 21.8177 8.86255C18.9458 6.09653 14.8462 2.69546 12.0731 2.69546C11.3181 2.69546 10.6689 2.94242 10.1609 3.52103C5.8425 8.47446 5.43325 20.3359 5.58848 27.1662C3.64098 32.5007 2.65312 38.7384 2.65312 45.8651C2.65312 60.8383 6.94327 71.9306 15.3895 78.8668C21.0838 83.5309 28.514 86.2193 37.9833 87.0237C37.587 87.2206 37.1852 87.4166 36.7787 87.615C36.0489 87.971 35.3038 88.3345 34.547 88.7242L31.1177 90.4036L29.1702 91.3562C28.6297 91.6375 28.0851 91.9102 27.5343 92.1861C26.1509 92.879 24.7278 93.5918 23.2289 94.5103L22.7138 94.7784C22.5656 94.8843 22.4316 95.0607 22.4033 95.2653C22.3328 95.6463 22.5938 96.0062 22.9749 96.0627C23.5712 96.1507 24.1654 96.2483 24.7595 96.3459C26.0706 96.5613 27.381 96.7765 28.7115 96.8882L30.1581 97.0505C30.6379 97.0999 31.1106 97.1423 31.6046 97.1705L34.5047 97.3328C34.9562 97.3469 35.4078 97.3469 35.8594 97.3469C39.2958 97.3469 42.7463 97.114 46.1614 96.5778C50.0282 95.9921 53.8315 94.9125 57.4795 93.4095C61.1205 91.9066 64.5922 89.945 67.7392 87.567C73.9769 82.7194 78.8809 76.1995 81.7951 68.9388C82.8606 66.3068 83.665 63.5761 84.2295 60.803C85.3867 56.3505 85.9723 51.3689 85.9723 45.851C85.9723 38.7454 84.9915 32.5219 83.0511 27.1874C83.2134 20.3641 82.8112 8.46034 78.4857 3.49986ZM66.3068 5.6661C70.5123 1.85577 73.8851 0 76.5735 0C78.147 0 79.5018 0.599774 80.5109 1.74993C85.1115 7.02089 85.9088 18.1555 85.7465 26.757C87.6799 32.282 88.6607 38.7031 88.6607 45.851C88.6607 51.5171 88.0539 56.7528 86.8473 61.4028C86.2264 64.3946 85.3655 67.2664 84.2859 69.9266C81.1671 77.6955 76.0161 84.5188 69.3621 89.6839C66.0739 92.1677 62.4259 94.2492 58.5097 95.8651C54.5936 97.4739 50.5786 98.5958 46.5919 99.1956C43.212 99.7319 39.6063 100 35.8736 100C35.4078 100 34.9351 100 34.4694 99.9859H34.3635L31.4634 99.8236C30.9272 99.7954 30.405 99.753 29.8687 99.6895L28.4575 99.5343C27.0992 99.4211 25.7848 99.2074 24.5086 98.9998C24.4323 98.9874 24.3562 98.9751 24.2803 98.9627L24.2764 98.9621C23.7132 98.8706 23.15 98.7791 22.608 98.6946C21.7118 98.5676 20.8933 98.0737 20.3641 97.3398C19.8419 96.6201 19.6302 95.7098 19.7714 94.8349C19.9125 93.9529 20.4135 93.1414 21.1614 92.5981L21.3167 92.4852L21.486 92.3935L21.9235 92.1676C23.4829 91.2151 24.9223 90.4954 26.3194 89.7968L26.3195 89.7968C26.4114 89.7508 26.5032 89.705 26.5947 89.6594C27.0512 89.4316 27.5028 89.2063 27.9495 88.9712L27.9777 88.9571L28.0059 88.943L29.2478 88.3362C23.1301 86.8826 18.0003 84.427 13.7101 80.9131C4.61473 73.4335 0 61.6356 0 45.8439C0 38.6749 0.987859 32.2396 2.92831 26.7076C2.76601 18.1202 3.57041 7.01383 8.16398 1.74287C9.1589 0.599774 10.5207 0 12.0872 0C14.7756 0 18.1485 1.85577 22.3469 5.65905C28.4434 3.04826 35.6478 1.7711 44.3198 1.7711C52.9918 1.7711 60.2103 3.04826 66.3068 5.6661ZM44.3268 19.4186C53.1964 19.4186 59.5258 21.0838 63.6537 24.4778C68.5295 28.4999 70.9145 35.4925 70.9145 45.851C70.9145 67.7957 60.2879 72.2834 44.3268 72.2834C28.3658 72.2834 17.7392 67.7886 17.7392 45.851C17.7392 35.4996 20.1101 28.4928 25 24.4778C29.1278 21.0697 35.4572 19.4186 44.3268 19.4186ZM35.182 56.6116C38.2373 56.6116 40.7352 54.1349 40.7352 51.1008V44.6161C40.5871 44.6303 40.4318 44.6373 40.2766 44.6373C37.821 44.6373 35.8383 42.6686 35.8383 40.2343C35.8383 38.2585 37.1436 36.5862 38.943 36.0288C37.9551 35.1185 36.6356 34.5541 35.182 34.5541C32.1267 34.5541 29.6288 37.0308 29.6288 40.0649V51.1008C29.6288 54.1279 32.1267 56.6116 35.182 56.6116ZM53.4646 56.6116C56.5199 56.6116 59.0178 54.1349 59.0178 51.1008V44.1857C58.799 44.221 58.5803 44.2422 58.3545 44.2422C55.8989 44.2422 53.9162 42.2735 53.9162 39.8391C53.9162 37.934 55.1369 36.3181 56.8374 35.7042C55.8989 34.9845 54.7347 34.5541 53.4646 34.5541C50.4092 34.5541 47.9114 37.0308 47.9114 40.0649V51.1008C47.9114 54.1279 50.4092 56.6116 53.4646 56.6116Z",fill:"currentColor"})}))})),v=i.memo((function(e){return(0,h.jsx)(f.Z,(0,p.Z)((0,p.Z)({},e),{},{children:(0,h.jsx)("path",{d:"M20,12H4V11H6L7,6H12L13,11H20V12M13.22,7L13.62,9H22V7H13.22M22,16A3,3 0 0,1 19,19H5A3,3 0 0,1 2,16A3,3 0 0,1 5,13H19A3,3 0 0,1 22,16M6,16A1,1 0 0,0 5,15A1,1 0 0,0 4,16A1,1 0 0,0 5,17A1,1 0 0,0 6,16M13,16A1,1 0 0,0 12,15A1,1 0 0,0 11,16A1,1 0 0,0 12,17A1,1 0 0,0 13,16M20,16A1,1 0 0,0 19,15A1,1 0 0,0 18,16A1,1 0 0,0 19,17A1,1 0 0,0 20,16Z"})}))})),b=n(6996),C=n(61325),j=n(24233),y=n(86065),Z=n(60022),k=function(){var e=function(e){var t=e.isMobile;return{height:t?30:48,width:t?30:48,margin:10}}({isMobile:(0,b.UQ)().isMobile});return(0,h.jsxs)(c.sg,{noMargin:!0,children:[(0,h.jsx)(c.x1,{children:(0,h.jsx)(a.Z,{align:"center",children:(0,h.jsx)(r.Trans,{id:"This will export your game to a folder. You can then upload it on a website/game hosting service and share it on marketplaces and gaming portals like CrazyGames, Poki, Game Jolt, itch.io, Newgrounds..."})})}),(0,h.jsxs)(c.x1,{justifyContent:"center",children:[(0,h.jsx)(d.Z,{color:"secondary",style:e}),(0,h.jsx)(g,{color:"secondary",style:e}),(0,h.jsx)(m,{color:"secondary",style:e}),(0,h.jsx)(x,{color:"secondary",style:e}),(0,h.jsx)(v,{color:"secondary",style:e})]})]})},w=function(e){var t=e.disabled,n=e.launchExport,i=e.isExporting,a=e.exportPipelineName;return"done"!==e.exportStep?(0,h.jsx)(c.x1,{justifyContent:"center",children:(0,h.jsx)(Z.Z,{label:i?(0,h.jsx)(r.Trans,{id:"Exporting..."}):(0,h.jsx)(r.Trans,{id:"Export as a HTML5 game"}),primary:!0,id:"launch-export-".concat(a,"-button"),onClick:n,disabled:t||i})}):null},T=function(e){var t=e.renderGameButton;return(0,h.jsxs)(c.sg,{noMargin:!0,alignItems:"center",children:[(0,h.jsxs)(C.pJ,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,h.jsx)(j.Z,{fontSize:"small"}),(0,h.jsx)(a.Z,{children:(0,h.jsx)(r.Trans,{id:"Done!"})})]}),(0,h.jsx)(a.Z,{children:(0,h.jsx)(r.Trans,{id:"You can now upload the game to a web hosting service to play it."})}),(0,h.jsx)(c.LZ,{}),(0,h.jsxs)(C.ak,{justifyContent:"center",children:[(0,h.jsx)(c.x1,{justifyContent:"center",children:t()}),(0,h.jsx)(l.Z,{label:(0,h.jsx)(r.Trans,{id:"Learn more about publishing to platforms"}),primary:!0,onClick:function(){s.ZP.openExternalURL((0,o.vA)("/publishing/html5_game_in_a_local_folder/#3rd-party-hosting-sites"))},leftIcon:(0,h.jsx)(y.Z,{})})]}),(0,h.jsx)(c.LZ,{}),(0,h.jsx)(c.x1,{children:(0,h.jsx)(u.Z,{kind:"info",children:(0,h.jsx)(r.Trans,{id:"Your game won't work if you open the index.html file on your computer. You must upload it to a web hosting platform (Itch.io, Poki, CrazyGames etc...) or a web server to run it."})})})]})},S={key:"webexport",tabName:(0,h.jsx)(r.Trans,{id:"Web"}),name:(0,h.jsx)(r.Trans,{id:"HTML5"}),helpPage:"/publishing/html5_game_in_a_local_folder"}},61421:function(e,t,n){"use strict";n.d(t,{Vf:function(){return b},s_:function(){return x},yg:function(){return v}});var r=n(1413),i=n(36600),a=(n(28381),n(86278)),o=n(40243),s=n(19345),l=n(3698),c=n(50463),u=n(1773),d=n(10888),p=n(4076),f=n(14746),h=n(60022),g=n(61325),m=n(29343),x=function(e){var t=e.exportState,n=e.updateExportState,f=e.isExporting,h=e.build;return h&&"complete"===h.status?null:(0,m.jsxs)(o.sg,{noMargin:!0,expand:!0,children:[(0,m.jsx)(o.x1,{children:(0,m.jsx)(a.Z,{align:"center",children:(0,m.jsx)(i.Trans,{id:"Packaging your game for Android will create an APK file that can be installed on Android phones or an Android App Bundle that can be published to Google Play."})})}),(0,m.jsxs)(o.sg,{children:[(0,m.jsxs)(c.Z,{value:t.targets[0]||"androidApk",onChange:function(e){var t=e.target.value;n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{targets:[t]})}))},children:[(0,m.jsx)(s.Z,{value:"androidApk",control:(0,m.jsx)(l.Z,{color:"secondary",disabled:f}),label:(0,m.jsx)(i.Trans,{id:"APK (for testing on device or sharing outside Google Play)"})}),(0,m.jsx)(s.Z,{value:"androidAppBundle",control:(0,m.jsx)(l.Z,{color:"secondary",disabled:f}),label:(0,m.jsx)(i.Trans,{id:"Android App Bundle (for publishing on Google Play)"})})]}),(0,m.jsx)(o.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,m.jsx)(d.Z,{label:(0,m.jsx)(i.Trans,{id:"Signing options"}),onClick:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!0})}))},disabled:"androidAppBundle"!==t.targets[0]||f})})]}),t.signingDialogOpen&&(0,m.jsxs)(u.ZP,{title:(0,m.jsx)(i.Trans,{id:"Signing options"}),actions:[(0,m.jsx)(d.Z,{label:(0,m.jsx)(i.Trans,{id:"Close"}),primary:!0,keyboardFocused:!0,onClick:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!1})}))}},"close")],secondaryActions:[(0,m.jsx)(p.Z,{helpPagePath:"/publishing/android/play-store/upgrading-from-apk-to-aab"},"help")],open:!0,onRequestClose:function(){n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{signingDialogOpen:!1})}))},maxWidth:"sm",children:[(0,m.jsx)(a.Z,{children:(0,m.jsx)(i.Trans,{id:'Choose the upload key to use to identify your Android App Bundle. In most cases you don\'t need to change this. Use the "Old upload key" if you used to publish your game as an APK and you activated Play App Signing before switching to Android App Bundle.'})}),(0,m.jsxs)(c.Z,{name:"signing-keystore",value:t.keystore,onChange:function(e){var t=e.target.value;n((function(e){return(0,r.Z)((0,r.Z)({},e),{},{keystore:t})}))},children:[(0,m.jsx)(s.Z,{value:"new",control:(0,m.jsx)(l.Z,{color:"primary"}),label:(0,m.jsx)(i.Trans,{id:"Default upload key (recommended)"})}),(0,m.jsx)(s.Z,{value:"old",control:(0,m.jsx)(l.Z,{color:"primary"}),label:(0,m.jsx)(i.Trans,{id:"Old, legacy upload key (only if you used to publish your game as an APK and already activated Play App Signing)"})}),(0,m.jsx)(s.Z,{value:"custom",control:(0,m.jsx)(l.Z,{color:"primary"}),label:(0,m.jsx)(i.Trans,{id:"Custom upload key (not available yet)"}),disabled:!0})]})]})]})},v=function(e){var t=e.disabled,n=e.launchExport,r=e.isExporting,a=e.exportPipelineName,s=e.exportStep,l=e.build,c=e.stepMaxProgress,u=e.stepCurrentProgress,d=e.errored,p=r||!!l&&"error"!==l.status;return(0,m.jsxs)(g.ak,{noMargin:!0,children:[!p&&(0,m.jsx)(o.x1,{justifyContent:"center",children:(0,m.jsx)(h.Z,{label:(0,m.jsx)(i.Trans,{id:"Create package for Android"}),primary:!0,id:"launch-export-".concat(a,"-button"),onClick:n,disabled:t})}),p&&(0,m.jsx)(o.x1,{expand:!0,children:(0,m.jsx)(f.Z,{exportStep:s,hasBuildStep:!0,build:l,stepMaxProgress:c,stepCurrentProgress:u,errored:d})})]})},b={key:"onlinecordovaexport",tabName:(0,m.jsx)(i.Trans,{id:"Mobile"}),name:(0,m.jsx)(i.Trans,{id:"Android"}),helpPage:"/publishing/android"}},90078:function(e,t,n){"use strict";n.d(t,{yg:function(){return pe},s_:function(){return de},Y$:function(){return fe}});var r=n(1413),i=n(36600),a=n(28381),o=n(86278),s=n(40243),l=n(19345),c=n(3698),u=n(50463),d=n(61325),p=n(29439),f=n(45987),h=n(37762),g=n(10959),m=n(81683),x=n(74165),v=n(15861),b=n(1773),C=n(10888),j=n(60022),y=n(63854),Z=n(37054),k=n(20914),w=n(38092),T=n(32832),S=n(2066),P=n(35638),I=n(24910),E=n(65056),M=n(42986),L=n(29343),A=function(){var e=(0,v.Z)((0,x.Z)().mark((function e(t){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(){if("string"!==typeof r.result)throw new Error("Unexpected result when reading file.");var t=r.result.split(",")[1];t?e(t):n(new Error("Could not read base64 content from the file."))},r.onerror=function(e){n(e)},r.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={appleIcon:{width:32,height:32}},R=function(e){var t=e.authenticatedUser,n=a.useContext(I.Z),r=(0,E.Z)().showConfirmation,l=t.profile?t.profile.id:null,c=a.useState(""),u=(0,p.Z)(c,2),f=u[0],h=u[1],m=a.useState(""),b=(0,p.Z)(m,2),R=b[0],F=b[1],D=a.useState(""),N=(0,p.Z)(D,2),_=N[0],B=N[1],U=a.useState(""),V=(0,p.Z)(U,2),H=V[0],z=V[1],W=a.useState(!1),G=(0,p.Z)(W,2),Y=G[0],q=G[1],J=a.useState(null),X=(0,p.Z)(J,2),K=X[0],Q=X[1],$=a.useCallback((0,v.Z)((0,x.Z)().mark((function e(){var n,r,i;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,q(!0),Q(null),e.next=7,g.n2.createCertificateSigningRequest(t.getAuthorizationHeader,l,{commonName:f||"Unspecified",countryName:R||"US"});case 7:n=e.sent,r=n.certificateRequestUuid,i=n.csrPem,B(r),z(i),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.error("Error while creating certificate signing request:",e.t0),Q(e.t0);case 18:return e.prev=18,q(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,14,18,21]])}))),[t.getAuthorizationHeader,l,f,R]),ee=a.useState(!1),te=(0,p.Z)(ee,2),ne=te[0],re=te[1],ie=a.useState(null),ae=(0,p.Z)(ie,2),oe=ae[0],se=ae[1],le=a.useState(!1),ce=(0,p.Z)(le,2),ue=ce[0],de=ce[1],pe=a.useState(""),fe=(0,p.Z)(pe,2),he=fe[0],ge=fe[1],me=a.useState(null),xe=(0,p.Z)(me,2),ve=xe[0],be=xe[1],Ce=a.useState(!1),je=(0,p.Z)(Ce,2),ye=je[0],Ze=je[1],ke=a.useCallback(function(){var e=(0,v.Z)((0,x.Z)().mark((function e(n){var i,a,o,s;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,re(!1),de(!0),e.next=7,A(n);case 7:return i=e.sent,e.next=10,g.n2.uploadCertificate(t.getAuthorizationHeader,l,{certificateAsBase64:i});case 10:if(a=e.sent,o=a.certificateSerial,"unknown"!==(s=a.certificateKind)){e.next=19;break}return e.next=16,r({title:{id:"Unknown certificate type"},message:{id:"This certificate type is unknown and might not work when building the app. Are you sure you want to continue?"},level:"warning",confirmButtonLabel:{id:"Continue"},dismissButtonLabel:{id:"Cancel"}});case 16:if(e.sent){e.next=19;break}return e.abrupt("return");case 19:return e.next=21,g.n2.createCertificateP12(t.getAuthorizationHeader,l,{certificateSerial:o,certificateKind:s,certificateRequestUuid:_});case 21:re(!0),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),se(e.t0);case 27:return e.prev=27,de(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}(),[t.getAuthorizationHeader,_,r,l]),we=a.useCallback(function(){var e=(0,v.Z)((0,x.Z)().mark((function e(n){var r,i,a;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,ge(""),Ze(!0),e.next=7,A(n);case 7:return r=e.sent,e.next=10,g.n2.uploadMobileProvision(t.getAuthorizationHeader,l,{mobileProvisionAsBase64:r});case 10:i=e.sent,a=i.name,ge(a),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),be(e.t0);case 18:return e.prev=18,Ze(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),[t.getAuthorizationHeader,l]);return(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsx)(w.Z,{kind:"info",renderLeftIcon:function(){return(0,L.jsx)(P.Z,{style:O.appleIcon})},renderRightButton:function(){return(0,L.jsx)(C.Z,{label:(0,L.jsx)(i.Trans,{id:"Open Apple Developer"}),onClick:function(){return S.ZP.openExternalURL("https://developer.apple.com/account")}})},children:(0,L.jsx)(i.Trans,{id:"You need a Apple Developer account to create a certificate."})}),(0,L.jsx)(o.Z,{size:"block-title",children:(0,L.jsx)(i.Trans,{id:"1) Create a Certificate Signing Request and a Certificate"})}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:"Create a certificate signing request that will be asked by Apple to generate a full certificate."}}),(0,L.jsxs)(d.pJ,{noMargin:!0,children:[(0,L.jsx)(M.Z,{fullWidth:!0,floatingLabelText:(0,L.jsx)(i.Trans,{id:"Company name or full name"}),value:f,onChange:function(e){return h(e)},maxLength:64}),(0,L.jsx)(M.Z,{fullWidth:!0,floatingLabelText:(0,L.jsx)(i.Trans,{id:"Country name"}),value:R,onChange:function(e){return F(e)},maxLength:64})]}),(0,L.jsxs)(d.pJ,{noMargin:!0,justifyContent:"flex-end",children:[(0,L.jsx)(y.Z,{isLoading:Y,children:(0,L.jsx)(j.Z,{primary:!_,disabled:Y,label:(0,L.jsx)(i.Trans,{id:"Create a signing request"}),onClick:$})}),(0,L.jsx)(j.Z,{primary:!!_&&!ne,disabled:!H,onClick:function(){return(0,Z.z)("data:text/plain;charset=utf-8,"+encodeURIComponent(H),"request.csr")},label:(0,L.jsx)(i.Trans,{id:"Download the request file"})})]}),K&&(0,L.jsx)(w.Z,{kind:"error",children:"An error occured while generating the Certificate Signing Request."}),(0,L.jsx)(o.Z,{size:"block-title",children:(0,L.jsx)(i.Trans,{id:"2) Upload the Certificate generated by Apple"})}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:"Go to [Apple Developer Certificates list](https://developer.apple.com/account/resources/certificates/list) and click on the + button. Choose **Apple Distribution** (for app store) or **Apple Development** (for testing on device). When requested, upload the request file you downloaded."}}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:"Download the certificate file (.cer) generated by Apple and upload it here. GDevelop will keep it securely stored."}}),(0,L.jsx)(k.Z,{variant:"outlined",background:"medium",children:(0,L.jsx)(s.x1,{expand:!0,children:(0,L.jsx)(s.sg,{expand:!0,children:(0,L.jsx)("input",{accept:["*/*"],style:{color:n.text.color.primary},multiple:!1,type:"file",disabled:!_||ue,onChange:function(e){var t=e.currentTarget.files[0]||null;se(null),t&&ke(t)}})})})}),oe&&(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"An error occured while generating the certificate."})}),ne&&(0,L.jsx)(w.Z,{kind:"valid",children:(0,L.jsx)(i.Trans,{id:"The certificate was properly generated. Don't forget to create and upload a provisioning profile associated to it."})}),(0,L.jsx)(o.Z,{size:"block-title",children:(0,L.jsx)(i.Trans,{id:"3) Upload one or more Mobile Provisioning Profiles"})}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:"Go to [Apple Developer Profiles list](https://developer.apple.com/account/resources/profiles/list) and click on the + button. Choose **App Store Connect** or **iOS App Development**. Then, choose *Xcode iOS Wildcard App ID*, then the certificate you created earlier. For development, you can choose [the devices you registered](https://developer.apple.com/help/account/register-devices/register-a-single-device/). Finish by downloading the generated file and upload it here so it can be stored securely by GDevelop."}}),(0,L.jsx)(k.Z,{variant:"outlined",background:"medium",children:(0,L.jsx)(s.x1,{expand:!0,children:(0,L.jsx)(s.sg,{expand:!0,children:(0,L.jsx)("input",{accept:["*/*"],style:{color:n.text.color.primary},multiple:!1,type:"file",disabled:ye,onChange:function(e){var t=e.currentTarget.files[0]||null;be(null),t&&we(t)}})})})}),ve&&(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"An error occured while storing the provisioning profile."})}),he&&(0,L.jsx)(w.Z,{kind:"valid",children:(0,L.jsx)(i.Trans,{id:"The provisioning profile was properly stored ( {lastUploadedProvisioningProfileName}). If you properly uploaded the certificate before, it can now be used.",values:{lastUploadedProvisioningProfileName:he}})})]})},F=n(28894),D=function(e){var t=e.authenticatedUser,n=a.useContext(I.Z),r=t.profile?t.profile.id:null,o=a.useState(null),l=(0,p.Z)(o,2),c=l[0],u=l[1],f=a.useState(""),h=(0,p.Z)(f,2),m=h[0],b=h[1],Z=a.useState(""),E=(0,p.Z)(Z,2),O=E[0],R=E[1],F=a.useState(""),D=(0,p.Z)(F,2),N=D[0],_=D[1],B=a.useState(null),U=(0,p.Z)(B,2),V=U[0],H=U[1],z=a.useState(!1),W=(0,p.Z)(z,2),G=W[0],Y=W[1],q=a.useState(null),J=(0,p.Z)(q,2),X=J[0],K=J[1],Q=a.useCallback((0,v.Z)((0,x.Z)().mark((function e(){var n;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Y(!0),H(null),K(null),e.next=8,A(c);case 8:return n=e.sent,e.next=11,g.n2.uploadAuthKey(t.getAuthorizationHeader,r,{name:m,appleAuthKeyP8AsBase64:n,appleApiKey:O,appleApiIssuer:N});case 11:H(O),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),K(e.t0);case 17:return e.prev=17,Y(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])}))),[N,O,c,m,t.getAuthorizationHeader,r]);return(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsx)(w.Z,{kind:"info",renderLeftIcon:function(){return(0,L.jsx)(P.Z,{style:{width:32,height:32}})},renderRightButton:function(){return(0,L.jsx)(C.Z,{label:(0,L.jsx)(i.Trans,{id:"Open Apple Developer"}),onClick:function(){return S.ZP.openExternalURL("https://developer.apple.com/account")}})},children:(0,L.jsx)(i.Trans,{id:"You need a Apple Developer account to create an API key that will automatically publish your app."})}),(0,L.jsx)(T.r,{isStandaloneText:!0,allowParagraphs:!0,translatableSource:{id:'Create an API key on the [App Store Connect API page](https://appstoreconnect.apple.com/access/integrations/api). Give it a name and **administrator** rights. Download the "Auth Key" file and upload it here along with the required information you can find on the page.'}}),(0,L.jsx)(M.Z,{floatingLabelText:(0,L.jsx)(i.Trans,{id:"Name (optional)"}),value:m,onChange:b,fullWidth:!0}),(0,L.jsxs)(d.pJ,{children:[(0,L.jsx)(M.Z,{floatingLabelText:(0,L.jsx)(i.Trans,{id:"API key given by Apple"}),hintText:"XXXXXXXXXX",value:O,onChange:R,fullWidth:!0}),(0,L.jsx)(M.Z,{floatingLabelText:(0,L.jsx)(i.Trans,{id:"API Issuer given by Apple"}),hintText:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:N,onChange:_,fullWidth:!0})]}),(0,L.jsx)(k.Z,{variant:"outlined",background:"medium",children:(0,L.jsx)(s.x1,{expand:!0,children:(0,L.jsx)(s.sg,{expand:!0,children:(0,L.jsx)("input",{accept:["*/*"],style:{color:n.text.color.primary},multiple:!1,type:"file",disabled:!O||!N||G,onChange:function(e){u(e.currentTarget.files[0]||null)}})})})}),(0,L.jsx)(s.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,L.jsx)(y.Z,{isLoading:G,children:(0,L.jsx)(j.Z,{primary:!0,disabled:G||!c||!N||!O,onClick:function(){Q()},label:(0,L.jsx)(i.Trans,{id:"Send the Auth Key"})})})}),X&&(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"An error occured while storing the auth key."})}),V&&(0,L.jsx)(w.Z,{kind:"valid",children:(0,L.jsx)(i.Trans,{id:"The auth key {lastUploadedApiKey} was properly stored. It can now be used to automatically upload your app to the app store - verify you've declared an app for it.",values:{lastUploadedApiKey:V}})})]})},N=function(e){var t=e.onClose,n=e.initialTab,r=e.authenticatedUser,o=a.useState(n),s=(0,p.Z)(o,2),l=s[0],c=s[1];return(0,L.jsxs)(b.ZP,{open:!0,title:(0,L.jsx)(i.Trans,{id:"Create iOS certificate"}),flexColumnBody:!0,maxWidth:"md",actions:[(0,L.jsx)(C.Z,{primary:!0,label:(0,L.jsx)(i.Trans,{id:"Close"}),onClick:t},"close")],fixedContent:(0,L.jsx)(F.m,{value:l,onChange:c,options:[{value:"apple-certificate",label:(0,L.jsx)(i.Trans,{id:"New Apple Certificate/Profile"})},{value:"apple-auth-key",label:(0,L.jsx)(i.Trans,{id:"New Auth Key (App Store upload)"})}]}),onRequestClose:t,children:["apple-certificate"===l&&(0,L.jsx)(R,{authenticatedUser:r}),"apple-auth-key"===l&&(0,L.jsx)(D,{authenticatedUser:r})]})},_=n(4076),B=n(1491),U=n(75383),V=n(78081),H=n(68196),z=n(87284),W=n(61804),G=n(51598),Y=n(54168),q=n(62981),J=n(15169),X=n(82422),K=n(70931),Q={bulletIcon:{width:20,height:20,marginRight:10}},$=function(e){var t=e.signingCredentials,n=e.authenticatedUser,l=e.error,c=e.onRefreshSigningCredentials,u=e.onAddNew,p=a.useContext(I.Z),f=(0,E.Z)().showConfirmation,h=(0,g.q7)(t);return(0,L.jsx)(d.ak,{noMargin:!0,children:l?(0,L.jsx)(U.Z,{onRetry:c,children:(0,L.jsx)(i.Trans,{id:"An error happened while loading the certificates."})}):h?h.length?h.map((function(e){return(0,L.jsx)(z.Z,{background:"medium",header:(0,L.jsx)(o.Z,{size:"block-title",noMargin:!0,children:(0,L.jsx)(i.Trans,{id:"{0}",values:{0:e.name}})}),cardCornerAction:(0,L.jsx)(Y.Z,{element:(0,L.jsx)(G.Z,{size:"small",children:(0,L.jsx)(W.Z,{})}),buildMenuTemplate:function(t){return[{label:t._({id:"Remove this certificate"}),click:function(){var t=(0,v.Z)((0,x.Z)().mark((function t(){var r;return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasCertificateReady){t.next=6;break}return t.next=3,f({level:"warning",title:{id:"Remove this certificate?"},message:{id:"Once removed, you'll need to generate a new certificate. Provisioning profiles will also be removed."},confirmButtonLabel:{id:"Remove certificate"}});case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:if(t.prev=6,r=n.profile?n.profile.id:null){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,g.n2.deleteSigningCredential(n.getAuthorizationHeader,r,{type:"apple-certificate",certificateSerial:e.certificateSerial});case 12:c(),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6),console.error("Unable to delete the certificate",t.t0);case 18:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(){return t.apply(this,arguments)}}()}]}}),disabled:!e.hasCertificateReady,children:(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[(0,L.jsx)(K.Z,{style:Q.bulletIcon}),(0,L.jsx)(o.Z,{size:"body",allowSelection:!0,children:(0,L.jsx)(i.Trans,{id:"Serial: {0}",values:{0:e.certificateSerial}})})]}),e.hasCertificateReady?"unknown"===e.kind?(0,L.jsx)(w.Z,{kind:"warning",children:(0,L.jsx)(i.Trans,{id:"This certificate has an unknown type and is probably unable to be used by GDevelop."})}):(0,L.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[(0,L.jsx)(X.Z,{style:(0,r.Z)((0,r.Z)({},Q.bulletIcon),{},{color:p.message.valid})}),(0,L.jsx)(o.Z,{size:"body",children:(0,L.jsx)(i.Trans,{id:"Certificate type: {0}",values:{0:e.kind}})})]}):(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"This certificate was not sent or is not ready to be used."})}),(0,L.jsx)(o.Z,{size:"sub-title",noMargin:!0,children:(0,L.jsx)(i.Trans,{id:"Provisioning profiles"})}),e.provisioningProfiles.length?(0,L.jsx)(J.aV,{children:e.provisioningProfiles.map((function(e){return(0,L.jsx)(J.HC,{primaryText:e.name,secondaryText:e.uuid,leftIcon:(0,L.jsx)(q.Z,{})})}))}):(0,L.jsx)(w.Z,{kind:"warning",renderRightButton:function(){return(0,L.jsx)(j.Z,{primary:!0,icon:(0,L.jsx)(B.Z,{}),label:(0,L.jsx)(i.Trans,{id:"Add new"}),onClick:u},"add-new")},children:(0,L.jsx)(i.Trans,{id:"There are no provisioning profile created for this certificate. Create one in the Apple Developer interface and add it here."})})]})})})):(0,L.jsx)(H.$,{title:(0,L.jsx)(i.Trans,{id:"Create your Apple certificate for iOS"}),actionLabel:(0,L.jsx)(i.Trans,{id:"Add"}),onAction:u,description:(0,L.jsx)(i.Trans,{id:'Create your certificate and "provisioning profile" thanks to your Apple Developer account. We\'ll guide you with a step by step process.'})}):(0,L.jsx)(V.Z,{})})},ee={bulletIcon:{width:20,height:20,marginRight:10}},te=function(e){var t=e.signingCredentials,n=e.authenticatedUser,r=e.error,a=e.onRefreshSigningCredentials,l=e.onAddNew,c=(0,g.oj)(t);return(0,L.jsx)(d.ak,{noMargin:!0,children:r?(0,L.jsx)(U.Z,{onRetry:a,children:(0,L.jsx)(i.Trans,{id:"An error happened while loading the certificates."})}):c?c.length?c.map((function(e){return(0,L.jsx)(z.Z,{background:"medium",header:(0,L.jsx)(o.Z,{size:"block-title",noMargin:!0,children:(0,L.jsx)(i.Trans,{id:"{0}",values:{0:e.name}})}),cardCornerAction:(0,L.jsx)(Y.Z,{element:(0,L.jsx)(G.Z,{size:"small",children:(0,L.jsx)(W.Z,{})}),buildMenuTemplate:function(t){return[{label:t._({id:"Remove this Auth Key"}),click:function(){var t=(0,v.Z)((0,x.Z)().mark((function t(){var r;return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.profile?n.profile.id:null){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,g.n2.deleteSigningCredential(n.getAuthorizationHeader,r,{type:"apple-auth-key",appleApiKey:e.apiKey});case 6:a(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.error("Unable to delete the auth key",t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(){return t.apply(this,arguments)}}()}]}}),disabled:!e.hasAuthKeyReady,children:(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[(0,L.jsx)(K.Z,{style:ee.bulletIcon}),(0,L.jsx)(o.Z,{size:"body",allowSelection:!0,children:(0,L.jsx)(i.Trans,{id:"API key: {0}",values:{0:e.apiKey}})})]}),(0,L.jsxs)(s.x1,{noMargin:!0,alignItems:"center",children:[(0,L.jsx)(K.Z,{style:ee.bulletIcon}),(0,L.jsx)(o.Z,{size:"body",allowSelection:!0,children:(0,L.jsx)(i.Trans,{id:"API Issuer ID: {0}",values:{0:e.apiIssuer}})})]}),!e.hasAuthKeyReady&&(0,L.jsx)(w.Z,{kind:"error",children:(0,L.jsx)(i.Trans,{id:"This Auth Key was not sent or is not ready to be used."})})]})})})):(0,L.jsx)(H.$,{title:(0,L.jsx)(i.Trans,{id:"Create your Auth Key to send your game to App Store Connect"}),actionLabel:(0,L.jsx)(i.Trans,{id:"Add"}),onAction:l,description:(0,L.jsx)(i.Trans,{id:"Declare your app on App Store Connect and then register a key so that your game can be automatically uploaded when built. It's perfect to try your game with testers on Apple TestFlight."})}):(0,L.jsx)(V.Z,{})})},ne=function(e){var t=e.authenticatedUser,n=e.onClose,r=e.signingCredentials,o=e.error,s=e.onRefreshSigningCredentials,l=a.useState("apple-certificate"),c=(0,p.Z)(l,2),u=c[0],d=c[1],f=a.useState(null),h=(0,p.Z)(f,2),g=h[0],m=h[1];return(0,L.jsxs)(b.ZP,{open:!0,title:(0,L.jsx)(i.Trans,{id:"Signing Credentials"}),actions:[(0,L.jsx)(C.Z,{primary:!0,label:(0,L.jsx)(i.Trans,{id:"Close"}),onClick:n},"close")],secondaryActions:[(0,L.jsx)(_.Z,{helpPagePath:"/publishing/ios"},"help"),r&&r.length>0?(0,L.jsx)(j.Z,{primary:!0,icon:(0,L.jsx)(B.Z,{}),label:(0,L.jsx)(i.Trans,{id:"Add new"}),onClick:function(){return m(u)}},"add-new"):null],fixedContent:(0,L.jsx)(F.m,{value:u,onChange:d,options:[{value:"apple-certificate",label:(0,L.jsx)(i.Trans,{id:"Apple Certificates & Profiles"})},{value:"apple-auth-key",label:(0,L.jsx)(i.Trans,{id:"Auth Key (App Store upload)"})}]}),onRequestClose:n,children:["apple-certificate"===u&&(0,L.jsx)($,{authenticatedUser:t,signingCredentials:r,error:o,onRefreshSigningCredentials:s,onAddNew:function(){return m(u)}}),"apple-auth-key"===u&&(0,L.jsx)(te,{authenticatedUser:t,signingCredentials:r,error:o,onRefreshSigningCredentials:s,onAddNew:function(){return m(u)}}),g&&(0,L.jsx)(N,{authenticatedUser:t,initialTab:g,onClose:function(){m(null),s()}})]})},re=n(90242),ie=["authKeyApiKey"],ae={button:{flexShrink:0},raisedButton:{flexShrink:0}},oe=function(e,t,n){var i=(0,g.q7)(t);if(!i)return e;var a,o=(0,h.Z)(i);try{for(o.s();!(a=o.n()).done;){var s,l=a.value,c=(0,h.Z)(l.provisioningProfiles);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(u.uuid===n)return(0,r.Z)((0,r.Z)({},e),{},{certificateSerial:l.certificateSerial,mobileProvisionUuid:u.uuid})}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return e},se=function(e,t,n){if(!e)return e;if(!n||!t.includes("iosAppStore")&&e.authKeyApiKey){e.authKeyApiKey;return(0,f.Z)(e,ie)}return(0,r.Z)((0,r.Z)({},e),{},{authKeyApiKey:n})},le=function(e,t,n){var r=(0,g.q7)(t),i=(0,g.oj)(t);if(!r)return e;if(!r.length)return null;var a=e;return a&&function(e,t){var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.certificateSerial===t.certificateSerial){var a,o=(0,h.Z)(i.provisioningProfiles);try{for(o.s();!(a=o.n()).done;)if(a.value.uuid===t.mobileProvisionUuid)return!0}catch(s){o.e(s)}finally{o.f()}}}}catch(s){r.e(s)}finally{r.f()}return!1}(r,a)||(a=oe(a,t,r[0].provisioningProfiles[0]?r[0].provisioningProfiles[0].uuid:"")),i&&a&&!function(e,t,n){if(!t.includes("iosAppStore")&&n.authKeyApiKey)return!1;var r,i=(0,h.Z)(e);try{for(i.s();!(r=i.n()).done;)if(r.value.apiKey===n.authKeyApiKey)return!0}catch(a){i.e(a)}finally{i.f()}return!1}(i,n,a)&&(a=se(a,n,i[0]?i[0].apiKey:null)),a},ce=function(e){var t=e.targets,n=e.authenticatedUser,r=e.buildSigningOptions,o=e.onSelectBuildSigningOptions,s=e.disabled,l=function(e){var t=a.useState(null),n=(0,p.Z)(t,2),r=n[0],i=n[1],o=a.useState(null),s=(0,p.Z)(o,2),l=s[0],c=s[1],u=e.profile?e.profile.id:null,d=a.useCallback((0,v.Z)((0,x.Z)().mark((function t(){var n;return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,c(null),t.next=6,(0,g.Bh)(e.getAuthorizationHeader,u);case 6:n=t.sent,i(n),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Unable to load signing credentials:",t.t0),c(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),[e.getAuthorizationHeader,u]);return a.useEffect((function(){d()}),[d]),{signingCredentials:r,onRefreshSigningCredentials:d,error:l}}(n),c=l.signingCredentials,u=l.error,f=l.onRefreshSigningCredentials,h=function(e,t){return e?e.filter((function(e){return"apple-certificate"===e.type?!(!t.includes("iosAppStore")&&!t.includes("iosDevelopment"))&&!("development"===e.kind&&!t.includes("iosDevelopment"))&&!("distribution"===e.kind&&!t.includes("iosAppStore")):"apple-auth-key"===e.type&&t.includes("iosAppStore")})):null}(c,t),b=(0,g.q7)(h),y=(0,g.oj)(h),Z=a.useState(!1),k=(0,p.Z)(Z,2),w=k[0],T=k[1];return a.useEffect((function(){var e,n,i=le(r,h,t);e=i,n=r,JSON.stringify(e)!==JSON.stringify(n)&&o(i)}),[r,o,h,t]),(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsxs)(d.pJ,{noMargin:!0,expand:!0,alignItems:"end",children:[(0,L.jsx)(m.Z,{fullWidth:!0,floatingLabelText:(0,L.jsx)(i.Trans,{id:"Certificate and provisioning profile"}),value:r&&r.mobileProvisionUuid||"",onChange:function(e,t,n){var i=oe(r,h,n);i&&o(i)},translatableHintText:b?b.length>0?{id:"Choose a provisioning profile"}:{id:"Add a certificate/profile first"}:{id:"Loading..."},disabled:s,children:b?b.flatMap((function(e){return e.provisioningProfiles.map((function(t){return(0,L.jsx)(re.Z,{disabled:!e.hasCertificateReady,label:"".concat(t.name," (").concat(e.name,")"),value:t.uuid},t.uuid)}))})):(0,L.jsx)(re.Z,{disabled:!0,label:u?{id:"Error loading certificates."}:{id:"Loading..."},value:""})}),b&&b.length>0?(0,L.jsx)(C.Z,{style:ae.button,label:(0,L.jsx)(i.Trans,{id:"Add or edit"}),onClick:function(){return T(!0)},disabled:s}):(0,L.jsx)(j.Z,{primary:!0,style:ae.raisedButton,label:(0,L.jsx)(i.Trans,{id:"Add new"}),onClick:function(){return T(!0)},disabled:s}),w&&(0,L.jsx)(ne,{signingCredentials:c,error:u,onRefreshSigningCredentials:f,onClose:function(){T(!1),f()},authenticatedUser:n})]}),t.includes("iosAppStore")&&(0,L.jsx)(d.pJ,{noMargin:!0,children:(0,L.jsx)(m.Z,{fullWidth:!0,floatingLabelText:(0,L.jsx)(i.Trans,{id:"Auth Key for upload to App Store Connect"}),value:r&&r.authKeyApiKey||"",onChange:function(e,n,i){var a=se(r,t,i);a&&o(a)},translatableHintText:b?b.length>0?{id:"Choose a Auth Key"}:{id:"Add an Auth Key first"}:{id:"Loading..."},disabled:s,children:y?y.flatMap((function(e){return(0,L.jsx)(re.Z,{disabled:!e.hasAuthKeyReady,label:"".concat(e.name," (").concat(e.apiKey,")"),value:e.apiKey},e.apiKey)})):(0,L.jsx)(re.Z,{disabled:!0,label:u?{id:"Error loading Auth Keys."}:{id:"Loading..."},value:""})})})]})},ue=n(14746),de=function(e){var t=e.exportState,n=e.authenticatedUser,a=e.updateExportState,p=e.isExporting,f=e.build,h=e.quota;if(f&&"complete"===f.status)return null;var g=h&&0===h.max;return(0,L.jsxs)(d.ak,{noMargin:!0,expand:!0,children:[(0,L.jsx)(s.x1,{alignItems:"center",justifyContent:"center",children:(0,L.jsx)(o.Z,{align:"center",children:(0,L.jsx)(i.Trans,{id:"Package the game for iOS, using your Apple Developer account."})})}),!g&&(0,L.jsxs)(d.ak,{noMargin:!0,children:[(0,L.jsxs)(u.Z,{value:t.targets[0]||"iosAppStore",onChange:function(e){var t=e.target.value;a((function(e){return(0,r.Z)((0,r.Z)({},e),{},{targets:[t]})}))},children:[(0,L.jsx)(l.Z,{value:"iosDevelopment",control:(0,L.jsx)(c.Z,{color:"secondary",disabled:p}),label:(0,L.jsx)(i.Trans,{id:"Development (debugging & testing on a registered iPhone/iPad)"})}),(0,L.jsx)(l.Z,{value:"iosAppStore",control:(0,L.jsx)(c.Z,{color:"secondary",disabled:p}),label:(0,L.jsx)(i.Trans,{id:"Apple App Store"})})]}),(0,L.jsx)(ce,{targets:t.targets,buildSigningOptions:t.signing,onSelectBuildSigningOptions:function(e){a((function(t){return(0,r.Z)((0,r.Z)({},t),{},{signing:e})}))},authenticatedUser:n,disabled:p})]})]})},pe=function(e){var t=e.disabled,n=e.launchExport,r=e.isExporting,a=e.exportPipelineName,o=e.exportStep,l=e.build,c=e.stepMaxProgress,u=e.stepCurrentProgress,p=e.errored,f=r||!!l&&"error"!==l.status;return(0,L.jsxs)(d.ak,{noMargin:!0,children:[!f&&(0,L.jsx)(s.x1,{justifyContent:"center",children:(0,L.jsx)(j.Z,{label:(0,L.jsx)(i.Trans,{id:"Create package for iOS"}),primary:!0,id:"launch-export-".concat(a,"-button"),onClick:n,disabled:t})}),f&&(0,L.jsx)(s.x1,{expand:!0,children:(0,L.jsx)(ue.Z,{exportStep:o,hasBuildStep:!0,build:l,stepMaxProgress:c,stepCurrentProgress:u,errored:p})})]})},fe={key:"onlinecordovaiosexport",tabName:(0,L.jsx)(i.Trans,{id:"iOS"}),name:(0,L.jsx)(i.Trans,{id:"iOS"}),helpPage:"/publishing/ios"}},87335:function(e,t,n){"use strict";n.d(t,{OL:function(){return m},s_:function(){return h},yg:function(){return g}});var r=n(93433),i=n(1413),a=n(36600),o=n(28381),s=n(86278),l=n(21601),c=n(40243),u=n(14746),d=n(60022),p=n(61325),f=n(29343),h=function(e){var t=e.exportState,n=e.updateExportState,u=e.isExporting,d=e.build;if(d&&"complete"===d.status)return null;var p=function(e,t){n((function(n){return t&&-1===n.targets.indexOf(e)?(0,i.Z)((0,i.Z)({},n),{},{targets:[].concat((0,r.Z)(n.targets),[e])}):t||-1===n.targets.indexOf(e)?n:(0,i.Z)((0,i.Z)({},n),{},{targets:n.targets.filter((function(t){return t!==e}))})}))};return(0,f.jsx)(o.Fragment,{children:(0,f.jsxs)(c.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(c.x1,{children:(0,f.jsx)(s.Z,{align:"center",children:(0,f.jsx)(a.Trans,{id:"Your game will be exported and packaged online as a stand-alone game for Windows, Linux and/or macOS."})})}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(a.Trans,{id:"Windows (zip file)"}),checked:-1!==t.targets.indexOf("winZip"),onCheck:function(e,t){return p("winZip",t)},disabled:u}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(a.Trans,{id:"Windows (auto-installer file)"}),checked:-1!==t.targets.indexOf("winExe"),onCheck:function(e,t){return p("winExe",t)},disabled:u}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(a.Trans,{id:"macOS (zip file)"}),checked:-1!==t.targets.indexOf("macZip"),onCheck:function(e,t){return p("macZip",t)},disabled:u}),(0,f.jsx)(l.Z,{label:(0,f.jsx)(a.Trans,{id:"Linux (AppImage)"}),checked:-1!==t.targets.indexOf("linuxAppImage"),onCheck:function(e,t){return p("linuxAppImage",t)},disabled:u})]})})},g=function(e){var t=e.disabled,n=e.launchExport,r=e.isExporting,i=e.exportPipelineName,o=e.exportStep,s=e.build,l=e.stepMaxProgress,h=e.stepCurrentProgress,g=e.errored,m=r||!!s&&"error"!==s.status;return(0,f.jsxs)(p.ak,{noMargin:!0,children:[!m&&(0,f.jsx)(c.x1,{justifyContent:"center",children:(0,f.jsx)(d.Z,{label:(0,f.jsx)(a.Trans,{id:"Create installation file"}),primary:!0,id:"launch-export-".concat(i,"-button"),onClick:n,disabled:t})}),m&&(0,f.jsx)(c.x1,{expand:!0,children:(0,f.jsx)(u.Z,{exportStep:o,hasBuildStep:!0,build:s,stepMaxProgress:l,stepCurrentProgress:h,errored:g})})]})},m={key:"onlineelectronexport",tabName:(0,f.jsx)(a.Trans,{id:"Desktop"}),name:(0,f.jsx)(a.Trans,{id:"Windows, macOS & Linux"}),helpPage:"/publishing/windows-macos-linux"}},28982:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var r=n(74165),i=n(15861),a=n(29439),o=n(36600),s=n(28381),l=n(86278),c=n(40243),u=n(10959),d=n(16999),p=n(71106),f=n(66789),h=n(30609),g=n(1413),m=n(1773),x=n(38092),v=n(75087),b=n(10928),C=n(10888),j=n(78118),y=n(29343),Z=s.memo((function(e){return(0,y.jsx)(j.Z,(0,g.Z)((0,g.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,y.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.55532 5.61476C9.93868 5.95799 10.445 6.16671 11 6.16671C12.1967 6.16671 13.1667 5.19666 13.1667 4.00004C13.1667 2.80342 12.1967 1.83337 11 1.83337C9.80342 1.83337 8.83337 2.80342 8.83337 4.00004C8.83337 4.27671 8.88523 4.54126 8.97975 4.78451L6.18159 6.18359C5.84176 5.96209 5.43593 5.83337 5.00004 5.83337C3.80342 5.83337 2.83337 6.80342 2.83337 8.00004C2.83337 9.19666 3.80342 10.1667 5.00004 10.1667C5.5437 10.1667 6.0406 9.96647 6.421 9.63572L8.99411 11.1796C8.89049 11.4326 8.83337 11.7097 8.83337 12C8.83337 13.1967 9.80342 14.1667 11 14.1667C12.1967 14.1667 13.1667 13.1967 13.1667 12C13.1667 10.8034 12.1967 9.83337 11 9.83337C10.4564 9.83337 9.95947 10.0336 9.57907 10.3644L7.00597 8.82051C7.10959 8.56744 7.16671 8.29041 7.16671 8.00004C7.16671 7.61733 7.06748 7.25779 6.89335 6.94575L9.55532 5.61476ZM11 2.83337C10.3557 2.83337 9.83337 3.35571 9.83337 4.00004C9.83337 4.25845 9.91739 4.49723 10.0596 4.69057C10.0642 4.69642 10.0687 4.70238 10.073 4.70847C10.2862 4.98704 10.6221 5.16671 11 5.16671C11.6444 5.16671 12.1667 4.64437 12.1667 4.00004C12.1667 3.35571 11.6444 2.83337 11 2.83337ZM5.00004 6.83337C4.35571 6.83337 3.83337 7.35571 3.83337 8.00004C3.83337 8.64437 4.35571 9.16671 5.00004 9.16671C5.3788 9.16671 5.71541 8.98621 5.92854 8.70655C5.93198 8.70178 5.9355 8.69709 5.93909 8.69248C6.08214 8.4988 6.16671 8.2593 6.16671 8.00004C6.16671 7.35571 5.64437 6.83337 5.00004 6.83337ZM9.83337 12C9.83337 11.7407 9.91797 11.5012 10.0611 11.3075C10.0646 11.303 10.0681 11.2983 10.0714 11.2937C10.2846 11.0139 10.6212 10.8334 11 10.8334C11.6444 10.8334 12.1667 11.3557 12.1667 12C12.1667 12.6444 11.6444 13.1667 11 13.1667C10.3557 13.1667 9.83337 12.6444 9.83337 12Z",fill:"currentColor"})}))})),k=function(e){var t=e.url,n=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&navigator.share){e.next=2;break}return e.abrupt("return");case 2:return n={title:"My GDevelop game",text:"Try the game I just created with #gdevelop",url:t},e.prev=3,e.next=6,navigator.share(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Couldn't share the game",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return navigator.share?(0,y.jsx)(C.Z,{label:(0,y.jsx)(o.Trans,{id:"Share"}),onClick:n,leftIcon:(0,y.jsx)(Z,{})}):null},w=n(61325),T=n(94553),S=n(22537),P=n(6996),I=n(1879),E={flex:1,display:"flex",gap:8},M=function(e){var t=e.buildOrGameUrl,n=e.gameThumbnailUrl,r=e.gameName,i=e.onOpenGameDashboard,u=e.onClose,d=e.isBuildPublished,p=e.loadingText,h=(0,P.UQ)(),j=h.isMobile,Z=h.isLandscape,M=s.useState(!1),L=(0,a.Z)(M,2),A=L[0],O=L[1];return(0,y.jsxs)(m.ZP,{title:(0,y.jsx)(o.Trans,{id:"Share your game"}),id:"export-game-share-dialog",maxWidth:n?"md":"sm",actions:[(0,y.jsx)(m.vF,{label:(0,y.jsx)(o.Trans,{id:"Done"}),primary:!0,onClick:u,disabled:!!p},"close")],secondaryActions:[t&&!p&&i?(0,y.jsx)(C.Z,{primary:!0,label:(0,y.jsx)(o.Trans,{id:"Open Game dashboard"}),onClick:i},"publish"):null],open:!0,onRequestClose:u,flexColumnBody:!0,children:[t&&!p?(0,y.jsxs)(w.ak,{noMargin:!0,expand:!0,children:[(0,y.jsx)(c.sg,{noMargin:!0,children:(0,y.jsxs)(w.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[n&&r&&(0,y.jsx)(I.J,{background:"light",fullWidthOnMobile:!0,thumbnailUrl:n,gameName:r}),(0,y.jsxs)(w.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,y.jsx)(v.Z,{url:t,withOpenButton:!0}),(0,y.jsxs)("div",{style:(0,g.Z)((0,g.Z)({},E),{},{justifyContent:j&&!Z?"stretch":"space-between",flexDirection:j&&!Z?"column-reverse":"row",alignItems:j&&!Z?"stretch":"flex-end"}),children:[(0,y.jsx)(c.x1,{noMargin:!0,justifyContent:"center",children:(0,y.jsx)(T.Z,{url:t,size:100})}),(0,y.jsx)(c.sg,{noMargin:!0,alignItems:navigator.share?"stretch":"flex-end",children:navigator.share?(0,y.jsx)(k,{url:t}):(0,y.jsx)(b.Z,{url:t})})]})]})]})}),!d&&(0,y.jsx)(x.Z,{kind:"info",children:(0,y.jsx)(o.Trans,{id:"This link is private. You can share it with collaborators, friends or testers.<0/>When you're ready, go to the Game Dashboard and publish it on gd.games.",components:[(0,y.jsx)("br",{})]})})]}):(0,y.jsxs)(w.ak,{alignItems:"center",justifyContent:"center",expand:!0,children:[(0,y.jsx)(c.x1,{children:(0,y.jsx)(f.Z,{size:40})}),(0,y.jsx)(l.Z,{children:p})]}),(0,y.jsx)(S.Z,{message:(0,y.jsx)(o.Trans,{id:"Copied to clipboard!"}),visible:A,hide:function(){return O(!1)}})]})},L=function(e){var t=e.build,n=e.game,g=(e.project,e.onSaveProject,e.isSavingProject,e.errored),m=e.exportStep,x=(e.onRefreshGame,e.onGameUpdated),v=e.automaticallyPublishNewBuild,b=e.shouldShowShareDialog,C=s.useState(!1),j=(0,a.Z)(C,2),Z=j[0],k=j[1],w=s.useRef(!1),T=s.useState(!1),S=(0,a.Z)(T,2),P=S[0],I=S[1],E=s.useContext(p.ZP),L=E.getAuthorizationHeader,A=E.profile,O=s.useState(5),R=(0,a.Z)(O,2),F=R[0],D=R[1],N=s.useContext(h.ZP).addRouteArguments,_=!g&&""!==m&&"done"!==m,B=!!t&&"complete"===t.status,U=t?t.id:null,V=A?A.id:null,H=n?n.id:null,z=t&&n&&t.id===n.publicWebBuildId,W=(0,d.IH)(n),G=_||!B?null:z?W:(0,u.Fp)(t,"s3Key"),Y=n?(0,d.nC)(n):null;s.useEffect((function(){if(_){var e=setTimeout((function(){D(F?F-1:0)}),1e3);return function(){return clearTimeout(e)}}}),[_,F]),s.useEffect((function(){"done"===m&&(D(5),b&&k(!0))}),[m,b]);var q=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V&&H&&U&&!z&&!w.current){e.next=2;break}return e.abrupt("return");case 2:if(!B||!v){e.next=14;break}return e.prev=3,w.current=!0,I(!0),e.next=8,(0,d.Bi)(L,V,H,{publicWebBuildId:U});case 8:t=e.sent,x(t);case 10:return e.prev=10,I(!1),w.current=!1,e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[3,,10,14]])}))),[B,v,U,H,V,L,z,x]),J=s.useCallback((function(){H&&N({"initial-dialog":"games-dashboard","game-id":H})}),[H,N]);return s.useEffect((function(){q()}),[q]),t||m?(0,y.jsx)(o.I18n,{children:function(e){e.i18n;return(0,y.jsxs)(y.Fragment,{children:[_&&(0,y.jsxs)(c.sg,{alignItems:"center",children:[(0,y.jsx)(l.Z,{children:(0,y.jsx)(o.Trans,{id:"Uploading your game..."})}),(0,y.jsx)(c.x1,{expand:!0,children:(0,y.jsx)(f.Z,{value:(5-F)/5*100,variant:0===F?"indeterminate":"determinate"})})]}),Z&&(0,y.jsx)(M,{gameThumbnailUrl:Y,gameName:n?n.gameName:void 0,buildOrGameUrl:G,isBuildPublished:!!z,loadingText:!P&&G?null:v?(0,y.jsx)(o.Trans,{id:"Loading the game..."}):(0,y.jsx)(o.Trans,{id:"Loading the game link..."}),onClose:function(){return k(!1)},onOpenGameDashboard:n?J:void 0})]})}}):null}},4615:function(e,t,n){"use strict";var r=n(29439),i=n(36600),a=n(28381),o=n(61325),s=n(60022),l=n(40243),c=n(28982),u=n(57597),d=n(29343);t.Z=function(e){var t=e.project,n=e.gameAndBuildsManager,p=e.build,f=e.onSaveProject,h=e.isSavingProject,g=e.errored,m=e.exportStep,x=e.disabled,v=e.launchExport,b=e.exportPipelineName,C=(e.isExporting,e.uiMode),j=n.game,y=n.gameBuilds,Z=n.refreshGame,k=n.setGame,w=n.gameAvailabilityError,T=!w||"not-owned"!==w,S=!!y&&!!y.filter((function(e){return"web-build"===e.type})).length,P=!!j&&!!j.publicWebBuildId,I=a.useState(T&&(!S||P)),E=(0,r.Z)(I,2),M=E[0],L=E[1],A="minimal"===C?""===m:""===m||"done"===m,O=(0,d.jsxs)(o.ak,{children:[(0,d.jsx)(l.x1,{justifyContent:"minimal"===C?"stretch":"center",noMargin:!0,children:(0,d.jsx)(s.Z,{label:T?S?M?(0,d.jsx)(i.Trans,{id:"Publish new version"}):(0,d.jsx)(i.Trans,{id:"Generate a new link"}):(0,d.jsx)(i.Trans,{id:"Publish game"}):(0,d.jsx)(i.Trans,{id:"Generate a link"}),primary:!0,id:"launch-export-".concat(b,"-button"),onClick:v,disabled:x})}),S&&(0,d.jsx)(l.x1,{justifyContent:"center",children:(0,d.jsx)(u.Z,{toggled:M,onToggle:function(e,t){return L(t)},label:(0,d.jsx)(i.Trans,{id:"Update game page"}),labelPosition:"right",disabled:x})})]});return(0,d.jsxs)(l.sg,{noMargin:!0,alignItems:"minimal"===C?"stretch":"center",children:[A?O:null,(0,d.jsx)(c.Z,{build:p,project:t,onSaveProject:f,isSavingProject:h,errored:g,exportStep:m,automaticallyPublishNewBuild:M,onRefreshGame:Z,onGameUpdated:k,game:j,shouldShowShareDialog:"full"===C})]})}},96516:function(e,t,n){"use strict";n.d(t,{O1:function(){return u},if:function(){return c}});var r=n(36600),i=(n(28381),n(86278)),a=n(40243),o=(n(28982),n(44378)),s=n(29343),l={icon:{height:48,width:48,margin:10}},c=function(e){return"minimal"===e.uiMode?null:(0,s.jsxs)(a.sg,{noMargin:!0,children:[(0,s.jsx)(a.x1,{alignItems:"center",justifyContent:"center",children:(0,s.jsx)(i.Z,{align:"center",children:(0,s.jsx)(r.Trans,{id:"Publishing to gd.games, the GDevelop gaming platform. Games can be played from any device."})})}),(0,s.jsx)(a.x1,{justifyContent:"center",children:(0,s.jsx)(o.Z,{color:"secondary",style:l.icon})})]})},u={key:"onlinewebexport",tabName:"Web",name:(0,s.jsx)(r.Trans,{id:"gd.games"}),helpPage:"/publishing/web"}},6745:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var r=n(1413),i=n(74165),a=n(15861),o=n(15671),s=n(43144),l=n(60136),c=n(29388),u=n(36600),d=n(28381),p=n(75333),f=n(40243),h=n(30141),g=n(54458),m=n(68151),x=n(78081),v=n(86278),b=n(49522),C=n(61325),j=n(24910),y=n(62903),Z=n(71106),k=n(29343),w={subscriptionContainer:{display:"flex",borderRadius:10,alignItems:"center"},diamondIcon:{width:50,height:50,aspectRatio:"1"}},T=function(e){var t=e.subscription,n=e.quota,o=e.usagePrice,s=(e.onChangeSubscription,e.onStartBuildWithCredits),l=e.hidePurchaseWithCredits,c=d.useContext(j.Z),p=d.useContext(y.q$),h=p.openCreditsPackageDialog,g=p.openCreditsUsageDialog,T=d.useContext(Z.ZP),S=T.profile,P=T.limits,I=o?o.priceInCredits:0,E=d.useCallback((function(){if(S&&P&&I){var e=P.credits.userBalance.amount;e<I?h({missingCredits:I-e}):g({title:(0,k.jsx)(u.Trans,{id:"Start build with credits"}),message:(0,k.jsx)(u.Trans,{id:"You are about to use {usageCreditPrice} credits to start this build. Continue?",values:{usageCreditPrice:I}}),onConfirm:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),successMessage:(0,k.jsx)(u.Trans,{id:"Build started!"}),closeAutomaticallyAfterSuccess:!0})}}),[S,P,I,g,s,h]);if(!n||!t||!o)return(0,k.jsx)(x.Z,{});var M=0===n.max,L=(0,m.e_)(t),A=Math.max(n.max-n.current,0),O="".concat(n.current,"/").concat(n.max),R="30days"===n.period?(0,k.jsx)(u.Trans,{id:"You have <0>{remainingBuilds}</0> builds remaining \u2014 you have used {usageRatio} in the past 30 days.",values:{remainingBuilds:A,usageRatio:O},components:[(0,k.jsx)("b",{})]}):(0,k.jsx)(u.Trans,{id:"You have <0>{remainingBuilds}</0> builds remaining \u2014 you have used {usageRatio} in the past 24h.",values:{remainingBuilds:A,usageRatio:O},components:[(0,k.jsx)("b",{})]}),F="30days"===n.period?(0,k.jsx)(u.Trans,{id:"You have <0>{remainingBuilds}</0> build remaining \u2014 you have used {usageRatio} in the past 30 days.",values:{remainingBuilds:A,usageRatio:O},components:[(0,k.jsx)("b",{})]}):(0,k.jsx)(u.Trans,{id:"You have <0>{remainingBuilds}</0> build remaining \u2014 you have used {usageRatio} in the past 24h.",values:{remainingBuilds:A,usageRatio:O},components:[(0,k.jsx)("b",{})]}),D=!(0,m.Lf)(t);return(0,k.jsx)(C.ak,{noMargin:!0,children:L?n.limitReached?(0,k.jsx)(b.Z,{subscriptionDialogOpeningReason:M?"Unlock build type":"Build limit reached",label:(0,k.jsx)(u.Trans,{id:"Upgrade your subscription"}),payWithCreditsOptions:l?void 0:{label:(0,k.jsx)(u.Trans,{id:"Purchase with {usageCreditPrice} credits",values:{usageCreditPrice:I}}),onPayWithCredits:E},hideButton:D,recommendedPlanIdIfNoSubscription:"gdevelop_silver",placementId:"builds",children:(0,k.jsx)(f.x1,{children:M?(0,k.jsx)(f.sg,{noMargin:!0,children:(0,k.jsx)(v.Z,{noMargin:!0,children:(0,k.jsx)(u.Trans,{id:"Upgrade your GDevelop subscription to unlock this packaging."})})}):(0,k.jsxs)(f.sg,{noMargin:!0,children:[(0,k.jsx)(v.Z,{noMargin:!0,children:R}),(0,k.jsx)(v.Z,{noMargin:!0,children:D?(0,k.jsx)(u.Trans,{id:"Use GDevelop credits to start an export."}):(0,k.jsx)(u.Trans,{id:"Use GDevelop credits or upgrade your subscription to increase the limits."})})]})})}):(0,k.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},w.subscriptionContainer),{},{border:"1px solid ".concat(c.palette.secondary)}),children:[(0,k.jsx)("img",{src:"res/diamond.svg",style:w.diamondIcon,alt:"diamond"}),(0,k.jsx)(f.x1,{children:(0,k.jsx)(f.sg,{expand:!0,children:(0,k.jsx)(v.Z,{noMargin:!0,children:1===A?F:R})})})]}):(0,k.jsx)(b.Z,{subscriptionDialogOpeningReason:M?"Unlock build type":"Build limit reached",label:(0,k.jsx)(u.Trans,{id:"Get a subscription"}),payWithCreditsOptions:!n.limitReached||l?void 0:{label:(0,k.jsx)(u.Trans,{id:"Purchase with {usageCreditPrice} credits",values:{usageCreditPrice:I}}),onPayWithCredits:E},recommendedPlanIdIfNoSubscription:"gdevelop_silver",placementId:"builds",children:(0,k.jsx)(f.x1,{children:M?(0,k.jsx)(f.sg,{noMargin:!0,children:(0,k.jsx)(v.Z,{noMargin:!0,children:(0,k.jsx)(u.Trans,{id:"Get a subscription to unlock this packaging."})})}):(0,k.jsxs)(f.sg,{noMargin:!0,children:[(0,k.jsx)(v.Z,{noMargin:!0,children:1===A?F:R}),(0,k.jsx)(v.Z,{noMargin:!0,children:n.limitReached?(0,k.jsx)(u.Trans,{id:"Use GDevelop credits or get a subscription to increase the limits."}):(0,k.jsx)(u.Trans,{id:"Get a GDevelop subscription to increase the limits."})})]})})})})},S=n(32921),P=n(3498),I=n(24830),E=n(2861),M=n(91),L=n(34976),A=n.n(L),O=n(57597),R=n(38092),F=function(e,t){switch(t){case"export":return e._({id:"Error while exporting the game."});case"resources-download":return e._({id:"Error while downloading the game resources. Check your internet connection and that all resources of the game are valid in the Resources editor."});case"compress":return e._({id:"Error while compressing the game."});case"upload":return e._({id:"Error while uploading the game. Check your internet connection or try again later."});case"waiting-for-build":return e._({id:"Error while building the game. Check the logs of the build for more details."});case"build":return e._({id:"Error while building of the game. Check the logs of the build for more details."});default:return e._({id:"Error while building the game. Try again later. Your internet connection may be slow or one of your resources may be corrupted."})}},D=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var s,l;return(0,o.Z)(this,n),(s=t.call(this,e)).state={exportStep:"",build:null,compressionOutput:null,stepCurrentProgress:0,stepMaxProgress:0,doneFooterOpen:!1,errored:!1,shouldBumpVersionNumber:!0,exportState:s.props.exportPipeline.getInitialExportState(s.props.project)},s._candidateBumpedVersionNumber="",s.buildsWatcher=new P.Z,s._setupAchievementHook=function(){s.props.exportPipeline.name.includes("web")?s.launchWholeExport=(0,E.zi)(s.props.authenticatedUser,E.$A,s._launchWholeExport):s.launchWholeExport=s._launchWholeExport},s._updateStepProgress=function(e,t){return s.setState({stepCurrentProgress:e,stepMaxProgress:t})},s._startBuildWatch=function(e){s.state.build&&s.buildsWatcher.start({authenticatedUser:e,builds:[s.state.build],onBuildUpdated:function(t){"pending"===t.status?s.setState({build:t}):setTimeout((function(){s.setState({build:t}),e.onRefreshLimits(),s.props.gameAndBuildsManager.refreshGameBuilds()}),3e3)}})},s._launchWholeExport=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,l,c,u,d,f,g,m,x,v,b,C,j,y,Z,k,w,T;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payWithCredits,r=s.props,a=r.i18n,o=r.project,l=r.exportPipeline,c=r.eventsFunctionsExtensionsState,u=r.authenticatedUser,d=r.gameAndBuildsManager,(0,p.nU)(l.name),(0,S.vv)(a,(0,S.nu)(a,o))){e.next=5;break}return e.abrupt("return");case 5:return f=function(e){return s.setState({exportStep:e})},s.props.onExportLaunched&&s.props.onExportLaunched(),e.prev=7,f("register"),e.next=11,d.registerGameIfNeeded();case 11:e.next=18;break;case 13:e.prev=13,e.t0=e.catch(7),console.warn("Error while registering the game."),(g=(0,M.T)(e.t0))&&"game-creation/too-many-games"===g.code&&(0,h.gR)({message:[a._({id:"You have reached the maximum number of games you can register! You can unregister games in your Games Dashboard."}),a._({id:"A link or file will be created but the game will not be registered."})].join("\n\n"),rawError:e.t0,errorId:"too-many-games-register"});case 18:return e.prev=18,m={project:o,updateStepProgress:s._updateStepProgress,exportState:s.state.exportState},l.shouldSuggestBumpingVersionNumber&&l.shouldSuggestBumpingVersionNumber()&&s.state.shouldBumpVersionNumber&&o.setVersion(s._candidateBumpedVersionNumber),f("export"),s.setState({stepCurrentProgress:0,stepMaxProgress:0,errored:!1,build:null}),e.next=25,l.prepareExporter(m);case 25:return x=e.sent,v=u.profile,b=v?{username:v.username||"",id:v.id}:void 0,e.next=30,c.ensureLoadFinished();case 30:return e.next=32,l.launchExport(m,x,b);case 32:return C=e.sent,f("resources-download"),e.next=36,l.launchResourcesDownload(m,C);case 36:return j=e.sent,f("compress"),e.next=40,l.launchCompression(m,j);case 40:if(y=e.sent,Z=l.launchUpload,k=l.launchOnlineBuild,!Z||!k){e.next=56;break}return f("upload"),e.next=46,Z(m,y);case 46:return w=e.sent,f("waiting-for-build"),e.next=50,k(s.state.exportState,u,w,o.getProjectUuid(),{gameName:o.getName(),gameVersion:o.getVersion()},!!n);case 50:T=e.sent,f("build"),s.props.authenticatedUser.onRefreshLimits(),s.setState({build:T},(function(){s._startBuildWatch(u)})),s.props.gameAndBuildsManager.refreshGame(),s.props.gameAndBuildsManager.refreshGameBuilds();case 56:f("done"),s.setState({compressionOutput:y,doneFooterOpen:!0}),s.props.onExportSucceeded&&s.props.onExportSucceeded({build:s.state.build}),e.next=66;break;case 61:e.prev=61,e.t1=e.catch(18),console.error("An error happened during export:",e.t1),s.state.errored||(s.setState({errored:!0}),(0,h.gR)({message:F(a,s.state.exportStep)+(e.t1.message?"\n\n".concat(e.t1.message):""),rawError:{exportStep:s.state.exportStep,rawError:e.t1},errorId:"export-error"})),s.props.onExportErrored&&s.props.onExportErrored();case 66:case"end":return e.stop()}}),e,null,[[7,13],[18,61]])})));return function(t){return e.apply(this,arguments)}}(),s._updateExportState=function(e){s.setState((function(t){return(0,r.Z)((0,r.Z)({},t),{},{exportState:e(t.exportState)})}))},s._setupAchievementHook(),s._candidateBumpedVersionNumber=(l=e.project,A()(l.getVersion(),"patch",{loose:!0})),s}return(0,s.Z)(n,[{key:"componentWillMount",value:function(){this.props.authenticatedUser.onRefreshLimits()}},{key:"componentWillUnmount",value:function(){this.buildsWatcher.stop()}},{key:"componentDidUpdate",value:function(e,t){this._setupAchievementHook(),t.exportStep===this.state.exportStep&&t.errored===this.state.errored||this.props.setIsNavigationDisabled(this.props.exportPipeline.isNavigationDisabled(this.state.exportStep,this.state.errored))}},{key:"render",value:function(){var e=this,t=this.state,n=t.exportStep,r=t.compressionOutput,o=t.build,s=t.stepMaxProgress,l=t.stepCurrentProgress,c=t.errored,d=t.doneFooterOpen,p=t.exportState,h=this.props,m=h.i18n,x=h.project,v=h.authenticatedUser,b=h.exportPipeline,C=h.onSaveProject,j=h.isSavingProject,y=h.gameAndBuildsManager,Z=h.uiMode;if(!x)return null;var w=function(e,t){return e.limits&&t?e.limits.quotas[t]:null}(v,b.onlineBuildType),S=function(e,t){return e.limits&&t?e.limits.credits.prices[t]:null}(v,b.onlineBuildType),P=!!n&&"done"!==n,E=!!o&&"pending"===o.status,M=P||E,L="done"===n&&!E||c,A=!!b.onlineBuildType&&!v.authenticated,F=!!w&&w.max>0,D=!!y.gameBuilds&&!!y.gameBuilds.filter((function(e){return"pending"===e.status&&e.type===b.onlineBuildType&&e.createdAt&&e.createdAt>Date.now()-6e5})).length;return(0,k.jsxs)(f.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:[!A&&(0,k.jsxs)(f.sg,{noMargin:!0,children:[!!b.onlineBuildType&&y.gameAvailabilityError&&"not-owned"===y.gameAvailabilityError&&(0,k.jsx)(R.Z,{kind:"warning",children:(0,k.jsx)(u.Trans,{id:"The project currently opened is registered online but you don't have access to it. A link or file will be created but the game will not be registered."})}),!!b.packageNameWarningType&&-1!==x.getPackageName().indexOf("com.example")&&(0,k.jsx)(f.x1,{children:(0,k.jsx)(I.Z,{identifier:"project-should-have-unique-package-name",kind:"warning",children:m._("mobile"===b.packageNameWarningType?{id:"The package name begins with com.example, make sure you replace it with an unique one to be able to publish your game on app stores."}:{id:"The package name begins with com.example, make sure you replace it with an unique one, else installing your game might overwrite other games."})})}),b.renderTutorial&&b.renderTutorial()]}),(0,k.jsxs)(f.sg,{expand:!0,justifyContent:"center",children:[!A&&(0,k.jsx)(f.x1,{alignItems:"center",justifyContent:"center",children:b.renderHeader({project:x,authenticatedUser:v,exportState:p,updateExportState:this._updateExportState,isExporting:M,exportStep:n,build:o,quota:w,uiMode:Z||"full"})}),!A&&F&&b.shouldSuggestBumpingVersionNumber&&b.shouldSuggestBumpingVersionNumber()&&!L&&(0,k.jsx)(f.x1,{noMargin:!0,children:(0,k.jsx)(O.Z,{labelPosition:"right",toggled:this.state.shouldBumpVersionNumber,label:(0,k.jsx)(u.Trans,{id:"Increase version number to {0}",values:{0:this._candidateBumpedVersionNumber}}),onToggle:function(t,n){e.setState({shouldBumpVersionNumber:n})},disabled:M})}),!!b.limitedBuilds&&v.authenticated&&!L&&(0,k.jsx)(f.x1,{children:(0,k.jsx)(f.sg,{noMargin:!0,expand:!0,children:(0,k.jsx)(T,{subscription:v.subscription,quota:w,usagePrice:S,onChangeSubscription:this.props.onChangeSubscription,onStartBuildWithCredits:function(){e._launchWholeExport({payWithCredits:!0})},hidePurchaseWithCredits:M})})}),!!b.limitedBuilds&&v.authenticated&&!o&&D&&(0,k.jsx)(R.Z,{kind:"info",children:(0,k.jsx)(u.Trans,{id:"You have a build currently running, you can see its progress via the exports button at the bottom of this dialog."})}),A&&(0,k.jsx)(g.Z,{onOpenLoginDialog:v.onOpenLoginDialog,onOpenCreateAccountDialog:v.onOpenCreateAccountDialog,message:(0,k.jsx)(u.Trans,{id:"Create an account or login first to export your game using online services."}),justifyContent:"center"}),!A&&b.renderExportFlow({project:x,gameAndBuildsManager:y,disabled:!function(e){if(w&&!(w?Math.max(w.max-w.current,0):0))return!1;return b.canLaunchBuild(p,c,n)}(),launchExport:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.launchWholeExport({payWithCredits:!1}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),build:o,errored:c,exportStep:n,isSavingProject:j,onSaveProject:C,isExporting:P,stepCurrentProgress:l,stepMaxProgress:s,uiMode:Z||"full"}),d&&b.renderDoneFooter&&b.renderDoneFooter({compressionOutput:r,exportState:p})]})]})}}]),n}(d.Component)},36043:function(e,t,n){"use strict";n.d(t,{Z:function(){return ye}});var r=n(1413),i=n(93433),a=n(29439),o=n(36600),s=n(28381),l=n(1773),c=n(4076),u=n(10888),d=n(86335),p=n(38501),f=n(29343),h=function(e){var t=e.authenticatedUser,n=e.game,r=e.open,i=e.onClose,a=e.onGameUpdated,s=(0,p.Z)();return r?(0,f.jsx)(l.ZP,{title:(0,f.jsx)(o.Trans,{id:"{0} builds",values:{0:n.gameName}}),actions:[(0,f.jsx)(u.Z,{label:(0,f.jsx)(o.Trans,{id:"Close"}),primary:!1,onClick:i},"close")],secondaryActions:[(0,f.jsx)(c.Z,{helpPagePath:"/publishing"},"help")],onRequestClose:i,open:r,children:(0,f.jsx)(d.Z,{onBuildsUpdated:s,authenticatedUser:t,game:n,onGameUpdated:a})}):null},g=n(71106),m=n(51375),x=n(35638),v=n(50583),b=n(61325),C=n(86278),j=n(40243),y=n(6745),Z=n(84900),k=n(83297),w=n(38092),T=n(69186),S=n(67674),P=n(3798),I=n(65111),E=n(42699),M=n(45047),L=n(22853),A=n(44378),O=n(17581),R=n(78118),F=s.memo((function(e){return(0,f.jsxs)(R.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M7.99999 1.5C6.06224 1.5 4.96112 2.14946 4.39058 3.09085C3.9761 3.77473 3.88751 4.55026 3.86867 5.13611C3.3465 5.20941 2.72648 5.40287 2.17939 5.79285C1.41929 6.33468 0.833328 7.23493 0.833328 8.6C0.833328 9.50719 1.09222 10.2196 1.50599 10.7596C1.91551 11.2941 2.45363 11.6299 2.97079 11.8304C3.22826 11.9302 3.5179 11.8024 3.61771 11.5449C3.71752 11.2874 3.5897 10.9978 3.33223 10.898C2.94393 10.7475 2.57296 10.5079 2.29976 10.1514C2.0308 9.80039 1.83333 9.30621 1.83333 8.6C1.83333 7.56507 2.25737 6.96532 2.75984 6.60715C3.28806 6.23062 3.93747 6.1 4.36363 6.1C4.63977 6.1 4.86363 5.87614 4.86363 5.6C4.86363 4.98162 4.8741 4.22242 5.24578 3.60915C5.58433 3.05054 6.30139 2.5 7.99999 2.5C9.6986 2.5 10.4157 3.05054 10.7542 3.60915C11.1259 4.22242 11.1364 4.98162 11.1364 5.6C11.1364 5.87614 11.3602 6.1 11.6364 6.1C12.0625 6.1 12.7119 6.23062 13.2401 6.60715C13.7426 6.96532 14.1667 7.56507 14.1667 8.6C14.1667 9.30621 13.9692 9.80039 13.7002 10.1514C13.427 10.5079 13.0561 10.7475 12.6678 10.898C12.4103 10.9978 12.2825 11.2874 12.3823 11.5449C12.4821 11.8024 12.7717 11.9302 13.0292 11.8304C13.5464 11.6299 14.0845 11.2941 14.494 10.7596C14.9078 10.2196 15.1667 9.50719 15.1667 8.6C15.1667 7.23493 14.5807 6.33468 13.8206 5.79285C13.2735 5.40287 12.6535 5.20941 12.1313 5.13611C12.1125 4.55026 12.0239 3.77473 11.6094 3.09085C11.0389 2.14946 9.93775 1.5 7.99999 1.5Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M8.49999 8.6C8.49999 8.32386 8.27614 8.1 7.99999 8.1C7.72385 8.1 7.49999 8.32386 7.49999 8.6V12.8014L6.23055 11.5447C6.03431 11.3504 5.71774 11.352 5.52346 11.5482C5.32918 11.7445 5.33077 12.061 5.52701 12.2553L7.64822 14.3553C7.84307 14.5482 8.15692 14.5482 8.35177 14.3553L10.473 12.2553C10.6692 12.061 10.6708 11.7445 10.4765 11.5482C10.2823 11.352 9.96568 11.3504 9.76943 11.5447L8.49999 12.8014V8.6Z",fill:"currentColor"})]}))})),D=s.memo((function(e){return(0,f.jsxs)(R.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.03337 0.737858C2.83663 0.619852 2.58484 0.650866 2.42262 0.813084L1.47995 1.75575C1.31775 1.91796 1.28673 2.16973 1.40471 2.36646L2.81804 4.72313C2.93852 4.92403 3.18233 5.01434 3.40462 4.94042L4.52695 4.56719L6.19529 6.23552C6.39055 6.43079 6.70713 6.43079 6.90239 6.23552C7.09766 6.04026 7.09765 5.72368 6.90239 5.52842L5.2342 3.86022L5.60787 2.73868C5.68194 2.51635 5.59166 2.2724 5.3907 2.15186L3.03337 0.737858ZM4.53236 2.80311L4.26691 3.59982L3.46946 3.86502L2.46305 2.18687L2.85372 1.7962L4.53236 2.80311Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0746 9.36727C13.629 9.17699 14.1475 8.87302 14.5843 8.43629C15.2563 7.76463 15.6473 6.83232 15.7795 5.92276C15.9108 5.01863 15.7963 4.06342 15.3661 3.34717C15.2868 3.21521 15.1512 3.12712 14.9984 3.10836C14.8456 3.0896 14.6927 3.14227 14.5839 3.25114L12.6853 5.15036L11.3891 5.26786L11.507 3.97153L13.4057 2.07286C13.5146 1.964 13.5672 1.81108 13.5484 1.65829C13.5296 1.50551 13.4415 1.36989 13.3095 1.29064C12.5936 0.86078 11.6387 0.746336 10.7346 0.877572C9.82505 1.0096 8.89259 1.40042 8.2206 2.07242C6.97773 3.31529 6.81005 5.22033 7.27767 6.73346L2.69805 11.3131C2.43831 11.5728 2.23171 12.018 2.17966 12.4864C2.12537 12.975 2.23328 13.5554 2.69805 14.0202C3.16282 14.485 3.74322 14.5929 4.23183 14.5386C4.70029 14.4865 5.14545 14.2799 5.40518 14.0202L8.85923 10.5661L12.6466 14.3535C12.9063 14.6133 13.3515 14.8199 13.8199 14.8719C14.3086 14.9262 14.889 14.8183 15.3537 14.3535C15.8027 13.9046 15.9457 13.3566 15.9023 12.8604C15.8603 12.381 15.6443 11.937 15.3537 11.6464L13.0746 9.36727ZM8.92771 2.77952C9.41571 2.29152 10.1333 1.97534 10.8782 1.8672C11.3383 1.80042 11.7809 1.81676 12.161 1.90333L10.6719 3.39242C10.5892 3.47512 10.5381 3.5842 10.5275 3.70067L10.3389 5.77467C10.3254 5.92243 10.3783 6.06853 10.4832 6.17347C10.5881 6.2784 10.7342 6.33132 10.882 6.31793L12.956 6.12993C13.0725 6.11936 13.1817 6.06824 13.2644 5.98546L14.7536 4.49577C14.8403 4.87607 14.8567 5.31885 14.7898 5.77901C14.6816 6.52396 14.3652 7.24141 13.8773 7.72908C12.8991 8.70721 11.2469 8.83863 9.93531 8.32446C9.67821 8.22368 9.38809 8.35039 9.28731 8.60748C9.26799 8.65677 9.25703 8.70727 9.25375 8.75741L4.69808 13.3131C4.62448 13.3867 4.40296 13.5134 4.1214 13.5447C3.86 13.5737 3.60706 13.515 3.40516 13.3131C3.20325 13.1112 3.1445 12.8582 3.17354 12.5969C3.20483 12.3153 3.33156 12.0938 3.40516 12.0202L8.0592 7.36615C8.30963 7.26188 8.43181 6.97593 8.33233 6.72215C7.81815 5.41051 7.9496 3.75763 8.92771 2.77952ZM11.9126 9.60338C11.2665 9.65336 10.6142 9.57929 10.0181 9.40725L9.56634 9.85904L13.3537 13.6464C13.4273 13.72 13.6488 13.8467 13.9304 13.878C14.1918 13.9071 14.4447 13.8483 14.6466 13.6464C14.8643 13.4287 14.9266 13.1821 14.9061 12.9476C14.8841 12.6964 14.7668 12.4737 14.6466 12.3535L11.9799 9.68686C11.9541 9.66097 11.9316 9.63296 11.9126 9.60338Z",fill:"currentColor"})]}))})),N=n(28923),_=n(99221),B=n(48409),U=n(24910),V=n(6996),H={buttonBase:{borderRadius:8,padding:8,flex:1,cursor:"default"},titleContainer:{marginLeft:j.XW,marginRight:j.XW,display:"flex",alignItems:"center",flex:3},iconContainer:{width:36,height:36,display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:36,height:36},iconSmall:{width:24,height:24},highlightedTag:{padding:"2px 6px",borderRadius:4}},z=function(e){switch(e.section){case"browser":return(0,f.jsx)(o.Trans,{id:"Browser"});case"desktop":return(0,f.jsx)(o.Trans,{id:"Desktop"});case"android":return(0,f.jsx)(o.Trans,{id:"Android"});case"ios":return(0,f.jsx)(o.Trans,{id:"iOS"});default:return null}},W=function(e){var t=e.section,n=e.small;switch(t){case"browser":return(0,f.jsx)(m.Z,{style:n?H.iconSmall:H.icon});case"desktop":return(0,f.jsx)(v.Z,{style:n?H.iconSmall:H.icon});case"android":return(0,f.jsx)(_.Z,{style:n?H.iconSmall:H.icon});case"ios":return(0,f.jsx)(x.Z,{style:n?H.iconSmall:H.icon});default:return null}},G=function(e,t){switch(e){case"browser":switch(t){case"online":return(0,f.jsx)(A.Z,{style:H.icon});case"offline":return(0,f.jsx)(O.Z,{style:H.icon});case"facebook":return(0,f.jsx)(L.Z,{style:H.icon});default:return null}case"desktop":case"android":switch(t){case"online":return(0,f.jsx)(F,{style:H.icon});case"offline":return(0,f.jsx)(D,{style:H.iconSmall});default:return null}case"ios":switch(t){case"online":return(0,f.jsx)(F,{style:H.icon});case"offline":return(0,f.jsx)(D,{style:H.iconSmall});default:return null}default:return null}},Y=function(e){var t=e.icon,n=e.label,i=e.onClick,a=e.description,l=e.disabled,c=e.small,u=e.highlighted,d=e.id,p=(0,T.Z)((function(e){return(0,S.Z)({root:{border:"1px solid ".concat(e.palette.text.disabled),"&:focus":{backgroundColor:e.palette.action.hover},"&:hover":{backgroundColor:e.palette.action.hover},"&:disabled":{opacity:e.palette.action.disabledOpacity}}})}))(),h=s.useContext(U.Z),g=(0,V.UQ)().isMobile;return(0,f.jsx)(P.Z,{onClick:i,focusRipple:!0,elevation:2,style:H.buttonBase,classes:p,tabIndex:0,onKeyPress:function(e){(0,I.ph)(e)&&i()},disabled:l,id:d,children:(0,f.jsxs)(b.ep,{expand:!0,justifyContent:"space-between",alignItems:"center",noColumnMargin:!0,children:[(0,f.jsx)(j.sg,{alignItems:"flex-start",children:(0,f.jsxs)(b.pJ,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,f.jsx)("div",{style:H.iconContainer,children:t}),(0,f.jsx)(C.Z,{noMargin:!0,size:c?"sub-title":"block-title",align:"left",color:"primary",children:n}),u&&(0,f.jsx)("div",{style:(0,r.Z)((0,r.Z)({},H.highlightedTag),{},{color:h.statusIndicator.success,border:"1px solid ".concat(h.statusIndicator.success)}),children:(0,f.jsx)(C.Z,{color:"inherit",noMargin:!0,children:(0,f.jsx)(o.Trans,{id:"Easiest"})})})]})}),(0,f.jsx)(j.sg,{children:(0,f.jsxs)(b.pJ,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:g?"space-between":"flex-end",children:[(0,f.jsx)(C.Z,{color:"secondary",size:"body2",align:g?"left":"right",noMargin:!0,children:a}),(0,f.jsx)(Z.Z,{color:"secondary"})]})})]})})},q=function(e){var t=e.project,n=e.onSaveProject,i=e.isSavingProject,l=e.gameAndBuildsManager,c=e.onChangeSubscription,u=e.isNavigationDisabled,d=e.setIsNavigationDisabled,p=e.selectedExporter,h=e.onChooseSection,m=e.onChooseSubSection,x=e.chosenSection,v=e.chosenSubSection,Z=e.allExportersRequireOnline,T=e.showOnlineWebExporterOnly,S=(0,V.UQ)().isMobile,P=(0,k.k)(),I=s.useContext(g.ZP),L=s.useContext(N.Z),A=s.useState(!1),O=(0,a.Z)(A,2),R=O[0],F=O[1],D=!(!x&&!v);return(0,f.jsxs)(b.ak,{expand:!0,noMargin:!0,children:[!T&&(0,f.jsxs)(j.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(j.sg,{expand:!S,alignItems:"flex-start",justifyContent:"center",noMargin:!0,children:D&&(0,f.jsx)(E.Z,{icon:(0,f.jsx)(M.Z,{}),label:(0,f.jsx)(o.Trans,{id:"Back"}),onClick:function(){v?(m(null),R&&(h(null),F(!1))):x&&h(null)},disabled:u})}),(0,f.jsx)("div",{style:(0,r.Z)((0,r.Z)({},H.titleContainer),{},{justifyContent:S&&D?"flex-end":"center"}),children:(0,f.jsxs)(b.pJ,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[x?W({section:x,small:!0}):void 0,(0,f.jsx)(C.Z,{size:"block-title",children:p?p.name:x?z({section:x}):(0,f.jsx)(o.Trans,{id:"Export your game"})})]})}),!S&&(0,f.jsx)(j.sg,{expand:!0,alignItems:"flex-end",noMargin:!0})]}),!P&&(0,f.jsx)(w.Z,{kind:"warning",children:(0,f.jsx)(o.Trans,{id:"You must be connected to use online export services."})}),!x&&(0,f.jsxs)(b.ak,{noMargin:!0,children:[(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"gd.games"}),icon:G("browser","online"),description:(0,f.jsx)(o.Trans,{id:"Generate a shareable link to your game."}),onClick:function(){F(!0),h("browser"),m("online")},highlighted:!0,disabled:!P,id:"publish-gd-games"}),!T&&(0,f.jsx)(Y,{label:z({section:"browser"}),icon:W({section:"browser"}),description:(0,f.jsx)(o.Trans,{id:"Gaming portals (Itch.io, Poki, CrazyGames...)"}),onClick:function(){return h("browser")},disabled:Z&&!P,id:"publish-browser"}),!T&&(0,f.jsx)(Y,{label:z({section:"desktop"}),icon:W({section:"desktop"}),description:(0,f.jsx)(o.Trans,{id:"Windows, MacOS, Linux (Steam, MS Store...)"}),onClick:function(){return h("desktop")},disabled:Z&&!P,id:"publish-desktop"}),!T&&(0,f.jsx)(Y,{label:z({section:"android"}),icon:W({section:"android"}),description:(0,f.jsx)(o.Trans,{id:"Google Play (or other stores)"}),onClick:function(){return h("android")},disabled:Z&&!P,id:"publish-mobile"}),!T&&!(0,B._F)()&&(0,f.jsx)(Y,{label:z({section:"ios"}),icon:W({section:"ios"}),description:(0,f.jsx)(o.Trans,{id:"Apple App Store"}),onClick:function(){return h("ios")},disabled:Z&&!P,id:"publish-mobile-ios"})]}),"browser"===x&&!v&&(0,f.jsxs)(b.ak,{noMargin:!0,children:[(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"gd.games"}),icon:G("browser","online"),description:(0,f.jsx)(o.Trans,{id:"Generate a shareable link to your game."}),onClick:function(){return m("online")},highlighted:!0,disabled:!P,id:"publish-gd-games"}),!T&&(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"HTML5 (external websites)"}),icon:G("browser","offline"),description:(0,f.jsx)(o.Trans,{id:"Itch.io, Poki, CrazyGames..."}),onClick:function(){return m("offline")},disabled:Z&&!P,id:"publish-external-websites"}),!T&&(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"Facebook Games"}),icon:G("browser","facebook"),description:(0,f.jsx)(o.Trans,{id:"Instant Games"}),onClick:function(){return m("facebook")},disabled:Z&&!P,id:"publish-facebook"})]}),"desktop"===x&&!v&&(0,f.jsxs)(b.ak,{noMargin:!0,children:[(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"One-click packaging"}),icon:G("desktop","online"),description:(0,f.jsx)(o.Trans,{id:"Windows, MacOS and Linux"}),onClick:function(){return m("online")},highlighted:!0,disabled:!P,id:"publish-desktop-cloud"}),(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"Manual build"}),icon:G("desktop","offline"),description:(0,f.jsx)(o.Trans,{id:"Development tools required"}),onClick:function(){return m("offline")},disabled:Z&&!P,small:!0,id:"publish-desktop-manual"})]}),"android"===x&&!v&&(0,f.jsxs)(b.ak,{noMargin:!0,children:[(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"One-click packaging"}),icon:G("android","online"),description:(0,f.jsx)(o.Trans,{id:"Automated"}),onClick:function(){return m("online")},highlighted:!0,disabled:!P,id:"publish-mobile-cloud"}),(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"Manual build"}),icon:G("desktop","offline"),description:(0,f.jsx)(o.Trans,{id:"Development tools required"}),onClick:function(){return m("offline")},small:!0,disabled:Z&&!P,id:"publish-mobile-manual"})]}),"ios"===x&&!v&&(0,f.jsxs)(b.ak,{noMargin:!0,children:[(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"One-click packaging"}),icon:G("ios","online"),description:(0,f.jsx)(o.Trans,{id:"Automated"}),onClick:function(){return m("online")},highlighted:!0,disabled:!P,id:"publish-ios-cloud"}),(0,f.jsx)(Y,{label:(0,f.jsx)(o.Trans,{id:"Manual build"}),icon:G("desktop","offline"),description:(0,f.jsx)(o.Trans,{id:"Development tools required"}),onClick:function(){return m("offline")},small:!0,disabled:Z&&!P,id:"publish-ios-manual"})]}),x&&v&&p&&(0,f.jsx)(o.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(y.Z,{i18n:r,authenticatedUser:I,eventsFunctionsExtensionsState:L,exportPipeline:p.exportPipeline,project:t,onSaveProject:n,isSavingProject:i,gameAndBuildsManager:l,onChangeSubscription:c,setIsNavigationDisabled:d})}})]})},J=n(28894),X=n(74165),K=n(15861),Q=n(60022),$=n(1491),ee=n(49522),te=n(34517),ne=n(78081),re=n(75383),ie=n(41418),ae=n(63854),oe=n(29277),se=n(65056),le=n(81683),ce=n(90242),ue=n(86567),de=n(91),pe=n(47221),fe=n(53358),he=n(32677),ge=function(e){switch(e){case"user-not-found":return(0,f.jsx)(o.Trans,{id:"No GDevelop user with this email can be found."});case"user-already-added":return(0,f.jsx)(o.Trans,{id:"This user is already a collaborator."});case"user-owner":return(0,f.jsx)(o.Trans,{id:"You cannot add yourself as a collaborator."});case"not-allowed":return(0,f.jsx)(o.Trans,{id:"You don't have permissions to add collaborators."});case"max-guest-collaborators":return(0,f.jsx)(o.Trans,{id:"You have reached the maximum number of guest collaborators for your subscription. Ask this user to get a Pro subscription!"});case"unexpected":return(0,f.jsx)(o.Trans,{id:"An unexpected error happened. Verify your internet connection or try again later."});default:return}},me=function(e){var t=e.cloudProjectId,n=s.useContext(g.ZP),r=n.profile,i=n.limits,c=(0,k.k)(),d=s.useState(null),p=(0,a.Z)(d,2),h=p[0],m=p[1],x=s.useState(null),v=(0,a.Z)(x,2),y=v[0],Z=v[1],T=s.useState(null),S=(0,a.Z)(T,2),P=S[0],I=S[1],E=s.useState({}),M=(0,a.Z)(E,2),L=M[0],A=M[1],O=s.useState(!1),R=(0,a.Z)(O,2),F=R[0],D=R[1],N=s.useState(!0),_=(0,a.Z)(N,2),B=_[0],U=_[1],V=s.useState(!1),H=(0,a.Z)(V,2),z=H[0],W=H[1],G=s.useState(""),Y=(0,a.Z)(G,2),q=Y[0],J=Y[1],me=s.useState("writer"),xe=(0,a.Z)(me,2),ve=xe[0],be=xe[1],Ce=(0,se.Z)(),je=Ce.showAlert,ye=Ce.showConfirmation,Ze=s.useCallback((0,K.Z)((0,X.Z)().mark((function e(){var r,i,a;return(0,X.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return Z("project-not-found"),e.abrupt("return");case 3:return e.prev=3,W(!0),e.next=7,(0,te.hj)(n,{projectId:t});case 7:r=e.sent,i=r?r.filter((function(e){return"collaboration"===e.feature})):[],m(i),e.next=23;break;case 12:if(e.prev=12,e.t0=e.catch(3),console.error("Unable to fetch the project user acls",e.t0),!(a=(0,de.T)(e.t0))||404!==a.status){e.next=19;break}return Z("project-not-found"),e.abrupt("return");case 19:if(!a||403!==a.status){e.next=22;break}return Z("project-not-owned"),e.abrupt("return");case 22:Z("unexpected");case 23:return e.prev=23,W(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[3,12,23,26]])}))),[n,t]);s.useEffect((function(){Ze()}),[Ze]);var ke=s.useCallback((0,K.Z)((0,X.Z)().mark((function e(){var t,n;return(0,X.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h&&h.length){e.next=2;break}return e.abrupt("return");case 2:return t=h.map((function(e){return e.userId})),e.prev=3,e.next=6,(0,ie.TL)(t);case 6:n=e.sent,A(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Unable to fetch the collaborator profiles",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),[h]);s.useEffect((function(){ke()}),[ke]);var we=function(){var e=(0,K.Z)((0,X.Z)().mark((function e(){var r,i,a;return(0,X.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=q.trim(),J(r),i=he.H.test(r),U(i),!z&&r&&i&&t){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,W(!0),e.next=10,(0,te.Dj)(n,{projectId:t,feature:"collaboration",level:ve,email:r});case 10:return D(!1),J(""),be("writer"),e.next=15,Ze();case 15:e.next=41;break;case 17:if(e.prev=17,e.t0=e.catch(6),console.error("Unable to add collaborator",e.t0),!(a=(0,de.T)(e.t0))||400!==a.status){e.next=28;break}if("project-user-acl-creation/user-already-added"!==a.code){e.next=25;break}return I("user-already-added"),e.abrupt("return");case 25:if("project-user-acl-creation/user-is-owner"!==a.code){e.next=28;break}return I("user-owner"),e.abrupt("return");case 28:if(!a||404!==a.status){e.next=31;break}return I("user-not-found"),e.abrupt("return");case 31:if(!a||403!==a.status){e.next=40;break}if("project-user-acl-creation/collaborators-not-allowed"!==a.code){e.next=35;break}return I("not-allowed"),e.abrupt("return");case 35:if("project-user-acl-creation/too-many-guest-collaborators-on-project"!==a.code){e.next=38;break}return I("max-guest-collaborators"),e.abrupt("return");case 38:return I("not-allowed"),e.abrupt("return");case 40:I("unexpected");case 41:return e.prev=41,W(!1),e.finish(41);case 44:case"end":return e.stop()}}),e,null,[[6,17,41,44]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=(0,K.Z)((0,X.Z)().mark((function e(r){var i,a;return(0,X.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return i=L[r.userId],a=i?i.username:null,e.next=6,ye({title:{id:"Remove collaborator"},message:{id:"You are about to remove {0}{1} from the list of collaborators. Are you sure?",values:{0:r.email,1:a?" (".concat(a,")"):""}},confirmButtonLabel:{id:"Remove"}});case 6:if(e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,W(!0),e.next=13,(0,te.ml)(n,{projectId:t,feature:r.feature,level:r.level,userId:r.userId});case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Unable to remove collaborator",e.t0),je({title:{id:"Unable to remove collaborator"},message:{id:"An error happened while removing the collaborator. Verify your internet connection or retry later."}});case 19:return e.prev=19,W(!1),e.next=23,Ze();case 23:return e.finish(19);case 24:case"end":return e.stop()}}),e,null,[[9,15,19,24]])})));return function(t){return e.apply(this,arguments)}}();if(!r||!i||!c)return(0,f.jsx)(b.ak,{expand:!0,noMargin:!0,children:(0,f.jsx)(w.Z,{kind:"warning",children:(0,f.jsx)(o.Trans,{id:"You must be logged in to invite collaborators."})})});var Se=i.capabilities.cloudProjects.maximumGuestCollaboratorsPerProject>0,Pe=h&&"project-not-owned"!==y?"owner":null;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(b.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(pe.Z,{username:r.username,fullName:r.fullName,email:r.email,level:Pe}),(0,f.jsx)(j.x1,{children:(0,f.jsx)(C.Z,{size:"block-title",children:(0,f.jsx)(o.Trans,{id:"Collaborators"})})}),!Se&&!!h&&"project-not-owned"!==y&&(0,f.jsx)(ee.Z,{subscriptionDialogOpeningReason:"Add collaborators on project",recommendedPlanIdIfNoSubscription:"gdevelop_startup",placementId:"invite-collaborators",children:(0,f.jsx)(C.Z,{children:(0,f.jsx)(o.Trans,{id:"Get a Pro subscription to invite collaborators into your project."})})}),"unexpected"===y?(0,f.jsx)(j.x1,{noMargin:!0,children:(0,f.jsx)(re.Z,{onRetry:Ze,children:(0,f.jsx)(o.Trans,{id:"Error while loading the collaborators. Verify your internet connection or try again later."})})}):"project-not-found"===y?(0,f.jsx)(w.Z,{kind:"info",children:(0,f.jsx)(o.Trans,{id:"You need to first save your project to the cloud to invite collaborators."})}):"project-not-owned"===y?(0,f.jsx)(w.Z,{kind:"info",children:(0,f.jsx)(o.Trans,{id:"You are not owner of this project, so you cannot invite collaborators."})}):h?h.map((function(e){return(0,f.jsx)(pe.Z,{username:(t=e.userId,L[t]?L[t].username:null),fullName:null,email:e.email,level:e.level,onDelete:function(){Te(e)},disabled:z},e.userId);var t})):(0,f.jsx)(ne.Z,{}),(0,f.jsx)(j.x1,{children:(0,f.jsx)(j.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(Q.Z,{icon:(0,f.jsx)($.Z,{fontSize:"small"}),label:(0,f.jsx)(o.Trans,{id:"Add collaborator"}),onClick:function(){return D(!0)},primary:!0,disabled:!Se||!!y||!h||z})})})]}),F&&(0,f.jsx)(l.ZP,{title:(0,f.jsx)(o.Trans,{id:"Add a collaborator"}),actions:[(0,f.jsx)(u.Z,{label:(0,f.jsx)(o.Trans,{id:"Back"}),disabled:z,primary:!1,onClick:function(){B||U(!0),P&&I(null),D(!1)}},"back"),(0,f.jsx)(ae.Z,{isLoading:z,children:(0,f.jsx)(l.vF,{label:(0,f.jsx)(o.Trans,{id:"Add"}),primary:!0,onClick:we,disabled:z})},"add-collaborator")],maxWidth:"xs",cannotBeDismissed:z,onRequestClose:function(){return D(!1)},onApply:we,open:!0,children:(0,f.jsx)(ue.Z,{onSubmit:we,name:"addCollaborator",children:(0,f.jsxs)(b.ak,{noMargin:!0,children:[(0,f.jsx)(oe.ZP,{autoFocus:"desktop",value:q,floatingLabelText:(0,f.jsx)(o.Trans,{id:"Email"}),type:"email",onChange:function(e,t){B||U(!0),P&&I(null),J(t)},errorText:B?ge(P):(0,f.jsx)(o.Trans,{id:"Invalid email address."}),fullWidth:!0,onBlur:function(e){var t=e.currentTarget.value.trim();J(t),U(he.H.test(t))},disabled:z}),(0,f.jsx)(le.Z,{value:ve,onChange:function(e,t,n){return be(n)},fullWidth:!0,translatableHintText:{id:"Choose the effect to apply"},disabled:z,children:["reader","writer"].map((function(e){return(0,f.jsx)(ce.Z,{value:e,label:(0,fe.R)(e)},e)}))})]})})})]})},xe=n(36262),ve=n(61651),be=n(31689),Ce={browser:{online:"onlinewebexport",offline:"webexport",facebook:"facebookinstantgamesexport"},desktop:{online:"onlineelectronexport",offline:"electronexport",facebook:null},android:{online:"onlinecordovaexport",offline:"cordovaexport",facebook:null},ios:{online:"onlinecordovaiosexport",offline:"cordovaexport",facebook:null}},je=function(e){var t=e.project,n=e.onSaveProject,r=e.isSavingProject,d=e.onClose,p=e.allExportersRequireOnline,m=e.onChangeSubscription,x=e.automatedExporters,v=e.manualExporters,b=e.onlineWebExporter,C=e.initialTab,j=e.fileMetadata,y=e.storageProvider,Z=e.gamesList,w=(0,V.UQ)().isMobile,T=s.useContext(xe.ZP),S=T.setShareDialogDefaultTab,P=T.getShareDialogDefaultTab,I=s.useState(C||P()),M=(0,a.Z)(I,2),L=M[0],A=M[1],O=!x&&!v,R=s.useState(O?"browser":null),F=(0,a.Z)(R,2),D=F[0],N=F[1],_=s.useState(O?"online":null),B=(0,a.Z)(_,2),U=B[0],H=B[1];s.useEffect((function(){return S(L)}),[S,L]);var z=(0,k.k)(),W=s.useState(!1),G=(0,a.Z)(W,2),Y=G[0],X=G[1],K=s.useState(!1),Q=(0,a.Z)(K,2),$=Q[0],ee=Q[1],te=s.useContext(g.ZP),ne=(0,se.Z)().showAlert,re=(0,be.Px)({project:t,onGameRegistered:Z.fetchGames}),ie=s.useMemo((function(){return[].concat((0,i.Z)(x||[]),(0,i.Z)(v||[]),[b])}),[x,v,b]),ae=s.useMemo((function(){if(!D)return null;if(!U)return null;var e=Ce[D][U],t=ie.find((function(t){return t.key===e}));return t||null}),[D,U,ie]);if(!t)return null;var oe=[(0,f.jsx)(u.Z,{label:(0,f.jsx)(o.Trans,{id:"Close"}),primary:!1,onClick:d,disabled:$},"close")],le="publish"===L?[ae?(0,f.jsx)(c.Z,{helpPagePath:ae.helpPage},"help"):null,(0,f.jsx)(E.Z,{label:w?(0,f.jsx)(o.Trans,{id:"Exports"}):(0,f.jsx)(o.Trans,{id:"See all exports"}),onClick:function(){if(re.game)X(!0);else{var e="not-found"===re.gameAvailabilityError?{id:"Register or publish your game first to see its exports."}:"not-owned"===re.gameAvailabilityError?{id:"You are not the owner of this game, ask the owner to add you as an owner to see its exports."}:{id:"Either this game is not registered or you are not its owner, so you cannot see its builds."};ne({title:{id:"Cannot see the exports"},message:e})}},disabled:$||!z},"exports")].filter(Boolean):[(0,f.jsx)(c.Z,{helpPagePath:"/collaboration/invite-collaborators"},"help")];return(0,f.jsxs)(l.ZP,{id:"export-dialog",maxWidth:"md",minHeight:"lg",title:(0,f.jsx)(o.Trans,{id:"Share"}),actions:oe,secondaryActions:le,onRequestClose:d,open:!0,fixedContent:(0,f.jsx)(J.m,{value:L,onChange:A,options:[{value:"publish",label:(0,f.jsx)(o.Trans,{id:"Publish"}),id:"publish-tab",disabled:$},{value:"invite",label:(0,f.jsx)(o.Trans,{id:"Invite"}),id:"invite-tab",disabled:$}]}),flexColumnBody:!0,children:["invite"===L&&(0,f.jsx)(me,{cloudProjectId:"Cloud"===y.internalName&&j?j.fileIdentifier:null}),"publish"===L&&(0,f.jsx)(q,{project:t,gameAndBuildsManager:re,onSaveProject:n,isSavingProject:r,onChangeSubscription:m,isNavigationDisabled:$,setIsNavigationDisabled:ee,selectedExporter:ae,onChooseSection:N,onChooseSubSection:H,chosenSection:D,chosenSubSection:U,allExportersRequireOnline:p,showOnlineWebExporterOnly:O}),re.game&&(0,f.jsx)(h,{open:Y,onClose:function(){return X(!1)},authenticatedUser:te,game:re.game,onGameUpdated:re.setGame})]})},ye=function(e){return(0,f.jsx)(ve.ZP,{componentTitle:(0,f.jsx)(o.Trans,{id:"Share dialog"}),scope:"export-and-share",onClose:e.onClose,children:(0,f.jsx)(je,(0,r.Z)({},e))})}},1879:function(e,t,n){"use strict";n.d(t,{J:function(){return j}});var r=n(1413),i=n(74165),a=n(15861),o=n(29439),s=n(36600),l=n(28381),c=n(86578),u=n(20914),d=n(6996),p=n(71106),f=n(61325),h=n(60022),g=n(65056),m=n(16999),x=n(98775),v=n(23818),b=n(29343),C={image:{display:"block",objectFit:"scale-down",aspectRatio:"16 / 9"},fullWidthContainer:{width:"100%",aspectRatio:"16 / 9",height:"auto",justifyContent:"center"},fullWidthThumbnail:{width:"100%",height:"auto"}},j=function(e){var t=e.disabled,n=e.canUpdateThumbnail,j=e.thumbnailUrl,y=e.gameName,Z=e.gameId,k=e.onGameUpdated,w=e.onUpdatingGame,T=e.background,S=void 0===T?"light":T,P=e.fullWidthOnMobile,I=e.width,E=(0,d.UQ)(),M=E.isMobile,L=E.isLandscape,A=l.useContext(p.ZP),O=A.profile,R=A.getAuthorizationHeader,F=l.useState(!1),D=(0,o.Z)(F,2),N=D[0],_=D[1],B=(0,g.Z)().showAlert,U=l.useRef(null),V=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r,a,o,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&Z){e.next=2;break}return e.abrupt("return");case 2:if(U.current&&U.current.files&&U.current.files[0]){e.next=5;break}return console.error("Could't find selected file. Aborting thumbnail update."),e.abrupt("return");case 5:if(t=U.current.files[0],(n=t.type)&&("image/png"===n||"image/jpeg"===n||"image/webp"===n)){e.next=11;break}return e.next=10,B({title:{id:"Invalid file"},message:{id:"Only PNG, JPEG and WEBP files are supported."}});case 10:return e.abrupt("return");case 11:return e.prev=11,_(!0),w&&w(!0),e.next=16,(0,m.UC)({uploadType:"game-thumbnail",files:[{contentType:n}]});case 16:if(r=e.sent,(a=r.signedUrls)&&0!==a.length){e.next=20;break}throw new Error("No signed url returned");case 20:return o=a[0],s=o.signedUrl,l=o.publicUrl,e.next=23,(0,x.n)(t,{signedUrl:s,contentType:n},(function(){}));case 23:return e.next=25,(0,m.Bi)(R,O.id,Z,{thumbnailUrl:l});case 25:c=e.sent,k&&k(c),e.next=34;break;case 29:return e.prev=29,e.t0=e.catch(11),console.error("Error while updating thumbnail:",e.t0),e.next=34,B({title:{id:"Cannot update thumbnail"},message:{id:"There was an error while updating the game's thumbnail on gd.games. Verify your internet connection or try again later."}});case 34:return e.prev=34,U.current&&(U.current.value=""),_(!1),w&&w(!1),e.finish(34);case 39:case"end":return e.stop()}}),e,null,[[11,29,34,39]])})));return function(){return e.apply(this,arguments)}}(),H=I||(M&&!L?150:272),z=Math.floor(H/(16/9));return(0,b.jsxs)(f.ak,{noMargin:!0,alignItems:"center",children:[(0,b.jsx)(u.Z,{style:(0,r.Z)((0,r.Z)({width:H,height:z},M&&!L&&P?C.fullWidthContainer:void 0),{},{overflow:"hidden",whiteSpace:"normal",display:"flex"}),background:S,children:j?(0,b.jsx)(v.W,{src:j,style:(0,r.Z)((0,r.Z)({},C.image),{},{width:H},M&&!L&&P?C.fullWidthThumbnail:{}),alt:y}):(0,b.jsx)(c.Z,{children:(0,b.jsx)(s.Trans,{id:"No thumbnail"})})}),n&&Z&&(0,b.jsx)(h.Z,{primary:!0,disabled:!O||N||t,onClick:function(){U.current&&U.current.click()},label:N?(0,b.jsx)(s.Trans,{id:"Updating..."}):j?(0,b.jsx)(s.Trans,{id:"Change thumbnail"}):(0,b.jsx)(s.Trans,{id:"Select a thumbnail"})}),n&&Z&&(0,b.jsx)("input",{type:"file",onChange:V,ref:U,style:{display:"none"}})]})}},84340:function(e,t,n){"use strict";n.d(t,{a:function(){return st},Z:function(){return lt}});var r=n(45987),i=n(74165),a=n(15861),o=n(29439),s=n(1413),l=n(28381),c=n(36600),u=n(46538),d=n(18930),p=n(71944),f=n(33620),h=n(29858),g=n(61701),m=n(99415),x=n(3781),v=n(1491),b=n(36052),C=n(73612),j=n(23198),y=n(37571),Z=n(78118),k=n(29343),w=l.memo((function(e){return(0,k.jsxs)(Z.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33374 4.49996C3.33374 3.48744 4.15455 2.66663 5.16707 2.66663H9.33374C9.46635 2.66663 9.59353 2.7193 9.68729 2.81307L11.0206 4.14641C11.2159 4.34167 11.2159 4.65825 11.0206 4.85351C10.8254 5.04877 10.5088 5.04877 10.3135 4.85351L9.12663 3.66663H5.16707C4.70684 3.66663 4.33374 4.03972 4.33374 4.49996V11.5C4.33374 11.9602 4.70683 12.3333 5.16707 12.3333H10.8337C11.294 12.3333 11.6671 11.9602 11.6671 11.5V10.3333C11.6671 10.0572 11.8909 9.83329 12.1671 9.83329C12.4432 9.83329 12.6671 10.0572 12.6671 10.3333V11.5C12.6671 12.5125 11.8463 13.3333 10.8337 13.3333H5.16707C4.15456 13.3333 3.33374 12.5125 3.33374 11.5V4.49996Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33374 2.83329C9.60988 2.83329 9.83374 3.05715 9.83374 3.33329V5.33329C9.83374 5.60944 9.60988 5.83329 9.33374 5.83329C9.0576 5.83329 8.83374 5.60944 8.83374 5.33329V3.33329C8.83374 3.05715 9.0576 2.83329 9.33374 2.83329Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6064 3.78754C12.9898 3.4041 13.6115 3.4041 13.995 3.78755L14.8795 4.67209C15.2629 5.05552 15.2629 5.67718 14.8795 6.06062L10.4018 10.5383C10.336 10.6041 10.2533 10.6502 10.1628 10.6715L8.11493 11.1533C7.94637 11.193 7.76929 11.1426 7.64685 11.0202C7.52441 10.8977 7.47404 10.7207 7.5137 10.5521L7.99554 8.50428C8.01684 8.41377 8.06295 8.33099 8.1287 8.26524L12.6064 3.78754C12.6064 3.78753 12.6064 3.78754 12.6064 3.78754ZM13.2878 4.49465C13.2878 4.49464 13.2878 4.49465 13.2878 4.49465V4.49465ZM13.3007 4.50749L14.1596 5.36636L9.79526 9.73065L8.67211 9.99492L8.93638 8.87177L13.3007 4.50749Z",fill:"currentColor"})]}))})),T=n(6307),S=l.memo((function(e){return(0,k.jsxs)(Z.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66679 6.33337C7.74631 6.33337 7.00012 7.07957 7.00012 8.00004C7.00012 8.92052 7.74631 9.66671 8.66679 9.66671C9.58726 9.66671 10.3335 8.92052 10.3335 8.00004C10.3335 7.07957 9.58726 6.33337 8.66679 6.33337ZM6.00012 8.00004C6.00012 6.52728 7.19403 5.33337 8.66679 5.33337C10.1395 5.33337 11.3335 6.52728 11.3335 8.00004C11.3335 9.4728 10.1395 10.6667 8.66679 10.6667C7.19403 10.6667 6.00012 9.4728 6.00012 8.00004Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66671 3.66663C6.27348 3.66663 4.33337 5.60673 4.33337 7.99996C4.33337 10.3932 6.27347 12.3333 8.66671 12.3333C8.94285 12.3333 9.16671 12.5572 9.16671 12.8333C9.16671 13.1094 8.94285 13.3333 8.66671 13.3333C5.72119 13.3333 3.33337 10.9455 3.33337 7.99996C3.33337 5.05444 5.72119 2.66663 8.66671 2.66663C11.0525 2.66663 12.4446 3.44102 13.2036 4.58875C13.9334 5.69247 14 7.03683 14 7.99996V8.83329C14 9.84583 13.1792 10.6666 12.1667 10.6666C11.1542 10.6666 10.3334 9.84583 10.3334 8.83329V5.83329C10.3334 5.55715 10.5572 5.33329 10.8334 5.33329C11.1095 5.33329 11.3334 5.55715 11.3334 5.83329V8.83329C11.3334 9.29355 11.7064 9.66663 12.1667 9.66663C12.627 9.66663 13 9.29355 13 8.83329V7.99996C13 7.04642 12.9208 5.97411 12.3694 5.14034C11.8472 4.35057 10.8225 3.66663 8.66671 3.66663Z",fill:"currentColor"})]}))})),P=l.memo((function(e){return(0,k.jsxs)(Z.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16707 4.99996C4.70684 4.99996 4.33374 5.37305 4.33374 5.83329V11.5C4.33374 11.9602 4.70683 12.3333 5.16707 12.3333H12.1671C12.6273 12.3333 13.0004 11.9602 13.0004 11.5V5.83329C13.0004 5.37305 12.6273 4.99996 12.1671 4.99996H5.16707ZM3.33374 5.83329C3.33374 4.82077 4.15455 3.99996 5.16707 3.99996H12.1671C13.1796 3.99996 14.0004 4.82078 14.0004 5.83329V11.5C14.0004 12.5125 13.1796 13.3333 12.1671 13.3333H5.16707C4.15456 13.3333 3.33374 12.5125 3.33374 11.5V5.83329Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.00041 2.66663C6.27655 2.66663 6.50041 2.89048 6.50041 3.16663V5.49996C6.50041 5.7761 6.27655 5.99996 6.00041 5.99996C5.72426 5.99996 5.50041 5.7761 5.50041 5.49996V3.16663C5.50041 2.89048 5.72426 2.66663 6.00041 2.66663Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3337 2.66663C11.6099 2.66663 11.8337 2.89048 11.8337 3.16663V5.49996C11.8337 5.7761 11.6099 5.99996 11.3337 5.99996C11.0576 5.99996 10.8337 5.7761 10.8337 5.49996V3.16663C10.8337 2.89048 11.0576 2.66663 11.3337 2.66663Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33374 7.16663C5.33374 6.89048 5.5576 6.66663 5.83374 6.66663H11.5004C11.7765 6.66663 12.0004 6.89048 12.0004 7.16663C12.0004 7.44277 11.7765 7.66663 11.5004 7.66663H5.83374C5.5576 7.66663 5.33374 7.44277 5.33374 7.16663Z",fill:"currentColor"})]}))})),I=l.memo((function(e){return(0,k.jsxs)(Z.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,k.jsx)("path",{d:"M13.2153 2.97488C13.0212 2.78621 12.7123 2.78621 12.5182 2.97488L10.7182 4.72488C10.5202 4.91737 10.5158 5.23392 10.7083 5.43191C10.9007 5.62991 11.2173 5.63436 11.4153 5.44187L12.3667 4.51684V11.4832L11.4153 10.5582C11.2173 10.3657 10.9007 10.3702 10.7083 10.5682C10.5158 10.7662 10.5202 11.0827 10.7182 11.2752L12.5182 13.0252C12.7123 13.2139 13.0212 13.2139 13.2153 13.0252L15.0153 11.2752C15.2133 11.0827 15.2177 10.7662 15.0252 10.5682C14.8328 10.3702 14.5162 10.3657 14.3182 10.5582L13.3667 11.4832V4.51684L14.3182 5.44187C14.5162 5.63436 14.8328 5.62991 15.0252 5.43191C15.2177 5.23392 15.2133 4.91737 15.0153 4.72488L13.2153 2.97488Z",fill:"currentColor"}),(0,k.jsx)("path",{d:"M2.66675 4.00004C2.39061 4.00004 2.16675 4.2239 2.16675 4.50004C2.16675 4.77618 2.39061 5.00004 2.66675 5.00004H5.06675C5.34289 5.00004 5.56675 4.77618 5.56675 4.50004C5.56675 4.2239 5.34289 4.00004 5.06675 4.00004H2.66675Z",fill:"currentColor"}),(0,k.jsx)("path",{d:"M2.66675 6.33337C2.39061 6.33337 2.16675 6.55723 2.16675 6.83337C2.16675 7.10952 2.39061 7.33337 2.66675 7.33337H6.26675C6.54289 7.33337 6.76675 7.10952 6.76675 6.83337C6.76675 6.55723 6.54289 6.33337 6.26675 6.33337H2.66675Z",fill:"currentColor"}),(0,k.jsx)("path",{d:"M2.66675 8.66671C2.39061 8.66671 2.16675 8.89056 2.16675 9.16671C2.16675 9.44285 2.39061 9.66671 2.66675 9.66671H7.46675C7.74289 9.66671 7.96675 9.44285 7.96675 9.16671C7.96675 8.89056 7.74289 8.66671 7.46675 8.66671H2.66675Z",fill:"currentColor"}),(0,k.jsx)("path",{d:"M2.66675 11C2.39061 11 2.16675 11.2239 2.16675 11.5C2.16675 11.7762 2.39061 12 2.66675 12H8.66675C8.94289 12 9.16675 11.7762 9.16675 11.5C9.16675 11.2239 8.94289 11 8.66675 11H2.66675Z",fill:"currentColor"})]}))})),E=l.memo((function(e){return(0,k.jsxs)(Z.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.66228 10.0458C4.21997 9.3592 5.07644 8.83335 6.33333 8.83335C7.59023 8.83335 8.44671 9.3592 9.0044 10.0458C9.54559 10.7121 9.7885 11.5061 9.89964 12.0527C10.0474 12.7795 9.45363 13.3334 8.8122 13.3334H3.85445C3.213 13.3334 2.61924 12.7795 2.76702 12.0527C2.87817 11.5061 3.12109 10.7121 3.66228 10.0458ZM4.43848 10.6763C4.04155 11.1649 3.84285 11.7804 3.74697 12.252C3.74408 12.2662 3.74562 12.2737 3.74668 12.2775C3.74798 12.282 3.751 12.2888 3.75818 12.2967C3.77307 12.3133 3.80507 12.3334 3.85445 12.3334H8.8122C8.86159 12.3334 8.89359 12.3133 8.90848 12.2967C8.91567 12.2887 8.91868 12.282 8.91998 12.2775C8.92105 12.2737 8.92258 12.2662 8.9197 12.252C8.82383 11.7804 8.62514 11.1649 8.2282 10.6763C7.84776 10.2079 7.26957 9.83335 6.33333 9.83335C5.3971 9.83335 4.81892 10.2079 4.43848 10.6763Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 9.33335C10 9.05721 10.2239 8.83335 10.5 8.83335C11.3981 8.83335 12.0238 9.30952 12.4336 9.88998C12.8329 10.4556 13.0502 11.146 13.1707 11.689C13.3754 12.6108 12.6195 13.3334 11.7846 13.3334H11.1667C10.8905 13.3334 10.6667 13.1095 10.6667 12.8334C10.6667 12.5572 10.8905 12.3334 11.1667 12.3334H11.7846C11.93 12.3334 12.0487 12.2727 12.1207 12.1918C12.189 12.1151 12.2194 12.0182 12.1945 11.9057C12.0859 11.4166 11.9048 10.875 11.6166 10.4667C11.3388 10.0732 10.9877 9.83335 10.5 9.83335C10.2239 9.83335 10 9.6095 10 9.33335Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.33333 3.66669C5.59695 3.66669 5 4.26364 5 5.00002C5 5.7364 5.59695 6.33335 6.33333 6.33335C7.06971 6.33335 7.66667 5.7364 7.66667 5.00002C7.66667 4.26364 7.06971 3.66669 6.33333 3.66669ZM4 5.00002C4 3.71136 5.04467 2.66669 6.33333 2.66669C7.622 2.66669 8.66667 3.71136 8.66667 5.00002C8.66667 6.28868 7.622 7.33335 6.33333 7.33335C5.04467 7.33335 4 6.28868 4 5.00002Z",fill:"currentColor"}),(0,k.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33333 3.16669C9.33333 2.89054 9.55719 2.66669 9.83333 2.66669C11.1829 2.66669 12 3.7765 12 5.00002C12 6.22354 11.1829 7.33335 9.83333 7.33335C9.55719 7.33335 9.33333 7.1095 9.33333 6.83335C9.33333 6.55721 9.55719 6.33335 9.83333 6.33335C10.5088 6.33335 11 5.80154 11 5.00002C11 4.1985 10.5088 3.66669 9.83333 3.66669C9.55719 3.66669 9.33333 3.44283 9.33333 3.16669Z",fill:"currentColor"})]}))})),M=n(44439),L=n(53162),A=n(57588),O=n(85477),R=n(90264),F=n(78081),D=n(68196),N=n(40243),_=n(51598),B=n(75383),U=n(38092),V=n(60022),H=n(29277),z=n(81683),W=n(66789),G=n(90242),Y=n(83297),q=n(14737),J=n(9708),X=n(39128),K=n(33114),Q=n(38962),$=n(79337),ee=n(98470),te=n(9940),ne=n(86278),re=n(31318),ie=n(96355),ae=["hour","minute","second","millisecond"],oe={hour:36e5,minute:6e4,second:1e3,millisecond:1},se={hour:":",minute:":",second:".",millisecond:""},le=function(e,t){return"time"===t.type?function(e,t){for(var n="",r=Math.round(1e3*e),i=ae.indexOf(t.biggestUnit),a=ae.indexOf(t.smallestUnit),o=i;o<=a;o++){var s=ae[o],l=oe[s],c=r%l;n+="".concat(((r-c)/l).toString().padStart("millisecond"===s?3:2,"0")).concat(o===a?"":se[s]),r=c}return n}(e,t):function(e,t){var n=(0,ie.R)(e,t.precision);return"".concat(t.prefix).concat(n.toFixed(Math.max(0,t.precision))).concat(t.suffix)}(e,t)},ce=n(45047),ue=n(84900),de=n(86022),pe=n(16590),fe=function(e){var t=e.entries,n=e.customizationSettings,r=e.onDeleteEntry,i=e.isLoading,a=e.erroredEntry,o=e.navigation;return t?(0,k.jsx)(c.I18n,{children:function(e){var l=e.i18n;return(0,k.jsxs)(N.sg,{expand:!0,justifyContent:"space-between",children:[(0,k.jsxs)(K.Z,{size:"small",children:[(0,k.jsx)(ee.Z,{children:(0,k.jsxs)(te.Z,{children:[(0,k.jsx)($.Z,{style:{width:"20%"},align:"center",children:n?n.scoreTitle:(0,k.jsx)(c.Trans,{id:"Score"})}),(0,k.jsx)($.Z,{style:{width:"50%"},children:(0,k.jsx)(c.Trans,{id:"Player"})}),(0,k.jsx)($.Z,{style:{width:"15%"},children:(0,k.jsx)(c.Trans,{id:"Date"})}),(0,k.jsx)($.Z,{style:{width:"15%"},children:(0,k.jsx)(c.Trans,{id:"Action"})})]})}),(0,k.jsx)(Q.Z,{children:t.map((function(e){return(0,k.jsxs)(te.Z,{children:[(0,k.jsx)($.Z,{align:"center",children:n?le(e.score,n.scoreFormatting):e.score}),(0,k.jsx)($.Z,{style:(0,s.Z)((0,s.Z)({},re.t),{},{maxWidth:0}),children:(0,k.jsx)(x.ZP,{title:e.playerName,children:(0,k.jsx)("span",{children:e.playerName})})}),(0,k.jsx)($.Z,{children:(0,k.jsx)(x.ZP,{title:l.date(e.createdAt,{dateStyle:"short",timeStyle:"short"}),children:(0,k.jsx)("span",{children:l.date(e.createdAt)})})}),(0,k.jsx)($.Z,{children:(0,k.jsxs)(N.x1,{children:[(0,k.jsx)(_.Z,{size:"small",onClick:function(){return r(e)},disabled:i,tooltip:{id:"Remove entry"},children:(0,k.jsx)(L.Z,{size:20})}),a&&a.entryId===e.id?(0,k.jsx)(_.Z,{size:"small",onClick:function(){},tooltip:a.message,children:(0,k.jsx)(pe.Z,{size:20,color:"error"})}):null]})})]},e.id)}))})]}),0===t.length?(0,k.jsx)(N.sg,{expand:!0,justifyContent:"center",alignItems:"center",children:(0,k.jsx)(ne.Z,{size:"body2",children:(0,k.jsx)(c.Trans,{id:"No entries"})})}):(0,k.jsxs)(N.x1,{noMargin:!0,justifyContent:"flex-end",children:[(0,k.jsx)(_.Z,{tooltip:{id:"Go to first page"},disabled:!o.goToFirstPage,onClick:function(){o.goToFirstPage&&o.goToFirstPage()},children:(0,k.jsx)(de.Z,{})}),(0,k.jsx)(_.Z,{tooltip:{id:"Previous page"},disabled:!o.goToPreviousPage,onClick:function(){o.goToPreviousPage&&o.goToPreviousPage()},children:(0,k.jsx)(ce.Z,{})}),(0,k.jsx)(_.Z,{tooltip:{id:"Next page"},disabled:!o.goToNextPage,onClick:function(){o.goToNextPage&&o.goToNextPage()},children:(0,k.jsx)(ue.Z,{})})]})]})}}):(0,k.jsx)(F.Z,{})},he=n(61325),ge=n(6996),me=n(65111),xe=n(54458),ve=n(71106),be=n(16999),Ce=n(57597),je=n(65056),ye=n(35666),Ze=n(31689),ke={progress:{marginLeft:8,verticalAlign:"middle"}},we=function(e){var t=e.children,n=e.isLoading;return(0,k.jsxs)("span",{children:[t,n&&(0,k.jsx)(W.Z,{size:20,style:ke.progress})]})},Te={buttonContainer:{flexShrink:0}},Se=function(e){var t=e.project,n=e.suggestAdditionalActions,r=e.hideLoader,s=e.onGameRegistered,u=e.customRegistrationMessage,d=l.useContext(ve.ZP),p=d.onOpenLoginDialog,f=d.onOpenCreateAccountDialog,h=d.getAuthorizationHeader,g=d.profile,m=d.onAcceptGameStatsEmail,x=(0,je.Z)().showAlert,v=(0,Ze.IG)({project:t}),b=v.game,C=v.setGame,j=v.gameAvailabilityError,y=v.refreshGame,Z=v.registerGameIfNeeded,w=l.useState(!1),T=(0,o.Z)(w,2),S=T[0],P=T[1],I=l.useState(!1),E=(0,o.Z)(I,2),M=E[0],L=E[1],A=l.useState(!1),O=(0,o.Z)(A,2),R=O[0],D=O[1],_=l.useState(!1),H=(0,o.Z)(_,2),z=H[0],W=H[1],G=l.useCallback((0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,Z();case 4:s&&s(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Unable to register the game",e.t0),x({title:{id:"Unable to register the game"},message:{id:"Verify your internet connection or try again later."}});case 11:P(!1);case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),[Z,s,x]),Y=l.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&b){e.next=2;break}return e.abrupt("return");case 2:return L(!0),e.prev=3,e.next=6,m(t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Unable to change your email preferences.",e.t0),x({title:{id:"Unable to change your email preferences"},message:{id:"Verify your internet connection or try again later."}});case 12:L(!1);case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),[g,b,m,x]),q=l.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&b){e.next=2;break}return e.abrupt("return");case 2:return D(!0),e.prev=3,e.next=6,(0,be.Bi)(h,g.id,b.id,{acceptsGameComments:t});case 6:n=e.sent,C(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Unable to change feedback for this game.",e.t0),x({title:{id:"Unable to change feedback for this game"},message:{id:"Verify your internet connection or try again later."}});case 14:D(!1);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),[g,b,C,h,x]);return t?g?"not-found"===j?(0,k.jsx)(U.Z,{kind:"info",renderRightButton:function(){return(0,k.jsx)("div",{style:Te.buttonContainer,children:(0,k.jsx)(V.Z,{label:(0,k.jsx)(c.Trans,{id:"Register the project"}),disabled:S,primary:!0,onClick:G})})},children:u||(0,k.jsx)(c.Trans,{id:"The project currently opened is not registered online. Register it now to get access to leaderboards, player accounts, analytics and more!"})}):"not-owned"===j?(0,k.jsx)(U.Z,{kind:"error",children:(0,k.jsx)(c.Trans,{id:"This game is registered online but you don't have access to it. Ask the owner of the game to add your account to the list of owners to be able to manage it."})}):"unexpected"===j?(0,k.jsxs)(B.Z,{onRetry:y,children:[(0,k.jsx)(c.Trans,{id:"Can't check if the game is registered online."})," ",(0,k.jsx)(c.Trans,{id:"Verify your internet connection or try again later."})]}):n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(he.ak,{noMargin:!0,expand:!0,children:[(0,k.jsxs)(N.sg,{noMargin:!0,children:[(0,k.jsx)(ne.Z,{size:"block-title",children:(0,k.jsx)(c.Trans,{id:"Taking your game further"})}),(0,k.jsxs)(N.sg,{children:[(0,k.jsx)(Ce.Z,{onToggle:function(){return Y(!g.getGameStatsEmail)},toggled:g.getGameStatsEmail,labelPosition:"right",label:(0,k.jsx)(c.Trans,{id:"Receive weekly stats about your game by email"}),disabled:M}),(0,k.jsx)(Ce.Z,{onToggle:function(){return q(!(b&&b.acceptsGameComments))},toggled:!(!b||!b.acceptsGameComments),labelPosition:"right",label:(0,k.jsx)(c.Trans,{id:"Open game for player feedback"}),disabled:!b||R})]})]}),(0,k.jsxs)(N.sg,{noMargin:!0,children:[(0,k.jsx)(ne.Z,{size:"sub-title",children:(0,k.jsx)(c.Trans,{id:"Promoting your game to the community"})}),(0,k.jsx)(ne.Z,{noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Make your game visible to the GDevelop community and to the world with Marketing Boosts."})}),(0,k.jsx)(N.x1,{children:(0,k.jsx)(we,{isLoading:!b,children:(0,k.jsx)(V.Z,{label:(0,k.jsx)(c.Trans,{id:"See Marketing Boosts"}),primary:!0,onClick:function(){return W(!0)},disabled:!b})})})]})]}),z&&b&&(0,k.jsx)(ye.Z,{game:b,onClose:function(){return W(!1)}})]}):b||r?null:(0,k.jsx)(F.Z,{}):(0,k.jsx)(xe.Z,{onOpenLoginDialog:p,onOpenCreateAccountDialog:f,message:u}):null},Pe=n(1773),Ie=n(10888),Ee=n(4076),Me=n(90286),Le=n(49522),Ae=n(96591),Oe=n(2066),Re=function(){return(0,k.jsxs)(he.pJ,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"space-around",children:[(0,k.jsx)(N.sg,{children:(0,k.jsx)(ne.Z,{children:(0,k.jsx)(c.Trans,{id:"Experiment with the leaderboard colors using the playground"})})}),(0,k.jsx)(N.sg,{children:(0,k.jsx)(Ae.Z,{href:"https://gd.games/playground/test-leaderboard",onClick:function(){return Oe.ZP.openExternalURL("https://gd.games/playground/test-leaderboard")},children:(0,k.jsx)(ne.Z,{noMargin:!0,color:"inherit",children:(0,k.jsx)(c.Trans,{id:"Playground"})})})})]})},Fe=n(11858),De=n(21601),Ne=n(42986),_e={hour:"HH",minute:"MM",second:"SS",millisecond:"ms"},Be=function(e){return!isNaN(e)&&Number.isInteger(e)},Ue=function(e){for(var t=ae.indexOf(e.biggestUnit),n=ae.indexOf(e.smallestUnit),r="",i=t;i<=n;i++){var a=ae[i];r+="".concat(_e[a]).concat(i===n?"":se[a])}return r},Ve=ae.reduce((function(e,t,n){for(var r=n;r<ae.length;r++){var i={biggestUnit:ae[n],smallestUnit:ae[r]};e[Ue(i)]=i}return e}),{}),He=999999999;var ze=function(e){var t=e.open,n=e.onClose,r=e.onSave,u=e.leaderboardCustomizationSettings,d=l.useState(!1),p=(0,o.Z)(d,2),f=p[0],h=p[1],g=l.useContext(ve.ZP),m=(0,q.VE)(g),x=m.canUseTheme,v=m.canUseCustomCss,b=(0,q.YO)(u),C=l.useState(null),j=(0,o.Z)(C,2),y=j[0],Z=j[1],w=l.useState(u&&u.defaultDisplayedEntriesNumber||20),T=(0,o.Z)(w,2),S=T[0],P=T[1],I=l.useState(b.backgroundColor),E=(0,o.Z)(I,2),M=E[0],L=E[1],A=l.useState(b.textColor),O=(0,o.Z)(A,2),R=O[0],F=O[1],D=l.useState(b.highlightBackgroundColor),_=(0,o.Z)(D,2),B=_[0],V=_[1],W=l.useState(b.highlightTextColor),Y=(0,o.Z)(W,2),J=Y[0],X=Y[1],K=l.useState(null),Q=(0,o.Z)(K,2),$=Q[0],ee=Q[1],te=l.useState(u&&u.customCss||""),re=(0,o.Z)(te,2),ie=re[0],ae=re[1],oe=l.useState(!(!u||!u.useCustomCss)),se=(0,o.Z)(oe,2),ce=se[0],ue=se[1],de=l.useState(u?u.scoreTitle:"Score"),pe=(0,o.Z)(de,2),fe=pe[0],ge=pe[1],me=l.useState(u?u.scoreFormatting.type:"custom"),xe=(0,o.Z)(me,2),be=xe[0],Ce=xe[1],je=l.useState(u&&"custom"===u.scoreFormatting.type?u.scoreFormatting.prefix:""),ye=(0,o.Z)(je,2),Ze=ye[0],ke=ye[1],we=l.useState(u&&"custom"===u.scoreFormatting.type?u.scoreFormatting.suffix:""),Te=(0,o.Z)(we,2),Se=Te[0],_e=Te[1],ze=l.useState(u&&"custom"===u.scoreFormatting.type?u.scoreFormatting.precision:0),We=(0,o.Z)(ze,2),Ge=We[0],Ye=We[1],qe=l.useState(null),Je=(0,o.Z)(qe,2),Xe=Je[0],Ke=Je[1],Qe=l.useState(u&&"time"===u.scoreFormatting.type?Ue({smallestUnit:u.scoreFormatting.smallestUnit,biggestUnit:u.scoreFormatting.biggestUnit}):Ue({biggestUnit:"second",smallestUnit:"millisecond"})),$e=(0,o.Z)(Qe,2),et=$e[0],tt=$e[1],nt=l.useState(15.2659),rt=(0,o.Z)(nt,2),it=rt[0],at=rt[1],ot=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fe){e.next=3;break}return Z(t._({id:"Title cannot be empty."})),e.abrupt("return");case 3:if(Be(S)){e.next=6;break}return ee(t._({id:"The number of displayed entries must be a whole value between {displayedEntriesMinNumber} and {displayedEntriesMaxNumber}",values:{displayedEntriesMinNumber:1,displayedEntriesMaxNumber:50}})),e.abrupt("return");case 6:if(Be(Ge)){e.next=9;break}return Ke(t._({id:"The number of decimal places must be a whole value between {precisionMinValue} and {precisionMaxValue}",values:{precisionMinValue:-3,precisionMaxValue:3}})),e.abrupt("return");case 9:return h(!0),n={defaultDisplayedEntriesNumber:S,scoreTitle:fe,scoreFormatting:"custom"===be?{type:be,prefix:Ze,suffix:Se,precision:Ge}:(0,s.Z)({type:be},Ve[et]),theme:x?{backgroundColor:(0,Fe.Zn)(M),textColor:(0,Fe.Zn)(R),highlightBackgroundColor:(0,Fe.Zn)(B),highlightTextColor:(0,Fe.Zn)(J)}:void 0,useCustomCss:ce,customCss:ie},e.next=13,r(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,k.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,k.jsx)(Pe.ZP,{title:(0,k.jsx)(c.Trans,{id:"Leaderboard appearance"}),open:t,maxWidth:"sm",secondaryActions:[(0,k.jsx)(Ee.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration",anchor:"change_the_appearance_of_a_leaderboard"},"help")],actions:[(0,k.jsx)(Ie.Z,{label:(0,k.jsx)(c.Trans,{id:"Cancel"}),disabled:f,onClick:n},"cancel"),(0,k.jsx)(Pe.vF,{primary:!0,label:(0,k.jsx)(c.Trans,{id:"Save"}),disabled:f,onClick:function(){return ot(r)}},"save")],cannotBeDismissed:f,onRequestClose:n,onApply:function(){ot(r)},children:(0,k.jsxs)(he.ak,{noMargin:!0,children:[(0,k.jsx)(ne.Z,{size:"sub-title",noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Table settings"})}),(0,k.jsx)(H.ZP,{fullWidth:!0,type:"number",floatingLabelText:(0,k.jsx)(c.Trans,{id:"Number of entries to display"}),value:isNaN(S)?"":S,errorText:$,min:1,max:50,onChange:function(e,t){$&&t&&ee(null),P(Math.max(1,Math.min(50,parseFloat(t))))},disabled:f}),(0,k.jsx)(N.LZ,{}),(0,k.jsx)(ne.Z,{size:"sub-title",noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Visual appearance"})}),(0,k.jsxs)(he.ep,{noMargin:!0,children:[(0,k.jsx)(Me.Z,{floatingLabelText:(0,k.jsx)(c.Trans,{id:"Background color"}),disableAlpha:!0,fullWidth:!0,color:M,onChange:L,disabled:!x||f}),(0,k.jsx)(Me.Z,{floatingLabelText:(0,k.jsx)(c.Trans,{id:"Text color"}),disableAlpha:!0,fullWidth:!0,color:R,onChange:F,disabled:!x||f})]}),(0,k.jsxs)(he.ep,{noMargin:!0,children:[(0,k.jsx)(Me.Z,{floatingLabelText:(0,k.jsx)(c.Trans,{id:"Highlight background color"}),disableAlpha:!0,fullWidth:!0,color:B,onChange:V,disabled:!x||f}),(0,k.jsx)(Me.Z,{floatingLabelText:(0,k.jsx)(c.Trans,{id:"Highlight text color"}),disableAlpha:!0,fullWidth:!0,color:J,onChange:X,disabled:!x||f})]}),x?(0,k.jsx)(Re,{}):(0,k.jsx)(Le.Z,{subscriptionDialogOpeningReason:"Leaderboard customization",recommendedPlanIdIfNoSubscription:"gdevelop_silver",placementId:"leaderboards-customization",children:(0,k.jsx)(N.x1,{children:(0,k.jsxs)(N.sg,{noMargin:!0,children:[(0,k.jsx)(ne.Z,{noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Get a silver or gold subscription to unlock color customization."})}),(0,k.jsx)(Ae.Z,{href:"https://gd.games/playground/test-leaderboard",onClick:function(){return Oe.ZP.openExternalURL("https://gd.games/playground/test-leaderboard")},children:(0,k.jsx)(ne.Z,{noMargin:!0,color:"inherit",children:(0,k.jsx)(c.Trans,{id:"Test it out!"})})})]})})}),(0,k.jsx)(N.LZ,{}),(0,k.jsx)(ne.Z,{size:"sub-title",noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Visual appearance (advanced)"})}),(0,k.jsx)(De.Z,{label:(0,k.jsx)(c.Trans,{id:"Use custom CSS for the leaderboard"}),disabled:!v&&!ce||f,checked:ce,onCheck:function(e,t){return ue(t)}}),(0,k.jsx)(Ne.Z,{fullWidth:!0,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Custom CSS"}),multiline:!0,rows:4,rowsMax:15,value:ie,onChange:ae,disabled:!ce||f}),v?(0,k.jsxs)(k.Fragment,{children:[ie.length>2e4&&(0,k.jsx)(U.Z,{kind:"error",children:(0,k.jsx)(c.Trans,{id:"Custom css value cannot exceed {LEADERBOARD_APPEARANCE_CUSTOM_CSS_MAX_LENGTH} characters.",values:{LEADERBOARD_APPEARANCE_CUSTOM_CSS_MAX_LENGTH:2e4}})}),(0,k.jsx)(Re,{})]}):(0,k.jsx)(Le.Z,{subscriptionDialogOpeningReason:"Leaderboard customization",recommendedPlanIdIfNoSubscription:"gdevelop_startup",placementId:"leaderboards-customization",children:(0,k.jsx)(N.x1,{children:(0,k.jsxs)(N.sg,{noMargin:!0,children:[(0,k.jsx)(ne.Z,{noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Get a pro subscription to unlock custom CSS."})}),(0,k.jsx)(Ae.Z,{href:"https://gd.games/playground/test-leaderboard",onClick:function(){return Oe.ZP.openExternalURL("https://gd.games/playground/test-leaderboard")},children:(0,k.jsx)(ne.Z,{noMargin:!0,color:"inherit",children:(0,k.jsx)(c.Trans,{id:"Test it out!"})})})]})})}),(0,k.jsx)(N.LZ,{}),(0,k.jsx)(ne.Z,{size:"sub-title",noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Score column settings"})}),(0,k.jsx)(H.ZP,{fullWidth:!0,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Column title"}),maxLength:20,errorText:y,value:fe,onChange:function(e,t){y&&t&&Z(null),ge(t)},disabled:f}),(0,k.jsxs)(z.Z,{fullWidth:!0,value:be,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Score display"}),onChange:function(e,t,n){return Ce(n)},disabled:f,children:[(0,k.jsx)(G.Z,{value:"custom",label:{id:"Custom display"}},"custom"),(0,k.jsx)(G.Z,{value:"time",label:{id:"Display as time"}},"time")]}),(0,k.jsx)(N.LZ,{}),(0,k.jsx)(ne.Z,{size:"sub-title",noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Settings"})}),"custom"===be?(0,k.jsxs)(he.ak,{noMargin:!0,children:[(0,k.jsxs)(he.ep,{noMargin:!0,children:[(0,k.jsx)(H.ZP,{fullWidth:!0,floatingLabelFixed:!0,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Prefix"}),maxLength:10,value:Ze,translatableHintText:{id:"Ex: $"},onChange:function(e,t){ke(t)},disabled:f}),(0,k.jsx)(H.ZP,{fullWidth:!0,floatingLabelFixed:!0,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Suffix"}),maxLength:10,value:Se,translatableHintText:{id:"Ex: coins"},onChange:function(e,t){_e(t)},disabled:f})]}),(0,k.jsx)(H.ZP,{fullWidth:!0,type:"number",floatingLabelText:(0,k.jsx)(c.Trans,{id:"Round to X decimal point"}),errorText:Xe,value:isNaN(Ge)?"":Ge,min:-3,max:3,onChange:function(e,t){Xe&&t&&Ke(null),Ye(Math.max(-3,Math.min(3,parseFloat(t))))},disabled:f})]}):(0,k.jsxs)(he.ak,{noMargin:!0,children:[(0,k.jsx)(z.Z,{fullWidth:!0,value:et,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Time format"}),onChange:function(e,t,n){return tt(n)},disabled:f,children:Object.keys(Ve).map((function(e){return(0,k.jsx)(G.Z,{value:e,label:e},e)}))}),(0,k.jsx)(U.Z,{kind:"info",children:(0,k.jsx)(c.Trans,{id:"To use this formatting, you must send a score expressed in seconds"})})]}),(0,k.jsx)(N.LZ,{}),(0,k.jsx)(ne.Z,{size:"sub-title",noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Preview"})}),(0,k.jsxs)(he.ep,{noMargin:!0,children:[(0,k.jsx)(H.ZP,{fullWidth:!0,floatingLabelText:"custom"===be?(0,k.jsx)(c.Trans,{id:"Test value"}):(0,k.jsx)(c.Trans,{id:"Test value (in second)"}),max:He,min:0,type:"number",value:isNaN(it)?"":it,onChange:function(e,t){return at(Math.max(0,Math.min(He,parseFloat(t))))},disabled:f}),(0,k.jsx)(H.ZP,{disabled:!0,fullWidth:!0,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Displayed score"}),value:le(it||0,"time"===be?(0,s.Z)({type:be},Ve[et]):{type:be,prefix:Ze,suffix:Se,precision:Ge||0})})]})]})})}})},We=n(66733),Ge=n(32832),Ye=Number.MAX_SAFE_INTEGER,qe=Number.MIN_SAFE_INTEGER;var Je=function(e){var t=e.open,n=e.onClose,r=e.onSave,s=e.leaderboard,u=l.useState(!1),d=(0,o.Z)(u,2),p=d[0],f=d[1],h=l.useContext(ve.ZP),g=h.limits&&h.limits.capabilities.leaderboards.canDisableLoginInLeaderboard||!1,m=l.useState(null),x=(0,o.Z)(m,2),v=x[0],b=x[1],C=l.useState(void 0!==s.extremeAllowedScore),j=(0,o.Z)(C,2),y=j[0],Z=j[1],w=l.useState(s.extremeAllowedScore||0),T=(0,o.Z)(w,2),S=T[0],P=T[1],I=l.useState(s.sort||"ASC"),E=(0,o.Z)(I,2),M=E[0],L=E[1],A=l.useState(s.autoPlayerNamePrefix||""),O=(0,o.Z)(A,2),R=O[0],F=O[1],D=l.useState(!!s.ignoreCustomPlayerNames),_=(0,o.Z)(D,2),B=_[0],U=_[1],V=l.useState(!!s.disableLoginInLeaderboard),W=(0,o.Z)(V,2),Y=W[0],q=W[1],J=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=7;break}if(!(S>Ye)){e.next=4;break}return b(t._({id:"Extreme score must be lower than {extremeAllowedScoreMax}.",values:{extremeAllowedScoreMax:Ye}})),e.abrupt("return");case 4:if(!(S<qe)){e.next=7;break}return b(t._({id:"Extreme score must be equal or higher than {extremeAllowedScoreMin}.",values:{extremeAllowedScoreMin:qe}})),e.abrupt("return");case 7:if(!isNaN(S)){e.next=10;break}return b(t._({id:"Limit cannot be empty, uncheck or fill a value between {extremeAllowedScoreMin} and {extremeAllowedScoreMax}.",values:{extremeAllowedScoreMin:qe,extremeAllowedScoreMax:Ye}})),e.abrupt("return");case 10:return f(!0),n={sort:M,extremeAllowedScore:y?S:null,autoPlayerNamePrefix:R,ignoreCustomPlayerNames:B,disableLoginInLeaderboard:Y},e.next=14,r(n);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,k.jsx)(c.I18n,{children:function(e){var r=e.i18n;return(0,k.jsxs)(Pe.ZP,{title:(0,k.jsx)(c.Trans,{id:"Leaderboard options"}),open:t,maxWidth:"sm",secondaryActions:[(0,k.jsx)(Ee.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration",anchor:"change_the_appearance_of_a_leaderboard"},"help")],actions:[(0,k.jsx)(Ie.Z,{label:(0,k.jsx)(c.Trans,{id:"Cancel"}),disabled:p,onClick:n},"cancel"),(0,k.jsx)(Pe.vF,{primary:!0,label:(0,k.jsx)(c.Trans,{id:"Save"}),disabled:p,onClick:function(){return J(r)}},"save")],cannotBeDismissed:p,onRequestClose:n,onApply:function(){J(r)},children:[(0,k.jsx)(ne.Z,{size:"block-title",children:(0,k.jsx)(c.Trans,{id:"Sort order"})}),(0,k.jsxs)(he.ak,{noMargin:!0,children:[(0,k.jsxs)(z.Z,{fullWidth:!0,value:M,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Scores sort order"}),onChange:function(e,t,n){L(n)},children:[(0,k.jsx)(G.Z,{value:"ASC",label:{id:"Lower is better"}},"ASC"),(0,k.jsx)(G.Z,{value:"DESC",label:{id:"Higher is better"}},"DESC")]}),(0,k.jsx)(De.Z,{label:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.x1,{noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Limit scores"})}),(0,k.jsx)(We.Z,{style:{display:"inline"},children:(0,k.jsx)(Ge.r,{source:r._("ASC"===M?{id:"Any submitted score that is lower than the set value will not be saved in the leaderboard."}:{id:"Any submitted score that is higher than the set value will not be saved in the leaderboard."})})})]}),checked:y,onCheck:function(){return Z(!y)}}),y&&(0,k.jsx)(N.sg,{noMargin:!0,children:(0,k.jsxs)(N.x1,{children:[(0,k.jsx)(N.hS,{}),(0,k.jsx)(H.ZP,{fullWidth:!0,type:"number",floatingLabelText:"ASC"===M?(0,k.jsx)(c.Trans,{id:"Minimum score"}):(0,k.jsx)(c.Trans,{id:"Maximum score"}),value:S,errorText:v,min:qe,max:Ye,onChange:function(e,t){v&&b(null),P(parseFloat(t))}})]})}),(0,k.jsx)(ne.Z,{size:"block-title",children:(0,k.jsx)(c.Trans,{id:"Connected players"})}),(0,k.jsx)(De.Z,{label:(0,k.jsx)(c.Trans,{id:"Disable login buttons in leaderboard"}),checked:Y,disabled:!g,onCheck:function(e,t){return q(t)},tooltipOrHelperText:(0,k.jsx)(c.Trans,{id:"If activated, players won't be able to log in and claim a score just sent without being already logged in to the game."})}),!g&&(0,k.jsx)(Le.Z,{subscriptionDialogOpeningReason:"Leaderboard customization",recommendedPlanIdIfNoSubscription:"gdevelop_startup",placementId:"leaderboards-customization",children:(0,k.jsx)(N.x1,{children:(0,k.jsx)(N.sg,{noMargin:!0,children:(0,k.jsx)(ne.Z,{noMargin:!0,children:(0,k.jsx)(c.Trans,{id:"Get a pro subscription to get full leaderboard customization."})})})})}),(0,k.jsx)(ne.Z,{size:"block-title",children:(0,k.jsx)(c.Trans,{id:"Anonymous players"})}),(0,k.jsx)(Ne.Z,{floatingLabelText:(0,k.jsx)(c.Trans,{id:"Player name prefix (for auto-generated player names)"}),fullWidth:!0,maxLength:40,value:R,onChange:function(e){return F(e)}}),(0,k.jsx)(De.Z,{label:(0,k.jsx)(c.Trans,{id:"Enforce only auto-generated player names"}),checked:B,onCheck:function(e,t){return U(t)},tooltipOrHelperText:(0,k.jsx)(c.Trans,{id:"If checked, player names will always be auto-generated, even if the game sent a custom name. Helpful if you're having a leaderboard where you want full anonymity."})})]})]})}})},Xe=n(68151),Ke=function(e,t){if(!e.authenticated)return!1;var n=e.limits;if(!n)return!1;var r=n.capabilities.leaderboards;return t&&r&&r.maximumCountPerGame>0&&t.filter((function(e){return!e.deletedAt})).length>=r.maximumCountPerGame},Qe=function(){var e=l.useContext(ve.ZP),t=e.limits,n=e.subscription;if(!t)return null;var r=(0,Xe.e_)(n),i=t.capabilities.leaderboards;return i?(0,k.jsx)(N.x1,{children:(0,k.jsx)(N.sg,{expand:!0,children:(0,k.jsx)(Le.Z,{subscriptionDialogOpeningReason:"Leaderboard count per game limit reached",placementId:"leaderboards",label:r?(0,k.jsx)(c.Trans,{id:"Upgrade your Premium Plan"}):(0,k.jsx)(c.Trans,{id:"Upgrade to GDevelop Premium"}),hideButton:!i.canMaximumCountPerGameBeIncreased,recommendedPlanIdIfNoSubscription:"gdevelop_silver",children:(0,k.jsx)(N.x1,{children:(0,k.jsxs)(N.sg,{noMargin:!0,expand:!0,children:[(0,k.jsx)(ne.Z,{size:"block-title",children:(0,k.jsx)(c.Trans,{id:"You've reached your maximum of {0} leaderboards for your game",values:{0:i.maximumCountPerGame}})}),(0,k.jsx)(ne.Z,{children:i.canMaximumCountPerGameBeIncreased?(0,k.jsx)(c.Trans,{id:"Upgrade to GDevelop Premium to get more leaderboards, storage, and one-click packagings!"}):(0,k.jsx)(c.Trans,{id:"To keep using GDevelop leaderboards, consider deleting old, unused leaderboards."})})]})})})})}):null},$e=n(20914),et=n(58978),tt=n(91),nt=["gameId"],rt=function(e){var t=e.children;return(0,k.jsx)(N.sg,{expand:!0,justifyContent:"center",alignItems:"center",children:(0,k.jsx)(N.x1,{children:t})})},it={leftColumn:{display:"flex",flexDirection:"column",flex:1,paddingRight:5},rightColumn:{display:"flex",flexDirection:"column",flex:2},leaderboardConfigurationPaper:{padding:5,margin:5},leaderboardNameText:(0,s.Z)((0,s.Z)({},re.t),{},{width:150}),leaderboardNameTextField:{width:125,fontSize:14}},at=function(e){return{action:e.name?"leaderboardNameUpdate":e.sort?"leaderboardSortUpdate":e.visibility?"leaderboardVisibilityUpdate":e.primary?"leaderboardPrimaryUpdate":e.customizationSettings?"leaderboardAppearanceUpdate":"leaderboardPlayerUnicityDisplayChoiceUpdate",message:e.name?(0,k.jsx)(c.Trans,{id:"An error occurred when updating the name of the leaderboard, please close the dialog, come back and try again."}):e.sort?(0,k.jsx)(c.Trans,{id:"An error occurred when updating the sort direction of the leaderboard, please close the dialog, come back and try again."}):e.visibility?(0,k.jsx)(c.Trans,{id:"An error occurred when updating the visibility of the leaderboard, please close the dialog, come back and try again."}):e.primary?(0,k.jsx)(c.Trans,{id:"An error occurred when setting the leaderboard as default, please close the dialog, come back and try again."}):e.customizationSettings?(0,k.jsx)(c.Trans,{id:"An error occurred when updating the appearance of the leaderboard, please close the dialog, come back and try again."}):(0,k.jsx)(c.Trans,{id:"An error occurred when updating the display choice of the leaderboard, please close the dialog, come back and try again."})}},ot=function(e){if(void 0!==e.extremeAllowedScore){var t=e.customizationSettings?le(e.extremeAllowedScore,e.customizationSettings.scoreFormatting):e.extremeAllowedScore;return"ASC"===e.sort?(0,k.jsx)(c.Trans,{id:"Lower is better (min: {formattedScore})",values:{formattedScore:t}}):(0,k.jsx)(c.Trans,{id:"Higher is better (max: {formattedScore})",values:{formattedScore:t}})}return"ASC"===e.sort?(0,k.jsx)(c.Trans,{id:"Lower is better"}):(0,k.jsx)(c.Trans,{id:"Higher is better"})},st=function(e){var t=e.onLoading,n=e.project,r=e.leaderboardIdToSelectAtOpening,Z=(0,Y.k)(),X=(0,ge.UQ)().isMobile,K=l.useState(!1),Q=(0,o.Z)(K,2),$=Q[0],ee=Q[1],te=(0,je.Z)(),re=te.showConfirmation,ie=te.showDeleteConfirmation,ae=l.useState(!1),oe=(0,o.Z)(ae,2),se=oe[0],le=oe[1],ce=l.useContext(ve.ZP),ue=ce.limits,de=l.useState(!1),pe=(0,o.Z)(de,2),xe=pe[0],be=pe[1],ye=l.useState(!1),Ze=(0,o.Z)(ye,2),ke=Ze[0],we=Ze[1],Te=l.useState(!1),Pe=(0,o.Z)(Te,2),Ee=Pe[0],Me=Pe[1],Le=l.useState(""),Ae=(0,o.Z)(Le,2),Oe=Ae[0],Re=Ae[1],Fe=l.useState(null),De=(0,o.Z)(Fe,2),Ne=De[0],_e=De[1],Be=l.useRef(null),Ue=l.useState(null),Ve=(0,o.Z)(Ue,2),He=Ve[0],We=Ve[1],Ge=l.useState(!1),Ye=(0,o.Z)(Ge,2),qe=Ye[0],Xe=Ye[1],nt=l.useContext(J.Z),st=nt.leaderboards,lt=nt.listLeaderboards,ct=nt.currentLeaderboard,ut=nt.createLeaderboard,dt=nt.selectLeaderboard,pt=nt.updateLeaderboard,ft=nt.resetLeaderboard,ht=nt.deleteLeaderboard,gt=nt.deleteLeaderboardEntry,mt=nt.displayOnlyBestEntry,xt=nt.setDisplayOnlyBestEntry,vt=nt.fetchLeaderboardEntries,bt=nt.browsing,Ct=bt.entries,jt=bt.goToNextPage,yt=bt.goToPreviousPage,Zt=bt.goToFirstPage,kt=l.useCallback((function(e){Me(e),t(e)}),[t]),wt=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_e(null),void 0===n.name||0!==n.name.length){e.next=4;break}return _e(t._({id:"Please enter a name that is at least one character long and 50 at most."})),e.abrupt("return");case 4:return kt(!0),We(null),e.prev=6,e.next=9,pt(n);case 9:n.name&&we(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.error("An error occurred when updating leaderboard",e.t0),We(at(n));case 16:return e.prev=16,kt(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[6,12,16,19]])})));return function(t,n){return e.apply(this,arguments)}}(),Tt=l.useCallback((function(){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Me(!0),We(null),e.prev=2,e.next=5,lt();case 5:e.next=15;break;case 7:if(e.prev=7,e.t0=e.catch(2),!(t=(0,tt.T)(e.t0))||404!==t.status){e.next=13;break}return Xe(!0),e.abrupt("return");case 13:console.error("An error occurred when fetching leaderboards",e.t0),We({action:"leaderboardsFetching",message:(0,k.jsx)(c.Trans,{id:"An error occurred when fetching the leaderboards, please close the dialog and reopen it."})});case 15:return e.prev=15,Me(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,7,15,18]])})));return function(){return e.apply(this,arguments)}}();e()}),[lt]),St=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kt(!0),We(null),e.prev=2,e.next=5,vt();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("An error occurred when fetching leaderboard entries",e.t0),We({action:"entriesFetching",message:(0,k.jsx)(c.Trans,{id:"An error occurred when fetching the entries of the leaderboard, please try again."})});case 11:return e.prev=11,kt(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,7,11,14]])})));return function(){return e.apply(this,arguments)}}(),Pt=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kt(!0),We(null),e.prev=2,!ue||!st){e.next=7;break}if(!Ke(ce,st)){e.next=7;break}return le(!0),e.abrupt("return");case 7:return e.next=9,ut({name:"New leaderboard",sort:"ASC"});case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("An error occurred when creating leaderboard",e.t0),We({action:"leaderboardCreation",message:(0,k.jsx)(c.Trans,{id:"An error occurred when creating a new leaderboard, please close the dialog, come back and try again."})});case 15:return e.prev=15,kt(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])})));return function(){return e.apply(this,arguments)}}(),It=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ct){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,re({title:{id:"Reset leaderboard {0}",values:{0:ct.name}},message:{id:"All current entries will be deleted, are you sure you want to reset this leaderboard? This can't be undone."},confirmButtonLabel:{id:"Reset leaderboard"}});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return kt(!0),We(null),e.prev=9,e.next=12,ft();case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("An error occurred when resetting leaderboard",e.t0),n=(0,tt.T)(e.t0),We({action:"leaderboardReset",message:n&&409===n.status?(0,k.jsx)(c.Trans,{id:"This leaderboard is already resetting, please wait a bit, close the dialog, come back and try again."}):(0,k.jsx)(c.Trans,{id:"An error occurred when resetting the leaderboard, please close the dialog, come back and try again."})});case 19:return e.prev=19,kt(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[9,14,19,22]])})));return function(t){return e.apply(this,arguments)}}(),Et=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ct){e.next=2;break}return e.abrupt("return");case 2:return n=t._({id:"delete"}),e.next=5,ie({title:{id:"Permanently delete the leaderboard?"},message:{id:"All the entries of {0} will be deleted too. This can't be undone.",values:{0:ct.name}},fieldMessage:{id:'To confirm, type "{translatedConfirmText}"',values:{translatedConfirmText:n}},confirmText:n,confirmButtonLabel:{id:"Delete Leaderboard"}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return kt(!0),We(null),e.prev=10,e.next=13,ht();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(10),console.error("An error occurred when deleting leaderboard",e.t0),We({action:"leaderboardDeletion",message:(0,k.jsx)(c.Trans,{id:"An error occurred when deleting the leaderboard, please close the dialog, come back and try again."})});case 19:return e.prev=19,kt(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[10,15,19,22]])})));return function(t){return e.apply(this,arguments)}}(),Mt=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ct){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,re({title:{id:"Delete score {0} from {1}",values:{0:n.score,1:n.playerName}},message:{id:"Are you sure you want to delete this entry? This can't be undone."},confirmButtonLabel:{id:"Delete Entry"}});case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return kt(!0),We(null),e.prev=9,e.next=12,gt(n.id);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("An error occurred when deleting entry",e.t0),We({action:"entryDeletion",message:(0,k.jsx)(c.Trans,{id:"An error occurred when deleting the entry, please try again."}),itemId:n.id});case 18:return e.prev=18,kt(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[9,14,18,21]])})));return function(t,n){return e.apply(this,arguments)}}();l.useEffect((function(){ke&&Be.current&&Be.current.focus()}),[ke]),l.useEffect((function(){null===st&&Tt()}),[st,Tt]),l.useEffect((function(){ct&&St()}),[]),l.useEffect((function(){r&&dt(r)}),[r,dt]);var Lt=l.useCallback((function(){ct&&navigator.clipboard.writeText(ct.id)}),[ct]);if(!Z)return(0,k.jsx)(rt,{children:(0,k.jsx)(B.Z,{children:(0,k.jsx)(c.Trans,{id:"An internet connection is required to administrate your game's leaderboards."})})});if(qe)return(0,k.jsx)(rt,{children:(0,k.jsx)(Se,{project:n,onGameRegistered:function(){Xe(!1),Tt()}})});if(He&&"leaderboardCreation"===He.action)return(0,k.jsx)(rt,{children:(0,k.jsx)(U.Z,{kind:"error",children:He.message})});if(He&&"leaderboardsFetching"===He.action)return(0,k.jsx)(rt,{children:(0,k.jsx)(B.Z,{onRetry:Tt,children:He.message})});if(null===st)return Ee?(0,k.jsx)(F.Z,{}):(0,k.jsx)(rt,{children:(0,k.jsx)(B.Z,{onRetry:Tt,children:(0,k.jsx)(c.Trans,{id:"An error occurred when retrieving leaderboards, please try again later."})})});if(st&&0===st.length)return(0,k.jsx)(N.x1,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:(0,k.jsx)(D.$,{title:(0,k.jsx)(c.Trans,{id:"Create your game's first leaderboard"}),description:(0,k.jsx)(c.Trans,{id:"Leaderboards help retain your players"}),actionLabel:(0,k.jsx)(c.Trans,{id:"Create a leaderboard"}),onAction:function(){Pt()},actionButtonId:"add-new-leaderboard-button",isLoading:Ee})});var At=function(e,t){return[{key:"name",avatar:(0,k.jsx)(T.Z,{}),text:ke?(0,k.jsxs)(N.x1,{alignItems:"center",expand:!0,noMargin:!0,children:[(0,k.jsx)(H.ZP,{id:"edit-name-field",ref:Be,margin:"none",style:it.leaderboardNameTextField,maxLength:50,value:Oe,errorText:Ne,onChange:function(e,t){return Re(t)},onKeyPress:function(t){(0,me.ph)(t)&&!Ee&&wt(e,{name:Oe})},disabled:Ee}),!Ee&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.LZ,{}),(0,k.jsx)(_.Z,{tooltip:{id:"Cancel"},style:{padding:0},onClick:function(){we(!1)},children:(0,k.jsx)(j.Z,{})})]})]}):(0,k.jsx)(x.ZP,{title:t.name,children:(0,k.jsx)(ne.Z,{size:"body2",style:it.leaderboardNameText,children:t.name})}),secondaryText:He&&"leaderboardNameUpdate"===He.action?(0,k.jsx)(ne.Z,{color:"error",size:"body2",children:He.message}):null,secondaryAction:(0,k.jsx)(_.Z,{onClick:function(){ke?wt(e,{name:Oe}):(Re(t.name),we(!0))},tooltip:ke?{id:"Save"}:{id:"Rename"},disabled:Ee,edge:"end",id:ke?"save-name-button":"edit-name-button",children:ke?Ee?(0,k.jsx)(W.Z,{size:20}):(0,k.jsx)(C.Z,{}):(0,k.jsx)(y.Z,{})})},{key:"id",avatar:(0,k.jsx)(S,{}),text:(0,k.jsx)(x.ZP,{title:t.id,children:(0,k.jsx)(ne.Z,{size:"body2",children:(0,q.GA)(t.id)})}),secondaryText:null,secondaryAction:(0,k.jsx)(_.Z,{onClick:Lt,tooltip:{id:"Copy"},edge:"end",children:(0,k.jsx)(R.Z,{})})},{key:"startDatetime",avatar:(0,k.jsx)(P,{}),text:t.resetLaunchedAt?(0,k.jsx)(ne.Z,{size:"body2",children:(0,k.jsx)(c.Trans,{id:"Reset requested the {0} . Please wait a few minutes...",values:{0:e.date(t.resetLaunchedAt,{dateStyle:"short",timeStyle:"short"})}})}):(0,k.jsx)(x.ZP,{title:e._({id:"Date from which entries are taken into account: {0}",values:{0:e.date(t.startDatetime,{dateStyle:"short",timeStyle:"short"})}}),children:(0,k.jsx)(ne.Z,{size:"body2",children:e.date(t.startDatetime)})}),secondaryText:He&&"leaderboardReset"===He.action?(0,k.jsx)(ne.Z,{color:"error",size:"body2",children:He.message}):null,secondaryAction:(0,k.jsx)(_.Z,{onClick:function(){return It(e)},tooltip:{id:"Reset leaderboard"},edge:"end",disabled:Ee||ke||!!t.resetLaunchedAt,children:(0,k.jsx)(M.Z,{})})},{key:"sort",avatar:(0,k.jsx)(I,{}),text:(0,k.jsx)(ne.Z,{size:"body2",children:ot(t)}),secondaryText:He&&"leaderboardSortUpdate"===He.action?(0,k.jsx)(ne.Z,{color:"error",size:"body2",children:He.message}):null,secondaryAction:(0,k.jsx)(_.Z,{onClick:function(){return be(!0)},tooltip:{id:"Edit"},edge:"end",disabled:Ee||ke,children:(0,k.jsx)(y.Z,{})})},{key:"visibility",avatar:"HIDDEN"===t.visibility?(0,k.jsx)(O.Z,{}):(0,k.jsx)(A.Z,{}),text:(0,k.jsx)(x.ZP,{title:e._("HIDDEN"===t.visibility?{id:"Anyone with the link can see it, but it is not listed in your game's leaderboards."}:{id:"Anyone can access it."}),children:(0,k.jsx)(ne.Z,{size:"body2",children:"HIDDEN"===t.visibility?(0,k.jsx)(c.Trans,{id:"Not visible"}):(0,k.jsx)(c.Trans,{id:"Public"})})}),secondaryText:He&&"leaderboardVisibilityUpdate"===He.action?(0,k.jsx)(ne.Z,{color:"error",size:"body2",children:He.message}):null,secondaryAction:(0,k.jsx)(_.Z,{onClick:(0,a.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,wt(e,{visibility:"HIDDEN"===t.visibility?"PUBLIC":"HIDDEN"});case 2:case"end":return n.stop()}}),n)}))),tooltip:"HIDDEN"===t.visibility?{id:"Make the leaderboard public"}:{id:"Hide the leaderboard"},edge:"end",disabled:Ee||ke,children:(0,k.jsx)(et.Z,{})})},{key:"options",avatar:(0,k.jsx)(T.Z,{}),text:(0,k.jsx)(ne.Z,{size:"body2",children:(0,k.jsx)(c.Trans,{id:"Configuration"})}),secondaryText:null,secondaryAction:(0,k.jsx)(_.Z,{onClick:function(){return be(!0)},tooltip:{id:"Edit"},edge:"end",disabled:Ee||ke,children:(0,k.jsx)(w,{})})},{key:"appearance",avatar:(0,k.jsx)(b.Z,{}),text:(0,k.jsx)(ne.Z,{size:"body2",children:(0,k.jsx)(c.Trans,{id:"Appearance"})}),secondaryText:He&&"leaderboardAppearanceUpdate"===He.action?(0,k.jsx)(ne.Z,{color:"error",size:"body2",children:He.message}):null,secondaryAction:(0,k.jsx)(_.Z,{onClick:function(){return ee(!0)},tooltip:{id:"Edit"},edge:"end",disabled:Ee||ke,children:(0,k.jsx)(w,{})})},{key:"playerUnicityDisplayChoice",avatar:(0,k.jsx)(E,{}),text:(0,k.jsxs)(z.Z,{fullWidth:!0,margin:"none",value:t.playerUnicityDisplayChoice,onChange:function(t,n,r){wt(e,{playerUnicityDisplayChoice:r})},disabled:Ee||ke,inputStyle:{fontSize:14},helperMarkdownText:"FREE"===t.playerUnicityDisplayChoice?e._({id:"Users can choose to see only players' best entries or not."}):"PREFER_UNIQUE"===t.playerUnicityDisplayChoice?e._({id:"Only player's best entries are displayed."}):e._({id:"All entries are displayed."}),children:[(0,k.jsx)(G.Z,{value:"FREE",label:{id:"Let the user select"}},"free"),(0,k.jsx)(G.Z,{value:"PREFER_UNIQUE",label:{id:"Only best entry"}},"prefer-unique"),(0,k.jsx)(G.Z,{value:"PREFER_NON_UNIQUE",label:{id:"All entries"}},"prefer-non-unique")]}),secondaryText:He&&"leaderboardPlayerUnicityDisplayChoiceUpdate"===He.action?(0,k.jsx)(ne.Z,{color:"error",size:"body2",children:He.message}):null,secondaryAction:null}]};return(0,k.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(N.sg,{noMargin:!0,expand:!0,children:[se&&(0,k.jsx)(Qe,{}),(0,k.jsxs)(he.ep,{noMargin:!0,expand:!0,noColumnMargin:!0,id:"leaderboard-administration-panel",children:[(0,k.jsx)("div",{style:it.leftColumn,children:(0,k.jsx)($e.Z,{elevation:3,style:it.leaderboardConfigurationPaper,background:"light",children:(0,k.jsxs)(N.sg,{children:[(0,k.jsxs)(N.x1,{noMargin:!0,children:[ct&&st?(0,k.jsx)(z.Z,{fullWidth:!0,floatingLabelText:(0,k.jsx)(c.Trans,{id:"Leaderboard name"}),value:ct.id,onChange:function(e,t,n){dt(n)},children:st.map((function(e){return(0,k.jsx)(G.Z,{value:e.id,label:e.primary?{id:"{0} (default)",values:{0:e.name}}:e.name,shouldNotTranslate:!e.primary},e.id)}))}):null,(0,k.jsx)(_.Z,{onClick:Pt,disabled:ke||Ee,children:(0,k.jsx)(v.Z,{})})]}),ct?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.Z,{children:At(t,ct).map((function(e,t){return(0,k.jsxs)(l.Fragment,{children:[t>0?(0,k.jsx)(d.Z,{component:"li"},"divider-".concat(e.key)):null,(0,k.jsxs)(f.Z,{disableGutters:!0,children:[(0,k.jsx)(h.Z,{children:(0,k.jsx)(u.Z,{children:e.avatar})}),(0,k.jsx)(m.Z,{disableTypography:!0,secondary:e.secondaryText,children:e.text}),e.secondaryAction?(0,k.jsx)(g.Z,{children:e.secondaryAction}):null]},e.key)]},"fragment-".concat(e.key))}))}),(0,k.jsxs)(N.x1,{justifyContent:"space-between",children:[(0,k.jsx)(Ie.Z,{leftIcon:(0,k.jsx)(L.Z,{}),label:(0,k.jsx)(c.Trans,{id:"Delete"}),disabled:Ee||ke,onClick:function(){return Et(t)}}),(0,k.jsx)(V.Z,{label:ct.primary?(0,k.jsx)(c.Trans,{id:"Default"}):(0,k.jsx)(c.Trans,{id:"Set as default"}),disabled:Ee||ke||ct.primary,onClick:function(){return wt(t,{primary:!0})}})]}),!He||"leaderboardDeletion"!==He.action&&"leaderboardPrimaryUpdate"!==He.action?null:(0,k.jsx)(B.Z,{children:He.message})]}):null]})})}),(0,k.jsxs)("div",{style:(0,s.Z)((0,s.Z)({},it.rightColumn),{},{paddingLeft:X?0:20}),children:[(0,k.jsxs)(N.x1,{alignItems:"center",justifyContent:"flex-end",children:[(0,k.jsx)(Ce.Z,{labelPosition:"left",toggled:mt,onToggle:function(e,t){return xt(t)},label:(0,k.jsx)(x.ZP,{title:t._({id:"When checked, will only display the best score of each player (only for the display below)."}),children:(0,k.jsx)(ne.Z,{size:"body2",children:(0,k.jsx)(c.Trans,{id:"Player best entry"})})})}),(0,k.jsx)(N.hS,{}),(0,k.jsx)(d.Z,{orientation:"vertical"}),(0,k.jsx)(N.LZ,{}),(0,k.jsx)(_.Z,{onClick:St,disabled:Ee||ke,tooltip:{id:"Refresh"},size:"small",children:(0,k.jsx)(M.Z,{})}),(0,k.jsx)(N.LZ,{})]}),He&&"entriesFetching"===He.action?(0,k.jsx)(rt,{children:(0,k.jsx)(B.Z,{onRetry:St,children:He.message})}):(0,k.jsx)(fe,{entries:Ct,customizationSettings:ct?ct.customizationSettings:null,onDeleteEntry:function(e){return Mt(t,e)},isLoading:Ee||ke,navigation:{goToNextPage:jt,goToPreviousPage:yt,goToFirstPage:Zt},erroredEntry:He&&"entryDeletion"===He.action&&He.itemId?{entryId:He.itemId,message:He.message}:void 0})]})]})]}),$?(0,k.jsx)(ze,{open:!0,leaderboardCustomizationSettings:ct?ct.customizationSettings:void 0,onClose:function(){return ee(!1)},onSave:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wt(t,{customizationSettings:n});case 3:return e.prev=3,ee(!1),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})));return function(t){return e.apply(this,arguments)}}()}):null,xe&&ct?(0,k.jsx)(Je,{open:!0,onClose:function(){return be(!1)},onSave:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wt(t,(0,s.Z)({},n));case 3:return e.prev=3,be(!1),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})));return function(t){return e.apply(this,arguments)}}(),leaderboard:ct}):null]})}})},lt=function(e){var t=e.gameId,n=(0,r.Z)(e,nt);return(0,k.jsx)(X.Z,{gameId:t,children:(0,k.jsx)(st,(0,s.Z)({},n))})}},62463:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(93433),i=n(29439),a=n(1413),o=n(28381),s=n(86278),l=n(61325),c=n(40243),u=n(2066),d=n(84482),p=n(92078),f=n(36600),h=n(6996),g=n(30609),m=n(10888),x=n(78118),v=n(29343),b=o.memo((function(e){return(0,v.jsxs)(x.Z,(0,a.Z)((0,a.Z)({},e),{},{width:"24",height:"26",viewBox:"0 0 24 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,v.jsxs)("g",{clipPath:"url(#clip0_2400_11005)",children:[(0,v.jsxs)("g",{opacity:"0.7",children:[(0,v.jsx)("ellipse",{cx:"6.36085",cy:"7.0493",rx:"4.36085",ry:"4.13133",fill:"#CE8C0C"}),(0,v.jsx)("circle",{cx:"6.36085",cy:"6.36085",r:"4.36085",fill:"url(#paint0_linear_2400_11005)"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.36059 9.54636C8.11832 9.54636 9.54324 8.12143 9.54324 6.3637C9.54324 4.60597 8.11832 3.18105 6.36059 3.18105C4.60286 3.18105 3.17793 4.60597 3.17793 6.3637C3.17793 8.12143 4.60286 9.54636 6.36059 9.54636ZM6.36059 10.036C8.38874 10.036 10.0329 8.39185 10.0329 6.3637C10.0329 4.33555 8.38874 2.69141 6.36059 2.69141C4.33244 2.69141 2.68829 4.33555 2.68829 6.3637C2.68829 8.39185 4.33244 10.036 6.36059 10.036Z",fill:"#E2AB1A"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.54356 6.3637C9.54356 4.16032 7.68723 3.31947 7.21777 3.05864C6.74831 2.7978 6.3609 2.69141 6.3609 2.69141C8.38905 2.69141 10.0332 4.33555 10.0332 6.3637C10.0332 8.39185 8.38905 10.036 6.3609 10.036C6.3609 10.036 6.48343 10.034 7.21777 9.79118C7.95211 9.54836 9.54356 8.12143 9.54356 6.3637Z",fill:"#D89C00"}),(0,v.jsx)("path",{d:"M6.19102 7.97107C5.7587 7.97107 5.3425 7.85886 4.97483 7.61452C4.71855 7.44429 4.42194 7.05989 4.42194 6.40821C4.42194 5.19921 5.06526 4.75797 6.35809 4.75797L8.21572 4.75797C8.21572 4.75797 8.27295 4.75516 8.28917 4.77344C8.30959 4.79645 8.28917 4.85086 8.28917 4.85086L8.11436 5.36559C8.11436 5.36559 8.09121 5.41346 8.06719 5.42907C8.03907 5.44733 7.99336 5.44658 7.99336 5.44658H6.53546C5.68217 5.44658 5.1748 5.51045 5.1748 6.40821C5.1748 6.70475 5.26191 6.91579 5.44121 7.0533C5.74423 7.28572 6.33321 7.29561 6.6931 7.26231C6.6931 7.26231 6.84076 6.8065 6.86508 6.7325C6.89356 6.64579 6.88109 6.6251 6.79223 6.6251C6.66388 6.6251 6.43314 6.6251 6.18825 6.6251C6.01663 6.6251 5.84802 6.54219 5.84802 6.34303C5.84802 6.15069 6.00489 6.03905 6.21993 6.03905C6.59226 6.03905 7.3591 6.03905 7.50262 6.03905C7.69079 6.03905 7.8828 6.06495 7.78483 6.3509L7.266 7.86138C7.266 7.86138 6.84216 7.97107 6.19102 7.97107Z",fill:"#E2A60B"})]}),(0,v.jsxs)("g",{opacity:"0.5",children:[(0,v.jsx)("ellipse",{cx:"20.6695",cy:"18.0814",rx:"3.48803",ry:"3.30445",transform:"rotate(-17.7813 20.6695 18.0814)",fill:"#CE8C0C"}),(0,v.jsx)("circle",{cx:"20.499",cy:"17.557",r:"3.48803",transform:"rotate(-17.7813 20.499 17.557)",fill:"url(#paint1_linear_2400_11005)"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.277 19.9842C22.6157 19.5548 23.353 18.1215 22.9236 16.7827C22.4943 15.444 21.0609 14.7067 19.7222 15.1361C18.3834 15.5654 17.6462 16.9988 18.0755 18.3375C18.5049 19.6763 19.9382 20.4135 21.277 19.9842ZM21.3966 20.3571C22.9413 19.8617 23.792 18.2079 23.2966 16.6631C22.8012 15.1184 21.1473 14.2678 19.6026 14.7632C18.0579 15.2586 17.2072 16.9124 17.7026 18.4571C18.198 20.0019 19.8519 20.8525 21.3966 20.3571Z",fill:"#E2AB1A"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.9242 16.7852C22.386 15.107 20.7667 14.92 20.3455 14.836C19.9242 14.752 19.6031 14.7656 19.6031 14.7656C21.1479 14.2702 22.8017 15.1209 23.2971 16.6656C23.7925 18.2103 22.9419 19.8642 21.3972 20.3596C21.3972 20.3596 21.49 20.3281 21.99 19.9638C22.49 19.5995 23.3535 18.124 22.9242 16.7852Z",fill:"#D89C00"}),(0,v.jsx)("path",{d:"M20.7648 18.8238C20.4355 18.9294 20.0911 18.9456 19.7514 18.8493C19.5146 18.7823 19.1948 18.562 19.0356 18.0656C18.7403 17.1448 19.1225 16.6516 20.1072 16.3358L21.5221 15.882C21.5221 15.882 21.565 15.8659 21.5818 15.8759C21.603 15.8884 21.6007 15.9348 21.6007 15.9348L21.5933 16.3696C21.5933 16.3696 21.5873 16.4117 21.5728 16.4295C21.5559 16.4502 21.5209 16.4608 21.5209 16.4608L20.4105 16.8169C19.7606 17.0254 19.3898 17.1979 19.609 17.8817C19.6815 18.1076 19.7994 18.247 19.9695 18.308C20.2571 18.411 20.7081 18.2746 20.9741 18.1614C20.9741 18.1614 20.9752 17.7781 20.9756 17.7158C20.9762 17.6428 20.9616 17.6301 20.8939 17.6518C20.7962 17.6832 20.6204 17.7395 20.4339 17.7994C20.3032 17.8413 20.1545 17.8193 20.1059 17.6676C20.0589 17.5211 20.1511 17.3978 20.3149 17.3453C20.5985 17.2543 21.1825 17.067 21.2918 17.0319C21.4352 16.986 21.5877 16.9588 21.583 17.2005L21.5568 18.4777C21.5568 18.4777 21.2607 18.6648 20.7648 18.8238Z",fill:"#E2A60B"})]}),(0,v.jsxs)("g",{opacity:"0.6",children:[(0,v.jsx)("ellipse",{cx:"18.5947",cy:"5.97643",rx:"2.32918",ry:"2.20659",transform:"rotate(7.39855 18.5947 5.97643)",fill:"#CE8C0C"}),(0,v.jsx)("circle",{cx:"18.6407",cy:"5.60971",r:"2.32918",transform:"rotate(7.39855 18.6407 5.60971)",fill:"url(#paint2_linear_2400_11005)"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.4202 7.29746C19.3512 7.41835 20.204 6.76162 20.3248 5.83061C20.4457 4.89961 19.789 4.04687 18.858 3.92598C17.927 3.80509 17.0743 4.46181 16.9534 5.39282C16.8325 6.32383 17.4892 7.17656 18.4202 7.29746ZM18.3865 7.5568C19.4608 7.69629 20.4447 6.93853 20.5842 5.86429C20.7237 4.79005 19.9659 3.80613 18.8917 3.66663C17.8174 3.52714 16.8335 4.28491 16.694 5.35914C16.5545 6.43338 17.3123 7.41731 18.3865 7.5568Z",fill:"#E2AB1A"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.3253 5.83195C20.4768 4.6649 19.5514 4.09185 19.3207 3.92141C19.09 3.75097 18.8921 3.66797 18.8921 3.66797C19.9663 3.80746 20.7241 4.79138 20.5846 5.86562C20.4451 6.93986 19.4612 7.69763 18.3869 7.55813C18.3869 7.55813 18.452 7.5655 18.8576 7.48739C19.2633 7.40929 20.2044 6.76295 20.3253 5.83195Z",fill:"#D89C00"}),(0,v.jsx)("path",{d:"M18.4411 6.44862C18.2121 6.41889 17.9993 6.33083 17.8214 6.17612C17.6974 6.06833 17.5667 5.84433 17.6115 5.49916C17.6947 4.85879 18.0658 4.66933 18.7505 4.75825L19.7345 4.88601C19.7345 4.88601 19.765 4.88846 19.7723 4.89926C19.7815 4.91285 19.767 4.94026 19.767 4.94026L19.639 5.20088C19.639 5.20088 19.6234 5.22464 19.6096 5.23125C19.5935 5.23899 19.5693 5.23545 19.5693 5.23545L18.7971 5.13518C18.3452 5.07649 18.072 5.07543 18.0103 5.55094C17.9899 5.708 18.0215 5.82577 18.107 5.91094C18.2515 6.05489 18.5628 6.10063 18.7557 6.10775C18.7557 6.10775 18.8653 5.87648 18.8833 5.83896C18.9043 5.79499 18.8991 5.78317 18.8521 5.77706C18.7841 5.76823 18.6619 5.75236 18.5322 5.73552C18.4413 5.72372 18.3577 5.6682 18.3714 5.56271C18.3846 5.46084 18.4753 5.4125 18.5892 5.42729C18.7865 5.4529 19.1926 5.50564 19.2686 5.51551C19.3683 5.52845 19.4682 5.55538 19.3967 5.70009L19.018 6.46446C19.018 6.46446 18.7859 6.4934 18.4411 6.44862Z",fill:"#E2A60B"})]}),(0,v.jsx)("ellipse",{cx:"10.329",cy:"16.505",rx:"7.45268",ry:"7.06043",transform:"rotate(18.7719 10.329 16.505)",fill:"#CE8C0C"}),(0,v.jsx)("circle",{cx:"10.7062",cy:"15.392",r:"7.45268",transform:"rotate(18.7719 10.7062 15.392)",fill:"url(#paint3_linear_2400_11005)"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.95983 20.5373C11.804 21.504 14.8933 19.982 15.86 17.1378C16.8267 14.2937 15.3046 11.2044 12.4605 10.2377C9.61631 9.27099 6.52701 10.793 5.56033 13.6372C4.59365 16.4813 6.11566 19.5706 8.95983 20.5373ZM8.69054 21.3296C11.9723 22.445 15.5369 20.6888 16.6523 17.4071C17.7677 14.1254 16.0115 10.5608 12.7298 9.44539C9.44803 8.32999 5.88345 10.0862 4.76805 13.3679C3.65265 16.6496 5.40881 20.2142 8.69054 21.3296Z",fill:"#E2AB1A"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.86 17.1456C17.0718 13.5803 14.5305 11.1988 13.9143 10.5186C13.2981 9.83834 12.7298 9.45312 12.7298 9.45312C16.0115 10.5685 17.7677 14.1331 16.6523 17.4148C15.5369 20.6966 11.9723 22.4527 8.69058 21.3373C8.69058 21.3373 8.88995 21.4015 10.2117 21.4124C11.5335 21.4234 14.8933 19.9897 15.86 17.1456Z",fill:"#D89C00"}),(0,v.jsx)("path",{d:"M9.55229 17.8988C8.85275 17.6611 8.24102 17.2506 7.78047 16.653C7.4594 16.2366 7.19086 15.4515 7.54926 14.3971C8.21416 12.4408 9.49779 12.0806 11.5897 12.7916L14.5955 13.8132C14.5955 13.8132 14.6897 13.8402 14.7058 13.8787C14.7262 13.9271 14.6633 14.0039 14.6633 14.0039L14.0973 14.7407C14.0973 14.7407 14.0336 14.8054 13.9861 14.8174C13.9306 14.8315 13.857 14.8052 13.857 14.8052L11.498 14.0034C10.1173 13.5341 9.26119 13.3584 8.76746 14.8111C8.60437 15.2909 8.62926 15.6803 8.84376 16.0014C9.20625 16.5442 10.1538 16.8841 10.7545 17.0281C10.7545 17.0281 11.2441 16.3718 11.3241 16.2654C11.4179 16.1408 11.4091 16.1004 11.2653 16.0516C11.0576 15.981 10.6843 15.8541 10.288 15.7194C10.0103 15.625 9.7831 15.3981 9.89263 15.0759C9.99841 14.7647 10.3136 14.6703 10.6616 14.7885C11.2641 14.9933 12.5049 15.415 12.7371 15.494C13.0416 15.5975 13.338 15.745 13.0223 16.1538L11.352 18.3125C11.352 18.3125 10.6059 18.2569 9.55229 17.8988Z",fill:"#E2A60B"})]}),(0,v.jsxs)("defs",{children:[(0,v.jsxs)("linearGradient",{id:"paint0_linear_2400_11005",x1:"6.36085",y1:"2",x2:"6.36085",y2:"10.7217",gradientUnits:"userSpaceOnUse",children:[(0,v.jsx)("stop",{stopColor:"#FEDC28"}),(0,v.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,v.jsxs)("linearGradient",{id:"paint1_linear_2400_11005",x1:"20.499",y1:"14.069",x2:"20.499",y2:"21.045",gradientUnits:"userSpaceOnUse",children:[(0,v.jsx)("stop",{stopColor:"#FEDC28"}),(0,v.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,v.jsxs)("linearGradient",{id:"paint2_linear_2400_11005",x1:"18.6407",y1:"3.28054",x2:"18.6407",y2:"7.93889",gradientUnits:"userSpaceOnUse",children:[(0,v.jsx)("stop",{stopColor:"#FEDC28"}),(0,v.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,v.jsxs)("linearGradient",{id:"paint3_linear_2400_11005",x1:"10.7062",y1:"7.93936",x2:"10.7062",y2:"22.8447",gradientUnits:"userSpaceOnUse",children:[(0,v.jsx)("stop",{stopColor:"#FEDC28"}),(0,v.jsx)("stop",{offset:"1",stopColor:"#F1C34B"})]}),(0,v.jsx)("clipPath",{id:"clip0_2400_11005",children:(0,v.jsx)("rect",{width:"24",height:"26",fill:"white"})})]})]}))})),C={widgetContainer:{maxWidth:1800},badgeContainer:{position:"relative",width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center"},badgeImage:{position:"absolute",inset:0,width:"100%",height:"100%",objectFit:"contain"},badgeCoinIcon:{width:16,height:16},badgeTextContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",zIndex:1,gap:4,color:"white"},itemPlaceholder:{display:"flex",flex:1}},j=function(){var e=o.useContext(g.ZP).navigateToRoute;return(0,v.jsxs)(l.pJ,{expand:!0,alignItems:"center",noMargin:!0,children:[(0,v.jsx)("div",{style:C.badgeContainer,children:(0,v.jsx)(b,{style:C.badgeImage})}),(0,v.jsx)(c.sg,{noMargin:!0,expand:!0,children:(0,v.jsx)(s.Z,{size:"body",noMargin:!0,color:"secondary",children:(0,v.jsx)(f.Trans,{id:"Give feedback on a game!"})})}),(0,v.jsx)(m.Z,{label:(0,v.jsx)(f.Trans,{id:"Play a game"}),leftIcon:(0,v.jsx)(d.Z,{style:C.badgeCoinIcon}),primary:!0,onClick:function(){e("play",{"playable-game-id":"random"})}})]})},y=[{id:"github-star",label:"Star GDevelop",linkUrl:"https://github.com/4ian/GDevelop",type:"badge"},{id:"tiktok-follow",label:(0,v.jsx)(f.Trans,{id:"Follow"}),linkUrl:"https://www.tiktok.com/@gdevelop",type:"badge"},{id:"twitter-follow",label:(0,v.jsx)(f.Trans,{id:"Follow"}),linkUrl:"https://x.com/GDevelopApp",type:"badge"},{id:"youtube-subscription",label:(0,v.jsx)(f.Trans,{id:"Subscribe"}),linkUrl:"https://youtube.com/GDevelopApp",type:"badge"}],Z=function(e,t){return e&&e.find((function(e){return e.id===t}))},k=function(e,t){return!!e&&e.some((function(e){return e.achievementId===t}))},w=function(e){var t=e.achievement,n=e.hasThisBadge,r=(e.buttonLabel,e.linkUrl),a=e.onOpenProfile,h=o.useState(!1),g=(0,i.Z)(h,2),x=g[0],j=g[1],y=o.useCallback((function(){x?a():(u.ZP.openExternalURL(r),j(!0))}),[x,r,a]);return(0,v.jsx)(f.I18n,{children:function(e){var r=e.i18n;return(0,v.jsxs)(l.pJ,{expand:!0,alignItems:"center",noMargin:!0,children:[(0,v.jsx)("div",{style:C.badgeContainer,children:n?(0,v.jsx)("img",{src:t&&t.iconUrl||"res/badges/empty-badge.svg",alt:"Empty badge",style:C.badgeImage}):(0,v.jsx)(b,{style:C.badgeImage})}),(0,v.jsx)(c.sg,{noMargin:!0,expand:!0,children:n?(0,v.jsx)(s.Z,{size:"body",noMargin:!0,children:(0,v.jsx)("b",{children:(0,v.jsx)(f.Trans,{id:"{0}",values:{0:t&&(0,p.a)(r,t.nameByLocale)||"-"}})})}):(0,v.jsx)(s.Z,{size:"body",noMargin:!0,color:"secondary",children:(0,v.jsx)(f.Trans,{id:"{0}",values:{0:t&&(0,p.a)(r,t.shortDescriptionByLocale)||"-"}})})}),(0,v.jsx)(m.Z,{leftIcon:n?null:(0,v.jsx)(d.Z,{style:C.badgeCoinIcon}),label:n?(0,v.jsx)(f.Trans,{id:"Owned"}):x?(0,v.jsx)(f.Trans,{id:"Claim credits"}):(0,v.jsx)(f.Trans,{id:"Earn {0}",values:{0:t?t.rewardValueInCredits:"credits"}}),onClick:y,disabled:n,primary:!0})]})}})},T=function(e){var t=e.achievements,n=e.badges,i=e.onOpenProfile,s=e.showRandomItem,c=e.showAllItems,u=(0,h.UQ)(),d=u.isMobile,p="xlarge"===u.windowSize,f=o.useMemo((function(){return function(e){return y.map((function(t){return(0,a.Z)((0,a.Z)({},t),{},{hasThisBadge:k(e,t.id)})}))}(n)}),[n]),g=o.useMemo((function(){return f.filter((function(e){return!e.hasThisBadge}))}),[f]),m=o.useMemo((function(){if(s||d&&!c){if(0===g.length)return"feedback";var e=g.length+1;return Math.floor(Math.random()*e)===e-1?"feedback":"badge"}return null}),[g,s,c,d]),x=o.useMemo((function(){if(m&&"badge"!==m)return[];if("badge"===m){if(0===g.length){var e=Math.floor(Math.random()*f.length);return[f[e]]}var t=Math.floor(Math.random()*g.length);return[g[t]]}return f}),[f,g,m]),b=o.useMemo((function(){return m&&"feedback"!==m?[]:[{id:"random-game-feedback",type:"feedback"}]}),[m]),T=o.useMemo((function(){return[].concat((0,r.Z)(x),(0,r.Z)(b))}),[x,b]),S=1===T.length,P=S?1:p?3:2,I=o.useMemo((function(){for(var e=[],t=0;t<T.length;t+=P)e.push(T.slice(t,t+P));return e}),[T,P]);return(0,v.jsx)("div",{style:C.widgetContainer,children:(0,v.jsx)(l.ak,{noMargin:!0,expand:!0,children:I.map((function(e,n){return(0,v.jsxs)(l.ep,{noMargin:!0,expand:S,children:[e.map((function(e){return"feedback"===e.type?(0,v.jsx)(j,{},e.id):"badge"===e.type?(0,v.jsx)(w,{achievement:Z(t,e.id),hasThisBadge:!!e.hasThisBadge,buttonLabel:e.label,linkUrl:e.linkUrl,onOpenProfile:i},e.id):null})).filter(Boolean),e.length<P&&!S&&Array.from({length:P-e.length},(function(e,t){return t})).map((function(e){return(0,v.jsx)("div",{style:C.itemPlaceholder},"filler-".concat(e))}))]},"item-line-".concat(n))}))})})}},74149:function(e,t,n){var r=n(50057),i=r("@electron/remote"),a=i?i.app:null,o=r("fs"),s=r("path"),l=r("process"),c=l&&/^darwin/.test(l.platform),u=function(e,t,n){return o.access(e,o.constants.R_OK,(function(r){r?n():t(e)}))};e.exports={findGDJS:function(){if(!s||!l||!o)return Promise.reject(new Error("Unsupported"));var e=a?a.getAppPath():l.cwd(),t=c?"../../../../":s.join("..",".."),n=s.join(e,t);return new Promise((function(t,r){var i=function(e){return t({gdjsRoot:e})},a=function(){return r(new Error("Could not find GDJS"))};u(s.join(n,"..","JsPlatform"),i,(function(){u(s.join(e,"..","GDJS"),i,(function(){var t=s.join(e,"..","..","app","resources","GDJS");u(t,i,a)}))}))}))}}},95644:function(e,t,n){"use strict";var r=n(3429);t.Z=function(e){var t=e.tutorialId;return(0,r.Z)(t).DismissableTutorialMessage}},4346:function(e,t,n){"use strict";var r=n(36600),i=n(28381),a=n(36262),o=n(38092),s=n(2066),l=n(60022),c=n(81730),u=n(60274),d=n(92078),p=n(29343);t.Z=function(e){var t=e.tutorial,n=i.useContext(a.ZP).showTutorialHint;return(0,p.jsx)(r.I18n,{children:function(e){var i=e.i18n;return(0,p.jsx)(o.Z,{kind:"info",children:(0,d.a)(i,t.titleByLocale),renderLeftIcon:function(){return(0,p.jsx)("img",{alt:"",style:{width:128,borderRadius:4,aspectRatio:"16 / 9"},src:(0,d.a)(i,t.thumbnailUrlByLocale)})},renderRightButton:function(){return(0,p.jsx)(l.Z,{icon:"video"===t.type?(0,p.jsx)(c.Z,{}):(0,p.jsx)(u.Z,{}),label:"video"===t.type?(0,p.jsx)(r.Trans,{id:"Watch tutorial"}):(0,p.jsx)(r.Trans,{id:"Read tutorial"}),onClick:function(){s.ZP.openExternalURL((0,d.a)(i,t.linkByLocale))}})},onHide:function(){n(t.id,!1)}})}})}},32515:function(e,t){"use strict";t.Z=function(e,t,n){if(!t)return null;if(e.values.hiddenTutorialHints[n])return null;var r=t.find((function(e){return e.id===n}));return r||(console.warn("Tutorial with id ".concat(n," not found")),null)}},44397:function(e,t,n){"use strict";n.d(t,{du:function(){return r},gF:function(){return i},zZ:function(){return a}});var r=function(){return{"PhysicsBehavior::PhysicsBehavior":{warning:{id:"A new physics engine (Physics Engine 2.0) is now available. You should prefer using it for new game. For existing games, note that the two behaviors are not compatible, so you should only use one of them with your objects."}}}},i=function(){return{"Video::VideoObject":[{kind:"warning",message:{id:"Most browsers will require the user to have interacted with your game before allowing any video to play. Make sure that the player click/touch the screen at the beginning of the game before starting any video."}},{kind:"warning",message:{id:"For a given video resource, only one video will be played in memory and displayed. If you put this object multiple times on the scene, all the instances will be displaying the exact same video (with the same timing and paused/played/stopped state)."}},{kind:"info",message:{id:"Video format supported can vary according to devices and browsers. For maximum compatibility, use H.264/mp4 file format (and AAC for audio)."}}],"BitmapText::BitmapTextObject":[{kind:"info",message:{id:"For a pixel type font, you must disable the Smooth checkbox related to your texture in the game resources to disable anti-aliasing."}},{kind:"info",message:{id:"The font size is stored directly inside the font. If you want to change it, export again your font using an external editor like bmFont. Click on the help button to learn more."}}],"TileMap::TileMap":[{kind:"info",message:{id:"The tilemap must be designed in a separated program, Tiled, that can be downloaded on mapeditor.org. Save your map as a JSON file, then select here the Atlas image that you used and the Tile map JSON file."}}],"TextInput::TextInputObject":[{kind:"warning",message:{id:"The text input will be always shown on top of all other objects in the game - this is a limitation that can't be changed. According to the platform/device or browser running the game, the appearance can also slightly change."}}]}},a=function(e){return 0===e.indexOf("PhysicsBehavior::")?{kind:"warning",message:{id:'This action is deprecated and should not be used anymore. Instead, use for all your objects the behavior called "Physics2" and the associated actions (in this case, all objects must be set up to use Physics2, you can\'t mix the behaviors).'}}:0===e.indexOf("TextEntryObject::")?{kind:"warning",message:{id:'This action is deprecated and should not be used anymore. Instead, use the "Text input" object.'}}:e.startsWith("BoundingBox")?{kind:"info",message:{id:"The bounding box is an imaginary rectangle surrounding the object collision mask. Even if the object X and Y positions are not changed, this rectangle can change if the object is rotated or if an animation is being played. Usually you should use actions and conditions related to the object position or center, but the bounding box can be useful to deal with the area of the object."}}:"PickedInstancesCount"===e?{kind:"info",message:{id:"If no previous condition or action used the specified object(s), the picked instances count will be 0."}}:"CompareTimer"===e?{kind:"info",message:{id:'To start a timer, don\'t forget to use the action "Start (or reset) a scene timer" in another event.'}}:"CompareObjectTimer"===e?{kind:"info",message:{id:'To start a timer, don\'t forget to use the action "Start (or reset) an object timer" in another event.'}}:"FixCamera"===e?{kind:"info",message:{id:'Please prefer using the new action "Enforce camera boundaries" which is more flexible.'}}:"BitmapText::Scale"===e?{kind:"info",message:{id:"A scale under 1 on a Bitmap text object can downgrade the quality text, prefer to remake a bitmap font smaller in the external bmFont editor."}}:"TextObject::Text::SetFontSize"===e?{kind:"warning",message:{id:"This action will create a new texture and re-render the text each time it is called, which is expensive and can reduce performance. Avoid changing the character size of text frequently."}}:"PlayMusicCanal"===e||"PlayMusic"===e?{kind:"warning",message:{id:"Musics will only be played if the user has interacted with the game before (by clicking/touching it or pressing a key on the keyboard). This is due to browser limitations. Make sure to have the user interact with the game before using this action."}}:"P2P::OnEvent"===e?{kind:"info",message:{id:"Read the wiki page for more info about the dataloss mode."},identifier:"p2p-dataloss"}:"PlatformBehavior::IsObjectOnGivenFloor"===e?{kind:"info",message:{id:"This condition may have unexpected results when the object is on different floors at the same time, due to the fact that the engine only considers the first floor the object comes into contact with."}}:"P2P::OverrideID"===e?{kind:"warning",message:{id:"Overriding the ID may have unwanted consequences, such as blocking the ability to connect to any peer. Do not use this feature unless you really know what you are doing."}}:0===e.indexOf("P2P::")?{kind:"warning",message:{id:"P2P is merely a peer-to-peer networking solution. It only handles the connection to another player, and the exchange of messages. Higher-level tasks, such as synchronizing the game state, are left to by implemented by you.  Use the THNK Framework if you seek an easy, performant and flexible higher-level solution."},identifier:"p2p-is-networking"}:"SystemInfo::IsMobile"===e?{kind:"warning",message:{id:'Note that the distinction between what is a mobile device and what is not is becoming blurry (with devices like iPad pro and other "desktop-class" tablets). If you use this for mobile controls, prefer to check if the device has touchscreen support.'}}:"AdvancedWindow::SetClosable"===e||"AdvancedWindow::EnableWindow"===e||"AdvancedWindow::Show"===e||"AdvancedWindow::SetFocusable"===e||"AdvancedWindow::Focus"===e?{kind:"warning",message:{id:"Be careful with this action, you may have problems exiting the preview if you don't add a way to toggle it back."}}:"GetArgumentAsBoolean"===e?{kind:"info",message:{id:'If the parameter is a string or a number, you probably want to use the expressions "GetArgumentAsString" or "GetArgumentAsNumber", along with the conditions "Compare two strings" or "Compare two numbers".'}}:"PrioritizeLoadingOfScene"===e?{kind:"info",message:{id:"For most games, the default automatic loading of resources will be fine. This action should only be used when trying to avoid loading screens from appearing between scenes."}}:null}},3429:function(e,t,n){"use strict";var r=n(28381),i=n(3550),a=n(36262),o=n(72291),s=n(32515),l=n(4346),c=n(29343);t.Z=function(e){var t=r.useContext(a.ZP),n=r.useContext(i.Z).currentlyRunningInAppTutorial,u=r.useContext(o.n).tutorials,d=(0,s.Z)(t,u,e);return{DismissableTutorialMessage:r.useMemo((function(){return!d||n?null:(0,c.jsx)(l.Z,{tutorial:d})}),[d,n])}}},60494:function(e,t,n){"use strict";n.d(t,{d:function(){return c}});var r=n(29439),i=n(28381),a=n(64207),o=n(21676),s=n(29343),l=a.BI,c=l+1;t.Z=function(e){var t=e.elements,n=i.useState([]),a=(0,r.Z)(n,2),c=a[0],u=a[1],d=i.useCallback((function(){var e=t.map((function(e){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}));u(e)}),[t]);return i.useEffect((function(){if(t.length)return window.addEventListener("wheel",d),window.addEventListener("touchmove",d),window.addEventListener("resize",d),d(),function(){window.removeEventListener("wheel",d),window.removeEventListener("touchmove",d),window.removeEventListener("resize",d)}}),[d,t]),(0,o.Y)(d,t.length?1e3:null),t.length?(0,s.jsx)("div",{style:{position:"fixed",inset:0,pointerEvents:"all",zIndex:l,top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,.25)",clipPath:"polygon(\n        0% 0%, 100% 0%, 100% 100%, 0% 100%, /* Outer bounds */\n        ".concat(c.map((function(e){var t=e.top,n=e.left,r=e.width,i=e.height;return"0% ".concat(t,"px,\n              ").concat(n,"px ").concat(t,"px, \n              ").concat(n,"px ").concat(t+i,"px, \n              ").concat(n+r,"px ").concat(t+i,"px, \n              ").concat(n+r,"px ").concat(t,"px, \n              0% ").concat(t,"px\n            ")})).join(","),"\n      )")},id:"BlockingLayerWithHoles"}):null}},3550:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(28381),o={currentlyRunningInAppTutorial:null,getInAppTutorialShortHeader:function(e){return null},startTutorial:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),endTutorial:function(){},inAppTutorialShortHeaders:null,startStepIndex:0,startProjectData:{},inAppTutorialsFetchingError:null,fetchInAppTutorials:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onLoadInAppTutorialFromLocalFile:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},s=a.createContext(o);t.Z=s},67790:function(e,t,n){"use strict";n.d(t,{ZP:function(){return L},nJ:function(){return S},FZ:function(){return T}});var r=n(1413),i=n(29439),a=n(36600),o=n(28381),s=n(69186),l=n(67674),c=n(40243),u=n(23818),d=n(72410),p=n(78118),f=n(29343),h=o.memo((function(e){return(0,f.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.306 4.04284C12.3613 2.98572 14.0729 2.98572 15.1281 4.04283L19.9591 8.88213C21.0136 9.93854 21.0136 11.6507 19.9591 12.7071L19.9573 12.709L12.3782 20.25H21C21.4142 20.25 21.75 20.5858 21.75 21C21.75 21.4142 21.4142 21.75 21 21.75H9.99997C9.94275 21.75 9.88702 21.7436 9.83347 21.7315C9.16214 21.7952 8.47084 21.6813 7.84006 21.4818C6.52542 21.0661 5.24553 20.2211 4.38985 19.3624C3.52372 18.4931 2.72163 17.2636 2.39922 15.9505C2.07071 14.6126 2.2357 13.129 3.41443 11.9482L11.306 4.04284ZM12.3676 5.10256C12.8369 4.63248 13.5973 4.63248 14.0665 5.10256L18.8975 9.94186C19.3672 10.4124 19.3675 11.1756 18.8983 11.6466L18.8975 11.6475L14.2912 16.2306L7.76941 9.70878L12.3676 5.10256ZM6.70967 10.7704L13.2279 17.2886L10.7361 19.7678L10.7342 19.7697C10.2108 20.2942 9.3703 20.3925 8.29231 20.0517C7.2331 19.7167 6.15709 19.0108 5.45239 18.3036C4.73369 17.5823 4.09946 16.5845 3.85595 15.5928C3.61854 14.6259 3.75803 13.7272 4.47603 13.0079L6.70967 10.7704Z",fill:"currentColor"})}))})),g=o.memo((function(e){return(0,f.jsxs)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5303 3.46968C21.0563 2.99571 20.4755 2.78594 19.9003 2.81755C19.3421 2.84822 18.8367 3.10266 18.4697 3.46972L10.4697 11.4697C10.329 11.6103 10.25 11.8011 10.25 12C10.25 12.1989 10.329 12.3897 10.4697 12.5303L12.4697 14.5303C12.7626 14.8232 13.2374 14.8232 13.5303 14.5303L21.5303 6.53037C22.2835 5.77721 22.474 4.41333 21.5303 3.46968ZM19.5303 4.53035C19.6633 4.39739 19.8298 4.32369 19.9825 4.31529C20.1183 4.30783 20.2874 4.34808 20.4697 4.53035C20.7512 4.81183 20.7165 5.22292 20.4697 5.46971L13 12.9394L12.0607 12L19.5303 4.53035Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8439 14.0184C10.2686 13.4728 9.49152 13.2221 8.75022 13.2209C8.00846 13.2197 7.22821 13.468 6.64784 14.0183C6.01224 14.621 5.83462 15.3315 5.71016 15.8293L5.68747 15.9196C5.55628 16.4361 5.45661 16.7185 5.13128 16.9631C5.00974 17.0544 4.73495 17.1482 4.28337 17.2003C3.85921 17.2493 3.4019 17.2501 3 17.2501C2.58579 17.2501 2.25 17.5858 2.25 18.0001C2.25 18.3714 2.41905 18.7307 2.61028 19.0276C2.81517 19.3457 3.10842 19.6882 3.48395 20.0443C4.36206 20.8769 5.73344 21.2501 7 21.2501C7.66561 21.2501 8.32448 21.1399 8.99504 20.7889C9.65514 20.4434 10.2755 19.8913 10.9146 19.0883C11.5901 18.2396 11.9316 17.3086 11.9127 16.399C11.8936 15.4848 11.5104 14.6505 10.8439 14.0184ZM7.67994 15.1068C7.93568 14.8643 8.32349 14.7202 8.74771 14.7209C9.17238 14.7216 9.55926 14.8674 9.81173 15.1068C10.1997 15.4747 10.4026 15.9333 10.413 16.4303C10.4234 16.9318 10.2377 17.5302 9.74099 18.1542C9.18355 18.8546 8.7161 19.2418 8.29946 19.4599C7.89328 19.6725 7.48651 19.7501 7 19.7501C5.96232 19.7501 5.02026 19.4339 4.51605 18.9558C4.42508 18.8696 4.34315 18.7873 4.26969 18.7093C4.33165 18.7038 4.39362 18.6975 4.45534 18.6904C4.9515 18.6331 5.5722 18.5082 6.03259 18.1621C6.80654 17.5803 7.00351 16.8314 7.14131 16.2889C7.28346 15.7292 7.36637 15.4041 7.67994 15.1068Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M14 20.25C13.5858 20.25 13.25 20.5858 13.25 21C13.25 21.4143 13.5858 21.75 14 21.75H21C21.4142 21.75 21.75 21.4143 21.75 21C21.75 20.5858 21.4142 20.25 21 20.25H14Z",fill:"currentColor"})]}))})),m=n(51598),x=n(61325),v=n(59517),b=n(6217),C=n(38501),j=n(39631),y=n(86278),Z=n(86578),k=n(61165),w={tilesetAndTooltipsContainer:{flex:1,display:"flex",position:"relative",width:"100%"},tilesetContainer:{flex:1,position:"relative",display:"flex",overflow:"auto",touchAction:"none"},atlasImage:{flex:1,imageRendering:"pixelated"},icon:{fontSize:18},tooltipContent:{position:"absolute",background:"white",border:"1px solid black",color:"black",padding:"1px 3px"}},T=function(e){var t=e.x;return e.y*e.columnCount+t},S=function(e){var t=e.id,n=e.columnCount,r=t%n;return{x:r,y:(t-r)/n}},P=function(e){var t=e.displayedTileSize,n=e.pointerX,r=e.pointerY,i=e.columnCount,a=e.rowCount;return{x:Math.min(Math.floor(n/t),i-1),y:Math.min(Math.floor(r/t),a-1)}},I=function(e){var t=e.currentTarget;if(t instanceof HTMLDivElement){var n=t.getBoundingClientRect(),r=e.clientX-n.left+1;return{mouseX:r+t.scrollLeft,mouseY:e.clientY-n.top+1,mouseXWithoutScrollLeft:r,parentRightBound:n.right}}},E=function(e,t){var n=e.findIndex((function(e){return e.x===t.x&&e.y===t.y}));-1===n?e.push(t):e.splice(n,1)},M=function(e){var t=e.x,n=e.y,r=e.size,i=e.width,a=void 0===i?1:i,o=e.height,c=void 0===o?1:o,u=function(e){return(0,s.Z)((function(t){return(0,l.Z)({tile:{position:"absolute",boxSizing:"border-box",border:e?"2px solid red":void 0,"&:hover":{border:e?"2px solid orange":"1px solid ".concat("dark"===t.palette.type?"white":"black")}}})}))()}(!!e.highlighted);return(0,f.jsx)("div",{className:u.tile,style:{left:t*r,top:n*r,width:r*a,height:r*c}})},L=function(e){var t=e.project,n=e.objectConfiguration,s=e.tileMapTileSelection,l=e.onSelectTileMapTile,p=e.allowMultipleSelection,S=e.allowRectangleSelection,L=e.showPaintingToolbar,A=e.interactive,O=e.onAtlasImageLoaded,R=e.onScrollY,F=(0,C.Z)(),D=n.getProperties().get("atlasImage").getValue(),N=o.useState(!1),_=(0,i.Z)(N,2),B=_[0],U=_[1],V=o.useState(!1),H=(0,i.Z)(V,2),z=H[0],W=H[1],G=o.useState(null),Y=(0,i.Z)(G,2),q=Y[0],J=Y[1],X=o.useRef(null),K=o.useRef(null),Q=o.useState(null),$=(0,i.Z)(Q,2),ee=$[0],te=$[1],ne=n.getProperties(),re=parseFloat(ne.get("columnCount").getValue()),ie=parseFloat(ne.get("rowCount").getValue()),ae=parseFloat(ne.get("tileSize").getValue()),oe=(0,k.Jv)({atlasImage:"",columnCount:re,rowCount:ie,tileSize:ae}),se=o.useRef(null),le=o.useRef(!1),ce=o.useRef(null),ue=o.useState(null),de=(0,i.Z)(ue,2),pe=de[0],fe=de[1],he=o.useState(null),ge=(0,i.Z)(he,2),me=ge[0],xe=ge[1],ve=X.current?X.current.getElementsByTagName("img")[0]:null,be=ve?parseFloat(getComputedStyle(ve).width.replace("px","")):0,Ce=ve?ve.naturalWidth:1,je=be&&Ce?be/Ce*ae:null,ye=o.useCallback((function(e){O&&O(e,D)}),[O,D]),Ze=o.useCallback((function(e){if(je&&!oe){var t=I(e);if(t){var n=P({pointerX:t.mouseX,pointerY:t.mouseY,columnCount:re,rowCount:ie,displayedTileSize:je}),r=n.x,i=n.y;te({x:Math.min(t.mouseXWithoutScrollLeft,t.parentRightBound-40),y:t.mouseY,label:T({x:r,y:i,columnCount:re}).toString()})}}}),[je,re,ie,oe]),ke=o.useCallback((function(e){le.current=!0,Ze(e)}),[Ze]),we=(0,j.i)(ke,{doNotCancelOnScroll:!0});o.useEffect((function(){F()}),[F]);var Te=o.useCallback((function(e){if(!oe){var t=I(e);t&&(se.current={x:t.mouseX,y:t.mouseY})}}),[oe]),Se=o.useCallback((function(e){if(!oe&&se&&je&&(p||S)){var t=se.current;if(t)if(!("touch"===e.pointerType)||le.current){var n=I(e);if(n){var r=P({pointerX:n.mouseX,pointerY:n.mouseY,columnCount:re,rowCount:ie,displayedTileSize:je}),i=r.x,a=r.y,o=P({pointerX:t.x,pointerY:t.y,columnCount:re,rowCount:ie,displayedTileSize:je}),s=o.x,l=o.y;fe({topLeftCoordinates:{x:Math.min(i,s),y:Math.min(a,l)},width:Math.abs(i-s)+1,height:Math.abs(a-l)+1})}}else{var c=I(e);if(!c)return;if(X.current){var u=-e.movementY,d=t.x-c.mouseXWithoutScrollLeft;X.current.scrollLeft=d,R(u)}}}}),[oe,je,re,ie,p,S,R]),Pe=o.useCallback((function(e){try{if(!je||oe)return;var t="touch"===e.pointerType,n=se.current;if(!n)return;if(t&&!le.current)return;var i=I(e);if(!i)return;var a=P({pointerX:i.mouseX,pointerY:i.mouseY,columnCount:re,rowCount:ie,displayedTileSize:je}),o=a.x,c=a.y;if(!n)return;var u=P({pointerX:n.x,pointerY:n.y,columnCount:re,rowCount:ie,displayedTileSize:je}),d=u.x,f=u.y;if(p){var h=s&&"multiple"===s.kind?(0,r.Z)({},s):{kind:"multiple",coordinates:[]};if(d===o&&f===c)s&&"multiple"===s.kind&&E(h.coordinates,{x:o,y:c});else for(var g=Math.min(d,o);g<=Math.max(d,o);g++)for(var m=Math.min(f,c);m<=Math.max(f,c);m++)h&&"multiple"===h.kind&&E(h.coordinates,{x:g,y:m});l(h)}else if(S){if(s&&"rectangle"===s.kind&&d===o&&f===c&&o<=s.coordinates[1].x&&o>=s.coordinates[0].x&&c<=s.coordinates[1].y&&c>=s.coordinates[0].y)l(null);else{var x={x:Math.min(d,o),y:Math.min(f,c)},v={x:Math.max(d,o),y:Math.max(f,c)};l({kind:"rectangle",coordinates:[x,v],flipHorizontally:z,flipVertically:B})}}}finally{se.current=null,fe(null),le.current=!1}}),[oe,je,re,ie,s,l,z,B,p,S]);o.useEffect((function(){s&&"rectangle"===s.kind&&J(s)}),[s]);var Ie=o.useCallback((function(e){if(je){var t=I(e);if(t){var n=P({pointerX:t.mouseX,pointerY:t.mouseY,columnCount:re,rowCount:ie,displayedTileSize:je}),r=n.x,i=n.y;xe({x:r,y:i})}}}),[je,re,ie]),Ee=o.useCallback((function(e){if(je){Ie(e),ce.current&&clearTimeout(ce.current);var t=I(e);if(t){var n=P({pointerX:t.mouseX,pointerY:t.mouseY,columnCount:re,rowCount:ie,displayedTileSize:je}),r=n.x,i=n.y;ce.current=setTimeout((function(){te({x:Math.min(t.mouseXWithoutScrollLeft,t.parentRightBound-40),y:t.mouseY,label:T({x:r,y:i,columnCount:re}).toString()})}),500)}}}),[Ie,ie,re,je]),Me=o.useCallback((function(e){if(je){var t=I(e);if(t){var n=P({pointerX:t.mouseX,pointerY:t.mouseY,columnCount:re,rowCount:ie,displayedTileSize:je}),r=n.x,i=n.y;ce.current=setTimeout((function(){te({x:t.mouseXWithoutScrollLeft,y:t.mouseY,label:T({x:r,y:i,columnCount:re}).toString()})}),500)}}}),[ie,re,je]),Le=o.useCallback((function(){ce.current&&clearTimeout(ce.current),te(null)}),[]),Ae={onPointerDown:Te,onPointerUp:Pe,onPointerMove:Se},Oe=!!D;return(0,f.jsxs)(c.sg,{noMargin:!0,children:[L&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(c.x1,{justifyContent:"space-between",noMargin:!0,children:[(0,f.jsxs)(x.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(m.Z,{id:"paintBrush",size:"small",tooltip:{id:"Paint"},selected:!!s&&"rectangle"===s.kind,onClick:function(e){s&&"rectangle"===s.kind?l(null):l(q||{kind:"rectangle",coordinates:[{x:0,y:0},{x:0,y:0}],flipHorizontally:z,flipVertically:B})},disabled:!Oe,children:(0,f.jsx)(g,{style:w.icon})}),(0,f.jsx)(m.Z,{id:"horizontalFlip",size:"small",tooltip:{id:"Horizontal flip"},selected:z,disabled:!s||"erase"===s.kind,onClick:function(e){var t=!z;W(t),s&&"rectangle"===s.kind&&l((0,r.Z)((0,r.Z)({},s),{},{flipHorizontally:t}))},children:(0,f.jsx)(v.Z,{style:w.icon})}),(0,f.jsx)(m.Z,{id:"verticalFlip",size:"small",tooltip:{id:"Vertical flip"},selected:B,disabled:!s||"erase"===s.kind,onClick:function(e){var t=!B;U(t),s&&"rectangle"===s.kind&&l((0,r.Z)((0,r.Z)({},s),{},{flipVertically:t}))},children:(0,f.jsx)(b.Z,{style:w.icon})})]}),(0,f.jsx)(m.Z,{id:"eraseBrush",size:"small",tooltip:{id:"Erase"},selected:!!s&&"erase"===s.kind,onClick:function(e){s&&"erase"===s.kind?l(null):l({kind:"erase"})},children:(0,f.jsx)(h,{style:w.icon})})]}),(0,f.jsx)(c.LZ,{})]}),(0,f.jsx)(c.x1,{justifyContent:"stretch",noMargin:!0,children:Oe?(0,f.jsxs)("div",{style:w.tilesetAndTooltipsContainer,ref:K,children:[(0,f.jsxs)("div",(0,r.Z)((0,r.Z)((0,r.Z)({style:w.tilesetContainer,ref:X},A?Ae:void 0),we),{},{onMouseMove:Ee,onMouseEnter:Me,onMouseLeave:Le,children:[(0,f.jsx)(u.W,{style:w.atlasImage,alt:D,src:d.Z.getResourceFullUrl(t,D,{}),onLoad:ye}),A&&me&&je&&(0,f.jsx)(M,{size:je,x:me.x,y:me.y},"hovered-tile"),s&&"rectangle"===s.kind&&je&&(0,f.jsx)(M,{highlighted:!0,size:je,x:s.coordinates[0].x,y:s.coordinates[0].y,width:s.coordinates[1].x-s.coordinates[0].x+1,height:s.coordinates[1].y-s.coordinates[0].y+1},"selected-tile"),s&&"multiple"===s.kind&&je&&s.coordinates.map((function(e){var t=T({x:e.x,y:e.y,columnCount:re});return(0,f.jsx)(M,{highlighted:!0,size:je,x:e.x,y:e.y},"selected-tile-".concat(t))})),A&&pe&&je&&(0,f.jsx)(M,{highlighted:!0,size:je,x:pe.topLeftCoordinates.x,y:pe.topLeftCoordinates.y,width:pe.width,height:pe.height},"preview-tile")]})),ee&&(0,f.jsx)("div",{style:(0,r.Z)((0,r.Z)({},w.tooltipContent),{},{top:ee.y-40-(je||0)/5,left:ee.x-5}),children:(0,f.jsx)(y.Z,{color:"inherit",noMargin:!0,children:ee.label})})]}):(0,f.jsx)(Z.Z,{children:(0,f.jsx)(a.Trans,{id:"No atlas image configured."})})})]})}},30256:function(e,t,n){"use strict";n.d(t,{Z:function(){return f},f:function(){return d}});var r=n(93433),i=n(4942),a=n(1413),o=n(79266),s=n.n(o),l=n(32319),c=n.n(l),u=n(29341),d=function(e,t){var n={},r=function(e){return[e._({id:"General"}),e._({id:"Input"}),e._({id:"Audio"}),e._({id:"Text"}),e._({id:"Camera"}),e._({id:"User interface"}),e._({id:"Game mechanic"}),e._({id:"Movement"}),e._({id:"Players"}),e._({id:"Visual effect"}),e._({id:"Ads"}),e._({id:"Network"}),e._({id:"Third-party"}),e._({id:"Advanced"})]}(t);return e.forEach((function(e){var t=c()(e.fullGroupName.split(" \u276f "));t.length||(t=[""]),s()(n,t,(function(t){var n=t||{};return(0,a.Z)((0,a.Z)({},n),{},(0,i.Z)({},e.type,e))}))})),Object.keys(n).sort((function(e,t){var n=r.indexOf(e),i=r.indexOf(t);return-1===n&&-1===i?e.localeCompare(t):-1===n?i===r.length-1?-1:1:-1===i?n===r.length-1?1:-1:n-i})).reduce((function(e,t){return e[t]=n[t],e}),{})},p=function(e,t){if(!t)return null;for(var n=Object.keys(e),i=0;i<n.length;++i){var a=n[i],o=e[a];if(!o)return null;if("string"===typeof o.type){if(o.type===(0,u.MG)(t))return[]}else{var s=f(o,t);if(s)return[a].concat((0,r.Z)(s))}}return null},f=function(e,t){return p(e,t&&(0,u.MG)(t))}},78296:function(e,t,n){"use strict";n.d(t,{R5:function(){return c},Rc:function(){return m},Xn:function(){return x},ZB:function(){return g},up:function(){return v}});var r=n(93433),i=n(51771),a=n.g.gd,o={BuiltinObject:["Create","CreateByName"],BuiltinCamera:["CentreCamera"],Scene3D:["Scene3D::TurnCameraTowardObject"]},s=function(e,t,n){for(var r=-1,i=0;i<e.getParametersCount();i++){if(!e.getParameter(i).isCodeOnly()){r=i;break}}if(-1===r)return!1;var o=e.getParameter(r);if(!a.ParameterMetadata.isObject(o.getType()))return!1;if(t&&""!==o.getExtraInfo()&&o.getExtraInfo()!==t)return!1;if(!n)return!0;for(var s=r+1;s<e.getParametersCount();s++){var l=e.getParameter(s);if(!a.ParameterMetadata.isBehavior(l.getType()))return!0;if(""!==l.getExtraInfo()&&!n.has(l.getExtraInfo()))return!1}return!0},l=function(e,t){for(var n=-1,r=0;r<e.getParametersCount();r++){if(!e.getParameter(r).isCodeOnly()){n=r;break}}if(-1===n)return!1;var i=e.getParameter(n);if(!a.ParameterMetadata.isObject(i.getType()))return!1;if(n===e.getParametersCount()-1)return!1;var o=e.getParameter(n+1);return a.ParameterMetadata.isBehavior(o.getType())&&(!t||o.getExtraInfo()===t)},c=function(e,t){return(0,i.X)(e.getCategory(),t)+" \u276f "+e.getFullName()},u=function(e,t,n,r,i,a){for(var o=e?t.getAllConditions():t.getAllActions(),s=o.keys(),c=[],u=0;u<s.size();++u){var d=s.at(u),p=o.get(d);!p.isHidden()&&l(p,n)&&c.push(f(r,d,p,i,a))}return c},d=function(e,t,n,r,i,a){for(var o=e?t.getAllConditions():t.getAllActions(),l=o.keys(),c=[],u=0;u<l.size();++u){var d=l.at(u),p=o.get(d);!p.isHidden()&&s(p,n,r)&&c.push(f("",d,p,i,a))}return c},p=function(e,t,n,r){for(var i=e?t.getAllConditions():t.getAllActions(),u=c(t,r),d=o[t.getName()],p=i.keys(),h=[],g=0;g<p.size();++g){var m=p.at(g),x=i.get(m),v=a.VariableInstructionSwitcher.getSwitchableVariableInstructionIdentifier(m);if(!(v.length>0&&v!==m)){var b=d&&-1!==d.indexOf(m);x.isHidden()||!b&&(s(x)||l(x))||h.push(f(u,m,x,n,r,b))}}return h},f=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=n.getFullName(),s=n.getDescription();if(s.length>140){var l=s.indexOf(" ",140);l>=0&&(s=s.substring(0,l))}var c=i?i._(n.getGroup()):n.getGroup(),u=n.getIconFilename();return{type:t,metadata:n,iconFilename:u,displayedName:o,description:s,fullGroupName:a?e:[e,c].filter(Boolean).join(" \u276f "),scope:r,isPrivate:n.isPrivate(),isRelevantForLayoutEvents:n.isRelevantForLayoutEvents(),isRelevantForFunctionEvents:n.isRelevantForFunctionEvents(),isRelevantForAsynchronousFunctionEvents:n.isRelevantForAsynchronousFunctionEvents(),isRelevantForCustomObjectEvents:n.isRelevantForCustomObjectEvents()}},h=function(e,t,n,r,i,o){for(var l=t.keys(),c=[],u=0;u<l.size();++u){var d=l.at(u),p=a.VariableInstructionSwitcher.getSwitchableVariableInstructionIdentifier(d);if(!(p.length>0&&p!==d)){var h=t.get(d);h.isHidden()||i&&!s(h,i,o)||c.push(f(e,d,h,n,r))}}return c},g=function(e,t){for(var n=[],i=a.asPlatform(a.JsPlatform.get()).getAllPlatformExtensions(),o=0;o<i.size();++o){var s=i.at(o),l=s.getExtensionObjectsTypes(),u=s.getBehaviorsTypes(),d=c(s,t),p=h(d,e?s.getAllConditions():s.getAllActions(),{extension:{name:s.getName()},objectMetadata:void 0,behaviorMetadata:void 0},t);n=[].concat((0,r.Z)(n),(0,r.Z)(p));for(var f=0;f<l.size();++f){var g=l.at(f),m=s.getObjectMetadata(g),x={extension:{name:s.getName()},objectMetadata:{name:m.getName(),isPrivate:m.isPrivate()}};n=[].concat((0,r.Z)(n),(0,r.Z)(h(d,e?s.getAllConditionsForObject(g):s.getAllActionsForObject(g),x,t)))}for(var v=0;v<u.size();++v){var b=u.at(v),C=s.getBehaviorMetadata(b),j={extension:{name:s.getName()},behaviorMetadata:{name:C.getName(),isPrivate:C.isPrivate()}};n=[].concat((0,r.Z)(n),(0,r.Z)(h(d,e?s.getAllConditionsForBehavior(b):s.getAllActionsForBehavior(b),j,t)))}}return n},m=function(e,t,n,i,o){var s=[],l=a.getTypeOfObject(t,n,i,!0),c=a.getBehaviorsOfObject(t,n,i,!0).toJSArray(),p=new Set(c.map((function(e){return a.getTypeOfBehavior(t,n,e,!1)}))),f=a.MetadataProvider.getExtensionAndObjectMetadata(a.JsPlatform.get(),l),g=f.getExtension(),m=f.getMetadata(),x={extension:{name:g.getName()},objectMetadata:{name:m.getName(),isPrivate:m.isPrivate()}};s=[].concat((0,r.Z)(s),(0,r.Z)(h("",e?g.getAllConditionsForObject(l):g.getAllActionsForObject(l),x,o)));for(var v=a.asPlatform(a.JsPlatform.get()).getAllPlatformExtensions(),b=0;b<v.size();++b){var C=v.at(b),j={extension:{name:C.getName()},objectMetadata:{name:m.getName(),isPrivate:m.isPrivate()}};s=[].concat((0,r.Z)(s),(0,r.Z)(d(e,C,l,p,j,o)))}if(""!==l){var y=a.MetadataProvider.getExtensionAndObjectMetadata(a.JsPlatform.get(),"").getExtension();s=[].concat((0,r.Z)(s),(0,r.Z)(h("",e?y.getAllConditionsForObject(""):y.getAllActionsForObject(""),x,o)))}for(var Z=function(){var t=v.at(k);t.getBehaviorsTypes().toJSArray().filter((function(e){return p.has(e)})).forEach((function(n){for(var i=t.getBehaviorMetadata(n),a={extension:{name:t.getName()},behaviorMetadata:{name:i.getName(),isPrivate:i.isPrivate()}},c=[],d=0;d<v.size();++d){var f=v.at(d);c.push.apply(c,u(e,f,n,"",a,o))}s=[].concat((0,r.Z)(h("",e?t.getAllConditionsForBehavior(n):t.getAllActionsForBehavior(n),a,o,l,p)),c,(0,r.Z)(s))}))},k=0;k<v.size();++k)Z();return t.getObjectGroups().has(i)||n.getObjectGroups().has(i)||(s=s.filter((function(e){return"CreateByName"!==e.type}))),function(e){var t=e.filter((function(e){return 0===e.fullGroupName.length})),n=e.filter((function(e){return 0!==e.fullGroupName.length}));return[].concat((0,r.Z)(t),(0,r.Z)(n))}(s)},x=function(e,t){for(var n=[],r=a.asPlatform(a.JsPlatform.get()).getAllPlatformExtensions(),i=0;i<r.size();++i){var o=r.at(i);n.push.apply(n,p(e,o,{extension:{name:o.getName()},objectMetadata:void 0,behaviorMetadata:void 0},t))}return n},v=function(e){var t=e.getParametersCount();if(t>=1){var n=e.getParameter(0).getType();if("object"===n)return 0;if(a.ParameterMetadata.isObject(n))return 0;if(("objectsContext"===n||"currentScene"===n)&&t>=2){var r=e.getParameter(1).getType();if(a.ParameterMetadata.isObject(r))return 1}}return-1}},550:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n.g.gd,i=function(e,t){return e.filter((function(e){return a(e,t)}))},a=function(e,t){var n=e.scope,i=n.behaviorMetadata,a=n.objectMetadata,o=n.extension,s=t.eventsBasedBehavior,l=t.eventsBasedObject,c=t.eventsFunctionsExtension;return!(!(e.isRelevantForLayoutEvents&&(t.layout||t.externalEvents)||e.isRelevantForFunctionEvents&&t.eventsFunction||e.isRelevantForAsynchronousFunctionEvents&&t.eventsFunction&&t.eventsFunction.isAsync()||e.isRelevantForCustomObjectEvents&&l)||(e.isPrivate||i&&i.isPrivate||a&&a.isPrivate)&&!(i&&s&&c&&r.PlatformExtension.getBehaviorFullType(c.getName(),s.getName())===i.name)&&!(a&&l&&c&&r.PlatformExtension.getObjectFullType(c.getName(),l.getName())===a.name)&&(!c||c.getName()!==o.name||e.isPrivate&&(i||a)))}},23570:function(e,t,n){var r=n(83306),i=function(e,t,n){if(!n.runExtensionSanityTests)return{error:!0,message:"Missing runExtensionSanityTests in the extension module exports"};var i=n.runExtensionSanityTests(e,t);return r(i)?{error:!0,message:"One or more tests are failing for the extension (see rawError)",rawError:i}:{error:!1,message:"Tests passed successfully"}};e.exports={runExtensionSanityTests:i,loadExtension:function(e,t,n,r){if(!r.createExtension)return{message:"Extension module found, but no createExtension method is exported",error:!0};var a=null;try{if(!(a=r.createExtension(e,t)))return{message:"createExtension did not return any extension. Did you forget to return the extension created?",error:!0}}catch(s){return{message:"\ud83d\udea8 Exception caught while running createExtension. \ud83d\udca3 Please fix this error as this will make GDevelop crash at some point.",error:!0,dangerous:!0,rawError:s}}try{var o=i(t,a,r);if(o.error)return a.delete(),o}catch(s){return{message:"\ud83d\udea8 Exception caught while running runExtensionSanityTests. \ud83d\udca3 Please fix this error as this will make GDevelop crash at some point.",error:!0,dangerous:!0,rawError:s}}return n.addNewExtension(a),a.delete(),{message:"\u2705 Successfully loaded the extension.",error:!1}}}},55760:function(e,t,n){"use strict";n.d(t,{YK:function(){return Z},$3:function(){return y},oN:function(){return b},aL:function(){return j},LB:function(){return C}});var r=n(1413),i=n(28381),a=function(){var e=document.body,t=document.activeElement,n=document.querySelector("div.main-frame"),r=n&&n.contains(t);return!(t===e)&&!r},o=n(48409),s=["CmdOrCtrl+KeyZ","CmdOrCtrl+KeyY","CmdOrCtrl+Shift+KeyZ","CmdOrCtrl+KeyX","CmdOrCtrl+KeyC","CmdOrCtrl+KeyV","CmdOrCtrl+KeyD","CmdOrCtrl+Shift+KeyV","CmdOrCtrl+KeyA","Delete","CmdOrCtrl+Shift+KeyI","F11","NumpadAdd","CmdOrCtrl+Equal","NumpadSubtract","CmdOrCtrl+Minus","CmdOrCtrl+KeyF"],l=n(36262),c=n(32072),u=function(){var e=document.activeElement;if(!e)return!1;return!!e.closest('textarea, input, [contenteditable="true"]')},d=n(83141),p=n(50057),f=n.n(p),h=n(36062),g=f()("electron"),m={48:"Digit0",49:"Digit1",50:"Digit2",51:"Digit3",52:"Digit4",53:"Digit5",54:"Digit6",55:"Digit7",56:"Digit8",57:"Digit9",65:"KeyA",66:"KeyB",67:"KeyC",68:"KeyD",69:"KeyE",70:"KeyF",71:"KeyG",72:"KeyH",73:"KeyI",74:"KeyJ",75:"KeyK",76:"KeyL",77:"KeyM",78:"KeyN",79:"KeyO",80:"KeyP",81:"KeyQ",82:"KeyR",83:"KeyS",84:"KeyT",85:"KeyU",86:"KeyV",87:"KeyW",88:"KeyX",89:"KeyY",90:"KeyZ",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",186:"Semicolon",187:"Equal",188:"Comma",189:"Minus",190:"Period",191:"Slash",192:"Backquote",219:"BracketLeft",220:"Backslash",221:"BracketRight",222:"Quote",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",91:"MetaLeft",92:"MetaRight",93:"ContextMenu",144:"NumLock",145:"ScrollLock"},x=function(e){return"number"===typeof e.keyCode&&e.keyCode.toString()in m?m[e.keyCode.toString()]:"number"===typeof e.which&&e.which.toString()in m?m[e.which.toString()]:e.code?e.code:""},v=function(e){return e?0===e.indexOf("Key")?"alphabet":0===e.indexOf("Digit")?"number":0===e.indexOf("F")?"fn-row":"NumpadAdd"===e||"NumpadSubtract"===e?"numpad-arith":"Equal"===e||"Minus"===e?"numrow-arith":"Tab"===e||"Space"===e||"Comma"===e?"other":null:null},b=function(e){var t=function(e){var t="";(e.ctrlKey||e.metaKey)&&(t+="CmdOrCtrl+"),e.shiftKey&&(t+="Shift+"),e.altKey&&(t+="Alt+");var n=x(e);return v(n)&&(t+=n),t}(e),n=function(e){var t=x(e),n=v(t);if(!n)return!1;var r=e.ctrlKey||e.metaKey,i=e.altKey;return!("other"===n&&!r&&!i)}(e),r=s.includes(t);return{shortcutString:t,isValid:n&&!r}},C=function(){var e=i.useContext(l.ZP).values.userShortcutMap;return(0,r.Z)((0,r.Z)({},d.Z),e)},j=function(e){var t=e.onRunCommand,n=e.previewDebuggerServer,r=C();i.useEffect((function(){var e=function(e){var n=b(e);if(n.isValid){var i=Object.keys(r).find((function(e){return r[e]===n.shortcutString}));i&&(g&&c.Z[i].handledByElectron||u()||(e.preventDefault(),a()||t(i)))}};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[t,r]),i.useEffect((function(){if(n){var e=n.registerCallbacks({onErrorReceived:function(){},onServerStateChanged:function(){},onConnectionClosed:function(){},onConnectionOpened:function(){},onConnectionErrored:function(){},onHandleParsedMessage:function(e){e.id;var n=e.parsedMessage;if("handleKeyboardShortcutFromInGameEditor"===n.command){var i=n.payload,o=h.$.extractBooleanProperty(i,"metaKey")||!1,s=h.$.extractBooleanProperty(i,"ctrlKey")||!1,l=h.$.extractBooleanProperty(i,"altKey")||!1,d=h.$.extractBooleanProperty(i,"shiftKey")||!1,p=h.$.extractNumberProperty(i,"keyCode");if(p){var f=b({keyCode:p,metaKey:o,ctrlKey:s,altKey:l,shiftKey:d});if(f.isValid){var g=Object.keys(r).find((function(e){return r[e]===f.shortcutString}));if(g)c.Z[g]&&(u()||a()?console.warn("Shortcut received from the in-game editor, despite the user having a dialog opened or being typing. Ignoring. Still double check why this shortcut was received."):t(g))}}}}});return function(){e()}}}),[n,r,t])},y=function(e){return e?e.split("+").map((function(e){return"CmdOrCtrl"===e?(0,o.z1)()?"Cmd":"Ctrl":"Shift"===e||"Alt"===e?e:function(e){var t=v(e);return"alphabet"===t?e.slice(3):"number"===t?e.slice(5):"fn-row"===t?e:"numpad-arith"===t?"NumpadAdd"===e?"Num+":"Num-":"numrow-arith"===t?"Minus"===e?"-":"=":"Comma"===e?",":e}(e)})).join(" + "):""},Z=function(e){return e.split("+").map((function(e){return"CmdOrCtrl"===e||"Shift"===e||"Alt"===e?e:function(e){var t=v(e);return"alphabet"===t?e.slice(3):"number"===t?e.slice(5):"fn-row"===t?e:"numpad-arith"===t?"NumpadAdd"===e?"numadd":"numsub":"numrow-arith"===t?"Minus"===e?"-":"=":e}(e)})).join("+")}},9708:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(28381),o={leaderboards:null,currentLeaderboard:null,displayOnlyBestEntry:!1,browsing:{entries:null,goToNextPage:null,goToPreviousPage:null,goToFirstPage:null},createLeaderboard:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),listLeaderboards:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),selectLeaderboard:function(){},setDisplayOnlyBestEntry:function(){},updateLeaderboard:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),resetLeaderboard:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLeaderboard:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteLeaderboardEntry:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchLeaderboardEntries:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},s=a.createContext(o);t.Z=s},73321:function(e,t,n){"use strict";var r=n(29439),i=n(36600),a=n(28381),o=n(84340),s=n(1773),l=n(10888),c=n(4076),u=n(29343);t.Z=function(e){var t=e.onClose,n=e.open,d=e.project,p=e.leaderboardId,f=a.useState(!1),h=(0,r.Z)(f,2),g=h[0],m=h[1];return(0,u.jsx)(s.ZP,{title:(0,u.jsx)(i.Trans,{id:"Leaderboards"}),id:"leaderboard-admin-dialog",actions:[(0,u.jsx)(l.Z,{id:"close-button",label:(0,u.jsx)(i.Trans,{id:"Close"}),disabled:g,onClick:t},"Close")],secondaryActions:[(0,u.jsx)(c.Z,{helpPagePath:"/interface/games-dashboard/leaderboard-administration"},"help")],open:n,cannotBeDismissed:g,onRequestClose:t,flexBody:!0,fullHeight:!0,children:(0,u.jsx)(o.a,{onLoading:m,project:d,leaderboardIdToSelectAtOpening:p})})}},39128:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(29439),o=n(4942),s=n(1413),l=n(28381),c=n(9708),u=n(14737),d=n(71106),p=n(21676),f=n(29343),h=function(e){return"PREFER_UNIQUE"===e.playerUnicityDisplayChoice},g=function(e,t){switch(t.type){case"SET_LEADERBOARDS":var n=t.payload;if(!n)return(0,s.Z)((0,s.Z)({},e),{},{leaderboardsByIds:null,currentLeaderboardId:null,currentLeaderboard:null});var r=n.reduce((function(e,t){return e[t.id]=t,e}),{}),i=!e.currentLeaderboard&&n&&n.length>0,l=n.find((function(e){return e.primary})),c=(e.currentLeaderboard?r[e.currentLeaderboard.id]:void 0)||e.currentLeaderboard,u=i?l||n[0]:c;return(0,s.Z)((0,s.Z)({},e),{},{leaderboardsByIds:r,displayOnlyBestEntry:!!u&&h(u),currentLeaderboardId:u?u.id:null,currentLeaderboard:u});case"SET_ENTRIES":return(0,s.Z)((0,s.Z)({},e),{},{entries:t.payload});case"PURGE_NAVIGATION":return(0,s.Z)((0,s.Z)({},e),{},{entries:null,pageIndex:0,mapPageIndexToUri:{}});case"SET_NEXT_PAGE_URI":var d=e.pageIndex+1;return(0,s.Z)((0,s.Z)({},e),{},{mapPageIndexToUri:(0,s.Z)((0,s.Z)({},e.mapPageIndexToUri),{},(0,o.Z)({},d,t.payload))});case"SET_PAGE_INDEX":return(0,s.Z)((0,s.Z)({},e),{},{pageIndex:t.payload});case"SELECT_LEADERBOARD":if(!e.leaderboardsByIds)return e;var p=e.leaderboardsByIds[t.payload];return(0,s.Z)((0,s.Z)({},e),{},{displayOnlyBestEntry:h(p),currentLeaderboardId:p.id,currentLeaderboard:p});case"CHANGE_DISPLAY_ONLY_BEST_ENTRY":return(0,s.Z)((0,s.Z)({},e),{},{displayOnlyBestEntry:t.payload});case"UPDATE_OR_CREATE_LEADERBOARD":var f={};return e.leaderboardsByIds&&Object.entries(e.leaderboardsByIds).forEach((function(e){var n=(0,a.Z)(e,2),r=n[0],i=n[1];f[r]=(0,s.Z)((0,s.Z)({},i),{},{primary:t.payload.primary?void 0:i.primary})})),f[t.payload.id]=t.payload,(0,s.Z)((0,s.Z)({},e),{},{displayOnlyBestEntry:h(t.payload),leaderboardsByIds:f,currentLeaderboardId:t.payload.id,currentLeaderboard:t.payload});case"REMOVE_LEADERBOARD":var g=(0,s.Z)({},e.leaderboardsByIds);delete g[t.payload];var m=Object.keys(g);return 0===m.length?(0,s.Z)((0,s.Z)({},e),{},{displayOnlyBestEntry:!1,leaderboardsByIds:g,currentLeaderboard:null,currentLeaderboardId:null}):(0,s.Z)((0,s.Z)({},e),{},{displayOnlyBestEntry:h(g[m[0]]),leaderboardsByIds:g,currentLeaderboard:g[m[0]],currentLeaderboardId:m[0]});default:return(0,s.Z)({},e)}};t.Z=function(e){var t=e.gameId,n=e.children,o=l.useContext(d.ZP),s=l.useRef(!1),h=o.getAuthorizationHeader,m=o.profile,x=l.useReducer(g,{currentLeaderboardId:null,currentLeaderboard:null,leaderboardsByIds:null,displayOnlyBestEntry:!1,entries:null,mapPageIndexToUri:{},pageIndex:0}),v=(0,a.Z)(x,2),b=v[0],C=b.currentLeaderboardId,j=b.currentLeaderboard,y=b.leaderboardsByIds,Z=b.displayOnlyBestEntry,k=b.entries,w=b.mapPageIndexToUri,T=b.pageIndex,S=v[1],P=l.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:if(s.current){e.next=16;break}return s.current=!0,e.prev=4,n&&n.shouldClearBeforeFetching&&S({type:"SET_LEADERBOARDS",payload:null}),e.next=8,(0,u.mf)(h,m.id,t);case 8:if(i=e.sent){e.next=11;break}return e.abrupt("return");case 11:i.sort((function(e,t){return e.name.localeCompare(t.name)})),S({type:"SET_LEADERBOARDS",payload:i});case 13:return e.prev=13,s.current=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,,13,16]])})));return function(t){return e.apply(this,arguments)}}(),[t,h,m]),I=l.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S({type:"SET_ENTRIES",payload:null}),e.next=3,(0,u.Rc)(o,t,n);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:S({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:i});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,o]),E=l.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:return i=n&&n.uri?n.uri:null,S({type:"SET_ENTRIES",payload:null}),e.next=6,(0,u.YJ)(t,C,{pageSize:10,onlyBestEntry:Z,forceUri:i});case 6:if(a=e.sent){e.next=9;break}return e.abrupt("return");case 9:o=a.entries,a.nextPageUri&&S({type:"SET_NEXT_PAGE_URI",payload:a.nextPageUri}),S({type:"SET_ENTRIES",payload:o});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C,Z,t]),M=l.useCallback((function(e){S({type:"SELECT_LEADERBOARD",payload:e})}),[]),L=l.useCallback((function(e){S({type:"CHANGE_DISPLAY_ONLY_BEST_ENTRY",payload:e})}),[]),A=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:return n.sort&&S({type:"PURGE_NAVIGATION"}),e.next=5,(0,u.RE)(o,t,C,n);case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(S({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:i}),!n.sort){e.next=12;break}return e.next=12,E();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:return S({type:"PURGE_NAVIGATION"}),e.next=5,(0,u.Wk)(o,t,C);case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:S({type:"UPDATE_OR_CREATE_LEADERBOARD",payload:n}),E();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&y){e.next=2;break}return e.abrupt("return");case 2:return S({type:"PURGE_NAVIGATION"}),e.next=5,(0,u.QN)(o,t,C);case 5:S({type:"REMOVE_LEADERBOARD",payload:C});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.nI)(o,t,C,n);case 4:E({uri:T>0?w[T]:null});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=l.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w[T+1]){e.next=3;break}return e.abrupt("return");case 3:return S({type:"SET_PAGE_INDEX",payload:T+1}),e.next=6,E({uri:t});case 6:case"end":return e.stop()}}),e)}))),[E,w,T]),N=l.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==T){e.next=6;break}return S({type:"SET_PAGE_INDEX",payload:0}),e.next=4,E();case 4:e.next=12;break;case 6:if(t=w[T-1]){e.next=9;break}return e.abrupt("return");case 9:return S({type:"SET_PAGE_INDEX",payload:T-1}),e.next=12,E({uri:t});case 12:case"end":return e.stop()}}),e)}))),[E,w,T]),_=l.useCallback((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S({type:"SET_PAGE_INDEX",payload:0}),e.next=3,E();case 3:case"end":return e.stop()}}),e)}))),[E]);l.useEffect((function(){S({type:"SET_LEADERBOARDS",payload:null}),S({type:"PURGE_NAVIGATION"})}),[t]),l.useEffect((function(){C&&t&&(S({type:"PURGE_NAVIGATION"}),E())}),[C,Z,E,t]);var B=l.useRef(null),U=l.useRef(null);return l.useEffect((function(){B.current===C&&U.current&&j&&!j.resetLaunchedAt&&E(),B.current=C,U.current=j?j.resetLaunchedAt:null}),[j,C,E]),(0,p.Y)((function(){P({shouldClearBeforeFetching:!1})}),!y||Object.values(y).every((function(e){return!e.resetLaunchedAt}))?null:5e3),(0,f.jsx)(c.Z.Provider,{value:{leaderboards:y?Object.values(y):null,currentLeaderboard:j,displayOnlyBestEntry:Z,browsing:{entries:k,goToNextPage:w[T+1]?D:null,goToPreviousPage:1===T||w[T-1]?N:null,goToFirstPage:0===T?null:_},setDisplayOnlyBestEntry:L,createLeaderboard:I,listLeaderboards:P,selectLeaderboard:M,updateLeaderboard:A,resetLeaderboard:O,deleteLeaderboard:R,deleteLeaderboardEntry:F,fetchLeaderboardEntries:E},children:n})}},63873:function(e,t,n){"use strict";n.d(t,{bf:function(){return w},oK:function(){return k},tj:function(){return T}});var r=n(29439),i=n(74165),a=n(15861),o=n(36600),s=n(28381),l=n(1773),c=n(10888),u=n(40243),d=n(86278),p=n(64480),f=n(11374),h=n(61325),g=n(71106),m=n(14737),x=n(16999),v=n(84360),b=n(31689),C=n(29343),j=n.g.gd,y=function(e){e.leaderboardsToReplace;var t=e.onClose,n=e.onTriggerReplace,r=s.useContext(g.ZP),i=r.authenticated,a=r.onOpenLoginDialog;return(0,C.jsx)(l.ZP,{title:(0,C.jsx)(o.Trans,{id:"Set up new leaderboards for this game"}),actions:i?[(0,C.jsx)(c.Z,{primary:!0,label:(0,C.jsx)(o.Trans,{id:"Close"}),onClick:t},"register-close"),(0,C.jsx)(l.vF,{primary:!0,label:(0,C.jsx)(o.Trans,{id:"Create new leaderboards now"}),onClick:n,id:"create-and-replace-new-leaderboard"},"register-game-now")]:[(0,C.jsx)(c.Z,{primary:!0,label:(0,C.jsx)(o.Trans,{id:"Close"}),onClick:t},"login-close"),(0,C.jsx)(l.vF,{label:(0,C.jsx)(o.Trans,{id:"Login now"}),primary:!0,onClick:function(){return a()},id:"login-now"},"login-now")],open:!0,maxWidth:"sm",onRequestClose:t,children:(0,C.jsx)(u.x1,{noMargin:!0,children:(0,C.jsxs)(h.ak,{noMargin:!0,children:[(0,C.jsx)(d.Z,{children:(0,C.jsx)(o.Trans,{id:"This game is using leaderboards. GDevelop will create new leaderboards for this game in your account, so that the game is ready to be played and players can send their scores."})}),(0,C.jsx)(d.Z,{children:(0,C.jsx)(o.Trans,{id:"If you skip this step, you can still do it manually later from the leaderboards panel in your Games Dashboard."})})]})})})},Z=function(e){var t=e.erroredLeaderboards,n=e.onRetry,r=e.onAbandon,i=e.progress,a=t.length>0;return(0,C.jsx)(l.ZP,{title:null,actions:[n?(0,C.jsx)(l.vF,{label:(0,C.jsx)(o.Trans,{id:"Retry"}),primary:!0,onClick:n},"retry"):null,(0,C.jsx)(c.Z,{label:r?(0,C.jsx)(o.Trans,{id:"Abandon"}):(0,C.jsx)(o.Trans,{id:"Please wait..."}),disabled:!r,onClick:r},"close")],cannotBeDismissed:!a,open:!0,maxWidth:"sm",children:(0,C.jsx)(u.x1,{noMargin:!0,children:(0,C.jsxs)(h.ak,{expand:!0,children:[(0,C.jsx)(d.Z,{children:a&&100===i?(0,C.jsx)(o.Trans,{id:"There were errors when preparing new leaderboards for the project."}):(0,C.jsx)(o.Trans,{id:"Preparing the leaderboard for your game..."})}),(0,C.jsx)(u.x1,{noMargin:!0,expand:!0,children:(0,C.jsx)(p.Z,{variant:"determinate",value:i})}),a&&100===i?(0,C.jsxs)(f.iA,{children:[(0,C.jsx)(f.xD,{children:(0,C.jsxs)(f.SC,{children:[(0,C.jsx)(f.bY,{children:"Leaderboard ID"}),(0,C.jsx)(f.bY,{children:"Error"})]})}),(0,C.jsx)(f.RM,{children:t.map((function(e){var t=e.leaderboardId,n=e.error;return(0,C.jsxs)(f.SC,{children:[(0,C.jsx)(f.Nn,{children:t}),(0,C.jsx)(f.Nn,{children:n.toString()})]},t)}))})]}):null]})})})},k=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,o,s,l,c,u,d,p,f,h,g,C,y;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.authenticatedUser,r=t.project,o=t.sourceGameId,s=t.leaderboardsToReplace,l=t.setProgress,c=n.getAuthorizationHeader,u=n.profile,s&&r&&o){e.next=4;break}throw new Error("No leaderboards found in events sheet.");case 4:if(u){e.next=6;break}throw new Error("User is not connected.");case 6:return d=s.length+2,p=1/d*100,f={},l(0),e.prev=10,e.next=13,(0,x.r$)(c,u.id,(0,b.dN)({projectId:r.getProjectUuid(),projectName:r.getName(),projectAuthor:r.getAuthor(),savedStatus:"draft"}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.error("Could not register game before leaderboard replacement: ",e.t0);case 18:return l(p),h=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.vW)(t,r.getProjectUuid(),{sourceGameId:o,sourceLeaderboardId:n});case 3:return a=e.sent,f[n]=a.id,l((function(e){return e+p})),e.abrupt("return",null);case 9:return e.prev=9,e.t0=e.catch(0),console.error("Could not duplicate leaderboard ".concat(n),e.t0),l((function(e){return e+p})),e.abrupt("return",{leaderboardId:n,error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),e.next=22,Promise.all(Array.from(s).map(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h(n,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:return g=e.sent,C=g.filter(Boolean),Object.keys(f).length&&(y=(0,v.R)(f),j.WholeProjectRefactorer.renameLeaderboards(r,y),y.delete()),l(100),e.abrupt("return",{leaderboardsWithErrors:C});case 27:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=e.project;return j.WholeProjectRefactorer.findAllLeaderboardIds(t).toNewVectorString().toJSArray()},T=function(){var e=s.useState(null),t=(0,r.Z)(e,2),n=t[0],o=t[1],l=s.useState(null),c=(0,r.Z)(l,2),u=c[0],d=c[1],p=s.useState(!1),f=(0,r.Z)(p,2),h=f[0],m=f[1],x=s.useState(null),v=(0,r.Z)(x,2),b=v[0],j=v[1],T=s.useContext(g.ZP),S=s.useState([]),P=(0,r.Z)(S,2),I=P[0],E=P[1],M=s.useState(0),L=(0,r.Z)(M,2),A=L[0],O=L[1],R=s.useState(null),F=(0,r.Z)(R,2),D=F[0],N=F[1],_=s.useState(null),B=(0,r.Z)(_,2),U=B[0],V=B[1],H=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b&&n&&u){e.next=2;break}return e.abrupt("return");case 2:return N(null),V(null),E([]),e.next=7,k({authenticatedUser:T,project:n,sourceGameId:u,leaderboardsToReplace:b,setProgress:O});case 7:if(t=e.sent,r=t.leaderboardsWithErrors,E(r),0!==r.length){e.next=14;break}return m(!1),j(null),e.abrupt("return",{someLeaderboardsWereDuplicated:!0});case 14:return e.abrupt("return",new Promise((function(e){N((function(){return function(){j(b.filter((function(e){return r.some((function(t){return t.leaderboardId===e}))}))),e(H())}})),V((function(){return function(){E([]),m(!1),j(null),e({someLeaderboardsWereDuplicated:!0})}}))})));case 15:case"end":return e.stop()}}),e)}))),[T,n,u,b,O,E,N,V,m]),z=s.useCallback((function(e,t){o(e),d(t),j(w({project:e}))}),[]);return{openLeaderboardReplacerDialogIfNeeded:z,renderLeaderboardReplacerDialog:function(){return b&&b.length?u&&n&&h&&T.authenticated?(0,C.jsx)(Z,{erroredLeaderboards:I,onRetry:D,onAbandon:U,progress:A}):(0,C.jsx)(y,{leaderboardsToReplace:b,onClose:function(){return j(null)},onTriggerReplace:function(){m(!0),H()}}):null}}}},67980:function(e,t,n){"use strict";n.d(t,{HB:function(){return p},LF:function(){return d}});var r=n(1413),i=(n(28381),n(3798)),a=n(17358),o=n(90569),s=n(65111),l=n(6996),c=n(29343),u={buttonBase:{height:"100%",width:"100%",borderRadius:8,cursor:"default",overflow:"hidden"},contentWrapper:{height:"100%",width:"100%",display:"flex"}},d=320,p=function(e){var t=e.children,n=e.onClick,p=e.size,f=e.disabled,h=function(e){var t=e.useDefaultDisabledStyle,n=e.noBorder,r=e.disableHoverAndFocusEffects;return(0,a.Z)((function(e){var i={boxSizing:"border-box",border:n?"none":"1px solid ".concat(e.palette.text.secondary),transition:"background-color 100ms ease","&:disabled":t?{opacity:e.palette.action.disabledOpacity}:void 0};return r||(i["&:hover"]={backgroundColor:e.palette.action.hover},i["&:focus"]={backgroundColor:e.palette.action.hover}),(0,o.Z)({root:i})}))()}({useDefaultDisabledStyle:e.useDefaultDisabledStyle,noBorder:e.noBorder,disableHoverAndFocusEffects:!n}),g=(0,l.UQ)().isMobile,m="banner"===p||g?void 0:"small"===p?200:d;return n?(0,c.jsx)(i.Z,{onClick:n,focusRipple:!0,elevation:2,style:(0,r.Z)((0,r.Z)({},u.buttonBase),{},{maxWidth:m}),classes:h,tabIndex:0,onKeyPress:function(e){(0,s.ph)(e)&&n()},disabled:f,children:(0,c.jsx)("div",{style:u.contentWrapper,children:t})}):(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)({},u.buttonBase),{},{maxWidth:m}),className:h.root,children:(0,c.jsx)("div",{style:u.contentWrapper,children:t})})}},56487:function(e,t,n){"use strict";n.d(t,{K:function(){return m},R1:function(){return p},S$:function(){return x},ZA:function(){return g},fl:function(){return h},gn:function(){return f}});var r=n(74165),i=n(15861),a=n(28381),o=n(41418),s=n(40243),l=n(27230),c=n(36262),u=n(71106),d=n(29343),p=function(e){return(e.isMobile?52:36)-2*s.XW},f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.cloudProjects,i=t.profile,a=n.filter((function(e){return!!e.committedAt&&!!e.lastCommittedBy&&e.lastCommittedBy!==i.id})),0!==(s=new Set(a.map((function(e){return e.lastCommittedBy})).filter(Boolean))).size){e.next=5;break}return e.abrupt("return",{});case 5:return e.prev=5,e.next=8,(0,o.TL)(Array.from(s));case 8:return l=e.sent,c={},n.forEach((function(e){if(e.lastCommittedBy&&e.committedAt){var t=l[e.lastCommittedBy];t&&(c[e.id]={lastModifiedByUsername:t.username,lastModifiedByIconUrl:t.iconUrl,lastModifiedAt:Date.parse(e.committedAt),lastKnownVersionId:e.currentVersion})}})),e.abrupt("return",c);case 14:return e.prev=14,e.t0=e.catch(5),console.error("Error while fetching public profiles of contributors of projects:",e.t0),e.abrupt("return",{});case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){return e.find((function(e){return e.internalName===t}))},g=function(e){var t=a.useContext(c.ZP).getRecentProjectFiles,n=a.useContext(u.ZP).cloudProjects,r=t().filter((function(t){return!e||t.fileMetadata&&t.fileMetadata.gameId===e}));return n&&(r=r.concat(m(n.filter((function(t){return!e||t.gameId===e}))))),r.sort((function(e,t){return e.fileMetadata.lastModifiedDate?t.fileMetadata.lastModifiedDate?t.fileMetadata.lastModifiedDate-e.fileMetadata.lastModifiedDate:-1:1})),r},m=function(e,t){return e.map((function(e){if(e.deletedAt)return null;var n={storageProviderName:"Cloud",fileMetadata:{fileIdentifier:e.id,lastModifiedDate:Date.parse(e.lastModifiedAt),name:e.name,gameId:e.gameId,version:e.currentVersion}};return t&&(n.fileMetadata.ownerId=t),n})).filter(Boolean)},x=function(e){var t=e.receivedGameTemplates,n=e.privateGameTemplateListingDatas,r=e.exampleShortHeaders,i=e.onSelectPrivateGameTemplateListingData,a=e.onSelectExampleShortHeader,o=e.i18n,s=(e.gdevelopTheme,e.numberOfItemsExclusivelyInCarousel,e.numberOfItemsInCarousel,e.privateGameTemplatesPeriodicity),c=e.showOwnedGameTemplatesFirst,u=e.disabled;if(!r||!n)return[];for(var p=r.filter((function(e){return!!e.previewImageUrls&&!!e.previewImageUrls[0]})),f=r.filter((function(e){return!e.previewImageUrls||!e.previewImageUrls[0]})),h=[],g=Math.max(p.length,n.length),m=0,x=0,v=0;v<g&&!(m>=n.length&&x>=p.length);v++){var b=n[m],C=p[x],j=s&&v>=1&&v%s===0;C&&h.push(C),j&&b&&b&&h.push(b),j&&m++,x++}f.forEach((function(e){h.push(e)}));var y=h.sort((function(e,n){if(c){var r=!!e.sellerId&&!!t&&!!t.find((function(t){return t.id===e.id})),i=!!n.sellerId&&!!t&&!!t.find((function(e){return e.id===n.id}));if(r&&!i)return-1;if(!r&&i)return 1}return 0})).map((function(e){return function(e){var t=e.item,n=e.onSelectGameTemplate,r=e.onSelectExample,i=(e.i18n,e.receivedGameTemplates),a=e.disabled;if(t.previewImageUrls)return(0,d.jsx)(l.Hm,{exampleShortHeader:t,onSelect:function(){return r(t)},disabled:a},t.id);var o=!!i&&!!i.find((function(e){return e.id===t.id}));return(0,d.jsx)(l.u7,{privateGameTemplateListingData:t,onSelect:function(){return n(t)},owned:o,disabled:a},t.id)}({item:e,onSelectGameTemplate:i,onSelectExample:a,i18n:o,receivedGameTemplates:t,disabled:u})}));return y}},85902:function(e,t,n){"use strict";n.d(t,{xM:function(){return I},wl:function(){return P}});var r=n(1413),i=n(29439),a=n(36600),o=n(28381),s=n(40243),l=n(82054),c=n(51598),u=n(95074),d=n(78118),p=n(29343),f=o.memo((function(e){return(0,p.jsxs)(d.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.19971 5.15978C7.38761 5.36213 7.37589 5.6785 7.17354 5.8664L5.23478 7.66667L7.17354 9.46694C7.37589 9.65484 7.38761 9.97121 7.19971 10.1736C7.01181 10.3759 6.69544 10.3876 6.49309 10.1997L4.15975 8.03307C4.05787 7.93846 3.99998 7.8057 3.99998 7.66667C3.99998 7.52763 4.05787 7.39488 4.15975 7.30027L6.49309 5.13361C6.69544 4.9457 7.01181 4.95742 7.19971 5.15978Z",fill:"currentColor"}),(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8664 5.15978C11.0543 5.36213 11.0426 5.6785 10.8402 5.8664L8.90147 7.66667L10.8402 9.46694C11.0426 9.65484 11.0543 9.97121 10.8664 10.1736C10.6785 10.3759 10.3621 10.3876 10.1598 10.1997L7.82644 8.03307C7.72456 7.93846 7.66666 7.8057 7.66666 7.66667C7.66666 7.52763 7.72456 7.39488 7.82644 7.30027L10.1598 5.13361C10.3621 4.9457 10.6785 4.95742 10.8664 5.15978Z",fill:"currentColor"})]}))})),h=n(68789),g=n(98981),m=o.memo((function(e){return(0,p.jsxs)(d.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,p.jsx)("path",{d:"M7.2079 4.25C6.08921 4.25 5.15646 5.04939 4.90073 6.12513C4.21877 8.99403 3.61173 11.5052 2.89195 14.2377C2.42794 15.9991 3.14788 17.6469 4.43117 18.3752C5.07736 18.7419 5.85387 18.8626 6.63456 18.6338C7.41151 18.4061 8.12572 17.8531 8.70885 16.9922C8.94115 16.6493 8.85145 16.1829 8.50851 15.9506C8.16556 15.7183 7.69924 15.808 7.46694 16.151C7.034 16.7901 6.58495 17.0852 6.21265 17.1943C5.84409 17.3024 5.48536 17.2487 5.1715 17.0706C4.5347 16.7092 4.03537 15.7856 4.34247 14.6198C5.06704 11.8691 5.67749 9.3435 6.36006 6.47205C6.46711 6.02173 6.83463 5.75 7.2079 5.75H17.6749C18.0509 5.75 18.4247 6.02298 18.5399 6.47691C18.8684 7.77218 19.4991 10.2222 20.6575 14.6198C20.9646 15.7856 20.4653 16.7092 19.8285 17.0706C19.5146 17.2487 19.1559 17.3024 18.7873 17.1943C18.415 17.0852 17.966 16.7901 17.533 16.151C17.3007 15.808 16.8344 15.7183 16.4915 15.9506C16.1485 16.1829 16.0588 16.6493 16.2911 16.9922C16.8743 17.8531 17.5885 18.4061 18.3654 18.6338C19.1461 18.8626 19.9226 18.7419 20.5688 18.3752C21.8521 17.6469 22.572 15.9991 22.108 14.2377C20.9503 9.84271 20.3208 7.39736 19.9938 6.10808C19.7234 5.04219 18.7908 4.25 17.6749 4.25H7.2079Z",fill:"currentColor"}),(0,p.jsx)("path",{d:"M9.24999 8C9.24999 7.58579 8.9142 7.25 8.49999 7.25C8.08577 7.25 7.74999 7.58579 7.74999 8V8.25H7.49999C7.08577 8.25 6.74999 8.58579 6.74999 9C6.74999 9.41421 7.08577 9.75 7.49999 9.75H7.74999V10C7.74999 10.4142 8.08577 10.75 8.49999 10.75C8.9142 10.75 9.24999 10.4142 9.24999 10V9.75H9.49999C9.9142 9.75 10.25 9.41421 10.25 9C10.25 8.58579 9.9142 8.25 9.49999 8.25H9.24999V8Z",fill:"currentColor"}),(0,p.jsx)("path",{d:"M14.75 9C14.75 8.58579 15.0858 8.25 15.5 8.25H16.5C16.9142 8.25 17.25 8.58579 17.25 9C17.25 9.41421 16.9142 9.75 16.5 9.75H15.5C15.0858 9.75 14.75 9.41421 14.75 9Z",fill:"currentColor"}),(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.74999 13.5C6.74999 12.2573 7.75735 11.25 8.99999 11.25C10.2426 11.25 11.25 12.2573 11.25 13.5C11.25 14.7427 10.2426 15.75 8.99999 15.75C7.75735 15.75 6.74999 14.7427 6.74999 13.5ZM8.99999 12.75C8.58577 12.75 8.24999 13.0858 8.24999 13.5C8.24999 13.9142 8.58577 14.25 8.99999 14.25C9.41421 14.25 9.74999 13.9142 9.74999 13.5C9.74999 13.0858 9.41421 12.75 8.99999 12.75Z",fill:"currentColor"}),(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 11.25C14.7573 11.25 13.75 12.2573 13.75 13.5C13.75 14.7427 14.7573 15.75 16 15.75C17.2427 15.75 18.25 14.7427 18.25 13.5C18.25 12.2573 17.2427 11.25 16 11.25ZM15.25 13.5C15.25 13.0858 15.5858 12.75 16 12.75C16.4142 12.75 16.75 13.0858 16.75 13.5C16.75 13.9142 16.4142 14.25 16 14.25C15.5858 14.25 15.25 13.9142 15.25 13.5Z",fill:"currentColor"})]}))})),x=o.memo((function(e){return(0,p.jsxs)(d.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.17647 6.83741C6.22614 7.39928 6.46235 7.93024 6.85157 8.32046C6.76585 8.53752 6.69961 8.72864 6.65166 8.87697C6.61933 8.97698 6.59517 9.058 6.57885 9.11497C6.57069 9.14347 6.56447 9.16599 6.56017 9.1819L6.55513 9.20074L6.55368 9.20631L6.55321 9.2081L6.55292 9.20922C6.4844 9.47673 6.64571 9.74914 6.91322 9.81766C7.18066 9.88616 7.45305 9.72477 7.52165 9.45736L7.52219 9.4553L7.52544 9.44313C7.52852 9.43176 7.53342 9.41397 7.54018 9.39039C7.5537 9.34319 7.57461 9.27295 7.60318 9.18455C7.63383 9.08973 7.67313 8.97456 7.72138 8.84495C7.96275 8.91684 8.21764 8.94222 8.47501 8.91532L8.4761 8.91521L8.5437 8.90839L8.54551 8.9082C8.83779 8.87764 9.11909 8.78241 9.37315 8.63081C9.62698 8.47934 9.84763 8.27523 10.0246 8.03324C10.2015 7.79133 10.3321 7.51539 10.4112 7.22207C10.4902 6.92885 10.5167 6.62167 10.4899 6.31818L10.3574 4.80767C10.3426 4.63964 10.2687 4.47192 10.1342 4.34705C9.99748 4.22008 9.80853 4.14918 9.6087 4.1703L8.0569 4.33427C7.77403 4.36403 7.50188 4.45629 7.25619 4.60298C7.01062 4.74958 6.79729 4.947 6.62622 5.18089C6.45522 5.4147 6.32906 5.68129 6.25267 5.96456C6.17627 6.24782 6.15057 6.54425 6.17647 6.83741ZM9.49372 6.40605L9.38787 5.1992L8.16198 5.32874C8.0274 5.34287 7.89359 5.3871 7.7688 5.4616C7.64379 5.53623 7.52903 5.64045 7.43337 5.77124C7.33765 5.90211 7.26372 6.05605 7.21817 6.22494C7.17262 6.39383 7.15694 6.57229 7.17259 6.74938C7.19024 6.94905 7.24591 7.13594 7.33093 7.29932C7.56898 6.87084 7.86977 6.42831 8.24111 6.0533C8.43541 5.85708 8.75199 5.85552 8.94821 6.04982C9.14443 6.24412 9.14599 6.5607 8.95169 6.75692C8.62331 7.08855 8.35145 7.50381 8.13471 7.91513C8.21345 7.9271 8.29292 7.92895 8.37161 7.92068L8.37366 7.92047L8.44149 7.91363L8.44226 7.91355C8.58579 7.89842 8.72797 7.85129 8.86071 7.77208C8.99391 7.6926 9.11593 7.58173 9.21747 7.44289C9.31908 7.30397 9.39742 7.14073 9.44563 6.96185C9.49385 6.78295 9.51035 6.59352 9.49372 6.40605Z",fill:"currentColor"}),(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.37034 13.2963C3.02653 12.9525 2.83337 12.4862 2.83337 12V3.83329C2.83337 3.39127 3.00897 2.96734 3.32153 2.65478C3.63409 2.34222 4.05801 2.16663 4.50004 2.16663H12.3167C12.5421 2.16663 12.7583 2.25618 12.9177 2.41559C13.0772 2.57499 13.1667 2.79119 13.1667 3.01663V10.6665C13.1667 10.9426 12.9428 11.1665 12.6667 11.1665L4.66671 11.1666C4.44569 11.1666 4.23373 11.2544 4.07745 11.4107C3.92117 11.567 3.83337 11.7789 3.83337 12C3.83337 12.221 3.92117 12.4329 4.07745 12.5892C4.23373 12.7455 4.44569 12.8333 4.66671 12.8333H12.6667C12.9428 12.8333 13.1667 13.0572 13.1667 13.3333C13.1667 13.6094 12.9428 13.8333 12.6667 13.8333H4.66671C4.18048 13.8333 3.71416 13.6401 3.37034 13.2963ZM4.02864 3.36189C4.15366 3.23686 4.32323 3.16663 4.50004 3.16663H12.1667V10.1666H4.66671C4.37429 10.1666 4.08907 10.2365 3.83337 10.367V3.83329C3.83337 3.65648 3.90361 3.48691 4.02864 3.36189Z",fill:"currentColor"})]}))})),v=n(6879),b=n(23664),C=n(24893),j=n(24910),y=n(80882),Z=n(68151),k=n(71106),w=n(48409),T={container:{pointerEvents:"all",display:"flex"},drawerContent:{height:"100%",width:250,paddingBottom:10,overflowX:"hidden",display:"flex",flexDirection:"column"},drawerTopButtonsContainer:{flex:1,marginTop:"var(--safe-area-inset-top)"},drawerBottomButtonsContainer:{marginBottom:"var(--safe-area-inset-bottom)"}},S={create:{label:(0,p.jsx)(a.Trans,{id:"Create"}),tab:"create",id:"home-create-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,p.jsx)(h.Z,{fontSize:n,color:t})}},shop:{label:(0,p.jsx)(a.Trans,{id:"Shop"}),tab:"shop",id:"home-shop-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,p.jsx)(v.Z,{fontSize:n,color:t})}},learn:{label:(0,p.jsx)(a.Trans,{id:"Learn"}),tab:"learn",id:"home-learn-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,p.jsx)(g.Z,{fontSize:n,color:t})}},play:{label:(0,p.jsx)(a.Trans,{id:"Play"}),tab:"play",id:"home-play-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,p.jsx)(m,{fontSize:n,color:t})}},"team-view":{label:(0,p.jsx)(a.Trans,{id:"Teach"}),tab:"team-view",id:"team-view-tab",getIcon:function(e){var t=e.color,n=e.fontSize;return(0,p.jsx)(x,{fontSize:n,color:t})}}},P=function(e){var t=e.limits;return["learn","create",!t||!(t.capabilities.classrooms&&t.capabilities.classrooms.hidePlayTab)?"play":null,!t||!(t.capabilities.classrooms&&t.capabilities.classrooms.hidePremiumProducts)?"shop":null,!(0,Z.jX)(t)&&!(0,w._F)()?"team-view":null].filter(Boolean).map((function(e){return S[e]}))},I=function(e){var t=e.setActiveTab,n=e.activeTab,d=e.onOpenPreferences,h=e.onOpenAbout,g=o.useContext(j.Z),m=o.useContext(k.ZP).limits,x=o.useState(!1),v=(0,i.Z)(x,2),Z=v[0],w=v[1],S=P({limits:m}),I=[{label:(0,p.jsx)(a.Trans,{id:"Preferences"}),id:"settings",onClick:d,getIcon:function(e){var t=e.color,n=e.fontSize;return(0,p.jsx)(b.Z,{fontSize:n,color:t})}},{label:(0,p.jsx)(a.Trans,{id:"About GDevelop"}),id:"about-gdevelop",onClick:h,getIcon:function(e){var t=e.color,n=e.fontSize;return(0,p.jsx)(C.Z,{fontSize:n,color:t})}}];return(0,p.jsxs)("div",{style:T.container,children:[(0,p.jsx)(y.ZP,{activeTab:n,onOpenAbout:h,onOpenHomePageMenuDrawer:function(){return w(!0)},onOpenPreferences:d,setActiveTab:t}),(0,p.jsx)(l.ZP,{open:Z,PaperProps:{style:(0,r.Z)((0,r.Z)({},T.drawerContent),{},{backgroundColor:g.home.header.backgroundColor}),className:"safe-area-aware-left-container"},onClose:function(){w(!1)},ModalProps:{keepMounted:!0},children:(0,p.jsx)(s.x1,{expand:!0,children:(0,p.jsxs)(s.sg,{expand:!0,children:[(0,p.jsx)("div",{style:T.drawerTopButtonsContainer,children:(0,p.jsxs)(s.sg,{noMargin:!0,expand:!0,children:[(0,p.jsx)(s.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,p.jsx)(c.Z,{onClick:function(){w(!1)},size:"small",children:(0,p.jsx)(f,{})})}),S.map((function(e){var r=e.label,i=e.tab,a=e.getIcon,o=e.id;return(0,p.jsx)(u.Z,{label:r,onClick:function(){t(i),w(!1)},getIcon:a,isActive:n===i},o)}))]})}),(0,p.jsx)("div",{style:T.drawerBottomButtonsContainer,children:(0,p.jsx)(s.sg,{noMargin:!0,children:I.map((function(e){var t=e.label,n=e.getIcon,r=e.onClick,i=e.id;return(0,p.jsx)(u.Z,{label:t,onClick:r,getIcon:n,isActive:!1},i)}))})})]})})})]})}},80882:function(e,t,n){"use strict";n.d(t,{ZP:function(){return T},iL:function(){return Z},$s:function(){return k},aD:function(){return y}});var r=n(1413),i=n(36600),a=n(28381),o=n(40243),s=n(6996),l=n(51598),c=n(78118),u=n(29343),d=a.memo((function(e){return(0,u.jsxs)(c.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.80029 10.1735C8.61239 9.97112 8.62411 9.65475 8.82646 9.46685L10.7652 7.66658L8.82646 5.86631C8.62411 5.67841 8.61239 5.36205 8.80029 5.15969C8.98819 4.95734 9.30456 4.94562 9.50692 5.13352L11.8402 7.30019C11.9421 7.39479 12 7.52755 12 7.66658C12 7.80562 11.9421 7.93837 11.8402 8.03298L9.50691 10.1996C9.30456 10.3875 8.98819 10.3758 8.80029 10.1735Z",fill:"currentColor"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.13361 10.1735C4.9457 9.97112 4.95742 9.65475 5.15978 9.46685L7.09853 7.66658L5.15978 5.86631C4.95742 5.67841 4.9457 5.36205 5.13361 5.15969C5.32151 4.95734 5.63787 4.94562 5.84023 5.13352L8.17356 7.30019C8.27545 7.39479 8.33334 7.52755 8.33334 7.66658C8.33334 7.80562 8.27545 7.93837 8.17356 8.03298L5.84023 10.1996C5.63787 10.3875 5.32151 10.3758 5.13361 10.1735Z",fill:"currentColor"})]}))})),p=n(95074),f=n(23664),h=n(24893),g=n(24910),m=n(20914),x=n(85902),v=n(11123),b=n(71106),C=n(86682),j=n(86278),y=64,Z=230,k=p.x+2*o.XW,w={desktopMenu:{paddingTop:C.IP,paddingBottom:10,minWidth:Z,display:"flex",flexDirection:"column"},mobileMenu:{paddingTop:10,paddingBottom:10,display:"flex",flexDirection:"column"},mobileContainer:{width:"100%",fontSize:24,height:y},buttonContainer:{display:"flex",alignItems:"center",justifyContent:"center",flex:1},bottomButtonsContainer:{marginBottom:"var(--safe-area-inset-bottom)"},mobileButton:{padding:4,marginBottom:12,fontSize:"inherit"},icon:{display:"flex",justifyContent:"center",marginBottom:2}},T=function(e){var t=e.setActiveTab,n=e.activeTab,c=e.onOpenPreferences,C=e.onOpenAbout,Z=e.onOpenHomePageMenuDrawer,k=(0,s.UQ)(),T=k.isMobile,S=k.isMediumScreen,P=T||S,I=a.useContext(g.Z),E=a.useContext(b.ZP).limits,M=(0,x.wl)({limits:E}),L=[{label:(0,u.jsx)(i.Trans,{id:"Preferences"}),id:"settings",onClick:c,getIcon:function(e){var t=e.color,n=e.fontSize;return(0,u.jsx)(f.Z,{fontSize:n,color:t})}},{label:(0,u.jsx)(i.Trans,{id:"About GDevelop"}),id:"about-gdevelop",onClick:C,getIcon:function(e){var t=e.color,n=e.fontSize;return(0,u.jsx)(h.Z,{fontSize:n,color:t})}}];return T?(0,u.jsx)(m.Z,{background:"medium",square:!0,style:(0,r.Z)((0,r.Z)({},w.mobileContainer),{},{borderTop:"1px solid ".concat(I.home.separator.color)}),children:(0,u.jsx)(v.o,{height:y,children:(0,u.jsx)(v.k,{spaceOut:!0,children:M.map((function(e){var i=e.label,a=e.tab,s=e.getIcon,c=e.id,d=n===a;return(0,u.jsx)("div",{style:(0,r.Z)((0,r.Z)({},w.buttonContainer),{},{borderTop:"3px solid ".concat(d?I.iconButton.selectedBackgroundColor:"transparent")},d?{}:{color:I.text.color.secondary}),children:(0,u.jsx)(l.Z,{color:"inherit",disableRipple:!0,disableFocusRipple:!0,disableHover:!0,style:w.mobileButton,onClick:function(){t(a)},selected:!1,id:c,children:(0,u.jsxs)(o.sg,{noMargin:!0,children:[(0,u.jsx)("span",{style:w.icon,children:s({color:"inherit",fontSize:"inherit"})}),(0,u.jsx)(j.Z,{size:"body-small",color:"inherit",noMargin:!0,children:i})]})})},c)}))})})}):(0,u.jsxs)(m.Z,{style:(0,r.Z)((0,r.Z)({},P?w.mobileMenu:w.desktopMenu),{},{borderRight:"1px solid ".concat(I.home.separator.color)}),square:!0,background:"dark",children:[(0,u.jsxs)(o.sg,{expand:!0,children:[P&&(0,u.jsx)(l.Z,{onClick:Z,size:"small",children:(0,u.jsx)(d,{})}),M.map((function(e){var r=e.label,i=e.tab,a=e.getIcon,o=e.id;return(0,u.jsx)(p.Z,{label:r,onClick:function(){return t(i)},getIcon:a,isActive:n===i,hideLabel:P,id:o},o)}))]}),(0,u.jsx)("div",{style:w.bottomButtonsContainer,children:(0,u.jsx)(o.sg,{children:L.map((function(e){var t=e.label,n=e.getIcon,r=e.onClick,i=e.id;return(0,u.jsx)(p.Z,{label:t,onClick:r,getIcon:n,isActive:!1,hideLabel:P,id:i},i)}))})})]})}},72037:function(e,t,n){"use strict";n.d(t,{V0:function(){return j}});var r=n(1413),i=n(28381),a=n(36600),o=n(61325),s=n(86278),l=n(67980),c=n(40243),u=n(7906),d=n(92078),p=n(31318),f=n(48784),h=n(15859),g=n(8511),m=n(24910),x=n(29343),v={cardTextContainer:{flex:1,display:"flex",justifyContent:"center",padding:"8px 16px 8px 16px",minHeight:220},image:{width:"100%",aspectRatio:"16 / 9"},specializationDot:{width:8,height:8,borderRadius:"50%",flexShrink:0},imageContainer:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},skeletonImageContainer:{display:"flex",alignItems:"stretch",aspectRatio:"16 / 9",flexDirection:"column"},newLabel:{position:"absolute",top:7,left:9,borderRadius:4,backgroundColor:"#F03F18",fontWeight:"bold",color:"white",padding:"2px 6px"},chip:{height:24}},b={"game-development":(0,x.jsx)(a.Trans,{id:"Game Development"}),"interaction-design":(0,x.jsx)(a.Trans,{id:"Interaction Design"}),marketing:(0,x.jsx)(a.Trans,{id:"Marketing"}),"game-design":(0,x.jsx)(a.Trans,{id:"Game Design"}),"programming-scripting":(0,x.jsx)(a.Trans,{id:"Programming & Scripting"}),"art-animation":(0,x.jsx)(a.Trans,{id:"Art & Animation"}),"audio-sound":(0,x.jsx)(a.Trans,{id:"Audio & Sound"}),"production-management":(0,x.jsx)(a.Trans,{id:"Production & Project Management"}),"liveops-analytics":(0,x.jsx)(a.Trans,{id:"Live Ops & Analytics"}),"narrative-writing":(0,x.jsx)(a.Trans,{id:"Narrative & Writing"})},C={"game-development":"#5CB0FF","interaction-design":"#CAC84E",marketing:"#FD3AE6","game-design":"#F28E2B","programming-scripting":"#59A14F","art-animation":"#B07AA1","audio-sound":"#E15759","production-management":"#9C755F","liveops-analytics":"#76B7B2","narrative-writing":"#79706E"},j=function(e){var t="loading"===e?(0,x.jsx)(a.Trans,{id:"Loading"}):b[e];return t||(console.warn('No label found for specializationId "'.concat(e,'". Using default label.')),t=(0,x.jsx)(a.Trans,{id:"{0}",values:{0:e.replace(/-/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))}})),{label:t,color:C[e]||"#4F28CD"}};t.ZP=function(e){var t=e.completion,n=e.course,b=e.courseListingData,C=e.onClick,y=e.discountedPrice,Z=e.disabled,k=i.useContext(m.Z),w=j(n?n.specializationId:"loading");return(0,x.jsx)(a.I18n,{children:function(e){var i,m=e.i18n;return(0,x.jsx)(l.HB,{onClick:Z?void 0:C,size:"large",children:n&&b?(0,x.jsxs)(c.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[(0,x.jsxs)("div",{style:v.imageContainer,children:[(0,x.jsx)("img",{src:(0,d.a)(m,n.imageUrlByLocale),style:v.image,alt:""}),n.newUntil&&n.newUntil>Date.now()&&(0,x.jsx)("div",{style:v.newLabel,children:(0,x.jsx)(s.Z,{color:"inherit",noMargin:!0,displayInlineAsSpan:!0,children:(0,x.jsx)(a.Trans,{id:"New"})})})]}),(0,x.jsx)("div",{style:v.cardTextContainer,children:(0,x.jsxs)(o.ak,{noMargin:!0,expand:!0,justifyContent:"space-between",useFullHeight:!0,noOverflowParent:!0,children:[(0,x.jsxs)(o.ak,{noMargin:!0,expand:!0,justifyContent:"flex-start",useFullHeight:!0,noOverflowParent:!0,children:[(0,x.jsxs)(o.pJ,{alignItems:"center",noMargin:!0,children:[(0,x.jsx)("span",{style:(0,r.Z)((0,r.Z)({},v.specializationDot),{},{backgroundColor:w.color})}),(0,x.jsx)(s.Z,{displayInlineAsSpan:!0,size:"body-small",noMargin:!0,color:"secondary",style:p.t,children:w.label})]}),(0,x.jsxs)(o.pJ,{alignItems:"center",noMargin:!0,children:[(0,x.jsx)(u.Z,{value:t?t.completedChapters/t.chapters*100:0}),(0,x.jsx)(s.Z,{displayInlineAsSpan:!0,size:"body-small",noMargin:!0,color:"secondary",children:t?"".concat(t.completedChapters,"/").concat(t.chapters):"-/-"})]}),(0,x.jsx)(s.Z,{size:"sub-title",noMargin:!0,color:"primary",align:"left",children:(0,d.a)(m,n.titleByLocale)}),(0,x.jsx)(s.Z,{noMargin:!0,color:"secondary",align:"left",children:(0,d.a)(m,n.shortDescriptionByLocale)})]}),(0,x.jsx)("div",{style:{color:k.text.color.secondary},children:(0,x.jsxs)(c.x1,{justifyContent:"space-between",alignItems:"flex-end",children:[(0,x.jsx)(g.Z,{style:(0,r.Z)((0,r.Z)({},v.chip),{},{border:"1px solid ".concat((i=n.levelByLocale.en,i.toLowerCase().includes("advanced")?"#FF8569":i.toLowerCase().includes("intermediate")?"#FFBC57":"#3BF7F4"))}),label:(0,d.a)(m,n.levelByLocale),variant:"outlined"}),(0,h.MS)({i18n:m,productListingData:b,usageType:"default",showBothPrices:"column",owned:!n.isLocked,discountedPrice:y})]})})]})})]}):(0,x.jsxs)(c.sg,{noMargin:!0,expand:!0,children:[(0,x.jsx)("div",{style:v.skeletonImageContainer,children:(0,x.jsx)(f.Z,{variant:"rect",height:"100%"})}),(0,x.jsx)(c.x1,{expand:!0,children:(0,x.jsxs)(c.sg,{expand:!0,children:[(0,x.jsx)(f.Z,{height:20}),(0,x.jsx)(f.Z,{height:20}),(0,x.jsx)(f.Z,{height:30}),(0,x.jsx)(f.Z,{height:100}),(0,x.jsx)(f.Z,{height:50})]})})]})})}})}},74802:function(e,t,n){"use strict";n.d(t,{Ao:function(){return c},GN:function(){return d}});var r=n(1413),i=n(28381),a=n(24910),o=n(80882),s=n(20914),l=n(29343),c="games-platform-frame",u={paper:{position:"absolute",overflow:"hidden"},iframe:{border:0,width:"100%",height:"100%"}},d="v1";t.ZP=function(e){var t=e.initialGameId,n=e.loaded,p=e.visible,f=e.iframePosition,h=i.useContext(a.Z).palette.type,g=i.useRef(t),m=new URL(g.current?"/app-embedded/".concat(d,"/games/").concat(g.current):"/app-embedded/".concat(d,"/").concat(h),"https://gd.games");g.current&&m.searchParams.set("theme",h);var x=n?m.toString():"";i.useEffect((function(){n||(g.current=t)}),[n,t]);var v=f&&!f.isMobile?f.top:0,b=f?f.left:0,C=f?f.width:"100%",j=f&&!f.isMobile?f.height:"calc(100% - ".concat(o.aD,"px)");return(0,l.jsx)(s.Z,{square:!0,background:"dark",style:(0,r.Z)((0,r.Z)({},u.paper),{},{width:C,height:j,left:b,top:v,display:p?"block":"none"}),children:(0,l.jsx)("iframe",{id:c,src:x,allow:"autoplay; fullscreen *; geolocation; microphone; camera; midi; monetization; xr-spatial-tracking; gamepad; gyroscope; accelerometer; xr; keyboard-map *; focus-without-user-activation *; screen-wake-lock; clipboard-read; clipboard-write; web-share",sandbox:"allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts allow-same-origin allow-popups-to-escape-sandbox allow-downloads",title:"gdgames",allowFullScreen:!0,style:u.iframe,onLoad:function(e){e.currentTarget.focus()}})})}},86682:function(e,t,n){"use strict";n.d(t,{IP:function(){return L},L:function(){return R},ZP:function(){return F}});var r=n(1413),i=n(36600),a=n(28381),o=n(40243),s=n(6996),l=n(86278),c=n(56809),u=n(42699),d=n(20914),p=n(61325),f=n(38092),h=n(75383),g=n(78081),m=n(60022),x=n(92078),v=n(2066),b=n(96210),C=n(36262),j=n(32832),y=n(70804),Z=function(e){var t=(0,y.Z)(/\[!\[([^\][]*)\]\(([^\s]*)\)\]\(([^\s]*)\)/,{alt:1,imageSource:2,linkHref:3}),n=e.match(t),r=n&&n.groups;if(r&&r.alt&&r.imageSource&&r.linkHref){if(r.linkHref.startsWith("https://editor.gdevelop.io")){var i=new URLSearchParams(r.linkHref.replace(/.*\?/,"")),a=i.get("initial-dialog"),o={};if(i.forEach((function(e,t){"initial-dialog"!==t&&(o[t]=e)})),a)return{message:e.replace(t,"![".concat(r.alt,"](").concat(r.imageSource,")")),routeNavigationParams:{route:a,params:o},isClickableContent:!0}}return{message:e,isClickableContent:!0}}var s=(0,y.Z)(/!\[([^\][]*)\]\(([^\s]*)\)/,{alt:1,imageSource:2});return(r=(n=e.match(s))&&n.groups)&&r.alt&&r.imageSource,{message:e}},k=n(30609),w=n(69186),T=n(67674),S=n(29343),P={markdownContainer:{transition:"transform 0.3s ease-in-out"}},I=function(e){var t=e.level,n=e.canClose,r=e.addMargins,c=e.hideLoader,u=a.useContext(b.i),y=u.announcements,I=u.error,E=u.fetchAnnouncementsAndPromotions,M=a.useContext(C.ZP),L=M.values,A=M.showAnnouncement,O=a.useContext(k.ZP).navigateToRoute,R=(0,s.UQ)().isMobile,F=(0,w.Z)((function(e){return(0,T.Z)({root:{"&:hover":{transform:"scale(1.02)"},"&:focus":{transform:"scale(1.02)",outline:"none"}}})}))();if(I&&!c)return(0,S.jsx)(h.Z,{onRetry:E,children:(0,S.jsx)(i.Trans,{id:"Can't load the announcements. Verify your internet connection or try again later."})});if(!y)return c?null:(0,S.jsx)(g.Z,{});var D=t?y.filter((function(e){return e.level===t})):y,N=n?D.filter((function(e){return!L.hiddenAnnouncements[e.id]})):D;return N.length?(0,S.jsx)(i.I18n,{children:function(e){var t=e.i18n;return(0,S.jsx)(d.Z,{square:!0,background:"dark",children:(0,S.jsx)(o.x1,{noMargin:!r,children:(0,S.jsx)(p.ak,{noMargin:!r,expand:!0,children:N.map((function(e,r){var i=e.buttonLabelByLocale,a=e.buttonUrl,o=function(e,t){var n=(0,x.a)(e,t.titleByLocale),r=(0,x.a)(e,t.markdownMessageByLocale),i=t.mobileMarkdownMessageByLocale?(0,x.a)(e,t.mobileMarkdownMessageByLocale):r,a=Z(r),o=a.message,s=a.routeNavigationParams,l=a.isClickableContent,c=Z(i),u=c.message,d=c.routeNavigationParams,p=c.isClickableContent;return{title:n,desktopMessage:o,mobileMessage:u,desktopRouteNavigationParams:s,mobileRouteNavigationParams:d,isClickableContent:!!l||!!p}}(t,e),s=o.title,c=o.desktopMessage,u=o.mobileMessage,d=o.desktopRouteNavigationParams,p=o.mobileRouteNavigationParams,h=o.isClickableContent,g=d&&!R?function(){return O(d.route,d.params)}:p&&R?function(){return O(p.route,p.params)}:void 0;return(0,S.jsxs)(f.Z,{kind:e.type,renderRightButton:i&&a?function(){return(0,S.jsx)(m.Z,{label:(0,x.a)(t,i),onClick:function(){return v.ZP.openExternalURL(a)}})}:null,onHide:n?function(){A(e.id,!1)}:null,hideButtonSize:"small",markdownImageOnly:!s,children:[s?(0,S.jsx)(l.Z,{size:"block-title",children:s}):null,(0,S.jsx)("div",{onClick:g,className:h?F.root:void 0,style:P.markdownContainer,children:R?(0,S.jsx)(j.r,{source:u,allowParagraphs:!1}):(0,S.jsx)(j.r,{source:c,allowParagraphs:!1})})]},e.id)}))})})})}}):null},E=n(71106),M=n(8511),L=20,A={title:{overflowWrap:"anywhere",textWrap:"wrap"},mobileContainer:{paddingLeft:5,paddingRight:5},desktopContainer:{paddingLeft:L,paddingRight:L},mobileFooter:{padding:5},desktopFooter:{paddingLeft:L},rowContainer:{display:"flex",flexDirection:"column",paddingBottom:L},container:{flex:1,overflowX:"hidden"},scrollContainer:{overflowY:"scroll"},noScrollContainer:{overflowY:"hidden"},childrenContainer:{display:"flex",flexDirection:"column",minHeight:0,minWidth:0,flex:1},chip:{height:24}},O=a.forwardRef((function(e,t){var n=e.children,f=e.chipText,h=e.title,g=e.titleAdornment,m=e.subtitleText,x=e.customPaperStyle,v=e.renderSubtitle,C=e.backAction,j=e.flexBody,y=e.renderFooter,Z=e.noScroll,k=e.applyTopSpacingAsMarginOnChildrenContainer,w=e.showUrgentAnnouncements,T=(0,s.UQ)().isMobile,P=a.useContext(b.i).announcements,O=(0,r.Z)((0,r.Z)({},T?A.mobileContainer:A.desktopContainer),{},{paddingTop:k?0:T?10:L}),F=Z?A.noScrollContainer:A.scrollContainer,D=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},A.container),{},{display:j?"flex":"block"},O),F),x),N=(0,r.Z)((0,r.Z)({},A.childrenContainer),{},{marginTop:k?T?10:L:0}),_=a.useContext(E.ZP),B=!!_.limits&&!!_.limits.capabilities.classrooms&&_.limits.capabilities.classrooms.hideAnnouncements;return(0,S.jsxs)(o.sg,{expand:!0,useFullHeight:!0,noMargin:!0,children:[(0,S.jsx)(d.Z,{style:D,square:!0,background:"dark",ref:t,children:(0,S.jsxs)("div",{style:N,children:[w&&!B&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(I,{canClose:!0,level:"urgent",hideLoader:!0}),P&&P.length>0&&(0,S.jsx)(o.LZ,{})]}),C&&(0,S.jsx)(o.x1,{children:(0,S.jsx)(u.Z,{onClick:C,icon:(0,S.jsx)(c.Z,{fontSize:"small"}),label:(0,S.jsx)(i.Trans,{id:"Back"})})}),(h||m||v)&&(0,S.jsxs)(R,{children:[h&&(0,S.jsxs)(p.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,S.jsxs)(p.ak,{noMargin:!0,expand:!0,children:[f&&(0,S.jsx)(o.x1,{noMargin:!0,children:(0,S.jsx)(M.Z,{label:f,style:A.chip})}),(0,S.jsx)(l.Z,{size:"title",noMargin:!0,style:A.title,children:h})]}),g&&(0,S.jsx)(o.sg,{expand:!0,noMargin:!0,children:g})]}),m&&(0,S.jsx)(o.x1,{noMargin:!0,children:(0,S.jsx)(l.Z,{noMargin:!0,children:m})}),v&&v()]}),n]})}),y&&(0,S.jsx)(d.Z,{style:T?A.mobileFooter:A.desktopFooter,square:!0,background:"dark",children:y()})]})})),R=function(e){var t=e.children,n=e.expand;return(0,S.jsx)("div",{style:(0,r.Z)((0,r.Z)({},A.rowContainer),n?{flex:1}:void 0),children:t})},F=O},36559:function(e,t,n){"use strict";n.d(t,{c:function(){return f},z:function(){return h}});var r=n(1413),i=n(45987),a=n(93433),o=n(55760),s=n(48409),l=n(2066),c=n(50057),u=["onClickSendEvent","onClickOpenLink","eventArgs"],d=n.n(c)()("electron"),p=!!d,f=function(e){var t=e.shortcutMap,n=e.i18n,r=e.recentProjectFiles,i=e.project,l=e.canSaveProjectAs,c=e.isApplicationTopLevelMenu,u=e.hideAskAi,f={label:n._({id:"File"}),submenu:[{label:n._({id:"Create a game"}),accelerator:(0,o.YK)(t.CREATE_NEW_PROJECT),onClickSendEvent:"main-menu-create-project"},{type:"separator"},{label:n._({id:"Open..."}),accelerator:(0,o.YK)(t.OPEN_PROJECT),onClickSendEvent:"main-menu-open"},{label:n._({id:"Open Recent"}),submenu:r.length>0?r.map((function(e){return{label:e.fileMetadata.fileIdentifier,onClickSendEvent:"main-menu-open-recent",eventArgs:e}})):[{label:n._({id:"No recent project"}),enabled:!1}]},{type:"separator"},{label:n._({id:"Save"}),accelerator:(0,o.YK)(t.SAVE_PROJECT),onClickSendEvent:"main-menu-save",enabled:!!i},{label:n._({id:"Save as..."}),accelerator:(0,o.YK)(t.SAVE_PROJECT_AS),onClickSendEvent:"main-menu-save-as",enabled:l},{label:n._({id:"Show version history"}),onClickSendEvent:"main-menu-show-version-history",enabled:!!i},{type:"separator"},{label:n._({id:"Invite collaborators"}),accelerator:(0,o.YK)(t.INVITE_COLLABORATORS),onClickSendEvent:"main-menu-invite-collaborators",enabled:!!i},{label:n._({id:"Export (web, iOS, Android)..."}),accelerator:(0,o.YK)(t.EXPORT_GAME),onClickSendEvent:"main-menu-export",enabled:!!i},{type:"separator"},{label:n._({id:"Close Project"}),accelerator:(0,o.YK)(t.CLOSE_PROJECT),onClickSendEvent:"main-menu-close",enabled:!!i}].concat((0,a.Z)((0,s.z1)()&&c?[]:[{type:"separator"},{label:n._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"}]))},h={label:n._({id:"Edit"}),submenu:[{label:n._({id:"Undo"}),role:"undo"},{label:n._({id:"Redo"}),role:"redo"},{type:"separator"},{label:n._({id:"Cut"}),role:"cut"},{label:n._({id:"Copy"}),role:"copy"},{label:n._({id:"Paste"}),role:"paste"},{label:n._({id:"Paste and Match Style"}),role:"pasteandmatchstyle"},{label:n._({id:"Delete"}),role:"delete"},{label:n._({id:"Select All"}),role:"selectall"}]},g={label:n._({id:"View"}),submenu:[{label:n._({id:"Show Project Manager"}),accelerator:(0,o.YK)(t.OPEN_PROJECT_MANAGER),onClickSendEvent:"main-menu-open-project-manager",enabled:!!i},{label:n._({id:"Show Home"}),onClickSendEvent:"main-menu-open-home-page"},{label:n._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!i}].concat((0,a.Z)(d?[{type:"separator"},{label:n._({id:"Toggle Developer Tools"}),role:"toggledevtools"},{type:"separator"},{label:n._({id:"Toggle Fullscreen"}),role:"togglefullscreen"}]:[]))},m={label:n._({id:"Window"}),role:"window",submenu:[{label:n._({id:"Minimize"}),role:"minimize"}]},x={label:n._({id:"Help"}),role:"help",submenu:[].concat((0,a.Z)(u?[]:[{label:n._({id:"Ask AI (AI agent and chatbot)"}),onClickSendEvent:"main-menu-open-ask-ai"}]),[{label:n._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop.io"},{type:"separator"},{label:n._({id:"GDevelop games on gd.games"}),onClickOpenLink:"https://gd.games"},{label:n._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop.io"},{label:n._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/gdevelop"},{type:"separator"},{label:n._({id:"YouTube channel (tutorials and more)"}),onClickOpenLink:"https://www.youtube.com/c/gdevelopapp"},{label:n._({id:"TikTok"}),onClickOpenLink:"https://tiktok.com/@gdevelop"},{label:n._({id:"Twitter"}),onClickOpenLink:"https://twitter.com/gdevelopapp"},{label:n._({id:"Instagram"}),onClickOpenLink:"https://www.instagram.com/gdevelopapp"},{label:n._({id:"Facebook"}),onClickOpenLink:"https://facebook.com/gdevelopapp"},{label:n._({id:"Reddit"}),onClickOpenLink:"https://www.reddit.com/r/gdevelop"},{label:n._({id:"GitHub repository"}),onClickOpenLink:"https://github.com/4ian/GDevelop"},{type:"separator"},{label:n._({id:"Buy GDevelop goodies and swag"}),onClickOpenLink:"https://goodies.gdevelop.io"},{label:n._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop.io/page/contribute"},{label:n._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:n._({id:"Help translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:n._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}],(0,a.Z)((0,s.z1)()&&p?[]:[{type:"separator"},{label:n._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"}]))},v=[f].concat((0,a.Z)(d&&c?[h]:[]),(0,a.Z)(d&&c?[g]:[]),(0,a.Z)(d&&c?[m]:[]),[x]);return(0,s.z1)()&&c&&(v.unshift({label:n._({id:"GDevelop 5"}),submenu:[{label:n._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:n._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:n._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:n._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),h.submenu.push({type:"separator"},{label:n._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),m.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),v},h=function(e,t){return function e(n){return n.map((function(n){var a=n.onClickSendEvent,o=n.onClickOpenLink,s=n.eventArgs,c=(0,i.Z)(n,u),d=a||o;return(0,r.Z)((0,r.Z)({},c),{},{click:d?function(){if(n.onClickSendEvent){var e=function(e,t){return{"main-menu-open":t.onChooseProject,"main-menu-open-recent":t.onOpenRecentFile,"main-menu-save":t.onSaveProject,"main-menu-save-as":t.onSaveProjectAs,"main-menu-show-version-history":t.onShowVersionHistory,"main-menu-close":t.onCloseProject,"main-menu-close-app":t.onCloseApp,"main-menu-export":t.onExportProject,"main-menu-invite-collaborators":t.onInviteCollaborators,"main-menu-create-project":t.onCreateProject,"main-menu-open-project-manager":t.onOpenProjectManager,"main-menu-open-home-page":t.onOpenHomePage,"main-menu-open-debugger":t.onOpenDebugger,"main-menu-open-about":t.onOpenAbout,"main-menu-open-preferences":t.onOpenPreferences,"main-menu-open-language":t.onOpenLanguage,"main-menu-open-profile":t.onOpenProfile,"main-menu-open-ask-ai":t.onOpenAskAi,"update-status":t.setElectronUpdateStatus}[e]||function(){}}(n.onClickSendEvent,t);s?e(s):e()}n.onClickOpenLink&&l.ZP.openExternalURL(n.onClickOpenLink)}:void 0,submenu:n.submenu?e(n.submenu):void 0})}))}(e)}},26244:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ut}});var r=n(28381),i=n(15671),a=n(43144),o=n(60136),s=n(29388),l=n(67778),c=n.n(l),u=n(61915),d=n(17777),p={backends:[{backend:c()({delayTouchStart:100,enableMouseEvents:!0}),preview:!0,transition:u.TouchTransition}]},f=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return this.props.children}}]),n}(r.Component),h=(0,d.DragDropContext)((0,u.default)(p))(f),g=n(1413),m=n(74165),x=n(15861),v=n(36600),b=n(68151),C=n(41418),j=n(2861),y=(n(94492),n(71445),n(29439)),Z=n(1773),k=n(29277),w=n(86278),T=n(10888),S=n(63854),P=n(61325),I=n(45019),E=n(4076),M=n(24893),L=n(6996),A=n(21601),O=n(86567),R=n(40243),F=n(5295),D=n(35638),N=n(31370),_=n(38092),B=n(60022),U=n(96591),V=n(1589),H=n(32832),z=n(24910),W=n(29343),G=function(e){var t=e.text,n=(0,L.UQ)(),i=n.isMobile,a=n.isLandscape,o=i&&!a,s=function(e){var t=e.verticalDesign,n=e.theme;return{delimiter:{display:"flex",flex:1,borderLeft:t?"none":"2px solid ".concat(n.home.separator.color),borderTop:t?"2px solid ".concat(n.home.separator.color):"none"}}}({verticalDesign:o,theme:r.useContext(z.Z)});return o?(0,W.jsxs)(R.sg,{children:[(0,W.jsx)(R.LZ,{}),(0,W.jsxs)(P.pJ,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,W.jsx)("div",{style:s.delimiter}),(0,W.jsx)(w.Z,{size:"body2",noMargin:!0,children:t}),(0,W.jsx)("div",{style:s.delimiter})]}),(0,W.jsx)(R.LZ,{})]}):(0,W.jsxs)(P.ak,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,W.jsx)("div",{style:s.delimiter}),(0,W.jsx)(w.Z,{size:"body2",noMargin:!0,children:t}),(0,W.jsx)("div",{style:s.delimiter})]})},Y=function(e){var t=e.onCreateAccount,n=e.onLoginWithProvider,r=e.email,i=e.onChangeEmail,a=e.password,o=e.onChangePassword,s=e.username,l=e.onChangeUsername,c=e.optInNewsletterEmail,u=e.onChangeOptInNewsletterEmail,d=e.onChangeUsernameAvailability,p=e.isValidatingUsername,f=e.onChangeIsValidatingUsername,h=e.createAccountInProgress,g=e.error,m=e.onGoToLogin,x=!!g&&"auth/account-exists-with-different-credential"===g.code,b=(0,L.UQ)(),C=b.isMobile,j=b.isLandscape,y={logInContainer:{width:"100%"},panelContainer:{width:{verticalDesign:C&&!j}.verticalDesign?"100%":"90%"},icon:{width:16,height:16},backgroundText:{width:"100%",textAlign:"start"}};return(0,W.jsx)(R.sg,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:(0,W.jsx)(O.Z,{onSubmit:t,autoComplete:"on",name:"createAccount",fullWidth:!0,children:(0,W.jsxs)(P.ak,{noMargin:!0,children:[x&&(0,W.jsx)(_.Z,{kind:"warning",children:$}),(0,W.jsxs)(P.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,W.jsx)(R.sg,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:(0,W.jsx)("div",{style:y.panelContainer,children:(0,W.jsxs)(P.ak,{noMargin:!0,children:[(0,W.jsx)(B.Z,{primary:!0,fullWidth:!0,label:(0,W.jsx)(v.Trans,{id:"Continue with Google"}),icon:(0,W.jsx)(F.Z,{style:y.icon}),onClick:function(){n("google")},disabled:h}),(0,W.jsx)(T.Z,{primary:!0,fullWidth:!0,label:(0,W.jsx)(v.Trans,{id:"Continue with Github"}),leftIcon:(0,W.jsx)(N.Z,{style:y.icon}),onClick:function(){n("github")},disabled:h}),(0,W.jsx)(T.Z,{primary:!0,fullWidth:!0,label:(0,W.jsx)(v.Trans,{id:"Continue with Apple"}),leftIcon:(0,W.jsx)(D.Z,{style:y.icon}),onClick:function(){n("apple")},disabled:h})]})})}),(0,W.jsx)(G,{text:(0,W.jsx)(v.Trans,{id:"or"})}),(0,W.jsx)(R.sg,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:(0,W.jsx)("div",{style:y.panelContainer,children:(0,W.jsxs)(P.ak,{noMargin:!0,children:[(0,W.jsx)(k.ZP,{value:r,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Email"}),errorText:q(g),fullWidth:!0,type:"email",required:!0,onChange:function(e,t){i(t)},onBlur:function(e){i(e.currentTarget.value.trim())},disabled:h}),(0,W.jsx)(k.ZP,{value:a,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Password"}),errorText:J(g),type:"password",fullWidth:!0,required:!0,onChange:function(e,t){o(t)},disabled:h}),(0,W.jsx)(I.uR,{value:s,onChange:function(e,t){l(t)},allowEmpty:!0,onAvailabilityChecked:d,onAvailabilityCheckLoading:f,isValidatingUsername:p,disabled:h}),m&&(0,W.jsx)("div",{style:y.logInContainer,children:(0,W.jsxs)(P.pJ,{noMargin:!0,children:[(0,W.jsx)(w.Z,{size:"body2",noMargin:!0,align:"center",children:(0,W.jsx)(v.Trans,{id:"Already a member?"})}),(0,W.jsx)(U.Z,{href:"#",onClick:m,disabled:h,children:(0,W.jsx)(w.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,W.jsx)(v.Trans,{id:"Log in to your account"})})})]})})]})})})]}),(0,W.jsx)(R.LZ,{}),(0,W.jsx)(R.x1,{noMargin:!0,children:(0,W.jsx)(A.Z,{label:(0,W.jsx)(v.Trans,{id:"I want to receive the GDevelop Newsletter"}),checked:c,onCheck:function(e,t){u(t)},disabled:h})}),(0,W.jsx)(V.Z,{style:y.backgroundText,children:(0,W.jsx)(H.r,{translatableSource:{id:"By creating an account and using GDevelop, you agree to the [Terms and Conditions](https://gdevelop.io/page/terms-and-conditions)."}})})]})})})},q=function(e){if(e)return"auth/invalid-email"===e.code?(0,W.jsx)(v.Trans,{id:"This email is invalid."}):"auth/missing-email"===e.code?(0,W.jsx)(v.Trans,{id:"Please enter an email address."}):"auth/user-disabled"===e.code?(0,W.jsx)(v.Trans,{id:"This account has been deactivated or deleted."}):"auth/user-not-found"===e.code?(0,W.jsx)(v.Trans,{id:"This user was not found: have you created your account?"}):"auth/email-already-in-use"===e.code?(0,W.jsx)(v.Trans,{id:"This email was already used for another account."}):"auth/operation-not-allowed"===e.code?(0,W.jsx)(v.Trans,{id:"Service seems to be unavailable, please try again later."}):"auth/requires-recent-login"===e.code?(0,W.jsx)(v.Trans,{id:"Please log out and log in again to verify your identify, then change your email."}):"auth/network-request-failed"===e.code?(0,W.jsx)(v.Trans,{id:"The request could not reach the servers, ensure you are connected to internet."}):void 0},J=function(e){if(e)return"auth/too-many-requests"===e.code?(0,W.jsx)(v.Trans,{id:"That's a lot of unsuccessful login attempts! Wait a bit before trying again or reset your password."}):"auth/wrong-password"===e.code?(0,W.jsx)(v.Trans,{id:"The password is invalid."}):"auth/weak-password"===e.code?(0,W.jsx)(v.Trans,{id:"This password is too weak: please use more letters and digits."}):"auth/internal-error"===e.code?(0,W.jsx)(v.Trans,{id:"An unknown error happened, ensure your password is entered correctly."}):void 0},X=function(e){var t=e.onClose,n=e.onGoToLogin,i=e.onCreateAccount,a=e.onLoginWithProvider,o=e.createAccountInProgress,s=e.error,l=(0,L.UQ)().isMobile,c={formContainer:{display:"flex",width:{isMobile:l}.isMobile?"95%":"90%",marginTop:10,flexDirection:"column"}},u=r.useState(""),d=(0,y.Z)(u,2),p=d[0],f=d[1],h=r.useState(""),g=(0,y.Z)(h,2),b=g[0],C=g[1],j=r.useState(""),k=(0,y.Z)(j,2),A=k[0],O=k[1],R=r.useState(!1),F=(0,y.Z)(R,2),D=F[0],N=F[1],_=r.useState(null),B=(0,y.Z)(_,2),U=B[0],V=B[1],H=r.useState(!1),z=(0,y.Z)(H,2),G=z[0],q=z[1],J=!o&&(0,I.js)(A,{allowEmpty:!0})&&!G&&(!U||U.isAvailable),X=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,i({email:p.trim(),password:b,username:A,getNewsletterEmail:D});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return(0,W.jsx)(Z.ZP,{title:null,id:"create-account-dialog",actions:[(0,W.jsx)(T.Z,{label:(0,W.jsx)(v.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close"),(0,W.jsx)(S.Z,{isLoading:o,children:(0,W.jsx)(Z.vF,{label:(0,W.jsx)(v.Trans,{id:"Create account"}),id:"create-account-button",primary:!0,disabled:!J,onClick:X})},"create-account")],secondaryActions:[(0,W.jsx)(E.Z,{helpPagePath:"/interface/profile"},"help")],cannotBeDismissed:o,onApply:X,onRequestClose:function(){o||t()},maxWidth:"md",open:!0,flexColumnBody:!0,children:(0,W.jsxs)(P.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,W.jsxs)(P.ak,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,W.jsx)(M.Z,{fontSize:"large"}),(0,W.jsx)(w.Z,{size:"section-title",align:"center",noMargin:!0,children:(0,W.jsx)(v.Trans,{id:"Welcome to GDevelop!"})})]}),(0,W.jsx)("div",{style:c.formContainer,children:(0,W.jsx)(Y,{onCreateAccount:X,onLoginWithProvider:a,email:p,onChangeEmail:f,password:b,onChangePassword:C,username:A,onChangeUsername:O,optInNewsletterEmail:D,onChangeOptInNewsletterEmail:N,createAccountInProgress:o,error:s,onChangeUsernameAvailability:V,isValidatingUsername:G,onChangeIsValidatingUsername:q,onGoToLogin:n})})]})})},K=n(32677),Q=function(e){var t=e.onClose,n=e.onForgotPassword,i=r.useState(""),a=(0,y.Z)(i,2),o=a[0],s=a[1],l=r.useState(!1),c=(0,y.Z)(l,2),u=c[0],d=c[1],p=r.useState(!1),f=(0,y.Z)(p,2),h=f[0],g=f[1],b=r.useState(!0),C=(0,y.Z)(b,2),j=C[0],P=C[1],I=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.trim(),s(t),P(K.H.test(t)),!h&&o&&j){e.next=5;break}return e.abrupt("return");case 5:return g(!0),e.next=8,n({email:o});case 8:g(!1),d(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,W.jsx)(Z.ZP,{title:(0,W.jsx)(v.Trans,{id:"Reset your password"}),open:!0,actions:[(0,W.jsx)(T.Z,{label:(0,W.jsx)(v.Trans,{id:"Close"}),onClick:t,disabled:h},"close"),u?null:(0,W.jsx)(S.Z,{isLoading:h,children:(0,W.jsx)(Z.vF,{label:(0,W.jsx)(v.Trans,{id:"Reset password"}),primary:!0,onClick:I,disabled:h||!j})},"reset")],cannotBeDismissed:h,onRequestClose:t,maxWidth:"xs",onApply:I,children:u?(0,W.jsx)(R.sg,{noMargin:!0,children:(0,W.jsx)(w.Z,{children:(0,W.jsx)(v.Trans,{id:"You should have received an email containing instructions to reset and set a new password. Once it's done, you can use your new password in GDevelop."})})}):(0,W.jsx)(O.Z,{onSubmit:I,autoComplete:"on",name:"resetPassword",children:(0,W.jsx)(R.sg,{noMargin:!0,children:(0,W.jsx)(k.ZP,{autoFocus:"desktop",value:o,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Email"}),onChange:function(e,t){j||P(!0),s(t)},errorText:j?void 0:(0,W.jsx)(v.Trans,{id:"Invalid email address."}),type:"email",fullWidth:!0,onBlur:function(e){var t=e.currentTarget.value.trim();s(t),P(K.H.test(t))}})})})})},$=(0,W.jsx)(v.Trans,{id:"You already have an account for this email address with a different provider (Google, Apple or GitHub). Please try with one of those."}),ee=function(e){var t=e.onLogin,n=e.onLoginWithProvider,i=e.email,a=e.onChangeEmail,o=e.password,s=e.onChangePassword,l=e.onForgotPassword,c=e.loginInProgress,u=e.error,d=e.onGoToCreateAccount,p=r.useState(!1),f=(0,y.Z)(p,2),h=f[0],g=f[1],m=!!u&&"auth/account-exists-with-different-credential"===u.code,x=(0,L.UQ)(),b=x.isMobile,C=x.isLandscape,j={createAccountContainer:{width:"100%"},panelContainer:{width:{verticalDesign:b&&!C}.verticalDesign?"100%":"90%"},icon:{width:16,height:16},backgroundText:{width:"100%",textAlign:"start"}};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(P.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"stretch",children:[(0,W.jsx)(O.Z,{onSubmit:t,autoComplete:"on",name:"login",children:(0,W.jsxs)(P.ak,{noMargin:!0,children:[m&&(0,W.jsx)(_.Z,{kind:"warning",children:$}),(0,W.jsxs)(P.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,W.jsx)(R.sg,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:(0,W.jsx)("div",{style:j.panelContainer,children:(0,W.jsxs)(P.ak,{noMargin:!0,children:[(0,W.jsx)(B.Z,{primary:!0,fullWidth:!0,label:(0,W.jsx)(v.Trans,{id:"Continue with Google"}),icon:(0,W.jsx)(F.Z,{style:j.icon}),onClick:function(){n("google")},disabled:c}),(0,W.jsx)(T.Z,{primary:!0,fullWidth:!0,label:(0,W.jsx)(v.Trans,{id:"Continue with Github"}),leftIcon:(0,W.jsx)(N.Z,{style:j.icon}),onClick:function(){n("github")},disabled:c}),(0,W.jsx)(T.Z,{primary:!0,fullWidth:!0,label:(0,W.jsx)(v.Trans,{id:"Continue with Apple"}),leftIcon:(0,W.jsx)(D.Z,{style:j.icon}),onClick:function(){n("apple")},disabled:c})]})})}),(0,W.jsx)(G,{text:(0,W.jsx)(v.Trans,{id:"or"})}),(0,W.jsx)(R.sg,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:(0,W.jsx)("div",{style:j.panelContainer,children:(0,W.jsxs)(P.ak,{noMargin:!0,children:[(0,W.jsx)(k.ZP,{autoFocus:"desktop",value:i,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Email"}),errorText:q(u),onChange:function(e,t){a(t)},onBlur:function(e){a(e.currentTarget.value.trim())},fullWidth:!0,type:"email",disabled:c}),(0,W.jsx)(k.ZP,{value:o,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Password"}),errorText:J(u),type:"password",onChange:function(e,t){s(t)},fullWidth:!0,disabled:c}),d&&(0,W.jsx)("div",{style:j.createAccountContainer,children:(0,W.jsxs)(P.pJ,{noMargin:!0,children:[(0,W.jsx)(w.Z,{size:"body2",noMargin:!0,children:(0,W.jsx)(v.Trans,{id:"Don't have an account yet?"})}),(0,W.jsx)(U.Z,{href:"",onClick:d,disabled:c,children:(0,W.jsx)(w.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,W.jsx)(v.Trans,{id:"Create an account"})})})]})})]})})})]})]})}),(0,W.jsx)(R.LZ,{}),(0,W.jsx)(R.x1,{noMargin:!0,justifyContent:"center",children:(0,W.jsx)(U.Z,{href:"",onClick:function(){return g(!0)},disabled:c,children:(0,W.jsx)(w.Z,{size:"body2",noMargin:!0,color:"inherit",children:(0,W.jsx)(v.Trans,{id:"Did you forget your password?"})})})})]}),h&&(0,W.jsx)(Q,{onClose:function(){return g(!1)},onForgotPassword:l})]})},te=function(e){var t=e.onClose,n=e.onGoToCreateAccount,i=e.onLogin,a=e.onLoginWithProvider,o=e.onForgotPassword,s=e.loginInProgress,l=e.error,c=(0,L.UQ)().isMobile,u=r.useState(""),d=(0,y.Z)(u,2),p=d[0],f=d[1],h=r.useState(""),g=(0,y.Z)(h,2),m=g[0],x=g[1],b={formContainer:{display:"flex",width:{isMobile:c}.isMobile?"95%":"90%",marginTop:10,flexDirection:"column"}},C=function(){s||i({email:p.trim(),password:m})},j=[(0,W.jsx)(T.Z,{label:(0,W.jsx)(v.Trans,{id:"Cancel"}),primary:!1,onClick:t},"cancel"),(0,W.jsx)(S.Z,{isLoading:s,children:(0,W.jsx)(Z.vF,{id:"login-button",label:(0,W.jsx)(v.Trans,{id:"Login"}),primary:!0,onClick:C,disabled:s})},"login")],k=[(0,W.jsx)(E.Z,{helpPagePath:"/interface/profile"},"help")],I=(0,W.jsxs)(P.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,W.jsxs)(P.ak,{noMargin:!0,justifyContent:"center",alignItems:"center",children:[(0,W.jsx)(M.Z,{fontSize:"large"}),(0,W.jsx)(w.Z,{noMargin:!0,size:"section-title",align:"center",children:(0,W.jsx)(v.Trans,{id:"Log in to your account"})})]}),(0,W.jsx)("div",{style:b.formContainer,children:(0,W.jsx)(ee,{onLogin:C,onLoginWithProvider:a,email:p,onChangeEmail:f,password:m,onChangePassword:x,onForgotPassword:o,loginInProgress:s,error:l,onGoToCreateAccount:n})})]});return(0,W.jsx)(Z.ZP,{title:null,id:"login-dialog",actions:j,secondaryActions:k,cannotBeDismissed:s,onRequestClose:t,onApply:C,maxWidth:"md",open:!0,flexColumnBody:!0,children:I})},ne=n(75333),re=n(71106),ie=n(42699),ae=n(65056),oe=n(84482),se=function(e){if(e)return"auth/username-used"===e.code?I.Jh:"auth/malformed-username"===e.code?I.UT:void 0},le=function(e){var t=e.badges,n=e.achievements,i=e.achievementId,a=e.value,o=e.onChange,s=e.onUpdateFollow,l=e.getMessageFromUpdate,c=e.disabled,u=e.maxLength,d=e.prefix,p=e.getRewardMessage,f=e.translatableHintText,h=e.icon,b=(0,ae.Z)().showAlert,C=!!t&&t.some((function(e){return e.achievementId===i})),j=n&&n.find((function(e){return e.id===i}))||null,y=r.useCallback((0,x.Z)((0,m.Z)().mark((function e(){var t,n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s();case 3:if(t=e.sent,(0,ne.$V)(i,{code:t.code}),!(n=l(t.code))){e.next=10;break}b((0,g.Z)({},n)),e.next=11;break;case 10:throw new Error("Error while updating the social follow: ".concat(t.code,"."));case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error while updating social follow:",e.t0),b({title:{id:"Something went wrong"},message:{id:"Make sure you have a proper internet connection or try again later."}});case 17:case"end":return e.stop()}}),e,null,[[0,13]])}))),[s,i,l,b]);return(0,W.jsx)(v.I18n,{children:function(e){var t=e.i18n;return(0,W.jsxs)(P.pJ,{noMargin:!0,alignItems:"flex-start",children:[(0,W.jsx)(R.x1,{children:h}),(0,W.jsx)(P.ad,{renderButton:function(e){return(0,W.jsx)(B.Z,{onClick:y,icon:(0,W.jsx)(oe.Z,{fontSize:"small"}),label:C?(0,W.jsx)(v.Trans,{id:"Credits given"}):(0,W.jsx)(v.Trans,{id:"Claim"}),disabled:C||c,primary:!0,style:e})},renderTextField:function(){return(0,W.jsx)(k.ZP,{value:a,fullWidth:!0,translatableHintText:f,onChange:function(e,t){o(t)},startAdornment:d?(0,W.jsx)(w.Z,{noMargin:!0,children:d}):void 0,disabled:c,maxLength:u,helperMarkdownText:t._(p(C,j&&j.rewardValueInCredits?j.rewardValueInCredits.toString():"-"))})}})]})}})},ce=function(e){var t=e.id,n=e.value,r=e.onChange,i=e.disabled,a=e.translatableHintText,o=C.Ty[t];return(0,W.jsxs)(P.pJ,{noMargin:!0,alignItems:"center",children:[o.icon,(0,W.jsx)(k.ZP,{value:n,fullWidth:!0,translatableHintText:a,onChange:r,disabled:i,errorText:o.getFormattingError?o.getFormattingError(n):void 0,maxLength:o.maxLength,startAdornment:o.prefix?(0,W.jsx)(w.Z,{noMargin:!0,children:o.prefix}):void 0})]})},ue=function(e){var t=e.profile,n=e.subscription,i=e.limits,a=e.achievements,o=e.badges,s=e.onClose,l=e.onEdit,c=e.onUpdateGitHubStar,u=e.onUpdateTiktokFollow,d=e.onUpdateTwitterFollow,p=e.onUpdateYoutubeSubscription,f=e.onDelete,h=e.actionInProgress,g=e.error,j=(0,ae.Z)(),E=j.showDeleteConfirmation,M=j.showAlert,L=t.communityLinks||{},R=r.useState(t.username||""),F=(0,y.Z)(R,2),D=F[0],N=F[1],_=r.useState(t.description||""),B=(0,y.Z)(_,2),U=B[0],V=B[1],H=r.useState(t.donateLink||""),z=(0,y.Z)(H,2),G=z[0],Y=z[1],q=r.useState(t.discordUsername||""),J=(0,y.Z)(q,2),X=J[0],K=J[1],Q=r.useState(t.githubUsername||""),$=(0,y.Z)(Q,2),ee=$[0],te=$[1],ne=r.useState(L.personalWebsiteLink||""),re=(0,y.Z)(ne,2),oe=re[0],ue=re[1],de=r.useState(L.personalWebsite2Link||""),pe=(0,y.Z)(de,2),fe=pe[0],he=pe[1],ge=r.useState(L.twitterUsername||""),me=(0,y.Z)(ge,2),xe=me[0],ve=me[1],be=r.useState(L.facebookUsername||""),Ce=(0,y.Z)(be,2),je=Ce[0],ye=Ce[1],Ze=r.useState(L.youtubeUsername||""),ke=(0,y.Z)(Ze,2),we=ke[0],Te=ke[1],Se=r.useState(L.tiktokUsername||""),Pe=(0,y.Z)(Se,2),Ie=Pe[0],Ee=Pe[1],Me=r.useState(L.instagramUsername||""),Le=(0,y.Z)(Me,2),Ae=Le[0],Oe=Le[1],Re=r.useState(L.redditUsername||""),Fe=(0,y.Z)(Re,2),De=Fe[0],Ne=Fe[1],_e=r.useState(L.snapchatUsername||""),Be=(0,y.Z)(_e,2),Ue=Be[0],Ve=Be[1],He=r.useState(L.discordServerLink||""),ze=(0,y.Z)(He,2),We=ze[0],Ge=ze[1],Ye=r.useState(!!t.getGameStatsEmail),qe=(0,y.Z)(Ye,2),Je=qe[0],Xe=qe[1],Ke=r.useState(!!t.getNewsletterEmail),Qe=(0,y.Z)(Ke,2),$e=Qe[0],et=Qe[1],tt=r.useState(null),nt=(0,y.Z)(tt,2),rt=nt[0],it=nt[1],at=r.useState(!1),ot=(0,y.Z)(at,2),st=ot[0],lt=ot[1],ct=C.Ty.personalWebsiteLink.getFormattingError(oe),ut=C.Ty.personalWebsite2Link.getFormattingError(fe),dt=C.Ty.discordServerLink.getFormattingError(We),pt=C.Pk.getFormattingError(G),ft=C.Ty.tiktokUsername.getFormattingError(Ie),ht=ct||ut||dt||pt||ft,gt=!h&&(0,I.js)(D,{allowEmpty:!1})&&!st&&(!rt||rt.isAvailable)&&!ht,mt={personalWebsiteLink:oe,personalWebsite2Link:fe,twitterUsername:xe,facebookUsername:je,youtubeUsername:we,tiktokUsername:Ie,instagramUsername:Ae,redditUsername:De,snapchatUsername:Ue,discordServerLink:We},xt=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gt){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l({username:D,description:U,getGameStatsEmail:Je,getNewsletterEmail:$e,donateLink:G,discordUsername:X,githubUsername:ee,communityLinks:mt});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vt=!!n&&!!n.benefitsFromEducationPlan&&!n.isTeacher,bt=!!i&&!!i.capabilities.classrooms&&i.capabilities.classrooms.hideSocials,Ct=!h,jt=r.useCallback((0,x.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ct&&!vt){e.next=2;break}return e.abrupt("return");case 2:if(!(0,b.e_)(n)){e.next=6;break}return e.next=5,M({title:{id:"You have an active subscription"},message:{id:"You can't delete your account while you have an active subscription. Please cancel your subscription first."}});case 5:return e.abrupt("return");case 6:return e.next=8,E({title:{id:"Delete account"},message:{id:"Before you go, make sure that you've unpublished all your games on gd.games. Otherwise they will stay visible to the community. Are you sure you want to permanently delete your account? This action cannot be undone."},confirmButtonLabel:{id:"Delete account"},confirmText:t.email,fieldMessage:{id:"Type your email to confirm"}});case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,f();case 13:case"end":return e.stop()}}),e)}))),[Ct,f,t.email,n,E,M,vt]),yt=[(0,W.jsx)(T.Z,{label:(0,W.jsx)(v.Trans,{id:"Back"}),disabled:h,primary:!1,onClick:s},"back"),(0,W.jsx)(S.Z,{isLoading:h,children:(0,W.jsx)(Z.vF,{label:(0,W.jsx)(v.Trans,{id:"Save"}),primary:!0,disabled:!gt,onClick:xt})},"edit")],Zt=[vt?null:(0,W.jsx)(ie.Z,{label:(0,W.jsx)(v.Trans,{id:"Delete my account"}),disabled:h,onClick:jt},"delete")];return(0,W.jsx)(v.I18n,{children:function(e){var n=e.i18n;return(0,W.jsx)(Z.ZP,{title:(0,W.jsx)(v.Trans,{id:"Edit your GDevelop profile"}),actions:yt,secondaryActions:Zt,maxWidth:"sm",cannotBeDismissed:h,onRequestClose:s,onApply:xt,open:!0,children:(0,W.jsx)(O.Z,{onSubmit:xt,autoComplete:"on",name:"editProfile",children:(0,W.jsxs)(P.ak,{noMargin:!0,children:[(0,W.jsx)(I.uR,{initialUsername:t.username,value:D,onChange:function(e,t){N(t)},errorText:se(g),onAvailabilityChecked:it,onAvailabilityCheckLoading:lt,isValidatingUsername:st,disabled:h}),(0,W.jsx)(w.Z,{size:"sub-title",noMargin:!0,children:(0,W.jsx)(v.Trans,{id:"Creator profile"})}),!bt&&(0,W.jsx)(k.ZP,{value:X,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Discord username"}),fullWidth:!0,translatableHintText:{id:"Your Discord username"},onChange:function(e,t){K(t)},disabled:h,maxLength:C.RR.maxLength,helperMarkdownText:n._({id:"Add your Discord username to get access to a dedicated channel if you have a Gold or Pro subscription! Join the [GDevelop Discord](https://discord.gg/gdevelop)."})}),(0,W.jsx)(k.ZP,{value:U,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Bio"}),fullWidth:!0,multiline:!0,rows:3,rowsMax:5,translatableHintText:{id:"What are you using GDevelop for?"},onChange:function(e,t){V(t)},disabled:h,floatingLabelFixed:!0,maxLength:1e4}),!bt&&(0,W.jsxs)(P.ak,{children:[(0,W.jsx)(w.Z,{size:"sub-title",noMargin:!0,children:(0,W.jsx)(v.Trans,{id:"Socials"})}),(0,W.jsx)(le,{badges:o,achievements:a,achievementId:"github-star",value:ee,onChange:te,onUpdateFollow:function(){return c(ee)},getMessageFromUpdate:C.Ty.githubUsername.getMessageFromUpdate,disabled:h,maxLength:C.Ty.githubUsername.maxLength,prefix:C.Ty.githubUsername.prefix,getRewardMessage:C.Ty.githubUsername.getRewardMessage,translatableHintText:{id:"username"},icon:C.Ty.githubUsername.icon}),(0,W.jsx)(le,{badges:o,achievements:a,achievementId:"twitter-follow",value:xe,onChange:ve,onUpdateFollow:function(){return d(mt)},getMessageFromUpdate:C.Ty.twitterUsername.getMessageFromUpdate,disabled:h,maxLength:C.Ty.twitterUsername.maxLength,prefix:C.Ty.twitterUsername.prefix,getRewardMessage:C.Ty.twitterUsername.getRewardMessage,translatableHintText:{id:"username"},icon:C.Ty.twitterUsername.icon}),(0,W.jsx)(le,{badges:o,achievements:a,achievementId:"youtube-subscription",value:we,onChange:Te,onUpdateFollow:function(){return p(mt)},getMessageFromUpdate:C.Ty.youtubeUsername.getMessageFromUpdate,disabled:h,maxLength:C.Ty.youtubeUsername.maxLength,prefix:C.Ty.youtubeUsername.prefix,getRewardMessage:C.Ty.youtubeUsername.getRewardMessage,translatableHintText:{id:"username"},icon:C.Ty.youtubeUsername.icon}),(0,W.jsx)(le,{badges:o,achievements:a,achievementId:"tiktok-follow",value:Ie,onChange:Ee,onUpdateFollow:function(){return u(mt)},getMessageFromUpdate:C.Ty.tiktokUsername.getMessageFromUpdate,disabled:h,maxLength:C.Ty.tiktokUsername.maxLength,prefix:C.Ty.tiktokUsername.prefix,getRewardMessage:C.Ty.tiktokUsername.getRewardMessage,translatableHintText:{id:"username"},icon:C.Ty.tiktokUsername.icon}),(0,W.jsx)(ce,{id:"personalWebsiteLink",value:oe,translatableHintText:{id:"Personal website, itch.io page, etc."},onChange:function(e,t){ue(t)},disabled:h}),(0,W.jsx)(ce,{id:"personalWebsite2Link",value:fe,translatableHintText:{id:"Another personal website, newgrounds.com page, etc."},onChange:function(e,t){he(t)},disabled:h}),(0,W.jsx)(ce,{id:"facebookUsername",value:je,translatableHintText:{id:"username"},onChange:function(e,t){ye(t)},disabled:h}),(0,W.jsx)(ce,{id:"instagramUsername",value:Ae,translatableHintText:{id:"username"},onChange:function(e,t){Oe(t)},disabled:h}),(0,W.jsx)(ce,{id:"redditUsername",value:De,translatableHintText:{id:"username"},onChange:function(e,t){Ne(t)},disabled:h}),(0,W.jsx)(ce,{id:"snapchatUsername",value:Ue,translatableHintText:{id:"username"},onChange:function(e,t){Ve(t)},disabled:h}),(0,W.jsx)(ce,{id:"discordServerLink",value:We,translatableHintText:{id:"Discord server, e.g: https://discord.gg/..."},onChange:function(e,t){Ge(t)},disabled:h}),(0,W.jsx)(k.ZP,{value:G,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Donate link"}),fullWidth:!0,translatableHintText:{id:"Do you have a Patreon? Ko-fi? Paypal?"},onChange:function(e,t){Y(t)},disabled:h,floatingLabelFixed:!0,helperMarkdownText:n._({id:"Add a link to your donation page. It will be displayed on your gd.games profile and game pages."}),errorText:pt,maxLength:C.Pk.maxLength})]}),(0,W.jsx)(w.Z,{size:"sub-title",noMargin:!0,children:(0,W.jsx)(v.Trans,{id:"Notifications"})}),(0,W.jsx)(A.Z,{label:(0,W.jsx)(v.Trans,{id:"I want to receive the GDevelop Newsletter"}),checked:$e,onCheck:function(e,t){et(t)},disabled:h}),(0,W.jsx)(A.Z,{label:(0,W.jsx)(v.Trans,{id:"I want to receive weekly stats about my games"}),checked:Je,onCheck:function(e,t){Xe(t)},disabled:h})]})})})}})},de=function(e){var t=e.onClose,n=e.onChangeEmail,i=e.firebaseUser,a=e.changeEmailInProgress,o=e.error,s=r.useState(i.email),l=(0,y.Z)(s,2),c=l[0],u=l[1],d=r.useState(!0),p=(0,y.Z)(d,2),f=p[0],h=p[1],g=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.trim(),u(t),h(K.H.test(t)),!a&&c&&f){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n({email:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,W.jsx)(Z.ZP,{title:(0,W.jsx)(v.Trans,{id:"Change your email"}),actions:[(0,W.jsx)(T.Z,{label:(0,W.jsx)(v.Trans,{id:"Back"}),disabled:a,primary:!1,onClick:t},"back"),(0,W.jsx)(S.Z,{isLoading:a,children:(0,W.jsx)(Z.vF,{label:(0,W.jsx)(v.Trans,{id:"Save"}),primary:!0,onClick:g,disabled:a})},"change-email")],maxWidth:"xs",cannotBeDismissed:a,onRequestClose:t,onApply:g,open:!0,children:(0,W.jsx)(O.Z,{onSubmit:g,autoComplete:"on",name:"changeEmail",children:(0,W.jsx)(P.ak,{noMargin:!0,children:(0,W.jsx)(k.ZP,{value:c,floatingLabelText:(0,W.jsx)(v.Trans,{id:"Email"}),errorText:q(o)||(f?null:(0,W.jsx)(v.Trans,{id:"Invalid email address"})),fullWidth:!0,type:"email",disabled:a,required:!0,onChange:function(e,t){f||h(!0),u(t)},onBlur:function(e){var t=e.currentTarget.value.trim();u(t),h(K.H.test(t))}})})})})},pe=n(21676),fe=n(66789),he=n(49536);function ge(e){var t=e.onClose,n=e.authenticatedUser,i=e.sendEmailAutomatically,a=e.showSendEmailButton,o=e.onSendEmail,s=!!n.firebaseUser&&!!n.firebaseUser.emailVerified,l=r.useState(!1),c=(0,y.Z)(l,2),u=c[0],d=c[1];return r.useEffect((function(){!s&&i&&o()}),[s,o,i]),(0,pe.Y)((function(){n.onRefreshFirebaseProfile().catch((function(){}))}),s||!u&&a?null:5e3),(0,W.jsx)(Z.ZP,{title:null,actions:[s?(0,W.jsx)(Z.vF,{label:(0,W.jsx)(v.Trans,{id:"Done!"}),primary:!0,onClick:t},"close"):(0,W.jsx)(T.Z,{label:(0,W.jsx)(v.Trans,{id:"I'll do it later"}),primary:!1,onClick:t},"close")],maxWidth:"sm",open:!0,onRequestClose:t,onApply:t,children:(0,W.jsxs)(P.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,W.jsx)(M.Z,{fontSize:"large"}),n.firebaseUser?n.firebaseUser.emailVerified?(0,W.jsxs)(P.pJ,{justifyContent:"center",alignItems:"center",children:[(0,W.jsx)(he.Z,{}),(0,W.jsx)(w.Z,{size:"title",align:"center",children:(0,W.jsx)(v.Trans,{id:"Email verified"})})]}):(0,W.jsxs)(P.ak,{noMargin:!0,alignItems:"center",children:[(0,W.jsx)(w.Z,{size:"title",align:"center",children:(0,W.jsx)(v.Trans,{id:"Confirm your email"})}),(0,W.jsx)(w.Z,{align:"center",children:(0,W.jsx)(v.Trans,{id:"You will get access to special discounts on the GDevelop asset store, as well as weekly stats about your games."})}),!u&&a?(0,W.jsx)(B.Z,{primary:!0,label:(0,W.jsx)(v.Trans,{id:"Send it again"}),onClick:function(){d(!0),o()}}):(0,W.jsx)(V.Z,{children:(0,W.jsxs)(P.pJ,{justifyContent:"center",alignItems:"center",children:[(0,W.jsx)(fe.Z,{size:20}),(0,W.jsx)(w.Z,{children:(0,W.jsx)(v.Trans,{id:"Email sent to {0}, waiting for validation...",values:{0:n.firebaseUser.email}})})]})})]}):null]})})}var me=n(34517),xe=me.nZ,ve=n(84140),be=n(53385),Ce=n(93433),je=function(){function e(t){(0,i.Z)(this,e),this._promise=null,this._requestSender=t}return(0,a.Z)(e,[{key:"launchRequestOrGetOngoingPromise",value:function(e){var t=this;return this._promise||(this._promise=this._requestSender.apply(this,(0,Ce.Z)(e)).finally((function(){t._promise=null}))),this._promise}}]),e}(),ye=n(794),Ze=n(91),ke=n(30141),we=n(23236),Te=n(36465),Se=n(50631),Pe=n(23818),Ie=function(e){var t=e.onClose,n=e.onGoToCreateAccount,i=e.onLogin,a=e.onLoginWithProvider,o=e.onForgotPassword,s=e.loginInProgress,l=e.error,c=e.claimedProductOptions.productListingData,u=(0,L.UQ)().isMobile,d=r.useState(""),p=(0,y.Z)(d,2),f=p[0],h=p[1],m=r.useState(""),x=(0,y.Z)(m,2),b=x[0],C=x[1],j={formContainer:{display:"flex",width:{isMobile:u}.isMobile?"95%":"90%",marginTop:10,flexDirection:"column"},previewImage:{width:"100%",maxWidth:400,display:"block",objectFit:"contain",borderRadius:8,border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out",position:"relative"}},k=r.useContext(z.Z),I=function(){s||i({email:f.trim(),password:b})},M=[(0,W.jsx)(T.Z,{label:(0,W.jsx)(v.Trans,{id:"Cancel"}),primary:!1,onClick:t},"cancel"),(0,W.jsx)(S.Z,{isLoading:s,children:(0,W.jsx)(Z.vF,{id:"login-button",label:(0,W.jsx)(v.Trans,{id:"Login"}),primary:!0,onClick:I,disabled:s})},"login")],A=[(0,W.jsx)(E.Z,{helpPagePath:"/interface/profile"},"help")],O=(0,W.jsxs)(P.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,W.jsxs)(P.ak,{justifyContent:"center",alignItems:"center",noMargin:!0,children:["BUNDLE"===c.productType&&(0,W.jsx)(Pe.W,{style:(0,g.Z)((0,g.Z)({},j.previewImage),{},{background:k.paper.backgroundColor.light}),src:c.thumbnailUrls[0],alt:"Preview image of bundle ".concat(c.name)}),(0,W.jsx)(w.Z,{size:"section-title",align:"center",noMargin:!0,children:(0,W.jsx)(v.Trans,{id:"Log in to your account to activate your purchase!"})})]}),(0,W.jsx)("div",{style:j.formContainer,children:(0,W.jsx)(ee,{onLogin:I,onLoginWithProvider:a,email:f,onChangeEmail:h,password:b,onChangePassword:C,onForgotPassword:o,loginInProgress:s,error:l,onGoToCreateAccount:n})})]});return(0,W.jsx)(Z.ZP,{title:null,id:"login-dialog",actions:M,secondaryActions:A,cannotBeDismissed:s,onRequestClose:t,onApply:I,maxWidth:"md",open:!0,flexColumnBody:!0,children:O})},Ee=function(e){var t=e.onClose,n=e.onGoToLogin,i=e.onCreateAccount,a=e.onLoginWithProvider,o=e.createAccountInProgress,s=e.error,l=e.claimedProductOptions.productListingData,c=(0,L.UQ)().isMobile,u={formContainer:{display:"flex",width:{isMobile:c}.isMobile?"95%":"90%",marginTop:10,flexDirection:"column"},previewImage:{width:"100%",maxWidth:400,display:"block",objectFit:"contain",borderRadius:8,border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out",position:"relative"}},d=r.useState(""),p=(0,y.Z)(d,2),f=p[0],h=p[1],b=r.useState(""),C=(0,y.Z)(b,2),j=C[0],k=C[1],M=r.useState(""),A=(0,y.Z)(M,2),O=A[0],R=A[1],F=r.useState(!1),D=(0,y.Z)(F,2),N=D[0],_=D[1],B=r.useState(null),U=(0,y.Z)(B,2),V=U[0],H=U[1],G=r.useState(!1),q=(0,y.Z)(G,2),J=q[0],X=q[1],K=r.useContext(z.Z),Q=!o&&(0,I.js)(O,{allowEmpty:!0})&&!J&&(!V||V.isAvailable),$=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,i({email:f.trim(),password:j,username:O,getNewsletterEmail:N});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error while creating account",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return(0,W.jsx)(Z.ZP,{title:null,id:"create-account-with-purchase-claim-dialog",actions:[(0,W.jsx)(T.Z,{label:(0,W.jsx)(v.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close"),(0,W.jsx)(S.Z,{isLoading:o,children:(0,W.jsx)(Z.vF,{label:(0,W.jsx)(v.Trans,{id:"Create account"}),id:"create-account-button",primary:!0,disabled:!Q,onClick:$})},"create-account")],secondaryActions:[(0,W.jsx)(E.Z,{helpPagePath:"/interface/profile"},"help")],cannotBeDismissed:o,onApply:$,onRequestClose:function(){o||t()},maxWidth:"md",open:!0,flexColumnBody:!0,children:(0,W.jsxs)(P.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,W.jsxs)(P.ak,{justifyContent:"center",alignItems:"center",noMargin:!0,children:["BUNDLE"===l.productType&&(0,W.jsx)(Pe.W,{style:(0,g.Z)((0,g.Z)({},u.previewImage),{},{background:K.paper.backgroundColor.light}),src:l.thumbnailUrls[0],alt:"Preview image of bundle ".concat(l.name)}),(0,W.jsx)(w.Z,{size:"section-title",align:"center",noMargin:!0,children:(0,W.jsx)(v.Trans,{id:"Create an account to activate your purchase!"})})]}),(0,W.jsx)("div",{style:u.formContainer,children:(0,W.jsx)(Y,{onCreateAccount:$,onLoginWithProvider:a,email:f,onChangeEmail:h,password:j,onChangePassword:k,username:O,onChangeUsername:R,optInNewsletterEmail:N,onChangeOptInNewsletterEmail:_,createAccountInProgress:o,error:s,onChangeUsernameAvailability:H,isValidatingUsername:J,onChangeIsValidatingUsername:X,onGoToLogin:n})})]})})},Me=n(30268),Le=n(30609),Ae={width:"100%",maxWidth:400,display:"block",objectFit:"contain",borderRadius:8,border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out",position:"relative"},Oe=function(e){var t=e.claimedProductOptions,n=t.productListingData,i=t.purchaseId,a=t.claimableToken,o=e.onClose,s=r.useContext(re.ZP),l=s.getAuthorizationHeader,c=s.profile,u=s.onPurchaseSuccessful,d=s.onRefreshBundlePurchases,p=r.useState(!1),f=(0,y.Z)(p,2),h=f[0],b=f[1],C=r.useState(!1),j=(0,y.Z)(C,2),k=j[0],S=j[1],I=(0,ae.Z)().showAlert,E=r.useContext(z.Z),M=r.useContext(Le.ZP).navigateToRoute,L=r.useRef(!c),A=r.useCallback((0,x.Z)((0,m.Z)().mark((function e(){var t,n,r;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&!h&&!k){e.next=2;break}return e.abrupt("return");case 2:return b(!0),t=null,e.prev=4,e.next=7,(0,Te.Nt)({getAuthorizationHeader:l,purchaseId:i,claimableToken:a,userId:c.id});case 7:t=e.sent,e.next=19;break;case 10:return e.prev=10,e.t0=e.catch(4),n=(0,Ze.T)(e.t0),r={id:"An error occurred while activating your purchase. Please contact support if the problem persists."},n&&400===n.status&&"purchase/already-claimed"===n.code?r={id:"This purchase has already been activated."}:n&&403===n.status?"purchase/cannot-claim"===n.code?r={id:"This purchase cannot be claimed."}:"purchase/invalid-token"===n.code&&(r={id:"The token used to claim this purchase is invalid."}):n&&404===n.status?r={id:"This purchase could not be found. Please contact support for more information."}:n&&409===n.status?"purchase/already-owned"===n.code&&(r={id:"This account already owns this product, you cannot activate it again."}):n&&500===n.status&&(r={id:"The server is currently unavailable. Please try again later."}),I({title:{id:"Could not activate purchase"},message:r}),b(!1),o(),e.abrupt("return");case 19:if(e.prev=19,"BUNDLE"!==t.productType){e.next=24;break}return e.next=23,d();case 23:M("learn",{bundle:t.productId});case 24:u();case 25:return e.prev=25,b(!1),S(!0),e.finish(25);case 29:case"end":return e.stop()}}),e,null,[[4,10],[19,,25,29]])}))),[c,h,l,i,a,I,d,u,o,k,M]);if(r.useEffect((function(){c&&L.current&&(A(),L.current=!1)}),[c,A]),!c)return null;var O=n?n.productType:"product",F=n?n.name:"",D=k?{subtitle:(0,W.jsx)(v.Trans,{id:"Your {productType} has been activated!",values:{productType:O}}),content:(0,W.jsx)(R.x1,{justifyContent:"center",alignItems:"center",noMargin:!0,children:(0,W.jsx)(w.Z,{children:(0,W.jsx)(v.Trans,{id:"You can now go back to use your new product."})})})}:{subtitle:(0,W.jsx)(v.Trans,{id:"The {productType} {productName} will be linked to your account {0}",values:{0:c.email,productType:O,productName:F}}),content:null},N=[(0,W.jsx)(T.Z,{label:k?(0,W.jsx)(v.Trans,{id:"Close"}):(0,W.jsx)(v.Trans,{id:"Cancel"}),onClick:o,disabled:h},"cancel"),k?null:(0,W.jsx)(Z.vF,{primary:!0,label:h?(0,W.jsx)(v.Trans,{id:"Activating..."}):(0,W.jsx)(v.Trans,{id:"Activate"}),onClick:A,disabled:h},"activate")];return(0,W.jsx)(Z.ZP,{title:(0,W.jsx)(v.Trans,{id:"Activate {productName}",values:{productName:F}}),maxWidth:"md",open:!0,onRequestClose:o,actions:N,onApply:k?o:A,cannotBeDismissed:!0,flexColumnBody:!0,children:(0,W.jsxs)(P.ep,{noMargin:!0,alignItems:"center",children:[n&&(0,W.jsx)(Pe.W,{style:(0,g.Z)((0,g.Z)({},Ae),{},{background:E.paper.backgroundColor.light}),src:n.thumbnailUrls[0],alt:"Preview image of product ".concat(n.name)}),(0,W.jsxs)(R.sg,{children:[(0,W.jsxs)(P.pJ,{justifyContent:"flex-start",alignItems:"center",noMargin:!0,children:[k&&(0,W.jsx)(Me.Z,{}),(0,W.jsx)(w.Z,{size:"sub-title",children:D.subtitle})]}),D.content]})]})})},Re=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([xe(),(0,ye.rM)()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={authenticatedUser:re.aZ,loginDialogOpen:!1,loginWithPurchaseClaimDialogOpen:!1,createAccountDialogOpen:!1,createAccountWithPurchaseClaimDialogOpen:!1,loginInProgress:!1,createAccountInProgress:!1,editProfileDialogOpen:!1,editInProgress:!1,deleteInProgress:!1,apiCallError:null,resetPasswordDialogOpen:!1,emailVerificationDialogOpen:!1,emailVerificationDialogProps:{sendEmailAutomatically:!1,showSendEmailButton:!1},forgotPasswordInProgress:!1,changeEmailDialogOpen:!1,changeEmailInProgress:!1,userSnackbarMessage:null,claimedProductOptions:null},e._automaticallyUpdateUserProfile=!0,e._hasNotifiedUserAboutEmailVerification=!1,e._abortController=null,e._notificationPollingIntervalId=null,e._cloudProjectListingDeduplicator=new je(me.xU),e._reloadFirebaseProfile=(0,x.Z)((0,m.Z)().mark((function t(){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.authentication,t.prev=1,t.next=4,n.getFirebaseUser();case 4:if(r=t.sent){t.next=8;break}return e._markAuthenticatedUserAsLoggedOut(),t.abrupt("return",null);case 8:return e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{firebaseUser:r})}})),t.abrupt("return",r);case 12:throw t.prev=12,t.t0=t.catch(1),console.error("Unable to fetch the authenticated Firebase user:",t.t0),e._markAuthenticatedUserAsLoggedOut(),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,12]])}))),e._fetchUserProfileWithoutThrowingErrors=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._fetchUserProfile(n);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("Error while fetching the user profile - but ignoring it.",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),e._fetchUserProfile=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n){var r,i,a;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.authentication,e.setState((function(e){var t=e.authenticatedUser,r=(0,g.Z)((0,g.Z)({},t),{},{loginState:"loggingIn",cloudProjectsFetchingErrorLabel:null});return n&&n.resetState&&(r=(0,g.Z)((0,g.Z)({},r),re.Jo)),{authenticatedUser:r}})),t.prev=2,t.next=5,e._reloadFirebaseProfile();case 5:if(i=t.sent){t.next=9;break}return console.info("User is not authenticated."),t.abrupt("return");case 9:t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(2),console.error("Unable to fetch the authenticated Firebase user:",t.t0),t.t0;case 15:return(0,b.Xp)(r.getAuthorizationHeader,i.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{usages:t})}}))}),(function(e){console.error("Error while loading user usages:",e)})),(0,b.rE)(r.getAuthorizationHeader,i.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{subscription:t})}}))}),(function(e){console.error("Error while loading user subscriptions:",e)})),(0,b.Mm)(r.getAuthorizationHeader,i.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{limits:t})}}))}),(function(e){console.error("Error while loading user limits:",e)})),(0,b.mM)(r.getAuthorizationHeader,i.uid).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{userEarningsBalance:t})}}))}),(function(e){console.error("Error while loading user earnings balance:",e)})),e._cloudProjectListingDeduplicator.launchRequestOrGetOngoingPromise([r.getAuthorizationHeader,i.uid]).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{cloudProjects:t})}}))}),(function(t){console.error("Error while loading user cloud projects:",t),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{cloudProjectsFetchingErrorLabel:(0,W.jsx)(v.Trans,{id:"We couldn't load your cloud projects. Verify your internet connection or try again later."})})}}))})),(0,ve.QR)(r.getAuthorizationHeader,{userId:i.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{receivedAssetPacks:t})}}))}),(function(e){console.error("Error while loading received asset packs:",e)})),(0,ve.Tm)(r.getAuthorizationHeader,{userId:i.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{receivedAssetShortHeaders:t})}}))}),(function(e){console.error("Error while loading received asset short headers:",e)})),(0,C.HU)(r.getAuthorizationHeader,{userId:i.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{recommendations:t})}}))}),(function(e){var t=(0,Ze.T)(e);t&&404===t.status?console.warn("List recommendations endpoint returned 404, user might not have completed survey."):console.error("Error while loading recommendations:",e)})),(0,ve.bq)(r.getAuthorizationHeader,{userId:i.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{receivedGameTemplates:t})}}))}),(function(e){console.error("Error while loading received game templates:",e)})),(0,ve.N$)(r.getAuthorizationHeader,{userId:i.uid}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{receivedBundles:t})}}))}),(function(e){console.error("Error while loading received bundles:",e)})),(0,Te.cx)(r.getAuthorizationHeader,{userId:i.uid,productType:"game-template",role:"receiver"}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{gameTemplatePurchases:t})}}))}),(function(e){console.error("Error while loading game template purchases:",e)})),(0,Te.cx)(r.getAuthorizationHeader,{userId:i.uid,productType:"asset-pack",role:"receiver"}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{assetPackPurchases:t})}}))}),(function(e){console.error("Error while loading asset pack purchases:",e)})),(0,Te.cx)(r.getAuthorizationHeader,{userId:i.uid,productType:"course",role:"receiver"}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{coursePurchases:t})}}))}),(function(e){console.error("Error while loading course purchases:",e)})),(0,Te.cx)(r.getAuthorizationHeader,{userId:i.uid,productType:"bundle",role:"receiver"}).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{bundlePurchases:t})}}))}),(function(e){console.error("Error while loading bundle purchases:",e)})),e._fetchUserBadges(),e._fetchAchievements(),e._fetchUserNotifications(),t.next=34,r.getUserProfile(r.getAuthorizationHeader);case 34:if((a=t.sent).isCreator){t.next=44;break}return t.prev=36,t.next=39,(0,C.uz)(r.getAuthorizationHeader,{editedUserId:a.id,userId:a.id,changes:{isCreator:!0}});case 39:t.next=44;break;case 41:t.prev=41,t.t1=t.catch(36),console.error("Error while updating the user profile:",t.t1);case 44:e._notificationPollingIntervalId||(e._notificationPollingIntervalId=setInterval((function(){"visible"===document.visibilityState&&e._fetchUserNotifications()}),6e5)),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{profile:a,loginState:"done",authenticated:!0})}}),(function(){(0,ne.jP)(e.state.authenticatedUser),n&&n.dontNotifyAboutEmailVerification||e._notifyUserAboutEmailVerification()}));case 46:case"end":return t.stop()}}),t,null,[[2,11],[36,41]])})));return function(e){return t.apply(this,arguments)}}(),e._fetchUserSubscription=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,b.rE)(n.getAuthorizationHeader,r.uid);case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{subscription:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user subscriptions:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserNotifications=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,Se.wd)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{notifications:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user notifications:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserUsages=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,b.Xp)(n.getAuthorizationHeader,r.uid);case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{usages:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user usages:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchEarningsBalance=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,b.mM)(n.getAuthorizationHeader,r.uid);case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{userEarningsBalance:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user earnings balance:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserLimits=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,b.Mm)(n.getAuthorizationHeader,r.uid);case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{limits:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading user limits:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserSubscriptionLimitsAndUsages=(0,x.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e._fetchUserSubscription(),e._fetchUserUsages(),e._fetchUserLimits()]);case 2:case"end":return t.stop()}}),t)}))),e._fetchUserAssetPacks=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,ve.QR)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{receivedAssetPacks:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading received asset packs:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserAssetShortHeaders=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,ve.Tm)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{receivedAssetShortHeaders:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading received asset short headers:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserGameTemplates=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,ve.bq)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{receivedGameTemplates:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading received game templates:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserBundles=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,ve.N$)(n.getAuthorizationHeader,{userId:r.uid});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{receivedBundles:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading received bundles:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserGameTemplatePurchases=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,Te.cx)(n.getAuthorizationHeader,{userId:r.uid,productType:"game-template",role:"receiver"});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{gameTemplatePurchases:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading game template purchases:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserAssetPackPurchases=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,Te.cx)(n.getAuthorizationHeader,{userId:r.uid,productType:"asset-pack",role:"receiver"});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{assetPackPurchases:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading asset pack purchases:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserCoursePurchases=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,Te.cx)(n.getAuthorizationHeader,{userId:r.uid,productType:"course",role:"receiver"});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{coursePurchases:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading course purchases:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserBundlePurchases=(0,x.Z)((0,m.Z)().mark((function t(){var n,r,i;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,Te.cx)(n.getAuthorizationHeader,{userId:r.uid,productType:"bundle",role:"receiver"});case 7:i=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{bundlePurchases:i})}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.error("Error while loading bundle purchases:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),e._fetchUserProducts=(0,x.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e._fetchUserAssetPacks(),e._fetchUserAssetShortHeaders(),e._fetchUserGameTemplates(),e._fetchUserBundles()]);case 2:case"end":return t.stop()}}),t)}))),e._fetchUserCloudProjects=(0,x.Z)((0,m.Z)().mark((function t(){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication,r=e.state.authenticatedUser.firebaseUser){t.next=4;break}return t.abrupt("return");case 4:e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{cloudProjectsFetchingErrorLabel:null})}})),e._cloudProjectListingDeduplicator.launchRequestOrGetOngoingPromise([n.getAuthorizationHeader,r.uid]).then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{cloudProjects:t})}}))}),(function(t){console.error("Error while loading user cloud projects:",t),e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{cloudProjectsFetchingErrorLabel:(0,W.jsx)(v.Trans,{id:"We couldn't load your cloud projects. Verify your internet connection or try again later."})})}}))}));case 6:case"end":return t.stop()}}),t)}))),e._fetchUserBadges=(0,x.Z)((0,m.Z)().mark((function t(){var n,r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.authenticatedUser.firebaseUser){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,C.r0)(n.uid);case 6:r=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{badges:r})}})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Error while loading user badges:",t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])}))),e._fetchAchievements=(0,x.Z)((0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.authenticatedUser.achievements){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,(0,j.jy)();case 5:n=t.sent,e.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),{},{achievements:n})}})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error("Error while loading achievements:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),e._notifyUserAboutEmailVerification=function(){var t=e.state.authenticatedUser,n=t.profile,r=t.firebaseUser;if(n&&(!r||!r.emailVerified)){var i=Date.now()-n.createdAt<1e4;e._hasNotifiedUserAboutEmailVerification||setTimeout((function(){e.openEmailVerificationDialog({open:!0,sendEmailAutomatically:!1,showSendEmailButton:!i})}),1e3)}},e._doLogout=(0,x.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.authentication){t.next=3;break}return t.next=3,e.props.authentication.logout();case 3:e._markAuthenticatedUserAsLoggedOut(),Re(),e.showUserSnackbar({message:(0,W.jsx)(v.Trans,{id:"You're now logged out"})});case 6:case"end":return t.stop()}}),t)}))),e._showLoginSnackbar=function(t){var n=t.profile?t.profile.username:null;e.showUserSnackbar({message:n?(0,W.jsx)(v.Trans,{id:"\ud83d\udc4b Good to see you {username}!",values:{username:n}}):(0,W.jsx)(v.Trans,{id:"\ud83d\udc4b Good to see you!"})})},e._doLoginWithProvider=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({createAccountInProgress:!0,loginInProgress:!0,apiCallError:null,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!0,authenticationError:null})}),e._automaticallyUpdateUserProfile=!1,t.prev=5,e._abortController=new AbortController,t.next=9,r.loginWithProvider({provider:n,signal:e._abortController.signal});case 9:return t.next=11,e._fetchUserProfileWithoutThrowingErrors({resetState:!0});case 11:e.openLoginDialog(!1),e.openLoginWithPurchaseClaimDialog(!1,e.state.claimedProductOptions),e.openCreateAccountDialog(!1),e.openCreateAccountWithPurchaseClaimDialog(!1,e.state.claimedProductOptions),e._showLoginSnackbar(e.state.authenticatedUser),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(5),t.t0.name!==we.L&&((0,ke.gR)({rawError:t.t0,errorId:"login-with-provider",doNotReport:!0,message:"An error occurred while logging in with provider ".concat(n,". Please check your internet connection or try again later.")}),e.setState({apiCallError:t.t0,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{authenticationError:t.t0})}));case 21:e.setState({createAccountInProgress:!1,loginInProgress:!1,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!1})}),e._automaticallyUpdateUserProfile=!0;case 23:case"end":return t.stop()}}),t,null,[[5,18]])})));return function(e){return t.apply(this,arguments)}}(),e._cancelLoginOrSignUp=function(){e._abortController&&(e._abortController.abort(),e._abortController=null)},e._doLogin=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({loginInProgress:!0,apiCallError:null,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!0,authenticationError:null})}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.login(n);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors({resetState:!0});case 10:e.openLoginDialog(!1),e.openLoginWithPurchaseClaimDialog(!1,e.state.claimedProductOptions),e._showLoginSnackbar(e.state.authenticatedUser),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),e.setState({apiCallError:t.t0,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{authenticationError:t.t0})});case 18:e.setState({loginInProgress:!1,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!1})}),e._automaticallyUpdateUserProfile=!0;case 20:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}(),e._doEdit=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n,r){var i,a;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:if(a=e.state.authenticatedUser.profile){t.next=6;break}return t.abrupt("return");case 6:return e.setState({editInProgress:!0,apiCallError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=8,t.next=11,(0,C.uz)(i.getAuthorizationHeader,{editedUserId:a.id,userId:a.id,changes:{username:n.username,description:n.description,getGameStatsEmail:n.getGameStatsEmail,getNewsletterEmail:n.getNewsletterEmail,appLanguage:r.language,donateLink:n.donateLink,discordUsername:n.discordUsername,githubUsername:n.githubUsername,communityLinks:n.communityLinks,survey:n.survey}});case 11:return t.next=13,e._fetchUserProfileWithoutThrowingErrors();case 13:t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(8),e.setState({apiCallError:t.t0}),t.t0;case 19:return t.prev=19,e.setState({editInProgress:!1}),e._automaticallyUpdateUserProfile=!0,t.finish(19);case 23:case"end":return t.stop()}}),t,null,[[8,15,19,23]])})));return function(e,n){return t.apply(this,arguments)}}(),e._doCreateAccount=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n,r){var i,a,o,s;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({createAccountInProgress:!0,apiCallError:null,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!0,authenticationError:null})}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,i.createFirebaseAccount(n);case 8:return t.prev=8,t.next=11,i.createUser(i.getAuthorizationHeader,n,r.language);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(8);case 15:return t.next=17,e._fetchUserProfileWithoutThrowingErrors({dontNotifyAboutEmailVerification:!0,resetState:!0});case 17:e.openCreateAccountDialog(!1),e.openCreateAccountWithPurchaseClaimDialog(!1,e.state.claimedProductOptions),(0,ne.rP)(n.email),a=e.state.authenticatedUser.firebaseUser,(0,ne.Oy)(a),o=e.state.authenticatedUser.profile,s=o?o.username:null,e.showUserSnackbar({message:s?(0,W.jsx)(v.Trans,{id:"\ud83d\udc4b Welcome to GDevelop {username}!",values:{username:s}}):(0,W.jsx)(v.Trans,{id:"\ud83d\udc4b Welcome to GDevelop!"})}),t.next=30;break;case 27:t.prev=27,t.t1=t.catch(5),e.setState({apiCallError:t.t1,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{authenticationError:t.t1})});case 30:e.setState({createAccountInProgress:!1,authenticatedUser:(0,g.Z)((0,g.Z)({},e.state.authenticatedUser),{},{creatingOrLoggingInAccount:!1})}),e._automaticallyUpdateUserProfile=!0;case 32:case"end":return t.stop()}}),t,null,[[5,27],[8,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e._doDeleteAccount=(0,x.Z)((0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({deleteInProgress:!0,apiCallError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,n.deleteAccount(n.getAuthorizationHeader);case 8:e._markAuthenticatedUserAsLoggedOut(),Re(),e.openEditProfileDialog(!1),e.showUserSnackbar({message:(0,W.jsx)(v.Trans,{id:"Your account has been deleted!"})}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),e.setState({apiCallError:t.t0});case 17:e.setState({deleteInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 19:case"end":return t.stop()}}),t,null,[[5,14]])}))),e._doForgotPassword=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,r.forgotPassword(n);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(3);case 10:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e._doSendEmailVerification=(0,x.Z)((0,m.Z)().mark((function t(){var n;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.sendFirebaseEmailVerification();case 5:case"end":return t.stop()}}),t)}))),e._doAcceptGameStatsEmail=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({editInProgress:!0,apiCallError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.acceptGameStatsEmail(r.getAuthorizationHeader,n);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e.setState({apiCallError:t.t0});case 15:e.setState({editInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),e._doChangeEmail=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n){var r;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.authentication){t.next=3;break}return t.abrupt("return");case 3:return e.setState({changeEmailInProgress:!0,apiCallError:null}),e._automaticallyUpdateUserProfile=!1,t.prev=5,t.next=8,r.changeEmail(r.getAuthorizationHeader,n);case 8:return t.next=10,e._fetchUserProfileWithoutThrowingErrors();case 10:e.openChangeEmailDialog(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),e.setState({apiCallError:t.t0});case 16:e.setState({changeEmailInProgress:!1}),e._automaticallyUpdateUserProfile=!0;case 18:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}(),e.openEmailVerificationDialog=function(t){var n=t.open,r=void 0===n||n,i=t.sendEmailAutomatically,a=void 0!==i&&i,o=t.showSendEmailButton,s=void 0!==o&&o;e.setState({emailVerificationDialogOpen:r,emailVerificationDialogProps:{sendEmailAutomatically:!!r&&a,showSendEmailButton:!!r&&s}}),r||(e._hasNotifiedUserAboutEmailVerification=!0)},e.openResetPassword=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({resetPasswordDialogOpen:t,apiCallError:null})},e.openLoginDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({loginDialogOpen:t,createAccountDialogOpen:!1,apiCallError:null})},e.openLoginWithPurchaseClaimDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({loginWithPurchaseClaimDialogOpen:t,createAccountWithPurchaseClaimDialogOpen:!1,apiCallError:null,claimedProductOptions:n})},e.showUserSnackbar=function(t){var n=t.message;e.setState({userSnackbarMessage:n?(0,W.jsx)("span",{children:n}):null})},e.openEditProfileDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({editProfileDialogOpen:t,apiCallError:null})},e.openCreateAccountDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({loginDialogOpen:!1,createAccountDialogOpen:t,apiCallError:null})},e.openCreateAccountWithPurchaseClaimDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({loginWithPurchaseClaimDialogOpen:!1,createAccountWithPurchaseClaimDialogOpen:t,apiCallError:null,claimedProductOptions:n})},e.openPurchaseClaimDialog=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.setState({claimedProductOptions:t})},e.openChangeEmailDialog=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({changeEmailDialogOpen:t,apiCallError:null})},e._onUpdateGithubStar=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n,r){var i,a;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props.authentication,t.next=3,e._doEdit({githubUsername:n},r);case 3:return e.setState({editInProgress:!0}),t.prev=4,t.next=7,i.updateGitHubStar(i.getAuthorizationHeader);case 7:return a=t.sent,e._fetchUserBadges(),t.abrupt("return",a);case 10:return t.prev=10,e.setState({editInProgress:!1}),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[4,,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e._onUpdateTiktokFollow=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n,r){var i,a;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props.authentication,t.next=3,e._doEdit({communityLinks:n},r);case 3:return e.setState({editInProgress:!0}),t.prev=4,t.next=7,i.updateTiktokFollow(i.getAuthorizationHeader);case 7:return a=t.sent,e._fetchUserBadges(),t.abrupt("return",a);case 10:return t.prev=10,e.setState({editInProgress:!1}),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[4,,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e._onUpdateTwitterFollow=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n,r){var i,a;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props.authentication,t.next=3,e._doEdit({communityLinks:n},r);case 3:return e.setState({editInProgress:!0}),t.prev=4,t.next=7,i.updateTwitterFollow(i.getAuthorizationHeader);case 7:return a=t.sent,e._fetchUserBadges(),t.abrupt("return",a);case 10:return t.prev=10,e.setState({editInProgress:!1}),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[4,,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e._onUpdateYoutubeSubscription=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n,r){var i,a;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props.authentication,t.next=3,e._doEdit({communityLinks:n},r);case 3:return e.setState({editInProgress:!0}),t.prev=4,t.next=7,i.updateYoutubeSubscription(i.getAuthorizationHeader);case 7:return a=t.sent,e._fetchUserBadges(),t.abrupt("return",a);case 10:return t.prev=10,e.setState({editInProgress:!1}),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[4,,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=(0,x.Z)((0,m.Z)().mark((function e(){var t=this;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.authentication.waitForInitialAuthCheck();case 2:if(this._initializeAuthenticatedUser(),this.props.authentication.addUserLogoutListener(ne.mA),this.props.authentication.addUserLogoutListener(this._fetchUserProfileWithoutThrowingErrors),this.props.authentication.addUserUpdateListener((function(){t._automaticallyUpdateUserProfile?(console.info("Fetching user profile as the authenticated user changed..."),t._fetchUserProfileWithoutThrowingErrors()):console.info("The authenticated user changed, but not fetching the user profile again (deactivated).")})),!this.props.authentication.getFirebaseUserSync()){e.next=14;break}return console.info("Fetching user profile as authenticated user found at startup..."),this._automaticallyUpdateUserProfile=!1,e.next=11,this._fetchUserProfileWithoutThrowingErrors({resetState:!0});case 11:this._automaticallyUpdateUserProfile=!0,e.next=17;break;case 14:console.info("No authenticated user found at startup."),this._markAuthenticatedUserAsLoggedOut(),(0,ne.jP)(this.state.authenticatedUser);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_initializeAuthenticatedUser",value:function(){var e=this;this._fetchAchievements(),this.setState((function(t){t.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},re.aZ),{},{onLogin:e._doLogin,onLoginWithProvider:e._doLoginWithProvider,onCancelLoginOrSignUp:e._cancelLoginOrSignUp,onLogout:e._doLogout,onCreateAccount:e._doCreateAccount,onEditProfile:e._doEdit,onResetPassword:e._doForgotPassword,onBadgesChanged:e._fetchUserBadges,onCloudProjectsChanged:e._fetchUserCloudProjects,onOpenLoginDialog:function(){return e.openLoginDialog(!0)},onOpenLoginWithPurchaseClaimDialog:function(t){return e.openLoginWithPurchaseClaimDialog(!0,t)},onOpenEditProfileDialog:function(){return e.openEditProfileDialog(!0)},onOpenChangeEmailDialog:function(){return e.openChangeEmailDialog(!0)},onOpenCreateAccountDialog:function(){return e.openCreateAccountDialog(!0)},onOpenCreateAccountWithPurchaseClaimDialog:function(t){return e.openCreateAccountWithPurchaseClaimDialog(!0,t)},onOpenPurchaseClaimDialog:function(t){return e.openPurchaseClaimDialog(t)},onRefreshUserProfile:e._fetchUserProfile,onRefreshFirebaseProfile:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._reloadFirebaseProfile();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onRefreshSubscription:e._fetchUserSubscriptionLimitsAndUsages,onRefreshLimits:e._fetchUserLimits,onRefreshGameTemplatePurchases:e._fetchUserGameTemplatePurchases,onRefreshAssetPackPurchases:e._fetchUserAssetPackPurchases,onRefreshCoursePurchases:e._fetchUserCoursePurchases,onRefreshBundlePurchases:e._fetchUserBundlePurchases,onRefreshEarningsBalance:e._fetchEarningsBalance,onRefreshNotifications:e._fetchUserNotifications,onPurchaseSuccessful:e._fetchUserProducts,onSendEmailVerification:e._doSendEmailVerification,onOpenEmailVerificationDialog:function(t){var n=t.sendEmailAutomatically,r=t.showSendEmailButton;return e.openEmailVerificationDialog({open:!0,sendEmailAutomatically:n,showSendEmailButton:r})},onAcceptGameStatsEmail:e._doAcceptGameStatsEmail,getAuthorizationHeader:function(){return e.props.authentication.getAuthorizationHeader()}})}})),this._hasNotifiedUserAboutEmailVerification=!1}},{key:"_markAuthenticatedUserAsLoggedOut",value:function(){var e=this;this._notificationPollingIntervalId&&(clearInterval(this._notificationPollingIntervalId),this._notificationPollingIntervalId=null),this.setState((function(e){var t=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},t),re.Pu)}})),this._hasNotifiedUserAboutEmailVerification=!1,(0,C.NV)().then((function(t){return e.setState((function(e){var n=e.authenticatedUser;return{authenticatedUser:(0,g.Z)((0,g.Z)({},n),{},{recommendations:t})}}))}),(function(e){console.error("Error while loading default recommendations:",e)}))}},{key:"render",value:function(){var e=this;return(0,W.jsxs)(re.ZP.Provider,{value:this.state.authenticatedUser,children:[this.props.children,this.state.loginDialogOpen&&(0,W.jsx)(te,{onClose:function(){e._cancelLoginOrSignUp(),e.openLoginDialog(!1)},onGoToCreateAccount:function(){return e.openCreateAccountDialog(!0)},onLogin:this._doLogin,onLoginWithProvider:this._doLoginWithProvider,loginInProgress:this.state.loginInProgress,error:this.state.apiCallError,onForgotPassword:this._doForgotPassword}),this.state.loginWithPurchaseClaimDialogOpen&&this.state.claimedProductOptions&&(0,W.jsx)(Ie,{onClose:function(){e._cancelLoginOrSignUp(),e.openLoginWithPurchaseClaimDialog(!1)},onGoToCreateAccount:function(){return e.openCreateAccountWithPurchaseClaimDialog(!0,e.state.claimedProductOptions)},onLogin:this._doLogin,onLoginWithProvider:this._doLoginWithProvider,loginInProgress:this.state.loginInProgress,error:this.state.apiCallError,onForgotPassword:this._doForgotPassword,claimedProductOptions:this.state.claimedProductOptions}),this.state.authenticatedUser.profile&&this.state.editProfileDialogOpen&&(0,W.jsx)(ue,{profile:this.state.authenticatedUser.profile,achievements:this.state.authenticatedUser.achievements,limits:this.state.authenticatedUser.limits,badges:this.state.authenticatedUser.badges,subscription:this.state.authenticatedUser.subscription,onClose:function(){return e.openEditProfileDialog(!1)},onEdit:function(){var t=(0,x.Z)((0,m.Z)().mark((function t(n){return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._doEdit(n,e.props.preferencesValues);case 3:e.openEditProfileDialog(!1),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),onUpdateGitHubStar:function(t){return e._onUpdateGithubStar(t,e.props.preferencesValues)},onUpdateTiktokFollow:function(t){return e._onUpdateTiktokFollow(t,e.props.preferencesValues)},onUpdateTwitterFollow:function(t){return e._onUpdateTwitterFollow(t,e.props.preferencesValues)},onUpdateYoutubeSubscription:function(t){return e._onUpdateYoutubeSubscription(t,e.props.preferencesValues)},onDelete:this._doDeleteAccount,actionInProgress:this.state.editInProgress||this.state.deleteInProgress,error:this.state.apiCallError}),this.state.authenticatedUser.firebaseUser&&this.state.changeEmailDialogOpen&&(0,W.jsx)(de,{firebaseUser:this.state.authenticatedUser.firebaseUser,onClose:function(){return e.openChangeEmailDialog(!1)},onChangeEmail:this._doChangeEmail,changeEmailInProgress:this.state.changeEmailInProgress,error:this.state.apiCallError}),this.state.createAccountDialogOpen&&(0,W.jsx)(X,{onClose:function(){e._cancelLoginOrSignUp(),e.openCreateAccountDialog(!1)},onGoToLogin:function(){return e.openLoginDialog(!0)},onCreateAccount:function(t){return e._doCreateAccount(t,e.props.preferencesValues)},onLoginWithProvider:this._doLoginWithProvider,createAccountInProgress:this.state.createAccountInProgress,error:this.state.apiCallError}),this.state.createAccountWithPurchaseClaimDialogOpen&&this.state.claimedProductOptions&&(0,W.jsx)(Ee,{onClose:function(){e._cancelLoginOrSignUp(),e.openCreateAccountWithPurchaseClaimDialog(!1)},onGoToLogin:function(){return e.openLoginWithPurchaseClaimDialog(!0,e.state.claimedProductOptions)},onCreateAccount:function(t){return e._doCreateAccount(t,e.props.preferencesValues)},onLoginWithProvider:this._doLoginWithProvider,createAccountInProgress:this.state.createAccountInProgress,error:this.state.apiCallError,claimedProductOptions:this.state.claimedProductOptions}),this.state.emailVerificationDialogOpen&&(0,W.jsx)(ge,(0,g.Z)((0,g.Z)({authenticatedUser:this.state.authenticatedUser,onClose:function(){e.openEmailVerificationDialog({open:!1}),e.state.authenticatedUser.onRefreshFirebaseProfile().catch((function(){}))}},this.state.emailVerificationDialogProps),{},{onSendEmail:this._doSendEmailVerification})),this.state.claimedProductOptions&&(0,W.jsx)(Oe,{claimedProductOptions:this.state.claimedProductOptions,onClose:function(){return e.openPurchaseClaimDialog(null)}}),(0,W.jsx)(be.Z,{open:!!this.state.userSnackbarMessage,autoHideDuration:3e3,onClose:function(){return e.showUserSnackbar({message:null})},ContentProps:{"aria-describedby":"snackbar-message"},message:(0,W.jsx)("span",{id:"snackbar-message",children:this.state.userSnackbarMessage})})]})}}]),n}(r.Component),De=n(73412),Ne=n(92371),_e=n(36262),Be=n(4942),Ue=n(25625),Ve=n(88991),He=n.g.gd,ze=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={language:"en",catalogs:{},i18n:null},e._loadCatalog=function(){var t=(0,x.Z)((0,m.Z)().mark((function t(r){var i,a,o,s,l,c;return(0,m.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.catalogs[r]){t.next=2;break}return t.abrupt("return",e.state.catalogs);case 2:return t.prev=2,i=r.replace("-","_"),t.next=6,Promise.all([n(91485)("./".concat(i,"/messages")),n(80511)("./".concat(i,"/extension-messages"))]);case 6:return a=t.sent,o=(0,y.Z)(a,2),s=o[0],l=o[1],c={languageData:s.languageData,messages:(0,g.Z)((0,g.Z)({},l.messages),s.messages)},t.abrupt("return",(0,g.Z)((0,g.Z)({},e.state.catalogs),{},(0,Be.Z)({},r,c)));case 14:return t.prev=14,t.t0=t.catch(2),console.error("Error while loading language="+r,t.t0),t.abrupt("return",e.state.catalogs);case 18:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){this._loadLanguage(this.props.language)}},{key:"componentDidUpdate",value:function(e){e.language!==this.props.language&&this._loadLanguage(this.props.language)}},{key:"_loadLanguage",value:function(){var e=(0,x.Z)((0,m.Z)().mark((function e(t){var n,r=this;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadCatalog(t);case 2:n=e.sent,this.setState({language:t,catalogs:n,i18n:(0,Ue.setupI18n)({language:t,catalogs:n})},(function(){var e=r.state.i18n;He.getTranslation=(0,Ve.P)(e),console.info('Loaded "'.concat(t,'" language'))}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.i18n,n=e.catalogs,r=e.language,i=this.props.children;return t?(0,W.jsx)(v.I18nProvider,{i18n:t,language:r,catalogs:n,children:i}):null}}]),r}(r.Component),We=n(28923),Ge=n(51458),Ye=n(83491),qe=n.n(Ye),Je=function(e){var t=e.children,n=e.i18n,i=e.makeEventsFunctionCodeWriter,a=e.eventsFunctionsExtensionWriter,o=e.eventsFunctionsExtensionOpener,s=r.useState(null),l=(0,y.Z)(s,2),c=l[0],u=l[1],d=r.useRef({}),p=r.useRef(null),f=r.useCallback((function(e){var t=e.includeFile,n=e.content;d.current[t]=qe().h32(n,43981).toNumber()}),[]),h=r.useMemo((function(){return i({onWriteFile:f})}),[f,i]),g=r.useCallback((function(){return p.current?console.info("Waiting on the events functions extensions to finish loading..."):console.info("Events functions extensions are ready."),p.current?p.current.then((function(){console.info("Events functions extensions finished loading.")})):Promise.resolve()}),[]),m=r.useCallback((function(e){if(!e||!h)return Promise.resolve();var t=p.current||Promise.resolve();return p.current=t.then((function(){return(0,Ge.At)(e,h,n)})).then((function(){return u(null)})).catch((function(e){u(e),(0,ke.gR)({message:n._({id:"An error has occurred during functions generation. If GDevelop is installed, verify that nothing is preventing GDevelop from writing on disk. If you're running GDevelop online, verify your internet connection and refresh functions from the Project Manager."}),rawError:e,errorId:"events-functions-extensions-load-error"})})).then((function(){p.current=null})),p.current}),[h,n]),x=r.useCallback((function(e,t){if(e&&h)try{(0,Ge.fP)(e,t,h,n)}catch(c){u(c),(0,ke.gR)({message:n._({id:"An error has occurred during functions generation. If GDevelop is installed, verify that nothing is preventing GDevelop from writing on disk. If you're running GDevelop online, verify your internet connection and refresh functions from the Project Manager."}),rawError:c,errorId:"events-functions-extensions-load-error"})}}),[h,n]),v=r.useCallback((function(e){(0,Ge.$5)(e)}),[]),b=r.useCallback((function(e,t){(0,Ge.e0)(e,t)}),[]),C=r.useCallback((function(e){return e&&v(e),m(e)}),[m,v]),j=r.useMemo((function(){return{eventsFunctionsExtensionsError:c,loadProjectEventsFunctionsExtensions:m,unloadProjectEventsFunctionsExtensions:v,unloadProjectEventsFunctionsExtension:b,reloadProjectEventsFunctionsExtensions:C,reloadProjectEventsFunctionsExtensionMetadata:x,ensureLoadFinished:g,getEventsFunctionsExtensionWriter:function(){return a},getEventsFunctionsExtensionOpener:function(){return o},getIncludeFileHashs:function(){return d.current}}}),[g,m,x,C,b,v,o,a,c]);return(0,W.jsx)(We.Z.Provider,{value:j,children:t})},Xe=n(19174),Ke=n(59788),Qe=n(84090),$e=n(23375),et=n(30227),tt=n(2866),nt=n(49807),rt=n(48210),it=n(8162),at=n(72291),ot=n(91739);var st=function(e){return(0,W.jsx)(v.I18n,{children:function(t){var n=t.i18n;return(0,W.jsx)(Z.ZP,{title:n._(e.title),open:e.open,fullscreen:"never-even-on-mobile",actions:[(0,W.jsx)(T.Z,{keyboardFocused:!0,label:e.dismissButtonLabel?n._(e.dismissButtonLabel):(0,W.jsx)(v.Trans,{id:"OK"}),onClick:e.onDismiss},"dismiss")],maxWidth:"xs",onRequestClose:e.onDismiss,onApply:e.onDismiss,children:(0,W.jsx)(w.Z,{children:(0,W.jsx)(H.r,{translatableSource:e.message,isStandaloneText:!0})})})}})};var lt=function(e){return(0,W.jsx)(v.I18n,{children:function(t){var n=t.i18n,r=e.dismissButtonLabel?n._(e.dismissButtonLabel):(0,W.jsx)(v.Trans,{id:"Cancel"}),i=e.makeDismissButtonPrimary?(0,W.jsx)(Z.vF,{keyboardFocused:!0,label:r,onClick:e.onDismiss,primary:!0},"dismiss"):(0,W.jsx)(T.Z,{keyboardFocused:!0,label:r,onClick:e.onDismiss},"dismiss"),a=e.confirmButtonLabel?n._(e.confirmButtonLabel):(0,W.jsx)(v.Trans,{id:"Confirm"}),o=[i,e.makeDismissButtonPrimary?(0,W.jsx)(T.Z,{label:a,onClick:e.onConfirm},"confirm"):(0,W.jsx)(Z.vF,{label:a,onClick:e.onConfirm,primary:!0},"confirm")];return(0,W.jsx)(Z.ZP,{dangerLevel:"warning"===e.level?"warning":"error"===e.level?"danger":void 0,title:n._(e.title),open:e.open,actions:o,maxWidth:e.maxWidth||"xs",fullscreen:"never-even-on-mobile",onRequestClose:e.onDismiss,onApply:e.onConfirm,children:(0,W.jsx)(w.Z,{children:(0,W.jsx)(H.r,{translatableSource:e.message,isStandaloneText:!0})})})}})},ct=n(35213);var ut=function(e){var t=e.open,n=e.confirmText,i=r.useState(""),a=(0,y.Z)(i,2),o=a[0],s=a[1],l=r.useRef(null),c=!e.confirmText||o===e.confirmText,u=(0,ct.bX)(),d=function(){c&&(e.onConfirm(),s(""))};return r.useEffect((function(){t&&u&&!n&&setTimeout((function(){l.current&&l.current.focus()}),50)}),[t,u,n]),(0,W.jsx)(v.I18n,{children:function(n){var r=n.i18n;return(0,W.jsxs)(Z.ZP,{title:r._(e.title),open:t,dangerLevel:"danger",onApply:d,onRequestClose:e.onDismiss,maxWidth:"sm",flexColumnBody:!0,actions:[(0,W.jsx)(T.Z,{label:e.dismissButtonLabel?r._(e.dismissButtonLabel):(0,W.jsx)(v.Trans,{id:"Cancel"}),primary:!1,onClick:e.onDismiss},"cancel"),(0,W.jsx)(Z.vF,{ref:l,color:"danger",label:e.confirmButtonLabel?r._(e.confirmButtonLabel):(0,W.jsx)(v.Trans,{id:"Confirm"}),primary:!0,onClick:d,disabled:!c},"confirm")],fullscreen:"never-even-on-mobile",children:[e.header,(0,W.jsx)(w.Z,{size:"body",allowSelection:!0,children:(0,W.jsx)(H.r,{translatableSource:e.message,allowParagraphs:!0})}),e.confirmText&&e.fieldMessage&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(R.hS,{}),(0,W.jsx)(k.ZP,{autoFocus:"desktop",floatingLabelFixed:!0,floatingLabelText:r._(e.fieldMessage),value:o,onChange:function(e,t){return s(t)},hintText:e.confirmText})]})]})}})};var dt=function(e){return(0,W.jsx)(v.I18n,{children:function(t){var n=t.i18n;return(0,W.jsx)(Z.ZP,{title:n._(e.title),open:e.open,actions:[(0,W.jsx)(T.Z,{keyboardFocused:!0,label:e.noButtonLabel?n._(e.noButtonLabel):(0,W.jsx)(v.Trans,{id:"No"}),onClick:e.onClickNo},"no"),(0,W.jsx)(Z.vF,{label:e.yesButtonLabel?n._(e.yesButtonLabel):(0,W.jsx)(v.Trans,{id:"Yes"}),onClick:e.onClickYes,primary:!0},"yes")],secondaryActions:[(0,W.jsx)(T.Z,{keyboardFocused:!0,label:e.cancelButtonLabel?n._(e.cancelButtonLabel):(0,W.jsx)(v.Trans,{id:"Cancel"}),onClick:e.onClickCancel},"cancel")],maxWidth:"xs",fullscreen:"never-even-on-mobile",onRequestClose:e.onClickCancel,onApply:e.onClickYes,children:(0,W.jsx)(w.Z,{children:(0,W.jsx)(H.r,{translatableSource:e.message,isStandaloneText:!0})})})}})};var pt=function(e){var t=e.children,n=r.useState(!1),i=(0,y.Z)(n,2),a=i[0],o=i[1],s=r.useState(null),l=(0,y.Z)(s,2),c=l[0],u=l[1],d=r.useCallback((function(e){o(!0),u(e)}),[]),p=r.useState(!1),f=(0,y.Z)(p,2),h=f[0],g=f[1],m=r.useState(null),x=(0,y.Z)(m,2),v=x[0],b=x[1],C=r.useCallback((function(e){g(!0),b(e)}),[]),j=r.useState(!1),Z=(0,y.Z)(j,2),k=Z[0],w=Z[1],T=r.useState(null),S=(0,y.Z)(T,2),P=S[0],I=S[1],E=r.useCallback((function(e){w(!0),I(e)}),[]),M=r.useState(!1),L=(0,y.Z)(M,2),A=L[0],O=L[1],R=r.useState(null),F=(0,y.Z)(R,2),D=F[0],N=F[1],_=r.useCallback((function(e){O(!0),N(e)}),[]);return(0,W.jsxs)(ot.Z.Provider,{value:{showAlertDialog:d,showConfirmDialog:C,showConfirmDeleteDialog:E,showYesNoCancelDialog:_},children:[t,c&&(0,W.jsx)(st,{open:a,onDismiss:function(){o(!1),c.callback()},dismissButtonLabel:c.dismissButtonLabel,title:c.title,message:c.message}),v&&(0,W.jsx)(lt,{open:h,onConfirm:function(){g(!1),v.callback(!0)},confirmButtonLabel:v.confirmButtonLabel,onDismiss:function(){g(!1),v.callback(!1)},dismissButtonLabel:v.dismissButtonLabel,title:v.title,message:v.message,level:v.level||"info",maxWidth:v.maxWidth,makeDismissButtonPrimary:v.makeDismissButtonPrimary}),P&&(0,W.jsx)(ut,{open:k,onConfirm:function(){w(!1),P.callback(!0)},confirmButtonLabel:P.confirmButtonLabel,onDismiss:function(){w(!1),P.callback(!1)},dismissButtonLabel:P.dismissButtonLabel,title:P.title,message:P.message,fieldMessage:P.fieldMessage,confirmText:P.confirmText,header:P.header}),D&&(0,W.jsx)(dt,{open:A,onClickYes:function(){O(!1),D.callback(0)},yesButtonLabel:D.yesButtonLabel,onClickNo:function(){O(!1),D.callback(1)},noButtonLabel:D.noButtonLabel,onClickCancel:function(){O(!1),D.callback(2)},cancelButtonLabel:D.cancelButtonLabel,title:D.title,message:D.message})]})},ft=n(96210),ht=n(87706),gt=n(24347),mt=function(e,t){var n=e.objectAssets;return(0,g.Z)((0,g.Z)({},e),{},{objectAssets:n.map((function(e){return(0,g.Z)((0,g.Z)({},e),{},{resources:e.resources.map((function(e){return(0,g.Z)((0,g.Z)({},e),{},{file:(0,Te.mR)(e.file,t)})}))})}))})},xt=function(e){var t=e.children,n=r.useContext(re.ZP),i=n.profile,a=r.useState(null),o=(0,y.Z)(a,2),s=o[0],l=o[1],c=r.useRef(!1),u=r.useCallback(function(){var e=(0,x.Z)((0,m.Z)().mark((function e(t){var r;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Te.B$)(n.getAuthorizationHeader,{userId:t});case 2:return r=e.sent,l(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n.getAuthorizationHeader]),d=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:if(t=i.id,!c.current){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,c.current=!0,e.next=9,u(t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.error("Could not fetch the authorization token",e.t0);case 14:return e.prev=14,c.current=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[5,11,14,17]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(t,n){var r,a,o,l,c,d;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.environment,i){e.next=3;break}return e.abrupt("return");case 3:if(a=i.id,e.t0=s,e.t0){e.next=9;break}return e.next=8,u(i.id);case 8:e.t0=e.sent;case 9:return o=e.t0,e.prev=10,e.next=13,(0,ve._N)(t,o,{environment:r});case 13:return l=e.sent,e.abrupt("return",l);case 17:if(e.prev=17,e.t1=e.catch(10),!(c=(0,Ze.T)(e.t1))||404!==c.status){e.next=28;break}return e.next=23,u(a);case 23:return o=e.sent,e.next=26,(0,ve._N)(t,o,{environment:r});case 26:return d=e.sent,e.abrupt("return",d);case 28:throw e.t1;case 29:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(t){var n,r,a,o,l,c,d;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.asset,r=t.project,a=t.objectsContainer,o=t.requestedObjectName,l=t.targetObjectFolderOrObject,i){e.next=3;break}throw new Error("Unable to install the asset because no profile was found.");case 3:if(e.t0=s,e.t0){e.next=8;break}return e.next=7,u(i.id);case 7:e.t0=e.sent;case 8:return c=e.t0,d=mt(n,c),e.abrupt("return",(0,ht.Pr)({asset:d,project:r,objectsContainer:a,requestedObjectName:o,targetObjectFolderOrObject:l}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,x.Z)((0,m.Z)().mark((function e(t){var n;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,u(i.id);case 4:return n=e.sent,e.abrupt("return",(0,ve.bX)(t,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,W.jsx)(gt.Z.Provider,{value:{authorizationToken:s,updateAuthorizationToken:d,fetchPrivateAsset:p,installPrivateAsset:f,getPrivateAssetPackAudioArchiveUrl:h},children:t})},vt=n(3550),bt=n(19817),Ct=n(4900),jt=n(50057),yt=n.n(jt),Zt=n(2066),kt=n(4217),wt=["Scene","EventsSheet","Home","ExternalEvents","ExternalLayout","Extension","Resources"],Tt=["id","flow","editorSwitches","endDialog","availableLocales"],St=["elementToHighlightId","id","isTriggerFlickering","isCheckpoint","deprecated","nextStepTrigger","shortcuts","dialog","mapProjectData","tooltip","skippable","isOnClosableDialog","interactsWithCanvas","disableBlockingLayer"],Pt=function(e){var t=[];return Tt.forEach((function(n){e[n]||t.push("Top level key ".concat(n," missing in file."))})),e.editorSwitches&&Object.keys(e.editorSwitches).forEach((function(n){var r=e.editorSwitches[n];r.editor||t.push("Editor switch ".concat(n," doesn't have editor key.")),wt.includes(r.editor)||t.push("Editor switch ".concat(n," with identifier ").concat(r.editor," unknown."))})),e.flow&&e.flow.forEach((function(e,n){var r=Object.keys(e).filter((function(e){return!St.includes(e)}));r.length&&t.push("Flow step with id ".concat(e.id||"unknown"," at index ").concat(n," has unknown key(s) ").concat(r.join(","),")"))})),t},It=yt()("electron"),Et=function(e){var t=r.useState(null),n=(0,y.Z)(t,2),i=n[0],a=n[1],o=r.useState(null),s=(0,y.Z)(o,2),l=s[0],c=s[1],u=r.useState(0),d=(0,y.Z)(u,2),p=d[0],f=d[1],h=r.useState({}),v=(0,y.Z)(h,2),b=v[0],C=v[1],j=r.useState(null),Z=(0,y.Z)(j,2),k=Z[0],w=Z[1],T=r.useCallback((function(e){return k?k.find((function(t){return t.id===e})):null}),[k]),S=r.useCallback(function(){var e=(0,x.Z)((0,m.Z)().mark((function e(t){var n,r,i,o,s,l;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.tutorialId,r=t.initialStepIndex,i=t.initialProjectData,o=t.inAppTutorial,s=o){e.next=12;break}if(k){e.next=5;break}return e.abrupt("return");case 5:if(l=T(n)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,bt.TO)(l);case 10:(s=e.sent).shouldRestrictUI=l.shouldRestrictUI;case 12:f(r),C(i),a(s),(0,ne.$t)(n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[T,k]),P=r.useCallback((0,x.Z)((0,m.Z)().mark((function e(){var t;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(null),e.prev=1,e.next=4,(0,bt.oO)();case 4:t=e.sent,w(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("An error occurred when fetching in app tutorials:",e.t0),c("fetching-error");case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[]),I=r.useCallback((0,x.Z)((0,m.Z)().mark((function e(){var t,n,r;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(It){e.next=3;break}return Zt.ZP.showMessageBox("This option is available on the desktop app only."),e.abrupt("return");case 3:return e.next=5,(0,kt.y)({title:"Open a guided lesson",properties:["openFile"],message:"Choose a guided lesson (.json file)",filters:[{name:"GDevelop 5 in-app tutorial",extensions:["json"]}]});case 5:if(t=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,kt.zn)(t);case 10:if(n=e.sent,!(r=Pt(n)).length){e.next=16;break}return console.error("Guided lesson file doesn't respect the format. See errors:",r),Zt.ZP.showMessageBox("Guided lesson file doesn't respect the format. Check developer console for details."),e.abrupt("return");case 16:n.initialTemplateUrl&&console.warn("Starting tutorial from file. The tutorial has the field initialTemplateUrl set so make sure the project is already open in the editor."),S({tutorialId:n.id,initialProjectData:n.initialProjectData||{},initialStepIndex:0,inAppTutorial:(0,g.Z)((0,g.Z)({},n),{},{isMiniTutorial:!0})});case 18:case"end":return e.stop()}}),e)}))),[S]);return r.useEffect((function(){var e=setTimeout((function(){console.info("Pre-fetching in-app tutorials..."),P()}),Ct.n);return function(){return clearTimeout(e)}}),[P]),(0,W.jsx)(vt.Z.Provider,{value:{inAppTutorialShortHeaders:k,getInAppTutorialShortHeader:T,currentlyRunningInAppTutorial:i,startTutorial:S,startProjectData:b,endTutorial:function(){a(null),(0,ne.$t)(null)},startStepIndex:p,inAppTutorialsFetchingError:l,fetchInAppTutorials:P,onLoadInAppTutorialFromLocalFile:I},children:e.children})},Mt=n(56885),Lt=n(61651),At=n(43756),Ot=n(1525),Rt=n(62903),Ft=n(65875),Dt=n(5051),Nt=n(97890),_t=n(85841),Bt=n(98769),Ut=function(e){var t=e.disableCheckForUpdates,n=e.authentication,r=e.children,i=e.makeEventsFunctionCodeWriter,a=e.eventsFunctionsExtensionWriter,o=e.eventsFunctionsExtensionOpener;return(0,W.jsx)(h,{children:(0,W.jsx)(Xe.$,{children:(0,W.jsx)(Le.Kg,{children:(0,W.jsx)(Ne.ZP,{disableCheckForUpdates:t,children:(0,W.jsx)(_e.ZP.Consumer,{children:function(e){var t=e.values;return(0,W.jsx)(ze,{language:t.language.replace("_","-"),children:(0,W.jsx)(At.Q,{children:(0,W.jsx)(Lt.ZP,{componentTitle:(0,W.jsx)(v.Trans,{id:"GDevelop app"}),scope:"app",children:(0,W.jsx)(Et,{children:(0,W.jsx)(pt,{children:(0,W.jsx)(Fe,{authentication:n,preferencesValues:t,children:(0,W.jsx)(De.O,{children:(0,W.jsx)(v.I18n,{update:!0,children:function(e){var t=e.i18n;return(0,W.jsx)(Je,{i18n:t,makeEventsFunctionCodeWriter:i,eventsFunctionsExtensionWriter:a,eventsFunctionsExtensionOpener:o,children:(0,W.jsx)(Mt.q,{children:(0,W.jsx)(Ke.V,{children:(0,W.jsx)(Ot.qR,{children:(0,W.jsx)(Qe.po,{children:(0,W.jsx)($e.E,{children:(0,W.jsx)(et.h,{children:(0,W.jsx)(tt.G_,{children:(0,W.jsx)(nt.op,{children:(0,W.jsx)(Rt._S,{children:(0,W.jsx)(Nt.uo,{children:(0,W.jsx)(Ft.K,{children:(0,W.jsx)(Dt.c,{children:(0,W.jsx)(rt.D,{i18n:t,children:(0,W.jsx)(it.N,{i18n:t,children:(0,W.jsx)(at.b,{children:(0,W.jsx)(ft.X,{children:(0,W.jsx)(xt,{children:(0,W.jsx)(_t.f,{children:(0,W.jsx)(Bt.mh,{children:r({i18n:t})})})})})})})})})})})})})})})})})})})})})}})})})})})})})})}})})})})})}},30609:function(e,t,n){"use strict";n.d(t,{Kg:function(){return u}});var r=n(1413),i=n(29439),a=n(28381),o=n(2066),s=n(29343),l={routeArguments:{},removeRouteArguments:function(){},addRouteArguments:function(){},navigateToRoute:function(){}},c=a.createContext(l);t.ZP=c;var u=function(e){var t=e.children,n=a.useState(o.ZP.getArguments()),l=(0,i.Z)(n,2),u=l[0],d=l[1],p=a.useCallback((function(e){o.ZP.removeArguments(e),d((function(t){var n=(0,r.Z)({},t);return e.forEach((function(e){delete n[e]})),n}))}),[]),f=a.useCallback((function(e){o.ZP.addArguments(e),d((function(t){return(0,r.Z)((0,r.Z)({},t),e)}))}),[]),h=a.useCallback((function(e,t){f((0,r.Z)((0,r.Z)({},t),{},{"initial-dialog":e}))}),[f]);return(0,s.jsx)(c.Provider,{value:{routeArguments:u,addRouteArguments:f,removeRouteArguments:p,navigateToRoute:h},children:t})}},19174:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var r=n(29439),i=n(28381),a=n(29343),o={hasUnsavedChanges:!1,sealUnsavedChanges:function(){},triggerUnsavedChanges:function(){},getChangesCount:function(){return 0},getTimeOfFirstChangeSinceLastSave:function(){return null}},s=i.createContext(o);t.Z=s;var l=function(e){var t=i.useState(!1),n=(0,r.Z)(t,2),o=n[0],l=n[1],c=i.useRef(0),u=i.useRef(null),d=i.useCallback((function(){0===c.current&&(u.current=Date.now()),c.current=c.current+1,l(!0)}),[]),p=i.useCallback((function(){c.current=0,u.current=null,l(!1)}),[]),f=i.useCallback((function(){return c.current}),[]),h=i.useCallback((function(){return u.current}),[]);return(0,a.jsx)(s.Provider,{value:{hasUnsavedChanges:o,triggerUnsavedChanges:d,sealUnsavedChanges:p,getChangesCount:f,getTimeOfFirstChangeSinceLastSave:h},children:e.children})}},15954:function(e,t,n){"use strict";n.d(t,{h:function(){return d}});var r=n(74165),i=n(15861),a=n(28381),o=n(71106),s=n(14737),l=n(16999),c=n(31689),u=n.g.gd,d=function(){var e=a.useContext(o.ZP),t=e.profile,n=e.getAuthorizationHeader,d=a.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,a){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.UsedExtensionsFinder.scanProject(i).getUsedExtensions().toNewVectorString().toJSArray().some((function(e){return"Multiplayer"===e}))){e.next=3;break}return e.abrupt("return");case 3:if(t){e.next=6;break}return console.warn("User is not connected. Aborting multiplayer lobby configuration."),e.abrupt("return");case 6:return e.prev=6,e.prev=7,e.next=10,(0,l.r$)(n,t.id,(0,c.dN)({projectId:i.getProjectUuid(),projectName:i.getName(),projectAuthor:i.getAuthor(),savedStatus:"draft"}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error("Could not register game before lobby configuration: ",e.t0);case 15:return e.next=17,(0,s.Q9)({userId:t.id,getAuthorizationHeader:n,gameId:i.getProjectUuid(),sourceGameId:a});case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(6),console.error("An error occurred while copying lobby configuration from game with id ".concat(a,". Failing silently: "),e.t1);case 22:case"end":return e.stop()}}),e,null,[[6,19],[7,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[n,t]);return{configureMultiplayerLobbiesIfNeeded:d}}},91808:function(e,t,n){"use strict";n.d(t,{Z:function(){return qV}});var r=n(93433),i=n(37762),a=n(74165),o=n(15861),s=n(29439),l=n(1413),c=n(28381),u=n(53385),d=n(63843),p=n(78118),f=n(29343),h=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.48176 10.1022C3.41658 10.0355 3.34154 9.95255 3.27038 9.85494C3.12734 9.65875 3 9.40346 3 9.10285V5.4C3 5.00235 3.32671 4.68 3.72973 4.68C4.13275 4.68 4.45946 5.00235 4.45946 5.4V9.01933C4.4734 9.03774 4.49607 9.06548 4.53157 9.10185L4.53327 9.10359C4.65422 9.22701 4.84706 9.37746 5.10107 9.54312C5.43664 9.76196 5.83151 9.97693 6.20259 10.1606C6.67709 9.13201 7.44229 8.30232 8.37488 7.811C7.90672 7.30018 7.62161 6.62294 7.62161 5.88C7.62161 4.28942 8.92845 3 10.5405 3H13.4594C15.0715 3 16.3783 4.28942 16.3783 5.88C16.3783 6.62294 16.0932 7.30018 15.6251 7.811C16.5577 8.30233 17.3229 9.13202 17.7974 10.1606C18.1415 9.99029 18.5076 9.79231 18.8281 9.5887C19.1017 9.41487 19.3144 9.25425 19.4501 9.12024C19.4967 9.07425 19.5246 9.04043 19.5405 9.01933V5.4C19.5405 5.00235 19.8673 4.68 20.2703 4.68C20.6733 4.68 21 5.00235 21 5.4V9.10285C21 9.57269 20.6889 9.93429 20.4826 10.138C20.2412 10.3764 19.9303 10.6012 19.6182 10.7995C19.1747 11.0812 18.6723 11.3447 18.2327 11.5541C18.2928 11.8922 18.3243 12.2419 18.3243 12.6C18.3243 12.9612 18.2987 13.3139 18.2511 13.6547C18.6881 13.8635 19.1852 14.125 19.624 14.4043C19.9349 14.6021 20.2445 14.8263 20.4849 15.0643C20.6905 15.2677 21 15.6285 21 16.0971V19.8C21 20.1976 20.6733 20.52 20.2703 20.52C19.8673 20.52 19.5405 20.1976 19.5405 19.8V16.1807C19.5247 16.1597 19.4971 16.1263 19.4513 16.0809C19.3166 15.9476 19.1053 15.7877 18.833 15.6144C18.5434 15.4301 18.2161 15.2503 17.9012 15.0913C17.4907 16.2448 16.8266 17.1418 16.1115 17.5818C16.102 17.6175 16.0896 17.6529 16.0742 17.6878C15.694 18.5479 15.1491 19.3581 14.4743 19.963C13.7995 20.5679 12.9549 21 11.9999 21C11.045 21 10.2003 20.5679 9.5255 19.963C8.8507 19.3581 8.30583 18.5479 7.92565 17.6878C7.91021 17.6529 7.89781 17.6175 7.88831 17.5817C7.17331 17.1417 6.5092 16.2447 6.09878 15.0913C5.78267 15.2509 5.45415 15.4315 5.16377 15.6165C4.89233 15.7894 4.6819 15.9489 4.54793 16.0817C4.50257 16.1266 4.47521 16.1598 4.45946 16.1807L4.45946 19.8C4.45946 20.1976 4.13275 20.52 3.72973 20.52C3.32671 20.52 3 20.1976 3 19.8V16.0971C3 15.6293 3.30846 15.2691 3.51359 15.0658C3.75333 14.8281 4.06201 14.6043 4.37208 14.4067C4.81195 14.1265 5.31065 13.8641 5.74887 13.6547C5.70123 13.3139 5.67567 12.9612 5.67567 12.6C5.67567 12.2419 5.70718 11.8921 5.76724 11.5541C5.30116 11.332 4.76148 11.0478 4.29632 10.7444C4.00272 10.5529 3.71083 10.3359 3.48406 10.1045L3.48176 10.1022ZM9.08106 5.88C9.08106 5.08471 9.73448 4.44 10.5405 4.44H13.4594C14.2655 4.44 14.9189 5.08471 14.9189 5.88C14.9189 6.67529 14.2655 7.32 13.4594 7.32H10.5405C9.73448 7.32 9.08106 6.67529 9.08106 5.88ZM10.5069 18.8972C10.1442 18.5721 9.81267 18.1451 9.53714 17.6578C10.5969 16.9696 11.4078 14.7943 12 12.7191C12.5921 14.7943 13.403 16.9695 14.4627 17.6578C14.1872 18.1451 13.8556 18.5721 13.4929 18.8972C13.0002 19.3389 12.4899 19.56 11.9999 19.56C11.5099 19.56 10.9997 19.3389 10.5069 18.8972ZM13.2714 11.8496C13.0197 10.9245 12.8953 9.95802 13.024 9.30751C13.084 9.00424 13.1751 8.89304 13.2105 8.8603L13.2115 8.85943C13.2261 8.84572 13.3172 8.76 13.6569 8.76C15.2476 8.76 16.8648 10.288 16.8648 12.6C16.8648 13.7993 16.5193 14.8534 16.0654 15.5714C15.6784 16.1834 15.3493 16.3673 15.2182 16.42C15.2 16.4046 15.1776 16.3842 15.1508 16.3573C14.9807 16.1868 14.7639 15.8781 14.5229 15.4001C14.0442 14.4505 13.6255 13.1516 13.2714 11.8496ZM10.976 9.30751C11.1046 9.95802 10.9802 10.9245 10.7286 11.8496C10.3745 13.1516 9.95572 14.4505 9.477 15.4001C9.23605 15.8781 9.01927 16.1868 8.84916 16.3573C8.82236 16.3842 8.7999 16.4046 8.78172 16.42C8.65063 16.3673 8.32153 16.1834 7.93457 15.5714C7.48066 14.8534 7.13512 13.7993 7.13512 12.6C7.13512 10.288 8.7524 8.76 10.343 8.76C10.6827 8.76 10.7739 8.84572 10.7885 8.85943L10.7894 8.8603C10.8249 8.89304 10.916 9.00424 10.976 9.30751Z",fill:"currentColor"})}))})),g=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50002 3.66666C4.03978 3.66666 3.66669 4.03975 3.66669 4.49999V10.1667C3.66669 10.6269 4.03978 11 4.50002 11H4.83335C5.1095 11 5.33335 11.2238 5.33335 11.5C5.33335 11.7761 5.1095 12 4.83335 12H4.50002C3.4875 12 2.66669 11.1792 2.66669 10.1667V4.49999C2.66669 3.48747 3.4875 2.66666 4.50002 2.66666H11.5C12.5126 2.66666 13.3334 3.48747 13.3334 4.49999V6.16666C13.3334 6.4428 13.1095 6.66666 12.8334 6.66666C12.5572 6.66666 12.3334 6.4428 12.3334 6.16666V4.49999C12.3334 4.03975 11.9603 3.66666 11.5 3.66666H4.50002Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.83335 8.99999C7.7413 8.99999 7.66669 9.0746 7.66669 9.16666V12.1667C7.66669 12.2587 7.7413 12.3333 7.83335 12.3333H12.1667C12.2587 12.3333 12.3334 12.2587 12.3334 12.1667V9.16666C12.3334 9.0746 12.2587 8.99999 12.1667 8.99999H7.83335ZM6.66669 9.16666C6.66669 8.52231 7.18901 7.99999 7.83335 7.99999H12.1667C12.811 7.99999 13.3334 8.52231 13.3334 9.16666V12.1667C13.3334 12.811 12.811 13.3333 12.1667 13.3333H7.83335C7.18901 13.3333 6.66669 12.811 6.66669 12.1667V9.16666Z",fill:"currentColor"})]}))})),m=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50002 3.66669C4.03978 3.66669 3.66669 4.03978 3.66669 4.50002V11.5C3.66669 11.9603 4.03978 12.3334 4.50002 12.3334H11.5C11.9603 12.3334 12.3334 11.9603 12.3334 11.5V4.50002C12.3334 4.03978 11.9603 3.66669 11.5 3.66669H4.50002ZM2.66669 4.50002C2.66669 3.4875 3.4875 2.66669 4.50002 2.66669H11.5C12.5126 2.66669 13.3334 3.4875 13.3334 4.50002V11.5C13.3334 12.5126 12.5126 13.3334 11.5 13.3334H4.50002C3.4875 13.3334 2.66669 12.5126 2.66669 11.5V4.50002Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16669 2.83335C5.44283 2.83335 5.66669 3.05721 5.66669 3.33335V12.6667C5.66669 12.9428 5.44283 13.1667 5.16669 13.1667C4.89054 13.1667 4.66669 12.9428 4.66669 12.6667V3.33335C4.66669 3.05721 4.89054 2.83335 5.16669 2.83335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 2.83335C11.1095 2.83335 11.3334 3.05721 11.3334 3.33335V12.6667C11.3334 12.9428 11.1095 13.1667 10.8334 13.1667C10.5572 13.1667 10.3334 12.9428 10.3334 12.6667V3.33335C10.3334 3.05721 10.5572 2.83335 10.8334 2.83335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 5.83335C2.83335 5.55721 3.05721 5.33335 3.33335 5.33335H5.00002C5.27616 5.33335 5.50002 5.55721 5.50002 5.83335C5.50002 6.1095 5.27616 6.33335 5.00002 6.33335H3.33335C3.05721 6.33335 2.83335 6.1095 2.83335 5.83335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 5.83335C10.8334 5.55721 11.0572 5.33335 11.3334 5.33335H12.6667C12.9428 5.33335 13.1667 5.55721 13.1667 5.83335C13.1667 6.1095 12.9428 6.33335 12.6667 6.33335H11.3334C11.0572 6.33335 10.8334 6.1095 10.8334 5.83335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 8.00002C2.83335 7.72388 3.05721 7.50002 3.33335 7.50002H12.6667C12.9428 7.50002 13.1667 7.72388 13.1667 8.00002C13.1667 8.27616 12.9428 8.50002 12.6667 8.50002H3.33335C3.05721 8.50002 2.83335 8.27616 2.83335 8.00002Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83335 10.1667C2.83335 9.89054 3.05721 9.66669 3.33335 9.66669H5.00002C5.27616 9.66669 5.50002 9.89054 5.50002 10.1667C5.50002 10.4428 5.27616 10.6667 5.00002 10.6667H3.33335C3.05721 10.6667 2.83335 10.4428 2.83335 10.1667Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8334 10.1667C10.8334 9.89054 11.0572 9.66669 11.3334 9.66669H12.6667C12.9428 9.66669 13.1667 9.89054 13.1667 10.1667C13.1667 10.4428 12.9428 10.6667 12.6667 10.6667H11.3334C11.0572 10.6667 10.8334 10.4428 10.8334 10.1667Z",fill:"currentColor"})]}))})),x=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.74176 13.6609C3.09742 13.6609 2.57506 13.1385 2.57508 12.4942L2.57507 10.7634C2.5751 10.1191 3.09742 9.59679 3.74172 9.59676L11.8202 9.59676C11.8236 9.59657 11.8273 9.59636 11.8313 9.59616C11.85 9.5952 11.8754 9.59422 11.9064 9.59373C11.9682 9.59277 12.0538 9.59377 12.1554 9.60118C12.3556 9.61578 12.6334 9.65632 12.9194 9.76584C13.2069 9.87592 13.5196 10.0625 13.7599 10.3781C14.0041 10.6986 14.1447 11.1148 14.1447 11.63C14.1447 12.1453 14.0041 12.5614 13.7598 12.8818C13.5193 13.1972 13.2064 13.3835 12.9189 13.4932C12.6328 13.6024 12.355 13.6426 12.1547 13.6569C12.0531 13.6642 11.9676 13.6651 11.9057 13.664C11.8747 13.6635 11.8493 13.6625 11.8306 13.6615C11.8268 13.6613 11.8232 13.6611 11.8199 13.6609L3.74176 13.6609ZM11.8775 12.6626C11.8639 12.6615 11.8502 12.6609 11.8365 12.6609L3.74174 12.6609C3.64972 12.6609 3.57508 12.5863 3.57508 12.4942L3.57507 10.7634C3.57508 10.6714 3.6497 10.5968 3.74174 10.5968L11.8365 10.5968C11.85 10.5968 11.8635 10.5962 11.877 10.5951L11.8752 10.5953L11.8823 10.5949C11.8901 10.5945 11.9036 10.5939 11.922 10.5936C11.959 10.593 12.0148 10.5936 12.0827 10.5985C12.2215 10.6087 12.3957 10.6361 12.5618 10.6997C12.7264 10.7627 12.8657 10.8543 12.9644 10.984C13.0593 11.1085 13.1447 11.3045 13.1447 11.63C13.1447 11.9556 13.0593 12.1513 12.9646 12.2756C12.866 12.4049 12.7269 12.4962 12.5623 12.559C12.3964 12.6223 12.2222 12.6495 12.0833 12.6595C12.0154 12.6643 11.9597 12.6648 11.9227 12.6642C11.9043 12.6638 11.8908 12.6633 11.883 12.6629L11.8758 12.6624M11.8758 12.6624L11.8775 12.6626L11.8758 12.6624Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.74176 7.73446C3.09742 7.73448 2.57506 7.21212 2.57508 6.56778L2.57507 4.837C2.5751 4.19269 3.09742 3.67035 3.74172 3.67033L11.8202 3.67033C11.8236 3.67013 11.8273 3.66993 11.8313 3.66973C11.85 3.66877 11.8754 3.66779 11.9064 3.6673C11.9682 3.66633 12.0538 3.66733 12.1554 3.67474C12.3556 3.68935 12.6334 3.72988 12.9194 3.8394C13.2069 3.94949 13.5196 4.13611 13.7599 4.45162C14.0041 4.77221 14.1447 5.18834 14.1447 5.70361C14.1447 6.21887 14.0041 6.63496 13.7598 6.95542C13.5193 7.2708 13.2064 7.45709 12.9189 7.56681C12.6328 7.67598 12.355 7.71614 12.1547 7.73048C12.0531 7.73775 11.9676 7.73864 11.9057 7.73759C11.8747 7.73706 11.8493 7.73604 11.8306 7.73506C11.8268 7.73486 11.8232 7.73466 11.8199 7.73446L3.74176 7.73446ZM11.8775 6.73614C11.8639 6.73502 11.8502 6.73446 11.8365 6.73446L3.74174 6.73446C3.64972 6.73446 3.57508 6.65984 3.57508 6.56782L3.57507 4.83702C3.57508 4.74497 3.6497 4.67034 3.74174 4.67033L11.8365 4.67033C11.85 4.67033 11.8635 4.66979 11.877 4.66869L11.8752 4.66884L11.8823 4.66843C11.8901 4.66803 11.9036 4.66747 11.922 4.66718C11.959 4.6666 12.0148 4.66714 12.0827 4.6721C12.2215 4.68222 12.3957 4.70968 12.5618 4.77327C12.7264 4.8363 12.8657 4.92789 12.9644 5.05753C13.0593 5.18209 13.1447 5.37804 13.1447 5.70361C13.1447 6.02919 13.0593 6.22488 12.9646 6.34912C12.866 6.47843 12.7269 6.56975 12.5623 6.63253C12.3964 6.69586 12.2222 6.72309 12.0833 6.73303C12.0154 6.73789 11.9597 6.73836 11.9227 6.73773C11.9043 6.73742 11.8908 6.73684 11.883 6.73643L11.8758 6.73601M11.8758 6.73601L11.8775 6.73614L11.8758 6.73601Z",fill:"currentColor"})]}))})),v=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0_686_2047)",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 1.83337C4.59423 1.83337 1.83331 4.59429 1.83331 8.00004C1.83331 11.4058 4.59423 14.1667 7.99998 14.1667C11.4058 14.1667 14.1666 11.4058 14.1666 8.00004C14.1666 4.59429 11.4058 1.83337 7.99998 1.83337ZM0.833313 8.00004C0.833313 4.042 4.04194 0.833374 7.99998 0.833374C11.9581 0.833374 15.1666 4.04201 15.1666 8.00004C15.1666 11.9581 11.9581 15.1667 7.99998 15.1667C4.04194 15.1667 0.833313 11.9581 0.833313 8.00004Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.59135 6.85555L4.59135 5.89663C4.59137 5.4166 4.98051 5.02743 5.46055 5.02741L9.93634 5.02741L9.94345 5.02717C9.95612 5.02683 9.97264 5.0266 9.99247 5.02676C10.0319 5.02707 10.0856 5.02895 10.1488 5.0349C10.2725 5.04654 10.4475 5.07506 10.6303 5.14738C10.8139 5.22005 11.0234 5.34433 11.187 5.55699C11.3551 5.77555 11.4471 6.052 11.4471 6.37679C11.4471 6.70156 11.355 6.97803 11.1868 7.19655C11.0231 7.40916 10.8135 7.53325 10.6297 7.6057C10.4469 7.6778 10.2718 7.70609 10.1481 7.71757C10.0849 7.72344 10.0313 7.72524 9.99179 7.7255C9.97197 7.72564 9.95545 7.72538 9.94278 7.72503L9.93603 7.72479L5.46059 7.72479C4.98054 7.72479 4.59135 7.3356 4.59135 6.85555ZM9.96992 6.02653C9.9619 6.02692 9.95345 6.02712 9.94543 6.02712L5.59106 6.02712L5.59106 6.72507L9.94543 6.72508C9.95368 6.72508 9.96192 6.72528 9.97016 6.72569M9.97016 6.72569C9.97216 6.72574 9.9776 6.72586 9.98516 6.72581C10.0005 6.72571 10.0251 6.72497 10.0558 6.72213C10.12 6.71618 10.1954 6.70234 10.263 6.67569C10.3297 6.64939 10.3705 6.61807 10.3946 6.58669C10.4142 6.56122 10.4474 6.50511 10.4474 6.37676C10.4474 6.24842 10.4143 6.19213 10.3945 6.16644C10.3702 6.13485 10.3292 6.1034 10.2625 6.07697C10.1948 6.05019 10.1193 6.03626 10.0551 6.03022C10.0245 6.02733 9.9998 6.02656 9.98449 6.02644C9.97693 6.02638 9.97192 6.02648 9.96992 6.02653",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.44141 11.0472C4.96121 11.0472 4.57192 10.6579 4.57193 10.1777L4.57192 9.21853C4.57194 8.73835 4.9612 8.34907 5.44137 8.34906L9.91252 8.34906C9.92533 8.3484 9.94278 8.34772 9.96279 8.3474C10.0026 8.34678 10.0567 8.34744 10.1205 8.35209C10.2451 8.36118 10.4222 8.38656 10.6074 8.4575C10.7941 8.529 11.0061 8.6536 11.1709 8.86989C11.3395 9.09126 11.4297 9.37096 11.4297 9.69881C11.4297 10.0267 11.3395 10.3064 11.1707 10.5277C11.0058 10.744 10.7937 10.8684 10.6069 10.9397C10.4216 11.0104 10.2445 11.0355 10.1198 11.0444C10.056 11.049 10.0019 11.0496 9.96212 11.0489C9.94211 11.0486 9.92544 11.0479 9.91263 11.0472L5.44141 11.0472ZM9.96867 10.0489L9.96748 10.0488L9.96618 10.0487L9.96497 10.0486C9.96685 10.0487 9.9717 10.0489 9.9791 10.0491C9.99408 10.0493 10.0183 10.0491 10.0484 10.047C10.1117 10.0425 10.1851 10.0303 10.2503 10.0054C10.3141 9.98104 10.3524 9.9516 10.3755 9.92141C10.3946 9.8963 10.4297 9.83697 10.4297 9.69881C10.4297 9.56066 10.3946 9.50114 10.3753 9.4758C10.3522 9.44539 10.3136 9.41581 10.2498 9.39137C10.1845 9.36636 10.111 9.35406 10.0478 9.34944C10.0176 9.34725 9.99341 9.34705 9.97843 9.34728C9.97103 9.3474 9.96618 9.34762 9.9643 9.34771M9.96497 10.0486C9.95262 10.0477 9.93994 10.0472 9.92755 10.0472L5.57192 10.0472L5.57192 9.34905L9.92755 9.34906C9.93972 9.34906 9.95217 9.3486 9.9643 9.34771",fill:"currentColor"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_686_2047",children:(0,f.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}))})),b=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0_686_2068)",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 1.83337C4.59423 1.83337 1.83331 4.59429 1.83331 8.00004C1.83331 11.4058 4.59423 14.1667 7.99998 14.1667C11.4058 14.1667 14.1666 11.4058 14.1666 8.00004C14.1666 4.59429 11.4058 1.83337 7.99998 1.83337ZM0.833313 8.00004C0.833313 4.042 4.04194 0.833374 7.99998 0.833374C11.9581 0.833374 15.1666 4.04201 15.1666 8.00004C15.1666 11.9581 11.9581 15.1667 7.99998 15.1667C4.04194 15.1667 0.833313 11.9581 0.833313 8.00004Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.92591 5.83337C5.87477 5.83337 5.83331 5.87483 5.83331 5.92597V10.0741C5.83331 10.1253 5.87477 10.1667 5.92591 10.1667H10.0741C10.1252 10.1667 10.1666 10.1253 10.1666 10.0741V5.92597C10.1666 5.87483 10.1252 5.83337 10.0741 5.83337H5.92591ZM4.83331 5.92597C4.83331 5.32254 5.32248 4.83337 5.92591 4.83337H10.0741C10.6775 4.83337 11.1666 5.32254 11.1666 5.92597V10.0741C11.1666 10.6775 10.6775 11.1667 10.0741 11.1667H5.92591C5.32248 11.1667 4.83331 10.6775 4.83331 10.0741V5.92597Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.83331 7.33337C4.83331 7.05723 5.05717 6.83337 5.33331 6.83337H10.6666C10.9428 6.83337 11.1666 7.05723 11.1666 7.33337C11.1666 7.60952 10.9428 7.83337 10.6666 7.83337H5.33331C5.05717 7.83337 4.83331 7.60952 4.83331 7.33337Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33331 6.83337C7.60946 6.83337 7.83331 7.05723 7.83331 7.33337V10.6667C7.83331 10.9428 7.60946 11.1667 7.33331 11.1667C7.05717 11.1667 6.83331 10.9428 6.83331 10.6667V7.33337C6.83331 7.05723 7.05717 6.83337 7.33331 6.83337Z",fill:"currentColor"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_686_2068",children:(0,f.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}))})),C=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.54743 2.00012C7.86298 1.68064 8.29227 1.5 8.74123 1.5C9.19019 1.5 9.61948 1.68064 9.93502 2.00012C10.2504 2.3194 10.4264 2.75112 10.4264 3.2V3.3H12.5338C12.7627 3.3 12.981 3.39214 13.141 3.55409C13.3007 3.71584 13.3894 3.93391 13.3894 4.16V6.3H13.482C13.9309 6.3 14.3602 6.48064 14.6758 6.80012C14.9911 7.1194 15.1672 7.55112 15.1672 8C15.1672 8.44888 14.9911 8.8806 14.6758 9.19988C14.3602 9.51936 13.9309 9.7 13.482 9.7H13.3894V11.84C13.3894 12.0661 13.3007 12.2842 13.141 12.4459C12.981 12.6079 12.7627 12.7 12.5338 12.7H10.4264V12.8C10.4264 13.2489 10.2504 13.6806 9.93502 13.9999C9.61948 14.3194 9.19019 14.5 8.74123 14.5C8.29227 14.5 7.86298 14.3194 7.54743 13.9999C7.2321 13.6806 7.05604 13.2489 7.05604 12.8V12.7H4.35604C4.12712 12.7 3.90884 12.6079 3.74889 12.4459C3.58914 12.2842 3.50049 12.0661 3.50049 11.84V9.2C3.50049 8.92386 3.72435 8.7 4.00049 8.7H4.59308C4.77278 8.7 4.9464 8.62778 5.07539 8.49718C5.20459 8.36637 5.27827 8.18764 5.27827 8C5.27827 7.81236 5.20459 7.63363 5.07539 7.50282C4.9464 7.37222 4.77278 7.3 4.59308 7.3H4.00049C3.72435 7.3 3.50049 7.07614 3.50049 6.8V4.16C3.50049 3.9339 3.58914 3.71584 3.74889 3.55409C3.90884 3.39214 4.12712 3.3 4.35604 3.3H7.05604V3.2C7.05604 2.75112 7.2321 2.3194 7.54743 2.00012ZM8.74123 2.5C8.56153 2.5 8.38791 2.57222 8.25892 2.70282C8.12972 2.83363 8.05604 3.01236 8.05604 3.2V3.8C8.05604 4.07614 7.83219 4.3 7.55604 4.3H4.50049V6.3H4.59308C5.04204 6.3 5.47133 6.48064 5.78688 6.80012C6.10221 7.1194 6.27827 7.55112 6.27827 8C6.27827 8.44888 6.10221 8.8806 5.78688 9.19988C5.47133 9.51936 5.04204 9.7 4.59308 9.7H4.50049V11.7H7.55604C7.83219 11.7 8.05604 11.9239 8.05604 12.2V12.8C8.05604 12.9876 8.12972 13.1664 8.25892 13.2972C8.38791 13.4278 8.56153 13.5 8.74123 13.5C8.92093 13.5 9.09455 13.4278 9.22354 13.2972C9.35274 13.1664 9.42641 12.9876 9.42641 12.8V12.2C9.42641 11.9239 9.65027 11.7 9.92641 11.7H12.3894V9.2C12.3894 8.92386 12.6132 8.7 12.8894 8.7H13.482C13.6617 8.7 13.8353 8.62778 13.9643 8.49718C14.0935 8.36637 14.1672 8.18764 14.1672 8C14.1672 7.81236 14.0935 7.63363 13.9643 7.50282C13.8353 7.37222 13.6617 7.3 13.482 7.3H12.8894C12.6132 7.3 12.3894 7.07614 12.3894 6.8V4.3H9.92641C9.65027 4.3 9.42641 4.07614 9.42641 3.8V3.2C9.42641 3.01236 9.35274 2.83363 9.22354 2.70282C9.09455 2.57222 8.92093 2.5 8.74123 2.5Z",fill:"currentColor"})}))})),j=n(24910),y=n(2066),Z=n(19174),k=c.memo((function(e){var t=e.fileMetadata,n=e.storageProvider,r=e.projectName,i=e.i18n,a=c.useContext(j.Z),o=c.useContext(Z.Z).hasUnsavedChanges,s=o?" *":"",l="LocalFile"===n.internalName?t&&t.fileIdentifier:r,u=l&&!n.hiddenInSaveDialog?i._(n.name):null;return c.useEffect((function(){var e=["GDevelop 5",l?"".concat(l).concat(s):"",u].filter(Boolean).join(" - ");y.ZP.setTitle(e),y.ZP.setWindowBackgroundColor(a.surface.window.backgroundColor)}),[l,s,o,a.surface.window.backgroundColor,u]),null})),w=n(36600),T=n(10888),S=n(73818),P=n(90242),I=n(70263),E=n(1773),M=n(40243),L=n(56573),A=[{name:"Visual Studio",themeName:"vs"},{name:"Visual Studio Dark",themeName:"vs-dark"},{name:"GitHub",themeName:"github",themeData:{base:"vs",inherit:!0,rules:[{foreground:"999988",fontStyle:"italic",token:"comment"},{foreground:"999999",fontStyle:"bold",token:"comment.block.preprocessor"},{foreground:"999999",fontStyle:"bold italic",token:"comment.documentation"},{foreground:"999999",fontStyle:"bold italic",token:"comment.block.documentation"},{foreground:"a61717",background:"e3d2d2",token:"invalid.illegal"},{fontStyle:"bold",token:"keyword"},{fontStyle:"bold",token:"storage"},{fontStyle:"bold",token:"keyword.operator"},{fontStyle:"bold",token:"constant.language"},{fontStyle:"bold",token:"support.constant"},{foreground:"445588",fontStyle:"bold",token:"storage.type"},{foreground:"445588",fontStyle:"bold",token:"support.type"},{foreground:"008080",token:"entity.other.attribute-name"},{foreground:"0086b3",token:"variable.other"},{foreground:"999999",token:"variable.language"},{foreground:"445588",fontStyle:"bold",token:"entity.name.type"},{foreground:"445588",fontStyle:"bold",token:"entity.other.inherited-class"},{foreground:"445588",fontStyle:"bold",token:"support.class"},{foreground:"008080",token:"variable.other.constant"},{foreground:"800080",token:"constant.character.entity"},{foreground:"990000",token:"entity.name.exception"},{foreground:"990000",token:"entity.name.function"},{foreground:"990000",token:"support.function"},{foreground:"990000",token:"keyword.other.name-of-parameter"},{foreground:"555555",token:"entity.name.section"},{foreground:"000080",token:"entity.name.tag"},{foreground:"008080",token:"variable.parameter"},{foreground:"008080",token:"support.variable"},{foreground:"009999",token:"constant.numeric"},{foreground:"009999",token:"constant.other"},{foreground:"dd1144",token:"string - string source"},{foreground:"dd1144",token:"constant.character"},{foreground:"009926",token:"string.regexp"},{foreground:"990073",token:"constant.other.symbol"},{fontStyle:"bold",token:"punctuation"},{foreground:"000000",background:"ffdddd",token:"markup.deleted"},{fontStyle:"italic",token:"markup.italic"},{foreground:"aa0000",token:"markup.error"},{foreground:"999999",token:"markup.heading.1"},{foreground:"000000",background:"ddffdd",token:"markup.inserted"},{foreground:"888888",token:"markup.output"},{foreground:"888888",token:"markup.raw"},{foreground:"555555",token:"markup.prompt"},{fontStyle:"bold",token:"markup.bold"},{foreground:"aaaaaa",token:"markup.heading"},{foreground:"aa0000",token:"markup.traceback"},{fontStyle:"underline",token:"markup.underline"},{foreground:"999999",background:"eaf2f5",token:"meta.diff.range"},{foreground:"999999",background:"eaf2f5",token:"meta.diff.index"},{foreground:"999999",background:"eaf2f5",token:"meta.separator"},{foreground:"999999",background:"ffdddd",token:"meta.diff.header.from-file"},{foreground:"999999",background:"ddffdd",token:"meta.diff.header.to-file"},{foreground:"4183c4",token:"meta.link"}],colors:{"editor.foreground":"#000000","editor.background":"#F8F8FF","editor.selectionBackground":"#B4D5FE","editor.lineHighlightBackground":"#FFFEEB","editorCursor.foreground":"#666666","editorWhitespace.foreground":"#BBBBBB"}}},{name:"Monokai",themeName:"monokai",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"75715e",token:"comment"},{foreground:"e6db74",token:"string"},{foreground:"ae81ff",token:"constant.numeric"},{foreground:"ae81ff",token:"constant.language"},{foreground:"ae81ff",token:"constant.character"},{foreground:"ae81ff",token:"constant.other"},{foreground:"f92672",token:"keyword"},{foreground:"f92672",token:"storage"},{foreground:"66d9ef",fontStyle:"italic",token:"storage.type"},{foreground:"a6e22e",fontStyle:"underline",token:"entity.name.class"},{foreground:"a6e22e",fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"a6e22e",token:"entity.name.function"},{foreground:"fd971f",fontStyle:"italic",token:"variable.parameter"},{foreground:"f92672",token:"entity.name.tag"},{foreground:"a6e22e",token:"entity.other.attribute-name"},{foreground:"66d9ef",token:"support.function"},{foreground:"66d9ef",token:"support.constant"},{foreground:"66d9ef",fontStyle:"italic",token:"support.type"},{foreground:"66d9ef",fontStyle:"italic",token:"support.class"},{foreground:"f8f8f0",background:"f92672",token:"invalid"},{foreground:"f8f8f0",background:"ae81ff",token:"invalid.deprecated"},{foreground:"cfcfc2",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"75715e",token:"meta.diff"},{foreground:"75715e",token:"meta.diff.header"},{foreground:"f92672",token:"markup.deleted"},{foreground:"a6e22e",token:"markup.inserted"},{foreground:"e6db74",token:"markup.changed"},{foreground:"ae81ff",token:"constant.numeric.line-number.find-in-files - match"},{foreground:"e6db74",token:"entity.name.filename.find-in-files"}],colors:{"editor.foreground":"#F8F8F2","editor.background":"#272822","editor.selectionBackground":"#49483E","editor.lineHighlightBackground":"#3E3D32","editorCursor.foreground":"#F8F8F0","editorWhitespace.foreground":"#3B3A32","editorIndentGuide.activeBackground":"#9D550F","editor.selectionHighlightBorder":"#222218"}}},{name:"Solarized-Dark",themeName:"solarized-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"657b83",fontStyle:"italic",token:"comment"},{foreground:"2aa198",token:"string"},{foreground:"d30102",token:"string.regexp"},{foreground:"d33682",token:"constant.numeric"},{foreground:"268bd2",token:"variable.language"},{foreground:"268bd2",token:"variable.other"},{foreground:"859900",token:"keyword"},{foreground:"93a1a1",fontStyle:"bold",token:"storage"},{foreground:"cb4b16",token:"entity.name.class"},{foreground:"cb4b16",token:"entity.name.type.class"},{foreground:"268bd2",token:"entity.name.function"},{foreground:"859900",token:"punctuation.definition.variable"},{foreground:"d30102",token:"punctuation.section.embedded.begin"},{foreground:"d30102",token:"punctuation.section.embedded.end"},{foreground:"b58900",token:"constant.language"},{foreground:"b58900",token:"meta.preprocessor"},{foreground:"cb4b16",token:"support.function.construct"},{foreground:"cb4b16",token:"keyword.other.new"},{foreground:"cb4b16",token:"constant.character"},{foreground:"cb4b16",token:"constant.other"},{foreground:"6c71c4",token:"entity.other.inherited-class"},{foreground:"268bd2",fontStyle:"bold",token:"entity.name.tag"},{foreground:"657b83",token:"punctuation.definition.tag"},{foreground:"93a1a1",token:"entity.other.attribute-name"},{foreground:"268bd2",token:"support.function"},{foreground:"d30102",token:"punctuation.separator.continuation"},{foreground:"859900",token:"support.type"},{foreground:"859900",token:"support.class"},{foreground:"cb4b16",token:"support.type.exception"}],colors:{"editor.foreground":"#93A1A1","editor.background":"#002B36","editor.selectionBackground":"#073642","editor.lineHighlightBackground":"#073642","editorCursor.foreground":"#D30102","editorWhitespace.foreground":"#93A1A1"}}},{name:"Solarized-Light",themeName:"solarized-light",themeData:{base:"vs",inherit:!0,rules:[{foreground:"93a1a1",token:"comment"},{foreground:"2aa198",token:"string"},{foreground:"d30102",token:"string.regexp"},{foreground:"d33682",token:"constant.numeric"},{foreground:"268bd2",token:"variable.language"},{foreground:"268bd2",token:"variable.other"},{foreground:"859900",token:"keyword"},{foreground:"073642",fontStyle:"bold",token:"storage"},{foreground:"268bd2",token:"entity.name.class"},{foreground:"268bd2",token:"entity.name.type.class"},{foreground:"268bd2",token:"entity.name.function"},{foreground:"859900",token:"punctuation.definition.variable"},{foreground:"d30102",token:"punctuation.section.embedded.begin"},{foreground:"d30102",token:"punctuation.section.embedded.end"},{foreground:"b58900",token:"constant.language"},{foreground:"b58900",token:"meta.preprocessor"},{foreground:"d30102",token:"support.function.construct"},{foreground:"d30102",token:"keyword.other.new"},{foreground:"cb4b16",token:"constant.character"},{foreground:"cb4b16",token:"constant.other"},{foreground:"268bd2",fontStyle:"bold",token:"entity.name.tag"},{foreground:"93a1a1",token:"punctuation.definition.tag.begin"},{foreground:"93a1a1",token:"punctuation.definition.tag.end"},{foreground:"93a1a1",token:"entity.other.attribute-name"},{foreground:"268bd2",token:"support.function"},{foreground:"d30102",token:"punctuation.separator.continuation"},{foreground:"859900",token:"support.type"},{foreground:"859900",token:"support.class"},{foreground:"cb4b16",token:"support.type.exception"}],colors:{"editor.foreground":"#586E75","editor.background":"#FDF6E3","editor.selectionBackground":"#073642","editor.lineHighlightBackground":"#EEE8D5","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#93A1A1"}}},{name:"Tomorrow",themeName:"tomorrow",themeData:{base:"vs",inherit:!0,rules:[{foreground:"8e908c",token:"comment"},{foreground:"666969",token:"keyword.operator.class"},{foreground:"666969",token:"constant.other"},{foreground:"666969",token:"source.php.embedded.line"},{foreground:"c82829",token:"variable"},{foreground:"c82829",token:"support.other.variable"},{foreground:"c82829",token:"string.other.link"},{foreground:"c82829",token:"string.regexp"},{foreground:"c82829",token:"entity.name.tag"},{foreground:"c82829",token:"entity.other.attribute-name"},{foreground:"c82829",token:"meta.tag"},{foreground:"c82829",token:"declaration.tag"},{foreground:"f5871f",token:"constant.numeric"},{foreground:"f5871f",token:"constant.language"},{foreground:"f5871f",token:"support.constant"},{foreground:"f5871f",token:"constant.character"},{foreground:"f5871f",token:"variable.parameter"},{foreground:"f5871f",token:"punctuation.section.embedded"},{foreground:"f5871f",token:"keyword.other.unit"},{foreground:"c99e00",token:"entity.name.class"},{foreground:"c99e00",token:"entity.name.type.class"},{foreground:"c99e00",token:"support.type"},{foreground:"c99e00",token:"support.class"},{foreground:"718c00",token:"string"},{foreground:"718c00",token:"constant.other.symbol"},{foreground:"718c00",token:"entity.other.inherited-class"},{foreground:"718c00",token:"markup.heading"},{foreground:"3e999f",token:"keyword.operator"},{foreground:"3e999f",token:"constant.other.color"},{foreground:"4271ae",token:"entity.name.function"},{foreground:"4271ae",token:"meta.function-call"},{foreground:"4271ae",token:"support.function"},{foreground:"4271ae",token:"keyword.other.special-method"},{foreground:"4271ae",token:"meta.block-level"},{foreground:"8959a8",token:"keyword"},{foreground:"8959a8",token:"storage"},{foreground:"8959a8",token:"storage.type"},{foreground:"ffffff",background:"c82829",token:"invalid"},{foreground:"ffffff",background:"4271ae",token:"meta.separator"},{foreground:"ffffff",background:"8959a8",token:"invalid.deprecated"}],colors:{"editor.foreground":"#4D4D4C","editor.background":"#FFFFFF","editor.selectionBackground":"#D6D6D6","editor.lineHighlightBackground":"#EFEFEF","editorCursor.foreground":"#AEAFAD","editorWhitespace.foreground":"#D1D1D1"}}},{name:"Tomorrow-Night",themeName:"tomorrow-night",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"969896",token:"comment"},{foreground:"ced1cf",token:"keyword.operator.class"},{foreground:"ced1cf",token:"constant.other"},{foreground:"ced1cf",token:"source.php.embedded.line"},{foreground:"cc6666",token:"variable"},{foreground:"cc6666",token:"support.other.variable"},{foreground:"cc6666",token:"string.other.link"},{foreground:"cc6666",token:"string.regexp"},{foreground:"cc6666",token:"entity.name.tag"},{foreground:"cc6666",token:"entity.other.attribute-name"},{foreground:"cc6666",token:"meta.tag"},{foreground:"cc6666",token:"declaration.tag"},{foreground:"de935f",token:"constant.numeric"},{foreground:"de935f",token:"constant.language"},{foreground:"de935f",token:"support.constant"},{foreground:"de935f",token:"constant.character"},{foreground:"de935f",token:"variable.parameter"},{foreground:"de935f",token:"punctuation.section.embedded"},{foreground:"de935f",token:"keyword.other.unit"},{foreground:"f0c674",token:"entity.name.class"},{foreground:"f0c674",token:"entity.name.type.class"},{foreground:"f0c674",token:"support.type"},{foreground:"f0c674",token:"support.class"},{foreground:"b5bd68",token:"string"},{foreground:"b5bd68",token:"constant.other.symbol"},{foreground:"b5bd68",token:"entity.other.inherited-class"},{foreground:"b5bd68",token:"markup.heading"},{foreground:"8abeb7",token:"keyword.operator"},{foreground:"8abeb7",token:"constant.other.color"},{foreground:"81a2be",token:"entity.name.function"},{foreground:"81a2be",token:"meta.function-call"},{foreground:"81a2be",token:"support.function"},{foreground:"81a2be",token:"keyword.other.special-method"},{foreground:"81a2be",token:"meta.block-level"},{foreground:"b294bb",token:"keyword"},{foreground:"b294bb",token:"storage"},{foreground:"b294bb",token:"storage.type"},{foreground:"b294bb",token:"entity.name.tag.css"},{foreground:"ced2cf",background:"df5f5f",token:"invalid"},{foreground:"ced2cf",background:"82a3bf",token:"meta.separator"},{foreground:"ced2cf",background:"b798bf",token:"invalid.deprecated"}],colors:{"editor.foreground":"#C5C8C6","editor.background":"#1D1F21","editor.selectionBackground":"#373B41","editor.lineHighlightBackground":"#282A2E","editorCursor.foreground":"#AEAFAD","editorWhitespace.foreground":"#4B4E55"}}},{name:"Vibrant Ink",themeName:"vibrant-ink",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"ffffff",background:"0f0f0f",token:"text"},{background:"000000",token:"source.ruby.rails.embedded.html"},{foreground:"ffffff",background:"101010",token:"text.html.ruby"},{foreground:"ccff33",background:"000000",token:"invalid"},{foreground:"ccff33",background:"000000",token:"invalid.deprecated"},{foreground:"99cc99",token:"constant.numeric"},{foreground:"ffffff",background:"000000",token:"source"},{foreground:"9933cc",token:"comment"},{foreground:"339999",token:"constant"},{foreground:"ff6600",token:"keyword"},{foreground:"edf8f9",token:"keyword.preprocessor"},{foreground:"ffffff",token:"keyword.preprocessor directive"},{foreground:"ffcc00",token:"entity.name.function"},{foreground:"ffcc00",token:"storage.type.function.js"},{fontStyle:"italic",token:"variable.parameter"},{foreground:"772cb7",background:"070707",token:"source comment.block"},{foreground:"ffffff",token:"variable.other"},{foreground:"ffcc00",token:"support.function"},{foreground:"66ff00",token:"string"},{foreground:"aaaaaa",token:"string constant.character.escape"},{foreground:"000000",background:"cccc33",token:"string.interpolated"},{foreground:"44b4cc",token:"string.regexp"},{foreground:"cccc33",token:"string.literal"},{foreground:"555555",token:"string.interpolated constant.character.escape"},{fontStyle:"underline",token:"entity.name.class"},{fontStyle:"underline",token:"support.class.js"},{fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"ff6600",token:"meta.tag.inline.any.html"},{foreground:"ff6600",token:"meta.tag.block.any.html"},{foreground:"99cc99",fontStyle:"italic",token:"entity.other.attribute-name"},{foreground:"dde93d",token:"keyword.other"},{foreground:"ff6600",token:"meta.selector.css"},{foreground:"ff6600",token:"entity.other.attribute-name.pseudo-class.css"},{foreground:"ff6600",token:"entity.name.tag.wildcard.css"},{foreground:"ff6600",token:"entity.other.attribute-name.id.css"},{foreground:"ff6600",token:"entity.other.attribute-name.class.css"},{foreground:"999966",token:"support.type.property-name.css"},{foreground:"ffffff",token:"keyword.other.unit.css"},{foreground:"ffffff",token:"constant.other.rgb-value.css"},{foreground:"ffffff",token:"constant.numeric.css"},{foreground:"ffffff",token:"support.function.event-handler.js"},{foreground:"ffffff",token:"keyword.operator.js"},{foreground:"cccc66",token:"keyword.control.js"},{foreground:"ffffff",token:"support.class.prototype.js"},{foreground:"ff6600",token:"object.property.function.prototype.js"}],colors:{"editor.foreground":"#FFFFFF","editor.background":"#0F0F0F","editor.selectionBackground":"#6699CC","editor.lineHighlightBackground":"#333333","editorCursor.foreground":"#FFFFFF","editorWhitespace.foreground":"#404040"}}},{name:"Nord-Dark",themeName:"nord-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"616e88",token:"comment"},{foreground:"616e88",fontStyle:"bold",token:"comment.block.preprocessor"},{foreground:"81a1c1",token:"comment.block.documentation"},{foreground:"d8dee9",background:"bf616a",token:"invalid.illegal"},{foreground:"81a1c1",token:"keyword"},{foreground:"81a1c1",token:"storage"},{foreground:"81a1c1",token:"keyword.operator"},{foreground:"81a1c1",token:"constant.language"},{foreground:"81a1c1",token:"support.constant"},{foreground:"8fbcbb",token:"storage.type"},{foreground:"8fBcbb",token:"entity.other.attribute-name"},{foreground:"d8dee9",token:"variable.other"},{foreground:"d8dee9",token:"variable.language"},{foreground:"8fbcbb",token:"entity.name.type"},{foreground:"8fbcbb",fontStyle:"bold",token:"entity.other.inherited-class"},{foreground:"8fbcbb",token:"support.class"},{foreground:"8fbcbb",token:"variable.other.constant"},{foreground:"88c0d0",token:"entity.name.function"},{foreground:"88c0d0",token:"support.function"},{foreground:"88c0d0",token:"entity.name.section"},{foreground:"5e81ac",token:"entity.name.tag"},{foreground:"d8dee9",token:"variable.parameter"},{foreground:"d8dee9",token:"support.variable"},{foreground:"b48ead",token:"constant.numeric"},{foreground:"b48ead",token:"constant.other"},{foreground:"a3be8c",token:"string - string source"},{foreground:"ebcb8b",token:"constant.character"},{foreground:"ebcb8b",token:"string.regexp"},{foreground:"d8dee9",fontStyle:"bold",token:"constant.other.symbol"},{fontground:"eceff4",token:"punctuation"},{foreground:"bf616a",token:"markup.deleted"},{fontStyle:"italic",token:"markup.italic"},{foreground:"88c0d0",token:"markup.heading"},{foreground:"a3be8c",token:"markup.inserted"},{fontStyle:"bold",token:"markup.bold"},{fontStyle:"underline",token:"markup.underline"},{foreground:"8fbcbb",token:"meta.diff.range"},{foreground:"8fbcbb",token:"meta.diff.header.from-file"}],colors:{"editorActiveLineNumber.foreground":"#d8dee9","editorCursor.foreground":"#d8dee9","editorHint.border":"#ebcb8b","editorHint.foreground":"#ebcb8b","editorIndentGuide.background":"#434c5e","editorIndentGuide.activeBackground":"#4c566a","editorLineNumber.foreground":"#4c566a","editorLineNumber.activeForeground":"#d8dee9","editorWhitespace.foreground":"#4c566a","editorWidget.background":"#2e3440","editorWidget.border":"#3b4252","editor.background":"#2e3440","editor.foreground":"#d8dee9","editor.hoverHighlightBackground":"#3b4252","editor.findMatchBackground":"#88c0d0","editor.findMatchHighlightBackground":"#88c0d0","editor.findRangeHighlightBackground":"#88c0d0","editor.lineHighlightBackground":"#3b4252","editor.lineHighlightBorder":"#3b4252","editor.inactiveSelectionBackground":"#434c5e","editor.selectionBackground":"#434c5e","editor.selectionHighlightBackground":"#434c5e","editor.rangeHighlightBackground":"#434c5e","editor.wordHighlightBackground":"#81a1c1","editor.wordHighlightStrongBackground":"#81a1c1","editorError.foreground":"#bf616a","editorError.border":"#bf616a","editorWarning.foreground":"#ebcb8b","editorWarning.border":"#ebcb8b","editorBracketMatch.background":"#2e3440","editorBracketMatch.border":"#88c0d0","editorCodeLens.foreground":"#4c566a","editorGroup.background":"#2e3440","editorGroup.border":"#3b4252","editorGroup.dropBackground":"#3b4252","editorGroupHeader.noTabsBackground":"#2e3440","editorGroupHeader.tabsBackground":"#2e3440","editorGroupHeader.tabsBorder":"#3b4252","editorGutter.background":"#2e3440","editorGutter.modifiedBackground":"#ebcb8b","editorGutter.addedBackground":"#a3be8c","editorGutter.deletedBackground":"#bf616a","editorHoverWidget.background":"#3b4252","editorHoverWidget.border":"#3b4252","editorLink.activeForeground":"#88c0d0","editorMarkerNavigation.background":"#5e81ac","editorMarkerNavigationError.background":"#bf616a","editorMarkerNavigationWarning.background":"#ebcb8b","editorOverviewRuler.border":"#3b4252","editorOverviewRuler.currentContentForeground":"#3b4252","editorOverviewRuler.incomingContentForeground":"#3b4252","editorOverviewRuler.findMatchForeground":"#88c0d0","editorOverviewRuler.rangeHighlightForeground":"#88c0d0","editorOverviewRuler.selectionHighlightForeground":"#88c0d0","editorOverviewRuler.wordHighlightForeground":"#88c0d0","editorOverviewRuler.wordHighlightStrongForeground":"#88c0d0","editorOverviewRuler.modifiedForeground":"#ebcb8b","editorOverviewRuler.addedForeground":"#a3be8c","editorOverviewRuler.deletedForeground":"#bf616a","editorOverviewRuler.errorForeground":"#bf616a","editorOverviewRuler.warningForeground":"#ebcb8b","editorOverviewRuler.infoForeground":"#81a1c1","editorRuler.foreground":"#434c5e","editorSuggestWidget.background":"#2e3440","editorSuggestWidget.border":"#3b4252","editorSuggestWidget.foreground":"#d8dee9","editorSuggestWidget.highlightForeground":"#88c0d0","editorSuggestWidget.selectedBackground":"#434c5e"}}},{name:"One-Dark",themeName:"one-dark",themeData:{base:"vs-dark",inherit:!0,rules:[{foreground:"abb2bf",token:"text"},{foreground:"abb2bf",token:"source"},{foreground:"adb7c9",token:"variable.parameter.function"},{foreground:"5f697a",fontStyle:" italic",token:"comment"},{foreground:"5f697a",fontStyle:" italic",token:"punctuation.definition.comment"},{foreground:"adb7c9",token:"none"},{foreground:"adb7c9",token:"keyword.operator"},{foreground:"cd74e8",token:"keyword"},{foreground:"eb6772",token:"variable"},{foreground:"5cb3fa",token:"entity.name.function"},{foreground:"5cb3fa",token:"meta.require"},{foreground:"5cb3fa",token:"support.function.any-method"},{foreground:"f0c678",token:"support.class"},{foreground:"f0c678",token:"entity.name.class"},{foreground:"f0c678",token:"entity.name.type.class"},{foreground:"adb7c9",token:"meta.class"},{foreground:"5cb3fa",token:"keyword.other.special-method"},{foreground:"cd74e8",token:"storage"},{foreground:"5ebfcc",token:"support.function"},{foreground:"9acc76",token:"string"},{foreground:"9acc76",token:"constant.other.symbol"},{foreground:"9acc76",token:"entity.other.inherited-class"},{foreground:"db9d63",token:"constant.numeric"},{foreground:"db9d63",token:"none"},{foreground:"db9d63",token:"none"},{foreground:"db9d63",token:"constant"},{foreground:"eb6772",token:"entity.name.tag"},{foreground:"db9d63",token:"entity.other.attribute-name"},{foreground:"db9d63",token:"entity.other.attribute-name.id"},{foreground:"db9d63",token:"punctuation.definition.entity"},{foreground:"cd74e8",token:"meta.selector"},{foreground:"db9d63",token:"none"},{foreground:"5cb3fa",token:"markup.heading punctuation.definition.heading"},{foreground:"5cb3fa",token:"entity.name.section"},{foreground:"db9d63",token:"keyword.other.unit"},{foreground:"f0c678",token:"markup.bold"},{foreground:"f0c678",token:"punctuation.definition.bold"},{foreground:"cd74e8",token:"markup.italic"},{foreground:"cd74e8",token:"punctuation.definition.italic"},{foreground:"9acc76",token:"markup.raw.inline"},{foreground:"eb6772",token:"string.other.link"},{foreground:"eb6772",token:"punctuation.definition.string.end.markdown"},{foreground:"db9d63",token:"meta.link"},{foreground:"eb6772",token:"markup.list"},{foreground:"db9d63",token:"markup.quote"},{foreground:"adb7c9",background:"515151",token:"meta.separator"},{foreground:"9acc76",token:"markup.inserted"},{foreground:"eb6772",token:"markup.deleted"},{foreground:"cd74e8",token:"markup.changed"},{foreground:"5ebfcc",token:"constant.other.color"},{foreground:"5ebfcc",token:"string.regexp"},{foreground:"5ebfcc",token:"constant.character.escape"},{foreground:"c94e42",token:"punctuation.section.embedded"},{foreground:"c94e42",token:"variable.interpolation"},{foreground:"ffffff",background:"e05252",token:"invalid.illegal"},{foreground:"2d2d2d",background:"f99157",token:"invalid.broken"},{foreground:"2c323d",background:"d27b53",token:"invalid.deprecated"},{foreground:"2c323d",background:"747369",token:"invalid.unimplemented"},{foreground:"eb6772",token:"source.json meta.structure.dictionary.json string.quoted.double.json"},{foreground:"9acc76",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"eb6772",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json meta.structure.dictionary.json string.quoted.double.json"},{foreground:"9acc76",token:"source.json meta.structure.dictionary.json meta.structure.dictionary.value.json meta.structure.dictionary.json meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"cd74e8",token:"text.html.laravel-blade source.php.embedded.line.html entity.name.tag.laravel-blade"},{foreground:"cd74e8",token:"text.html.laravel-blade source.php.embedded.line.html support.constant.laravel-blade"},{foreground:"db9d63",token:"source.python meta.function.python meta.function.parameters.python variable.parameter.function.python"},{foreground:"5ebfcc",token:"source.python meta.function-call.python support.type.python"},{foreground:"cd74e8",token:"source.python keyword.operator.logical.python"},{foreground:"f0c678",token:"source.python meta.class.python punctuation.definition.inheritance.begin.python"},{foreground:"f0c678",token:"source.python meta.class.python punctuation.definition.inheritance.end.python"},{foreground:"db9d63",token:"source.python meta.function-call.python meta.function-call.arguments.python variable.parameter.function.python"},{foreground:"db9d63",token:"text.html.basic source.php.embedded.block.html support.constant.std.php"},{foreground:"f0c678",token:"text.html.basic source.php.embedded.block.html meta.namespace.php entity.name.type.namespace.php"},{foreground:"db9d63",token:"source.js meta.function.js support.constant.js"},{foreground:"cd74e8",token:"text.html.basic` source.php.embedded.block.html constant.other.php"},{foreground:"db9d63",token:"text.html.basic source.php.embedded.block.html support.other.namespace.php"},{foreground:"adb7c9",token:"text.tex.latex meta.function.environment.math.latex string.other.math.block.environment.latex meta.definition.label.latex variable.parameter.definition.label.latex"},{foreground:"cd74e8",fontStyle:" italic",token:"text.tex.latex meta.function.emph.latex markup.italic.emph.latex"},{foreground:"adb7c9",token:"source.js variable.other.readwrite.js"},{foreground:"adb7c9",token:"source.js meta.function-call.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly meta.function-call.method.without-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly variable.other.object.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly constant.other.object.key.js string.unquoted.label.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly constant.other.object.key.js punctuation.separator.key-value.js"},{foreground:"adb7c9",token:"source.js meta.group.braces.round meta.group.braces.curly meta.function-call.method.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.function-call.method.with-arguments.js variable.function.js"},{foreground:"adb7c9",token:"source.js meta.function-call.method.without-arguments.js variable.function.js"}],colors:{"editor.foreground":"#6c7079","editor.background":"#2B303B","editor.selectionBackground":"#bbccf51b","editor.inactiveSelectionBackground":"#bbccf51b","editor.lineHighlightBackground":"#8cc2fc0b","editorCursor.foreground":"#528bff","editorWhitespace.foreground":"#747369","editorIndentGuide.background":"#464c55","editorIndentGuide.activeBackground":"#464c55","editor.selectionHighlightBorder":"#bbccf51b"}}},{name:"Ros\xe9 Pine",themeName:"rose-pine",themeData:{base:"vs-dark",inherit:!0,rules:[{background:"#191724",foreground:"#e0def4",token:""},{background:"#191724",foreground:"#e0def4",token:"text"},{background:"#191724",foreground:"#e0def4",token:"source"},{foreground:"#c4a7e7",token:"pointsOfInterest"},{foreground:"#eb6f92",token:"invalid"},{fontStyle:"italic",token:"emphasis"},{fontStyle:"bold",token:"strong"},{foreground:"#e0def4",token:"variable"},{foreground:"#e0def4",token:"variable.predefined"},{foreground:"#ebbcba",token:"constant"},{foreground:"#6e6a86",token:"comment"},{foreground:"#ebbcba",token:"number"},{foreground:"#ebbcba",token:"number.hex"},{foreground:"#f6c177",token:"regexp"},{foreground:"#6e6a86",token:"annotation"},{foreground:"#e0def4",token:"type"},{foreground:"#908caa",token:"delimiter"},{foreground:"#908caa",token:"delimiter.html"},{foreground:"#908caa",token:"delimiter.xml"},{foreground:"#9ccfd8",token:"tag"},{foreground:"#9ccfd8",token:"tag.id.jade"},{foreground:"#9ccfd8",token:"tag.class.jade"},{foreground:"#9ccfd8",token:"meta.scss"},{foreground:"#9ccfd8",token:"metatag"},{foreground:"#9ccfd8",token:"metatag.content.html"},{foreground:"#9ccfd8",token:"metatag.html"},{foreground:"#9ccfd8",token:"metatag.xml"},{foreground:"#9ccfd8",token:"metatag.php"},{foreground:"#9ccfd8",token:"key"},{foreground:"#9ccfd8",token:"string.key.json"},{foreground:"#f6c177",token:"string.value.json"},{foreground:"#c4a7e7",token:"attribute.name"},{foreground:"#f6c177",token:"attribute.value"},{foreground:"#f6c177",token:"attribute.value.number"},{foreground:"#f6c177",token:"attribute.value.unit"},{foreground:"#f6c177",token:"attribute.value.html"},{foreground:"#f6c177",token:"attribute.value.xml"},{foreground:"#f6c177",token:"string"},{foreground:"#f6c177",token:"string.html"},{foreground:"#f6c177",token:"string.sql"},{foreground:"#f6c177",token:"string.yaml"},{foreground:"#31748f",token:"keyword"},{foreground:"#31748f",token:"keyword.json"},{foreground:"#31748f",token:"keyword.flow"},{foreground:"#31748f",token:"keyword.flow.scss"},{foreground:"#908caa",token:"operator.scss"},{foreground:"#908caa",token:"operator.sql"},{foreground:"#908caa",token:"operator.swift"},{foreground:"#908caa",token:"predefined.sql"},{foreground:"#ebbcba",token:"identifier"}],colors:{"activityBar.activeBorder":"#e0def4","activityBar.background":"#191724","activityBar.dropBorder":"#26233a","activityBar.foreground":"#e0def4","activityBar.inactiveForeground":"#908caa","activityBarBadge.background":"#ebbcba","activityBarBadge.foreground":"#191724","badge.background":"#ebbcba","badge.foreground":"#191724","banner.background":"#1f1d2e","banner.foreground":"#e0def4","banner.iconForeground":"#908caa","breadcrumb.activeSelectionForeground":"#ebbcba","breadcrumb.background":"#191724","breadcrumb.focusForeground":"#908caa","breadcrumb.foreground":"#6e6a86","breadcrumbPicker.background":"#1f1d2e","button.background":"#ebbcba","button.foreground":"#191724","button.hoverBackground":"#ebbcbae6","button.secondaryBackground":"#1f1d2e","button.secondaryForeground":"#e0def4","button.secondaryHoverBackground":"#26233a","charts.blue":"#9ccfd8","charts.foreground":"#e0def4","charts.green":"#31748f","charts.lines":"#908caa","charts.orange":"#ebbcba","charts.purple":"#c4a7e7","charts.red":"#eb6f92","charts.yellow":"#f6c177","checkbox.background":"#1f1d2e","checkbox.border":"#6e6a8633","checkbox.foreground":"#e0def4","debugExceptionWidget.background":"#1f1d2e","debugExceptionWidget.border":"#6e6a8633","debugIcon.breakpointCurrentStackframeForeground":"#908caa","debugIcon.breakpointDisabledForeground":"#908caa","debugIcon.breakpointForeground":"#908caa","debugIcon.breakpointStackframeForeground":"#908caa","debugIcon.breakpointUnverifiedForeground":"#908caa","debugIcon.continueForeground":"#908caa","debugIcon.disconnectForeground":"#908caa","debugIcon.pauseForeground":"#908caa","debugIcon.restartForeground":"#908caa","debugIcon.startForeground":"#908caa","debugIcon.stepBackForeground":"#908caa","debugIcon.stepIntoForeground":"#908caa","debugIcon.stepOutForeground":"#908caa","debugIcon.stepOverForeground":"#908caa","debugIcon.stopForeground":"#eb6f92","debugToolBar.background":"#1f1d2e","debugToolBar.border":"#26233a",descriptionForeground:"#908caa","diffEditor.border":"#26233a","diffEditor.diagonalFill":"#6e6a8666","diffEditor.insertedTextBackground":"#9ccfd826","diffEditor.removedTextBackground":"#eb6f9226","diffEditorOverview.insertedForeground":"#9ccfd880","diffEditorOverview.removedForeground":"#eb6f9280","dropdown.background":"#1f1d2e","dropdown.border":"#6e6a8633","dropdown.foreground":"#e0def4","dropdown.listBackground":"#1f1d2e","editor.background":"#191724","editor.findMatchBackground":"#6e6a8666","editor.findMatchHighlightBackground":"#6e6a8666","editor.findRangeHighlightBackground":"#6e6a8666","editor.findRangeHighlightBorder":"#0000","editor.focusedStackFrameHighlightBackground":"#6e6a8633","editor.foldBackground":"#1f1d2e","editor.foreground":"#e0def4","editor.hoverHighlightBackground":"#0000","editor.inactiveSelectionBackground":"#6e6a861a","editor.inlineValuesBackground":"#0000","editor.inlineValuesForeground":"#908caa","editor.lineHighlightBackground":"#6e6a861a","editor.lineHighlightBorder":"#0000","editor.linkedEditingBackground":"#1f1d2e","editor.rangeHighlightBackground":"#6e6a861a","editor.rangeHighlightBorder":"#0000","editor.selectionBackground":"#6e6a8633","editor.selectionForeground":"#e0def4","editor.selectionHighlightBackground":"#6e6a8633","editor.selectionHighlightBorder":"#0000","editor.snippetFinalTabstopHighlightBackground":"#6e6a8633","editor.snippetFinalTabstopHighlightBorder":"#1f1d2e","editor.snippetTabstopHighlightBackground":"#6e6a8633","editor.snippetTabstopHighlightBorder":"#1f1d2e","editor.stackFrameHighlightBackground":"#6e6a8633","editor.symbolHighlightBackground":"#6e6a8633","editor.symbolHighlightBorder":"#0000","editor.wordHighlightBackground":"#6e6a8633","editor.wordHighlightBorder":"#0000","editor.wordHighlightStrongBackground":"#6e6a8633","editor.wordHighlightStrongBorder":"#6e6a8633","editorBracketHighlight.foreground1":"#eb6f9280","editorBracketHighlight.foreground2":"#31748f80","editorBracketHighlight.foreground3":"#f6c17780","editorBracketHighlight.foreground4":"#9ccfd880","editorBracketHighlight.foreground5":"#ebbcba80","editorBracketHighlight.foreground6":"#c4a7e780","editorBracketMatch.background":"#0000","editorBracketMatch.border":"#908caa","editorBracketPairGuide.activeBackground1":"#31748f","editorBracketPairGuide.activeBackground2":"#ebbcba","editorBracketPairGuide.activeBackground3":"#c4a7e7","editorBracketPairGuide.activeBackground4":"#9ccfd8","editorBracketPairGuide.activeBackground5":"#f6c177","editorBracketPairGuide.activeBackground6":"#eb6f92","editorBracketPairGuide.background1":"#31748f80","editorBracketPairGuide.background2":"#ebbcba80","editorBracketPairGuide.background3":"#c4a7e780","editorBracketPairGuide.background4":"#9ccfd880","editorBracketPairGuide.background5":"#f6c17780","editorBracketPairGuide.background6":"#eb6f9280","editorCodeLens.foreground":"#ebbcba","editorCursor.background":"#e0def4","editorCursor.foreground":"#6e6a86","editorError.border":"#0000","editorError.foreground":"#eb6f92","editorGhostText.foreground":"#908caa","editorGroup.border":"#0000","editorGroup.dropBackground":"#1f1d2e","editorGroup.emptyBackground":"#0000","editorGroup.focusedEmptyBorder":"#0000","editorGroupHeader.noTabsBackground":"#0000","editorGroupHeader.tabsBackground":"#0000","editorGroupHeader.tabsBorder":"#0000","editorGutter.addedBackground":"#9ccfd8","editorGutter.background":"#0000","editorGutter.commentRangeForeground":"#908caa","editorGutter.deletedBackground":"#eb6f92","editorGutter.foldingControlForeground":"#c4a7e7","editorGutter.modifiedBackground":"#ebbcba","editorHint.border":"#0000","editorHint.foreground":"#908caa","editorHoverWidget.background":"#1f1d2e","editorHoverWidget.border":"#6e6a8680","editorHoverWidget.foreground":"#908caa","editorHoverWidget.highlightForeground":"#e0def4","editorHoverWidget.statusBarBackground":"#0000","editorIndentGuide.activeBackground":"#6e6a86","editorIndentGuide.background":"#6e6a8666","editorInfo.border":"#26233a","editorInfo.foreground":"#9ccfd8","editorInlayHint.background":"#26233a","editorInlayHint.foreground":"#908caa","editorInlayHint.parameterBackground":"#26233a","editorInlayHint.parameterForeground":"#c4a7e7","editorInlayHint.typeBackground":"#26233a","editorInlayHint.typeForeground":"#9ccfd8","editorLightBulb.foreground":"#31748f","editorLightBulbAutoFix.foreground":"#ebbcba","editorLineNumber.activeForeground":"#e0def4","editorLineNumber.foreground":"#908caa","editorLink.activeForeground":"#ebbcba","editorMarkerNavigation.background":"#1f1d2e","editorMarkerNavigationError.background":"#1f1d2e","editorMarkerNavigationInfo.background":"#1f1d2e","editorMarkerNavigationWarning.background":"#1f1d2e","editorOverviewRuler.addedForeground":"#9ccfd880","editorOverviewRuler.background":"#191724","editorOverviewRuler.border":"#6e6a8666","editorOverviewRuler.bracketMatchForeground":"#908caa","editorOverviewRuler.commonContentForeground":"#6e6a861a","editorOverviewRuler.currentContentForeground":"#6e6a8633","editorOverviewRuler.deletedForeground":"#eb6f9280","editorOverviewRuler.errorForeground":"#eb6f9280","editorOverviewRuler.findMatchForeground":"#6e6a8666","editorOverviewRuler.incomingContentForeground":"#c4a7e780","editorOverviewRuler.infoForeground":"#9ccfd880","editorOverviewRuler.modifiedForeground":"#ebbcba80","editorOverviewRuler.rangeHighlightForeground":"#6e6a8666","editorOverviewRuler.selectionHighlightForeground":"#6e6a8666","editorOverviewRuler.warningForeground":"#f6c17780","editorOverviewRuler.wordHighlightForeground":"#6e6a8633","editorOverviewRuler.wordHighlightStrongForeground":"#6e6a8666","editorPane.background":"#0000","editorRuler.foreground":"#6e6a8666","editorSuggestWidget.background":"#1f1d2e","editorSuggestWidget.border":"#0000","editorSuggestWidget.focusHighlightForeground":"#ebbcba","editorSuggestWidget.foreground":"#908caa","editorSuggestWidget.highlightForeground":"#ebbcba","editorSuggestWidget.selectedBackground":"#6e6a8633","editorSuggestWidget.selectedForeground":"#e0def4","editorSuggestWidget.selectedIconForeground":"#e0def4","editorUnnecessaryCode.border":"#0000","editorUnnecessaryCode.opacity":"#00000080","editorWarning.border":"#0000","editorWarning.foreground":"#f6c177","editorWhitespace.foreground":"#6e6a86","editorWidget.background":"#1f1d2e","editorWidget.border":"#26233a","editorWidget.foreground":"#908caa","editorWidget.resizeBorder":"#6e6a86",errorForeground:"#eb6f92","extensionBadge.remoteBackground":"#c4a7e7","extensionBadge.remoteForeground":"#191724","extensionButton.prominentBackground":"#ebbcba","extensionButton.prominentForeground":"#191724","extensionButton.prominentHoverBackground":"#ebbcbae6","extensionIcon.starForeground":"#ebbcba","extensionIcon.verifiedForeground":"#c4a7e7",focusBorder:"#6e6a8633",foreground:"#e0def4","gitDecoration.addedResourceForeground":"#9ccfd8","gitDecoration.conflictingResourceForeground":"#eb6f92","gitDecoration.deletedResourceForeground":"#908caa","gitDecoration.ignoredResourceForeground":"#6e6a86","gitDecoration.modifiedResourceForeground":"#ebbcba","gitDecoration.renamedResourceForeground":"#31748f","gitDecoration.stageDeletedResourceForeground":"#eb6f92","gitDecoration.stageModifiedResourceForeground":"#c4a7e7","gitDecoration.submoduleResourceForeground":"#f6c177","gitDecoration.untrackedResourceForeground":"#f6c177","icon.foreground":"#908caa","input.background":"#26233a80","input.border":"#6e6a8633","input.foreground":"#e0def4","input.placeholderForeground":"#908caa","inputOption.activeBackground":"#ebbcba","inputOption.activeBorder":"#0000","inputOption.activeForeground":"#191724","inputValidation.errorBackground":"#1f1d2e","inputValidation.errorBorder":"#6e6a8666","inputValidation.errorForeground":"#eb6f92","inputValidation.infoBackground":"#1f1d2e","inputValidation.infoBorder":"#6e6a8666","inputValidation.infoForeground":"#9ccfd8","inputValidation.warningBackground":"#1f1d2e","inputValidation.warningBorder":"#6e6a8666","inputValidation.warningForeground":"#9ccfd880","keybindingLabel.background":"#26233a","keybindingLabel.border":"#6e6a8666","keybindingLabel.bottomBorder":"#6e6a8666","keybindingLabel.foreground":"#c4a7e7","keybindingTable.headerBackground":"#26233a","keybindingTable.rowsBackground":"#1f1d2e","list.activeSelectionBackground":"#6e6a8633","list.activeSelectionForeground":"#e0def4","list.activeSelectionIconForeground":"#e0def4","list.deemphasizedForeground":"#908caa","list.dropBackground":"#1f1d2e","list.errorForeground":"#eb6f92","list.filterMatchBackground":"#1f1d2e","list.filterMatchBorder":"#ebbcba","list.focusBackground":"#6e6a8666","list.focusForeground":"#e0def4","list.focusOutline":"#6e6a8633","list.highlightForeground":"#ebbcba","list.hoverBackground":"#6e6a861a","list.hoverForeground":"#e0def4","list.inactiveFocusBackground":"#6e6a861a","list.inactiveSelectionBackground":"#1f1d2e","list.inactiveSelectionForeground":"#e0def4","list.inactiveSelectionIconForeground":"#908caa","list.invalidItemForeground":"#eb6f92","list.warningForeground":"#f6c177","listFilterWidget.background":"#1f1d2e","listFilterWidget.noMatchesOutline":"#eb6f92","listFilterWidget.outline":"#26233a","menu.background":"#1f1d2e","menu.border":"#6e6a861a","menu.foreground":"#e0def4","menu.selectionBackground":"#6e6a8633","menu.selectionBorder":"#26233a","menu.selectionForeground":"#e0def4","menu.separatorBackground":"#6e6a8666","menubar.selectionBackground":"#6e6a8633","menubar.selectionBorder":"#6e6a861a","menubar.selectionForeground":"#e0def4","merge.border":"#26233a","merge.commonContentBackground":"#6e6a8633","merge.commonHeaderBackground":"#6e6a8633","merge.currentContentBackground":"#f6c17780","merge.currentHeaderBackground":"#f6c17780","merge.incomingContentBackground":"#9ccfd880","merge.incomingHeaderBackground":"#9ccfd880","minimap.background":"#1f1d2e","minimap.errorHighlight":"#eb6f9280","minimap.findMatchHighlight":"#6e6a8633","minimap.selectionHighlight":"#6e6a8633","minimap.warningHighlight":"#f6c17780","minimapGutter.addedBackground":"#9ccfd8","minimapGutter.deletedBackground":"#eb6f92","minimapGutter.modifiedBackground":"#ebbcba","minimapSlider.activeBackground":"#6e6a8666","minimapSlider.background":"#6e6a8633","minimapSlider.hoverBackground":"#6e6a8633","notificationCenter.border":"#6e6a8633","notificationCenterHeader.background":"#1f1d2e","notificationCenterHeader.foreground":"#908caa","notificationLink.foreground":"#c4a7e7","notifications.background":"#1f1d2e","notifications.border":"#6e6a8633","notifications.foreground":"#e0def4","notificationsErrorIcon.foreground":"#eb6f92","notificationsInfoIcon.foreground":"#9ccfd8","notificationsWarningIcon.foreground":"#f6c177","notificationToast.border":"#6e6a8633","panel.background":"#1f1d2e","panel.border":"#0000","panel.dropBorder":"#26233a","panelInput.border":"#1f1d2e","panelSection.dropBackground":"#6e6a8633","panelSectionHeader.background":"#1f1d2e","panelSectionHeader.foreground":"#e0def4","panelTitle.activeBorder":"#6e6a8666","panelTitle.activeForeground":"#e0def4","panelTitle.inactiveForeground":"#908caa","peekView.border":"#26233a","peekViewEditor.background":"#1f1d2e","peekViewEditor.matchHighlightBackground":"#6e6a8666","peekViewResult.background":"#1f1d2e","peekViewResult.fileForeground":"#908caa","peekViewResult.lineForeground":"#908caa","peekViewResult.matchHighlightBackground":"#6e6a8666","peekViewResult.selectionBackground":"#6e6a8633","peekViewResult.selectionForeground":"#e0def4","peekViewTitle.background":"#26233a","peekViewTitleDescription.foreground":"#908caa","pickerGroup.border":"#6e6a8666","pickerGroup.foreground":"#c4a7e7","ports.iconRunningProcessForeground":"#ebbcba","problemsErrorIcon.foreground":"#eb6f92","problemsInfoIcon.foreground":"#9ccfd8","problemsWarningIcon.foreground":"#f6c177","progressBar.background":"#ebbcba","quickInput.background":"#1f1d2e","quickInput.foreground":"#908caa","quickInputList.focusBackground":"#6e6a8633","quickInputList.focusForeground":"#e0def4","quickInputList.focusIconForeground":"#e0def4","scrollbar.shadow":"#0000","scrollbarSlider.activeBackground":"#6e6a8666","scrollbarSlider.background":"#6e6a861a","scrollbarSlider.hoverBackground":"#6e6a8633","searchEditor.findMatchBackground":"#6e6a8633","selection.background":"#6e6a8666","settings.focusedRowBackground":"#1f1d2e","settings.headerForeground":"#e0def4","settings.modifiedItemIndicator":"#ebbcba","settings.focusedRowBorder":"#6e6a8633","settings.rowHoverBackground":"#1f1d2e","sideBar.background":"#191724","sideBar.dropBackground":"#1f1d2e","sideBar.foreground":"#908caa","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#6e6a8633","statusBar.background":"#191724","statusBar.debuggingBackground":"#c4a7e7","statusBar.debuggingForeground":"#191724","statusBar.foreground":"#908caa","statusBar.noFolderBackground":"#191724","statusBar.noFolderForeground":"#908caa","statusBarItem.activeBackground":"#6e6a8666","statusBarItem.hoverBackground":"#6e6a8633","statusBarItem.prominentBackground":"#26233a","statusBarItem.prominentForeground":"#e0def4","statusBarItem.prominentHoverBackground":"#6e6a8633","statusBarItem.remoteBackground":"#191724","statusBarItem.remoteForeground":"#f6c177","statusBarItem.errorBackground":"#191724","statusBarItem.errorForeground":"#eb6f92","symbolIcon.arrayForeground":"#908caa","symbolIcon.classForeground":"#908caa","symbolIcon.colorForeground":"#908caa","symbolIcon.constantForeground":"#908caa","symbolIcon.constructorForeground":"#908caa","symbolIcon.enumeratorForeground":"#908caa","symbolIcon.enumeratorMemberForeground":"#908caa","symbolIcon.eventForeground":"#908caa","symbolIcon.fieldForeground":"#908caa","symbolIcon.fileForeground":"#908caa","symbolIcon.folderForeground":"#908caa","symbolIcon.functionForeground":"#908caa","symbolIcon.interfaceForeground":"#908caa","symbolIcon.keyForeground":"#908caa","symbolIcon.keywordForeground":"#908caa","symbolIcon.methodForeground":"#908caa","symbolIcon.moduleForeground":"#908caa","symbolIcon.namespaceForeground":"#908caa","symbolIcon.nullForeground":"#908caa","symbolIcon.numberForeground":"#908caa","symbolIcon.objectForeground":"#908caa","symbolIcon.operatorForeground":"#908caa","symbolIcon.packageForeground":"#908caa","symbolIcon.propertyForeground":"#908caa","symbolIcon.referenceForeground":"#908caa","symbolIcon.snippetForeground":"#908caa","symbolIcon.stringForeground":"#908caa","symbolIcon.structForeground":"#908caa","symbolIcon.textForeground":"#908caa","symbolIcon.typeParameterForeground":"#908caa","symbolIcon.unitForeground":"#908caa","symbolIcon.variableForeground":"#908caa","tab.activeBackground":"#6e6a861a","tab.activeForeground":"#e0def4","tab.activeModifiedBorder":"#9ccfd8","tab.border":"#0000","tab.hoverBackground":"#6e6a8633","tab.inactiveBackground":"#0000","tab.inactiveForeground":"#908caa","tab.inactiveModifiedBorder":"#9ccfd880","tab.lastPinnedBorder":"#6e6a86","tab.unfocusedActiveBackground":"#0000","tab.unfocusedHoverBackground":"#0000","tab.unfocusedInactiveBackground":"#0000","tab.unfocusedInactiveModifiedBorder":"#9ccfd880","terminal.ansiBlack":"#26233a","terminal.ansiBlue":"#9ccfd8","terminal.ansiBrightBlack":"#908caa","terminal.ansiBrightBlue":"#9ccfd8","terminal.ansiBrightCyan":"#ebbcba","terminal.ansiBrightGreen":"#31748f","terminal.ansiBrightMagenta":"#c4a7e7","terminal.ansiBrightRed":"#eb6f92","terminal.ansiBrightWhite":"#e0def4","terminal.ansiBrightYellow":"#f6c177","terminal.ansiCyan":"#ebbcba","terminal.ansiGreen":"#31748f","terminal.ansiMagenta":"#c4a7e7","terminal.ansiRed":"#eb6f92","terminal.ansiWhite":"#e0def4","terminal.ansiYellow":"#f6c177","terminal.dropBackground":"#6e6a8633","terminal.foreground":"#e0def4","terminal.selectionBackground":"#6e6a8633","terminal.tab.activeBorder":"#e0def4","terminalCursor.background":"#e0def4","terminalCursor.foreground":"#6e6a86","textBlockQuote.background":"#1f1d2e","textBlockQuote.border":"#6e6a8633","textCodeBlock.background":"#1f1d2e","textLink.activeForeground":"#c4a7e7e6","textLink.foreground":"#c4a7e7","textPreformat.foreground":"#f6c177","textSeparator.foreground":"#908caa","titleBar.activeBackground":"#191724","titleBar.activeForeground":"#908caa","titleBar.inactiveBackground":"#1f1d2e","titleBar.inactiveForeground":"#908caa","toolbar.activeBackground":"#6e6a8666","toolbar.hoverBackground":"#6e6a8633","tree.indentGuidesStroke":"#908caa","walkThrough.embeddedEditorBackground":"#191724","welcomePage.background":"#191724","welcomePage.buttonBackground":"#1f1d2e","welcomePage.buttonHoverBackground":"#26233a","widget.shadow":"#0101011a","window.activeBorder":"#1f1d2e","window.inactiveBorder":"#1f1d2e"}}}],O=function(){return A},R=n(50057),F=n.n(R),D=n(36262),N=n(86278),_=n(61325),B=n(28894),U=n(71944),V=n(55760),H=n(20914),z={shortcutBox:{padding:15,textAlign:"center"}},W=function(e){var t=c.useState(""),n=(0,s.Z)(t,2),r=n[0],i=n[1],a=c.useState(!1),o=(0,s.Z)(a,2),l=o[0],u=o[1],d=function(){l&&(r&&e.onSet(r),e.onClose())};return c.useEffect((function(){var e=function(e){e.preventDefault();var t=(0,V.oN)(e);"keyup"!==e.type&&(u(t.isValid),i(t.shortcutString))};return document.addEventListener("keyup",e),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[]),(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Set shortcut"}),open:!0,maxWidth:"xs",actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:e.onClose},"Cancel"),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Set shortcut"}),primary:!0,onClick:d,disabled:!l},"Set")],secondaryActions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Remove shortcut"}),onClick:function(){e.onSet(""),e.onClose()}},"Remove")],onRequestClose:e.onClose,onApply:d,children:[(0,f.jsx)(N.Z,{children:e.commandText}),(0,f.jsx)(H.Z,{variant:"outlined",style:z.shortcutBox,background:"light",children:(0,f.jsx)(N.Z,{children:r?(0,V.$3)(r):(0,f.jsx)(w.Trans,{id:"Press a shortcut combination..."})})})]})},G=n(60022),Y=n(24830),q=n(83141),J=n(33620),X=n(99415),K=n(61701),Q=n(8511),$=n(51598),ee=n(32072),te=n(75779),ne=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{d:"M6.50994 3.53013C6.7107 3.34053 6.71974 3.02407 6.53013 2.82332C6.34053 2.62256 6.02407 2.61351 5.82331 2.80312L2.82331 5.63645C2.7233 5.73091 2.66663 5.8624 2.66663 5.99996C2.66663 6.13753 2.7233 6.26901 2.82331 6.36347L5.82331 9.1968C6.02407 9.38641 6.34053 9.37737 6.53013 9.17661C6.71974 8.97585 6.7107 8.65939 6.50994 8.46979L4.42424 6.49996H10.1666C11.3632 6.49996 12.3333 7.47004 12.3333 8.66663V12.8333C12.3333 13.1094 12.5572 13.3333 12.8333 13.3333C13.1094 13.3333 13.3333 13.1094 13.3333 12.8333V8.66663C13.3333 6.91775 11.9155 5.49996 10.1666 5.49996H4.42424L6.50994 3.53013Z",fill:"currentColor"})}))})),re=n(3781),ie={shortcutChip:{borderRadius:3}},ae=function(e){return(0,f.jsxs)(J.Z,{children:[(0,f.jsx)(X.Z,{primary:e.i18n._(ee.Z[e.commandName].displayText)}),(0,f.jsx)(K.Z,{children:(0,f.jsxs)(_.pJ,{alignItems:"center",children:[e.isClashing&&(0,f.jsx)(re.ZP,{title:(0,f.jsx)(w.Trans,{id:"This shortcut clashes with another action."}),children:(0,f.jsx)(te.Z,{})}),(0,f.jsx)(Q.Z,{style:ie.shortcutChip,label:e.shortcutString||(0,f.jsx)(w.Trans,{id:"No shortcut"}),onClick:e.onEditShortcut,color:e.shortcutString?"secondary":"default"}),!e.isDefault&&(0,f.jsx)($.Z,{onClick:e.onResetShortcut,tooltip:{id:"Reset to default"},size:"small",children:(0,f.jsx)(ne,{})})]})})]})},oe=function(e,t){return null==t?e:t},se=function(e){var t=c.useState(null),n=(0,s.Z)(t,2),r=n[0],i=n[1],a=function(e){var t={},n={};return Object.keys(ee.Z).filter((function(e){return!ee.Z[e].noShortcut})).forEach((function(r){var i=ee.Z[r].area;t[i]||(t[i]=[]),t[i].push(r);var a=e[r],o=q.Z[r]||"",s=oe(o,a);""!==s&&(n[s]=(n[s]||[]).concat(r))})),[t,n]}(e.userShortcutMap),o=(0,s.Z)(a,2),l=o[0],u=o[1],d=(0,V.$3)(e.userShortcutMap.OPEN_COMMAND_PALETTE||q.Z.OPEN_COMMAND_PALETTE);return(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(Y.Z,{kind:"info",identifier:"command-palette-shortcut",children:(0,f.jsx)(w.Trans,{id:"You can open the command palette by pressing {commandPaletteShortcut}.",values:{commandPaletteShortcut:d}})}),(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset all shortcuts to default"}),onClick:function(){y.ZP.showConfirmDialog(e.i18n._({id:"Are you sure you want to reset all shortcuts to their default values?"}),"question")&&e.onReset()},fullWidth:!0}),(0,f.jsx)(U.Z,{children:Object.keys(l).map((function(t){return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(N.Z,{size:"block-title",children:e.i18n._(ee.R[t])}),l[t].map((function(t){var n=e.userShortcutMap[t],r=q.Z[t]||"",a=oe(r,n),o=(0,V.$3)(a),s=u[a],l=s&&s.length>1;return(0,f.jsx)(ae,{i18n:e.i18n,shortcutString:o,commandName:t,isDefault:a===r,isClashing:l,onEditShortcut:function(){return i(t)},onResetShortcut:function(){return function(t){e.onEdit(t,q.Z[t])}(t)}},t)}))]},t)}))}),r&&(0,f.jsx)(W,{commandText:e.i18n._(ee.Z[r].displayText),onClose:function(){return i(null)},onSet:function(t){e.onEdit(r,t)}})]})},le=n(60542),ce=n.n(le),ue=n(63984),de=n.n(ue),pe=n(96591),fe=n(70619),he=ce().filter((function(e){return"en"!==e.languageCode&&("pseudo_LOCALE"!==e.languageCode||y.ZP.isDev())})).map((function(e){var t=de().find((function(t){return t.languageCode===e.languageCode})),n=((e.translationRatio||0)+(t?t.translationRatio:0))/2;return(0,l.Z)((0,l.Z)({},e),{},{translationRatio:n})})),ge=he.filter((function(e){return e.translationRatio>.3})),me=he.filter((function(e){return e.translationRatio<.3})),xe=function(e){var t=e.translationRatio||0,n=(100*e.translationRatio).toFixed(0),r=t>0,i=t<.3?"".concat(e.languageNativeName," (").concat(e.languageName," - ").concat(n,"% translated)"):"".concat(e.languageNativeName," (").concat(e.languageName,")");return(0,f.jsx)(P.Z,{value:e.languageCode,label:i,disabled:!r},e.languageCode)},ve=function(e){var t=e.onLanguageChanged,n=(0,c.useContext)(D.ZP),r=n.values,i=n.setLanguage;return(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Choose GDevelop language"})})}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsxs)(fe.Z,{value:r.language,onChange:function(e){i(e),t(e)},children:[(0,f.jsx)(P.Z,{value:"en",label:"English (default)"}),ge.map((function(e){return xe(e)})),me.map((function(e){return xe(e)}))]})})]}),(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"You can <0>help translate GDevelop into your language</0>.",components:[(0,f.jsx)(pe.Z,{href:"https://crowdin.com/project/gdevelop",onClick:function(){return y.ZP.openExternalURL("https://crowdin.com/project/gdevelop")}})]})})]})},be=n(6996),Ce=n(67412),je=n(38092),ye=n(61651),Ze=F()("electron"),ke=function(e){var t=e.i18n,n=e.onClose,i=e.onOpenQuickCustomizationDialog,a=(0,be.UQ)().isMobile,o=c.useState("preferences"),l=(0,s.Z)(o,2),u=l[0],d=l[1],p=c.useState(!1),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=c.useContext(D.ZP),v=x.values,b=x.setThemeName,C=x.setCodeEditorThemeName,j=x.setAutoDownloadUpdates,Z=x.showAllAlertMessages,k=x.showAllTutorialHints,A=x.showAllAnnouncements,R=x.showAllAskAiStandAloneForms,F=x.setAutoDisplayChangelog,U=x.setEventsSheetShowObjectThumbnails,H=x.setAutosaveOnPreview,z=x.setUseGDJSDevelopmentWatcher,W=x.setEventsSheetUseAssignmentOperators,G=x.setEventsSheetIndentScale,Y=x.getDefaultEditorMosaicNode,J=x.setDefaultEditorMosaicNode,X=x.setAutoOpenMostRecentProject,K=x.resetShortcutsToDefault,Q=x.setShortcutForCommand,$=x.setIsMenuBarHiddenInPreview,ee=x.setBackdropClickBehavior,te=x.setResourcesImporationBehavior,ne=x.setIsAlwaysOnTopInPreview,re=x.setEventsSheetCancelInlineParameter,ie=x.setShowExperimentalExtensions,ae=x.setShowInAppTutorialDeveloperMode,oe=x.setOpenDiagnosticReportAutomatically,le=x.setShowDeprecatedInstructionWarning,ce=x.setUse3DEditor,ue=x.setShowBasicProfilingCounters,de=x.setNewProjectsDefaultFolder,he=x.setUseShortcutToClosePreviewWindow,ge=x.setWatchProjectFolderFilesForLocalProjects,me=x.setDisplaySaveReminder,xe=x.setFetchPlayerTokenForPreviewAutomatically,ye=x.setPreviewCrashReportUploadLevel,ke=x.setTakeScreenshotOnPreview,we=x.setShowAiAskButtonInTitleBar,Te=x.setAutomaticallyUseCreditsForAiRequests,Se=x.setShowCreateSectionByDefault,Pe=x.setHasSeenInGameEditorWarning,Ie=c.useRef(v.use3DEditor);return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Preferences"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:function(){return n({languageDidChange:g})}},"close")],onRequestClose:function(){return n({languageDidChange:g})},open:!0,maxWidth:"sm",fixedContent:(0,f.jsx)(B.m,{value:u,onChange:d,options:[{value:"preferences",label:(0,f.jsx)(w.Trans,{id:"Preferences"})},{value:"shortcuts",label:(0,f.jsx)(w.Trans,{id:"Keyboard Shortcuts"})}].concat((0,r.Z)(Ze?[{value:"folders",label:(0,f.jsx)(w.Trans,{id:"Folders"})}]:[])),variant:a?"scrollable":void 0}),children:["preferences"===u&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Language"})}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(ve,{onLanguageChanged:function(){m(!0)}})}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Appearance"})}),(0,f.jsxs)(_.ak,{children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"UI Theme"})})}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(fe.Z,{value:v.themeName,onChange:function(e){return b(e)},children:Object.keys(L.n).map((function(e){return(0,f.jsx)(P.Z,{value:e,label:e},e)}))})})]}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Code editor Theme"})})}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(fe.Z,{value:v.codeEditorThemeName,onChange:function(e){return C(e)},children:O().map((function(e){return(0,f.jsx)(P.Z,{value:e.themeName,label:e.name},e.themeName)}))})})]}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"You can contribute and <0>create your own themes</0>.",components:[(0,f.jsx)(pe.Z,{href:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-themes.md",onClick:function(){return y.ZP.openExternalURL("https://github.com/4ian/GDevelop/blob/master/newIDE/README-themes.md")}})]})})})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Layouts"})}),(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset Scene Editor layout"}),onClick:function(){return J("scene-editor",null)},disabled:!Y("scene-editor")}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset Debugger layout"}),onClick:function(){return J("debugger",null)},disabled:!Y("debugger")}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset Resource Editor layout"}),onClick:function(){return J("resources-editor",null)},disabled:!Y("resources-editor")}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset Extension Editor layout"}),onClick:function(){return J("events-functions-extension-editor",null)},disabled:!Y("events-functions-extension-editor")})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Dialogs"})}),(0,f.jsxs)(_.ak,{children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Dialog backdrop click behavior"})})}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsxs)(fe.Z,{value:v.backdropClickBehavior,onChange:function(e){return ee(e)},children:[(0,f.jsx)(P.Z,{value:"cancel",label:{id:"Cancel changes"}}),(0,f.jsx)(P.Z,{value:"apply",label:{id:"Apply changes"}}),(0,f.jsx)(P.Z,{value:"nothing",label:{id:"Do nothing"}})]})})]}),!!Ze&&(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Importing resources outside from the project folder"})})}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsxs)(fe.Z,{value:v.resourcesImporationBehavior,onChange:function(e){return te(e)},children:[(0,f.jsx)(P.Z,{value:"import",label:{id:"Copy them into the project folder"}}),(0,f.jsx)(P.Z,{value:"relative",label:{id:"Keep their original location"}}),(0,f.jsx)(P.Z,{value:"ask",label:{id:"Ask every time"}})]})})]})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Updates"})}),(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:j,checked:v.autoDownloadUpdates,label:t._({id:"Auto download and install updates (recommended)"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:F,checked:v.autoDisplayChangelog,label:t._({id:"Display What's New when a new version is launched (recommended)"})})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Events Sheet"})}),(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:U,checked:v.eventsSheetShowObjectThumbnails,label:t._({id:"Display object thumbnails in Events Sheets"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:W,checked:v.eventsSheetUseAssignmentOperators,label:t._({id:"Display assignment operators in Events Sheets"})}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Indent Scale in Events Sheet"})})}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsxs)(fe.Z,{value:v.eventsSheetIndentScale.toString(),onChange:function(e){return G(parseInt(e,10))},children:[(0,f.jsx)(P.Z,{value:"1",label:{id:"100% (Default)"}}),(0,f.jsx)(P.Z,{value:"2",label:{id:"200%"}}),(0,f.jsx)(P.Z,{value:"3",label:{id:"300%"}}),(0,f.jsx)(P.Z,{value:"4",label:{id:"400%"}}),(0,f.jsx)(P.Z,{value:"5",label:{id:"500%"}}),(0,f.jsx)(P.Z,{value:"6",label:{id:"600%"}}),(0,f.jsx)(P.Z,{value:"7",label:{id:"700%"}}),(0,f.jsx)(P.Z,{value:"8",label:{id:"800%"}})]})})]}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Escape key behavior when editing an parameter inline"})})}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsxs)(fe.Z,{value:v.eventsSheetCancelInlineParameter,onChange:function(e){return re(e)},children:[(0,f.jsx)(P.Z,{value:"cancel",label:{id:"Cancel changes"}}),(0,f.jsx)(P.Z,{value:"apply",label:{id:"Apply changes"}})]})})]})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Embedded help and tutorials"})}),(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset hidden embedded explanations"}),onClick:function(){return Z()},disabled:!Object.keys(v.hiddenAlertMessages).length}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset hidden embedded tutorials"}),onClick:function(){return k()},disabled:!Object.keys(v.hiddenTutorialHints).length}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset hidden announcements"}),onClick:function(){return A()},disabled:!Object.keys(v.hiddenAnnouncements).length})]}),(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Advanced"})}),(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"At launch"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:Se,checked:v.showCreateSectionByDefault,label:t._({id:'Show the "Create" section by default when opening GDevelop'})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:X,checked:v.autoOpenMostRecentProject,label:t._({id:"Automatically re-open the project edited during last session"})}),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Previews"})}),(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:H,checked:v.autosaveOnPreview,label:t._({id:"Auto-save project on preview"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:xe,checked:v.fetchPlayerTokenForPreviewAutomatically,label:t._({id:"Automatically log in as a player in preview"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:oe,checked:v.openDiagnosticReportAutomatically,label:t._({id:"Automatically open the diagnostic report at preview"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:function(e){return ye(e?"exclude-javascript-code-events":"none")},checked:"none"!==v.previewCrashReportUploadLevel,label:t._({id:"Send crash reports during previews to GDevelop"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:ke,checked:v.takeScreenshotOnPreview,label:t._({id:"Automatically take a screenshot in game previews"})}),Ze&&(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:$,checked:v.isMenuBarHiddenInPreview,label:t._({id:"Hide the menu bar in the preview window"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:ne,checked:v.isAlwaysOnTopInPreview,label:t._({id:"Always display the preview window on top of the editor"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:he,checked:v.useShortcutToClosePreviewWindow,label:t._({id:'Enable "Close project" shortcut ({0}) to close preview window',values:{0:(0,Ce.Q)((0,V.YK)(v.userShortcutMap.CLOSE_PROJECT||q.Z.CLOSE_PROJECT))}})})]})})]}),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Scene editor"})}),(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:ue,checked:v.showBasicProfilingCounters,label:t._({id:"Display profiling information in scene editor"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:ce,checked:v.use3DEditor,label:t._({id:"Show objects in 3D in the scene editor"})}),Ie.current!==v.use3DEditor&&(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"For the 3D change to take effect, close and reopen all currently opened scenes."})})]}),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Other"})}),(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Reset hidden Ask AI text inputs"}),onClick:function(){return R()},disabled:!Object.keys(v.hiddenAskAiStandAloneForms).length}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:we,checked:v.showAiAskButtonInTitleBar,label:t._({id:'Show "Ask AI" button in the title bar'})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:Te,checked:v.automaticallyUseCreditsForAiRequests,label:t._({id:"Automatically use GDevelop credits for AI requests when run out of AI credits"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:function(e){return me({activated:e})},checked:v.displaySaveReminder.activated,label:t._({id:"Display save reminder after significant changes in project"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:ie,checked:v.showExperimentalExtensions,label:t._({id:"Show experimental extensions in the list of extensions"})}),(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:le,checked:v.showDeprecatedInstructionWarning,label:t._({id:"Show a warning on deprecated actions and conditions"})}),!!Ze&&(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:function(e){return ge(e)},checked:v.watchProjectFolderFilesForLocalProjects,label:t._({id:"Watch the project folder for file changes in order to refresh the resources used in the editor (images, 3D models, fonts, etc.)"})})]})]})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Contributor options"})}),(0,f.jsx)(_.ak,{children:(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:ae,checked:v.showInAppTutorialDeveloperMode,label:t._({id:"Show button to load guided lesson from file and test it"})})}),y.ZP.isDev()&&(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Developer options"})}),(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(I.K,{labelColor:"primary",hideTooltip:!0,onCheck:z,checked:v.useGDJSDevelopmentWatcher,label:t._({id:"Watch changes in game engine (GDJS) sources and auto import them (dev only)"})}),(0,f.jsx)(T.Z,{fullWidth:!0,onClick:i,label:(0,f.jsx)(w.Trans,{id:"Open quick customization"})}),(0,f.jsx)(T.Z,{fullWidth:!0,label:(0,f.jsx)(w.Trans,{id:"Show again in-game editor warning"}),onClick:function(){return Pe(!1)},disabled:!v.hasSeenInGameEditorWarning})]})]})})]}),"shortcuts"===u&&(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(se,{i18n:t,userShortcutMap:v.userShortcutMap,onEdit:Q,onReset:K})})}),Ze&&"folders"===u&&(0,f.jsx)(_.ak,{noMargin:!0,children:(0,f.jsx)(S.Z,{fullWidth:!0,value:v.newProjectsDefaultFolder,onChange:de,type:"default-workspace"})})]})},we=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Preferences"}),scope:"preferences",onClose:function(){return e.onClose({languageDidChange:!1})},children:(0,f.jsx)(ke,(0,l.Z)({},e))})},Te=n(15169),Se=function(e){return"not-installed"===e?(0,f.jsx)(w.Trans,{id:"Not installed as an app. No updates available."}):"installed"===e?(0,f.jsx)(w.Trans,{id:"Installed as an app. No updates available."}):"update-installing"===e?(0,f.jsx)(w.Trans,{id:"An update is installing."}):"update-ready"===e?(0,f.jsx)(w.Trans,{id:"An update is ready to be installed. Close ALL GDevelop apps or tabs in your browser, then open it again."}):(0,f.jsx)(w.Trans,{id:"Unknown status."})},Pe=n(14446),Ie=n.n(Pe),Ee=n(45911),Me=n(90349),Le=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie().get("".concat(Ee.bw.baseUrl,"/release"),{params:{last:4}});case 2:return t=e.sent,e.abrupt("return",(0,Me.TC)({data:t.data,endpointName:"/release of Release API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=n(86578),Oe=n(78081),Re=n(32832),Fe=function(e){var t=e.releases,n=e.error,r=e.currentReleaseName,i=function(){return y.ZP.openExternalURL("https://github.com/4ian/GDevelop/releases")};if(n)return(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(je.Z,{kind:"warning",children:(0,f.jsx)(w.Trans,{id:"Please double check online the changes to make sure that you are aware of anything new in this version that would require you to adapt your project."})})}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Unable to load the information about the latest GDevelop releases. Verify your internet connection or retry later."})})}),(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"See the releases notes online"}),onClick:i})})]});if(!t)return(0,f.jsx)(Oe.Z,{});var a=function(e,t){return e.find((function(e){return e.name===t}))}(t,r),o=!!a&&-1!==(a.description||"").toLowerCase().indexOf("breaking change");return(0,f.jsxs)(M.sg,{noMargin:!0,children:[o&&(0,f.jsx)(je.Z,{kind:"warning",children:"This version of GDevelop has a breaking change. Please make sure to read the changes below to understand if any change or adaptation must be made to your project."}),t.map((function(e){return e.name?(0,f.jsx)(Re.r,{source:"# Version "+e.name+"\n---\n"+(e.description||"Changes and new features description will be available soon."),isStandaloneText:!0},e.name):null})),(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See all the release notes"}),onClick:i})})]})},De=n(52578),Ne=function(e){var t=e.onUpdated,n=c.useState(null),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=c.useState(null),l=(0,s.Z)(o,2),u=l[0],d=l[1];return c.useEffect((function(){Le().then((function(e){d(null),a(e),t&&t()})).catch((function(e){d(e),t&&t()}))}),[t]),(0,f.jsx)(Fe,{releases:i,error:u,currentReleaseName:(0,De.r1)()})},_e=F()("electron"),Be={logo:{width:"100%",aspectRatio:"16 / 5",objectFit:"cover"}},Ue=[{name:"Cl\xe9ment Pasteau",description:"Core development team",link:"https://github.com/ClementPasteau"},{name:"AlexandreSi",description:"Core development team",link:"https://github.com/AlexandreSi"},{name:"Victor Levasseur",description:"Numerous code contributions to GDevelop and community moderation"},{name:"Lizard-13",description:"Numerous code contributions to GDevelop and community moderation"},{name:"Christina 'Castpixel' Antoinette Neofotistou",description:"Art and assets for the 8-bit Space Shooter example.",link:"https://www.patreon.com/castpixel"},{name:"ale26reg",description:"Contributions to GDevelop"},{name:"dos1",description:"Contributions to GDevelop"},{name:"Aur\xe9lien Vivet",description:"Numerous code contributions to GDevelop and community management",link:"https://www.witly.fr"},{name:"Todor Imreorov",description:"Numerous code contributions to GDevelop"},{name:"brylie",description:"Contributions to GDevelop"},{name:"Nnarol",description:"Contributions to GDevelop"},{name:"wild-master",description:"Contributions to GDevelop"},{name:"RandomShaper",description:"Contributions to GDevelop"},{name:"RyanNerd",description:"Contributions to GDevelop"},{name:"greater",description:"Contributions to GDevelop"},{name:"triptych",description:"Contributions to GDevelop"},{name:"Wend1go",description:"Contributions to GDevelop, Tutorials, Examples"},{name:"mattiascibien",description:"Contributions to GDevelop"},{name:"araujo921",description:"Contributions to GDevelop"},{name:"ronnystandtke",description:"Contributions to GDevelop"},{name:"Thomas Flecy",description:"Contributions to GDevelop (original sound object extension)"},{name:"Arthur Pacaud (arthuro555)",description:"Numerous code contributions to GDevelop and community moderation",link:"https://forum.gdevelop.io/u/arthuro555/summary"},{name:"The Gem Dev",description:"Code contributions to GDevelop and tutorials on Youtube",link:"https://www.youtube.com/channel/UCsZ4Ue8c94YLJDbGRafCI5Q"},{name:"D8H",description:"Numerous code contributions to GDevelop",link:"https://github.com/D8H"},{name:"Harsimran Singh Virk",description:"Numerous code contributions to GDevelop",link:"https://github.com/HarsimranVirk"},{name:"Nilay Majorwar",description:"Numerous code contributions to GDevelop",link:"https://github.com/nilaymaj"},{name:"ddabrahim",description:"Examples for GDevelop",link:"https://gametemplates.itch.io/"},{name:"Gametemplates",description:"Examples bundled with GDevelop",link:"https://gametemplates.itch.io/"},{name:"Mats",description:"Tutorials, Examples"},{name:"erdo",description:"Tutorials, Examples"},{name:"Jubileuksen3",description:"Tutorials, Examples"},{name:"LucaTexas",description:"Tutorials, Examples"},{name:"Kink",description:"Forum moderator, tutorials, Examples"},{name:"RicoTrooper",description:"Tutorials"},{name:"kalel",description:"Tutorials"},{name:"mtarzaim",description:"Tutorials"},{name:"Darkhog",description:"Examples"},{name:"Ricardo Graca",description:"Tutorials, Examples"},{name:"Diego Schiavon",description:"Indiegogo Ubuntu contributor"},{name:"conceptgame",description:"Indiegogo super contributor"},{name:"Jose David Cuartas Correa",description:"Author of Digitopolis (a book on how to make games with GDevelop 4)"},{name:"Fran\xe7ois Dumortier",description:"GDevelop logo design",link:"http://www.fdumortier.com"},{name:"Constantine Shvetsov",description:"Design of all the awesome icons"},{name:"MillionthVector",description:"Assets of various examples"},{name:"Tristan Rhodes (Victris Games)",description:"High quality extensions for GDevelop",link:"https://www.youtube.com/channel/UClbq1M-D83t_bYhfa1mfyEQ"},{name:"Entropy",description:"High quality extensions and art packs for GDevelop",link:"https://github.com/Entr0py404"},{name:"FlokiTV",description:"High quality extensions for GDevelop",link:"https://github.com/FlokiTV"},{name:"Silver-Streak",description:"Examples, bug reports, testing of new features, providing community support to users, community moderation",link:"https://github.com/Silver-Streak"},{name:"Jurfix",description:"Discord moderation",link:"https://github.com/Jurfix"},{name:"Wishforge Games",description:"Making high quality tutorials",link:"https://www.wishforge.games/"},{name:"Sleeper Games",description:"Making the game feel starter",link:"https://twitter.com/Sleeper_Games"},{name:"VegeTato",description:"Extensions for GDevelop",link:"https://twitter.com/VegeTato_"},{name:"Leo Red",description:"Reviewing examples submissions",link:"https://github.com/Midhil457"},{name:"add_",description:"Extensions for GDevelop",link:"https://github.com/add00"},{name:"HelperWesley",description:"Examples and youtube content that is relevant to GDevelop",link:"https://www.youtube.com/channel/UC8RsU74-hU1pfNKHNMfiFfw"},{name:"UlisesFreitas",description:"Numerous examples and making external services that integrate with GDevelop games",link:"https://ulisesfreitas.itch.io/"},{name:"IttaloXD",description:"The GDevelop embassador in Brazil",link:"https://twitter.com/ittaloxd"},{name:"PANDAKO",description:"Translations in Japanese, extensions and blog",link:"https://gdevelop-jp.blogspot.com"}],Ve=function(e){var t,n=e.onClose,r=e.updateStatus,i=c.useCallback((function(){y.ZP.openExternalURL("https://gdevelop.io/page/contribute/")}),[]),l=c.useCallback((function(e){e&&y.ZP.openExternalURL(e)}),[]),u=c.useState("about"),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useContext(D.ZP).checkUpdates,m="checking-for-update"===(t=r.status)?(0,f.jsx)(w.Trans,{id:"Checking for update..."}):"update-available"===t?(0,f.jsx)(w.Trans,{id:"A new update is available!"}):"update-not-available"===t?(0,f.jsx)(w.Trans,{id:"No update available. You're using the latest version!"}):"error"===t?(0,f.jsx)(w.Trans,{id:"Error while checking update"}):"download-progress"===t?(0,f.jsx)(w.Trans,{id:"A new update is being downloaded..."}):"update-downloaded"===t?(0,f.jsx)(w.Trans,{id:"A new update will be installed after you quit and relaunch GDevelop"}):"",x=function(e){return"update-available"===e?(0,f.jsx)(w.Trans,{id:"Update GDevelop to latest version"}):(0,f.jsx)(w.Trans,{id:"Check again for new updates"})}(r.status),v=function(){var e=c.useState("unknown"),t=(0,s.Z)(e,2),n=t[0],r=t[1];return c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var t,n,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.serviceWorker){e.next=8;break}return t=navigator,n=t.serviceWorker,i=!!n.controller,r(i?"installed":"not-installed"),e.next=6,n.getRegistration();case 6:(o=e.sent)&&(s=o.installing)&&("installed"===s.state?r("update-ready"):r("update-installing"));case 8:case"end":return e.stop()}}),e)})))()}),[]),n}();return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"About GDevelop"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"GDevelop Website"}),primary:!1,onClick:function(){return y.ZP.openExternalURL("https://gdevelop.io")}},"website"),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],secondaryActions:"changelog"===p?[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See all release notes"}),primary:!1,onClick:function(){return y.ZP.openExternalURL("https://github.com/4ian/GDevelop/releases")}},"see-all")]:void 0,onRequestClose:n,open:!0,maxWidth:"sm",fixedContent:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)("img",{src:"res/GD-logo.png",alt:"GDevelop logo",style:Be.logo}),(0,f.jsx)(B.m,{value:p,onChange:h,options:[{value:"about",label:(0,f.jsx)(w.Trans,{id:"About GDevelop"})},{value:"changelog",label:(0,f.jsx)(w.Trans,{id:"What's new?"})},{value:"contributors",label:(0,f.jsx)(w.Trans,{id:"Contributors"})}]})]}),children:["about"===p&&(0,f.jsx)(c.Fragment,{children:(0,f.jsx)(M.x1,{children:(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"GDevelop is a full-featured, open-source game engine. Build and publish games for any mobile, desktop or web game store. It's super fast, easy to learn and powered by a community making it better every day."})}),(0,f.jsxs)(N.Z,{allowSelection:!0,children:[(0,f.jsx)(w.Trans,{id:"This version of GDevelop is:"})," ",(0,De.r1)()," ","(editor full version: ",(0,De.Us)(),", core version:"," ",(0,De.Hf)(),")"]}),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Updates"})}),_e&&m?(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{children:m}),(0,f.jsx)(T.Z,{label:x,onClick:function(){return g(function(e){return"update-available"===e}(r.status))}})]}):(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"No information about available updates."})}),!_e&&(0,f.jsx)(N.Z,{children:Se(v)})]})})}),"changelog"===p&&(0,f.jsx)(M.sg,{children:(0,f.jsx)(Ne,{})}),"contributors"===p&&(0,f.jsxs)(c.Fragment,{children:[(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:'GDevelop was created by Florian "4ian" Rival.'})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Contributors, in no particular order:"})})]}),(0,f.jsx)(Te.aV,{children:Ue.map((function(e){return(0,f.jsx)(Te.HC,{primaryText:e.name,secondaryText:e.description,secondaryTextLines:e.description.length<30?1:2,displayLinkButton:!!e.link,onOpenLink:function(){return l(e.link||"")}},e.name)}))}),(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Thanks to all users of GDevelop! There must be missing tons of people, please send your name if you've contributed and you're not listed."})}),(0,f.jsx)(M.x1,{alignItems:"center",justifyContent:"center",children:(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Contribute to GDevelop"}),onClick:i})})]})]})]})},He=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"About dialog"}),scope:"about",onClose:e.onClose,children:(0,f.jsx)(Ve,(0,l.Z)({},e))})},ze=n(15671),We=n(43144),Ge=n(12949),Ye=n(65056),qe=n.g.gd,Je=function(e){var t=e.serializableObject,n=e.useProjectToUnserialize,r=e.onCancel,i=e.resetThenClearPersistentUuid,s=c.useRef(null),l=c.useRef(0),u=(0,Ye.Z)().showConfirmation,d=c.useContext(D.ZP).values.backdropClickBehavior;c.useEffect((function(){return s.current&&(s.current.delete(),s.current=null),i&&t.resetPersistentUuid(),s.current=new qe.SerializerElement,t.serializeTo(s.current),function(){s.current&&(s.current.delete(),s.current=null)}}),[t,i]);var p=c.useCallback((function(){if(!s.current)throw new Error("serializedElementRef should always be non null.");return s.current}),[]),f=c.useCallback((function(){l.current++}),[]),h=c.useCallback((function(){return l.current>0}),[]);return{onCancelChanges:c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.current){e.next=3;break}return e.abrupt("return");case 3:if(c=!1,!(!("cancel"===d)&&l.current>=1)){e.next=13;break}return e.next=9,u({title:{id:"Cancel your changes?"},message:{id:"All your changes will be lost. Are you sure you want to cancel?"},confirmButtonLabel:{id:"Cancel"},dismissButtonLabel:{id:"Continue editing"}});case 9:e.sent&&(c=!0),e.next=14;break;case 13:c=!0;case 14:if(c){e.next=16;break}return e.abrupt("return");case 16:n?t.unserializeFrom(n,o):t.unserializeFrom(o),i&&t.clearPersistentUuid(),r();case 19:case"end":return e.stop()}}),e)}))),[t,n,r,u,d,i]),notifyOfChange:f,hasUnsavedChanges:h,getOriginalContentSerializedElement:p}},Xe=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.57046 3.408C3.71787 3.3169 3.90194 3.30862 4.05694 3.38612L12.3903 7.55278C12.5597 7.63748 12.6667 7.81061 12.6667 8C12.6667 8.18938 12.5597 8.36251 12.3903 8.44721L4.05694 12.6139C3.90194 12.6914 3.71787 12.6831 3.57046 12.592C3.42305 12.5009 3.33333 12.34 3.33333 12.1667V3.83333C3.33333 3.66004 3.42305 3.49911 3.57046 3.408ZM4.33333 4.64235V11.3576L11.0486 8L4.33333 4.64235Z",fill:"currentColor"})}))})),Ke=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.87161 2.83221C8.05634 3.03746 8.0397 3.35361 7.83444 3.53834L6.58072 4.66669L7.83444 5.79504C8.0397 5.97977 8.05634 6.29592 7.87161 6.50117C7.68688 6.70643 7.37073 6.72307 7.16548 6.53834L5.49881 5.03834C5.39345 4.94352 5.33329 4.80843 5.33329 4.66669C5.33329 4.52495 5.39345 4.38987 5.49881 4.29504L7.16548 2.79504C7.37073 2.61031 7.68688 2.62695 7.87161 2.83221Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99996 4.66669C5.99996 4.39055 6.22382 4.16669 6.49996 4.16669H8.83329C11.3186 4.16669 13.3333 6.18141 13.3333 8.66669V8.83336C13.3333 9.1095 13.1094 9.33336 12.8333 9.33336C12.5572 9.33336 12.3333 9.1095 12.3333 8.83336V8.66669C12.3333 6.73369 10.7663 5.16669 8.83329 5.16669H6.49996C6.22382 5.16669 5.99996 4.94283 5.99996 4.66669Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.12831 9.49888C8.31304 9.29362 8.62919 9.27698 8.83444 9.46171L10.5011 10.9617C10.6065 11.0565 10.6666 11.1916 10.6666 11.3334C10.6666 11.4751 10.6065 11.6102 10.5011 11.705L8.83444 13.205C8.62919 13.3897 8.31304 13.3731 8.12831 13.1678C7.94358 12.9626 7.96022 12.6464 8.16548 12.4617L9.4192 11.3334L8.16548 10.205C7.96022 10.0203 7.94358 9.70413 8.12831 9.49888Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16663 6.66669C3.44277 6.66669 3.66663 6.89055 3.66663 7.16669V7.33336C3.66663 9.26635 5.23363 10.8334 7.16663 10.8334H9.49996C9.7761 10.8334 9.99996 11.0572 9.99996 11.3334C9.99996 11.6095 9.7761 11.8334 9.49996 11.8334H7.16663C4.68134 11.8334 2.66663 9.81863 2.66663 7.33336V7.16669C2.66663 6.89055 2.89048 6.66669 3.16663 6.66669Z",fill:"currentColor"})]}))})),Qe=n(26807);function $e(e){var t=e.launchProjectDataOnlyPreview,n=e.launchProjectCodeAndDataPreview,r=e.hasPreviewsRunning,i=e.isCodeGenerationRequired,a=r?(0,f.jsx)(Ke,{}):(0,f.jsx)(Xe,{}),o=r?(0,f.jsx)(w.Trans,{id:"Apply changes to preview"}):(0,f.jsx)(w.Trans,{id:"Run a preview"}),s=i?n:t;return(0,f.jsx)(Qe.Z,{label:o,onClick:s,leftIcon:a})}var et=n(3429),tt=n(50301),nt=n(82723),rt=n(40041),it=n(1491),at=n(37571),ot=n(84900),st=n(25638),lt=n(3798),ct=n(62572),ut=n(43228),dt=n(65752),pt=n(68196),ft=n(2632),ht=n(86268),gt=n(38501),mt=n(18455),xt=n(79431),vt=n(26926),bt=n(36062),Ct=n(41006),jt=function(e,t){var n=t.historyMaxSize;return{previousActions:[],currentValue:(0,Ct.XH)(e),futureActions:[],maxSize:n}},yt=function(e){return!!e.futureActions.length},Zt=function(e){return!!e.previousActions.length},kt=function(e,t,n,i){var a=(0,Ct.XH)(t),o=[].concat((0,r.Z)(e.previousActions),[{type:n,valueBeforeChange:e.currentValue,changeContext:i}]);return o.length>e.maxSize&&o.splice(0,o.length-e.maxSize),(0,l.Z)((0,l.Z)({},e),{},{currentValue:a,previousActions:o,futureActions:[]})},wt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e.previousActions.length)return e;var i=e.previousActions[e.previousActions.length-1],a=i.valueBeforeChange;(0,Ct.qx)(t,a,"unserializeFrom",n);var o=e.previousActions.slice(0,-1),s=[].concat((0,r.Z)(e.futureActions),[{type:i.type,changeContext:i.changeContext,valueAfterChange:e.currentValue}]);return(0,l.Z)((0,l.Z)({},e),{},{previousActions:o,futureActions:s,currentValue:a})},Tt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e.futureActions.length)return e;var i=e.futureActions[e.futureActions.length-1],a=i.valueAfterChange;(0,Ct.qx)(t,a,"unserializeFrom",n);var o=[].concat((0,r.Z)(e.previousActions),[{type:i.type,changeContext:i.changeContext,valueBeforeChange:e.currentValue}]),s=e.futureActions.slice(0,-1);return(0,l.Z)((0,l.Z)({},e),{},{previousActions:o,futureActions:s,currentValue:a})},St=n.g.gd,Pt=function(e,t,n,r,i){var a=(0,xt.Z)(t,(function(t){return e.has(t)||!!i&&i.has(t)}),n?"CopyOf":void 0),o=new St.Variable;n&&((0,Ct.qx)(o,n),o.resetPersistentUuid());var s=e.insert(a,o,r);return o.delete(),{name:a,variable:s}},It=function(e){return(0,mt.mapFor)(0,e.count(),(function(t){var n=e.getAt(t);return Et(n)&&n.getChildrenCount()>0})).some(Boolean)},Et=function(e){var t=e.getType();return t!==St.Variable.MixedTypes&&!St.Variable.isPrimitive(t)},Mt=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},Lt=n.g.gd,At="$!",Ot="$.$",Rt=function(e){return e[e.length-1]?e[e.length-1].variable:null},Ft=function(e){return e[e.length-1]?e[e.length-1].nodeId:null},Dt=function(e,t){return t.map((function(e){return e.variable})).includes(e)},Nt=function(e){var t=e.indexOf("[");return(t<0?e:e.substring(0,t)).replace(/\./g,"$$.$$")},_t=function(e,t){for(var n,r=e.split(Ot),i=null,a=null,o=null,s=[],l=-1;l<r.length-1;){if(o=r[l+=1],0===l&&o.startsWith(At)&&(o=(n=o).slice(2,n.length)),i)if(i.getType()===Lt.Variable.Array){var c=parseInt(o,10);if(c>=i.getChildrenCount())return{variable:null,lineage:s,depth:l,name:null};a=i.getAtIndex(c)}else{if(!i.hasChild(o))return{variable:null,lineage:s,depth:l,name:null};a=i.getChild(o)}else a=t.has(o)?t.get(o):null;if(!a)break;l<r.length-1&&s.push({nodeId:r.slice(0,l+1).join(Ot),name:o,variable:a}),i=a}return{variable:a,name:o,depth:l,lineage:s}},Bt=function(e,t){var n=_t(e,t),r=n.lineage.map((function(e){return e.name}));return r.push(n.name),r.join(".")},Ut=function(e,t,n){var i=(0,r.Z)(e),a=i.indexOf(t),o=i.map((function(e,n){return e.startsWith("".concat(t).concat(Ot))?n:null})),s=t.split(Ot),l=s[s.length-1];return[a].concat((0,r.Z)(o)).forEach((function(e){if(!(null===e||e<0)){var t=i[e].split(Ot);t[t.indexOf(l)]=n,i.splice(e,1,t.join(Ot))}})),i},Vt=function(e,t){var n=t.lineage,r=Rt(n),i=e.lineage,a=Rt(i);if(a&&r){if(r.getType()===Lt.Variable.Structure&&a.getType()===Lt.Variable.Structure&&a!==r)return"FromStructureToAnotherStructure";if(r.getType()===Lt.Variable.Structure&&a===r)return"InsideSameStructure";if(r.getType()===Lt.Variable.Array&&a.getType()===Lt.Variable.Array&&a!==r)return"FromArrayToAnotherArray";if(r.getType()===Lt.Variable.Array&&a===r)return"InsideSameArray";if(r.getType()===Lt.Variable.Array&&a.getType()===Lt.Variable.Structure)return"FromStructureToArray";if(r.getType()===Lt.Variable.Structure&&a.getType()===Lt.Variable.Array)return"FromArrayToStructure"}return a||r?!a&&r&&r.getType()===Lt.Variable.Structure?"TopLevelToStructure":!a&&r&&r.getType()===Lt.Variable.Array?"TopLevelToArray":a&&!r&&a.getType()===Lt.Variable.Structure?"StructureToTopLevel":a&&!r&&a.getType()===Lt.Variable.Array?"ArrayToTopLevel":null:"InsideTopLevel"},Ht=function e(t){var n,i,a=t.variable,o=t.variableName,s=t.nodeId,l=t.searchText,c=t.acc;switch(a.getType()){case Lt.Variable.Boolean:return Mt(o).includes(l)?[s]:[];case Lt.Variable.String:return Mt(o).includes(l)||Mt(a.getString()).includes(l)?[s]:[];case Lt.Variable.Number:return Mt(o).includes(l)||a.getValue().toString().includes(l)?[s]:[];case Lt.Variable.Array:return n=(0,r.Z)(c),Mt(o).includes(l)&&n.push(s),i=(0,mt.mapFor)(0,a.getChildrenCount(),(function(t){var r=a.getAtIndex(t);return e({variable:r,variableName:"",nodeId:"".concat(s).concat(Ot).concat(t),searchText:l,acc:n})})).flat(),[].concat((0,r.Z)(n),(0,r.Z)(i));case Lt.Variable.Structure:return n=(0,r.Z)(c),Mt(o).includes(l)&&n.push(s),i=a.getAllChildrenNames().toJSArray().map((function(t){var n=a.getChild(t);return Array.from(new Set(e({variable:n,variableName:t,nodeId:"".concat(s).concat(Ot).concat(t),searchText:l,acc:c})))})).flat(),[].concat((0,r.Z)(n),(0,r.Z)(i));default:return[]}},zt=function(e,t,n){return(0,mt.mapFor)(0,e.count(),(function(r){var i=e.getAt(r),a=e.getNameAt(r);return Ht({variable:i,variableName:a,nodeId:n?"".concat(n).concat(a):a,searchText:t,acc:[]})})).flat()},Wt=n(82811),Gt="Variables",Yt=n(65512),qt=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{d:"M9.49006 3.53013C9.2893 3.34053 9.28026 3.02407 9.46987 2.82332C9.65947 2.62256 9.97593 2.61351 10.1767 2.80312L13.1767 5.63645C13.2767 5.73091 13.3334 5.8624 13.3334 5.99996C13.3334 6.13753 13.2767 6.26901 13.1767 6.36347L10.1767 9.1968C9.97593 9.38641 9.65947 9.37737 9.46987 9.17661C9.28026 8.97585 9.2893 8.65939 9.49006 8.46979L11.5758 6.49996H5.83337C4.63678 6.49996 3.66671 7.47004 3.66671 8.66663V12.8333C3.66671 13.1094 3.44285 13.3333 3.16671 13.3333C2.89056 13.3333 2.66671 13.1094 2.66671 12.8333V8.66663C2.66671 6.91775 4.0845 5.49996 5.83337 5.49996H11.5758L9.49006 3.53013Z",fill:"currentColor"})}))})),Jt=n(53162),Xt=n(90264),Kt=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.83934 3.20227C7.13303 2.85572 7.58535 2.61108 8.22224 2.61108C8.85912 2.61108 9.31145 2.85572 9.60513 3.20227C9.814 3.44874 9.92384 3.72405 9.98253 3.94442H10.8888C11.2572 3.94442 11.6105 4.09075 11.8709 4.35121C12.1314 4.61168 12.2777 4.96495 12.2777 5.33331V11.5555C12.2777 11.9239 12.1314 12.2772 11.8709 12.5376C11.6105 12.7981 11.2572 12.9444 10.8888 12.9444H5.55552C5.18716 12.9444 4.83389 12.7981 4.57342 12.5376C4.31295 12.2772 4.16663 11.9239 4.16663 11.5555V5.33331C4.16663 4.96495 4.31295 4.61168 4.57342 4.35121C4.83389 4.09075 5.18716 3.94442 5.55552 3.94442H6.46194C6.52063 3.72405 6.63047 3.44874 6.83934 3.20227ZM7.60224 3.84879C7.48743 3.98427 7.42994 4.16387 7.40464 4.30955L7.40441 4.31087C7.36227 4.54963 7.19612 4.7869 6.94446 4.8904V5.27775H9.50001V4.8904C9.24836 4.7869 9.0822 4.54963 9.04007 4.31087L9.03983 4.30955C9.01453 4.16387 8.95705 3.98427 8.84223 3.84879C8.74458 3.73356 8.57469 3.61108 8.22224 3.61108C7.86978 3.61108 7.69989 3.73356 7.60224 3.84879ZM10.8888 4.94442C10.992 4.94442 11.0909 4.98539 11.1638 5.05832C11.2368 5.13125 11.2777 5.23017 11.2777 5.33331V11.5555C11.2777 11.6587 11.2368 11.7576 11.1638 11.8305C11.0909 11.9034 10.992 11.9444 10.8888 11.9444H5.55552C5.45238 11.9444 5.35346 11.9034 5.28053 11.8305C5.2076 11.7576 5.16663 11.6587 5.16663 11.5555V5.33331C5.16663 5.23017 5.2076 5.13125 5.28053 5.05832C5.35346 4.98539 5.45238 4.94442 5.55552 4.94442H5.94446V5.51108C5.94446 5.71442 6.02523 5.90942 6.16901 6.0532C6.31279 6.19698 6.50779 6.27775 6.71112 6.27775H9.73335C9.93668 6.27775 10.1317 6.19698 10.2755 6.0532C10.4192 5.90942 10.5 5.71442 10.5 5.51108V4.94442H10.8888Z",fill:"currentColor"})}))})),Qt=n(4942),$t=n(82954),en=n.n($t),tn="CompactSearchBar_container__rJSVK",nn="CompactSearchBar_compactSearchBar__xARx+",rn="CompactSearchBar_disabled__jg5+L",an="CompactSearchBar_errored__8WrTg",on="CompactSearchBar_searchIconContainer__6tpDm",sn="CompactSearchBar_searchIcon__wq4MN",ln=n(28842),cn=n(72662),un=c.forwardRef((function(e,t){var n=e.value,r=e.onChange,i=e.id,a=e.disabled,o=e.errored,s=e.placeholder,l=c.useRef(i||(0,ln._)());return(0,f.jsx)(w.I18n,{children:function(e){var t,i=e.i18n;return(0,f.jsx)("div",{className:en()((t={},(0,Qt.Z)(t,tn,!0),(0,Qt.Z)(t,rn,a),(0,Qt.Z)(t,an,o),t)),children:(0,f.jsxs)("div",{className:en()((0,Qt.Z)({},nn,!0)),children:[(0,f.jsx)("div",{className:on,children:(0,f.jsx)(cn.Z,{className:sn})}),(0,f.jsx)("input",{id:l.current,type:"text",disabled:a,value:n,onChange:function(e){return r(e.currentTarget.value)},placeholder:i._(s||{id:"Search"})})]})})}})})),dn=un,pn=c.memo((function(e){var t=[{key:"copy",Icon:Xt.Z,label:(0,f.jsx)(w.Trans,{id:"Copy"}),tooltip:{id:"Copy"},onClick:e.onCopy,disabled:!e.canCopy,display:!0},{key:"paste",Icon:Kt,label:(0,f.jsx)(w.Trans,{id:"Paste"}),tooltip:{id:"Paste"},onClick:e.onPaste,disabled:!e.canPaste,display:!0},{key:"delete",Icon:Jt.Z,label:(0,f.jsx)(w.Trans,{id:"Delete"}),tooltip:{id:"Delete"},onClick:e.onDelete,disabled:!e.canDelete,display:!0},{key:"undo",Icon:ne,label:(0,f.jsx)(w.Trans,{id:"Undo"}),tooltip:{id:"Undo"},onClick:e.onUndo,disabled:!e.canUndo,display:!e.hideHistoryChangeButtons},{key:"redo",Icon:qt,label:(0,f.jsx)(w.Trans,{id:"Redo"}),tooltip:{id:"Redo"},onClick:e.onRedo,disabled:!e.canRedo,display:!e.hideHistoryChangeButtons}].filter((function(e){return e.display}));return(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(M.x1,{noMargin:!0,children:t.map((function(t,n){var r=t.key,i=t.Icon,a=t.label,o=t.tooltip,s=t.onClick,l=t.disabled;return(0,f.jsxs)(c.Fragment,{children:[n>0?(0,f.jsx)(M.LZ,{}):null,e.isNarrow?(0,f.jsx)(Yt.Z,{tooltip:o,onClick:s,size:"small",disabled:l,children:(0,f.jsx)(i,{style:e.iconStyle})},r):(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(i,{}),disabled:l,label:a,onClick:s},r)]},r)}))})}),(0,f.jsx)(M.sg,{expand:!0,noOverflowParent:!0,children:e.isCompact?(0,f.jsx)(dn,{value:e.searchText,onChange:e.onChangeSearchText,placeholder:{id:"Search variables"}}):(0,f.jsx)(Ge.Z,{value:e.searchText,onRequestSearch:e.onChangeSearchText,onChange:e.onChangeSearchText,placeholder:{id:"Search variables"}})}),(0,f.jsx)(M.sg,{noMargin:!0,children:e.isCompact?null:e.isNarrow?(0,f.jsx)(Yt.Z,{tooltip:{id:"Add variable"},onClick:e.onAdd,size:"small",disabled:!e.canAdd,children:(0,f.jsx)(it.Z,{style:e.iconStyle})},"add-variable"):(0,f.jsx)(T.Z,{primary:!0,onClick:e.onAdd,label:(0,f.jsx)(w.Trans,{id:"Add variable"}),leftIcon:(0,f.jsx)(it.Z,{}),disabled:!e.canAdd},"add-variable")})]})})),fn=n(58978),hn=function(e){var t=c.useRef(null),n=c.useCallback((function(e){t.current=e}),[]);return c.useLayoutEffect((function(){if(t.current){var n=e.current[t.current.identifier];n&&n.focus({caretPosition:t.current.caretPosition})}t.current=null})),n},gn=n(65111),mn="SimpleTextField_simpleTextField__bSFrW",xn="SimpleTextField_disabled__sKBSD",vn={italic:{fontStyle:"italic"}},bn=function(e){return e.stopPropagation()},Cn=c.memo(c.forwardRef((function(e,t){var n,r=c.useRef(null);c.useEffect((function(){r.current&&(r.current.value=e.value)}),[e.value]);var i=c.useCallback((function(e){var t=r.current;if(t&&(t.focus(),e&&e.selectAll&&t.select(),e&&Number.isInteger(e.caretPosition))){var n=Number(e.caretPosition);t.setSelectionRange(n,n)}}),[]),a=c.useCallback((function(e,t){r.current&&(r.current.selectionStart=e,r.current.selectionEnd=t)}),[]),o=c.useCallback((function(){return r.current?r.current.selectionStart:0}),[]);return c.useImperativeHandle(t,(function(){return{focus:i,forceSetSelection:a,getCaretPosition:o}})),(0,f.jsx)("div",{className:en()((n={},(0,Qt.Z)(n,mn,!0),(0,Qt.Z)(n,xn,e.disabled),n)),children:(0,f.jsx)("input",{id:e.id,disabled:e.disabled,ref:r,type:e.type,defaultValue:e.value,placeholder:e.hint||"",onClick:bn,onDoubleClick:bn,onBlur:function(t){e.onChange(t.currentTarget.value,e.additionalContext,"blur")},onChange:e.directlyStoreValueChangesWhileEditing?function(t){e.onChange(t.currentTarget.value,e.additionalContext,"change")}:void 0,onKeyUp:function(t){(0,gn.ph)(t)&&e.onChange(t.currentTarget.value,e.additionalContext,"blur")},style:e.italic?vn.italic:void 0})})}))),jn=n(46771),yn=n(42986),Zn=function(e){var t=e.initialValue,n=e.onClose,r=c.useState(t),i=(0,s.Z)(r,2),a=i[0],o=i[1];return(0,f.jsx)(E.ZP,{open:!0,title:null,flexColumnBody:!0,fullscreen:"never-even-on-mobile",actions:[(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Ok"}),primary:!0,onClick:function(){return n(a)}},"ok")],maxWidth:"md",onRequestClose:function(){return n(a)},onApply:function(){return n(a)},children:(0,f.jsx)(yn.Z,{autoFocus:"desktopAndMobileDevices",multiline:!0,fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Initial text of the variable"}),value:a,onChange:o,rows:5,rowsMax:10})})},kn=n.g.gd,wn=(0,ut.x)("variable-editor"),Tn=function(e){return e.stopPropagation()},Sn=(0,nt.Z)((function(e,t){return t()})),Pn={inlineIcon:{padding:0},handlePlaceholder:{width:24}},In={chevron:{width:15,alignSelf:"stretch"}},En=c.memo((function(e){var t=e.depth,n=e.isNarrow,r=e.containerWidth,i=e.shouldHideExpandIcons,a=e.isExpanded,o=e.onExpand,l=e.draggedNodeId,u=e.nodeId,d=e.isInherited,p=e.isNameLocked,h=e.isTypeLocked,g=e.canDrop,m=e.dropNode,x=e.isSelected,v=e.onSelect,b=e.gdevelopTheme,C=e.variableNameInputRefs,j=e.topLevelVariableValueInputRefs,y=e.parentType,Z=e.onChangeName,k=e.overwritesInheritedVariable,T=e.name,S=e.index,P=e.rowRightSideStyle,I=e.isTopLevel,E=e.type,L=e.typeErrorMessage,A=e.onChangeType,O=e.hasMixedValues,R=e.valueAsString,F=e.valueAsBool,D=e.onChangeValue,B=e.isCollection,U=e.variablePointer,V=e.onAddChild,H=e.editInheritedVariable,z=e.deleteNode,W=e.directlyStoreValueChangesWhileEditing,G=e.i18n,Y=c.useRef(null),q=c.useState("before"),J=(0,s.Z)(q,2),X=J[0],K=J[1],Q=n||!!r&&(r<=750?t>=5:r<=850?t>=6:r<=950?t>=7:t>=8),ee=c.useState(!1),te=(0,s.Z)(ee,2),re=te[0],ie=te[1],ae=(0,gt.Z)(),oe=!!R&&-1!==R.indexOf("\n"),se=c.useCallback((function(){if(Y.current){var e=Y.current.getBoundingClientRect();return{y:e.top,height:e.height}}}),[]);return(0,f.jsx)("div",{ref:Y,children:(0,f.jsx)(wn,{beginDrag:function(){return l.current=u,{}},canDrag:function(){return!d},canDrop:function(){return g(u)},drop:function(){m(u,X)},hover:function(e){var t=e.getClientOffset().y,n=Sn(Math.floor(Date.now()/1e3),se);n&&K(t-n.y<=n.height/2?"before":"after")},children:function(e){var r=e.connectDragSource,s=e.connectDropTarget,l=e.isOver,c=e.canDrop;return s((0,f.jsxs)("div",{style:{marginLeft:(n?16:32)*t,backgroundColor:x?b.listItem.selectedBackgroundColor:b.list.itemsBackgroundColor,marginBottom:1},"aria-selected":x,"aria-expanded":a,onPointerUp:function(e){var t=e.metaKey||e.ctrlKey;v(t,u)},children:[l&&"before"===X&&(0,f.jsx)(dt.Z,{canDrop:c}),(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:n?"4px 4px 4px 0px":"6px 30px 6px 6px"},children:[i?null:B?(0,f.jsx)(lt.Z,{onClick:function(){return o(!a,u)},focusRipple:!0,style:In.chevron,children:a?(0,f.jsx)(st.Z,{}):(0,f.jsx)(ot.Z,{})}):(0,f.jsx)("div",{style:In.chevron}),d?(0,f.jsx)("span",{style:Pn.handlePlaceholder}):r((0,f.jsx)("span",{children:(0,f.jsx)(ct.V,{color:x?b.listItem.selectedTextColor:"#AAA"})})),(0,f.jsxs)(_.ep,{expand:!0,noMargin:!0,forceMobileLayout:Q,children:[(0,f.jsxs)(M.x1,{alignItems:"center",noMargin:!0,expand:!0,children:[Q?null:(0,f.jsx)(M.LZ,{}),(0,f.jsx)(Cn,{type:"text",ref:function(e){e&&(C.current[U]=e)},directlyStoreValueChangesWhileEditing:W,disabled:p||d||y===kn.Variable.Array,onChange:Z,additionalContext:JSON.stringify({nodeId:u,depth:t}),italic:!!k,value:T,id:"variable-".concat(S,"-name")}),(0,f.jsx)(M.LZ,{})]}),(0,f.jsx)("div",{style:Q?void 0:P,children:(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(Wt.Z,{variableType:E,onChange:A,nodeId:u,isHighlighted:x,readOnlyWithIcon:d||k,id:"variable-".concat(S,"-type"),errorMessage:L,disabled:h})}),(0,f.jsx)(M.sg,{expand:!0,children:E===kn.Variable.Boolean?(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)("span",{style:x?{color:b.listItem.selectedTextColor}:void 0,children:(0,f.jsx)(N.Z,{displayInlineAsSpan:!0,noMargin:!0,color:"inherit",children:O?(0,f.jsx)(w.Trans,{id:"Mixed values"}):F?(0,f.jsx)(w.Trans,{id:"True"}):(0,f.jsx)(w.Trans,{id:"False"})})}),d&&!I?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)($.Z,{size:"small",style:Pn.inlineIcon,onClick:function(){D(F?"false":"true",u),ae()},tooltip:F?{id:"Set to false"}:{id:"Set to true"},children:(0,f.jsx)(fn.Z,{htmlColor:x?b.listItem.selectedTextColor:void 0})})]})]}):(0,f.jsx)(Cn,{ref:function(e){0===t&&e&&(j.current[U]=e)},type:E===kn.Variable.Number?"number":"text",directlyStoreValueChangesWhileEditing:W,disabled:E===kn.Variable.MixedTypes||B||d&&!I||oe,hint:O?G._({id:"Mixed values"}):"",onChange:D,value:O?"":oe?(R||"").replace(/\n/g,"\u21b5"):R||"",additionalContext:u,id:"variable-".concat(S,"-text-value")},"value")}),E!==kn.Variable.String||d&&!I?null:(0,f.jsx)($.Z,{size:"small",style:Pn.inlineIcon,tooltip:{id:"Open in a larger editor"},onClick:function(e){Tn(e),ie(!0)},children:(0,f.jsx)(at.Z,{htmlColor:x?b.listItem.selectedTextColor:void 0})}),B&&!d?(0,f.jsx)($.Z,{size:"small",style:Pn.inlineIcon,tooltip:{id:"Add child"},onClick:function(e){Tn(e),V(u)},children:(0,f.jsx)(it.Z,{htmlColor:x?b.listItem.selectedTextColor:void 0})}):null,B&&d&&I?(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Edit"},style:Pn.inlineIcon,onClick:function(e){Tn(e),H(u)},children:(0,f.jsx)(at.Z,{htmlColor:x?b.listItem.selectedTextColor:void 0})}):null,k&&I?(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Reset"},style:Pn.inlineIcon,onClick:function(e){Tn(e),z(u)},children:(0,f.jsx)(ne,{htmlColor:x?b.listItem.selectedTextColor:void 0})}):null]})})]})]}),l&&"after"===X&&(0,f.jsx)(dt.Z,{canDrop:c}),re&&(0,f.jsx)(Zn,{initialValue:R||"",onClose:function(e){D(e,u),ie(!1),ae()}})]}))}})})})),Mn=c.forwardRef((function(e,t){var n=(0,jn.B)((function(){return jt(e.variablesContainer,{historyMaxSize:50})})),i=c.useState([]),a=(0,s.Z)(i,2),o=a[0],l=a[1],u=c.useState(null),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useRef({}),m=c.useRef({}),x=hn(g),v=hn(m),b=c.useContext(j.Z),C=c.useRef(null),y=(0,gt.Z)(),Z=c.useState(""),k=(0,s.Z)(Z,2),T=k[0],S=k[1],P=e.onComputeAllVariableNames,I=e.onSelectedVariableChange,E=c.useMemo((function(){return P?P():null}),[P]),L=c.useState((function(){if(!e.initiallySelectedVariableName)return[];var t=_t(Nt(e.initiallySelectedVariableName),e.variablesContainer);t.variable||(t=function(e){if(0===e.lineage.length)return e;var t=e.lineage[e.lineage.length-1];return{variable:t.variable,name:t.name,depth:e.depth-1,lineage:e.lineage.slice(0,e.lineage.length-1)}}(t)),t.variable&&x({identifier:t.variable.ptr});var n=t.variable?function(e){var t=e.name;if(!t)return null;var n=e.lineage.map((function(e){return e.name})).join(Ot);return(n?n+Ot:"")+t}(t):null;return n?[n]:[]})),A=(0,s.Z)(L,2),O=A[0],R=A[1],F=c.useCallback((function(e){R((function(t){var n=Array.isArray(e)?e:e(t);return I&&I(n),n}))}),[I]),D=c.useCallback((function(){var t=[],n=zt(e.variablesContainer,Mt(T));e.inheritedVariablesContainer&&(t=zt(e.inheritedVariablesContainer,Mt(T),At)),l([].concat((0,r.Z)(n),(0,r.Z)(t)))}),[e.inheritedVariablesContainer,e.variablesContainer,T]);c.useEffect((function(){T?D():l([])}),[T,D]);var _=!It(e.variablesContainer)&&(!e.inheritedVariablesContainer||!It(e.inheritedVariablesContainer)),B=c.useMemo((function(){return{minWidth:p?Math.round(.6*p):600,flexShrink:0}}),[p]),U=c.useMemo((function(){return"compact"===e.size||!!p&&p<650}),[p,e.size]),V=E?E.filter((function(t){return!e.variablesContainer.has(t)&&(!e.inheritedVariablesContainer||!e.inheritedVariablesContainer.has(t))})):[],z=e.historyHandler,W=e.onVariablesUpdated,G=e.variablesContainer,Y=c.useCallback((function(){z?z.saveToHistory():n.current=kt(n.current,G),W&&W()}),[n,z,W,G]),q=c.useCallback((function(){z?z.undo():n.current=wt(n.current,e.variablesContainer),F([])}),[z,n,e.variablesContainer,F]),J=c.useCallback((function(){z?z.redo():n.current=Tt(n.current,e.variablesContainer),F([])}),[z,n,e.variablesContainer,F]),X=new ht.ZP({isActive:function(){return!0},shortcutCallbacks:{onUndo:q,onRedo:J}}),K=c.useCallback((function(){vt.Z.set(Gt,O.map((function(t){var n=_t(t,t.startsWith(At)&&e.inheritedVariablesContainer?e.inheritedVariablesContainer:e.variablesContainer),r=n.variable,i=n.name,a=n.lineage;if(!r||!i)return null;var o=!1,s=Rt(a);return s&&s.getType()!==kn.Variable.Structure||(o=!0),{nameOrIndex:i,serializedVariable:(0,Ct.XH)(r),hasName:o}})).filter(Boolean)),y()}),[y,e.inheritedVariablesContainer,e.variablesContainer,O]),Q=c.useCallback((function(){if(vt.Z.has(Gt)){var t=[],n=vt.Z.get(Gt),r=bt.$.extractArray(n);if(r){var i=0;r.forEach((function(n){var r=bt.$.extractStringProperty(n,"nameOrIndex"),a=bt.$.extractObjectProperty(n,"serializedVariable"),o=bt.$.extractBooleanProperty(n,"hasName");if(r&&a&&null!==o){var s=o?r:null;if(0===O.length||O.some((function(e){return e.startsWith(At)}))){if(!s)return;var l=Pt(e.variablesContainer,kn.Project.getSafeName(s),a,e.variablesContainer.count(),e.inheritedVariablesContainer).name;t.push(l)}else{var c=O[0];if(c.startsWith(At))return;var u=_t(c,e.variablesContainer),d=u.name,p=u.lineage;if(!d)return;var f=Rt(p);if(f){var h=f.getType();if(h===kn.Variable.Structure&&!s||h===kn.Variable.Array&&s)return;if(h===kn.Variable.Array){var g=parseInt(d,10)+1;!function(e,t,n){var r=new St.Variable;(0,Ct.qx)(r,t),r.resetPersistentUuid(),e.insertAtIndex(r,n),r.delete()}(f,a,g);var m=c.split(Ot);m.splice(m.length-1,1,(g+i).toString()),t.push(m.join(Ot)),i+=1}else{if(!s)return;var x=function(e,t,n){var r=(0,xt.Z)(t,(function(t){return e.hasChild(t)}),"CopyOf"),i=new St.Variable;return(0,Ct.qx)(i,n),i.resetPersistentUuid(),e.insertChild(r,i),i.delete(),r}(f,s,a),v=c.split(Ot);v.splice(v.length-1,1,x),t.push(v.join(Ot))}}else{if(!s)return;var b=Pt(e.variablesContainer,s,a,e.variablesContainer.getPosition(d)+1,e.inheritedVariablesContainer).name;t.push(b)}}}})),Y(),F(t)}}}),[Y,e.inheritedVariablesContainer,e.variablesContainer,O,F]),$=c.useCallback((function(t){if(t.startsWith(At))return!1;var n=_t(t,e.variablesContainer),r=n.name,i=n.lineage;if(!r)return!1;var a=Rt(i);return a?a.getType()===kn.Variable.Array?a.removeAtIndex(parseInt(r,10)):a.removeChild(r):e.variablesContainer.remove(r),!0}),[e.variablesContainer]),ee=c.useCallback((function(e){$(e)&&(Y(),y())}),[Y,y,$]),te=c.useCallback((function(){O.sort().reverse().map($).some(Boolean)&&(Y(),F([]))}),[O,$,Y,F]),ne=c.useCallback((function(e,t){F((function(n){return Ut(n,e,t)})),T&&l((function(n){return Ut(n,e,t)}))}),[T,F]),re=c.useCallback((function(e,t,n){F([]),T&&(D(),y())}),[y,T,F,D]),ie=c.useCallback((function(t){if(t.startsWith(At))return!1;var n=C.current;if(!n)return!1;var r=_t(t,e.variablesContainer),i=r.lineage,a=_t(n,e.variablesContainer),o=a.variable,s=a.lineage;if(!o)return!1;if(Dt(o,i))return!1;var l=Rt(i),c=Rt(s);if(e.isListLocked&&(!l||!c))return!1;switch(Vt(a,r)){case"InsideTopLevel":case"TopLevelToStructure":case"StructureToTopLevel":case"FromStructureToAnotherStructure":case"FromArrayToAnotherArray":case"InsideSameArray":return!0;default:return!1}}),[e.isListLocked,e.variablesContainer]),ae=c.useCallback((function(t,n){if(!t.startsWith(At)){var r=C.current;if(r){var i=_t(t,e.variablesContainer),a=i.lineage,o=i.name,s=Rt(a);if(o){var l=_t(r,e.variablesContainer),c=l.variable,u=l.lineage,d=l.name,p=Rt(u);if(c&&d&&!Dt(c,a)){var f,h,g,m,x,v,b=!0;switch(Vt(l,i)){case"InsideTopLevel":h=e.variablesContainer.getPosition(d),m=((g=e.variablesContainer.getPosition(o))>h?g-1:g)+("after"===n?1:0),e.variablesContainer.move(h,m);break;case"TopLevelToStructure":f=(0,xt.Z)(d,(function(e){return s.hasChild(e)}),"CopyOf"),s.insertChild(f,c),e.variablesContainer.remove(d),(x=Ft(a))&&re(r,x,f);break;case"StructureToTopLevel":f=(0,xt.Z)(kn.Project.getSafeName(d),(function(t){return e.variablesContainer.has(t)}),"CopyOf"),e.variablesContainer.insert(f,c,e.variablesContainer.getPosition(o)),p.removeChild(d),re(r,"",f);break;case"FromStructureToAnotherStructure":f=(0,xt.Z)(d,(function(e){return s.hasChild(e)}),"CopyOf"),s.insertChild(f,c),p.removeChild(d),(x=Ft(a))&&re(r,x,f);break;case"FromArrayToAnotherArray":h=parseInt(d,10),m=(g=parseInt(o,10))+("after"===n?1:0),s.insertAtIndex(c,m),p.removeAtIndex(h),(v=Ft(a))&&re(r,v,m.toString());break;case"InsideSameArray":h=parseInt(d,10),m=((g=parseInt(o,10))>h?g-1:g)+("after"===n?1:0),s.moveChildInArray(h,m),(x=Ft(a))&&re(r,x,m.toString());break;default:b=!1}b&&(Y(),y())}}}}}),[Y,y,e.variablesContainer,re]),oe=c.useCallback((function(t){if(!t.startsWith(At)){var n=_t(t,e.variablesContainer).variable;if(n&&Et(n)){var r=n.getType();if(r===kn.Variable.Structure){var i=(0,xt.Z)("ChildVariable",(function(e){return n.hasChild(e)}));n.getChild(i)}else r===kn.Variable.Array&&n.pushNew();n.isFolded()&&n.setFolded(!1),Y(),y()}}}),[Y,y,e.variablesContainer]),se=c.useCallback((function(t){if(e.inheritedVariablesContainer){var n=_t(t,e.inheritedVariablesContainer),r=n.variable,i=n.name;if(r&&i&&!e.variablesContainer.has(i)){var a=new kn.Variable;(0,Ct.qx)(a,(0,Ct.XH)(r)),e.variablesContainer.insert(i,a,e.variablesContainer.count()),Y(),F([i]),a.delete()}}}),[Y,e.inheritedVariablesContainer,e.variablesContainer,F]),le=c.useCallback((function(){if(0===O.length||O.some((function(e){return e.startsWith(At)}))){var t=Pt(e.variablesContainer,"Variable",null,e.variablesContainer.count(),e.inheritedVariablesContainer),n=t.name,r=t.variable;return Y(),F([n]),void x({identifier:r.ptr})}var i=O[0],a=_t(i,e.variablesContainer),o=a.name,s=a.lineage;if(o){var l,c,u=(l=s).length?l[0]:null;c=u?e.variablesContainer.getPosition(u.name)+1:e.variablesContainer.getPosition(o)+1;var d=Pt(e.variablesContainer,"Variable",null,c,e.inheritedVariablesContainer),p=d.name,f=d.variable;Y(),F([p]),x({identifier:f.ptr})}}),[Y,e.inheritedVariablesContainer,e.variablesContainer,x,O,F]),ce=c.useCallback((function(e,t){F((function(n){var i=-1!==n.indexOf(t);return e?i?n.filter((function(e){return e!==t})):[].concat((0,r.Z)(n),[t]):i?n:[t]}))}),[F]),ue=function t(n,i){var a,s=n.name,l=n.variable,c=n.parentNodeId,u=n.parentVariable,d=n.isInherited,h=n.index,x=Et(l),v=l.getType(),j=!l.isFolded(),y=l.ptr,Z=c?c.split(Ot).length:0,k=0===Z;a=c?"".concat(c).concat(Ot).concat(s):d?"".concat(At).concat(s):s;var w=u?u.getType():null,S=O.includes(a),P=k&&!d&&e.inheritedVariablesContainer&&e.inheritedVariablesContainer.has(s),I=w===kn.Variable.Array&&u&&u.getChildrenCount()>1&&u.getAtIndex(0).getType()!==v?i._({id:"Every child of an array must be the same type."}):null;if(T&&!(o.includes(a)||o.includes(c)||o.some((function(e){return e.startsWith(a)}))))return[];var E=l.hasMixedValues(),M=x?i._(0===l.getChildrenCount()?{id:"No children"}:1===l.getChildrenCount()?{id:"1 child"}:{id:"{0} children",values:{0:l.getChildrenCount()}}):v===kn.Variable.String?l.getString():v===kn.Variable.Number?l.getValue().toString():null,L=v===kn.Variable.Boolean?l.getBool():null,A=(0,f.jsx)(En,{depth:Z,isNarrow:U,containerWidth:p,shouldHideExpandIcons:_,isExpanded:j,onExpand:fe,draggedNodeId:C,nodeId:a,isInherited:d,isNameLocked:e.isListLocked&&k,isTypeLocked:e.isListLocked&&k,canDrop:ie,dropNode:ae,isSelected:S,onSelect:ce,gdevelopTheme:b,variableNameInputRefs:g,topLevelVariableValueInputRefs:m,parentType:w,onChangeName:de,overwritesInheritedVariable:P,name:s,index:h,rowRightSideStyle:B,isTopLevel:k,type:v,typeErrorMessage:I,variablePointer:y,onChangeType:pe,hasMixedValues:E,valueAsString:M,valueAsBool:L,onChangeValue:he,isCollection:x,onAddChild:oe,editInheritedVariable:se,deleteNode:ee,directlyStoreValueChangesWhileEditing:!!e.directlyStoreValueChangesWhileEditing,i18n:i},a);return v===kn.Variable.Structure?[A].concat((0,r.Z)(j?l.getAllChildrenNames().toJSArray().map((function(e,n){var r=l.getChild(e);return t({name:e,variable:r,parentNodeId:a,parentVariable:l,isInherited:d,index:n},i)})):[])):v===kn.Variable.Array?[A].concat((0,r.Z)(j?(0,mt.mapFor)(0,l.getChildrenCount(),(function(e){var n=l.getAtIndex(e);return t({name:e.toString(),variable:n,parentNodeId:a,parentVariable:l,isInherited:d,index:e},i)})):[])):[A]},de=c.useCallback((function(t,n,r){if(t||"change"!==r){var i=JSON.parse(n),a=i.nodeId,o=i.depth,s=_t(a,e.variablesContainer),l=s.variable,c=s.lineage,u=s.name;if(null!==u&&l&&t!==u){for(var d=g.current[l.ptr],p=d?d.getCaretPosition():null,f=Rt(c),h=t.replace(At,"");h.includes(Ot);)h=h.replace(Ot,"");var m=(0,xt.Z)(0===o?kn.Project.getSafeName(h):h||"Unnamed",(function(t){return f&&f.hasChild(t)||!f&&(e.variablesContainer.has(t)||!e.areObjectVariables&&e.projectScopedContainersAccessor.get().getObjectsContainersList().hasObjectOrGroupNamed(t))}));f?f.renameChild(u,m):e.variablesContainer.rename(u,m),Y(),ne(a,m),x({identifier:l.ptr,caretPosition:p})}}}),[e.variablesContainer,e.areObjectVariables,e.projectScopedContainersAccessor,Y,ne,x]),pe=c.useCallback((function(t,n){var r=_t(n,e.variablesContainer).variable;r&&(r.castTo(t),Y(),y())}),[Y,y,e.variablesContainer]),fe=c.useCallback((function(t,n){var r=n.startsWith(At),i=_t(n,r&&e.inheritedVariablesContainer?e.inheritedVariablesContainer:G).variable;i&&(i.setFolded(!t),y())}),[e.inheritedVariablesContainer,G,y]),he=c.useCallback((function(t,n){var i;if(n.startsWith(At)&&e.inheritedVariablesContainer){var a=_t(n,e.inheritedVariablesContainer),o=a.variable,s=a.name,l=a.depth;if(!s||!o||l>0)return;switch(o.getType()){case kn.Variable.String:if(o.getString()===t)return;break;case kn.Variable.Number:if(parseFloat(t)===o.getValue())return;break;case kn.Variable.Boolean:if("true"===t===o.getBool())return}var c=new kn.Variable;(0,Ct.qx)(c,(0,Ct.XH)(o)),i=e.variablesContainer.insert(s,c,0),F((function(e){var t=(0,r.Z)(e);return-1!==t.indexOf(n)?(t.splice(t.indexOf(n),1,s),t):[].concat((0,r.Z)(t),[s])}));var u=m.current[o.ptr];v({identifier:i.ptr,caretPosition:u?u.getCaretPosition():null}),c.delete()}else{i=_t(n,e.variablesContainer).variable}if(i&&(!i.hasMixedValues()||0!==t.length)){switch(i.getType()){case kn.Variable.String:if(i.getString()===t)return;i.setString(t);break;case kn.Variable.Number:var d=parseFloat(t);if(d===i.getValue())return;i.setValue(d);break;case kn.Variable.Boolean:var p="true"===t;if(p===i.getBool())return;i.setBool(p);break;default:console.error("Cannot set variable with type ".concat(i.getType()," - are you sure it's a primitive type?"))}Y(),y()}}),[Y,y,e.inheritedVariablesContainer,e.variablesContainer,v,F]),ge=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n&&e.inheritedVariablesContainer?e.inheritedVariablesContainer:e.variablesContainer,a=[];return(0,mt.mapFor)(0,i.count(),(function(o){var s=i.getAt(o),l=i.getNameAt(o);if(n&&e.variablesContainer.has(l))return null;a.push.apply(a,(0,r.Z)(ue({name:l,variable:s,isInherited:n,index:o},t)))})),a};c.useImperativeHandle(t,(function(){return{addVariable:le}}));var me=(0,f.jsx)(pn,{isNarrow:U,isCompact:"compact"===e.size,onCopy:K,onPaste:Q,onDelete:te,canCopy:O.length>0,canPaste:vt.Z.has(Gt)&&!e.isListLocked,canDelete:!e.isListLocked&&O.length>0&&O.every((function(e){return!e.startsWith(At)})),canAdd:!e.isListLocked,onUndo:q,onRedo:J,canUndo:e.historyHandler?e.historyHandler.canUndo():Zt(n.current),canRedo:e.historyHandler?e.historyHandler.canRedo():yt(n.current),hideHistoryChangeButtons:!!e.historyHandler,onAdd:le,searchText:T,onChangeSearchText:S,iconStyle:e.toolbarIconStyle});return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Variables list"}),scope:"variables-list",children:(0,f.jsx)(w.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(rt.Z,{onClickAway:function(){return F([])},children:(0,f.jsx)(tt.Z,{bounds:!0,onResize:function(e){h(e.bounds.width)},children:function(t){t.contentRect;var r=t.measureRef;return(0,f.jsx)("div",{ref:r,style:{flex:1,display:"flex",minHeight:0},onKeyDown:X.onKeyDown,onKeyUp:X.onKeyUp,children:(0,f.jsxs)(M.sg,{expand:!0,useFullHeight:!0,noOverflowParent:!0,noMargin:!0,children:[me,0!==e.variablesContainer.count()||e.inheritedVariablesContainer&&0!==e.inheritedVariablesContainer.count()?(0,f.jsxs)(ft.Z,{autoHideScrollbar:!0,children:[e.inheritedVariablesContainer?ge(n,!0):null,ge(n),!!V.length&&(0,f.jsx)(H.Z,{background:"dark",variant:"outlined",children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(Re.r,{translatableSource:{id:"There are variables used in events but not declared in this list: {0}.",values:{0:"`"+V.join("`, `")+"`"}}})})})})]}):(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:[e.emptyPlaceholderTitle&&e.emptyPlaceholderDescription?e.isListLocked?(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(N.Z,{size:"block-title",align:"center",children:(0,f.jsx)(w.Trans,{id:"No variable"})}),(0,f.jsx)(N.Z,{align:"center",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"There is no variable to set up."})})]}):(0,f.jsx)(pt.$,{title:e.emptyPlaceholderTitle,description:e.emptyPlaceholderDescription,actionLabel:(0,f.jsx)(w.Trans,{id:"Add a variable"}),helpPagePath:e.helpPagePath||void 0,tutorialId:"intermediate-advanced-variables",onAction:le,actionButtonId:"add-variable"}):null,e.compactEmptyPlaceholderText&&(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(N.Z,{size:"body2",color:"secondary",align:"center",noMargin:!0,children:e.isListLocked?(0,f.jsx)(w.Trans,{id:"There is no variable to set up."}):e.compactEmptyPlaceholderText})})]})]})})}})})}})})})),Ln=Mn,An=n(4076),On=n(39361),Rn=n.g.gd,Fn=function(e){var t=e.onCancel,n=e.onApply,r=e.open,u=e.onEditObjectVariables,d=e.title,p=e.project,h=e.hotReloadPreviewButtonProps,g=e.helpPagePath,m=e.id,x=e.tabs,v=e.initiallyOpenTabId,b=e.initiallySelectedVariableName,C=e.shouldCreateInitiallySelectedVariable,j=e.projectScopedContainersAccessor,y=e.objectName,Z=e.initialInstances,k=e.isListLocked,S=function(e){var t=e.serializableObjects,n=e.useProjectToUnserialize,r=e.onCancel,l=e.resetThenClearPersistentUuid,u=c.useRef(new Map),d=c.useRef(0),p=(0,Ye.Z)().showConfirmation,f=c.useContext(D.ZP).values.backdropClickBehavior,h=u.current;if(0===h.size){var g,m=(0,i.Z)(t);try{for(m.s();!(g=m.n()).done;){var x=(0,s.Z)(g.value,2),v=x[0],b=x[1],C=h.get(v);C&&(C.delete(),h.delete(v)),l&&b.resetPersistentUuid();var j=new qe.SerializerElement;b.serializeTo(j),h.set(v,j)}}catch(T){m.e(T)}finally{m.f()}}c.useEffect((function(){return function(){var e,t=(0,i.Z)(h);try{for(t.s();!(e=t.n()).done;){var n=(0,s.Z)(e.value,2),r=n[0];n[1].delete(),h.delete(r)}}catch(T){t.e(T)}finally{t.f()}}}),[h]);var y=c.useCallback((function(){if(!u.current)throw new Error("serializedElementRef should always be non null.");return u.current}),[]),Z=c.useCallback((function(){d.current++}),[]),k=c.useCallback((function(){return d.current>0}),[]),w=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var o,c,h,g,m,x,v,b;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=u.current){e.next=3;break}return e.abrupt("return");case 3:if(c=!1,!("cancel"!==f&&d.current>=1)){e.next=13;break}return e.next=9,p({title:{id:"Cancel your changes?"},message:{id:"All your changes will be lost. Are you sure you want to cancel?"},confirmButtonLabel:{id:"Cancel"},dismissButtonLabel:{id:"Continue editing"}});case 9:e.sent&&(c=!0),e.next=14;break;case 13:c=!0;case 14:if(c){e.next=16;break}return e.abrupt("return");case 16:h=(0,i.Z)(t);try{for(h.s();!(g=h.n()).done;)m=(0,s.Z)(g.value,2),x=m[0],v=m[1],b=o.get(x),n?v.unserializeFrom(n,b):v.unserializeFrom(b),l&&v.clearPersistentUuid()}catch(T){h.e(T)}finally{h.f()}r();case 19:case"end":return e.stop()}}),e)}))),[f,r,p,t,n,l]);return{onCancelChanges:w,notifyOfChange:Z,hasUnsavedChanges:k,getOriginalContentSerializedElements:y}}({serializableObjects:c.useMemo((function(){return new Map(x.map((function(e){return[e.id,e.variablesContainer]})))}),[x]),onCancel:t,resetThenClearPersistentUuid:!0}),P=S.onCancelChanges,I=S.notifyOfChange,L=S.getOriginalContentSerializedElements,A=c.useRef(null),O=c.useCallback((function(e){A.current=e.length>0?e[e.length-1]:null}),[]),R=c.useRef(C||!1),F=c.useRef(b);if(R.current){R.current=!1;var N=Math.max(0,x.indexOf((function(e){return e.id===v}))),_=x[N],U=_.variablesContainer,V=_.inheritedVariablesContainer,H=Pt(U,b?(0,On.mz)(b):"Variable",null,U.count(),V).name;F.current=H,A.current=Nt(H)}var z=(0,be.UQ)().isMobile,W=(0,et.Z)("intro-variables").DismissableTutorialMessage,G=c.useState(v||x[0].id),Y=(0,s.Z)(G,2),q=Y[0],J=Y[1],X=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,r,o,s,l,c,u,d,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=L(),r=(0,i.Z)(x);try{for(r.s();!(o=r.n()).done;)s=o.value,l=s.id,c=s.variablesContainer,u=s.inheritedVariablesContainer,d=t.get(l),u||!d||(f=Rn.WholeProjectRefactorer.computeChangesetForVariablesContainer(d,c),y&&Z?Rn.WholeProjectRefactorer.applyRefactoringForObjectVariablesContainer(p,c,Z,y,f,d):Rn.WholeProjectRefactorer.applyRefactoringForVariablesContainer(p,c,f,d)),c.clearPersistentUuid()}catch(a){r.e(a)}finally{r.f()}(h=x.find((function(e){return e.id===q})))&&n(A.current&&Bt(A.current,h.variablesContainer));case 5:case"end":return e.stop()}}),e)}))),[L,x,y,Z,p,q,n]);return(0,f.jsx)(E.ZP,{title:d,actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:P},"Cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Apply"}),primary:!0,onClick:X,id:"apply-button"},"Apply")],secondaryActions:[u?(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Edit Object Variables"}),primary:!1,onClick:u},"edit-object-variables"):null,h?(0,f.jsx)($e,(0,l.Z)((0,l.Z)({},h),{},{isCodeGenerationRequired:!0}),"hot-reload-preview-button"):null,g?(0,f.jsx)(An.Z,{helpPagePath:g},"help"):null],onRequestClose:P,onApply:X,open:r,flexBody:!0,fullHeight:!0,id:m,fixedContent:x.length>1?(0,f.jsx)(B.m,{value:q,onChange:J,options:x.map((function(e){var t=e.label,n=e.id;return{label:t,value:n,id:n}})),variant:z?"scrollable":void 0}):null,children:x.map((function(e){var t=e.id,n=e.variablesContainer,r=e.inheritedVariablesContainer,i=e.emptyPlaceholderTitle,a=e.emptyPlaceholderDescription,o=e.onComputeAllVariableNames;return q===t&&(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,id:t,children:[n.count()>0&&W&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:W})}),(0,f.jsx)(Ln,{projectScopedContainersAccessor:j,variablesContainer:n,areObjectVariables:!!y,initiallySelectedVariableName:F.current,inheritedVariablesContainer:r,emptyPlaceholderTitle:i||null,emptyPlaceholderDescription:a||null,onComputeAllVariableNames:o,helpPagePath:g,onVariablesUpdated:I,onSelectedVariableChange:O,isListLocked:k})]},t)}))})},Dn=n.g.gd,Nn=function(e){return!e.includes(".")&&!e.includes("[")&&e.length>0},_n=function(){function e(){(0,ze.Z)(this,e)}return(0,We.Z)(e,null,[{key:"findAllGlobalVariables",value:function(e,t){return Dn.EventsVariablesFinder.findAllGlobalVariables(e,t).toNewVectorString().toJSArray().filter(Nn)}},{key:"findAllLayoutVariables",value:function(e,t,n){return Dn.EventsVariablesFinder.findAllLayoutVariables(t.getCurrentPlatform(),t,n).toNewVectorString().toJSArray().filter(Nn)}},{key:"findAllObjectVariables",value:function(e,t,n,r){return Dn.EventsVariablesFinder.findAllObjectVariables(t.getCurrentPlatform(),t,n,r).toNewVectorString().toJSArray().filter(Nn)}}]),e}(),Bn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];(0,ze.Z)(this,e),this._scope=t,this._parameterObjectsContainer=n,this._parameterVariablesContainer=r,this._propertyVariablesContainer=i,this._parameterResourcesContainer=a,this._propertyResourcesContainer=o,this._eventPath=s,this.get()}return(0,We.Z)(e,[{key:"getScope",value:function(){return this._scope}},{key:"get",value:function(){var e,t=this._scope,r=t.project,a=t.layout,o=t.eventsFunctionsExtension,s=t.eventsBasedBehavior,l=t.eventsBasedObject,c=t.eventsFunction,u=n.g.gd;if(a)e=u.ProjectScopedContainers.makeNewProjectScopedContainersForProjectAndLayout(r,a);else if(o)if(c){if(!this._parameterObjectsContainer)throw new Error("Extension scope used without any ObjectsContainer");if(!this._parameterVariablesContainer)throw new Error("Extension scope used without a VariablesContainer for parameters");if(!this._parameterResourcesContainer)throw new Error("Extension scope used without a ResourcesContainer for parameters");if(s){if(!this._propertyVariablesContainer)throw new Error("Extension scope used without a VariablesContainer for properties");if(!this._propertyResourcesContainer)throw new Error("Extension scope used without a ResourcesContainer for properties");e=u.ProjectScopedContainers.makeNewProjectScopedContainersForBehaviorEventsFunction(r,o,s,c,this._parameterObjectsContainer,this._parameterVariablesContainer,this._propertyVariablesContainer,this._parameterResourcesContainer,this._propertyResourcesContainer)}else if(l){if(!this._propertyVariablesContainer)throw new Error("Extension scope used without a VariablesContainer for properties");if(!this._propertyResourcesContainer)throw new Error("Extension scope used without a ResourcesContainer for properties");e=u.ProjectScopedContainers.makeNewProjectScopedContainersForObjectEventsFunction(r,o,l,c,this._parameterObjectsContainer,this._parameterVariablesContainer,this._propertyVariablesContainer,this._parameterResourcesContainer,this._propertyResourcesContainer)}else e=u.ProjectScopedContainers.makeNewProjectScopedContainersForFreeEventsFunction(r,o,c,this._parameterObjectsContainer,this._parameterVariablesContainer,this._parameterResourcesContainer)}else if(l){if(!this._parameterObjectsContainer)throw new Error("Extension scope used without any ObjectsContainer");e=u.ProjectScopedContainers.makeNewProjectScopedContainersForEventsBasedObject(r,o,l,this._parameterObjectsContainer)}else e=u.ProjectScopedContainers.makeNewProjectScopedContainersForEventsFunctionsExtension(r,o);else e=u.ProjectScopedContainers.makeNewProjectScopedContainersForProject(r);var d,p=(0,i.Z)(this._eventPath);try{for(p.s();!(d=p.n()).done;){var f=d.value;e=u.ProjectScopedContainers.makeNewProjectScopedContainersWithLocalVariables(e,f)}}catch(h){p.e(h)}finally{p.f()}return e}},{key:"makeNewProjectScopedContainersWithLocalVariables",value:function(t){return new e(this._scope,this._parameterObjectsContainer,this._parameterVariablesContainer,this._propertyVariablesContainer,this._parameterResourcesContainer,this._propertyResourcesContainer,[].concat((0,r.Z)(this._eventPath),[t]))}},{key:"forEachObject",value:function(e){for(var t=this.get().getObjectsContainersList(),n=0;n<t.getObjectsContainersCount();n++)for(var r=t.getObjectsContainer(n),i=0;i<r.getObjectsCount();i++){e(r.getObjectAt(i))}}}]),e}(),Un=function(e){var t=e.project,n=e.open,r=e.onCancel,i=e.onApply,a=e.hotReloadPreviewButtonProps,o=e.initiallySelectedVariableName,s=e.shouldCreateInitiallySelectedVariable,l=e.isListLocked,u=c.useCallback((function(){return _n.findAllGlobalVariables(t.getCurrentPlatform(),t)}),[t]),d=c.useMemo((function(){return[{id:"global-variables",label:(0,f.jsx)(w.Trans,{id:"Global variables"}),variablesContainer:t.getVariables(),emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first global variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"These variables hold additional information on a project."}),onComputeAllVariableNames:u}]}),[t,u]),p=c.useMemo((function(){return new Bn({project:t})}),[t]);return(0,f.jsx)(Fn,{project:t,projectScopedContainersAccessor:p,open:n,onCancel:r,onApply:i,title:(0,f.jsx)(w.Trans,{id:"Global variables"}),tabs:d,initiallySelectedVariableName:o,shouldCreateInitiallySelectedVariable:s,helpPagePath:"/all-features/variables/global-variables",hotReloadPreviewButtonProps:a,id:"global-variables-dialog",isListLocked:l})},Vn=n(21601),Hn=n(81683),zn=n(32921),Wn=n(57309),Gn=n(94258);var Yn=function(e){for(var t=e.project,n=t.getCurrentPlatform().getAllPlatformExtensions(),r=[],i=function(){var e=n.at(a),i=t.getExtensionProperties().getAllExtensionProperties(e.getName(),t);if(0===i.keys().size())return 1;var o=(0,Gn.ZP)({properties:i,defaultValueProperties:null,getProperties:function(n){return t.getExtensionProperties().getAllExtensionProperties(e.getName(),t)},onUpdateProperty:function(n,r,i){"boolean"===t.getExtensionProperties().getAllExtensionProperties(e.getName(),t).get(r).getType()?t.getExtensionProperties().setValue(e.getName(),r,"1"===i?"true":"false"):t.getExtensionProperties().setValue(e.getName(),r,i)}});r.push((0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:e.getFullName()}),(0,f.jsx)(Wn.Z,{schema:o,instances:[e.getAllProperties()]})]},e.getName()))},a=0;a<n.size();a++)i();return r.length?(0,f.jsx)(U.Z,{children:r}):null},qn=n(79987),Jn=n(90286),Xn=n(11858),Kn=n(65035),Qn=n(49522),$n=n(71106),er=n(68151),tr=2,nr=.2,rr=0,ir=[{value:"top",label:{id:"Top"}},{value:"top-left",label:{id:"Top left corner"}},{value:"top-right",label:{id:"Top right corner"}},{value:"bottom",label:{id:"Bottom"}},{value:"bottom-left",label:{id:"Bottom left corner"}},{value:"bottom-right",label:{id:"Bottom right corner"}}],ar=function(e){var t=e.loadingScreen,n=e.watermark,r=e.onLoadingScreenUpdated,i=e.onChangeSubscription,a=e.project,o=e.resourceManagementProps,s=e.projectScopedContainersAccessor,l=c.useRef(null),u=c.useContext($n.ZP),d=(0,gt.Z)(),p=(0,er.e_)(u.subscription),h=function(){d(),r()},g=c.useRef({minDuration:t.getMinDuration(),logoAndProgressFadeInDuration:t.getLogoAndProgressFadeInDuration(),logoAndProgressLogoFadeInDelay:t.getLogoAndProgressLogoFadeInDelay()});return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"section-title",children:(0,f.jsx)(w.Trans,{id:"Branding"})}),(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Display GDevelop logo at startup (in exported game)"}),checked:t.isGDevelopLogoShownDuringLoadingScreen(),onCheck:function(e,r){(r||n.isGDevelopWatermarkShown()||!l.current||l.current.checkUserHasSubscription())&&(t.showGDevelopLogoDuringLoadingScreen(r),h())}})}),(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"GDevelop logo style"}),value:t.getGDevelopLogoStyle(),onChange:function(e,n,r){t.getGDevelopLogoStyle()!==r&&(t.setGDevelopLogoStyle(r),h())},disabled:!t.isGDevelopLogoShownDuringLoadingScreen(),children:[(0,f.jsx)(P.Z,{value:"light",label:{id:"Light (plain)"}}),(0,f.jsx)(P.Z,{value:"light-colored",label:{id:"Light (colored)"}}),(0,f.jsx)(P.Z,{value:"dark",label:{id:"Dark (plain)"}}),(0,f.jsx)(P.Z,{value:"dark-colored",label:{id:"Dark (colored)"}})]})})]}),(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Display GDevelop watermark after the game is loaded (in exported game)"}),checked:n.isGDevelopWatermarkShown(),onCheck:function(e,r){(r||t.isGDevelopLogoShownDuringLoadingScreen()||!l.current||l.current.checkUserHasSubscription())&&(n.showGDevelopWatermark(r),r?(t.setMinDuration(g.current.minDuration),t.setLogoAndProgressFadeInDuration(g.current.logoAndProgressFadeInDuration),t.setLogoAndProgressLogoFadeInDelay(g.current.logoAndProgressLogoFadeInDelay)):l.current&&!l.current.hasUserSubscription()&&(t.getMinDuration()<tr&&t.setMinDuration(tr),t.getLogoAndProgressFadeInDuration()>nr&&t.setLogoAndProgressFadeInDuration(nr),t.getLogoAndProgressLogoFadeInDelay()>rr&&t.setLogoAndProgressLogoFadeInDelay(rr)),h())}})}),(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,justifyContent:"center",children:(0,f.jsx)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"GDevelop watermark placement"}),value:n.getPlacement(),onChange:function(e,r,i){t.getGDevelopLogoStyle()!==i&&(n.setPlacement(i),h())},disabled:!n.isGDevelopWatermarkShown(),children:ir.map((function(e){return(0,f.jsx)(P.Z,{value:e.value,label:e.label},e.value)}))})})]}),!p&&(0,f.jsx)(Qn.Z,{subscriptionDialogOpeningReason:"Disable GDevelop splash at startup",recommendedPlanIdIfNoSubscription:"gdevelop_silver",placementId:"gdevelop-branding",children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Get a silver or gold subscription to disable GDevelop branding."})})})]}),(0,f.jsx)(N.Z,{size:"section-title",children:(0,f.jsx)(w.Trans,{id:"Loading screen"})}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Background"})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(Kn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Background image"}),project:a,resourceManagementProps:o,projectScopedContainersAccessor:s,resourceKind:"image",resourceName:t.getBackgroundImageResourceName(),defaultNewResourceName:"LoadingScreenBackground",onChange:function(e){t.getBackgroundImageResourceName()!==e&&(t.setBackgroundImageResourceName(e),h())}})}),(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,f.jsx)(Jn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Background color"}),disableAlpha:!0,color:(0,Xn.m0)(t.getBackgroundColor()),onChange:function(e){var n=t.getBackgroundColor(),r=(0,Xn.UQ)(e);n!==r&&(t.setBackgroundColor(r),h())}}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Background fade in duration (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getBackgroundFadeInDuration(),onChange:function(e){var n=t.getBackgroundFadeInDuration(),r=Math.max(0,parseFloat(e));n!==r&&(t.setBackgroundFadeInDuration(r),h())}})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Progress bar"})}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Show progress bar"}),checked:t.getShowProgressBar(),onCheck:function(e,n){t.setShowProgressBar(n),h()}}),(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Progress bar minimum width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarMinWidth(),onChange:function(e){var n=t.getProgressBarMinWidth(),r=Math.max(0,parseFloat(e)||0);n!==r&&(t.setProgressBarMinWidth(r),h())},helperMarkdownText:r._({id:"In pixels. 0 to ignore."})}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Progress bar width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarWidthPercent(),onChange:function(e){var n=t.getProgressBarWidthPercent(),r=Math.min(100,Math.max(1,parseFloat(e)||0));n!==r&&(t.setProgressBarWidthPercent(r),h())},helperMarkdownText:r._({id:"As a percent of the game width."})}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Progress bar maximum width"}),fullWidth:!0,type:"number",value:""+t.getProgressBarMaxWidth(),onChange:function(e){var n=t.getProgressBarMaxWidth(),r=Math.max(0,parseFloat(e)||0);n!==r&&(t.setProgressBarMaxWidth(r),h())},helperMarkdownText:r._({id:"In pixels. 0 to ignore."})})]}),(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Progress bar height"}),fullWidth:!0,type:"number",value:""+t.getProgressBarHeight(),onChange:function(e){var n=t.getProgressBarHeight(),r=Math.max(1,parseFloat(e)||0);n!==r&&(t.setProgressBarHeight(r),h())},helperMarkdownText:r._({id:"In pixels."})}),(0,f.jsx)(Jn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Progress bar color"}),disableAlpha:!0,color:(0,Xn.m0)(t.getProgressBarColor()),onChange:function(e){var n=t.getProgressBarColor(),r=(0,Xn.UQ)(e);n!==r&&(t.setProgressBarColor(r),h())}})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Duration"})}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Minimum duration of the screen (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getMinDuration(),onChange:function(e){var r=Math.max(0,parseFloat(e)||0);r<tr&&!n.isGDevelopWatermarkShown()&&l.current&&!l.current.checkUserHasSubscription()||t.getMinDuration()!==r&&(t.setMinDuration(r),g.current.minDuration=r,h())},helperMarkdownText:r._({id:"When previewing the game in the editor, this duration is ignored (the game preview starts as soon as possible)."})}),(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,f.jsx)(yn.Z,{floatingLabelText:t.isGDevelopLogoShownDuringLoadingScreen()?(0,f.jsx)(w.Trans,{id:"Logo and progress fade in delay (in seconds)"}):(0,f.jsx)(w.Trans,{id:"Progress fade in delay (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getLogoAndProgressLogoFadeInDelay(),onChange:function(e){var r=Math.max(0,parseFloat(e)||0);r>rr&&!n.isGDevelopWatermarkShown()&&l.current&&!l.current.checkUserHasSubscription()||t.getLogoAndProgressLogoFadeInDelay()!==r&&(t.setLogoAndProgressLogoFadeInDelay(r),g.current.logoAndProgressLogoFadeInDelay=r,h())}}),(0,f.jsx)(yn.Z,{floatingLabelText:t.isGDevelopLogoShownDuringLoadingScreen()?(0,f.jsx)(w.Trans,{id:"Logo and progress fade in duration (in seconds)"}):(0,f.jsx)(w.Trans,{id:"Progress fade in duration (in seconds)"}),step:.1,fullWidth:!0,type:"number",value:""+t.getLogoAndProgressFadeInDuration(),onChange:function(e){var r=Math.max(0,parseFloat(e)||0);r>nr&&!n.isGDevelopWatermarkShown()&&l.current&&!l.current.checkUserHasSubscription()||t.getLogoAndProgressFadeInDuration()!==r&&(t.setLogoAndProgressFadeInDuration(r),g.current.logoAndProgressFadeInDuration=r,h())}})]}),t.isGDevelopLogoShownDuringLoadingScreen()?(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"Progress bar fade in delay and duration will be applied to GDevelop logo."})}):null,(0,f.jsx)(qn.Z,{ref:l,onChangeSubscription:i,mode:"mandatory",id:"Disable GDevelop splash at startup",title:(0,f.jsx)(w.Trans,{id:"Disable GDevelop splash at startup"}),placementId:"gdevelop-branding"})]})}})},or=n(18930),sr=n(68009),lr=n(39173),cr=n(19169),ur=n(69186),dr=n(72402),pr=n(31318),fr=function(e,t){return(0,f.jsx)(J.Z,{dense:!0,component:"div",style:dr.nT.listItem,children:(0,f.jsx)(X.Z,{style:dr.nT.listItemText,primary:(0,f.jsx)("div",{title:e.value,style:pr.t,children:e.text})})})},hr={maxHeight:250,overflowY:"scroll"},gr=(0,ur.Z)({root:{height:25},deleteIcon:{cursor:"default"}}),mr=c.forwardRef((function(e,t){var n=gr(),r=c.useRef(null);return c.useImperativeHandle(t,(function(){return{focusInput:function(){r.current&&r.current.focus()}}})),(0,f.jsx)(w.I18n,{children:function(t){var i=t.i18n;return(0,f.jsx)(cr.ZP,{multiple:!0,value:e.value,onChange:e.onChange,inputValue:e.inputValue,onInputChange:e.onInputChange,options:e.dataSource,popupIcon:(0,f.jsx)(st.Z,{}),PaperComponent:dr.lp,renderOption:fr,getOptionLabel:function(e){return e.text},getOptionDisabled:function(t){return t.disabled||!!e.value.find((function(e){return e&&e.value===t.value}))||e.optionsLimit&&e.value.length>=e.optionsLimit},getOptionSelected:function(e,t){return e.value===t.value},loading:e.loading,ListboxProps:{className:e.disableAutoTranslate?"notranslate":"",style:(0,l.Z)((0,l.Z)({},dr.nT.listbox),hr)},renderInput:function(t){return(0,f.jsx)(lr.Z,(0,l.Z)((0,l.Z)({},t),{},{color:"secondary",InputProps:(0,l.Z)((0,l.Z)({},t.InputProps),{},{placeholder:e.hintText&&i._(e.hintText)}),label:e.floatingLabelText,helperText:e.error||e.helperText,variant:"filled",error:!!e.error,inputRef:r,disabled:e.disabled||e.loading}))},fullWidth:e.fullWidth,disabled:e.disabled||e.loading,noOptionsText:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"No options"})}),loadingText:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Loading..."})}),ChipProps:{classes:n,className:e.disableAutoTranslate?"notranslate":""}})}})})),xr=n(41418),vr=function(e){if(e)return"Error while loading users"},br=function(e){var t=e.userIds,n=e.onChange,r=e.floatingLabelText,i=e.helperText,l=e.disabled,u=(0,gt.Z)(),d=c.useState([]),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=(0,c.useState)(""),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=(0,c.useState)(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=c.useContext($n.ZP).profile,w=k?[{text:k.username||"Yourself (no username)",value:k.id}]:[],T=c.useState([]),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=c.useState(null),M=(0,s.Z)(E,2),L=M[0],A=M[1],O=c.useRef(null),R=(0,sr.N)((0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(null),v){e.next=4;break}return I([]),e.abrupt("return");case 4:return e.prev=4,Z(!0),e.next=8,(0,xr.me)(v);case 8:t=e.sent,n=k?t.filter((function(e){return e.id!==k.id})):t,I(n),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),A(e.t0),console.error("Could not load the users: ",e.t0);case 17:return e.prev=17,Z(!1),D(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[4,13,17,21]])}))),500);c.useEffect((function(){R()}),[R,v]);var F=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(null),t.length){e.next=4;break}return g([]),e.abrupt("return");case 4:return e.prev=4,Z(!0),e.next=8,(0,xr.TL)(t);case 8:n=e.sent,g(t.map((function(e){var t=n[e];return t?{text:t.username||"".concat(k&&t.id===k.id?"Yourself":"Unknown"," (no username)"),value:t.id}:null})).filter(Boolean)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),A(e.t0),console.error("Could not load the users: ",e.t0);case 16:return e.prev=16,Z(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,12,16,19]])}))),[t,k]),D=c.useCallback((function(){O.current&&O.current.focusInput()}),[]);return c.useEffect((function(){F()}),[F]),(0,f.jsx)(mr,{hintText:{id:"Start typing a username"},floatingLabelText:r,helperText:i,value:h,onChange:function(e,t){t&&(g(t),n(t.map((function(e){return{username:e.text,userId:e.value}}))),u())},inputValue:v,onInputChange:function(e,t){b(t)},ref:O,dataSource:w.concat(P.map((function(e){return e.username&&e.id?{text:e.username,value:e.id}:null})).filter(Boolean)),loading:y||l,fullWidth:!0,error:vr(L),disableAutoTranslate:!0})},Cr=n(16999),jr=n(1879),yr=n(57597),Zr=n(97396),kr=function(e){var t=e;/[\u0411\u0413\u0414\u0416\u0417\u0418\u0419\u041b\u041f\u0424\u0426\u0427\u0428\u0429\u042b\u042d\u042e\u042f\u0431\u0432\u0433\u0434\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043f\u0442\u0444\u0446\u0447\u0448\u0449\u044b\u044d\u044e\u044f]/.test(e)&&(t=e.split("").map((function(e){var t=Zr[e];return void 0===t?e:t})).join(""));var n=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"-").toLowerCase().slice(0,30);return n.length<6&&(n=n.concat(new Array(6-n.length).fill("-").join(""))),n};function wr(e){var t=e.gameId,n=e.disabled,r=e.setName,i=e.name,l=e.categories,u=e.setCategories,d=e.setDescription,p=e.description,h=e.setAuthorIds,g=e.setAuthorUsernames,m=e.authorIds,x=e.setOwnerIds,v=e.ownerIds,b=e.setPlayableWithKeyboard,C=e.playWithKeyboard,j=e.setPlayableWithGamepad,y=e.playWithGamepad,Z=e.setPlayableWithMobile,k=e.playWithMobile,T=e.setOrientation,S=e.orientation,I=e.userSlug,E=e.setUserSlug,L=e.gameSlug,A=e.setGameSlug,O=e.setDiscoverable,R=e.discoverable,F=e.displayThumbnail,D=e.isPublishedOnGdGames,B=e.setIsPublishedOnGdGames,U=e.acceptsAdvertisementsOnGdGames,V=e.setAcceptsAdvertisementsOnGdGames,H=e.acceptsGameComments,z=e.setAcceptsGameComments,W=e.thumbnailUrl,G=e.onGameUpdated,Y=e.onUpdatingGame,q=e.canBePublishedOnGdGames,J=c.useState(""),X=(0,s.Z)(J,2),K=X[0],Q=X[1],$=c.useContext($n.ZP).profile,ee=I&&!!I.length&&$&&$.username,te=ee&&$&&I!==$.username,ne=c.useState([]),re=(0,s.Z)(ne,2),ie=re[0],ae=re[1],oe=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Cr.bb)();case 3:t=e.sent,ae(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("An error occurred while fetching game categories.",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);c.useEffect((function(){oe()}),[oe]);var se=!D;return(0,f.jsx)(w.I18n,{children:function(e){var a=e.i18n;return(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,children:[F&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.sg,{noMargin:!0,alignItems:"stretch",children:(0,f.jsx)(jr.J,{gameName:i,thumbnailUrl:W,gameId:t,canUpdateThumbnail:!0,disabled:n,onGameUpdated:G,onUpdatingGame:Y,fullWidthOnMobile:!0})}),(0,f.jsx)(M.LZ,{})]}),(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Game name"}),fullWidth:!0,type:"text",value:i,onChange:r,autoFocus:"desktop",disabled:n}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Game description"}),fullWidth:!0,type:"text",value:p||"",onChange:d,multiline:!0,rows:5,disabled:n})]})]}),(0,f.jsx)(br,{userIds:m,onChange:function(e){h(e.map((function(e){return e.userId}))),g(e.map((function(e){return e.username})))},floatingLabelText:(0,f.jsx)(w.Trans,{id:"Authors"}),helperText:(0,f.jsx)(w.Trans,{id:"Select the usernames of the authors of this project. They will be displayed in the selected order, if you publish this game as an example or in the community."}),disabled:n}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Device orientation (for mobile)"}),value:S,onChange:function(e,t,n){return T(n)},disabled:n,children:[(0,f.jsx)(P.Z,{value:"default",label:{id:"Platform default"}}),(0,f.jsx)(P.Z,{value:"landscape",label:{id:"Landscape"}}),(0,f.jsx)(P.Z,{value:"portrait",label:{id:"Portrait"}})]}),b&&j&&Z&&(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{color:"secondary",size:"body-small",children:(0,f.jsx)(w.Trans,{id:"Select the controls that apply:"})}),(0,f.jsxs)(_.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Keyboard"}),checked:!!C,onCheck:function(e,t){return b(t)},disabled:n}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Gamepad"}),checked:!!y,onCheck:function(e,t){return j(t)},disabled:n}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Touch (mobile)"}),checked:!!k,onCheck:function(e,t){return Z(t)},disabled:n})]})]}),void 0!==q&&!q&&(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"You can configure the following properties and they will be applied as soon as you share your game with an export to gd.games."})}),B&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(yr.Z,{labelPosition:"right",toggled:!!D,onToggle:function(e,t){return B(t)},label:a._({id:"Publish game on gd.games"}),disabled:!q})})})]}),(x||E&&A||V||O||u)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(or.Z,{orientation:"horizontal"}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Publishing on gd.games"})})})]}),x&&(0,f.jsx)(br,{userIds:v||[],onChange:function(e){return x(e.map((function(e){return e.userId})))},floatingLabelText:(0,f.jsx)(w.Trans,{id:"Owners"}),helperText:(0,f.jsx)(w.Trans,{id:"Select the usernames of the owners of this project to let them manage this game builds. Be aware that owners can revoke your ownership."}),disabled:n}),E&&A&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(M.x1,{children:[(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"User name in the game URL"}),value:I||"",onChange:function(e,t,n){return E(n)},disabled:!te||n||se,children:[$&&$.username&&(0,f.jsx)(P.Z,{value:$.username,label:$.username,shouldNotTranslate:!0}),I&&(!$||I!==$.username)&&(0,f.jsx)(P.Z,{value:I,label:I,shouldNotTranslate:!0})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(yn.Z,{disabled:!ee||n||se,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Game name in the game URL"}),fullWidth:!0,maxLength:30,type:"text",value:ee&&L||"",onChange:function(e){return A(kr(e))}})]}),!ee&&(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"Usernames are required to choose a custom game URL."})})]}),u&&(0,f.jsx)(mr,{hintText:{id:"Select a genre"},floatingLabelText:(0,f.jsx)(w.Trans,{id:"Genres"}),helperText:(0,f.jsx)(w.Trans,{id:"Select up to 3 genres for the game to be visible on gd.games's categories pages!"}),value:l?l.map((function(e){return{value:e,text:(0,Cr.Oo)(e,a)}})):[],onChange:function(e,t){u(t?t.map((function(e){return e.value})):[]),Q("")},inputValue:K,onInputChange:function(e,t,n){"input"===n&&Q(t)},dataSource:ie.map((function(e){return{value:e.name,text:(0,Cr.Oo)(e.name,a),disabled:"admin-only"===e.type}})),fullWidth:!0,optionsLimit:3,disabled:n||se,loading:0===ie.length}),O&&(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Visibility"}),value:R?"visible":"hidden",onChange:function(e,t,n){return O("visible"===n)},disabled:n||se,children:[(0,f.jsx)(P.Z,{value:"visible",label:{id:"Visible in the search and your profile"}}),(0,f.jsx)(P.Z,{value:"hidden",label:{id:"Hidden"}})]}),V&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(yr.Z,{disabled:se,labelPosition:"right",toggled:!!U,onToggle:function(e,t){return V(t)},label:a._({id:"Enable ads and revenue sharing on the game page"})})})}),z&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(yr.Z,{disabled:se,labelPosition:"right",toggled:!!H,onToggle:function(e,t){return z(t)},label:a._({id:"Collect feedback from players"})})})})]})}})}var Tr=wr,Sr=n(72410),Pr=function(e,t){var n=t.width,r=t.height,i=t.transparentBorderSize,a=void 0===i?0:i;return new Promise((function(t,i){var o=document.createElement("canvas");o.width=n,o.height=r;var s=o.getContext("2d");s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high";var l=new Image;l.addEventListener("load",(function(){try{s.drawImage(l,a,a,n-2*a,r-2*a),o.toBlob((function(e){t(URL.createObjectURL(e))}),"image/png")}catch(e){i("An error occurred while generating an icon")}})),l.addEventListener("error",(function(e){i("An error occurred while loading the input image")})),l.src=e}))},Ir=n.g.gd,Er=[512],Mr=[192,144,96,72,48,36],Lr=[1024,180,167,152,144,120,114,100,87,80,76,72,60,58,57,50,40,29,20],Ar=function(e){var t=e.project,n=e.resourceManagementProps,i=e.projectScopedContainersAccessor,l=e.desktopIconResourceNames,u=e.onDesktopIconResourceNamesChanged,d=e.androidIconResourceNames,p=e.onAndroidIconResourceNamesChanged,h=e.androidWindowSplashScreenAnimatedIconResourceName,g=e.onAndroidWindowSplashScreenAnimatedIconResourceNameChanged,m=e.iosIconResourceNames,x=e.onIosIconResourceNamesChanged,v=(0,Ye.Z)().showAlert,b=c.useRef(null),C=c.useState(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var i,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.current&&b.current.files&&b.current.files[0]){e.next=3;break}return console.error("Could't find selected file. Aborting icon generation."),e.abrupt("return");case 3:return i=URL.createObjectURL(b.current.files[0]),s=t.getResourcesManager(),e.prev=5,Z(!0),e.next=9,Promise.all([].concat((0,r.Z)(Er.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="desktop-icon-".concat(t,".png"),e.next=3,Pr(i,{width:t,height:t});case 3:return e.t1=e.sent,e.abrupt("return",{resourceName:e.t0,blobDataUrl:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),(0,r.Z)(Mr.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="android-icon-".concat(t,".png"),e.next=3,Pr(i,{width:t,height:t});case 3:return e.t1=e.sent,e.abrupt("return",{resourceName:e.t0,blobDataUrl:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),[(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pr(i,{width:864,height:864,transparentBorderSize:144});case 2:return e.t0=e.sent,e.abrupt("return",{resourceName:"android-windowSplashScreenAnimatedIcon.png",blobDataUrl:e.t0});case 4:case"end":return e.stop()}}),e)})))()],(0,r.Z)(Lr.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="ios-icon-".concat(t,".png"),e.next=3,Pr(i,{width:t,height:t});case 3:return e.t1=e.sent,e.abrupt("return",{resourceName:e.t0,blobDataUrl:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))));case 9:return(l=e.sent).forEach((function(e){var t=e.resourceName,n=e.blobDataUrl,r=JSON.stringify({extension:".png",localFilePath:"./assets/".concat(t)});if(s.hasResource(t))s.getResource(t).setFile(n),s.getResource(t).setMetadata(r);else{var i=new Ir.ImageResource;i.setFile(n),i.setName(t),i.setMetadata(r),s.addResource(i),i.delete()}})),e.next=13,n.onFetchNewlyAddedResources();case 13:n.onNewResourcesAdded(),Sr.Z.burstUrlsCacheForResources(t,l.map((function(e){return e.resourceName}))),setTimeout((function(){u(Er.map((function(e){return"desktop-icon-".concat(e,".png")}))),p(Mr.map((function(e){return"android-icon-".concat(e,".png")}))),g("android-windowSplashScreenAnimatedIcon.png"),x(Lr.map((function(e){return"ios-icon-".concat(e,".png")}))),Z(!1)}),200),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(5),v({title:{id:"Some icons could not be generated."},message:{id:"An error occurred while generating some icons. Verify that the image is valid and try again."}}),Z(!1);case 22:return e.prev=22,URL.revokeObjectURL(i),b.current&&(b.current.value=""),e.finish(22);case 26:case"end":return e.stop()}}),e,null,[[5,18,22,26]])})));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(w.Trans,{id:"Generate all your icons from 1 file"}),(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Choose file"}),disabled:y,onClick:function(){b.current&&b.current.click()}})]})}),(0,f.jsx)("input",{type:"file",onChange:k,ref:b,style:{display:"none"}}),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Desktop (Windows, macOS and Linux) icon"})}),Er.map((function(e,a){return(0,f.jsx)(Kn.Z,{floatingLabelText:"Desktop icon (".concat(e,"x").concat(e," px)"),project:t,resourceManagementProps:n,projectScopedContainersAccessor:i,resourceKind:"image",resourceName:l[a],defaultNewResourceName:"DesktopIcon"+e,onChange:function(e){var t=(0,r.Z)(l);t[a]=e,u(t)},disabled:y},e)})),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Android icons and Android 12+ splashscreen"})}),(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(Kn.Z,{floatingLabelText:"Android 12+ splashscreen icon (576x576 px)",project:t,resourceManagementProps:n,projectScopedContainersAccessor:i,resourceKind:"image",resourceName:h,defaultNewResourceName:"AndroidSplashscreenIcon",onChange:function(e){g(e)},helperMarkdownText:r._({id:"The image should be at least 864x864px, and the logo must fit [within a circle of 576px](https://developer.android.com/guide/topics/ui/splash-screen#splash_screen_dimensions). Transparent borders are automatically added when generated to help ensuring"}),disabled:y})}}),Mr.map((function(e,a){return(0,f.jsx)(Kn.Z,{floatingLabelText:"Android icon (".concat(e,"x").concat(e," px)"),project:t,resourceManagementProps:n,projectScopedContainersAccessor:i,resourceKind:"image",resourceName:d[a],defaultNewResourceName:"AndroidIcon"+e,onChange:function(e){var t=(0,r.Z)(d);t[a]=e,p(t)},disabled:y},e)})),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"iOS (iPhone and iPad) icons"})}),Lr.map((function(e,a){return(0,f.jsx)(Kn.Z,{floatingLabelText:"iOS icon (".concat(e,"x").concat(e," px)"),project:t,resourceManagementProps:n,projectScopedContainersAccessor:i,resourceKind:"image",resourceName:m[a],defaultNewResourceName:"IosIcon"+e,onChange:function(e){var t=(0,r.Z)(m);t[a]=e,x(t)},disabled:y},e)}))]})},Or=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Project icons"}),scope:"project-icons",showOnTop:!0,children:(0,f.jsx)(Ar,(0,l.Z)({},e))})};function Rr(e,t,n){var r=n.gameResolutionWidth,i=n.gameResolutionHeight,a=n.adaptGameResolutionAtRuntime,o=n.name,s=n.description,l=n.authorIds,c=n.authorUsernames,u=n.author,d=n.version,p=n.packageName,f=n.orientation,h=n.scaleMode,g=n.pixelsRounding,m=n.sizeOnStartupMode,x=n.antialiasingMode,v=n.isAntialisingEnabledOnMobile,b=n.minFPS,C=n.maxFPS,j=n.isFolderProject,y=n.useDeprecatedZeroAsDefaultZOrder,Z=n.desktopIconResourceNames,k=n.androidIconResourceNames,w=n.androidWindowSplashScreenAnimatedIconResourceName,T=n.iosIconResourceNames,S=n.sceneResourcesPreloading,P=n.sceneResourcesUnloading;e.setGameResolutionSize(r,i),e.setAdaptGameResolutionAtRuntime(a),e.setName(o),e.setDescription(s);var I=e.getAuthorIds();I.clear(),l.forEach((function(e){return I.push_back(e)}));var E=e.getAuthorUsernames();E.clear(),c.forEach((function(e){return E.push_back(e)})),e.setAuthor(u),e.setVersion(d),e.setPackageName(p),e.setOrientation(f),e.setScaleMode(h),e.setPixelsRounding(g),e.setSizeOnStartupMode(m),e.setAntialiasingMode(x),e.setAntialisingEnabledOnMobile(v),e.setMinimumFPS(b),e.setMaximumFPS(C),e.setFolderProject(j),e.setUseDeprecatedZeroAsDefaultZOrder(y),e.setSceneResourcesPreloading(S),e.setSceneResourcesUnloading(P);var M=e.getPlatformSpecificAssets();return Er.forEach((function(e,t){var n=Z[t];M.set("desktop","icon-".concat(e),n)})),Mr.forEach((function(e,t){var n=k[t];M.set("android","icon-".concat(e),n)})),M.set("android","windowSplashScreenAnimatedIcon",w),Lr.forEach((function(e,t){var n=T[t];M.set("ios","icon-".concat(e),n)})),(0,zn.vv)(t,(0,zn.nu)(t,e))}var Fr=function(e){var t=e.project,n=e.hotReloadPreviewButtonProps,r=t.getPlatformSpecificAssets(),i=c.useMemo((function(){return function(e){var t=e.getPlatformSpecificAssets();return{gameResolutionWidth:e.getGameResolutionWidth(),gameResolutionHeight:e.getGameResolutionHeight(),adaptGameResolutionAtRuntime:e.getAdaptGameResolutionAtRuntime(),name:e.getName(),description:e.getDescription(),author:e.getAuthor(),authorIds:e.getAuthorIds().toJSArray(),authorUsernames:e.getAuthorUsernames().toJSArray(),version:e.getVersion(),packageName:e.getPackageName(),orientation:e.getOrientation(),scaleMode:e.getScaleMode(),pixelsRounding:e.getPixelsRounding(),sizeOnStartupMode:e.getSizeOnStartupMode(),antialiasingMode:e.getAntialiasingMode(),isAntialisingEnabledOnMobile:e.isAntialisingEnabledOnMobile(),minFPS:e.getMinimumFPS(),maxFPS:e.getMaximumFPS(),isFolderProject:e.isFolderProject(),useDeprecatedZeroAsDefaultZOrder:e.getUseDeprecatedZeroAsDefaultZOrder(),desktopIconResourceNames:Er.map((function(e){return t.get("desktop","icon-".concat(e))})),androidIconResourceNames:Mr.map((function(e){return t.get("android","icon-".concat(e))})),androidWindowSplashScreenAnimatedIconResourceName:t.get("android","windowSplashScreenAnimatedIcon"),iosIconResourceNames:Lr.map((function(e){return t.get("ios","icon-".concat(e))})),sceneResourcesPreloading:e.getSceneResourcesPreloading(),sceneResourcesUnloading:e.getSceneResourcesUnloading()}}(t)}),[t]),l=c.useState(i.name),u=(0,s.Z)(l,2),d=u[0],p=u[1],h=c.useState(i.description),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(i.authorIds),b=(0,s.Z)(v,2),C=b[0],j=b[1],Z=c.useState(i.authorUsernames),k=(0,s.Z)(Z,2),S=k[0],I=k[1],M=c.useState(i.gameResolutionWidth),L=(0,s.Z)(M,2),A=L[0],O=L[1],R=c.useState(i.gameResolutionHeight),F=(0,s.Z)(R,2),D=F[0],U=F[1],V=c.useState(i.adaptGameResolutionAtRuntime),H=(0,s.Z)(V,2),z=H[0],W=H[1],q=c.useState(i.author),J=(0,s.Z)(q,2),X=J[0],K=J[1],Q=c.useState(i.version),$=(0,s.Z)(Q,2),ee=$[0],te=$[1],ne=c.useState(i.packageName),re=(0,s.Z)(ne,2),ie=re[0],ae=re[1],oe=c.useState(i.orientation),se=(0,s.Z)(oe,2),le=se[0],ce=se[1],ue=c.useState(i.scaleMode),de=(0,s.Z)(ue,2),pe=de[0],fe=de[1],he=c.useState(i.pixelsRounding),ge=(0,s.Z)(he,2),me=ge[0],xe=ge[1],ve=c.useState(i.sizeOnStartupMode),Ce=(0,s.Z)(ve,2),ye=Ce[0],Ze=Ce[1],ke=c.useState(i.antialiasingMode),we=(0,s.Z)(ke,2),Te=we[0],Se=we[1],Pe=c.useState(i.isAntialisingEnabledOnMobile),Ie=(0,s.Z)(Pe,2),Ee=Ie[0],Me=Ie[1],Le=c.useState(i.minFPS),Ae=(0,s.Z)(Le,2),Oe=Ae[0],Re=Ae[1],Fe=c.useState(i.maxFPS),De=(0,s.Z)(Fe,2),Ne=De[0],_e=De[1],Be=c.useState(i.isFolderProject),Ue=(0,s.Z)(Be,2),Ve=Ue[0],He=Ue[1],ze=c.useState(i.useDeprecatedZeroAsDefaultZOrder),We=(0,s.Z)(ze,2),Ge=We[0],Ye=We[1],qe=c.useState(Er.map((function(e){return r.get("desktop","icon-".concat(e))}))),Ke=(0,s.Z)(qe,2),Qe=Ke[0],$e=Ke[1],et=c.useState(Mr.map((function(e){return r.get("android","icon-".concat(e))}))),tt=(0,s.Z)(et,2),nt=tt[0],rt=tt[1],it=c.useState(r.get("android","windowSplashScreenAnimatedIcon")),at=(0,s.Z)(it,2),ot=at[0],st=at[1],lt=c.useState(Lr.map((function(e){return r.get("ios","icon-".concat(e))}))),ct=(0,s.Z)(lt,2),ut=ct[0],dt=ct[1],pt=c.useState(i.sceneResourcesPreloading),ft=(0,s.Z)(pt,2),ht=ft[0],gt=ft[1],mt=c.useState(i.sceneResourcesUnloading),xt=(0,s.Z)(mt,2),vt=xt[0],bt=xt[1],Ct=(0,be.UQ)().isMobile,jt=c.useState(e.initialTab),yt=(0,s.Z)(jt,2),Zt=yt[0],kt=yt[1],wt=Je({serializableObject:t.getLoadingScreen(),onCancel:e.onClose}),Tt=wt.onCancelChanges,St=wt.notifyOfChange,Pt=Je({serializableObject:t.getExtensionProperties(),onCancel:Tt}),It=Pt.onCancelChanges,Et=Pt.notifyOfChange,Mt=function(){var n=(0,o.Z)((0,a.Z)().mark((function n(){var r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=d!==i.name?{newName:d}:{},n.next=3,e.onApply(r);case 3:if(n.sent){n.next=6;break}return n.abrupt("return");case 6:Rr(t,e.i18n,{gameResolutionWidth:A,gameResolutionHeight:D,adaptGameResolutionAtRuntime:z,name:d,description:m,author:X,authorIds:C,authorUsernames:S,version:ee,packageName:ie,orientation:le,scaleMode:pe,pixelsRounding:me,antialiasingMode:Te,isAntialisingEnabledOnMobile:Ee,sizeOnStartupMode:ye,minFPS:Oe,maxFPS:Ne,isFolderProject:Ve,useDeprecatedZeroAsDefaultZOrder:Ge,desktopIconResourceNames:Qe,androidIconResourceNames:nt,androidWindowSplashScreenAnimatedIconResourceName:ot,iosIconResourceNames:ut,sceneResourcesPreloading:ht,sceneResourcesUnloading:vt})&&e.onPropertiesApplied(r);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,f.jsx)(w.I18n,{children:function(r){var i=r.i18n;return(0,f.jsx)(c.Fragment,{children:(0,f.jsxs)(E.ZP,{id:"project-properties-dialog",title:(0,f.jsx)(w.Trans,{id:"Game properties"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:It},"cancel"),(0,f.jsx)(E.vF,{id:"apply-button",label:(0,f.jsx)(w.Trans,{id:"Apply"}),primary:!0,onClick:Mt},"apply")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/interface/project-manager/properties"},"help"),n?(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(Xe,{}),label:Ct?(0,f.jsx)(w.Trans,{id:"Preview"}):(0,f.jsx)(w.Trans,{id:"Run a preview (with loading & branding)"}),onClick:n.launchProjectWithLoadingScreenPreview},"hot-reload-preview-button"):null],onRequestClose:It,onApply:Mt,open:e.open,fullHeight:!0,fixedContent:(0,f.jsx)(B.m,{value:Zt,onChange:kt,options:[{label:(0,f.jsx)(w.Trans,{id:"Properties"}),value:"properties"},{label:(0,f.jsx)(w.Trans,{id:"Branding and Loading screen"}),value:"loading-screen"},{label:(0,f.jsx)(w.Trans,{id:"Icons"}),value:"icons"}]}),children:["properties"===Zt&&(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Game Info"})}),(0,f.jsx)(Tr,{gameId:t.getProjectUuid(),name:d,setName:function(e){e.trim()!==d&&(p(e.trim()),Et())},description:m,setDescription:function(e){e!==m&&(x(e.trim()),Et())},authorIds:C,setAuthorIds:function(e){j(e),Et()},setAuthorUsernames:function(e){I(e),Et()},orientation:le,setOrientation:function(e){e!==le&&(ce(e),Et())}}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Packaging"})}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Package name (for iOS and Android)"}),fullWidth:!0,hintText:"com.example.mygame",type:"text",value:ie,onChange:function(e){e!==ie&&(ae(e),Et())},errorText:(0,zn.O8)(ie)?void 0:(0,f.jsx)(w.Trans,{id:'The package name is containing invalid characters or not following the convention "xxx.yyy.zzz" (numbers allowed after a letter only).'})}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Version number (X.Y.Z)"}),fullWidth:!0,hintText:"1.0.0",type:"text",value:ee,onChange:function(e){e!==ee&&(te(e),Et())}}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Publisher name"}),fullWidth:!0,translatableHintText:{id:"Your name"},helperMarkdownText:i._({id:"This will be used when packaging and submitting your application to the stores."}),type:"text",value:X,onChange:function(e){e!==X&&(K(e),Et())}}),Ge?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Z Order of objects created from events"})}),(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"When you create an object using an action, GDevelop now sets the Z order of the object to the maximum value that was found when starting the scene for each layer. This allow to make sure that objects that you create are in front of others. This game was created before this change, so GDevelop maintains the old behavior: newly created objects Z order is set to 0. It's recommended that you switch to the new behavior by clicking the following button."})}),(0,f.jsx)(G.Z,{onClick:function(){y.ZP.showConfirmDialog(i._({id:"Make sure to verify all your events creating objects, and optionally add an action to set the Z order back to 0 if it's important for your game. Do you want to continue (recommended)?"}))&&(Ye(!1),Et())},label:(0,f.jsx)(w.Trans,{id:"Switch to create objects with the highest Z order of the layer"})})]}):null,(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Resolution and rendering"})}),(0,f.jsxs)(_.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,f.jsx)(yn.Z,{id:"game-resolution-width",floatingLabelText:(0,f.jsx)(w.Trans,{id:"Game resolution width"}),fullWidth:!0,type:"number",value:""+A,onChange:function(e){var t=Math.max(1,parseInt(e,10)||0);t!==A&&(O(t),Et())}}),(0,f.jsx)(yn.Z,{id:"game-resolution-height",floatingLabelText:(0,f.jsx)(w.Trans,{id:"Game resolution height"}),fullWidth:!0,type:"number",value:""+D,onChange:function(e){var t=Math.max(1,parseInt(e,10)||0);t!==D&&(U(t),Et())}})]}),(0,f.jsxs)(Hn.Z,{id:"game-resolution-resize-mode",fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Game resolution resize mode (fullscreen or window)"}),value:ye,onChange:function(e,t,n){n!==ye&&(Ze(n),Et())},children:[(0,f.jsx)(P.Z,{value:"",label:{id:"No changes to the game size"}}),(0,f.jsx)(P.Z,{value:"scaleOuter",label:{id:"Extend width or height to fill screen (without cropping the game area)"}}),(0,f.jsx)(P.Z,{value:"adaptWidth",label:{id:"Adjust width to fill screen (extend or crop)"}}),(0,f.jsx)(P.Z,{value:"adaptHeight",label:{id:"Adjust height to fill screen (extend or crop)"}})]}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Update resolution during the game to fit the screen or window size"}),disabled:""===ye,checked:z,onCheck:function(e,t){W(t),Et()}}),(0,f.jsxs)(_.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Minimum FPS"}),fullWidth:!0,type:"number",value:""+Oe,onChange:function(e){var t=Math.max(0,parseInt(e,10)||0);t!==Oe&&(Re(t),Et())}}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Maximum FPS (0 for unlimited)"}),fullWidth:!0,type:"number",value:""+Ne,onChange:function(e){var t=Math.max(0,parseInt(e,10)||0);t!==Ne&&(_e(t),Et())}})]}),Ne>0&&Ne<60&&(0,f.jsx)(Y.Z,{identifier:"maximum-fps-too-low",kind:"warning",children:(0,f.jsx)(w.Trans,{id:"Most monitors have a refresh rate of 60 FPS. Setting a maximum number of FPS under 60 will force the game to skip frames, and the real number of FPS will be way below 60, making the game laggy and impacting the gameplay negatively. Consider putting 60 or more for the maximum number or FPS, or disable it by setting 0."})}),Oe<20&&(0,f.jsx)(Y.Z,{identifier:"minimum-fps-too-low",kind:"warning",children:(0,f.jsx)(w.Trans,{id:"Setting the minimum number of FPS below 20 will increase a lot the time that is allowed between the simulation of two frames of the game. If case of a sudden slowdown, or on slow computers, this can create buggy behaviors like objects passing beyond a wall. Consider setting 20 as the minimum FPS."})}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:'Scale mode (also called "Sampling")'}),value:pe,onChange:function(e,t,n){n!==pe&&(fe(n),Et())},children:[(0,f.jsx)(P.Z,{value:"linear",label:{id:"Linear (antialiased rendering, good for most games)"}}),(0,f.jsx)(P.Z,{value:"nearest",label:{id:"Nearest (no antialiasing, good for pixel perfect games)"}})]}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Round pixels when rendering, useful for pixel perfect games."}),checked:me,onCheck:function(e,t){xe(t),Et()}}),"nearest"===pe&&(0,f.jsx)(Y.Z,{identifier:"use-non-smoothed-textures",kind:"info",children:(0,f.jsx)(w.Trans,{id:"To obtain the best pixel-perfect effect possible, go in the resources editor and disable the Smoothing for all images of your game. It will be done automatically for new images added from now."})}),me&&(0,f.jsx)(Y.Z,{identifier:"use-pixel-rounding",kind:"info",children:(0,f.jsx)(w.Trans,{id:"To avoid flickering on objects followed by the camera, use sprites with even dimensions."})}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Antialising for 3D"}),value:"none"===Te?"never":Ee?"always":"notOnMobile",onChange:function(e,t,n){n!==pe&&(Se("never"===n?"none":"MSAA"),Me("always"===n),Et())},children:[(0,f.jsx)(P.Z,{value:"notOnMobile",label:{id:"Not on mobile"}}),(0,f.jsx)(P.Z,{value:"always",label:{id:"Always"}}),(0,f.jsx)(P.Z,{value:"never",label:{id:"Never"}})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Project files"})}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Project file type"}),value:Ve?"folder-project":"single-file",onChange:function(e,t,n){var r="folder-project"===n;r!==Ve&&(He(r),Et())},helperMarkdownText:i._({id:"Note that this option will only have an effect when saving your project on your computer's filesystem from the desktop app. Read about [using Git or GitHub with projects in multiple files](https://wiki.gdevelop.io/gdevelop5/tutorials/using-github-desktop/)."}),children:[(0,f.jsx)(P.Z,{value:"single-file",label:{id:"Single file (default)"}}),(0,f.jsx)(P.Z,{value:"folder-project",label:{id:"Multiple files, saved in folder next to the main file"}})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Resources loading"})}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Background preloading of scene resources"}),value:ht,onChange:function(e){return gt(e.target.value)},helperMarkdownText:i._({id:"This can be customized for each scene in the scene properties dialog."}),children:[(0,f.jsx)(P.Z,{value:"at-startup",label:{id:"Preload at startup (default)"}}),(0,f.jsx)(P.Z,{value:"never",label:{id:"Don't preload"}})]}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Unloading of scene resources"}),value:vt,onChange:function(e){return bt(e.target.value)},children:[(0,f.jsx)(P.Z,{value:"never",label:{id:"Never unload (default)"}}),(0,f.jsx)(P.Z,{value:"at-scene-exit",label:{id:"Unload at scene exit"}})]}),(0,f.jsx)(Yn,{project:t})]}),"loading-screen"===Zt&&(0,f.jsx)(ar,{loadingScreen:t.getLoadingScreen(),watermark:t.getWatermark(),onLoadingScreenUpdated:St,onChangeSubscription:It,project:t,resourceManagementProps:e.resourceManagementProps,projectScopedContainersAccessor:e.projectScopedContainersAccessor}),"icons"===Zt&&(0,f.jsx)(Or,{project:t,resourceManagementProps:e.resourceManagementProps,projectScopedContainersAccessor:e.projectScopedContainersAccessor,desktopIconResourceNames:Qe,onDesktopIconResourceNamesChanged:$e,androidIconResourceNames:nt,onAndroidIconResourceNamesChanged:rt,androidWindowSplashScreenAnimatedIconResourceName:ot,onAndroidWindowSplashScreenAnimatedIconResourceNameChanged:st,iosIconResourceNames:ut,onIosIconResourceNamesChanged:dt})]})})}})},Dr=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Project properties"}),scope:"project-properties",onClose:e.onClose,showOnTop:!0,children:(0,f.jsx)(Fr,(0,l.Z)({},e))})},Nr=n(48210),_r=n(75383),Br=n(38509),Ur={container:{flex:1},grid:{overflowX:"hidden"}},Vr=function(e){var t=e.disableAutoTranslate,n=e.searchItems,r=e.getSearchItemUniqueId,i=e.renderSearchItem,a=e.error,o=e.onRetry,s=c.useRef(null),l=c.useRef(0),u=c.useRef({}),d=c.useCallback((function(e,t){var n=r(e);return u.current[n]!==t&&(u.current[n]=t,!0)}),[r]),p=c.useCallback((function(e){var t=e.index;if(!n||!n[t])return 90;var i=n[t];return u.current[r(i)]||90}),[n,r]),h=c.useCallback((function(e){var t=e.key,r=e.rowIndex,a=e.style;if(!n)return null;var o=n[r];return o?(0,f.jsx)("div",{style:a,children:i(o,(function(e){d(o,e)&&s.current&&s.current.recomputeGridSize(0,r)}))},t):null}),[n,d,i]);return n?0===n.length?(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"No results returned for your search. Try something else or typing at least 2 characters."})}):(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Search results"}),scope:"list-search-result",children:(0,f.jsx)("div",{style:Ur.container,className:t?"notranslate":"",children:(0,f.jsx)(Br.qj,{children:function(e){var t=e.width,r=e.height;return l.current!==t&&(u.current={},l.current=t),(0,f.jsx)(Br.rj,{ref:function(e){e&&e.recomputeGridSize(0,0),s.current=e},width:t,height:r,columnCount:1,columnWidth:t,rowHeight:p,rowCount:n.length,cellRenderer:h,style:Ur.grid,overscanIndicesGetter:function(e){var t=e.cellCount,n=(e.overscanCellsCount,e.startIndex),r=e.stopIndex;return{overscanStartIndex:Math.max(0,n-25),overscanStopIndex:Math.min(t-1,r+25)}}})}})})}):a?(0,f.jsx)(_r.Z,{onRetry:o,children:(0,f.jsx)(w.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}):(0,f.jsx)(Oe.Z,{})},Hr=n(33133),zr=n(73412),Wr=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.66663C7.07953 3.66663 6.33333 4.41282 6.33333 5.33329C6.33333 6.25377 7.07953 6.99996 8 6.99996C8.92048 6.99996 9.66667 6.25377 9.66667 5.33329C9.66667 4.41282 8.92048 3.66663 8 3.66663ZM5.33333 5.33329C5.33333 3.86053 6.52724 2.66663 8 2.66663C9.47276 2.66663 10.6667 3.86053 10.6667 5.33329C10.6667 6.80605 9.47276 7.99996 8 7.99996C6.52724 7.99996 5.33333 6.80605 5.33333 5.33329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.70925 9.61877C5.50186 9.14565 6.5698 8.83329 8 8.83329C9.4302 8.83329 10.4981 9.14565 11.2908 9.61877C12.0838 10.0921 12.5719 10.709 12.8693 11.272C13.1451 11.7943 13.0548 12.3392 12.741 12.7333C12.4405 13.1107 11.954 13.3333 11.435 13.3333H4.565C4.04603 13.3333 3.55953 13.1107 3.25898 12.7333C2.94516 12.3392 2.85485 11.7943 3.1307 11.2721C3.42807 10.709 3.91625 10.0921 4.70925 9.61877ZM5.2218 10.4774C4.60995 10.8427 4.24054 11.3119 4.01495 11.7391C3.93529 11.8899 3.96043 12.0089 4.04125 12.1104C4.13534 12.2285 4.32269 12.3333 4.565 12.3333H11.435C11.6773 12.3333 11.8646 12.2285 11.9587 12.1104C12.0396 12.0089 12.0647 11.8899 11.9851 11.7391C11.7595 11.3119 11.39 10.8427 10.7782 10.4774C10.166 10.112 9.2818 9.83329 8 9.83329C6.7182 9.83329 5.83404 10.112 5.2218 10.4774Z",fill:"currentColor"})]}))})),Gr={chip:{marginRight:2,marginLeft:2,marginBottom:2}},Yr=function(e){var t=e.user,n=e.isClickable,r=void 0!==n&&n,i=e.variant,a=c.useContext(zr.Z).openUserPublicProfile;return(0,f.jsx)(Q.Z,{icon:(0,f.jsx)(Wr,{}),size:"small",style:Gr.chip,variant:i,label:t.username,onClick:r?function(){return a({userId:t.id})}:null,disableAutoTranslate:!0},t.username)},qr=n(37090),Jr={button:{width:"100%"},container:{display:"flex",textAlign:"left",overflow:"hidden",padding:8,width:"100%"}},Xr=function(e){var t=e.id,n=e.project,r=e.extensionShortHeader,i=e.matches,a=e.onChoose,o=e.onHeightComputed,s=n.hasEventsFunctionsExtensionNamed(r.name),l=!!s&&"gdevelop-extension-store"===n.getEventsFunctionsExtension(r.name).getOriginName(),u=c.useRef(null);c.useLayoutEffect((function(){u.current&&o(u.current.getBoundingClientRect().height)}));var d=function(e){var t=r[e];if(!i)return t;var n=i.filter((function(t){return t.key===e}));return 0===n.length?t:(0,f.jsx)(qr.Z,{text:t,matchesCoordinates:n[0].indices})};return(0,f.jsx)(lt.Z,{id:t,onClick:a,focusRipple:!0,style:Jr.button,children:(0,f.jsx)("div",{style:Jr.container,ref:u,children:(0,f.jsxs)(_.pJ,{children:[(0,f.jsx)(Hr.q,{alt:r.fullName,src:r.previewIconUrl,size:64}),(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"baseline",children:[(0,f.jsx)(N.Z,{noMargin:!0,allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:d("fullName")}),s&&(0,f.jsx)(Q.Z,{size:"small",label:l?(0,f.jsx)(w.Trans,{id:"Already installed"}):(0,f.jsx)(w.Trans,{id:"Already in project"}),color:"secondary",variant:"outlined"}),"experimental"===r.tier&&(0,f.jsx)(Q.Z,{size:"small",label:(0,f.jsx)(w.Trans,{id:"Experimental extension"}),color:"primary"})]}),r.authors&&(0,f.jsx)(M.x1,{children:(0,f.jsx)("div",{style:{flexWrap:"wrap"},children:r.authors.map((function(e){return(0,f.jsx)(Yr,{user:e},e.id)}))})}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body2",allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:d("shortDescription")})]})]})})})},Kr=n(39126),Qr=n(11896),$r=n(63854),ei=n(81439),ti=function(e,t){return(0,c.useMemo)((function(){var n="string"===typeof t.extensionName?t.extensionName:t.name;return e.hasEventsFunctionsExtensionNamed(n)?function(e,t){try{var n=(0,ei.diff)(e,t);if(["patch","minor","major"].includes(n))return{type:n,currentVersion:e,newestVersion:t}}catch(r){if(e!==t)return{type:"minor",currentVersion:e,newestVersion:t}}return null}(e.getEventsFunctionsExtension(n).getVersion(),t.version):null}),[e,t])},ni=n(3108),ri=function(e){return e.description.substr(0,e.shortDescription.length)===e.shortDescription?e.description.substr(e.shortDescription.length):e.description},ii=function(e){var t=e.extensionShortHeader,n=e.isInstalling,r=e.onClose,i=e.onInstall,l=e.onEdit,u=e.project,d=u.hasEventsFunctionsExtensionNamed(t.name),p=d?u.getEventsFunctionsExtension(t.name):null,h=!!p&&"gdevelop-extension-store"===p.getOriginName(),g=p?(0,Qr.Lv)((0,Qr.dY)(p.getVersion(),t)):null,m=p?(0,Qr.ZF)(p.getVersion(),t):null,x=ti(u,t),v=c.useState(null),b=(0,s.Z)(v,2),C=b[0],j=b[1],Z=c.useState(null),k=(0,s.Z)(Z,2),S=k[0],P=k[1],I=c.useCallback((function(){j(null),(0,Kr.Fk)(t).then((function(e){P(e)}),(function(e){j(e)}))}),[t]);c.useEffect((function(){return I()}),[I]);var L=(0,Qr.XB)((0,De.r1)(),t.gdevelopVersion),A=!n&&L,O=c.useCallback((function(){if(A&&i)if(d){var e="This extension is already in your project, this will install the latest version. You may have to do some adaptations to make sure your game still works. Do you want to continue?";if(h||(e="An other extension with the same name is already in your project. Installing this extension will overwrite your current extension. Do you want to continue?"),!y.ZP.showConfirmDialog(e))return;i()}else i()}),[i,A,d,h]),R=function(){var e=(0,Ye.Z)().showConfirmation;return(0,o.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Outdated extension"},message:{id:"The extension installed in this project is not up to date. Consider upgrading it before reporting any issue."},confirmButtonLabel:{id:"Close"},dismissButtonLabel:{id:"Report anyway"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}(),F=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=6;break}return e.next=3,R();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:y.ZP.openExternalURL("https://github.com/GDevelopApp/GDevelop-extensions/issues/new"+"?assignees=&labels=&template=bug-report.yml&title=[".concat(t.name,"] Issue short description"));case 7:case"end":return e.stop()}}),e)}))),[t.name,x,R]);return(0,f.jsx)(E.ZP,{title:t.fullName,id:"install-extension-dialog",actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Back"}),primary:!1,onClick:r,disabled:n},"close"),i?(0,f.jsx)($r.Z,{isLoading:n,children:(0,f.jsx)(E.vF,{id:"install-extension-button",label:L?d?h?x&&p&&t.version!==p.getVersion()?"experimental"===t.tier?(0,f.jsx)(w.Trans,{id:"Update (could break the project)"}):(0,f.jsx)(w.Trans,{id:"Update"}):(0,f.jsx)(w.Trans,{id:"Re-install"}):(0,f.jsx)(w.Trans,{id:"Replace existing extension"}):(0,f.jsx)(w.Trans,{id:"Install in project"}):(0,f.jsx)(w.Trans,{id:"Not compatible"}),primary:!0,onClick:O,disabled:!A})},"install"):null],secondaryActions:[l?(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Open in editor"}),onClick:l},"edit-extension"):void 0,d?(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Report an issue"}),onClick:function(){return F()}},"report-extension"):void 0,S&&S.helpPath?(0,f.jsx)(An.Z,{helpPagePath:S.helpPath},"help-button"):void 0].filter(Boolean),open:!0,cannotBeDismissed:n,onRequestClose:r,onApply:i?O:r,children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(M.x1,{alignItems:"flex-start",noMargin:!0,children:[(0,f.jsx)(Hr.q,{alt:t.fullName,src:t.previewIconUrl,size:64}),(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"body2",children:x&&p&&t.version!==p.getVersion()?(0,f.jsx)(w.Trans,{id:"Version {0} ({1} available)",values:{0:p.getVersion(),1:t.version}}):(0,f.jsx)(w.Trans,{id:"Version {0}",values:{0:t.version}})}),(0,f.jsx)(M.x1,{children:(0,f.jsx)("div",{style:{flexWrap:"wrap"},children:t.authors&&t.authors.map((function(e){return(0,f.jsx)(Yr,{user:e,isClickable:!0},e.id)}))})})]})]}),(0,f.jsx)(N.Z,{noMargin:!0,children:S?S.shortDescription:"string"===typeof t.shortDescription&&t.shortDescription||""}),(0,f.jsx)(or.Z,{}),S&&(0,f.jsx)(Re.r,{source:ri(S),isStandaloneText:!0}),"experimental"===t.tier&&(0,f.jsx)(je.Z,{kind:"warning",children:(0,f.jsx)(w.Trans,{id:"This is an extension made by a community member and it only got through a light review by the GDevelop extension team. As such, we can't guarantee it meets all the quality standards of fully reviewed extensions."})}),!L&&(0,f.jsx)(je.Z,{kind:"error",children:(0,f.jsx)(w.Trans,{id:"Unfortunately, this extension requires a newer version of GDevelop to work. Update GDevelop to be able to use this extension in your project."})}),!S&&!C&&(0,f.jsx)(Oe.Z,{}),!S&&C&&(0,f.jsx)(_r.Z,{onRetry:I,children:(0,f.jsx)(w.Trans,{id:"Can't load the extension registry. Verify your internet connection or try again later."})}),g&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Breaking changes"})}),(0,f.jsx)(Re.r,{source:g,isStandaloneText:!0})]}),m&&(0,f.jsxs)(ni.UQ,{noMargin:!0,children:[(0,f.jsx)(ni._m,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Previous breaking changes (no longer relevant)"})})}),(0,f.jsx)(ni.X1,{disableGutters:!0,children:(0,f.jsx)(Re.r,{source:m,isStandaloneText:!0})})]})]})})},ai=n(75333),oi=function(e){return e.stopPropagation()},si={root:{height:30,display:"flex",justifyContent:"space-between"},input:{width:"100%"},searchContainer:{position:"relative",margin:"auto 8px",width:"100%"}},li=c.forwardRef((function(e,t){var n=c.useRef(null),r=c.useCallback((function(){n.current&&n.current.focus()}),[n]);c.useImperativeHandle(t,(function(){return{focus:r}}));var i,a=(i=e.textAlign,(0,ur.Z)({root:{textAlign:i||"left",cursor:"default"}})()),o=e.onChange||void 0,s=!0,l=c.Children.map(e.children,(function(e){return null!==e&&e.props?e.props.value:null}));l?s=0!==l.filter((function(t){return t===e.value})).length:console.error("SelectField has been passed no or invalid children. Only SelectOption and null are supported.");var u=s?e.value:"";return(0,f.jsx)(w.I18n,{children:function(t){var r=t.i18n;return(0,f.jsx)(H.Z,{style:si.root,background:"light",children:(0,f.jsx)("div",{style:si.searchContainer,children:(0,f.jsxs)(lr.Z,{select:!0,color:"secondary",disabled:e.disabled,fullWidth:e.fullWidth,value:u,onClick:e.stopPropagationOnClick?oi:void 0,onChange:o?function(e){o(e,-1,e.target.value)}:void 0,InputProps:{style:si.input,disableUnderline:!0},InputLabelProps:{shrink:!0},SelectProps:{native:!0,classes:a,IconComponent:st.Z},margin:"none",style:si.input,inputRef:n,children:[s?null:(0,f.jsx)("option",{value:"",disabled:!0,children:e.translatableHintText?r._(e.translatableHintText):r._({id:"Choose an option"})}),e.children]})})})}})})),ci=function(e){return e.name},ui=function(e){var t=e.isInstalling,n=e.project,r=e.onInstall,i=e.showOnlyWithBehaviors,l=c.useContext(D.ZP),u=c.useState(null),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useContext(Nr.H),m=g.filters,x=g.searchResults,v=g.error,b=g.fetchExtensionsAndFilters,C=g.filtersState,j=g.searchText,y=g.setSearchText,Z=g.allCategories,k=g.chosenCategory,T=g.setChosenCategory;c.useEffect((function(){b()}),[b]);var S=x?x.filter((function(e){var t=e.item;return!i||t.eventsBasedBehaviorsCount>0})):null,I=c.useMemo((function(){return{add:C.addFilter,remove:C.removeFilter,chosenTags:C.chosenFilters}}),[C]),E=function(e){if(!x)return[];var t=x.find((function(t){return t.item.name===e.name}));return t?t.matches:[]},L=(0,et.Z)("intro-behaviors-and-functions").DismissableTutorialMessage;return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,children:[(0,f.jsxs)(li,{value:k,onChange:function(e,t,n){T(n)},children:[(0,f.jsx)(P.Z,{value:"",label:{id:"All categories"}}),Z.map((function(e){return(0,f.jsx)(P.Z,{value:e,label:e},e)}))]}),(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(Ge.Z,{id:"extension-search-bar",value:j,onChange:y,onRequestSearch:function(){},tagsHandler:I,tags:m&&m.allTags,placeholder:{id:"Search extensions"},autoFocus:"desktop"})})]}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(yr.Z,{onToggle:function(e,t){return l.setShowExperimentalExtensions(t)},toggled:l.values.showExperimentalExtensions,labelPosition:"right",label:(0,f.jsx)(w.Trans,{id:"Show experimental extensions"})})}),L]}),(0,f.jsx)(Vr,{disableAutoTranslate:!0,onRetry:b,error:v,searchItems:S&&S.map((function(e){return e.item})),getSearchItemUniqueId:ci,renderSearchItem:function(e,t){return(0,f.jsx)(Xr,{id:"extension-list-item-".concat(e.name),project:n,onHeightComputed:t,extensionShortHeader:e,matches:E(e),onChoose:function(){(0,ai.pk)(e.name),h(e)}},e.name)}})]}),!!p&&(0,f.jsx)(ii,{project:n,isInstalling:t,extensionShortHeader:p,onInstall:(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,ai.ix)(p.name),e.next=3,r(p);case 3:e.sent&&h(null);case 5:case"end":return e.stop()}}),e)}))),onClose:function(){return h(null)}})]})},di=n(28923),pi=n(87262),fi=n(51535),hi=n(35213),gi=n(3550),mi=function(e){var t=e.identifier,n=e.show,r=e.touchScreenMessage,i=e.message,a=c.useContext(gi.Z).currentlyRunningInAppTutorial,o=c.useContext(D.ZP),s=(0,hi.BF)();return a?null:(0,f.jsx)(u.Z,{open:n&&!o.values.hiddenAlertMessages[t],message:"touch"===s&&r?r:i,action:(0,f.jsx)(fi.Z,{color:"secondary",size:"small",onClick:function(){o.showAlertMessage(t,!1)},children:(0,f.jsx)(w.Trans,{id:"Got it"})})})},xi=n(2861),vi=n(17361),bi=n(30141),Ci=function(e){var t=e.project,n=e.onClose,r=e.onWillInstallExtension,i=e.onExtensionInstalled,l=e.onCreateNew,u=(0,be.UQ)().isMobile,d=(0,pi.WF)(),p=c.useContext(Nr.H).translatedExtensionShortHeadersByName,h=(0,pi.wO)(),g=c.useState(!1),m=(0,s.Z)(g,2),x=m[0],v=m[1],b=c.useState(!1),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=c.useContext(di.Z),k=c.useContext($n.ZP),S=(0,xi.zi)(k,xi.Ch,(function(){})),P=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,o){var s,l,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),e.prev=1,!o){e.next=26;break}return e.prev=3,s=[o],(l=(0,pi.WC)(s)).push({extensionName:o.name,extensionVersion:o.version}),e.next=9,(0,pi.bg)({requiredExtensions:l,project:t,extensionShortHeadersByName:p});case 9:return(c=e.sent).missingExtensionShortHeaders.includes(o)||c.missingExtensionShortHeaders.push(o),e.next=13,d({project:t,requiredExtensionInstallation:c,importedSerializedExtensions:[],onWillInstallExtension:r,onExtensionInstalled:i,updateMode:"all",reason:"extension"});case 13:if(e.sent){e.next=16;break}return e.abrupt("return",!1);case 16:S(),y(!0),e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(3),(0,bi.gR)({message:n._({id:"Unable to download and install the extension and its dependencies. Verify that your internet connection is working or try again later."}),rawError:e.t0,errorId:"download-extension-error"}),e.abrupt("return",!1);case 24:e.next=33;break;case 26:return e.next=28,h({i18n:n,project:t,onWillInstallExtension:r,onExtensionInstalled:i});case 28:if(!((u=e.sent).length>0)){e.next=33;break}return y(!0),i(u),e.abrupt("return",!0);case 33:return e.abrupt("return",!1);case 34:return e.prev=34,v(!1),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[1,,34,37],[3,20]])})));return function(t,n){return e.apply(this,arguments)}}(),I=Z.getEventsFunctionsExtensionOpener();return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Search for New Extensions"}),id:"extension-search-dialog",fullHeight:!0,actions:[(0,f.jsx)(T.Z,{id:"close-button",label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!0,onClick:n,disabled:x},"close")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/extensions/search"},"help"),I?(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(vi.Z,{}),label:u?(0,f.jsx)(w.Trans,{id:"Import"}):(0,f.jsx)(w.Trans,{id:"Import extension"}),onClick:function(){P(r)},disabled:x},"import"):null,l?(0,f.jsx)(T.Z,{onClick:l,label:u?(0,f.jsx)(w.Trans,{id:"Create"}):(0,f.jsx)(w.Trans,{id:"Create a new extension"}),leftIcon:(0,f.jsx)(it.Z,{})},"create-new"):null],flexBody:!0,open:!0,cannotBeDismissed:x,onRequestClose:n,children:[(0,f.jsx)(ui,{isInstalling:x,onInstall:function(e){return P(r,e)},project:t,showOnlyWithBehaviors:!1}),(0,f.jsx)(mi,{identifier:"extension-installed-explanation",message:(0,f.jsx)(w.Trans,{id:"The extension was added to the project. You can now use it in the list of actions/conditions and, if it's a behavior, in the list of behaviors for an object."}),show:j})]})}})},ji=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Extensions search"}),scope:"extensions-search-dialog",onClose:e.onClose,children:(0,f.jsx)(Ci,(0,l.Z)({},e))})},yi=n(29277),Zi=n(60136),ki=n(29388),wi=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e=this.props.behaviorSharedData,t=(0,Gn.ZP)({properties:e.getProperties(),defaultValueProperties:null,getProperties:function(e){return e.getProperties()},onUpdateProperty:function(e,t,n){e.updateProperty(t,n)}});return(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:t.length?(0,f.jsx)(Wn.Z,{schema:t,instances:[e],project:this.props.project,resourceManagementProps:this.props.resourceManagementProps,projectScopedContainersAccessor:this.props.projectScopedContainersAccessor}):(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"There is nothing to configure for this behavior. You can still use events to interact with the object and this behavior."})})})}}]),n}(c.Component),Ti=n(83306),Si=n.n(Ti),Pi=n(14932),Ii=n(95644),Ei=n(94446),Mi=n(3247),Li=n.g.gd,Ai=function(e){var t=e.open,n=e.layout,r=e.project,i=e.onApply,a=e.onClose,o=e.onOpenMoreSettings,l=e.onEditVariables,u=e.resourceManagementProps,d=e.projectScopedContainersAccessor,p=e.onBackgroundColorChanged,h=c.useState(n.getWindowDefaultTitle()),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(n.stopSoundsOnStartup()),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState(n.getResourcesPreloading()),Z=(0,s.Z)(y,2),k=Z[0],S=Z[1],I=c.useState(n.getResourcesUnloading()),L=(0,s.Z)(I,2),A=L[0],O=L[1],R=c.useState({r:n.getBackgroundColorRed(),g:n.getBackgroundColorGreen(),b:n.getBackgroundColorBlue(),a:1}),F=(0,s.Z)(R,2),D=F[0],B=F[1];c.useEffect((function(){t&&n&&(x(n.getWindowDefaultTitle()),j(n.stopSoundsOnStartup()),S(n.getResourcesPreloading()),O(n.getResourcesUnloading()),B({r:n.getBackgroundColorRed(),g:n.getBackgroundColorGreen(),b:n.getBackgroundColorBlue(),a:1}))}),[t,n]);var U=function(){n.setWindowDefaultTitle(m),n.setStopSoundsOnStartup(C),n.setResourcesPreloading(k),n.setResourcesUnloading(A);var e=D&&n.getBackgroundColorRed()!==D.r&&n.getBackgroundColorGreen()!==D.g&&n.getBackgroundColorBlue()!==D.b;n.setBackgroundColor(D?D.r:0,D?D.g:0,D?D.b:0),i(),e&&p()},V=[(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Ok"}),primary:!0,onClick:U},"ok")],H=n.getAllBehaviorSharedDataNames().toJSArray(),z="inherit"!==k||"inherit"!==A||""!==m,W=H.map((function(e){var t=n.getBehaviorSharedData(e);if(function(e,t){return 0===e.getPointer(t)}(Li,t))return null;var i=t.getTypeName(),a=Li.MetadataProvider.getBehaviorMetadata(Li.JsPlatform.get(),i),o=t.getProperties(),s=(0,Gn.ZP)({properties:o,defaultValueProperties:a?a.getSharedProperties():null,getProperties:function(e){return t.getProperties()},onUpdateProperty:function(e,n,r){t.updateProperty(n,r)}}),l=((0,Ei.r1)(i),a.getIconFilename());return!!s.length&&(0,f.jsxs)(ni.UQ,{defaultExpanded:!0,id:"behavior-parameters-".concat(e),noMargin:!0,children:[(0,f.jsxs)(ni._m,{actions:[(0,f.jsx)(Pi.Z,{size:"small",helpPagePath:a.getHelpPath()},"help")],noMargin:!0,children:[l?(0,f.jsx)(Hr.q,{src:l,alt:a.getFullName(),size:20}):null,(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(yi.ZP,{value:e,margin:"none",fullWidth:!0,disabled:!0,onChange:function(e,t){},id:"behavior-".concat(e,"-name-text-field")})})]}),(0,f.jsx)(ni.X1,{disableGutters:!0,children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[null,(0,f.jsx)(M.x1,{children:(0,f.jsx)(wi,{behaviorSharedData:t,project:r,resourceManagementProps:u,projectScopedContainersAccessor:d},e)})]})})]},e)})).filter(Boolean);return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"{0} properties",values:{0:n.getName()}}),actions:V,secondaryActions:[(0,f.jsx)(G.Z,{icon:(0,f.jsx)(Mi.Z,{fontSize:"small"}),label:(0,f.jsx)(w.Trans,{id:"Edit scene variables"}),fullWidth:!0,onClick:function(){l(),a()}},"edit-scene-variables")],onRequestClose:a,onApply:U,open:t,maxWidth:"sm",children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(Jn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Scene background color"}),fullWidth:!0,disableAlpha:!0,color:(0,Xn.KC)(D),onChange:function(e){return B((0,Xn.A0)(e))}}),(0,f.jsx)(Vn.Z,{checked:C,label:(0,f.jsx)(w.Trans,{id:"Stop music and sounds at the beginning of this scene"}),onCheck:function(e,t){return j(t)}}),!Si()(W)&&(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Additional properties will appear here when you add behaviors to objects, such as the 2D or 3D Physics Engine."})}),W,(0,f.jsxs)(ni.UQ,{defaultExpanded:z,noMargin:!0,children:[(0,f.jsx)(ni._m,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Advanced settings"})})}),(0,f.jsx)(ni.X1,{disableGutters:!0,children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Resources preloading"}),fullWidth:!0,value:k,onChange:function(e){return S(e.target.value)},children:[(0,f.jsx)(P.Z,{value:"inherit",label:{id:"Use the project setting"}}),(0,f.jsx)(P.Z,{value:"at-startup",label:{id:"Always preload at startup"}}),(0,f.jsx)(P.Z,{value:"never",label:{id:"Never preload"}})]}),(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Resources unloading"}),fullWidth:!0,value:A,onChange:function(e){return O(e.target.value)},children:[(0,f.jsx)(P.Z,{value:"inherit",label:{id:"Use the project setting"}}),(0,f.jsx)(P.Z,{value:"at-scene-exit",label:{id:"Unload at scene exit"}}),(0,f.jsx)(P.Z,{value:"never",label:{id:"Never unload"}})]}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Window title"}),fullWidth:!0,type:"text",value:m,onChange:function(e,t){return x(t)}})]})})]}),o&&(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Open more settings"}),primary:!0,fullWidth:!0,onClick:function(){o&&o(),a()}})]})})},Oi=function(e){var t=e.project,n=e.layout,r=e.open,i=e.onCancel,a=e.onApply,o=e.hotReloadPreviewButtonProps,s=e.initiallySelectedVariableName,l=e.shouldCreateInitiallySelectedVariable,u=e.isListLocked,d=c.useCallback((function(){return _n.findAllLayoutVariables(t.getCurrentPlatform(),t,n)}),[n,t]),p=c.useMemo((function(){return[{id:"scene-variables",label:(0,f.jsx)(w.Trans,{id:"Scene variables"}),variablesContainer:n.getVariables(),emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first scene variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"These variables hold additional information on a scene."}),onComputeAllVariableNames:d}]}),[n,d]),h=c.useMemo((function(){return new Bn({project:t,layout:n})}),[n,t]);return(0,f.jsx)(Fn,{project:t,projectScopedContainersAccessor:h,open:r,onCancel:i,onApply:a,title:(0,f.jsx)(w.Trans,{id:"{0} variables",values:{0:n.getName()}}),tabs:p,initiallySelectedVariableName:s,shouldCreateInitiallySelectedVariable:l,helpPagePath:"/all-features/variables/scene-variables",hotReloadPreviewButtonProps:o,id:"scene-variables-dialog",isListLocked:u})};function Ri(e,t){for(var n=t.getCurrentPlatform().getAllPlatformExtensions(),r=0;r<n.size();r++)if(n.at(r).getName()===e)return!0;return t.hasEventsFunctionsExtensionNamed(e)}var Fi=n(76288),Di=function(e){return(0,Fi.YZ)("OPEN_PROJECT_PROPERTIES",!!e.project,{handler:e.onOpenProjectProperties}),(0,Fi.YZ)("OPEN_PROJECT_LOADING_SCREEN",!!e.project,{handler:e.onOpenProjectLoadingScreen}),(0,Fi.YZ)("OPEN_PROJECT_VARIABLES",!!e.project,{handler:e.onOpenProjectVariables}),(0,Fi.YZ)("OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG",!!e.project,{handler:e.onOpenPlatformSpecificAssetsDialog}),(0,Fi.YZ)("OPEN_PROJECT_RESOURCES",!!e.project,{handler:e.onOpenResourcesDialog}),(0,Fi.YZ)("OPEN_SEARCH_EXTENSIONS_DIALOG",!!e.project,{handler:e.onOpenSearchExtensionDialog}),null};var Ni=function(e){var t=e.project,n=e.onClose,r=e.extensionShortHeader,i=e.extensionName,l=e.onWillInstallExtension,u=e.onExtensionInstalled,d=e.onOpenEventsFunctionsExtension,p=c.useState(!1),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=(0,pi.WF)(),v=c.useContext(Nr.H).translatedExtensionShortHeadersByName,b=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,i=[r],e.next=5,(0,pi.bg)({requiredExtensions:(0,pi.WC)(i),project:t,extensionShortHeadersByName:v});case 5:return(o=e.sent).missingExtensionShortHeaders.includes(r)||o.missingExtensionShortHeaders.push(r),e.next=9,x({project:t,requiredExtensionInstallation:o,importedSerializedExtensions:[],onWillInstallExtension:l,onExtensionInstalled:u,updateMode:"all",reason:"extension"});case 9:return e.prev=9,m(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,,9,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsx)(w.I18n,{children:function(e){var a=e.i18n;return(0,f.jsx)(ii,{project:t,isInstalling:g,onClose:n,onInstall:function(){return b(a)},extensionShortHeader:r,onEdit:function(){d(i),n()}})}})},_i=n(69197),Bi=n(8018),Ui=n.g.gd,Vi=function(e){return{project:null,storageProvider:Bi.Z,fileMetadata:{fileIdentifier:e}}},Hi=function(e){var t=e.getEffects().insertNewEffect("3D Sun Light",0);t.setEffectType("Scene3D::DirectionalLight"),t.setStringParameter("color","255;255;255"),t.setDoubleParameter("intensity",.75),t.setStringParameter("top","Z+"),t.setDoubleParameter("elevation",40),t.setDoubleParameter("rotation",300),t.setBooleanParameter("isCastingShadow",!0),t.setStringParameter("shadowQuality","medium"),t.setDoubleParameter("minimumShadowBias",0),t.setDoubleParameter("distanceFromCamera",1500),t.setDoubleParameter("frustumSize",4e3);var n=e.getEffects().insertNewEffect("3D Ambient Hemisphere Light",0);n.setEffectType("Scene3D::HemisphereLight"),n.setStringParameter("skyColor","255;255;255"),n.setStringParameter("groundColor","127;127;127"),n.setDoubleParameter("intensity",.33),n.setStringParameter("top","Z+"),n.setDoubleParameter("elevation",40),n.setDoubleParameter("rotation",300)},zi=function(e){for(var t=0;t<e.getLayersCount();t++){var n=e.getLayerAt(t);Hi(n)}},Wi=function(e,t){return"quick-customization"===e?"qc-".concat(t):"ai-agent-request"===e?"ai-".concat(t):"course-chapter"===e?"course-".concat(t):"in-app-tutorial"===e?"in-app-tutorial-".concat(t):t},Gi=function(e){var t=e.creationSource,n=Ui.ProjectHelper.createNewGDJSProject(),r="empty-project";return(0,ai.tP)({exampleUrl:"",exampleSlug:r,creationSource:t,exampleCompositeSlug:Wi(t,r)}),{project:n,storageProvider:null,fileMetadata:null}},Yi=function(e,t){(0,ai.tP)({exampleUrl:e,exampleSlug:t,creationSource:"in-app-tutorial",exampleCompositeSlug:Wi("in-app-tutorial",t)});var n=Vi(e);return n.templateSlug=t,n},qi=function(e,t){(0,ai.tP)({exampleUrl:e,exampleSlug:t,creationSource:"course-chapter",exampleCompositeSlug:Wi("course-chapter",t)});var n=Vi(e);return n.templateSlug=t,n},Ji=function(e,t){(0,ai.tP)({exampleUrl:e,exampleSlug:t,creationSource:"default",exampleCompositeSlug:Wi("default",t)});var n=Vi(e);return n.templateSlug=t,n},Xi=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.i18n,r=t.exampleShortHeader,i=t.newProjectSetup,e.prev=1,e.next=4,(0,_i.W7)(r);case 4:return o=e.sent,s=i.creationSource,(0,ai.tP)({exampleUrl:o.projectFileUrl,exampleSlug:r.slug,exampleCompositeSlug:Wi(s,r.slug),creationSource:s}),(l=Vi(o.projectFileUrl)).templateSlug=r.slug,e.abrupt("return",l);case 12:return e.prev=12,e.t0=e.catch(1),(0,bi.gR)({message:n._({id:"Unable to fetch the example."})+" "+n._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"local-example-load-error"}),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),Ki=n(30696),Qi=n(17271),$i=n(47498),ea="Layout",ta={marginRight:5,verticalAlign:"bottom"},na=function(e){return"scene-".concat(e.ptr)},ra=function(){function e(t,n){(0,ze.Z)(this,e),this.scene=t,this.props=n}return(0,We.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===Ea}},{key:"getRootId",value:function(){return Ea}},{key:"getName",value:function(){return this.scene.getName()}},{key:"getId",value:function(){return na(this.scene)}},{key:"getHtmlId",value:function(e){return"scene-item-".concat(e)}},{key:"getDataSet",value:function(){return{scene:this.scene.getName()}}},{key:"getThumbnail",value:function(){return"res/icons_default/scene_black.svg"}},{key:"onClick",value:function(){this.props.onOpenLayout(this.scene.getName(),{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}},{key:"rename",value:function(e){var t=this.scene.getName();t!==e&&this.props.onRenameLayout(t,e)}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Open scene editor"}),enabled:!0,click:function(){return n.props.onOpenLayout(n.scene.getName(),{openSceneEditor:!0,openEventsEditor:!1,focusWhenOpened:"scene"})}},{label:e._({id:"Open events sheet"}),enabled:!0,click:function(){return n.props.onOpenLayout(n.scene.getName(),{openSceneEditor:!1,openEventsEditor:!0,focusWhenOpened:"events"})}},{type:"separator"},{label:e._({id:"Edit scene properties"}),enabled:!0,click:function(){return n.props.onOpenLayoutProperties(n.scene)}},{label:e._({id:"Edit scene variables"}),enabled:!0,click:function(){return n.props.onOpenLayoutVariables(n.scene)}},{label:e._({id:"Set as start scene"}),enabled:!this._isFirstScene(),click:function(){return n._setProjectFirstScene(n.scene.getName())}},{type:"separator"},{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:vt.Z.has(ea),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicate()}}]}},{key:"_isFirstScene",value:function(){return this.scene.getName()===this.props.project.getFirstLayout()}},{key:"renderRightComponent",value:function(e){var t=[];return this._isFirstScene()&&t.push((0,f.jsx)(re.ZP,{title:e._({id:"This scene will be used as the start scene."}),children:(0,f.jsx)($i.Z,{fontSize:"small",style:(0,l.Z)((0,l.Z)({},ta),{},{color:this.props.gdevelopTheme.text.color.disabled})})},"first-scene")),t.length>0?t:null}},{key:"delete",value:function(){this.props.onDeleteLayout(this.scene)}},{key:"getIndex",value:function(){return this.props.project.getLayoutPosition(this.scene.getName())}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.project.moveLayout(t,e+(e<=t?0:-1)),this._onProjectItemModified())}},{key:"copy",value:function(){vt.Z.set(ea,{layout:(0,Ct.XH)(this.scene),name:this.scene.getName()})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(vt.Z.has(ea)){var e=vt.Z.get(ea),t=bt.$.extractObjectProperty(e,"layout"),n=bt.$.extractStringProperty(e,"name");if(n&&t){var r=this.props.project,i=(0,xt.Z)(n,(function(e){return r.hasLayoutNamed(e)})),a=r.insertNewLayout(i,this.getIndex()+1);(0,Ct.qx)(a,t,"unserializeFrom",r),a.setName(i),a.updateBehaviorsSharedData(r),this._onProjectItemModified(),this.props.editName(na(a)),this.props.onSceneAdded()}}}},{key:"_duplicate",value:function(){var e=this.props.project,t=(0,xt.Z)(this.scene.getName(),(function(t){return e.hasLayoutNamed(t)})),n=e.insertNewLayout(t,this.getIndex()+1);(0,Ct.qx)(n,(0,Ct.XH)(this.scene),"unserializeFrom",e),n.setName(t),n.updateBehaviorsSharedData(e),this._onProjectItemModified(),this.props.editName(na(n)),this.props.onSceneAdded()}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}},{key:"_setProjectFirstScene",value:function(e){this.props.project.setFirstLayout(e),this.props.forceUpdate()}}]),e}(),ia="Events Functions Extension",aa=function(e){return"extension-".concat(e.ptr)},oa=function(){function e(t,n){(0,ze.Z)(this,e),this.eventsFunctionsExtension=t,this.props=n}return(0,We.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===Ma}},{key:"getRootId",value:function(){return Ma}},{key:"getName",value:function(){return this.eventsFunctionsExtension.getName()}},{key:"getId",value:function(){return aa(this.eventsFunctionsExtension)}},{key:"getHtmlId",value:function(e){return"extension-item-".concat(e)}},{key:"getDataSet",value:function(){return{extension:this.eventsFunctionsExtension.getName()}}},{key:"getThumbnail",value:function(){return this.eventsFunctionsExtension.getIconUrl()||"res/functions/extension_black.svg"}},{key:"onClick",value:function(){this.props.onEditEventsFunctionExtensionOrSeeDetails(this.eventsFunctionsExtension)}},{key:"rename",value:function(e){var t=this.eventsFunctionsExtension.getName();t!==e&&(this.eventsFunctionsExtension.setOrigin("",""),this.props.onRenameEventsFunctionsExtension(t,e))}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:vt.Z.has(ia),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicate()}}]}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this.props.onDeleteEventsFunctionsExtension(this.eventsFunctionsExtension)}},{key:"getIndex",value:function(){return this.props.project.getEventsFunctionsExtensionPosition(this.eventsFunctionsExtension.getName())}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.project.moveEventsFunctionsExtension(t,e+(e<=t?0:-1)),this._onProjectItemModified())}},{key:"copy",value:function(){vt.Z.set(ia,{eventsFunctionsExtension:(0,Ct.XH)(this.eventsFunctionsExtension),name:this.eventsFunctionsExtension.getName()})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(vt.Z.has(ia)){var e=vt.Z.get(ia),t=bt.$.extractObjectProperty(e,"eventsFunctionsExtension"),n=bt.$.extractStringProperty(e,"name");if(n&&t){var r=this.props.project,i=(0,xt.Z)(n,(function(e){return Ri(e,r)})),a=r.insertNewEventsFunctionsExtension(i,this.getIndex()+1);(0,Ct.qx)(a,t,"unserializeFrom",r),a.setName(i),i!==n&&a.setOrigin("",""),this._onProjectItemModified(),this.props.onReloadEventsFunctionsExtensions(),this.props.editName(aa(a))}}}},{key:"_duplicate",value:function(){this.copy(),this.paste()}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}}]),e}(),sa="External events",la=function(e){return"external-events-".concat(e.ptr)},ca=function(){function e(t,n){(0,ze.Z)(this,e),this.externalEvents=t,this.props=n}return(0,We.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===La}},{key:"getRootId",value:function(){return La}},{key:"getName",value:function(){return this.externalEvents.getName()}},{key:"getId",value:function(){return la(this.externalEvents)}},{key:"getHtmlId",value:function(e){return"external-events-item-".concat(e)}},{key:"getDataSet",value:function(){return{"external-events":this.externalEvents.getName()}}},{key:"getThumbnail",value:function(){return"res/icons_default/external_events_black.svg"}},{key:"onClick",value:function(){this.props.onOpenExternalEvents(this.externalEvents.getName())}},{key:"rename",value:function(e){var t=this.externalEvents.getName();t!==e&&this.props.onRenameExternalEvents(t,e)}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:vt.Z.has(sa),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicate()}}]}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this.props.onDeleteExternalEvents(this.externalEvents)}},{key:"getIndex",value:function(){return this.props.project.getExternalEventsPosition(this.externalEvents.getName())}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.project.moveExternalEvents(t,e+(e<=t?0:-1)),this._onProjectItemModified())}},{key:"copy",value:function(){vt.Z.set(sa,{externalEvents:(0,Ct.XH)(this.externalEvents),name:this.externalEvents.getName()})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(vt.Z.has(sa)){var e=vt.Z.get(sa),t=bt.$.extractObjectProperty(e,"externalEvents"),n=bt.$.extractStringProperty(e,"name");if(n&&t){var r=this.props.project,i=(0,xt.Z)(n,(function(e){return r.hasExternalEventsNamed(e)})),a=r.insertNewExternalEvents(i,this.getIndex()+1);(0,Ct.qx)(a,t,"unserializeFrom",r),a.setName(i),this._onProjectItemModified(),this.props.editName(la(a))}}}},{key:"_duplicate",value:function(){this.copy(),this.paste()}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}}]),e}(),ua="External layout",da=function(e){return"external-layout-".concat(e.ptr)},pa=function(){function e(t,n){(0,ze.Z)(this,e),this.externalLayout=t,this.props=n}return(0,We.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===Aa}},{key:"getRootId",value:function(){return Aa}},{key:"getName",value:function(){return this.externalLayout.getName()}},{key:"getId",value:function(){return da(this.externalLayout)}},{key:"getHtmlId",value:function(e){return"external-layout-item-".concat(e)}},{key:"getDataSet",value:function(){return{"external-layout":this.externalLayout.getName()}}},{key:"getThumbnail",value:function(){return"res/icons_default/external_layout_black.svg"}},{key:"onClick",value:function(){this.props.onOpenExternalLayout(this.externalLayout.getName())}},{key:"rename",value:function(e){var t=this.externalLayout.getName();t!==e&&this.props.onRenameExternalLayout(t,e)}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:vt.Z.has(ua),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicate()}}]}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this.props.onDeleteExternalLayout(this.externalLayout)}},{key:"getIndex",value:function(){return this.props.project.getExternalLayoutPosition(this.externalLayout.getName())}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.project.moveExternalLayout(t,e+(e<=t?0:-1)),this._onProjectItemModified())}},{key:"copy",value:function(){vt.Z.set(ua,{externalLayout:(0,Ct.XH)(this.externalLayout),name:this.externalLayout.getName()})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(vt.Z.has(ua)){var e=vt.Z.get(ua),t=bt.$.extractObjectProperty(e,"externalLayout"),n=bt.$.extractStringProperty(e,"name");if(n&&t){var r=this.props.project,i=(0,xt.Z)(n,(function(e){return r.hasExternalLayoutNamed(e)})),a=r.insertNewExternalLayout(i,this.getIndex()+1);(0,Ct.qx)(a,t),a.setName(i),this._onProjectItemModified(),this.props.editName(da(a)),this.props.onExternalLayoutAdded()}}}},{key:"_duplicate",value:function(){this.copy(),this.paste()}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}}]),e}(),fa=n(30609),ha=n(36559),ga="ProjectManagerMainMenu_menuItem__1mn3j",ma="ProjectManagerMainMenu_disabled__EfV29",xa="ProjectManagerMainMenu_horizontalSeparator__T3QN2",va="ProjectManagerMainMenu_verticalSeparator__FWZ+F",ba=n(42699),Ca=n(45047),ja=n(48409),ya=n(54168),Za=function(e){e.project;var t=e.closeDrawer,n=e.mainMenuCallbacks,a=e.buildMainMenuProps,o=e.selectedMainMenuItemIndices,s=e.setSelectedMainMenuItemIndices,u=c.useMemo((function(){return(0,ha.z)((0,ha.c)(a),n)}),[a,n]),d=(0,be.UQ)().isMobile,p=!(0,ja._F)()&&!d,h=c.useCallback((function(e){return e.map((function(e,n){if(e.submenu)return(0,l.Z)((0,l.Z)({},e),{},{submenu:h(e.submenu)});if(e.click){var r=e.click;return(0,l.Z)((0,l.Z)({},e),{},{click:function(){r(),t()}})}return e}))}),[t]),g=c.useMemo((function(){var e,t=u,n=(0,i.Z)(o);try{for(n.s();!(e=n.n()).done;){var r=t[e.value];if(!r||!r.submenu)break;t=r.submenu}}catch(a){n.e(a)}finally{n.f()}return h(t)}),[u,o,h]),m=o.length>0,x=c.useCallback((function(){0!==o.length&&s(o.slice(0,o.length-1))}),[o,s]),v=c.useCallback((function(e){var t=u[e];return t&&t.submenu?h(t.submenu):[]}),[u,h]);return(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsxs)(M.sg,{expand:!0,children:[m&&(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,alignItems:"flex-start",children:(0,f.jsx)(ba.Z,{icon:(0,f.jsx)(Ca.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Back"}),onClick:x})}),!m&&(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,children:u.map((function(e,t){return"separator"===e.type?null:(0,f.jsxs)(c.Fragment,{children:[0!==t&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)("div",{className:va}),(0,f.jsx)(M.LZ,{})]}),p?(0,f.jsx)(ya.Z,{element:(0,f.jsx)(ba.Z,{label:e.label,onClick:function(){},fullWidth:!0}),buildMenuTemplate:function(){return v(t)}}):(0,f.jsx)(ba.Z,{label:e.label,onClick:function(){s([].concat((0,r.Z)(o),[t]))},fullWidth:!0})]},t)}))}),m&&(0,f.jsx)(M.sg,{expand:!0,children:g.map((function(e,t){var n;return"separator"===e.type?(0,f.jsx)("div",{className:xa},t):(0,f.jsx)("div",{className:en()((n={},(0,Qt.Z)(n,ga,!0),(0,Qt.Z)(n,ma,!e.submenu&&!1===e.enabled),n)),onClick:function(){!1!==e.enabled&&(e.click?e.click():e.submenu&&s([].concat((0,r.Z)(o),[t])))},children:(0,f.jsxs)(_.pJ,{noMargin:!0,expand:!0,justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(N.Z,{style:{opacity:!1===e.enabled?.5:void 0},children:e.label}),e.submenu&&(0,f.jsx)(ot.Z,{})]})},t)}))})]})})},ka=F()("electron"),wa=function(e){return"project-manager-tab-".concat(e)},Ta=wa("game-settings"),Sa=wa("game-properties"),Pa=wa("global-variables"),Ia=wa("game-resources"),Ea=wa("scenes"),Ma=wa("extensions"),La=wa("external-events"),Aa=wa("external-layout"),Oa={listContainer:{flex:1,display:"flex",flexDirection:"column",padding:"0 8px 8px 8px"},autoSizerContainer:{flex:1},autoSizer:{width:"100%"}},Ra=function(){function e(t){(0,ze.Z)(this,e),this.content=t}return(0,We.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),Fa=function(){function e(t,n){(0,ze.Z)(this,e),this.isPlaceholder=!0,this.content=new Da(t,n)}return(0,We.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),Da=function(){function e(t,n,r){(0,ze.Z)(this,e),this.id=t,this.label=n,this.buildMenuTemplateFunction=function(e,t){return r?[{id:r.id,label:r.label,click:r.click}]:[]},this.rightButton=r}return(0,We.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return this.rightButton}},{key:"getHtmlId",value:function(e){return this.id}},{key:"getDataSet",value:function(){return null}},{key:"getThumbnail",value:function(){return null}},{key:"onClick",value:function(){}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"getRootId",value:function(){return""}}]),e}(),Na=function(){function e(t,n,r,i){(0,ze.Z)(this,e),this.id=t,this.label=n,this.onClickCallback=r,this.thumbnail=i,this.buildMenuTemplateFunction=function(e,t){return[]}}return(0,We.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return null}},{key:"getEventsFunctionsContainer",value:function(){return null}},{key:"getHtmlId",value:function(e){return this.id}},{key:"getDataSet",value:function(){return null}},{key:"getThumbnail",value:function(){return this.thumbnail}},{key:"onClick",value:function(){this.onClickCallback()}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"getRootId",value:function(){return""}}]),e}(),_a=function(e){return e.content.getName()},Ba=function(e){return e.content.getId()},Ua=function(e,t){return e.content.getHtmlId(t)},Va=function(e){return function(t){return t.getChildren(e)}},Ha=function(e){return e.content.getThumbnail()},za=function(e){return e.content.getDataSet()},Wa=function(e){return function(t,n){return t.content.buildMenuTemplate(e,n)}},Ga=function(e){return function(t){return t.content.renderRightComponent(e)}},Ya=function(e,t){e.content.rename(t)},qa=function(e){e.content.onClick()},Ja=function(e){e.content.edit()},Xa=function(e){return function(t){return t.content.getRightButton(e)}},Ka=c.forwardRef((function(e,t){var n=e.project,r=e.onChangeProjectName,i=e.onSaveProjectProperties,a=e.onDeleteLayout,o=e.onDeleteExternalEvents,u=e.onDeleteExternalLayout,d=e.onDeleteEventsFunctionsExtension,p=e.onRenameLayout,h=e.onRenameExternalEvents,g=e.onRenameExternalLayout,m=e.onRenameEventsFunctionsExtension,x=e.onOpenLayout,v=e.onOpenExternalEvents,b=e.onOpenExternalLayout,C=e.onOpenEventsFunctionsExtension,y=e.onOpenResources,k=e.onReloadEventsFunctionsExtensions,T=e.isOpen,S=e.hotReloadPreviewButtonProps,P=e.onWillInstallExtension,I=(e.onShareProject,e.resourceManagementProps),E=e.projectScopedContainersAccessor,L=e.gamesList,A=e.onOpenHomePage,O=e.toggleProjectManager,R=e.mainMenuCallbacks,F=e.buildMainMenuProps,N=e.onExtensionInstalled,B=e.onSceneAdded,U=e.onExternalLayoutAdded,V=c.useState([]),H=(0,s.Z)(V,2),z=H[0],W=H[1],G=c.useContext(Z.Z),Y=G.triggerUnsavedChanges,q=c.useContext(D.ZP),J=c.useContext(j.Z),X=c.useContext(gi.Z).currentlyRunningInAppTutorial,K=c.useRef(null),Q=(0,gt.Z)(),$=(0,be.UQ)().isMobile,ee=(0,Ye.Z)().showDeleteConfirmation,te=L.fetchGames,ne=c.useContext(fa.ZP).navigateToRoute,re=c.useCallback((function(){Q(),K.current&&K.current.forceUpdateList()}),[Q]),ie=c.useState(""),ae=(0,s.Z)(ie,2),oe=ae[0],se=ae[1],le=c.useCallback((function(e){K.current&&K.current.scrollToItemFromId(e)}),[]),ce=c.useState(!1),ue=(0,s.Z)(ce,2),de=ue[0],pe=ue[1],fe=c.useState("properties"),he=(0,s.Z)(fe,2),ge=he[0],me=he[1],xe=c.useCallback((function(){pe(!0),me("properties")}),[]),ve=c.useCallback((function(){pe(!0),me("loading-screen")}),[]),Ce=c.useCallback((function(){pe(!0),me("icons")}),[]),je=c.useCallback((function(e){Y(),e.newName&&r(e.newName),pe(!1)}),[Y,r]),ye=c.useContext($n.ZP).profile,Ze=ye?ye.id:null;c.useEffect((function(){te()}),[te,Ze]);var ke=c.useCallback((function(){n&&(ne("games-dashboard",{"game-id":n.getProjectUuid(),"games-dashboard-tab":"details"}),A(),O(),te())}),[te,ne,A,O,n]),we=c.useState(!1),Te=(0,s.Z)(we,2),Se=Te[0],Pe=Te[1],Ie=c.useCallback((function(){Pe(!0)}),[]),Ee=c.useState(null),Me=(0,s.Z)(Ee,2),Le=Me[0],Oe=Me[1],Re=c.useState(null),Fe=(0,s.Z)(Re,2),De=Fe[0],Ne=Fe[1],_e=c.useCallback((function(e){Oe(e)}),[]),Be=c.useCallback((function(e){Ne(e)}),[]),Ue=c.useState(!1),Ve=(0,s.Z)(Ue,2),He=Ve[0],ze=Ve[1],We=c.useCallback((function(){ze(!0)}),[]),qe=c.useState(null),Je=(0,s.Z)(qe,2),Xe=Je[0],Ke=Je[1],Qe=c.useState(null),$e=(0,s.Z)(Qe,2),et=$e[0],tt=$e[1],nt=c.useRef(null);c.useImperativeHandle(t,(function(){return{forceUpdateList:function(){Q(),K.current&&K.current.forceUpdateList()},focusSearchBar:function(){nt.current&&nt.current.focus()}}}));var rt=c.useCallback((function(){Q(),Y()}),[Q,Y]),at=c.useCallback((function(e){var t=K.current;t&&($&&t.scrollToItemFromId(e,"start"),t.renameItemFromId(e))}),[$]),ot=c.useCallback((function(e,t){if(n){var r=(0,xt.Z)(t._({id:"Untitled scene"}),(function(e){return n.hasLayoutNamed(e)})),i=n.insertNewLayout(r,e+1);i.setName(r),i.updateBehaviorsSharedData(n),zi(i),B(),rt();var a=na(i);K.current&&K.current.openItems([a,Ea]),setTimeout((function(){le(a)}),100),at(a)}}),[n,rt,at,le,B]),st=c.useCallback((function(e,t){var n=(0,xt.Z)(t._({id:"UntitledExtension"}),(function(t){return Ri(t,e)})),r=e.insertNewEventsFunctionsExtension(n,e.getEventsFunctionsExtensionsCount());ze(!1),rt();var i=aa(r);K.current&&K.current.openItems([i,Ma]),setTimeout((function(){le(i)}),100),at(i)}),[at,rt,le]),lt=c.useContext(Nr.H).translatedExtensionShortHeadersByName,ct=c.useCallback((function(e){var t=e.getName();if("gdevelop-extension-store"===e.getOriginName()){var n=e.getOriginIdentifier(),r=lt[n];if(!r)return console.warn("This extension was downloaded from the store but its reference ".concat(n," couldn't be found in the store. Opening the extension in the editor...")),void C(t);Ke(r),tt(t)}else C(t)}),[lt,C]),ut=c.useCallback((function(e,t){if(n){var r=(0,xt.Z)(t._({id:"Untitled external events"}),(function(e){return n.hasExternalEventsNamed(e)})),i=n.insertNewExternalEvents(r,e+1);rt();var a=la(i);K.current&&K.current.openItems([a,La]),setTimeout((function(){le(a)}),100),at(a)}}),[n,rt,at,le]),dt=c.useCallback((function(e,t){if(n){var r=(0,xt.Z)(t._({id:"Untitled external layout"}),(function(e){return n.hasExternalLayoutNamed(e)})),i=n.insertNewExternalLayout(r,e+1);U(),rt();var a=da(i);K.current&&K.current.openItems([a,Aa]),setTimeout((function(){le(a)}),100),at(a)}}),[n,rt,at,le,U]),pt=c.useCallback((function(e){Y(),e?re():Q()}),[Q,re,Y]),ft=c.useRef(new ht.ZP({shortcutCallbacks:{}}));c.useEffect((function(){ft.current&&(ft.current.setShortcutCallback("onDelete",(function(){z.length>0&&z[0].content.delete()})),ft.current.setShortcutCallback("onRename",(function(){z.length>0&&at(z[0].content.getId())})),ft.current.setShortcutCallback("onCopy",(function(){z.length>0&&z[0].content.copy()})),ft.current.setShortcutCallback("onPaste",(function(){z.length>0&&z[0].content.paste()})),ft.current.setShortcutCallback("onCut",(function(){z.length>0&&z[0].content.cut()})))}),[at,z]);var vt=c.useMemo((function(){return n?{project:n,unsavedChanges:G,preferences:q,gdevelopTheme:J,forceUpdate:Q,forceUpdateList:re,showDeleteConfirmation:ee,editName:at,scrollToItem:le,onSceneAdded:B,onDeleteLayout:a,onRenameLayout:p,onOpenLayout:x,onOpenLayoutProperties:_e,onOpenLayoutVariables:Be}:null}),[n,G,q,J,Q,re,ee,at,le,B,a,p,x,_e,Be]),bt=c.useMemo((function(){return n?{project:n,unsavedChanges:G,preferences:q,gdevelopTheme:J,forceUpdate:Q,forceUpdateList:re,showDeleteConfirmation:ee,editName:at,scrollToItem:le,onDeleteEventsFunctionsExtension:d,onRenameEventsFunctionsExtension:m,onOpenEventsFunctionsExtension:C,onReloadEventsFunctionsExtensions:k,onEditEventsFunctionExtensionOrSeeDetails:ct}:null}),[n,G,q,J,Q,re,ee,at,le,d,m,C,k,ct]),Ct=c.useMemo((function(){return n?{project:n,unsavedChanges:G,preferences:q,gdevelopTheme:J,forceUpdate:Q,forceUpdateList:re,showDeleteConfirmation:ee,editName:at,scrollToItem:le,onDeleteExternalEvents:o,onRenameExternalEvents:h,onOpenExternalEvents:v}:null}),[n,G,q,J,Q,re,ee,at,le,o,h,v]),jt=c.useMemo((function(){return n?{project:n,unsavedChanges:G,preferences:q,gdevelopTheme:J,forceUpdate:Q,forceUpdateList:re,showDeleteConfirmation:ee,editName:at,scrollToItem:le,onExternalLayoutAdded:U,onDeleteExternalLayout:u,onRenameExternalLayout:g,onOpenExternalLayout:b}:null}),[n,G,q,J,Q,re,ee,at,le,U,u,g,b]),yt=c.useCallback((function(e){return n&&vt&&bt&&Ct&&jt?[{isRoot:!0,content:new Da(Ta,e._({id:"Game settings"})),getChildren:function(e){return[new Ra(new Na(Sa,e._({id:"Properties & Icons"}),xe,"res/icons_default/properties_black.svg")),new Ra(new Na(Pa,e._({id:"Global variables"}),Ie,"res/icons_default/global_variable24_black.svg")),new Ra(new Na(Ia,e._({id:"Resources"}),y,"res/icons_default/project_resources_black.svg")),new Ra(new Na("manage",e._({id:"Game Dashboard"}),ke,"res/icons_default/graphs_black.svg"))]}},{isRoot:!0,content:new Da(Ea,e._({id:"Scenes"}),{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add a scene"}),click:function(){var t=n.getLayoutsCount()-1;ot(t,e)},id:"add-new-scene-button"}),getChildren:function(e){return 0===n.getLayoutsCount()?[new Fa("scenes-placeholder",e._({id:"Start by adding a new scene."}))]:(0,mt.mapFor)(0,n.getLayoutsCount(),(function(e){return new Ra(new ra(n.getLayoutAt(e),vt))}))}},{isRoot:!0,content:new Da(Ma,e._({id:"Extensions"}),{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Create or search for new extensions"}),click:We,id:"project-manager-extension-search-or-create"}),getChildren:function(e){return 0===n.getEventsFunctionsExtensionsCount()?[new Fa("extensions-placeholder",e._({id:"Start by adding a new function."}))]:(0,mt.mapFor)(0,n.getEventsFunctionsExtensionsCount(),(function(e){return new Ra(new oa(n.getEventsFunctionsExtensionAt(e),bt))}))}},{isRoot:!0,content:new Da(La,e._({id:"External events"}),{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add external events"}),click:function(){var t=n.getExternalEventsCount()-1;ut(t,e)},id:"add-new-external-events-button"}),getChildren:function(e){return 0===n.getExternalEventsCount()?[new Fa("external-events-placeholder",e._({id:"Start by adding new external events."}))]:(0,mt.mapFor)(0,n.getExternalEventsCount(),(function(e){return new Ra(new ca(n.getExternalEventsAt(e),Ct))}))}},{isRoot:!0,content:new Da(Aa,e._({id:"External layouts"}),{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add an external layout"}),click:function(){var t=n.getExternalLayoutsCount()-1;dt(t,e)},id:"add-new-external-layout-button"}),getChildren:function(e){return 0===n.getExternalLayoutsCount()?[new Fa("external-layout-placeholder",e._({id:"Start by adding a new external layout."}))]:(0,mt.mapFor)(0,n.getExternalLayoutsCount(),(function(e){return new Ra(new pa(n.getExternalLayoutAt(e),jt))}))}}]:[]}),[ut,dt,ot,bt,Ct,jt,ke,y,xe,Ie,We,n,vt]),Zt=c.useCallback((function(e,t){return z.every((function(t){return t.content.getRootId().length>0&&t.content.getRootId()===e.content.getRootId()}))}),[z]),kt=c.useCallback((function(e,t,n){0!==z.length&&(z[0].content.moveAt(t.content.getIndex()+("after"===n?1:0)),pt(!0))}),[pt,z]),wt=c.useCallback((function(e){1!==z.length||e.isPlaceholder||z[0].content.isDescendantOf(e.content)&&W([])}),[z]),Tt=n?n.ptr:"no-project",St=[Ta,Ea,Ma,La,Aa],Pt=c.useState([]),It=(0,s.Z)(Pt,2),Et=It[0],Mt=It[1],Lt=Et.length>0,At=(0,ja.z1)()&&!!ka;return c.useEffect((function(){T||Mt([])}),[T]),(0,f.jsxs)(Ki.Z,{maxWidth:!0,children:[(0,f.jsx)(Di,{project:n,onOpenProjectProperties:xe,onOpenProjectLoadingScreen:ve,onOpenProjectVariables:Ie,onOpenResourcesDialog:y,onOpenPlatformSpecificAssetsDialog:Ce,onOpenSearchExtensionDialog:We}),(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[!At&&(0,f.jsx)(Za,{project:n,mainMenuCallbacks:R,buildMainMenuProps:F,selectedMainMenuItemIndices:Et,setSelectedMainMenuItemIndices:Mt,closeDrawer:O}),!Lt&&n&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(Ge.Z,{ref:nt,value:oe,onRequestSearch:function(){},onChange:se,placeholder:{id:"Search in project"}})})}),(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[Lt?null:n?(0,f.jsx)("div",{id:"project-manager",style:(0,l.Z)((0,l.Z)({},Oa.listContainer),Oa.autoSizerContainer),onKeyDown:ft.current.onKeyDown,onKeyUp:ft.current.onKeyUp,children:(0,f.jsx)(Br.qj,{style:Oa.autoSizer,disableWidth:!0,children:function(e){var n=e.height;return(0,f.jsx)(Qi.Z,{ref:K,items:yt(t),height:n,forceAllOpened:!!X,searchText:oe,getItemName:_a,getItemThumbnail:Ha,getItemChildren:Va(t),multiSelect:!1,getItemId:Ba,getItemHtmlId:Ua,getItemDataset:za,onEditItem:Ja,onCollapseItem:wt,selectedItems:z,onSelectItems:function(e){var t=e[0];t&&(t.isRoot||W(e))},onClickItem:qa,onRenameItem:Ya,buildMenuTemplate:Wa(t),getItemRightButton:Xa(t),renderRightComponent:Ga(t),onMoveSelectionToItem:function(e,n){return kt(t,e,n)},canMoveSelectionToItem:Zt,reactDndType:"GD_EXTENSION_ITEM",initiallyOpenedNodeIds:St,forceDefaultDraggingPreview:!0,shouldHideMenuIcon:function(e){return!e.content.getRootId()}},Tt)}})}):(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"To begin, open or create a new project."})}),de&&n&&E&&(0,f.jsx)(Dr,{open:!0,initialTab:ge,project:n,onClose:function(){return pe(!1)},onApply:i,onPropertiesApplied:je,resourceManagementProps:I,projectScopedContainersAccessor:E,hotReloadPreviewButtonProps:S,i18n:t}),n&&Se&&(0,f.jsx)(Un,{project:n,open:!0,onCancel:function(){return Pe(!1)},onApply:function(){Y(),Pe(!1)},hotReloadPreviewButtonProps:S,isListLocked:!1}),!!Le&&n&&E&&(0,f.jsx)(Ai,{open:!0,layout:Le,project:n,onApply:function(){Y(),_e(null)},onClose:function(){return _e(null)},onEditVariables:function(){Be(Le),_e(null)},resourceManagementProps:I,projectScopedContainersAccessor:E,onBackgroundColorChanged:function(){}}),n&&!!De&&(0,f.jsx)(Oi,{open:!0,project:n,layout:De,onCancel:function(){return Be(null)},onApply:function(){Y(),Be(null)},hotReloadPreviewButtonProps:S,isListLocked:!1}),n&&He&&(0,f.jsx)(ji,{project:n,onClose:function(){return ze(!1)},onWillInstallExtension:P,onCreateNew:function(){st(n,t)},onExtensionInstalled:N}),n&&Xe&&et&&(0,f.jsx)(Ni,{project:n,onClose:function(){Ke(null),tt(null)},onOpenEventsFunctionsExtension:C,extensionShortHeader:Xe,extensionName:et,onWillInstallExtension:P,onExtensionInstalled:N})]})}})]})})]})})),Qa=function(e,t){return!t.isOpen},$a=c.memo(Ka,Qa),eo=c.forwardRef((function(e,t){var n=c.useRef(null),r=(0,hi.bX)();return c.useEffect((function(){var t=setTimeout((function(){e.isOpen&&r&&n.current&&n.current.focusSearchBar()}),100);return function(){return clearTimeout(t)}}),[e.isOpen,r]),(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Project manager"}),scope:"project-manager",children:(0,f.jsx)($a,(0,l.Z)({ref:function(e){n.current=e,"function"===typeof t?t(e):null!==t&&(t.current=e)}},e))})})),to=n(934),no=F()("electron"),ro=F()("@electron/remote"),io=c.memo((function(e){var t=e.shouldPrompt,n=e.i18n,r=e.language,i=e.hasUnsavedChanges,a=c.useRef(!0);return c.useEffect((function(){if(!y.ZP.isDev()){var e=[n._({id:"Are you sure you want to quit GDevelop?"}),i?n._({id:"Any unsaved changes in the project will be lost."}):""].filter(Boolean).join("\n");no?window.onbeforeunload=function(n){if(a.current&&t)return setTimeout((function(){y.ZP.showConfirmDialog(e)&&(a.current=!1,ro.getCurrentWindow().close())}),10),n.returnValue=!0,!1}:window&&!(0,ja._F)()&&(window.onbeforeunload=t?function(){return e}:null)}}),[t,n,r,i]),null})),ao=n(46538),oo=n(73298),so=n(44634),lo=n(44439),co=n(24233),uo=n(91),po=function(e){var t=e.communityLinks;return(0,f.jsx)(_.ak,{expand:!0,noMargin:!0,children:t.map((function(e,t){var n=e.text,r=e.isNotFilled,i=e.icon;return n?(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[i,(0,f.jsx)(N.Z,{noMargin:!0,color:r?"secondary":"primary",children:n})]},t):null}))})},fo=function(e){var t=e.authenticatedUser,n=e.onOpenChangeEmailDialog,r=e.onOpenEditProfileDialog,i=t.firebaseUser,u=t.achievements,d=t.badges,p=t.subscription,h=t.getAuthorizationHeader,g=c.useMemo((function(){return t.profile&&i?(0,l.Z)((0,l.Z)({},t.profile),{},{email:i.email}):null}),[t.profile,i]),m=!!t.limits&&!!t.limits.capabilities.classrooms&&t.limits.capabilities.classrooms.hideSocials,x=g?g.email:null,v=g?g.donateLink:null,b=g?g.discordUsername:null,C=g?g.githubUsername:null,j=g&&g.communityLinks||{},Z=j?j.personalWebsiteLink:null,k=g?j.personalWebsite2Link:null,S=g?j.twitterUsername:null,P=g?j.facebookUsername:null,I=g?j.youtubeUsername:null,E=g?j.tiktokUsername:null,L=g?j.instagramUsername:null,A=g?j.redditUsername:null,O=g?j.snapchatUsername:null,R=g?j.discordServerLink:null,F=(0,Ye.Z)().showAlert,D=u&&u.find((function(e){return"github-star"===e.id}))||null,B=!!d&&d.some((function(e){return"github-star"===e.achievementId})),U=u&&u.find((function(e){return"tiktok-follow"===e.id}))||null,V=!!d&&d.some((function(e){return"tiktok-follow"===e.achievementId})),H=u&&u.find((function(e){return"twitter-follow"===e.id}))||null,z=!!d&&d.some((function(e){return"twitter-follow"===e.achievementId})),W=u&&u.find((function(e){return"youtube-subscription"===e.id}))||null,Y=!!d&&d.some((function(e){return"youtube-subscription"===e.achievementId})),q=c.useState(null),J=(0,s.Z)(q,2),X=J[0],K=J[1],Q=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return K("syncing"),e.prev=3,e.next=6,(0,xr.Zb)(h,g.id);case 6:K("success"),e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(3),console.error("Error while syncing discord username:",e.t0),!(t=(0,uo.T)(e.t0))||400!==t.status||"discord-role-update/discord-user-not-found"!==t.code){e.next=16;break}return F({title:{id:"Discord user not found"},message:{id:"Ensure you don't have any typo in your username and that you have joined the GDevelop Discord server."}}),e.abrupt("return");case 16:F({title:{id:"Discord username sync failed"},message:{id:"Something went wrong while syncing your Discord username. Please try again later."}});case 17:return e.prev=17,setTimeout((function(){return K(null)}),3e3),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,9,17,20]])}))),[h,g,F]),ee=(0,er.u0)(p);return g?(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,children:[(0,f.jsx)(ao.Z,{src:(0,oo.y)(x||"",{size:40})}),(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(M.x1,{justifyContent:"space-between",noMargin:!0,children:(0,f.jsx)(N.Z,{size:"block-title",allowBrowserAutoTranslate:!g.username,style:{opacity:g.username?1:.5},children:g.username||t._({id:"Edit your profile to pick a username!"})})}),x&&(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"body-small",children:(0,f.jsx)(w.Trans,{id:"Email"})}),(0,f.jsx)(N.Z,{children:x})]}),!m&&(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"body-small",children:(0,f.jsx)(w.Trans,{id:"Discord username"})}),ee&&!!b&&(0,f.jsx)($.Z,{onClick:Q,disabled:null!==X,tooltip:{id:"Sync your role on GDevelop's Discord server"},size:"small",children:"success"===X?(0,f.jsx)(co.Z,{fontSize:"small"}):(0,f.jsx)(lo.Z,{fontSize:"small"})})]}),(0,f.jsx)(N.Z,{color:b?"primary":"secondary",children:b?(0,f.jsxs)(f.Fragment,{children:[b,!ee&&(0,f.jsxs)(f.Fragment,{children:[" - ",(0,f.jsx)(Re.r,{translatableSource:{id:"Get a Gold or Pro subscription to claim your role on the [GDevelop Discord](https://discord.gg/gdevelop)."}})]})]}):ee?(0,f.jsx)(Re.r,{translatableSource:{id:"Edit your profile and fill your discord username to claim your role on the [GDevelop Discord](https://discord.gg/gdevelop)."}}):(0,f.jsx)(Re.r,{translatableSource:{id:"Get access to an exclusive channel on the [GDevelop Discord](https://discord.gg/gdevelop) by subscribing to a Gold, Pro or Education plan."}})})]}),(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"body-small",children:(0,f.jsx)(w.Trans,{id:"Bio"})}),(0,f.jsx)(N.Z,{color:g.description?"primary":"secondary",children:g.description||(0,f.jsx)(w.Trans,{id:"No bio defined."})})]}),!m&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"body-small",children:(0,f.jsx)(w.Trans,{id:"Socials"})}),(0,f.jsx)(po,{communityLinks:[{text:C||B?C:(0,f.jsx)(Re.r,{translatableSource:xr.Ty.githubUsername.getRewardMessage(!1,D&&D.rewardValueInCredits?D.rewardValueInCredits.toString():"-")}),isNotFilled:!C,icon:xr.Ty.githubUsername.icon},{text:S||z?S:(0,f.jsx)(Re.r,{translatableSource:xr.Ty.twitterUsername.getRewardMessage(!1,H&&H.rewardValueInCredits?H.rewardValueInCredits.toString():"-")}),isNotFilled:!S,icon:xr.Ty.twitterUsername.icon},{text:I||Y?I:(0,f.jsx)(Re.r,{translatableSource:xr.Ty.youtubeUsername.getRewardMessage(!1,W&&W.rewardValueInCredits?W.rewardValueInCredits.toString():"-")}),isNotFilled:!I,icon:xr.Ty.youtubeUsername.icon},{text:E||V?E:(0,f.jsx)(Re.r,{translatableSource:xr.Ty.tiktokUsername.getRewardMessage(!1,U&&U.rewardValueInCredits?U.rewardValueInCredits.toString():"-")}),isNotFilled:!E,icon:xr.Ty.tiktokUsername.icon},{text:Z,icon:xr.Ty.personalWebsiteLink.icon},{text:k,icon:xr.Ty.personalWebsite2Link.icon},{text:P,icon:xr.Ty.facebookUsername.icon},{text:L,icon:xr.Ty.instagramUsername.icon},{text:A,icon:xr.Ty.redditUsername.icon},{text:O,icon:xr.Ty.snapchatUsername.icon},{text:R,icon:xr.Ty.discordServerLink.icon}]}),(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"body-small",children:(0,f.jsx)(w.Trans,{id:"Donate link"})}),(0,f.jsx)(N.Z,{color:v?"primary":"secondary",children:v||(0,f.jsx)(w.Trans,{id:"No link defined."})})]})]}),(0,f.jsxs)(_.ep,{justifyContent:"flex-start",noMargin:!0,noResponsiveLandscape:!0,children:[(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Edit my profile"}),primary:!0,onClick:r}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Change my email"}),onClick:n,disabled:g.isEmailAutogenerated}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Access public profile"}),onClick:function(){return y.ZP.openExternalURL(Ee.Zw.getUserPublicProfileUrl(g.id,g.username))},leftIcon:(0,f.jsx)(so.Z,{})})]})]})]})}}):(0,f.jsx)(Oe.Z,{})},ho=function(e){var t=e.onOpenEditProfileDialog,n=e.onOpenChangeEmailDialog,r=e.authenticatedUser,i=r.profile,a=r.firebaseUser,o=c.useCallback((function(){r.onOpenEmailVerificationDialog({sendEmailAutomatically:!0,showSendEmailButton:!1})}),[r]);return a&&i?(0,f.jsxs)(_.ak,{noMargin:!0,children:[a&&!a.emailVerified&&(0,f.jsx)(je.Z,{kind:"info",renderRightButton:function(){return(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Send it again"}),onClick:o,primary:!0})},children:(0,f.jsx)(w.Trans,{id:"You are missing out on asset store discounts and other benefits! Verify your email address. Didn't receive it?"})}),(0,f.jsx)(fo,{authenticatedUser:r,onOpenChangeEmailDialog:n,onOpenEditProfileDialog:t})]}):(0,f.jsx)(Oe.Z,{})},go=n(45987),mo=n(56885),xo=n(82422),vo=n(92078),bo=n(46976),Co={bulletIcon:{width:20,height:20,marginRight:10},planPricesPaper:{padding:10,display:"flex",flexDirection:"column",alignItems:"center"},bulletText:{flex:1}},jo=function(e){var t=c.useContext(j.Z),n=(0,be.UQ)().isMobile,r=(0,bo.sG)({planId:e.subscriptionPlanWithPricingSystems.id,logoSize:40});return(0,f.jsx)(w.I18n,{children:function(i){var a=i.i18n;return(0,f.jsx)(H.Z,{background:e.background,style:(0,l.Z)({paddingRight:n?8:32,paddingLeft:r?0:n?8:65,border:"1px solid ".concat(t.text.color.disabled),paddingTop:16,paddingBottom:16},e.isHighlighted?{borderLeftWidth:4,borderLeftColor:t.palette.secondary}:{}),children:(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsx)(M.sg,{noMargin:!0,children:r}),(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)("span",{children:(0,f.jsx)("b",{children:(0,vo.a)(a,e.subscriptionPlanWithPricingSystems.nameByLocale)})})}),(0,f.jsx)(M.sg,{noMargin:!0,alignItems:"flex-end",children:(0,bo.H$)({pricingSystems:e.subscriptionPlanWithPricingSystems.pricingSystems,hidePrice:e.hidePrice})})]}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,vo.a)(a,e.subscriptionPlanWithPricingSystems.descriptionByLocale)}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,children:e.subscriptionPlanWithPricingSystems.bulletPointsByLocale.map((function(n,r){return(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[e.isHighlighted?(0,f.jsx)(xo.Z,{style:(0,l.Z)((0,l.Z)({},Co.bulletIcon),{},{color:t.message.valid})}):(0,f.jsx)(xo.Z,{style:Co.bulletIcon}),(0,f.jsx)(N.Z,{style:Co.bulletText,children:(0,vo.a)(a,n)})]})},r)}))})}),e.actions&&(0,f.jsx)(_.ep,{noResponsiveLandscape:!0,expand:!0,noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:e.actions})]})]})})}})},yo=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"88",height:"64",viewBox:"0 0 88 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M42.0525 36.9015C39.3747 41.0116 34.9532 41.2607 29.9713 40.3889C28.103 39.7869 23.8559 37.4869 21.8133 33.1028C19.2601 27.6226 26.2794 11.1901 31.6527 5.07927C38.0047 -2.14455 46.8047 -0.961339 50.9149 4.02062C55.025 9.00257 53.3242 15.1677 49.2763 21.5197C45.2285 27.8717 44.7303 32.7914 42.0525 36.9015Z",fill:"url(#paint0_linear_984_3445)"}),(0,f.jsx)("path",{d:"M33.2284 23.0176L32.2943 25.1349C32.0452 24.4374 31.9414 23.7441 31.9207 23.578C32.0203 23.4784 32.834 23.1629 33.2284 23.0176Z",fill:"#DB422A"}),(0,f.jsx)("path",{d:"M49.2336 11.2465C50.7282 12.6165 50.4791 15.7925 49.6072 18.0344C42.782 21.0734 40.0793 15.2735 39.5811 11.9938C44.1271 8.63094 47.4899 9.64809 49.2336 11.2465Z",fill:"#FEF9F5"}),(0,f.jsx)("mask",{id:"mask0_984_3445",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"41",y:"12",width:"8",height:"8",children:(0,f.jsx)("path",{d:"M47.8414 18.0294C46.6608 19.6881 44.4129 20.1139 42.8206 18.9805C41.2283 17.8472 41.061 15.6497 42.2416 13.991C43.4222 12.3324 45.7913 11.5 47.4379 12.4935C49.7105 13.8646 49.0219 16.3707 47.8414 18.0294Z",fill:"black"})}),(0,f.jsx)("g",{mask:"url(#mask0_984_3445)",children:(0,f.jsx)("path",{d:"M49.3581 10.1904C50.8527 11.5604 50.4791 15.7951 49.6072 18.037C42.782 21.076 40.0793 15.2761 39.5811 11.9963C44.9367 7.88623 47.8884 8.84314 49.3581 10.1904Z",fill:"black"})}),(0,f.jsx)("path",{d:"M20.1382 49.4634L34.5828 20.2962L53.9994 33.1823L20.1382 49.4634Z",fill:"#FFDAA4"}),(0,f.jsx)("path",{d:"M67.8152 26.5376L51.9401 56.3926L54.0002 33.1801L67.8152 26.5376Z",fill:"#FFA827"}),(0,f.jsx)("path",{d:"M20.1405 49.4659L54.0013 33.185L51.9416 56.3973L20.1405 49.4659Z",fill:"#FFBC57"}),(0,f.jsx)("path",{d:"M67.8141 26.5447L53.9994 33.187L34.5825 20.3013L67.8141 26.5447Z",fill:"#FFBC57"}),(0,f.jsx)("path",{d:"M33.1666 34.9699C28.9942 36.6513 25.7559 26.5006 25.5691 24.9437C26.8644 20.3603 30.2189 21.2903 31.7343 22.3282C32.2947 28.3065 37.339 33.2885 33.1666 34.9699Z",fill:"url(#paint1_linear_984_3445)"}),(0,f.jsx)("path",{d:"M27.8116 34.1009C26.1676 32.0085 25.3972 25.9222 25.6319 24.7598C26.1301 27.998 27.7888 31.2167 28.7361 32.6063L27.8116 34.1009Z",fill:"#DB422A"}),(0,f.jsx)("path",{d:"M53.7176 26.7483C51.6168 26.7483 50.3547 25.5651 50.3547 24.1951C50.3547 22.8249 52.5637 21.8613 53.7176 21.8908C55.475 21.9358 57.0181 23.0119 57.0181 24.1951C57.0181 25.3783 55.6481 26.7483 53.7176 26.7483Z",fill:"url(#paint2_linear_984_3445)"}),(0,f.jsxs)("defs",{children:[(0,f.jsxs)("linearGradient",{id:"paint0_linear_984_3445",x1:"49.7122",y1:"0.969171",x2:"25.7989",y2:"39.0189",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#FF7171"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#E85345"})]}),(0,f.jsxs)("linearGradient",{id:"paint1_linear_984_3445",x1:"31.4229",y1:"35.219",x2:"27.7487",y2:"21.5186",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#E04D40"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#F15F56"})]}),(0,f.jsxs)("linearGradient",{id:"paint2_linear_984_3445",x1:"53.6864",y1:"21.8901",x2:"53.6864",y2:"26.7483",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#FA6B68"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#F1463F"})]})]})]}))})),Zo=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"137",height:"57",viewBox:"0 0 137 57",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("g",{filter:"url(#filter0_f_984_3528)",children:(0,f.jsx)("ellipse",{cx:"18.5199",cy:"1.07755",rx:"18.5199",ry:"1.07755",transform:"matrix(0.999991 -0.00412603 -0.0157148 0.999877 19.3994 43.4453)",fill:"black",fillOpacity:"0.3"})}),(0,f.jsx)("path",{d:"M87.3558 14.309C87.4065 14.3685 87.4997 14.3724 87.564 14.3177C87.6283 14.2629 87.6393 14.1703 87.5886 14.1108C87.5379 14.0512 87.4447 14.0473 87.3804 14.102C87.3161 14.1568 87.3051 14.2494 87.3558 14.309Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M89.7377 12.1167C89.8329 12.2286 90.008 12.2359 90.1288 12.1331C90.2495 12.0303 90.2702 11.8563 90.1751 11.7445C90.0799 11.6327 89.9048 11.6253 89.784 11.7281C89.6633 11.8309 89.6426 12.0049 89.7377 12.1167Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M89.207 13.3102C89.2774 13.393 89.407 13.3984 89.4964 13.3223C89.5858 13.2462 89.6011 13.1174 89.5307 13.0347C89.4602 12.9519 89.3306 12.9465 89.2412 13.0225C89.1518 13.0986 89.1365 13.2274 89.207 13.3102Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M89.1277 10.6343C89.1642 10.6771 89.2313 10.6799 89.2776 10.6405C89.3238 10.6011 89.3318 10.5345 89.2953 10.4916C89.2588 10.4488 89.1917 10.446 89.1455 10.4854C89.0992 10.5248 89.0913 10.5914 89.1277 10.6343Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M91.0385 9.45533C91.0688 9.49091 91.1245 9.49324 91.1629 9.46053C91.2013 9.42782 91.2079 9.37247 91.1776 9.33689C91.1474 9.30131 91.0917 9.29898 91.0532 9.33168C91.0148 9.36439 91.0082 9.41975 91.0385 9.45533Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M93.55 13.8343C93.6541 13.9565 93.8454 13.9645 93.9774 13.8522C94.1094 13.7398 94.1321 13.5496 94.028 13.4274C93.924 13.3051 93.7326 13.2971 93.6006 13.4095C93.4686 13.5219 93.4459 13.712 93.55 13.8343Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M92.393 13.995C92.4433 14.054 92.5358 14.0579 92.5996 14.0036C92.6633 13.9493 92.6743 13.8574 92.624 13.7984C92.5737 13.7393 92.4813 13.7354 92.4175 13.7897C92.3537 13.844 92.3428 13.9359 92.393 13.995Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M94.4815 13.5479C94.5162 13.5885 94.5798 13.5912 94.6237 13.5538C94.6676 13.5164 94.6752 13.4532 94.6406 13.4125C94.6059 13.3718 94.5423 13.3692 94.4984 13.4065C94.4545 13.4439 94.4469 13.5072 94.4815 13.5479Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M89.4894 16.4991C89.6279 16.6617 89.8825 16.6724 90.0582 16.5229C90.2338 16.3734 90.2639 16.1203 90.1255 15.9576C89.987 15.795 89.7324 15.7843 89.5567 15.9338C89.3811 16.0833 89.3509 16.3364 89.4894 16.4991Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M83.5136 22.9797C83.5995 23.0806 83.7575 23.0873 83.8665 22.9945C83.9755 22.9017 83.9942 22.7447 83.9083 22.6437C83.8223 22.5428 83.6643 22.5362 83.5553 22.6289C83.4463 22.7217 83.4276 22.8788 83.5136 22.9797Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M85.8147 22.0743C85.8524 22.1186 85.9218 22.1215 85.9696 22.0808C86.0174 22.0401 86.0257 21.9712 85.9879 21.9269C85.9502 21.8826 85.8809 21.8797 85.8331 21.9204C85.7852 21.9611 85.777 22.03 85.8147 22.0743Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M83.8239 19.3441C83.9197 19.4567 84.0959 19.464 84.2175 19.3606C84.339 19.2571 84.3599 19.082 84.2641 18.9694C84.1682 18.8569 83.992 18.8495 83.8705 18.953C83.749 19.0564 83.7281 19.2315 83.8239 19.3441Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M81.3424 23.5497C81.4491 23.6751 81.6454 23.6833 81.7808 23.568C81.9162 23.4528 81.9394 23.2577 81.8327 23.1323C81.7259 23.0069 81.5296 22.9987 81.3942 23.114C81.2589 23.2292 81.2356 23.4243 81.3424 23.5497Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M84.2286 18.1208C84.2668 18.1656 84.3369 18.1685 84.3852 18.1273C84.4336 18.0862 84.4419 18.0165 84.4037 17.9717C84.3656 17.9269 84.2955 17.924 84.2472 17.9652C84.1988 18.0063 84.1905 18.076 84.2286 18.1208Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M107.369 12.9029C107.505 13.0634 107.756 13.0739 107.93 12.9264C108.103 12.7789 108.133 12.5292 107.996 12.3687C107.86 12.2082 107.608 12.1977 107.435 12.3452C107.262 12.4927 107.232 12.7424 107.369 12.9029Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M105.25 22.0912C105.327 22.1818 105.469 22.1877 105.567 22.1045C105.664 22.0213 105.681 21.8804 105.604 21.7899C105.527 21.6994 105.385 21.6934 105.288 21.7766C105.19 21.8599 105.173 22.0007 105.25 22.0912Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M106.881 20.5604C106.921 20.6071 106.994 20.6102 107.045 20.5672C107.095 20.5243 107.104 20.4516 107.064 20.4049C107.024 20.3582 106.951 20.3551 106.901 20.3981C106.85 20.441 106.841 20.5137 106.881 20.5604Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M107.756 17.7313C107.802 17.786 107.888 17.7896 107.947 17.7393C108.006 17.6891 108.016 17.604 107.97 17.5492C107.923 17.4945 107.838 17.491 107.779 17.5412C107.719 17.5915 107.709 17.6766 107.756 17.7313Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M104.95 20.1488C105.005 20.2137 105.106 20.2179 105.176 20.1583C105.246 20.0987 105.258 19.9978 105.203 19.9329C105.148 19.868 105.046 19.8638 104.976 19.9234C104.906 19.983 104.894 20.0839 104.95 20.1488Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M102.212 21.6105C102.264 21.6708 102.358 21.6748 102.423 21.6193C102.488 21.5639 102.499 21.4702 102.448 21.4099C102.397 21.3496 102.302 21.3457 102.237 21.4011C102.172 21.4565 102.161 21.5503 102.212 21.6105Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M99.9335 6.99572C99.9626 7.02986 100.016 7.03209 100.053 7.00072C100.09 6.96934 100.096 6.91625 100.067 6.88212C100.038 6.84798 99.9845 6.84574 99.9477 6.87712C99.9108 6.90849 99.9045 6.96159 99.9335 6.99572Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M97.4855 10.3025C97.5696 10.4013 97.7242 10.4077 97.8308 10.3169C97.9375 10.2262 97.9558 10.0725 97.8717 9.97375C97.7876 9.87499 97.633 9.86851 97.5264 9.95929C97.4197 10.0501 97.4015 10.2037 97.4855 10.3025Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M95.171 10.2563C95.2481 10.3468 95.3898 10.3527 95.4876 10.2695C95.5853 10.1863 95.6021 10.0455 95.525 9.95494C95.448 9.86441 95.3063 9.85847 95.2085 9.94169C95.1107 10.0249 95.094 10.1657 95.171 10.2563Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M95.9303 8.65109C95.9602 8.68619 96.0151 8.68849 96.053 8.65623C96.0909 8.62397 96.0974 8.56936 96.0675 8.53426C96.0376 8.49916 95.9827 8.49686 95.9448 8.52912C95.9069 8.56138 95.9004 8.61598 95.9303 8.65109Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M94.055 7.91209C94.1151 7.98277 94.2258 7.98741 94.3021 7.92244C94.3784 7.85747 94.3915 7.7475 94.3314 7.67681C94.2712 7.60613 94.1605 7.60149 94.0842 7.66646C94.0079 7.73143 93.9948 7.8414 94.055 7.91209Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M92.8996 10.5758C93.0107 10.7063 93.215 10.7148 93.3558 10.5949C93.4967 10.475 93.5209 10.272 93.4098 10.1415C93.2988 10.011 93.0945 10.0025 92.9536 10.1224C92.8128 10.2423 92.7886 10.4453 92.8996 10.5758Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M105.556 13.1274C105.607 13.1879 105.702 13.1919 105.767 13.1363C105.833 13.0807 105.844 12.9865 105.792 12.926C105.741 12.8655 105.646 12.8615 105.581 12.9171C105.515 12.9727 105.504 13.0669 105.556 13.1274Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M103.411 7.37013C103.495 7.46913 103.65 7.47562 103.757 7.38462C103.864 7.29362 103.882 7.13959 103.798 7.04059C103.714 6.94158 103.559 6.9351 103.452 7.0261C103.345 7.1171 103.326 7.27113 103.411 7.37013Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M109.151 11.1533C109.214 11.2267 109.328 11.2315 109.408 11.1641C109.487 11.0966 109.5 10.9825 109.438 10.9092C109.376 10.8358 109.261 10.831 109.182 10.8984C109.102 10.9659 109.089 11.08 109.151 11.1533Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M102.944 11.5139C103.05 11.6378 103.244 11.646 103.378 11.532C103.512 11.4181 103.535 11.2253 103.429 11.1014C103.324 10.9774 103.13 10.9693 102.996 11.0832C102.862 11.1971 102.839 11.39 102.944 11.5139Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M101.293 16.4176C101.38 16.5208 101.542 16.5275 101.653 16.4327C101.764 16.338 101.784 16.1775 101.696 16.0744C101.608 15.9713 101.447 15.9645 101.335 16.0593C101.224 16.1541 101.205 16.3145 101.293 16.4176Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M101.866 17.7038C101.898 17.7416 101.958 17.7441 101.998 17.7094C102.039 17.6746 102.046 17.6159 102.014 17.5781C101.982 17.5404 101.923 17.5379 101.882 17.5726C101.841 17.6073 101.834 17.6661 101.866 17.7038Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M98.5813 13.6983C98.6309 13.7566 98.7223 13.7604 98.7853 13.7068C98.8483 13.6532 98.8591 13.5624 98.8094 13.5041C98.7597 13.4457 98.6684 13.4419 98.6054 13.4955C98.5424 13.5491 98.5316 13.6399 98.5813 13.6983Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M99.8385 11.8694C99.8943 11.935 99.997 11.9393 100.068 11.879C100.139 11.8187 100.151 11.7166 100.095 11.651C100.039 11.5854 99.9365 11.5811 99.8656 11.6414C99.7948 11.7017 99.7826 11.8038 99.8385 11.8694Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M104.833 14.0716C104.87 14.1151 104.938 14.118 104.985 14.078C105.032 14.0379 105.041 13.9701 105.003 13.9265C104.966 13.883 104.898 13.8801 104.851 13.9202C104.804 13.9602 104.796 14.028 104.833 14.0716Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M105.897 12.1445C105.942 12.1975 106.025 12.201 106.082 12.1523C106.139 12.1035 106.149 12.0211 106.104 11.9681C106.059 11.915 105.976 11.9116 105.919 11.9603C105.861 12.009 105.852 12.0915 105.897 12.1445Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M86.5626 11.374C86.6032 11.4217 86.6778 11.4248 86.7293 11.381C86.7808 11.3371 86.7896 11.2629 86.749 11.2153C86.7084 11.1676 86.6338 11.1644 86.5823 11.2083C86.5308 11.2521 86.522 11.3263 86.5626 11.374Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M101.536 9.01394C101.601 9.09019 101.72 9.09519 101.803 9.0251C101.885 8.95502 101.899 8.83639 101.834 8.76014C101.769 8.68388 101.65 8.67889 101.567 8.74897C101.485 8.81906 101.471 8.93769 101.536 9.01394Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M86.6169 12.2569C86.7057 12.3612 86.869 12.3681 86.9816 12.2722C87.0943 12.1763 87.1136 12.0139 87.0248 11.9096C86.936 11.8053 86.7727 11.7984 86.66 11.8943C86.5474 11.9902 86.528 12.1525 86.6169 12.2569Z",fill:"#FEFAD1",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M99.7205 33.3928C101.181 33.9238 101.081 35.7692 100.719 36.6073C100.358 37.4453 99.4728 38.419 96.9737 39.0668C95.9663 39.328 93.9286 39.4427 93.9286 39.4427C93.9286 39.4427 93.6444 38.094 92.9529 36.6358C92.1275 34.8954 91.3773 34.0671 91.3773 34.0671C91.3773 34.0671 93.2668 34.6254 95.0681 34.268C96.899 33.9048 98.6244 32.9944 99.7205 33.3928Z",fill:"url(#paint0_linear_984_3528)"}),(0,f.jsx)("path",{d:"M99.7205 33.3928C101.181 33.9238 101.081 35.7692 100.719 36.6073C100.358 37.4453 99.4728 38.419 96.9737 39.0668C95.9663 39.328 93.9286 39.4427 93.9286 39.4427C93.9286 39.4427 93.6444 38.094 92.9529 36.6358C92.1275 34.8954 91.3773 34.0671 91.3773 34.0671C91.3773 34.0671 93.2668 34.6254 95.0681 34.268C96.899 33.9048 98.6244 32.9944 99.7205 33.3928Z",fill:"url(#paint1_linear_984_3528)"}),(0,f.jsx)("path",{d:"M93.3449 34.3766C93.3449 34.3766 94.7524 35.9212 95.2058 36.7133C95.6593 37.5055 96.3265 39.1972 96.3265 39.1972C96.1397 39.2456 96.5646 39.1586 96.3265 39.1972C95.2806 39.3666 93.9286 39.4427 93.9286 39.4427C93.9286 39.4427 93.6444 38.094 92.9529 36.6358C92.1275 34.8954 91.3773 34.0671 91.3773 34.0671C91.3773 34.0671 92.2347 34.3204 93.3449 34.3766Z",fill:"#007156"}),(0,f.jsx)("path",{d:"M93.3449 34.3766C93.3449 34.3766 94.7524 35.9212 95.2058 36.7133C95.6593 37.5055 96.3265 39.1972 96.3265 39.1972C96.1397 39.2456 96.5646 39.1586 96.3265 39.1972C95.2806 39.3666 93.9286 39.4427 93.9286 39.4427C93.9286 39.4427 93.6444 38.094 92.9529 36.6358C92.1275 34.8954 91.3773 34.0671 91.3773 34.0671C91.3773 34.0671 92.2347 34.3204 93.3449 34.3766Z",fill:"#007156"}),(0,f.jsx)("path",{d:"M65.8623 53.2486L66.7282 44.8782C67.3784 45.0175 67.8056 44.6618 68.7487 44.8782C69.7593 45.11 71.0793 45.477 71.3464 45.7441C71.9237 46.3214 73.6555 44.5895 74.2328 43.7236L80.0055 45.1668C80.0055 45.4555 78.5623 48.6304 75.9646 50.6509C74.3482 51.5745 71.635 51.0357 70.4805 50.6509C69.7878 52.0364 67.1131 52.96 65.8623 53.2486Z",fill:"url(#paint2_linear_984_3528)"}),(0,f.jsx)("path",{d:"M74.233 43.7236L80.0057 45.1668C80.0057 45.3451 79.455 46.6247 78.4218 48.0532C78.4218 48.0532 76.619 47.3009 75.6762 46.61C74.7333 45.9191 73.593 44.5147 73.593 44.5147C73.857 44.2297 74.0836 43.9477 74.233 43.7236Z",fill:"#007156"}),(0,f.jsx)("circle",{cx:"82.0263",cy:"34.2011",r:"13.2773",fill:"url(#paint3_linear_984_3528)"}),(0,f.jsx)("path",{d:"M71.6855 42.5896L72.5006 43.4555C72.5006 43.4555 72.6906 42.0193 73.3665 41.435C73.3665 41.435 73.8506 40.7952 74.2324 40.2602C75.1308 39.0013 76.737 38.0537 76.737 38.0537C75.3869 38.817 73.9132 38.3727 72.5006 39.9716C71.9054 40.6452 71.6855 41.7237 71.6855 42.5896Z",fill:"#007156"}),(0,f.jsx)("path",{d:"M70.72 45.4137C70.1859 47.0297 68.6924 47.1665 67.5337 46.5822C66.375 45.998 66.2304 44.5373 66.6647 41.9081C67.099 39.2789 69.4648 36.3575 70.1407 35.7733C72.1684 34.0205 73.6398 34.0205 74.7754 33.7283C74.7754 33.7283 76.2236 33.2504 77.3823 34.3126C78.5411 35.3748 77.672 37.2339 77.672 37.2339C76.5134 38.6946 74.8461 38.4003 73.0374 40.4474C71.596 42.0788 71.2994 43.6609 70.72 45.4137Z",fill:"url(#paint4_linear_984_3528)"}),(0,f.jsx)("rect",{x:"82.6035",y:"33.9419",width:"8.37459",height:"8.64129",rx:"2",transform:"rotate(-46.6569 82.6035 33.9419)",fill:"black"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M84.0137 32.4482L85.7199 30.6403C85.91 30.6023 86.1098 30.582 86.3159 30.582C87.5912 30.582 88.625 31.3574 88.625 32.3138C88.625 33.2703 87.5912 34.0457 86.3159 34.0457C85.1009 34.0457 84.1051 33.3418 84.0137 32.4482Z",fill:"white"}),(0,f.jsx)("path",{d:"M95.3029 54.9865C93.8597 55.2751 88.9529 56.141 86.3552 56.7183C86.2182 55.8961 85.6524 53.0323 84.3347 50.3683L81.4823 46.0896C81.233 45.7397 81.0209 45.4283 80.8711 45.1729H88.3756C90.1075 47.4819 91.1658 49.31 91.5506 51.2342C92.7052 51.4651 94.8218 54.1206 95.3029 54.9865Z",fill:"url(#paint5_linear_984_3528)"}),(0,f.jsx)("path",{d:"M105.477 50.8936L93.8256 24.5868L111.777 25.3247L105.477 50.8936Z",fill:"#FFDE95"}),(0,f.jsx)("path",{d:"M116.856 5.5443L128.165 33.2119L111.777 25.3243L116.856 5.5443Z",fill:"#FFB430"}),(0,f.jsx)("path",{d:"M105.475 50.8999L111.777 25.3246L128.165 33.2111L105.475 50.8999Z",fill:"#FFC557"}),(0,f.jsx)("path",{d:"M116.737 5.70845L111.778 25.3248L93.705 24.7582L116.737 5.70845Z",fill:"#FFC557"}),(0,f.jsx)("path",{d:"M47.7695 28.9274L50.8029 25.7037C51.4096 24.8715 52.3884 24.529 53.1426 24.8131C54.2185 25.2161 54.2893 26.6869 54.2933 26.8159C54.3277 27.8233 53.7311 28.5506 52.6614 29.82C51.9366 30.6754 51.1277 31.4563 50.2468 32.1512",fill:"url(#paint6_linear_984_3528)"}),(0,f.jsx)("path",{opacity:"0.69",d:"M49.8851 26.898C49.5468 28.835 49.2097 30.7726 48.874 32.7108C50.0496 32.277 51.1013 31.5639 51.9377 30.6335C51.6989 29.6502 51.5633 28.6447 51.5333 27.6334C51.5101 26.7306 51.5697 25.8276 51.7112 24.9355C51.4516 25.0642 51.2073 25.2216 50.9832 25.405C50.5015 25.807 50.1247 26.3193 49.8851 26.898Z",fill:"#C52600",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M38.9571 35.3761C38.6349 36.5205 38.3141 37.6623 37.9945 38.8013C37.6674 39.2633 37.213 39.6209 36.6862 39.8309C35.9925 40.0908 35.3879 39.9699 34.1381 39.6294C30.2696 38.5616 29.7963 37.9914 29.5941 37.7093C29.2205 37.2167 29.0265 36.6119 29.0441 35.9947C29.0441 35.7932 29.0987 35.0477 29.6629 34.554C30.2837 34.012 31.311 33.9798 32.2109 34.4855L36.0653 35.9261",fill:"url(#paint7_linear_984_3528)"}),(0,f.jsx)("path",{opacity:"0.69",d:"M33.4844 34.9384C33.63 35.239 33.8113 35.5211 34.0243 35.7786C35.1507 37.1406 36.5501 37.0298 37.0577 38.0614C37.2094 38.3637 37.3287 38.8553 37.0941 39.6431C37.2878 39.5213 37.4681 39.3795 37.632 39.22C37.7613 39.0954 37.8803 38.9606 37.9879 38.817L38.5157 36.9472C38.4388 36.3734 38.1996 35.8332 37.8261 35.3897C36.8818 34.2816 35.4743 34.3158 35.268 34.3259C34.627 34.3562 34.008 34.5688 33.4844 34.9384Z",fill:"#C52600",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M50.316 7.74225C49.3938 6.27439 48.1492 5.03431 46.6759 4.11552C44.3807 2.77766 42.2169 2.73535 41.0217 2.73535C39.3432 2.73535 36.7568 3.60778 34.6213 5.20556C32.1946 7.01892 31.869 10.4442 31.7194 11.2743C31.3331 18.0422 30.9448 23.1982 30.5586 29.966C30.8619 31.1649 31.6648 33.5424 33.863 35.3155C35.5192 36.6513 37.2462 37.0724 38.8195 37.4431C40.4344 37.8706 42.1129 38.0071 43.776 37.8461C45.4585 37.6668 48.4778 37.3444 50.045 35.0253C50.5472 34.2647 50.8548 33.393 50.9409 32.4866L51.9722 16.4383C52.1643 15.2476 52.6335 11.377 50.316 7.74225Z",fill:"url(#paint8_linear_984_3528)"}),(0,f.jsx)("path",{opacity:"0.6",d:"M43.9353 32.2241C45.0826 31.9349 46.2875 31.9634 47.4197 32.3067C48.2637 32.523 49.0283 32.9745 49.6239 33.6083C49.8918 33.9098 50.1133 34.2493 50.2812 34.6157C50.1275 34.8595 49.8929 35.2202 49.5855 35.6433C48.8797 36.6124 48.4166 37.0537 48.1942 37.3378C46.8191 39.1008 48.9303 42.2721 48.0405 42.8625C47.5087 43.2151 46.0183 42.524 45.63 41.4904C45.2073 40.3802 46.2367 39.3708 45.6987 37.7871C45.6027 37.4958 45.4666 37.2191 45.2943 36.965L41.9131 36.0785",fill:"#C52600",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M44.0507 31.8848C45.1379 32.0204 46.2026 32.2975 47.2175 32.7088C48.2125 33.1118 48.8353 33.3737 49.4218 34.0104C50.0135 34.6884 50.3956 35.5225 50.5219 36.4121C50.6574 37.1536 50.5219 37.2564 50.2469 39.7044C50.0446 41.6044 50.0689 42.0336 49.628 42.5252C49.1534 43 48.5109 43.2705 47.8384 43.2787C46.3965 43.2989 45.5512 42.09 45.4379 41.8824C45.3856 41.7836 45.3436 41.6796 45.3126 41.5722C45.2686 41.4149 45.2515 41.2515 45.262 41.0886C45.3874 39.916 45.4642 39.0133 45.5087 38.562C45.5198 38.4424 45.5157 38.3219 45.4966 38.2033C45.4463 37.8955 45.3055 37.6094 45.0921 37.3813L41.7109 36.4806",fill:"url(#paint9_linear_984_3528)"}),(0,f.jsx)("path",{opacity:"0.69",d:"M48.2006 20.0984C48.1501 20.9688 48.0773 21.6599 48.0388 22.0246C47.7861 22.0991 47.5697 22.1495 47.4059 22.1817C47.0064 22.2636 46.6003 22.3088 46.1925 22.3167C46.0132 22.3167 45.8272 22.3127 45.6344 22.3046C43.8447 22.1918 42.601 21.3959 41.5717 20.727C40.5297 20.056 39.6002 19.2258 38.8174 18.2669C39.3396 17.0709 40.036 15.9581 40.8841 14.9645C41.968 13.7032 43.9296 11.4124 46.3644 11.3177C46.5335 11.301 46.7039 11.3051 46.872 11.3298C48.692 11.8818 48.326 18.0795 48.2006 20.0984Z",fill:"#C52600",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M53.4735 16.7595C52.9096 18.3734 51.8343 19.7608 50.4097 20.7126C50.2884 20.7912 50.163 20.8678 50.0316 20.9423C49.3404 21.3396 48.5892 21.6227 47.8071 21.7805C47.2226 21.8989 46.6249 21.9402 46.0296 21.9034C44.2399 21.7906 42.9962 20.9947 41.9668 20.3258C40.9285 19.6539 40.0024 18.8238 39.2227 17.8656C39.7449 16.6696 40.4413 15.5569 41.2894 14.5633C42.3733 13.302 44.3349 11.0111 46.7697 10.9164C46.939 10.9094 47.1085 10.9135 47.2773 10.9285C49.0649 11.0877 50.3329 12.4135 51.34 13.4672C51.3622 13.4914 51.3865 13.5156 51.4067 13.5398C52.2853 14.4797 52.9856 15.5706 53.4735 16.7595Z",fill:"white",stroke:"#FFFEF4",strokeMiterlimit:"10"}),(0,f.jsx)("path",{d:"M51.6727 15.9374C51.6727 17.8878 51.1752 19.6206 50.4088 20.7126C50.2874 20.7912 50.1621 20.8678 50.0306 20.9423C49.3395 21.3396 48.5882 21.6227 47.8061 21.7805C46.3784 21.1982 45.3066 18.8025 45.3066 15.9374C45.3066 13.8339 45.885 11.9823 46.7586 10.9164C46.9279 10.9094 47.0975 10.9135 47.2662 10.9285C49.0539 11.0877 50.3218 12.4135 51.3289 13.4672C51.3512 13.4914 51.3754 13.5156 51.3956 13.5398C51.5793 14.3259 51.6722 15.1303 51.6727 15.9374Z",fill:"black",stroke:"black",strokeMiterlimit:"10"}),(0,f.jsx)("path",{d:"M13.1038 36.4634L25.5948 23.0554L31.2161 33.5257L13.1038 36.4634Z",fill:"#FFDE95"}),(0,f.jsx)("path",{d:"M42.5195 31.7737L29.146 45.3223L31.2192 33.5225L42.5195 31.7737Z",fill:"#FFB430"}),(0,f.jsx)("path",{d:"M13.1043 36.4613L31.2164 33.5236L29.1435 45.3234L13.1043 36.4613Z",fill:"#FFC557"}),(0,f.jsx)("path",{d:"M42.3879 31.7481L31.0877 33.4968L25.4662 23.0267L42.3879 31.7481Z",fill:"#FFC557"}),(0,f.jsx)("path",{opacity:"0.69",d:"M35.2117 22.7884C33.3846 22.3322 31.469 22.3648 29.6586 22.8831C29.254 23.0723 28.9005 23.3548 28.6273 23.7072C28.3371 24.0883 28.1473 24.5358 28.0752 25.0088C27.9175 26.4192 29.3856 27.068 30.3523 29.4415C30.5151 29.8346 30.6502 30.2385 30.7567 30.6504L30.9589 31.1742C31.303 31.0596 31.6173 30.8703 31.8791 30.6201C32.0715 30.4311 32.2326 30.2128 32.3563 29.9734C32.8356 29.0546 32.3968 28.6315 32.7951 28.017C32.9974 27.7026 33.4018 27.5012 34.1885 27.1183C34.5427 26.9479 34.9059 26.7966 35.2764 26.665L35.2117 22.7884Z",fill:"#C52600",fillOpacity:"0.7"}),(0,f.jsx)("path",{d:"M35.3773 22.2774C34.3036 21.9722 33.1887 21.8363 32.0729 21.8744C31.198 21.9015 30.3299 22.0369 29.4885 22.2774C29.467 22.283 29.446 22.2904 29.4258 22.2996C29.0131 22.4979 28.6557 22.7941 28.3849 23.1623C28.1141 23.5305 27.9382 23.9594 27.8727 24.4111C27.6416 25.5632 27.5952 26.7444 27.7352 27.9109C27.8889 29.1561 28.176 29.6417 28.4935 29.9681C28.842 30.3338 29.302 30.5746 29.8019 30.6531C29.8585 30.6531 31.0153 30.8103 31.6604 30.0366C31.9495 29.686 31.9981 29.3112 32.0648 28.733C32.1259 28.2554 32.1259 27.772 32.0648 27.2944C32.0578 27.2416 32.0617 27.1878 32.0764 27.1366C32.091 27.0853 32.1161 27.0376 32.1501 26.9965C32.184 26.9553 32.2261 26.9215 32.2737 26.8972C32.3213 26.8729 32.3734 26.8586 32.4268 26.8552L35.4379 26.6758",fill:"url(#paint10_linear_984_3528)"}),(0,f.jsx)("g",{opacity:"0.2",filter:"url(#filter1_f_984_3528)",children:(0,f.jsx)("path",{d:"M101.768 46.8082L95.831 40.2742C94.1302 38.4023 93.4148 35.8364 93.9016 33.3546L96.9985 17.5652C97.4749 15.1363 99.0488 13.0648 101.261 11.9547L109.538 7.80171C112.745 6.19213 116.633 6.91581 119.046 9.57194L124.901 16.0152C126.602 17.8871 127.318 20.4532 126.831 22.9352L123.725 38.768C123.254 41.1721 121.707 43.2275 119.527 44.3459L111.341 48.5461C108.124 50.1968 104.2 49.4843 101.768 46.8082Z",fill:"#F6F95C"})}),(0,f.jsx)("g",{opacity:"0.2",filter:"url(#filter2_f_984_3528)",children:(0,f.jsx)("path",{d:"M14.3837 30.9817L15.8086 28.1482C16.9448 25.8886 19.0827 24.2995 21.5738 23.8626L30.3653 22.3207C32.8032 21.8932 35.3018 22.6182 37.1322 24.2843L39.7355 26.6538C42.3896 29.0697 43.1101 32.9574 41.4978 36.1639L40.1039 38.936C38.9677 41.1957 36.8298 42.785 34.3385 43.2219L25.5033 44.7713C23.0903 45.1945 20.6164 44.4887 18.7899 42.856L16.1993 40.5403C13.5035 38.1305 12.7592 34.2121 14.3837 30.9817Z",fill:"#F6F95C"})}),(0,f.jsx)("path",{d:"M99.2476 20.9148C99.3298 20.9453 99.4231 20.898 99.456 20.8092C99.4889 20.7204 99.4489 20.6237 99.3667 20.5932C99.2844 20.5628 99.1911 20.6101 99.1582 20.6989C99.1253 20.7877 99.1653 20.8843 99.2476 20.9148Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M100.376 17.4643C100.531 17.5215 100.706 17.4327 100.768 17.266C100.83 17.0992 100.754 16.9176 100.6 16.8604C100.446 16.8032 100.27 16.892 100.208 17.0588C100.147 17.2256 100.222 17.4071 100.376 17.4643Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M100.51 18.9212C100.624 18.9635 100.754 18.8978 100.8 18.7743C100.846 18.6509 100.79 18.5165 100.676 18.4741C100.561 18.4318 100.432 18.4975 100.386 18.621C100.34 18.7444 100.396 18.8788 100.51 18.9212Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M98.9667 16.3497C99.0259 16.3716 99.0931 16.3376 99.1167 16.2737C99.1404 16.2098 99.1116 16.1402 99.0524 16.1183C98.9933 16.0964 98.9261 16.1304 98.9025 16.1943C98.8788 16.2582 98.9076 16.3277 98.9667 16.3497Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M100.189 14.1489C100.238 14.1671 100.294 14.1389 100.313 14.0858C100.333 14.0328 100.309 13.975 100.26 13.9568C100.211 13.9386 100.155 13.9668 100.135 14.0199C100.116 14.073 100.14 14.1307 100.189 14.1489Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M105.046 17.0536C105.215 17.1161 105.406 17.0191 105.474 16.8368C105.541 16.6545 105.459 16.456 105.29 16.3935C105.121 16.331 104.93 16.428 104.862 16.6103C104.795 16.7926 104.877 16.9911 105.046 17.0536Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M104.002 17.8453C104.084 17.8756 104.177 17.8286 104.209 17.7406C104.242 17.6525 104.202 17.5566 104.121 17.5264C104.039 17.4962 103.946 17.5431 103.914 17.6312C103.881 17.7192 103.921 17.8151 104.002 17.8453Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M105.801 16.2622C105.857 16.283 105.921 16.2507 105.943 16.19C105.965 16.1294 105.938 16.0634 105.882 16.0425C105.826 16.0217 105.762 16.054 105.74 16.1147C105.717 16.1753 105.744 16.2414 105.801 16.2622Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M102.536 21.8885C102.761 21.9717 103.016 21.8425 103.106 21.5999C103.196 21.3573 103.086 21.0933 102.862 21.01C102.637 20.9268 102.382 21.056 102.292 21.2986C102.203 21.5411 102.312 21.8052 102.536 21.8885Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M100.244 31.5048C100.383 31.5564 100.541 31.4763 100.597 31.3257C100.653 31.1752 100.585 31.0113 100.446 30.9597C100.306 30.9081 100.148 30.9882 100.092 31.1388C100.036 31.2893 100.104 31.4532 100.244 31.5048Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M101.999 29.3584C102.06 29.381 102.129 29.3458 102.154 29.2798C102.178 29.2137 102.148 29.1418 102.087 29.1192C102.026 29.0965 101.957 29.1317 101.932 29.1977C101.908 29.2638 101.938 29.3357 101.999 29.3584Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M98.5536 27.7775C98.7091 27.8351 98.8855 27.7457 98.9476 27.5779C99.0098 27.41 98.9342 27.2273 98.7788 27.1697C98.6233 27.1121 98.4469 27.2015 98.3847 27.3693C98.3226 27.5372 98.3982 27.7199 98.5536 27.7775Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M98.4328 33.2542C98.606 33.3183 98.8025 33.2188 98.8718 33.0318C98.9411 32.8448 98.8568 32.6412 98.6837 32.5771C98.5105 32.5129 98.314 32.6125 98.2447 32.7995C98.1755 32.9865 98.2597 33.19 98.4328 33.2542Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M98.2792 26.3595C98.3411 26.3824 98.4113 26.3468 98.436 26.28C98.4607 26.2133 98.4307 26.1406 98.3688 26.1177C98.307 26.0947 98.2368 26.1303 98.212 26.1971C98.1873 26.2639 98.2174 26.3366 98.2792 26.3595Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M118.054 8.56803C118.275 8.65012 118.527 8.52267 118.615 8.28335C118.704 8.04403 118.596 7.78348 118.375 7.70138C118.153 7.61929 117.902 7.74674 117.813 7.98606C117.724 8.22537 117.832 8.48593 118.054 8.56803Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M121.021 18.7182C121.146 18.7646 121.288 18.6927 121.338 18.5577C121.388 18.4227 121.327 18.2757 121.202 18.2294C121.077 18.1831 120.935 18.2549 120.885 18.3899C120.835 18.5249 120.896 18.6719 121.021 18.7182Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M121.774 16.3239C121.839 16.3478 121.912 16.3107 121.938 16.241C121.964 16.1713 121.932 16.0955 121.868 16.0716C121.803 16.0477 121.73 16.0848 121.704 16.1545C121.678 16.2241 121.71 16.3 121.774 16.3239Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M121.081 13.0785C121.157 13.1065 121.242 13.063 121.273 12.9815C121.303 12.8999 121.266 12.8111 121.191 12.7831C121.115 12.7551 121.029 12.7986 120.999 12.8801C120.969 12.9617 121.006 13.0505 121.081 13.0785Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M119.661 16.9841C119.751 17.0173 119.853 16.9658 119.888 16.8691C119.924 16.7723 119.881 16.667 119.791 16.6338C119.702 16.6006 119.6 16.6522 119.564 16.7489C119.528 16.8456 119.572 16.9509 119.661 16.9841Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M117.784 19.9116C117.867 19.9424 117.961 19.8945 117.995 19.8047C118.028 19.7148 117.988 19.6169 117.904 19.5861C117.821 19.5553 117.727 19.6031 117.693 19.693C117.66 19.7829 117.701 19.8807 117.784 19.9116Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M107.541 6.86534C107.589 6.8828 107.642 6.85569 107.661 6.8048C107.68 6.7539 107.657 6.69849 107.61 6.68103C107.563 6.66357 107.509 6.69067 107.49 6.74157C107.471 6.79247 107.494 6.84788 107.541 6.86534Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M106.962 11.4451C107.098 11.4956 107.253 11.4172 107.307 11.2699C107.362 11.1227 107.295 10.9623 107.159 10.9118C107.023 10.8613 106.868 10.9397 106.813 11.087C106.759 11.2342 106.825 11.3946 106.962 11.4451Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M104.67 12.6635C104.795 12.7099 104.937 12.638 104.987 12.503C105.037 12.368 104.976 12.221 104.851 12.1747C104.726 12.1284 104.584 12.2003 104.534 12.3353C104.484 12.4703 104.545 12.6172 104.67 12.6635Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M104.531 10.6761C104.58 10.6941 104.635 10.6662 104.654 10.6139C104.673 10.5616 104.65 10.5046 104.601 10.4866C104.553 10.4687 104.498 10.4965 104.479 10.5489C104.459 10.6012 104.483 10.6582 104.531 10.6761Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M102.294 10.9833C102.392 11.0195 102.502 10.9633 102.541 10.8579C102.58 10.7525 102.533 10.6378 102.435 10.6016C102.338 10.5654 102.227 10.6216 102.188 10.727C102.149 10.8324 102.196 10.9471 102.294 10.9833Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M102.623 14.2219C102.803 14.2886 103.008 14.185 103.08 13.9905C103.152 13.7959 103.064 13.5841 102.884 13.5173C102.704 13.4506 102.499 13.5542 102.427 13.7488C102.355 13.9433 102.443 14.1551 102.623 14.2219Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M116.404 9.78275C116.488 9.8137 116.583 9.76565 116.616 9.67541C116.65 9.58517 116.609 9.48692 116.525 9.45596C116.442 9.425 116.347 9.47306 116.313 9.5633C116.28 9.65354 116.321 9.75179 116.404 9.78275Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M111.15 5.3275C111.287 5.37814 111.442 5.29952 111.497 5.15188C111.551 5.00425 111.485 4.84351 111.348 4.79287C111.211 4.74223 111.056 4.82085 111.002 4.96849C110.947 5.11612 111.013 5.27685 111.15 5.3275Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M118.84 5.88002C118.942 5.91754 119.057 5.85929 119.097 5.74992C119.138 5.64055 119.088 5.52147 118.987 5.48395C118.886 5.44643 118.771 5.50468 118.73 5.61405C118.69 5.72342 118.739 5.8425 118.84 5.88002Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M112.964 9.63366C113.135 9.69706 113.329 9.59864 113.398 9.41383C113.466 9.22901 113.383 9.0278 113.212 8.9644C113.041 8.901 112.847 8.99943 112.778 9.18424C112.71 9.36905 112.793 9.57026 112.964 9.63366Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M114.038 15.3369C114.18 15.3897 114.342 15.3078 114.399 15.154C114.456 15.0002 114.386 14.8328 114.244 14.7801C114.102 14.7273 113.94 14.8092 113.883 14.963C113.826 15.1168 113.895 15.2842 114.038 15.3369Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M115.304 16.2809C115.356 16.3002 115.415 16.2702 115.436 16.2139C115.457 16.1576 115.431 16.0963 115.379 16.077C115.327 16.0576 115.268 16.0876 115.247 16.144C115.226 16.2003 115.252 16.2616 115.304 16.2809Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M109.895 14.165C109.976 14.1948 110.067 14.1485 110.099 14.0615C110.132 13.9745 110.092 13.8798 110.012 13.8499C109.931 13.8201 109.84 13.8664 109.808 13.9534C109.775 14.0404 109.815 14.1351 109.895 14.165Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M110.122 11.6845C110.212 11.7181 110.315 11.666 110.351 11.5682C110.388 11.4704 110.343 11.3638 110.253 11.3303C110.162 11.2967 110.059 11.3488 110.023 11.4467C109.987 11.5445 110.031 11.651 110.122 11.6845Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M116.214 11.1008C116.274 11.1231 116.342 11.0885 116.366 11.0235C116.391 10.9586 116.361 10.8878 116.301 10.8655C116.241 10.8433 116.173 10.8779 116.149 10.9428C116.124 11.0078 116.154 11.0785 116.214 11.1008Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M116.199 8.63517C116.273 8.66229 116.356 8.62019 116.385 8.54114C116.414 8.46209 116.379 8.37602 116.305 8.3489C116.232 8.32179 116.149 8.36389 116.12 8.44294C116.091 8.52199 116.126 8.60805 116.199 8.63517Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M96.8635 18.4794C96.9293 18.5038 97.004 18.4659 97.0304 18.3948C97.0567 18.3237 97.0247 18.2463 96.9588 18.2219C96.893 18.1975 96.8182 18.2354 96.7919 18.3065C96.7656 18.3776 96.7976 18.455 96.8635 18.4794Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M110.214 7.95699C110.319 7.996 110.438 7.93544 110.481 7.82174C110.523 7.70804 110.472 7.58424 110.366 7.54523C110.261 7.50623 110.141 7.56678 110.099 7.68049C110.057 7.79419 110.108 7.91798 110.214 7.95699Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M97.4011 19.3143C97.5451 19.3677 97.7087 19.2848 97.7663 19.1293C97.8239 18.9737 97.7538 18.8043 97.6098 18.7509C97.4657 18.6976 97.3022 18.7804 97.2445 18.936C97.1869 19.0916 97.257 19.2609 97.4011 19.3143Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M27.7765 31.3968C27.7461 31.4488 27.6759 31.4643 27.6197 31.4315C27.5635 31.3986 27.5427 31.3298 27.5731 31.2778C27.6035 31.2258 27.6737 31.2102 27.7299 31.2431C27.7861 31.2759 27.8069 31.3447 27.7765 31.3968Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M25.67 30.0624C25.6128 30.1602 25.481 30.1893 25.3755 30.1276C25.27 30.0659 25.2308 29.9367 25.2879 29.839C25.345 29.7413 25.4769 29.7121 25.5824 29.7738C25.6879 29.8355 25.7271 29.9647 25.67 30.0624Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M26.2355 30.8891C26.1932 30.9614 26.0956 30.9831 26.0175 30.9374C25.9394 30.8917 25.9104 30.7961 25.9527 30.7237C25.995 30.6514 26.0926 30.6298 26.1707 30.6755C26.2488 30.7211 26.2778 30.8168 26.2355 30.8891Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M25.9349 28.8526C25.913 28.89 25.8625 28.9012 25.822 28.8776C25.7816 28.8539 25.7666 28.8044 25.7885 28.767C25.8104 28.7296 25.8609 28.7184 25.9013 28.742C25.9417 28.7657 25.9568 28.8152 25.9349 28.8526Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M24.3262 28.2123C24.308 28.2434 24.2661 28.2527 24.2325 28.2331C24.1989 28.2134 24.1865 28.1723 24.2046 28.1412C24.2228 28.1102 24.2648 28.1009 24.2983 28.1205C24.3319 28.1401 24.3444 28.1813 24.3262 28.2123Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M23.0086 31.878C22.9462 31.9848 22.8021 32.0167 22.6867 31.9493C22.5714 31.8819 22.5286 31.7406 22.591 31.6338C22.6535 31.527 22.7976 31.4951 22.9129 31.5625C23.0282 31.63 23.0711 31.7712 23.0086 31.878Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M23.9111 31.8394C23.8809 31.891 23.8112 31.9064 23.7555 31.8738C23.6998 31.8412 23.6791 31.773 23.7093 31.7214C23.7395 31.6698 23.8091 31.6543 23.8648 31.6869C23.9205 31.7195 23.9412 31.7878 23.9111 31.8394Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M22.2637 31.7872C22.2429 31.8227 22.1949 31.8333 22.1566 31.8109C22.1182 31.7885 22.104 31.7415 22.1247 31.7059C22.1455 31.6704 22.1935 31.6598 22.2318 31.6822C22.2702 31.7047 22.2844 31.7516 22.2637 31.7872Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M26.4502 33.3518C26.3671 33.494 26.1753 33.5364 26.0218 33.4467C25.8684 33.3569 25.8113 33.169 25.8944 33.0269C25.9775 32.8847 26.1693 32.8423 26.3228 32.932C26.4762 33.0218 26.5333 33.2097 26.4502 33.3518Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M31.8599 37.4629C31.8083 37.5511 31.6893 37.5775 31.5941 37.5218C31.4988 37.4661 31.4634 37.3494 31.515 37.2612C31.5666 37.1731 31.6856 37.1467 31.7808 37.2024C31.8761 37.2581 31.9114 37.3747 31.8599 37.4629Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M29.9922 37.0853C29.9696 37.124 29.9173 37.1356 29.8756 37.1112C29.8338 37.0867 29.8182 37.0355 29.8409 36.9968C29.8635 36.9581 29.9157 36.9466 29.9575 36.971C29.9993 36.9954 30.0148 37.0466 29.9922 37.0853Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M31.1339 34.7447C31.0764 34.8431 30.9437 34.8725 30.8375 34.8104C30.7313 34.7483 30.6919 34.6182 30.7494 34.5199C30.8069 34.4215 30.9396 34.3921 31.0458 34.4542C31.152 34.5163 31.1914 34.6464 31.1339 34.7447Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M33.5848 37.6051C33.5208 37.7147 33.3729 37.7474 33.2547 37.6782C33.1364 37.6091 33.0924 37.4642 33.1565 37.3546C33.2205 37.2451 33.3684 37.2123 33.4866 37.2815C33.6049 37.3507 33.6489 37.4956 33.5848 37.6051Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M30.6631 33.8693C30.6402 33.9084 30.5874 33.9201 30.5452 33.8954C30.5029 33.8707 30.4872 33.819 30.5101 33.7798C30.533 33.7407 30.5858 33.729 30.628 33.7537C30.6703 33.7784 30.686 33.8302 30.6631 33.8693Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M12.3986 33.0374C12.3166 33.1776 12.1274 33.2195 11.976 33.131C11.8246 33.0424 11.7683 32.857 11.8503 32.7168C11.9323 32.5766 12.1215 32.5347 12.2729 32.6232C12.4243 32.7117 12.4806 32.8972 12.3986 33.0374Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M15.2451 39.7269C15.1988 39.806 15.0921 39.8297 15.0067 39.7797C14.9213 39.7298 14.8895 39.6252 14.9358 39.5461C14.982 39.467 15.0888 39.4433 15.1742 39.4933C15.2596 39.5432 15.2913 39.6478 15.2451 39.7269Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M13.8029 38.7766C13.779 38.8174 13.724 38.8296 13.6799 38.8039C13.6358 38.7781 13.6194 38.7241 13.6433 38.6833C13.6672 38.6425 13.7223 38.6303 13.7663 38.656C13.8104 38.6818 13.8268 38.7358 13.8029 38.7766Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M12.7584 36.752C12.7304 36.7998 12.6659 36.8141 12.6143 36.7839C12.5627 36.7537 12.5435 36.6905 12.5715 36.6427C12.5994 36.5949 12.6639 36.5806 12.7155 36.6108C12.7671 36.641 12.7863 36.7042 12.7584 36.752Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M15.2122 38.2088C15.179 38.2655 15.1025 38.2824 15.0413 38.2466C14.9801 38.2108 14.9574 38.1359 14.9905 38.0792C15.0237 38.0225 15.1002 38.0056 15.1614 38.0414C15.2226 38.0772 15.2453 38.1521 15.2122 38.2088Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M17.4881 38.9443C17.4573 38.9969 17.3862 39.0127 17.3293 38.9794C17.2725 38.9462 17.2513 38.8765 17.2821 38.8239C17.3129 38.7712 17.384 38.7555 17.4408 38.7887C17.4977 38.822 17.5188 38.8916 17.4881 38.9443Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M17.2425 27.5514C17.2251 27.5812 17.1848 27.5901 17.1526 27.5713C17.1204 27.5524 17.1085 27.513 17.1259 27.4832C17.1433 27.4534 17.1836 27.4445 17.2158 27.4633C17.248 27.4821 17.2599 27.5216 17.2425 27.5514Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M19.548 29.7315C19.4976 29.8178 19.3811 29.8435 19.288 29.7891C19.1948 29.7346 19.1602 29.6205 19.2106 29.5342C19.2611 29.4479 19.3775 29.4221 19.4707 29.4766C19.5639 29.5311 19.5985 29.6452 19.548 29.7315Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M21.2966 29.3807C21.2503 29.4598 21.1436 29.4834 21.0582 29.4335C20.9728 29.3836 20.941 29.279 20.9873 29.1999C21.0335 29.1208 21.1403 29.0971 21.2257 29.1471C21.3111 29.197 21.3428 29.3016 21.2966 29.3807Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M20.5037 28.2653C20.4858 28.296 20.4444 28.3051 20.4113 28.2858C20.3782 28.2664 20.3659 28.2258 20.3838 28.1952C20.4017 28.1645 20.4431 28.1553 20.4762 28.1747C20.5093 28.1941 20.5216 28.2346 20.5037 28.2653Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M21.8277 27.4483C21.7916 27.5101 21.7083 27.5286 21.6416 27.4896C21.5749 27.4506 21.5501 27.3689 21.5862 27.3071C21.6223 27.2454 21.7057 27.2269 21.7723 27.2659C21.839 27.3049 21.8638 27.3866 21.8277 27.4483Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M23.0633 29.3176C22.9967 29.4316 22.8428 29.4657 22.7198 29.3937C22.5967 29.3217 22.5509 29.171 22.6176 29.057C22.6842 28.943 22.8381 28.9089 22.9612 28.9809C23.0842 29.0529 23.13 29.2037 23.0633 29.3176Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M13.806 32.9637C13.7751 33.0166 13.7038 33.0324 13.6467 32.999C13.5896 32.9656 13.5684 32.8957 13.5993 32.8428C13.6302 32.7899 13.7016 32.7741 13.7586 32.8075C13.8157 32.8409 13.837 32.9108 13.806 32.9637Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M14.6561 28.3066C14.6055 28.3931 14.4888 28.4189 14.3954 28.3643C14.302 28.3097 14.2673 28.1953 14.3178 28.1088C14.3684 28.0223 14.4851 27.9964 14.5785 28.051C14.6719 28.1057 14.7067 28.2201 14.6561 28.3066Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M10.8126 31.9462C10.7751 32.0102 10.6887 32.0294 10.6195 31.9889C10.5503 31.9485 10.5246 31.8637 10.562 31.7996C10.5995 31.7355 10.686 31.7164 10.7552 31.7569C10.8244 31.7973 10.8501 31.8821 10.8126 31.9462Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M15.5697 31.3802C15.5064 31.4885 15.3603 31.5208 15.2434 31.4524C15.1265 31.3841 15.083 31.2409 15.1463 31.1326C15.2097 31.0243 15.3558 30.992 15.4727 31.0603C15.5896 31.1287 15.6331 31.2719 15.5697 31.3802Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M17.4825 34.8848C17.4298 34.9749 17.3082 35.0018 17.2109 34.9449C17.1137 34.888 17.0775 34.7688 17.1302 34.6788C17.1829 34.5887 17.3044 34.5617 17.4017 34.6186C17.499 34.6755 17.5352 34.7947 17.4825 34.8848Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M17.2232 35.935C17.2039 35.968 17.1594 35.9778 17.1238 35.957C17.0882 35.9362 17.0749 35.8925 17.0942 35.8595C17.1135 35.8265 17.158 35.8167 17.1937 35.8375C17.2293 35.8584 17.2425 35.902 17.2232 35.935Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M19.1763 32.4515C19.1465 32.5025 19.0778 32.5177 19.0227 32.4855C18.9677 32.4533 18.9472 32.3859 18.977 32.335C19.0068 32.284 19.0756 32.2688 19.1307 32.3009C19.1857 32.3331 19.2061 32.4005 19.1763 32.4515Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M17.973 31.2348C17.9395 31.2921 17.8621 31.3093 17.8003 31.2731C17.7384 31.2369 17.7154 31.1611 17.7489 31.1038C17.7824 31.0465 17.8597 31.0293 17.9216 31.0655C17.9835 31.1017 18.0065 31.1775 17.973 31.2348Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M14.4826 33.5769C14.4603 33.6149 14.4089 33.6263 14.3678 33.6023C14.3267 33.5782 14.3115 33.5279 14.3337 33.4898C14.356 33.4518 14.4073 33.4404 14.4485 33.4644C14.4896 33.4885 14.5048 33.5388 14.4826 33.5769Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M13.4143 32.263C13.3872 32.3093 13.3247 32.3232 13.2747 32.2939C13.2247 32.2647 13.2061 32.2034 13.2332 32.1571C13.2603 32.1108 13.3228 32.097 13.3728 32.1262C13.4228 32.1554 13.4414 32.2167 13.4143 32.263Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M27.9801 29.0672C27.9558 29.1089 27.8995 29.1213 27.8546 29.095C27.8096 29.0687 27.7929 29.0136 27.8172 28.9719C27.8416 28.9303 27.8978 28.9178 27.9428 28.9441C27.9878 28.9704 28.0045 29.0255 27.9801 29.0672Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M16.2996 29.2935C16.2606 29.3601 16.1707 29.38 16.0988 29.3379C16.0269 29.2959 16.0001 29.2078 16.0391 29.1411C16.078 29.0745 16.1679 29.0546 16.2399 29.0967C16.3118 29.1387 16.3385 29.2268 16.2996 29.2935Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M28.0597 29.7416C28.0064 29.8328 27.8834 29.86 27.785 29.8025C27.6866 29.7449 27.65 29.6244 27.7033 29.5332C27.7566 29.4421 27.8796 29.4148 27.978 29.4724C28.0764 29.5299 28.113 29.6505 28.0597 29.7416Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M20.1483 24.3557C20.1179 24.4078 20.0477 24.4233 19.9915 24.3905C19.9354 24.3576 19.9145 24.2888 19.9449 24.2368C19.9753 24.1848 20.0455 24.1692 20.1017 24.2021C20.1579 24.2349 20.1788 24.3037 20.1483 24.3557Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M18.042 23.0214C17.9849 23.1191 17.8531 23.1483 17.7475 23.0866C17.642 23.0249 17.6028 22.8957 17.66 22.798C17.7171 22.7003 17.849 22.6711 17.9545 22.7328C18.06 22.7945 18.0992 22.9237 18.042 23.0214Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M18.6074 23.8481C18.5651 23.9204 18.4675 23.942 18.3894 23.8964C18.3113 23.8507 18.2822 23.755 18.3245 23.6827C18.3668 23.6104 18.4644 23.5888 18.5425 23.6345C18.6206 23.6801 18.6497 23.7758 18.6074 23.8481Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M18.3069 21.8116C18.285 21.849 18.2345 21.8602 18.1941 21.8366C18.1537 21.8129 18.1387 21.7634 18.1606 21.726C18.1824 21.6885 18.233 21.6774 18.2734 21.701C18.3138 21.7246 18.3288 21.7741 18.3069 21.8116Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M16.698 21.1713C16.6798 21.2024 16.6379 21.2117 16.6043 21.1921C16.5708 21.1724 16.5583 21.1313 16.5765 21.1002C16.5946 21.0691 16.6366 21.0599 16.6702 21.0795C16.7037 21.0991 16.7162 21.1402 16.698 21.1713Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M15.3807 24.837C15.3183 24.9438 15.1741 24.9757 15.0588 24.9083C14.9435 24.8408 14.9006 24.6996 14.9631 24.5928C15.0255 24.486 15.1697 24.4541 15.285 24.5215C15.4003 24.589 15.4432 24.7302 15.3807 24.837Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M16.2829 24.7993C16.2527 24.8509 16.1831 24.8664 16.1274 24.8338C16.0716 24.8012 16.0509 24.7329 16.0811 24.6813C16.1113 24.6297 16.1809 24.6143 16.2366 24.6469C16.2924 24.6795 16.3131 24.7477 16.2829 24.7993Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M14.6357 24.7471C14.615 24.7827 14.567 24.7933 14.5286 24.7709C14.4903 24.7484 14.476 24.7014 14.4968 24.6659C14.5176 24.6304 14.5655 24.6198 14.6039 24.6422C14.6423 24.6646 14.6565 24.7116 14.6357 24.7471Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M18.8225 26.3108C18.7394 26.4529 18.5476 26.4954 18.3941 26.4057C18.2407 26.3159 18.1836 26.128 18.2668 25.9858C18.3499 25.8437 18.5416 25.8013 18.6951 25.891C18.8486 25.9807 18.9056 26.1687 18.8225 26.3108Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M24.2319 30.4219C24.1804 30.5101 24.0614 30.5364 23.9661 30.4807C23.8709 30.4251 23.8355 30.3084 23.8871 30.2202C23.9387 30.132 24.0577 30.1057 24.1529 30.1614C24.2481 30.2171 24.2835 30.3337 24.2319 30.4219Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M22.3645 30.0453C22.3419 30.084 22.2897 30.0956 22.2479 30.0711C22.2061 30.0467 22.1905 29.9955 22.2132 29.9568C22.2358 29.9181 22.288 29.9065 22.3298 29.931C22.3716 29.9554 22.3871 30.0066 22.3645 30.0453Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M23.506 27.7037C23.4485 27.8021 23.3158 27.8314 23.2096 27.7693C23.1034 27.7072 23.064 27.5772 23.1215 27.4788C23.179 27.3805 23.3117 27.3511 23.4179 27.4132C23.5241 27.4753 23.5635 27.6054 23.506 27.7037Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M25.9569 30.5641C25.8928 30.6737 25.745 30.7064 25.6267 30.6372C25.5084 30.568 25.4645 30.4231 25.5285 30.3136C25.5926 30.204 25.7404 30.1713 25.8587 30.2405C25.977 30.3097 26.021 30.4545 25.9569 30.5641Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M23.0344 26.8293C23.0115 26.8684 22.9587 26.8801 22.9165 26.8554C22.8742 26.8307 22.8585 26.7789 22.8814 26.7398C22.9043 26.7007 22.9571 26.689 22.9993 26.7137C23.0416 26.7384 23.0573 26.7901 23.0344 26.8293Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M4.77091 25.9964C4.68892 26.1366 4.49971 26.1785 4.34831 26.09C4.1969 26.0014 4.14063 25.816 4.22263 25.6758C4.30462 25.5355 4.49383 25.4936 4.64524 25.5822C4.79664 25.6707 4.85291 25.8562 4.77091 25.9964Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M7.61738 32.6854C7.57113 32.7645 7.46439 32.7881 7.37899 32.7382C7.29358 32.6883 7.26184 32.5836 7.30809 32.5045C7.35435 32.4254 7.46108 32.4018 7.54649 32.4518C7.6319 32.5017 7.66364 32.6063 7.61738 32.6854Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M6.17498 31.7356C6.15111 31.7764 6.09603 31.7886 6.05196 31.7628C6.00789 31.7371 5.99151 31.6831 6.01538 31.6423C6.03925 31.6014 6.09432 31.5893 6.1384 31.615C6.18247 31.6408 6.19885 31.6948 6.17498 31.7356Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M5.13043 29.7105C5.10248 29.7583 5.03799 29.7726 4.98638 29.7424C4.93477 29.7122 4.91558 29.649 4.94353 29.6012C4.97148 29.5534 5.03598 29.5391 5.08759 29.5693C5.1392 29.5995 5.15838 29.6627 5.13043 29.7105Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M7.5835 31.1687C7.55035 31.2254 7.47387 31.2424 7.41267 31.2066C7.35147 31.1708 7.32872 31.0958 7.36187 31.0391C7.39501 30.9825 7.47149 30.9655 7.53269 31.0013C7.59389 31.0371 7.61664 31.1121 7.5835 31.1687Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M9.85988 31.9033C9.82909 31.9559 9.75803 31.9716 9.70117 31.9384C9.64431 31.9051 9.62317 31.8355 9.65396 31.7828C9.68475 31.7302 9.75581 31.7145 9.81268 31.7477C9.86954 31.781 9.89067 31.8506 9.85988 31.9033Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M9.61433 20.5109C9.59689 20.5407 9.55665 20.5496 9.52445 20.5308C9.49225 20.5119 9.48028 20.4725 9.49772 20.4427C9.51516 20.4128 9.5554 20.4039 9.5876 20.4228C9.6198 20.4416 9.63176 20.481 9.61433 20.5109Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M11.9201 22.6905C11.8696 22.7768 11.7532 22.8025 11.66 22.748C11.5669 22.6936 11.5322 22.5794 11.5827 22.4932C11.6332 22.4069 11.7496 22.3811 11.8428 22.4356C11.9359 22.4901 11.9706 22.6042 11.9201 22.6905Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M13.6687 22.3397C13.6224 22.4188 13.5157 22.4424 13.4303 22.3925C13.3449 22.3425 13.3131 22.2379 13.3594 22.1588C13.4056 22.0797 13.5124 22.0561 13.5978 22.1061C13.6832 22.156 13.7149 22.2606 13.6687 22.3397Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M12.8755 21.2243C12.8576 21.2549 12.8162 21.2641 12.7831 21.2447C12.75 21.2254 12.7377 21.1848 12.7556 21.1542C12.7735 21.1235 12.8149 21.1143 12.848 21.1337C12.8812 21.1531 12.8935 21.1936 12.8755 21.2243Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M14.1995 20.4083C14.1634 20.4701 14.0801 20.4885 14.0134 20.4495C13.9467 20.4105 13.9219 20.3288 13.958 20.2671C13.9942 20.2053 14.0775 20.1869 14.1442 20.2259C14.2109 20.2649 14.2356 20.3465 14.1995 20.4083Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M15.4351 22.2766C15.3685 22.3906 15.2147 22.4247 15.0916 22.3527C14.9685 22.2807 14.9228 22.13 14.9894 22.016C15.0561 21.902 15.2099 21.8679 15.333 21.9399C15.4561 22.0119 15.5018 22.1626 15.4351 22.2766Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M6.17712 25.9227C6.1462 25.9756 6.07486 25.9914 6.01777 25.958C5.96067 25.9246 5.93946 25.8547 5.97038 25.8018C6.0013 25.7489 6.07265 25.7331 6.12974 25.7665C6.18683 25.7999 6.20804 25.8698 6.17712 25.9227Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M7.0279 21.2655C6.97732 21.352 6.86059 21.3779 6.76719 21.3233C6.67379 21.2686 6.63908 21.1542 6.68966 21.0677C6.74025 20.9813 6.85697 20.9554 6.95037 21.01C7.04377 21.0646 7.07848 21.179 7.0279 21.2655Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M3.18467 24.9051C3.1472 24.9692 3.06073 24.9884 2.99153 24.9479C2.92234 24.9074 2.89663 24.8227 2.9341 24.7586C2.97157 24.6945 3.05805 24.6754 3.12724 24.7158C3.19643 24.7563 3.22215 24.8411 3.18467 24.9051Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M7.94181 24.3387C7.87849 24.447 7.73238 24.4793 7.61546 24.4109C7.49854 24.3426 7.45508 24.1994 7.5184 24.0911C7.58173 23.9828 7.72784 23.9504 7.84476 24.0188C7.96168 24.0872 8.00513 24.2304 7.94181 24.3387Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M9.85455 27.8447C9.80187 27.9348 9.68029 27.9617 9.58301 27.9048C9.48573 27.848 9.44958 27.7288 9.50226 27.6387C9.55495 27.5486 9.67652 27.5217 9.7738 27.5786C9.87108 27.6355 9.90723 27.7546 9.85455 27.8447Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M9.59505 28.894C9.57576 28.927 9.53124 28.9368 9.49562 28.916C9.45999 28.8951 9.44675 28.8515 9.46605 28.8185C9.48534 28.7855 9.52986 28.7757 9.56548 28.7965C9.60111 28.8173 9.61435 28.861 9.59505 28.894Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M11.5484 25.41C11.5186 25.461 11.4498 25.4762 11.3948 25.444C11.3398 25.4118 11.3193 25.3444 11.3491 25.2935C11.3789 25.2425 11.4477 25.2273 11.5027 25.2594C11.5578 25.2916 11.5782 25.359 11.5484 25.41Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M10.3448 24.1938C10.3113 24.2511 10.234 24.2683 10.1721 24.2321C10.1102 24.1959 10.0872 24.1201 10.1207 24.0628C10.1542 24.0054 10.2316 23.9883 10.2935 24.0245C10.3553 24.0607 10.3783 24.1365 10.3448 24.1938Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M6.85464 26.5359C6.83238 26.5739 6.78102 26.5853 6.73991 26.5613C6.69881 26.5372 6.68353 26.4869 6.70579 26.4488C6.72805 26.4107 6.77942 26.3994 6.82052 26.4234C6.86163 26.4474 6.8769 26.4978 6.85464 26.5359Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M5.78637 25.222C5.75928 25.2683 5.69678 25.2821 5.64677 25.2529C5.59676 25.2237 5.57817 25.1624 5.60526 25.1161C5.63234 25.0698 5.69484 25.0559 5.74485 25.0852C5.79486 25.1144 5.81345 25.1757 5.78637 25.222Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M20.352 22.0262C20.3276 22.0678 20.2714 22.0803 20.2264 22.054C20.1814 22.0277 20.1647 21.9726 20.189 21.9309C20.2134 21.8892 20.2696 21.8768 20.3146 21.9031C20.3596 21.9294 20.3763 21.9845 20.352 22.0262Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M8.67165 22.252C8.63269 22.3186 8.5428 22.3385 8.47086 22.2964C8.39893 22.2544 8.37219 22.1662 8.41115 22.0996C8.45011 22.033 8.54 22.0131 8.61194 22.0552C8.68387 22.0972 8.71061 22.1853 8.67165 22.252Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("path",{d:"M20.432 22.7006C20.3787 22.7918 20.2557 22.819 20.1573 22.7615C20.0589 22.7039 20.0223 22.5833 20.0756 22.4922C20.1289 22.401 20.2519 22.3738 20.3503 22.4314C20.4488 22.4889 20.4853 22.6095 20.432 22.7006Z",fill:"#FEFAD1",fillOpacity:"0.6"}),(0,f.jsx)("g",{filter:"url(#filter3_f_984_3528)",children:(0,f.jsx)("ellipse",{cx:"27.0676",cy:"1.07755",rx:"27.0676",ry:"1.07755",transform:"matrix(0.999991 -0.00412603 -0.0157148 0.999877 62.8184 55.2852)",fill:"black",fillOpacity:"0.3"})}),(0,f.jsxs)("defs",{children:[(0,f.jsxs)("filter",{id:"filter0_f_984_3528",x:"10.7648",y:"34.7484",width:"54.2751",height:"19.3957",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"4.30889",result:"effect1_foregroundBlur_984_3528"})]}),(0,f.jsxs)("filter",{id:"filter1_f_984_3528",x:"77.752",y:"-9.04834",width:"65.2285",height:"74.4771",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"8",result:"effect1_foregroundBlur_984_3528"})]}),(0,f.jsxs)("filter",{id:"filter2_f_984_3528",x:"3.53052",y:"12.2002",width:"48.8203",height:"42.6914",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"5",result:"effect1_foregroundBlur_984_3528"})]}),(0,f.jsxs)("filter",{id:"filter3_f_984_3528",x:"54.1837",y:"46.5497",width:"71.3703",height:"19.402",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"4.30889",result:"effect1_foregroundBlur_984_3528"})]}),(0,f.jsxs)("linearGradient",{id:"paint0_linear_984_3528",x1:"92.353",y1:"36.874",x2:"101.227",y2:"34.7389",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#01AD6C"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#1FF073"})]}),(0,f.jsxs)("linearGradient",{id:"paint1_linear_984_3528",x1:"92.353",y1:"36.874",x2:"101.227",y2:"34.7389",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#01AD6C"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#1FF073"})]}),(0,f.jsxs)("linearGradient",{id:"paint2_linear_984_3528",x1:"75.9646",y1:"47.1873",x2:"67.0168",y2:"46.61",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#01AD6C"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#1FF073"})]}),(0,f.jsxs)("linearGradient",{id:"paint3_linear_984_3528",x1:"85.4899",y1:"22.0784",x2:"79.1399",y2:"46.3238",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#1FF073"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#04795D"})]}),(0,f.jsxs)("linearGradient",{id:"paint4_linear_984_3528",x1:"73.0373",y1:"35.4811",x2:"75.0918",y2:"39.2643",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#20AD78"}),(0,f.jsx)("stop",{offset:"0.929244",stopColor:"#1FF073"})]}),(0,f.jsxs)("linearGradient",{id:"paint5_linear_984_3528",x1:"88.087",y1:"45.1729",x2:"88.087",y2:"56.7183",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#06805E"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#1FF073"})]}),(0,f.jsxs)("linearGradient",{id:"paint6_linear_984_3528",x1:"50.9837",y1:"29.3127",x2:"55.5727",y2:"25.6798",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#EA5547"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#FF7171"})]}),(0,f.jsxs)("linearGradient",{id:"paint7_linear_984_3528",x1:"34.7316",y1:"39.0656",x2:"37.2173",y2:"35.6239",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#FF7171"}),(0,f.jsx)("stop",{offset:"0.746441",stopColor:"#EA5547"})]}),(0,f.jsxs)("linearGradient",{id:"paint8_linear_984_3528",x1:"41.3515",y1:"2.73535",x2:"41.3515",y2:"37.9116",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#FF7171"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#E85345"})]}),(0,f.jsxs)("linearGradient",{id:"paint9_linear_984_3528",x1:"49.6453",y1:"41.3586",x2:"42.5705",y2:"36.0048",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#FF7171"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#EB574A"})]}),(0,f.jsxs)("linearGradient",{id:"paint10_linear_984_3528",x1:"27.4652",y1:"23.0017",x2:"37.4081",y2:"27.7818",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{offset:"0.0666008",stopColor:"#FF7171"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#EA5548"})]})]})]}))})),ko=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"88",height:"64",viewBox:"0 0 88 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M36.5605 53.6982C36.7835 55.2272 37.0957 58.9922 36.5605 61.8207H39.1884",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M40.5254 53.1299C41.1784 54.5951 42.5321 58.0511 42.7232 60.1534H45.8767",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M42.3889 48.0681C43.9656 47.5266 47.2242 45.4402 47.6446 41.4268",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M36.4167 40.9876C40.9557 40.032 42.8669 46.4822 42.8669 48.3933C43.488 48.3933 44.6825 49.2056 44.8736 50.1134C45.0647 51.0212 44.5392 52.2861 43.3447 52.7891C42.7929 53.0214 40.6213 53.7446 38.8534 54.1269C37.0856 54.5091 34.84 54.4613 33.5977 54.4613C32.3554 54.4613 31.0654 53.6491 31.0176 52.2157C30.9794 51.069 32.021 50.2727 32.5466 50.0178C31.6865 46.2911 31.8777 41.9432 36.4167 40.9876Z",fill:"url(#paint0_linear_984_3740)"}),(0,f.jsx)("ellipse",{cx:"40.9367",cy:"47.6442",rx:"0.62113",ry:"0.66891",transform:"rotate(-17.4862 40.9367 47.6442)",fill:"#3B314F"}),(0,f.jsx)("ellipse",{cx:"37.592",cy:"48.5109",rx:"0.62113",ry:"0.66891",transform:"rotate(-17.4862 37.592 48.5109)",fill:"#3B314F"}),(0,f.jsx)("path",{d:"M33.2148 49.5933C33.8041 51.8867 34.6291 57.0086 33.2148 59.1491",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_984_3740)",children:(0,f.jsx)("path",{d:"M51.813 57.4693L39.0826 47.9892C37.7661 47.0089 36.9904 45.4641 36.9904 43.8227L36.9903 20.5046C36.9902 18.8982 37.7333 17.3823 39.003 16.3983L51.8887 6.41212C53.7325 4.98324 56.3026 4.95849 58.1736 6.35161L70.764 15.7266C72.0806 16.7069 72.8564 18.2518 72.8564 19.8933V43.2402C72.8564 44.8301 72.1283 46.3324 70.8805 47.3176L58.1349 57.3802C56.2904 58.8364 53.6979 58.873 51.813 57.4693Z",fill:"#F9E05C"})}),(0,f.jsx)("path",{d:"M55.5088 58.4805L35.2649 32.5458L55.417 25.5369L55.5088 58.4805Z",fill:"#FFDAA4"}),(0,f.jsx)("path",{d:"M55.5088 5.00396L75.7527 32.5431L55.417 25.5338L55.5088 5.00396Z",fill:"#FFA827"}),(0,f.jsx)("path",{d:"M55.509 58.4762L55.4172 25.533L75.7529 32.5419L55.509 58.4762Z",fill:"#FFBC57"}),(0,f.jsx)("path",{d:"M55.5094 5.0057L55.4176 25.5352L35.2656 32.5445L55.5094 5.0057Z",fill:"#FFBC57"}),(0,f.jsx)("path",{d:"M44.3614 35.6885C44.4628 35.6658 44.5252 35.5585 44.5006 35.449C44.4761 35.3395 44.374 35.2691 44.2725 35.2919C44.1711 35.3146 44.1088 35.4218 44.1333 35.5313C44.1578 35.6409 44.26 35.7112 44.3614 35.6885Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M43.2599 31.5314C43.4504 31.4887 43.5674 31.2873 43.5213 31.0816C43.4753 30.8759 43.2835 30.7438 43.093 30.7865C42.9025 30.8292 42.7854 31.0305 42.8315 31.2362C42.8776 31.4419 43.0694 31.5741 43.2599 31.5314Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M44.332 32.8868C44.473 32.8552 44.5597 32.7061 44.5255 32.5539C44.4914 32.4016 44.3495 32.3038 44.2085 32.3354C44.0674 32.367 43.9808 32.516 44.0149 32.6683C44.049 32.8206 44.191 32.9184 44.332 32.8868Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M41.1395 31.3275C41.2124 31.3112 41.2573 31.2341 41.2396 31.1552C41.222 31.0764 41.1485 31.0258 41.0755 31.0422C41.0025 31.0585 40.9577 31.1357 40.9753 31.2145C40.993 31.2933 41.0665 31.3439 41.1395 31.3275Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M40.9363 28.3491C40.9969 28.3356 41.0341 28.2715 41.0195 28.206C41.0048 28.1406 40.9438 28.0985 40.8832 28.1121C40.8226 28.1257 40.7853 28.1898 40.8 28.2552C40.8147 28.3207 40.8757 28.3627 40.9363 28.3491Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M47.6376 28.1043C47.8458 28.0576 47.9738 27.8375 47.9234 27.6127C47.873 27.3878 47.6634 27.2434 47.4551 27.29C47.2469 27.3367 47.119 27.5568 47.1693 27.7816C47.2197 28.0065 47.4294 28.1509 47.6376 28.1043Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M47.1121 29.564C47.2127 29.5415 47.2746 29.4351 47.2502 29.3265C47.2259 29.2179 47.1246 29.1481 47.024 29.1706C46.9234 29.1932 46.8615 29.2995 46.8859 29.4081C46.9102 29.5168 47.0115 29.5866 47.1121 29.564Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M47.8795 26.8268C47.9488 26.8112 47.9913 26.738 47.9746 26.6632C47.9578 26.5884 47.8881 26.5404 47.8188 26.5559C47.7495 26.5714 47.7069 26.6446 47.7237 26.7194C47.7405 26.7942 47.8102 26.8423 47.8795 26.8268Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M48.2591 34.5287C48.5362 34.4666 48.7065 34.1737 48.6395 33.8745C48.5724 33.5753 48.2934 33.3831 48.0164 33.4452C47.7393 33.5073 47.569 33.8002 47.636 34.0994C47.7031 34.3986 47.9821 34.5908 48.2591 34.5287Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M52.1798 45.5748C52.3517 45.5362 52.4574 45.3545 52.4158 45.1688C52.3742 44.9832 52.201 44.8639 52.0291 44.9024C51.8572 44.9409 51.7515 45.1227 51.7931 45.3083C51.8347 45.494 52.0078 45.6133 52.1798 45.5748Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M52.5436 42.3108C52.619 42.2939 52.6654 42.2142 52.6471 42.1327C52.6289 42.0512 52.5529 41.9989 52.4774 42.0158C52.402 42.0327 52.3556 42.1124 52.3739 42.1939C52.3921 42.2754 52.4681 42.3277 52.5436 42.3108Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M48.0972 42.9552C48.2889 42.9122 48.4067 42.7095 48.3604 42.5025C48.314 42.2955 48.1209 42.1624 47.9292 42.2054C47.7375 42.2484 47.6196 42.451 47.666 42.6581C47.7124 42.8651 47.9055 42.9981 48.0972 42.9552Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M51.5065 48.4853C51.7201 48.4375 51.8514 48.2117 51.7997 47.9811C51.748 47.7505 51.5329 47.6023 51.3194 47.6502C51.1058 47.698 50.9745 47.9238 51.0262 48.1544C51.0779 48.385 51.2929 48.5332 51.5065 48.4853Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M46.9081 41.717C46.9844 41.6999 47.0312 41.6193 47.0128 41.5369C46.9943 41.4546 46.9175 41.4017 46.8412 41.4188C46.765 41.4359 46.7181 41.5165 46.7365 41.5988C46.755 41.6812 46.8318 41.7341 46.9081 41.717Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M55.1037 11.2745C55.377 11.2132 55.545 10.9243 55.4789 10.6291C55.4127 10.3339 55.1375 10.1442 54.8641 10.2055C54.5908 10.2667 54.4228 10.5557 54.4889 10.8509C54.5551 11.1461 54.8303 11.3357 55.1037 11.2745Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M64.6028 19.4692C64.757 19.4346 64.8518 19.2716 64.8145 19.1051C64.7772 18.9386 64.6219 18.8316 64.4677 18.8661C64.3135 18.9007 64.2187 19.0637 64.256 19.2302C64.2933 19.3967 64.4486 19.5037 64.6028 19.4692Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M63.8076 16.5938C63.8871 16.576 63.936 16.4919 63.9168 16.406C63.8975 16.32 63.8174 16.2648 63.7378 16.2827C63.6583 16.3005 63.6094 16.3846 63.6286 16.4705C63.6479 16.5565 63.728 16.6117 63.8076 16.5938Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M61.0238 13.8105C61.117 13.7896 61.1742 13.6911 61.1517 13.5905C61.1292 13.4898 61.0353 13.4252 60.9422 13.4461C60.849 13.467 60.7917 13.5655 60.8143 13.6661C60.8368 13.7667 60.9306 13.8313 61.0238 13.8105Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M62.1328 18.6099C62.2433 18.5852 62.3112 18.4684 62.2845 18.349C62.2578 18.2297 62.1465 18.1531 62.036 18.1778C61.9255 18.2026 61.8576 18.3194 61.8843 18.4387C61.9111 18.558 62.0223 18.6347 62.1328 18.6099Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M62.1508 22.7348C62.2535 22.7118 62.3166 22.6033 62.2918 22.4924C62.2669 22.3816 62.1635 22.3103 62.0609 22.3333C61.9582 22.3564 61.8951 22.4649 61.92 22.5757C61.9448 22.6866 62.0482 22.7578 62.1508 22.7348Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M43.5507 16.3532C43.6089 16.3401 43.6446 16.2787 43.6305 16.2159C43.6165 16.1531 43.5579 16.1128 43.4998 16.1258C43.4417 16.1389 43.4059 16.2003 43.42 16.2631C43.4341 16.3259 43.4926 16.3662 43.5507 16.3532Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M45.9296 21.2937C46.0978 21.256 46.2012 21.0782 46.1605 20.8965C46.1198 20.7148 45.9504 20.5981 45.7822 20.6358C45.6139 20.6735 45.5105 20.8514 45.5512 21.033C45.5919 21.2147 45.7613 21.3314 45.9296 21.2937Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M44.4358 23.9858C44.59 23.9512 44.6848 23.7882 44.6475 23.6217C44.6102 23.4552 44.4549 23.3482 44.3007 23.3827C44.1465 23.4173 44.0517 23.5803 44.089 23.7468C44.1264 23.9133 44.2816 24.0203 44.4358 23.9858Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M43.0161 22.0919C43.0759 22.0785 43.1126 22.0153 43.0982 21.9507C43.0837 21.8861 43.0235 21.8447 42.9637 21.8581C42.9039 21.8715 42.8672 21.9347 42.8817 21.9992C42.8961 22.0638 42.9563 22.1053 43.0161 22.0919Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M40.9876 23.8433C41.108 23.8164 41.182 23.6891 41.1528 23.5591C41.1237 23.4291 41.0025 23.3456 40.8821 23.3725C40.7617 23.3995 40.6877 23.5268 40.7168 23.6568C40.7459 23.7868 40.8672 23.8703 40.9876 23.8433Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M43.4018 26.8565C43.6241 26.8067 43.7606 26.5718 43.7069 26.3318C43.6531 26.0918 43.4293 25.9377 43.2071 25.9875C42.9849 26.0373 42.8483 26.2722 42.9021 26.5122C42.9558 26.7521 43.1796 26.9063 43.4018 26.8565Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M54.2487 13.5517C54.3518 13.5286 54.4151 13.4196 54.3902 13.3083C54.3652 13.197 54.2614 13.1255 54.1583 13.1486C54.0553 13.1717 53.9919 13.2807 54.0168 13.392C54.0418 13.5033 54.1456 13.5748 54.2487 13.5517Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M46.1494 12.5124C46.318 12.4746 46.4217 12.2964 46.3809 12.1143C46.3401 11.9322 46.1703 11.8152 46.0016 11.853C45.833 11.8908 45.7294 12.069 45.7702 12.2511C45.811 12.4332 45.9808 12.5502 46.1494 12.5124Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M54.1541 8.09849C54.279 8.07049 54.3558 7.93844 54.3255 7.80353C54.2953 7.66862 54.1695 7.58196 54.0446 7.60995C53.9196 7.63795 53.8429 7.77001 53.8731 7.90491C53.9033 8.03982 54.0291 8.12649 54.1541 8.09849Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M50.7303 15.6158C50.9414 15.5685 51.0712 15.3454 51.0201 15.1174C50.969 14.8895 50.7565 14.743 50.5453 14.7903C50.3342 14.8376 50.2045 15.0608 50.2556 15.2887C50.3067 15.5167 50.5192 15.6631 50.7303 15.6158Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M55.4759 20.6048C55.6515 20.5655 55.7594 20.3798 55.7169 20.1901C55.6744 20.0005 55.4976 19.8786 55.3219 19.918C55.1463 19.9574 55.0384 20.143 55.0809 20.3327C55.1234 20.5223 55.3002 20.6442 55.4759 20.6048Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M57.3427 20.721C57.4071 20.7066 57.4466 20.6386 57.431 20.5692C57.4155 20.4997 57.3507 20.4551 57.2864 20.4695C57.2221 20.4839 57.1825 20.5519 57.1981 20.6214C57.2137 20.6908 57.2784 20.7354 57.3427 20.721Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M50.5981 22.1031C50.6974 22.0809 50.7585 21.9758 50.7345 21.8685C50.7104 21.7612 50.6104 21.6923 50.511 21.7146C50.4116 21.7368 50.3505 21.8419 50.3746 21.9492C50.3986 22.0565 50.4987 22.1254 50.5981 22.1031Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M49.225 19.4858C49.3368 19.4608 49.4055 19.3427 49.3784 19.222C49.3514 19.1014 49.2389 19.0239 49.1271 19.0489C49.0154 19.0739 48.9467 19.1921 48.9738 19.3127C49.0008 19.4334 49.1133 19.5109 49.225 19.4858Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M54.9084 14.9891C54.9826 14.9725 55.0282 14.894 55.0103 14.8139C54.9923 14.7338 54.9176 14.6823 54.8434 14.6989C54.7691 14.7155 54.7235 14.794 54.7415 14.8741C54.7595 14.9543 54.8342 15.0057 54.9084 14.9891Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M53.3032 12.5411C53.3935 12.5208 53.449 12.4254 53.4271 12.3279C53.4053 12.2304 53.3143 12.1677 53.224 12.188C53.1337 12.2082 53.0783 12.3037 53.1001 12.4012C53.122 12.4987 53.2129 12.5613 53.3032 12.5411Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M40.4194 34.794C40.5007 34.7758 40.5506 34.6899 40.5309 34.6022C40.5113 34.5145 40.4295 34.4581 40.3483 34.4763C40.267 34.4945 40.2171 34.5804 40.2368 34.6681C40.2564 34.7558 40.3382 34.8122 40.4194 34.794Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M46.9134 15.7237C47.0433 15.6946 47.1231 15.5574 47.0917 15.4171C47.0603 15.2769 46.9295 15.1868 46.7996 15.2159C46.6697 15.245 46.5899 15.3822 46.6214 15.5225C46.6528 15.6627 46.7836 15.7528 46.9134 15.7237Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M41.4951 35.2932C41.6728 35.2534 41.782 35.0656 41.739 34.8737C41.696 34.6818 41.5171 34.5585 41.3394 34.5983C41.1616 34.6381 41.0524 34.826 41.0954 35.0179C41.1384 35.2098 41.3174 35.333 41.4951 35.2932Z",fill:"#FEFAD1"}),(0,f.jsx)("path",{d:"M40.0562 15.6717C39.0994 16.1972 34.683 20.1329 30.0166 15.1157",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M40.1444 6.25539C36.461 8.6505 38.2173 13.7245 39.5559 15.9621C37.836 17.5222 39.2525 21.7045 42.1451 20.8461C45.0376 19.9876 49.874 17.4031 51.2657 15.923C52.6574 14.443 52.6086 12.9595 51.8221 11.7881C51.193 10.851 49.6663 10.6864 48.9816 10.7213C48.5895 9.65542 44.7488 3.2615 40.1444 6.25539Z",fill:"url(#paint1_linear_984_3740)"}),(0,f.jsx)("ellipse",{cx:"41.885",cy:"16.7125",rx:"0.62113",ry:"0.66891",transform:"rotate(-32.9344 41.885 16.7125)",fill:"#3B314F"}),(0,f.jsx)("ellipse",{cx:"46.3391",cy:"15.1265",rx:"0.62113",ry:"0.66891",transform:"rotate(-32.9344 46.3391 15.1265)",fill:"#3B314F"}),(0,f.jsx)("path",{d:"M42.0649 20.5144C40.9028 21.396 39.7246 23.0952 40.1341 24.8315C40.4617 26.2205 43.0536 26.7067 44.3085 26.7762L43.375 29.5077",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M47.3618 18.2199C46.4897 19.1211 45.2895 22.0707 46.1073 24.0551C46.7616 25.6427 48.9355 25.6513 49.9407 25.4571L49.8284 28.7325",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M48.2781 10.8869C50.7148 9.7849 53.6596 8.96932 51.6456 2.10901",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M62.6381 49.9814C63.0681 51.1759 65.0748 54.4727 64.2148 60.3495L61.5869 61.3529",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M67.5586 51.2217C67.9408 52.0339 69.5175 55.3785 69.852 60.7298L72.4799 61.3987",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M60.3443 47.832C60.1213 49.0106 59.8092 52.2755 60.3443 55.9067",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M68.4671 39.1842C63.9758 37.9898 61.7302 43.5322 61.6824 44.6311C58.3379 44.6311 58.5854 47.6055 59.2935 48.5968C59.7712 49.2657 60.9657 50.4124 63.6414 51.3202C66.317 52.228 69.2315 52.6102 70.0438 52.5147C70.856 52.4191 71.9072 52.5147 72.6716 50.699C73.2832 49.2466 72.2257 48.0871 71.7161 47.689C72.2894 45.0133 72.9583 40.3787 68.4671 39.1842Z",fill:"url(#paint2_linear_984_3740)"}),(0,f.jsx)("ellipse",{cx:"63.5246",cy:"45.1634",rx:"0.62113",ry:"0.66891",transform:"rotate(23.8851 63.5246 45.1634)",fill:"#3B314F"}),(0,f.jsx)("ellipse",{cx:"67.7287",cy:"46.4036",rx:"0.62113",ry:"0.66891",transform:"rotate(23.8851 67.7287 46.4036)",fill:"#3B314F"}),(0,f.jsx)("path",{d:"M71.6201 48.4521C72.2572 50.0607 73.4071 54.0519 72.9102 57.148",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M20.145 63.6075C23.0354 63.9597 23.3634 56.2253 23.2194 55.2206C21.5676 53.8165 19.6962 54.5606 18.9226 55.4634C19.5738 59.2952 17.2546 63.2552 20.145 63.6075Z",fill:"#DE493C"}),(0,f.jsx)("path",{d:"M30.3865 39.8813C32.3935 41.9266 25.5688 46.7855 24.6632 47.207C22.3282 46.273 24.5563 43.068 24.8845 41.945C28.393 40.4214 28.9597 38.4273 30.3865 39.8813Z",fill:"url(#paint3_linear_984_3740)"}),(0,f.jsx)("path",{d:"M24.4403 31.7859C20.483 25.4958 14.8185 25.4956 11.1737 28.6496C7.72002 32.3139 10.2029 36.5304 10.2029 40.0957C10.2029 43.5223 9.82932 45.0172 9.32514 49.0115C8.80332 53.1455 10.4938 59.2357 17.4273 58.6916C24.3607 58.1476 25.7828 49.4922 26.1202 46.7916C26.4576 44.091 27.7106 36.984 24.4403 31.7859Z",fill:"url(#paint4_linear_984_3740)"}),(0,f.jsx)("path",{d:"M21.1092 38.4605C22.8952 38.0025 24.0422 36.7626 24.4306 35.9472C23.9447 34.9181 22.6342 32.6511 21.2789 31.8168C19.5847 30.7738 17.3338 31.9431 16.3749 33.7377C15.6079 35.1734 15.4166 36.747 15.1673 37.8663C16.2696 38.4476 18.6857 39.082 21.1092 38.4605Z",fill:"#FEF9F5"}),(0,f.jsx)("mask",{id:"mask0_984_3740",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"17",y:"31",width:"7",height:"7",children:(0,f.jsx)("path",{d:"M23.0629 33.9957C23.2368 35.7556 22.1502 37.3037 20.6358 37.4534C19.1214 37.603 17.318 36.4011 17.1441 34.6411C16.9702 32.8811 18.4915 31.2297 20.0059 31.08C21.5203 30.9303 22.8889 32.2357 23.0629 33.9957Z",fill:"black"})}),(0,f.jsx)("g",{mask:"url(#mask0_984_3740)",children:(0,f.jsx)("path",{d:"M21.192 39.188C22.9168 38.5367 24.1249 36.743 24.5133 35.9276C24.0275 34.8984 22.7169 32.6315 21.3616 31.7971C19.6675 30.7541 17.4165 31.9234 16.4577 33.7181C15.6906 35.1538 15.1952 37.2809 14.8764 38.2203C15.9787 38.8015 19.0359 40.0022 21.192 39.188Z",fill:"black"})}),(0,f.jsx)("path",{d:"M23.4984 39.9709C25.3429 42.1639 19.8388 46.1352 18.9332 46.5567C15.9017 46.6803 15.8002 44.4652 16.1285 43.3422C19.6369 41.8186 21.654 37.7778 23.4984 39.9709Z",fill:"url(#paint5_linear_984_3740)"}),(0,f.jsx)("path",{d:"M14.355 63.6075C17.2454 63.9597 17.5734 56.2253 17.4293 55.2206C15.7775 53.8165 13.9062 54.5606 13.1326 55.4634C13.7837 59.2952 11.4645 63.2552 14.355 63.6075Z",fill:"url(#paint6_linear_984_3740)"}),(0,f.jsx)("path",{d:"M23.4486 42.4438C20.273 46.2733 18.7785 46.678 18.3115 46.9271C18.654 46.9583 19.7508 46.7459 20.74 46.0865C21.5806 45.5261 23.2618 43.6581 23.4486 42.4438Z",fill:"#DB422A"}),(0,f.jsx)("path",{d:"M18.1252 20.2033C19.4329 20.0165 22.5898 18.5594 24.7567 14.2256",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M18.6916 24.4998C19.9313 24.31 23.0314 25.0378 24.1767 26.8531C25.0928 28.3053 23.8419 30.0833 23.1019 30.7908L25.8383 32.5945",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M12.5205 14.3927C17.0117 13.1983 19.2573 18.7407 19.3051 19.8396C22.6497 19.8396 22.4021 22.814 21.6941 23.8053C21.2163 24.4742 20.0218 25.6209 17.3462 26.5287C14.6705 27.4365 11.756 27.8187 10.9438 27.7232C10.1315 27.6276 9.08037 27.7232 8.3159 25.9075C7.70433 24.4551 8.76184 23.2956 9.27149 22.8975C8.69814 20.2218 8.02923 15.5872 12.5205 14.3927Z",fill:"url(#paint7_linear_984_3740)"}),(0,f.jsx)("ellipse",{cx:"0.62113",cy:"0.66891",rx:"0.62113",ry:"0.66891",transform:"matrix(-0.914359 0.404904 0.404904 0.914359 17.76 19.5088)",fill:"#3B314F"}),(0,f.jsx)("ellipse",{cx:"0.62113",cy:"0.66891",rx:"0.62113",ry:"0.66891",transform:"matrix(-0.914359 0.404904 0.404904 0.914359 13.5559 20.749)",fill:"#3B314F"}),(0,f.jsx)("path",{d:"M12.9106 26.7704C14.0096 25.8114 15.9126 25.0025 17.5296 25.7559C18.8233 26.3586 18.7734 28.9951 18.5868 30.2381L21.4509 29.8784",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M10.4656 23.3862C9.71841 24.5382 8.89648 27.8882 11.5864 32.0726",stroke:"#CF0A80",strokeWidth:"1.52859",strokeLinecap:"round"}),(0,f.jsxs)("defs",{children:[(0,f.jsxs)("filter",{id:"filter0_f_984_3740",x:"21.9902",y:"-9.67676",width:"65.8662",height:"83.1743",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"7.5",result:"effect1_foregroundBlur_984_3740"})]}),(0,f.jsxs)("linearGradient",{id:"paint0_linear_984_3740",x1:"37.9643",y1:"40.8916",x2:"37.9643",y2:"54.4632",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#F783F2"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#E040DA"})]}),(0,f.jsxs)("linearGradient",{id:"paint1_linear_984_3740",x1:"44.4854",y1:"5.26389",x2:"45.9754",y2:"20.5246",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#F783F2"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#E040DA"})]}),(0,f.jsxs)("linearGradient",{id:"paint2_linear_984_3740",x1:"65.8551",y1:"39.0166",x2:"65.8551",y2:"52.5289",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#F783F2"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#E040DA"})]}),(0,f.jsxs)("linearGradient",{id:"paint3_linear_984_3740",x1:"30.8827",y1:"40.8875",x2:"23.3158",y2:"45.8258",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#E04D40"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#F15F56"})]}),(0,f.jsxs)("linearGradient",{id:"paint4_linear_984_3740",x1:"15.9451",y1:"25.9191",x2:"15.8128",y2:"60.321",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#F46A6A"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#EA5749"})]}),(0,f.jsxs)("linearGradient",{id:"paint5_linear_984_3740",x1:"23.9946",y1:"40.9772",x2:"16.4278",y2:"45.9155",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#FF6F66"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#EF6058"})]}),(0,f.jsxs)("linearGradient",{id:"paint6_linear_984_3740",x1:"15.4868",y1:"63.4712",x2:"15.4888",y2:"54.2896",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#DA4639"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#EC5B4F"})]}),(0,f.jsxs)("linearGradient",{id:"paint7_linear_984_3740",x1:"15.1324",y1:"14.2251",x2:"15.1324",y2:"27.7374",gradientUnits:"userSpaceOnUse",children:[(0,f.jsx)("stop",{stopColor:"#F783F2"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#E040DA"})]})]})]}))})),wo=["pricingSystems"],To={diamondIcon:{width:90,height:90,flexShrink:0,objectFit:"contain"},paper:{paddingRight:6,display:"flex"},subscription:{display:"flex",flex:1,borderRadius:8,padding:16}},So={individual:{title:(0,f.jsx)(w.Trans,{id:"For Individuals"}),description:(0,f.jsx)(w.Trans,{id:"Hobbyists and indie devs"}),icon:(0,f.jsx)(yo,{style:{width:115,height:100}}),buttonColor:"premium"},team:{title:(0,f.jsx)(w.Trans,{id:"For Teams"}),description:(0,f.jsx)(w.Trans,{id:"Companies, studios and agencies"}),icon:(0,f.jsx)(Zo,{style:{width:175,height:100}}),buttonColor:"premium"},education:{title:(0,f.jsx)(w.Trans,{id:"For Education"}),description:(0,f.jsx)(w.Trans,{id:"Teachers, courses and universities"}),icon:(0,f.jsx)(ko,{style:{width:110,height:100}}),buttonColor:"premium"}},Po=function(e){var t=e.subscription,n=e.subscriptionPlansWithPricingSystems,r=e.isManageSubscriptionLoading,i=e.onManageSubscription,u=e.simulateNativeMobileApp,d=c.useContext(mo.J).openSubscriptionDialog,p=(0,Ye.Z)().showAlert,h=c.useContext(j.Z),g=c.useState(null),m=(0,s.Z)(g,2),x=m[0],v=m[1],b=c.useState(null),C=(0,s.Z)(b,2),Z=C[0],k=C[1],S=c.useState(!1),P=(0,s.Z)(S,2),I=P[0],E=P[1];c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var r,i,o,s,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(null),E(!0),e.prev=2,t&&n){e.next=6;break}return v(null),e.abrupt("return");case 6:if(r=t.planId,i=t.pricingSystemId,r&&i){e.next=10;break}return v(null),e.abrupt("return");case 10:if(o=n.find((function(e){return t.planId===e.id}))){e.next=15;break}return k((0,f.jsx)(w.Trans,{id:"Couldn't find a subscription matching your account. Please get in touch with us to fix this issue."})),v(null),e.abrupt("return");case 15:if(s=o.pricingSystems,c=(0,go.Z)(o,wo),(0,er.kM)(i)){e.next=19;break}return v((0,l.Z)((0,l.Z)({},c),{},{pricingSystems:[]})),e.abrupt("return");case 19:if(u=s.find((function(e){return e.id===t.pricingSystemId}))){e.next=24;break}return e.next=23,(0,er.tY)(i);case 23:u=e.sent;case 24:if(u){e.next=28;break}return k((0,f.jsx)(w.Trans,{id:"Couldn't find a subscription price matching your account. Please get in touch with us to fix this issue."})),v(null),e.abrupt("return");case 28:v((0,l.Z)((0,l.Z)({},c),{},{pricingSystems:[u]}));case 29:return e.prev=29,E(!1),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,,29,32]])})))()}),[t,n]);var L=t&&t.redemptionCodeValidUntil,A=!!L&&L<Date.now(),O=(0,ja._F)()||u,R=(0,f.jsx)(M.x1,{alignItems:"center",children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Subscriptions"})}),(0,f.jsx)(N.Z,{size:"body",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Publish to Android, iOS, unlock more cloud projects, leaderboards, collaboration features and more online services. <0>Learn more</0>",components:[(0,f.jsx)(pe.Z,{href:"https://gdevelop.io/pricing#feature-comparison",onClick:function(){return y.ZP.openExternalURL("https://gdevelop.io/pricing#feature-comparison")}})]})})]})});return Z?(0,f.jsxs)(M.sg,{noMargin:!0,children:[R,(0,f.jsx)(_r.Z,{children:Z})]}):t&&n&&!I?(0,f.jsxs)(M.sg,{noMargin:!0,children:[R,x&&x.id&&!A?O?(0,f.jsx)(H.Z,{background:"medium",variant:"outlined",style:To.paper,children:(0,f.jsxs)(_.ep,{alignItems:"center",expand:!0,noMargin:!0,noResponsiveLandscape:!0,children:[(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsxs)(_.pJ,{alignItems:"center",children:[(0,f.jsx)("img",{src:"res/diamond.svg",style:To.diamondIcon,alt:"diamond"}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"You have unlocked full access to GDevelop to create without limits!"})})]})}),(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Manage subscription"}),primary:!0,onClick:function(){(0,er.rq)(t)||p({title:{id:"Subscription outside the app store"},message:{id:"The subscription of this account comes from outside the app store. Connect with your account on gdevelop.io from your web-browser to manage it."}})}})})]})}):(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(jo,{subscriptionPlanWithPricingSystems:x,hidePrice:!!L||(0,er.rq)(t),actions:[L||(0,er.rq)(t)||(0,er.iY)(t)||(0,er.mX)(t)?null:(0,f.jsx)(T.Z,{label:(0,f.jsx)($r.Z,{isLoading:r,children:(0,f.jsx)(w.Trans,{id:"Manage payments"})}),primary:!0,onClick:i,disabled:r},"manage-payments"),(0,er.iY)(t)?null:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Manage subscription"}),primary:!0,onClick:function(){d({analyticsMetadata:{reason:"Consult profile",placementId:"profile"}})},disabled:r},"manage-subscription")].filter(Boolean),isHighlighted:!0,background:"medium"}),t.cancelAtPeriodEnd&&(0,f.jsx)(je.Z,{kind:"warning",children:(0,f.jsx)(w.Trans,{id:"Your subscription is being cancelled: you will lose the benefits at the end of the period you already paid for."})}),!!L&&(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(H.Z,{background:"dark",variant:"outlined",children:(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)("img",{src:"res/diamond.svg",style:To.diamondIcon,alt:"diamond"}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Thanks to the redemption code you've used, you have this subscription enabled until {0}.",values:{0:n.date(t.redemptionCodeValidUntil)}})})})]})})}})]}):A?(0,f.jsx)(Qn.Z,{label:(0,f.jsx)(w.Trans,{id:"Choose a subscription"}),subscriptionDialogOpeningReason:"Consult profile",recommendedPlanIdIfNoSubscription:"gdevelop_silver",placementId:"profile",children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Oh no! Your subscription from the redemption code has expired. You can renew it by redeeming a new code or getting a new subscription."})})}):O?(0,f.jsx)(Qn.Z,{label:(0,f.jsx)(w.Trans,{id:"Choose a subscription"}),subscriptionDialogOpeningReason:"Consult profile",placementId:"profile",children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Unlock full access to GDevelop to create without limits!"})})}):(0,f.jsx)(_.ep,{noColumnMargin:!0,noResponsiveLandscape:!0,children:Object.keys(So).map((function(e){var t=So[e],n=t.title,r=t.description,i=t.icon,a=t.buttonColor;return(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},To.subscription),{},{border:"1px solid ".concat(h.palette.secondary)}),children:(0,f.jsxs)(M.sg,{expand:!0,alignItems:"center",justifyContent:"space-between",noMargin:!0,children:[i,(0,f.jsxs)(M.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,align:"center",children:n}),(0,f.jsx)(N.Z,{size:"body-small",noMargin:!0,color:"secondary",align:"center",children:r})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(G.Z,{color:a,onClick:function(){return d({analyticsMetadata:{reason:"Consult profile",placementId:"profile"},filter:e})},label:(0,f.jsx)(w.Trans,{id:"See plans"}),fullWidth:!0})]},e)},e)}))})]}):(0,f.jsxs)(M.sg,{noMargin:!0,children:[R,(0,f.jsx)(Oe.Z,{style:{minHeight:205}})]})},Io=n(1589),Eo=function(e){var t=e.fullName,n=e.previewIconUrl,r=e.shortDescription;return(0,f.jsxs)(M.x1,{children:[n&&(0,f.jsx)(Hr.q,{alt:t,src:n,size:64}),(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,children:t}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body2",children:r})]})]})},Mo=function(e){var t=e.examples;return e.exampleError?(0,f.jsx)(M.sg,{children:(0,f.jsx)(M.x1,{alignItems:"center",children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Error retrieving the examples"})})})}):(0,f.jsxs)(ni.UQ,{children:[(0,f.jsx)(ni._m,{children:(0,f.jsx)(N.Z,{displayInlineAsSpan:!0,children:(0,f.jsx)(w.Trans,{id:"Examples ({0})",values:{0:t.length}})})}),(0,f.jsx)(ni.X1,{disableGutters:!0,children:0===t.length?(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"You haven't contributed any examples"})}):(0,f.jsx)(M.sg,{children:t.map((function(e){return(0,f.jsx)(Eo,{shortDescription:e.shortDescription,fullName:e.name,previewIconUrl:e.previewImageUrls?e.previewImageUrls[0]:""},e.name)}))})})]})},Lo=function(e){var t=e.extensions;return e.extensionError?(0,f.jsx)(M.sg,{children:(0,f.jsx)(M.x1,{alignItems:"center",children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Error retrieving the extensions"})})})}):(0,f.jsxs)(ni.UQ,{children:[(0,f.jsx)(ni._m,{children:(0,f.jsx)(N.Z,{displayInlineAsSpan:!0,children:(0,f.jsx)(w.Trans,{id:"Extensions ({0})",values:{0:t.length}})})}),(0,f.jsx)(ni.X1,{disableGutters:!0,children:0===t.length?(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"You haven't contributed any extensions"})}):(0,f.jsx)(M.sg,{children:t.map((function(e){return(0,f.jsx)(Eo,{shortDescription:e.shortDescription,fullName:e.fullName,previewIconUrl:e.previewIconUrl},e.name)}))})})]})},Ao=function(e){e.examples;return(0,f.jsx)(ni.UQ,{disabled:!0,children:(0,f.jsx)(ni._m,{children:(0,f.jsx)(N.Z,{displayInlineAsSpan:!0,children:(0,f.jsx)(w.Trans,{id:"Assets (coming soon!)"})})})})},Oo=function(e){var t=e.userId,n=c.useState(null),r=(0,s.Z)(n,2),i=r[0],l=r[1],u=c.useState(null),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useState(null),m=(0,s.Z)(g,2),x=m[0],v=m[1],b=c.useState(null),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=c.useCallback((function(){(0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,Kr.y7)(t);case 5:n=e.sent,l(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while loading extensions:",e.t0),v(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}),[t]);c.useEffect((function(){Z()}),[Z]);var k=c.useCallback((function(){(0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,_i.Ex)(t);case 5:n=e.sent,h(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while loading examples:",e.t0),y(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}),[t]);return c.useEffect((function(){k()}),[k]),(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(M.x1,{alignItems:"center",children:(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Contributions"})})}),p&&i?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Lo,{extensions:i,extensionError:x}),(0,f.jsx)(Mo,{examples:p,exampleError:j}),(0,f.jsx)(Ao,{examples:p}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"Missing some contributions? If you are the author, create a Pull Request on the corresponding GitHub repository after adding your username in the authors of the example or the extension - or directly ask the original author to add your username."})})})]}):(0,f.jsx)(Oe.Z,{style:{minHeight:205}})]})},Ro=n(64881),Fo=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16667 7.66663C5.07462 7.66663 5 7.74124 5 7.83329V11.5C5 11.9602 5.37309 12.3333 5.83333 12.3333H11.5C11.9603 12.3333 12.3333 11.9602 12.3333 11.5V7.83329C12.3333 7.74124 12.2587 7.66663 12.1667 7.66663H5.16667ZM4 7.83329C4 7.18894 4.52234 6.66663 5.16667 6.66663H12.1667C12.811 6.66663 13.3333 7.18895 13.3333 7.83329V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H5.83333C4.82082 13.3333 4 12.5125 4 11.5V7.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66667 3.66663C7.70522 3.66663 7.16755 3.97865 6.85548 4.29844C6.59324 4.56717 6.45446 4.92749 6.38761 5.38368C6.3293 5.7816 6.33095 6.20398 6.33271 6.65637C6.33302 6.73503 6.33333 6.81459 6.33333 6.89509V6.99996C6.33333 7.2761 6.10948 7.49996 5.83333 7.49996C5.55719 7.49996 5.33333 7.2761 5.33333 6.99996V6.89509C5.33333 6.82347 5.33298 6.74973 5.33261 6.67429C5.33045 6.22589 5.328 5.71754 5.39817 5.23869C5.48174 4.66839 5.67512 4.07618 6.1398 3.60002C6.65683 3.0702 7.46078 2.66663 8.66667 2.66663C9.87255 2.66663 10.6765 3.0702 11.1935 3.60002C11.6582 4.07619 11.8516 4.66838 11.9351 5.23869C12.0053 5.71755 12.0029 6.22593 12.0007 6.67435C12.0004 6.74977 12 6.82349 12 6.89509V6.99996C12 7.2761 11.7761 7.49996 11.5 7.49996C11.2239 7.49996 11 7.2761 11 6.99996V6.89509C11 6.81462 11.0003 6.73508 11.0006 6.65644C11.0024 6.20403 11.004 5.78163 10.9457 5.38369C10.8789 4.9275 10.7401 4.56717 10.4778 4.29844C10.1658 3.97866 9.62811 3.66663 8.66667 3.66663Z",fill:"currentColor"})]}))})),Do=n(42061),No=n(67674),_o=function(e){var t=e.children,n=e.invisible,r=e.overlap,i=e.color,a=void 0===i?"secondary":i,o=function(e){return(0,ur.Z)((function(t){var n="success"===e||"neutral"===e?{dot:{backgroundColor:"success"===e?t.palette.success.main:t.palette.text.primary}}:{};return(0,No.Z)((0,l.Z)({root:{flexDirection:"column"},anchorOriginTopRightCircle:{top:"8%",right:"8%"}},n))}))()}(a),s="success"===a||"neutral"===a?void 0:a;return(0,f.jsx)(Do.Z,{color:s,variant:"dot",classes:o,invisible:n,overlap:r,children:t})},Bo={achievementsContainer:{maxHeight:250},lockedAchievement:{opacity:.4},unlockedAchievement:{}},Uo=function(e){var t=e.badges,n=e.achievements,r=c.useState([]),i=(0,s.Z)(r,2),a=i[0],o=i[1];return c.useEffect((function(){var e=t.reduce((function(e,t){return e[t.achievementId]=t,e}),{}),r=n.reduce((function(t,n){var r=e[n.id],i=!!r;return t.push((0,l.Z)((0,l.Z)({},n),{},{seen:i?r.seen:void 0,unlockedAt:i?(0,Ro.Z)(r.unlockedAt):null})),t}),[]);r.sort(xi.tP),o(r)}),[t,n]),(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(ft.Z,{style:Bo.achievementsContainer,children:a.map((function(e){return(0,f.jsxs)(M.x1,{justifyContent:"space-between",children:[(0,f.jsxs)(M.sg,{justifyContent:"center",alignItems:"flex-start",children:[(0,f.jsx)(_o,{invisible:!0===e.seen||void 0===e.seen,children:(0,f.jsx)(N.Z,{noMargin:!0,size:"sub-title",style:e.unlockedAt?Bo.unlockedAchievement:Bo.lockedAchievement,children:(0,vo.a)(t,e.nameByLocale)})}),(0,f.jsx)(N.Z,{noMargin:!0,style:e.unlockedAt?Bo.unlockedAchievement:Bo.lockedAchievement,size:"body2",children:(0,vo.a)(t,e.descriptionByLocale)})]}),(0,f.jsx)(M.sg,{children:e.unlockedAt?(0,f.jsx)(N.Z,{children:t.date(e.unlockedAt)}):(0,f.jsx)(Fo,{style:Bo.lockedAchievement})})]},e.id)}))})}})})},Vo=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 0 528.9 511.62",children:(0,f.jsx)("g",{id:"Calque_2","data-name":"Calque 2",children:(0,f.jsxs)("g",{id:"Calque_4","data-name":"Calque 4",children:[(0,f.jsx)("path",{d:"M144 60.33S80.75-18.31 35.82 21s-17.56 93.4-17.56 93.4 32.3 82.85 35.81 109.53S77 279.4 77 279.4s16.42 21.77 52.94 13.35 66-34.41 66-34.41ZM385 60.33S448.14-18.31 493.08 21s17.55 93.39 17.55 93.39-32.29 82.85-35.81 109.53-22.9 55.47-22.9 55.47-16.42 21.78-52.92 13.36-66-34.41-66-34.41Z",style:{fill:"none",stroke:"currentColor",strokeWidth:"20px",strokeMiterlimit:10}}),(0,f.jsx)("path",{d:"M395.53 429.67H352s-46.34-34.41-44.94-61.09C455.92 297 434.85 63.14 434.85 63.14H88.1S67 297 215.89 368.58c1.41 26.68-44.89 61.09-44.89 61.09h-43.58v24.57h-23.87v56.88h315.86v-56.88h-23.88Z",style:{fill:"inherit",strokeMiterlimit:10}})]})})}))})),Ho={summary:{textAlign:"center"},leftContainer:{flex:1,margin:"20px",display:"flex",alignItems:"center",justifyContent:"center"},rightContainer:{flex:2}},zo=function(e){var t=e.achievements,n=e.badges,r=(0,be.UQ)().isMobile;return(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Achievements"})}),(0,f.jsx)(_.ep,{children:n&&t?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:Ho.leftContainer,children:(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},Ho.summary),{},{padding:r?"0 20":"20"}),children:[(0,f.jsx)(Vo,{color:"secondary",fontSize:"large"}),(0,f.jsxs)(N.Z,{size:"block-title",children:[(0,f.jsx)(w.Trans,{id:"{0}/{1} achievements",values:{0:n.length,1:t.length}}),0===n.length&&(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(w.Trans,{id:"(yet!)"})]})]})]})}),n.length>0&&(0,f.jsx)("div",{style:Ho.rightContainer,children:n&&t&&(0,f.jsx)(Uo,{badges:n,achievements:t})})]}):(0,f.jsx)(Oe.Z,{})})]})},Wo=n(20928),Go=n(54458),Yo=function(e,t,n){var r=(0,c.useRef)(null);(0,c.useEffect)((function(){if(e)return r.current=new IntersectionObserver(t,(0,l.Z)({root:null,threshold:.8},n)),r.current.observe(e),function(){r.current&&r.current.disconnect()}}),[e,t,n])},qo=n(36401),Jo=n(42016),Xo=function(e){var t=e.onClose,n=c.useContext($n.ZP),r=c.useRef(null),i=c.useRef(!1),l=c.useContext(mo.J),u=l.getSubscriptionPlansWithPricingSystems,d=l.openSubscriptionPendingDialog,p=u(),h=(0,be.UQ)().isMobile,g=c.useState(!1),m=(0,s.Z)(g,2),x=m[0],v=m[1],b="done"!==n.loginState,C=c.useRef(null),j=c.useCallback((function(e){if(n.authenticated&&n.profile&&!i.current){if(!e[0].isIntersecting&&r.current)return clearTimeout(r.current),void(r.current=null);if(e[0].isIntersecting){if(r.current)return;r.current=setTimeout((function(){(0,xi.M7)(n),i.current=!0}),5e3)}}}),[n]);Yo(C.current,j);var Z=c.useState(!1),k=(0,s.Z)(Z,2),S=k[0],P=k[1],I=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.getAuthorizationHeader,r=n.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,P(!0),e.next=7,(0,er.jj)(t,r.uid);case 7:i=e.sent,y.ZP.openExternalURL(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),(0,bi.gR)({message:"Unable to load the portal to manage your subscription. Please contact us on billing@gdevelop.io",rawError:e.t0,errorId:"subscription-portal-error"});case 14:return e.prev=14,P(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])}))),[n]);c.useEffect((function(){n.onRefreshUserProfile()}),[n.onRefreshUserProfile]);var L=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.onLogout();case 2:t();case 3:case"end":return e.stop()}}),e)}))),[n,t]),A=n.authenticated&&n.profile,O=!!n.subscription&&!!n.subscription.benefitsFromEducationPlan&&!n.subscription.isTeacher,R=!!n.subscription&&!!n.subscription.benefitsFromEducationPlan&&!!n.subscription.isTeacher;return(0,f.jsxs)(E.ZP,{title:A?(0,f.jsx)(w.Trans,{id:"My profile"}):null,actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:t},"close")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/interface/profile"},"help"),A&&(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Logout"}),onClick:L,disabled:b},"logout"),(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(Wo.Z,{}),label:h?(0,f.jsx)(w.Trans,{id:"Redeem"}):(0,f.jsx)(w.Trans,{id:"Redeem a code"}),disabled:b,primary:!1,onClick:function(){n.authenticated?v(!0):n.onOpenCreateAccountDialog()}},"redeem-code")],onRequestClose:t,open:!0,fullHeight:!!A,maxWidth:A?"md":"sm",flexColumnBody:!0,children:[A||"loggingIn"!==n.loginState?n.authenticated&&n.profile?(0,f.jsx)(M.x1,{children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsx)(ho,{authenticatedUser:n,onOpenEditProfileDialog:n.onOpenEditProfileDialog,onOpenChangeEmailDialog:n.onOpenChangeEmailDialog}),O?null:(0,f.jsx)(Po,{subscription:n.subscription,subscriptionPlansWithPricingSystems:p,onManageSubscription:I,isManageSubscriptionLoading:S}),!O&&!R&&(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(M.x1,{alignItems:"center",children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"GDevelop credits"})}),(0,f.jsx)(N.Z,{size:"body",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Get perks and cloud benefits when getting closer to your game launch. <0>Learn more</0>",components:[(0,f.jsx)(pe.Z,{href:"https://wiki.gdevelop.io/gdevelop5/interface/profile/credits",onClick:function(){return y.ZP.openExternalURL("https://wiki.gdevelop.io/gdevelop5/interface/profile/credits")}})]})})]})}),(0,f.jsx)(qo.Z,{displayPurchaseAction:!0})]}),!O&&(0,f.jsx)(Oo,{userId:n.profile.id}),A&&(0,f.jsx)("div",{ref:C,children:(0,f.jsx)(zo,{achievements:n.achievements,badges:n.badges})})]})}):(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(Go.Z,{onOpenLoginDialog:n.onOpenLoginDialog,onOpenCreateAccountDialog:n.onOpenCreateAccountDialog,message:(0,f.jsx)(w.Trans,{id:"Create an account to register your games and to get access to metrics collected anonymously, like the number of daily players and retention of the players after a few days."})})}):(0,f.jsx)(Oe.Z,{}),x&&(0,f.jsx)(Jo.Z,{authenticatedUser:n,onClose:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!1),!t){e.next=5;break}return d(),e.next=5,n.onRefreshSubscription();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},Ko=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Profile"}),scope:"profile",onClose:e.onClose,children:(0,f.jsx)(Xo,(0,l.Z)({},e))})},Qo=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H5C4.58579 7.75 4.25 7.41421 4.25 7C4.25 6.58579 4.58579 6.25 5 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 17C21.75 17.4142 21.4142 17.75 21 17.75H5C4.58579 17.75 4.25 17.4142 4.25 17C4.25 16.5858 4.58579 16.25 5 16.25H21C21.4142 16.25 21.75 16.5858 21.75 17Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H5C4.58579 12.75 4.25 12.4142 4.25 12C4.25 11.5858 4.58579 11.25 5 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12Z",fill:"currentColor"})]}))})),$o=n(86443),es={columnDropIndicator:{borderRight:"1px solid",borderLeft:"1px solid",width:8,marginLeft:"-1px",height:"100%",boxSizing:"border-box"}};function ts(){var e=c.useContext(j.Z);return(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},es.columnDropIndicator),{},{backgroundColor:e.dropIndicator.canDrop,borderColor:e.dropIndicator.border})})}var ns=n(32628),rs=n(39631),is=n(16792),as=n(23198),os="title-bar-non-draggable-part",ss={tabContentContainer:{width:"100%",position:"relative",textAlign:"initial",minHeight:0,display:"flex",flex:1},tabLabel:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"15px"},tabIcon:{marginLeft:4,marginRight:4,display:"flex"},tabLabelAndIcon:{display:"flex",alignItems:"center"},closeButton:{marginRight:5,marginLeft:5}},ls=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.active||e.active}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.active;return(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)((0,l.Z)({},ss.tabContentContainer),n?void 0:{display:"none"}),{},{pointerEvents:this.props.removePointerEvents?"none":"all"}),children:t})}}]),n}(c.Component),cs=function(e){var t=e.hideLabels,n=e.renderTabs,r=(0,gt.Z)(),i=c.useRef(null),a={maxWidth:"100%",flex:1,display:t?"none":"flex",flexWrap:"nowrap",overflowX:"overlay",overflowY:"hidden",marginTop:7},o=c.useCallback((function(e){var t=i.current;t&&(t.scrollLeft+=e.deltaY)}),[]),s=i.current?i.current.clientWidth:null;return c.useLayoutEffect((function(){r()}),[r]),(0,f.jsx)("div",{ref:i,className:"almost-invisible-scrollbar",style:a,onWheel:o,children:null!==s?n({containerWidth:s}):null})};function us(e){var t=e.id,n=e.data,r=e.active,i=e.onClose,a=e.onCloseOthers,o=e.onCloseAll,u=e.label,d=e.icon,p=e.renderCustomIcon,h=e.closable,g=e.onClick,m=e.onActivated,x=e.onHover,v=e.maxWidth;c.useEffect((function(){r&&m()}),[r,m]);var b=c.useRef(null),C=c.useRef(null),y=c.useState(!1),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1];c.useEffect((function(){v&&C.current&&w(C.current.scrollWidth>C.current.clientWidth)}),[v]);var T=function(e){e.stopPropagation(),b.current&&b.current.open(e.clientX,e.clientY)},S=c.useCallback((function(e){e.nativeEvent&&1===e.nativeEvent.button&&i()}),[i]),P=(0,rs.i)(c.useCallback((function(e){b.current&&b.current.open(e.clientX,e.clientY)}),[b])),I=c.useContext(j.Z),E=r?I.closableTabs.selectedTextColor:I.closableTabs.textColor,M="dark"===I.palette.type?r?.978:.776:r?.022:.224,L=Math.max(.1,(v||320)-20-32-9);return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsxs)("span",{id:t,style:{flexShrink:0,position:"relative",display:"inline-block",marginRight:2,scrollMarginRight:20,scrollMarginLeft:20,borderTopRightRadius:8,borderTopLeftRadius:8,borderTop:"1px solid black",borderRight:"1px solid black",borderLeft:"1px solid black",borderBottom:"none",borderColor:r?I.closableTabs.selectedBorderColor:I.closableTabs.backgroundColor,backgroundColor:r?I.closableTabs.selectedBackgroundColor:I.closableTabs.backgroundColor},className:os,onMouseEnter:function(){return x(!0,{isLabelTruncated:k})},onMouseLeave:function(){return x(!1,{isLabelTruncated:k})},children:[(0,f.jsx)(lt.Z,(0,l.Z)((0,l.Z)((0,l.Z)({onClick:g,onAuxClick:h?S:void 0,onContextMenu:T,"data-active":r?"true":void 0,id:t?"".concat(t,"-button"):void 0},(0,is.Y)(n)),P),{},{focusRipple:!0,disableTouchRipple:!0,children:(0,f.jsxs)("span",{style:(0,l.Z)((0,l.Z)({},ss.tabLabelAndIcon),{},{height:I.closableTabs.height,color:E,fontFamily:I.closableTabs.fontFamily}),children:[d||p?(0,f.jsx)("span",{style:ss.tabIcon,children:p?p(M):d}):null,u&&(0,f.jsx)("span",{ref:C,style:(0,l.Z)((0,l.Z)({},ss.tabLabel),{},{maxWidth:L}),children:u})]})})),h&&(0,f.jsx)(lt.Z,(0,l.Z)((0,l.Z)({onClick:i,onAuxClick:S,onContextMenu:T},P),{},{focusRipple:!0,children:(0,f.jsx)(as.Z,{style:(0,l.Z)((0,l.Z)({},ss.closeButton),{},{width:I.closableTabs.height/2,height:I.closableTabs.height}),htmlColor:E})}))]}),(0,f.jsx)(ns.Z,{ref:b,buildMenuTemplate:function(e){return[{label:e._({id:"Close"}),click:i,enabled:h},{label:e._({id:"Close others"}),click:a},{label:e._({id:"Close all"}),click:o}]}})]})}var ds=n(51265),ps=(0,ut.x)("draggable-closable-tab"),fs=function(e){return"tab-".concat(e.key.replace(/\s/g,"-"))};function hs(e){var t=e.hideLabels,n=e.editors,r=e.currentTab,i=e.onClickTab,a=e.onCloseTab,o=e.onCloseOtherTabs,s=e.onCloseAll,l=e.onTabActivated,u=e.onDropTab,d=e.onHoverTab,p=null;(0,ds.Z)((0,gt.Z)());var h=(0,be.UQ)().windowSize;return c.useEffect((function(){if(r){var e=document.getElementById(fs(r));e&&e.scrollIntoView({behavior:"smooth",inline:"small"===h?"end":"nearest"})}}),[r,h]),(0,f.jsx)(cs,{hideLabels:t,renderTabs:function(e){var t=e.containerWidth,c=n.length>0&&"start page"===n[0].key;return n.map((function(e,g){var m=r===e,x="small"===h?100:80,v=Math.max(x,c?(t-35)/(n.length-1):t/n.length);return(0,f.jsx)(gs,{index:g,label:e.label,icon:e.icon,renderCustomIcon:e.renderCustomIcon,id:fs(e),data:e.tabOptions?e.tabOptions.data:void 0,active:m,onClick:function(){return i(g)},onClose:function(){return a(e)},onCloseOthers:function(){return o(e)},onCloseAll:s,onHover:function(t,n){return d(t?e:null,n)},onActivated:function(){return l(e)},closable:e.closable,onBeginDrag:function(){return p=g,e},onDrop:function(e){"number"===typeof p&&(u(p,g),p=null)},maxWidth:v},e.key)}))}})}function gs(e){var t=e.index,n=e.id,r=e.data,i=e.active,a=e.onClose,o=e.onCloseOthers,s=e.onCloseAll,l=e.label,c=e.icon,u=e.renderCustomIcon,d=e.closable,p=e.onClick,h=e.onActivated,g=e.onBeginDrag,m=e.onDrop,x=e.onHover,v=e.maxWidth;return(0,f.jsx)(hi.wh,{children:function(e){return(0,f.jsx)(ps,{beginDrag:g,canDrag:function(){return"touch"!==e&&0!==t},canDrop:function(){return!0},drop:function(){return m(t)},children:function(e){var t=e.connectDragSource,g=e.connectDropTarget,m=e.isOver,b=(e.canDrop,g((0,f.jsxs)("div",{style:{display:"flex",flexShrink:0},children:[(0,f.jsx)(us,{id:n,data:r,active:i,onClose:a,onCloseOthers:o,onCloseAll:s,label:l,icon:c,renderCustomIcon:u,closable:d,onClick:p,onHover:x,onActivated:h,maxWidth:v},n),m&&(0,f.jsx)(ts,{})]})));return b?t(b):null}})}})}var ms=n(89765),xs=n(32694),vs=n(16973),bs={layout:(0,f.jsx)(w.Trans,{id:"Scene"}),"layout events":(0,f.jsx)(w.Trans,{id:"Scene events"}),"external layout":(0,f.jsx)(w.Trans,{id:"External layout"}),"external events":(0,f.jsx)(w.Trans,{id:"External events"}),"events functions extension":(0,f.jsx)(w.Trans,{id:"Extension"}),"custom object":(0,f.jsx)(w.Trans,{id:"Object"}),debugger:(0,f.jsx)(w.Trans,{id:"Debugger"}),resources:(0,f.jsx)(w.Trans,{id:"Resources"}),"start page":(0,f.jsx)(w.Trans,{id:"Homepage"}),"ask-ai":(0,f.jsx)(w.Trans,{id:"Ask AI"})},Cs={padding:"8px 10px",minWidth:180},js={zIndex:3,maxWidth:"min(90%, 300px)"},ys=function(e){var t=e.anchorElement,n=e.editorTab,r=c.useContext(j.Z),i=c.useState(js),a=(0,s.Z)(i,2),o=a[0],u=a[1];c.useEffect((function(){var e=setTimeout((function(){u((function(e){return(0,l.Z)((0,l.Z)({},e),{},{transition:"transform 150ms ease-in-out"})}))}),100);return function(){return clearTimeout(e)}}),[]);var d=null,p=null;if(["layout","layout events","external layout","external events","events functions extension"].includes(n.kind))d=n.projectItemName,p=bs[n.kind];else if("custom object"===n.kind&&n.projectItemName){var h=n.projectItemName.split("::")[1];h&&(d=h,p=bs[n.kind])}else d=bs[n.kind];return(0,f.jsx)(vs.Z,{id:"tabs-titlebar-tooltip",open:!0,anchorEl:t,transition:!0,placement:"bottom-start",popperOptions:{modifiers:{arrow:{enabled:!1},offset:{enabled:!0,offset:"0,5"},preventOverflow:{enabled:!0,boundariesElement:document.querySelector(".main-frame")}}},style:o,children:function(e){var t=e.TransitionProps;return(0,f.jsx)(ms.Z,(0,l.Z)((0,l.Z)({},t),{},{timeout:{enter:350,exit:0},children:(0,f.jsx)(xs.Z,{style:(0,l.Z)((0,l.Z)({},Cs),{},{backgroundColor:r.paper.backgroundColor.light}),elevation:4,children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,children:d}),p&&(0,f.jsx)(N.Z,{noMargin:!0,size:"body-small",children:p})]})})}))}})},Zs=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:[(0,f.jsx)("path",{d:"M2.625 0.75C1.99264 0.75 1.4887 1.08656 1.18306 1.49408C0.882583 1.89471 0.75 2.37906 0.75 2.83333C0.75 3.28761 0.882583 3.77196 1.18306 4.17259C1.4887 4.58011 1.99264 4.91667 2.625 4.91667C3.25736 4.91667 3.7613 4.58011 4.06694 4.17259C4.36742 3.77196 4.5 3.28761 4.5 2.83333C4.5 2.37906 4.36742 1.89471 4.06694 1.49408C3.7613 1.08656 3.25736 0.75 2.625 0.75Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M11.375 0.75C10.7426 0.75 10.2387 1.08656 9.93306 1.49408C9.63258 1.89471 9.5 2.37906 9.5 2.83333C9.5 3.28761 9.63258 3.77196 9.93306 4.17259C10.2387 4.58011 10.7426 4.91667 11.375 4.91667C12.0074 4.91667 12.5113 4.58011 12.8169 4.17259C13.1174 3.77196 13.25 3.28761 13.25 2.83333C13.25 2.37906 13.1174 1.89471 12.8169 1.49408C12.5113 1.08656 12.0074 0.75 11.375 0.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.87464 9.4403C2.38579 8.96131 1.6012 8.96436 1.11612 9.44945C0.627961 9.93761 0.627961 10.7291 1.11612 11.2172L1.11792 11.219L1.11989 11.221L1.12432 11.2254L1.13514 11.2359L1.1646 11.264C1.18773 11.2857 1.21786 11.3132 1.25499 11.3457C1.32923 11.4106 1.43171 11.4957 1.5625 11.5938C1.82391 11.7898 2.19993 12.0392 2.69098 12.2847C3.67718 12.7778 5.11738 13.25 7 13.25C8.88262 13.25 10.3228 12.7778 11.309 12.2847C11.8001 12.0392 12.1761 11.7898 12.4375 11.5938C12.5683 11.4957 12.6708 11.4106 12.745 11.3457C12.7821 11.3132 12.8123 11.2857 12.8354 11.264L12.8649 11.2359L12.8757 11.2254L12.8801 11.221L12.8821 11.219C12.8846 11.2165 12.8839 11.2172 12.8839 11.2172C13.372 10.7291 13.372 9.93761 12.8839 9.44945C12.3989 8.96443 11.6144 8.96131 11.1256 9.44011C11.1217 9.44369 11.1123 9.4524 11.0987 9.46423C11.0688 9.49041 11.015 9.53559 10.9375 9.59375C10.7822 9.71019 10.5333 9.87749 10.191 10.0486C9.51051 10.3889 8.45071 10.75 7 10.75C5.54929 10.75 4.48949 10.3889 3.80902 10.0486C3.46673 9.87749 3.21776 9.71019 3.0625 9.59375C2.98496 9.53559 2.93118 9.49041 2.90126 9.46423C2.88661 9.45141 2.87773 9.44319 2.87464 9.4403Z",fill:"currentColor"})]}))})),ks=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,f.jsxs)("g",{transform:"scale(1.75)",children:[(0,f.jsx)("path",{d:"M2.75 6C4.04963 6 5.09464 6.12963 5.82129 6.26172C6.18468 6.32779 6.46924 6.39496 6.66602 6.44629C6.76421 6.47191 6.84071 6.49374 6.89453 6.50977C6.92127 6.51773 6.9426 6.52443 6.95801 6.5293C6.96572 6.53173 6.97274 6.5336 6.97754 6.53516C6.97972 6.53587 6.9834 6.53711 6.9834 6.53711L6.98535 6.53809H6.9873C7.38026 6.66907 7.5929 7.09435 7.46191 7.4873C7.33093 7.88026 6.90565 8.0929 6.5127 7.96191C6.5127 7.96191 6.50938 7.96076 6.50684 7.95996C6.49911 7.95752 6.48564 7.95288 6.4668 7.94727C6.42886 7.93597 6.36838 7.91866 6.28711 7.89746C6.12458 7.85507 5.87749 7.79716 5.55371 7.73828C4.90538 7.6204 3.95009 7.5 2.75 7.5C2.33579 7.49999 2 7.16421 2 6.75C2 6.33579 2.33579 6.00001 2.75 6Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M1.125 0C1.50438 0 1.80685 0.201809 1.99023 0.446289C2.17052 0.686669 2.25 0.977435 2.25 1.25C2.25 1.52256 2.17052 1.81333 1.99023 2.05371C1.80685 2.29819 1.50438 2.5 1.125 2.5C0.745619 2.5 0.443153 2.29819 0.259766 2.05371C0.0794809 1.81333 0 1.52256 0 1.25C0 0.977435 0.0794809 0.686669 0.259766 0.446289C0.443154 0.201809 0.745619 0 1.125 0Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M6.375 0C6.75438 0 7.05685 0.201809 7.24023 0.446289C7.42052 0.686669 7.5 0.977435 7.5 1.25C7.5 1.52256 7.42052 1.81333 7.24023 2.05371C7.05685 2.29819 6.75438 2.5 6.375 2.5C5.99562 2.5 5.69315 2.29819 5.50977 2.05371C5.32948 1.81333 5.25 1.52256 5.25 1.25C5.25 0.977435 5.32948 0.686669 5.50977 0.446289C5.69315 0.201809 5.99562 0 6.375 0Z",fill:"currentColor"})]})}))})),ws=function(e,t){return(0,ur.Z)((function(n){return{container:{position:"relative",overflow:"hidden",padding:t/3.4,borderRadius:t/3.4,display:"flex",justifyContent:"center",alignItems:"center","&::before":{content:"''",display:"block",background:"conic-gradient(from -18deg at 59.52% 50%, #FFBC57 0deg, #F6945B 157.5deg, #DFA9E4 257.88461208343506deg, rgba(201, 182, 252, 0.00) 360deg)",width:"calc(100% * 1.41421356237)",paddingBottom:"calc(100% * 1.41421356237)",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderRadius:"100%",zIndex:0,animation:"spin-background 3s linear infinite",animationPlayState:e?"running":"paused"},"&::after":{content:"''",position:"absolute",inset:"".concat(2*(t/3.4-t/4.5),"px"),background:n.palette.background.alternate,zIndex:1,borderRadius:"".concat(t/4.5,"px")}},svgContainer:{display:"flex",zIndex:2}}}))()};function Ts(e){var t=e.rotating,n=e.size,r=e.sad,i=n||34,a=ws(t,i);return(0,f.jsx)("div",{className:a.container,children:(0,f.jsx)("div",{className:a.svgContainer,children:r?(0,f.jsx)(ks,{style:{width:Math.floor(i/2.42),height:Math.floor(i/2.42)}}):(0,f.jsx)(Zs,{style:{width:Math.floor(i/2.42),height:Math.floor(i/2.42)}})})})}var Ss=n(21676),Ps=n(12813),Is="title-bar-non-draggable-part",Es={container:{display:"flex",flexShrink:0,alignItems:"flex-end",position:"relative"},menuIcon:{marginLeft:4,marginRight:4,width:34,height:34},askAiContainer:{zIndex:0,marginBottom:4,marginRight:1,marginLeft:2}};function Ms(e){var t=e.toggleProjectManager,n=e.hidden,r=e.renderTabs,i=e.isLeftMostPane,a=e.isRightMostPane,o=e.displayMenuIcon,u=e.displayAskAi,d=e.onAskAiClicked,p="touch"===(0,hi.BF)(),h=c.useContext(D.ZP),g=c.useContext($n.ZP).limits,m=c.useState(null),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useRef(null),j=c.useCallback((function(e,t){var n=t.isLabelTruncated;if(p)b(null);else if(C.current&&(clearTimeout(C.current),C.current=null),e&&n){var r=document.getElementById(fs(e));r&&(C.current=setTimeout((function(){b({editorTab:e,element:r})}),v?100:500))}else C.current=setTimeout((function(){b(null)}),50)}),[p,v]),Z=c.useCallback((function(){C.current&&(clearTimeout(C.current),C.current=null),b(null)}),[]);c.useEffect((function(){return function(){C.current&&clearTimeout(C.current)}}),[]);var k=!!g&&!!g.capabilities.classrooms&&g.capabilities.classrooms.hideAskAi,w=h.values.showAiAskButtonInTitleBar&&u&&!k,T=function(e){var t=(0,Ps.t)(),n=c.useState(!0),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=c.useCallback((function(e){t.current&&(a(!0),setTimeout((function(){t.current&&a(!1)}),e))}),[t]);return c.useEffect((function(){o(9e3)}),[o]),(0,Ss.Y)((function(){a(!0),setTimeout((function(){a(!1)}),8e3)}),e?12e5:null),i}(w),S=c.useCallback((function(){(0,ja.z1)()&&y.ZP.toggleMaximize()}),[]);return(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},Es.container),{},{backgroundColor:"transparent",visibility:n?"hidden":"visible",pointerEvents:n?void 0:"all"}),className:"title-bar-draggable-part",onDoubleClick:S,children:[i&&(0,f.jsx)($o.A,{}),o&&(0,f.jsx)($.Z,{size:"small",id:"main-toolbar-project-manager-button",className:Is,style:Es.menuIcon,color:"default",onClick:t,children:(0,f.jsx)(Qo,{})}),r(j,Z),w?(0,f.jsx)("div",{style:Es.askAiContainer,className:Is,children:(0,f.jsx)(ba.Z,{icon:(0,f.jsx)(Ts,{size:16,rotating:T}),label:"Ask AI",onClick:d})}):null,a&&(0,f.jsx)($o.$,{}),v&&(0,f.jsx)(ys,{anchorElement:v.element,editorTab:v.editorTab})]})}var Ls=n(11123),As=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99996 3.66669C5.60673 3.66669 3.66663 5.60679 3.66663 8.00002C3.66663 10.3933 5.60673 12.3334 7.99996 12.3334C10.3932 12.3334 12.3333 10.3933 12.3333 8.00002C12.3333 5.60679 10.3932 3.66669 7.99996 3.66669ZM2.66663 8.00002C2.66663 5.0545 5.05444 2.66669 7.99996 2.66669C10.9455 2.66669 13.3333 5.0545 13.3333 8.00002C13.3333 10.9455 10.9455 13.3334 7.99996 13.3334C5.05444 13.3334 2.66663 10.9455 2.66663 8.00002Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.04854 4.69103C6.65219 5.44491 6.33329 6.57193 6.33329 8.00002C6.33329 9.42811 6.65219 10.5551 7.04854 11.309C7.2474 11.6873 7.459 11.9589 7.64726 12.1291C7.8457 12.3085 7.96937 12.3334 7.99996 12.3334C8.03055 12.3334 8.15422 12.3085 8.35266 12.1291C8.54092 11.9589 8.75252 11.6873 8.95138 11.309C9.34773 10.5551 9.66663 9.42811 9.66663 8.00002C9.66663 6.57193 9.34773 5.44491 8.95138 4.69103C8.75252 4.31278 8.54092 4.04112 8.35266 3.87091C8.15422 3.6915 8.03055 3.66669 7.99996 3.66669C7.96937 3.66669 7.8457 3.6915 7.64726 3.87091C7.459 4.04112 7.2474 4.31278 7.04854 4.69103ZM6.97662 3.12913C7.26209 2.87104 7.61635 2.66669 7.99996 2.66669C8.38357 2.66669 8.73783 2.87104 9.0233 3.12913C9.31895 3.39642 9.59725 3.7706 9.83651 4.22568C10.3164 5.13846 10.6666 6.42811 10.6666 8.00002C10.6666 9.57193 10.3164 10.8616 9.83651 11.7744C9.59725 12.2294 9.31895 12.6036 9.0233 12.8709C8.73783 13.129 8.38357 13.3334 7.99996 13.3334C7.61635 13.3334 7.26209 13.129 6.97662 12.8709C6.68096 12.6036 6.40267 12.2294 6.16341 11.7744C5.68353 10.8616 5.33329 9.57193 5.33329 8.00002C5.33329 6.42811 5.68353 5.13846 6.16341 4.22568C6.40267 3.7706 6.68096 3.39642 6.97662 3.12913Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83329 8.00002C2.83329 7.72388 3.05715 7.50002 3.33329 7.50002H12.6666C12.9428 7.50002 13.1666 7.72388 13.1666 8.00002C13.1666 8.27616 12.9428 8.50002 12.6666 8.50002H3.33329C3.05715 8.50002 2.83329 8.27616 2.83329 8.00002Z",fill:"currentColor"})]}))})),Os=n(9383),Rs=function(e){var t=(0,be.UQ)(),n=t.isMobile,r=t.isLandscape;return(0,f.jsx)(G.Z,(0,l.Z)((0,l.Z)({},e),{},{label:n&&!r?"":e.label}))},Fs=c.memo((function(e){var t=e.onPreviewWithoutHotReload,n=e.onNetworkPreview,i=e.onOpenDebugger,s=e.onHotReloadPreview,l=e.onLaunchPreviewWithDiagnosticReport,u=e.canDoNetworkPreview,d=e.isPreviewEnabled,p=e.hasPreviewsRunning,h=e.previewState,g=e.setPreviewOverride,m=e.openShareDialog,x=e.isSharingEnabled,v=c.useContext(D.ZP),b=(0,be.UQ)().isMobile,C=c.useCallback((function(e){return[{label:e._({id:"Start Network Preview (Preview over WiFi/LAN)"}),click:n,enabled:u},{label:e._({id:"Start Preview and Debugger"}),click:i},v.values.openDiagnosticReportAutomatically?null:{label:e._({id:"Start preview with diagnostic report"}),click:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),enabled:!p},{label:e._({id:"Launch preview in..."}),submenu:[{label:e._({id:"A new window"}),click:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({numberOfWindows:1});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),enabled:d},{label:e._({id:"2 previews in 2 windows"}),click:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({numberOfWindows:2});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),enabled:d},{label:e._({id:"3 previews in 3 windows"}),click:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({numberOfWindows:3});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),enabled:d},{label:e._({id:"4 previews in 4 windows"}),click:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({numberOfWindows:4});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),enabled:d}]},{type:"separator"}].concat((0,r.Z)(h.overridenPreviewLayoutName?[{type:"checkbox",label:h.overridenPreviewExternalLayoutName?e._({id:"Start all previews from external layout {0}",values:{0:h.overridenPreviewExternalLayoutName}}):e._({id:"Start all previews from scene {0}",values:{0:h.overridenPreviewLayoutName}}),checked:h.isPreviewOverriden,click:function(){return g({isPreviewOverriden:!h.isPreviewOverriden,overridenPreviewLayoutName:h.overridenPreviewLayoutName,overridenPreviewExternalLayoutName:h.overridenPreviewExternalLayoutName})}},{type:"separator"}]:[]),[{label:h.previewExternalLayoutName?e._({id:"Use this external layout inside this scene to start all previews"}):e._({id:"Use this scene to start all previews"}),click:function(){return g({isPreviewOverriden:!0,overridenPreviewLayoutName:h.previewLayoutName,overridenPreviewExternalLayoutName:h.previewExternalLayoutName})},enabled:h.previewLayoutName!==h.overridenPreviewLayoutName||h.previewExternalLayoutName!==h.overridenPreviewExternalLayoutName}]).filter(Boolean)}),[n,u,i,t,d,p,v.values.openDiagnosticReportAutomatically,l,h.overridenPreviewLayoutName,h.overridenPreviewExternalLayoutName,h.isPreviewOverriden,h.previewExternalLayoutName,h.previewLayoutName,g]),j=c.useCallback((function(){m()}),[m]);return(0,f.jsxs)(_.pJ,{noMargin:!0,children:[(0,f.jsx)(Os.Z,{primary:!0,onClick:p?s:t,disabled:!d,icon:p?(0,f.jsx)(Ke,{}):(0,f.jsx)(Xe,{}),label:b?null:p?(0,f.jsx)(w.Trans,{id:"Update"}):(0,f.jsx)(w.Trans,{id:"Preview"}),id:"toolbar-preview-button",splitMenuButtonId:"toolbar-preview-split-menu-button",buildMenuTemplate:C}),(0,f.jsx)(Rs,{primary:!0,onClick:j,disabled:!x,icon:(0,f.jsx)(As,{}),label:(0,f.jsx)(w.Trans,{id:"Share"}),id:"toolbar-publish-button"})]})})),Ds=Fs,Ns=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"-1 -1 18 18",fill:"none",children:[(0,f.jsx)("path",{d:"M0.833328 8C0.833328 4.04196 4.04195 0.833336 7.99999 0.833336C11.5931 0.833336 14.5678 3.47711 15.0866 6.92562C15.1277 7.19869 14.9396 7.45336 14.6666 7.49444C14.3935 7.53552 14.1388 7.34745 14.0978 7.07438C13.6515 4.10788 11.0909 1.83334 7.99999 1.83334C4.59424 1.83334 1.83333 4.59424 1.83333 8C1.83333 11.4057 4.59424 14.1667 7.99999 14.1667C10.2473 14.1667 12.2147 12.9645 13.2927 11.1667H11.3333C11.0572 11.1667 10.8333 10.9428 10.8333 10.6667C10.8333 10.3905 11.0572 10.1667 11.3333 10.1667H14.101C14.1084 10.1665 14.1159 10.1665 14.1234 10.1667H14.2667C14.7637 10.1667 15.1667 10.5696 15.1667 11.0667V14C15.1667 14.2761 14.9428 14.5 14.6667 14.5C14.3905 14.5 14.1667 14.2761 14.1667 14V11.6535C12.9182 13.7562 10.6243 15.1667 7.99999 15.1667C4.04195 15.1667 0.833328 11.958 0.833328 8Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.99999 3.5C8.27614 3.5 8.49999 3.72386 8.49999 4V7.5H12C12.2761 7.5 12.5 7.72386 12.5 8C12.5 8.27614 12.2761 8.5 12 8.5H7.99999C7.72385 8.5 7.49999 8.27614 7.49999 8V4C7.49999 3.72386 7.72385 3.5 7.99999 3.5Z",fill:"currentColor"})]}))})),_s=function(e,t){return"unsavedChanges"===t?e.statusIndicator.error:"saving"===t?e.statusIndicator.warning:"latest"===t?e.palette.secondary:"opened"===t?e.statusIndicator.warning:e.statusIndicator.success},Bs=n(95562),Us={chip:(0,l.Z)({display:"flex",alignItems:"center",padding:4,borderRadius:6,color:"#111111"},pr.t)},Vs=(0,ur.Z)((function(e){return(0,No.Z)({root:{borderRadius:3,"&:hover":{backdropFilter:"brightness(0.8)"},"&:disabled":{backdropFilter:"brightness(0.9)"}}})})),Hs=function(e){var t=e.openedVersionStatus,n=e.onQuit,r=e.disableQuitting,i=c.useContext(j.Z),a=Vs();return t?(0,f.jsx)(w.I18n,{children:function(e){var o=e.i18n;return(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},Us.chip),{},{backgroundColor:_s(i,t.status)}),children:[(0,f.jsx)(N.Z,{noMargin:!0,color:"inherit",children:"saving"===t.status?o._({id:"Saving..."}):(t.version.label?(0,Bs.S)(t.version.label,20):o.date(Date.parse(t.version.createdAt),{dateStyle:"medium",timeStyle:"short"}))+("unsavedChanges"===t.status?"*":"")}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(lt.Z,{classes:a,onClick:n,disabled:r,children:(0,f.jsx)(as.Z,{})})]})}}):null},zs=n(73612),Ws=n(22537),Gs=function(e){var t=e.getChangesCount,n=e.getTimeOfFirstChangeSinceLastSave,r=t(),i=n();if(0===r||!i)return"none";var a=Date.now();return r>200||a-i>12e5?"risky":a-i<3e5||r<=12?"small":r<=200?"significant":"risky"},Ys=function(e){var t=e.onSave,n=e.project,r=e.isInQuickCustomization,i=c.useContext(Z.Z),a=c.useContext(gi.Z).currentlyRunningInAppTutorial,o=c.useContext(D.ZP).values.displaySaveReminder,l=c.useState(!1),u=(0,s.Z)(l,2),d=u[0],p=u[1],h=c.useState(null),g=(0,s.Z)(h,2),m=g[0],x=g[1];(0,Ss.Y)((function(){var e=Gs(i);if(o.activated&&!r&&!a&&n){var t=Date.now(),s="risky"===e&&(!m||t-m>3e5);s!==d&&p(s)}else p(!1)}),n?5e3:null);var v=c.useCallback((function(){x(Date.now()),p(!1)}),[]),b=c.useCallback((function(){x(null),t()}),[t]);return c.useEffect((function(){n||(x(null),p(!1))}),[n]),c.useCallback((function(){return(0,f.jsx)(Ws.Z,{duration:-1,visible:d,message:(0,f.jsx)(w.Trans,{id:"You have unsaved changes in your project."}),hide:v,actionLabel:(0,f.jsx)(w.Trans,{id:"Save"}),onActionClick:b,closable:!0})}),[d,v,b])},qs=function(e){var t=c.useContext(Z.Z),n=Gs(t),r="none"!==n,i="small"===n?"neutral":"error";return(0,Ss.Y)((0,gt.Z)(),e.canSave?5e3:null),(0,f.jsx)($.Z,{size:"small",id:e.id,onClick:e.onSave,tooltip:{id:"Save project"},color:"default",disabled:!e.canSave,children:(0,f.jsx)(_o,{overlap:"circle",color:i,invisible:!r,children:(0,f.jsx)(zs.Z,{})})})},Js=c.memo((function(e){return(0,f.jsxs)(Ls.k,{firstChild:!0,children:[(0,f.jsx)($.Z,{size:"small",id:"toolbar-history-button",onClick:e.onOpenVersionHistory,tooltip:{id:"Open version history"},color:"default",children:(0,f.jsx)(Ns,{})}),(0,f.jsx)(qs,{id:"toolbar-save-button",onSave:e.onSave,canSave:e.canSave}),e.checkedOutVersionStatus&&(0,f.jsx)("div",{style:{marginRight:20},children:(0,f.jsx)(Hs,{onQuit:e.onQuitVersionHistory,disableQuitting:!e.canQuitVersionHistory,openedVersionStatus:e.checkedOutVersionStatus})})]})})),Xs=c.forwardRef((function(e,t){var n=c.useContext(j.Z),r=c.useState(null),i=(0,s.Z)(r,2),a=i[0],o=i[1];c.useImperativeHandle(t,(function(){return{setEditorToolbar:o}}));var l=c.useMemo((function(){return e.checkedOutVersionStatus?_s(n,e.checkedOutVersionStatus.status):null}),[e.checkedOutVersionStatus,n]);return(0,f.jsxs)(Ls.o,{borderBottomColor:l,hidden:e.hidden,children:[e.showProjectButtons?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Js,{onSave:e.onSave,canSave:e.canSave,onOpenVersionHistory:e.onOpenVersionHistory,checkedOutVersionStatus:e.checkedOutVersionStatus,onQuitVersionHistory:e.onQuitVersionHistory,canQuitVersionHistory:e.canQuitVersionHistory}),(0,f.jsxs)(Ls.k,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(Ds,{onPreviewWithoutHotReload:e.onPreviewWithoutHotReload,onOpenDebugger:e.onOpenDebugger,onNetworkPreview:e.onNetworkPreview,onHotReloadPreview:e.onHotReloadPreview,onLaunchPreviewWithDiagnosticReport:e.onLaunchPreviewWithDiagnosticReport,setPreviewOverride:e.setPreviewOverride,canDoNetworkPreview:e.canDoNetworkPreview,isPreviewEnabled:e.isPreviewEnabled,previewState:e.previewState,hasPreviewsRunning:e.hasPreviewsRunning,openShareDialog:e.openShareDialog,isSharingEnabled:e.isSharingEnabled}),(0,f.jsx)(M.LZ,{})]})]}):null,a||(0,f.jsx)(Ls.k,{})]})})),Ks=n(59788),Qs=(0,We.Z)((function e(t){var n=this;(0,ze.Z)(this,e),this.setActive=function(e){n._isActive=e},this.registerCommand=function(e,t){n._commands[e]=t,n._isActive&&n._centralManager.registerCommand(e,t)},this.deregisterCommand=function(e){delete n._commands[e],n._isActive&&n._centralManager.deregisterCommand(e)},this.registerAllCommandsToCentralManager=function(){Object.keys(n._commands).forEach((function(e){n._centralManager.registerCommand(e,n._commands[e])}))},this.deregisterAllCommandsFromCentralManager=function(){Object.keys(n._commands).forEach((function(e){n._centralManager.deregisterCommand(e)}))},this.getAllNamedCommands=function(){return Object.keys(n._commands).map((function(e){var t=n._commands[e];return(0,l.Z)((0,l.Z)({},t),{},{name:e})}))},this.getNamedCommand=function(e){var t=n._commands[e];return t?(0,l.Z)({name:e},t):n._centralManager.getNamedCommand(e)},this._commands={},this._isActive=!1,this._centralManager=t})),$s=function(e){var t=c.useContext(Ks.Z),n=(0,jn.Z)((function(){return new Qs(t)}));return c.useEffect((function(){if(e.active)return n.setActive(!0),n.registerAllCommandsToCentralManager(),function(){n.setActive(!1),n.deregisterAllCommandsFromCentralManager()}}),[e.active,n]),(0,f.jsx)(Ks.Z.Provider,{value:n,children:e.children})},el=n(7624),tl=n.n(el),nl=n(97326),rl=n(97230),il=n(50394),al=n.n(il),ol=function(e){return e.selectedEvents.map((function(e){return e.event}))},sl=function(e){return e.selectedEvents.length?e.selectedEvents[e.selectedEvents.length-1]:null},ll=function(e){var t=e.selectedEvents.filter((function(e){return e.event.canHaveSubEvents()}));return t.length?t[t.length-1]:null},cl=function(e){var t=e.selectedEvents.filter((function(e){return e.event.canHaveVariables()}));return t.length?t[t.length-1]:null},ul=function(e){var t=al()(e.selectedEvents);return t.filter((function(e){return!t.some((function(t){return t!==e&&(!!t.event.canHaveSubEvents()&&t.event.getSubEvents().contains(e.event,!0))}))}))},dl=function(e){var t=ul(e);return t.length?t[t.length-1]:null},pl=function(e){return e.selectedInstructions.map((function(e){return e.instruction}))},fl=function(e){return e.selectedInstructions.map((function(e){return e.eventContext.event}))},hl=function(e){return e.selectedInstructions},gl=function(e){return e.selectedInstructions[e.selectedInstructions.length-1]||null},ml=function(e){var t=e.selectedInstructions.filter((function(e){return e.eventContext.event.canHaveSubEvents()}));return t.length?t[t.length-1].eventContext:null},xl=function(e){var t=e.selectedInstructions.filter((function(e){return e.eventContext.event.canHaveVariables()}));return t.length?t[t.length-1].eventContext:null},vl=function(e,t){return e.selectedEvents.some((function(e){return e.event.ptr===t.ptr}))},bl=function(e,t){return e.selectedInstructions.some((function(e){return e.instruction.ptr===t.ptr}))},Cl=function(e){return!!e.selectedEvents.length},jl=function(e){return!!e.selectedInstructions.length},yl=function(e){return!!e.selectedInstructionsLists.length},Zl=function(e){return jl(e)||yl(e)||Cl(e)},kl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.event;if(vl(e,i))return e;var a=n?e:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return(0,l.Z)((0,l.Z)({},a),{},{selectedEvents:[].concat((0,r.Z)(a.selectedEvents),[t])})},wl=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.instruction;if(bl(t,a))return t;var o=i?t:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return(0,l.Z)((0,l.Z)({},o),{},{selectedInstructions:[].concat((0,r.Z)(o.selectedInstructions),[(0,l.Z)((0,l.Z)({},n),{},{eventContext:e})])})},Tl=function(e){var t={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};return e.forEach((function(e){t.selectedEvents.push(e)})),t},Sl=n(23895),Pl=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e;return(0,f.jsx)("p",{className:en()((e={},(0,Qt.Z)(e,Sl.Pm,!0),(0,Qt.Z)(e,Sl.aw,this.props.selected),e)),children:"Unknown event of type "+this.props.event.getType()})}}]),n}(c.Component);function Il(e){var t=e.canDrop;return(0,f.jsx)("div",{className:t?Sl.pf:Sl.Qk})}var El=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,a=i?i.getDescription():void 0;return(0,f.jsx)(yn.Z,{margin:e.isInline?"none":"dense",commitOnBlur:!0,value:e.value,floatingLabelText:a,helperMarkdownText:i?i.getLongDescription():void 0,onChange:function(t){return e.onChange(t)},ref:n,fullWidth:!0})})),Ml={"=":{id:"= (equal to)"},"<":{id:"< (less than)"},">":{id:"> (greater than)"},"<=":{id:"\u2264 (less or equal to)"},">=":{id:"\u2265 (greater or equal to)"},"!=":{id:"\u2260 (not equal to)"},startsWith:{id:"starts with"},endsWith:{id:"ends with"},contains:{id:"contains"}},Ll={unknown:Object.keys(Ml),number:["=","<",">","<=",">=","!="],time:["<",">","<=",">="],string:["=","!=","startsWith","endsWith","contains"],color:["=","!="]},Al={number:"=",time:">=",string:"=",color:"="},Ol=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,a=i?i.getDescription():void 0,o=i?i.getExtraInfo():"unknown",s=Ll[o]||Ll.unknown;if(!e.value){var l=Al[o];l&&e.onChange(l)}return(0,f.jsx)(Hn.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:a,helperMarkdownText:i?i.getLongDescription():void 0,value:e.value,onChange:function(t,n,r){return e.onChange(r)},ref:n,translatableHintText:{id:"Choose an operator"},children:s.map((function(e){return(0,f.jsx)(P.Z,{value:e,label:Ml[e]},e)}))})})),Rl={"=":{id:"= (set to)"},"+":{id:"+ (add)"},"-":{id:"- (subtract)"},"*":{id:"* (multiply by)"},"/":{id:"/ (divide by)"},True:{id:"set to true"},False:{id:"set to false"},Toggle:{id:"toggle"}},Fl={unknown:Object.keys(Rl),number:["=","+","-","*","/"],string:["=","+"],color:["=","+"],boolean:["True","False","Toggle"]},Dl=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,a=e.value,o=e.onChange,s=i?i.getDescription():void 0,l=i?i.getExtraInfo():"unknown",u=Fl[l]||Fl.unknown;return c.useEffect((function(){"unknown"===l||a||o(u[0])}),[a,o,l,u]),(0,f.jsx)(Hn.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:s,helperMarkdownText:i?i.getLongDescription():void 0,value:u.includes(a)?a:"",onChange:function(e,t,n){return o(n)},ref:n,translatableHintText:{id:"Choose an operator"},id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-operator-field"):void 0,children:u.map((function(e){return(0,f.jsx)(P.Z,{value:e,label:Rl[e]},e)}))})})),Nl=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,a=e.value,o=i?i.getDescription():void 0;return(0,f.jsxs)(Hn.Z,{margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:o,helperMarkdownText:i?i.getLongDescription():void 0,value:a,ref:n,onChange:function(t,n,r){return e.onChange(r)},translatableHintText:{id:"Choose a mouse button"},children:[(0,f.jsx)(P.Z,{value:"Left",label:{id:"Left (primary)"}}),(0,f.jsx)(P.Z,{value:"Right",label:{id:"Right (secondary)"}}),(0,f.jsx)(P.Z,{value:"Middle",label:{id:"Middle (Auxiliary button, usually the wheel button)"}}),(0,f.jsx)(P.Z,{value:"Back",label:{id:"Back (Additional button, typically the Browser Back button)"}}),(0,f.jsx)(P.Z,{value:"Forward",label:{id:"Forward (Additional button, typically the Browser Forward button)"}})]})})),_l=n(35901),Bl=n(20968),Ul=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:[(0,f.jsx)("path",{d:"M2.70396 4.03697C3.04778 3.69315 3.5141 3.5 4.00033 3.5H13.3337C13.8199 3.5 14.2862 3.69315 14.63 4.03697C14.9738 4.38079 15.167 4.8471 15.167 5.33333V8.66667C15.167 8.94281 14.9431 9.16667 14.667 9.16667C14.3909 9.16667 14.167 8.94281 14.167 8.66667V5.33333C14.167 5.11232 14.0792 4.90036 13.9229 4.74408C13.7666 4.5878 13.5547 4.5 13.3337 4.5H4.00033C3.77931 4.5 3.56735 4.5878 3.41107 4.74408C3.25479 4.90036 3.16699 5.11232 3.16699 5.33333V9.33333C3.16699 9.55435 3.25479 9.76631 3.41107 9.92259C3.56735 10.0789 3.77931 10.1667 4.00033 10.1667H8.66699C8.94313 10.1667 9.16699 10.3905 9.16699 10.6667C9.16699 10.9428 8.94313 11.1667 8.66699 11.1667H4.00033C3.5141 11.1667 3.04778 10.9735 2.70396 10.6297C2.36015 10.2859 2.16699 9.81956 2.16699 9.33333V5.33333C2.16699 4.8471 2.36015 4.38079 2.70396 4.03697Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M6.34333 6.96269C6.54766 7.14844 6.56272 7.46466 6.37697 7.669L6.3703 7.67633C6.18455 7.88066 5.86833 7.89573 5.664 7.70998C5.45967 7.52423 5.4446 7.208 5.63035 7.00367L5.63702 6.99634C5.82277 6.792 6.13899 6.77694 6.34333 6.96269Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M9.00999 6.96269C9.21433 7.14844 9.22939 7.46466 9.04364 7.669L9.03697 7.67633C8.85122 7.88066 8.535 7.89573 8.33067 7.70998C8.12633 7.52423 8.11127 7.208 8.29702 7.00367L8.30369 6.99634C8.48944 6.792 8.80566 6.77694 9.00999 6.96269Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M11.6767 6.96269C11.881 7.14844 11.8961 7.46466 11.7103 7.669L11.7036 7.67633C11.5179 7.88066 11.2017 7.89573 10.9973 7.70998C10.793 7.52423 10.7779 7.208 10.9637 7.00367L10.9704 6.99634C11.1561 6.792 11.4723 6.77694 11.6767 6.96269Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9266 8.8887C11.7927 8.81037 11.6396 8.77063 11.4842 8.7742C11.3288 8.77777 11.1781 8.82444 11.0483 8.90799C10.9185 8.99148 10.8146 9.10851 10.7465 9.24564C10.6785 9.38273 10.6484 9.53559 10.6593 9.68809L10.6617 9.72044L11.5142 13.9045C11.6008 14.6744 12.6114 14.9468 13.0556 14.2738L13.8563 13.0609L15.2702 12.8494C16.0593 12.7315 16.2578 11.6868 15.5859 11.2793L11.9373 8.89497L11.9266 8.8887ZM14.7357 11.9183L11.7298 9.95395L12.4324 13.4026L13.2674 12.1378L14.7357 11.9183Z",fill:"currentColor"})]}))})),Vl=[{value:"Left",label:{id:"Left (primary)"}},{value:"Right",label:{id:"Right (secondary)"}},{value:"Middle",label:{id:"Middle (Auxiliary button, usually the wheel button)"}},{value:"Back",label:{id:"Back (Additional button, typically the Browser Back button)"}},{value:"Forward",label:{id:"Forward (Additional button, typically the Browser Forward button)"}}],Hl=new Set(Vl.map((function(e){return e.value}))),zl=/^"(\w*)"$/,Wl=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=c.useState(!!e.value&&!function(e){var t=e.match(zl);return!(!t||void 0===t[1])&&Hl.has(t[1])}(e.value)),a=(0,s.Z)(i,2),o=a[0],u=a[1],d=function(){u(!o)},p=function(t,n){e.onChange(t.target.value)},h=function(t){e.onChange(t)},g=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,m=Vl.map((function(e){var t=e.value,n=e.label;return(0,f.jsx)(P.Z,{value:'"'.concat(t,'"'),label:n},t)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return o?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-mouse-button-field"):void 0,expressionType:"string"},e),{},{onChange:h})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-mouse-button-field"):void 0,value:e.value,onChange:p,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:g,translatableHintText:{id:"Choose a mouse button"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:m})},renderButton:function(e){return o?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:d}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:d})}})})),Gl=n(50326),Yl=function(e){return-1!==Gl.J.indexOf(e)},ql=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.value,a=e.onChange,o=e.isInline,s=e.parameterMetadata,l=e.onRequestClose,u=e.onApply;return(0,f.jsx)(dr.ZP,{margin:e.isInline?"none":"dense",floatingLabelText:s?s.getDescription():void 0,helperMarkdownText:s?s.getLongDescription():void 0,fullWidth:!0,value:i,onChange:a,dataSource:Gl.J.map((function(e){return{text:e,value:e}})),openOnFocus:!o,onRequestClose:l,onApply:u,ref:n,errorText:i?Yl(i)?void 0:(0,f.jsx)(w.Trans,{id:'You must select a valid key. "{value}" is not valid.',values:{value:i}}):(0,f.jsx)(w.Trans,{id:"You must select a key."})})})),Jl=new Set(Gl.J),Xl=/^"(\w*)"$/,Kl=/^\w*$/,Ql=function(e){var t=e.match(Xl);return!(!t||void 0===t[1])&&Jl.has(t[1])},$l=function(e){var t=e.match(Xl);return t&&void 0!==t[1]?t[1]:e},ec=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=c.useState(!!e.value&&!Ql(e.value)),a=(0,s.Z)(i,2),o=a[0],u=a[1],d=function(){u(!o)},p=function(t){e.onChange(Kl.test(t)?'"'.concat(t,'"'):t)},h=function(t){e.onChange(t)},g=e.parameterMetadata?e.parameterMetadata.getDescription():void 0;return(0,f.jsx)(_.ad,{renderTextField:function(){return o?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-key-field"):void 0,expressionType:"string"},e),{},{onChange:h})):(0,f.jsx)(dr.ZP,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-key-field"):void 0,value:$l(e.value),onChange:p,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:g,helperMarkdownText:e.parameterMetadata?e.parameterMetadata.getLongDescription():void 0,dataSource:Gl.J.map((function(e){return{text:e,value:e}})),openOnFocus:!e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,errorText:e.value?Ql(e.value)?void 0:(0,f.jsx)(w.Trans,{id:'You must select a valid key. "{0}" is not valid.',values:{0:e.value}}):(0,f.jsx)(w.Trans,{id:"You must select a key."})})},renderButton:function(e){return o?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:d}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:d})}})})),tc=n(23816),nc=n(74044),rc=n(29571),ic=["value","onChange","onChoose","project","projectScopedContainersAccessor","allowedObjectType","noGroups","errorTextIfInvalid","margin","onRequestClose","onApply","id","excludedObjectOrGroupNames","hintText","requiredCapabilitiesBehaviorTypes","requiredVisibleBehaviorTypes","disabled"],ac=n.g.gd,oc=function(e){var t=e.objectsContainersList,n=e.requiredBehaviorTypes,r=e.objectName;return n&&0!==n.length&&t.hasObjectOrGroupNamed(r)?n.filter((function(e){return 0===t.getBehaviorNamesInObjectOrGroup(r,e,!0).size()})):[]},sc=c.forwardRef((function(e,t){var n=c.useRef(null),i=function(e){n.current&&n.current.focus(e)},a=(0,hi.bX)();c.useImperativeHandle(t,(function(){return{focus:i}}));var o=e.value,s=e.onChange,u=e.onChoose,d=e.project,p=e.projectScopedContainersAccessor,h=e.allowedObjectType,g=e.noGroups,m=e.errorTextIfInvalid,x=e.margin,v=e.onRequestClose,b=e.onApply,C=e.id,j=e.excludedObjectOrGroupNames,y=e.hintText,Z=e.requiredCapabilitiesBehaviorTypes,k=e.requiredVisibleBehaviorTypes,T=e.disabled,S=(0,go.Z)(e,ic),I=p.get().getObjectsContainersList(),E=function(e){var t=e.project,n=e.objectsContainersList,i=e.noGroups,a=e.allowedObjectType,o=e.requiredCapabilitiesBehaviorTypes,s=e.excludedObjectOrGroupNames,l=(0,tc.hU)(n,a||void 0,o||[]),c=l.allObjectsList,u=l.allGroupsList,d=c.map((function(e){var n=e.object;return{text:n.getName(),value:n.getName(),renderIcon:t?function(){return(0,f.jsx)(nc.Z,{iconSize:24,src:rc.Z.getThumbnail(t,n.getConfiguration())})}:void 0}})),p=i?[]:u.map((function(e){var t=e.group;return{text:t.getName(),value:t.getName()}})),h=0===p.length?d:[].concat((0,r.Z)(d),[{type:"separator"}],(0,r.Z)(p));return s?h.filter((function(e){var t=e.value;return!s.includes(t)})):h}({project:d,objectsContainersList:I,noGroups:g,allowedObjectType:h,requiredCapabilitiesBehaviorTypes:Z,excludedObjectOrGroupNames:j}),M=0!==E.filter((function(e){return void 0!==e.text&&o===e.text})).length,L=function(e){var t=e.objectsContainersList,n=e.requiredBehaviorTypes,r=e.objectName;return 0===oc({objectsContainersList:t,requiredBehaviorTypes:n,objectName:r}).length}({objectsContainersList:I,objectName:o,requiredBehaviorTypes:Z}),A=oc({objectsContainersList:I,objectName:o,requiredBehaviorTypes:k}),O=L?A.length>0?(0,f.jsx)(w.Trans,{id:"This object misses some behaviors: {0}",values:{0:A.map((function(e){return ac.MetadataProvider.getBehaviorMetadata(ac.JsPlatform.get(),e).getFullName()||e})).join(", ")}}):M?void 0:m:(0,f.jsx)(w.Trans,{id:"This object exists, but can't be used here."});return T?null:a?(0,f.jsx)(dr.ZP,(0,l.Z)({margin:x,hintText:y||{id:"Choose an object"},value:o,onChange:s,onChoose:u,onRequestClose:v,onApply:b,dataSource:E,errorText:O,ref:n,id:C},S)):(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(Hn.Z,{margin:x,value:o,onChange:function(e,t,n){s(n),u&&u(n),b&&b()},translatableHintText:y||{id:"Choose an object"},style:{flex:S.fullWidth?1:void 0},errorText:O,helperMarkdownText:S.helperMarkdownText,floatingLabelText:S.floatingLabelText,id:C,children:E.map((function(e,n){return"separator"===e.type?(0,f.jsx)("optgroup",{label:t._({id:"Groups"})},"group-divider"):(0,f.jsx)(P.Z,{label:e.value,value:e.value,shouldNotTranslate:!0},e.value)}))})}})})),lc=n.g.gd,cc=function(e,t,n,r){for(var i=[],a=n+1;a<t.getParametersCount();a++){var o=t.getParameter(a);if("behavior"!==o.getType())break;var s=o.getExtraInfo();if(0!==s.length){var l=lc.MetadataProvider.getBehaviorMetadata(e,s);null!==r&&l.isHidden()!==r||i.push(s)}}return i},uc=c.forwardRef((function(e,t){var n=c.useContext(gi.Z).currentlyRunningInAppTutorial,r=c.useRef(null),i=function(e){r.current&&!n&&r.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:i}}));var a=e.project,o=e.parameterMetadata,s=e.parameterIndex,l=e.instructionMetadata,u=e.expressionMetadata,d=e.instruction,p=e.projectScopedContainersAccessor,h=o?o.getDescription():void 0,g=o?o.getLongDescription():void 0,m=o?o.getExtraInfo():void 0,x=c.useMemo((function(){var e=l||u;return a&&e&&void 0!==s?function(e,t,n){return cc(e,t,n,!0)}(a.getCurrentPlatform(),e,s):[]}),[u,l,s,a]),v=c.useMemo((function(){var e=l||u;return a&&e&&void 0!==s?function(e,t,n){return cc(e,t,n,!1)}(a.getCurrentPlatform(),e,s):[]}),[u,l,s,a]),b=c.useCallback((function(t){e.onChange(t),a&&l&&d&&lc.BehaviorParameterFiller.fillBehaviorParameters(a.getCurrentPlatform(),p.get(),l,d)}),[a,p,l,d,e]);return(0,f.jsx)(sc,{margin:e.isInline?"none":"dense",project:a,value:e.value,onChange:b,onRequestClose:e.onRequestClose,onApply:e.onApply,allowedObjectType:m,requiredCapabilitiesBehaviorTypes:x,requiredVisibleBehaviorTypes:v,projectScopedContainersAccessor:p,floatingLabelText:h,helperMarkdownText:g,id:void 0!==s?"parameter-".concat(s,"-object-selector"):void 0,fullWidth:!0,errorTextIfInvalid:m||x.length>0?(0,f.jsx)(w.Trans,{id:"The object does not exist or can't be used here."}):(0,f.jsx)(w.Trans,{id:"Enter the name of an object."}),openOnFocus:!e.value,ref:r})})),dc=function(e,t){return e||(t&&t.isOptional()?t.getDefaultValue():"")},pc=n(66733),fc=n(78265),hc={description:{marginRight:5}},gc=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focusLeftButton()};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,a=e.value,o=i?i.getDescription():null,s=i?i.getLongDescription():null,l=dc(a,i);return(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(M.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{style:hc.description,displayInlineAsSpan:!0,children:o}),(0,f.jsx)(fc.Z,{value:l,leftButton:{label:(0,f.jsx)(w.Trans,{id:"Yes"}),value:"yes",id:"yes-button"},rightButton:{label:(0,f.jsx)(w.Trans,{id:"No"}),value:"no",id:"no-button"},onChange:e.onChange,ref:n})]}),s?(0,f.jsx)(pc.Z,{variant:"filled",margin:"dense",children:(0,f.jsx)(Re.r,{source:s})}):null]})})),mc={description:{marginRight:5}},xc=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focusLeftButton()};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,a=e.value,o=i?i.getDescription():void 0,s=i?i.getLongDescription():null,l=dc(a,i);return(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(M.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{style:mc.description,displayInlineAsSpan:!0,children:o}),(0,f.jsx)(fc.Z,{value:l,leftButton:{label:(0,f.jsx)(w.Trans,{id:"True"}),value:"True"},rightButton:{label:(0,f.jsx)(w.Trans,{id:"False"}),value:"False"},onChange:e.onChange,ref:n})]}),s?(0,f.jsx)(pc.Z,{variant:"filled",margin:"dense",children:(0,f.jsx)(Re.r,{source:s})}):null]})})),vc=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),(0,f.jsx)(_l.Z,(0,l.Z)({expressionType:"number",ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-expression-field"):void 0},e))})),bc=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({expressionType:"string",ref:n},e),{},{id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-string-field"):void 0}))})),Cc=n(49714),jc=c.forwardRef((function(e,t){var n=e.value,r=e.onChange,i=e.parameterIndex,a=e.parameterMetadata,o=e.isInline,u=c.useRef(null),d=function(e){u.current&&u.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:d}}));var p=(0,Cc.j2)(a),h=p.some((function(e){return'"'.concat(e,'"')===n})),g=c.useState(!!n&&!h),m=(0,s.Z)(g,2),x=m[0],v=m[1];c.useEffect((function(){!x&&!n&&p.length>0&&r('"'.concat(p[0],'"'))}),[p,x,r,n]);var b=function(){v(!x)},C=function(e,t){r(e.target.value)},j=a?a.getDescription():void 0,y=p.map((function(e){return(0,f.jsx)(P.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return x?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({expressionType:"string",ref:u,id:void 0!==i?"parameter-".concat(i,"-string-with-selector"):void 0},e),{},{onChange:r})):(0,f.jsx)(Hn.Z,{ref:u,id:void 0!==i?"parameter-".concat(i,"-string-with-selector"):void 0,value:n,onChange:C,margin:o?"none":"dense",fullWidth:!0,floatingLabelText:j,translatableHintText:{id:"Choose a value"},helperMarkdownText:a&&a.getLongDescription()||null,children:y})},renderButton:function(e){return x?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:b}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:b})}})})),yc=n.g.gd,Zc=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,a=c.useState(null),o=(0,s.Z)(a,2),l=o[0],u=o[1],d=c.useState([]),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=i?i.getDescription():void 0,x=i?i.getLongDescription():void 0,v=i?i.getExtraInfo():"",b=c.useCallback((function(){var t=e.instructionMetadata,n=e.instruction,r=e.expressionMetadata,i=e.expression,a=e.parameterIndex,o=e.projectScopedContainersAccessor,s=(0,Cc.c6)({instructionMetadata:t,instruction:n,expressionMetadata:r,expression:i,parameterIndex:a});if(s){var l=function(e,t,n){var r=e.get().getObjectsContainersList();return n?r.getBehaviorNamesInObjectOrGroup(t,n,!0).toJSArray():r.getBehaviorsOfObject(t,!0).toJSArray().filter((function(e){return!r.isDefaultBehavior(t,e,!0)}))}(o,s,v);g(l),!v&&e.value&&0===l.length&&e.onChange("")}}),[e,v]),C=function(t){u(function(t){return t||e.value?0!==h.filter((function(t){return e.value===t})).length?null:"This behavior is not attached to the object":null}(t))},j=c.useCallback((function(){1===h.length&&e.value!==h[0]&&e.onChange(h[0])}),[h,e]);c.useEffect((function(){j()}),[j]),c.useEffect((function(){b()}),[b]);var y=v?(0,f.jsx)(w.Trans,{id:"The behavior is not attached to this object. Please select another object or add this behavior: {0}",values:{0:yc.MetadataProvider.getBehaviorMetadata(yc.JsPlatform.get(),v).getFullName()||v}}):(0,f.jsx)(w.Trans,{id:"This object has no behaviors: please add a behavior to the object first."});return(0,f.jsx)(dr.ZP,{margin:e.isInline?"none":"dense",floatingLabelText:m,helperMarkdownText:x,fullWidth:!0,errorText:h.length?l:y,value:e.value,onChange:e.onChange,onRequestClose:e.onRequestClose,onApply:e.onApply,onBlur:function(e){C(e.currentTarget.value)},dataSource:h.map((function(e){return{text:e,value:e}})),openOnFocus:!e.isInline,disabled:h.length<=1,ref:n})})),kc=function(e){var t=e.projectScopedContainersAccessor,n=e.open,r=e.onCancel,i=e.onApply,a=e.hotReloadPreviewButtonProps,o=e.isGlobalTabInitiallyOpen,s=e.initiallySelectedVariableName,l=e.shouldCreateInitiallySelectedVariable,u=e.isListLocked,d=t.getScope(),p=d.project,h=d.layout,g=d.eventsFunctionsExtension,m=null,x=null;h?(m=p.getVariables(),x=h.getVariables()):g&&(m=g.getGlobalVariables(),x=g.getSceneVariables());var v=c.useCallback((function(){return h?_n.findAllLayoutVariables(p.getCurrentPlatform(),p,h):[]}),[h,p]),b=c.useCallback((function(){return h?_n.findAllGlobalVariables(p.getCurrentPlatform(),p):[]}),[h,p]),C=c.useMemo((function(){return[x&&{id:"scene-variables",label:(0,f.jsx)(w.Trans,{id:"Scene variables"}),variablesContainer:x,emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first scene variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"These variables hold additional information on a scene."}),onComputeAllVariableNames:v},m&&{id:"global-variables",label:(0,f.jsx)(w.Trans,{id:"Global variables"}),variablesContainer:m,emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first global variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"These variables hold additional information on a project."}),onComputeAllVariableNames:b}].filter(Boolean)}),[x,b,v,m]);return(0,f.jsx)(Fn,{projectScopedContainersAccessor:t,project:p,open:n,onCancel:r,onApply:i,title:h?(0,f.jsx)(w.Trans,{id:"{0} variables",values:{0:h.getName()}}):(0,f.jsx)(w.Trans,{id:"Extension variables"}),tabs:C,initiallyOpenTabId:o?"global-variables":"scene-variables",initiallySelectedVariableName:s,shouldCreateInitiallySelectedVariable:l,helpPagePath:"/all-features/variables/scene-variables",hotReloadPreviewButtonProps:a,id:"global-and-scene-variables-dialog",isListLocked:u})},wc=n(10952),Tc=n.n(wc),Sc=n(51029),Pc=n.n(Sc),Ic=n(29118),Ec=n.n(Ic),Mc=n(49315),Lc=n.n(Mc),Ac=n(90612),Oc=n.n(Ac),Rc=n.g.gd,Fc=function(e){for(var t=0;t<e.length;++t)if(-1!==",.\"()[]{}()[],+-<>?^=:!+-/* '".indexOf(e[t]))return!1;return!0},Dc=[function(e){return e.name.toLowerCase()}],Nc=function(e,t){return e?Lc()(Ec()(Tc()(Oc()((0,mt.mapFor)(0,e.getVariablesContainersCount(),(function(n){var r=e.getVariablesContainer(n);return t.includes(r.getSourceType())?[]:_c(r)})))),"name"),Dc):[]},_c=function(e){if(!e)return[];var t=function e(t,n,i,a,o){var s=a?Fc(n):o,l=i.getType(),c={name:n,isValidName:s,type:l,source:t};return l===Rc.Variable.Structure?[c].concat((0,r.Z)(Pc()(i.getAllChildrenNames().toJSArray(),(function(r){return e(t,Fc(r)?"".concat(n,".").concat(r):"".concat(n,"[").concat('"'+r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"',"]"),i.getChild(r),!1,s)})))):l===Rc.Variable.Array?[c].concat((0,r.Z)(Pc()(new Array(i.getChildrenCount()).fill(""),(function(r,a){return e(t,"".concat(n,"[").concat(a,"]"),i.getAtIndex(a),!1,s)})))):[c]};return Tc()((0,mt.mapFor)(0,e.count(),(function(n){return t(e.getSourceType(),e.getNameAt(n),e.getAt(n),!0,!0)})))},Bc=n.g.gd,Uc=c.forwardRef((function(e,t){var n=c.useRef(null),r=c.useState(null),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:l}}));var u=e.project,d=e.scope,p=e.instruction,h=e.onInstructionTypeChanged,g=e.projectScopedContainersAccessor,m=e.onChange,x=e.value,v=d.layout,b=c.useCallback((function(){return e=g.get().getVariablesContainersList(),Nc(e,[Rc.VariablesContainer.Parameters,Rc.VariablesContainer.Properties]);var e}),[g]),C=c.useMemo((function(){var e=g.get().getVariablesContainersList();return(0,mt.mapFor)(0,e.getVariablesContainersCount(),(function(t){return e.getVariablesContainer(t)})).filter((function(e){return e.getSourceType()!==Bc.VariablesContainer.Parameters&&e.getSourceType()!==Bc.VariablesContainer.Properties}))}),[g]),j=c.useCallback((function(e){e&&e.startsWith(x)&&m(e),o(null),h&&h(),n.current&&n.current.updateAutocompletions()}),[m,h,x]),y=!(!v||!u||v.getVariables().has((0,On.mz)(e.value))||!u.getVariables().has((0,On.mz)(e.value)));return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(On.ZP,{forceDeclaration:!0,project:u,instruction:p,isObjectVariable:!1,variablesContainers:C,enumerateVariables:b,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:o,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:g,scope:d,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-variable-field"):void 0,onInstructionTypeChanged:h,getVariableSourceFromIdentifier:Vc}),a&&(0,f.jsx)(kc,{projectScopedContainersAccessor:g,open:!0,onCancel:function(){return o(null)},onApply:j,isGlobalTabInitiallyOpen:y,initiallySelectedVariableName:a.variableName,shouldCreateInitiallySelectedVariable:a.shouldCreate,hotReloadPreviewButtonProps:null,isListLocked:!1})]})})),Vc=function(e,t){var n=(0,On.mz)(e),r=t.getVariablesContainersList();return r.has(n)?r.getVariablesContainerFromVariableNameOnly(n).getSourceType():Bc.VariablesContainer.Unknown},Hc=n.g.gd,zc=c.forwardRef((function(e,t){var n=c.useRef(null),r=c.useState(null),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:l}}));var u=e.project,d=e.scope,p=e.instruction,h=e.onInstructionTypeChanged,g=e.projectScopedContainersAccessor,m=e.onChange,x=e.value,v=d.layout,b=c.useCallback((function(){return e=g.get().getVariablesContainersList(),Nc(e,[Rc.VariablesContainer.Parameters]);var e}),[g]),C=c.useMemo((function(){var e=g.get().getVariablesContainersList();return(0,mt.mapFor)(0,e.getVariablesContainersCount(),(function(t){return e.getVariablesContainer(t)})).filter((function(e){return e.getSourceType()!==Hc.VariablesContainer.Parameters}))}),[g]),j=c.useCallback((function(e){e&&e.startsWith(x)&&m(e),o(null),h&&h(),n.current&&n.current.updateAutocompletions()}),[m,h,x]),y=!(!v||!u||v.getVariables().has((0,On.mz)(e.value))||!u.getVariables().has((0,On.mz)(e.value)));return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(On.ZP,{forceDeclaration:!0,project:u,instruction:p,isObjectVariable:!1,variablesContainers:C,enumerateVariables:b,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:o,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:g,scope:d,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-variable-field"):void 0,onInstructionTypeChanged:h,getVariableSourceFromIdentifier:Wc}),a&&(0,f.jsx)(kc,{projectScopedContainersAccessor:g,open:!0,onCancel:function(){return o(null)},onApply:j,isGlobalTabInitiallyOpen:y,initiallySelectedVariableName:a.variableName,shouldCreateInitiallySelectedVariable:a.shouldCreate,hotReloadPreviewButtonProps:null,isListLocked:!1})]})})),Wc=function(e,t){var n=(0,On.mz)(e),r=t.getVariablesContainersList();return r.has(n)?r.getVariablesContainerFromVariableOrPropertyName(n).getSourceType():Hc.VariablesContainer.Unknown},Gc=n.g.gd,Yc=c.forwardRef((function(e,t){var n=c.useRef(null),r=c.useState(null),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:l}}));var u=e.project,d=e.scope,p=e.instruction,h=e.onInstructionTypeChanged,g=e.projectScopedContainersAccessor,m=e.onChange,x=e.value,v=d.layout,b=c.useCallback((function(){return e=g.get().getVariablesContainersList(),Nc(e,[]);var e}),[g]),C=c.useMemo((function(){var e=g.get().getVariablesContainersList();return(0,mt.mapFor)(0,e.getVariablesContainersCount(),(function(t){return e.getVariablesContainer(t)}))}),[g]),j=c.useCallback((function(e){e&&e.startsWith(x)&&m(e),o(null),h&&h(),n.current&&n.current.updateAutocompletions()}),[m,h,x]),y=!(!v||!u||v.getVariables().has((0,On.mz)(e.value))||!u.getVariables().has((0,On.mz)(e.value)));return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(On.ZP,{forceDeclaration:!0,project:u,instruction:p,isObjectVariable:!1,variablesContainers:C,enumerateVariables:b,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:o,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:g,scope:d,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-variable-field"):void 0,onInstructionTypeChanged:h,getVariableSourceFromIdentifier:qc}),a&&(0,f.jsx)(kc,{projectScopedContainersAccessor:g,open:!0,onCancel:function(){return o(null)},onApply:j,isGlobalTabInitiallyOpen:y,initiallySelectedVariableName:a.variableName,shouldCreateInitiallySelectedVariable:a.shouldCreate,hotReloadPreviewButtonProps:null,isListLocked:!1})]})})),qc=function(e,t){var n=(0,On.mz)(e),r=t.getVariablesContainersList();return r.has(n)?r.getVariablesContainerFromVariableOrPropertyOrParameterName(n).getSourceType():Gc.VariablesContainer.Unknown},Jc=n.g.gd,Xc=c.forwardRef((function(e,t){var n=c.useRef(null),r=c.useState(null),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:l}}));var u=e.project,d=e.scope,p=e.projectScopedContainersAccessor,h=e.value,g=e.onChange,m=d.layout,x=d.eventsFunctionsExtension,v=c.useMemo((function(){return m?[m.getVariables()]:x?[x.getSceneVariables()]:[]}),[x,m]),b=c.useCallback((function(){return m?_c(m.getVariables()):x?_c(x.getSceneVariables()):[]}),[x,m]),C=c.useCallback((function(e){e&&e.startsWith(h)&&g(e),o(null),n.current&&n.current.updateAutocompletions()}),[g,h]);return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(On.ZP,{isObjectVariable:!1,variablesContainers:v,enumerateVariables:b,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:o,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:p,scope:d,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-variable-field"):void 0,getVariableSourceFromIdentifier:Kc}),a&&m&&u&&(0,f.jsx)(Oi,{project:u,layout:m,open:!0,onCancel:function(){return o(null)},onApply:C,initiallySelectedVariableName:a.variableName,shouldCreateInitiallySelectedVariable:a.shouldCreate||!1,hotReloadPreviewButtonProps:null,isListLocked:!1}),a&&x&&!m&&(0,f.jsx)(kc,{projectScopedContainersAccessor:p,open:!0,onCancel:function(){return o(null)},onApply:C,isGlobalTabInitiallyOpen:!1,initiallySelectedVariableName:a.variableName,shouldCreateInitiallySelectedVariable:a.shouldCreate,hotReloadPreviewButtonProps:null,isListLocked:!1})]})})),Kc=function(e,t){return Jc.VariablesContainer.Scene},Qc=n.g.gd,$c=c.forwardRef((function(e,t){var n=c.useRef(null),r=c.useState(null),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:l}}));var u=e.project,d=e.scope,p=e.projectScopedContainersAccessor,h=c.useMemo((function(){return u?[u.getVariables()]:[]}),[u]),g=c.useCallback((function(){return u?_c(u.getVariables()):[]}),[u]);return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(On.ZP,{isObjectVariable:!1,variablesContainers:h,enumerateVariables:g,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:o,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:p,scope:d,getVariableSourceFromIdentifier:eu}),a&&u&&(0,f.jsx)(Un,{project:u,open:!0,onCancel:function(){return o(null)},onApply:function(t){t&&t.startsWith(e.value)&&e.onChange(t),o(null),n.current&&n.current.updateAutocompletions()},initiallySelectedVariableName:a.variableName,shouldCreateInitiallySelectedVariable:a.shouldCreate,hotReloadPreviewButtonProps:null,isListLocked:!1})]})})),eu=function(e,t){return Qc.VariablesContainer.Global},tu=function(e){var t=e.project,n=e.objectName,r=e.initialInstances,i=e.variablesContainer,a=e.open,o=e.onCancel,s=e.onApply,l=e.hotReloadPreviewButtonProps,u=e.initiallySelectedVariableName,d=e.shouldCreateInitiallySelectedVariable,p=e.projectScopedContainersAccessor,h=e.onComputeAllVariableNames,g=e.isListLocked,m=c.useMemo((function(){return[{id:"object-variables",label:"",variablesContainer:i,emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first object variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"These variables hold additional information on an object."}),onComputeAllVariableNames:h}]}),[h,i]);return(0,f.jsx)(Fn,{project:t,projectScopedContainersAccessor:p,objectName:n,initialInstances:r,open:a,onCancel:o,onApply:s,title:(0,f.jsx)(w.Trans,{id:"{objectName} variables",values:{objectName:n}}),tabs:m,initiallySelectedVariableName:u,shouldCreateInitiallySelectedVariable:d,helpPagePath:"/all-features/variables/object-variables",hotReloadPreviewButtonProps:l,id:"object-variables-dialog",isListLocked:g})},nu=n.g.gd,ru=function(e){var t=e.project,n=e.projectScopedContainersAccessor,r=e.globalObjectsContainer,s=e.objectsContainer,u=e.initialInstances,d=e.objectGroup,p=e.onCancel,h=e.onApply,g=e.open,m=e.hotReloadPreviewButtonProps,x=e.initiallySelectedVariableName,v=e.shouldCreateInitiallySelectedVariable,b=e.onComputeAllVariableNames,C=e.isListLocked,j=(0,jn.Z)((function(){return nu.ObjectVariableHelper.mergeVariableContainers(n.get().getObjectsContainersList(),d)})),y=Je({serializableObject:j,onCancel:function(){},resetThenClearPersistentUuid:!0}),Z=y.notifyOfChange,k=y.getOriginalContentSerializedElement,S=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var o,l,c,p,f,g,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(P.current&&Bt(P.current,j)),u){e.next=3;break}return e.abrupt("return");case 3:if(o=k(),l=nu.WholeProjectRefactorer.computeChangesetForVariablesContainer(o,j),nu.WholeProjectRefactorer.applyRefactoringForGroupVariablesContainer(t,r||s,s,u,j,d,l,o),c=n.getScope(),p=c.eventsBasedObject){f=(0,i.Z)(d.getAllObjectsNames().toJSArray());try{for(f.s();!(g=f.n()).done;)m=g.value,nu.ObjectVariableHelper.applyChangesToVariants(p,m,l)}catch(a){f.e(a)}finally{f.f()}}j.clearPersistentUuid();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=c.useRef(null),I=c.useCallback((function(e){P.current=e.length>0?e[e.length-1]:null}),[]),L=c.useRef(v||!1),A=c.useRef(x);if(L.current){L.current=!1;var O=Pt(j,x?(0,On.mz)(x):"Variable",null,j.count(),null).name;A.current=O,P.current=Nt(O)}var R=(0,et.Z)("intro-variables").DismissableTutorialMessage;return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"{0} variables",values:{0:d.getName()}}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:p},"Cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Apply"}),primary:!0,onClick:S,id:"apply-button"},"Apply")],secondaryActions:[m?(0,f.jsx)($e,(0,l.Z)({},m),"hot-reload-preview-button"):null,(0,f.jsx)(An.Z,{helpPagePath:"/all-features/variables/object-variables"},"help")],onRequestClose:p,onApply:S,open:g,flexBody:!0,fullHeight:!0,id:"object-group-variables-dialog",children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[j.count()>0&&R&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:R})}),(0,f.jsx)(Ln,{projectScopedContainersAccessor:n,variablesContainer:j,areObjectVariables:!0,initiallySelectedVariableName:A.current,emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first object group variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"These variables hold additional information and are available on all objects of the group."}),helpPagePath:"/all-features/variables/object-variables",onComputeAllVariableNames:b,onVariablesUpdated:Z,onSelectedVariableChange:I,isListLocked:C})]})})},iu=n(82465);function au(e,t,n){return t&&t.getObjectGroups().has(n)?t.getObjectGroups().get(n):e&&e.getObjectGroups().has(n)?e.getObjectGroups().get(n):null}var ou=n(27817),su=n.g.gd,lu=c.forwardRef((function(e,t){var n=c.useRef(null),r=c.useState(null),a=(0,s.Z)(r,2),o=a[0],l=a[1],u=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:u}}));var d=e.project,p=e.globalObjectsContainer,h=e.objectsContainer,g=e.projectScopedContainersAccessor,m=e.scope,x=e.instructionMetadata,v=e.instruction,b=e.expressionMetadata,C=e.expression,j=e.parameterIndex,y=e.onInstructionTypeChanged,Z=e.value,k=e.onChange,w=(0,Cc.c6)({instructionMetadata:x,instruction:v,expressionMetadata:b,expression:C,parameterIndex:j}),T=w?au(p,h,w):null,S=c.useMemo((function(){return w?g.get().getObjectsContainersList().getObjectsContainerSourceType(w):su.ObjectsContainer.Unknown}),[w,g])!==su.ObjectsContainer.Function,P=m.layout,I=m.eventsBasedObject,E=P&&P.getInitialInstances()||I&&I.getInitialInstances()||null,M=c.useMemo((function(){return w&&S?function(e,t,n){var r=(0,iu.Z)(e,t,n),a=[];if(r)a.push(r.getVariables());else{var o=au(e,t,n);if(o){var s,l=(0,i.Z)(o.getAllObjectsNames().toJSArray());try{for(l.s();!(s=l.n()).done;){var c=s.value,u=(0,iu.Z)(e,t,c);u&&a.push(u.getVariables())}}catch(d){l.e(d)}finally{l.f()}}}return a}(p,h,w):[]}),[w,S,p,h]),L=c.useCallback((function(){return M.length>0?M.map((function(e){return _c(e)})).reduce((function(e,t){return(0,ou.intersectionBy)(e,t,"name")})):[]}),[M]),A=c.useCallback((function(e){e&&e.startsWith(Z)&&k(e),l(null),y&&y(),n.current&&n.current.updateAutocompletions()}),[k,y,Z]),O=c.useCallback((function(){return d&&P&&w?_n.findAllObjectVariables(d.getCurrentPlatform(),d,P,w):[]}),[P,w,d]);return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(On.ZP,{forceDeclaration:v&&su.VariableInstructionSwitcher.isSwitchableVariableInstruction(v.getType()),project:d,instruction:v,isObjectVariable:!0,variablesContainers:M,enumerateVariables:L,parameterMetadata:e.parameterMetadata,value:e.value,onChange:e.onChange,isInline:e.isInline,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,onOpenDialog:S?l:null,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:g,scope:m,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-object-variable-field"):void 0,onInstructionTypeChanged:y,getVariableSourceFromIdentifier:cu}),o&&d&&!!M.length&&!T&&(0,f.jsx)(tu,{project:d,projectScopedContainersAccessor:g,objectName:w,initialInstances:E,variablesContainer:M[0],open:!0,onCancel:function(){return l(null)},onApply:A,initiallySelectedVariableName:o.variableName,shouldCreateInitiallySelectedVariable:o.shouldCreate,onComputeAllVariableNames:O,hotReloadPreviewButtonProps:null,isListLocked:!1}),o&&d&&T&&!!M.length&&(0,f.jsx)(ru,{project:d,projectScopedContainersAccessor:g,globalObjectsContainer:p,initialInstances:E,objectsContainer:h,objectGroup:T,onCancel:function(){return l(null)},onApply:A,open:!0,initiallySelectedVariableName:o.variableName,shouldCreateInitiallySelectedVariable:o.shouldCreate,onComputeAllVariableNames:O,isListLocked:!1})]})})),cu=function(e,t){return su.VariablesContainer.Object},uu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.scope,a=i.layout,o=i.eventsFunctionsExtension,u=i.eventsBasedObject,d=a||u,p=d?d.getLayers():null,h=p?(0,mt.mapFor)(0,p.getLayersCount(),(function(e){return p.getLayerAt(e).getName()})):[],g=!!h.find((function(t){return'"'.concat(t,'"')===e.value})),m=!o||u,x=c.useState(!!e.value&&!g||!m),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=function(){'""'===e.value&&e.onChange(""),C(!b)},y=function(t,n){e.onChange(t.target.value)},Z=function(t){e.onChange(t)},k=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,S=h.map((function(e){var t=""===e;return(0,f.jsx)(P.Z,{value:t?"":'"'.concat(e,'"'),label:t?{id:"Base layer"}:e,shouldNotTranslate:!t},t?"Base layer":e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return b?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-field"):void 0,expressionType:"string"},e),{},{onChange:Z})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-field"):void 0,value:e.value,onChange:y,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:k,translatableHintText:{id:"Choose a layer"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:S})},renderButton:function(e){return m?b?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:j}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:j}):null}})})),du=n(26554),pu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"image",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the image file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for ImageResourceField"),null)})),fu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"audio",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the audio file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-audio-field"):void 0}):(console.error("Missing project or resourceManagementProps for AudioResourceField"),null)})),hu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"video",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the video file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for VideoResourceField"),null)})),gu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the json file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for JsonResourceField"),null)})),mu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"spine",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the spine json file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for SpineResourceField"),null)})),xu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"bitmapFont",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the bitmap font file (.fnt, .xml) to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for BitmapFontResourceField"),null)})),vu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"font",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the font file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for FontResourceField"),null)})),bu=n(37237),Cu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),(0,f.jsx)(_l.Z,(0,l.Z)({expressionType:"string",ref:n,renderExtraButton:function(t){var n=t.style,r=t.onChange;return(0,f.jsx)(bu.Z,{style:n,disableAlpha:!0,color:(0,Xn.A0)(e.value),onChangeComplete:function(e){r('"'+e.rgb.r+";"+e.rgb.g+";"+e.rgb.b+'"')}})},onExtractAdditionalErrors:function(e,t){return e.trim().startsWith('"\\"')?"A color is a text in the format R;G;B, like 100;200;180 (numbers going from 0 to 255). You need to surround the text with quotes, but the text itself should not contain a quote inside.":null}},e))})),ju=n(24289),yu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&(0,ju.o)(n.current)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=""!==e.value&&"1"!==e.value&&"0"!==e.value;return(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(M.x1,{expand:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{children:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Instant"}),primary:""===e.value||"0"===e.value,onClick:function(){return e.onChange("0")},ref:n})}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"The force will only push the object during the time of one frame. Typically used in an event with no conditions or with conditions that stay valid for a certain amount of time."})})})]}),(0,f.jsxs)(M.x1,{expand:!0,alignItems:"center",children:[(0,f.jsx)(M.sg,{children:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Permanent"}),primary:"1"===e.value,onClick:function(){return e.onChange("1")}})}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:'The force will push the object forever, unless you use the action "Stop the object". Typically used in an event with conditions that are only true once, or with a "Trigger Once" condition.'})})})]}),i&&(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"or"})}),(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(_l.Z,(0,l.Z)({expressionType:"number"},e))})}),(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:'The usage of a number or expression is deprecated. Please now use only "Permanent" or "Instant" for configuring forces.'})})]})]})})),Zu=function(e){return(0,mt.mapFor)(0,e.getLayoutsCount(),(function(t){return e.getLayoutAt(t)}))},ku=function(e){return(0,mt.mapFor)(0,e.getExternalEventsCount(),(function(t){return e.getExternalEventsAt(t)}))},wu=function(e){return(0,mt.mapFor)(0,e.getExternalLayoutsCount(),(function(t){return e.getExternalLayoutAt(t)}))},Tu=function(e){return(0,mt.mapFor)(0,e.getEventsFunctionsExtensionsCount(),(function(t){return e.getEventsFunctionsExtensionAt(t)}))},Su=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.project?Zu(e.project).map((function(e){return e.getName()})):[],a=!!i.find((function(t){return'"'.concat(t,'"')===e.value})),o=c.useState(!!e.value&&!a||e.scope.eventsFunctionsExtension),u=(0,s.Z)(o,2),d=u[0],p=u[1],h=function(){p(!d)},g=function(t,n){e.onChange(t.target.value)},m=function(t){e.onChange(t)},x=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,v=i.map((function(e){return(0,f.jsx)(P.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return d?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-field"):void 0,expressionType:"string"},e),{},{onChange:m})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-scene-field"):void 0,value:e.value,onChange:g,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:x,translatableHintText:{id:"Choose a scene"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:v})},renderButton:function(e){return d?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:h}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:h})}})})),Pu=function(e){return(0,mt.mapFor)(0,e.getEffectsCount(),(function(t){return e.getEffectAt(t).getName()}))},Iu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.scope,a=e.instruction,o=e.expression,u=e.parameterIndex,d=i.layout,p=i.eventsFunctionsExtension,h=i.eventsBasedObject,g=function(){var e=d||h;if(!e)return[];var t=(0,Cc.jR)((0,Cc.jz)({instruction:a,expression:o,parameterIndex:u}))||"",n=e.getLayers();if(!n.hasLayerNamed(t))return[];var r=n.getLayer(t);return Pu(r.getEffects()).sort()}(),m=!!g.find((function(t){return'"'.concat(t,'"')===e.value})),x=!p||h,v=c.useState(!!e.value&&!m||!x),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=function(){j(!C)},Z=function(t,n){e.onChange(t.target.value)},k=function(t){e.onChange(t)},S=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,I=g.map((function(e){return(0,f.jsx)(P.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return C?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-name-field"):void 0,expressionType:"string"},e),{},{onChange:k})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-name-field"):void 0,value:e.value,onChange:Z,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:S,translatableHintText:{id:"Choose an effect"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:I})},renderButton:function(e){return x?C?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:y}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:y}):null}})})),Eu=n.g.gd,Mu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.project,a=e.scope,o=e.instruction,u=e.expression,d=e.parameterIndex,p=a.layout,h=a.eventsFunctionsExtension,g=a.eventsBasedObject,m=function(){var e=p||g;if(!e||!i)return[];var t=(0,Cc.jR)((0,Cc.jz)({instruction:o,expression:u,parameterIndex:d?d-1:null}))||"",n=e.getLayers();if(!n.hasLayerNamed(t))return[];var r=n.getLayer(t),a=(0,Cc.jR)((0,Cc.jz)({instruction:o,expression:u,parameterIndex:d}));if(!a||!r.getEffects().hasEffectNamed(a))return[];var s=r.getEffects().getEffect(a).getEffectType();return Eu.MetadataProvider.getEffectMetadata(i.getCurrentPlatform(),s).getProperties().keys().toJSArray().sort()}(),x=!!m.find((function(t){return'"'.concat(t,'"')===e.value})),v=!h||g,b=c.useState(!!e.value&&!x||!v),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=function(){y(!j)},k=function(t,n){e.onChange(t.target.value)},S=function(t){e.onChange(t)},I=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,E=m.map((function(e){return(0,f.jsx)(P.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return j?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,expressionType:"string"},e),{},{onChange:S})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,value:e.value,onChange:k,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:I,translatableHintText:{id:"Choose a parameter"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:E})},renderButton:function(e){return v?j?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:Z}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:Z}):null}})})),Lu=n(63348),Au=n.n(Lu),Ou=c.forwardRef((function(e,t){var n=c.useRef(null),i=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:i}}));var a=e.scope,o=e.globalObjectsContainer,u=e.objectsContainer,d=e.instructionMetadata,p=e.instruction,h=e.expressionMetadata,g=e.expression,m=e.parameterIndex,x=a.eventsFunctionsExtension,v=a.eventsBasedObject,b=function(){var e=(0,Cc.c6)({instructionMetadata:d,instruction:p,expressionMetadata:h,expression:g,parameterIndex:m});if(!e)return[];var t=(0,iu.Z)(o,u,e);if(t)return Pu(t.getEffects()).sort();var n=au(o,u,e);if(n){var i=(0,mt.mapVector)(n.getAllObjectsNames(),(function(e){var t=(0,iu.Z)(o,u,e);return t?Pu(t.getEffects()):null})).filter(Boolean);return Au().apply(void 0,(0,r.Z)(i)).sort()}return[]}(),C=!!b.find((function(t){return'"'.concat(t,'"')===e.value})),j=!x||v,y=c.useState(!!e.value&&!C||!j),Z=(0,s.Z)(y,2),k=Z[0],S=Z[1],I=function(){S(!k)},E=function(t,n){e.onChange(t.target.value)},M=function(t){e.onChange(t)},L=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,A=b.map((function(e){return(0,f.jsx)(P.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return k?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-object-effect-name-field"):void 0,expressionType:"string"},e),{},{onChange:M})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-object-effect-name-field"):void 0,value:e.value,onChange:E,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:L,translatableHintText:{id:"Choose an effect"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:A})},renderButton:function(e){return j?k?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:I}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:I}):null}})})),Ru=n(60575),Fu=n.n(Ru),Du=n.g.gd,Nu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.scope,a=i.eventsFunctionsExtension,o=i.eventsBasedObject,u=function(){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.instructionMetadata,a=e.instruction,o=e.expressionMetadata,s=e.expression,l=e.parameterIndex,c=(0,Cc.c6)({instructionMetadata:i,instruction:a,expressionMetadata:o,expression:s,parameterIndex:l}),u=(0,Cc.jR)((0,Cc.jz)({instruction:a,expression:s,parameterIndex:l}));if(!c||!t||!u)return[];var d=null,p=(0,iu.Z)(n,r,c);if(p&&p.getEffects().hasEffectNamed(u)&&(d=p.getEffects().getEffect(u).getEffectType()),!d){var f=au(n,r,c);if(f){var h=(0,mt.mapVector)(f.getAllObjectsNames(),(function(e){var t=(0,iu.Z)(n,r,e);return t&&t.getEffects().hasEffectNamed(u)?t.getEffects().getEffect(u).getEffectType():null}));h.every((function(e){return!!e}))&&1===Fu()(h).length&&(d=h[0])}}return d?Du.MetadataProvider.getEffectMetadata(t.getCurrentPlatform(),d).getProperties().keys().toJSArray().sort():[]}(),d=!!u.find((function(t){return'"'.concat(t,'"')===e.value})),p=!a||o,h=c.useState(!!e.value&&!d||!p),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=function(){x(!m)},b=function(t,n){e.onChange(t.target.value)},C=function(t){e.onChange(t)},j=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,y=u.map((function(e){return(0,f.jsx)(P.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return m?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,expressionType:"string"},e),{},{onChange:C})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-layer-effect-parameter-name-field"):void 0,value:e.value,onChange:b,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:j,translatableHintText:{id:"Choose a parameter"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:y})},renderButton:function(e){return p?m?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:v}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:v}):null}})})),_u=n(8278),Bu=n.g.gd,Uu=c.forwardRef((function(e,t){var n=c.useRef(null),i=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:i}}));return(0,f.jsx)(_l.Z,(0,l.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(t){return function(){var t=e.project,n=e.scope,i=e.globalObjectsContainer,a=e.objectsContainer,o=e.instructionMetadata,s=e.instruction,l=e.expressionMetadata,c=e.expression,u=e.parameterIndex,d=(0,Cc.c6)({instructionMetadata:o,instruction:s,expressionMetadata:l,expression:c,parameterIndex:u});if(!d||!t)return[];var p=(0,iu.Z)(i,a,d);if(p&&"Sprite"===p.getType()){var f=Bu.asSpriteConfiguration(p.getConfiguration()).getAnimations();return(0,_u.ge)(f).map((function(e){return e.length>0?e:null})).filter(Boolean).sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))}var h=au(t.getObjects(),n.layout?n.layout.getObjects():null,d);if(h){var g=(0,mt.mapVector)(h.getAllObjectsNames(),(function(e){var r=(0,iu.Z)(t.getObjects(),n.layout?n.layout.getObjects():null,e);if(!r||"Sprite"!==r.getType())return null;var i=Bu.asSpriteConfiguration(r.getConfiguration()).getAnimations();return(0,_u.ge)(i).map((function(e){return e.length>0?e:null})).filter(Boolean)}));return g.some((function(e){return!e}))?[]:Au().apply(void 0,(0,r.Z)(g)).sort().map((function(e){return{kind:"Text",completion:'"'.concat(e,'"')}}))}return[]}().filter((function(e){return 0===e.completion.indexOf(t)}))},ref:n},e))})),Vu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.projectScopedContainersAccessor,a=e.scope,o=e.instructionMetadata,u=e.instruction,d=e.expressionMetadata,p=e.expression,h=e.parameterIndex,g=a.eventsFunctionsExtension,m=a.eventsBasedObject,x=!g||m,v=x?function(){var e=(0,Cc.c6)({instructionMetadata:o,instruction:u,expressionMetadata:d,expression:p,parameterIndex:h});return e?i.get().getObjectsContainersList().getAnimationNamesOfObject(e).toJSArray():[]}():[],b=!!v.find((function(t){return'"'.concat(t,'"')===e.value})),C=c.useState(!!e.value&&!b||!x),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=function(){Z(!y)},S=function(t,n){e.onChange(t.target.value)},I=function(t){e.onChange(t)},E=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,M=v.map((function(e){return(0,f.jsx)(P.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return y?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-animation-name-field"):void 0,expressionType:"string"},e),{},{onChange:I})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-animation-name-field"):void 0,value:e.value,onChange:S,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:E,translatableHintText:{id:"Choose an animation"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:M})},renderButton:function(e){return x?y?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:k}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:k}):null}})})),Hu=n(70464),zu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.parameterMetadata,a=i&&i.getExtraInfo()?i.getExtraInfo().split(","):[],o=e.scope.eventsBasedBehavior||e.scope.eventsBasedObject,s=o?o.getEventsFunctions():e.scope.eventsFunctionsExtension?e.scope.eventsFunctionsExtension.getEventsFunctions():null,l=(e.scope.eventsFunction&&s?(0,Hu.I)(s,e.scope.eventsFunction,a):[]).map((function(e){var t=e.getName();return(0,f.jsx)(P.Z,{value:'"'.concat(t,'"'),label:t,shouldNotTranslate:!0},t)})),u=e.parameterMetadata?e.parameterMetadata.getDescription():void 0;return(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-function-parameter-field"):void 0,value:e.value,onChange:function(t,n){e.onChange(t.target.value)},margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:u,translatableHintText:{id:"Choose a parameter"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:l})})),Wu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};c.useImperativeHandle(t,(function(){return{focus:r}}));var i=e.project?wu(e.project).map((function(e){return e.getName()})):[],a=!!i.find((function(t){return'"'.concat(t,'"')===e.value})),o=c.useState(!!e.value&&!a||e.scope.eventsFunctionsExtension),u=(0,s.Z)(o,2),d=u[0],p=u[1],h=function(){p(!d)},g=function(t,n){e.onChange(t.target.value)},m=function(t){e.onChange(t)},x=e.parameterMetadata?e.parameterMetadata.getDescription():void 0,v=i.map((function(e){return(0,f.jsx)(P.Z,{value:'"'.concat(e,'"'),label:e,shouldNotTranslate:!0},e)}));return(0,f.jsx)(_.ad,{renderTextField:function(){return d?(0,f.jsx)(_l.Z,(0,l.Z)((0,l.Z)({ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-external-layout-field"):void 0,expressionType:"string"},e),{},{onChange:m})):(0,f.jsx)(Hn.Z,{ref:n,id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-external-layout-field"):void 0,value:e.value,onChange:g,margin:e.isInline?"none":"dense",fullWidth:!0,floatingLabelText:x,translatableHintText:{id:"Choose an external layout"},helperMarkdownText:e.parameterMetadata&&e.parameterMetadata.getLongDescription()||null,children:v})},renderButton:function(e){return d?(0,f.jsx)(T.Z,{id:"switch-expression-select",leftIcon:(0,f.jsx)(Ul,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Select"}),onClick:h}):(0,f.jsx)(G.Z,{id:"switch-expression-select",icon:(0,f.jsx)(Bl.Z,{}),style:e,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use an expression"}),onClick:h})}})})),Gu=n(3970),Yu=n.g.gd,qu=c.forwardRef((function(e,t){var n=e.project,r=e.scope,i=e.instructionMetadata,a=e.instruction,o=e.expressionMetadata,s=e.expression,u=e.parameterIndex,d=r.layout,p=(0,Cc.c6)({instructionMetadata:i,instruction:a,expressionMetadata:o,expression:s,parameterIndex:u})||"",h=c.useMemo((function(){if(!u)return[];var e=i?i.getParameter(u):o?o.getParameter(u):null,t=e?e.getExtraInfo():"";return(n&&d?Yu.EventsIdentifiersFinder.findAllIdentifierExpressions(n.getCurrentPlatform(),n,d,t,p).toNewVectorString().toJSArray():[]).map((function(e){return{kind:"FullExpression",completion:e}}))}),[n,d,o,i,u,p]),g=c.useRef(null),m=function(e){g.current&&g.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:m}})),c.useEffect((function(){m()}),[]),(0,f.jsx)(_l.Z,(0,l.Z)({expressionType:"string",onGetAdditionalAutocompletions:function(e){return h.filter((function(t){return 0===t.completion.indexOf(e)}))},id:void 0!==e.parameterIndex?"parameter-".concat(e.parameterIndex,"-identifier"):void 0,ref:g},e))})),Ju=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"tilemap",fallbackResourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the JSON/LDtk file to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for TilemapResourceField"),null)})),Xu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"tileset",fallbackResourceKind:"json",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the tileset to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for TilesetResourceField"),null)})),Ku=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"model3D",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the 3D model file (.glb) to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for Model3DResourceField"),null)})),Qu=c.forwardRef((function(e,t){var n=c.useRef(null),r=function(e){n.current&&n.current.focus(e)};return c.useImperativeHandle(t,(function(){return{focus:r}})),e.resourceManagementProps&&e.project?(0,f.jsx)(du.Z,{margin:e.isInline?"none":"dense",project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:Sr.Z,resourceKind:"atlas",fullWidth:!0,initialResourceName:e.value,onChange:e.onChange,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Choose the atlas file (.atlas) to use"}),onRequestClose:e.onRequestClose,onApply:e.onApply,ref:n}):(console.error("Missing project or resourceManagementProps for AtlasResourceField"),null)})),$u=n.g.gd,ed={default:El,mouse:Nl,mouseButton:Wl,object:uc,relationalOperator:Ol,operator:Dl,yesorno:gc,trueorfalse:xc,number:vc,expression:vc,string:bc,stringWithSelector:jc,behavior:Zc,variable:Uc,variableOrProperty:zc,variableOrPropertyOrParameter:Yc,scenevar:Xc,globalvar:$c,objectvar:lu,layer:uu,key:ql,keyboardKey:ec,file:El,musicfile:fu,soundfile:fu,audioResource:fu,imageResource:pu,videoResource:hu,jsonResource:gu,bitmapFontResource:xu,fontResource:vu,model3DResource:Ku,atlasResource:Qu,spineResource:mu,color:Cu,forceMultiplier:yu,sceneName:Su,layerEffectName:Iu,layerEffectParameterName:Mu,objectEffectName:Ou,objectEffectParameterName:Nu,objectPointName:Uu,objectAnimationName:Vu,functionParameterName:zu,externalLayoutName:Wu,leaderboardId:Gu.ZP,identifier:qu,tilemapResource:Ju,tilesetResource:Xu},td={default:function(e){var t=e.value,n=e.expressionIsValid,r=e.parameterMetadata,i=e.InvalidParameterValue,a=e.MissingParameterValue;return t||r.isOptional()?n?t:(0,f.jsx)(i,{children:t}):(0,f.jsx)(a,{})},forceMultiplier:function(e){var t=e.value;return"1"===t?(0,f.jsx)(w.Trans,{id:"a permanent"}):"0"===t||""===t?(0,f.jsx)(w.Trans,{id:"an instant"}):"a (multiplier: "+t+")"},variable:function(e){return(0,On.qH)(e,"variable",Vc)},variableOrProperty:function(e){return(0,On.qH)(e,"variable",Wc)},variableOrPropertyOrParameter:function(e){return(0,On.qH)(e,"variable",qc)},globalvar:function(e){return(0,On.qH)(e,"global variable",eu)},scenevar:function(e){return(0,On.qH)(e,"scene variable",Kc)},objectvar:function(e){return(0,On.qH)(e,"object variable",cu)},key:function(e){var t=e.value,n=e.InvalidParameterValue;return t?Yl(t)?t:(0,f.jsx)(n,{children:t}):(0,f.jsx)(n,{isEmpty:!0,children:(0,f.jsx)(w.Trans,{id:"Choose a key"})})},keyboardKey:function(e){var t=e.value,n=e.expressionIsValid,r=e.InvalidParameterValue;return t?n&&!function(e){var t=e.match(Xl);return!(!t||void 0===t[1])&&!Jl.has(t[1])}(t)?t:(0,f.jsx)(r,{children:t}):(0,f.jsx)(r,{isEmpty:!0,children:(0,f.jsx)(w.Trans,{id:"Choose a key"})})},mouse:function(e){var t=e.value,n=e.InvalidParameterValue;return t||(0,f.jsx)(n,{isEmpty:!0,children:(0,f.jsx)(w.Trans,{id:"Choose a mouse button"})})},mouseButton:function(e){var t=e.value,n=e.expressionIsValid,r=e.InvalidParameterValue;return t?n&&!function(e){var t=e.match(zl);return!(!t||void 0===t[1])&&!Hl.has(t[1])}(t)?t:(0,f.jsx)(r,{children:t}):(0,f.jsx)(r,{isEmpty:!0,children:(0,f.jsx)(w.Trans,{id:"Choose a mouse button"})})},object:function(e){var t=e.value,n=e.parameterMetadata,r=e.renderObjectThumbnail,i=e.expressionIsValid,a=e.InvalidParameterValue,o=e.MissingParameterValue;return t||n.isOptional()?(0,f.jsxs)("span",{title:t,className:en()((0,Qt.Z)({},Sl.Sv,!0)),children:[r(t),i?t:(0,f.jsx)(a,{children:t})]}):(0,f.jsx)(o,{})},yesorno:function(e){var t=e.value,n=e.parameterMetadata;return"yes"===dc(t,n)?(0,f.jsx)(w.Trans,{id:"yes"}):(0,f.jsx)(w.Trans,{id:"no"})},trueorfalse:function(e){var t=e.value,n=e.parameterMetadata;return"True"===dc(t,n)?(0,f.jsx)(w.Trans,{id:"true"}):(0,f.jsx)(w.Trans,{id:"false"})},operator:function(e){var t=e.value,n=e.InvalidParameterValue,r=e.useAssignmentOperators,i=e.parameterMetadata,a=i?i.getExtraInfo():"unknown";if(!(Fl[a]||Fl.unknown).includes(t))return(0,f.jsx)(n,{isEmpty:!0,children:(0,f.jsx)(w.Trans,{id:"Choose an operator"})});if(r){if("="===t)return"=";if("+"===t)return"+=";if("-"===t)return"-=";if("/"===t)return"/=";if("*"===t)return"*="}else{if("="===t)return(0,f.jsx)(w.Trans,{id:"set to"});if("+"===t)return(0,f.jsx)(w.Trans,{id:"add"});if("-"===t)return(0,f.jsx)(w.Trans,{id:"subtract"});if("/"===t)return(0,f.jsx)(w.Trans,{id:"divide by"});if("*"===t)return(0,f.jsx)(w.Trans,{id:"multiply by"})}return"True"===t?(0,f.jsx)(w.Trans,{id:"set to true"}):"False"===t?(0,f.jsx)(w.Trans,{id:"set to false"}):"Toggle"===t?(0,f.jsx)(w.Trans,{id:"toggle"}):(0,f.jsx)(n,{children:t})},relationalOperator:function(e){var t=e.value,n=e.InvalidParameterValue,r=e.parameterMetadata,i=r?r.getExtraInfo():"unknown";return(Ll[i]||Ll.unknown).includes(t)?"="!==t&&"<"!==t&&">"!==t&&"<="!==t&&">="!==t&&"!="!==t&&"startsWith"!==t&&"endsWith"!==t&&"contains"!==t?(0,f.jsx)(n,{children:t}):"<="===t?"\u2264":">="===t?"\u2265":"!="===t?"\u2260":"startsWith"===t?(0,f.jsx)(w.Trans,{id:"starts with"}):"endsWith"===t?(0,f.jsx)(w.Trans,{id:"ends with"}):"contains"===t?(0,f.jsx)(w.Trans,{id:"contains"}):t:(0,f.jsx)(n,{isEmpty:!0,children:(0,f.jsx)(w.Trans,{id:"Choose an operator"})})},leaderboardId:Gu.tJ},nd={mouse:{id:"Mouse button"},mouseButton:{id:"Mouse button"},object:{id:"Object"},relationalOperator:{id:"Relational operator"},operator:{id:"Operator"},yesorno:{id:"Yes or No"},trueorfalse:{id:"True or False"},expression:{id:"Number"},number:{id:"Number"},string:{id:"String"},stringWithSelector:{id:"String"},behavior:{id:"Behavior"},anyvar:{id:"Variable"},scenevar:{id:"Scene variable"},globalvar:{id:"Global variable"},objectvar:{id:"Object variable"},layer:{id:"Layer"},key:{id:"Keyboard key"},keyboardKey:{id:"Keyboard key"},musicfile:{id:"Audio resource"},soundfile:{id:"Audio resource"},audioResource:{id:"Audio resource"},imageResource:{id:"Image resource"},videoResource:{id:"Video resource"},bitmapFontResource:{id:"Bitmap font resource"},fontResource:{id:"Font resource"},jsonResource:{id:"JSON resource"},tilemapResource:{id:"Tile map resource"},atlasResource:{id:"Atlas resource"},spineResource:{id:"Spine json resource"},color:{id:"Color"},forceMultiplier:{id:"Instant or permanent force"},sceneName:{id:"Scene name"},layerEffectName:{id:"Layer effect name"},layerEffectParameterName:{id:"Layer effect property name"},objectEffectName:{id:"Object effect name"},objectEffectParameterName:{id:"Object effect property name"},objectPointName:{id:"Object point name"},objectAnimationName:{id:"Object animation name"},functionParameterName:{id:"Parameter name"},externalLayoutName:{id:"Name of the external layout"},identifier:{id:"Identifier"}},rd={components:ed,getParameterComponent:function(e){var t=$u.ParameterMetadata.isObject(e)?"object":e;return ed.hasOwnProperty(t)?ed[t]:ed.default},renderInlineParameter:function(e){var t=e.parameterMetadata.getType(),n=$u.ParameterMetadata.isObject(t)?"object":t;return(td[n]||td.default)(e)},getUserFriendlyTypeName:function(e){var t=$u.ParameterMetadata.isObject(e)?"object":e;return nd[t]||null}},id=function(e){var t=e.children;return e.isEmpty?(0,f.jsxs)("span",{className:Sl.FS,children:["< ",t," >"]}):(0,f.jsx)("span",{className:Sl.FS,children:t})},ad=function(){return(0,f.jsx)("span",{className:Sl.yW,children:"\xa0"})},od=c.memo(c.forwardRef((function(e,t){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({viewBox:"10 10 54 54"},e),{},{ref:t,children:[(0,f.jsx)("path",{d:"M30.5461 30.5034L28.3521 34.288C30.0252 35.8147 31.6363 36.9026 34.934 37.9129L36.1222 33.5573C33.9641 32.8388 31.7827 31.6259 30.5461 30.5034Z",fill:"#29ABE1"}),(0,f.jsx)("path",{d:"M24.4035 30.8975C24.4035 30.8975 25.544 32.6156 26.0043 32.2051L27.8585 28.4191C25.9976 26.5822 24.4035 23.6184 24.4035 19.5989C24.4035 32.6265 24.4035 26.5737 24.4035 30.8975Z",fill:"#29ABE1"}),(0,f.jsx)("path",{d:"M44.9316 26.7094L55.9031 36.8682L44.9316 47.0269L44.9316 39.357C42.7099 39.3063 40.7076 39.1539 38.9796 38.8745L39.8706 34.288C41.1872 34.4658 43.2036 34.8111 44.9316 34.8365L44.9316 26.7094Z",fill:"#29ABE1"}),(0,f.jsx)("path",{d:"M20.4015 51.1301L24.4035 51.1301C24.758 37.0402 24.4035 22.938 24.4035 8.84436L20.4015 8.84435L20.4015 19.6497C20.4015 29.4361 20.669 40.0776 20.4015 51.1301Z",fill:"#2B3990"}),(0,f.jsx)("path",{d:"M22.4813 59.5759C26.4597 59.5759 29.6848 56.3507 29.6848 52.3723C29.6848 48.3939 26.4597 45.1688 22.4813 45.1688C18.5029 45.1688 15.2777 48.3939 15.2777 52.3723C15.2777 56.3507 18.5029 59.5759 22.4813 59.5759Z",fill:"#29ABE1"}),(0,f.jsx)("path",{d:"M22.4813 55.9741C24.4705 55.9741 26.083 54.3615 26.083 52.3723C26.083 50.3831 24.4705 48.7706 22.4813 48.7706C20.4921 48.7706 18.8795 50.3831 18.8795 52.3723C18.8795 54.3615 20.4921 55.9741 22.4813 55.9741Z",fill:"white"})]}))}))),sd=n(51458),ld=n.g.gd,cd={container:{whiteSpace:"normal",overflowWrap:"anywhere",cursor:"pointer",marginBottom:1}},ud="GD_DRAGGED_INSTRUCTION",dd=(0,ut.x)(ud),pd=function(e,t){return t.isRelevantForLayoutEvents()&&(e.layout||e.externalEvents)||t.isRelevantForFunctionEvents()&&e.eventsFunction||t.isRelevantForAsynchronousFunctionEvents()&&e.eventsFunction&&e.eventsFunction.isAsync()||t.isRelevantForCustomObjectEvents()&&e.eventsBasedObject},fd=function(e){var t=c.useContext(Nr.H).hasExtensionNamed,n=(0,sd._u)(e.instructionType),r=n.name,i=n.behaviorName,a=n.extensionName,o=t(a)?(0,f.jsx)(w.Trans,{id:"Try installing it from the extension store."}):"",s=(0,f.jsx)("span",{className:"function-name",children:r}),l=(0,f.jsx)("span",{className:"behavior-name",children:i}),u=(0,f.jsx)("span",{className:"extension-name",children:a});return i?e.isCondition?(0,f.jsxs)("span",{className:"instruction-missing",children:[(0,f.jsx)(w.Trans,{id:"{functionNode} condition on behavior {behaviorNode} from {extensionNode} extension is missing.",values:{functionNode:s,behaviorNode:l,extensionNode:u}})," ",o]}):(0,f.jsxs)("span",{className:"instruction-missing",children:[(0,f.jsx)(w.Trans,{id:"{functionNode} action on behavior {behaviorNode} from {extensionNode} extension is missing.",values:{functionNode:s,behaviorNode:l,extensionNode:u}})," ",o]}):e.isCondition?(0,f.jsxs)("span",{className:"instruction-missing",children:[(0,f.jsx)(w.Trans,{id:"{functionNode} condition from {extensionNode} extension is missing.",values:{functionNode:s,extensionNode:u}})," ",o]}):(0,f.jsxs)("span",{className:"instruction-missing",children:[(0,f.jsx)(w.Trans,{id:"{functionNode} action from {extensionNode} extension is missing.",values:{functionNode:s,extensionNode:u}})," ",o]})},hd=function(e){var t=e.platform,n=e.instruction,r=e.isCondition,i=e.onClick,a=e.onMoveToInstruction,o=e.onContextMenu,s=e.id,u=e.scope,d=c.useMemo((function(){return ld.InstructionSentenceFormatter.get()}),[]),p=c.useContext(D.ZP),h=c.useContext(j.Z),g=h.palette.type,m=h.message.warning,x=p.values.eventsSheetUseAssignmentOperators,v=p.values.showDeprecatedInstructionWarning,b=function(n,i){var a=e.projectScopedContainersAccessor.get(),o=e.instruction,s=e.disabled,l=e.renderObjectThumbnail,c=d.getAsFormattedText(o,n),p=n.getParametersCount();return(0,f.jsx)("span",{className:en()((0,Qt.Z)({},Sl.LC,s)),"data-instruction":o.getType(),"data-instruction-inverted":o.isInverted()?"true":void 0,children:(0,mt.mapFor)(0,c.size(),(function(s){var d,h=c.getTextFormatting(s),g=c.getString(s),m=h.getUserData();if(!(m>=0&&m<p))return"Unknown or unsupported instruction"===g?(0,f.jsx)(fd,{instructionType:o.getType(),isCondition:r},"unknown-behavior-instruction-".concat(s)):(0,f.jsx)("span",{children:g},s);var v=n.getParameter(m),b="expression"===v.getType()?"number":v.getType(),C=!0;if(!function(e){var t=e.value;return"layer"===e.parameterType&&""===t}({value:g,parameterType:b})&&(C=ld.InstructionValidator.isParameterValid(t,a,o,n,m,g))&&"functionParameterName"===b){var j=e.scope.eventsFunction;if(j){var y=e.scope.eventsBasedBehavior||e.scope.eventsBasedObject,Z=y?y.getEventsFunctions():e.scope.eventsFunctionsExtension?e.scope.eventsFunctionsExtension.getEventsFunctions():null;if(Z){var k=v.getExtraInfo().split(","),w=(0,Hu.I)(Z,j,k),T=o.getParameter(m).getPlainString(),S=T.substring(1,T.length-1);C=w.some((function(e){return e.getName()===S}))}}else C=!1}var P=function(e){var t=e.value,n=e.parameterType,r=e.i18n;return""!==t&&'""'!==t||"layer"!==n?t:r._({id:"Base layer"})}({value:g,parameterType:b,i18n:i});return(0,f.jsx)("span",{className:en()((d={},(0,Qt.Z)(d,Sl.fm,!0),(0,Qt.Z)(d,Sl.LU,!0),(0,Qt.Z)(d,b,!0),d)),onClick:function(t){e.onParameterClick(t,m),"touch"===e.screenType&&t.stopPropagation()},onKeyPress:function(t){(0,gn._x)(t)&&(e.onParameterClick(t,m),t.stopPropagation(),t.preventDefault())},tabIndex:0,children:rd.renderInlineParameter({scope:u,value:P,expressionIsValid:C,parameterMetadata:v,renderObjectThumbnail:l,InvalidParameterValue:id,MissingParameterValue:ad,useAssignmentOperators:x,projectScopedContainersAccessor:e.projectScopedContainersAccessor})},s)}))})},C="touch"!==(0,hi.BF)(),y=(0,rs.i)(c.useCallback((function(e){o(e.clientX,e.clientY)}),[o]),{context:"events-tree-event-component"});return(0,f.jsx)(w.I18n,{children:function(t){var d=t.i18n;return(0,f.jsx)(dd,{beginDrag:function(){return i(),{isCondition:r}},canDrag:function(){return C},canDrop:function(e){return e.isCondition===r},drop:function(){a()},children:function(t){var i,a=t.connectDragSource,p=t.connectDropTarget,h=t.isOver,x=t.canDrop,C=r?ld.MetadataProvider.getConditionMetadata(ld.JsPlatform.get(),n.getType()):ld.MetadataProvider.getActionMetadata(ld.JsPlatform.get(),n.getType()),j=C.getSmallIconFilename(),Z=j.startsWith("data:image/svg+xml")||j.includes("_black"),k=a((0,f.jsxs)("div",(0,l.Z)((0,l.Z)({style:cd.container,className:en()((i={},(0,Qt.Z)(i,Sl.fm,!0),(0,Qt.Z)(i,Sl.KZ,e.selected),(0,Qt.Z)(i,Sl.eD,v&&!pd(u,C)),i)),onClick:function(t){t.stopPropagation(),"touch"===e.screenType&&e.selected?e.onDoubleClick():e.onClick()},onDoubleClick:function(t){t.stopPropagation(),e.onDoubleClick()},onContextMenu:function(e){e.stopPropagation(),o(e.clientX,e.clientY)}},y),{},{onKeyPress:function(t){(0,gn.ph)(t)?(e.onDoubleClick(),t.stopPropagation(),t.preventDefault()):(0,gn._x)(t)&&(e.onClick(),t.stopPropagation(),t.preventDefault())},tabIndex:0,id:s,children:[v&&C.isHidden()?(0,f.jsx)(re.ZP,{title:e.isCondition?(0,f.jsx)(w.Trans,{id:"Deprecated condition"}):(0,f.jsx)(w.Trans,{id:"Deprecated action"}),fontSize:"small",children:(0,f.jsx)(te.Z,{style:{color:m},className:en()((0,Qt.Z)({},Sl.qv,!0))})}):null,n.isInverted()&&(0,f.jsx)("img",{className:en()((0,Qt.Z)({},Sl.qv,!0)),src:"res/contraire.png",alt:"Condition is negated"}),C.isAsync()&&(!C.isOptionallyAsync()||n.isAwaited())&&(0,f.jsx)(re.ZP,{title:(0,f.jsx)(w.Trans,{id:"Next actions (and sub-events) will wait for this action to be finished before running."}),placement:"top",children:(0,f.jsx)(od,{className:en()((0,Qt.Z)({},Sl.qv,!0))})}),(0,f.jsx)("img",{className:en()((0,Qt.Z)({},Sl.qv,!0)),src:j,alt:"",style:{filter:"dark"===g&&Z?"grayscale(1) invert(1)":void 0}}),b(C,d)]}))),T=k?p(k):null;return(0,f.jsxs)(c.Fragment,{children:[h&&(0,f.jsx)(Il,{canDrop:x}),T,C.canHaveSubInstructions()&&(0,f.jsx)(wd,{platform:e.platform,style:{},className:Sl.il,instrsList:n.getSubInstructions(),areConditions:e.isCondition,selection:e.selection,onAddNewInstruction:e.onAddNewSubInstruction,onPasteInstructions:e.onPasteSubInstructions,onMoveToInstruction:e.onMoveToSubInstruction,onMoveToInstructionsList:e.onMoveToSubInstructionsList,onInstructionClick:e.onSubInstructionClick,onInstructionDoubleClick:e.onSubInstructionDoubleClick,onInstructionContextMenu:e.onSubInstructionContextMenu,onAddInstructionContextMenu:e.onAddSubInstructionContextMenu,onParameterClick:e.onSubParameterClick,addButtonLabel:(0,f.jsx)(w.Trans,{id:"Add a sub-condition"}),addButtonId:"add-sub-condition-button",disabled:e.disabled,renderObjectThumbnail:e.renderObjectThumbnail,screenType:e.screenType,windowSize:e.windowSize,scope:e.scope,resourcesManager:e.resourcesManager,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:e.projectScopedContainersAccessor,idPrefix:e.id})]})}})}})},gd=n.g.gd,md="EventsAndInstructions",xd=function(){if(!vt.Z.has(md))return!1;var e=vt.Z.get(md),t=bt.$.extractNumberProperty(e,"eventsCount");return null!==t&&t>0},vd=function(){if(!vt.Z.has(md))return!1;var e=vt.Z.get(md),t=bt.$.extractNumberProperty(e,"conditionsCount");return null!==t&&t>0},bd=function(){if(!vt.Z.has(md))return!1;var e=vt.Z.get(md),t=bt.$.extractNumberProperty(e,"actionsCount");return null!==t&&t>0},Cd=n(92582),jd={addButton:{cursor:"pointer"},pasteButtonContainer:{marginLeft:"4px"}},yd=(0,Cd.L)(ud),Zd={id:"Right-click for quick menu"},kd={id:"Long press for quick menu"};function wd(e){var t=e.platform,n=e.addButtonId,r=e.addButtonLabel,i=e.areConditions,a=e.className,o=e.instrsList,u=e.onAddNewInstruction,d=e.onPasteInstructions,p=e.onMoveToInstruction,h=e.onMoveToInstructionsList,g=e.onInstructionClick,m=e.onInstructionContextMenu,x=e.onInstructionDoubleClick,v=e.onAddInstructionContextMenu,b=e.onParameterClick,C=e.selection,j=e.style,y=e.disabled,Z=e.renderObjectThumbnail,k=e.screenType,T=e.windowSize,S=e.scope,P=e.resourcesManager,I=e.globalObjectsContainer,E=e.objectsContainer,M=e.projectScopedContainersAccessor,L=e.idPrefix,A=c.useState(!1),O=(0,s.Z)(A,2),R=O[0],F=O[1],D=c.useCallback((function(){u&&u({instrsList:o,isCondition:i})}),[u,o,i]),N=c.useCallback((function(){d({instrsList:o,isCondition:i})}),[d,o,i]),_=(0,mt.mapFor)(0,o.size(),(function(e){var n=o.get(e),r={isCondition:i,instrsList:o,instruction:n,indexInList:e};return(0,f.jsx)(hd,{platform:t,instruction:n,isCondition:i,selected:bl(C,n),onMoveToInstruction:function(){return p(r)},onClick:function(){return g(r)},onDoubleClick:function(){return x(r)},onContextMenu:function(e,t){return m(e,t,r)},onParameterClick:function(e,t){return b({isCondition:r.isCondition,instrsList:r.instrsList,instruction:r.instruction,indexInList:r.indexInList,parameterIndex:t,domEvent:e})},selection:C,onAddNewSubInstruction:u,onPasteSubInstructions:d,onMoveToSubInstruction:p,onMoveToSubInstructionsList:h,onSubInstructionClick:g,onSubInstructionDoubleClick:x,onSubInstructionContextMenu:m,onAddSubInstructionContextMenu:v,onSubParameterClick:b,disabled:y,renderObjectThumbnail:Z,screenType:k,windowSize:T,scope:S,resourcesManager:P,globalObjectsContainer:I,objectsContainer:E,projectScopedContainersAccessor:M,id:"".concat(L,"-").concat(i?"condition":"action","-").concat(e)},n.ptr)})),B={instrsList:o,isCondition:i},U=c.useRef(null),V=i?(0,f.jsx)(w.Trans,{id:"Add condition"}):(0,f.jsx)(w.Trans,{id:"Add action"}),H="touch"===k?kd:Zd,z=(0,rs.i)(c.useCallback((function(e){U.current&&v(U.current,B)}),[v,B,U]));return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(yd,{canDrop:function(e){return e.isCondition===i},drop:function(){h({isCondition:i,instrsList:o})},children:function(e){var o=e.connectDropTarget,s=e.isOver,c=e.canDrop;return o((0,f.jsxs)("div",{className:a,style:j,id:"".concat(L,"-").concat(i?"conditions":"actions"),children:[_,s&&(0,f.jsx)(Il,{canDrop:c}),(0,f.jsxs)("span",{onPointerEnter:function(){F(i&&vd()||!i&&bd())},onPointerLeave:function(){F(!1)},children:[(0,f.jsx)("button",(0,l.Z)((0,l.Z)({style:jd.addButton,className:"add-link",onClick:D,onContextMenu:function(e){e.stopPropagation(),v(e.currentTarget,B)}},z),{},{ref:U,id:n||"".concat(i?"add-condition-button":"add-action-button").concat(0===_.length?"-empty":""),title:t._(H),children:r||V})),R&&(0,f.jsx)("span",{style:jd.pasteButtonContainer,children:(0,f.jsx)("button",{style:jd.addButton,className:"add-link",onClick:N,children:i?(0,f.jsx)(w.Trans,{id:"(or paste conditions)"}):(0,f.jsx)(w.Trans,{id:"(or paste actions)"})})})]})]}))}})}})}var Td=n(64680),Sd=n.g.gd,Pd={container:{whiteSpace:"normal",overflowWrap:"anywhere",cursor:"pointer",marginBottom:1}},Id=function(e,t){var n=e.getType();return n===Sd.Variable.String?t._("Text"):n===Sd.Variable.Number?t._("Number"):n===Sd.Variable.Boolean?t._("Boolean"):n===Sd.Variable.Structure?t._("Structure"):n===Sd.Variable.Array?t._("Array"):"unknown"},Ed=function(e,t){var n=e.getType();return n===Sd.Variable.Structure||n===Sd.Variable.Array?t._(0===e.getChildrenCount()?{id:"No children"}:1===e.getChildrenCount()?{id:"1 child"}:{id:"{0} children",values:{0:e.getChildrenCount()}}):n===Sd.Variable.String?e.getString():n===Sd.Variable.Number?e.getValue().toString():n===Sd.Variable.Boolean?e.getBool()?t._({id:"True"}):t._({id:"False"}):null},Md=function(e){var t=e.variableName,n=e.variable,r=e.id,i=function(r){var i=e.disabled,a=(0,On.Kn)(n.getType());return(0,f.jsx)("span",{className:en()((0,Qt.Z)({},Sl.LC,i)),children:(0,f.jsx)(w.Trans,{id:"Declare <0><1/>{variableName}</0> as <2><3/>{0}</2> with <4>{1}</4>",values:{0:Id(n,r),1:Ed(n,r),variableName:t},components:[(0,f.jsx)("span",{}),(0,f.jsx)(Td.Z,{className:en()((0,Qt.Z)({},Sl.qv,!0))}),(0,f.jsx)("span",{}),(0,f.jsx)(a,{className:en()((0,Qt.Z)({},Sl.qv,!0))}),(0,f.jsx)("span",{})]})})};return(0,f.jsx)(w.I18n,{children:function(t){var n,a=t.i18n;return(0,f.jsx)("div",{style:Pd.container,className:en()((n={},(0,Qt.Z)(n,Sl.fm,!0),(0,Qt.Z)(n,Sl.KZ,e.selected),n)),onClick:function(t){t.stopPropagation(),"touch"===e.screenType&&e.selected?e.onDoubleClick():e.onClick()},onDoubleClick:function(t){t.stopPropagation(),e.onDoubleClick()},onKeyPress:function(t){(0,gn.ph)(t)?(e.onDoubleClick(),t.stopPropagation(),t.preventDefault()):(0,gn._x)(t)&&(e.onClick(),t.stopPropagation(),t.preventDefault())},tabIndex:0,id:r,children:i(a)})}})};function Ld(e){var t=e.variablesContainer,n=e.onVariableDeclarationClick,r=e.onVariableDeclarationDoubleClick,i=e.className,a=e.style,o=e.disabled,s=e.screenType,l=e.windowSize,c=e.idPrefix,u=(0,mt.mapFor)(0,t.count(),(function(e){var i=t.getAt(e),a=t.getNameAt(e),u={variablesContainer:t,variableName:a};return(0,f.jsx)(Md,{variableName:a,variable:i,onClick:function(){return n(u)},onDoubleClick:function(){return r(u)},selected:!1,disabled:o,screenType:s,windowSize:l,id:"".concat(c,"-variable-").concat(e)},i.ptr)}));return(0,f.jsx)("div",{className:i,style:a,id:"".concat(c,"-variables"),children:u})}var Ad={oneColumnContainer:{display:"flex",flexDirection:"column"},twoColumnsContainer:{display:"flex"}},Od=function(e){if("small"===e.windowSize)return(0,f.jsxs)("div",{style:Ad.oneColumnContainer,className:e.className,children:[e.renderConditionsList({style:{},className:"".concat(Sl.qW," ").concat(Sl.D8)}),e.renderActionsList({style:{},className:"".concat(Sl.b_," ").concat(Sl.D8)})]});var t=function(e){var t=.35;return Math.max(t,Math.min(.5,t+(.5-t)*(1600-e)/800))}(e.eventsSheetWidth)*e.eventsSheetWidth-e.leftIndentWidth;return(0,f.jsxs)("div",{style:Ad.twoColumnsContainer,className:e.className,children:[e.renderConditionsList({style:{width:"".concat(t,"px")},className:Sl.qW}),e.renderActionsList({className:Sl.b_})]})},Rd=n.g.gd,Fd={flex:1},Dd=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e,t=this,n=Rd.asStandardEvent(this.props.event);return(0,f.jsxs)("div",{className:en()((e={},(0,Qt.Z)(e,Sl.Pm,!0),(0,Qt.Z)(e,Sl.aw,this.props.selected),e)),children:[(0,f.jsx)(Ld,{variablesContainer:n.getVariables(),onVariableDeclarationClick:this.props.onVariableDeclarationClick,onVariableDeclarationDoubleClick:this.props.onVariableDeclarationDoubleClick,className:"local-variables-container",disabled:this.props.disabled,screenType:this.props.screenType,windowSize:this.props.windowSize,idPrefix:this.props.idPrefix}),(0,f.jsx)(Od,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,eventsSheetWidth:this.props.eventsSheetWidth,className:en()((0,Qt.Z)({},Sl.Jr,!0)),renderConditionsList:function(e){var r=e.style,i=e.className;return(0,f.jsx)(wd,{platform:t.props.project.getCurrentPlatform(),instrsList:n.getConditions(),style:r,className:i,selection:t.props.selection,areConditions:!0,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowSize:t.props.windowSize,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,projectScopedContainersAccessor:t.props.projectScopedContainersAccessor,idPrefix:t.props.idPrefix})},renderActionsList:function(e){var r=e.className;return(0,f.jsx)(wd,{platform:t.props.project.getCurrentPlatform(),instrsList:n.getActions(),style:(0,l.Z)({},Fd),className:r,selection:t.props.selection,areConditions:!1,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowSize:t.props.windowSize,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,projectScopedContainersAccessor:t.props.projectScopedContainersAccessor,idPrefix:t.props.idPrefix})}})]})}}]),n}(c.Component),Nd=n.g.gd,_d={container:{height:"2.5em",display:"flex",alignItems:"center",padding:5,overflow:"hidden"},title:{fontSize:"1.3em",width:"100%"}},Bd=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={editing:!1,editingPreviousValue:null},e._textField=null,e.edit=function(){if(!e.state.editing){var t=Nd.asGroupEvent(e.props.event);e.state.editingPreviousValue||e.setState({editingPreviousValue:t.getName()}),e.setState({editing:!0},(function(){e._textField&&e._textField.focus()}))}},e.endEditing=function(){e.setState({editing:!1}),Nd.asGroupEvent(e.props.event).getName()!==e.state.editingPreviousValue&&(e.props.onEndEditingEvent(),e.setState({editingPreviousValue:null}))},e}return(0,We.Z)(n,[{key:"render",value:function(){var e,t,n=this,r=Nd.asGroupEvent(this.props.event),i=r.getBackgroundColorR(),a=r.getBackgroundColorG(),o=r.getBackgroundColorB(),s=(i+a+o)/3>200?"black":"white";return(0,f.jsx)("div",{className:en()((e={},(0,Qt.Z)(e,Sl.Pm,!0),(0,Qt.Z)(e,Sl.aw,this.props.selected),e)),style:(0,l.Z)((0,l.Z)({},_d.container),{},{backgroundColor:"rgb(".concat(i,", ").concat(a,", ").concat(o,")")}),onClick:this.edit,onKeyUp:function(e){(0,gn._x)(e)&&n.edit()},tabIndex:0,id:"".concat(this.props.idPrefix,"-group-").concat(r.isFolded()?"folded":"unfolded"),children:this.state.editing?(0,f.jsx)(yi.ZP,{margin:"none",ref:function(e){return n._textField=e},value:r.getName(),translatableHintText:{id:"<Enter group name>"},onBlur:this.endEditing,onChange:function(e,t){r.setName(t),n.forceUpdate()},style:_d.title,inputStyle:{color:s,WebkitTextFillColor:s},fullWidth:!0,onKeyUp:function(e){(0,gn.W$)(e)&&n.endEditing()},onKeyDown:function(e){((0,gn.ph)(e)||(0,gn.Fc)(e))&&n.endEditing()},underlineShow:!1}):(0,f.jsx)("span",(0,l.Z)((0,l.Z)({className:en()((t={},(0,Qt.Z)(t,Sl.fm,!0),(0,Qt.Z)(t,Sl.LC,this.props.disabled),t)),style:(0,l.Z)((0,l.Z)({},_d.title),{},{color:s})},(0,is.Y)({editableText:"true"})),{},{children:r.getName()?r.getName():(0,f.jsx)(w.Trans,{id:"<Enter group name>"})}))})}}]),n}(c.Component),Ud=n.g.gd,Vd={width:"100%",fontSize:"inherit",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",padding:0,backgroundColor:"transparent",outline:0,border:0,lineHeight:"1.5em"},Hd={container:{display:"flex",flexWrap:"wrap",padding:5,overflow:"hidden",minHeight:"2.4em"},commentTextField:(0,l.Z)((0,l.Z)({},Vd),{},{minHeight:"0",resize:"none"}),commentSpan:(0,l.Z)((0,l.Z)({},Vd),{},{alignItems:"center",height:"100%",whiteSpace:"pre-wrap"})},zd=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={editing:!1,editingPreviousValue:null},e.edit=function(){if(!e.state.editing){var t=Ud.asCommentEvent(e.props.event);e.setState({editing:!0,editingPreviousValue:t.getComment()},(function(){var t=e._textField;t&&(t.focus(),t.selectionStart=t.value.length,t.selectionEnd=t.value.length),e.props.onUpdate()}))}},e.onChange=function(t){Ud.asCommentEvent(e.props.event).setComment(t.target.value),e._autoResizeTextArea(),e.forceUpdate()},e.endEditing=function(){if(e._textField){var t=Ud.asCommentEvent(e.props.event);e.state.editingPreviousValue!==t.getComment()&&e.props.onEndEditingEvent(),e.setState({editing:!1,editingPreviousValue:null},(function(){return e.props.onUpdate()}))}},e._getCommentHTML=function(){return Ud.asCommentEvent(e.props.event).getComment().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")},e._autoResizeTextArea=function(){if(e._textField){var t=e._textField.style.height;e._textField.style.height="auto",e._textField.style.height=e._textField.scrollHeight+"px",t!==e._textField.style.height&&e.props.onUpdate()}},e}return(0,We.Z)(n,[{key:"componentDidUpdate",value:function(){this._autoResizeTextArea()}},{key:"render",value:function(){var e,t,n=this,r=Ud.asCommentEvent(this.props.event),i="#".concat((0,Xn.vq)(r.getBackgroundColorRed(),r.getBackgroundColorGreen(),r.getBackgroundColorBlue())),a="#".concat((0,Xn.vq)(r.getTextColorRed(),r.getTextColorGreen(),r.getTextColorBlue()));return(0,f.jsx)("div",{className:en()((e={},(0,Qt.Z)(e,Sl.Pm,!0),(0,Qt.Z)(e,Sl.aw,this.props.selected),e)),style:(0,l.Z)((0,l.Z)({},Hd.container),{},{backgroundColor:i}),onClick:this.edit,onKeyUp:function(e){!n.state.editing&&(0,gn._x)(e)&&n.edit()},tabIndex:0,id:"".concat(this.props.idPrefix,"-comment"),children:this.state.editing?(0,f.jsx)("textarea",{ref:function(e){return n._textField=e},value:r.getComment(),placeholder:"...",onBlur:this.endEditing,onChange:this.onChange,style:(0,l.Z)((0,l.Z)({},Hd.commentTextField),{},{color:a}),id:"comment-title",onKeyDown:function(e){((0,gn.W$)(e)||(0,gn.Fc)(e))&&n.endEditing()},rows:1,spellCheck:"false"}):(0,f.jsx)("span",(0,l.Z)({className:en()((t={},(0,Qt.Z)(t,Sl.fm,!0),(0,Qt.Z)(t,Sl.LC,this.props.disabled),t)),style:(0,l.Z)((0,l.Z)({},Hd.commentSpan),{},{color:a}),dangerouslySetInnerHTML:{__html:this._getCommentHTML()}},(0,is.Y)({editableText:"true"})))})}}]),n}(c.Component),Wd=n(64207),Gd={paddingBottom:10,overflowY:"auto",overflowX:"hidden",minHeight:30,maxHeight:400,zIndex:5};function Yd(e){var t=c.useRef(null),n=c.useRef(null),r=(0,be.UQ)().isMobile;return(0,f.jsx)(rt.Z,{mouseEvent:"onMouseUp",onClickAway:function(t){(0,Wd.le)(t.composedPath())||(t instanceof MouseEvent?e.onApply():setTimeout((function(){e.onApply()}),50))},children:(0,f.jsx)(vs.Z,{open:e.open,anchorEl:e.anchorEl,style:(0,l.Z)((0,l.Z)({},Gd),{},{width:r?"100%":"auto",minWidth:r?"auto":320,maxWidth:r?320:600}),placement:"bottom-start",onKeyDown:function(r){(0,gn.W$)(r)?e.onRequestClose():(0,gn.Fc)(r)?e.onApply():(0,gn.ph)(r)&&(r.stopPropagation(),r.preventDefault(),e.onApply()),(0,gn.xj)(r)?r.target&&r.target===n.current&&(r.stopPropagation(),r.preventDefault(),t.current&&t.current.focus()):(0,gn.bo)(r)&&r.target&&r.target===t.current&&(r.stopPropagation(),r.preventDefault(),n.current&&n.current.focus())},children:(0,f.jsxs)(Ki.Z,{children:[(0,f.jsx)("div",{tabIndex:0,ref:t}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(M.x1,{children:e.children})}),(0,f.jsx)("div",{tabIndex:0,ref:n})]})})})}var qd=n.g.gd,Jd={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1},objectContainer:{marginLeft:"3px",marginRight:"2px"}},Xd=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._objectField=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=qd.asForEachEvent(e.props.event).getObjectToPick(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._objectField&&e._objectField.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=qd.asForEachEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setObjectToPick(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,We.Z)(n,[{key:"render",value:function(){var e,t,n=this,r=qd.asForEachEvent(this.props.event),i=r.getObjectToPick(),a=this.props.projectScopedContainersAccessor.get().getObjectsContainersList().hasObjectOrGroupNamed(i);return(0,f.jsxs)("div",{style:Jd.container,className:en()((e={},(0,Qt.Z)(e,Sl.Pm,!0),(0,Qt.Z)(e,Sl.aw,this.props.selected),(0,Qt.Z)(e,Sl.Jr,!0),e)),children:[(0,f.jsx)("div",{children:(0,f.jsx)(w.Trans,{id:"Repeat for each instance of<0>{0}</0>:",values:{0:i?(0,f.jsxs)("span",{children:[this.props.renderObjectThumbnail(i),a?i:(0,f.jsx)("span",{className:en()((0,Qt.Z)({},Sl.FS,!0)),children:i})]}):(0,f.jsx)("span",{className:"instruction-missing-parameter",children:(0,f.jsx)(w.Trans,{id:"<Select an object>"})})},components:[(0,f.jsx)("span",{className:en()((t={},(0,Qt.Z)(t,Sl.fm,!0),(0,Qt.Z)(t,Sl.LU,!0),(0,Qt.Z)(t,Sl.Sv,!0),(0,Qt.Z)(t,"object",!0),t)),style:Jd.objectContainer,onClick:this.edit,onKeyPress:function(e){(0,gn._x)(e)&&n.edit(e)},tabIndex:0})]})}),(0,f.jsx)(Od,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,eventsSheetWidth:this.props.eventsSheetWidth,renderConditionsList:function(e){var t=e.style,i=e.className;return(0,f.jsx)(wd,{platform:n.props.project.getCurrentPlatform(),instrsList:r.getConditions(),style:t,className:i,selection:n.props.selection,areConditions:!0,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowSize:n.props.windowSize,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,projectScopedContainersAccessor:n.props.projectScopedContainersAccessor,idPrefix:n.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,f.jsx)(wd,{platform:n.props.project.getCurrentPlatform(),instrsList:r.getActions(),style:(0,l.Z)({},Jd.actionsList),className:t,selection:n.props.selection,areConditions:!1,onAddNewInstruction:n.props.onAddNewInstruction,onPasteInstructions:n.props.onPasteInstructions,onMoveToInstruction:n.props.onMoveToInstruction,onMoveToInstructionsList:n.props.onMoveToInstructionsList,onInstructionClick:n.props.onInstructionClick,onInstructionDoubleClick:n.props.onInstructionDoubleClick,onInstructionContextMenu:n.props.onInstructionContextMenu,onAddInstructionContextMenu:n.props.onAddInstructionContextMenu,onParameterClick:n.props.onParameterClick,disabled:n.props.disabled,renderObjectThumbnail:n.props.renderObjectThumbnail,screenType:n.props.screenType,windowSize:n.props.windowSize,scope:n.props.scope,resourcesManager:n.props.project.getResourcesManager(),globalObjectsContainer:n.props.globalObjectsContainer,objectsContainer:n.props.objectsContainer,projectScopedContainersAccessor:n.props.projectScopedContainersAccessor,idPrefix:n.props.idPrefix})}}),(0,f.jsx)(Yd,{open:this.state.editing,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)(uc,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,projectScopedContainersAccessor:this.props.projectScopedContainersAccessor,value:i,onChange:function(e){r.setObjectToPick(e),n.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return n._objectField=e}})})]})}}]),n}(c.Component),Kd=n.g.gd,Qd=function(e,t){var n=Vc(t,e.get());return(0,On.ik)(n===Kd.VariablesContainer.Unknown?Kd.VariablesContainer.Scene:n)},$d={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1},variableContainer:{marginLeft:"3px",marginRight:"2px"},eventLabel:{marginLeft:"5px",whiteSpace:"normal",wordWrap:"break-word"}},ep=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._valueIteratorField=null,e._keyIteratorField=null,e._iterableField=null,e.state={editingValueIteratorVariableName:!1,editingKeyIteratorVariableName:!1,editingIterableVariableName:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t,n){var r=Kd.asForEachChildVariableEvent(e.props.event),i=r.getValueIteratorVariableName(),a=r.getKeyIteratorVariableName(),o=r.getIterableVariableName();setTimeout((function(){return e.setState({editingValueIteratorVariableName:"iteratorValue"===t,editingKeyIteratorVariableName:"iteratorKey"===t,editingIterableVariableName:"iterable"===t,editingPreviousValue:"iterable"===t?o:"iteratorValue"===t?i:a,anchorEl:n},(function(){setTimeout((function(){var n="iterable"===t?e._iterableField:"iteratorValue"===t?e._valueIteratorField:e._keyIteratorField;n&&n.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=Kd.asForEachChildVariableEvent(e.props.event),n=e.state,r=n.editingPreviousValue,i=n.editingIterableVariableName,a=n.editingValueIteratorVariableName,o=n.editingKeyIteratorVariableName;null!=r&&(i?t.setIterableVariableName(r):a?t.setValueIteratorVariableName(r):o&&t.setKeyIteratorVariableName(r),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editingKeyIteratorVariableName:!1,editingValueIteratorVariableName:!1,editingIterableVariableName:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,We.Z)(n,[{key:"render",value:function(){var e,t,n,r,i=this,a=Kd.asForEachChildVariableEvent(this.props.event),o=a.getValueIteratorVariableName(),s=a.getKeyIteratorVariableName(),c=a.getIterableVariableName(),u=Qd(this.props.projectScopedContainersAccessor,o),d=Qd(this.props.projectScopedContainersAccessor,s),p=Qd(this.props.projectScopedContainersAccessor,c);return(0,f.jsxs)("div",{style:$d.container,className:en()((e={},(0,Qt.Z)(e,Sl.Jr,!0),(0,Qt.Z)(e,Sl.Pm,!0),(0,Qt.Z)(e,Sl.aw,this.props.selected),e)),children:[(0,f.jsx)("div",{style:$d.eventLabel,children:(0,f.jsx)(w.Trans,{id:"<0>For every child in<1><2/>{0}</1>, store the child in variable<3><4/>{1}</3>, the child name in<5><6/>{2}</5>and do:</0>",values:{0:0!==c.length?(0,f.jsx)("span",{children:c}):(0,f.jsx)("span",{className:"instruction-missing-parameter",children:(0,f.jsx)(w.Trans,{id:"<Select a variable>"})}),1:0!==o.length?(0,f.jsx)("span",{children:o}):(0,f.jsx)("span",{children:(0,f.jsx)(w.Trans,{id:"<Select a variable> (optional)"})}),2:0!==s.length?(0,f.jsx)("span",{children:s}):(0,f.jsx)("span",{children:(0,f.jsx)(w.Trans,{id:"<Select a variable> (optional)"})})},components:[(0,f.jsx)("span",{className:en()((0,Qt.Z)({},Sl.LC,this.props.disabled))}),(0,f.jsx)("span",{className:en()((t={},(0,Qt.Z)(t,Sl.fm,!0),(0,Qt.Z)(t,Sl.LU,!0),(0,Qt.Z)(t,Sl.Sv,!0),(0,Qt.Z)(t,"scenevar",!0),t)),style:$d.variableContainer,onClick:function(e){return i.edit("iterable",e.currentTarget)},onKeyPress:function(e){(0,gn._x)(e)&&i.edit("iterable",e.currentTarget)},tabIndex:0}),(0,f.jsx)(p,{className:en()((0,Qt.Z)({},Sl.qv,!0))}),(0,f.jsx)("span",{className:en()((n={},(0,Qt.Z)(n,Sl.fm,!0),(0,Qt.Z)(n,Sl.LU,!0),(0,Qt.Z)(n,Sl.Sv,!0),(0,Qt.Z)(n,"scenevar",!0),n)),style:$d.variableContainer,onClick:function(e){return i.edit("iteratorValue",e.currentTarget)},onKeyPress:function(e){(0,gn._x)(e)&&i.edit("iteratorValue",e.currentTarget)},tabIndex:0}),(0,f.jsx)(u,{className:en()((0,Qt.Z)({},Sl.qv,!0))}),(0,f.jsx)("span",{className:en()((r={},(0,Qt.Z)(r,Sl.fm,!0),(0,Qt.Z)(r,Sl.LU,!0),(0,Qt.Z)(r,Sl.Sv,!0),(0,Qt.Z)(r,"scenevar",!0),r)),style:$d.variableContainer,onClick:function(e){return i.edit("iteratorKey",e.currentTarget)},onKeyPress:function(e){(0,gn._x)(e)&&i.edit("iteratorKey",e.currentTarget)},tabIndex:0}),(0,f.jsx)(d,{className:en()((0,Qt.Z)({},Sl.qv,!0))})]})}),(0,f.jsx)(Od,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,eventsSheetWidth:this.props.eventsSheetWidth,renderConditionsList:function(e){var t=e.style,n=e.className;return(0,f.jsx)(wd,{platform:i.props.project.getCurrentPlatform(),instrsList:a.getConditions(),style:t,className:n,selection:i.props.selection,areConditions:!0,onAddNewInstruction:i.props.onAddNewInstruction,onPasteInstructions:i.props.onPasteInstructions,onMoveToInstruction:i.props.onMoveToInstruction,onMoveToInstructionsList:i.props.onMoveToInstructionsList,onInstructionClick:i.props.onInstructionClick,onInstructionDoubleClick:i.props.onInstructionDoubleClick,onInstructionContextMenu:i.props.onInstructionContextMenu,onAddInstructionContextMenu:i.props.onAddInstructionContextMenu,onParameterClick:i.props.onParameterClick,disabled:i.props.disabled,renderObjectThumbnail:i.props.renderObjectThumbnail,screenType:i.props.screenType,windowSize:i.props.windowSize,scope:i.props.scope,resourcesManager:i.props.project.getResourcesManager(),globalObjectsContainer:i.props.globalObjectsContainer,objectsContainer:i.props.objectsContainer,projectScopedContainersAccessor:i.props.projectScopedContainersAccessor,idPrefix:i.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,f.jsx)(wd,{platform:i.props.project.getCurrentPlatform(),instrsList:a.getActions(),style:(0,l.Z)({},$d.actionsList),className:t,selection:i.props.selection,areConditions:!1,onAddNewInstruction:i.props.onAddNewInstruction,onPasteInstructions:i.props.onPasteInstructions,onMoveToInstruction:i.props.onMoveToInstruction,onMoveToInstructionsList:i.props.onMoveToInstructionsList,onInstructionClick:i.props.onInstructionClick,onInstructionDoubleClick:i.props.onInstructionDoubleClick,onInstructionContextMenu:i.props.onInstructionContextMenu,onAddInstructionContextMenu:i.props.onAddInstructionContextMenu,onParameterClick:i.props.onParameterClick,disabled:i.props.disabled,renderObjectThumbnail:i.props.renderObjectThumbnail,screenType:i.props.screenType,windowSize:i.props.windowSize,scope:i.props.scope,resourcesManager:i.props.project.getResourcesManager(),globalObjectsContainer:i.props.globalObjectsContainer,objectsContainer:i.props.objectsContainer,projectScopedContainersAccessor:i.props.projectScopedContainersAccessor,idPrefix:i.props.idPrefix})}}),(0,f.jsx)(Yd,{open:this.state.editingValueIteratorVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)(Uc,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,projectScopedContainersAccessor:this.props.projectScopedContainersAccessor,value:o,onChange:function(e){a.setValueIteratorVariableName(e),i.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return i._valueIteratorField=e}})}),(0,f.jsx)(Yd,{open:this.state.editingKeyIteratorVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)(Uc,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,projectScopedContainersAccessor:this.props.projectScopedContainersAccessor,value:s,onChange:function(e){a.setKeyIteratorVariableName(e),i.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return i._keyIteratorField=e}})}),(0,f.jsx)(Yd,{open:this.state.editingIterableVariableName,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)(Uc,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,projectScopedContainersAccessor:this.props.projectScopedContainersAccessor,value:c,onChange:function(e){a.setIterableVariableName(e),i.props.onUpdate()},isInline:!0,onRequestClose:this.cancelEditing,onApply:this.endEditing,ref:function(e){return i._iterableField=e}})})]})}}]),n}(c.Component),tp=n.g.gd,np={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1}},rp=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._field=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=tp.asRepeatEvent(e.props.event).getRepeatExpression().getPlainString(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._field&&e._field.focus()}),10)}))}),10)},e.cancelEditing=function(){e.endEditing();var t=tp.asRepeatEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setRepeatExpressionPlainString(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl;t&&t.focus(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e}return(0,We.Z)(n,[{key:"render",value:function(){var e,t,n,r=this,i=tp.asRepeatEvent(this.props.event),a=i.getRepeatExpression(),o=a.getPlainString(),s=new tp.ExpressionValidator(tp.JsPlatform.get(),this.props.projectScopedContainersAccessor.get(),"number","");a.getRootNode().visit(s);var c=0===s.getAllErrors().size();return s.delete(),(0,f.jsxs)("div",{style:np.container,className:en()((e={},(0,Qt.Z)(e,Sl.Pm,!0),(0,Qt.Z)(e,Sl.aw,this.props.selected),(0,Qt.Z)(e,Sl.Jr,!0),e)),children:[(0,f.jsx)("div",{children:(0,f.jsx)("span",{className:en()((t={},(0,Qt.Z)(t,Sl.fm,!0),(0,Qt.Z)(t,Sl.LC,this.props.disabled),t)),onClick:this.edit,onKeyPress:function(e){(0,gn._x)(e)&&r.edit(e)},tabIndex:0,children:(0,f.jsx)(w.Trans,{id:"Repeat <0>{0}</0> times:",values:{0:o?(0,f.jsx)("span",{children:c?o:(0,f.jsx)("span",{className:en()((0,Qt.Z)({},Sl.FS,!0)),children:o})}):(0,f.jsx)("span",{className:"instruction-missing-parameter"})},components:[(0,f.jsx)("span",{className:en()((n={},(0,Qt.Z)(n,Sl.fm,!0),(0,Qt.Z)(n,Sl.LU,!0),(0,Qt.Z)(n,"number",!0),n)),onClick:this.edit,onKeyPress:function(e){(0,gn._x)(e)&&r.edit(e)},tabIndex:0})]})})}),(0,f.jsx)(Od,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,eventsSheetWidth:this.props.eventsSheetWidth,renderConditionsList:function(e){var t=e.style,n=e.className;return(0,f.jsx)(wd,{platform:r.props.project.getCurrentPlatform(),instrsList:i.getConditions(),style:t,className:n,selection:r.props.selection,areConditions:!0,onAddNewInstruction:r.props.onAddNewInstruction,onPasteInstructions:r.props.onPasteInstructions,onMoveToInstruction:r.props.onMoveToInstruction,onMoveToInstructionsList:r.props.onMoveToInstructionsList,onInstructionClick:r.props.onInstructionClick,onInstructionDoubleClick:r.props.onInstructionDoubleClick,onInstructionContextMenu:r.props.onInstructionContextMenu,onAddInstructionContextMenu:r.props.onAddInstructionContextMenu,onParameterClick:r.props.onParameterClick,disabled:r.props.disabled,renderObjectThumbnail:r.props.renderObjectThumbnail,screenType:r.props.screenType,windowSize:r.props.windowSize,scope:r.props.scope,resourcesManager:r.props.project.getResourcesManager(),globalObjectsContainer:r.props.globalObjectsContainer,objectsContainer:r.props.objectsContainer,projectScopedContainersAccessor:r.props.projectScopedContainersAccessor,idPrefix:r.props.idPrefix})},renderActionsList:function(e){var t=e.className;return(0,f.jsx)(wd,{platform:r.props.project.getCurrentPlatform(),instrsList:i.getActions(),style:(0,l.Z)({},np.actionsList),className:t,selection:r.props.selection,areConditions:!1,onAddNewInstruction:r.props.onAddNewInstruction,onPasteInstructions:r.props.onPasteInstructions,onMoveToInstruction:r.props.onMoveToInstruction,onMoveToInstructionsList:r.props.onMoveToInstructionsList,onInstructionClick:r.props.onInstructionClick,onInstructionDoubleClick:r.props.onInstructionDoubleClick,onInstructionContextMenu:r.props.onInstructionContextMenu,onAddInstructionContextMenu:r.props.onAddInstructionContextMenu,onParameterClick:r.props.onParameterClick,disabled:r.props.disabled,renderObjectThumbnail:r.props.renderObjectThumbnail,screenType:r.props.screenType,windowSize:r.props.windowSize,scope:r.props.scope,resourcesManager:r.props.project.getResourcesManager(),globalObjectsContainer:r.props.globalObjectsContainer,objectsContainer:r.props.objectsContainer,projectScopedContainersAccessor:r.props.projectScopedContainersAccessor,idPrefix:r.props.idPrefix})}}),(0,f.jsx)(Yd,{open:this.state.editing,anchorEl:this.state.anchorEl,onRequestClose:this.cancelEditing,onApply:this.endEditing,children:(0,f.jsx)(vc,{project:this.props.project,scope:this.props.scope,globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,projectScopedContainersAccessor:this.props.projectScopedContainersAccessor,value:o,onChange:function(e){i.setRepeatExpressionPlainString(e),r.props.onUpdate()},parameterRenderingService:rd,isInline:!0,ref:function(e){return r._field=e}})})]})}}]),n}(c.Component),ip=n.g.gd,ap={container:{display:"flex",flexDirection:"column"},instructionsContainer:{display:"flex"},actionsList:{flex:1}},op=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e,t=this,n=ip.asWhileEvent(this.props.event);return(0,f.jsxs)("div",{style:ap.container,className:en()((e={},(0,Qt.Z)(e,Sl.Pm,!0),(0,Qt.Z)(e,Sl.aw,this.props.selected),(0,Qt.Z)(e,Sl.Jr,!0),e)),children:[(0,f.jsx)("div",{className:en()((0,Qt.Z)({},Sl.LC,this.props.disabled)),children:(0,f.jsx)(w.Trans,{id:"While these conditions are true:"})}),(0,f.jsx)(wd,{platform:this.props.project.getCurrentPlatform(),instrsList:n.getWhileConditions(),style:{},className:Sl.qW,selection:this.props.selection,areConditions:!0,onAddNewInstruction:this.props.onAddNewInstruction,onPasteInstructions:this.props.onPasteInstructions,onMoveToInstruction:this.props.onMoveToInstruction,onMoveToInstructionsList:this.props.onMoveToInstructionsList,onInstructionClick:this.props.onInstructionClick,onInstructionDoubleClick:this.props.onInstructionDoubleClick,onInstructionContextMenu:this.props.onInstructionContextMenu,onAddInstructionContextMenu:this.props.onAddInstructionContextMenu,onParameterClick:this.props.onParameterClick,disabled:this.props.disabled,renderObjectThumbnail:this.props.renderObjectThumbnail,screenType:this.props.screenType,windowSize:this.props.windowSize,scope:this.props.scope,resourcesManager:this.props.project.getResourcesManager(),globalObjectsContainer:this.props.globalObjectsContainer,objectsContainer:this.props.objectsContainer,projectScopedContainersAccessor:this.props.projectScopedContainersAccessor,idPrefix:this.props.idPrefix}),(0,f.jsx)("div",{className:en()((0,Qt.Z)({},Sl.LC,this.props.disabled)),children:(0,f.jsx)(w.Trans,{id:"Repeat these:"})}),(0,f.jsx)(Od,{leftIndentWidth:this.props.leftIndentWidth,windowSize:this.props.windowSize,eventsSheetWidth:this.props.eventsSheetWidth,renderConditionsList:function(e){var r=e.style,i=e.className;return(0,f.jsx)(wd,{platform:t.props.project.getCurrentPlatform(),instrsList:n.getConditions(),style:r,className:i,selection:t.props.selection,areConditions:!0,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowSize:t.props.windowSize,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,projectScopedContainersAccessor:t.props.projectScopedContainersAccessor,idPrefix:t.props.idPrefix})},renderActionsList:function(e){var r=e.className;return(0,f.jsx)(wd,{platform:t.props.project.getCurrentPlatform(),instrsList:n.getActions(),style:(0,l.Z)({},ap.actionsList),className:r,selection:t.props.selection,areConditions:!1,onAddNewInstruction:t.props.onAddNewInstruction,onPasteInstructions:t.props.onPasteInstructions,onMoveToInstruction:t.props.onMoveToInstruction,onMoveToInstructionsList:t.props.onMoveToInstructionsList,onInstructionClick:t.props.onInstructionClick,onInstructionDoubleClick:t.props.onInstructionDoubleClick,onInstructionContextMenu:t.props.onInstructionContextMenu,onAddInstructionContextMenu:t.props.onAddInstructionContextMenu,onParameterClick:t.props.onParameterClick,disabled:t.props.disabled,renderObjectThumbnail:t.props.renderObjectThumbnail,screenType:t.props.screenType,windowSize:t.props.windowSize,scope:t.props.scope,resourcesManager:t.props.project.getResourcesManager(),globalObjectsContainer:t.props.globalObjectsContainer,objectsContainer:t.props.objectsContainer,projectScopedContainersAccessor:t.props.projectScopedContainersAccessor,idPrefix:t.props.idPrefix})}})]})}}]),n}(c.Component),sp=function(e,t,n){if(!n||!e)return[];var a,o=[],s=[],l=(0,i.Z)(ku(n));try{for(l.s();!(a=l.n()).done;){var c=a.value;c.getName()!==t&&(c.getAssociatedLayout()===e?o.push(c):s.push(c))}}catch(u){l.e(u)}finally{l.f()}return[].concat((0,r.Z)(o.map((function(e){return{text:e.getName(),value:e.getName()}}))),[{type:"separator"}],(0,r.Z)(s.map((function(e){return{text:e.getName(),value:e.getName()}}))))},lp=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"focus",value:function(){this._field&&this._field.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.onChange,i=t.onRequestClose,a=t.onApply,o=t.isInline,s=t.project,l=t.sceneName,c=t.externalEventsName;return(0,f.jsx)(dr.ZP,{margin:this.props.isInline?"none":"dense",fullWidth:!0,id:"external-events-field",value:n,onChange:r,onRequestClose:i,onApply:a,dataSource:sp(l,c,s),openOnFocus:!o,ref:function(t){return e._field=t}})}}]),n}(c.Component),cp=n(70931),up=n.g.gd,dp={container:{height:"4em",display:"flex",alignItems:"center",padding:5},title:{fontSize:"1.2em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},openInNewIcon:{fontSize:"1.5em"}},pp=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._externalEventsAutoComplete=null,e.state={editing:!1,editingPreviousValue:null,anchorEl:null},e.edit=function(t){var n=up.asLinkEvent(e.props.event).getTarget(),r=t.currentTarget;setTimeout((function(){return e.setState({editing:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._externalEventsAutoComplete&&e._externalEventsAutoComplete.focus()}),10)}))}),10)},e.openTarget=function(t){var n=e.props,r=n.project,i=n.event,a=n.onOpenLayout,o=n.onOpenExternalEvents,s=up.asLinkEvent(i).getTarget();r.hasExternalEventsNamed(s)?o(s):r.hasLayoutNamed(s)?a(s):(0,bi.T4)(t._({id:"The specified external events do not exist in the game. Be sure that the name is correctly spelled or create them using the project manager."}))},e.cancelEditing=function(){e.endEditing();var t=up.asLinkEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setTarget(n),e.forceUpdate())},e.endEditing=function(){var t=e.state.anchorEl,n=up.asLinkEvent(e.props.event);t&&t.focus(),e.state.editingPreviousValue!==n.getTarget()&&e.props.onEndEditingEvent(),e.setState({editing:!1,editingPreviousValue:null,anchorEl:null})},e.isLinkedToWrongLayout=function(t){var n=e.props.scope,r=n.project,i=n.layout;return!!i&&r.hasExternalEventsNamed(t)&&r.getExternalEvents(t).getAssociatedLayout()!==i.getName()},e.isInvalidLink=function(t){var n=e.props.scope.project;return t.length>0&&!n.hasExternalEventsNamed(t)&&!n.hasLayoutNamed(t)},e}return(0,We.Z)(n,[{key:"render",value:function(){var e=this,t=up.asLinkEvent(this.props.event),n=t.getTarget();return(0,f.jsx)(w.I18n,{children:function(r){var i,a=r.i18n;return(0,f.jsxs)("div",{className:en()((i={},(0,Qt.Z)(i,Sl.Pm,!0),(0,Qt.Z)(i,Sl.aw,e.props.selected),(0,Qt.Z)(i,Sl.NJ,!0),i)),style:dp.container,id:"".concat(e.props.idPrefix,"-link"),children:[(0,f.jsx)("span",{style:dp.title,className:en()((0,Qt.Z)({},Sl.LC,e.props.disabled)),children:e.props.scope.layout?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(w.Trans,{id:"Include events from"})," ",(0,f.jsx)("i",{className:en()((0,Qt.Z)({},Sl.fm,!0)),onClick:e.edit,onKeyPress:function(t){(0,gn._x)(t)&&e.edit(t)},tabIndex:0,children:e.isInvalidLink(n)?(0,f.jsx)("span",{className:en()((0,Qt.Z)({},Sl.FS,!0)),children:n}):e.isLinkedToWrongLayout(n)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(re.ZP,{title:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Owned by another scene"})}),(0,f.jsx)(N.Z,{size:"body",children:(0,f.jsx)(w.Trans,{id:"Ensure this scene has the same objects, behaviors and variables as the ones used in these events."})})]}),children:(0,f.jsx)(cp.Z,{className:en()((0,Qt.Z)({},Sl.qv,!0))})}),n]}):n||(0,f.jsx)(w.Trans,{id:"<Enter the name of external events>"})})," "]}):(0,f.jsx)(w.Trans,{id:"Links can't be used outside of a scene."})}),(0,f.jsx)($.Z,{onClick:function(){return e.openTarget(a)},disabled:!n,children:(0,f.jsx)(so.Z,{style:dp.openInNewIcon})}),(0,f.jsx)(Yd,{open:e.state.editing,anchorEl:e.state.anchorEl,onRequestClose:e.cancelEditing,onApply:e.endEditing,children:(0,f.jsx)(lp,{project:e.props.project,value:n,sceneName:e.props.scope.layout?e.props.scope.layout.getName():void 0,externalEventsName:e.props.scope.externalEvents?e.props.scope.externalEvents.getName():void 0,onChange:function(n){t.setTarget(n),e.props.onUpdate()},isInline:!0,onRequestClose:e.cancelEditing,onApply:e.endEditing,ref:function(t){return e._externalEventsAutoComplete=t}})})]})}})}}]),n}(c.Component),fp=n(39949),hp=n(74149),gp=F()("fs"),mp=F()("path"),xp=["global-three.d.ts","global-pixi.d.ts","pixi-particles-pixi-renderer.d.ts","pixi-tilemap.d.ts","pixi.js","three.js"],vp={scrollBeyondLastLine:!1,minimap:{enabled:!1}},bp=!1,Cp=!1,jp=function(e){(0,Zi.Z)(r,e);var t=(0,ki.Z)(r);function r(){var e;(0,ze.Z)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={MonacoEditor:null,error:null},e.setupEditorThemes=function(e){Cp||(Cp=!0,O().forEach((function(t){t.themeData&&e.editor.defineTheme(t.themeName,t.themeData)})))},e.setUpSaveOnEditorBlur=function(t){t.onDidBlurEditorText(e.props.onBlur)},e.setUpEditorFocus=function(t){t.onDidFocusEditorText(e.props.onFocus)},e.setupEditorCompletions=function(t,n){e.setUpEditorFocus(t),e.setUpSaveOnEditorBlur(t),bp||(bp=!0,n.languages.typescript.javascriptDefaults.setCompilerOptions({target:n.languages.typescript.ScriptTarget.ES6,allowNonTsExtensions:!0,allowJs:!0,checkJs:!0}),function(e){var t=function(t){return gp.readdir(t,(function(n,r){n?console.error("Unable to read GDJS files for setting up autocompletions:",n):r.forEach((function(n){var r=gp.lstatSync(mp.join(t,n)).isDirectory();if((n.endsWith(".ts")||n.endsWith(".js"))&&!xp.includes(n)&&!r){var i=mp.join(t,n);gp.readFile(i,"utf8",(function(t,n){t?console.error("Unable to read ".concat(i," for setting up autocompletions:"),t):e.languages.typescript.javascriptDefaults.addExtraLib(n,i)}))}}))}))},n=function t(n){return gp.readdir(n,(function(r,i){r?console.error("Unable to read GDJS files for setting up autocompletions:",r):i.forEach((function(r){var i=mp.join(n,r);gp.lstatSync(i).isDirectory()?t(i):(r.endsWith(".ts")||r.endsWith(".js"))&&gp.readFile(i,"utf8",(function(t,n){t?console.error("Unable to read ".concat(i," for setting up autocompletions:"),t):e.languages.typescript.javascriptDefaults.addExtraLib(n,i)}))}))}))};(0,hp.findGDJS)().then((function(r){var i=r.gdjsRoot,a=mp.join(i,"Runtime-sources"),o=mp.join(a,"types"),s=mp.join(a,"libs"),l=mp.join(a,"pixi-renderers"),c=mp.join(a,"howler-sound-manager"),u=mp.join(a,"fontfaceobserver-font-manager"),d=mp.join(a,"Extensions"),p=mp.join(a,"events-tools"),f=mp.join(o,"three"),h=mp.join(o,"pixi");t(a),t(o),t(s),t(l),t(c),t(u),t(p),n(f),n(h),gp.readdir(d,(function(e,n){e?console.error("Unable to read Extensions folders for setting up autocompletions:",e):n.filter((function(e){return!e.endsWith(".txt")&&!e.endsWith(".md")&&!e.endsWith(".flow.js")&&!e.endsWith(".d.ts")&&!e.endsWith(".gitignore")})).forEach((function(e){return t(mp.join(d,e))}))})),e.languages.typescript.javascriptDefaults.addExtraLib("\n/** Represents the scene being played. */\nvar runtimeScene = new gdjs.RuntimeScene();\n\n/**\n * The instances of objects that are passed to your JavaScript function.\n * @type {gdjs.RuntimeObject[]}\n */\nvar objects = [];\n\n/**\n * @type {EventsFunctionContext}\n */\nvar eventsFunctionContext = {};\n","this-mock-the-context-of-events.js")}))}(n)),e.props.onEditorMounted&&e.props.onEditorMounted()},e._handleContextMenu=function(e){e.preventDefault(),e.stopPropagation()},e}return(0,We.Z)(r,[{key:"componentDidMount",value:function(){this.loadMonacoEditor()}},{key:"handleLoadError",value:function(e){this.setState({error:e})}},{key:"loadMonacoEditor",value:function(){var e=this;this.setState({error:null}),window.MonacoEnvironment={getWorkerUrl:function(e,t){return"external/monaco-editor-min/vs/base/worker/workerMain.js"}},n.e(2462).then(n.bind(n,37848)).then((function(t){return e.setState({MonacoEditor:t.default})})).catch(this.handleLoadError)}},{key:"render",value:function(){var e=this,t=this.state,n=t.MonacoEditor;return t.error?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Unable to load the code editor"})}),(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Retry"}),onClick:this.loadMonacoEditor})]}):n?(0,f.jsx)("div",{onContextMenu:this._handleContextMenu,children:(0,f.jsx)(D.ZP.Consumer,{children:function(t){var r=t.values;return(0,f.jsx)(n,{width:e.props.width||600,height:e.props.height||200,language:"javascript",theme:r.codeEditorThemeName,value:e.props.value,onChange:e.props.onChange,editorWillMount:e.setupEditorThemes,editorDidMount:e.setupEditorCompletions,options:(0,l.Z)((0,l.Z)({},vp),{},{fontSize:r.eventsSheetZoomLevel,wordWrap:"on"})})}})}):(0,f.jsx)(Oe.Z,{})}}]),r}(c.Component),yp=n(29324),Zp=n.g.gd,kp={container:{minHeight:30,display:"flex",flexDirection:"column",backgroundColor:"#1e1e1e"},wrappingText:{fontFamily:'"Lucida Console", Monaco, monospace',fontSize:"0.95em",paddingLeft:5,paddingRight:5,paddingTop:2,paddingBottom:2,margin:0,backgroundColor:"#1e1e1e",color:"#d4d4d4",overflowX:"hidden",maxWidth:"100%",whiteSpace:"normal",wordBreak:"normal",overflowWrap:"anywhere"},comment:{color:"#777"},commentLink:{cursor:"pointer",color:"#777",textDecoration:"underline"},expandIcon:{color:"#d4d4d4"}},wp=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._objectField=null,e.state={editingObject:!1,editingPreviousValue:null,anchorEl:null},e.onFocus=function(){var t=Zp.asJsCodeEvent(e.props.event);e._inlineCodeBeforeChanges=t.getInlineCode()},e.onBlur=function(){var t=Zp.asJsCodeEvent(e.props.event).getInlineCode();e._inlineCodeBeforeChanges!==t&&e.props.onEndEditingEvent()},e.onChange=function(t){Zp.asJsCodeEvent(e.props.event).setInlineCode(t)},e.editObject=function(t){var n=Zp.asJsCodeEvent(e.props.event).getParameterObjects(),r=t.currentTarget;setTimeout((function(){return e.setState({editingObject:!0,editingPreviousValue:n,anchorEl:r},(function(){setTimeout((function(){e._objectField&&e._objectField.focus()}),10)}))}),10)},e.cancelObjectEditing=function(){e.endObjectEditing();var t=Zp.asJsCodeEvent(e.props.event),n=e.state.editingPreviousValue;null!=n&&(t.setParameterObjects(n),e.forceUpdate())},e.endObjectEditing=function(){var t=e.state.anchorEl;t&&t.focus();var n=Zp.asJsCodeEvent(e.props.event);e.state.editingPreviousValue!==n.getParameterObjects()&&e.props.onEndEditingEvent(),e.setState({editingObject:!1,editingPreviousValue:null,anchorEl:null})},e.toggleExpanded=function(){var t=Zp.asJsCodeEvent(e.props.event);t.setEventsSheetExpanded(!t.isEventsSheetExpanded())},e._getCodeEditorHeight=function(){if(!Zp.asJsCodeEvent(e.props.event).isEventsSheetExpanded())return 200;var t=e.props.eventsSheetHeight-100;return Math.max(200,t)},e}return(0,We.Z)(n,[{key:"render",value:function(){var e=this,t=Zp.asJsCodeEvent(this.props.event),n=t.getParameterObjects(),r=this.props.disabled?kp.comment:void 0,i=(0,f.jsx)("span",{className:en()((0,Qt.Z)({},Sl.fm,!0)),onClick:this.editObject,onKeyPress:function(t){(0,gn._x)(t)&&e.editObject(t)},tabIndex:0,style:r,children:n?(0,f.jsx)(w.Trans,{id:", objects /*{parameterObjects}*/",values:{parameterObjects:n}}):(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(w.Trans,{id:"/* Click here to choose objects to pass to JavaScript */"})]})}),a=this.props.scope.eventsFunction?(0,f.jsx)("span",{style:r,children:", eventsFunctionContext"}):null,o=(0,f.jsxs)("p",{style:kp.wrappingText,children:[(0,f.jsxs)("span",{style:r,children:[this.props.disabled?"/*":"","(function(runtimeScene"]}),i,a,(0,f.jsx)("span",{style:r,children:") {"})]}),s=(0,f.jsxs)("p",{style:kp.wrappingText,children:[(0,f.jsx)("span",{style:r,children:"})(runtimeScene"}),i,a,(0,f.jsxs)("span",{style:r,children:[");",this.props.disabled?"*/":""]}),(0,f.jsxs)("span",{style:kp.comment,children:[" // ",(0,f.jsx)("a",{href:(0,fp.vA)("/events/js-code"),target:"_blank",rel:"noopener noreferrer",style:kp.commentLink,children:"Read the documentation and help"})]})]}),l=(0,f.jsx)("div",{style:kp.expandIcon,children:t.isEventsSheetExpanded()?(0,f.jsx)(yp.Z,{fontSize:"small",color:"inherit"}):(0,f.jsx)(st.Z,{fontSize:"small",color:"inherit"})});return(0,f.jsx)(tt.Z,{bounds:!0,children:function(r){var i,a=r.measureRef,c=r.contentRect;return(0,f.jsxs)("div",{style:kp.container,className:en()((i={},(0,Qt.Z)(i,Sl.Pm,!0),(0,Qt.Z)(i,Sl.aw,e.props.selected),i)),ref:a,id:"".concat(e.props.idPrefix,"-js-code"),children:[o,(0,f.jsx)(jp,{value:t.getInlineCode(),onChange:e.onChange,width:c.bounds.width-5,height:e._getCodeEditorHeight(),onEditorMounted:function(){e.props.onUpdate()},onFocus:e.onFocus,onBlur:e.onBlur}),s,(0,f.jsx)(fi.Z,{onClick:e.toggleExpanded,fullWidth:!0,size:"small",children:l}),(0,f.jsx)(Yd,{open:e.state.editingObject,anchorEl:e.state.anchorEl,onRequestClose:e.cancelObjectEditing,onApply:e.endObjectEditing,children:(0,f.jsx)(uc,{project:e.props.project,scope:e.props.scope,globalObjectsContainer:e.props.globalObjectsContainer,objectsContainer:e.props.objectsContainer,projectScopedContainersAccessor:e.props.projectScopedContainersAccessor,value:n,onChange:function(n){t.setParameterObjects(n),e.props.onUpdate()},isInline:!0,onRequestClose:e.cancelObjectEditing,onApply:e.endObjectEditing,ref:function(t){return e._objectField=t}})})]})}})}}]),n}(c.Component),Tp={components:{unknownEvent:Pl,"BuiltinCommonInstructions::Standard":Dd,"BuiltinCommonInstructions::Group":Bd,"BuiltinCommonInstructions::Comment":zd,"BuiltinCommonInstructions::ForEach":Xd,"BuiltinCommonInstructions::ForEachChildVariable":ep,"BuiltinCommonInstructions::Repeat":rp,"BuiltinCommonInstructions::While":op,"BuiltinCommonInstructions::Link":pp,"BuiltinCommonInstructions::JsCode":wp},getEventComponent:function(e){return this.components.hasOwnProperty(e.getType())?this.components[e.getType()]:this.components.unknownEvent},registerEvent:function(e,t){this.components.hasOwnProperty(e)?this.components[e]=t:console.warn('Tried to register renderer for events "'+e+'", but a renderer already exists.')}},Sp=function(){function e(){(0,ze.Z)(this,e),this.eventHeights={},this.updateTimeoutId=null}return(0,We.Z)(e,[{key:"setEventHeight",value:function(e,t){this.eventHeights[e.ptr]=t}},{key:"getEventHeight",value:function(e){return this.eventHeights[e.ptr]||0}}]),e}(),Pp=(n(63376),n.g.gd),Ip=function(){var e=Pp.asPlatform(Pp.JsPlatform.get()).getAllPlatformExtensions();return Tc()((0,mt.mapFor)(0,e.size(),(function(t){var n=e.at(t).getAllEvents();return n.keys().toJSArray().filter((function(e){return"BuiltinAsync::Async"!==e})).map((function(e){var t=n.get(e);return{type:e,fullName:t.getFullName(),description:t.getDescription()}}))})))},Ep=function(e){var t=e.targetEventsList,n=e.movingEvent,r=e.initialEventsList,i=e.toIndex;r.moveEventToAnotherEventsList(n,t,i)},Mp=function(e){var t=e.targetNode,n=e.node;t.event&&n.event&&Ep({targetEventsList:t.event.getSubEvents(),movingEvent:n.event,initialEventsList:n.eventsList,toIndex:0})},Lp=function(e){var t=e.targetNode,n=e.node;if(t.event&&n.event){var r=n.depth===t.depth&&n.indexInList<t.indexInList?t.indexInList:t.indexInList+1;Ep({targetEventsList:t.eventsList,movingEvent:n.event,initialEventsList:n.eventsList,toIndex:r})}},Ap=function(e){var t=e.targetNode,n=e.node;if(t.event&&n.event){var r=n.depth===t.depth&&n.indexInList<t.indexInList?t.indexInList-1:t.indexInList;Ep({targetEventsList:t.eventsList,movingEvent:n.event,initialEventsList:n.eventsList,toIndex:r})}},Op={addButton:{cursor:"pointer"},dropIndicator:{border:"2px solid black",outline:"1px solid white"}},Rp=function(e){return function(){return Ip().map((function(t){return{label:t.fullName,click:function(){return e(t.type)}}}))}},Fp={id:"Right-click for more events"},Dp={id:"Long press for more events"};function Np(e){var t=e.onAddEvent,n=e.DnDComponent,r=e.draggedNode,i=e.rootEventsList,a=(0,hi.BF)(),o=c.useContext(j.Z),s=function(){r&&Ep({targetEventsList:i,movingEvent:r.event,initialEventsList:r.eventsList,toIndex:-1})};return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(n,{canDrop:function(){return!0},drop:s,children:function(e){var n=e.connectDropTarget,i=e.isOver;return n((0,f.jsxs)("div",{children:[i&&(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},Op.dropIndicator),{},{borderColor:o.dropIndicator.canDrop,outlineColor:o.dropIndicator.border})}),(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{justifyContent:"space-between",children:[(0,f.jsx)(ya.Z,{openMenuWithSecondaryClick:!0,element:(0,f.jsx)("button",{style:Op.addButton,className:"add-link",onClick:function(){return t("BuiltinCommonInstructions::Standard")},title:r._("touch"===a?Dp:Fp),children:(0,f.jsx)(w.Trans,{id:"Add a new event"})}),buildMenuTemplate:Rp(t)}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)("button",{style:Op.addButton,className:"add-link",children:(0,f.jsx)(w.Trans,{id:"Add..."})}),buildMenuTemplate:Rp(t)})]})})]}))}})}})}var _p=n(23818),Bp=n(4346),Up=n(32515),Vp={dropArea:{zIndex:1,position:"absolute"},dropIndicator:{position:"absolute",zIndex:2,border:"2px solid black",outline:"1px solid white"},autoScroll:{width:"100%",position:"absolute",height:"10%",zIndex:2}};function Hp(e){var t=e.DnDComponent,n=e.canDrop,r=e.onDrop,i=e.style,a=c.useContext(j.Z);return(0,f.jsx)(t,{canDrop:n,drop:r,children:function(e){var t=e.isOver,n=e.connectDropTarget,r=e.canDrop;return n((0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},Vp.dropArea),i.dropArea)}),r&&t&&(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)((0,l.Z)({},Vp.dropIndicator),i.dropIndicator),{},{borderColor:a.dropIndicator.canDrop,outlineColor:a.dropIndicator.border})})]}))}})}function zp(e){var t=e.DnDComponent,n=e.onDrop,r=(e.activateTargets,e.getNodeAtPath),i=e.node,a=e.draggedNode,o=e.indentWidth,s=e.draggedNodeHeight,l=i.depth;return(0,f.jsx)(f.Fragment,{children:new Array(l).fill(0).map((function(e,c){return c===a.depth?null:(0,f.jsx)(Hp,{DnDComponent:t,onDrop:function(){return n(Lp,r(i.nodePath.slice(0,c+1)))},canDrop:function(){return!0},style:{dropArea:{top:"100%",bottom:"-".concat(s,"px"),left:"-".concat(o*(l-c),"px"),width:o},dropIndicator:{left:"-".concat(o*(l-c),"px"),right:"0px",bottom:"-2px"}}},c)}))})}function Wp(e){var t=e.node,n=e.draggedNode,r=e.DnDComponent,i=e.onDrop,a=e.activateTargets,o=e.windowSize,s=e.indentScale,c=e.draggedNodeHeight,u=e.getNodeAtPath,d=function(e,t){if(e.depth!==t.depth)return!1;var n=e.nodePath,r=t.nodePath;return n.slice(0,-1).every((function(e,t){return e===r[t]}))}(t,n),p=function(e,t){var n=t.nodePath,r=e.nodePath;return 0!==n[n.length-1]&&n[n.length-1]-1===r[r.length-1]}(t,n),h=!!t.event&&t.event.canHaveSubEvents(),g=Qp(o)*s,m=function(e,t,n){return{"bottom-left":{left:"0px",bottom:"0px",top:"50%",width:e},"bottom-right":{left:"".concat(e,"px"),right:"0px",bottom:"0px",top:"50%"},top:{left:"0px",right:"0px",top:"0px",bottom:"50%"},bottom:{left:"0px",right:"0px",top:"50%",bottom:"0px"},"below-left":{left:n?"10px":"0px",top:"100%",height:t,width:e},"below-right":{left:"".concat(n?e:e+10,"px"),right:"0px",top:"100%",height:t}}}(g,c,d),x=function(e){return{bottom:{left:"0px",right:"0px",bottom:"-2px"},"bottom-right":{left:"".concat(e,"px"),right:"0px",bottom:"-2px"},top:{left:"0px",right:"0px",top:"-2px"}}}(g),v={DnDComponent:r,canDrop:function(){return!0}};return(0,f.jsxs)("div",{style:{visibility:a?"visible":"hidden"},children:[(0,f.jsx)(Hp,(0,l.Z)({style:{dropIndicator:x.top,dropArea:m.top},onDrop:function(){return i(Ap,t)}},v)),h?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Hp,(0,l.Z)({style:{dropIndicator:x["bottom-right"],dropArea:m["bottom-right"]},onDrop:function(){return i(Mp,t)}},v)),(0,f.jsx)(Hp,(0,l.Z)({style:{dropIndicator:x.bottom,dropArea:m["bottom-left"]},onDrop:function(){return i(Lp,t)}},v)),p&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Hp,(0,l.Z)({style:{dropIndicator:x.bottom,dropArea:m["below-left"]},onDrop:function(){return i(Lp,t)}},v)),(0,f.jsx)(Hp,(0,l.Z)({style:{dropIndicator:x["bottom-right"],dropArea:m["below-right"]},onDrop:function(){return i(Mp,t)}},v))]})]}):(0,f.jsx)(Hp,(0,l.Z)({style:{dropIndicator:x.bottom,dropArea:m.bottom},onDrop:function(){return i(Lp,t)}},v)),p&&(0,f.jsx)(zp,{node:t,draggedNode:n,DnDComponent:r,activateTargets:a,onDrop:i,indentWidth:g,draggedNodeHeight:c,getNodeAtPath:u})]})}function Gp(e){var t=e.direction,n=e.DnDComponent,r=e.activateTargets,i=e.onHover,a=c.useRef(null),o=c.useState(!1),u=(0,s.Z)(o,2),d=u[0],p=u[1];return c.useEffect((function(){return r?a.current=setTimeout((function(){p(!0)}),100):(p(!1),clearTimeout(a.current),a.current=null),function(){a.current&&clearTimeout(a.current)}}),[r]),(0,f.jsx)(n,{canDrop:function(){return!0},drop:function(){},children:function(e){var n=e.isOverLazy,r=e.connectDropTarget;n&&i();var a=(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},Vp.autoScroll),"top"===t?{top:0}:{bottom:0})});return d?r(a):null}})}var Yp=["className"],qp=n.g.gd,Jp="events-sheet-events-dnd-type",Xp=rc.Z.getThumbnail.bind(rc.Z),Kp={container:{flex:1,position:"relative"},defaultEventContainer:{marginRight:10,position:"relative"},smallEventContainer:{marginRight:0,position:"relative"},eventComponentContainer:{display:"flex",flexDirection:"row",justifyContent:"stretch",position:"relative"}},Qp=function(e){return"small"===e?11:22},$p=function(e){var t,n=e.event,r=e.project,i=e.scope,a=e.disabled,o=e.eventsHeightsCache,s=e.onEventContextMenu,u=e.projectScopedContainersAccessor,d=e.onUpdate,p=e.highlightedAiGeneratedEventIds,h=(0,gt.Z)(),g=c.useRef(null);c.useLayoutEffect((function(){var e=g.current,t=e?e.offsetHeight:0;0!==t&&o.setEventHeight(n,t)}));var m=c.useCallback((function(){h(),d()}),[h,d]),x=c.useCallback((function(e){e.preventDefault(),s(e.clientX,e.clientY)}),[s]),v=(0,rs.i)(c.useCallback((function(e){s(e.clientX,e.clientY)}),[s]),{context:"events-tree-event-component"}),b=Tp.getEventComponent(n);return(0,f.jsx)("div",(0,l.Z)((0,l.Z)({ref:g,onClick:e.onEventClick,onContextMenu:x},v),{},{children:!!b&&(0,f.jsxs)("div",{style:Kp.eventComponentContainer,children:[e.connectDragSource((0,f.jsx)("div",{className:en()((t={},(0,Qt.Z)(t,Sl.pr,!0),(0,Qt.Z)(t,Sl.T8,p.has(n.getAiGeneratedEventId())),t))})),(0,f.jsx)("div",{style:Kp.container,children:(0,f.jsx)(b,{project:r,scope:i,event:n,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:u,selected:vl(e.selection,n),selection:e.selection,leftIndentWidth:e.leftIndentWidth,onUpdate:m,onAddNewInstruction:e.onAddNewInstruction,onPasteInstructions:e.onPasteInstructions,onMoveToInstruction:e.onMoveToInstruction,onMoveToInstructionsList:e.onMoveToInstructionsList,onInstructionClick:e.onInstructionClick,onInstructionDoubleClick:e.onInstructionDoubleClick,onInstructionContextMenu:e.onInstructionContextMenu,onAddInstructionContextMenu:e.onAddInstructionContextMenu,onVariableDeclarationClick:e.onVariableDeclarationClick,onVariableDeclarationDoubleClick:e.onVariableDeclarationDoubleClick,onEndEditingEvent:e.onEndEditingEvent,onParameterClick:e.onParameterClick,onOpenExternalEvents:e.onOpenExternalEvents,onOpenLayout:e.onOpenLayout,disabled:a,renderObjectThumbnail:e.renderObjectThumbnail,screenType:e.screenType,eventsSheetWidth:e.eventsSheetWidth,eventsSheetHeight:e.eventsSheetHeight,windowSize:e.windowSize,idPrefix:e.idPrefix})})]})}))},ef=function(e){var t=e.className,n=(0,go.Z)(e,Yp),r=c.useContext(j.Z);return(0,f.jsx)(rl.oP,(0,l.Z)({className:"".concat(Sl.ed," ").concat("light"===r.palette.type?"light-theme":"dark-theme"," ").concat(t)},n))},tf=function(){},nf=function(e){return e.treeIndex},rf=c.forwardRef((function(e,t){var n=(0,gt.Z)(),i=c.useRef(null),a=c.useMemo((function(){return new Sp}),[]),o=c.useMemo((function(){return(0,ut.x)(Jp)}),[]),u=c.useMemo((function(){return(0,Cd.L)(Jp)}),[]),d=c.useRef([]),p=c.useRef(null),h=c.useState(null),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(!0),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState(!1),Z=(0,s.Z)(y,2),k=Z[0],T=Z[1],S=c.useRef([]);c.useEffect((function(){return function(){p.current&&clearTimeout(p.current)}}),[]);var P=c.useCallback((function(e){i.current&&i.current.wrappedInstance.current&&i.current.wrappedInstance.current.recomputeRowHeights(),n(),setTimeout((function(){e&&e()}))}),[n]),I=P;c.useEffect((function(){P()}),[]);var E=c.useCallback((function(e){-1!==e&&i.current&&i.current.wrappedInstance.current&&i.current.wrappedInstance.current.scrollToRow(e)}),[]),L=c.useCallback((function(t){qp.EventsListUnfolder.unfoldWhenContaining(e.events,t),I()}),[I,e.events]),A=c.useCallback((function(){qp.EventsListUnfolder.foldAll(e.events),I()}),[I,e.events]),O=c.useCallback((function(t){qp.EventsListUnfolder.unfoldToLevel(e.events,t),I()}),[I,e.events]),R=c.useMemo((function(){return(0,Up.Z)(e.preferences,e.tutorials,"the-events")}),[e.preferences,e.tutorials]),F=c.useCallback((function(e){return!!e&&!!e.event}),[]),D=c.useCallback((function(e){return!0}),[]),N=c.useCallback((function(){d.current.forEach((function(e){return e.event&&e.event.setFolded(!0)})),d.current=[],I()}),[I]),_=c.useCallback((function(){m&&(x(null),N(),I())}),[m,N,I]),B=c.useRef({}),U=c.useCallback((function(e){return B.current[""+e.ptr]||-1}),[B]),V=c.useCallback((function(e,t){var n=t.event;if(n){var r=d.current.some((function(e){return t.key===e.key}));e?p.current||t.expanded||r||(p.current=window.setTimeout((function(){n.setFolded(!1),d.current.push(t),I()}),1e3)):(p.current&&window.clearTimeout(p.current),p.current=null)}}),[I]),H=function(e){var t=e.node;return t?t.event?a.getEventHeight(t.event):t.fixedHeight||0:0},z=e.project,W=e.globalObjectsContainer,G=e.objectsContainer,Y=e.showObjectThumbnails,q=c.useCallback((function(e){if(!Y)return null;var t=(0,iu.Z)(W,G,e);return t?(0,f.jsx)(_p.W,{className:en()((0,Qt.Z)({},Sl.qv,!0)),alt:"",src:Xp(z,t.getConfiguration())}):null}),[z,W,G,Y]),J=e.onEventMoved,X=c.useCallback((function(e,t){if(m){e({node:m,targetNode:t});var n=m.nodePath,r=m.event;if(_(),r){var i=U(r);J(n[n.length-1],i)}else console.warn("EventsSheet: No event found in dragged node.")}}),[m,_,J,U]),K=function(t){var r=t.node,i=r.event,s=r.depth,c=r.disabled;if(!i)return null;var d=!!m&&(function(e,t){if(t.depth<=e.depth)return!1;var n=e.nodePath,r=t.nodePath;return n.every((function(e,t){return e===r[t]}))}(m,r)||r.key===m.key);return(0,f.jsx)(o,{beginDrag:function(){return x(r),r},canDrag:function(){return F(r)},canDrop:function(){return D(r)},drop:function(){},endDrag:_,children:function(t){var o=t.connectDragSource,p=t.connectDropTarget,h=t.isOverLazy;V(h,r);var g,x={eventsList:r.eventsList,event:i,indexInList:r.indexInList,projectScopedContainersAccessor:r.projectScopedContainersAccessor},v=(0,f.jsxs)("div",(0,l.Z)((0,l.Z)({style:(0,l.Z)({opacity:d?.5:1},(g=e.windowSize,"small"===g?Kp.smallEventContainer:Kp.defaultEventContainer))},(0,is.Y)({rowIndex:r.rowIndex.toString()})),{},{children:[(0,f.jsx)($p,{project:e.project,scope:e.scope,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,projectScopedContainersAccessor:r.projectScopedContainersAccessor,event:i,eventsHeightsCache:a,selection:e.selection,leftIndentWidth:s*(Qp(e.windowSize)*e.indentScale),onUpdate:n,onAddNewInstruction:function(t){return e.onAddNewInstruction(x,t)},onPasteInstructions:function(t){return e.onPasteInstructions(x,t)},onMoveToInstruction:function(t){return e.onMoveToInstruction(x,t)},onMoveToInstructionsList:function(t){return e.onMoveToInstructionsList(x,t)},onInstructionClick:function(t){return e.onInstructionClick(x,t)},onInstructionDoubleClick:function(t){return e.onInstructionDoubleClick(x,t)},onParameterClick:function(t){return e.onParameterClick(x,t)},onVariableDeclarationClick:function(t){return e.onVariableDeclarationClick(x,t)},onVariableDeclarationDoubleClick:function(t){return e.onVariableDeclarationDoubleClick(x,t)},onEventClick:function(){return e.onEventClick({eventsList:r.eventsList,event:i,indexInList:r.indexInList,projectScopedContainersAccessor:r.projectScopedContainersAccessor})},onEndEditingEvent:function(){return e.onEndEditingEvent(i)},onEventContextMenu:function(t,n){return e.onEventContextMenu(t,n,{eventsList:r.eventsList,event:i,indexInList:r.indexInList,projectScopedContainersAccessor:r.projectScopedContainersAccessor})},onInstructionContextMenu:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.onInstructionContextMenu.apply(e,[x].concat(n))},onAddInstructionContextMenu:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.onAddInstructionContextMenu.apply(e,[x].concat(n))},onOpenExternalEvents:e.onOpenExternalEvents,onOpenLayout:function(t){e.onOpenLayout(t)},disabled:c,renderObjectThumbnail:q,screenType:e.screenType,eventsSheetWidth:e.eventsSheetWidth,eventsSheetHeight:e.eventsSheetHeight,connectDragSource:o,windowSize:e.windowSize,idPrefix:"event-".concat(r.relativeNodePath.join("-")),highlightedAiGeneratedEventIds:e.highlightedAiGeneratedEventIds},i.ptr),m&&(0,f.jsx)(Wp,{node:r,draggedNode:m,draggedNodeHeight:H({node:m}),DnDComponent:u,onDrop:X,activateTargets:!d&&!!m,windowSize:e.windowSize,indentScale:e.indentScale,getNodeAtPath:function(e){return(0,rl.PC)({path:e,treeData:S.current,getNodeKey:nf}).node}})]}));return d?v:p(v)}})},Q=function(e){var t=(0,rl.Pg)({treeData:S.current,getNodeKey:nf,ignoreCollapsed:!0});return e.map((function(e){if(!t[e])return null;var n=t[e].node,r=n.event,i=n.eventsList,a=n.indexInList,o=n.projectScopedContainersAccessor;return r?{event:r,eventsList:i,indexInList:a,projectScopedContainersAccessor:o}:null})).filter(Boolean)};c.useImperativeHandle(t,(function(){return{forceEventsUpdate:I,foldAll:A,unfoldToLevel:O,getEventContextAtRowIndexes:Q,scrollToRow:E,getEventRow:U,unfoldForEvent:L}}));var $=c.useCallback((function(e){var t=e.node.event;t&&(t.setFolded(!t.isFolded()),I())}),[I]),ee=c.useCallback((function(e){var t=e.node,n=e.searchQuery;if(!n)return!1;var r=t.event;return!!r&&n.find((function(e){return qp.compare(e,r)}))}),[]),te=c.useCallback((function(){i.current&&i.current.container.scrollBy({top:-5})}),[]),ne=c.useCallback((function(){i.current&&i.current.container.scrollBy({top:5})}),[]),re=e.fontSize||14;return function t(n,i,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;n.length=0,(0,mt.mapFor)(0,a.getEventsCount(),(function(e){var u=a.getEventAt(e);o.push(u);var p=l||u.isDisabled(),f=o.length-1,h=c.concat(o.length-1),g=[].concat((0,r.Z)(d||[]),[e]),m=u.canHaveVariables()?i.makeNewProjectScopedContainersWithLocalVariables(u):i;B.current[""+u.ptr]=f;var x=[];t(x,m,u.getSubEvents(),u.isFolded()?[]:o,s+1,p,h,g),n.push({title:K,event:u,eventsList:a,indexInList:e,rowIndex:f,expanded:!u.isFolded(),disabled:p,depth:s,key:u.ptr,children:x,nodePath:h,relativeNodePath:g,projectScopedContainersAccessor:m})}));var p=[0===s?{title:function(){return(0,f.jsx)(Np,{onAddEvent:function(t){return e.onAddNewEvent(t,e.events)},DnDComponent:u,draggedNode:m,rootEventsList:a})},event:null,indexInList:a.getEventsCount(),disabled:!1,depth:0,fixedHeight:40,children:[],eventsList:a,rowIndex:o.length,projectScopedContainersAccessor:i,key:"bottom-buttons",expanded:!1,nodePath:[o.length+0],relativeNodePath:[o.length+0]}:null,0===s&&0!==a.getEventsCount()&&R?{title:function(){return(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(Bp.Z,{tutorial:R})})},event:null,indexInList:a.getEventsCount()+1,disabled:!1,depth:0,fixedHeight:150,children:[],eventsList:a,rowIndex:o.length+1,projectScopedContainersAccessor:i,key:"eventstree-tutorial-node",expanded:!1,nodePath:[o.length+1],relativeNodePath:[o.length+1]}:null,0===s&&0===a.getEventsCount()?{title:function(){return(0,f.jsx)(pt.$,{title:(0,f.jsx)(w.Trans,{id:"Add your first event"}),description:(0,f.jsx)(w.Trans,{id:"Events define the rules of a game."}),actionLabel:(0,f.jsx)(w.Trans,{id:"Add an event"}),helpPagePath:"/events",tutorialId:"the-events",actionButtonId:"add-event-button",onAction:function(){return e.onAddNewEvent("BuiltinCommonInstructions::Standard",e.events)}})},event:null,indexInList:a.getEventsCount()+1,disabled:!1,depth:0,fixedHeight:300,children:[],eventsList:a,rowIndex:o.length+2,projectScopedContainersAccessor:i,key:"empty-state",expanded:!1,nodePath:[o.length+2],relativeNodePath:[o.length+2]}:null].filter(Boolean);n.push.apply(n,(0,r.Z)(p))}(S.current,e.projectScopedContainersAccessor,e.events),c.useLayoutEffect((function(){i.current&&i.current.wrappedInstance.current&&i.current.wrappedInstance.current.recomputeRowHeights()})),(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},Kp.container),{},{fontSize:"".concat(re,"px"),"--icon-size":"".concat(Math.round(1.14*re),"px"),"--instruction-missing-parameter-min-height":"".concat(Math.round(1.1*re),"px"),"--instruction-missing-parameter-min-width":"".concat(Math.round(3*re),"px")}),children:["touch"!==e.screenType&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Gp,{DnDComponent:u,direction:"top",activateTargets:!!m&&!C,onHover:te}),(0,f.jsx)(Gp,{DnDComponent:u,direction:"bottom",activateTargets:!!m&&!k,onHover:ne})]}),(0,f.jsx)(ef,{treeData:(0,r.Z)(S.current),scaffoldBlockPxWidth:Qp(e.windowSize)*e.indentScale,onChange:tf,onVisibilityToggle:$,canDrag:!1,rowHeight:H,searchMethod:ee,searchQuery:e.searchResults,searchFocusOffset:e.searchFocusOffset,className:e.searchResults?Sl.zk:"",reactVirtualizedListProps:{ref:function(e){i.current=e},onScroll:function(t){e.onScroll&&e.onScroll(),j(0===t.scrollTop),T(t.clientHeight+t.scrollTop>=t.scrollHeight)},scrollToAlignment:"center"},slideRegionSize:-10})]})})),af=rf,of=n(78296),sf=n(30256),lf=n(550),cf=n.g.gd,uf=function(e){var t=e.instructionType,n=e.isCondition,r=e.project;return t?n?cf.MetadataProvider.getConditionMetadata(r.getCurrentPlatform(),t):cf.MetadataProvider.getActionMetadata(r.getCurrentPlatform(),t):null},df=function(e){var t=e.instruction,n=e.isCondition,r=e.project,i=e.isNewInstruction,a=e.scope,o=e.globalObjectsContainer,u=e.objectsContainer,d=e.i18n,p=function(e,r){var i,s,l=(0,lf.J)((0,of.Rc)(n,o,u,e,d),a);t.getType()&&r&&((i=l,s=t.getType(),i.find((function(e){return e.type===s})))||t.setType(""));return{chosenObjectName:e,chosenObjectInstructionsInfo:l,chosenObjectInstructionsInfoTree:(0,sf.f)(l,d)}},f=c.useState((function(){if(!i){var e=t.getType(),a=n?cf.MetadataProvider.getConditionMetadata(r.getCurrentPlatform(),e):cf.MetadataProvider.getActionMetadata(r.getCurrentPlatform(),e),o=(0,of.up)(a);if(-1!==o)return p(t.getParameter(o).getPlainString(),!1)}return{chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null}})),h=(0,s.Z)(f,2),g=h[0],m=h[1];return[g,{chooseInstruction:function(e){t.setType(e);return m({chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null}),(0,l.Z)({instruction:t},{chosenObjectName:null,chosenObjectInstructionsInfo:null,chosenObjectInstructionsInfoTree:null})},chooseObject:function(e){var n=p(e,!0);return m(n),(0,l.Z)({instruction:t},n)},chooseObjectInstruction:function(e){if(t.setType(e),g.chosenObjectName){var n=p(g.chosenObjectName,!0);return m(n),(0,l.Z)({instruction:t},n)}return(0,l.Z)({instruction:t},g)}}]},pf=n(44397),ff=n.g.gd,hf=function(e,t,n,r,i){var a=!1;if(n.setParametersCount(r.getParametersCount()),i){var o=(0,of.up)(r);if(-1===o)return console.error('Instruction "'.concat(r.getFullName(),'" is used for an object, but does not have an object as first parameter')),!1;n.setParameter(o,i),a=!0}var s=ff.BehaviorParameterFiller.fillBehaviorParameters(e.getCurrentPlatform(),t.get(),r,n);return a=a||s},gf=n.g.gd,mf={emptyContainer:{display:"flex",alignItems:"center",justifyContent:"center"},parametersContainer:{flex:1},icon:{width:24,height:24,marginRight:8,paddingTop:6,flexShrink:0},invertToggle:{marginTop:8},description:{whiteSpace:"pre-wrap"}},xf=function(e,t,n,r,i){return!e.isCodeOnly()&&(t!==n||!r||!i.get().getObjectsContainersList().hasObjectOrGroupNamed(r))},vf=c.forwardRef((function(e,t){var n=e.instruction,r=e.project,i=e.globalObjectsContainer,a=e.objectsContainer,o=e.projectScopedContainersAccessor,u=e.noHelpButton,d=e.objectName,p=e.isCondition,h=e.scope,g=e.focusOnMount,m=e.style,x=e.openInstructionOrExpression,v=e.resourceManagementProps,b=e.id,C=c.useRef(null),Z=c.useState(!1),k=(0,s.Z)(Z,2),S=k[0],P=k[1],I=c.useContext(j.Z).palette.type,E=(0,gt.Z)(),L=c.useCallback((function(e,t){if(!e)return 0;var n=(0,of.up)(e);return(0,mt.mapFor)(0,e.getParametersCount(),(function(r){if(!e)return!1;var i=e.getParameter(r);return xf(i,r,n,t,o)})).filter((function(e){return e})).length}),[o]),A=c.useCallback((function(e){0!==L(uf({instructionType:n.getType(),isCondition:p,project:r}),d)&&C.current&&C.current.focus&&C.current.focus(e)}),[L,n,p,r,d]);c.useImperativeHandle(t,(function(){return{focus:A}}));c.useEffect((function(){if(g){var e=setTimeout((function(){A()}),300);return function(){return clearTimeout(e)}}}),[A,g]),gf.VariableInstructionSwitcher.switchBetweenUnifiedInstructionIfNeeded(r.getCurrentPlatform(),o.get(),n);var O=n.getType(),R=uf({instructionType:O,isCondition:p,project:r});if(c.useEffect((function(){R&&(hf(r,o,n,R,d)&&E())}),[E,n,R,d,r,o]),!R)return(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},mf.emptyContainer),m)});var F=R.getHelpPath(),D=(0,pf.zZ)(O),B=(0,Ei.cT)(O),U=(0,of.up)(R),V=R.getIconFilename()||"",H="dark"===I&&(V.startsWith("data:image/svg+xml")||V.includes("_black")),z=0;return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(ft.Z,{autoHideScrollbar:!0,id:b,children:(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsxs)(M.x1,{alignItems:"flex-start",children:[(0,f.jsx)("img",{src:V,alt:"",style:(0,l.Z)((0,l.Z)({},mf.icon),{},{filter:H?"grayscale(1) invert(1)":void 0})}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{style:mf.description,children:R.getDescription()})})]}),D&&(0,f.jsx)(M.x1,{children:void 0===D.identifier?(0,f.jsx)(je.Z,{kind:D.kind,children:t._(D.message)}):(0,f.jsx)(Y.Z,{kind:D.kind,identifier:D.identifier,children:t._(D.message)})}),B.length?(0,f.jsx)(M.x1,{children:(0,f.jsx)(_.ak,{expand:!0,children:B.map((function(e){return(0,f.jsx)(Ii.Z,{tutorialId:e},e)}))})}):null,(0,f.jsx)(M.LZ,{}),(0,f.jsxs)("div",{style:mf.parametersContainer,id:"instruction-parameters-container",children:[(0,f.jsx)(_.ak,{noMargin:!0,children:(0,mt.mapFor)(0,R.getParametersCount(),(function(e){var t=R.getParameter(e);if(!xf(t,e,U,d,o))return null;var s=t.getType(),l=rd.getParameterComponent(s),c=0===z;return z++,(0,f.jsx)(l,{instructionMetadata:R,instruction:n,parameterMetadata:t,parameterIndex:e,value:n.getParameter(e).getPlainString(),onChange:function(t){n.getParameter(e).getPlainString()!==t&&(n.setParameter(e,t),P(!0),E())},onInstructionTypeChanged:E,project:r,scope:h,globalObjectsContainer:i,objectsContainer:a,projectScopedContainersAccessor:o,parameterRenderingService:rd,resourceManagementProps:v,ref:function(e){c&&(C.current=e)}},e)}))}),0===L(R,d)&&(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"There is nothing to configure."})}),p&&(0,f.jsx)(yr.Z,{label:(0,f.jsx)(w.Trans,{id:"Invert condition"}),labelPosition:"right",toggled:n.isInverted(),style:mf.invertToggle,onToggle:function(e,t){n.setInverted(t),E()}}),R.isOptionallyAsync()&&(0,f.jsx)(yr.Z,{label:(0,f.jsx)(w.Trans,{id:"Wait for the action to end before executing the actions (and subevents) following it"}),labelPosition:"right",toggled:n.isAwaited(),style:mf.invertToggle,onToggle:function(e,t){n.setAwaited(t),E()}}),(0,sd.xo)(R)&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(T.Z,{label:p?(0,f.jsx)(w.Trans,{id:"Edit this condition events"}):(0,f.jsx)(w.Trans,{id:"Edit this action events"}),onClick:function(){!function(e){if(S&&!y.ZP.showConfirmDialog(e._({id:"You've made some changes here. Are you sure you want to discard them and open the function?"})))return;var t=n.getType();if(!t)return null;var i=p?gf.MetadataProvider.getExtensionAndConditionMetadata(r.getCurrentPlatform(),t).getExtension():gf.MetadataProvider.getExtensionAndActionMetadata(r.getCurrentPlatform(),t).getExtension();x(i,t)}(t)},leftIcon:(0,f.jsx)(at.Z,{})},"open-extension")})]},O),(0,f.jsx)(M.x1,{children:!u&&F&&(0,f.jsx)(An.Z,{helpPagePath:R.getHelpPath(),label:p?(0,f.jsx)(w.Trans,{id:"Help for this condition"}):(0,f.jsx)(w.Trans,{id:"Help for this action"})})})]})})}})})),bf=vf,Cf=n(40755),jf=n(82069),yf=n(63347),Zf=n(2860),kf=n(72717),wf=n(68262),Tf=function(e){var t,n,r=e.data,i=e.index,a=e.style,o=r.flattenedData,s=r.onOpen,u=r.onClick,d=r.onSelect,p=r.getItemHtmlId,h=o[i],g=16*h.depth,m=c.useRef(null),x=c.useCallback((function(e){h&&!h.item.isPlaceholder&&(!h.item.isRoot&&!h.item.openWithSingleClick||h.disableCollapse?(d({node:h,exclusive:!(e.metaKey||e.ctrlKey)}),u(h)):s(h,i))}),[u,d,h,s,i]),v=c.useCallback((function(e){h&&h.hasChildren&&!h.disableCollapse&&s(h,i)}),[h,s,i]);if(h.item.displayAsPrimaryButton)return(0,f.jsx)("div",{style:a,ref:m,children:(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,f.jsx)(G.Z,{primary:!0,onClick:x,label:h.name})})});var b=h.canHaveChildren;return(0,f.jsx)("div",{style:a,ref:m,children:(0,f.jsx)("div",{style:{paddingLeft:g},className:en()(kf.Z.fullHeightFlexContainer,(0,Qt.Z)({},kf.Z.withDivider,h.item.isRoot&&i>0)),children:(0,f.jsx)("div",(0,l.Z)((0,l.Z)({id:p?p(h.item,i):void 0,onClick:x,onDoubleClick:v,className:en()(kf.Z.rowContainer,(0,Qt.Z)({},kf.Z.selected,h.selected)),"aria-selected":h.selected,"aria-expanded":!!b&&!h.collapsed},(0,is.Y)(h.dataset)),{},{children:(0,f.jsx)("div",{className:kf.Z.fullSpaceContainer,children:(0,f.jsx)("div",{className:kf.Z.rowContent,children:(0,f.jsxs)("div",{className:en()(kf.Z.rowContentSide,(t={},(0,Qt.Z)(t,kf.Z.rowContentSideLeft,!h.item.isRoot),(0,Qt.Z)(t,kf.Z.rowContentExtraPadding,!b),t)),children:[b?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.Z,{size:"small",onClick:function(e){e.stopPropagation(),s(h,i)},disabled:h.disableCollapse,children:h.collapsed?(0,f.jsx)(ot.Z,{viewBox:"2 2 12 12",fontSize:"small"}):(0,f.jsx)(st.Z,{viewBox:"2 2 12 12",fontSize:"small"})}),h.thumbnailSrc&&"NONE"!==h.thumbnailSrc?"FOLDER"!==h.thumbnailSrc?(0,f.jsx)("div",{className:kf.Z.thumbnail,children:(0,f.jsx)(nc.Z,{iconSize:24,src:h.thumbnailSrc})}):!h.item.isRoot&&(0,f.jsx)(wf.Z,{className:kf.Z.folderIcon}):null]}):h.thumbnailSrc?(0,f.jsx)("div",{className:kf.Z.thumbnail,children:(0,f.jsx)(nc.Z,{iconSize:24,src:h.thumbnailSrc})}):null,(0,f.jsxs)("div",{className:en()(kf.Z.itemTextContainer),children:[(0,f.jsx)("span",{className:en()(kf.Z.itemName,(n={},(0,Qt.Z)(n,kf.Z.rootFolder,h.item.isRoot),(0,Qt.Z)(n,kf.Z.placeholder,h.item.isPlaceholder),n),h.extraClass),children:h.name}),h.description&&(0,f.jsx)("span",{className:en()(kf.Z.itemDescription),children:h.description})]})]})})})}))})})},Sf=c.memo(Tf,Zf.wy),Pf=["ArrowDown","ArrowUp","ArrowRight","ArrowLeft","Enter"],If=function(e,t){return"string"===typeof e&&e.toLowerCase().includes(t)},Ef=function e(t,n,r){t.forEach((function(t){r(t);var i=n(t);i&&e(i,n,r)}))},Mf=(0,nt.Z)((function(e,t,n,r,i,a){return{onOpen:t,onClick:n,onSelect:r,flattenedData:e,isMobile:i,getItemHtmlId:a}})),Lf=function(e,t){var n=e.height,i=e.width,o=e.items,l=e.searchText,u=e.estimatedItemSize,d=e.getItemHeight,p=e.shouldApplySearchToItem,h=e.getItemName,g=e.getItemDescription,m=e.getItemId,x=e.getItemHtmlId,v=e.getItemChildren,b=e.getItemThumbnail,C=e.getItemDataset,j=e.selectedItems,y=e.onClickItem,Z=e.onSelectItems,k=e.multiSelect,w=e.onCollapseItem,T=e.forceAllOpened,S=e.initiallyOpenedNodeIds,P=e.arrowKeyNavigationProps,I=j.map(m),E=c.useState(!1),M=(0,s.Z)(E,2),L=M[0],A=M[1],O=c.useRef(null),R=c.useState(S||[]),F=(0,s.Z)(R,2),D=F[0],N=F[1],_=c.useRef(null),B=c.useRef(null),U=c.useState([]),V=(0,s.Z)(U,2),H=V[0],z=V[1],W=(0,be.UQ)().isMobile,G=(0,gt.Z)(),Y=c.useState(""),q=(0,s.Z)(Y,2),J=q[0],X=q[1],K=!!l,Q=c.useCallback((function(e,t,n,i){var a=m(e),o=v(e),s=Array.isArray(o),l=!T&&!D.includes(a),c=H.includes(a),u=[];o&&(T||!l||n||c)&&(u=o.map((function(e){return Q(e,t+1,n,c)})).flat());var d=h(e),f=g?g(e):void 0,x=C?C(e):void 0,j=J&&a===J?kf.Z.animate:"",y=p(e);if(!n||T||i||!y||If(d,n)||u.length>0){var Z=b?b(e):null,k=I.includes(a);return[{id:a,name:d,description:f,hasChildren:!!o&&o.length>0,canHaveChildren:s,depth:t,selected:k,thumbnailSrc:Z,dataset:x,item:e,extraClass:j,collapsed:n?0===u.length||!c:l,disableCollapse:!!n&&u.length>0&&!c}].concat((0,r.Z)(u))}return[]}),[m,v,p,T,D,H,h,g,C,J,b,I]),$=c.useCallback((function(e,t){return e.map((function(e){return Q(e,0,t,!1)})).flat()}),[Q]),ee=c.useCallback((function(e,t){K?e.collapsed?z([].concat((0,r.Z)(H),[e.id])):T||z(H.filter((function(t){return t!==e.id}))):e.collapsed?N([].concat((0,r.Z)(D),[e.id])):T||(w&&w(e.item),N(D.filter((function(t){return t!==e.id})))),B.current&&B.current.resetAfterIndex(t)}),[H,D,K,T,w]),te=c.useCallback((function(e){var t=e.node,n=e.exclusive;if(k)if(t.selected)if(n){if(1===j.length)return;Z([t.item])}else Z(j.filter((function(e){return e!==t.item})));else Z(n?[t.item]:[].concat((0,r.Z)(j),[t.item]));else{if(t.selected&&1===j.length)return;Z([t.item])}}),[k,Z,j]),ne=c.useCallback((function(e){y&&y(e.item)}),[y]),re=c.useMemo((function(){return $(o,l?l.toLowerCase():null)}),[$,o,l]),ie=c.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smart",n=B.current;if(n){var r=re.findIndex((function(t){return t.id===e}));r>=0&&(L?n.scrollToItem(r,t):O.current=function(){n.scrollToItem(r,t)})}}),[re,L]),ae=c.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smart";return ie(m(e),t)}),[m,ie]),oe=c.useCallback((function(e){var t=B.current;t&&(L?t.scrollTo(e):O.current=function(){t.scrollTo(e)})}),[L]);c.useEffect((function(){L&&O.current&&(O.current(),O.current=null)}),[L]);var se=c.useCallback((function(e){var t=e.filter((function(e){return!D.includes(e)}));t.length>0&&N([].concat((0,r.Z)(D),(0,r.Z)(t)))}),[D]),le=c.useCallback((function(e){var t=D.filter((function(t){return!e.includes(t)}));N(t)}),[D]),ce=c.useCallback((function(){B.current&&B.current.resetAfterIndex(0)}),[]),ue=c.useCallback((function(e){X(m(e))}),[m]),de=c.useCallback((function(e){X(e)}),[]),pe=c.useCallback((function(e){var t=e.map(m),n=new Set(D);return t.map((function(e){return n.has(e)}))}),[D,m]),fe=c.useCallback((function(e){var t=new Set(D);return e.map((function(e){return t.has(e)}))}),[D]);c.useEffect((function(){if(J){var e=setTimeout((function(){return X("")}),400);return function(){return clearTimeout(e)}}}),[J]);var he=c.useCallback((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<re.length)){e.next=7;break}return e.next=4,re[t].item;case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})),[re]),ge=c.useCallback((function(){return re.length}),[re]);c.useImperativeHandle(t,(function(){return{forceUpdateList:G,scrollTo:oe,scrollToItem:ae,scrollToItemFromId:ie,openItems:se,closeItems:le,animateItem:ue,animateItemFromId:de,areItemsOpen:pe,areItemsOpenFromId:fe,updateRowHeights:ce,getDisplayedItemsIterator:he,getDisplayedItemsCount:ge}}));var me=Mf(re,ee,ne,te,W,x);c.useEffect((function(){if(l){var e=[];Ef(o,v,(function(t){var n=h(t);If(n,l)&&t.openIfSearchMatches&&e.push(m(t))})),z(e)}else z([])}),[l,o,h,m,v]);var xe=c.useCallback((function(e){if(Pf.includes(e.key)){var t,n=j[0],r=-1;if(n&&(r=re.findIndex((function(e){return e.id===m(n)}))),-1===r){for(var i=0,a=re[i];a&&(a.item.isRoot||a.item.isPlaceholder);)(i+=1)>re.length-1&&(a=null),a=re[i];a&&(t=a.item)}else if("ArrowDown"===e.key){if(e.preventDefault(),r<re.length-1){for(var o=1,s=re[r+o];s&&(s.item.isRoot||s.item.isPlaceholder);)r+o>re.length-1&&(s=null),s=re[r+(o+=1)];s&&(t=s.item)}}else if("ArrowUp"===e.key){if(e.preventDefault(),r>0){for(var l=-1,c=re[r+l];c&&(c.item.isRoot||c.item.isPlaceholder);)r+l<0&&(c=null),c=re[r+(l-=1)];c&&(t=c.item)}}else if("ArrowRight"===e.key&&P){e.preventDefault();var u=re[r];u.canHaveChildren&&u.collapsed?se([u.id]):t=P.onGetItemInside(n)}else if("ArrowLeft"===e.key&&P){e.preventDefault();var d=re[r];d.canHaveChildren&&!d.collapsed?le([d.id]):t=P.onGetItemOutside(n)}else if("Enter"===e.key){e.preventDefault();var p=re[r];y&&y(p.item)}t&&(ae(t),Z([t]))}}),[j,P,re,m,se,le,y,ae,Z]);return(0,f.jsx)("div",{tabIndex:0,className:kf.Z.treeView,onKeyDown:xe,ref:_,children:(0,f.jsx)(Zf.S_,{height:n,itemCount:re.length,estimatedItemSize:u,itemSize:function(e){return d(re[e].item)},width:"number"===typeof i?i:"100%",itemKey:function(e){return re[e].id},itemData:me,ref:B,overscanCount:20,onItemsRendered:function(){return A(!0)},children:Sf})})},Af=c.forwardRef(Lf),Of=function(e){return"object-folder-".concat(e.ptr)},Rf=function(e){return"".concat(e.getName(),"-").concat(e.ptr)},Ff=function(e){var t=e.objectFolderOrObject,n=e.isGlobal,r=e.objectFolderTreeViewItemProps,i=e.objectTreeViewItemProps;return t.isFolder()?new Wf({objectFolderOrObject:t,global:n,isRoot:!1,objectFolderTreeViewItemProps:r,objectTreeViewItemProps:i,content:new Yf(t,r)}):new _f(new Gf(t,i))},Df=function(){function e(t){(0,ze.Z)(this,e),this.applySearch=!0,this.group=t}return(0,We.Z)(e,[{key:"getGroup",value:function(){return this.group}},{key:"getName",value:function(){return this.group.getName()}},{key:"getDescription",value:function(){return null}},{key:"getId",value:function(){return Rf(this.group)}},{key:"getHtmlId",value:function(e){return null}},{key:"getDataSet",value:function(){return{groupName:this.group.getName()}}},{key:"getThumbnail",value:function(){return"res/ribbon_default/objectsgroups64.png"}}]),e}(),Nf=function(){function e(t,n,r){(0,ze.Z)(this,e),this.applySearch=!0,this.object=t,this.props=n,this.groupPrefix=r}return(0,We.Z)(e,[{key:"getObject",value:function(){return this.object}},{key:"getName",value:function(){return this.object.getName()}},{key:"getDescription",value:function(){return null}},{key:"getId",value:function(){return"".concat(this.groupPrefix,"-").concat(Rf(this.object))}},{key:"getHtmlId",value:function(e){return null}},{key:"getDataSet",value:function(){return{objectName:this.object.getName()}}},{key:"getThumbnail",value:function(){return this.props.getThumbnail(this.props.project,this.object.getConfiguration())}}]),e}(),_f=function(){function e(t){(0,ze.Z)(this,e),this.content=t}return(0,We.Z)(e,[{key:"getChildren",value:function(){return null}}]),e}(),Bf=function(){function e(t,n,r,i,a){(0,ze.Z)(this,e),this.content=t,this.group=n,this.globalObjectsContainer=r,this.objectsContainer=i,this.objectTreeViewItemProps=a}return(0,We.Z)(e,[{key:"getChildren",value:function(e){var t=this;return e?this.group.getAllObjectsNames().toJSArray().map((function(e){var n=(0,iu.Z)(t.globalObjectsContainer,t.objectsContainer,e);return n?new _f(new Nf(n,t.objectTreeViewItemProps,t.content.getId())):null})).filter(Boolean):null}}]),e}(),Uf=function(){function e(t,n){(0,ze.Z)(this,e),this.isRoot=!0,this.content=t,this.children=n}return(0,We.Z)(e,[{key:"getChildren",value:function(){return this.children}}]),e}(),Vf=function(){function e(t,n){(0,ze.Z)(this,e),this.applySearch=!1,this.name=t,this.description=n}return(0,We.Z)(e,[{key:"getName",value:function(){return this.name}},{key:"getDescription",value:function(){return this.description}},{key:"getId",value:function(){return"more-results"}},{key:"getHtmlId",value:function(){return null}},{key:"getDataSet",value:function(){return{}}},{key:"getThumbnail",value:function(){return null}}]),e}(),Hf=function(){function e(t){(0,ze.Z)(this,e),this.applySearch=!1,this.instructionMetadata=t}return(0,We.Z)(e,[{key:"getInstructionMetadata",value:function(){return this.instructionMetadata}},{key:"getName",value:function(){return this.instructionMetadata.displayedName}},{key:"getDescription",value:function(){return this.instructionMetadata.fullGroupName}},{key:"getId",value:function(){return"instruction-item-".concat(this.instructionMetadata.type.replace(/:/g,"-"))}},{key:"getHtmlId",value:function(){return this.getId()}},{key:"getDataSet",value:function(){return{instructionType:this.instructionMetadata.type.replace(/:/g,"-"),object:this.instructionMetadata.scope.objectMetadata?this.instructionMetadata.scope.objectMetadata.name.replace(/:/g,"-")+"-":void 0}}},{key:"getThumbnail",value:function(){return this.instructionMetadata.iconFilename}}]),e}(),zf=function(){function e(t,n){(0,ze.Z)(this,e),this.applySearch=!0,this.id=t,this.label=n}return(0,We.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getDescription",value:function(){return null}},{key:"getId",value:function(){return this.id}},{key:"getHtmlId",value:function(e){return this.id}},{key:"getDataSet",value:function(){return{}}},{key:"getThumbnail",value:function(){return null}},{key:"getIndex",value:function(){return 0}}]),e}(),Wf=function(){function e(t){var n=t.objectFolderOrObject,r=t.global,i=t.isRoot,a=t.content,o=t.objectFolderTreeViewItemProps,s=t.objectTreeViewItemProps;(0,ze.Z)(this,e),this.isPlaceholder=!1,this.openIfSearchMatches=!0,this.openWithSingleClick=!0,this.isRoot=i,this.global=r,this.content=a,this.objectFolderOrObject=n,this.objectFolderTreeViewItemProps=o,this.objectTreeViewItemProps=s}return(0,We.Z)(e,[{key:"getChildren",value:function(){var e=this;return 0===this.objectFolderOrObject.getChildrenCount()?[]:(0,mt.mapFor)(0,this.objectFolderOrObject.getChildrenCount(),(function(t){var n=e.objectFolderOrObject.getChildAt(t);return Ff({objectFolderOrObject:n,isGlobal:e.global,objectFolderTreeViewItemProps:e.objectFolderTreeViewItemProps,objectTreeViewItemProps:e.objectTreeViewItemProps})}))}}]),e}(),Gf=function(){function e(t,n){(0,ze.Z)(this,e),this.applySearch=!0,this.object=t,this.props=n}return(0,We.Z)(e,[{key:"getObjectFolderOrObject",value:function(){return this.object}},{key:"getName",value:function(){return this.object.getObject().getName()}},{key:"getDescription",value:function(){return null}},{key:"getId",value:function(){return Rf(this.object.getObject())}},{key:"getHtmlId",value:function(e){return null}},{key:"getDataSet",value:function(){return{objectName:this.object.getObject().getName()}}},{key:"getThumbnail",value:function(){return this.props.getThumbnail(this.props.project,this.object.getObject().getConfiguration())}}]),e}(),Yf=function(){function e(t,n){(0,ze.Z)(this,e),this.applySearch=!0,this.objectFolder=t,this.props=n}return(0,We.Z)(e,[{key:"getObjectFolderOrObject",value:function(){return this.objectFolder}},{key:"getName",value:function(){return this.objectFolder.getFolderName()}},{key:"getDescription",value:function(){return null}},{key:"getId",value:function(){return Of(this.objectFolder)}},{key:"getHtmlId",value:function(e){return null}},{key:"getDataSet",value:function(){return{folderName:this.objectFolder.getFolderName()}}},{key:"getThumbnail",value:function(){return"FOLDER"}}]),e}(),qf=function(e,t){return"".concat(t?"".concat(t,"-"):"","instruction-group-").concat(e)},Jf=function(){function e(t,n){(0,ze.Z)(this,e),this.content=t,this.displayAsPrimaryButton=!!n}return(0,We.Z)(e,[{key:"getChildren",value:function(){return null}}]),e}(),Xf=function e(t){var n=t.instructionOrGroup,r=t.freeInstructionProps;return Object.entries(n).map((function(t){var n=(0,s.Z)(t,2),i=n[0],a=n[1];if("string"===typeof a.type)return new Jf(new $f(a));var o=a,c=r.getGroupIconSrc(i)||r.parentGroupIconSrc,u=(0,l.Z)((0,l.Z)({},r),{},{parentGroupIconSrc:c}),d=new Qf(i,u),p=(0,l.Z)((0,l.Z)({},u),{},{parentId:d.getId()});return new Kf(d,e({instructionOrGroup:o,freeInstructionProps:p}))}))},Kf=function(){function e(t,n){(0,ze.Z)(this,e),this.isRoot=!1,this.openWithSingleClick=!0,this.content=t,this.children=n}return(0,We.Z)(e,[{key:"getChildren",value:function(){return this.children}}]),e}(),Qf=function(){function e(t,n){(0,ze.Z)(this,e),this.applySearch=!1,this.name=t,this.props=n}return(0,We.Z)(e,[{key:"getName",value:function(){return this.name}},{key:"getDescription",value:function(){return null}},{key:"getId",value:function(){return qf(this.name,this.props.parentId)}},{key:"getHtmlId",value:function(){return null}},{key:"getDataSet",value:function(){return{group:this.name}}},{key:"getThumbnail",value:function(){return this.props.parentId?this.props.getGroupIconSrc(this.name)||this.props.parentGroupIconSrc:"NONE"}}]),e}(),$f=function(){function e(t){(0,ze.Z)(this,e),this.applySearch=!1,this.instructionMetadata=t}return(0,We.Z)(e,[{key:"getInstructionMetadata",value:function(){return this.instructionMetadata}},{key:"getName",value:function(){return this.instructionMetadata.displayedName}},{key:"getDescription",value:function(){return null}},{key:"getId",value:function(){return"instruction-item-".concat(this.instructionMetadata.type.replace(/:/g,"-"))}},{key:"getHtmlId",value:function(){return this.getId()}},{key:"getDataSet",value:function(){return{instructionType:this.instructionMetadata.type.replace(/:/g,"-"),object:this.instructionMetadata.scope.objectMetadata?this.instructionMetadata.scope.objectMetadata.name.replace(/:/g,"-")+"-":void 0}}},{key:"getThumbnail",value:function(){return this.instructionMetadata.iconFilename}}]),e}(),eh=function(){function e(t,n){(0,ze.Z)(this,e),this.applySearch=!1,this.name=t,this.onClick=n}return(0,We.Z)(e,[{key:"getName",value:function(){return this.name}},{key:"getDescription",value:function(){return null}},{key:"getId",value:function(){return"more-instructions"}},{key:"getHtmlId",value:function(){return null}},{key:"getDataSet",value:function(){return{}}},{key:"getThumbnail",value:function(){return null}}]),e}(),th=n.g.gd,nh="local-objects",rh="higher-scope-objects",ih="local-groups",ah="higher-scope-groups",oh=function(e){if(e.layout||e.externalEvents)return(0,f.jsx)(w.Trans,{id:"There is no object in your game or in this scene. Start by adding an new object in the scene editor, using the objects list."});if(e.eventsBasedObject)return(0,f.jsx)(w.Trans,{id:"There are no objects. Objects will appear if you add some as parameter or add children to the object."});if(e.eventsBasedBehavior)return null;if(e.eventsFunction)return(0,f.jsx)(w.Trans,{id:"There are no objects. Objects will appear if you add some as parameters."});throw new Error("Scope not recognized.")},sh=function(e){return th.JsPlatform.get().getInstructionOrExpressionGroupMetadata(e).getIcon()},lh={noObjectsText:{opacity:.7},indentedListItem:{paddingLeft:45},treeViewContainer:{flex:1},treeViewAutoSizer:{width:"100%"}},ch=function(e){return e.content.applySearch},uh=function(e){return e.content instanceof Hf||e.content instanceof Vf||e.content instanceof eh?44:32},dh=function(e){return e.content.getName()},ph=function(e){return e.content.getDescription()},fh=function(e){return e.content.getId()},hh=function(e,t){return e.content.getHtmlId(t)},gh=function(e){return e.content.getThumbnail()},mh=function(e){return e.content.getDataSet()},xh=c.forwardRef((function(e,t){var n=e.project,a=e.projectScopedContainersAccessor,o=e.scope,u=e.currentTab,d=e.onChangeTab,p=e.isCondition,h=e.focusOnMount,g=e.chosenInstructionType,m=e.onChooseInstruction,x=e.chosenObjectName,v=e.onChooseObject,b=e.onSearchStartOrReset,C=e.style,j=e.onClickMore,y=e.i18n,Z=c.useRef(null),k=c.useRef(null),T=c.useRef(null),S=c.useRef((0,sf.f)((0,lf.J)((0,of.Xn)(p,y),o),y)),P=c.useRef((0,sf.Z)(S.current,g)),I=c.useRef(P.current?P.current.reduce((function(e,t){var n=e.length>0?e[e.length-1]:null;return e.push(qf(t,n)),e}),[]):[]),E=c.useRef((0,lf.J)((0,of.ZB)(p,y),o)),L=c.useRef(new Cf.Z(E.current,(0,l.Z)((0,l.Z)({},jf.KE),{},{includeScore:!0,keys:[{name:"displayedName",weight:5},{name:"fullGroupName",weight:1},{name:"description",weight:3}]}))),A=c.useContext(gi.Z).currentlyRunningInAppTutorial,O=c.useState(""),R=(0,s.Z)(O,2),F=R[0],D=R[1],N=c.useState({instructions:[]}),_=(0,s.Z)(N,2),U=_[0],V=_[1],H=c.useState(null),z=(0,s.Z)(H,2),W=z[0],G=z[1],Y=c.useMemo((function(){return a.get().getObjectsContainersList()}),[a]);if(0===Y.getObjectsContainersCount())throw new Error("Used InstructionOrObjectSelector without any object container.");Y.getObjectsContainersCount()>2&&console.error("Used InstructionOrObjectSelector with more than 2 object containers.");var q=c.useMemo((function(){return(0,tc.hU)(Y)}),[Y]).allObjectsList,J=Y.getObjectsContainersCount()>1?Y.getObjectsContainer(0):null,X=Y.getObjectsContainer(Y.getObjectsContainersCount()-1),K=c.useRef([].concat((0,r.Z)((0,yf.$8)(X).map((function(e){return e.folder}))),(0,r.Z)(J?(0,yf.$8)(J).map((function(e){return e.folder})):[])).map(Of)),Q=c.useRef((0,r.Z)(Object.keys(S.current).map((function(e){return qf(e)})))),$=(0,gt.Z)(),ee=c.useCallback((function(e){S.current=(0,sf.f)((0,lf.J)((0,of.Xn)(p,e),o),e),$()}),[$,p,o]);c.useImperativeHandle(t,(function(){return{reEnumerateInstructions:ee}})),c.useEffect((function(){var e=k.current;e&&(e.updateRowHeights(),e.scrollTo(0))}),[F]),c.useEffect((function(){if(x){var e,t=x,n=k.current;if(!n)return;var r,a=(0,i.Z)(n.getDisplayedItemsIterator());try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.content instanceof Df){var s=o.content.getGroup();if(!s)return;if(s.getName()===t){e=o;break}}if(o.content instanceof Gf){var l=o.content.getObjectFolderOrObject();if(!l)return;if(l.getObject().getName()===t){e=o;break}}}}catch(m){a.e(m)}finally{a.f()}e&&(G(e),n.scrollToItem(e,"start"))}else if(g){var c,u=T.current;if(!u)return;var d,p=(0,i.Z)(u.getDisplayedItemsIterator());try{for(p.s();!(d=p.n()).done;){var f=d.value;if(f.content instanceof $f){var h=f.content.getInstructionMetadata();if(!h)return;if(h.type===g){G(f),u.scrollToItem(f,"start");break}}}}catch(m){p.e(m)}finally{p.f()}c}}),[]);var te=function(e){return e.getChildren(F)},ne=c.useCallback((function(e){if(e){var t=e.toLowerCase(),n=function(e){var t=e.filter((function(e){return e.item.fullGroupName.includes("deprecated")})),n=e.filter((function(e){return!e.item.fullGroupName.includes("deprecated")}));return[].concat((0,r.Z)(n),(0,r.Z)(t))}(L.current.search((0,jf.G9)(e,["displayedName","fullGroupName","description"])).map(jf.Bg).filter(Boolean).map((function(e){return(0,jf._f)(e,t)})).sort((0,jf.wV)(["displayedName","description","fullGroupName"])));V({instructions:n})}}),[]),re=!!F,ie=[];re&&(ie=U.instructions);var ae=ie.slice(0,20),oe=re?Math.max(ie.length-20,0):0,se=J?J.getRootFolder():null,le=X.getRootFolder(),ce=X.getObjectGroups(),ue=ce.count()>0,de=J?J.getObjectGroups():null,pe=!!de&&de.count()>0,fe={project:n,getThumbnail:rc.Z.getThumbnail.bind(rc.Z)},he={project:n},ge=c.useMemo((function(){return function(e){if(e.layout||e.externalEvents)return{localScopeObjectsTitle:{id:"Scene objects"},higherScopeObjectsTitle:{id:"Global objects"},localScopeGroupsTitle:{id:"Scene groups"},higherScopeGroupsTitle:{id:"Global groups"}};if(e.eventsBasedObject)return{localScopeObjectsTitle:{id:"Parameters"},higherScopeObjectsTitle:{id:"Object's children"},localScopeGroupsTitle:null,higherScopeGroupsTitle:{id:"Object's children groups"}};if(e.eventsBasedBehavior)return{localScopeObjectsTitle:{id:"Attached object"},higherScopeObjectsTitle:null,localScopeGroupsTitle:null,higherScopeGroupsTitle:null};if(e.eventsFunction)return{localScopeObjectsTitle:{id:"Parameters"},higherScopeObjectsTitle:null,localScopeGroupsTitle:null,higherScopeGroupsTitle:null};throw new Error("Scope not recognized.")}(o)}),[o]),me=function(e){return[].concat((0,r.Z)(Xf({instructionOrGroup:S.current,freeInstructionProps:{getGroupIconSrc:sh}})),[j?new Jf(new eh(p?(0,f.jsx)(w.Trans,{id:"Search for new conditions in extensions"}):(0,f.jsx)(w.Trans,{id:"Search for new actions in extensions"}),j),!0):null]).filter(Boolean)},xe=function(e){return[new Wf({objectFolderOrObject:le,global:!1,isRoot:!0,content:new zf(nh,e._(ge.localScopeObjectsTitle)),objectTreeViewItemProps:fe,objectFolderTreeViewItemProps:he}),se?new Wf({objectFolderOrObject:se,global:!0,isRoot:!0,content:new zf(rh,ge.higherScopeObjectsTitle?e._(ge.higherScopeObjectsTitle):""),objectTreeViewItemProps:fe,objectFolderTreeViewItemProps:he}):null,ue?new Uf(new zf(ih,ge.localScopeGroupsTitle?e._(ge.localScopeGroupsTitle):""),(0,mt.mapFor)(0,ce.count(),(function(e){var t=ce.getAt(e);return new Bf(new Df(t),t,J,X,fe)}))):null,pe&&de?new Uf(new zf(ah,ge.higherScopeGroupsTitle?e._(ge.higherScopeGroupsTitle):""),(0,mt.mapFor)(0,de.count(),(function(e){var t=de.getAt(e);return new Bf(new Df(t),t,J,X,fe)}))):null,ae.length>0?new Uf(new zf("instructions",e._(p?{id:"Conditions"}:{id:"Actions"})),[].concat((0,r.Z)(ae.map((function(e){return new _f(new Hf(e.item))}))),[oe?new _f(new Vf(e._({id:"And {remainingResultsCount} more results.",values:{remainingResultsCount:oe}}),e._({id:"Refine your search with more specific keywords."}))):null]).filter(Boolean)):null].filter(Boolean)},ve=c.useMemo((function(){if(!re)return!0;if(ae.length>0)return!0;var e=k.current;return!e||e.getDisplayedItemsCount()>0}),[ae,re]),be=!re&&!q.length,Ce=re&&!ve;return(0,f.jsxs)("div",{id:"instruction-or-object-selector",style:(0,l.Z)({minHeight:0},C),children:[(0,f.jsx)(Ge.Z,{id:"search-bar",value:F,onChange:function(e){var t=F;e&&ne(e),D(e),(!t&&e||t&&!e)&&b&&b()},onRequestSearch:function(){if(F&&k.current){var e,t=(0,i.Z)(k.current.getDisplayedItemsIterator());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.content instanceof Df){var r=n.content.getGroup();if(!r)return;v(r.getName());break}if(n.content instanceof Gf){var a=n.content.getObjectFolderOrObject();if(!a)return;v(a.getObject().getName());break}if(n.content instanceof Nf){var o=n.content.getObject();if(!o)return;v(o.getName());break}if(n.content instanceof Hf){var s=n.content.getInstructionMetadata();if(!s)return;m(s.type,s);break}}}catch(l){t.e(l)}finally{t.f()}}},ref:Z,autoFocus:h?"desktop":void 0,placeholder:p?{id:"Search objects or conditions"}:{id:"Search objects or actions"}}),!re&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(B.m,{value:u,onChange:d,options:[{label:(0,f.jsx)(w.Trans,{id:"Objects"}),value:"objects"},{label:p?(0,f.jsx)(w.Trans,{id:"Other conditions"}):(0,f.jsx)(w.Trans,{id:"Other actions"}),value:"free-instructions"}]})})}),be&&"objects"===u?(0,f.jsx)(Ae.Z,{children:oh(o)}):Ce?(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Nothing corresponding to your search. Choose an object first or browse the list of actions/conditions."})}):null,(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},lh.treeViewContainer),{},{display:"objects"!==u&&!re||Ce||be?"none":"unset"}),children:(0,f.jsx)(Br.qj,{style:lh.treeViewAutoSizer,disableWidth:!0,children:function(e){var t=e.height;return(0,f.jsx)(Af,{ref:k,height:t,estimatedItemSize:32,items:xe(y),getItemHeight:uh,getItemName:dh,shouldApplySearchToItem:ch,getItemDescription:ph,forceAllOpened:!!A,getItemId:fh,getItemHtmlId:hh,getItemChildren:te,getItemThumbnail:gh,getItemDataset:mh,selectedItems:W?[W]:[],initiallyOpenedNodeIds:[nh,rh,ih,ah].concat((0,r.Z)(K.current)),onSelectItems:function(e){if(e){var t=e[0];if(t&&!t.isRoot){var n=t.content;if(n instanceof Gf){var r=n.getObjectFolderOrObject();if(!r||r.isFolder())return;v(r.getObject().getName()),G(t)}else if(n instanceof Df){var i=n.getGroup();if(!i)return;v(i.getName()),G(t)}else if(n instanceof Nf){var a=n.getObject();if(!a)return;v(a.getName()),G(t)}else if(n instanceof Hf){var o=n.getInstructionMetadata();if(!o)return;m(o.type,o),G(t)}}}},searchText:F,multiSelect:!1},"objects-and-search-results")}})}),(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},lh.treeViewContainer),{},{display:"free-instructions"!==u||re?"none":"unset"}),children:(0,f.jsx)(Br.qj,{style:lh.treeViewAutoSizer,disableWidth:!0,children:function(e){var t=e.height;return(0,f.jsx)(Af,{ref:T,height:t,items:me(),getItemHeight:uh,getItemName:dh,shouldApplySearchToItem:function(){return!1},getItemDescription:ph,getItemId:fh,getItemHtmlId:hh,getItemChildren:te,getItemThumbnail:gh,getItemDataset:mh,selectedItems:W?[W]:[],initiallyOpenedNodeIds:Array.from(new Set([].concat((0,r.Z)(Q.current),(0,r.Z)(I.current)))),onSelectItems:function(e){if(e){var t=e[0];if(t&&!t.isRoot){var n=t.content;if(n instanceof $f){var r=n.getInstructionMetadata();if(!r)return;m(r.type,r),G(t)}else n instanceof eh&&n.onClick()}}},multiSelect:!1},"free-instructions")}})})]})})),vh=xh,bh=n(92694),Ch={display:"flex"},jh=function(e){var t=e.columnsRenderer,n=e.getColumns,r=c.useContext(j.Z),i=n();return(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,children:i.map((function(e,n){var a=e.columnName,o=t[a],s=i[n].ratio||1;if(!o)return null;var c=0===n,u=n===i.length-1,d=c?0:s>1?4*(s+1):4,p=u?0:s>1?4*(s+1):4;return(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},Ch),{},{flex:s,paddingLeft:d,paddingRight:p,borderRight:u?void 0:"2px solid ".concat(r.dialog.separator)}),children:o()},a)}))})},yh=function(e,t,n){var r=e.getAllPlatformExtensions();return Tc()((0,mt.mapFor)(0,r.size(),(function(e){var t=r.at(e);return t.getBehaviorsTypes().toJSArray().map((function(e){return{behaviorType:e,behaviorMetadata:t.getBehaviorMetadata(e)}})).filter((function(e){return!e.behaviorMetadata.isPrivate()||n&&t.getName()===n.getName()})).map((function(e){var n=e.behaviorType,r=e.behaviorMetadata;return{extension:t,behaviorMetadata:r,type:n,defaultName:r.getDefaultName(),fullName:r.getFullName(),description:r.getDescription(),previewIconUrl:r.getIconFilename(),objectType:r.getObjectType(),category:t.getCategory(),tags:t.getTags().toJSArray()}}))})))},Zh=function(e){return e.getName().includes("Capability")||"Scene3D::Base3DBehavior"===e.getName()},kh=n(335),wh=n.n(kh),Th=n(8162),Sh=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"22",height:"22",viewBox:"-2 -2 20 20",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 7.99996C8.36818 7.99996 8.66666 8.29844 8.66666 8.66663V9.99996C8.66666 10.3681 8.36818 10.6666 7.99999 10.6666C7.6318 10.6666 7.33332 10.3681 7.33332 9.99996V8.66663C7.33332 8.29844 7.6318 7.99996 7.99999 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.99999 6.66663C8.36818 6.66663 8.66666 6.36815 8.66666 5.99996C8.66666 5.63177 8.36818 5.33329 7.99999 5.33329C7.6318 5.33329 7.33332 5.63177 7.33332 5.99996C7.33332 6.36815 7.6318 6.66663 7.99999 6.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05444 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05447 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"})]}))})),Ph=n.g.gd,Ih={button:{width:"100%"},container:{display:"flex",textAlign:"left",overflow:"hidden",width:"100%"}},Eh=function(e){var t=e.id,n=e.objectType,r=e.objectBehaviorsTypes,i=e.isChildObject,a=e.behaviorShortHeader,o=e.matches,s=e.onChoose,u=e.onShowDetails,d=e.onHeightComputed,p=e.platform,h=r.includes(a.type),g=Ph.MetadataProvider.getBehaviorMetadata(p,a.type),m=(!a.objectType||n===a.objectType)&&(!i||g.isRelevantForChildObjects())&&a.allRequiredBehaviorTypes.every((function(e){var t=Ph.MetadataProvider.getBehaviorMetadata(p,e);return(!i||t.isRelevantForChildObjects())&&(!t.isHidden()||r.includes(e))})),x=(0,Qr.XB)((0,De.r1)(),a.gdevelopVersion),v=c.useRef(null);c.useLayoutEffect((function(){v.current&&d(v.current.getBoundingClientRect().height)}));var b=function(e){var t=a[e];if(!o)return t;var n=o.filter((function(t){return t.key===e}));return 0===n.length?t:(0,f.jsx)(qr.Z,{text:t,matchesCoordinates:n[0].indices})},C=!h&&m&&x,j=c.useCallback((function(){C&&s()}),[C,s]),y=h||!m||!x||"experimental"===a.tier||a.isDeprecated||!1,Z={paddingTop:a.authors||!1?10:y?6:4};return(0,f.jsx)(lt.Z,{id:t,onClick:j,focusRipple:!0,style:Ih.button,children:(0,f.jsx)("div",{style:C?Ih.container:(0,l.Z)((0,l.Z)({},Ih.container),{},{opacity:.384}),ref:v,children:(0,f.jsxs)(_.pJ,{children:[(0,f.jsx)("div",{style:Z,children:(0,f.jsx)(Hr.q,{alt:a.fullName,src:a.previewIconUrl,size:32})}),(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:b("fullName")}),h&&(0,f.jsx)(Q.Z,{size:"small",label:(0,f.jsx)(w.Trans,{id:"Already added"}),color:"secondary",variant:"outlined"}),!m&&(0,f.jsx)(Q.Z,{size:"small",label:(0,f.jsx)(w.Trans,{id:"Incompatible with the object"}),color:"secondary",variant:"outlined"}),!x&&!h&&m&&(0,f.jsx)(Q.Z,{size:"small",label:(0,f.jsx)(w.Trans,{id:"Need latest GDevelop version"}),color:"secondary",variant:"outlined"}),"experimental"===a.tier&&(0,f.jsx)(Q.Z,{size:"small",label:(0,f.jsx)(w.Trans,{id:"Experimental"}),color:"primary"}),a.isDeprecated&&(0,f.jsx)(Q.Z,{size:"small",label:(0,f.jsx)(w.Trans,{id:"Deprecated"}),color:"primary"}),a.authors&&(0,f.jsx)(re.ZP,{title:a.authors.length>0?(0,f.jsx)(M.x1,{children:(0,f.jsx)("div",{style:{flexWrap:"wrap"},children:a.authors.map((function(e){return(0,f.jsx)(Yr,{user:e,variant:"outlined"},e.id)}))})}):"",children:(0,f.jsx)($.Z,{size:"small",onClick:function(e){e.stopPropagation(),u()},children:(0,f.jsx)(Sh,{})})})]}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body2",allowBrowserAutoTranslate:!1,displayInlineAsSpan:!0,children:b("description")})]})]})})})},Mh=n(61804),Lh=function(e){return e.type},Ah=function(e){var t=e.isInstalling,n=e.project,i=e.objectType,l=e.objectBehaviorsTypes,u=e.isChildObject,d=e.installedBehaviorMetadataList,p=e.deprecatedBehaviorMetadataList,h=e.onInstall,g=e.onChoose,m=c.useContext(D.ZP),x=c.useState(null),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=c.useContext(Th.y),y=j.filters,Z=j.searchResults,k=j.error,w=j.fetchBehaviors,T=j.filtersState,S=j.searchText,I=j.setSearchText,E=j.allCategories,L=j.chosenCategory,A=j.setChosenCategory,O=j.setInstalledBehaviorMetadataList,R=c.useState(!1),F=(0,s.Z)(R,2),N=F[0],B=F[1];c.useEffect((function(){O(N?[].concat((0,r.Z)(d),(0,r.Z)(p)):d)}),[p,d,O,N]),c.useEffect((function(){w()}),[w]);var U=Z||null,V=c.useMemo((function(){return{add:T.addFilter,remove:T.removeFilter,chosenTags:T.chosenFilters}}),[T]),H=c.useCallback((function(e){if(!Z)return[];var t=Z.find((function(t){return t.item.type===e.type}));return t?t.matches:[]}),[Z]),z=(0,et.Z)("intro-behaviors-and-functions").DismissableTutorialMessage,W=function(){var e=(0,Ye.Z)().showConfirmation,t=c.useContext(gi.Z).currentlyRunningInAppTutorial;return function(){var n=(0,o.Z)((0,a.Z)().mark((function n(r,i){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt("return",!1);case 2:return n.next=4,e({title:{id:"Extension update"},message:"reviewed"===i.tier?{id:"This behavior can be updated with new features and fixes.{0}Do you want to update it now ?",values:{0:"\n\n"}}:{id:"This behavior can be updated. You may have to do some adaptations to make sure your game still works.{0}Do you want to update it now ?",values:{0:"\n\n"}},confirmButtonLabel:{id:"Update the extension"},dismissButtonLabel:{id:"Skip the update"}});case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(),G=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("installed"!==t.tier){e.next=3;break}return g(t.type),e.abrupt("return");case 3:if(!(t.extensionName&&n.hasEventsFunctionsExtensionNamed(t.extensionName))){e.next=22;break}if(r=n.getEventsFunctionsExtension(t.extensionName).getVersion(),wh()(t.version,r)){e.next=9;break}return g(t.type),e.abrupt("return");case 9:if((0,Qr.XB)((0,De.r1)(),t.gdevelopVersion)){e.next=12;break}return g(t.type),e.abrupt("return");case 12:if(!((i=(0,Qr.dY)(r,t))&&i.length>0)){e.next=16;break}return g(t.type),e.abrupt("return");case 16:return e.next=18,W(n,t);case 18:if(e.sent){e.next=22;break}return g(t.type),e.abrupt("return");case 22:if(!t.url){e.next=30;break}return(0,ai.ix)(t.name),e.next=26,h(t);case 26:e.sent&&g(t.type),e.next=31;break;case 30:g(t.type);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,g,W,h]);return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,children:[(0,f.jsxs)(li,{value:L,onChange:function(e,t,n){A(n)},children:[(0,f.jsx)(P.Z,{value:"",label:{id:"All categories"}}),E.map((function(e){return(0,f.jsx)(P.Z,{value:e,label:e},e)}))]}),(0,f.jsxs)(M.x1,{expand:!0,noMargin:!0,children:[(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(Ge.Z,{id:"extension-search-bar",value:S,onChange:I,onRequestSearch:function(){},tagsHandler:V,tags:y&&y.allTags,placeholder:{id:"Search behaviors"},autoFocus:"desktop"})}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",children:(0,f.jsx)(Mh.Z,{})}),buildMenuTemplate:function(e){return[{label:m.values.showExperimentalExtensions?e._({id:"Hide experimental behaviors"}):e._({id:"Show experimental behaviors"}),click:function(){m.setShowExperimentalExtensions(!m.values.showExperimentalExtensions)}},{label:N?e._({id:"Hide deprecated behaviors (prefer not to use anymore)"}):e._({id:"Show deprecated behaviors (prefer not to use anymore)"}),click:function(){B(!N)}}]}},"menu")]})]}),z]}),(0,f.jsx)(Vr,{disableAutoTranslate:!0,onRetry:w,error:k,searchItems:U&&U.map((function(e){return e.item})),getSearchItemUniqueId:Lh,renderSearchItem:function(e,t){return(0,f.jsx)(Eh,{id:"behavior-item-"+e.type.replace(/:/g,"-"),objectType:i,objectBehaviorsTypes:l,isChildObject:u,onHeightComputed:t,behaviorShortHeader:e,matches:H(e),onChoose:function(){G(e)},onShowDetails:function(){e.headerUrl&&C(e)},platform:n.getCurrentPlatform()},e.type)}})]}),!!b&&(0,f.jsx)(ii,{project:n,isInstalling:t,extensionShortHeader:b,onClose:function(){return C(null)}})]})},Oh=n.g.gd;function Rh(e){var t=e.project,n=e.eventsFunctionsExtension,r=e.open,i=e.onClose,l=e.onChoose,u=e.objectType,d=e.objectBehaviorsTypes,p=e.isChildObject,h=e.onWillInstallExtension,g=e.onExtensionInstalled,m=c.useState(!1),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useContext($n.ZP),j=c.useContext(Nr.H).translatedExtensionShortHeadersByName,y=(0,pi.WF)(),Z=(0,xi.zi)(C,xi.Ch,(function(){})),k=c.useMemo((function(){return(0,pf.du)()}),[]),S=c.useCallback((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,mt.mapVector)(e.getRequiredBehaviorTypes(),(function(e){if(!n.includes(e)){n.push(e);var r=Oh.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),e);S(r,n)}})),n}),[t]),P=c.useMemo((function(){var e=t.getCurrentPlatform();return(t&&e?yh(e,0,n):[]).filter((function(e){return!e.behaviorMetadata.isHidden()})).map((function(e){return{type:e.type,fullName:e.fullName,description:e.description,previewIconUrl:e.previewIconUrl,objectType:e.objectType,category:e.category,allRequiredBehaviorTypes:S(e.behaviorMetadata),tags:e.tags,name:Oh.PlatformExtension.getBehaviorNameFromFullBehaviorType(e.type),extensionName:Oh.PlatformExtension.getExtensionFromFullBehaviorType(e.type),isInstalled:!0,tier:"installed",version:"",url:"",headerUrl:"",extensionNamespace:"",authorIds:[]}}))}),[t,n,S]),I=c.useMemo((function(){return P.filter((function(e){return!k[e.type]}))}),[P,k]),M=c.useMemo((function(){var e=P.filter((function(e){return k[e.type]}));return e.forEach((function(e){return e.isDeprecated=!0})),e}),[P,k]);if(!r||!t)return null;var L=(0,xi.zi)(C,xi.Ey,(function(e,n){k[n]&&(0,bi.N0)(e._(k[n].warning));var r=Oh.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),n);return l(n,r.getDefaultName())})),A=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,r){var i,o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,i=[r],o=(0,pi.WC)(i),e.next=6,(0,pi.bg)({requiredExtensions:o,project:t,extensionShortHeadersByName:j});case 6:return s=e.sent,l=(0,pi.Fk)(j,r.extensionName),s.missingExtensionShortHeaders.includes(l)||s.missingExtensionShortHeaders.push(l),e.next=11,y({project:t,requiredExtensionInstallation:s,importedSerializedExtensions:[],onWillInstallExtension:h,onExtensionInstalled:g,updateMode:"all",reason:"behavior"});case 11:return(c=e.sent)&&Z(),e.abrupt("return",c);case 14:return e.prev=14,b(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,,14,17]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Add a new behavior to the object"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:i},"close")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/behaviors"},"help")],open:!0,onRequestClose:i,flexBody:!0,fullHeight:!0,id:"new-behavior-dialog",children:(0,f.jsx)(Ah,{project:t,objectType:u,objectBehaviorsTypes:d,isChildObject:p,isInstalling:v,onInstall:function(e){return A(n,e)},onChoose:function(e){return L(n,e)},installedBehaviorMetadataList:I,deprecatedBehaviorMetadataList:M})})}})}var Fh=n.g.gd,Dh=function(e,t,n,r){if(function(e,t){return e.getAllBehaviorNames().toJSArray().filter((function(n){return e.getBehavior(n).getTypeName()===t})).length}(t,n)&&!y.ZP.showConfirmDialog("There is already a behavior of this type attached to the object. It's possible to add this behavior again, but it's unusual and may not always be supported properly. Are you sure you want to add this behavior again?"))return!1;var i=(0,xt.Z)(r,(function(e){return t.hasBehaviorNamed(e)}));return Fh.WholeProjectRefactorer.addBehaviorAndRequiredBehaviors(e,t,n,i),t.getBehavior(i).setFolded(!1),!0},Nh=function(e){return e.getAllBehaviorNames().toJSArray().map((function(t){return e.getBehavior(t).getTypeName()}))},_h={fullHeightSelector:{flex:1,display:"flex",flexDirection:"column"}},Bh=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.projectScopedContainersAccessor,a=e.onCancel,o=e.open,l=e.instruction,u=e.isCondition,d=e.isNewInstruction,p=e.scope,h=e.onSubmit,g=e.resourceManagementProps,m=e.openInstructionOrExpression,x=e.onWillInstallExtension,v=e.onExtensionInstalled,b=e.i18n,C=(0,gt.Z)(),j=df({instruction:l,isCondition:u,project:t,isNewInstruction:d,scope:p,globalObjectsContainer:n,objectsContainer:r,i18n:b}),y=(0,s.Z)(j,2),Z=y[0],k=y[1],S=Z.chosenObjectName,P=Z.chosenObjectInstructionsInfo,I=Z.chosenObjectInstructionsInfoTree,M=k.chooseInstruction,L=k.chooseObject,A=k.chooseObjectInstruction,O=!!P&&!!I,R=S?(0,iu.Z)(n,r,S):null,F=c.useRef(null),D=c.useState((function(){return function(e){return e?"object-or-free-instructions":"parameters"}(d)})),N=(0,s.Z)(D,2),_=N[0],B=N[1],U=c.useState((function(){return function(e,t){return e||t?"objects":"free-instructions"}(d,O)})),V=(0,s.Z)(U,2),H=V[0],z=V[1],W=(0,be.UQ)(),G=W.isMobile,Y=W.windowSize,q=W.isMediumScreen,J="large"===Y||"xlarge"===Y,X=l.getType(),K=c.useState(!1),Q=(0,s.Z)(K,2),$=Q[0],ee=Q[1],te=c.useState(!1),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],ae=(0,hi.bX)(),oe=c.useRef(null);c.useEffect((function(){ae&&"parameters"===_&&oe.current&&oe.current.focus()}),[_,ae]);var se=uf({instructionType:X,isCondition:u,project:t}),le=se?se.getHelpPath():void 0;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(E.ZP,{title:u?(0,f.jsx)(w.Trans,{id:"Condition"}):(0,f.jsx)(w.Trans,{id:"Action"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:a},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Ok"}),primary:!0,disabled:!X,onClick:h,id:"ok-button"},"ok")],secondaryActions:[(G||q)&&"object-or-free-instructions"!==_?(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Back"}),primary:!1,onClick:function(){B("parameters"===_&&S?q?"object-or-free-instructions":"object-instructions":"object-or-free-instructions")}},"back"):null,(0,f.jsx)(An.Z,{helpPagePath:le||"/events",label:!le||G||"object-or-free-instructions"===_?(0,f.jsx)(w.Trans,{id:"Help"}):u?(0,f.jsx)(w.Trans,{id:"Help for this condition"}):(0,f.jsx)(w.Trans,{id:"Help for this action"})},"help")],open:o,onRequestClose:a,onApply:X?h:null,maxWidth:!1,flexBody:!0,fullHeight:!0,id:"instruction-editor-dialog",children:(0,f.jsx)(jh,{columnsRenderer:{"instruction-or-object-selector":function(){return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(vh,{style:_h.fullHeightSelector,project:t,projectScopedContainersAccessor:i,scope:p,ref:F,currentTab:H,onChangeTab:z,isCondition:u,chosenInstructionType:S?void 0:X,onChooseInstruction:function(e){M(e),B("parameters")},chosenObjectName:S,onChooseObject:function(e){L(e),B("object-instructions")},focusOnMount:ae&&!X,onSearchStartOrReset:C,onClickMore:function(){return ie(!0)},i18n:n},"instruction-or-object-selector")}})},"object-instruction-selector":function(){return I&&P?(0,f.jsx)(bh.Z,{style:_h.fullHeightSelector,instructionsInfo:P,instructionsInfoTree:I,iconSize:24,onChoose:function(e){A(e),B("parameters")},selectedType:X,useSubheaders:!0,focusOnMount:ae&&!X,searchPlaceholderObjectName:S,searchPlaceholderIsCondition:u,onClickMore:p.layout?function(){return ee(!0)}:null,id:"object-instruction-selector"},"object-instruction-selector"):null},parameters:function(){return(0,f.jsx)(bf,{project:t,scope:p,globalObjectsContainer:n,objectsContainer:r,projectScopedContainersAccessor:i,objectName:S,isCondition:u,instruction:l,resourceManagementProps:g,openInstructionOrExpression:m,ref:oe,focusOnMount:ae&&!!X,noHelpButton:!0,id:"object-instruction-parameters"},"parameters")}},getColumns:function(){return J?[{columnName:"instruction-or-object-selector"},S?{columnName:"object-instruction-selector"}:null,{columnName:"parameters",ratio:S?1:2}].filter(Boolean):q?"object-or-free-instructions"===_?[{columnName:"instruction-or-object-selector",ratio:1}]:[S?{columnName:"object-instruction-selector"}:null,{columnName:"parameters"}].filter(Boolean):"object-or-free-instructions"===_?[{columnName:"instruction-or-object-selector"}]:"object-instructions"===_?[{columnName:"object-instruction-selector"}]:[{columnName:"parameters"}]}})}),$&&R&&(0,f.jsx)(Rh,{project:t,eventsFunctionsExtension:p.eventsFunctionsExtension||null,open:$,objectType:R.getType(),objectBehaviorsTypes:Nh(R),isChildObject:!p.layout,onClose:function(){return ee(!1)},onChoose:function(e,n){R&&p.layout&&(Dh(t,R,e,n)&&(ee(!1),(0,ai.qH)({behaviorType:e,parentEditor:"instruction-editor-dialog"}),p.layout&&p.layout.updateBehaviorsSharedData(t)),L(R.getName()))},onWillInstallExtension:x,onExtensionInstalled:function(e){F.current&&F.current.reEnumerateInstructions(b),v(e)}}),re&&(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(ji,{project:t,onClose:function(){return ie(!1)},onWillInstallExtension:x,onExtensionInstalled:function(e){ie(!1),F.current&&F.current.reEnumerateInstructions(n),v(e)}})}})]})},Uh=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Instruction editor"}),scope:"scene-events-instruction-editor",onClose:e.onCancel,children:(0,f.jsx)(Bh,(0,l.Z)({},e))})},Vh=n(64684),Hh={fullHeightSelector:{flex:1,display:"flex",flexDirection:"column",height:"400px",width:"400px"}},zh=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.projectScopedContainersAccessor,a=e.onCancel,o=e.open,l=e.instruction,u=e.isCondition,d=e.isNewInstruction,p=e.anchorEl,h=e.scope,g=e.onSubmit,m=e.canPasteInstructions,x=e.onPasteInstructions,v=(e.onExtensionInstalled,e.i18n),b=(0,gt.Z)(),C=df({instruction:l,isCondition:u,project:t,isNewInstruction:d,scope:h,globalObjectsContainer:n,objectsContainer:r,i18n:v}),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=y.chosenObjectName,T=y.chosenObjectInstructionsInfo,S=y.chosenObjectInstructionsInfoTree,P=Z.chooseInstruction,I=Z.chooseObject,E=Z.chooseObjectInstruction,L=c.useState("object-or-free-instructions"),A=(0,s.Z)(L,2),O=A[0],R=A[1],F=c.useState("objects"),D=(0,s.Z)(F,2),N=D[0],_=D[1],B=l.getType(),U=function(e){var n=e.instruction,r=e.chosenObjectName,a=uf({instructionType:n.getType(),isCondition:u,project:t});a&&hf(t,i,n,a,r),g()};return(0,f.jsx)(Vh.ZP,{open:o,onClose:a,anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(jh,{columnsRenderer:{"instruction-or-object-selector":function(){return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(vh,{style:Hh.fullHeightSelector,project:t,projectScopedContainersAccessor:i,scope:h,currentTab:N,onChangeTab:_,isCondition:u,chosenInstructionType:k?void 0:B,onChooseInstruction:function(e){var t=P(e),n=t.instruction,r=t.chosenObjectName;U({instruction:n,chosenObjectName:r})},chosenObjectName:k,onChooseObject:function(e){I(e),R("object-instructions")},focusOnMount:!B,onSearchStartOrReset:b,i18n:n},"instruction-or-object-selector")}})},"object-instruction-selector":function(){return S&&T?(0,f.jsx)(bh.Z,{style:Hh.fullHeightSelector,instructionsInfo:T,instructionsInfoTree:S,iconSize:24,onChoose:function(e){var t=E(e),n=t.instruction,r=t.chosenObjectName;U({instruction:n,chosenObjectName:r})},selectedType:B,useSubheaders:!0,focusOnMount:!B,searchPlaceholderObjectName:k,searchPlaceholderIsCondition:u},"object-instruction-selector"):null}},getColumns:function(){return"object-or-free-instructions"===O?[{columnName:"instruction-or-object-selector"}]:[{columnName:"object-instruction-selector"}]}})}),(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)(ba.Z,{label:u?(0,f.jsx)(w.Trans,{id:"Paste condition(s)"}):(0,f.jsx)(w.Trans,{id:"Paste action(s)"}),icon:(0,f.jsx)(Kt,{}),disabled:!m,onClick:function(){return x()}})})]})})},Wh=n(94854),Gh=n.g.gd,Yh={sizeTextField:{width:90}},qh={r:255,g:255,b:255},Jh={r:0,g:0,b:0},Xh=function(e){return e.filter((function(e){return["BuiltinCommonInstructions::Group","BuiltinCommonInstructions::Comment"].includes(e.getType())}))},Kh=function(e){var t=e.event,n=e.onClose,r=c.useState(""),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=c.useState(Jh),u=(0,s.Z)(l,2),d=u[0],p=u[1],h=c.useState(Jh),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=t.getType();c.useEffect((function(){if("BuiltinCommonInstructions::Comment"===v){var e=Gh.asCommentEvent(t);p({r:e.getTextColorRed(),g:e.getTextColorGreen(),b:e.getTextColorBlue()}),x({r:e.getBackgroundColorRed(),g:e.getBackgroundColorGreen(),b:e.getBackgroundColorBlue()}),o(Gh.asCommentEvent(t).getComment())}else if("BuiltinCommonInstructions::Group"===v){var n=Gh.asGroupEvent(t),r=n.getBackgroundColorR(),i=n.getBackgroundColorG(),a=n.getBackgroundColorB();p((function(){return(r+i+a)/3>200?Jh:qh})),x({r:n.getBackgroundColorR(),g:n.getBackgroundColorG(),b:n.getBackgroundColorB()}),o(Gh.asGroupEvent(t).getName())}else console.error("Dialog was opened for an unsupported event type: "+v)}),[t,v]);var b=c.useCallback((function(){"BuiltinCommonInstructions::Comment"===v?(Gh.asCommentEvent(t).setComment(a),Gh.asCommentEvent(t).setTextColor(d.r,d.g,d.b),Gh.asCommentEvent(t).setBackgroundColor(m.r,m.g,m.b)):"BuiltinCommonInstructions::Group"===v&&(Gh.asGroupEvent(t).setName(a),Gh.asGroupEvent(t).setBackgroundColor(m.r,m.g,m.b)),e.onApply()}),[e,t,v,a,d,m]);return(0,f.jsx)(E.ZP,{title:"BuiltinCommonInstructions::Comment"===v?(0,f.jsx)(w.Trans,{id:"Edit comment"}):(0,f.jsx)(w.Trans,{id:"Edit group"}),open:!0,actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:n},"close"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Apply"}),primary:!0,onClick:b},"Apply")],onRequestClose:n,onApply:b,children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(Wh.Z,{noPadding:!0,children:[(0,f.jsx)(Wh.c,{firstChild:!0,children:(0,f.jsx)(w.Trans,{id:"Background color:"})}),(0,f.jsx)(bu.Z,{style:Yh.sizeTextField,disableAlpha:!0,color:m,onChangeComplete:function(e){x(e.rgb)}}),"BuiltinCommonInstructions::Comment"===v&&(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(Wh.c,{children:(0,f.jsx)(w.Trans,{id:"Text color:"})}),(0,f.jsx)(bu.Z,{style:Yh.sizeTextField,disableAlpha:!0,color:d,onChangeComplete:function(e){p(e.rgb)}})]})]}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(yn.Z,{commitOnBlur:!0,translatableHintText:{id:"Enter the text to be displayed"},fullWidth:!0,multiline:!0,rows:8,rowsMax:30,value:a,onChange:function(e){o(e)}})})})})]})})},Qh=function(){var e=c.useContext(j.Z);return(0,f.jsx)("span",{style:{height:32,marginLeft:3,marginRight:3,borderLeftStyle:"solid",borderLeftWidth:1,borderColor:e.toolbar.separatorColor}})},$h=function(e){var t=e.onAddEvent;return(0,Fi.YZ)("ADD_STANDARD_EVENT",!0,{handler:e.onAddStandardEvent}),(0,Fi.YZ)("ADD_SUBEVENT",e.canAddSubEvent,{handler:e.onAddSubEvent}),(0,Fi.YZ)("ADD_LOCAL_VARIABLE",e.canAddLocalVariable,{handler:e.onAddLocalVariable}),(0,Fi.YZ)("ADD_COMMENT_EVENT",!0,{handler:e.onAddCommentEvent}),(0,Fi.YZ)("TOGGLE_EVENT_DISABLED",e.canToggleEventDisabled,{handler:e.onToggleDisabledEvent}),(0,Fi.YZ)("TOGGLE_CONDITION_INVERTED",e.canToggleInstructionInverted,{handler:e.onToggleInvertedCondition}),(0,Fi.gT)("CHOOSE_AND_ADD_EVENT",!0,{generateOptions:c.useCallback((function(){return e.allEventsMetadata.map((function(e){return{text:e.fullName,handler:function(){t(e.type)}}}))}),[e.allEventsMetadata,t])}),(0,Fi.YZ)("MOVE_EVENTS_IN_NEW_GROUP",e.canMoveEventsIntoNewGroup,{handler:e.moveEventsIntoNewGroup}),(0,Fi.YZ)("DELETE_SELECTION",e.canRemove,{handler:e.onRemove}),(0,Fi.YZ)("EVENTS_EDITOR_UNDO",e.canUndo,{handler:e.undo}),(0,Fi.YZ)("EVENTS_EDITOR_REDO",e.canRedo,{handler:e.redo}),(0,Fi.YZ)("SEARCH_EVENTS",!0,{handler:e.onToggleSearchPanel}),(0,Fi.YZ)("OPEN_EXTENSION_SETTINGS",!!e.onOpenSettings,{handler:e.onOpenSettings||function(){}}),(0,Fi.YZ)("OPEN_SCENE_VARIABLES",!0,{handler:e.onOpenSceneVariables}),null},eg=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.86269 16.5425V16.5425L2.86268 13.9464C2.86272 12.9799 3.64619 12.1964 4.61266 12.1964H8.99999C9.4142 12.1964 9.74999 12.5322 9.74999 12.9464C9.74999 13.3606 9.4142 13.6964 8.99999 13.6964H4.61271V13.6964C4.47466 13.6964 4.3627 13.8083 4.36268 13.9464V13.9464L4.36269 16.5426C4.36269 16.6806 4.47462 16.7926 4.61266 16.7926L8 16.7926C8.41422 16.7926 8.75 17.1283 8.75 17.5426C8.75 17.9568 8.41422 18.2926 8 18.2926L4.61271 18.2926V18.2926C3.64623 18.2926 2.86268 17.509 2.86269 16.5425Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.6127 9.34224C3.6462 9.34228 2.86265 8.55873 2.86268 7.59222L2.86267 4.99606C2.86271 4.02959 3.64618 3.24608 4.61265 3.24605L16.7304 3.24605C16.7355 3.24576 16.741 3.24545 16.747 3.24515C16.7751 3.24371 16.8131 3.24223 16.8596 3.24151C16.9524 3.24005 17.0808 3.24156 17.2332 3.25267C17.5335 3.27457 17.9502 3.33538 18.3792 3.49966C18.8104 3.66478 19.2795 3.94472 19.64 4.41799C20.0062 4.89887 20.2171 5.52306 20.2171 6.29597C20.2171 7.06887 20.0062 7.69299 19.6398 8.17368C19.2791 8.64675 18.8097 8.92619 18.3784 9.09077C17.9493 9.25452 17.5325 9.31477 17.2322 9.33627C17.0797 9.34718 16.9514 9.34851 16.8586 9.34693C16.8121 9.34614 16.7741 9.34462 16.746 9.34314C16.7402 9.34284 16.7349 9.34254 16.7299 9.34225L4.6127 9.34224ZM16.8163 7.84477C16.7958 7.84309 16.7753 7.84225 16.7548 7.84225L4.61268 7.84224C4.47464 7.84225 4.36268 7.73032 4.36269 7.59228L4.36267 4.99608C4.36268 4.85801 4.47461 4.74607 4.61268 4.74605V4.74605L16.7548 4.74605C16.7751 4.74605 16.7953 4.74523 16.8155 4.74359L16.8128 4.74381L16.8235 4.74319C16.8352 4.7426 16.8555 4.74176 16.8831 4.74132C16.9386 4.74045 17.0222 4.74127 17.1241 4.7487C17.3323 4.76388 17.5937 4.80508 17.8428 4.90046C18.0896 4.99501 18.2986 5.13239 18.4467 5.32685C18.589 5.51369 18.7171 5.80762 18.7171 6.29597C18.7171 6.78434 18.589 7.07788 18.4469 7.26423C18.299 7.4582 18.0903 7.59518 17.8436 7.68934C17.5946 7.78435 17.3333 7.82519 17.1251 7.8401C17.0232 7.84739 16.9396 7.84809 16.8841 7.84715C16.8565 7.84668 16.8362 7.84581 16.8245 7.8452L16.8138 7.84457V7.84457M16.8138 7.84457L16.8163 7.84477Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M13 16.75C13 16.3358 13.3358 16 13.75 16H15V14.75C15 14.3358 15.3358 14 15.75 14C16.1642 14 16.5 14.3358 16.5 14.75V16H17.75C18.1642 16 18.5 16.3358 18.5 16.75C18.5 17.1642 18.1642 17.5 17.75 17.5H16.5V18.75C16.5 19.1642 16.1642 19.5 15.75 19.5C15.3358 19.5 15 19.1642 15 18.75V17.5H13.75C13.3358 17.5 13 17.1642 13 16.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 16.75C10 13.5744 12.5744 11 15.75 11C18.9257 11 21.5 13.5744 21.5 16.75C21.5 19.9257 18.9257 22.5 15.75 22.5C12.5744 22.5 10 19.9257 10 16.75ZM15.75 12.5C13.4028 12.5 11.5 14.4028 11.5 16.75C11.5 19.0972 13.4028 21 15.75 21C18.0972 21 20 19.0972 20 16.75C20 14.4028 18.0972 12.5 15.75 12.5Z",fill:"currentColor"})]}))})),tg=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.86268 16.5425V16.5425L6.86267 13.9464C6.86271 12.9799 7.64618 12.1964 8.61265 12.1964H9.99998C10.4142 12.1964 10.75 12.5321 10.75 12.9464C10.75 13.3606 10.4142 13.6964 9.99998 13.6964H8.6127V13.6964C8.47465 13.6964 8.36269 13.8083 8.36267 13.9464V13.9464L8.36268 16.5426C8.36268 16.6806 8.47461 16.7926 8.61265 16.7926H8.99999C9.41421 16.7926 9.74999 17.1283 9.74999 17.5426C9.74999 17.9568 9.4142 18.2926 8.99999 18.2926H8.6127V18.2926C7.64622 18.2926 6.86267 17.509 6.86268 16.5425Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.6127 9.34224C4.6462 9.34228 3.86265 8.55873 3.86268 7.59222L3.86267 4.99606C3.86271 4.02959 4.64618 3.24608 5.61265 3.24605L17.7304 3.24605C17.7355 3.24576 17.741 3.24545 17.747 3.24515C17.7751 3.24371 17.8131 3.24223 17.8596 3.24151C17.9524 3.24005 18.0808 3.24156 18.2332 3.25267C18.5335 3.27457 18.9502 3.33538 19.3792 3.49966C19.8104 3.66478 20.2795 3.94472 20.64 4.41799C21.0062 4.89887 21.2171 5.52306 21.2171 6.29597C21.2171 7.06887 21.0062 7.69299 20.6398 8.17368C20.2791 8.64675 19.8097 8.92619 19.3784 9.09077C18.9493 9.25452 18.5325 9.31477 18.2322 9.33627C18.0797 9.34718 17.9514 9.34851 17.8586 9.34693C17.8121 9.34614 17.7741 9.34462 17.746 9.34314C17.7402 9.34284 17.7349 9.34254 17.7299 9.34225L5.6127 9.34224ZM17.8163 7.84477C17.7958 7.84309 17.7753 7.84225 17.7548 7.84225L5.61268 7.84224C5.47464 7.84225 5.36268 7.73032 5.36269 7.59228L5.36267 4.99608C5.36268 4.85801 5.47461 4.74607 5.61268 4.74605V4.74605L17.7548 4.74605C17.7751 4.74605 17.7953 4.74523 17.8155 4.74359L17.8128 4.74381L17.8235 4.74319C17.8352 4.7426 17.8555 4.74176 17.8831 4.74132C17.9386 4.74045 18.0222 4.74127 18.1241 4.7487C18.3323 4.76388 18.5937 4.80508 18.8428 4.90046C19.0896 4.99501 19.2986 5.13239 19.4467 5.32685C19.589 5.51369 19.7171 5.80762 19.7171 6.29597C19.7171 6.78434 19.589 7.07788 19.4469 7.26423C19.299 7.4582 19.0903 7.59518 18.8436 7.68934C18.5946 7.78435 18.3333 7.82519 18.1251 7.8401C18.0232 7.84739 17.9396 7.84809 17.8841 7.84715C17.8565 7.84668 17.8362 7.84581 17.8245 7.8452L17.8138 7.84457V7.84457M17.8138 7.84457L17.8163 7.84477Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.75 12.5C14.4028 12.5 12.5 14.4028 12.5 16.75C12.5 19.0972 14.4028 21 16.75 21C19.0972 21 21 19.0972 21 16.75C21 14.4028 19.0972 12.5 16.75 12.5ZM11 16.75C11 13.5744 13.5744 11 16.75 11C19.9257 11 22.5 13.5744 22.5 16.75C22.5 19.9257 19.9257 22.5 16.75 22.5C13.5744 22.5 11 19.9257 11 16.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 16.75C14 16.3358 14.3358 16 14.75 16H18.75C19.1642 16 19.5 16.3358 19.5 16.75C19.5 17.1642 19.1642 17.5 18.75 17.5H14.75C14.3358 17.5 14 17.1642 14 16.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.75 14C17.1642 14 17.5 14.3358 17.5 14.75V18.75C17.5 19.1642 17.1642 19.5 16.75 19.5C16.3358 19.5 16 19.1642 16 18.75V14.75C16 14.3358 16.3358 14 16.75 14Z",fill:"currentColor"})]}))})),ng=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 5.5C6.05964 5.5 5.5 6.05964 5.5 6.75V14.25C5.5 14.9404 6.05964 15.5 6.75 15.5H9.375C9.59127 15.5 9.79702 15.5934 9.93943 15.7561L12 18.1111L14.0606 15.7561C14.203 15.5934 14.4087 15.5 14.625 15.5H17.25C17.9404 15.5 18.5 14.9404 18.5 14.25V6.75C18.5 6.05964 17.9404 5.5 17.25 5.5H6.75ZM4 6.75C4 5.23122 5.23122 4 6.75 4H17.25C18.7688 4 20 5.23122 20 6.75V14.25C20 15.7688 18.7688 17 17.25 17H14.9653L12.5644 19.7439C12.422 19.9066 12.2163 20 12 20C11.7837 20 11.578 19.9066 11.4356 19.7439L9.03467 17H6.75C5.23122 17 4 15.7688 4 14.25V6.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 11C8 10.4478 8.44769 10 9 10C9.55231 10 10 10.4478 10 11C10 11.5522 9.55231 12 9 12C8.44769 12 8 11.5522 8 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 11C11 10.4478 11.4478 10 12 10C12.5522 10 13 10.4478 13 11C13 11.5522 12.5522 12 12 12C11.4478 12 11 11.5522 11 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 11C14 10.4478 14.4478 10 15 10C15.5522 10 16 10.4478 16 11C16 11.5522 15.5522 12 15 12C14.4478 12 14 11.5522 14 11Z",fill:"currentColor"})]}))})),rg=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5C8.41015 5.5 5.5 8.41015 5.5 12C5.5 15.5899 8.41015 18.5 12 18.5C15.5899 18.5 18.5 15.5899 18.5 12C18.5 8.41015 15.5899 5.5 12 5.5ZM4 12C4 7.58173 7.58173 4 12 4C16.4183 4 20 7.58173 20 12C20 16.4183 16.4183 20 12 20C7.58173 20 4 16.4183 4 12Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8.00003C12.4142 8.00003 12.75 8.33582 12.75 8.75003V15.25C12.75 15.6642 12.4142 16 12 16C11.5858 16 11.25 15.6642 11.25 15.25V8.75003C11.25 8.33582 11.5858 8.00003 12 8.00003Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C8 11.5858 8.33579 11.25 8.75 11.25H15.25C15.6642 11.25 16 11.5858 16 12C16 12.4142 15.6642 12.75 15.25 12.75H8.75C8.33579 12.75 8 12.4142 8 12Z",fill:"currentColor"})]}))})),ig=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 5.5C7.96243 5.5 5.5 7.96243 5.5 11C5.5 14.0376 7.96243 16.5 11 16.5C14.0376 16.5 16.5 14.0376 16.5 11C16.5 7.96243 14.0376 5.5 11 5.5ZM4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9697 14.9697C15.2626 14.6768 15.7374 14.6768 16.0303 14.9697L19.7803 18.7197C20.0732 19.0126 20.0732 19.4874 19.7803 19.7803C19.4874 20.0732 19.0126 20.0732 18.7197 19.7803L14.9697 16.0303C14.6768 15.7374 14.6768 15.2626 14.9697 14.9697Z",fill:"currentColor"})]}))})),ag=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.75 5.5C5.05964 5.5 4.5 6.05964 4.5 6.75V17.25C4.5 17.9404 5.05964 18.5 5.75 18.5H16.25C16.9404 18.5 17.5 17.9404 17.5 17.25V16C17.5 15.5858 17.8358 15.25 18.25 15.25C18.6642 15.25 19 15.5858 19 16V17.25C19 18.7688 17.7688 20 16.25 20H5.75C4.23122 20 3 18.7688 3 17.25V6.75C3 5.23122 4.23122 4 5.75 4H16.25C16.7321 4 17.1874 4.12471 17.5829 4.3442C17.9451 4.54518 18.0758 5.00171 17.8748 5.3639C17.6738 5.72609 17.2173 5.85678 16.8551 5.6558C16.6765 5.55671 16.471 5.5 16.25 5.5H5.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 4.25C15.4142 4.25 15.75 4.58579 15.75 5V7C15.75 7.41421 15.4142 7.75 15 7.75C14.5858 7.75 14.25 7.41421 14.25 7V5C14.25 4.58579 14.5858 4.25 15 4.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 17.25C15.4142 17.25 15.75 17.5858 15.75 18V19C15.75 19.4142 15.4142 19.75 15 19.75C14.5858 19.75 14.25 19.4142 14.25 19V18C14.25 17.5858 14.5858 17.25 15 17.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 4.25C7.16421 4.25 7.5 4.58579 7.5 5V19C7.5 19.4142 7.16421 19.75 6.75 19.75C6.33579 19.75 6 19.4142 6 19V5C6 4.58579 6.33579 4.25 6.75 4.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 8.75C3.25 8.33579 3.58579 8 4 8H6.5C6.91421 8 7.25 8.33579 7.25 8.75C7.25 9.16421 6.91421 9.5 6.5 9.5H4C3.58579 9.5 3.25 9.16421 3.25 8.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H10C10.4142 11.25 10.75 11.5858 10.75 12C10.75 12.4142 10.4142 12.75 10 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 15.25C3.25 14.8358 3.58579 14.5 4 14.5H6.5C6.91421 14.5 7.25 14.8358 7.25 15.25C7.25 15.6642 6.91421 16 6.5 16H4C3.58579 16 3.25 15.6642 3.25 15.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.909 5.68137C19.4841 5.1062 20.4167 5.10621 20.9918 5.68139L22.3186 7.0082C22.8938 7.58335 22.8938 8.51584 22.3187 9.09099L15.6021 15.8076C15.5035 15.9062 15.3793 15.9754 15.2435 16.0073L12.1718 16.7301C11.9189 16.7896 11.6533 16.714 11.4697 16.5303C11.286 16.3467 11.2104 16.0811 11.2699 15.8282L11.9927 12.7565C12.0246 12.6207 12.0938 12.4965 12.1924 12.3979L18.909 5.68137C18.909 5.68137 18.909 5.68136 18.909 5.68137ZM19.9311 6.74203C19.9312 6.74204 19.9311 6.74202 19.9311 6.74203V6.74203ZM19.9504 6.76129L21.2387 8.0496L14.6923 14.596L13.0076 14.9924L13.404 13.3077L19.9504 6.76129Z",fill:"currentColor"})]}))})),og=c.memo((function(e){var t=e.onAddStandardEvent,n=e.onAddSubEvent,r=e.canAddSubEvent,i=e.onAddLocalVariable,a=e.canAddLocalVariable,o=e.onAddCommentEvent,s=e.allEventsMetadata,l=e.onAddEvent,c=e.onToggleInvertedCondition,u=e.onToggleDisabledEvent,d=e.canToggleEventDisabled,p=e.canToggleInstructionInverted,h=e.onRemove,g=e.canRemove,m=e.undo,x=e.canUndo,v=e.redo,b=e.canRedo,C=e.onToggleSearchPanel,j=e.onOpenSettings,y=e.settingsIcon,Z=e.moveEventsIntoNewGroup,k=e.canMoveEventsIntoNewGroup,w=e.onOpenSceneVariables,T=(0,V.LB)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($h,{onAddCommentEvent:o,onAddSubEvent:n,canAddSubEvent:r,onAddLocalVariable:i,canAddLocalVariable:a,onAddStandardEvent:t,onAddEvent:l,allEventsMetadata:s,onToggleInvertedCondition:c,onToggleDisabledEvent:u,canToggleEventDisabled:d,canToggleInstructionInverted:p,onRemove:h,canRemove:g,undo:m,canUndo:x,redo:v,canRedo:b,onToggleSearchPanel:C,onOpenSettings:j,moveEventsIntoNewGroup:Z,canMoveEventsIntoNewGroup:k,onOpenSceneVariables:w}),(0,f.jsxs)(Ls.k,{lastChild:!0,children:[(0,f.jsx)($.Z,{size:"small",color:"default",onClick:t,id:"toolbar-add-event-button",tooltip:{id:"Add a new empty event"},acceleratorString:(0,V.$3)(T.ADD_STANDARD_EVENT),children:(0,f.jsx)(eg,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:n,disabled:!r,id:"toolbar-add-sub-event-button",tooltip:{id:"Add a sub-event to the selected event"},acceleratorString:(0,V.$3)(T.ADD_SUBEVENT),children:(0,f.jsx)(tg,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:i,disabled:!a,id:"toolbar-add-local-variable-button",tooltip:{id:"Add a local variable"},acceleratorString:(0,V.$3)(T.ADD_LOCAL_VARIABLE),children:(0,f.jsx)(Td.Z,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:o,id:"toolbar-add-comment-button",tooltip:{id:"Add a comment"},acceleratorString:(0,V.$3)(T.ADD_COMMENT_EVENT),children:(0,f.jsx)(ng,{})}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",color:"default",tooltip:{id:"Choose and add an event"},acceleratorString:(0,V.$3)(T.CHOOSE_AND_ADD_EVENT),children:(0,f.jsx)(rg,{})}),buildMenuTemplate:function(){return s.map((function(e){return{label:e.fullName,click:function(){l(e.type)}}}))}}),(0,f.jsx)(Qh,{}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:h,disabled:!g,tooltip:{id:"Delete the selected event(s)"},acceleratorString:"Delete",children:(0,f.jsx)(Jt.Z,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:m,disabled:!x,tooltip:{id:"Undo the last changes"},acceleratorString:"CmdOrCtrl+Z",children:(0,f.jsx)(ne,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:v,disabled:!b,tooltip:{id:"Redo the last changes"},acceleratorString:"CmdOrCtrl+Shift+Z",children:(0,f.jsx)(qt,{})}),(0,f.jsx)(Qh,{}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:function(){return C()},tooltip:{id:"Search in events"},acceleratorString:"CmdOrCtrl+F",children:(0,f.jsx)(ig,{})}),j&&(0,f.jsx)(Qh,{}),j&&(0,f.jsx)($.Z,{size:"small",color:"default",onClick:j,tooltip:{id:"Open settings"},children:y||(0,f.jsx)(ag,{})})]})]})})),sg=og,lg=n(82054),cg=n(19131),ug=n.g.gd,dg=function(e){var t=e.project,n=e.scope,r=e.globalObjectsContainer,i=e.objectsContainer,a=e.projectScopedContainersAccessor,o=e.open,u=e.onRequestClose,d=e.onApply,p=e.onChange,h=e.instruction,g=e.isCondition,m=e.parameterIndex,x=e.anchorEl,v=e.resourceManagementProps,b=c.useState(null),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=c.useState(null),k=(0,s.Z)(Z,2),w=k[0],T=k[1],S=c.useState(null),P=(0,s.Z)(S,2),I=P[0],E=P[1],L=c.useRef(null),A=(0,cg.T)(),O=function(){y(null),T(null),E(null)},R=c.useCallback((function(){if(!h)return O();var e=h.getType(),n=g?ug.MetadataProvider.getConditionMetadata(t.getCurrentPlatform(),e):ug.MetadataProvider.getActionMetadata(t.getCurrentPlatform(),e);if(m>=n.getParametersCount())return O();var r=n.getParameter(m),i=rd.getParameterComponent(r.getType());E(i),y(r),T(n),setTimeout((function(){L.current&&L.current.focus({selectAll:!0})}),10)}),[h,g,m,t]);c.useEffect((function(){o&&h&&R()}),[o,h,R]);var F=c.useCallback((function(){if(h&&w){var e=(0,of.up)(w);hf(t,a,h,w,-1!==e?h.getParameter(e).getPlainString():null)}d()}),[h,w,d,t,a]);if(!I||!o||!h||!j||!w)return null;var D=(0,f.jsx)(I,{instruction:h,instructionMetadata:w,parameterMetadata:j,parameterIndex:m,value:h.getParameter(m).getPlainString(),onChange:p,onRequestClose:u,onApply:F,project:t,scope:n,globalObjectsContainer:r,objectsContainer:i,projectScopedContainersAccessor:a,ref:L,parameterRenderingService:rd,isInline:!0,resourceManagementProps:v},h.ptr);return(0,ja._F)()?(0,f.jsx)(lg.ZP,{anchor:"bottom",open:!0,onClose:d,transitionDuration:0,PaperProps:{style:(0,l.Z)((0,l.Z)({},(0,cg.E)(A)),{},{paddingBottom:40,maxWidth:600,margin:"auto"})},children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(M.x1,{children:D})})}):(0,f.jsx)(Yd,{open:!0,anchorEl:x,onRequestClose:u,onApply:F,children:D})},pg=n.g.gd,fg=function(e){var t=e.getObjectNames().toNewVectorString().toJSArray(),n=e.getReferencedObjectOrGroupNames().toNewVectorString().toJSArray(),r={};return n.forEach((function(t){var n=e.getBehaviorNamesOfObjectOrGroup(t).toNewVectorString().toJSArray();n.length&&(r[t]=n)})),{objectsNames:t,objectOrGroupNames:n,objectOrGroupBehaviorNames:r}},hg=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.eventsContextResult,r=[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!0,onClick:this.props.onClose},"close")];return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Events analysis"}),actions:r,open:!0,onRequestClose:t,children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Objects or groups being directly referenced in the events: {0}",values:{0:n.objectOrGroupNames.join(", ")}})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"All objects potentially used in events: {0}",values:{0:n.objectsNames.join(", ")}})}),(0,f.jsxs)(N.Z,{children:[(0,f.jsx)(w.Trans,{id:"All behaviors being directly referenced in the events:"})," ",Object.keys(n.objectOrGroupBehaviorNames).map((function(e){return(0,f.jsx)(w.Trans,{id:"Behaviors of {objectOrGroupName}: {0} ;",values:{0:n.objectOrGroupBehaviorNames[e].join(", "),objectOrGroupName:e}},e)}))]})]})}}]),n}(c.Component),gg=n(73693),mg=function(e,t){var n=e.onSearchInEvents,r=e.onReplaceInEvents,i=e.onCloseSearchPanel,a=e.resultsCount,o=e.hasEventSelected,l=e.onGoToPreviousSearchResult,u=e.onGoToNextSearchResult,d=e.searchFocusOffset,p=(0,be.UQ)().isMobile,h=c.useRef(null),g=c.useRef(null),m=c.useState(""),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useState(""),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=c.useState(!1),S=(0,s.Z)(k,2),P=S[0],I=S[1],E=c.useState(!0),L=(0,s.Z)(E,2),A=L[0],O=L[1],R=c.useState(!0),F=(0,s.Z)(R,2),D=F[0],U=F[1],V=c.useState(!0),H=(0,s.Z)(V,2),z=H[0],W=H[1],Y=c.useState(!1),q=(0,s.Z)(Y,2),J=q[0],X=(q[1],c.useState(!1)),K=(0,s.Z)(X,2),Q=K[0],ee=K[1],te=c.useState("search-and-replace"),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],ae=c.useCallback((function(){return!!v&&!Q}),[v,Q]),oe=(0,hi.bX)(),se=c.useCallback((function(){h.current&&h.current.focus()}),[]),le=c.useCallback((function(){g.current&&g.current.focus()}),[]),ce=c.useCallback((function(){ee(!0)}),[]);c.useImperativeHandle(t,(function(){return{isSearchOngoing:ae,focus:se,markSearchResultsDirty:ce}})),c.useEffect((function(){ee(!0)}),[v,A,D,z,P]),c.useEffect((function(){oe&&se()}),[re,se,oe]),c.useEffect(ce,[re,ce]);var ue=function(){r({searchInSelection:J,searchText:v,replaceText:y,matchCase:P,searchInActions:A,searchInConditions:D,searchInEventStrings:z})},de=function(){Q&&(n({searchInSelection:J,searchText:v,matchCase:P,searchInActions:A,searchInConditions:D,searchInEventStrings:z,searchInEventSentences:!pe()}),ee(!1))},pe=c.useCallback((function(){return"search-and-replace"===re}),[re]),fe=!v,he=!v||!o&&J;return(0,f.jsx)(Ki.Z,{noFullHeight:!0,noExpand:!0,children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,noOverflowParent:!0,children:(0,f.jsx)(B.m,{value:re,onChange:ie,options:[{value:"search-and-replace",label:(0,f.jsx)(w.Trans,{id:"Search and replace in parameters"})},{value:"search-in-event-sentences",label:(0,f.jsx)(w.Trans,{id:"Search in event sentences"})}],variant:p?"scrollable":void 0})})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsxs)(_.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,f.jsx)(yi.ZP,{ref:h,margin:"dense",endAdornment:v?(0,f.jsx)($.Z,{onClick:function(){b(""),oe&&se()},edge:"end",children:(0,f.jsx)(as.Z,{fontSize:"small"})}):null,translatableHintText:pe()?{id:"Text to search in parameters"}:{id:"Text to search in event sentences"},onChange:function(e,t){b(t)},onKeyPress:function(e){(0,gn.Zq)(e)?l():(0,gn.ph)(e)&&(Q?fe||de():u())},onKeyUp:function(e){(0,gn.W$)(e)&&i()},value:v,fullWidth:!0}),(0,f.jsx)(G.Z,{disabled:fe,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Search"}),onClick:function(){Q?de():u()}})]}),pe()&&(0,f.jsxs)(_.pJ,{alignItems:"baseline",noMargin:!0,children:[(0,f.jsx)(yi.ZP,{margin:"dense",ref:g,endAdornment:y?(0,f.jsx)($.Z,{onClick:function(){Z(""),oe&&le()},edge:"end",children:(0,f.jsx)(as.Z,{fontSize:"small"})}):null,translatableHintText:{id:"Text to replace in parameters"},onChange:function(e,t){Z(t)},onKeyPress:function(e){(0,gn.ph)(e)&&(he||ue())},onKeyUp:function(e){(0,gn.W$)(e)&&i()},value:y,fullWidth:!0}),(0,f.jsx)(G.Z,{disabled:he,label:(0,f.jsx)(w.Trans,{id:"Replace"}),onClick:ue})]}),(0,f.jsxs)(_.ep,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.ep,{noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(gg.Z,{label:(0,f.jsx)(w.Trans,{id:"Case insensitive"}),checked:!P,onCheck:function(e,t){I(!t)}}),!p&&(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Search in:"})}),(0,f.jsx)(gg.Z,{label:(0,f.jsx)(w.Trans,{id:"Conditions"}),checked:D,onCheck:function(e,t){U(t)}})]}),(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(gg.Z,{label:(0,f.jsx)(w.Trans,{id:"Actions"}),checked:A,onCheck:function(e,t){O(t)}}),(0,f.jsx)(gg.Z,{label:(0,f.jsx)(w.Trans,{id:"Texts"}),checked:z,onCheck:function(e,t){W(t)}})]})]}),(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:[(0,f.jsx)(N.Z,{children:null===a||void 0===a?"":0===a?(0,f.jsx)(w.Trans,{id:"No results"}):null===d||void 0===d?(0,f.jsx)(w.Trans,{id:"{resultsCount} results",values:{resultsCount:a}}):(0,f.jsx)(w.Trans,{id:"Showing {0} of {resultsCount}",values:{0:d+1,resultsCount:a}})}),(0,f.jsx)($.Z,{disabled:!a,onClick:function(){l()},children:(0,f.jsx)(Ca.Z,{})}),(0,f.jsx)($.Z,{disabled:!a,onClick:function(){u()},children:(0,f.jsx)(ot.Z,{})}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:function(){i()}},"close")]})]})]})})]})})},xg=c.forwardRef(mg),vg=n(84506),bg=n.g.gd,Cg=function(e){var t=(0,mt.mapFor)(0,e.size(),(function(t){var n=e.at(t);return n.isEventValid()?n.getEvent():null})).filter(Boolean);return Ec()(t,(function(e){return e.ptr}))},jg=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={eventsSearchResults:null,searchFocusOffset:null},e._resultEvents=null,e.reset=function(){e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e._resultEvents=null,e.setState({eventsSearchResults:null,searchFocusOffset:null})},e._doReplaceInEvents=function(t,n){var r=t.searchInSelection,i=t.searchText,a=t.replaceText,o=t.matchCase,s=t.searchInConditions,l=t.searchInActions,c=t.searchInEventStrings,u=e.props,d=u.globalObjectsContainer,p=u.objectsContainer,f=u.events;r&&console.error("Replace in selection is not implemented yet");var h=bg.EventsRefactorer.replaceStringInEvents(d,p,f,i,a,o,s,l,c);return e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e.setState({eventsSearchResults:h.clone(),searchFocusOffset:null},(function(){e._updateListOfResultEvents(),n()})),Cg(h)},e._doSearchInEvents=function(t,n){var r=t.searchInSelection,i=t.searchText,a=t.matchCase,o=t.searchInConditions,s=t.searchInActions,l=t.searchInEventStrings,c=t.searchInEventSentences,u=e.props.events;r&&console.error("Search in selection is not implemented yet");var d=bg.EventsRefactorer.searchInEvents(e.props.project.getCurrentPlatform(),u,i,a,o,s,l,c);e.state.eventsSearchResults&&e.state.eventsSearchResults.delete(),e.setState({eventsSearchResults:d.clone(),searchFocusOffset:null},(function(){e._updateListOfResultEvents(),n()}))},e._updateListOfResultEvents=function(){var t=e.state.eventsSearchResults;e._resultEvents=t?Cg(t):null},e._goToSearchResults=function(t){if(e._updateListOfResultEvents(),!e._resultEvents||0===e._resultEvents.length)return e.setState({searchFocusOffset:null}),null;var n=e.state.searchFocusOffset,i=null===n||void 0===n?function(e,t,n){var i=ol(n);if(!i.length)return 0;var a=[i[0]].concat((0,r.Z)(t)),o=new bg.EventsPositionFinder;a.forEach((function(e){return o.addEventToSearch(e)})),o.launch(e);var s=o.getPositions().toJSArray(),l=(0,vg.Z)(s),c=l[0],u=l.slice(1);o.delete();for(var d=0;d<u.length;d++)if(u[d]>=c)return d;return 0}(e.props.events,e._resultEvents,e.props.selection):(n+t)%e._resultEvents.length;i<0&&(i+=e._resultEvents.length);var a=e._resultEvents[i];return setTimeout((function(){return e.setState({searchFocusOffset:i})}),0),a},e._goToPreviousSearchResult=function(){return e._goToSearchResults(-1)},e._goToNextSearchResult=function(){return e._goToSearchResults(1)},e}return(0,We.Z)(n,[{key:"componentWillUnmount",value:function(){this.reset()}},{key:"render",value:function(){return this.props.children({eventsSearchResultEvents:this._resultEvents,searchFocusOffset:this.state.searchFocusOffset,searchInEvents:this._doSearchInEvents,replaceInEvents:this._doReplaceInEvents,goToNextSearchResult:this._goToNextSearchResult,goToPreviousSearchResult:this._goToPreviousSearchResult,clearSearchResults:this.reset})}}]),n}(c.Component),yg=n.g.gd,Zg=function e(t,n){var r=t.getSubInstructions();if(yg.compare(r,n))return!0;for(var i=0;i<r.size();++i){if(e(r.get(i),n))return!0}return!1},kg=n.g.gd,wg=function(e){return kg.Project.isNameSafe(e)},Tg=function(e){return kg.Project.isNameSafe(e)},Sg=function(e,t){return!e.hasEventsFunctionsExtensionNamed(t)},Pg=function(e,t,n){return!e.hasEventsFunctionsExtensionNamed(t)||!e.getEventsFunctionsExtension(t).getEventsFunctions().hasEventsFunctionNamed(n.getName())},Ig=function(e,t,n){return""!==t&&Tg(t)&&""!==n.getName()&&wg(n.getName())&&Pg(e,t,n)&&""!==n.getFullName()&&""!==n.getSentence()},Eg=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={objectMetadata:(0,tc.ND)(e.props.project)},e}return(0,We.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.value,r=e.onChange,i=e.floatingLabelText,a=e.allowedObjectTypes,o=this.state.objectMetadata,s=function(e){return!!a&&-1===a.indexOf(e)};return(0,f.jsxs)(Hn.Z,{floatingLabelText:i||(0,f.jsx)(w.Trans,{id:"Object type"}),value:n,onChange:function(e,t,n){r(n)},disabled:t,fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"",label:{id:"Any object"},disabled:s("")}),o.map((function(e){return""===e.name?null:(0,f.jsx)(P.Z,{value:e.name,label:e.fullName,disabled:s(e.name)},e.name)}))]})}}]),n}(c.Component),Mg=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={behaviorMetadata:yh(e.props.project.getCurrentPlatform(),e.props.project,e.props.eventsFunctionsExtension)},e}return(0,We.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.objectType,r=e.value,i=e.onChange,a=this.state.behaviorMetadata,o=!!a.find((function(e){return e.type===r}));return(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Behavior type"}),value:r,onChange:function(e,t,n){i(n)},disabled:t,fullWidth:!0,children:[a.map((function(e){return(0,f.jsx)(P.Z,{value:e.type,label:e.fullName,disabled:""!==e.objectType&&e.objectType!==n},e.type)})),!o&&r&&(0,f.jsx)(P.Z,{value:r,label:r})]})}}]),n}(c.Component),Lg=function(e){var t=e.choices,n=e.setChoices,r=e.disabled,i=e.hideLabels,a=function(){return n(t)};return(0,f.jsx)(_.ep,{children:(0,f.jsxs)(_.ak,{justifyContent:"flex-end",expand:!0,noMargin:!0,children:[t.map((function(e,n){return(0,f.jsxs)(_.pJ,{justifyContent:"flex-end",expand:!0,alignItems:"center",noMargin:!0,children:[(0,f.jsx)(yn.Z,{disabled:r,commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Value"}),value:e.value,onChange:function(e){t[n].value=e,a()},fullWidth:!0}),!i&&(0,f.jsx)(yn.Z,{disabled:r,commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Label displayed in editor"}),value:e.label,onChange:function(e){t[n].label=e,a()},fullWidth:!0}),(0,f.jsx)(Yt.Z,{disabled:r,tooltip:{id:"Delete option"},onClick:function(){t.splice(n,1),a()},children:(0,f.jsx)(Jt.Z,{})})]},n)})),(0,f.jsx)(M.x1,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(G.Z,{disabled:r,primary:!0,onClick:function(){t.push({value:"New Option",label:""}),a()},label:(0,f.jsx)(w.Trans,{id:"Add a new option"}),icon:(0,f.jsx)(it.Z,{})})})]})})},Ag=n(17037);function Og(e){var t=e.value,n=e.onChange,r=e.fullWidth;return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsx)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Resource type"}),value:t,onChange:n,fullWidth:r,children:Ag.QP.map((function(e){var t=e.kind,n=e.displayName;return(0,f.jsx)(P.Z,{value:t,label:n},t)}))})}})}var Rg=function(e){var t=e.getExtraInfo(),n=[];try{""!==t&&(n=JSON.parse(t)),Array.isArray(n)||(n=[])}catch(VM){console.error("Cannot parse parameter extraInfo: ",VM)}return n},Fg=function(e){return e.startsWith("object")?"object":"scene"},Dg=function(e){return e.startsWith("object")?e.substring(6):e.substring(5)},Ng=function(e){return e.substring(0,e.length-8)};function _g(e){var t,n=e.project,r=e.eventsFunctionsExtension,i=e.valueTypeMetadata,a=e.disabled,o=e.isTypeSelectorShown,s=e.onTypeUpdated,l=e.getLastObjectParameterObjectType,c=e.isExpressionType,u=(0,gt.Z)(),d=(t=i.getName()).endsWith("Resource")?"jsonResource":t;return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,children:[o&&(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Type"}),value:d,onChange:function(e,t,n){i.setName(n),i.setOptional(!1),i.setDefaultValue(""),u(),s()},disabled:a,fullWidth:!0,children:[!c&&(0,f.jsx)(P.Z,{value:"objectList",label:{id:"Objects"}}),!c&&(0,f.jsx)(P.Z,{value:"behavior",label:{id:"Behavior (for the previous object)"}}),(0,f.jsx)(P.Z,{value:"expression",label:{id:"Number"}}),(0,f.jsx)(P.Z,{value:"string",label:{id:"String (text)"}}),(0,f.jsx)(P.Z,{value:"stringWithSelector",label:{id:"String from a list of options (text)"}}),(0,f.jsx)(P.Z,{value:"keyboardKey",label:{id:"Keyboard Key (text)"}}),(0,f.jsx)(P.Z,{value:"mouseButton",label:{id:"Mouse button (text)"}}),"key"===d&&(0,f.jsx)(P.Z,{value:"key",label:{id:"Keyboard Key (deprecated)"}}),"mouse"===d&&(0,f.jsx)(P.Z,{value:"mouse",label:{id:"Mouse button (deprecated)"}}),(0,f.jsx)(P.Z,{value:"color",label:{id:"Color (text)"}}),(0,f.jsx)(P.Z,{value:"layer",label:{id:"Layer (text)"}}),(0,f.jsx)(P.Z,{value:"sceneName",label:{id:"Scene name (text)"}}),!c&&(0,f.jsx)(P.Z,{value:"yesorno",label:{id:"Yes or No (boolean)"}}),!c&&(0,f.jsx)(P.Z,{value:"trueorfalse",label:{id:"True or False (boolean)"}}),(0,f.jsx)(P.Z,{value:"objectPointName",label:{id:"Object point (text)"}}),(0,f.jsx)(P.Z,{value:"objectAnimationName",label:{id:"Object animation (text)"}}),(0,f.jsx)(P.Z,{value:"layerEffectName",label:{id:"Layer effect (text)"}}),(0,f.jsx)(P.Z,{value:"layerEffectParameterName",label:{id:"Layer effect property (text)"}}),(0,f.jsx)(P.Z,{value:"objectEffectName",label:{id:"Object effect (text)"}}),(0,f.jsx)(P.Z,{value:"objectEffectParameterName",label:{id:"Object effect property (text)"}}),(0,f.jsx)(P.Z,{value:"leaderboardId",label:{id:"Leaderboard (text)"}}),(0,f.jsx)(P.Z,{value:"identifier",label:{id:"Identifier (text)"}}),(0,f.jsx)(P.Z,{value:"variable",label:{id:"Variable"}}),(0,f.jsx)(P.Z,{value:"scenevar",label:{id:"Scene variable (deprecated)"}}),!c&&(0,f.jsx)(P.Z,{value:"objectListOrEmptyIfJustDeclared",label:{id:"Created objects"}}),!c&&(0,f.jsx)(P.Z,{value:"jsonResource",label:{id:"Resource"}})]}),i.isObject()&&(0,f.jsx)(Eg,{project:n,value:i.getExtraInfo(),onChange:function(e){i.setExtraInfo(e),u(),s()},disabled:a}),i.isBehavior()&&(0,f.jsx)(Mg,{project:n,eventsFunctionsExtension:r,objectType:l(),value:i.getExtraInfo(),onChange:function(e){i.setExtraInfo(e),u(),s()},disabled:a}),"yesorno"===i.getName()&&(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),value:"yes"===i.getDefaultValue()?"yes":"no",onChange:function(e,t,n){i.setOptional(!0),i.setDefaultValue(n),u(),s()},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"yes",label:{id:"Yes"}}),(0,f.jsx)(P.Z,{value:"no",label:{id:"No"}})]}),"trueorfalse"===i.getName()&&(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),value:"True"===i.getDefaultValue()?"True":"False",onChange:function(e,t,n){i.setOptional(!0),i.setDefaultValue(n),u(),s()},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"True",label:{id:"True"}}),(0,f.jsx)(P.Z,{value:"False",label:{id:"False"}})]}),"identifier"===i.getName()&&(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Scope"}),value:Fg(i.getExtraInfo()),onChange:function(e,t,n){var r=Dg(i.getExtraInfo());i.setExtraInfo(n+r),u(),s()},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"scene",label:{id:"Scene"}}),(0,f.jsx)(P.Z,{value:"object",label:{id:"Object"}})]}),"identifier"===i.getName()&&(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Identifier name"}),floatingLabelFixed:!0,value:Dg(i.getExtraInfo()),onChange:function(e){var t=Fg(i.getExtraInfo());i.setExtraInfo(t+e),u(),s()},fullWidth:!0}),i.getName().endsWith("Resource")&&(0,f.jsx)(Og,{value:Ng(i.getName()),onChange:function(e,t,n){i.setName(n+"Resource"),u(),s()},fullWidth:!0})]}),"stringWithSelector"===i.getName()&&(0,f.jsx)(Lg,{disabled:a,choices:Rg(i).map((function(e){return{value:e,label:""}})),hideLabels:!0,setChoices:function(e){i.setExtraInfo(JSON.stringify(e.map((function(e){return e.value})))),u(),s()}})]})}})}var Bg=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 5.83329C3.33331 4.82077 4.15412 3.99996 5.16665 3.99996H5.99998C6.27612 3.99996 6.49998 4.22382 6.49998 4.49996C6.49998 4.7761 6.27612 4.99996 5.99998 4.99996H5.16665C4.70641 4.99996 4.33331 5.37305 4.33331 5.83329V11.5C4.33331 11.9602 4.7064 12.3333 5.16665 12.3333H10.8333C11.2936 12.3333 11.6666 11.9602 11.6666 11.5V5.83329C11.6666 5.37305 11.2936 4.99996 10.8333 4.99996H9.99998C9.72384 4.99996 9.49998 4.7761 9.49998 4.49996C9.49998 4.22382 9.72384 3.99996 9.99998 3.99996H10.8333C11.8459 3.99996 12.6666 4.82078 12.6666 5.83329V11.5C12.6666 12.5125 11.8459 13.3333 10.8333 13.3333H5.16665C4.15413 13.3333 3.33331 12.5125 3.33331 11.5V5.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66665 3.66663C6.5746 3.66663 6.49998 3.74125 6.49998 3.83329V4.83329C6.49998 4.92534 6.5746 4.99996 6.66665 4.99996H9.33331C9.42536 4.99996 9.49998 4.92534 9.49998 4.83329V3.83329C9.49998 3.74124 9.42536 3.66663 9.33331 3.66663H6.66665ZM5.49998 3.83329C5.49998 3.18896 6.02232 2.66663 6.66665 2.66663H9.33331C9.97766 2.66663 10.5 3.18897 10.5 3.83329V4.83329C10.5 5.47762 9.97766 5.99996 9.33331 5.99996H6.66665C6.02232 5.99996 5.49998 5.47762 5.49998 4.83329V3.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99998 8.16663C5.99998 7.89048 6.22384 7.66663 6.49998 7.66663H9.49998C9.77612 7.66663 9.99998 7.89048 9.99998 8.16663C9.99998 8.44277 9.77612 8.66663 9.49998 8.66663H6.49998C6.22384 8.66663 5.99998 8.44277 5.99998 8.16663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.99998 10.1666C5.99998 9.89048 6.22384 9.66663 6.49998 9.66663H9.49998C9.77612 9.66663 9.99998 9.89048 9.99998 10.1666C9.99998 10.4428 9.77612 10.6666 9.49998 10.6666H6.49998C6.22384 10.6666 5.99998 10.4428 5.99998 10.1666Z",fill:"currentColor"})]}))})),Ug=n.g.gd,Vg="Parameters",Hg=(0,ut.x)("events-function-parameter-list"),zg={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},Wg=function(e,t,n){var r=t.getVariablesContainersList(),i=t.getObjectsContainersList();return(0,xt.Z)(Ug.Project.getSafeName(n),(function(t){return e.hasParameterNamed(t)||r.has(t)||i.hasObjectNamed(t)}))},Gg=function(e){var t=e.project,n=e.projectScopedContainersAccessor,r=e.eventsFunction,i=e.eventsBasedBehavior,u=e.eventsBasedObject,d=e.eventsFunctionsContainer,p=e.eventsFunctionsExtension,h=e.onParametersUpdated,g=e.helpPagePath,m=e.freezeParameters,x=e.onMoveFreeEventsParameter,v=e.onMoveBehaviorEventsParameter,b=e.onMoveObjectEventsParameter,C=e.onFunctionParameterWillBeRenamed,y=e.children,Z=e.onFunctionParameterTypeChanged,k=c.useRef(null),T=c.useState(null),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=c.useRef(null);c.useEffect((function(){k.current&&E.current&&P&&(k.current.scrollTo(E.current),I(null),E.current=null)}),[P]);var L=c.useRef(null),A=c.useContext(j.Z),O=function(){var e=(0,Ye.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing parameters"},message:{id:"These parameters already exist:{0}Do you want to replace them?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),R=(0,gt.Z)(),F=!!i&&Ug.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(r.getName()),D=!!u&&!i&&Ug.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(r.getName());m=m||F||D;var B=c.useState({}),U=(0,s.Z)(B,2),V=U[0],H=U[1],z=i?2:u?1:0,W=c.useCallback((function(e){return r.getFunctionType()===Ug.EventsFunction.ActionWithOperator||m||e<z}),[r,z,m]),q=c.useCallback((function(e,t){if(t!==e.getName()){var i=n.get(),a=Wg(r.getParameters(),i,t);C(r,e.getName(),a),e.setName(a),R(),h()}}),[r,R,C,h,n]),J=c.useCallback((function(e){var t=r.getParameters(),i=n.get(),a=Wg(r.getParameters(),i,"Parameter");t.insertNewParameter(a,e).setType("objectList"),R(),h(),I(a)}),[r,R,h,n]),X=c.useCallback((function(){var e=r.getParameters();J(e.getParametersCount())}),[J,r]),K=c.useCallback((function(e){r.getParameters().removeParameter(e),R(),h()}),[r,R,h]),Q=c.useCallback((function(e){vt.Z.set(Vg,[{name:e.getName(),serializedParameter:(0,Ct.XH)(e)}]),R()}),[R]),ee=c.useCallback((function(e,t){var n=r.getParameters(),i=(0,xt.Z)(e.getName(),(function(e){return n.hasParameterNamed(e)})),a=n.insertNewParameter(i,Math.max(z,t));(0,Ct.qx)(a,(0,Ct.XH)(e)),a.setName(i),R()}),[r,z,R]),te=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,o,s,l,c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=vt.Z.get(Vg),i=bt.$.extractArray(n)){e.next=4;break}return e.abrupt("return");case 4:if(o=r.getParameters(),s=[],l=[],i.forEach((function(e){var t=bt.$.extractStringProperty(e,"name"),n=bt.$.extractObjectProperty(e,"serializedParameter");t&&n&&(o.hasParameterNamed(t)?W(o.getParameterPosition(o.getParameter(t)))||l.push({name:t,serializedParameter:n}):s.push({name:t,serializedParameter:n}))})),c=null,u=Math.max(z,t),s.forEach((function(e){var t=e.name,n=e.serializedParameter,r=o.insertNewParameter(t,u);u++,(0,Ct.qx)(r,n),c||(c=t)})),d=!1,!(l.length>0)){e.next=17;break}return e.next=15,O(l.map((function(e){return e.name})));case 15:(d=e.sent)&&l.forEach((function(e){var t=e.name,n=e.serializedParameter;if(o.hasParameterNamed(t)){var r=o.getParameter(t);(0,Ct.qx)(r,n)}}));case 17:R(),c?I(c):1===l.length&&I(l[0].name),(c||d)&&h&&h();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,z,R,W,O,h]),ne=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(r.getParameters().getParametersCount());case 2:case"end":return e.stop()}}),e)}))),[r,te]),re=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(r.getParameters().getParameterPosition(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,te]),ie=c.useCallback((function(e,t){var n=r.getParameters();i?v&&v(i,r,e,t,(function(r){r&&(n.moveParameter(e,t),R(),h())})):u?b&&b(u,r,e,t,(function(r){r&&(n.moveParameter(e,t),R(),h())})):x&&x(r,e,t,(function(r){r&&(n.moveParameter(e,t),R(),h())}))}),[i,u,r,R,v,x,b,h]),ae=c.useCallback((function(e){var t=L.current;if(t){var n=r.getParameters(),i=n.getParameterPosition(t),a=n.getParameterPosition(e);ie(i,a>i?a-1:a)}}),[r,ie]),oe=c.useCallback((function(e){H((0,l.Z)((0,l.Z)({},V),{},(0,Qt.Z)({},e,!0)))}),[V]),se=c.useCallback((function(e){r.getParameters().getParameterAt(e).setLongDescription(""),H((0,l.Z)((0,l.Z)({},V),{},(0,Qt.Z)({},e,!1)))}),[r,V]),le=d&&r.getFunctionType()===Ug.EventsFunction.ActionWithOperator?r.getParametersForEvents(d):r.getParameters(),ce=z,ue=z+(r.getFunctionType()===Ug.EventsFunction.ActionWithOperator?1:0),de=c.useCallback((function(e){return e>=ue}),[ue]),pe=c.useCallback((function(e,t){return de(t)&&(!!e.getLongDescription()||!!V[t])}),[de,V]),fe=i?sd.mK.BehaviorFunction:u?sd.mK.ObjectFunction:sd.mK.FreeFunction;if(!i&&Ug.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(r.getName()))return(0,f.jsx)(M.x1,{children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(Y.Z,{kind:"info",identifier:"lifecycle-events-function-included-only-if-extension-used",children:(0,f.jsx)(w.Trans,{id:"For the lifecycle functions to be executed, you need the extension to be used in the game, either by having at least one action, condition or expression used, or a behavior of the extension added to an object. Otherwise, the extension won't be included in the game."})}),(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:'This is a "lifecycle function". It will be called automatically by the game engine. It has no parameters.'})})]})});var he=vt.Z.has(Vg);return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:le.getParametersCount()>0||m?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsxs)(ft.Z,{ref:k,children:[y?c.Children.map(y,(function(e,t){return e?(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:e})}):null})):null,(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,mt.mapFor)(0,le.getParametersCount(),(function(e){var i=le.getParameterAt(e),a=P===i.getName()?E:null;return(0,f.jsx)(Hg,{beginDrag:function(){return L.current=i,{}},canDrag:function(){return!W(e)},canDrop:function(){return!W(e)},drop:function(){ae(i)},children:function(o){var s,c=o.connectDragSource,u=o.connectDropTarget,d=o.isOver,g=o.canDrop;return u((0,f.jsxs)("div",{style:zg.rowContainer,children:[d&&(0,f.jsx)(dt.Z,{canDrop:g}),(0,f.jsxs)("div",{ref:a,style:(0,l.Z)((0,l.Z)({},zg.rowContent),{},{backgroundColor:A.list.itemsBackgroundColor}),children:[c((0,f.jsx)("span",{children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(ct.V,{disabled:W(e)})})})),(0,f.jsx)(_.ep,{expand:!0,children:(0,f.jsxs)(_.pJ,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{style:{whiteSpace:"nowrap"},children:(0,f.jsx)(w.Trans,{id:"Parameter #{0} :",values:{0:e+fe}})}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,margin:"none",translatableHintText:{id:"Enter the parameter name (mandatory)"},value:i.getName(),onChange:function(e){return q(i,e)},disabled:W(e),fullWidth:!0})]})}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{children:(0,f.jsx)(Mh.Z,{})}),buildMenuTemplate:function(t){return[{label:t._({id:"Add a parameter below"}),enabled:!W(e+1),click:function(){return J(e+1)}},{label:t._({id:"Delete"}),enabled:!W(e),click:function(){return K(i.getName())}},{label:t._({id:"Copy"}),click:function(){return Q(i)}},{label:t._({id:"Paste"}),click:function(){return re(i)},enabled:he&&!m},{label:t._({id:"Duplicate"}),enabled:!m,click:function(){return ee(i,e+1)}},{type:"separator"},{label:t._({id:"Add a Long Description"}),enabled:!W(e),visible:!pe(i,e),click:function(){return oe(e)}},{label:t._({id:"Remove the Long Description"}),enabled:!W(e),visible:pe(i,e),click:function(){return se(e)}},{label:t._({id:"Move up"}),click:function(){return ie(e,e-1)},enabled:!W(e)&&e-1>=0&&!W(e-1)},{label:t._({id:"Move down"}),click:function(){return ie(e,e+1)},enabled:!W(e)&&e+1<le.getParametersCount()&&!W(e+1)}]}}),(0,f.jsx)(M.LZ,{})]}),(0,f.jsx)(M.x1,{children:(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsx)(_g,{project:t,eventsFunctionsExtension:p,valueTypeMetadata:i.getValueTypeMetadata(),disabled:W(e),isTypeSelectorShown:(s=e,s>=ce),onTypeUpdated:function(){var e=i.getValueTypeMetadata();if(i.getValueTypeMetadata().isBehavior()){var a=Ug.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),e.getExtraInfo()),o=n.get(),s=Wg(r.getParameters(),o,a.getDefaultName());i.setName(s),i.setDescription(a.getFullName())}Z(r,i.getName()),h()},getLastObjectParameterObjectType:function(){return(0,Cc.kC)(le,e)}}),de(e)&&(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Label"}),floatingLabelFixed:!0,value:i.getDescription(),onChange:function(e){i.setDescription(e),R()},fullWidth:!0,disabled:W(e)&&!m}),pe(i,e)&&(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Long description"}),floatingLabelFixed:!0,value:i.getLongDescription(),onChange:function(e){i.setLongDescription(e),R()},multiline:!0,fullWidth:!0,disabled:W(e)&&!m})]})})]},i.ptr))}},i.ptr)}))})})]}),!m&&(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsx)(_.pJ,{expand:!0,children:(0,f.jsx)(Qe.Z,{leftIcon:(0,f.jsx)(Bg,{}),label:(0,f.jsx)(w.Trans,{id:"Paste"}),onClick:function(){ne()},disabled:!he},"paste-parameters")}),(0,f.jsx)(_.pJ,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Add a parameter"}),onClick:X,icon:(0,f.jsx)(it.Z,{})})})]})})]}):(0,f.jsxs)(ft.Z,{children:[y?c.Children.map(y,(function(e,t){return e?(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:e})}):null})):null,(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(pt.$,{title:(0,f.jsx)(w.Trans,{id:"Add your first parameter"}),description:(0,f.jsx)(w.Trans,{id:"Parameters allow function users to give data."}),actionLabel:(0,f.jsx)(w.Trans,{id:"Add a parameter"}),helpPagePath:g,helpPageAnchor:"add-and-use-parameters",onAction:X,secondaryActionIcon:(0,f.jsx)(Bg,{}),secondaryActionLabel:he?(0,f.jsx)(w.Trans,{id:"Paste"}):null,onSecondaryAction:function(){ne()}})})})]})})}})},Yg=n.g.gd,qg=function(e,t,n,r){var a=r.getSentence();if(!a)return e._({id:"Enter the sentence that will be displayed in the events sheet"});var o,s=t?sd.mK.BehaviorFunction:n?sd.mK.ObjectFunction:sd.mK.FreeFunction,l=r.getFunctionType(),c=(t||n)&&l===Yg.EventsFunction.ExpressionAndCondition,u=(0,mt.mapFor)(0,r.getParameters().getParametersCount(),(function(e){if(r.getParameters().getParameterAt(e).getValueTypeMetadata().isBehavior())return null;if(0===e&&c)return null;var t="_PARAM".concat(e+s,"_");return-1===a.indexOf(t)?t:null})).filter(Boolean),d=r.getParameters().getParametersCount(),p=a.matchAll(/_PARAM(\d+)_/g),f=[],h=(0,i.Z)(p);try{for(h.s();!(o=h.n()).done;){var g=o.value,m=parseInt(g[1],10);(m-s>=d||m-s<0)&&f.push(g[0])}}catch(x){h.e(x)}finally{h.f()}return u.length||f.length?[u.length?e._({id:"The sentence is probably missing this/these parameter(s):"})+" "+u.join(", "):null,f.length?e._({id:"The sentence displays one or more wrongs parameters:"})+" "+f.join(", "):null].filter(Boolean).join(" - "):void 0},Jg=function(e,t){return e===Yg.EventsFunction.Condition?{id:"Example: Is flashing"}:e===Yg.EventsFunction.Expression?t.isNumber()?{id:"Example: Remaining life"}:{id:"Example: Equipped shield name"}:{id:"Example: Flash the object"}},Xg=function(e,t){return e===Yg.EventsFunction.Condition?{id:"Example: Check if the object is flashing."}:e===Yg.EventsFunction.Expression?t.isNumber()?{id:"Example: Return the number of remaining lives for the player."}:{id:"Example: Return the name of the shield equipped by the player."}:{id:"Example: Make the object flash for 5 seconds."}},Kg=function(e){var t=e.project,n=e.eventsFunctionsExtension,r=e.eventsFunction,i=e.freezeEventsFunctionType,a=e.onConfigurationUpdated,o=e.helpPagePath,l=e.renderConfigurationHeader,u=e.eventsBasedBehavior,d=e.eventsBasedObject,p=e.getFunctionGroupNames,h=e.eventsFunctionsContainer,g=(0,gt.Z)(),m=c.useState(null),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=(0,be.UQ)().isMobile,j=r.getFunctionType();if(!!u&&!d&&Yg.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(r.getName()))return(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:'This is a "lifecycle method". It will be called automatically by the game engine for each instance living on the scene having the behavior.'})});if(!!d&&!u&&Yg.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(r.getName()))return(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:'This is a "lifecycle method". It will be called automatically by the game engine for each instance living on the scene.'})});if(!u&&!d&&Yg.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(r.getName()))return(0,f.jsx)(M.x1,{children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(Y.Z,{kind:"info",identifier:"lifecycle-events-function-included-only-if-extension-used",children:(0,f.jsx)(w.Trans,{id:"For the lifecycle functions to be executed, you need the extension to be used in the game, either by having at least one action, condition or expression used, or a behavior of the extension added to an object. Otherwise, the extension won't be included in the game."})}),(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:'This is a "lifecycle function". It will be called automatically by the game engine. It has no parameters.'})})]})});var y=h&&j===Yg.EventsFunction.ActionWithOperator&&h.hasEventsFunctionNamed(r.getGetterName())?h.getEventsFunction(r.getGetterName()):null;return(0,f.jsx)(w.I18n,{children:function(e){var s=e.i18n;return(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[l?l():null,(0,f.jsx)(tt.Z,{bounds:!0,onResize:function(e){b(e.bounds.width)},children:function(e){e.contentRect;var l=e.measureRef;return(0,f.jsx)("div",{ref:l,children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(_.ep,{alignItems:"center",noMargin:!0,forceMobileLayout:!!v&&v<650,noResponsiveLandscape:C,children:[(0,f.jsx)(M.x1,{alignItems:"center",noMargin:!0,children:(0,f.jsxs)(Hn.Z,{value:j,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Function type"}),fullWidth:!0,disabled:!!i,onChange:function(e,t,n){var i=n;r.setFunctionType(i),a&&a("type"),g()},children:[(0,f.jsx)(P.Z,{value:Yg.EventsFunction.Action,label:{id:"Action"}}),(0,f.jsx)(P.Z,{value:Yg.EventsFunction.Condition,label:{id:"Condition"}}),(0,f.jsx)(P.Z,{value:Yg.EventsFunction.Expression,label:{id:"Expression"}}),(0,f.jsx)(P.Z,{value:Yg.EventsFunction.ExpressionAndCondition,label:{id:"Expression and condition"}}),(0,f.jsx)(P.Z,{value:Yg.EventsFunction.ActionWithOperator,label:{id:"Action with operator"}})]})}),(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:j===Yg.EventsFunction.ActionWithOperator?(0,f.jsx)(Hn.Z,{value:y&&y.getName()||"",floatingLabelText:(0,f.jsx)(w.Trans,{id:"Related expression and condition"}),fullWidth:!0,onChange:function(e,t,n){r.setGetterName(n),a&&a(),g()},children:h?(0,mt.mapFor)(0,h.getEventsFunctionsCount(),(function(e){var t=h.getEventsFunctionAt(e);return t.getFunctionType()===Yg.EventsFunction.ExpressionAndCondition&&(0,f.jsx)(P.Z,{value:t.getName(),label:t.getFullName()||t.getName()},t.getName())})):[]}):(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Full name displayed in editor"}),translatableHintText:Jg(j,r.getExpressionType()),value:r.getFullName(),onChange:function(e){r.setFullName(e),a&&a(),g()},fullWidth:!0})}),(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:j===Yg.EventsFunction.ActionWithOperator?(0,f.jsx)(yn.Z,{disabled:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Group name"}),fullWidth:!0,value:y?y.getGroup():"",onChange:function(e){}}):(0,f.jsx)(dr.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group for this extension."},fullWidth:!0,value:r.getGroup(),onChange:function(e){r.setGroup(e),a&&a(),g()},dataSource:p?p().map((function(e){return{text:e,value:e}})):[],openOnFocus:!0})})]}),(0,f.jsx)(M.x1,{noMargin:!0,children:j===Yg.EventsFunction.ActionWithOperator?(0,f.jsx)(yn.Z,{disabled:!0,commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Description, displayed in editor"}),fullWidth:!0,multiline:!0,value:y?"Change "+y.getDescription():"",onChange:function(e){}}):(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:j===Yg.EventsFunction.ExpressionAndCondition?(0,f.jsx)(w.Trans,{id:'Description, displayed in editor (automatically prefixed by "Compare" or "Return")'}):(0,f.jsx)(w.Trans,{id:"Description, displayed in editor"}),translatableHintText:Xg(j,r.getExpressionType()),fullWidth:!0,multiline:!0,value:r.getDescription(),onChange:function(e){r.setDescription(e),a&&a(),g()}})}),j===Yg.EventsFunction.ActionWithOperator?(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(yn.Z,{disabled:!0,commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Sentence in Events Sheet"}),fullWidth:!0,multiline:!0,value:y?"Change "+y.getSentence()+(u||d?" of _PARAM0_":"")+": [...]":"",onChange:function(e){}})}):(j===Yg.EventsFunction.Action||j===Yg.EventsFunction.Condition||j===Yg.EventsFunction.ExpressionAndCondition)&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:u&&j===Yg.EventsFunction.ExpressionAndCondition?(0,f.jsx)(w.Trans,{id:'Sentence in Events Sheet (automatically suffixed by "of _PARAM0_")'}):(0,f.jsx)(w.Trans,{id:"Sentence in Events Sheet"}),translatableHintText:{id:"Note: write _PARAMx_ for parameters, e.g: Flash _PARAM1_ for 5 seconds"},fullWidth:!0,multiline:!0,value:r.getSentence(),onChange:function(e){r.setSentence(e.replace(/\n/g,"")),a&&a(),g()},errorText:qg(s,u,d,r)})}),r.isExpression()&&(0,f.jsx)(_g,{isExpressionType:!0,project:t,eventsFunctionsExtension:n,valueTypeMetadata:r.getExpressionType(),isTypeSelectorShown:!0,onTypeUpdated:function(){a&&a()},getLastObjectParameterObjectType:function(){return""}}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Private"}),checked:r.isPrivate(),onCheck:function(e,t){r.setPrivate(t),a&&a("isPrivate"),g()},tooltipOrHelperText:r.isPrivate()?(0,f.jsx)(w.Trans,{id:"This function won't be visible in the events editor."}):(0,f.jsx)(w.Trans,{id:"This function will be visible in the events editor."})}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Asynchronous"}),checked:r.isAsync(),onCheck:function(e,t){r.setAsync(t),a&&a("isAsync"),g()}}),r.isAsync()&&(0,f.jsx)(je.Z,{kind:"info",renderRightButton:function(){return(0,f.jsx)(An.Z,{helpPagePath:"/events/functions/asynchronous-functions"})},children:(0,f.jsx)(w.Trans,{id:'This is an asynchronous action, meaning that the actions and sub-events following it will wait for it to end. You should use other async actions like "wait" to schedule your actions and don\'t forget to use the action "End asynchronous function" to mark the end of the action.'})}),o?(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(An.Z,{helpPagePath:o})}):(0,f.jsx)(M.LZ,{})]})})}})]})}})},Qg=n.g.gd,$g="<create a new extension>",em=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={eventsFunction:null,extensionName:"",createNewExtension:!1},e._projectScopedContainersAccessor=null,e._getFunctionGroupNames=function(){var t=e.state,n=t.createNewExtension,i=t.extensionName;if(n||!i)return[];for(var a=new Set,o=e.props.project.getEventsFunctionsExtension(i).getEventsFunctions(),s=0;s<o.getEventsFunctionsCount();s++){var l=o.getEventsFunctionAt(s).getGroup();l&&a.add(l)}return(0,r.Z)(a).sort((function(e,t){return e.localeCompare(t)}))},e}return(0,We.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.project,n=e.scope,i=e.globalObjectsContainer,a=e.objectsContainer,o=e.serializedEvents;this._projectScopedContainersAccessor=new Bn({project:t});var s=new Qg.EventsFunction;!function(e){var t=e.globalObjectsContainer,n=e.objectsContainer,i=e.scope,a=e.serializedEvents,o=e.project,s=e.eventsFunction;s.setName("MyFunction"),s.setFunctionType(kg.EventsFunction.Action),(0,Ct.qx)(s.getEvents(),a,"unserializeFrom",o);var l=new Bn(i).get(),c=new kg.EventsContextAnalyzer(kg.JsPlatform.get());c.launch(s.getEvents(),l);var u=c.getEventsContext(),d=u.getReferencedObjectOrGroupNames().toNewVectorString().toJSArray(),p=u.getObjectNames().toNewVectorString().toJSArray(),f=d.filter((function(e){return-1===p.indexOf(e)})).map((function(e){return au(t,n,e)})).filter(Boolean),h=f.filter((function(e){return!d.some((function(t){return e.find(t)}))})),g=h.map((function(e){return e.getName()})),m=p.filter((function(e){return!h.some((function(t){return t.find(e)}))})),x=s.getParameters();x.clearParameters(),[].concat((0,r.Z)(g),(0,r.Z)(m)).forEach((function(e){x.addNewParameter(e).setType("objectList").setExtraInfo(l.getObjectsContainersList().getTypeOfObject(e)),u.getBehaviorNamesOfObjectOrGroup(e).toNewVectorString().toJSArray().forEach((function(e){x.addNewParameter(e).setType("behavior").setName(e).setExtraInfo(l.getObjectsContainersList().getTypeOfBehavior(e,!1))}))})),f.filter((function(e){return!g.includes(e.getName())})).forEach((function(e){e&&s.getObjectGroups().insert(e,0)})),c.delete()}({project:t,scope:n,globalObjectsContainer:i,objectsContainer:a,serializedEvents:o,eventsFunction:s}),this.setState({eventsFunction:s}),0===Tu(t).length&&this.setState({createNewExtension:!0})}},{key:"componentWillUnmount",value:function(){var e=this.state.eventsFunction;e&&e.delete()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.onClose,i=t.onCreate,a=this.state,o=a.eventsFunction,s=a.extensionName,l=a.createNewExtension;if(!o)return null;var c=Tu(n),u=function(e){return e.getParameters().getParametersCount()>7}(o),d=function(){Ig(n,s,o)?i(s,o):r()};return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Extract the events in a function"}),secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/events/functions/extract-events"},"help")],actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:r},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Create"}),primary:!0,disabled:!Ig(n,s,o),onClick:d},"create")],open:!0,cannotBeDismissed:!0,onRequestClose:r,onApply:d,children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(Y.Z,{identifier:"function-extractor-explanation",kind:"info",children:"After creating a function, it will be usable in the events sheet. Functions are grouped by extensions. Choose, or enter the name of a new extension, and a function name, then configure the function and its parameters."}),(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,expand:!0,children:[(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Extension (storing the function)"}),value:l?$g:s,onChange:function(t,n,r){r===$g?e.setState({createNewExtension:!0,extensionName:""}):e.setState({createNewExtension:!1,extensionName:r})},fullWidth:!0,children:[c.map((function(e){return(0,f.jsx)(P.Z,{value:e.getName(),label:e.getFullName()||e.getName()},e.getName())})),(0,f.jsx)(P.Z,{value:$g,label:{id:"<Create a New Extension>"}})]}),l?(0,f.jsx)(yn.Z,{commitOnBlur:!0,value:s,floatingLabelText:(0,f.jsx)(w.Trans,{id:"New extension name"}),onChange:function(t){return e.setState({extensionName:t})},fullWidth:!0,errorText:Sg(n,s)?Tg(s)?void 0:(0,f.jsx)(w.Trans,{id:"This name is not valid. Only use alphanumeric characters (0-9, a-z) and underscores."}):(0,f.jsx)(w.Trans,{id:"This name is already taken by another extension."})}):null]}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(yn.Z,{commitOnBlur:!0,value:o.getName(),floatingLabelText:(0,f.jsx)(w.Trans,{id:"Function name"}),onChange:function(t){o.setName(t),e.forceUpdate()},fullWidth:!0,errorText:Pg(n,s,o)?wg(o.getName())?void 0:(0,f.jsx)(w.Trans,{id:"This name is not valid. Only use alphanumeric characters (0-9, a-z) and underscores."}):(0,f.jsx)(w.Trans,{id:"This name is already taken by another function. Choose another name."})})}),u?(0,f.jsx)(M.x1,{children:(0,f.jsx)(je.Z,{kind:"warning",children:(0,f.jsx)(w.Trans,{id:"This function will have a lot of parameters. Consider creating groups or functions for a smaller set of objects so that the function is easier to reuse."})})}):null]}),(0,f.jsx)(Kg,{project:n,eventsFunction:o,eventsBasedBehavior:null,eventsBasedObject:null,eventsFunctionsContainer:null,eventsFunctionsExtension:null,onConfigurationUpdated:function(){e.forceUpdate()},freezeEventsFunctionType:!0,getFunctionGroupNames:this._getFunctionGroupNames}),this._projectScopedContainersAccessor&&(0,f.jsx)(Gg,{project:n,projectScopedContainersAccessor:this._projectScopedContainersAccessor,eventsFunction:o,eventsBasedBehavior:null,eventsBasedObject:null,eventsFunctionsContainer:null,eventsFunctionsExtension:null,onParametersUpdated:function(){e.forceUpdate()},onFunctionParameterWillBeRenamed:function(){},onFunctionParameterTypeChanged:function(){},freezeParameters:!0})]})})}}]),n}(c.Component),tm=n(9708),nm=n(72291),rm={},im=1,am=function(e){var t=(im++).toString();return rm[t]=e,t},om=function(e){e&&rm[e]&&delete rm[e]},sm=function(e){var t=e.getStorageProvider,n=e.fileMetadata,r=e.isProjectSplitInMultipleFiles,i=c.useContext(D.ZP).values.watchProjectFolderFilesForLocalProjects,a=n?n.fileIdentifier:null,o=c.useCallback((function(e){Sr.Z.burstAllUrlsCache(),Object.keys(rm).forEach((function(t){return rm[t](e)}))}),[]);c.useEffect((function(){var e=t();if(("LocalFile"!==e.internalName||i)&&(a&&e.setupResourcesWatcher))return e.setupResourcesWatcher({fileIdentifier:a,callback:o,options:{isProjectSplitInMultipleFiles:r}})}),[a,o,t,i,r])},lm=function(e){var t=e.project,n=e.projectScopedContainersAccessor,r=e.variablesContainer,i=e.open,a=e.onCancel,o=e.onApply,s=e.initiallySelectedVariableName,l=e.shouldCreateInitiallySelectedVariable,u=e.isListLocked,d=c.useMemo((function(){return[{id:"local-variables",label:"",variablesContainer:r,onComputeAllVariableNames:function(){return[]}}]}),[r]);return(0,f.jsx)(Fn,{project:t,projectScopedContainersAccessor:n,open:i,onCancel:a,onApply:o,title:(0,f.jsx)(w.Trans,{id:"Local variables"}),tabs:d,helpPagePath:"/all-features/variables/local-variables",id:"local-variables-dialog",initiallySelectedVariableName:s,shouldCreateInitiallySelectedVariable:l,hotReloadPreviewButtonProps:null,isListLocked:u})},cm=n.g.gd,um=1,dm=50,pm={container:{display:"flex",width:"100%",flexDirection:"column",flex:1,position:"relative"}},fm=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(e){var i;return(0,ze.Z)(this,n),(i=t.call(this,e))._containerDiv=c.createRef(),i._containerDivLastKnownSize=null,i._keyboardShortcuts=new ht.ZP({isActive:function(){return!i.state.inlineEditing&&!i.state.editedInstruction.instruction&&!i.state.analyzedEventsContextResult&&!i.state.serializedEventsToExtract},shortcutCallbacks:{onDelete:function(){return i.deleteSelection()},onCopy:function(){return i.copySelection()},onCut:function(){return i.cutSelection()},onPaste:function(){return i.pasteEventsOrInstructions()},onSearch:function(){return i._toggleSearchPanel()},onEscape:function(){return i._closeSearchPanel()},onUndo:function(){return i.undo()},onRedo:function(){return i.redo()},onZoomIn:function(e){return i.onZoomEvent("IN")(e)},onZoomOut:function(e){return i.onZoomEvent("OUT")(e)}}}),i.state={eventsHistory:jt(i.props.events,{historyMaxSize:100}),editedInstruction:{isCondition:!0,instruction:null,instrsList:null,indexInList:0,eventContext:null},editedParameter:{isCondition:!0,instruction:null,instrsList:null,parameterIndex:0,eventContext:null},editedVariable:null,selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]},inlineEditing:!1,inlineEditingAnchorEl:null,inlineInstructionEditorAnchorEl:null,inlineEditingPreviousValue:null,analyzedEventsContextResult:null,serializedEventsToExtract:null,showSearchPanel:!1,searchResults:null,searchFocusOffset:null,layoutVariablesDialogOpen:!1,allEventsMetadata:[],textEditedEvent:null,fontSize:14},i.onResourceExternallyChanged=function(e){i._eventsTree&&i._eventsTree.forceEventsUpdate()},i.onEventsModifiedOutsideEditor=function(){console.info("Events were modified outside of the editor - dropping selection and storing this in history."),i.setState({selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]},inlineEditing:!1,inlineEditingAnchorEl:null},(function(){i._saveChangesToHistory("EDIT",{positionsBeforeAction:[],positionAfterAction:[]})}))},i._addStandardEvent=function(){i.addNewEvent("BuiltinCommonInstructions::Standard")},i._addCommentEvent=function(){i.addNewEvent("BuiltinCommonInstructions::Comment")},i._toggleSearchPanel=function(){i.setState((function(e){if(!(e.showSearchPanel&&i._searchPanel&&i._searchPanel.isSearchOngoing())){var t=!e.showSearchPanel;return t||i._eventSearcher&&i._eventSearcher.reset(),{showSearchPanel:t}}i._searchPanel.focus()}),(function(){i.state.showSearchPanel&&i._searchPanel&&i._searchPanel.focus()}))},i._closeSearchPanel=function(){i._eventSearcher&&i._eventSearcher.reset(),i.setState({showSearchPanel:!1})},i.addSubEvent=function(){var e=i.props.project,t=ll(i.state.selection)||ml(i.state.selection);if(t){var n=t.event.getSubEvents().insertNewEvent(e,"BuiltinCommonInstructions::Standard",t.event.getSubEvents().getEventsCount());i._eventsTree&&i._eventsTree.forceEventsUpdate((function(){var e=i._getChangedEventRows([n]);i._saveChangesToHistory("ADD",{positionsBeforeAction:e,positionAfterAction:e})}))}},i._selectionCanHaveSubEvents=function(){return!!(ll(i.state.selection)||ml(i.state.selection))},i.addLocalVariable=function(){var e=cl(i.state.selection)||xl(i.state.selection);e&&i.openVariablesEditor(e,{variablesContainer:e.event.getVariables(),variableName:"Variable"},!0)},i._selectionCanHaveLocalVariables=function(){return!!(cl(i.state.selection)||xl(i.state.selection))},i._selectionCanToggleDisabled=function(){return ol(i.state.selection).some((function(e){return e.isExecutable()}))},i._addNewEvent=function(e,t){var n,r=i.props.project,a=sl(i.state.selection),o=gl(i.state.selection),s=!1;if("BuiltinCommonInstructions::Comment"!==e&&"BuiltinCommonInstructions::Group"!==e||(s=!0),t)n=t;else if(a)n={eventsList:a.eventsList,indexInList:s?a.indexInList-1:a.indexInList};else if(o){var l=o.eventContext;n={eventsList:l.eventsList,indexInList:s?l.indexInList-1:l.indexInList}}else n={eventsList:i.props.events,indexInList:i.props.events.getEventsCount()};var c=n.eventsList.insertNewEvent(r,e,n.indexInList+1),u=i._eventsTree;return u&&u.forceEventsUpdate((function(){var n=i._getChangedEventRows([c]);if(i._saveChangesToHistory("ADD",{positionsBeforeAction:n,positionAfterAction:n},(function(){t||a||u.scrollToRow(u.getEventRow(c))})),"touch"!==(0,hi.BF)()&&("BuiltinCommonInstructions::Comment"===e||"BuiltinCommonInstructions::Group"===e)){var r=u.getEventRow(c),o=document.querySelector('[data-row-index="'.concat(r,'"] [data-editable-text="true"]'));o&&o.click()}})),[c]},i.openEventTextDialog=function(){var e=Xh(ol(i.state.selection));if(e.length){var t=e[e.length-1];i.setState({textEditedEvent:t})}},i.closeEventTextDialog=function(){if(i.state.textEditedEvent){var e=i._getChangedEventRows([i.state.textEditedEvent]);i._saveChangesToHistory("EDIT",{positionsBeforeAction:e,positionAfterAction:e})}i.setState({textEditedEvent:null})},i._buildInstructionContextMenu=function(e){return[{label:e._({id:"Copy"}),click:function(){return i.copySelection()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return i.cutSelection()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return i.pasteInstructions()},enabled:vd()||bd(),accelerator:"CmdOrCtrl+V"},{label:e._({id:"Delete"}),click:function(){return i.deleteSelection()},accelerator:"Delete"},(t=i.state.selection,hl(t).some((function(e){return e.isCondition}))?{label:e._({id:"Invert Condition"}),click:function(){return i._invertSelectedConditions()},accelerator:(0,V.$3)(i.props.shortcutMap.TOGGLE_CONDITION_INVERTED)}:null),i._hasSelectedOptionallyAsyncActions()?{label:e._({id:"Toggle Wait the Action to End"}),click:function(){return i._toggleAwaitingActions()}}:null].filter(Boolean);var t},i.openAddInstructionContextMenu=function(e,t,n){i.openInstructionEditor(e,n,t)},i.openInstructionEditor=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i.state.editedInstruction.instruction&&(i.state.editedInstruction.instruction.delete(),console.warn("state.editedInstruction.instruction was containing an instruction - deleting it. Verify the logic handling the state in EventsSheet because that should not happen.")),i.setState({inlineInstructionEditorAnchorEl:n,editedInstruction:{instrsList:t.instrsList,isCondition:t.isCondition,instruction:t.instruction?t.instruction.clone():new cm.Instruction,indexInList:void 0!==t.indexInList?t.indexInList:void 0,eventContext:e}})},i.editLayoutVariables=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i.setState({layoutVariablesDialogOpen:e})},i.openVariablesEditor=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.setState({editedVariable:{variablesContainer:t.variablesContainer,variableName:t.variableName,shouldCreateVariable:n,eventContext:e}})},i.moveSelectionToInstruction=function(e,t){i.moveSelectionToInstructionsList(e,{instrsList:t.instrsList,isCondition:t.isCondition},t.indexInList)},i.moveSelectionToInstructionsList=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=pl(i.state.selection),a=void 0===n||null===n?t.instrsList.size():n;if(!!!r.filter((function(e){return Zg(e,t.instrsList)})).length){r.forEach((function(e,n){return t.instrsList.insert(e,a+n)}));var o=fl(i.state.selection),s=i._getChangedEventRows(o),l=i._getChangedEventRows([e.event]);i._keyboardShortcuts.shouldCloneInstances()||i.deleteSelection({deleteEvents:!1,shouldSaveInHistory:!1}),i._saveChangesToHistory("EDIT",{positionsBeforeAction:s,positionAfterAction:l})}},i.selectEvent=function(e){var t=i._keyboardShortcuts.shouldMultiSelect();i.setState({selection:kl(i.state.selection,e,t)},(function(){return i.updateToolbar()}))},i.collapseAll=function(){i._eventsTree&&i._eventsTree.foldAll()},i.expandToLevel=function(e){i._eventsTree&&i._eventsTree.unfoldToLevel(e)},i._buildEventContextMenu=function(e){return[{label:e._({id:"Edit"}),click:function(){return i.openEventTextDialog()},visible:Xh(ol(i.state.selection)).length>0},{label:e._({id:"Copy"}),click:function(){return i.copySelection()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return i.cutSelection()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return i.pasteEvents()},enabled:xd(),accelerator:"CmdOrCtrl+V"},{label:e._({id:"Delete"}),click:function(){return i.deleteSelection()},accelerator:"Delete"},{label:e._({id:"Toggle Disabled"}),click:function(){return i.toggleDisabled()},enabled:i._selectionCanToggleDisabled(),accelerator:(0,V.$3)(i.props.shortcutMap.TOGGLE_EVENT_DISABLED||"KeyD")},{type:"separator"},{label:e._({id:"Add"}),submenu:[{label:e._({id:"New Event Below"}),click:function(){i.addNewEvent("BuiltinCommonInstructions::Standard")},accelerator:(0,V.$3)(i.props.shortcutMap.ADD_STANDARD_EVENT)},{label:e._({id:"Sub Event"}),click:function(){return i.addSubEvent()},enabled:i._selectionCanHaveSubEvents(),accelerator:(0,V.$3)(i.props.shortcutMap.ADD_SUBEVENT)},{label:e._({id:"Local Variable"}),click:function(){return i.addLocalVariable()},enabled:i._selectionCanHaveLocalVariables(),accelerator:(0,V.$3)(i.props.shortcutMap.ADD_LOCAL_VARIABLE)},{label:e._({id:"Comment"}),click:function(){i.addNewEvent("BuiltinCommonInstructions::Comment")},accelerator:(0,V.$3)(i.props.shortcutMap.ADD_COMMENT_EVENT)}].concat((0,r.Z)(i.state.allEventsMetadata.filter((function(e){return"BuiltinCommonInstructions::Standard"!==e.type&&"BuiltinCommonInstructions::Comment"!==e.type})).map((function(e){return{label:e.fullName,click:function(){i.addNewEvent(e.type)}}}))))},{label:e._({id:"Replace"}),submenu:[{label:e._({id:"Extract Events to a Function"}),click:function(){return i.extractEventsToFunction()}},{label:e._({id:"Move Events into a Group"}),click:function(){return i.moveEventsIntoNewGroup()},accelerator:(0,V.$3)(i.props.shortcutMap.MOVE_EVENTS_IN_NEW_GROUP)},{label:e._({id:"Analyze Objects Used in this Event"}),click:i._openEventsContextAnalyzer}]},{type:"separator"},{label:e._({id:"Events Sheet"}),submenu:[{label:e._({id:"Zoom In"}),click:function(){return i.onZoomEvent("IN")()},accelerator:"CmdOrCtrl+=",enabled:i.props.preferences.values.eventsSheetZoomLevel<dm},{label:e._({id:"Zoom Out"}),click:function(){return i.onZoomEvent("OUT")()},accelerator:"CmdOrCtrl+-",enabled:i.props.preferences.values.eventsSheetZoomLevel>um},{type:"separator"},{label:e._({id:"Collapse All"}),click:i.collapseAll},{label:e._({id:"Expand All to Level"}),submenu:[{label:e._({id:"All"}),click:function(){return i.expandToLevel(-1)}},{type:"separator"}].concat((0,r.Z)([0,1,2,3,4,5,6,7,8].map((function(t){return{label:e._({id:"Level {0}",values:{0:t+1}}),click:function(){return i.expandToLevel(t)}}}))))}]}]},i.openEventContextMenu=function(e,t,n){var r=i._keyboardShortcuts.shouldMultiSelect();i.setState({selection:kl(i.state.selection,n,r)},(function(){i.updateToolbar(),i.eventContextMenu&&i.eventContextMenu.open(e,t)}))},i.openInstructionContextMenu=function(e,t,n,r){var a=i._keyboardShortcuts.shouldMultiSelect();i.setState({selection:wl(e,i.state.selection,r,a)},(function(){i.updateToolbar(),i.instructionContextMenu&&i.instructionContextMenu.open(t,n)}))},i.selectInstruction=function(e,t){var n=i._keyboardShortcuts.shouldMultiSelect();i.setState({selection:wl(e,i.state.selection,t,n)},(function(){return i.updateToolbar()}))},i.openParameterEditor=function(e,t){var n=t.instruction,r=t.parameterIndex;i.setState({editedParameter:(0,l.Z)({eventContext:e},t),inlineEditing:!0,inlineEditingAnchorEl:t.domEvent?t.domEvent.currentTarget:null,inlineEditingPreviousValue:n.getParameter(r).getPlainString()})},i.closeParameterEditor=function(e){var t=i.state.editedParameter,n=t.instruction,r=t.parameterIndex,a=t.eventContext;if(n&&(e&&"string"===typeof i.state.inlineEditingPreviousValue&&n.setParameter(r,i.state.inlineEditingPreviousValue),!e&&i.state.inlineEditingPreviousValue!==n.getParameter(r)&&a)){var o=i._getChangedEventRows([a.event]);i._saveChangesToHistory("EDIT",{positionsBeforeAction:o,positionAfterAction:o})}var s=i.state.inlineEditingAnchorEl;i.setState({editedParameter:{isCondition:!0,instruction:null,instrsList:null,parameterIndex:0,eventContext:null},inlineEditing:!1,inlineEditingAnchorEl:null},(function(){s&&s.focus()}))},i.toggleDisabled=function(){var e=!1,t=ol(i.state.selection);if(t.forEach((function(t){t.isExecutable()&&(t.setDisabled(!t.isDisabled()),e=!0)})),e){var n=i._getChangedEventRows(t);i._saveChangesToHistory("DELETE",{positionsBeforeAction:n,positionAfterAction:n},(function(){i._eventsTree&&i._eventsTree.forceEventsUpdate()}))}},i.deleteSelection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteInstructions,n=void 0===t||t,r=e.deleteEvents,a=void 0===r||r,o=e.shouldSaveInHistory,s=void 0===o||o,l=i.props.events,c=new cm.EventsRemover,u=[];if(a){var d=ol(i.state.selection);d.forEach((function(e){return c.addEventToRemove(e)})),u=u.concat(d)}n&&(pl(i.state.selection).forEach((function(e){return c.addInstructionToRemove(e)})),u=u.concat(fl(i.state.selection)));var p=i._getChangedEventRows(u);c.launch(l),c.delete(),i._eventsTree&&i._eventsTree.forceEventsUpdate(),i.setState({selection:{selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]},inlineEditing:!1,inlineEditingAnchorEl:null},(function(){s&&i._saveChangesToHistory("DELETE",{positionsBeforeAction:p,positionAfterAction:p}),i._ensureFocused()}))},i.copySelection=function(){!function(e){var t=new gd.EventsList,n=new gd.InstructionsList,r=new gd.InstructionsList;ol(e).forEach((function(e){return t.insertEvent(e,t.getEventsCount())})),hl(e).forEach((function(e){e.isCondition?r.insert(e.instruction,r.size()):n.insert(e.instruction,n.size())})),vt.Z.set(md,{eventsList:(0,Ct.XH)(t),eventsCount:t.getEventsCount(),actionsList:(0,Ct.XH)(n),actionsCount:n.size(),conditionsList:(0,Ct.XH)(r),conditionsCount:r.size()}),t.delete(),n.delete(),r.delete()}(i.state.selection)},i.cutSelection=function(){i.copySelection(),i.deleteSelection()},i.pasteEvents=function(){if(function(e,t){var n=sl(t);if(!n||!xd())return!1;var r=vt.Z.get(md),i=bt.$.extractArrayProperty(r,"eventsList");if(!i)return!1;var a=new gd.EventsList;return(0,Ct.qx)(a,i,"unserializeFrom",e),n.eventsList.insertEvents(a,0,a.getEventsCount(),n.indexInList),a.delete(),!0}(i.props.project,i.state.selection)){var e=i._getChangedEventRows(ol(i.state.selection));i._saveChangesToHistory("ADD",{positionsBeforeAction:e,positionAfterAction:e},(function(){i._eventsTree&&i._eventsTree.forceEventsUpdate()}))}},i.pasteInstructions=function(){if(function(e,t){if(!jl(t)&&!yl(t)||!vd()&&!bd())return!1;var n=vt.Z.get(md),r=bt.$.extractArrayProperty(n,"actionsList"),i=bt.$.extractArrayProperty(n,"conditionsList");if(!r||!i)return!1;var a=new gd.InstructionsList,o=new gd.InstructionsList;(0,Ct.qx)(a,r,"unserializeFrom",e),(0,Ct.qx)(o,i,"unserializeFrom",e);var s=gl(t);s&&(s.isCondition?s.instrsList.insertInstructions(o,0,o.size(),s.indexInList):s.instrsList.insertInstructions(a,0,a.size(),s.indexInList));var l=function(e){return e.selectedInstructionsLists[e.selectedInstructionsLists.length-1]||null}(t);return l&&(l.isCondition?l.instrsList.insertInstructions(o,0,o.size(),l.instrsList.size()):l.instrsList.insertInstructions(a,0,a.size(),l.instrsList.size())),o.delete(),a.delete(),!0}(i.props.project,i.state.selection)){var e=fl(i.state.selection),t=i._getChangedEventRows(e);i._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){i._eventsTree&&i._eventsTree.forceEventsUpdate()}))}},i.pasteEventsOrInstructions=function(){Cl(i.state.selection)?i.pasteEvents():(jl(i.state.selection)||yl(i.state.selection))&&i.pasteInstructions()},i.pasteInstructionsInInstructionsList=function(e,t){if(function(e,t){if(!vd()&&!bd())return!1;var n=vt.Z.get(md),r=bt.$.extractArrayProperty(n,"actionsList"),i=bt.$.extractArrayProperty(n,"conditionsList");if(r&&i){var a=new gd.InstructionsList,o=new gd.InstructionsList;return(0,Ct.qx)(a,r,"unserializeFrom",e),(0,Ct.qx)(o,i,"unserializeFrom",e),t.isCondition?t.instrsList.insertInstructions(o,0,o.size(),t.instrsList.size()):t.instrsList.insertInstructions(a,0,a.size(),t.instrsList.size()),o.delete(),a.delete(),!0}}(i.props.project,t)){var n=i._getChangedEventRows([e.event]);i._saveChangesToHistory("EDIT",{positionsBeforeAction:n,positionAfterAction:n},(function(){i._eventsTree&&i._eventsTree.forceEventsUpdate()}))}},i._invertSelectedConditions=function(){hl(i.state.selection).forEach((function(e){e.isCondition&&e.instruction.setInverted(!e.instruction.isInverted())}));var e=fl(i.state.selection),t=i._getChangedEventRows(e);i._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){i._eventsTree&&i._eventsTree.forceEventsUpdate()}))},i._hasSelectedOptionallyAsyncActions=function(){return hl(i.state.selection).some((function(e){if(!e.isCondition){var t=uf({instructionType:e.instruction.getType(),project:i.props.project,isCondition:!1});if(t&&t.isOptionallyAsync())return!0}return!1}))},i._toggleAwaitingActions=function(){hl(i.state.selection).forEach((function(e){if(!e.isCondition){var t=uf({instructionType:e.instruction.getType(),project:i.props.project,isCondition:!1});t&&t.isOptionallyAsync()&&e.instruction.setAwaited(!e.instruction.isAwaited())}}));var e=fl(i.state.selection),t=i._getChangedEventRows(e);i._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t},(function(){i._eventsTree&&i._eventsTree.forceEventsUpdate()}))},i._onEndEditingStringEvent=function(e){var t=i._getChangedEventRows([e]);i._saveChangesToHistory("EDIT",{positionsBeforeAction:t,positionAfterAction:t})},i._getChangedEventRows=function(e){var t=i._eventsTree;return t?e.map((function(e){return t.getEventRow(e)})):[]},i._saveChangesToHistory=function(e,t,n){i.setState({eventsHistory:kt(i.state.eventsHistory,i.props.events,e,{positions:t})},(function(){i.updateToolbar(),n&&n()})),i._searchPanel&&i._searchPanel.markSearchResultsDirty()},i.undo=function(){if(Zt(i.state.eventsHistory)){var e=i.props,t=e.events,n=e.project,r=wt(i.state.eventsHistory,t,n);i._eventSearcher&&i._eventSearcher.reset();var a=(0,nl.Z)(i)._eventsTree;a&&a.forceEventsUpdate((function(){var e=r.futureActions[r.futureActions.length-1],t=e.changeContext.positions,n={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};if("ADD"===e.type)n={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};else{var o=a.getEventContextAtRowIndexes(t.positionsBeforeAction);n=Tl(o)}i.setState({selection:n,eventsHistory:r},(function(){var e=t.positionsBeforeAction[0];void 0!==e&&(a.scrollToRow(e),setTimeout((function(){a.scrollToRow(e)}),70)),i.updateToolbar()}))}))}},i.redo=function(){if(yt(i.state.eventsHistory)){var e=i.props,t=e.events,n=e.project,r=Tt(i.state.eventsHistory,t,n);i._eventSearcher&&i._eventSearcher.reset();var a=(0,nl.Z)(i)._eventsTree;a&&a.forceEventsUpdate((function(){var e=r.previousActions[r.previousActions.length-1],t=e.changeContext.positions,n={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};if("DELETE"===e.type)n={selectedInstructions:[],selectedEvents:[],selectedInstructionsLists:[]};else{var o=a.getEventContextAtRowIndexes(t.positionAfterAction);n=Tl(o)}i.setState({selection:n,eventsHistory:r},(function(){var e=t.positionsBeforeAction[0];void 0!==e&&(a.scrollToRow(e),setTimeout((function(){a.scrollToRow(e)}),70)),i.updateToolbar()}))}))}},i.onZoomEvent=function(e){var t="IN"===e?1:-1;return function(e){e&&(e.preventDefault(),e.stopPropagation()),i.props.preferences.setEventsSheetZoomLevel(Math.min(Math.max(i.props.preferences.values.eventsSheetZoomLevel+1*t,um),dm)),setTimeout((function(){var e=(0,nl.Z)(i)._eventsTree;e&&e.forceEventsUpdate()}))}},i._openEventsContextAnalyzer=function(){var e=i.props.projectScopedContainersAccessor.get(),t=new cm.EventsContextAnalyzer(cm.JsPlatform.get()),n=new cm.EventsList;ol(i.state.selection).forEach((function(e){return n.insertEvent(e,n.getEventsCount())})),t.launch(n,e),n.delete(),i.setState({analyzedEventsContextResult:fg(t.getEventsContext())}),t.delete()},i._closeEventsContextAnalyzer=function(){i.setState({analyzedEventsContextResult:null})},i.extractEventsToFunction=function(){var e=new cm.EventsList;ul(i.state.selection).forEach((function(t){var n=t.event;return e.insertEvent(n,e.getEventsCount())})),i.props.onBeginCreateEventsFunction(),i.setState({serializedEventsToExtract:(0,Ct.XH)(e)}),e.delete()},i.moveEventsIntoNewGroup=function(){var e=new cm.EventsList;ul(i.state.selection).forEach((function(t){var n=t.event;return e.insertEvent(n,e.getEventsCount())})),i._replaceSelectionByGroupOfEvents(e),e.delete()},i._replaceSelectionByEventsFunction=function(e,t){var n=dl(i.state.selection);if(n){var r=i.props.project,a=n.eventsList.insertNewEvent(r,"BuiltinCommonInstructions::Standard",n.indexInList),o=cm.asStandardEvent(a),s=function(e,t){var n=new kg.Instruction;n.setType((0,sd.Op)(e,t)),n.setParametersCount(t.getParameters().getParametersCount()+1+1);for(var r=t.getParameters(),i=0;i<r.getParametersCount();i++){var a=r.getParameterAt(i);n.setParameter(1+i,a.getName())}return n}(e,t);o.getActions().push_back(s),s.delete(),i.deleteSelection({deleteInstructions:!1})}},i._replaceSelectionByGroupOfEvents=function(e){var t=dl(i.state.selection);if(t){var n=i.props.project,r=t.eventsList.insertNewEvent(n,"BuiltinCommonInstructions::Group",t.indexInList),a=cm.asGroupEvent(r);a.setName("Grouped events"),a.setFolded(!0),a.getSubEvents().insertEvents(e,0,e.getEventsCount(),0),i.deleteSelection({deleteInstructions:!1})}},i._ensureUnfoldedAndScrollTo=function(e){var t=e(),n=i._eventsTree;t&&n&&(n.unfoldForEvent(t),setTimeout((function(){n.scrollToRow(n.getEventRow(t))}),0))},i._replaceInEvents=function(e,t){var n=e(t,(function(){i.forceUpdate((function(){i._eventsTree&&i._eventsTree.forceEventsUpdate()}))}));if(n.length){var r=i._getChangedEventRows(n);i._saveChangesToHistory("EDIT",{positionsBeforeAction:r,positionAfterAction:r})}},i._searchInEvents=function(e,t){e(t,(function(){i.forceUpdate((function(){i._eventsTree&&i._eventsTree.forceEventsUpdate()}))}))},i._onEventMoved=function(e,t){i._saveChangesToHistory("EDIT",{positionsBeforeAction:[e],positionAfterAction:[t]})},i._renderInstructionEditorDialog=function(){var e=i.props,t=e.project,n=e.scope,r=e.globalObjectsContainer,a=e.objectsContainer,o=e.projectScopedContainersAccessor,s=i.state.inlineInstructionEditorAnchorEl?zh:Uh,l=i.state.editedInstruction.instruction;return l?(0,f.jsx)(w.I18n,{children:function(e){var c=e.i18n;return(0,f.jsx)(s,{i18n:c,project:t,scope:n,globalObjectsContainer:r,objectsContainer:a,projectScopedContainersAccessor:i.state.editedInstruction.eventContext?i.state.editedInstruction.eventContext.projectScopedContainersAccessor:o,instruction:l,isCondition:i.state.editedInstruction.isCondition,isNewInstruction:void 0===i.state.editedInstruction.indexInList,anchorEl:i.state.inlineInstructionEditorAnchorEl,open:!0,onCancel:function(){return i.closeInstructionEditor()},onSubmit:function(){var e=i.state.editedInstruction,t=e.instrsList,n=e.instruction,r=e.indexInList;t&&n&&(void 0!==r&&null!==r?t.set(r,n):t.insert(n,t.size()),i.closeInstructionEditor(!0),function(e){for(var t=!1,n=!1,r=e.size()-1;r>=0;--r){var i=e.get(r);r===e.size()-1?"BuiltinCommonInstructions::Once"===i.getType()&&(t=!0):"BuiltinCommonInstructions::Once"===i.getType()&&(e.removeAt(r),n=!0)}if(n&&!t){var a=new pg.Instruction;a.setType("BuiltinCommonInstructions::Once"),e.insert(a,e.size()),a.delete()}}(t),i._eventsTree&&i._eventsTree.forceEventsUpdate())},resourceManagementProps:i.props.resourceManagementProps,openInstructionOrExpression:function(e,t){i.closeInstructionEditor(),i.props.openInstructionOrExpression(e,t)},canPasteInstructions:i.state.editedInstruction.isCondition?vd():bd(),onPasteInstructions:function(){var e=i.state.editedInstruction,t=e.instrsList,n=e.isCondition,r=e.eventContext;t&&r&&i.pasteInstructionsInInstructionsList(r,{instrsList:t,isCondition:n})},onWillInstallExtension:i.props.onWillInstallExtension,onExtensionInstalled:i.props.onExtensionInstalled})}}):void 0},i._ensureFocused=function(){if(i._containerDiv&&document){var e=i._containerDiv.current;if(document.activeElement!==e&&e){if(document.activeElement!==document.body&&e.contains(document.activeElement))return;e.focus()}}},i.addNewEvent=(0,xi.zi)(i.props.authenticatedUser,xi.l8,i._addNewEvent),i}return(0,We.Z)(n,[{key:"componentDidMount",value:function(){this.setState({allEventsMetadata:Ip()}),this.resourceExternallyChangedCallbackId=am(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){om(this.resourceExternallyChangedCallbackId)}},{key:"componentDidUpdate",value:function(e,t){this.addNewEvent=(0,xi.zi)(this.props.authenticatedUser,xi.l8,this._addNewEvent),this.state.eventsHistory!==t.eventsHistory&&this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),!e.isActive&&this.props.isActive&&this._ensureFocused()}},{key:"updateToolbar",value:function(){if(this.props.setToolbar){var e=this._selectionCanHaveSubEvents();this.props.setToolbar((0,f.jsx)(sg,{allEventsMetadata:this.state.allEventsMetadata,onAddStandardEvent:this._addStandardEvent,onAddSubEvent:this.addSubEvent,canAddSubEvent:e,onAddLocalVariable:this.addLocalVariable,canAddLocalVariable:this._selectionCanHaveLocalVariables(),canToggleEventDisabled:Cl(this.state.selection)&&this._selectionCanToggleDisabled(),canToggleInstructionInverted:jl(this.state.selection),onAddCommentEvent:this._addCommentEvent,onAddEvent:this.addNewEvent,onToggleInvertedCondition:this._invertSelectedConditions,onToggleDisabledEvent:this.toggleDisabled,canRemove:Zl(this.state.selection),onRemove:this.deleteSelection,canUndo:Zt(this.state.eventsHistory),canRedo:yt(this.state.eventsHistory),undo:this.undo,redo:this.redo,onOpenSettings:this.props.onOpenSettings,settingsIcon:this.props.settingsIcon,onToggleSearchPanel:this._toggleSearchPanel,canMoveEventsIntoNewGroup:Zl(this.state.selection),moveEventsIntoNewGroup:this.moveEventsIntoNewGroup,onOpenSceneVariables:this.editLayoutVariables}))}}},{key:"closeInstructionEditor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.state.editedInstruction,r=n.instruction,i=n.eventContext;this.setState({editedInstruction:{isCondition:!0,instruction:null,instrsList:null,indexInList:0,eventContext:null}},(function(){if(r&&r.delete(),t&&i){var n=e._getChangedEventRows([i.event]);e._saveChangesToHistory("EDIT",{positionsBeforeAction:n,positionAfterAction:n})}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isActive,r=t.project,i=t.scope,a=t.events,o=t.onOpenExternalEvents,s=t.onOpenLayout,l=t.globalObjectsContainer,c=t.objectsContainer,u=t.projectScopedContainersAccessor,d=t.preferences,p=t.resourceManagementProps,h=t.onCreateEventsFunction,g=t.tutorials,m=t.hotReloadPreviewButtonProps,x=t.windowSize,v=t.highlightedAiGeneratedEventIds;if(!r)return null;var b=(0,hi.BF)(),C=i.eventsFunctionsExtension&&i.eventsFunction&&(!i.eventsBasedBehavior&&!i.eventsBasedObject&&cm.EventsFunctionSelfCallChecker.isFreeFunctionOnlyCallingItself(r,i.eventsFunctionsExtension,i.eventsFunction)||i.eventsBasedBehavior&&cm.EventsFunctionSelfCallChecker.isBehaviorFunctionOnlyCallingItself(r,i.eventsFunctionsExtension,i.eventsBasedBehavior,i.eventsFunction)||i.eventsBasedObject&&cm.EventsFunctionSelfCallChecker.isObjectFunctionOnlyCallingItself(r,i.eventsFunctionsExtension,i.eventsBasedObject,i.eventsFunction)),j=this.state.editedParameter.eventContext?this.state.editedParameter.eventContext.projectScopedContainersAccessor:u;if(this._containerDiv.current){var y=this._containerDiv.current.clientWidth,Z=this._containerDiv.current.clientHeight;y>0&&Z>0&&(this._containerDivLastKnownSize={width:y,height:Z})}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(jg,{ref:function(t){return e._eventSearcher=t},events:a,globalObjectsContainer:l,objectsContainer:c,selection:this.state.selection,project:r,children:function(t){var h=t.eventsSearchResultEvents,m=t.searchFocusOffset,y=t.searchInEvents,Z=t.replaceInEvents,k=t.goToPreviousSearchResult,T=t.goToNextSearchResult;return(0,f.jsxs)("div",{id:"events-editor","data-active":n?"true":void 0,className:"gd-events-sheet",style:pm.container,onKeyDown:e._keyboardShortcuts.onKeyDown,onKeyUp:e._keyboardShortcuts.onKeyUp,onDragOver:e._keyboardShortcuts.onDragOver,ref:e._containerDiv,tabIndex:0,children:[C&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(je.Z,{kind:"warning",children:(0,f.jsx)(w.Trans,{id:'This function calls itself (it is "recursive"). Ensure this is expected and there is a proper condition to stop it if necessary.'})})})}),e._containerDivLastKnownSize&&(0,f.jsx)(af,{ref:function(t){return e._eventsTree=t},indentScale:d.values.eventsSheetIndentScale,onScroll:e._ensureFocused,events:a,project:r,scope:i,globalObjectsContainer:l,objectsContainer:c,projectScopedContainersAccessor:u,selection:e.state.selection,onInstructionClick:e.selectInstruction,onInstructionDoubleClick:e.openInstructionEditor,onInstructionContextMenu:e.openInstructionContextMenu,onAddInstructionContextMenu:e.openAddInstructionContextMenu,onAddNewInstruction:e.openInstructionEditor,onPasteInstructions:e.pasteInstructionsInInstructionsList,onMoveToInstruction:e.moveSelectionToInstruction,onMoveToInstructionsList:e.moveSelectionToInstructionsList,onParameterClick:e.openParameterEditor,onVariableDeclarationClick:function(){},onVariableDeclarationDoubleClick:e.openVariablesEditor,onEventClick:e.selectEvent,onEventContextMenu:e.openEventContextMenu,onAddNewEvent:function(t,n){e.addNewEvent(t,{eventsList:n,indexInList:n.getEventsCount()})},onOpenExternalEvents:o,onOpenLayout:s,searchResults:h,searchFocusOffset:m,onEventMoved:e._onEventMoved,onEndEditingEvent:e._onEndEditingStringEvent,showObjectThumbnails:d.values.eventsSheetShowObjectThumbnails,screenType:b,windowSize:x,eventsSheetWidth:e._containerDivLastKnownSize.width,eventsSheetHeight:e._containerDivLastKnownSize.height,fontSize:d.values.eventsSheetZoomLevel,preferences:d,tutorials:g,highlightedAiGeneratedEventIds:v},a.ptr),e.state.showSearchPanel&&(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Search panel"}),scope:"scene-events-search",onClose:function(){return e._closeSearchPanel()},children:(0,f.jsx)(xg,{ref:function(t){return e._searchPanel=t},onSearchInEvents:function(t){return e._searchInEvents(y,t)},onReplaceInEvents:function(t){e._replaceInEvents(Z,t)},resultsCount:h?h.length:null,hasEventSelected:Cl(e.state.selection),onGoToPreviousSearchResult:function(){return e._ensureUnfoldedAndScrollTo(k)},onCloseSearchPanel:function(){e._closeSearchPanel()},onGoToNextSearchResult:function(){return e._ensureUnfoldedAndScrollTo(T)},searchFocusOffset:m})}),(0,f.jsx)(dg,{open:e.state.inlineEditing,anchorEl:e.state.inlineEditingAnchorEl,onRequestClose:function(){e.closeParameterEditor("cancel"===d.values.eventsSheetCancelInlineParameter)},onApply:function(){e.closeParameterEditor(!1)},project:r,scope:i,globalObjectsContainer:l,objectsContainer:c,projectScopedContainersAccessor:j,isCondition:e.state.editedParameter.isCondition,instruction:e.state.editedParameter.instruction,parameterIndex:e.state.editedParameter.parameterIndex,onChange:function(t){var n=e.state.editedParameter,i=n.instruction,a=n.parameterIndex;i&&e.state.inlineEditing&&(i.setParameter(a,t),cm.VariableInstructionSwitcher.switchBetweenUnifiedInstructionIfNeeded(r.getCurrentPlatform(),j.get(),i),e.forceUpdate(),e._searchPanel&&e._searchPanel.markSearchResultsDirty())},resourceManagementProps:p}),(0,f.jsx)(ns.Z,{ref:function(t){return e.eventContextMenu=t},buildMenuTemplate:e._buildEventContextMenu}),(0,f.jsx)(ns.Z,{ref:function(t){return e.instructionContextMenu=t},buildMenuTemplate:e._buildInstructionContextMenu})]})}},a.ptr),this._renderInstructionEditorDialog(),this.state.analyzedEventsContextResult&&(0,f.jsx)(hg,{onClose:this._closeEventsContextAnalyzer,eventsContextResult:this.state.analyzedEventsContextResult}),this.state.serializedEventsToExtract&&(0,f.jsx)(em,{project:r,scope:i,globalObjectsContainer:l,objectsContainer:c,onClose:function(){return e.setState({serializedEventsToExtract:null})},serializedEvents:this.state.serializedEventsToExtract,onCreate:function(t,n){h(t,n),e._replaceSelectionByEventsFunction(t,n),e.setState({serializedEventsToExtract:null})}}),this.state.editedVariable&&(0,f.jsx)(lm,{project:r,projectScopedContainersAccessor:j,open:!0,onCancel:function(){return e.setState({editedVariable:null})},onApply:function(){var t=e.state.editedVariable?e.state.editedVariable.eventContext:null;e.setState({editedVariable:null}),e._eventsTree&&t&&e._eventsTree.forceEventsUpdate((function(){var n=e._getChangedEventRows([t.event]);e._saveChangesToHistory("ADD",{positionsBeforeAction:n,positionAfterAction:n})}))},variablesContainer:this.state.editedVariable.variablesContainer,initiallySelectedVariableName:this.state.editedVariable.variableName,shouldCreateInitiallySelectedVariable:this.state.editedVariable.shouldCreateVariable,isListLocked:!1}),this.state.layoutVariablesDialogOpen&&(0,f.jsx)(kc,{projectScopedContainersAccessor:u,open:!0,onCancel:function(){return e.editLayoutVariables(!1)},onApply:function(){return e.editLayoutVariables(!1)},hotReloadPreviewButtonProps:m,isListLocked:!1}),this.state.textEditedEvent&&(0,f.jsx)(Kh,{event:this.state.textEditedEvent,onApply:function(){e.closeEventTextDialog()},onClose:this.closeEventTextDialog})]})}}]),n}(c.Component),hm=function(e,t){c.useImperativeHandle(t,(function(){return{updateToolbar:o,onResourceExternallyChanged:u,onEventsModifiedOutsideEditor:d}}));var n=function(e){var t=e.isActive,n=c.useState((function(){return new Set})),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=c.useRef(!1);return c.useEffect((function(){t||(o.current=!0)}),[t]),{addNewAiGeneratedEventIds:c.useCallback((function(e){a((function(t){var n=new Set(o.current?new Set:t);return e.forEach((function(e){return n.add(e)})),o.current=!1,n}))}),[]),highlightedAiGeneratedEventIds:i}}({isActive:e.isActive}),r=n.highlightedAiGeneratedEventIds,i=n.addNewAiGeneratedEventIds,a=c.useRef(null),o=function(){a.current&&a.current.updateToolbar()},u=function(e){a.current&&a.current.onResourceExternallyChanged(e)},d=function(e){i(e.newOrChangedAiGeneratedEventIds),a.current&&a.current.onEventsModifiedOutsideEditor()},p=c.useContext($n.ZP),h=c.useContext(D.ZP),g=c.useContext(nm.n).tutorials,m=c.useContext(tm.Z),x=(0,be.UQ)().windowSize,v=(0,V.LB)();return(0,f.jsx)(fm,(0,l.Z)({ref:a,authenticatedUser:p,preferences:h,tutorials:g,leaderboardsManager:m,shortcutMap:v,windowSize:x,highlightedAiGeneratedEventIds:r},e))},gm=c.forwardRef(hm),mm=n(18870),xm=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).onBeginCreateEventsFunction=function(){(0,ai.cc)({step:"begin",parentEditor:"scene-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"scene-events-editor")},e}return(0,We.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){this.props.isActive&&this._setPreviewedLayout()}},{key:"componentDidUpdate",value:function(e){!e.isActive&&this.props.isActive&&this._setPreviewedLayout()}},{key:"_setPreviewedLayout",value:function(){var e=this.getLayout();this.props.setPreviewedLayout({layoutName:e?e.getName():null,externalLayoutName:null,eventsBasedObjectType:null,eventsBasedObjectVariantName:null})}},{key:"getProject",value:function(){return this.props.project}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"onEventsBasedObjectChildrenEdited",value:function(){}},{key:"onSceneObjectEdited",value:function(e,t){}},{key:"onSceneObjectsDeleted",value:function(e){}},{key:"onSceneEventsModifiedOutsideEditor",value:function(e){this.getLayout()===e.scene&&this.editor&&this.editor.onEventsModifiedOutsideEditor({newOrChangedAiGeneratedEventIds:e.newOrChangedAiGeneratedEventIds})}},{key:"notifyChangesToInGameEditor",value:function(e){(0,mm.VL)(e)}},{key:"switchInGameEditorIfNoHotReloadIsNeeded",value:function(){}},{key:"onInstancesModifiedOutsideEditor",value:function(e){}},{key:"onObjectsModifiedOutsideEditor",value:function(e){}},{key:"onObjectGroupsModifiedOutsideEditor",value:function(e){}},{key:"getLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasLayoutNamed(n)?t.getLayout(n):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=this.getLayout();if(!i||!n)return(0,f.jsxs)("div",{children:["No layout called ",r," found!"]});var a={project:n,layout:i},o=new Bn(a);return(0,f.jsx)(gm,{ref:function(t){return e.editor=t},setToolbar:this.props.setToolbar,onOpenLayout:this.props.onOpenLayout,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.onCreateEventsFunction,onBeginCreateEventsFunction:this.onBeginCreateEventsFunction,unsavedChanges:this.props.unsavedChanges,project:n,scope:a,globalObjectsContainer:n.getObjects(),objectsContainer:i.getObjects(),projectScopedContainersAccessor:o,events:i.getEvents(),onOpenExternalEvents:this.props.onOpenExternalEvents,isActive:this.props.isActive,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,onWillInstallExtension:this.props.onWillInstallExtension,onExtensionInstalled:this.props.onExtensionInstalled})}}]),n}(c.Component),vm=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.25 5.75C8.66015 5.75 5.75 8.66015 5.75 12.25C5.75 15.8399 8.66015 18.75 12.25 18.75C15.8399 18.75 18.75 15.8399 18.75 12.25C18.75 8.66015 15.8399 5.75 12.25 5.75ZM4.25 12.25C4.25 7.83172 7.83172 4.25 12.25 4.25C16.6683 4.25 20.25 7.83172 20.25 12.25C20.25 16.6683 16.6683 20.25 12.25 20.25C7.83172 20.25 4.25 16.6683 4.25 12.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5303 8.46967C14.8232 8.76256 14.8232 9.23744 14.5303 9.53033L10.5303 13.5303C10.2374 13.8232 9.76256 13.8232 9.46967 13.5303C9.17678 13.2374 9.17678 12.7626 9.46967 12.4697L13.4697 8.46967C13.7626 8.17678 14.2374 8.17678 14.5303 8.46967Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 13C5.25 12.5858 5.58579 12.25 6 12.25H18.5C18.9142 12.25 19.25 12.5858 19.25 13C19.25 13.4142 18.9142 13.75 18.5 13.75H6C5.58579 13.75 5.25 13.4142 5.25 13Z",fill:"currentColor"})]}))})),bm=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 5.5C6.05964 5.5 5.5 6.05964 5.5 6.75V17.25C5.5 17.9404 6.05964 18.5 6.75 18.5H17.25C17.9404 18.5 18.5 17.9404 18.5 17.25V6.75C18.5 6.05964 17.9404 5.5 17.25 5.5H6.75ZM4 6.75C4 5.23122 5.23122 4 6.75 4H17.25C18.7688 4 20 5.23122 20 6.75V17.25C20 18.7688 18.7688 20 17.25 20H6.75C5.23122 20 4 18.7688 4 17.25V6.75Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.19253 10.2483C8.46962 9.94039 8.94384 9.91543 9.25172 10.1925L11.7517 12.4425C11.9098 12.5848 12 12.7874 12 13C12 13.2126 11.9098 13.4152 11.7517 13.5575L9.25172 15.8075C8.94384 16.0846 8.46962 16.0596 8.19253 15.7517C7.91543 15.4438 7.94039 14.9696 8.24828 14.6925L10.1289 13L8.24828 11.3075C7.94039 11.0304 7.91543 10.5562 8.19253 10.2483Z",fill:"currentColor"})]}))})),Cm=n(58758),jm=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onPlay,n=e.onPause,r=e.canPlay,i=e.canPause,a=e.onToggleProfiler,o=e.canOpenProfiler,s=e.onToggleConsole,l=e.canOpenConsole,c=e.isProfilerShown,u=e.isConsoleShown;return(0,f.jsxs)(Ls.k,{lastChild:!0,children:[(0,f.jsx)($.Z,{size:"small",color:"default",onClick:a,disabled:!o,selected:c,tooltip:{id:"Open the performance profiler"},children:(0,f.jsx)(vm,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:s,disabled:!l,selected:u,tooltip:{id:"Open the console"},children:(0,f.jsx)(bm,{})}),i?(0,f.jsx)(T.Z,{primary:!0,onClick:n,leftIcon:(0,f.jsx)(Cm.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Pause"})}):(0,f.jsx)(G.Z,{primary:!0,onClick:t,icon:(0,f.jsx)(Xe,{}),label:(0,f.jsx)(w.Trans,{id:"Play"}),disabled:!r})]})}}]),n}(c.PureComponent),ym=jm,Zm=n(28519),km=n(36502),wm=n.n(km),Tm={container:{flex:1,display:"flex"},list:{overflowY:"scroll",flex:1}},Sm=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"_renderInspectorList",value:function(e,t,n){var r=this;return t(e).map((function(t){if(!t)return null;var i=n.concat(t.key),a=t.getSubInspectors;return(0,f.jsx)(Te.HC,{primaryText:t.label,initiallyOpen:!!t.initiallyOpen,onClick:function(){return r.props.onChooseInspector(t,i)},renderNestedItems:a?function(){return r._renderInspectorList(wm()(e,t.key,null),a,i)}:void 0},i.join("."))}))}},{key:"render",value:function(){return this.props.gameData?(0,f.jsx)(Te.aV,{style:Tm.list,children:this._renderInspectorList(this.props.gameData,this.props.getInspectorDescriptions,[])}):null}}]),n}(c.Component),Pm=n(54122),Im=n.n(Pm),Em=n(73529),Mm=n.n(Em),Lm=function e(t){if(!t)return null;var n={type:t._type,value:null};return"string"===t._type?n.value=t._str:"number"===t._type?n.value=t._value:"boolean"===t._type?n.value=t._bool:"structure"===t._type?n.value=Mm()(t._children,e):"array"===t._type&&(n.value=t._childrenArray.map(e)),n},Am=function(e,t){var n=t.onCall,r=(t.onEdit,t.variablesContainer);if(r){var a=function(e,t){var n,r=e.shift(),a=["_variables","items",r],o=t._variables.items[r],s=!1,l=(0,i.Z)(e);try{for(l.s();!(n=l.n()).done;){var c=n.value;if(!(s=!s))if("structure"===o._type)a.push("_children",c),o=o._children[c];else{if("array"!==o._type)return{path:null,variable:null};a.push("_childrenArray",c),o=o._childrenArray[parseInt(c,10)]}}}catch(u){l.e(u)}finally{l.f()}return{path:a,variable:o}}(e.namespace,r),o=a.path,s=a.variable;if(!o)return console.error("Invalid path passed to the debugger: ",e),!1;if(!s)return console.error("Variable doesn't exist: ",e),!1;if("type"===e.name){if(o.push("castTo"),"string"!==e.new_value&&"number"!==e.new_value&&"boolean"!==e.new_value&&"structure"!==e.new_value&&"array"!==e.new_value)return console.error("Invalid type name: "+e.new_value),!1;e.new_value!==s._type&&n(o,[e.new_value])}else if("value"===e.name){if("string"===s._type&&"string"!==typeof e.new_value)e.new_value=""+e.new_value;else if("number"===s._type&&"number"!==typeof e.new_value){if(e.new_value=parseFloat(e.new_value),isNaN(e.new_value))return console.error("Cannot set variable of type number to NaN!"),!1}else if("boolean"===s._type&&"boolean"!==typeof e.new_value)e.new_value="string"===typeof e.new_value?"false"!==e.new_value.toLowerCase()&&"0"!==e.new_value:!!e.new_value;else if("structure"===s._type||"array"===s._type)return console.error("Cannot set the value of a collection."),!1;o.push("setValue"),n(o,[e.new_value])}return!0}},Om=function(e){return(0,f.jsx)(Im(),{collapsed:!1,name:!1,src:e.variablesContainer?(t=e.variablesContainer,t&&t._variables&&t._variables.items?Mm()(t._variables.items,Lm):null):null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return Am(t,e)},groupArraysAfterLength:50,theme:"monokai",validationMessage:"Invalid value"});var t},Rm=function(e){return(0,f.jsx)(Im(),{collapsed:!1,name:!1,src:e.timers?(t=e.timers,t?Object.entries(t.items).map((function(e){var t=(0,s.Z)(e,2),n=(t[0],t[1]);return{"Timer name":n._name,"Time (in seconds)":n._time/1e3,"Is paused":n._paused}})):null):null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,groupArraysAfterLength:50,theme:"monokai"});var t},Fm=function(e){if(!e)return null;var t={"X position":e.x,"Y position":e.y,Angle:e.angle,Layer:e.layer,"Z order":e.zOrder,"Is hidden?":e.hidden};return"undefined"!==typeof e._z&&(t["Z position"]=e._z,t["Rotation around X axis"]=e._rotationX,t["Rotation around Y axis"]=e._rotationY,t["Rotation around Z axis (Angle)"]=t.Angle,delete t.Angle),t},Dm=function(e){return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"General:"})}),(0,f.jsx)(Im(),{collapsed:!1,name:!1,src:Fm(e.runtimeObject),enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return function(e,t){var n=t.onCall;if(t.onEdit,"X position"===e.name)n(["setX"],[parseFloat(e.new_value)]);else if("Y position"===e.name)n(["setY"],[parseFloat(e.new_value)]);else if("Z position"===e.name)n(["setZ"],[parseFloat(e.new_value)]);else if("Rotation around X axis"===e.name)n(["setRotationX"],[parseFloat(e.new_value)]);else if("Rotation around Y axis"===e.name)n(["setRotationY"],[parseFloat(e.new_value)]);else if("Angle"===e.name||"Rotation around Z axis (Angle)"===e.name)n(["setAngle"],[parseFloat(e.new_value)]);else if("Layer"===e.name)n(["setLayer"],[e.new_value]);else if("Z order"===e.name)n(["setZOrder"],[parseFloat(e.new_value)]);else{if("Is hidden?"!==e.name)return!1;n(["hide"],[!!e.new_value])}return!0}(t,e)},groupArraysAfterLength:50,theme:"monokai"}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Instance variables:"})}),(0,f.jsx)(Om,{variablesContainer:e.runtimeObject?e.runtimeObject._variables:null,onEdit:function(t,n){return e.onEdit(["_variables"].concat(t),n)},onCall:function(t,n){return e.onCall(["_variables"].concat(t),n)}}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Timers:"})}),(0,f.jsx)(Rm,{timers:e.runtimeObject?e.runtimeObject._timers:null})]})},Nm=function(e){return e?{"Camera rotation (in deg)":e._cameraRotation,"Camera zoom":e._zoomFactor,"Layer is hidden":!!e._hidden,"Camera X position":e._cameraX,"Camera Y position":e._cameraY,"Time scale":e._timeScale}:null},_m=function(e){return e?{"Time scale":e._timeManager?e._timeManager._timeScale:null,Layers:e._layers&&e._layers.items?Mm()(e._layers.items,Nm):null,"Actions waiting to be finished":e._asyncTasksManager.tasksWithCallback.length}:null},Bm=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={newObjectName:""},e}return(0,We.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.runtimeScene,r=t.onCall;return n?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Layers:"})}),(0,f.jsx)(Im(),{collapsed:!1,name:!1,src:_m(n),enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1,onEdit:function(t){return function(e,t){var n=t.onCall;if(t.onEdit,0===e.namespace.length&&"Time scale"===e.name)n(["_timeManager","setTimeScale"],[parseFloat(e.new_value)]);else{if(!(e.namespace.length>=2))return!1;"Layers"===e.namespace[0]&&("Camera rotation (in deg)"===e.name?n(["_layers","items",e.namespace[1],"setCameraRotation"],[parseFloat(e.new_value)]):"Camera zoom"===e.name?n(["_layers","items",e.namespace[1],"setCameraZoom"],[parseFloat(e.new_value)]):"Layer is hidden"===e.name?n(["_layers","items",e.namespace[1],"show"],[!e.new_value]):"Camera X position"===e.name?n(["_layers","items",e.namespace[1],"setCameraX"],[parseFloat(e.new_value)]):"Camera Y position"===e.name?n(["_layers","items",e.namespace[1],"setCameraY"],[parseFloat(e.new_value)]):"Time scale"===e.name&&n(["_layers","items",e.namespace[1],"setTimeScale"],[parseFloat(e.new_value)]))}return!0}(t,e.props)},groupArraysAfterLength:50,theme:"monokai"}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Timers:"})}),(0,f.jsx)(Rm,{timers:n._timeManager._timers}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Create a new instance on the scene (will be at position 0;0):"})}),n._objects&&n._objects.items&&(0,f.jsx)(_.ad,{noFloatingLabelText:!0,renderTextField:function(){return(0,f.jsx)(dr.ZP,{hintText:{id:"Enter the name of the object"},value:e.state.newObjectName,onChange:function(t){e.setState({newObjectName:t})},dataSource:Object.keys(n._objects.items).map((function(e){return{text:e,value:e}})),openOnFocus:!0,fullWidth:!0})},renderButton:function(t){return(0,f.jsx)(G.Z,{style:t,label:(0,f.jsx)(w.Trans,{id:"Create"}),primary:!0,onClick:function(){r(["createObject"],[e.state.newObjectName])}})}})]}):null}}]),n}(c.Component),Um=function(e){return[{label:"Global variables",key:"_variables",renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,f.jsx)(Om,{variablesContainer:e,onCall:n,onEdit:r})}},{label:"Scenes",key:["_sceneStack","_stack"],renderInspector:function(){return null},initiallyOpen:!0,getSubInspectors:function(e){return e?e.map((function(e,t){return{label:e._name,key:t,renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,f.jsx)(Bm,{runtimeScene:e,onCall:n,onEdit:r})},initiallyOpen:!0,getSubInspectors:function(e){return[{label:"Scene variables",key:"_variables",renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,f.jsx)(Om,{variablesContainer:e,onCall:n,onEdit:r})}},{label:"Instances",key:"_instances",renderInspector:function(){return null},initiallyOpen:!0,getSubInspectors:function(e){return e&&e.items?Object.keys(e.items).map((function(t){return e.items[t]&&"undefined"!==typeof e.items[t].length?{label:"".concat(t," (").concat(e.items[t].length,")"),key:["items",t],renderInspector:function(){return null},getSubInspectors:function(e){return e?e.filter((function(e){return!!e})).map((function(e,t){return{label:"#".concat(e.id),key:t,renderInspector:function(e,t){var n=t.onCall,r=t.onEdit;return(0,f.jsx)(Dm,{runtimeObject:e,onCall:n,onEdit:r})}}})):[]}}:null})):[]}}]}}})):[]}}]},Vm=function(e){var t=e.gameData,n=e.onEdit;return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"You are in raw mode. You can edit the fields, but be aware that this can lead to unexpected results or even crash the debugged game!"})}),(0,f.jsx)(Im(),{collapsed:1,name:!1,src:t,onEdit:function(e){return n(e.namespace.concat(e.name),e.new_value)},groupArraysAfterLength:50,theme:"monokai"})]})},Hm=n(55661),zm=n(90953),Wm={indent:{display:"flex",alignItems:"center"}},Gm=function(e){var t=c.useState({}),n=(0,s.Z)(t,2),i=n[0],a=n[1],o=function(e){return i[e]},u=function(e){var t=e.index;return t<0?"tableHeaderRow":t%2===0?"tableEvenRow":"tableOddRow"},d=function(e){var t=e.rowData;return(0,f.jsxs)("div",{style:Wm.indent,children:[(0,f.jsx)("div",{style:{width:8*t.depth}}),t.hasSubsections?(0,f.jsx)($.Z,{onClick:function(){return function(e){a((0,l.Z)((0,l.Z)({},i),{},(0,Qt.Z)({},e,!i[e])))}(t.path)},children:t.isCollapsed?(0,f.jsx)(ot.Z,{}):(0,f.jsx)(st.Z,{})}):(0,f.jsx)("div",{style:{width:24}}),(0,f.jsx)("span",{children:t.name})]})},p=e.profilerMeasures;if(!p)return null;var h=function t(n,i,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=e.profilerMeasures,u=i&&a.time&&0!==i.time?a.time/i.time*100:100,d=c&&a.time&&0!==c.time?a.time/c.time*100:100,p=o(l);return[{name:n,time:a.time?"".concat(a.time.toFixed(2),"ms"):"?",parentPercent:"".concat(u.toFixed(2),"%"),totalPercent:"".concat(d.toFixed(2),"%"),depth:s,hasSubsections:!!Object.keys(a.subsections).length,path:l,isCollapsed:p}].concat((0,r.Z)(p?[]:Pc()(a.subsections,(function(e,n){return t(n,a,e,s+1,"".concat(l,">").concat(s,".").concat(n))}))))}("All",null,p);return(0,f.jsx)(Br.qj,{children:function(e){var t=e.height,n=e.width;return(0,f.jsxs)(Br.iA,{headerHeight:30,height:t,className:"gd-table",headerClassName:"tableHeaderColumn",rowCount:h.length,rowGetter:function(e){var t=e.index;return h[t]},rowHeight:35,onRowClick:function(){},rowClassName:u,width:n,children:[(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"Section name"}),dataKey:"name",width:.4*n,className:"tableColumn",cellRenderer:d}),(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"Time (ms)"}),dataKey:"time",width:.2*n,className:"tableColumn"}),(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"% of parent"}),dataKey:"parentPercent",width:.2*n,className:"tableColumn"}),(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"% of total"}),dataKey:"totalPercent",width:.2*n,className:"tableColumn"})]})}})},Ym=n(64480),qm={tableContainer:{flex:1}},Jm=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onStart,n=e.onStop,r=e.profilerOutput,i=e.profilingInProgress;return(0,f.jsxs)(Ki.Z,{children:[(0,f.jsxs)(M.x1,{alignItems:"center",justifyContent:"center",children:[!i&&r&&(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Last run collected on {0} frames.",values:{0:r.stats.framesCount}})}),!i&&r&&(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Restart"}),onClick:t}),!i&&!r&&(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Start profiling"}),onClick:t}),i&&(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Stop profiling"}),onClick:n})]}),i&&(0,f.jsx)(M.x1,{alignItems:"center",children:(0,f.jsx)(Ym.Z,{})}),(0,f.jsxs)("div",{style:qm.tableContainer,children:[r&&(0,f.jsx)(Gm,{profilerMeasures:r.framesAverageMeasures}),!r&&(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Start profiling and then stop it after a few seconds to see the results."})})]})]})}}]),n}(c.Component),Xm=n(25588),Km=n(47956),Qm=n(16590),$m=n(9311),ex=n(57588),tx=n(85477),nx=n(75268),rx=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33337 9.83329C3.33337 9.55715 3.55723 9.33329 3.83337 9.33329H5.50004C6.51256 9.33329 7.33337 10.1541 7.33337 11.1666V12.8333C7.33337 13.1094 7.10952 13.3333 6.83337 13.3333C6.55723 13.3333 6.33337 13.1094 6.33337 12.8333V11.1666C6.33337 10.7064 5.96028 10.3333 5.50004 10.3333H3.83337C3.55723 10.3333 3.33337 10.1094 3.33337 9.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8334 10.3333C11.3731 10.3333 11 10.7064 11 11.1666V12.8333C11 13.1094 10.7762 13.3333 10.5 13.3333C10.2239 13.3333 10 13.1094 10 12.8333V11.1666C10 10.1541 10.8208 9.33329 11.8334 9.33329H13.5C13.7762 9.33329 14 9.55715 14 9.83329C14 10.1094 13.7762 10.3333 13.5 10.3333H11.8334Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 2.66663C10.7762 2.66663 11 2.89048 11 3.16663V4.83329C11 5.29354 11.3731 5.66663 11.8334 5.66663H13.5C13.7762 5.66663 14 5.89048 14 6.16663C14 6.44277 13.7762 6.66663 13.5 6.66663H11.8334C10.8208 6.66663 10 5.84581 10 4.83329V3.16663C10 2.89048 10.2239 2.66663 10.5 2.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.83337 2.66663C7.10952 2.66663 7.33337 2.89048 7.33337 3.16663V4.83329C7.33337 5.84582 6.51256 6.66663 5.50004 6.66663H3.83337C3.55723 6.66663 3.33337 6.44277 3.33337 6.16663C3.33337 5.89048 3.55723 5.66663 3.83337 5.66663H5.50004C5.96028 5.66663 6.33337 5.29353 6.33337 4.83329V3.16663C6.33337 2.89048 6.55723 2.66663 6.83337 2.66663Z",fill:"currentColor"})]}))})),ix=function(){function e(){(0,ze.Z)(this,e),this.logs=[],this.groups=new Set,this._onNewLog=new Set,this._onNewGroup=new Set,this._pendingLogs=[],this._pendingCommit=!1}return(0,We.Z)(e,[{key:"_commitLogs",value:function(){var e;(e=this.logs).unshift.apply(e,(0,r.Z)(this._pendingLogs)),this._pendingLogs.length=0,this._pendingCommit=!1,this._onNewLog.forEach((function(e){return e()}))}},{key:"addLog",value:function(e){this._pendingLogs.unshift(e),this.groups.has(e.group)||(this.groups.add(e.group),this._onNewGroup.forEach((function(e){return e()}))),this._pendingCommit||(setTimeout(this._commitLogs.bind(this),200),this._pendingCommit=!0)}},{key:"on",value:function(e,t){"group"===e&&this._onNewGroup.add(t),"log"===e&&this._onNewLog.add(t)}},{key:"off",value:function(e,t){"group"===e&&this._onNewGroup.delete(t),"log"===e&&this._onNewLog.delete(t)}}]),e}(),ax={userSelect:"text",cursor:"text",wordBreak:"break-word"},ox={list:{overflowX:"hidden",overflowY:"scroll"},tag:{marginRight:2},consoleTextArea:(0,l.Z)((0,l.Z)({},ax),{},{width:"100%",backgroundColor:"#292929",borderRadius:"4px",border:"1px solid slategray",color:"white",fontFamily:"'Courier New', monospace",fontSize:11,padding:3})},sx=function(e){var t=e.icon,n=e.label;return(0,f.jsx)(Q.Z,{icon:t,style:ox.tag,size:"small",label:(0,f.jsx)("span",{style:ax,children:n})})},lx={info:(0,f.jsx)(Km.Z,{color:"primary",fontSize:"small"}),warning:(0,f.jsx)(te.Z,{color:"secondary",fontSize:"small"}),error:(0,f.jsx)(Qm.Z,{color:"error",fontSize:"small"})},cx=function(e){var t=e.logsManager,n=(0,gt.Z)(),r=t.logs,a=t.groups;c.useEffect((function(){var e=function(){n()};return t.on("log",e),function(){t.off("log",e)}}),[n,t]);var o=c.useRef(0),u=c.useMemo((function(){return new Br.t1({defaultHeight:45,minHeight:25,fixedWidth:!0,keyMapper:function(e){return r.length-e}})}),[r]),d=c.useState(!1),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useState(!0),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useState(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=c.useRef(new Set).current;c.useEffect((function(){if(y){var e=function(){return n()};return t.on("group",e),function(){t.off("group",e)}}}),[y,n,t]);var S=r.filter((function(e){var t=e.internal;return!(h&&t)})).filter((function(e){var t=e.group;return!k.has(t)}));return(0,f.jsxs)(M.sg,{noMargin:!0,noOverflowParent:!0,expand:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,children:(0,f.jsx)(Br.qj,{children:function(e){var t=e.width,n=e.height;return t&&n?(o.current!==t&&(u.clearAll(),o.current=t),(0,f.jsx)(Br.aV,{deferredMeasurementCache:u,height:n,width:t,style:ox.list,rowCount:S.length,rowHeight:u.rowHeight,rowRenderer:function(e){var t=e.index,n=e.key,r=e.parent,i=e.style;return(0,f.jsx)(Br.Z8,{cache:u,columnIndex:0,parent:r,rowIndex:t,children:function(e){var r=e.registerChild;return(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},i),{},{padding:2,display:"flex",alignItems:"flex-start"}),ref:r,children:[(0,f.jsx)(M.sg,{noMargin:!0,children:lx[S[t].type]||lx.info}),(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)("div",{style:ox.consoleTextArea,children:S[t].message})}),v&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.x1,{noMargin:!0,children:[S[t].group?(0,f.jsx)(sx,{icon:(0,f.jsx)(wf.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Group: {0}",values:{0:S[t].group}})}):null,(0,f.jsx)(sx,{icon:(0,f.jsx)(Xm.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Timestamp: {0}",values:{0:Math.round(1e3*S[t].timestamp)/1e6+"s"}})})]})]})]})]},n)}},n)}})):null}})}),(0,f.jsx)(Wh.Z,{children:(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,f.jsx)(Vn.Z,{label:v?(0,f.jsx)(w.Trans,{id:"Hide details"}):(0,f.jsx)(w.Trans,{id:"Show details"}),checkedIcon:(0,f.jsx)(rx,{}),uncheckedIcon:(0,f.jsx)(nx.Z,{}),checked:v,onCheck:function(e,t){return b(t),void u.clearAll()}}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Show internal"}),checkedIcon:(0,f.jsx)(ex.Z,{}),uncheckedIcon:(0,f.jsx)(tx.Z,{}),checked:!h,onCheck:function(e,t){return g(!t)}}),(0,f.jsx)($.Z,{tooltip:{id:"Filter the logs by group"},onClick:function(){return Z(!0)},edge:"start",size:"small",children:(0,f.jsx)($m.Z,{})})]})}),y&&(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Select log groups to display"}),maxWidth:"sm",open:!0,actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:function(){return Z(!1)}},"close")],onRequestClose:function(){return Z(!1)},onApply:function(){return Z(!1)},children:(0,f.jsx)(M.sg,{children:function(){var e,t=[],r=(0,i.Z)(a.values());try{var o=function(){var r=e.value;t.push((0,f.jsx)(M.x1,{children:(0,f.jsx)(Vn.Z,{label:r,checked:!k.has(r),onCheck:function(e,t){t?k.delete(r):k.add(r),n()}})},r))};for(r.s();!(e=r.n()).done;)o()}catch(s){r.e(s)}finally{r.f()}return t}()})})]})},ux={direction:"column",first:{direction:"row",first:"inspectors",second:"selected-inspector",splitPercentage:25},second:{direction:"row",first:"profiler",second:"console",splitPercentage:25},splitPercentage:65},dx=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={selectedInspector:null,selectedInspectorFullPath:[],rawMode:!1},e._editors=null,e.isProfilerShown=function(){return!!e._editors&&e._editors.getOpenedEditorNames().includes("profiler")},e.isConsoleShown=function(){return!!e._editors&&e._editors.getOpenedEditorNames().includes("console")},e.toggleProfiler=function(){e._editors&&e._editors.toggleEditor("profiler","bottom")},e.toggleConsole=function(){e._editors&&e._editors.toggleEditor("console","bottom")},e}return(0,We.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.gameData,r=t.onRefresh,i=t.onCall,a=t.onEdit,o=t.onStartProfiler,s=t.onStopProfiler,l=t.profilerOutput,c=t.profilingInProgress,u=t.logsManager,d=t.onOpenedEditorsChanged,p=this.state,h=p.selectedInspector,g=p.selectedInspectorFullPath,m=p.rawMode,x={inspectors:{type:"primary",title:{id:"Inspectors"},toolbarControls:[],renderEditor:function(){return(0,f.jsx)(Ki.Z,{children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Refresh"}),onClick:r,primary:!0})}),(0,f.jsx)(Sm,{gameData:n,getInspectorDescriptions:Um,onChooseInspector:function(t,n){return e.setState({selectedInspector:t,selectedInspectorFullPath:n})}})]})})}},"selected-inspector":{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,f.jsxs)(Ki.Z,{children:[(0,f.jsx)(ft.Z,{children:(0,f.jsx)(M.sg,{children:h?m?(0,f.jsx)(Vm,{gameData:wm()(n,g,null),onEdit:function(e,t){return a(g.concat(e),t)}}):h.renderInspector(wm()(n,g,null),{onCall:function(e,t){return i(g.concat(e),t)},onEdit:function(e,t){return a(g.concat(e),t)}})||(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"No inspector, choose another element in the list or toggle the raw data view."})}):(0,f.jsx)(Ae.Z,{children:n?(0,f.jsx)(w.Trans,{id:"Choose an element to inspect in the list"}):(0,f.jsx)(w.Trans,{id:"Pause the game (from the toolbar) or hit refresh (on the left) to inspect the game"})})})}),(0,f.jsx)(Wh.Z,{children:(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,f.jsx)(An.Z,{helpPagePath:"/interface/debugger"}),(0,f.jsx)("div",{children:(0,f.jsx)(Vn.Z,{checkedIcon:(0,f.jsx)(Hm.Z,{}),uncheckedIcon:(0,f.jsx)(zm.Z,{}),checked:m,onCheck:function(t,n){return e.setState({rawMode:n})}})})]})})]})}},profiler:{type:"secondary",title:{id:"Profiler"},renderEditor:function(){return(0,f.jsx)(Jm,{onStart:o,onStop:s,profilerOutput:l,profilingInProgress:c})}},console:{type:"secondary",title:{id:"Console"},renderEditor:function(){return(0,f.jsx)(Ki.Z,{children:(0,f.jsx)(cx,{logsManager:u||[]})})}}};return(0,f.jsx)(D.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode;return(0,f.jsx)(Zm.Z,{ref:function(t){return e._editors=t},editors:x,centralNodeId:"selected-inspector",initialNodes:n("debugger")||ux,onPersistNodes:function(e){return r("debugger",e)},onOpenedEditorsChanged:d})}})}}]),n}(c.Component),px=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e=this,t=Object.keys(this.props.debuggerStatus).filter((function(t){return!e.props.debuggerStatus[t].isInGameEdition})),n=!!t.length;return(0,f.jsx)(w.I18n,{children:function(r){var i=r.i18n;return(0,f.jsxs)(Hn.Z,{fullWidth:!0,value:n?e.props.selectedId:0,onChange:function(t,n,r){return e.props.onChooseDebugger(r)},disabled:!n,children:[t.map((function(t){var n=e.props.debuggerStatus[t].isPaused?{id:"Paused"}:{id:"Playing"};return(0,f.jsx)(P.Z,{value:t,label:{id:'Game preview "{id}" ({0})',values:{0:i._(n),id:t}}},t)})),!n&&(0,f.jsx)(P.Z,{value:0,label:{id:"No preview running. Run a preview and you will be able to inspect it with the debugger"}})]})}})}}]),n}(c.Component),fx=n(41332),hx=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={debuggerServerState:e.props.previewDebuggerServer.getServerState(),debuggerServerError:null,debuggerIds:e.props.previewDebuggerServer.getExistingDebuggerIds(),unregisterDebuggerServerCallbacks:null,debuggerGameData:{},profilerOutputs:{},profilingInProgress:{},debuggerStatus:{},selectedId:"0",logs:{}},e._debuggerContents={},e._debuggerLogs=new Map,e.updateToolbar=function(){var t=e.state,n=t.selectedId,r=t.debuggerStatus,i=e._debuggerContents[e.state.selectedId],a=!!r[n]&&r[n].isPaused;e.props.setToolbar((0,f.jsx)(ym,{onPlay:function(){return e._play(e.state.selectedId)},onPause:function(){return e._pause(e.state.selectedId)},canPlay:e._hasSelectedDebugger()&&a,canPause:e._hasSelectedDebugger()&&!a,canOpenProfiler:e._hasSelectedDebugger(),isProfilerShown:!!i&&i.isProfilerShown(),onToggleProfiler:function(){e._debuggerContents[e.state.selectedId]&&e._debuggerContents[e.state.selectedId].toggleProfiler()},canOpenConsole:e._hasSelectedDebugger(),isConsoleShown:!!i&&i.isConsoleShown(),onToggleConsole:function(){e._debuggerContents[e.state.selectedId]&&e._debuggerContents[e.state.selectedId].toggleConsole()}}))},e._registerServerCallbacks=function(){var t=e.props.previewDebuggerServer,n=e.state.unregisterDebuggerServerCallbacks;if(!n||"started"!==t.getServerState()){n&&n();var r=t.registerCallbacks({onErrorReceived:function(t){e.setState({debuggerServerError:t},(function(){return e.updateToolbar()}))},onConnectionClosed:function(t){var n=t.id,r=t.debuggerIds;e._debuggerLogs.delete(n),e.setState((function(e){var t=e.selectedId,i=e.debuggerGameData,a=e.profilerOutputs,o=e.profilingInProgress,s=e.debuggerStatus;return i[n]&&delete i[n],a[n]&&delete a[n],o[n]&&delete o[n],s[n]&&delete s[n],{debuggerIds:r,selectedId:t!==n?t:r.length?r[r.length-1]:t,debuggerGameData:i,profilerOutputs:a,profilingInProgress:o,debuggerStatus:s}}),(function(){return e.updateToolbar()}))},onConnectionOpened:function(t){var n=t.id,r=t.debuggerIds;e.setState({debuggerIds:r,selectedId:n},(function(){return e.updateToolbar()}))},onConnectionErrored:function(t){var n=t.id,r=t.errorMessage;e._getLogsManager(n).addLog({type:"error",timestamp:performance.now(),group:"Debugger connection",message:"The debugger connection errored: "+r})},onServerStateChanged:function(){e.setState({debuggerServerState:t.getServerState()},(function(){return e.updateToolbar()}))},onHandleParsedMessage:function(t){var n=t.id,r=t.parsedMessage;e._handleMessage(n,r)}});e.setState({unregisterDebuggerServerCallbacks:r}),t.getExistingDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"getStatus"})}))}},e._handleMessage=function(t,n){if("dump"===n.command)e.setState({debuggerGameData:(0,l.Z)((0,l.Z)({},e.state.debuggerGameData),{},(0,Qt.Z)({},t,n.payload))});else if("status"===n.command)e.setState((function(e){return{debuggerStatus:(0,l.Z)((0,l.Z)({},e.debuggerStatus),{},(0,Qt.Z)({},t,n.payload))}}),(function(){return e.updateToolbar()}));else if("profiler.output"===n.command)e.setState({profilerOutputs:(0,l.Z)((0,l.Z)({},e.state.profilerOutputs),{},(0,Qt.Z)({},t,n.payload))});else if("profiler.started"===n.command)e.setState((function(e){return{profilingInProgress:(0,l.Z)((0,l.Z)({},e.profilingInProgress),{},(0,Qt.Z)({},t,!0))}}));else if("profiler.stopped"===n.command)e.setState((function(e){return{profilingInProgress:(0,l.Z)((0,l.Z)({},e.profilingInProgress),{},(0,Qt.Z)({},t,!1))}}));else if("hotReloader.logs"===n.command);else if("updateInstances"===n.command);else if("console.log"===n.command){if(function(e){var t=e.group,n=e.message;return"JavaScript"===t&&(n.includes("Electron Security Warning")||n.includes("Warning: This is a browser-targeted Firebase bundle"))}(n.payload))return;e._getLogsManager(t).addLog(n.payload)}else console.warn("Unknown command received from debugger client:",n.command)},e._play=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"play"})},e._pause=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"pause"})},e._refresh=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"refresh"})},e._edit=function(t,n,r){return e.props.previewDebuggerServer.sendMessage(t,{command:"set",path:n,newValue:r}),setTimeout((function(){return e._refresh(t)}),100),!0},e._call=function(t,n,r){return e.props.previewDebuggerServer.sendMessage(t,{command:"call",path:n,args:r}),setTimeout((function(){return e._refresh(t)}),100),!0},e._startProfiler=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"profiler.start"})},e._stopProfiler=function(t){e.props.previewDebuggerServer.sendMessage(t,{command:"profiler.stop"})},e._hasSelectedDebugger=function(){var t=e.state,n=t.selectedId;if(-1===t.debuggerIds.indexOf(n))return!1;var r=e.state.debuggerStatus[n];return!r||!r.isInGameEdition},e}return(0,We.Z)(n,[{key:"componentDidMount",value:function(){this._registerServerCallbacks()}},{key:"componentWillUnmount",value:function(){this.state.unregisterDebuggerServerCallbacks&&this.state.unregisterDebuggerServerCallbacks()}},{key:"_getLogsManager",value:function(e){var t=this._debuggerLogs.get(e);return t||(t=new ix,this._debuggerLogs.set(e,t)),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.debuggerServerError,r=t.debuggerServerState,i=t.selectedId,a=t.debuggerStatus,o=t.debuggerGameData,s=t.profilerOutputs,l=t.profilingInProgress;return(0,f.jsxs)(Ki.Z,{children:["stopped"===r&&!n&&(0,f.jsxs)(fx.Z,{children:[(0,f.jsx)(Oe.Z,{}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Debugger is starting..."})})]}),"stopped"===r&&n&&(0,f.jsx)(fx.Z,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Unable to start the debugger server! Make sure that you are authorized to run servers on this computer."})})}),"started"===r&&(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsx)(px,{selectedId:i,debuggerStatus:a,onChooseDebugger:function(t){return e.setState({selectedId:t},(function(){return e.updateToolbar()}))}}),this._hasSelectedDebugger()&&(0,f.jsx)(dx,{ref:function(t){return e._debuggerContents[i]=t},gameData:o[i],onPlay:function(){return e._play(i)},onPause:function(){return e._pause(i)},onRefresh:function(){return e._refresh(i)},onEdit:function(t,n){return e._edit(i,t,n)},onCall:function(t,n){return e._call(i,t,n)},onStartProfiler:function(){return e._startProfiler(i)},onStopProfiler:function(){return e._stopProfiler(i)},profilerOutput:s[i],profilingInProgress:l[i],logsManager:this._getLogsManager(i),onOpenedEditorsChanged:this.updateToolbar}),!this._hasSelectedDebugger()&&(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Run a preview and you will be able to inspect it with the debugger."})})]})]})}}]),n}(c.Component),gx=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={subscriptionChecked:!1},e}return(0,We.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"onEventsBasedObjectChildrenEdited",value:function(){}},{key:"onSceneObjectEdited",value:function(e,t){}},{key:"onSceneObjectsDeleted",value:function(e){}},{key:"onSceneEventsModifiedOutsideEditor",value:function(e){}},{key:"notifyChangesToInGameEditor",value:function(e){(0,mm.VL)(e)}},{key:"switchInGameEditorIfNoHotReloadIsNeeded",value:function(){}},{key:"onInstancesModifiedOutsideEditor",value:function(e){}},{key:"onObjectsModifiedOutsideEditor",value:function(e){}},{key:"onObjectGroupsModifiedOutsideEditor",value:function(e){}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this._checkUserHasSubscription()}},{key:"componentDidMount",value:function(){this._checkUserHasSubscription()}},{key:"_checkUserHasSubscription",value:function(){this._subscriptionChecker&&this.props.isActive&&!this.state.subscriptionChecked&&(this._subscriptionChecker.checkUserHasSubscription(),this.setState({subscriptionChecked:!0}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.previewDebuggerServer;return n&&r?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(hx,{project:n,setToolbar:this.props.setToolbar,previewDebuggerServer:r,ref:function(t){return e.editor=t}}),(0,f.jsx)(qn.Z,{ref:function(t){return e._subscriptionChecker=t},id:"Debugger",title:(0,f.jsx)(w.Trans,{id:"Debugger"}),placementId:"debugger",mode:"try"})]}):null}}]),n}(c.Component),mx=n(65260),xx="scene-groups",vx="global-groups",bx="global-empty-placeholder",Cx={listContainer:{flex:1,display:"flex",flexDirection:"column"}},jx=function(e){return{label:e._({id:"There is no global group yet."}),id:bx,isPlaceholder:!0}},yx=function(e){return{label:e._({id:"Start by adding a new group."}),id:"scene-empty-placeholder",isPlaceholder:!0}},Zx=function(e){return e.isRoot||e.isPlaceholder?e.label:e.group.getName()},kx=function(e){return e.isRoot?e.children:null},wx=function(e){return e.isRoot||e.isPlaceholder?e.id:"group-item-".concat(e.group.getName())},Tx=c.forwardRef((function(e,t){var n=e.globalObjectGroups,r=e.projectScopedContainersAccessor,i=e.objectGroups,l=e.onCreateGroup,u=e.onDeleteGroup,d=e.onGroupRemoved,p=e.getValidatedObjectOrGroupName,h=e.onRenameGroup,g=e.onGroupRenamed,m=e.beforeSetAsGlobalGroup,x=e.unsavedChanges,v=e.onEditGroup,b=e.canSetAsGlobalGroup,C=e.isListLocked,j=c.useState(null),y=(0,s.Z)(j,2),Z=y[0],k=y[1],T=c.useState(""),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=c.useRef(null),L=(0,gt.Z)(),A=(0,Ye.Z)(),O=A.showDeleteConfirmation,R=A.showConfirmation,F=A.showAlert;c.useImperativeHandle(t,(function(){return{forceUpdate:L,scrollToObjectGroup:function(e){B();var t={group:e,global:!!n&&n.has(e.getName())};E.current&&E.current.openItems([xx]),setTimeout((function(){N(t)}),100)}}}));var D=c.useRef(new ht.ZP({shortcutCallbacks:{}})),N=c.useCallback((function(e){E.current&&E.current.scrollToItem(e)}),[]),_=c.useCallback((function(e){E.current&&E.current.renameItem(e)}),[]),B=c.useCallback((function(){x&&x.triggerUnsavedChanges(),L()}),[x,L]),U=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.group,o=t.global,e.next=3,O({title:{id:"Remove group"},message:{id:"Are you sure you want to remove this group? This can't be undone."}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:u(t,(function(e){e&&(o?n&&n.remove(r.getName()):i.remove(r.getName()),B(),d&&d())}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,i,u,d,B,O]),V=c.useCallback((function(e){var t=e.group,r=e.global,a=(0,xt.Z)(t.getName(),(function(e){return i.has(e)||!!n&&n.has(e)}),""),o=r?n:i;if(o){var s=(0,Ct.XH)(t),l=o.insertNew(a,o.getPosition(t.getName())+1);(0,Ct.qx)(l,s,"unserializeFrom"),l.setName(a),k({group:l,global:r}),_({group:l,global:r}),B()}}),[n,i,B,_]),H=c.useCallback((function(e,t){var n=e.group,r=e.global;if(n.getName()!==t){var i=p(t,r);h(e,i,(function(e){e&&(n.setName(i),B(),g&&g())}))}}),[p,B,h,g]),z=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(o=t.group,s=o.getName(),!n.has(s)){e.next=8;break}return e.next=7,F({title:{id:"Set as global group"},message:{id:"A global object with this name already exists. Please change the group name before setting it as a global group"}});case 7:return e.abrupt("return");case 8:if(!m||m(s)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,R({title:{id:"Set as global group"},message:{id:"Global elements help manage objects across multiple scenes and are recommended for frequently used objects. This action cannot be undone. Do you want to set this as global group?"},confirmButtonLabel:{id:"Set as global"}});case 12:if(e.sent){e.next=15;break}return e.abrupt("return");case 15:E.current&&E.current.openItems([vx]),n.insert(o,"number"===typeof r?r:n.count()),i.remove(s),B(),setTimeout((function(){N(t)}),100);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,i,B,m,N,R,F]),W=c.useCallback((function(e){return!e.isRoot&&(!!Z&&(e.isPlaceholder?e.id===bx&&!Z.global:!(Z.global!==e.global&&(Z.global||!e.global))))}),[Z]),G=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isRoot){e.next=2;break}return e.abrupt("return");case 2:if(Z){e.next=4;break}return e.abrupt("return");case 4:if(!t.isPlaceholder){e.next=9;break}if(t.id!==bx||Z.global){e.next=8;break}return e.next=8,z(Z,0);case 8:return e.abrupt("return");case 9:if(!(Z.global===t.global)){e.next=18;break}if(o=Z.global?n:i){e.next=14;break}return e.abrupt("return");case 14:s=o.getPosition(Z.group.getName()),l=o.getPosition(t.group.getName()),e.next=28;break;case 18:if(Z.global||!t.global){e.next=27;break}if(n){e.next=21;break}return e.abrupt("return");case 21:return c=n.getPosition(t.group.getName()),e.next=24,z(Z,c);case 24:case 27:return e.abrupt("return");case 28:if(l>s&&(l-=1),"after"===r&&(l+=1),o){e.next=32;break}return e.abrupt("return");case 32:o.move(s,l),B(),E.current&&E.current.forceUpdateList();case 35:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,i,B,Z,z]),Y=c.useCallback((function(e){e.isRoot||e.isPlaceholder||v(e.group)}),[v]),q=c.useCallback((function(e){return function(t,r){return t.isRoot||t.isPlaceholder?[]:[{label:e._({id:"Duplicate"}),click:function(){return V(t)},accelerator:"CmdOrCtrl+D",enabled:!C},{type:"separator"},{label:e._({id:"Edit group"}),click:function(){return Y(t)}},{type:"separator"},{label:e._({id:"Rename"}),click:function(){return _(t)},accelerator:"F2",enabled:!C},n?{label:e._({id:"Set as global group"}),enabled:(i=t,!i.global&&!C),click:function(){return z(t)},visible:!1!==b}:null,{label:e._({id:"Delete"}),click:function(){return U(t)},accelerator:"Backspace",enabled:!C},{type:"separator"},{label:e._({id:"Add a new group..."}),click:l,enabled:!C}].filter(Boolean);var i}}),[C,n,b,l,V,Y,_,z,U]),J=c.useCallback((function(e){return function(t){return t.id===xx?{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add a new group"}),click:l,id:"add-new-group-button",enabled:!C}:null}}),[C,l]),X=c.useMemo((function(){return(0,mx.En)(r.getScope())}),[r]),K=c.useCallback((function(e){var t=(0,tc.Wr)(i).map((function(e){return{group:e,global:!1}})),r=n?(0,tc.Wr)(n).map((function(e){return{group:e,global:!0}})):[];return[n&&{label:e._(X.higherScopeGroupsTitle),children:r.length>0?r:[jx(e)],isRoot:!0,id:vx},{label:e._(X.localScopeGroupsTitle),children:t.length>0?t:[yx(e)],isRoot:!0,id:xx}].filter(Boolean)}),[n,i,X]);c.useEffect((function(){D.current&&(D.current.setShortcutCallback("onDelete",(function(){Z&&!C&&U(Z)})),D.current.setShortcutCallback("onDuplicate",(function(){Z&&!C&&V(Z)})),D.current.setShortcutCallback("onRename",(function(){Z&&!C&&_(Z)})))}),[Z,U,V,_,C]);var Q=i.ptr+";"+(n?n.ptr:"");return(0,f.jsxs)(Ki.Z,{children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(Ge.Z,{value:P,onRequestSearch:function(){},onChange:I,placeholder:{id:"Search object groups"}})})}),(0,f.jsx)("div",{style:Cx.listContainer,onKeyDown:D.current.onKeyDown,onKeyUp:D.current.onKeyUp,id:"objects-groups-list",children:(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n,n=K(t),r=n[0],i=[r.isRoot&&1===r.children.length&&r.children[0].isPlaceholder?null:vx,xx].filter(Boolean);return(0,f.jsx)("div",{style:{flex:1},children:(0,f.jsx)(Br.qj,{style:{width:"100%"},disableWidth:!0,children:function(e){var r=e.height;return(0,f.jsx)(Qi.Z,{ref:E,items:n,height:r,searchText:P,getItemName:Zx,getItemChildren:kx,multiSelect:!1,getItemId:wx,onEditItem:Y,selectedItems:Z?[Z]:[],onSelectItems:function(e){e||k(null);var t=e[0];t.isRoot||t.isPlaceholder||k(t||null)},onRenameItem:H,buildMenuTemplate:q(t),onMoveSelectionToItem:G,canMoveSelectionToItem:W,reactDndType:"GD_GROUP_WITH_CONTEXT",initiallyOpenedNodeIds:i,shouldSelectUponContextMenuOpening:!0,getItemRightButton:J(t)},Q)}})})}})})]})})),Sx=function(e,t){return e.globalObjectGroups===t.globalObjectGroups&&e.objectGroups===t.objectGroups},Px=c.memo(Tx,Sx),Ix=c.forwardRef((function(e,t){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Object groups list"}),scope:"scene-editor-object-groups-list",children:(0,f.jsx)(Px,(0,l.Z)({ref:t},e))})})),Ex={objectSelector:{position:"sticky",bottom:0}},Mx=function(e){var t=e.project,n=e.projectScopedContainersAccessor,r=e.globalObjectsContainer,i=e.objectsContainer,a=e.groupObjectNames,o=e.onObjectAdded,l=e.onObjectRemoved,u=e.isObjectListLocked,d=c.useState(""),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useCallback((function(e){o(e),g("")}),[o]);return(0,f.jsxs)(_.ak,{noMargin:!0,children:[function(){var e=void 0;if(0===a.length)return null;a.forEach((function(t){var r=n.get().getObjectsContainersList().getTypeOfObject(t);e=void 0===e||r===e?r:""}));var t=""===e?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(w.Trans,{id:"This group contains objects of different kinds. You'll only be able to use actions and conditions common to all objects with this group."})," ",(0,f.jsx)(w.Trans,{id:"Variables declared in all objects of the group will be visible in event expressions."})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(w.Trans,{id:"This group contains objects of the same kind ({type}). You can use actions and conditions related to this kind of objects in events with this group.",values:{type:e}})," ",(0,f.jsx)(w.Trans,{id:"Variables declared in all objects of the group will be visible in event expressions."})]});return(0,f.jsx)(je.Z,{kind:"info",children:t})}(),(0,f.jsx)(Te.aV,{children:a.map((function(e){var n=(0,iu.Z)(r,i,e),a=t&&n?(0,f.jsx)(nc.Z,{iconSize:24,src:rc.Z.getThumbnail(t,n.getConfiguration())}):null;return u?(0,f.jsx)(Te.HC,{primaryText:e,leftIcon:a},e):(0,f.jsx)(Te.HC,{primaryText:e,displayRemoveButton:!0,onRemove:function(){return l(e)},leftIcon:a},e)}))}),(0,f.jsx)(H.Z,{style:Ex.objectSelector,background:"medium",children:(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(sc,{project:t,projectScopedContainersAccessor:n,value:h,excludedObjectOrGroupNames:a,onChange:g,onChoose:m,openOnFocus:!0,noGroups:!0,hintText:{id:"Choose an object to add to the group"},fullWidth:!0,disabled:u})})})]})},Lx=function(e){var t=e.project,n=e.projectScopedContainersAccessor,i=e.onApply,a=e.onCancel,o=e.globalObjectsContainer,l=e.objectsContainer,u=e.isGroupAlreadyAdded,d=(0,gt.Z)(),p=c.useState(""),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=c.useState(!1),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=c.useState([]),y=(0,s.Z)(j,2),Z=y[0],k=y[1],S=c.useCallback((function(e){k((function(t){return t.filter((function(t){return t!==e}))})),d()}),[d]),P=c.useCallback((function(e){k((function(t){return[].concat((0,r.Z)(t),[e])})),d()}),[d]),I=c.useCallback((function(){i(g,b,Z)}),[Z,g,i,b]);return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Create a new group"}),id:"create-group-dialog",actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:a},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Create"}),primary:!0,onClick:I},"apply")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/objects/object-group"},"help-button")],onRequestClose:a,onApply:I,open:!0,maxWidth:"sm",fixedContent:(0,f.jsxs)(_.ak,{noMargin:!0,children:[!u&&(0,f.jsx)(yn.Z,{fullWidth:!0,id:"group-name",commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Group name"}),floatingLabelFixed:!0,value:g,translatableHintText:{id:"Group name"},onChange:m,autoFocus:"desktop"}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Add any object variable to the group"}),checked:b,onCheck:function(e,t){return C(t)}})]}),children:(0,f.jsx)(Mx,{project:t,projectScopedContainersAccessor:n,globalObjectsContainer:o,objectsContainer:l,groupObjectNames:Z,onObjectAdded:P,onObjectRemoved:S,isObjectListLocked:!1})})},Ax=n.g.gd,Ox=function(e){var t=e.project,n=e.projectScopedContainersAccessor,r=e.group,l=e.onApply,u=e.onCancel,d=e.globalObjectsContainer,p=e.objectsContainer,h=e.initialInstances,g=e.initialTab,m=e.onComputeAllVariableNames,x=e.isVariableListLocked,v=e.isObjectListLocked,b=(0,gt.Z)(),C=Je({serializableObject:r,onCancel:u}),j=C.onCancelChanges,y=C.notifyOfChange,Z=c.useState(g||"objects"),k=(0,s.Z)(Z,2),S=k[0],P=k[1],I=(0,jn.Z)((function(){return Ax.ObjectVariableHelper.mergeVariableContainers(n.get().getObjectsContainersList(),r)})),L=Je({serializableObject:I,onCancel:function(){},resetThenClearPersistentUuid:!0}),A=L.notifyOfChange,O=L.getOriginalContentSerializedElement,R=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var o,s,c,u,f,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(),h){e.next=3;break}return e.abrupt("return");case 3:if(o=O(),s=Ax.WholeProjectRefactorer.computeChangesetForVariablesContainer(o,I),Ax.WholeProjectRefactorer.applyRefactoringForGroupVariablesContainer(t,d||p,p,h,I,r,s,o),c=n._scope.eventsBasedObject){u=(0,i.Z)(r.getAllObjectsNames().toJSArray());try{for(u.s();!(f=u.n()).done;)g=f.value,Ax.ObjectVariableHelper.applyChangesToVariants(c,g,s)}catch(a){u.e(a)}finally{u.f()}}I.clearPersistentUuid();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=c.useCallback((function(e){r.removeObject(e),b(),y()}),[b,r,y]),D=c.useCallback((function(e){r.addObject(e),b(),y()}),[b,r,y]),_=(0,et.Z)("intro-variables").DismissableTutorialMessage;return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Edit {0}",values:{0:r.getName()}}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:j},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Apply"}),primary:!0,onClick:R},"apply")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/objects/object-group"},"help-button")],onRequestClose:j,onApply:R,open:!0,fullHeight:!0,flexBody:!0,fixedContent:(0,f.jsx)(B.m,{value:S,onChange:P,options:[{label:(0,f.jsx)(w.Trans,{id:"Objects"}),value:"objects"},{label:(0,f.jsx)(w.Trans,{id:"Variables"}),value:"variables"}]}),children:["objects"===S&&(v&&0===r.getAllObjectsNames().size()?(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:[(0,f.jsx)(N.Z,{size:"block-title",align:"center",children:(0,f.jsx)(w.Trans,{id:"Empty group"})}),(0,f.jsx)(N.Z,{align:"center",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"This object group is empty and locked."})})]}):(0,f.jsx)(Mx,{project:t,projectScopedContainersAccessor:n,globalObjectsContainer:d,objectsContainer:p,groupObjectNames:r.getAllObjectsNames().toJSArray(),onObjectAdded:D,onObjectRemoved:F,isObjectListLocked:v})),"variables"===S&&(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[I.count()>0&&_&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:_})}),(0,f.jsx)(Ln,{projectScopedContainersAccessor:n,variablesContainer:I,areObjectVariables:!0,emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first object group variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"These variables hold additional information and are available on all objects of the group."}),helpPagePath:"/all-features/variables/object-variables",onComputeAllVariableNames:m,onVariablesUpdated:A,isListLocked:x})]})]},r.ptr)},Rx=n.g.gd,Fx=function(e){var t=e.project,n=e.projectScopedContainersAccessor,r=e.group,a=e.onApply,o=e.onCancel,l=e.onObjectGroupAdded,u=e.globalObjectsContainer,d=e.objectsContainer,p=e.initialInstances,h=e.bypassedObjectGroupsContainer,g=e.initialTab,m=e.onComputeAllVariableNames,x=e.isVariableListLocked,v=e.isObjectListLocked,b=c.useState(r),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=c.useState(g||"objects"),k=(0,s.Z)(Z,2),w=k[0],T=k[1],S=c.useCallback((function(e,t,r){var o;if(j)o=j;else{var s=(0,xt.Z)(e||"Group",(function(e){return n.get().getObjectsContainersList().hasObjectOrGroupNamed(e)})),c=h||d.getObjectGroups();o=c.insertNew(s,c.count()),l(o)}if(0!==r.length){var p,f=(0,i.Z)(r);try{for(f.s();!(p=f.n()).done;){var g=p.value;o.addObject(g)}}catch(m){f.e(m)}finally{f.f()}t&&Rx.ObjectVariableHelper.fillAnyVariableBetweenObjects(u||d,d,o),y(o),T("variables")}else a()}),[h,j,u,d,a,l,n]);return!j||0===j.getAllObjectsNames().size()&&!v?(0,f.jsx)(Lx,{project:t,projectScopedContainersAccessor:n,onApply:S,onCancel:o,globalObjectsContainer:u,objectsContainer:d,isGroupAlreadyAdded:!!j}):(0,f.jsx)(Ox,{project:t,projectScopedContainersAccessor:n,group:j,onApply:a,onCancel:o,globalObjectsContainer:u,objectsContainer:d,initialInstances:p,initialTab:w,onComputeAllVariableNames:m,isVariableListLocked:x,isObjectListLocked:v})},Dx=function(e){var t=e.project,n=e.projectScopedContainersAccessor,r=e.globalObjectsContainer,i=e.objectsContainer,a=e.globalObjectGroups,o=e.objectGroups,l=e.getValidatedObjectOrGroupName,u=e.onDeleteGroup,d=e.onRenameGroup,p=e.onGroupsUpdated,h=e.canSetAsGlobalGroup,g=e.unsavedChanges,m=c.useState(null),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useState(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=c.useRef(null);return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(Ix,{ref:k,globalObjectGroups:a,projectScopedContainersAccessor:n,objectGroups:o,onCreateGroup:function(){return Z(!0)},onEditGroup:b,onDeleteGroup:u,onRenameGroup:d,getValidatedObjectOrGroupName:l,onGroupRemoved:p,onGroupRenamed:p,canSetAsGlobalGroup:h,unsavedChanges:g,isListLocked:!1}),(v||y)&&(0,f.jsx)(Fx,{project:t,projectScopedContainersAccessor:n,group:v,globalObjectsContainer:r,objectsContainer:i,initialInstances:null,bypassedObjectGroupsContainer:o,onCancel:function(){b(null),Z(!1)},onApply:function(){p&&p(),b(null)},onObjectGroupAdded:function(e){k.current&&k.current.scrollToObjectGroup(e)},initialTab:"objects",isVariableListLocked:!1,isObjectListLocked:!1},(r?r.ptr:"")+";"+i.ptr)]})},Nx=n.g.gd,_x=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={currentTab:"config"},e._getValidatedObjectOrGroupName=function(t){var n=e.props.projectScopedContainersAccessor.get().getObjectsContainersList();return(0,xt.Z)(Nx.Project.getSafeName(t),(function(e){return n.hasObjectOrGroupNamed(e)}))},e._onDeleteGroup=function(e,t){t(!0)},e._onRenameGroup=function(t,n,r){var i=t.group,a=e.props,o=a.project,s=a.projectScopedContainersAccessor,l=a.eventsFunction,c=a.objectsContainer;i.getName()!==n&&Nx.WholeProjectRefactorer.objectOrGroupRenamedInEventsFunction(o,s.get(),l,c,i.getName(),n,!0),r(!0)},e._chooseTab=function(t){return e.setState({currentTab:t})},e}return(0,We.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectScopedContainersAccessor,i=t.globalObjectsContainer,a=t.objectsContainer,o=t.eventsFunction,s=t.eventsBasedBehavior,l=t.eventsBasedObject,c=t.freezeEventsFunctionType,u=t.onConfigurationUpdated,d=t.onParametersOrGroupsUpdated,p=t.freezeParameters,h=t.helpPagePath,g=t.renderConfigurationHeader,m=t.onMoveFreeEventsParameter,x=t.onMoveBehaviorEventsParameter,v=t.onMoveObjectEventsParameter,b=t.getFunctionGroupNames,C=t.eventsFunctionsContainer,j=t.eventsFunctionsExtension,y=t.onFunctionParameterWillBeRenamed,Z=t.onFunctionParameterTypeChanged,k=o.getObjectGroups().count()>0;return(0,f.jsxs)(M.sg,{expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[k?(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:(0,f.jsx)(B.m,{value:this.state.currentTab,onChange:this._chooseTab,options:[{value:"config",label:(0,f.jsx)(w.Trans,{id:"Configuration"})},{value:"groups",label:(0,f.jsx)(w.Trans,{id:"Object groups"})}]})})}):null,"config"===this.state.currentTab?(0,f.jsx)(Gg,{project:n,projectScopedContainersAccessor:r,eventsFunction:o,eventsBasedBehavior:s,eventsBasedObject:l,eventsFunctionsContainer:C,eventsFunctionsExtension:j,onParametersUpdated:d,helpPagePath:h,freezeParameters:p,onMoveFreeEventsParameter:m,onMoveBehaviorEventsParameter:x,onMoveObjectEventsParameter:v,onFunctionParameterWillBeRenamed:y,onFunctionParameterTypeChanged:Z,children:(0,f.jsx)(Kg,{project:n,eventsFunction:o,eventsBasedBehavior:s,eventsBasedObject:l,eventsFunctionsContainer:C,eventsFunctionsExtension:j,helpPagePath:h,onConfigurationUpdated:function(t){u&&u(t),e.forceUpdate()},renderConfigurationHeader:g,freezeEventsFunctionType:c,getFunctionGroupNames:b})},o?o.ptr:null):null,"groups"===this.state.currentTab?(0,f.jsx)(Dx,{project:n,projectScopedContainersAccessor:r,globalObjectsContainer:i,objectsContainer:a,globalObjectGroups:null,objectGroups:o.getObjectGroups(),getValidatedObjectOrGroupName:this._getValidatedObjectOrGroupName,onRenameGroup:this._onRenameGroup,onDeleteGroup:this._onDeleteGroup,onGroupsUpdated:d,canSetAsGlobalGroup:!1,unsavedChanges:this.props.unsavedChanges}):null]})}}]),n}(c.Component),Bx=n(9011),Ux=n.g.gd,Vx="Events Function",Hx={marginRight:5,verticalAlign:"bottom"},zx=function(e){return"function-".concat(e.ptr)},Wx=function(e,t){var n=e.getName();return"behavior"===t?!Ux.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(n):"object"===t?!Ux.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(n):!Ux.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(n)},Gx=function(){function e(t,n){(0,ze.Z)(this,e),this.eventsFunction=t,this.props=n}return(0,We.Z)(e,[{key:"getEventsFunctionsContainer",value:function(){return this.props.eventsFunctionsContainer}},{key:"getEventsFunction",value:function(){return this.eventsFunction}},{key:"getEventsBasedBehavior",value:function(){return this.props.eventsBasedBehavior}},{key:"getEventsBasedObject",value:function(){return this.props.eventsBasedObject}},{key:"isDescendantOf",value:function(e){return null===e.getEventsFunction()&&(this.getEventsBasedBehavior()===e.getEventsBasedBehavior()||this.getEventsBasedObject()===e.getEventsBasedObject()||this.getEventsBasedBehavior()&&e.getId()===iv||this.getEventsBasedObject()&&e.getId()===rv||e.getId()===av)}},{key:"getName",value:function(){return this.eventsFunction.getName()}},{key:"getId",value:function(){return zx(this.eventsFunction)}},{key:"getHtmlId",value:function(e){return"function-item-".concat(e)}},{key:"getThumbnail",value:function(){switch(this.eventsFunction.getFunctionType()){default:return"res/functions/function.svg";case Ux.EventsFunction.Action:case Ux.EventsFunction.ActionWithOperator:switch(this.eventsFunction.getName()){default:return"res/functions/action.svg";case"onSceneUnloading":case"onDestroy":return"res/functions/destroy.svg";case"onSceneResumed":case"onActivate":return"res/functions/activate.svg";case"onScenePaused":case"onDeActivate":return"res/functions/deactivate.svg";case"onScenePreEvents":case"onScenePostEvents":case"doStepPreEvents":case"doStepPostEvents":return"res/functions/step.svg";case"onSceneLoaded":case"onFirstSceneLoaded":case"onCreated":return"res/functions/create.svg";case"onHotReloading":return"res/functions/reload.svg"}case Ux.EventsFunction.Condition:return"res/functions/condition.svg";case Ux.EventsFunction.Expression:case Ux.EventsFunction.ExpressionAndCondition:return"res/functions/expression.svg"}}},{key:"getDataset",value:function(){return null}},{key:"onSelect",value:function(){this.props.onSelectEventsFunction(this.eventsFunction,this.props.eventsBasedBehavior,this.props.eventsBasedObject)}},{key:"onClick",value:function(){}},{key:"rename",value:function(e){var t=this;this.eventsFunction.getName()!==e&&this.props.onRenameEventsFunction(this.props.eventsBasedBehavior,this.props.eventsBasedObject,this.eventsFunction,e,(function(e){e&&t._onEventsFunctionModified()}))}},{key:"edit",value:function(){this.canBeRenamed()&&this.props.editName(this.getId())}},{key:"canBeRenamed",value:function(){return Wx(this.eventsFunction,this.getEventsBasedBehavior()?"behavior":this.getEventsBasedObject()?"object":"extension")}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.edit()},enabled:this.canBeRenamed(),accelerator:"F2"},{label:this.eventsFunction.isPrivate()?e._({id:"Make public"}):e._({id:"Make private"}),click:function(){return n._togglePrivate()}},{label:this.eventsFunction.isAsync()?e._({id:"Make synchronous"}):e._({id:"Make asynchronous"}),click:function(){return n._toggleAsync()}},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:vt.Z.has(Vx),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),click:function(){return n._duplicateEventsFunction()}}]}},{key:"renderRightComponent",value:function(e){var t=[];return this.eventsFunction.isPrivate()&&t.push((0,f.jsx)(re.ZP,{title:(0,f.jsx)(w.Trans,{id:"This function won't be visible in the events editor."}),children:(0,f.jsx)(tx.Z,{fontSize:"small",style:(0,l.Z)((0,l.Z)({},Hx),{},{color:this.props.gdevelopTheme.text.color.disabled})})},"visibility")),this.eventsFunction.isAsync()&&t.push((0,f.jsx)(re.ZP,{title:(0,f.jsx)(w.Trans,{id:'This function is asynchronous - it will only allow subsequent events to run after calling the action "End asynchronous task" within the function.'}),children:(0,f.jsx)(Bx.Z,{fontSize:"small",style:(0,l.Z)((0,l.Z)({},Hx),{},{color:this.props.gdevelopTheme.text.color.disabled})})},"async")),t.length>0?t:null}},{key:"_togglePrivate",value:function(){this.eventsFunction.setPrivate(!this.eventsFunction.isPrivate()),this.props.forceUpdateEditor()}},{key:"_toggleAsync",value:function(){this.eventsFunction.setAsync(!this.eventsFunction.isAsync()),this.props.forceUpdateEditor()}},{key:"delete",value:function(){this._deleteEventsFunction({askForConfirmation:!0})}},{key:"_deleteEventsFunction",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.askForConfirmation,r=this.props.eventsFunctionsContainer,!n){e.next=8;break}return e.next=5,this.props.showDeleteConfirmation({title:{id:"Remove function"},message:{id:"Are you sure you want to remove this function? This can't be undone."}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:this.props.onDeleteEventsFunction(this.eventsFunction,(function(e){e&&(r.removeEventsFunction(i.eventsFunction.getName()),i._onEventsFunctionModified())}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIndex",value:function(){return this.props.eventsFunctionsContainer.getEventsFunctionPosition(this.eventsFunction)}},{key:"moveAt",value:function(e){var t=this.getIndex();this.props.eventsFunctionsContainer.moveEventsFunction(t,e+(e<=t?0:-1))}},{key:"copy",value:function(){vt.Z.set(Vx,{eventsFunction:(0,Ct.XH)(this.eventsFunction),name:this.eventsFunction.getName()})}},{key:"cut",value:function(){this.copy(),this._deleteEventsFunction({askForConfirmation:!1})}},{key:"paste",value:function(){if(vt.Z.has(Vx)){var e=vt.Z.get(Vx),t=bt.$.extractObjectProperty(e,"eventsFunction"),n=bt.$.extractStringProperty(e,"name");if(n&&t){var r=this.props,i=r.project,a=r.eventsFunctionsContainer,o=(0,xt.Z)(n,(function(e){return a.hasEventsFunctionNamed(e)})),s=a.insertNewEventsFunction(o,this.getIndex()+1);(0,Ct.qx)(s,t,"unserializeFrom",i),s.setName(o),this.props.onEventsFunctionAdded(s,this.props.eventsBasedBehavior,this.props.eventsBasedObject),this._onEventsFunctionModified(),this.props.onSelectEventsFunction(s,this.props.eventsBasedBehavior,this.props.eventsBasedObject),this.props.editName(zx(s))}}}},{key:"_duplicateEventsFunction",value:function(){var e=this.props.eventsFunctionsContainer,t=(0,xt.Z)(this.eventsFunction.getName(),(function(t){return e.hasEventsFunctionNamed(t)})),n=e.insertEventsFunction(this.eventsFunction,this.getIndex()+1);n.setName(t),this.props.onEventsFunctionAdded(n),this._onEventsFunctionModified(),this.props.onSelectEventsFunction(n,this.props.eventsBasedBehavior,this.props.eventsBasedObject),this.props.editName(zx(n))}},{key:"_onEventsFunctionModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){return null}},{key:"addFunctionAtSelection",value:function(){}}]),e}(),Yx="Events Based Behavior",qx={marginRight:5,verticalAlign:"bottom"},Jx=function(e){return"behavior-"+e.ptr},Xx=function(){function e(t,n){(0,ze.Z)(this,e),this.eventsBasedBehavior=t,this.props=n}return(0,We.Z)(e,[{key:"getEventsFunctionsContainer",value:function(){return this.eventsBasedBehavior.getEventsFunctions()}},{key:"getEventsFunction",value:function(){return null}},{key:"getEventsBasedBehavior",value:function(){return this.eventsBasedBehavior}},{key:"getEventsBasedObject",value:function(){return null}},{key:"isDescendantOf",value:function(e){return e.getId()===iv}},{key:"getName",value:function(){return this.eventsBasedBehavior.getName()}},{key:"getId",value:function(){return Jx(this.eventsBasedBehavior)}},{key:"getHtmlId",value:function(e){return"behavior-item-".concat(e)}},{key:"getThumbnail",value:function(){return"res/functions/behavior_black.svg"}},{key:"getDataset",value:function(){return null}},{key:"onSelect",value:function(){this.props.onSelectEventsBasedBehavior(this.eventsBasedBehavior)}},{key:"onClick",value:function(){}},{key:"rename",value:function(e){var t=this;this.eventsBasedBehavior.getName()!==e&&this.props.onRenameEventsBasedBehavior(this.eventsBasedBehavior,e,(function(e){e&&(t._onEventsBasedBehaviorModified(),t.props.onEventsBasedBehaviorRenamed(t.eventsBasedBehavior))}))}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Add a function"}),click:function(){return n.addFunctionAtSelection()}},{type:"separator"},{label:e._({id:"Rename"}),click:function(){return n.edit()},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{label:this.eventsBasedBehavior.isPrivate()?e._({id:"Make public"}):e._({id:"Make private"}),click:function(){return n._togglePrivate()}},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:vt.Z.has(Yx),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"}]}},{key:"renderRightComponent",value:function(e){return this.eventsBasedBehavior.isPrivate()?(0,f.jsx)(re.ZP,{title:(0,f.jsx)(w.Trans,{id:"This behavior won't be visible in the scene and events editors."}),children:(0,f.jsx)(tx.Z,{fontSize:"small",style:(0,l.Z)((0,l.Z)({},qx),{},{color:this.props.gdevelopTheme.text.color.disabled})})}):null}},{key:"delete",value:function(){this._deleteEventsBasedBehavior({askForConfirmation:!0})}},{key:"_deleteEventsBasedBehavior",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.askForConfirmation,r=this.props.eventsBasedBehaviorsList,!n){e.next=8;break}return e.next=5,this.props.showDeleteConfirmation({title:{id:"Remove behavior"},message:{id:"Are you sure you want to remove this behavior? This can't be undone."}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:this.props.onDeleteEventsBasedBehavior(this.eventsBasedBehavior,(function(e){e&&(r.remove(i.eventsBasedBehavior.getName()),i._onEventsBasedBehaviorModified())}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_togglePrivate",value:function(){this.eventsBasedBehavior.setPrivate(!this.eventsBasedBehavior.isPrivate()),this.props.forceUpdateEditor()}},{key:"getIndex",value:function(){return this.props.eventsBasedBehaviorsList.getPosition(this.eventsBasedBehavior)}},{key:"moveAt",value:function(e){var t=this.getIndex();this.props.eventsBasedBehaviorsList.move(t,e+(e<=t?0:-1))}},{key:"copy",value:function(){vt.Z.set(Yx,{eventsBasedBehavior:(0,Ct.XH)(this.eventsBasedBehavior),name:this.eventsBasedBehavior.getName(),extensionName:this.props.eventsFunctionsExtension.getName()})}},{key:"cut",value:function(){this.copy(),this._deleteEventsBasedBehavior({askForConfirmation:!1})}},{key:"paste",value:function(){if(vt.Z.has(Yx)){var e=vt.Z.get(Yx),t=bt.$.extractObjectProperty(e,"eventsBasedBehavior"),n=bt.$.extractStringProperty(e,"name");if(n&&t){var r=this.props,i=r.project,a=r.eventsBasedBehaviorsList,o=(0,xt.Z)(n,(function(e){return a.has(e)})),s=a.insertNew(o,this.getIndex()+1);(0,Ct.qx)(s,t,"unserializeFrom",i),s.setName(o);var l=bt.$.extractStringProperty(e,"extensionName");l&&this.props.onEventsBasedBehaviorPasted(s,l,n),this._onEventsBasedBehaviorModified(),this.props.onSelectEventsBasedBehavior(s),this.props.editName(Jx(s))}}}},{key:"_addNewEventsBasedBehavior",value:function(){var e=this,t=this.props.eventsBasedBehaviorsList,n=(0,xt.Z)("MyBehavior",(function(e){return t.has(e)})),r=t.insertNew(n,t.getCount());this._onEventsBasedBehaviorModified();var i=Jx(r);setTimeout((function(){e.props.scrollToItem(i)}),100),this.props.onSelectEventsBasedBehavior(r),this.props.editName(i)}},{key:"_onEventsBasedBehaviorModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){var t=this;return{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add a function"}),click:function(){return t.addFunctionAtSelection()}}}},{key:"addFunctionAtSelection",value:function(){var e=this.props,t=e.selectedEventsFunction,n=e.selectedEventsBasedBehavior,r=this.eventsBasedBehavior.getEventsFunctions(),i=n===this.eventsBasedBehavior&&t?r.getEventsFunctionPosition(t)+1:r.getEventsFunctionsCount();this.props.addNewEventsFunction({itemContent:this,eventsBasedBehavior:this.eventsBasedBehavior,eventsBasedObject:null,index:i})}}]),e}(),Kx="Events Based Object",Qx={marginRight:5,verticalAlign:"bottom"},$x=function(e){return"object-"+e.ptr},ev=function(){function e(t,n){(0,ze.Z)(this,e),this.eventsBasedObject=t,this.props=n}return(0,We.Z)(e,[{key:"getEventsFunctionsContainer",value:function(){return this.eventsBasedObject.getEventsFunctions()}},{key:"getEventsFunction",value:function(){return null}},{key:"getEventsBasedBehavior",value:function(){return null}},{key:"getEventsBasedObject",value:function(){return this.eventsBasedObject}},{key:"isDescendantOf",value:function(e){return e.getId()===rv}},{key:"getName",value:function(){return this.eventsBasedObject.getName()}},{key:"getId",value:function(){return $x(this.eventsBasedObject)}},{key:"getHtmlId",value:function(e){return null}},{key:"getThumbnail",value:function(){return this.eventsBasedObject.isRenderedIn3D()?"res/functions/object3d_black.svg":"res/functions/object2d_black.svg"}},{key:"getDataset",value:function(){return{objectName:this.eventsBasedObject.getName()}}},{key:"onSelect",value:function(){this.props.onSelectEventsBasedObject(this.eventsBasedObject)}},{key:"onClick",value:function(){}},{key:"rename",value:function(e){var t=this;this.eventsBasedObject.getName()!==e&&this.props.onRenameEventsBasedObject(this.eventsBasedObject,e,(function(e){e&&(t._onEventsBasedObjectModified(),t.props.onEventsBasedObjectRenamed(t.eventsBasedObject))}))}},{key:"edit",value:function(){this.props.editName(this.getId())}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Open visual editor"}),click:function(){return n.props.onOpenCustomObjectEditor(n.eventsBasedObject)}},{label:e._({id:"Add a function"}),click:function(){return n.addFunctionAtSelection()}},{type:"separator"},{label:e._({id:"Rename"}),click:function(){return n.props.editName(n.getId())},accelerator:"F2"},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace"},{label:this.eventsBasedObject.isPrivate()?e._({id:"Make public"}):e._({id:"Make private"}),click:function(){return n._togglePrivate()}},{type:"separator"},{label:e._({id:"Copy"}),click:function(){return n.copy()},accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return n.cut()},accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),enabled:vt.Z.has(Kx),click:function(){return n.paste()},accelerator:"CmdOrCtrl+V"}].filter(Boolean)}},{key:"renderRightComponent",value:function(e){return this.eventsBasedObject.isPrivate()?(0,f.jsx)(re.ZP,{title:(0,f.jsx)(w.Trans,{id:"This object won't be visible in the scene and events editors."}),children:(0,f.jsx)(tx.Z,{fontSize:"small",style:(0,l.Z)((0,l.Z)({},Qx),{},{color:this.props.gdevelopTheme.text.color.disabled})})}):null}},{key:"delete",value:function(){this._deleteEventsBasedObject({askForConfirmation:!0})}},{key:"_deleteEventsBasedObject",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.askForConfirmation,r=this.props.eventsBasedObjectsList,!n){e.next=8;break}return e.next=5,this.props.showDeleteConfirmation({title:{id:"Remove object"},message:{id:"Are you sure you want to remove this object? This can't be undone."}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:this.props.onDeleteEventsBasedObject(this.eventsBasedObject,(function(e){e&&(r.remove(i.eventsBasedObject.getName()),i._onEventsBasedObjectModified())}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_togglePrivate",value:function(){this.eventsBasedObject.setPrivate(!this.eventsBasedObject.isPrivate()),this.props.forceUpdateEditor()}},{key:"getIndex",value:function(){return this.props.eventsBasedObjectsList.getPosition(this.eventsBasedObject)}},{key:"moveAt",value:function(e){var t=this.getIndex();this.props.eventsBasedObjectsList.move(t,e+(e<=t?0:-1))}},{key:"copy",value:function(){vt.Z.set(Kx,{eventsBasedObject:(0,Ct.XH)(this.eventsBasedObject),name:this.eventsBasedObject.getName(),extensionName:this.props.eventsFunctionsExtension.getName()})}},{key:"cut",value:function(){this.copy(),this._deleteEventsBasedObject({askForConfirmation:!1})}},{key:"paste",value:function(){if(vt.Z.has(Kx)){var e=vt.Z.get(Kx),t=bt.$.extractObjectProperty(e,"eventsBasedObject"),n=bt.$.extractStringProperty(e,"name");if(n&&t){var r=this.props,i=r.project,a=r.eventsBasedObjectsList,o=(0,xt.Z)(n,(function(e){return a.has(e)})),s=a.insertNew(o,this.getIndex()+1);(0,Ct.qx)(s,t,"unserializeFrom",i),s.setName(o);var l=bt.$.extractStringProperty(e,"extensionName");l&&this.props.onEventsBasedObjectPasted(s,l,n),this._onEventsBasedObjectModified(),this.props.onEventBasedObjectTypeChanged(),this.props.onSelectEventsBasedObject(s),this.props.editName($x(s))}}}},{key:"_addNewEventsBasedObject",value:function(){var e=this,t=this.props.eventsBasedObjectsList,n=(0,xt.Z)("MyObject",(function(e){return t.has(e)})),r=t.insertNew(n,t.getCount());this._onEventsBasedObjectModified();var i=$x(r);setTimeout((function(){e.props.scrollToItem(i)}),100),this.props.onSelectEventsBasedObject(r),this.props.editName(i)}},{key:"_onEventsBasedObjectModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}},{key:"getRightButton",value:function(e){var t=this;return{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add a function"}),click:function(){return t.addFunctionAtSelection()}}}},{key:"addFunctionAtSelection",value:function(){var e=this.props,t=e.selectedEventsFunction,n=e.selectedEventsBasedObject,r=this.eventsBasedObject.getEventsFunctions(),i=n===this.eventsBasedObject&&t?r.getEventsFunctionPosition(t)+1:r.getEventsFunctionsCount();this.props.addNewEventsFunction({itemContent:this,eventsBasedBehavior:null,eventsBasedObject:this.eventsBasedObject,index:i})}}]),e}(),tv=n.g.gd,nv="extension-configuration",rv="extension-objects",iv="extension-behaviors",av="extension-functions",ov={listContainer:{flex:1,display:"flex",flexDirection:"column"},autoSizerContainer:{flex:1},autoSizer:{width:"100%"}},sv=function(){function e(t,n,r){(0,ze.Z)(this,e),this.content=new ev(t,n),this.eventFunctionProps=r}return(0,We.Z)(e,[{key:"getChildren",value:function(e){var t=this.content.eventsBasedObject,n=t.getEventsFunctions(),r=(0,l.Z)({eventsBasedObject:t,eventsFunctionsContainer:n},this.eventFunctionProps),i=t.getEventsFunctions();return 0===i.getEventsFunctionsCount()?[new uv("events-object-functions-placeholder."+t.getName(),e._({id:"Start by adding a new function."}))]:(0,mt.mapFor)(0,i.getEventsFunctionsCount(),(function(e){return new cv(new Gx(i.getEventsFunctionAt(e),r))}))}}]),e}(),lv=function(){function e(t,n,r){(0,ze.Z)(this,e),this.content=new Xx(t,n),this.eventFunctionProps=r}return(0,We.Z)(e,[{key:"getChildren",value:function(e){var t=this.content.eventsBasedBehavior,n=t.getEventsFunctions(),r=(0,l.Z)({eventsBasedBehavior:t,eventsFunctionsContainer:n},this.eventFunctionProps);return 0===n.getEventsFunctionsCount()?[new uv("events-behavior-functions-placeholder."+t.getName(),e._({id:"Start by adding a new function."}))]:(0,mt.mapFor)(0,n.getEventsFunctionsCount(),(function(e){return new cv(new Gx(n.getEventsFunctionAt(e),r))}))}}]),e}(),cv=function(){function e(t){(0,ze.Z)(this,e),this.content=t}return(0,We.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),uv=function(){function e(t,n){(0,ze.Z)(this,e),this.isPlaceholder=!0,this.content=new dv(t,n)}return(0,We.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),dv=function(){function e(t,n,r){(0,ze.Z)(this,e),this.id=t,this.label=n,this.buildMenuTemplateFunction=function(e,t){return r?[{label:r.label,click:r.click}]:[]},this.rightButton=r}return(0,We.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return this.rightButton}},{key:"getEventsFunctionsContainer",value:function(){return null}},{key:"getEventsFunction",value:function(){return null}},{key:"getEventsBasedBehavior",value:function(){return null}},{key:"getEventsBasedObject",value:function(){return null}},{key:"getHtmlId",value:function(e){return null}},{key:"getThumbnail",value:function(){return null}},{key:"getDataset",value:function(){return null}},{key:"onSelect",value:function(){}},{key:"onClick",value:function(){}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"addFunctionAtSelection",value:function(e,t,n){}}]),e}(),pv=function(){function e(t,n,r,i){(0,ze.Z)(this,e),this.id=t,this.label=n,this.onClickCallback=r,this.thumbnail=i,this.buildMenuTemplateFunction=function(e,t){return[]}}return(0,We.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return null}},{key:"getEventsFunctionsContainer",value:function(){return null}},{key:"getEventsFunction",value:function(){return null}},{key:"getEventsBasedBehavior",value:function(){return null}},{key:"getEventsBasedObject",value:function(){return null}},{key:"getHtmlId",value:function(e){return this.id}},{key:"getDataset",value:function(){return{}}},{key:"onSelect",value:function(){}},{key:"getThumbnail",value:function(){return this.thumbnail}},{key:"onClick",value:function(){this.onClickCallback()}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"addFunctionAtSelection",value:function(e,t,n){}}]),e}(),fv=function(e){return e.content.getName()},hv=function(e){return e.content.getId()},gv=function(e,t){return e.content.getHtmlId(t)},mv=function(e){return function(t){return t.getChildren(e)}},xv=function(e){return e.content.getThumbnail()},vv=function(e){return e.content.getDataset()},bv=function(e){return function(t,n){return t.content.buildMenuTemplate(e,n)}},Cv=function(e){return function(t){return t.content.renderRightComponent(e)}},jv=function(e,t){e.content.rename(t)},yv=function(e){e.content.onClick()},Zv=function(e){e.content.edit()},kv=function(e){return function(t){return t.content.getRightButton(e)}},wv=c.forwardRef((function(e,t){var n=e.project,i=e.eventsFunctionsExtension,a=e.unsavedChanges,o=e.onSelectEventsFunction,u=e.onDeleteEventsFunction,d=e.onRenameEventsFunction,p=e.onAddEventsFunction,h=e.onEventsFunctionAdded,g=e.onSelectEventsBasedBehavior,m=e.onDeleteEventsBasedBehavior,x=e.onRenameEventsBasedBehavior,v=e.onEventsBasedBehaviorRenamed,b=e.onEventsBasedBehaviorPasted,C=e.onSelectEventsBasedObject,y=e.onDeleteEventsBasedObject,Z=e.onRenameEventsBasedObject,k=e.onEventsBasedObjectRenamed,T=e.onEventsBasedObjectPasted,S=e.onAddEventsBasedObject,P=e.selectedEventsFunction,I=e.selectedEventsBasedBehavior,E=e.selectedEventsBasedObject,L=e.forceUpdateEditor,A=e.onSelectExtensionProperties,O=e.onSelectExtensionGlobalVariables,R=e.onSelectExtensionSceneVariables,F=e.onOpenCustomObjectEditor,N=e.onEventBasedObjectTypeChanged,B=c.useState([]),U=(0,s.Z)(B,2),V=U[0],H=U[1],z=c.useContext(D.ZP),W=c.useContext(j.Z),G=c.useContext(gi.Z).currentlyRunningInAppTutorial,Y=c.useRef(null),q=(0,gt.Z)(),J=(0,be.UQ)().isMobile,X=(0,Ye.Z)().showDeleteConfirmation,K=c.useCallback((function(){q(),Y.current&&Y.current.forceUpdateList()}),[q]);c.useImperativeHandle(t,(function(){return{forceUpdateList:function(){q(),Y.current&&Y.current.forceUpdateList()}}}));var Q=c.useState(""),$=(0,s.Z)(Q,2),ee=$[0],te=$[1],ne=c.useCallback((function(e){Y.current&&Y.current.scrollToItemFromId(e)}),[]),re=c.useCallback((function(e){var t=Y.current;t&&(J&&t.scrollToItemFromId(e,"start"),t.renameItemFromId(e))}),[J]),ie=c.useCallback((function(e){var t=e.itemContent,r=e.eventsBasedBehavior,s=e.eventsBasedObject,l=e.index,c=r||s,u=c?c.getEventsFunctions():i.getEventsFunctions();r&&g(r),s&&C(s),p(r,s,(function(e){if(e){var i=e.name||(0,xt.Z)("Function",(function(e){return u.hasEventsFunctionNamed(e)})),c=u.insertNewEventsFunction(i,l||u.getEventsFunctionsCount());c.setFunctionType(e.functionType),c.isCondition()&&!c.isExpression()&&tv.PropertyFunctionGenerator.generateConditionSkeleton(n,c);var d=zx(c);Y.current&&Y.current.openItems([t?t.getId():av]),setTimeout((function(){ne(d)}),100),h(c,r,s),a&&a.triggerUnsavedChanges(),q(),o(c,r,s),Wx(c,r?"behavior":s?"object":"extension")&&re(d)}}))}),[re,i,q,p,h,g,C,n,o,ne,a]),ae=c.useCallback((function(){var e=i.getEventsBasedBehaviors(),t=(0,xt.Z)("MyBehavior",(function(t){return e.has(t)})),n=e.insertNew(t,e.getCount());a&&a.triggerUnsavedChanges(),q();var r=Jx(n);Y.current&&Y.current.openItems([r,iv]),setTimeout((function(){ne(r)}),100),g(n),re(r)}),[re,i,q,ne,g,a]),oe=c.useCallback((function(){S((function(e){if(e){var t=i.getEventsBasedObjects(),n=(0,xt.Z)("MyObject",(function(e){return t.has(e)})),r=t.insertNew(n,t.getCount());r.markAsRenderedIn3D(e.isRenderedIn3D),a&&a.triggerUnsavedChanges(),q();var o=$x(r);Y.current&&Y.current.openItems([o,rv]),setTimeout((function(){ne(o)}),100),C(r),re(o),N()}}))}),[S,i,a,q,C,re,ne,N]),se=c.useCallback((function(e){a&&a.triggerUnsavedChanges(),e?K():q()}),[q,K,a]),le=c.useRef(new ht.ZP({shortcutCallbacks:{}}));c.useEffect((function(){le.current&&(le.current.setShortcutCallback("onDelete",(function(){V.length>0&&V[0].content.delete()})),le.current.setShortcutCallback("onRename",(function(){V.length>0&&re(V[0].content.getId())})),le.current.setShortcutCallback("onCopy",(function(){V.length>0&&V[0].content.copy()})),le.current.setShortcutCallback("onPaste",(function(){V.length>0&&V[0].content.paste()})),le.current.setShortcutCallback("onCut",(function(){V.length>0&&V[0].content.cut()})))}),[re,V]);var ce=c.useMemo((function(){return{project:n,eventsFunctionsExtension:i,unsavedChanges:a,preferences:z,forceUpdateEditor:L,gdevelopTheme:W,forceUpdate:q,forceUpdateList:K,showDeleteConfirmation:X,editName:re,scrollToItem:ne,onSelectEventsFunction:o,onDeleteEventsFunction:u,onRenameEventsFunction:d,onAddEventsFunction:p,onEventsFunctionAdded:h,selectedEventsBasedBehavior:I,selectedEventsBasedObject:E,selectedEventsFunction:P}}),[n,i,a,z,L,W,q,K,X,re,ne,o,u,d,p,h,I,E,P]),ue=i.getEventsBasedBehaviors(),de=c.useMemo((function(){return{project:n,eventsFunctionsExtension:i,eventsBasedBehaviorsList:ue,unsavedChanges:a,forceUpdateEditor:L,preferences:z,gdevelopTheme:W,forceUpdate:q,forceUpdateList:K,showDeleteConfirmation:X,editName:re,scrollToItem:ne,onSelectEventsBasedBehavior:g,onDeleteEventsBasedBehavior:m,onRenameEventsBasedBehavior:x,onEventsBasedBehaviorRenamed:v,onEventsBasedBehaviorPasted:b,addNewEventsFunction:ie,selectedEventsBasedBehavior:I,selectedEventsBasedObject:E,selectedEventsFunction:P}}),[n,i,ue,a,L,z,W,q,K,X,re,ne,g,m,x,v,b,ie,I,E,P]),pe=i.getEventsBasedObjects(),fe=c.useMemo((function(){return{project:n,eventsFunctionsExtension:i,eventsBasedObjectsList:pe,unsavedChanges:a,preferences:z,forceUpdateEditor:L,gdevelopTheme:W,forceUpdate:q,forceUpdateList:K,showDeleteConfirmation:X,editName:re,scrollToItem:ne,onSelectEventsBasedObject:C,onDeleteEventsBasedObject:y,onRenameEventsBasedObject:Z,onEventsBasedObjectRenamed:k,onEventsBasedObjectPasted:T,onAddEventsBasedObject:S,addNewEventsFunction:ie,selectedEventsBasedBehavior:I,selectedEventsBasedObject:E,selectedEventsFunction:P,onOpenCustomObjectEditor:F,onEventBasedObjectTypeChanged:N}}),[n,i,pe,a,z,L,W,q,K,X,re,ne,C,y,Z,k,T,S,ie,I,E,P,F,N]),he=(0,mt.mapFor)(0,pe.size(),(function(e){return new sv(pe.at(e),fe,ce)})),ge=(0,mt.mapFor)(0,ue.size(),(function(e){return new lv(ue.at(e),de,ce)})),me=c.useCallback((function(e){return[{isRoot:!0,content:new dv(nv,e._({id:"Extension"})),getChildren:function(e){return[new cv(new pv("extension-properties",e._({id:"Properties"}),A,"res/icons_default/properties_black.svg")),new cv(new pv("extension-global-variables",e._({id:"Extension global variables"}),O,"res/icons_default/global_variable24_black.svg")),new cv(new pv("extension-scene-variables",e._({id:"Extension scene variables"}),R,"res/icons_default/scene_variable24_black.svg"))]}},{isRoot:!0,content:new dv(rv,e._({id:"Objects"}),{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add an object"}),click:oe}),getChildren:function(e){return 0===he.length?[new uv("extension-objects-placeholder",e._({id:"Start by adding a new object."}))]:he}},{isRoot:!0,content:new dv(iv,e._({id:"Behaviors"}),{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add a behavior"}),click:ae}),getChildren:function(e){return 0===ge.length?[new uv("extension-behaviors-placeholder",e._({id:"Start by adding a new behavior."}))]:ge}},{isRoot:!0,content:new dv(av,e._({id:"Functions"}),{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add a function"}),click:function(){var e=i.getEventsFunctions(),t=I||E||!P?e.getEventsFunctionsCount():e.getEventsFunctionPosition(P)+1;ie({itemContent:null,eventsBasedBehavior:null,eventsBasedObject:null,index:t})}}),getChildren:function(e){var t=i.getEventsFunctions();if(0===t.getEventsFunctionsCount())return[new uv("extension-functions-placeholder",e._({id:"Start by adding a new function."}))];var n=(0,l.Z)({eventsFunctionsContainer:t},ce);return(0,mt.mapFor)(0,t.getEventsFunctionsCount(),(function(e){return new cv(new Gx(t.getEventsFunctionAt(e),n))}))}}].filter(Boolean)}),[oe,ae,A,O,R,he,ge,I,E,P,i,ie,ce]),xe=c.useCallback((function(e,t){return V.every((function(n){return n.content.getEventsFunction()?e.content.getEventsFunction()&&n.content.getEventsFunctionsContainer()===e.content.getEventsFunctionsContainer():!e.content.getEventsFunction()&&"inside"!==t&&(n.content.getEventsBasedBehavior()&&e.content.getEventsBasedBehavior()||n.content.getEventsBasedObject()&&e.content.getEventsBasedObject())}))}),[V]),ve=c.useCallback((function(e,t,n){0!==V.length&&(V[0].content.moveAt(t.content.getIndex()+("after"===n?1:0)),se(!0))}),[se,V]),Ce=c.useCallback((function(e){1!==V.length||e.isPlaceholder||V[0].content.isDescendantOf(e.content)&&(H([]),o(null,null,null))}),[V,o]),je=n.ptr+";"+i.ptr,ye=[rv,iv,av,nv].concat((0,r.Z)(he.map((function(e){return e.content.getId()}))),(0,r.Z)(ge.map((function(e){return e.content.getId()}))));return c.useEffect((function(){if(P){var e=I||E,t=e?e.getEventsFunctions():i.getEventsFunctions(),n=(0,l.Z)({eventsBasedBehavior:I,eventsBasedObject:E,eventsFunctionsContainer:t},ce);H([new cv(new Gx(P,n))])}else H(I?[new lv(I,de,ce)]:E?[new sv(E,fe,ce)]:[])}),[de,ce,fe,i,I,E,P]),(0,f.jsxs)(Ki.Z,{maxWidth:!0,children:[(0,f.jsx)(M.sg,{children:(0,f.jsx)(_.pJ,{children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(Ge.Z,{value:ee,onRequestSearch:function(){},onChange:function(e){return te(e)},placeholder:{id:"Search functions"}})})})}),(0,f.jsx)("div",{style:ov.listContainer,onKeyDown:le.current.onKeyDown,onKeyUp:le.current.onKeyUp,id:"events-function-list",children:(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)("div",{style:ov.autoSizerContainer,children:(0,f.jsx)(Br.qj,{style:ov.autoSizer,disableWidth:!0,children:function(e){var n=e.height;return(0,f.jsx)(Qi.Z,{ref:Y,items:me(t),height:n,forceAllOpened:!!G,searchText:ee,getItemName:fv,getItemThumbnail:xv,getItemChildren:mv(t),multiSelect:!1,getItemId:hv,getItemHtmlId:gv,getItemDataset:vv,onEditItem:Zv,onCollapseItem:Ce,selectedItems:V,onSelectItems:function(e){var t=e[0];t&&(t.isRoot||(t.content.onSelect(),H(e)))},onClickItem:yv,onRenameItem:jv,buildMenuTemplate:bv(t),getItemRightButton:kv(t),renderRightComponent:Cv(t),onMoveSelectionToItem:function(e,n){return ve(t,e,n)},canMoveSelectionToItem:xe,reactDndType:"GD_EXTENSION_ITEM",initiallyOpenedNodeIds:ye,forceDefaultDraggingPreview:!0,shouldHideMenuIcon:function(){return!0}},je)}})})}})})]})})),Tv=function(e,t){return e.selectedEventsFunction===t.selectedEventsFunction&&e.project===t.project&&e.eventsFunctionsExtension===t.eventsFunctionsExtension},Sv=c.memo(wv,Tv),Pv=c.forwardRef((function(e,t){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Objects list"}),scope:"scene-editor-objects-list",children:(0,f.jsx)(Sv,(0,l.Z)({ref:t},e))})})),Iv=n(7660),Ev=n(23375),Mv=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ie().get(t,{responseType:"arraybuffer"});case 3:if(n=e.sent,!((r=btoa(new Uint8Array(n.data).reduce((function(e,t){return e+String.fromCharCode(t)}),""))).length>102400)){e.next=7;break}throw new Error("Icon is too big (size after base64 conversion: ".concat(r.length,")"));case 7:if("image/svg+xml"===(i=n.headers?n.headers["content-type"].toLowerCase():"")){e.next=10;break}throw new Error('Wrong content type. Got: "'.concat(i,'", expected "image/svg+xml"'));case 10:return e.abrupt("return","data:".concat(i,";base64,").concat(r));case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Unable to import the icon.",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),Lv=function(e){var t=e.i18n,n=e.helpPath,r=e.onChangeHelpPath,i=(0,fp.KL)(n),a=(0,fp.Q1)(n),o=n?(a?t._({id:"This is a relative path that will open in the GDevelop wiki."}):t._({id:"This is link to a webpage."}))+" [".concat(t._({id:"Click here to test the link."}),"](").concat((0,fp.vA)(n),")"):t._({id:"This can either be a URL to a web page, or a path starting with a slash that will be opened in the GDevelop wiki. Leave empty if there is no help page, although it's recommended you eventually write one if you distribute the extension."});return(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Help page URL"}),value:n,onChange:function(e,t){r(t)},errorText:!n||i||a?null:(0,f.jsx)(w.Trans,{id:'This is not a URL starting with "http://" or "https://".'}),helperMarkdownText:o,fullWidth:!0})},Av=function(e){var t=e.eventsFunctionsExtension,n=e.onLoadChange,r=e.isLoading,i=(0,gt.Z)(),a=c.useState(!1),o=(0,s.Z)(a,2),l=o[0],u=o[1],d=(0,Ps.t)(),p=c.useContext(Ev.Z).searchResults,h=c.useState(null),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useCallback((function(e){if("number"===typeof m){var r=p?p[m]:null;r&&(u(!1),n(!0),Mv(r.url).then((function(e){d.current&&(t.setPreviewIconUrl(r.url),t.setIconUrl(e))}),(function(t){d.current&&(0,bi.gR)({message:e._({id:"Unable to download the icon. Verify your internet connection or try again later."}),rawError:t,errorId:"icon-download-error"})})).then((function(){d.current&&n(!1)})))}}),[m,p,t,n,d]);return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Name"}),value:t.getName(),disabled:!0,fullWidth:!0}),(0,f.jsx)(_.ad,{renderButton:function(e){return(0,f.jsx)(G.Z,{onClick:function(){u(!0)},primary:!0,label:(0,f.jsx)(w.Trans,{id:"Choose"}),disabled:r,style:e})},renderTextField:function(){return(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Icon URL"}),value:t.getPreviewIconUrl(),onChange:function(e){t.setPreviewIconUrl(e)},disabled:!0,fullWidth:!0})}}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Name displayed in editor"}),value:t.getFullName(),onChange:function(e,n){t.setFullName(n),i()},fullWidth:!0}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Short description"}),value:t.getShortDescription(),onChange:function(e,n){t.setShortDescription(n),i()},multiline:!0,fullWidth:!0,rows:2,rowsMax:2}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Description (markdown supported)"}),value:t.getDescription(),onChange:function(e,n){t.setDescription(n),i()},multiline:!0,fullWidth:!0,rows:5,rowsMax:15,helperMarkdownText:n._({id:"Explain and give some examples of what can be achieved with this extension."})}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Version"}),value:t.getVersion(),onChange:function(e,n){t.setVersion(n),i()},fullWidth:!0}),(0,f.jsx)(dr.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Category (shown in the editor)"}),fullWidth:!0,value:t.getCategory(),onChange:function(e){t.setCategory(e),i()},dataSource:[{text:"",value:"General",translatableValue:"General"},{text:"Ads",value:"Ads",translatableValue:"Ads"},{text:"Visual effect",value:"Visual effect",translatableValue:"Visual effect"},{text:"Audio",value:"Audio",translatableValue:"Audio"},{text:"Advanced",value:"Advanced",translatableValue:"Advanced"},{text:"Camera",value:"Camera",translatableValue:"Camera"},{text:"Input",value:"Input",translatableValue:"Input"},{text:"Game mechanic",value:"Game mechanic",translatableValue:"Game mechanic"},{text:"Movement",value:"Movement",translatableValue:"Movement"},{text:"Network",value:"Network",translatableValue:"Network"},{text:"Third-party",value:"Third-party",translatableValue:"Third-party"},{text:"User interface",value:"User interface",translatableValue:"User interface"}]}),(0,f.jsx)(yn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Tags (comma separated)"}),value:t.getTags().toJSArray().join(", "),onChange:function(e){var n=t.getTags();n.clear(),e.split(",").map((function(e){return e.trim()})).filter(Boolean).forEach((function(e){n.push_back(e)})),i()},fullWidth:!0}),(0,f.jsx)(Lv,{i18n:n,helpPath:t.getHelpPath(),onChangeHelpPath:function(e){t.setHelpPath(e),i()}}),(0,f.jsx)(br,{userIds:t.getAuthorIds().toJSArray(),onChange:function(e){var n=t.getAuthorIds();n.clear(),e.forEach((function(e){return n.push_back(e.userId)}))},floatingLabelText:(0,f.jsx)(w.Trans,{id:"Authors"}),helperText:(0,f.jsx)(w.Trans,{id:"Select the usernames of the contributors to this extension. They will be displayed in the order selected. Do not see your name? Go to the Profile section and create an account!"})}),l&&(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Choose an icon for the extension"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:function(){u(!1)}},"cancel"),(0,f.jsx)(E.vF,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use icon"}),onClick:function(){return v(n)}},"apply")],flexColumnBody:!0,fullHeight:!0,open:!0,onRequestClose:function(){u(!1)},children:(0,f.jsx)(Iv.L,{selectedResourceIndex:m,onSelectResource:x,resourceKind:"svg"})})]})}})},Ov=n(67449),Rv=n(11374),Fv=n(12470),Dv=n(13035),Nv={paper:{minWidth:"100%"}},_v=function(e,t){for(var n=0;n<t.size();n++)if(t.at(n).getName()===e)return!0;return!1},Bv=function(e){var t=e.eventsFunctionsExtension,n=e.project,r=e.resourceManagementProps,i=t.getAllDependencies(),a=(0,gt.Z)();return(0,f.jsxs)(_.ak,{noMargin:!0,noOverflowParent:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Dependencies"})}),(0,f.jsxs)(Ov.Z,{component:function(e){var t=e.children;return(0,f.jsx)(H.Z,{style:Nv.paper,background:"medium",children:t})},children:[(0,f.jsxs)(Rv.iA,{children:[(0,f.jsx)(Rv.xD,{children:(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Name"})}),(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Export name"})}),(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Version"})}),(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Dependency type"})}),(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Action"})})]})}),(0,f.jsx)(Rv.RM,{children:(0,mt.mapVector)(t.getAllDependencies(),(function(e,n){return(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(Fv.Z,{commitOnBlur:!0,value:e.getName(),onChange:function(t){t!==e.getName()&&(_v(t,i)?(0,bi.T4)("This name is already in use! Please use a unique name.",{delayToNextTick:!0}):(e.setName(t),a()))}})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(Fv.Z,{commitOnBlur:!0,value:e.getExportName(),onChange:function(t){t!==e.getExportName()&&(e.setExportName(t),a())}})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(Fv.Z,{commitOnBlur:!0,value:e.getVersion(),onChange:function(t){t!==e.getVersion()&&(e.setVersion(t),a())}})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsxs)(fe.Z,{value:e.getDependencyType(),onChange:function(t){t!==e.getDependencyType()&&(e.setDependencyType(t),a())},children:[(0,f.jsx)(P.Z,{value:"npm",label:{id:"NPM"}}),(0,f.jsx)(P.Z,{value:"cordova",label:{id:"Cordova"}})]})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)($.Z,{tooltip:{id:"Delete"},onClick:function(){t.removeDependencyAt(n),a()},size:"small",children:(0,f.jsx)(Jt.Z,{})})})]},e.getName())}))})]}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(M.x1,{justifyContent:"flex-end",children:(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(it.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Add"}),onClick:function(){t.addDependency().setName((0,xt.Z)("New Dependency",(function(e){return _v(e,i)}))).setExportName("my-dependency").setVersion("1.0.0").setDependencyType("cordova"),a()}})})})]}),(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"Dependencies allow to add additional libraries in the exported games. NPM dependencies will be included for Electron builds (Windows, macOS, Linux) and Cordova dependencies will be included for Cordova builds (Android, iOS). Note that this is intended for usage in JavaScript events only. If you are only using standard events, you should not worry about this."})}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Extra source files (experimental)"})}),(0,f.jsxs)(Ov.Z,{component:function(e){var t=e.children;return(0,f.jsx)(H.Z,{style:Nv.paper,background:"medium",children:t})},children:[(0,f.jsxs)(Rv.iA,{children:[(0,f.jsx)(Rv.xD,{children:(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Source file"})}),(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Loading Position"})}),(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Action"})})]})}),(0,f.jsx)(Rv.RM,{children:(0,mt.mapVector)(t.getAllSourceFiles(),(function(e,i){return(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(Dv.t,{project:n,resourceManagementProps:r,resourceKind:"javascript",resourceName:e.getResourceName(),onChange:function(t){e.setResourceName(t),a()}})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsxs)(fe.Z,{value:e.getIncludePosition(),onChange:function(t){t!==e.getIncludePosition()&&(e.setIncludePosition(t),a())},children:[(0,f.jsx)(P.Z,{value:"first",label:{id:"First (before other files)"}}),(0,f.jsx)(P.Z,{value:"last",label:{id:"Last (after other files)"}})]})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)($.Z,{tooltip:{id:"Delete"},onClick:function(){t.removeSourceFileAt(i),a()},size:"small",children:(0,f.jsx)(Jt.Z,{})})})]},e.getResourceName())}))})]}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(M.x1,{justifyContent:"flex-end",children:(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(it.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Add"}),onClick:function(){t.addSourceFile(),a()}})})})]}),(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"JavaScript files are imported as is (no compilation and not available in JavaScript code block autocompletions). Make sure your extension is used by the game (at least one action/condition used in a scene), otherwise the files won't be imported."})})]})},Uv=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16666 9.33329C3.44281 9.33329 3.66666 9.55715 3.66666 9.83329V10.8333C3.66666 11.6617 4.33823 12.3333 5.16666 12.3333H10.8333C11.6618 12.3333 12.3333 11.6618 12.3333 10.8333V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1095 9.33329 13.3333 9.55715 13.3333 9.83329V10.8333C13.3333 12.214 12.2141 13.3333 10.8333 13.3333H5.16666C3.78596 13.3333 2.66666 12.214 2.66666 10.8333V9.83329C2.66666 9.55715 2.89052 9.33329 3.16666 9.33329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.83329C8.27614 2.83329 8.5 3.05715 8.5 3.33329V9.49996C8.5 9.7761 8.27614 9.99996 8 9.99996C7.72386 9.99996 7.5 9.7761 7.5 9.49996V3.33329C7.5 3.05715 7.72386 2.83329 8 2.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66663C8.13903 2.66663 8.27179 2.72452 8.36639 2.8264L10.5331 5.15973C10.721 5.36209 10.7092 5.67845 10.5069 5.86636C10.3045 6.05426 9.98817 6.04254 9.80027 5.84018L8 3.90143L6.19973 5.84018C6.01183 6.04254 5.69546 6.05426 5.49311 5.86636C5.29075 5.67845 5.27903 5.36209 5.46693 5.15973L7.6336 2.8264C7.72821 2.72452 7.86096 2.66663 8 2.66663Z",fill:"currentColor"})]}))})),Vv=n.g.gd,Hv=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vv.UsedExtensionsFinder.scanEventsFunctionsExtension(t,n).getUsedExtensions().toNewVectorString().toJSArray().filter((function(e){return e!==n.getName()&&t.hasEventsFunctionsExtensionNamed(e)})).map((function(e){return{extensionName:e,extensionVersion:t.getEventsFunctionsExtension(e).getVersion()}})),o=r.getEventsFunctionsExtensionWriter()){e.next=4;break}throw new Error("The extension can't be exported because it's not supported by the web-app.");case 4:return e.next=6,o.chooseEventsFunctionExtensionFile(n.getName());case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return");case 9:return l=(0,Ct.XH)(n,"serializeToExternal"),i.length>0&&(l.requiredExtensions=i),e.next=13,o.writeSerializedObject(l,s);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),zv=function(e){var t=c.useContext(di.Z),n="gdevelop-extension-store"===e.eventsFunctionsExtension.getOriginName();return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Export extension"}),secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/extensions/share-extension/"},"help"),(0,f.jsx)(T.Z,{label:n?(0,f.jsx)(w.Trans,{id:"Submit an update"}):(0,f.jsx)(w.Trans,{id:"Submit to the community"}),onClick:function(){return function(e){y.ZP.openExternalURL("https://github.com/GDevelopApp/GDevelop-extensions/issues/new?template="+(e?"extension-update.yml":"new-extension.yml"))}(n)}})],actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),keyboardFocused:!0,onClick:function(){e.onClose()}},"close"),(0,f.jsx)(E.vF,{icon:(0,f.jsx)(Uv,{}),primary:!0,label:(0,f.jsx)(w.Trans,{id:"Export to a file"}),onClick:function(){Hv(e.project,e.eventsFunctionsExtension,t)}},"export")],open:!0,onRequestClose:e.onClose,maxWidth:"sm",children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"You can export the extension to a file to easily import it in another project. If your extension is providing useful and reusable functions or behaviors, consider sharing it with the GDevelop community!"})})})})})};function Wv(e){var t=e.project,n=e.resourceManagementProps,r=e.eventsFunctionsExtension,i=e.onClose,a=e.open,o=c.useState("options"),l=(0,s.Z)(o,2),u=l[0],d=l[1],p=c.useState(!1),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=c.useState(!1),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=c.useContext(di.Z).getEventsFunctionsExtensionWriter();return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"{0} options",values:{0:r.getName()}}),secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/extensions/create"},"help"),j?(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(Uv,{}),label:(0,f.jsx)(w.Trans,{id:"Export extension"}),onClick:function(){C(!0)},disabled:g},"export"):null],actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!0,keyboardFocused:!0,onClick:i,disabled:g},"close")],open:a,fixedContent:(0,f.jsx)(B.m,{value:u,onChange:d,options:[{value:"options",label:(0,f.jsx)(w.Trans,{id:"Options"})},{value:"dependencies",label:(0,f.jsx)(w.Trans,{id:"Dependencies"})}]}),cannotBeDismissed:g,onRequestClose:g?function(){}:i,children:["options"===u&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(Av,{eventsFunctionsExtension:r,onLoadChange:m,isLoading:g})}),"dependencies"===u&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(Bv,{project:t,resourceManagementProps:n,eventsFunctionsExtension:r})}),b&&(0,f.jsx)(zv,{project:t,eventsFunctionsExtension:r,onClose:function(){return C(!1)}})]})}var Gv=n.g.gd,Yv=y.ZP.isDev();function qv(e){var t=e.project,n=e.eventsFunctionsExtension,r=e.eventsBasedBehavior,i=e.unsavedChanges,a=e.onConfigurationUpdated,o=(0,gt.Z)(),s=c.useCallback((function(){i&&i.triggerUnsavedChanges(),o()}),[o,i]),l=c.useMemo((function(){return Gv.WholeProjectRefactorer.getAllObjectTypesUsingEventsBasedBehavior(t,n,r).toNewVectorString().toJSArray()}),[t,n,r]);return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(ft.Z,{children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(Y.Z,{identifier:"events-based-behavior-explanation",kind:"info",children:(0,f.jsx)(w.Trans,{id:"This is the configuration of your behavior. Make sure to choose a proper internal name as it's hard to change it later. Enter a description explaining what the behavior is doing to the object."})}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Internal Name"}),value:r.getName(),disabled:!0,fullWidth:!0}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Name displayed in editor"}),value:r.getFullName(),onChange:function(e){r.setFullName(e),s()},fullWidth:!0}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Description"}),helperMarkdownText:n._({id:"Explain what the behavior is doing to the object. Start with a verb when possible."}),value:r.getDescription(),onChange:function(e){r.setDescription(e),s()},multiline:!0,fullWidth:!0,rows:3}),(0,f.jsx)(Eg,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Object on which this behavior can be used"}),project:t,value:r.getObjectType(),onChange:function(e){r.setObjectType(e),s()},allowedObjectTypes:0===l.length?void 0:1===l.length?["",l[0]]:[""]}),l.length>1&&(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"This behavior is being used by multiple types of objects. Thus, you can't restrict its usage to any particular object type. All the object types using this behavior are listed here: {0}",values:{0:l.join(", ")}})}),Yv&&(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Visibility in quick customization dialog"}),value:r.getQuickCustomizationVisibility(),onChange:function(e,t,n){var i=n;r.setQuickCustomizationVisibility(i),s()},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:Gv.QuickCustomization.Default,label:{id:"Default (visible)"}}),(0,f.jsx)(P.Z,{value:Gv.QuickCustomization.Visible,label:{id:"Always visible"}}),(0,f.jsx)(P.Z,{value:Gv.QuickCustomization.Hidden,label:{id:"Hidden"}})]}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Private"}),checked:r.isPrivate(),onCheck:function(e,t){r.setPrivate(t),a&&a("isPrivate"),s()},tooltipOrHelperText:r.isPrivate()?(0,f.jsx)(w.Trans,{id:"This behavior won't be visible in the scene and events editors."}):(0,f.jsx)(w.Trans,{id:"This behavior will be visible in the scene and events editors."})}),0===r.getEventsFunctions().getEventsFunctionsCount()&&(0,f.jsx)(Y.Z,{identifier:"empty-events-based-behavior-explanation",kind:"info",children:(0,f.jsx)(w.Trans,{id:"Once you're done, start adding some functions to the behavior. Then, test the behavior by adding it to an object in a scene."})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(An.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")})]})})}})}var Jv=n(41370),Xv=n.g.gd,Kv="Properties",Qv=(0,ut.x)("behavior-properties-list"),$v={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center",padding:"8px 0px"}},eb=function(){var e=(0,Ye.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing properties"},message:{id:"These properties already exist:{0}Do you want to replace them?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},tb=function(e,t){var n=new Xv.VectorString;n.push_back(t),e.setExtraInfo(n),n.delete()},nb=["name","type"],rb=function(e,t,n){var r=t.getVariablesContainersList(),i=t.getObjectsContainersList();return(0,xt.Z)(Xv.Project.getSafeName(n),(function(t){return e.has(t)||r.has(t)||i.hasObjectNamed(t)||nb.includes(t)}))},ib=function(e){return(0,mt.mapVector)(e.getChoices(),(function(e){return{value:e.getValue(),label:e.getLabel()}}))};function ab(e){var t=e.project,n=e.projectScopedContainersAccessor,u=e.extension,d=e.eventsBasedBehavior,p=e.properties,h=e.isSceneProperties,g=e.onPropertiesUpdated,m=e.onRenameProperty,x=e.onPropertyTypeChanged,v=e.onEventsFunctionsAdded,b=e.behaviorObjectType,C=c.useRef(null),y=c.useState(null),Z=(0,s.Z)(y,2),k=Z[0],T=Z[1],S=c.useRef(null);c.useEffect((function(){C.current&&S.current&&k&&(C.current.scrollTo(S.current),T(null),S.current=null)}),[k]);var I=c.useRef(null),E=c.useContext(j.Z),L=eb(),A=(0,gt.Z)(),O=c.useState(""),R=(0,s.Z)(O,2),F=R[0],D=R[1],N=c.useState([]),B=(0,s.Z)(N,2),U=B[0],V=B[1],H=c.useCallback((function(){var e=(0,mt.mapVector)(p,(function(e,t){var n=F.toLowerCase();return e.getName().toLowerCase().includes(n)||e.getLabel().toLowerCase().includes(n)||e.getGroup().toLowerCase().includes(n)?e.getName():null})).filter(Boolean);V(e)}),[p,F]);c.useEffect((function(){F?H():V([])}),[F,H]);var z=c.useCallback((function(e){var t=(0,xt.Z)("Property",(function(e){return p.has(e)}));p.insertNew(t,e).setType("Number"),A(),g&&g(),T(t),D("")}),[A,g,p]),W=c.useCallback((function(){z(p.getCount())}),[z,p]),Y=c.useCallback((function(e){p.remove(e),A(),g&&g()}),[A,g,p]),q=c.useCallback((function(e){vt.Z.set(Kv,[{name:e.getName(),serializedProperty:(0,Ct.XH)(e)}]),A()}),[A]),J=c.useCallback((function(e,t){var n=(0,xt.Z)(e.getName(),(function(e){return p.has(e)})),r=p.insertNew(n,t);(0,Ct.qx)(r,(0,Ct.XH)(e)),r.setName(n),A()}),[A,p]),X=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=vt.Z.get(Kv),r=bt.$.extractArray(n)){e.next=4;break}return e.abrupt("return");case 4:if(i=[],o=[],r.forEach((function(e){var t=bt.$.extractStringProperty(e,"name"),n=bt.$.extractObjectProperty(e,"serializedProperty");t&&n&&(p.has(t)?o.push({name:t,serializedProperty:n}):i.push({name:t,serializedProperty:n}))})),s=null,l=t,i.forEach((function(e){var t=e.name,n=e.serializedProperty,r=p.insertNew(t,l);l++,(0,Ct.qx)(r,n),s||(s=t)})),c=!1,!(o.length>0)){e.next=16;break}return e.next=14,L(o.map((function(e){return e.name})));case 14:(c=e.sent)&&o.forEach((function(e){var t=e.name,n=e.serializedProperty;if(p.has(t)){var r=p.get(t);(0,Ct.qx)(r,n)}}));case 16:D(""),A(),s?T(s):1===o.length&&T(o[0].name),(s||c)&&g&&g();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[A,p,L,g]),K=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(p.getCount());case 2:case"end":return e.stop()}}),e)}))),[p,X]),Q=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(p.getPosition(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,X]),ee=c.useCallback((function(e,t){p.move(e,t),A(),g&&g()}),[A,g,p]),te=c.useCallback((function(e){var t=I.current;if(t){var n=p.getPosition(t),r=p.getPosition(e);p.move(n,r>n?r-1:r),A(),g&&g()}}),[p,A,g]),ne=c.useCallback((function(e){return function(t){e.clearChoices();var n,r=(0,i.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.addChoice(a.value,a.label)}}catch(o){r.e(o)}finally{r.f()}ib(e).some((function(t){return t.value===e.getValue()}))||e.setValue(""),A()}}),[A]),re=c.useCallback((function(){for(var e=new Set,t=0;t<p.size();t++){var n=p.at(t).getGroup()||"";e.add(n)}return(0,r.Z)(e).sort((function(e,t){return e.localeCompare(t)}))}),[p]),ie=c.useCallback((function(e,t){e.setHidden(t),A(),g&&g()}),[A,g]),ae=c.useCallback((function(e,t){e.setAdvanced(t),A(),g&&g()}),[A,g]),oe=c.useCallback((function(e,t){e.setDeprecated(t),A(),g&&g()}),[A,g]),se=vt.Z.has(Kv);return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:p.getCount()>0?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(ft.Z,{ref:C,children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,mt.mapVector)(p,(function(e,i){var a=k===e.getName()?S:null;return F&&!U.includes(e.getName())?null:(0,f.jsx)(Qv,{beginDrag:function(){return I.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){te(e)},children:function(o){var s=o.connectDragSource,c=o.connectDropTarget,C=o.isOver,j=o.canDrop;return c((0,f.jsxs)("div",{style:$v.rowContainer,children:[C&&(0,f.jsx)(dt.Z,{canDrop:j}),(0,f.jsxs)("div",{ref:a,style:(0,l.Z)((0,l.Z)({},$v.rowContent),{},{backgroundColor:E.list.itemsBackgroundColor}),children:[s((0,f.jsx)("span",{children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(ct.V,{})})})),(0,f.jsxs)(_.ep,{expand:!0,noMargin:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,f.jsx)(yn.Z,{margin:"none",commitOnBlur:!0,translatableHintText:{id:"Enter the property name"},value:e.getName(),onChange:function(t){if(t!==e.getName()){var r=n.get(),i=rb(p,r,t);m(e.getName(),i),e.setName(i),A(),g&&g()}},fullWidth:!0})}),(0,f.jsx)(M.x1,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:(0,f.jsxs)(Hn.Z,{margin:"none",disabled:"Behavior"===e.getType()&&!e.isHidden(),value:e.isHidden()?"Hidden":e.isDeprecated()?"Deprecated":e.isAdvanced()?"Advanced":"Visible",onChange:function(t,n,r){"Hidden"===r?(ie(e,!0),oe(e,!1),ae(e,!1)):"Deprecated"===r?(ie(e,!1),oe(e,!0),ae(e,!1)):"Advanced"===r?(ie(e,!1),oe(e,!1),ae(e,!0)):"Visible"===r&&(ie(e,!1),oe(e,!1),ae(e,!1))},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"Visible",label:{id:"Visible in editor"}},"visibility-visible"),(0,f.jsx)(P.Z,{value:"Advanced",label:{id:"Advanced"}},"visibility-advanced"),(0,f.jsx)(P.Z,{value:"Deprecated",label:{id:"Deprecated"}},"visibility-deprecated"),(0,f.jsx)(P.Z,{value:"Hidden",label:{id:"Hidden"}},"visibility-hidden")]})})]}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",children:(0,f.jsx)(Mh.Z,{})}),buildMenuTemplate:function(n){return[{label:n._({id:"Add a property below"}),click:function(){return z(i+1)}},{label:n._({id:"Delete"}),click:function(){return Y(e.getName())}},{label:n._({id:"Copy"}),click:function(){return q(e)}},{label:n._({id:"Paste"}),click:function(){return Q(e)},enabled:se},{label:n._({id:"Duplicate"}),click:function(){return J(e,i+1)}},{type:"separator"},{label:n._({id:"Move up"}),click:function(){return ee(i,i-1)},enabled:i-1>=0},{label:n._({id:"Move down"}),click:function(){return ee(i,i+1)},enabled:i+1<p.getCount()},{label:n._({id:"Generate expression and action"}),click:function(){Xv.PropertyFunctionGenerator.generateBehaviorGetterAndSetter(t,u,d,e,!!h),v()},enabled:Xv.PropertyFunctionGenerator.canGenerateGetterAndSetter(d,e)}].concat((0,r.Z)((0,Jv.Z)({i18n:n,visibility:e.getQuickCustomizationVisibility(),onChangeVisibility:function(t){e.setQuickCustomizationVisibility(t),A(),g&&g()}})))}}),(0,f.jsx)(M.LZ,{})]}),(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,children:[(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Type"}),value:e.getType(),onChange:function(t,n,r){e.setType(r),"Behavior"===r&&e.setHidden(!1),"Resource"===r&&tb(e,"json"),A(),x(e.getName()),g&&g()},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"Number",label:{id:"Number"}},"property-type-number"),(0,f.jsx)(P.Z,{value:"String",label:{id:"String"}},"property-type-string"),(0,f.jsx)(P.Z,{value:"Boolean",label:{id:"Boolean (checkbox)"}},"property-type-boolean"),(0,f.jsx)(P.Z,{value:"Choice",label:{id:"String from a list of options (text)"}},"property-type-choice"),(0,f.jsx)(P.Z,{value:"Color",label:{id:"Color (text)"}},"property-type-color"),(0,f.jsx)(P.Z,{value:"ObjectAnimationName",label:{id:"Object animation (text)"}},"property-type-object-animation-name"),(0,f.jsx)(P.Z,{value:"KeyboardKey",label:{id:"Keyboard key (text)"}},"property-type-keyboard-key"),(0,f.jsx)(P.Z,{value:"MultilineString",label:{id:"Multiline text"}},"property-type-text-area"),(0,f.jsx)(P.Z,{value:"Resource",label:{id:"Resource"}},"property-type-resource"),!h&&(0,f.jsx)(P.Z,{value:"Behavior",label:{id:"Required behavior"}},"property-type-behavior")]}),"Number"===e.getType()&&(0,f.jsx)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Measurement unit"}),value:e.getMeasurementUnit().getName(),onChange:function(t,n,r){e.setMeasurementUnit(Xv.MeasurementUnit.getDefaultMeasurementUnitByName(r)),A(),g&&g()},fullWidth:!0,children:(0,mt.mapFor)(0,Xv.MeasurementUnit.getDefaultMeasurementUnitsCount(),(function(e){var t=Xv.MeasurementUnit.getDefaultMeasurementUnitAtIndex(e),n=(0,Gn.jz)(t),r=t.getLabel()+(n.length>0?"\u2002\u2014\u2002"+n:"");return(0,f.jsx)(P.Z,{value:t.getName(),label:r},"measurement-unit-"+t.getName())}))}),("String"===e.getType()||"Number"===e.getType()||"ObjectAnimationName"===e.getType()||"KeyboardKey"===e.getType()||"MultilineString"===e.getType())&&(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),hintText:"Number"===e.getType()?"123":"ABC",value:e.getValue(),onChange:function(t){e.setValue(t),A(),g&&g()},multiline:"MultilineString"===e.getType(),fullWidth:!0}),"Boolean"===e.getType()&&(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),value:"true"===e.getValue()?"true":"false",onChange:function(t,n,r){e.setValue(r),A(),g&&g()},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"true",label:{id:"True (checked)"}},"boolean-true"),(0,f.jsx)(P.Z,{value:"false",label:{id:"False (not checked)"}},"boolean-false")]}),"Behavior"===e.getType()&&(0,f.jsx)(Mg,{project:t,eventsFunctionsExtension:u,objectType:b||"",value:0===e.getExtraInfo().size()?"":e.getExtraInfo().at(0),onChange:function(r){var i=e.getExtraInfo();0===i.size()?i.push_back(r):i.set(0,r);var a=Xv.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),r),o=n.get(),s=rb(p,o,a.getDefaultName());e.setName(s),e.setLabel(a.getFullName()),A(),g&&g()},disabled:!1}),"Color"===e.getType()&&(0,f.jsx)(Jn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),disableAlpha:!0,fullWidth:!0,color:e.getValue(),onChange:function(t){e.setValue(t),A(),g&&g()}}),"Resource"===e.getType()&&(0,f.jsx)(Og,{value:e.getExtraInfo().size()>0?e.getExtraInfo().at(0):"",onChange:function(t,n,r){tb(e,r),A(),g&&g()},fullWidth:!0}),"Choice"===e.getType()&&(0,f.jsx)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),value:e.getValue(),onChange:function(t,n,r){e.setValue(r),A(),g&&g()},fullWidth:!0,children:ib(e).map((function(e,t){return(0,f.jsx)(P.Z,{value:e.value,label:e.value+(e.label&&e.label!==e.value?" \u2014 ".concat(e.label):"")},t)}))})]}),"Choice"===e.getType()&&(0,f.jsx)(Lg,{choices:ib(e),setChoices:ne(e)}),(0,f.jsxs)(_.ep,{noMargin:!0,children:[(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Short label"}),translatableHintText:{id:"Make the purpose of the property easy to understand"},floatingLabelFixed:!0,value:e.getLabel(),onChange:function(t){e.setLabel(t),A()},fullWidth:!0}),(0,f.jsx)(dr.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group"},fullWidth:!0,value:e.getGroup(),onChange:function(t){e.setGroup(t),A(),g&&g()},dataSource:re().map((function(e){return{text:e,value:e}})),openOnFocus:!0})]}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Description"}),translatableHintText:{id:"Optionally, explain the purpose of the property in more details"},floatingLabelFixed:!0,value:e.getDescription(),onChange:function(t){e.setDescription(t),A()},fullWidth:!0})]})})]},e.ptr))}},e.ptr)}))})}),(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{expand:!0,children:[(0,f.jsx)(Qe.Z,{leftIcon:(0,f.jsx)(Bg,{}),label:(0,f.jsx)(w.Trans,{id:"Paste"}),onClick:function(){K()},disabled:!se},"paste-properties"),(0,f.jsx)(Ge.Z,{value:F,onRequestSearch:function(){},onChange:function(e){return D(e)},placeholder:{id:"Search properties"}})]}),(0,f.jsx)(_.pJ,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Add a property"}),onClick:W,icon:(0,f.jsx)(it.Z,{})})})]})})]}):(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(pt.$,{title:(0,f.jsx)(w.Trans,{id:"Add your first property"}),description:(0,f.jsx)(w.Trans,{id:"Properties store data inside behaviors."}),actionLabel:(0,f.jsx)(w.Trans,{id:"Add a property"}),helpPagePath:"/behaviors/events-based-behaviors",helpPageAnchor:"add-and-use-properties-in-a-behavior",onAction:W,secondaryActionIcon:(0,f.jsx)(Bg,{}),secondaryActionLabel:se?(0,f.jsx)(w.Trans,{id:"Paste"}):null,onSecondaryAction:function(){K()}})})})}})}function ob(e){var t=e.eventsBasedBehavior,n=e.eventsFunctionsExtension,r=e.project,i=e.projectScopedContainersAccessor,a=e.onRenameProperty,o=e.onRenameSharedProperty,l=e.onPropertyTypeChanged,u=e.unsavedChanges,d=e.onEventsFunctionsAdded,p=e.onConfigurationUpdated,h=c.useState("configuration"),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useCallback((function(){u&&u.triggerUnsavedChanges()}),[u]);return(0,f.jsx)(Ki.Z,{children:(0,f.jsxs)(M.sg,{expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:(0,f.jsx)(B.m,{value:m,onChange:x,options:[{value:"configuration",label:(0,f.jsx)(w.Trans,{id:"Configuration"})},{value:"behavior-properties",label:(0,f.jsx)(w.Trans,{id:"Behavior properties"})},{value:"scene-properties",label:(0,f.jsx)(w.Trans,{id:"Scene properties"})}]})})}),"configuration"===m&&(0,f.jsx)(qv,{project:r,eventsFunctionsExtension:n,eventsBasedBehavior:t,unsavedChanges:u,onConfigurationUpdated:p}),"behavior-properties"===m&&(0,f.jsx)(ab,{project:r,projectScopedContainersAccessor:i,extension:n,eventsBasedBehavior:t,properties:t.getPropertyDescriptors(),onRenameProperty:a,behaviorObjectType:t.getObjectType(),onPropertiesUpdated:v,onPropertyTypeChanged:l,onEventsFunctionsAdded:d}),"scene-properties"===m&&(0,f.jsx)(ab,{isSceneProperties:!0,project:r,projectScopedContainersAccessor:i,extension:n,eventsBasedBehavior:t,properties:t.getSharedPropertyDescriptors(),onRenameProperty:o,onPropertiesUpdated:v,onPropertyTypeChanged:l,onEventsFunctionsAdded:d})]})})}var sb=n.g.gd,lb=y.ZP.isDev();function cb(e){var t=e.eventsFunctionsExtension,n=e.eventsBasedObject,r=e.onOpenCustomObjectEditor,i=e.unsavedChanges,a=e.onEventsBasedObjectChildrenEdited,o=(0,gt.Z)(),s=c.useCallback((function(){i&&i.triggerUnsavedChanges(),o()}),[o,i]);return(0,f.jsx)(ft.Z,{children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(Y.Z,{identifier:"events-based-object-explanation",kind:"info",children:(0,f.jsx)(w.Trans,{id:"This is the configuration of your object. Make sure to choose a proper internal name as it's hard to change it later."})}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Internal Name"}),value:n.getName(),disabled:!0,fullWidth:!0}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Name displayed in editor"}),value:n.getFullName(),onChange:function(e){n.setFullName(e),s()},fullWidth:!0}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Description"}),floatingLabelFixed:!0,translatableHintText:{id:"The description of the object should explain what the object is doing, and, briefly, how to use it."},value:n.getDescription(),onChange:function(e){n.setDescription(e),s()},multiline:!0,fullWidth:!0,rows:3}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default name for created objects"}),value:n.getDefaultName()||n.getName(),onChange:function(e){n.setDefaultName(sb.Project.getSafeName(e)),s()},fullWidth:!0}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Use 3D rendering"}),checked:n.isRenderedIn3D(),onCheck:function(e,t){n.markAsRenderedIn3D(t),s()}}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Expand inner area with parent"}),checked:n.isInnerAreaFollowingParentSize(),onCheck:function(e,t){n.markAsInnerAreaFollowingParentSize(t),s(),a(n)}}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Contains text"}),checked:n.isTextContainer(),onCheck:function(e,t){n.markAsTextContainer(t),s()}}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Has animations (JavaScript only)"}),checked:n.isAnimatable(),onCheck:function(e,t){n.markAsAnimatable(t),s()}}),lb&&(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Use legacy renderer"}),checked:n.isUsingLegacyInstancesRenderer(),onCheck:function(e,t){n.makAsUsingLegacyInstancesRenderer(t),s(),a(n)}}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Private"}),checked:n.isPrivate(),onCheck:function(e,t){n.setPrivate(t),s(),a(n)},tooltipOrHelperText:n.isPrivate()?(0,f.jsx)(w.Trans,{id:"This object won't be visible in the scene and events editors."}):(0,f.jsx)(w.Trans,{id:"This object will be visible in the scene and events editors."})}),"gdevelop-extension-store"===t.getOriginName()?(0,f.jsx)(je.Z,{kind:"error",renderRightButton:function(){return(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Edit the default variant"}),primary:!0,onClick:r})},children:(0,f.jsx)(w.Trans,{id:"The default variant is erased when the extension is updated."})}):(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"center",children:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Open visual editor for the object"}),primary:!0,onClick:r})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(An.Z,{helpPagePath:"/objects/custom-objects-prefab-template"},"help")})]})})}var ub=n.g.gd,db="Properties",pb=(0,ut.x)("behavior-properties-list"),fb={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center",padding:"8px 0px"}},hb=function(){var e=(0,Ye.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing properties"},message:{id:"These properties already exist:{0}Do you want to replace them?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},gb=function(e,t){var n=new ub.VectorString;n.push_back(t),e.setExtraInfo(n),n.delete()},mb=["name","type"],xb=function(e,t,n){var r=t.getVariablesContainersList(),i=t.getObjectsContainersList();return(0,xt.Z)(ub.Project.getSafeName(n),(function(t){return e.has(t)||r.has(t)||i.hasObjectNamed(t)||mb.includes(t)}))},vb=function(e){return(0,mt.mapVector)(e.getChoices(),(function(e){return{value:e.getValue(),label:e.getLabel()}}))};function bb(e){var t=e.project,n=e.projectScopedContainersAccessor,u=e.extension,d=e.eventsBasedObject,p=e.onPropertiesUpdated,h=e.onRenameProperty,g=e.onPropertyTypeChanged,m=e.onEventsFunctionsAdded,x=c.useRef(null),v=c.useState(null),b=(0,s.Z)(v,2),C=b[0],y=b[1],Z=c.useRef(null);c.useEffect((function(){x.current&&Z.current&&C&&(x.current.scrollTo(Z.current),y(null),Z.current=null)}),[C]);var k=c.useRef(null),T=c.useContext(j.Z),S=hb(),I=(0,gt.Z)(),E=c.useState(""),L=(0,s.Z)(E,2),A=L[0],O=L[1],R=c.useState([]),F=(0,s.Z)(R,2),D=F[0],N=F[1],B=c.useCallback((function(){var e=d.getPropertyDescriptors(),t=(0,mt.mapVector)(e,(function(e,t){var n=A.toLowerCase();return e.getName().toLowerCase().includes(n)||e.getLabel().toLowerCase().includes(n)||e.getGroup().toLowerCase().includes(n)?e.getName():null})).filter(Boolean);N(t)}),[d,A]);c.useEffect((function(){A?B():N([])}),[A,B]);var U=c.useCallback((function(e){var t=d.getPropertyDescriptors(),n=(0,xt.Z)("Property",(function(e){return t.has(e)}));t.insertNew(n,e).setType("Number"),I(),p&&p(),y(n),O("")}),[d,I,p]),V=c.useCallback((function(){var e=d.getPropertyDescriptors();U(e.getCount())}),[U,d]),H=c.useCallback((function(e){d.getPropertyDescriptors().remove(e),I(),p&&p()}),[d,I,p]),z=c.useCallback((function(e){vt.Z.set(db,[{name:e.getName(),serializedProperty:(0,Ct.XH)(e)}]),I()}),[I]),W=c.useCallback((function(e,t){var n=d.getPropertyDescriptors(),r=(0,xt.Z)(e.getName(),(function(e){return n.has(e)})),i=n.insertNew(r,t);(0,Ct.qx)(i,(0,Ct.XH)(e)),i.setName(r),I()}),[I,d]),Y=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.getPropertyDescriptors(),r=vt.Z.get(db),i=bt.$.extractArray(r)){e.next=5;break}return e.abrupt("return");case 5:if(o=[],s=[],i.forEach((function(e){var t=bt.$.extractStringProperty(e,"name"),r=bt.$.extractObjectProperty(e,"serializedProperty");t&&r&&(n.has(t)?s.push({name:t,serializedProperty:r}):o.push({name:t,serializedProperty:r}))})),l=null,c=t,o.forEach((function(e){var t=e.name,r=e.serializedProperty,i=n.insertNew(t,c);c++,(0,Ct.qx)(i,r),l||(l=t)})),u=!1,!(s.length>0)){e.next=17;break}return e.next=15,S(s.map((function(e){return e.name})));case 15:(u=e.sent)&&s.forEach((function(e){var t=e.name,r=e.serializedProperty;if(n.has(t)){var i=n.get(t);(0,Ct.qx)(i,r)}}));case 17:O(""),I(),l?y(l):1===s.length&&y(s[0].name),(l||u)&&p&&p();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,I,S,p]),q=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.getPropertyDescriptors(),e.next=3,Y(t.getCount());case 3:case"end":return e.stop()}}),e)}))),[d,Y]),J=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.getPropertyDescriptors(),e.next=3,Y(n.getPosition(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,Y]),X=c.useCallback((function(e,t){d.getPropertyDescriptors().move(e,t),I(),p&&p()}),[d,I,p]),K=c.useCallback((function(e){var t=k.current;if(t){var n=d.getPropertyDescriptors(),r=n.getPosition(t),i=n.getPosition(e);n.move(r,i>r?i-1:i),I(),p&&p()}}),[d,I,p]),Q=c.useCallback((function(e){return function(t){e.clearChoices();var n,r=(0,i.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.addChoice(a.value,a.label)}}catch(o){r.e(o)}finally{r.f()}vb(e).some((function(t){return t.value===e.getValue()}))||e.setValue(""),I()}}),[I]),ee=c.useCallback((function(){for(var e=d.getPropertyDescriptors(),t=new Set,n=0;n<e.size();n++){var i=e.at(n).getGroup()||"";t.add(i)}return(0,r.Z)(t).sort((function(e,t){return e.localeCompare(t)}))}),[d]),te=c.useCallback((function(e,t){e.setHidden(t),I(),p&&p()}),[I,p]),ne=c.useCallback((function(e,t){e.setAdvanced(t),I(),p&&p()}),[I,p]),re=c.useCallback((function(e,t){e.setDeprecated(t),I(),p&&p()}),[I,p]),ie=vt.Z.has(db),ae=d.getPropertyDescriptors();return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:ae.getCount()>0?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(ft.Z,{ref:x,children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,mt.mapVector)(ae,(function(e,r){var i=C===e.getName()?Z:null;return A&&!D.includes(e.getName())?null:(0,f.jsx)(pb,{beginDrag:function(){return k.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){K(e)},children:function(a){var o=a.connectDragSource,s=a.connectDropTarget,c=a.isOver,x=a.canDrop;return s((0,f.jsxs)("div",{style:fb.rowContainer,children:[c&&(0,f.jsx)(dt.Z,{canDrop:x}),(0,f.jsxs)("div",{ref:i,style:(0,l.Z)((0,l.Z)({},fb.rowContent),{},{backgroundColor:T.list.itemsBackgroundColor}),children:[o((0,f.jsx)("span",{children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(ct.V,{})})})),(0,f.jsxs)(_.ep,{expand:!0,noMargin:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,f.jsx)(yn.Z,{margin:"none",commitOnBlur:!0,translatableHintText:{id:"Enter the property name"},value:e.getName(),onChange:function(t){if(t!==e.getName()){var r=n.get(),i=xb(ae,r,t);h(e.getName(),i),e.setName(i),I(),p&&p()}},fullWidth:!0})}),(0,f.jsx)(M.x1,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:(0,f.jsxs)(Hn.Z,{margin:"none",value:e.isHidden()?"Hidden":e.isDeprecated()?"Deprecated":e.isAdvanced()?"Advanced":"Visible",onChange:function(t,n,r){"Hidden"===r?(te(e,!0),re(e,!1),ne(e,!1)):"Deprecated"===r?(te(e,!1),re(e,!0),ne(e,!1)):"Advanced"===r?(te(e,!1),re(e,!1),ne(e,!0)):"Visible"===r&&(te(e,!1),re(e,!1),ne(e,!1))},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"Visible",label:{id:"Visible in editor"}},"visibility-visible"),(0,f.jsx)(P.Z,{value:"Advanced",label:{id:"Advanced"}},"visibility-advanced"),(0,f.jsx)(P.Z,{value:"Deprecated",label:{id:"Deprecated"}},"visibility-deprecated"),(0,f.jsx)(P.Z,{value:"Hidden",label:{id:"Hidden"}},"visibility-hidden")]})})]}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",children:(0,f.jsx)(Mh.Z,{})}),buildMenuTemplate:function(n){return[{label:n._({id:"Add a property below"}),click:function(){return U(r+1)}},{label:n._({id:"Delete"}),click:function(){return H(e.getName())}},{label:n._({id:"Copy"}),click:function(){return z(e)}},{label:n._({id:"Paste"}),click:function(){return J(e)},enabled:ie},{label:n._({id:"Duplicate"}),click:function(){return W(e,r+1)}},{type:"separator"},{label:n._({id:"Move up"}),click:function(){return X(r,r-1)},enabled:r-1>=0},{label:n._({id:"Move down"}),click:function(){return X(r,r+1)},enabled:r+1<ae.getCount()},{label:n._({id:"Generate expression and action"}),click:function(){ub.PropertyFunctionGenerator.generateObjectGetterAndSetter(t,u,d,e),m()},enabled:ub.PropertyFunctionGenerator.canGenerateGetterAndSetter(d,e)}]}}),(0,f.jsx)(M.LZ,{})]}),(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,children:[(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Type"}),value:e.getType(),onChange:function(t,n,r){e.setType(r),"Resource"===r&&gb(e,"json"),I(),g(e.getName()),p&&p()},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"Number",label:{id:"Number"}}),(0,f.jsx)(P.Z,{value:"String",label:{id:"String"}}),(0,f.jsx)(P.Z,{value:"Boolean",label:{id:"Boolean (checkbox)"}}),(0,f.jsx)(P.Z,{value:"Choice",label:{id:"String from a list of options (text)"}}),(0,f.jsx)(P.Z,{value:"Color",label:{id:"Color (text)"}}),(0,f.jsx)(P.Z,{value:"LeaderboardId",label:{id:"Leaderboard (text)"}}),(0,f.jsx)(P.Z,{value:"MultilineString",label:{id:"Multiline text"}},"property-type-text-area"),(0,f.jsx)(P.Z,{value:"Resource",label:{id:"Resource"}},"property-type-resource")]}),"Number"===e.getType()&&(0,f.jsx)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Measurement unit"}),value:e.getMeasurementUnit().getName(),onChange:function(t,n,r){e.setMeasurementUnit(ub.MeasurementUnit.getDefaultMeasurementUnitByName(r)),I(),p&&p()},fullWidth:!0,children:(0,mt.mapFor)(0,ub.MeasurementUnit.getDefaultMeasurementUnitsCount(),(function(e){var t=ub.MeasurementUnit.getDefaultMeasurementUnitAtIndex(e),n=(0,Gn.jz)(t),r=t.getLabel()+(n.length>0?"\u2002\u2014\u2002"+n:"");return(0,f.jsx)(P.Z,{value:t.getName(),label:r})}))}),("String"===e.getType()||"Number"===e.getType()||"MultilineString"===e.getType())&&(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),hintText:"Number"===e.getType()?"123":"ABC",value:e.getValue(),onChange:function(t){e.setValue(t),I(),p&&p()},multiline:"MultilineString"===e.getType(),fullWidth:!0}),"Boolean"===e.getType()&&(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),value:"true"===e.getValue()?"true":"false",onChange:function(t,n,r){e.setValue(r),I(),p&&p()},fullWidth:!0,children:[(0,f.jsx)(P.Z,{value:"true",label:{id:"True (checked)"}}),(0,f.jsx)(P.Z,{value:"false",label:{id:"False (not checked)"}})]}),"Color"===e.getType()&&(0,f.jsx)(Jn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Color"}),disableAlpha:!0,fullWidth:!0,color:e.getValue(),onChange:function(t){e.setValue(t),I(),p&&p()}}),"Choice"===e.getType()&&(0,f.jsx)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default value"}),value:e.getValue(),onChange:function(t,n,r){e.setValue(r),I(),p&&p()},fullWidth:!0,children:vb(e).map((function(e,t){return(0,f.jsx)(P.Z,{value:e.value,label:e.value+(e.label?" \u2014 ".concat(e.label):"")},t)}))}),"Resource"===e.getType()&&(0,f.jsx)(Og,{value:e.getExtraInfo().size()>0?e.getExtraInfo().at(0):"",onChange:function(t,n,r){gb(e,r),I(),p&&p()},fullWidth:!0})]}),"Choice"===e.getType()&&(0,f.jsx)(Lg,{choices:vb(e),setChoices:Q(e)}),(0,f.jsxs)(_.ep,{noMargin:!0,children:[(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Short label"}),translatableHintText:{id:"Make the purpose of the property easy to understand"},floatingLabelFixed:!0,value:e.getLabel(),onChange:function(t){e.setLabel(t),I()},fullWidth:!0}),(0,f.jsx)(dr.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Group name"}),hintText:{id:"Leave it empty to use the default group"},fullWidth:!0,value:e.getGroup(),onChange:function(t){e.setGroup(t),I(),p&&p()},dataSource:ee().map((function(e){return{text:e,value:e}})),openOnFocus:!0})]}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Description"}),translatableHintText:{id:"Optionally, explain the purpose of the property in more details"},floatingLabelFixed:!0,value:e.getDescription(),onChange:function(t){e.setDescription(t),I()},fullWidth:!0})]})})]},e.ptr))}},e.ptr)}))})}),(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{expand:!0,children:[(0,f.jsx)(Qe.Z,{leftIcon:(0,f.jsx)(Bg,{}),label:(0,f.jsx)(w.Trans,{id:"Paste"}),onClick:function(){q()},disabled:!ie},"paste-properties"),(0,f.jsx)(Ge.Z,{value:A,onRequestSearch:function(){},onChange:function(e){return O(e)},placeholder:{id:"Search properties"}})]}),(0,f.jsx)(_.pJ,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Add a property"}),onClick:V,icon:(0,f.jsx)(it.Z,{})})})]})})]}):(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(pt.$,{title:(0,f.jsx)(w.Trans,{id:"Add your first property"}),description:(0,f.jsx)(w.Trans,{id:"Properties store data inside objects."}),actionLabel:(0,f.jsx)(w.Trans,{id:"Add a property"}),helpPagePath:"/behaviors/events-based-behaviors",helpPageAnchor:"add-and-use-properties-in-a-behavior",onAction:V,secondaryActionIcon:(0,f.jsx)(Bg,{}),secondaryActionLabel:ie?(0,f.jsx)(w.Trans,{id:"Paste"}):null,onSecondaryAction:function(){q()}})})})}})}function Cb(e){var t=e.project,n=e.projectScopedContainersAccessor,r=e.eventsFunctionsExtension,i=e.eventsBasedObject,a=e.onRenameProperty,o=e.onPropertyTypeChanged,l=e.onEventsFunctionsAdded,u=e.onOpenCustomObjectEditor,d=e.unsavedChanges,p=e.onEventsBasedObjectChildrenEdited,h=c.useState("configuration"),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useCallback((function(){d&&d.triggerUnsavedChanges()}),[d]);return(0,f.jsx)(Ki.Z,{children:(0,f.jsxs)(M.sg,{expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:(0,f.jsx)(B.m,{value:m,onChange:x,options:[{value:"configuration",label:(0,f.jsx)(w.Trans,{id:"Configuration"})},{value:"properties",label:(0,f.jsx)(w.Trans,{id:"Properties"})}]})})}),"configuration"===m&&(0,f.jsx)(cb,{eventsFunctionsExtension:r,eventsBasedObject:i,unsavedChanges:d,onOpenCustomObjectEditor:u,onEventsBasedObjectChildrenEdited:p}),"properties"===m&&(0,f.jsx)(bb,{project:t,projectScopedContainersAccessor:n,extension:r,eventsBasedObject:i,onRenameProperty:a,onPropertiesUpdated:v,onPropertyTypeChanged:o,onEventsFunctionsAdded:l})]})})}var jb=n(36607),yb=function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 -3 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Create",fillRule:"nonzero",children:[(0,f.jsx)("polygon",{id:"Shape",fill:"#2B3990",points:"24 8 18 2 18 6 14 6 14 10 18 10 18 14"}),(0,f.jsxs)("g",{id:"Group-2",fill:"#27AAE1",children:[(0,f.jsx)("rect",{id:"Rectangle-path",transform:"translate(2.999518, 3.574897) rotate(-45.000000) translate(-2.999518, -3.574897) ",x:"1.58553176",y:"0.746924118",width:"2.82797288",height:"5.65594576"}),(0,f.jsx)("rect",{id:"Rectangle-path",transform:"translate(10.999518, 11.574897) rotate(-45.000000) translate(-10.999518, -11.574897) ",x:"9.58553176",y:"8.74692412",width:"2.82797288",height:"5.65594576"}),(0,f.jsx)("rect",{id:"Rectangle-path",transform:"translate(2.999518, 11.574897) rotate(-135.000000) translate(-2.999518, -11.574897) ",x:"1.58553176",y:"8.74692412",width:"2.82797288",height:"5.65594576"}),(0,f.jsx)("rect",{id:"Rectangle-path",transform:"translate(10.999518, 3.574897) rotate(-135.000000) translate(-10.999518, -3.574897) ",x:"9.58553176",y:"0.746924118",width:"2.82797288",height:"5.65594576"})]})]})})}))},Zb=function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Step",children:[(0,f.jsx)("polygon",{id:"Shape",points:"0 3 0 6 3 6 3 9 7.5 4.5 3 0 3 3",fill:"#2b3990"}),(0,f.jsx)("polygon",{id:"polygon6",points:"16.5 3 16.5 6 19.5 6 19.5 9 24 4.5 19.5 0 19.5 3",fill:"#2b3990"}),(0,f.jsx)("circle",{id:"path825",cx:"12",cy:"4.5",r:"2.2509",fill:"none",stroke:"#27aae1",strokeWidth:"1.5"})]})})}))},kb=function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 -3 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Destroy",transform:"translate(0.000000, -1.000000)",fillRule:"nonzero",children:[(0,f.jsxs)("g",{id:"Group",transform:"translate(0.000000, 1.000000)",children:[(0,f.jsx)("polygon",{id:"Shape",fill:"#2B3990",points:"9.92307692 7.07692308 4.38461538 1.53846154 4.38461538 5.23076923 0.692307692 5.23076923 0.692307692 8.92307692 4.38461538 8.92307692 4.38461538 12.6153846"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(10.845138, 3.385446) rotate(-45.000000) translate(-10.845138, -3.385446) ",x:"9.53992021",y:"0.77500965",width:"2.6104365",height:"5.22087301"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(18.229754, 10.770062) rotate(-45.000000) translate(-18.229754, -10.770062) ",x:"16.9245356",y:"8.15962503",width:"2.6104365",height:"5.22087301"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(10.846985, 10.770246) rotate(-135.000000) translate(-10.846985, -10.770246) ",x:"9.54176636",y:"8.15980965",width:"2.6104365",height:"5.22087301"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",transform:"translate(18.231600, 3.385631) rotate(-135.000000) translate(-18.231600, -3.385631) ",x:"16.9263817",y:"0.775194265",width:"2.6104365",height:"5.22087301"})]}),(0,f.jsxs)("g",{id:"Group",opacity:"0.1",transform:"translate(2.538462, 0.692308)",children:[(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#000000",transform:"translate(7.616400, 11.768538) rotate(135.000000) translate(-7.616400, -11.768538) ",x:"5.98441565",y:"10.4633202",width:"3.2639687",height:"2.6104365"}),(0,f.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"7.38461538 7.38461538 1.83645766 1.87268753 1.83645766 3.7132995 6.46153846 8.30769231"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(8.308523, 3.693323) rotate(-135.000000) translate(-8.308523, -3.693323) ",x:"5.69808657",y:"2.38810482",width:"5.22087301",height:"2.6104365"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(15.693138, 11.077938) rotate(-135.000000) translate(-15.693138, -11.077938) ",x:"13.082702",y:"9.77272021",width:"5.22087301",height:"2.6104365"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(9.460009, 9.922714) rotate(45.000000) translate(-9.460009, -9.922714) ",x:"8.15479058",y:"8.94333902",width:"2.6104365",height:"1.95875045"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#FFFFFF",transform:"translate(15.693138, 3.693323) rotate(-135.000000) translate(-15.693138, -3.693323) ",x:"14.3879202",y:"1.08288657",width:"2.6104365",height:"5.22087301"})]})]})})}))},wb=function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,f.jsxs)("g",{id:"Action",transform:"translate(-92.011 -101.74)",fillRule:"nonzero",children:[(0,f.jsx)("path",{id:"path1010",d:"m101.01 101.74v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8231-5e-3 -5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3228v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84905-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1"}),(0,f.jsx)("path",{id:"path8-6-0",d:"m92.093 110.66v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1"}),(0,f.jsx)("path",{id:"path10-3-0",d:"m93.599 106.96 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3521a9.4562 9.4562 0 0 0 2.0558-0.8599l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2"}),(0,f.jsx)("path",{id:"path871-7",d:"m106.69 107.2h-3.4025l3.7809 5.9346-3.7809 5.9346h3.4025l3.7809-5.9346z",fill:"#283983"}),(0,f.jsx)("path",{id:"path873-9",d:"m101.39 107.2h-3.4025l3.7809 5.9346-3.7809 5.9346h3.4025l3.7835-5.9346z",fill:"#283983"})]})}))},Tb=function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,f.jsxs)("g",{id:"Action",fill:"#283983",children:[(0,f.jsx)("path",{id:"path1010",d:"m8.9958 0v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8231-0.0052-5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3229v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84904-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1"}),(0,f.jsx)("path",{id:"path8-6-0",d:"m0.081856 8.9161v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1"}),(0,f.jsx)("path",{id:"path10-3-0",d:"m1.5875 5.2198 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3521a9.4562 9.4562 0 0 0 2.0558-0.8599l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2"}),(0,f.jsx)("path",{id:"path821",d:"m13.081 13.524h-2.7983v-0.37982q0-0.63562 0.2558-1.124 0.2558-0.49609 1.0775-1.2557l0.49609-0.44958q0.44183-0.40308 0.64337-0.75964 0.20929-0.35657 0.20929-0.71313 0-0.5426-0.37207-0.84491-0.37207-0.31006-1.0387-0.31006-0.62787 0-1.3565 0.26355-0.72864 0.2558-1.5193 0.7674v-2.434q0.93793-0.32556 1.7131-0.48059 0.77515-0.15503 1.496-0.15503 1.8914 0 2.8835 0.77515 0.99219 0.7674 0.99219 2.2479 0 0.75964-0.30231 1.3643-0.30231 0.59686-1.0309 1.2867l-0.49609 0.44183q-0.5271 0.48059-0.68988 0.77515-0.16278 0.2868-0.16278 0.63562zm-2.7983 1.1472h2.7983v2.7595h-2.7983z",fill:"#283983"})]})}))},Sb=function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 0 23.109 23.124",children:(0,f.jsxs)("g",{id:"Expression",children:[(0,f.jsx)("path",{id:"path1010",d:"m8.9958 0v2.3203a9.525 9.525 0 0 0-2.0743 0.85473l-1.6459-1.6536-1.9498 1.9523 0.0052 5e-3 -1.7436 1.741 1.635 1.6356a9.398 9.398 0 0 0-0.86765 2.0846h-2.3549v5.2307h2.344a9.525 9.525 0 0 0 0.85731 2.0665l-1.6511 1.6536 3.7042 3.7042 1.6567-1.6562a9.4245 9.4245 0 0 0 2.0846 0.84904v2.3363h5.2178v-2.3518a9.4562 9.4562 0 0 0 2.0557-0.8599l1.6485 1.6485 1.8226-1.8232-0.0052-5e-3 1.8707-1.8707-1.6588-1.6588a9.5806 9.5806 0 0 0 0.83871-2.0324h2.3229v-5.2306h-2.3125a9.525 9.525 0 0 0-0.84904-2.0608l1.6428-1.6407-3.7042-3.7042-1.6376 1.6382a9.4932 9.4932 0 0 0-2.0397-0.85215v-2.3203z",fill:"#4db0e1",strokeWidth:".26458"}),(0,f.jsx)("path",{id:"path8-6-0",d:"m0.081857 8.9161v5.2308h2.3125a9.525 9.525 0 0 0 0.84931 2.0611l-1.6431 1.6404 3.7042 3.7042 1.6378-1.6378a9.4932 9.4932 0 0 0 2.0399 0.85196v2.3204h5.2123v-2.3204a9.525 9.525 0 0 0 2.0743-0.8546l1.6457 1.6536 1.95-1.9526-16.404-16.264-1.8759 1.8759 1.6589 1.6589a9.5806 9.5806 0 0 0-0.83873 2.032z",fill:"#4db0e1",strokeWidth:".26458"}),(0,f.jsx)("path",{id:"path10-3-0",d:"m1.5875 5.2198 1.6351 1.6351a9.398 9.398 0 0 0-0.86783 2.0849h-2.3548v5.2308h2.3442a9.525 9.525 0 0 0 0.85725 2.0664l-1.651 1.6536 3.7042 3.7042 1.6563-1.6563a9.4245 9.4245 0 0 0 2.0849 0.84931v2.3363h5.2176v-2.3522a9.4562 9.4562 0 0 0 2.0558-0.85989l1.6484 1.6484 1.823-1.823-16.404-16.264z",fill:"#283782",fillOpacity:".2",strokeWidth:".26458"}),(0,f.jsxs)("g",{id:"text1262",fill:"#283983",strokeWidth:".21798","aria-label":"f(x)",children:[(0,f.jsx)("path",{id:"path936",d:"m8.4202 7.2384v1.1256h-0.94835q-0.36401 0-0.5077 0.13411-0.14369 0.12932-0.14369 0.45502v0.37359h1.4656v1.2262h-1.4656v4.1383h-1.7147v-4.1383h-0.85256v-1.2262h0.85256v-0.37359q0-0.87651 0.48854-1.2932 0.48854-0.42149 1.5135-0.42149z"}),(0,f.jsx)("path",{id:"path938",d:"m10.822 15.984h-1.4225q-0.73282-1.183-1.0825-2.2463-0.34964-1.0681-0.34964-2.117t0.34964-2.1218q0.35443-1.0777 1.0825-2.2511h1.4225q-0.61308 1.1351-0.91961 2.2224-0.30654 1.0825-0.30654 2.141 0 1.0585 0.30175 2.1458 0.30654 1.0873 0.9244 2.2272z"}),(0,f.jsx)("path",{id:"path940",d:"m12.277 11.947-1.935-2.6199h1.8153l1.0968 1.5902 1.1112-1.5902h1.8153l-1.935 2.6104 2.0308 2.754h-1.8153l-1.207-1.6955-1.1926 1.6955h-1.8153z"}),(0,f.jsx)("path",{id:"path942",d:"m15.771 15.984q0.61308-1.1399 0.91961-2.2272t0.30654-2.1458q0-1.0585-0.30654-2.141-0.30654-1.0873-0.91961-2.2224h1.4225q0.72803 1.1735 1.0777 2.2511 0.35444 1.0729 0.35444 2.1218t-0.34964 2.117q-0.34964 1.0633-1.0825 2.2463z"})]})]})}))},Pb=function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Activate",fillRule:"nonzero",children:[(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",x:"0",y:"0",width:"24",height:"10.2857143"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#2B3990",x:"1.71428571",y:"1.71428571",width:"10.2857143",height:"6.85714286"}),(0,f.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"20.5710245 1.71428571 18.8571429 3.42897546 17.1432612 5.14285714 15.4285714 6.85673883 17.1432612 8.57142857 18.8571429 6.85673883 20.5710245 5.14285714 22.2857143 3.42897546"}),(0,f.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"18.8567388 3.42857143 17.1428571 5.14326117 15.4289755 3.42857143 13.7142857 5.14326117 15.4289755 6.85714286 18.8567388 6.85714286 20.5714286 5.14326117"})]})})}))},Ib=function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 -6 24 24",children:(0,f.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,f.jsxs)("g",{id:"Deactivate",fillRule:"nonzero",children:[(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#2B3990",x:"0",y:"0",width:"24",height:"10.2857143"}),(0,f.jsx)("polygon",{id:"Shape",fill:"#FFFFFF",points:"6.85673883 1.71428571 5.14285714 3.42897546 3.42897546 1.71428571 1.71428571 3.42897546 3.42897546 5.14285714 1.71428571 6.85673883 3.42897546 8.57142857 5.14285714 6.85673883 6.85673883 8.57142857 8.57142857 6.85673883 6.85673883 5.14285714 8.57142857 3.42897546"}),(0,f.jsx)("rect",{id:"Rectangle-path",fill:"#27AAE1",x:"12",y:"1.71428571",width:"10.2857143",height:"6.85714286"})]})})}))},Eb=n.g.gd,Mb={icon:{width:40,height:40},disabledItem:{opacity:.6}},Lb=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,i=e.name,a=e.description;return(0,f.jsx)(Te.HC,{leftIcon:t,primaryText:i,secondaryText:a,secondaryTextLines:2,onClick:function(){return r({functionType:Eb.EventsFunction.Action,name:i})},style:n?Mb.disabledItem:void 0,disabled:n})};function Ab(e){var t=e.eventsBasedBehavior,n=e.onChoose,r=e.onCancel,i=t.getEventsFunctions(),a=c.useState(!1),o=(0,s.Z)(a,2),l=o[0],u=o[1];return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:'Choose a new behavior function ("method")'}),secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")],actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],open:!0,onRequestClose:r,children:[(0,f.jsxs)(Te.aV,{children:[(0,f.jsx)(Te.HC,{leftIcon:(0,f.jsx)(wb,{style:Mb.icon}),primaryText:(0,f.jsx)(w.Trans,{id:"Action"}),secondaryText:(0,f.jsx)(w.Trans,{id:"An action that can be used on objects with the behavior. You can define the action parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:Eb.EventsFunction.Action,name:null})}}),(0,f.jsx)(Te.HC,{leftIcon:(0,f.jsx)(Tb,{style:Mb.icon}),primaryText:(0,f.jsx)(w.Trans,{id:"Condition"}),secondaryText:(0,f.jsx)(w.Trans,{id:"A condition that can be used on objects with the behavior. You can define the condition parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:Eb.EventsFunction.Condition,name:null})}}),(0,f.jsx)(Te.HC,{leftIcon:(0,f.jsx)(Sb,{style:Mb.icon}),primaryText:(0,f.jsx)(w.Trans,{id:"Expression"}),secondaryText:(0,f.jsx)(w.Trans,{id:"An expression that can be used on objects with the behavior. Can either return a number or a string, and take some parameters."}),onClick:function(){return n({functionType:Eb.EventsFunction.Expression,name:null})}}),(0,f.jsx)(jb.Z,{children:(0,f.jsx)(w.Trans,{id:"Lifecycle methods"})}),(0,f.jsx)(Lb,{icon:(0,f.jsx)(yb,{style:Mb.icon}),name:"onCreated",disabled:i.hasEventsFunctionNamed("onCreated"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run once, when an object is created with this behavior being attached to it."})}),(0,f.jsx)(Lb,{icon:(0,f.jsx)(Zb,{style:Mb.icon}),name:"doStepPreEvents",disabled:i.hasEventsFunctionNamed("doStepPreEvents"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object that has the behavior attached, before the events from the events sheet are launched."})}),(0,f.jsx)(Lb,{icon:(0,f.jsx)(kb,{style:Mb.icon}),name:"onDestroy",disabled:i.hasEventsFunctionNamed("onOwnerRemovedFromScene")||i.hasEventsFunctionNamed("onDestroy"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run once, after the object is removed from the scene and before it is entirely removed from memory."})}),l&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(jb.Z,{children:(0,f.jsx)(w.Trans,{id:"Other lifecycle methods"})}),(0,f.jsx)(Lb,{icon:(0,f.jsx)(Ib,{style:Mb.icon}),name:"onDeActivate",disabled:i.hasEventsFunctionNamed("onDeActivate"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run once when the behavior is deactivated on an object (step events won't be run until the behavior is activated again)."})}),(0,f.jsx)(Lb,{icon:(0,f.jsx)(Pb,{style:Mb.icon}),name:"onActivate",disabled:i.hasEventsFunctionNamed("onActivate"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run once when the behavior is re-activated on an object (after it was previously deactivated)."})}),(0,f.jsx)(Lb,{icon:(0,f.jsx)(Zb,{style:Mb.icon}),name:"doStepPostEvents",disabled:i.hasEventsFunctionNamed("doStepPostEvents"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object that has the behavior attached, after the events from the events sheet."})})]})]}),(0,f.jsx)(M.x1,{justifyContent:"center",alignItems:"center",children:l?(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(tx.Z,{}),primary:!1,onClick:function(){return u(!1)},label:(0,f.jsx)(w.Trans,{id:"Hide other lifecycle functions (advanced)"})}):(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(ex.Z,{}),primary:!1,onClick:function(){return u(!0)},label:(0,f.jsx)(w.Trans,{id:"Show other lifecycle functions (advanced)"})})})]})}var Ob=function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{viewBox:"0 -4.5 24 24",children:[(0,f.jsx)("polygon",{id:"Shape",transform:"translate(0,2)",points:"7.5 4.5 3 0 3 3 0 3 0 6 3 6 3 9",fill:"#2b3990"}),(0,f.jsx)("polygon",{transform:"translate(0,2)",points:"24 4.5 19.5 0 19.5 3 16.5 3 16.5 6 19.5 6 19.5 9",fill:"#2b3990"}),(0,f.jsx)("path",{d:"m12.5 0-4 8h3v5l4-8h-3z",fill:"#27aae1",fillRule:"evenodd"})]}))},Rb=n.g.gd,Fb={icon:{width:40,height:40},disabledItem:{opacity:.6}},Db=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,i=e.name,a=e.description;return(0,f.jsx)(Te.HC,{leftIcon:t,primaryText:i,secondaryText:a,secondaryTextLines:2,onClick:function(){return r({functionType:Rb.EventsFunction.Action,name:i})},style:n?Fb.disabledItem:void 0,disabled:n})};function Nb(e){var t=e.eventsBasedObject,n=e.onChoose,r=e.onCancel,i=t.getEventsFunctions(),a=c.useState(!1),o=(0,s.Z)(a,2),l=o[0],u=o[1];return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:'Choose a new object function ("method")'}),secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/behaviors/events-based-behaviors"},"help")],actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],open:!0,onRequestClose:r,children:[(0,f.jsxs)(Te.aV,{children:[(0,f.jsx)(Te.HC,{leftIcon:(0,f.jsx)(wb,{style:Fb.icon}),primaryText:(0,f.jsx)(w.Trans,{id:"Action"}),secondaryText:(0,f.jsx)(w.Trans,{id:"An action that can be used on the object. You can define the action parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:Rb.EventsFunction.Action,name:null})}}),(0,f.jsx)(Te.HC,{leftIcon:(0,f.jsx)(Tb,{style:Fb.icon}),primaryText:(0,f.jsx)(w.Trans,{id:"Condition"}),secondaryText:(0,f.jsx)(w.Trans,{id:"A condition that can be used on the object. You can define the condition parameters: objects, texts, numbers, layers, etc..."}),onClick:function(){return n({functionType:Rb.EventsFunction.Condition,name:null})}}),(0,f.jsx)(Te.HC,{leftIcon:(0,f.jsx)(Sb,{style:Fb.icon}),primaryText:(0,f.jsx)(w.Trans,{id:"Expression"}),secondaryText:(0,f.jsx)(w.Trans,{id:"An expression that can be used on the object. Can either return a number or a string, and take some parameters."}),onClick:function(){return n({functionType:Rb.EventsFunction.Expression,name:null})}}),(0,f.jsx)(jb.Z,{children:(0,f.jsx)(w.Trans,{id:"Lifecycle methods"})}),(0,f.jsx)(Db,{icon:(0,f.jsx)(yb,{style:Fb.icon}),name:"onCreated",disabled:i.hasEventsFunctionNamed("onCreated"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run once, when an object is created."})}),(0,f.jsx)(Db,{icon:(0,f.jsx)(Zb,{style:Fb.icon}),name:"doStepPostEvents",disabled:i.hasEventsFunctionNamed("doStepPostEvents"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), for every object, after the events from the events sheet."})}),(0,f.jsx)(Db,{icon:(0,f.jsx)(kb,{style:Fb.icon}),name:"onDestroy",disabled:i.hasEventsFunctionNamed("onOwnerRemovedFromScene")||i.hasEventsFunctionNamed("onDestroy"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run once, after the object is removed from the scene and before it is entirely removed from memory."})}),l&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(jb.Z,{children:(0,f.jsx)(w.Trans,{id:"Other lifecycle methods"})}),(0,f.jsx)(Db,{icon:(0,f.jsx)(Ob,{style:Fb.icon}),name:"onHotReloading",disabled:i.hasEventsFunctionNamed("onHotReloading"),onChoose:n,description:(0,f.jsx)(w.Trans,{id:"Events that will be run when the preview is being hot-reloaded."})})]})]}),(0,f.jsx)(M.x1,{justifyContent:"center",alignItems:"center",children:l?(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(tx.Z,{}),primary:!1,onClick:function(){return u(!1)},label:(0,f.jsx)(w.Trans,{id:"Hide other lifecycle functions (advanced)"})}):(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(ex.Z,{}),primary:!1,onClick:function(){return u(!0)},label:(0,f.jsx)(w.Trans,{id:"Show other lifecycle functions (advanced)"})})})]})}var _b=n.g.gd,Bb={icon:{width:40,height:40},disabledItem:{opacity:.6}},Ub=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,i=e.name,a=e.description;return(0,f.jsx)(Te.HC,{leftIcon:t,primaryText:i,secondaryText:a,secondaryTextLines:2,onClick:r,style:n?Bb.disabledItem:void 0,disabled:n})};function Vb(e){var t=e.eventsFunctionsContainer,n=e.onChoose,r=e.onCancel,i=c.useState(!1),a=(0,s.Z)(i,2),o=a[0],l=a[1];return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Choose a new extension function"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:r},"close")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/events/functions"},"help")],open:!0,onRequestClose:r,children:[(0,f.jsxs)(Te.aV,{children:[(0,f.jsx)(Ub,{icon:(0,f.jsx)(wb,{style:Bb.icon}),name:(0,f.jsx)(w.Trans,{id:"Action"}),onChoose:function(){return n({functionType:_b.EventsFunction.Action,name:null})},description:(0,f.jsx)(w.Trans,{id:"An action that can be used in other events sheet. You can define the action parameters: objects, texts, numbers, layers, etc..."})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(Tb,{style:Bb.icon}),name:(0,f.jsx)(w.Trans,{id:"Condition"}),onChoose:function(){return n({functionType:_b.EventsFunction.Condition,name:null})},description:(0,f.jsx)(w.Trans,{id:"A condition that can be used in other events sheet. You can define the condition parameters: objects, texts, numbers, layers, etc..."})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(Sb,{style:Bb.icon}),name:(0,f.jsx)(w.Trans,{id:"Expression"}),onChoose:function(){return n({functionType:_b.EventsFunction.Expression,name:null})},description:(0,f.jsx)(w.Trans,{id:"An expression that can be used in formulas. Can either return a number or a string, and take some parameters."})}),o&&(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(jb.Z,{children:(0,f.jsx)(w.Trans,{id:"Lifecycle functions (advanced)"})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(yb,{style:Bb.icon}),name:"onFirstSceneLoaded",disabled:t.hasEventsFunctionNamed("onFirstSceneLoaded"),onChoose:function(){return n({functionType:_b.EventsFunction.Action,name:"onFirstSceneLoaded"})},description:(0,f.jsx)(w.Trans,{id:"Events that will be run once when the first scene of the game is loaded, before any other events."})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(yb,{style:Bb.icon}),name:"onSceneLoaded",disabled:t.hasEventsFunctionNamed("onSceneLoaded"),onChoose:function(){return n({functionType:_b.EventsFunction.Action,name:"onSceneLoaded"})},description:(0,f.jsx)(w.Trans,{id:"Events that will be run once when a scene of the game is loaded, before the scene events."})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(Zb,{style:Bb.icon}),name:"onScenePreEvents",disabled:t.hasEventsFunctionNamed("onScenePreEvents"),onChoose:function(){return n({functionType:_b.EventsFunction.Action,name:"onScenePreEvents"})},description:(0,f.jsx)(w.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), before the events from the events sheet of the scene."})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(Zb,{style:Bb.icon}),name:"onScenePostEvents",disabled:t.hasEventsFunctionNamed("onScenePostEvents"),onChoose:function(){return n({functionType:_b.EventsFunction.Action,name:"onScenePostEvents"})},description:(0,f.jsx)(w.Trans,{id:"Events that will be run at every frame (roughly 60 times per second), after the events from the events sheet of the scene."})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(Ib,{style:Bb.icon}),name:"onScenePaused",disabled:t.hasEventsFunctionNamed("onScenePaused"),onChoose:function(){return n({functionType:_b.EventsFunction.Action,name:"onScenePaused"})},description:(0,f.jsx)(w.Trans,{id:"Events that will be run once when a scene is paused (another scene is run on top of it)."})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(Pb,{style:Bb.icon}),name:"onSceneResumed",disabled:t.hasEventsFunctionNamed("onSceneResumed"),onChoose:function(){return n({functionType:_b.EventsFunction.Action,name:"onSceneResumed"})},description:(0,f.jsx)(w.Trans,{id:"Events that will be run once when a scene is resumed (after it was previously paused)."})}),(0,f.jsx)(Ub,{icon:(0,f.jsx)(kb,{style:Bb.icon}),name:"onSceneUnloading",disabled:t.hasEventsFunctionNamed("onSceneUnloading"),onChoose:function(){return n({functionType:_b.EventsFunction.Action,name:"onSceneUnloading"})},description:(0,f.jsx)(w.Trans,{id:"Events that will be run once when a scene is about to be unloaded from memory. The previous scene that was paused will be resumed after this."})})]})]}),(0,f.jsx)(M.x1,{justifyContent:"center",alignItems:"center",children:o?(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(tx.Z,{}),primary:!1,onClick:function(){return l(!1)},label:(0,f.jsx)(w.Trans,{id:"Hide lifecycle functions (advanced)"})}):(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(ex.Z,{}),primary:!1,onClick:function(){return l(!0)},label:(0,f.jsx)(w.Trans,{id:"Show lifecycle functions (advanced)"})})})]})}var Hb=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.53802 2.71043C7.40791 2.65211 7.25908 2.65211 7.12897 2.71043L2.30602 4.87244C2.26414 4.89011 2.22516 4.91331 2.19001 4.94115C2.16548 4.96055 2.14295 4.98211 2.12265 5.00549C2.04635 5.09327 2.00016 5.20792 2.00016 5.33335V10.6537C1.99773 10.7486 2.02255 10.8418 2.07042 10.9224C2.11139 10.9914 2.16925 11.0511 2.24136 11.0946C2.26176 11.1069 2.28311 11.1179 2.30528 11.1273L7.12893 13.2896C7.38091 13.4026 7.67675 13.2899 7.78971 13.0379C7.83172 12.9442 7.84252 12.8444 7.82655 12.7502C7.83112 12.7231 7.8335 12.6951 7.8335 12.6667V7.82382L11.7002 6.09047V8.66669C11.7002 8.94283 11.9241 9.16669 12.2002 9.16669C12.4763 9.16669 12.7002 8.94283 12.7002 8.66669V5.33335C12.7002 5.08889 12.5248 4.8854 12.2929 4.84193L7.53802 2.71043ZM6.8335 12.0613L3.00016 10.3429V6.10543L6.8335 7.82382V12.0613ZM7.3335 6.95208L3.72249 5.33335L7.3335 3.71463L10.9445 5.33335L7.3335 6.95208Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8968 9.94616C14.5265 9.94616 15.029 10.0889 15.4045 10.3744C15.7839 10.6599 15.9736 11.186 15.9736 11.9526C15.9736 12.7035 15.7878 13.2334 15.4162 13.5424C15.0447 13.8475 14.5734 14 14.0024 14H12.8994V9.94616H13.8968ZM14.6125 10.6384C14.4522 10.5641 14.2586 10.527 14.0317 10.527H13.6738V13.4192H14.0552C14.3993 13.4192 14.6692 13.3136 14.8648 13.1024C15.0603 12.8873 15.1581 12.504 15.1581 11.9526C15.1581 11.5693 15.1073 11.274 15.0056 11.0667C14.9078 10.8555 14.7768 10.7127 14.6125 10.6384Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M10.7004 9.98136C10.9664 9.98136 11.1952 10.0302 11.3868 10.128C11.5824 10.2258 11.731 10.3588 11.8327 10.527C11.9344 10.6951 11.9852 10.8829 11.9852 11.0902C11.9852 11.3131 11.9363 11.5282 11.8385 11.7355C11.7447 11.9389 11.5863 12.1657 11.3633 12.416C11.1404 12.6663 10.8138 12.9968 10.3836 13.4075H12.0732L11.9911 14H9.53294V13.4486C10.0336 12.9401 10.3914 12.5646 10.6065 12.3222C10.8256 12.0758 10.98 11.8665 11.07 11.6944C11.1639 11.5184 11.2108 11.3366 11.2108 11.1488C11.2108 10.9689 11.158 10.8281 11.0524 10.7264C10.9507 10.6247 10.8138 10.5739 10.6417 10.5739C10.4892 10.5739 10.3543 10.6071 10.2369 10.6736C10.1235 10.7362 10.0042 10.8418 9.87907 10.9904L9.42147 10.6267C9.75391 10.1965 10.1802 9.98136 10.7004 9.98136Z",fill:"currentColor"})]}))})),zb=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.53802 2.71043C7.40791 2.65211 7.25908 2.65211 7.12897 2.71043L2.30602 4.87244C2.26414 4.89011 2.22516 4.91331 2.19001 4.94115C2.16548 4.96055 2.14295 4.98211 2.12265 5.00549C2.04635 5.09327 2.00016 5.20792 2.00016 5.33335V10.6537C1.99773 10.7486 2.02255 10.8418 2.07042 10.9224C2.11139 10.9914 2.16925 11.0511 2.24136 11.0946C2.26176 11.1069 2.28311 11.1179 2.30528 11.1273L7.12893 13.2896C7.38091 13.4026 7.67675 13.2899 7.78971 13.0379C7.83172 12.9442 7.84252 12.8444 7.82655 12.7502C7.83112 12.7231 7.8335 12.6951 7.8335 12.6667V7.82382L11.7002 6.09047V8.66669C11.7002 8.94283 11.9241 9.16669 12.2002 9.16669C12.4763 9.16669 12.7002 8.94283 12.7002 8.66669V5.33335C12.7002 5.08889 12.5248 4.88541 12.2929 4.84193L7.53802 2.71043ZM6.8335 7.82382L3.00016 6.10543V10.3429L6.8335 12.0613V7.82382ZM7.3335 6.95208L3.72249 5.33335L7.3335 3.71463L10.9445 5.33335L7.3335 6.95208Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.914 9.94616C14.5436 9.94616 15.0462 10.0889 15.4217 10.3744C15.8011 10.6599 15.9908 11.186 15.9908 11.9526C15.9908 12.7035 15.805 13.2334 15.4334 13.5424C15.0619 13.8475 14.5906 14 14.0196 14H12.9166V9.94616H13.914ZM14.6297 10.6384C14.4693 10.5641 14.2757 10.527 14.0489 10.527H13.691V13.4192H14.0724C14.4165 13.4192 14.6864 13.3136 14.882 13.1024C15.0775 12.8873 15.1753 12.504 15.1753 11.9526C15.1753 11.5693 15.1244 11.274 15.0228 11.0667C14.925 10.8555 14.794 10.7127 14.6297 10.6384Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M10.6945 9.98136C10.9566 9.98136 11.1815 10.0263 11.3692 10.1163C11.5608 10.2062 11.7036 10.3275 11.7975 10.48C11.8952 10.6326 11.9441 10.8007 11.9441 10.9846C11.9441 11.2231 11.8757 11.4226 11.7388 11.583C11.6019 11.7394 11.4142 11.8489 11.1756 11.9115C11.4376 11.935 11.6527 12.0288 11.8209 12.1931C11.9891 12.3574 12.0732 12.5842 12.0732 12.8736C12.0732 13.1005 12.0145 13.3058 11.8972 13.4896C11.7838 13.6734 11.6195 13.8201 11.4044 13.9296C11.1893 14.0352 10.9351 14.088 10.6417 14.088C10.102 14.088 9.67568 13.8983 9.36279 13.519L9.77933 13.12C9.9123 13.253 10.0433 13.3508 10.1724 13.4134C10.3015 13.472 10.4442 13.5014 10.6007 13.5014C10.8119 13.5014 10.98 13.4427 11.1052 13.3254C11.2343 13.2041 11.2988 13.0418 11.2988 12.8384C11.2988 12.6116 11.2382 12.4493 11.1169 12.3515C10.9996 12.2537 10.8236 12.2048 10.5889 12.2048H10.278L10.366 11.671H10.5772C10.7688 11.671 10.9214 11.6182 11.0348 11.5126C11.1521 11.407 11.2108 11.2603 11.2108 11.0726C11.2108 10.9122 11.158 10.787 11.0524 10.6971C10.9468 10.6032 10.806 10.5563 10.63 10.5563C10.4775 10.5563 10.3386 10.5856 10.2135 10.6443C10.0883 10.699 9.96315 10.7851 9.83799 10.9024L9.45666 10.4859C9.81257 10.1495 10.2252 9.98136 10.6945 9.98136Z",fill:"currentColor"})]}))})),Wb={icon:{width:40,height:40},disabledItem:{opacity:.6}},Gb=function(e){var t=e.icon,n=e.disabled,r=e.onChoose,i=e.name,a=e.description;return(0,f.jsx)(Te.HC,{leftIcon:t,primaryText:i,secondaryText:a,secondaryTextLines:2,onClick:r,style:n?Wb.disabledItem:void 0,disabled:n})};function Yb(e){var t=e.onChoose,n=e.onCancel;return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Choose a new object type"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:n},"close")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/objects/custom-objects-prefab-template"},"help")],open:!0,onRequestClose:n,children:(0,f.jsxs)(Te.aV,{children:[(0,f.jsx)(Gb,{icon:(0,f.jsx)(Hb,{style:Wb.icon}),name:(0,f.jsx)(w.Trans,{id:"2D object"}),onChoose:function(){return t({isRenderedIn3D:!1})},description:(0,f.jsx)(w.Trans,{id:"An object that can be moved, rotated and scaled in 2D."})}),(0,f.jsx)(Gb,{icon:(0,f.jsx)(zb,{style:Wb.icon}),name:(0,f.jsx)(w.Trans,{id:"3D object"}),onChoose:function(){return t({isRenderedIn3D:!0})},description:(0,f.jsx)(w.Trans,{id:"An object that can be moved, rotated and scaled in 3D."})})]})})}var qb={display:"flex",flexDirection:"column",flex:1,minHeight:0},Jb=c.forwardRef((function(e,t){var n=e.initialEditorName,r=e.editors,i=e.transitions,a=e.onEditorChanged,o=c.useState(n),u=(0,s.Z)(o,2),d=u[0],p=u[1],h=(0,cg.T)();c.useImperativeHandle(t,(function(){return{openEditor:function(e){p(e)}}})),c.useEffect((function(){a(d)}),[d,a]);var g=i[d],m="space-between";g&&(g.previousEditor&&!g.nextEditor&&(m="flex-start"),!g.previousEditor&&g.nextEditor&&(m="flex-end"));var x=r[d],v=x?(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},qb),x.noSoftKeyboardAvoidance?null:(0,cg.E)(h)),children:x.renderEditor()}):null;return(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[g&&(0,f.jsx)(Ki.Z,{maxWidth:!0,noExpand:!0,noFullHeight:!0,children:(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{justifyContent:m,children:[g.previousEditor&&(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Back"}),onClick:function(){g.previousEditor&&p(g.previousEditor)},leftIcon:(0,f.jsx)(Ca.Z,{})}),g.nextLabel&&g.nextEditor&&(0,f.jsx)(T.Z,{label:g.nextLabel,onClick:function(){g.nextEditor&&p(g.nextEditor)},leftIcon:g.nextIcon})]})})}),v]})})),Xb=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M7.77794 0.833374C7.34742 0.833374 6.93657 1.00791 6.63523 1.31528C6.33421 1.62232 6.16683 2.03668 6.16683 2.46671V2.53337H3.66683C3.44258 2.53337 3.22957 2.62433 3.07409 2.78292C2.91894 2.94118 2.8335 3.15375 2.8335 3.37337V5.86671C2.8335 6.14285 3.05735 6.36671 3.3335 6.36671H3.88905C4.0479 6.36671 4.20229 6.43098 4.31769 6.54869C4.43342 6.66674 4.50016 6.82891 4.50016 7.00004C4.50016 7.17117 4.43342 7.33335 4.31769 7.45139C4.20229 7.5691 4.0479 7.63337 3.88905 7.63337H3.3335C3.05735 7.63337 2.8335 7.85723 2.8335 8.13337V10.6267C2.8335 10.8463 2.91894 11.0589 3.07409 11.2172C3.22957 11.3758 3.44258 11.4667 3.66683 11.4667H4.67473C4.95087 11.4667 5.17473 11.2428 5.17473 10.9667C5.17473 10.6906 4.95087 10.4667 4.67473 10.4667H3.8335V8.63337H3.88905C4.31958 8.63337 4.73042 8.45884 5.03176 8.15146C5.33278 7.84443 5.50016 7.43007 5.50016 7.00004C5.50016 6.57001 5.33278 6.15565 5.03176 5.84862C4.73042 5.54125 4.31958 5.36671 3.88905 5.36671H3.8335V3.53337H6.66683C6.94297 3.53337 7.16683 3.30952 7.16683 3.03337V2.46671C7.16683 2.29558 7.23357 2.1334 7.3493 2.01536C7.46471 1.89764 7.61909 1.83337 7.77794 1.83337C7.93679 1.83337 8.09118 1.89764 8.20658 2.01536C8.32231 2.1334 8.38905 2.29558 8.38905 2.46671V3.03337C8.38905 3.30952 8.61291 3.53337 8.88905 3.53337H11.1668V3.66671C11.1668 3.94285 11.3907 4.16671 11.6668 4.16671C11.943 4.16671 12.1668 3.94285 12.1668 3.66671V3.37337C12.1668 3.15375 12.0814 2.94118 11.9262 2.78292C11.7708 2.62433 11.5577 2.53337 11.3335 2.53337H9.38905V2.46671C9.38905 2.03668 9.22167 1.62232 8.92065 1.31528C8.61931 1.00791 8.20846 0.833374 7.77794 0.833374Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.3537 5.1633C13.9138 4.7234 13.2006 4.7234 12.7607 5.16329L6.93968 10.9843C6.87393 11.0501 6.82782 11.1328 6.80653 11.2233L6.18013 13.8855C6.14047 14.0541 6.19084 14.2312 6.31329 14.3536C6.43573 14.476 6.6128 14.5264 6.78136 14.4867L9.44354 13.8604C9.53405 13.8391 9.61683 13.7929 9.68257 13.7272L15.5036 7.90617C15.9435 7.46628 15.9435 6.7531 15.5036 6.31321L14.3537 5.1633ZM13.4678 5.87038C13.5172 5.82104 13.5972 5.82104 13.6465 5.87038L14.7965 7.02032C14.8458 7.06969 14.8458 7.14972 14.7965 7.19909L9.07604 12.9195L7.33854 13.3283L7.74737 11.5908L13.4678 5.87038Z",fill:"currentColor"})]}))})),Kb=n(82676),Qb=n(30268),$b=n.g.gd,eC=(0,f.jsx)(Xb,{}),tC=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={selectedEventsFunction:null,selectedEventsBasedBehavior:null,editedEventsBasedBehavior:null,selectedEventsBasedObject:null,editedEventsBasedObject:null,editOptionsDialogOpen:!1,behaviorMethodSelectorDialogOpen:!1,objectMethodSelectorDialogOpen:!1,extensionFunctionSelectorDialogOpen:!1,eventsBasedObjectSelectorDialogOpen:!1,variablesEditorOpen:null,onAddEventsFunctionCb:null,onAddEventsBasedObjectCb:null},e._globalObjectsContainer=new $b.ObjectsContainer($b.ObjectsContainer.Unknown),e._objectsContainer=new $b.ObjectsContainer($b.ObjectsContainer.Function),e._parameterVariablesContainer=new $b.VariablesContainer($b.VariablesContainer.Parameters),e._propertyVariablesContainer=new $b.VariablesContainer($b.VariablesContainer.Properties),e._parameterResourcesContainer=new $b.ResourcesContainer($b.ResourcesContainer.Parameters),e._propertyResourcesContainer=new $b.ResourcesContainer($b.ResourcesContainer.Properties),e._projectScopedContainersAccessor=null,e._updateProjectScopedContainer=function(){e._updateProjectScopedContainerFrom({eventsFunction:e.state.selectedEventsFunction,eventsBasedBehavior:e.state.selectedEventsBasedBehavior,eventsBasedObject:e.state.selectedEventsBasedObject})},e._updateProjectScopedContainerFrom=function(t){var n=t.eventsBasedBehavior,r=t.eventsBasedObject,i=t.eventsFunction,a={project:e.props.project,layout:null,externalEvents:null,eventsFunctionsExtension:e.props.eventsFunctionsExtension,eventsBasedBehavior:n,eventsBasedObject:r,eventsFunction:i};e._projectScopedContainersAccessor=new Bn(a,e._objectsContainer,e._parameterVariablesContainer,e._propertyVariablesContainer,e._parameterResourcesContainer,e._propertyResourcesContainer)},e.updateToolbar=function(){e.editor?e.editor.updateToolbar():e.props.setToolbar((0,f.jsx)(Ls.k,{lastChild:!0,children:(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e._editOptions,tooltip:{id:"Open extension settings"},children:(0,f.jsx)(Xb,{})})}))},e.selectEventsFunctionByName=function(t,n,r){var i=e.props.eventsFunctionsExtension;if(n){var a=i.getEventsBasedBehaviors();if(a.has(n)){var o=a.get(n),s=o.getEventsFunctions();s.hasEventsFunctionNamed(t)&&e._selectEventsFunction(s.getEventsFunction(t),o,null)}}else if(r){var l=i.getEventsBasedObjects();if(l.has(r)){var c=l.get(r),u=c.getEventsFunctions();u.hasEventsFunctionNamed(t)&&e._selectEventsFunction(u.getEventsFunction(t),null,c)}}else{var d=i.getEventsFunctions();d.hasEventsFunctionNamed(t)&&e._selectEventsFunction(d.getEventsFunction(t),null,null)}},e._selectEventsFunction=function(t,n,r){e.onSelectionChanged(null,null),t?(e.props.onFunctionEdited&&e.props.onFunctionEdited(),e._updateProjectScopedContainerFrom({eventsFunction:t,eventsBasedBehavior:n,eventsBasedObject:r}),e.setState({selectedEventsFunction:t,selectedEventsBasedBehavior:n,selectedEventsBasedObject:r},(function(){e.updateToolbar(),e._editorMosaic&&e._editorMosaic.uncollapseEditor("parameters",25),e._editorNavigator&&(t&&!t.getEvents().getEventsCount()?e._editorNavigator.openEditor("parameters"):e._editorNavigator.openEditor("events-sheet"))}))):e.setState({selectedEventsFunction:null,selectedEventsBasedBehavior:n,selectedEventsBasedObject:r},(function(){return e.updateToolbar()}))},e._makeRenameEventsFunction=function(t){return function(n,r,i,a,o){n?e._renameBehaviorEventsFunction(t,n,i,a,o):r?e._renameObjectEventsFunction(t,r,i,a,o):e._renameFreeEventsFunction(t,i,a,o)}},e._renameFreeEventsFunction=function(t,n,r,i){var a=e.props,o=a.project,s=a.eventsFunctionsExtension,l=(0,xt.Z)($b.Project.getSafeName(r),(function(e){return!(!$b.MetadataDeclarationHelper.isExtensionLifecycleEventsFunction(e)&&!s.getEventsFunctions().hasEventsFunctionNamed(e))}));$b.WholeProjectRefactorer.renameEventsFunction(o,s,n.getName(),l),n.setName(l),i(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()},e._renameBehaviorEventsFunction=function(t,n,r,i,a){var o=(0,xt.Z)($b.Project.getSafeName(i),(function(e){return!(!$b.MetadataDeclarationHelper.isBehaviorLifecycleEventsFunction(e)&&!n.getEventsFunctions().hasEventsFunctionNamed(e))})),s=e.props,l=s.project,c=s.eventsFunctionsExtension;$b.WholeProjectRefactorer.renameBehaviorEventsFunction(l,c,n,r.getName(),o),r.setName(o),a(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()},e._renameObjectEventsFunction=function(t,n,r,i,a){var o=(0,xt.Z)($b.Project.getSafeName(i),(function(e){return!(!$b.MetadataDeclarationHelper.isObjectLifecycleEventsFunction(e)&&!n.getEventsFunctions().hasEventsFunctionNamed(e))})),s=e.props,l=s.project,c=s.eventsFunctionsExtension;$b.WholeProjectRefactorer.renameObjectEventsFunction(l,c,n,r.getName(),o),r.setName(o),a(!0),e.props.onFunctionEdited&&e.props.onFunctionEdited()},e._makeMoveFreeEventsParameter=function(t){return function(t,n,r,i){var a=e.props,o=a.project,s=a.eventsFunctionsExtension;$b.WholeProjectRefactorer.moveEventsFunctionParameter(o,s,t.getName(),n+sd.mK.FreeFunction,r+sd.mK.FreeFunction),i(!0)}},e._makeMoveBehaviorEventsParameter=function(t){return function(t,n,r,i,a){var o=e.props,s=o.project,l=o.eventsFunctionsExtension;$b.WholeProjectRefactorer.moveBehaviorEventsFunctionParameter(s,l,t,n.getName(),r,i),a(!0)}},e._makeMoveObjectEventsParameter=function(t){return function(t,n,r,i,a){var o=e.props,s=o.project,l=o.eventsFunctionsExtension;$b.WholeProjectRefactorer.moveObjectEventsFunctionParameter(s,l,t,n.getName(),r,i),a(!0)}},e._onDeleteEventsFunction=function(t,n){e.state.selectedEventsFunction&&$b.compare(t,e.state.selectedEventsFunction)&&e._selectEventsFunction(null,null,null),n(!0)},e.selectEventsBasedBehaviorByName=function(t){var n=e.props.eventsFunctionsExtension.getEventsBasedBehaviors();n.has(t)&&e._selectEventsBasedBehavior(n.get(t))},e.selectEventsBasedObjectByName=function(t){var n=e.props.eventsFunctionsExtension.getEventsBasedObjects();n.has(t)&&e._selectEventsBasedObject(n.get(t))},e.onSelectionChanged=function(t,n){e._editBehavior(t),e._editObject(n)},e._selectEventsBasedBehavior=function(t){e.onSelectionChanged(t,null),e._updateProjectScopedContainerFrom({eventsBasedBehavior:t}),e.setState({selectedEventsBasedBehavior:t,selectedEventsFunction:null,selectedEventsBasedObject:null},(function(){e.updateToolbar(),t&&(e._editorMosaic&&e._editorMosaic.collapseEditor("parameters"),e._editorNavigator&&e._editorNavigator.openEditor("events-sheet"))}))},e._selectEventsBasedObject=function(t){e.onSelectionChanged(null,t),e._updateProjectScopedContainerFrom({eventsBasedObject:t}),e.setState({selectedEventsBasedObject:t,selectedEventsFunction:null,selectedEventsBasedBehavior:null},(function(){e.updateToolbar(),t&&(e._editorMosaic&&e._editorMosaic.collapseEditor("parameters"),e._editorNavigator&&e._editorNavigator.openEditor("events-sheet"))}))},e._makeRenameEventsBasedBehavior=function(t){return function(t,n,r){var i=e.props,a=i.project,o=i.eventsFunctionsExtension,s=(0,xt.Z)($b.Project.getSafeName(n),(function(e){return!!o.getEventsBasedBehaviors().has(e)}));$b.WholeProjectRefactorer.renameEventsBasedBehavior(a,o,t.getName(),s),t.setName(s),r(!0)}},e._makeRenameEventsBasedObject=function(t){return function(t,n,r){var i=e.props,a=i.project,o=i.eventsFunctionsExtension,s=i.onRenamedEventsBasedObject,l=t.getName(),c=(0,xt.Z)($b.Project.getSafeName(n),(function(e){return!!o.getEventsBasedObjects().has(e)}));$b.WholeProjectRefactorer.renameEventsBasedObject(a,o,t.getName(),c),t.setName(c),r(!0),s(o,l,c)}},e._onEventsBasedBehaviorPasted=function(t,n,r){var i=e.props,a=i.project,o=i.eventsFunctionsExtension;o.getName()!==n&&$b.WholeProjectRefactorer.updateExtensionNameInEventsBasedBehavior(a,o,t,n),t.getName()!==r&&$b.WholeProjectRefactorer.updateBehaviorNameInEventsBasedBehavior(a,o,t,r)},e._onEventsBasedObjectPasted=function(t,n,r){var i=e.props,a=i.project,o=i.eventsFunctionsExtension;o.getName()!==n&&$b.WholeProjectRefactorer.updateExtensionNameInEventsBasedObject(a,o,t,n),t.getName()!==r&&$b.WholeProjectRefactorer.updateObjectNameInEventsBasedObject(a,o,t,r),e.props.onEventsBasedObjectChildrenEdited(t)},e._onEventsBasedBehaviorRenamed=function(){e.props.onBehaviorEdited&&e.props.onBehaviorEdited(),e.state.selectedEventsFunction&&e._updateProjectScopedContainer()},e._onEventsBasedObjectRenamed=function(t){e.props.onObjectEdited&&e.props.onObjectEdited(),e.state.selectedEventsFunction&&e._updateProjectScopedContainer(),e.props.onEventsBasedObjectChildrenEdited(t),e.props.onEventBasedObjectTypeChanged()},e._onDeleteEventsBasedBehavior=function(t,n){e.state.selectedEventsBasedBehavior&&$b.compare(t,e.state.selectedEventsBasedBehavior)&&e._selectEventsBasedBehavior(null),n(!0)},e._onDeleteEventsBasedObject=function(t,n){e.state.selectedEventsBasedObject&&$b.compare(t,e.state.selectedEventsBasedObject)&&e._selectEventsBasedObject(null),n(!0);var r=e.props,i=r.eventsFunctionsExtension,a=r.onDeletedEventsBasedObject,o=r.onEventsBasedObjectChildrenEdited;a(i,t.getName()),o(t)},e._onCloseExtensionFunctionSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({extensionFunctionSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onCloseEventsBasedObjectSelectorDialog=function(t){var n=e.state.onAddEventsBasedObjectCb;e.setState({eventsBasedObjectSelectorDialogOpen:!1,onAddEventsBasedObjectCb:null},(function(){n&&n(t)}))},e._onAddEventsBasedObject=function(t){e.setState({eventsBasedObjectSelectorDialogOpen:!0,onAddEventsBasedObjectCb:t})},e._onAddEventsFunction=function(t,n,r){t?e._onAddBehaviorEventsFunction(t,r):n?e._onAddObjectEventsFunction(n,r):e._onAddFreeEventsFunction(r)},e._onAddFreeEventsFunction=function(t){e.setState({extensionFunctionSelectorDialogOpen:!0,onAddEventsFunctionCb:t})},e._onAddBehaviorEventsFunction=function(t,n){e.setState({behaviorMethodSelectorDialogOpen:!0,onAddEventsFunctionCb:function(r){n(r),e._onBehaviorEventsFunctionAdded(t)}})},e._onAddObjectEventsFunction=function(t,n){e.setState({objectMethodSelectorDialogOpen:!0,onAddEventsFunctionCb:function(r){n(r),e._onObjectEventsFunctionAdded(t)}})},e._onCloseBehaviorMethodSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({behaviorMethodSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onCloseObjectMethodSelectorDialog=function(t){var n=e.state.onAddEventsFunctionCb;e.setState({objectMethodSelectorDialogOpen:!1,onAddEventsFunctionCb:null},(function(){n&&n(t)}))},e._onEventsFunctionAdded=function(t,n,r){n?e._onBehaviorEventsFunctionAdded(n):r&&e._onObjectEventsFunctionAdded(r)},e._onBehaviorEventsFunctionAdded=function(t){$b.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,t)},e._onObjectEventsFunctionAdded=function(t){$b.WholeProjectRefactorer.ensureObjectEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,t)},e._onBehaviorPropertyRenamed=function(t,n,r){var i=e.props,a=i.project,o=i.eventsFunctionsExtension;$b.WholeProjectRefactorer.renameEventsBasedBehaviorProperty(a,o,t,n,r)},e._onBehaviorSharedPropertyRenamed=function(t,n,r){var i=e.props,a=i.project,o=i.eventsFunctionsExtension;$b.WholeProjectRefactorer.renameEventsBasedBehaviorSharedProperty(a,o,t,n,r)},e._onObjectPropertyRenamed=function(t,n,r){var i=e.props,a=i.project,o=i.eventsFunctionsExtension;$b.WholeProjectRefactorer.renameEventsBasedObjectProperty(a,o,t,n,r)},e._onFunctionParameterWillBeRenamed=function(t,n,r){if(e._projectScopedContainersAccessor){var i=e._projectScopedContainersAccessor.get(),a=e.props.project;$b.WholeProjectRefactorer.renameParameter(a,i,t,e._objectsContainer,n,r)}},e._onFunctionParameterChangedOfType=function(t,n){if(e._projectScopedContainersAccessor){var r=e._projectScopedContainersAccessor.get(),i=e.props.project;$b.WholeProjectRefactorer.changeParameterType(i,r,t,e._objectsContainer,n)}},e._editOptions=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({editOptionsDialogOpen:t})},e._editVariables=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isGlobalTabInitiallyOpen:!1};e.setState({variablesEditorOpen:t})},e._editBehavior=function(t){e.setState((function(n){return n.editedEventsBasedBehavior&&!t&&$b.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,n.editedEventsBasedBehavior),{editedEventsBasedBehavior:t}}),(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=6;break}if(!e.props.onBehaviorEdited){n.next=5;break}return n.next=4,e.props.onBehaviorEdited();case 4:$b.WholeProjectRefactorer.fixInvalidRequiredBehaviorProperties(e.props.project);case 5:e.state.selectedEventsFunction&&e._updateProjectScopedContainer();case 6:case"end":return n.stop()}}),n)}))))},e._editObject=function(t){e.setState((function(n){return n.editedEventsBasedObject&&!t&&$b.WholeProjectRefactorer.ensureObjectEventsFunctionsProperParameters(e.props.eventsFunctionsExtension,n.editedEventsBasedObject),{editedEventsBasedObject:t}}),(0,o.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=5;break}if(!e.props.onObjectEdited){n.next=4;break}return n.next=4,e.props.onObjectEdited();case 4:e.state.selectedEventsFunction&&e._updateProjectScopedContainer();case 5:case"end":return n.stop()}}),n)}))))},e._onEditorNavigatorEditorChanged=function(t){e.updateToolbar(),"behaviors-list"===t?e._selectEventsBasedBehavior(null):"free-functions-list"!==t&&"behavior-functions-list"!==t||e._selectEventsFunction(null,e.state.selectedEventsBasedBehavior)},e._getFunctionGroupNames=function(){var t=new Set,n=e.state,i=n.selectedEventsBasedBehavior,a=n.selectedEventsBasedObject;if(i)for(var o=i.getEventsFunctions(),s=0;s<o.getEventsFunctionsCount();s++){var l=o.getEventsFunctionAt(s).getGroup();l&&t.add(l)}else if(a)for(var c=a.getEventsFunctions(),u=0;u<c.getEventsFunctionsCount();u++){var d=c.getEventsFunctionAt(u).getGroup();d&&t.add(d)}else for(var p=e.props.eventsFunctionsExtension.getEventsFunctions(),f=0;f<p.getEventsFunctionsCount();f++){var h=p.getEventsFunctionAt(f).getGroup();h&&t.add(h)}return(0,r.Z)(t).sort((function(e,t){return e.localeCompare(t)}))},e._onConfigurationUpdated=function(t){"type"!==t&&"isPrivate"!==t&&"isAsync"!==t||e.forceUpdate()},e.onBeginCreateEventsFunction=function(){(0,ai.cc)({step:"begin",parentEditor:"extension-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"extension-events-editor")},e}return(0,We.Z)(n,[{key:"componentDidMount",value:function(){this.props.initiallyFocusedFunctionName?this.selectEventsFunctionByName(this.props.initiallyFocusedFunctionName,this.props.initiallyFocusedBehaviorName,this.props.initiallyFocusedObjectName):this.props.initiallyFocusedBehaviorName?this.selectEventsBasedBehaviorByName(this.props.initiallyFocusedBehaviorName):this.props.initiallyFocusedObjectName&&this.selectEventsBasedObjectByName(this.props.initiallyFocusedObjectName)}},{key:"componentWillUnmount",value:function(){this._globalObjectsContainer&&this._globalObjectsContainer.delete(),this._objectsContainer&&this._objectsContainer.delete(),this._parameterVariablesContainer&&this._parameterVariablesContainer.delete(),this._propertyVariablesContainer&&this._propertyVariablesContainer.delete(),this._parameterResourcesContainer&&this._parameterResourcesContainer.delete(),this._propertyResourcesContainer&&this._propertyResourcesContainer.delete()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.eventsFunctionsExtension,i=this.state,a=i.selectedEventsFunction,o=i.selectedEventsBasedBehavior,s=i.selectedEventsBasedObject,l=i.editOptionsDialogOpen,u=i.behaviorMethodSelectorDialogOpen,d=i.objectMethodSelectorDialogOpen,p=i.extensionFunctionSelectorDialogOpen,h=i.eventsBasedObjectSelectorDialogOpen,g=i.variablesEditorOpen,m={project:n,layout:null,externalEvents:null,eventsFunctionsExtension:r,eventsBasedBehavior:o,eventsBasedObject:s,eventsFunction:a},x=o||s,v={parameters:{type:"primary",title:{id:"Function Configuration"},toolbarControls:[],renderEditor:function(){return(0,f.jsx)(w.I18n,{children:function(t){var i=t.i18n;return(0,f.jsx)(Ki.Z,{maxWidth:!0,children:a&&e._objectsContainer&&e._projectScopedContainersAccessor?(0,f.jsx)(_x,{project:n,projectScopedContainersAccessor:e._projectScopedContainersAccessor,eventsFunction:a,eventsBasedBehavior:o,eventsBasedObject:s,eventsFunctionsContainer:x&&x.getEventsFunctions()||r.getEventsFunctions(),eventsFunctionsExtension:r,globalObjectsContainer:s?s.getObjects():null,objectsContainer:e._objectsContainer,onConfigurationUpdated:e._onConfigurationUpdated,helpPagePath:s?"/behaviors/events-based-objects":o?"/behaviors/events-based-behaviors":"/events/functions",onParametersOrGroupsUpdated:function(){e._updateProjectScopedContainer(),e.forceUpdate()},onMoveFreeEventsParameter:e._makeMoveFreeEventsParameter(i),onMoveBehaviorEventsParameter:e._makeMoveBehaviorEventsParameter(i),onMoveObjectEventsParameter:e._makeMoveObjectEventsParameter(i),onFunctionParameterWillBeRenamed:e._onFunctionParameterWillBeRenamed,onFunctionParameterTypeChanged:e._onFunctionParameterChangedOfType,unsavedChanges:e.props.unsavedChanges,getFunctionGroupNames:e._getFunctionGroupNames}):(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Choose a function, or a function of a behavior, to set the parameters that it accepts."})})})}})}},"events-sheet":{type:"primary",noTitleBar:!!a||!o&&!s,noSoftKeyboardAvoidance:!0,title:o?{id:"Behavior Configuration"}:s?{id:"Object Configuration"}:null,toolbarControls:[],renderEditor:function(){return a&&e._projectScopedContainersAccessor&&e._globalObjectsContainer&&e._objectsContainer?(0,f.jsx)(Ki.Z,{children:(0,f.jsx)(gm,{ref:function(t){return e.editor=t},project:n,scope:m,globalObjectsContainer:s?s.getObjects():e._globalObjectsContainer,objectsContainer:e._objectsContainer,projectScopedContainersAccessor:e._projectScopedContainersAccessor,events:a.getEvents(),onOpenExternalEvents:function(){},onOpenLayout:function(){},resourceManagementProps:e.props.resourceManagementProps,openInstructionOrExpression:e.props.openInstructionOrExpression,setToolbar:e.props.setToolbar,onBeginCreateEventsFunction:e.onBeginCreateEventsFunction,onCreateEventsFunction:e.onCreateEventsFunction,onOpenSettings:e._editOptions,settingsIcon:eC,unsavedChanges:e.props.unsavedChanges,isActive:!0,hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,onWillInstallExtension:e.props.onWillInstallExtension,onExtensionInstalled:e.props.onExtensionInstalled},a.ptr)}):o&&e._projectScopedContainersAccessor?(0,f.jsx)(ob,{project:n,projectScopedContainersAccessor:e._projectScopedContainersAccessor,eventsFunctionsExtension:r,eventsBasedBehavior:o,unsavedChanges:e.props.unsavedChanges,onRenameProperty:function(t,n){return e._onBehaviorPropertyRenamed(o,t,n)},onRenameSharedProperty:function(t,n){return e._onBehaviorSharedPropertyRenamed(o,t,n)},onPropertyTypeChanged:function(e){$b.WholeProjectRefactorer.changeEventsBasedBehaviorPropertyType(n,r,o,e)},onEventsFunctionsAdded:function(){e.eventsFunctionList&&e.eventsFunctionList.forceUpdateList()},onConfigurationUpdated:e._onConfigurationUpdated}):s&&e._projectScopedContainersAccessor?(0,f.jsx)(Cb,{project:n,projectScopedContainersAccessor:e._projectScopedContainersAccessor,eventsFunctionsExtension:r,eventsBasedObject:s,unsavedChanges:e.props.unsavedChanges,onRenameProperty:function(t,n){return e._onObjectPropertyRenamed(s,t,n)},onPropertyTypeChanged:function(e){$b.WholeProjectRefactorer.changeEventsBasedObjectPropertyType(n,r,s,e)},onEventsFunctionsAdded:function(){e.eventsFunctionList&&e.eventsFunctionList.forceUpdateList()},onOpenCustomObjectEditor:function(){return e.props.onOpenCustomObjectEditor(s)},onEventsBasedObjectChildrenEdited:e.props.onEventsBasedObjectChildrenEdited}):(0,f.jsx)(Ki.Z,{children:(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Choose a function, or a function of a behavior, to edit its events."})})})}},"functions-list":{type:"primary",title:{id:"Functions"},toolbarControls:[],renderEditor:function(){return(0,f.jsx)(w.I18n,{children:function(t){var i=t.i18n;return(0,f.jsx)(Pv,{ref:function(t){return e.eventsFunctionList=t},project:n,eventsFunctionsExtension:r,unsavedChanges:e.props.unsavedChanges,forceUpdateEditor:function(){return e.forceUpdate()},selectedEventsFunction:a,onSelectEventsFunction:e._selectEventsFunction,onDeleteEventsFunction:e._onDeleteEventsFunction,onRenameEventsFunction:e._makeRenameEventsFunction(i),onAddEventsFunction:e._onAddEventsFunction,onEventsFunctionAdded:e._onEventsFunctionAdded,selectedEventsBasedBehavior:o,onSelectEventsBasedBehavior:e._selectEventsBasedBehavior,onDeleteEventsBasedBehavior:e._onDeleteEventsBasedBehavior,onRenameEventsBasedBehavior:e._makeRenameEventsBasedBehavior(i),onEventsBasedBehaviorRenamed:e._onEventsBasedBehaviorRenamed,onEventsBasedBehaviorPasted:e._onEventsBasedBehaviorPasted,selectedEventsBasedObject:s,onSelectEventsBasedObject:e._selectEventsBasedObject,onDeleteEventsBasedObject:e._onDeleteEventsBasedObject,onRenameEventsBasedObject:e._makeRenameEventsBasedObject(i),onEventsBasedObjectRenamed:e._onEventsBasedObjectRenamed,onEventsBasedObjectPasted:e._onEventsBasedObjectPasted,onAddEventsBasedObject:e._onAddEventsBasedObject,onSelectExtensionProperties:function(){return e._editOptions(!0)},onSelectExtensionGlobalVariables:function(){return e._editVariables({isGlobalTabInitiallyOpen:!0})},onSelectExtensionSceneVariables:function(){return e._editVariables()},onOpenCustomObjectEditor:e.props.onOpenCustomObjectEditor,onEventBasedObjectTypeChanged:e.props.onEventBasedObjectTypeChanged})}})}}};return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(be.Ip,{children:function(t){return t.isMobile?(0,f.jsx)(Jb,{ref:function(t){return e._editorNavigator=t},editors:v,initialEditorName:"functions-list",transitions:{"events-sheet":{nextIcon:(0,f.jsx)(Kb.Z,{}),nextLabel:(0,f.jsx)(w.Trans,{id:"Parameters"}),nextEditor:"parameters",previousEditor:function(){return e._selectEventsFunction(null,null,null),"functions-list"}},parameters:{nextIcon:(0,f.jsx)(Qb.Z,{}),nextLabel:(0,f.jsx)(w.Trans,{id:"Validate these parameters"}),nextEditor:"events-sheet"}},onEditorChanged:e._onEditorNavigatorEditorChanged}):(0,f.jsx)(D.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode;return(0,f.jsx)(Zm.Z,{ref:function(t){return e._editorMosaic=t},editors:v,centralNodeId:"events-sheet",onPersistNodes:function(e){return r("events-functions-extension-editor",e)},initialNodes:(0,Zm.J)(n("events-functions-extension-editor")||{direction:"row",first:"functions-list",second:{direction:"row",first:"events-sheet",second:"parameters",splitPercentage:80},splitPercentage:20},"functions-list")&&n("events-functions-extension-editor")||{direction:"row",first:"functions-list",second:{direction:"row",first:"events-sheet",second:"parameters",splitPercentage:80},splitPercentage:20}})}})}}),l&&(0,f.jsx)(Wv,{project:n,resourceManagementProps:this.props.resourceManagementProps,eventsFunctionsExtension:r,open:!0,onClose:function(){return e._editOptions(!1)}}),g&&n&&(0,f.jsx)(kc,{isGlobalTabInitiallyOpen:g.isGlobalTabInitiallyOpen,projectScopedContainersAccessor:new Bn({project:n,eventsFunctionsExtension:r}),open:!0,onCancel:function(){return e._editVariables(null)},onApply:function(){return e._editVariables(null)},hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,isListLocked:!1}),d&&s&&(0,f.jsx)(Nb,{eventsBasedObject:s,onCancel:function(){return e._onCloseObjectMethodSelectorDialog(null)},onChoose:function(t){return e._onCloseObjectMethodSelectorDialog(t)}}),u&&o&&(0,f.jsx)(Ab,{eventsBasedBehavior:o,onCancel:function(){return e._onCloseBehaviorMethodSelectorDialog(null)},onChoose:function(t){return e._onCloseBehaviorMethodSelectorDialog(t)}}),p&&r&&(0,f.jsx)(Vb,{eventsFunctionsContainer:r.getEventsFunctions(),onCancel:function(){return e._onCloseExtensionFunctionSelectorDialog(null)},onChoose:function(t){return e._onCloseExtensionFunctionSelectorDialog(t)}}),h&&(0,f.jsx)(Yb,{onCancel:function(){return e._onCloseEventsBasedObjectSelectorDialog(null)},onChoose:function(t){return e._onCloseEventsBasedObjectSelectorDialog(t)}})]})}}]),n}(c.Component),nC={container:{display:"flex",flex:1,minWidth:0}},rC=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._reloadExtensionMetadata=function(){try{var t=e.getEventsFunctionsExtension();t&&e.props.onReloadEventsFunctionsExtensionMetadata(t)}catch(n){console.warn("Error while loading events functions extensions - ignoring this in the context of the EventsFunctionsExtensionEditorContainer.",n)}},e.previewOrExportWillStart=function(){e.props.isActive&&e.props.onLoadEventsFunctionsExtensions({shouldHotReloadEditor:!1})},e}return(0,We.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"onEventsBasedObjectChildrenEdited",value:function(){}},{key:"onSceneObjectEdited",value:function(e,t){}},{key:"onSceneObjectsDeleted",value:function(e){}},{key:"onSceneEventsModifiedOutsideEditor",value:function(e){}},{key:"notifyChangesToInGameEditor",value:function(e){(0,mm.VL)(e)}},{key:"switchInGameEditorIfNoHotReloadIsNeeded",value:function(){}},{key:"onInstancesModifiedOutsideEditor",value:function(e){}},{key:"onObjectsModifiedOutsideEditor",value:function(e){}},{key:"onObjectGroupsModifiedOutsideEditor",value:function(e){}},{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidUpdate",value:function(e){e.isActive&&!this.props.isActive&&this.props.onLoadEventsFunctionsExtensions({shouldHotReloadEditor:this.hasAnyEventBasedObject()})}},{key:"componentWillUnmount",value:function(){this.props.isActive&&this.props.onLoadEventsFunctionsExtensions({shouldHotReloadEditor:this.hasAnyEventBasedObject()})}},{key:"hasAnyEventBasedObject",value:function(){var e=this.getEventsFunctionsExtension();return!!e&&e.getEventsBasedObjects().getCount()>0}},{key:"getEventsFunctionsExtension",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasEventsFunctionsExtensionNamed(n)?t.getEventsFunctionsExtension(n):null}},{key:"getEventsFunctionsExtensionName",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n?n:null}},{key:"selectEventsFunctionByName",value:function(e,t,n){this.editor&&this.editor.selectEventsFunctionByName(e,t,n)}},{key:"selectEventsBasedBehaviorByName",value:function(e){this.editor&&this.editor.selectEventsBasedBehaviorByName(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=this.getEventsFunctionsExtension();if(!i||!n)return(0,f.jsxs)("div",{children:["No extension called ",r," found!"]});var a=this.props.extraEditorProps||{},o=a.initiallyFocusedFunctionName,s=a.initiallyFocusedBehaviorName,l=a.initiallyFocusedObjectName;return(0,f.jsx)("div",{style:nC.container,children:(0,f.jsx)(tC,{project:n,eventsFunctionsExtension:i,setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.props.onCreateEventsFunction,initiallyFocusedFunctionName:o,initiallyFocusedBehaviorName:s,initiallyFocusedObjectName:l,onBehaviorEdited:this._reloadExtensionMetadata,onObjectEdited:this._reloadExtensionMetadata,onFunctionEdited:this._reloadExtensionMetadata,ref:function(t){return e.editor=t},unsavedChanges:this.props.unsavedChanges,onOpenCustomObjectEditor:function(t){e.props.onOpenCustomObjectEditor(i,t,"")},hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,onEventsBasedObjectChildrenEdited:this.props.onEventsBasedObjectChildrenEdited,onRenamedEventsBasedObject:this.props.onRenamedEventsBasedObject,onDeletedEventsBasedObject:this.props.onDeletedEventsBasedObject,onWillInstallExtension:this.props.onWillInstallExtension,onExtensionInstalled:this.props.onExtensionInstalled,onEventBasedObjectTypeChanged:this.props.onEventBasedObjectTypeChanged},i.ptr)})}}]),n}(c.Component),iC=n(19345),aC=n(3698),oC=n(50463);function sC(e){var t=e.open,n=e.onChoose,r=e.layoutName,i=e.onClose,a=e.project,o=e.title,l=e.helpTexts,u=r||"",d=c.useState(u),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useCallback((function(){h&&n({layoutName:h})}),[n,h]),x=[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:i},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Choose"}),primary:!0,onClick:m,disabled:!h},"choose")],v=(0,mt.mapFor)(0,a.getLayoutsCount(),(function(e){return a.getLayoutAt(e).getName()}));return(0,f.jsx)(E.ZP,{title:o,actions:x,open:t,onRequestClose:i,onApply:m,maxWidth:"sm",children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[l&&l.map((function(e,t){return(0,f.jsx)(M.x1,{children:(0,f.jsx)(Io.Z,{children:e})},t)})),(0,f.jsx)(M.x1,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Choose the associated scene:"})})}),(0,f.jsx)(oC.Z,{"aria-label":"Associated scene",name:"associated-layout",value:h,onChange:function(e){return g(e.target.value)},children:v.map((function(e){return(0,f.jsx)(iC.Z,{value:e,control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:e},e)}))})]})})}var lC=n(36595),cC={container:{display:"flex",flex:1}},uC=(0,f.jsx)(ag,{}),dC=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={externalPropertiesDialogOpen:!1},e.onResourceExternallyChanged=function(t){e.editor&&e.editor.onResourceExternallyChanged(t)},e.saveExternalProperties=function(t){var n=e.getExternalEvents();n&&(n.setAssociatedLayout(t.layoutName),e.setState({externalPropertiesDialogOpen:!1},(function(){return e.updateToolbar()})))},e.openExternalPropertiesDialog=function(){e.setState({externalPropertiesDialogOpen:!0})},e.onBeginCreateEventsFunction=function(){(0,ai.cc)({step:"begin",parentEditor:"external-events-editor"})},e.onCreateEventsFunction=function(t,n){e.props.onCreateEventsFunction(t,n,"external-events-editor")},e}return(0,We.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){this.resourceExternallyChangedCallbackId=am(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){om(this.resourceExternallyChangedCallbackId)}},{key:"getProject",value:function(){return this.props.project}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"onEventsBasedObjectChildrenEdited",value:function(){}},{key:"onSceneObjectEdited",value:function(e,t){}},{key:"onSceneObjectsDeleted",value:function(e){}},{key:"onSceneEventsModifiedOutsideEditor",value:function(e){}},{key:"notifyChangesToInGameEditor",value:function(e){(0,mm.VL)(e)}},{key:"switchInGameEditorIfNoHotReloadIsNeeded",value:function(){}},{key:"onInstancesModifiedOutsideEditor",value:function(e){}},{key:"onObjectsModifiedOutsideEditor",value:function(e){}},{key:"onObjectGroupsModifiedOutsideEditor",value:function(e){}},{key:"getExternalEvents",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasExternalEventsNamed(n)?t.getExternalEvents(n):null}},{key:"getLayout",value:function(){var e=this.props.project;if(!e)return null;var t=this.getAssociatedLayoutName();return t?e.getLayout(t):null}},{key:"getAssociatedLayoutName",value:function(){var e=this.props.project;if(!e)return null;var t=this.getExternalEvents();if(!t)return null;var n=t.getAssociatedLayout();return e.hasLayoutNamed(n)?n:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=this.getExternalEvents(),a=this.getLayout();if(!i||!n)return(0,f.jsxs)("div",{children:["No external events called ",r," found!"]});var o={project:n,layout:a,externalEvents:i};return(0,f.jsxs)("div",{style:cC.container,children:[a&&(0,f.jsx)(gm,{ref:function(t){return e.editor=t},setToolbar:this.props.setToolbar,onOpenLayout:this.props.onOpenLayout,resourceManagementProps:this.props.resourceManagementProps,openInstructionOrExpression:this.props.openInstructionOrExpression,onCreateEventsFunction:this.onCreateEventsFunction,onBeginCreateEventsFunction:this.onBeginCreateEventsFunction,unsavedChanges:this.props.unsavedChanges,project:n,scope:o,globalObjectsContainer:n.getObjects(),objectsContainer:a.getObjects(),projectScopedContainersAccessor:new Bn(o),events:i.getEvents(),onOpenSettings:this.openExternalPropertiesDialog,settingsIcon:uC,onOpenExternalEvents:this.props.onOpenExternalEvents,isActive:this.props.isActive,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,onWillInstallExtension:this.props.onWillInstallExtension,onExtensionInstalled:this.props.onExtensionInstalled}),!a&&(0,f.jsx)(Ki.Z,{children:(0,f.jsxs)(fx.Z,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"To edit the external events, choose the scene in which it will be included"})}),(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Choose the scene"}),primary:!0,onClick:this.openExternalPropertiesDialog})}),(0,f.jsx)(M.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,f.jsx)(lC.Z,{tutorialId:"Intermediate-externals",label:(0,f.jsx)(w.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,f.jsx)(An.Z,{helpPagePath:"/interface/events-editor/external-events"})})})]})}),(0,f.jsx)(sC,{title:(0,f.jsx)(w.Trans,{id:"Configure the external events"}),helpTexts:[(0,f.jsx)(w.Trans,{id:'In order to use these external events, you still need to add a "Link" event in the events sheet of the corresponding scene'})],open:this.state.externalPropertiesDialogOpen,project:n,onChoose:this.saveExternalProperties,layoutName:this.getAssociatedLayoutName(),onClose:function(){return e.setState({externalPropertiesDialogOpen:!1})}})]})}}]),n}(c.Component),pC=function(e){return(0,mt.mapFor)(0,e.getLayersCount(),(function(t){return{value:e.getLayerAt(t).getName(),label:e.getLayerAt(t).getName()||"Base layer",labelIsUserDefined:!!e.getLayerAt(t).getName()}}))},fC=n.g.gd,hC=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(e){var r;return(0,ze.Z)(this,n),(r=t.call(this,e)).state={selectedLayer:""},r}return(0,We.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.open&&e.open&&this.setState({selectedLayer:""})}},{key:"render",value:function(){var e=this;if(!this.props.layersContainer||!this.props.open)return null;var t=this.props.layout?fC.WholeProjectRefactorer.getLayoutAndExternalLayoutLayerInstancesCount(this.props.project,this.props.layout,this.props.layerRemoved):this.props.initialInstances.getLayerInstancesCount(this.props.layerRemoved),n=[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),keyboardFocused:!0,onClick:function(){return e.props.onClose(!1,null)}},"cancel")];t>0?n=n.concat([(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Remove objects"}),onClick:function(){return e.props.onClose(!0,null)}},"remove"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Move objects"}),primary:!0,onClick:function(){return e.props.onClose(!0,e.state.selectedLayer)}},"move")]):n.push((0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Continue"}),primary:!0,onClick:function(){return e.props.onClose(!0,null)}},"continue"));var r=pC(this.props.layersContainer).filter((function(t){return t.value!==e.props.layerRemoved})).map((function(e){var t=e.value,n=e.label,r=e.labelIsUserDefined;return(0,f.jsx)(P.Z,{value:t,label:n,shouldNotTranslate:r},t)}));return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Objects on {0}",values:{0:this.props.layerRemoved}}),actions:n,open:this.props.open,onRequestClose:function(){return e.props.onClose(!1,null)},onApply:t>0?function(){return e.props.onClose(!0,e.state.selectedLayer)}:function(){return e.props.onClose(!0,null)},flexColumnBody:!0,maxWidth:"sm",children:[(0,f.jsx)(N.Z,{children:0===t?(0,f.jsx)(w.Trans,{id:"The layer {0} does not contain any object instances. Continue?",values:{0:this.props.layerRemoved}}):(0,f.jsx)(w.Trans,{id:"There are {instancesCountInLayout} object instances on this layer. Should they be moved to another layer?",values:{instancesCountInLayout:t}})}),t>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Move objects from layer {0} to:",values:{0:this.props.layerRemoved}})}),(0,f.jsx)(Hn.Z,{value:this.state.selectedLayer,onChange:function(t,n,r){e.setState({selectedLayer:r})},children:r})]})]})}}]),n}(c.Component),gC=n(25777),mC=n.g.gd,xC="Effects",vC=(0,ut.x)("2d-effects-list"),bC=(0,ut.x)("3d-effects-list"),CC={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},jC=c.forwardRef((function(e,t){e.layerRenderingType;var n=e.target,r=e.project,i=e.resourceManagementProps,a=e.projectScopedContainersAccessor,o=e.effectsContainer,s=e.effect,u=e.removeEffect,d=e.copyEffect,p=e.pasteEffectsBefore,h=e.chooseEffectType,g=e.allEffectMetadata,m=e.onEffectsUpdated,x=e.onEffectsRenamed,v=e.nameErrors,b=e.setNameErrors,C=e.connectDragSource,y=c.useContext(j.Z),Z=c.useContext(D.ZP),k=Z.values.showEffectParameterNames,T=Z.setShowEffectParameterNames,S=(0,gt.Z)(),I=vt.Z.has(xC),E=c.useCallback((function(e,t){if(t!==e.getName()){if(v[e.ptr]){var n=(0,l.Z)({},v);delete n[e.ptr],b(n)}if(t)if(o.hasEffectNamed(t))b((0,l.Z)((0,l.Z)({},v),{},(0,Qt.Z)({},e.ptr,(0,f.jsx)(w.Trans,{id:"The effect name {newName} is already taken",values:{newName:t}}))));else{var r=e.getName();e.setName(t),S(),x(r,t),m()}else b((0,l.Z)((0,l.Z)({},v),{},(0,Qt.Z)({},e.ptr,(0,f.jsx)(w.Trans,{id:"Effects cannot have empty names"}))))}}),[o,S,v,x,m,b]),L=s.getEffectType(),A=yC(g,L);return(0,f.jsx)(w.I18n,{children:function(e){var o=e.i18n;return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsxs)("div",{ref:t,style:(0,l.Z)((0,l.Z)({},CC.rowContent),{},{backgroundColor:y.list.itemsBackgroundColor}),children:[C((0,f.jsx)("span",{children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(ct.V,{})})})),(0,f.jsxs)(_.ep,{expand:!0,children:[(0,f.jsxs)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,noShrink:!0,children:(0,f.jsx)(w.Trans,{id:"Effect name:"})}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(yn.Z,{margin:"none",commitOnBlur:!0,errorText:v[s.ptr],translatableHintText:{id:"Enter the effect name"},value:s.getName(),onChange:function(e){E(s,e)},fullWidth:!0})]}),(0,f.jsxs)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,noShrink:!0,children:(0,f.jsx)(w.Trans,{id:"Type:"})}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(Hn.Z,{margin:"none",value:L,onChange:function(e,t,n){return h(s,n)},fullWidth:!0,translatableHintText:{id:"Choose the effect to apply"},children:g.map((function(e){return(0,f.jsx)(P.Z,{value:e.type,label:e.fullName,disabled:"object"===n&&e.isMarkedAsNotWorkingForObjects},e.type)}))})]})]}),(0,f.jsx)(gg.Z,{id:"effect-visibility",paddingSize:"small",checkedIcon:(0,f.jsx)(ex.Z,{}),uncheckedIcon:(0,f.jsx)(tx.Z,{}),checked:s.isEnabled(),onCheck:function(e,t){s.setEnabled(t),S()},tooltipOrHelperText:s.isEnabled()?(0,f.jsx)(w.Trans,{id:"Hide effect"}):(0,f.jsx)(w.Trans,{id:"Show effect"})}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",children:(0,f.jsx)(Mh.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Delete"}),click:function(){return u(s)}},{label:e._({id:"Copy"}),click:function(){return d(s)}},{label:e._({id:"Paste"}),click:function(){return p(s)},enabled:I},{type:"separator"},{type:"checkbox",label:e._({id:"Show Properties Names"}),checked:k,click:function(){return T(!k)}}]}}),(0,f.jsx)(M.LZ,{})]}),A&&(0,f.jsx)(M.x1,{expand:!0,noMargin:!0,children:(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(Io.Z,{children:(0,f.jsx)(Re.r,{source:A.description})})}),(0,f.jsx)(gC.Z,{project:r,schema:A.parametersSchema,instances:[s],resourceManagementProps:i,projectScopedContainersAccessor:a,renderExtraDescriptionText:k?function(e){return o._({id:"Property name in events: `{parameterName}`",values:{parameterName:e}})}:void 0,placeholder:(0,f.jsx)(w.Trans,{id:"There is nothing to configure for this effect."})})]})})]})}})})),yC=function(e,t){return e.find((function(e){return e.type===t}))},ZC=function(e){var t=e.effectsContainer,n=e.project,r=e.onEffectsUpdated,l=e.onEffectAdded,u=e.onUpdate,d=e.target,p=c.useContext($n.ZP),f=c.useState(null),h=(0,s.Z)(f,2),g=h[0],m=h[1],x=c.useRef(null),v=c.useMemo((function(){return function(e){var t=e.getCurrentPlatform().getAllPlatformExtensions();return Tc()((0,mt.mapFor)(0,t.size(),(function(e){var n=t.at(e);return n.getExtensionEffectTypes().toJSArray().map((function(e){return n.getEffectMetadata(e)})).map((function(e){var t=e.getType(),r=(0,Gn.ew)({defaultValueProperties:e.getProperties(),getProperties:function(t){return e.getProperties()}});return{extension:n,type:t,effectMetadata:e,fullName:e.getFullName(),description:e.getDescription(),isMarkedAsNotWorkingForObjects:e.isMarkedAsNotWorkingForObjects(),isMarkedAsOnlyWorkingFor2D:e.isMarkedAsOnlyWorkingFor2D(),isMarkedAsOnlyWorkingFor3D:e.isMarkedAsOnlyWorkingFor3D(),parametersSchema:r}}))}))).sort((function(e,t){return e.fullName.localeCompare(t.fullName)}))}(n)}),[n]),b=c.useMemo((function(){var e,t=[],n=[],r=[],a=(0,i.Z)(v);try{for(a.s();!(e=a.n()).done;){var o=e.value;o.isMarkedAsOnlyWorkingFor3D&&(o.type.endsWith("Light")?t.push(o):o.type.endsWith("Fog")?n.push(o):r.push(o))}}catch(s){a.e(s)}finally{a.f()}return[].concat(t,n,r)}),[v]),C=c.useMemo((function(){return v.filter((function(e){return e.isMarkedAsOnlyWorkingFor2D}))}),[v]),j=function(){var e=(0,Ye.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing effects"},message:{id:"These effects already exist:{0}Do you want to replace them?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),y=c.useCallback((function(e,t){e.setEffectType(t);var n=yC(v,t);n&&function(e,t){e.clearParameters();var n=t.getProperties();n.keys().toJSArray().forEach((function(t){var r=n.get(t),i=r.getType().toLowerCase();"number"===i?e.setDoubleParameter(t,parseFloat(r.getValue())||0):"boolean"===i?e.setBooleanParameter(t,"true"===r.getValue()):e.setStringParameter(t,r.getValue())}))}(e,n.effectMetadata),u(),r(),l()}),[v,u,r,l]),Z=c.useCallback((function(e){var n=(0,xt.Z)("Effect",(function(e){return t.hasEffectNamed(e)})),i=t.insertNewEffect(n,t.getEffectsCount());y(i,e?"Scene3D::DirectionalLight":"Outline"),u(),r(),m(n)}),[y,t,u,r]),k=(0,xi.zi)(p,xi.OV,Z),w=c.useCallback((function(e){t.removeEffect(e.getName()),u(),r()}),[t,u,r]),T=c.useCallback((function(e){vt.Z.set(xC,[{name:e.getName(),type:e.getEffectType(),serializedEffect:(0,Ct.XH)(e)}]),u()}),[u]),S=c.useCallback((function(){vt.Z.set(xC,(0,mt.mapFor)(0,t.getEffectsCount(),(function(e){var n=t.getEffectAt(e);return{name:n.getName(),type:n.getEffectType(),serializedEffect:(0,Ct.XH)(n)}}))),u()}),[u,t]),P=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(i){var o,s,l,c,p,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=vt.Z.get(xC),s=bt.$.extractArray(o)){e.next=4;break}return e.abrupt("return");case 4:if(l=[],c=[],s.forEach((function(e){var r=bt.$.extractStringProperty(e,"name"),i=bt.$.extractStringProperty(e,"type"),a=bt.$.extractObjectProperty(e,"serializedEffect");if(r&&a){if(i){var o=mC.MetadataProvider.getEffectMetadata(n.getCurrentPlatform(),i);if(!o)return;if("object"===d&&o.isMarkedAsNotWorkingForObjects())return}t.hasEffectNamed(r)?c.push({name:r,serializedEffect:a}):l.push({name:r,serializedEffect:a})}})),p=null,f=i,l.forEach((function(e){var n=e.name,r=e.serializedEffect,i=t.insertNewEffect(n,f);f++,(0,Ct.qx)(i,r),p||(p=n)})),h=!1,!(c.length>0)){e.next=16;break}return e.next=14,j(c.map((function(e){return e.name})));case 14:(h=e.sent)&&c.forEach((function(e){var n=e.name,r=e.serializedEffect;if(t.hasEffectNamed(n)){var i=t.getEffect(n);(0,Ct.qx)(i,r)}}));case 16:u(),p?m(p):1===c.length&&m(c[0].name),(p||h)&&r&&r();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,n,d,t,j,r]),I=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.getEffectsCount());case 2:case"end":return e.stop()}}),e)}))),[t,P]),E=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.getEffectPosition(n.getName()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,P]),M=c.useCallback((function(e){var n=x.current;if(n){var i=t.getEffectPosition(n.getName()),a=t.getEffectPosition(e.getName());t.moveEffect(i,a>i?a-1:a),u(),r()}}),[t,u,r]),L=vt.Z.has(xC),A=c.useCallback((function(){if(t.getEffectsCount()<2)return null;for(var e=[],n=0;n<t.getEffectsCount();n++){var r=t.getEffectAt(n).getEffectType(),i=yC(v,r);if(i&&("Scene3D::LinearFog"===r||"Scene3D::ExponentialFog"===r)){if(e.includes(r))return i;e.push(r)}}return null}),[v,t]),O=A(),R=c.useCallback((function(){m(null)}),[]);return{allEffectMetadata:v,all2DEffectMetadata:C,all3DEffectMetadata:b,draggedEffect:x,addEffect:k,chooseEffectType:y,copyAllEffects:S,copyEffect:T,duplicatedUniqueEffectMetadata:O,isClipboardContainingEffects:L,moveEffect:M,pasteEffectsAtTheEnd:I,pasteEffectsBefore:E,removeEffect:w,resetJustAddedEffectName:R,justAddedEffectName:g}};function kC(e){var t=e.effectsContainer,n=e.onEffectsUpdated,r=e.onEffectsRenamed,i=e.onEffectAdded,a=e.project,o=e.target,l=c.useRef(null),u=c.useRef(null),d=(0,gt.Z)(),p=ZC({effectsContainer:t,project:a,onEffectsUpdated:n,onEffectAdded:i,onUpdate:d,target:o}),h=p.allEffectMetadata,g=p.all2DEffectMetadata,m=p.all3DEffectMetadata,x=p.addEffect,v=p.chooseEffectType,b=p.copyAllEffects,C=p.copyEffect,j=p.duplicatedUniqueEffectMetadata,y=p.isClipboardContainingEffects,Z=p.moveEffect,k=p.pasteEffectsAtTheEnd,T=p.pasteEffectsBefore,S=p.removeEffect,P=p.resetJustAddedEffectName,I=p.justAddedEffectName,E=p.draggedEffect;c.useEffect((function(){l.current&&u.current&&I&&(l.current.scrollTo(u.current),P(),u.current=null)}),[I,P]);var L=c.useState({}),A=(0,s.Z)(L,2),O=A[0],R=A[1],F=a.getCurrentPlatform(),D=function(e,t){for(var n=t.getEffectsCount(),r=0,i=0;i<n;i++){var a=t.getEffectAt(i),o=mC.MetadataProvider.getEffectMetadata(e,a.getEffectType());o&&o.isMarkedAsOnlyWorkingFor3D()||r++}return r}(F,t),B=function(e,t){for(var n=t.getEffectsCount(),r=0,i=0;i<n;i++){var a=t.getEffectAt(i),o=mC.MetadataProvider.getEffectMetadata(e,a.getEffectType());o&&o.isMarkedAsOnlyWorkingFor2D()||r++}return r}(F,t),U="2d"===e.layerRenderingType?D:"3d"===e.layerRenderingType?B:t.getEffectsCount();return(0,f.jsx)(w.I18n,{children:function(i){i.i18n;return(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:0!==U?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsxs)(ft.Z,{ref:l,children:[j&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(je.Z,{kind:"error",children:(0,f.jsx)(w.Trans,{id:'The "{0}" effect can only be applied once.',values:{0:j.fullName}})})})}),t.getEffectsCount()>3&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(Y.Z,{identifier:"too-much-effects",kind:"warning",children:(0,f.jsx)(w.Trans,{id:"Using a lot of effects can have a severe negative impact on the rendering performance, especially on low-end or mobile devices. Consider using less effects if possible. You can also disable and re-enable effects as needed using events."})})})}),"2d"!==e.layerRenderingType&&B>0&&(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:["3d"!==e.layerRenderingType&&(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"3D effects"})})})}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,mt.mapFor)(0,t.getEffectsCount(),(function(i){var s=t.getEffectAt(i),l=s.getEffectType(),c=yC(h,l),d=I===s.getName()?u:null;return c&&c.isMarkedAsOnlyWorkingFor2D?null:(0,f.jsx)(bC,{beginDrag:function(){return E.current=s,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){Z(s)},children:function(i){var l=i.connectDragSource,c=i.connectDropTarget,u=i.isOver,p=i.canDrop;return c((0,f.jsxs)("div",{style:CC.rowContainer,children:[u&&(0,f.jsx)(dt.Z,{canDrop:p}),(0,f.jsx)(jC,{ref:d,layerRenderingType:"3d",target:o,project:a,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,effectsContainer:t,effect:s,removeEffect:S,copyEffect:C,pasteEffectsBefore:T,chooseEffectType:v,allEffectMetadata:m,onEffectsUpdated:n,onEffectsRenamed:r,nameErrors:O,setNameErrors:R,connectDragSource:l})]},s.ptr))}},s.ptr)}))})})]}),"3d"!==e.layerRenderingType&&D>0&&(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:["2d"!==e.layerRenderingType&&(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"2D effects"})})})}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,mt.mapFor)(0,t.getEffectsCount(),(function(i){var s=t.getEffectAt(i),l=s.getEffectType(),c=yC(h,l),d=I===s.getName()?u:null;return c&&c.isMarkedAsOnlyWorkingFor3D?null:(0,f.jsx)(vC,{beginDrag:function(){return E.current=s,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){Z(s)},children:function(i){var l=i.connectDragSource,c=i.connectDropTarget,u=i.isOver,p=i.canDrop;return c((0,f.jsxs)("div",{style:CC.rowContainer,children:[u&&(0,f.jsx)(dt.Z,{canDrop:p}),(0,f.jsx)(jC,{ref:d,layerRenderingType:"2d",target:o,project:a,resourceManagementProps:e.resourceManagementProps,projectScopedContainersAccessor:e.projectScopedContainersAccessor,effectsContainer:t,effect:s,removeEffect:S,copyEffect:C,pasteEffectsBefore:T,chooseEffectType:v,allEffectMetadata:g,onEffectsUpdated:n,onEffectsRenamed:r,nameErrors:O,setNameErrors:R,connectDragSource:l})]},s.ptr))}},s.ptr)}))})})]})]}),(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{expand:!0,children:[(0,f.jsx)(Qe.Z,{leftIcon:(0,f.jsx)(Xt.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Copy all effects"}),onClick:function(){b()}},"copy-all-effects"),(0,f.jsx)(Qe.Z,{leftIcon:(0,f.jsx)(Bg,{}),label:(0,f.jsx)(w.Trans,{id:"Paste"}),onClick:function(){k()},disabled:!y},"paste-effects")]}),(0,f.jsxs)(_.pJ,{justifyContent:"flex-end",expand:!0,children:["2d"!==e.layerRenderingType&&(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Add a 3D effect"}),onClick:function(){return x(!0)},icon:(0,f.jsx)(it.Z,{})}),"3d"!==e.layerRenderingType&&(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Add a 2D effect"}),onClick:function(){return x(!1)},icon:(0,f.jsx)(it.Z,{})})]})]})})]}):(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:""===e.layerRenderingType||"2d+3d"===e.layerRenderingType?(0,f.jsx)(pt.$,{title:(0,f.jsx)(w.Trans,{id:"Add your first effect"}),description:(0,f.jsx)(w.Trans,{id:"Effects create visual changes to the object."}),actionLabel:(0,f.jsx)(w.Trans,{id:"Add a 2D effect"}),helpPagePath:"object"===e.target?"/objects/effects":"/interface/scene-editor/layer-effects",onAction:function(){return x(!1)},secondaryActionIcon:(0,f.jsx)(it.Z,{}),secondaryActionLabel:(0,f.jsx)(w.Trans,{id:"Add a 3D effect"}),onSecondaryAction:function(){return x(!0)}}):(0,f.jsx)(pt.$,{title:(0,f.jsx)(w.Trans,{id:"Add your first effect"}),description:(0,f.jsx)(w.Trans,{id:"Effects create visual changes to the object."}),actionLabel:"3d"===e.layerRenderingType?(0,f.jsx)(w.Trans,{id:"Add a 3D effect"}):(0,f.jsx)(w.Trans,{id:"Add a 2D effect"}),helpPagePath:"object"===e.target?"/objects/effects":"/interface/scene-editor/layer-effects",onAction:function(){return x("3d"===e.layerRenderingType)},secondaryActionIcon:(0,f.jsx)(Bg,{}),secondaryActionLabel:y?(0,f.jsx)(w.Trans,{id:"Paste"}):null,onSecondaryAction:function(){k()}})})})}})}var wC=n.g.gd,TC=function(e){var t=e.initialTab,n=e.project,r=e.layout,i=e.eventsFunctionsExtension,a=e.eventsBasedObject,o=e.layer,u=e.initialInstances,d=e.onCancel,p=e.onApply,h=e.hotReloadPreviewButtonProps,g=e.resourceManagementProps,m=e.projectScopedContainersAccessor,x=(0,gt.Z)(),v=Je({serializableObject:o,onCancel:d}),b=v.onCancelChanges,C=v.notifyOfChange,j=c.useState(null),y=(0,s.Z)(j,2),Z=y[0],k=y[1],S=c.useState(null),I=(0,s.Z)(S,2),L=I[0],A=I[1],O=c.useState(null),R=(0,s.Z)(O,2),F=R[0],D=R[1],U=c.useState(null),V=(0,s.Z)(U,2),z=V[0],W=V[1],G=c.useState(t),q=(0,s.Z)(G,2),J=q[0],X=q[1],K=c.useMemo((function(){var e=new wC.HighestZOrderFinder;e.restrictSearchToLayer(o.getName()),u.iterateOverInstances(e);var t=e.getInstancesCount(),n=e.getHighestZOrder();return e.delete(),{instancesCount:t,highestZOrder:n}}),[o,u]),Q=K.instancesCount,$=K.highestZOrder,ee=c.useState(!1),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=c.useCallback((function(e){k(null);var t=parseFloat(e)||0;t<=0||t>180?k((0,f.jsx)(w.Trans,{id:"The field of view cannot be lower than 0\xb0 or greater than 180\xb0."})):t!==o.getCamera3DFieldOfView()&&(o.setCamera3DFieldOfView(t),x(),C())}),[x,o,C]),ae=c.useCallback((function(e){D(null);var t=e<=0&&"orthographic"!==o.getCameraType()||e>=o.getCamera3DFarPlaneDistance();return t&&D((0,f.jsx)(w.Trans,{id:"The near plane distance must be strictly greater than 0 and lower than the far plan distance."})),t}),[o]),oe=c.useCallback((function(e){var t=parseFloat(e)||0;ae(t)||t!==o.getCamera3DNearPlaneDistance()&&(o.setCamera3DNearPlaneDistance(t),x(),C())}),[ae,x,o,C]),se=c.useCallback((function(e){A(null);var t=parseFloat(e)||0;t<=o.getCamera3DNearPlaneDistance()?A((0,f.jsx)(w.Trans,{id:"The far plane distance must be greater than the near plan distance."})):t!==o.getCamera3DFarPlaneDistance()&&(o.setCamera3DFarPlaneDistance(t),x(),C())}),[x,o,C]),le=c.useCallback((function(e){W(null);var t=parseFloat(e)||0;t<=0?W((0,f.jsx)(w.Trans,{id:"The maximum 2D drawing distance must be strictly greater than 0."})):t!==o.getCamera2DPlaneMaxDrawingDistance()&&(o.setCamera2DPlaneMaxDrawingDistance(t),x(),C())}),[x,o,C]);return(0,f.jsxs)(E.ZP,{title:o.getName()?(0,f.jsx)(w.Trans,{id:"{0} properties",values:{0:o.getName()}}):(0,f.jsx)(w.Trans,{id:"Base layer properties"}),open:!0,secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/interface/scene-editor/layer-effects"},"help"),(0,f.jsx)($e,(0,l.Z)({},h),"hot-reload-preview-button")],actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:b},"Cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Apply"}),primary:!0,onClick:function(){return p(ne)}},"Apply")],onRequestClose:b,onApply:function(){return p(ne)},fullHeight:!0,flexColumnBody:!0,fixedContent:(0,f.jsx)(B.m,{value:J,onChange:X,options:[{value:"properties",label:(0,f.jsx)(w.Trans,{id:"Properties"})},{value:"effects",label:(0,f.jsx)(w.Trans,{id:"Effects"})}]}),children:["properties"===J&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[o.isLightingLayer()?(0,f.jsx)(Y.Z,{kind:"info",identifier:"lighting-layer-usage",children:(0,f.jsx)(w.Trans,{id:"The lighting layer renders an ambient light on the scene. All lights should be placed on this layer so that shadows are properly rendered. By default, the layer follows the base layer camera. Uncheck this if you want to manually move the camera using events."})}):null,(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Camera positioning"})}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Default camera behavior"}),value:o.getDefaultCameraBehavior(),onChange:function(e,t,n){o.setDefaultCameraBehavior(n),x()},children:[(0,f.jsx)(P.Z,{value:"do-nothing",label:{id:"Keep centered (best for game content)"}}),(0,f.jsx)(P.Z,{value:"top-left-anchored-if-never-moved",label:{id:"Keep top-left corner fixed (best for content that can extend)"}})]}),(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Visibility and instances ordering"})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"There are {instancesCount} instances of objects on this layer.",values:{instancesCount:Q}})}),!n.getUseDeprecatedZeroAsDefaultZOrder()&&(0,f.jsx)(H.Z,{background:"light",variant:"outlined",children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:'Objects created using events on this layer will be given a "Z order" of {0}, so that they appear in front of all objects of this layer. You can change this using the action to change an object Z order, after using an action to create it.',values:{0:$+1}})})})})}),(0,f.jsx)(gg.Z,{label:(0,f.jsx)(w.Trans,{id:"Hide the layer"}),checked:!o.getVisibility(),onCheck:function(e,t){o.setVisibility(!t),x(),C()},tooltipOrHelperText:(0,f.jsx)(w.Trans,{id:'This setting changes the visibility of the entire layer. Objects on the layer will not be treated as "hidden" for event conditions or actions.'})}),!o.isLightingLayer()&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"3D settings"})}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Rendering type"}),value:o.getRenderingType(),onChange:function(e,t,n){o.setRenderingType(n),x()},children:[(0,f.jsx)(P.Z,{value:"",label:{id:"Display both 2D and 3D objects (default)"}}),(0,f.jsx)(P.Z,{value:"2d",label:{id:"Force display only 2D objects"}}),(0,f.jsx)(P.Z,{value:"3d",label:{id:"Force display only 3D objects"},disabled:o.isLightingLayer()}),(0,f.jsx)(P.Z,{value:"2d+3d",label:{id:"Force display both 2D and 3D objects"},disabled:o.isLightingLayer()})]}),"2d"!==o.getRenderingType()&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Camera type"}),value:o.getCameraType(),onChange:function(e,t,n){o.setCameraType(n),ae(o.getCamera3DNearPlaneDistance()),x()},children:[(0,f.jsx)(P.Z,{value:"perspective",label:{id:"Perspective camera"}}),(0,f.jsx)(P.Z,{value:"orthographic",label:{id:"Orthographic camera"}})]}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,fullWidth:!0,errorText:Z,onChange:ie,value:o.getCamera3DFieldOfView().toString(10),floatingLabelText:(0,f.jsx)(w.Trans,{id:"Field of view (in degrees)"}),floatingLabelFixed:!0,disabled:"perspective"!==o.getCameraType()})]}),(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,f.jsx)(yn.Z,{commitOnBlur:!0,fullWidth:!0,errorText:F,onChange:oe,value:o.getCamera3DNearPlaneDistance().toString(10),floatingLabelText:(0,f.jsx)(w.Trans,{id:"Near plane distance"}),floatingLabelFixed:!0}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,fullWidth:!0,errorText:L,onChange:se,value:o.getCamera3DFarPlaneDistance().toString(10),floatingLabelText:(0,f.jsx)(w.Trans,{id:"Far plane distance"}),floatingLabelFixed:!0})]}),(0,f.jsx)(yn.Z,{commitOnBlur:!0,fullWidth:!0,errorText:z,onChange:le,value:o.getCamera2DPlaneMaxDrawingDistance().toString(10),floatingLabelText:(0,f.jsx)(w.Trans,{id:"Maximum 2D drawing distance"}),floatingLabelFixed:!0})]})]}),o.isLightingLayer()?(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Lighting settings"})}),(0,f.jsx)(gg.Z,{label:(0,f.jsx)(w.Trans,{id:"Automatically follow the base layer."}),checked:o.isFollowingBaseLayerCamera(),onCheck:function(e,t){o.setFollowBaseLayerCamera(t),x(),C()}}),(0,f.jsx)(Jn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Ambient light color"}),disableAlpha:!0,color:(0,Xn.KC)({r:o.getAmbientLightColorRed(),g:o.getAmbientLightColorGreen(),b:o.getAmbientLightColorBlue()}),onChange:function(e){var t=o.getAmbientLightColorRed(),n=o.getAmbientLightColorGreen(),r=o.getAmbientLightColorBlue(),i=(0,Xn.A0)(e);!i||i.r===t&&i.g===n&&i.b===r||(o.setAmbientLightColor(i.r,i.g,i.b),x(),C())}})]}):(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(M.LZ,{})]})]}),"effects"===J&&(0,f.jsx)(kC,{target:"layer",layerRenderingType:o.getRenderingType(),project:n,resourceManagementProps:g,projectScopedContainersAccessor:m,effectsContainer:o.getEffects(),onEffectsRenamed:function(e,t){r?wC.WholeProjectRefactorer.renameLayerEffectInScene(n,r,o,e,t):i&&a&&wC.WholeProjectRefactorer.renameLayerEffectInEventsBasedObject(n,i,a,o,e,t)},onEffectsUpdated:function(){x(),C()},onEffectAdded:function(){re(!0)}})]})},SC=function(e){var t=e.project,n=e.layout,r=e.objectsContainer,i=e.globalObjectsContainer,a=e.objectInstance,o=e.open,s=e.onCancel,l=e.onApply,u=e.hotReloadPreviewButtonProps,d=e.initiallySelectedVariableName,p=e.projectScopedContainersAccessor,h=e.onEditObjectVariables,g=e.isListLocked,m=c.useMemo((function(){var e=a.getObjectName(),o=(0,iu.Z)(i,r,e);return o?[{id:"instance-variables",label:(0,f.jsx)(w.Trans,{id:"Instance variables"}),variablesContainer:a.getVariables(),inheritedVariablesContainer:o.getVariables(),emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first instance variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"Instance variables overwrite the default values of the variables of the object."}),onComputeAllVariableNames:function(){return n?_n.findAllObjectVariables(t.getCurrentPlatform(),t,n,e):[]}}]:[]}),[i,n,a,r,t]);return(0,f.jsx)(Fn,{project:t,projectScopedContainersAccessor:p,objectName:a.getObjectName(),open:o,onCancel:s,onApply:l,title:(0,f.jsx)(w.Trans,{id:"Instance variables"}),tabs:m,initiallySelectedVariableName:d,helpPagePath:"/all-features/variables/instance-variables",hotReloadPreviewButtonProps:u,id:"instance-variables-dialog",onEditObjectVariables:h,isListLocked:g})},PC=n(92666),IC=n.g.gd,EC=function(e){var t=e.project,n=e.behavior,r=e.object,i=e.onBehaviorUpdated,a=e.resourceManagementProps,o=e.projectScopedContainersAccessor,s=IC.MetadataProvider.getBehaviorMetadata(IC.JsPlatform.get(),n.getTypeName()),l=c.useMemo((function(){return(0,Gn.ZP)({properties:n.getProperties(),defaultValueProperties:s.getProperties(),getProperties:function(e){return e.getProperties()},onUpdateProperty:function(e,t,n){e.updateProperty(t,n)},object:r,visibility:"All"})}),[n,s,r]);return(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(gC.Z,{project:t,object:r,schema:l,instances:[n],onInstancesModified:i,resourceManagementProps:a,projectScopedContainersAccessor:o,placeholder:(0,f.jsx)(w.Trans,{id:"There is nothing to configure for this behavior. You can still use events to interact with the object and this behavior."})})})},MC=n(3290),LC=n(13923),AC=function(e){var t=e.forcedCursor,n=e.deactivateControls,r=c.useRef(null),i=c.useState({draggedVertex:null,draggedIndex:-1}),a=(0,s.Z)(i,2),o=a[0],u=a[1];n&&o.draggedVertex&&u({draggedVertex:null,draggedIndex:-1});var d=function(t,n){var r=e.imageWidth*e.imageZoomFactor,i=e.imageHeight*e.imageZoomFactor;return{frameX:Math.min(r,Math.max(t,0)),frameY:Math.min(i,Math.max(n,0))}},p=t?{cursor:t}:{},h=(0,l.Z)({},p),g=(0,l.Z)({},p),m=(0,l.Z)({},p),x=(0,l.Z)({position:"relative",width:"100%",height:"100%"},p),v=(0,l.Z)({position:"absolute",top:e.imageOffsetTop||0,left:e.imageOffsetLeft||0,width:e.imageWidth*e.imageZoomFactor,height:e.imageHeight*e.imageZoomFactor,overflow:"visible"},p);return(0,f.jsx)("div",{style:x,onPointerMove:n?null:function(t){var n=e.polygonOrigin,i=e.imageWidth,a=e.imageHeight,s=e.imageZoomFactor,l=o.draggedVertex,c=o.draggedIndex;if(l){var p=r.current.createSVGPoint();p.x=t.clientX,p.y=t.clientY;var f=r.current.getScreenCTM().inverse(),h=p.matrixTransform(f),g=d(h.x,h.y),m=g.frameX,x=g.frameY;l.x=m/s-e.offsetX-("Center"===n?i/2:0),l.y=x/s-e.offsetY-("Center"===n?a/2:0),e.onMoveVertex(c,Math.round(l?l.x:0),Math.round(l?l.y:0)),u({draggedVertex:l,draggedIndex:c})}},onPointerUp:n?null:function(){var t=o.draggedVertex,n=o.draggedIndex;!!t&&e.onMoveVertex(n,Math.round(t?t.x:0),Math.round(t?t.y:0)),u({draggedVertex:null,draggedIndex:-1})},children:(0,f.jsxs)("svg",{style:v,ref:r,children:["Box"===e.shape&&function(){var t=e.dimensionA,n=e.dimensionB,r=e.imageWidth,i=e.imageHeight,a=e.offsetX,o=e.offsetY,s=e.imageZoomFactor,l=t>0?t:r>0?r:1,c=n>0?n:i>0?i:1;return(0,f.jsx)("rect",{style:h,fill:"rgba(255,0,0,0.75)",strokeWidth:1,x:(a+r/2-l/2)*s,y:(o+i/2-c/2)*s,width:l*s,height:c*s},"boxShape")}(),"Circle"===e.shape&&function(){var t=e.dimensionA,n=e.imageWidth,r=e.imageHeight,i=e.offsetX,a=e.offsetY,o=e.imageZoomFactor;return(0,f.jsx)("circle",{style:g,fill:"rgba(255,0,0,0.75)",strokeWidth:1,cx:(i+n/2)*o,cy:(a+r/2)*o,r:(t>0?t:n+r>0?(n+r)/4:1)*o},"circleShape")}(),"Edge"===e.shape&&function(){var t=e.dimensionA,n=e.dimensionB,r=e.imageWidth,i=e.imageHeight,a=e.offsetX,o=e.offsetY,s=e.imageZoomFactor,l=(t>0?t:r>0?r:1)/2,c=Math.cos(n*Math.PI/180),u=Math.sin(n*Math.PI/180);return(0,f.jsx)("line",{style:m,stroke:"rgba(255,0,0,0.75)",strokeWidth:2,x1:(a+r/2-l*c)*s,y1:(o+i/2-l*u)*s,x2:(a+r/2+l*c)*s,y2:(o+i/2+l*u)*s},"edgeShape")}(),"Polygon"===e.shape&&function(){var t=e.vertices,n=e.polygonOrigin,r=e.imageWidth,i=e.imageHeight,a=e.offsetX,s=e.offsetY,d=e.imageZoomFactor,h=(0,l.Z)({cursor:"move"},p),g=(0,l.Z)({},p);return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)("polygon",{style:g,fill:"rgba(255,0,0,0.75)",strokeWidth:1,fillRule:"evenodd",points:t.map((function(e){return"".concat((e.x+a+("Center"===n?r/2:0))*d,",").concat((e.y+s+("Center"===n?i/2:0))*d)})).join(" ")},"polygonShape"),t.map((function(e,t){return(0,f.jsx)("circle",{onPointerDown:function(){return function(e,t){o.draggedVertex||u({draggedVertex:e,draggedIndex:t})}(e,t)},fill:"rgba(150,0,0,0.75)",strokeWidth:1,style:h,cx:(e.x+a+("Center"===n?r/2:0))*d,cy:(e.y+s+("Center"===n?i/2:0))*d,r:5},"vertex-".concat(t))}))]})}()]})})},OC=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 3.66663C5.60679 3.66663 3.66669 5.60673 3.66669 7.99996C3.66669 10.3932 5.60679 12.3333 8.00002 12.3333C10.3933 12.3333 12.3334 10.3932 12.3334 7.99996C12.3334 5.60673 10.3933 3.66663 8.00002 3.66663ZM2.66669 7.99996C2.66669 5.05444 5.0545 2.66663 8.00002 2.66663C10.9456 2.66663 13.3334 5.05445 13.3334 7.99996C13.3334 10.9455 10.9456 13.3333 8.00002 13.3333C5.05451 13.3333 2.66669 10.9455 2.66669 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 5.33331C8.27616 5.33331 8.50002 5.55717 8.50002 5.83331V10.1666C8.50002 10.4428 8.27616 10.6666 8.00002 10.6666C7.72388 10.6666 7.50002 10.4428 7.50002 10.1666V5.83331C7.50002 5.55717 7.72388 5.33331 8.00002 5.33331Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33335 7.99996C5.33335 7.72382 5.55721 7.49996 5.83335 7.49996H10.1667C10.4428 7.49996 10.6667 7.72382 10.6667 7.99996C10.6667 8.2761 10.4428 8.49996 10.1667 8.49996H5.83335C5.55721 8.49996 5.33335 8.2761 5.33335 7.99996Z",fill:"currentColor"})]}))})),RC=function(e){var t=e.vertices,n=e.onChangeVertexX,r=e.onChangeVertexY,i=e.onAdd,a=e.onRemove,o=c.useContext(j.Z),s=function(e){for(var t=[],n=null,r=null,i=0;i<e.length;i++)n=e[i],r=i+1>=e.length?e[0]:e[i+1],t.push({x:r.x-n.x,y:r.y-n.y});if(t.length<3)return!1;for(var a=t[0].x*t[1].y-t[0].y*t[1].x>0,o=1;o<t.length-1;++o){if(t[o].x*t[o+1].y-t[o].y*t[o+1].x>0!==a)return!1}if(t[t.length-1].x*t[0].y-t[t.length-1].y*t[0].x>0!==a)return!1;for(var s=0;s<e.length-1;++s)for(var l=s+1;l<e.length;++l)if(e[s].x===e[l].x&&e[s].y===e[l].y)return!1;for(var c=!0,u=!0,d=0;d<e.length-1;++d)e[d].x!==e[d+1].x&&(c=!1),e[d].y!==e[d+1].y&&(u=!1);return!c&&!u};return(0,f.jsxs)(Rv.iA,{children:[(0,f.jsx)(Rv.xD,{children:(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.bY,{}),(0,f.jsx)(Rv.bY,{children:"X"}),(0,f.jsx)(Rv.bY,{children:"Y"}),(0,f.jsx)(Rv.Nn,{})]})}),(0,f.jsxs)(Rv.RM,{children:[t.map((function(e,i){return(0,f.jsxs)(Rv.SC,{style:{backgroundColor:o.list.itemsBackgroundColor},children:[(0,f.jsx)(Rv.Nn,{children:!s(t)&&(0,f.jsx)(re.ZP,{title:(0,f.jsx)(w.Trans,{id:"The polygon is not convex"}),children:(0,f.jsx)(te.Z,{})})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(yn.Z,{margin:"none",fullWidth:!0,value:e.x.toString(10),onChange:function(e){return n(parseFloat(e)||0,i)},type:"number"})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(yn.Z,{margin:"none",fullWidth:!0,value:e.y.toString(10),onChange:function(e){return r(parseFloat(e)||0,i)},type:"number"})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)($.Z,{size:"small",onClick:function(){return a(i)},children:(0,f.jsx)(Jt.Z,{})})})]},"vertexRow".concat(i))})),(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.Nn,{}),(0,f.jsx)(Rv.Nn,{}),(0,f.jsx)(Rv.Nn,{}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)($.Z,{onClick:i,size:"small",children:(0,f.jsx)(OC,{})})})]})]})]})},FC=n(89267),DC=n(51626),NC=function(e){var t=e.properties,n=e.propertyName,r=e.step,i=e.onUpdate,a=e.id,o=t.get(n);return(0,f.jsx)(yn.Z,{id:a,fullWidth:!0,value:o.getValue(),floatingLabelText:o.getLabel(),step:r,onChange:i,type:"number",endAdornment:(0,f.jsx)(_C,{property:o})},n)},_C=function(e){var t=e.property,n=t.getMeasurementUnit();return n.isUndefined()&&t.getDescription()?(0,f.jsx)(re.ZP,{title:(0,f.jsx)(LC.Z,{label:t.getLabel(),description:t.getDescription(),elementsWithWords:""}),children:(0,f.jsx)(DC.Z,{position:"end",children:(0,f.jsx)(Sh,{})})}):(0,f.jsx)(re.ZP,{title:(0,f.jsx)(LC.Z,{label:n.getLabel(),description:n.getDescription(),elementsWithWords:n.getElementsWithWords()}),children:(0,f.jsx)(DC.Z,{position:"end",children:(0,Gn.jz)(n)})})},BC=function(e){return(0,f.jsx)("div",{style:{overflowX:"auto",flex:1},children:(0,f.jsx)(FC.Z,{disableElevation:!0,fullWidth:!0,children:e.bits.map((function(t,n){return(0,f.jsx)(fi.Z,{variant:t?"contained":"outlined",color:t?"primary":"default",onClick:function(){return e.onChange(n,!t)},children:n+1},n)}))})})},UC=function(e,t){return!!(e&1<<t)},VC=function(e,t,n){return n?e|=1<<t:e&=~(1<<t),e},HC=function(e){var t=c.useRef(Sr.Z).current,n=c.useState(""),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=e.behavior,u=e.onBehaviorUpdated,d=(0,gt.Z)(),p=c.useCallback((function(e,t){o.updateProperty(e,t),d(),u()}),[o,d,u]),h=o.getProperties(),g=Array(16).fill(null),m=h.get("shape").getValue(),x=parseInt(h.get("layers").getValue(),10),v=parseInt(h.get("masks").getValue(),10);return(0,f.jsxs)(M.sg,{expand:!0,noOverflowParent:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(Hn.Z,{id:"physics2-parameter-body-type",fullWidth:!0,floatingLabelText:h.get("bodyType").getLabel(),value:h.get("bodyType").getValue(),onChange:function(e,t,n){return p("bodyType",n)},children:[(0,f.jsx)(P.Z,{value:"Dynamic",label:{id:"Dynamic"}},"dynamic"),(0,f.jsx)(P.Z,{value:"Static",label:{id:"Static"}},"static"),(0,f.jsx)(P.Z,{value:"Kinematic",label:{id:"Kinematic"}},"kinematic")]},"bodyType")}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(Vn.Z,{label:h.get("bullet").getLabel(),checked:"true"===h.get("bullet").getValue(),onCheck:function(e,t){return p("bullet",t?"1":"0")}}),(0,f.jsx)(Vn.Z,{label:h.get("fixedRotation").getLabel(),checked:"true"===h.get("fixedRotation").getValue(),onCheck:function(e,t){return p("fixedRotation",t?"1":"0")}}),(0,f.jsx)(Vn.Z,{label:h.get("canSleep").getLabel(),checked:"true"===h.get("canSleep").getValue(),onCheck:function(e,t){return p("canSleep",t?"1":"0")}})]}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(Y.Z,{identifier:"physics2-shape-collisions",kind:"info",children:(0,f.jsx)(w.Trans,{id:'The shape used in the Physics behavior is independent from the collision mask of the object. Be sure to use the "Collision" condition provided by the Physics behavior in the events. The usual "Collision" condition won\'t take into account the shape that you\'ve set up here.'})})}),(0,f.jsx)(M.x1,{children:(0,f.jsxs)(Hn.Z,{id:"physics2-parameter-shape",fullWidth:!0,floatingLabelText:h.get("shape").getLabel(),value:h.get("shape").getValue(),onChange:function(e,t,n){return p("shape",n)},children:[(0,f.jsx)(P.Z,{value:"Box",label:{id:"Box"}},"box"),(0,f.jsx)(P.Z,{value:"Circle",label:{id:"Circle"}},"circle"),(0,f.jsx)(P.Z,{value:"Edge",label:{id:"Edge"}},"edge"),(0,f.jsx)(P.Z,{value:"Polygon",label:{id:"Polygon"}},"polygon")]})}),(0,f.jsxs)(_.ep,{children:["Polygon"!==m&&(0,f.jsx)(yn.Z,{fullWidth:!0,value:h.get("shapeDimensionA").getValue(),floatingLabelText:"Circle"===m?(0,f.jsx)(w.Trans,{id:"Radius"}):"Edge"===m?(0,f.jsx)(w.Trans,{id:"Length"}):(0,f.jsx)(w.Trans,{id:"Width"}),min:0,onChange:function(e){return p("shapeDimensionA",e)},type:"number",endAdornment:(0,f.jsx)(_C,{property:h.get("shapeDimensionA")})},"shapeDimensionA"),"Polygon"!==m&&"Circle"!==m&&(0,f.jsx)(yn.Z,{fullWidth:!0,value:h.get("shapeDimensionB").getValue(),floatingLabelText:"Edge"===m?(0,f.jsx)(w.Trans,{id:"Angle"}):(0,f.jsx)(w.Trans,{id:"Height"}),min:"Edge"===m?void 0:0,onChange:function(e){return p("shapeDimensionB",e)},type:"number",endAdornment:(0,f.jsx)(_C,{property:h.get("shapeDimensionB")})},"shapeDimensionB"),"Polygon"===m&&(0,f.jsx)(Hn.Z,{fullWidth:!0,floatingLabelText:h.get("polygonOrigin").getLabel(),value:h.get("polygonOrigin").getValue(),onChange:function(e,t,n){return p("polygonOrigin",n)},children:[(0,f.jsx)(P.Z,{value:"Center",label:{id:"Center"}},"center"),(0,f.jsx)(P.Z,{value:"Origin",label:{id:"Origin"}},"origin"),(0,f.jsx)(P.Z,{value:"TopLeft",label:{id:"Top-Left"}},"topLeft")]}),(0,f.jsx)(NC,{properties:h,propertyName:"shapeOffsetX",step:1,onUpdate:function(e){return p("shapeOffsetX",e)}}),(0,f.jsx)(NC,{properties:h,propertyName:"shapeOffsetY",step:1,onUpdate:function(e){return p("shapeOffsetY",e)}})]}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(du.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"A temporary image to help you visualize the shape/polygon"}),project:e.project,projectScopedContainersAccessor:e.projectScopedContainersAccessor,resourceManagementProps:e.resourceManagementProps,resourcesLoader:t,resourceKind:"image",initialResourceName:"",fullWidth:!0,onChange:function(e){a(e),u(),d()}})}),!i&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"To preview the shape that the Physics engine will use for this object, choose first a temporary image to use for the preview."})})}),i&&(0,f.jsx)(M.x1,{children:(0,f.jsx)("div",{style:{width:"100%"},children:(0,f.jsx)(MC.Z,{resourceName:i,imageResourceSource:t.getResourceFullUrl(e.project,i,{}),isImageResourceSmooth:(0,MC.X)(e.project,i),fixedHeight:200,renderOverlay:function(e){var t=o.getProperties();return(0,f.jsx)(AC,(0,l.Z)((0,l.Z)({},e),{},{shape:t.get("shape").getValue(),dimensionA:parseFloat(t.get("shapeDimensionA").getValue()),dimensionB:parseFloat(t.get("shapeDimensionB").getValue()),offsetX:parseFloat(t.get("shapeOffsetX").getValue()),offsetY:parseFloat(t.get("shapeOffsetY").getValue()),polygonOrigin:t.get("polygonOrigin").getValue(),vertices:JSON.parse(t.get("vertices").getValue()),onMoveVertex:function(e,n,r){var i=JSON.parse(t.get("vertices").getValue());i[e].x=n,i[e].y=r,o.updateProperty("vertices",JSON.stringify(i)),d(),u()}}))}})})}),"Polygon"===m&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(RC,{vertices:JSON.parse(h.get("vertices").getValue()),onChangeVertexX:function(e,t){var n=JSON.parse(h.get("vertices").getValue());n[t].x=e,p("vertices",JSON.stringify(n))},onChangeVertexY:function(e,t){var n=JSON.parse(h.get("vertices").getValue());n[t].y=e,p("vertices",JSON.stringify(n))},onAdd:function(){var e=JSON.parse(h.get("vertices").getValue());e.length>=8||(e.push({x:0,y:0}),p("vertices",JSON.stringify(e)))},onRemove:function(e){var t=JSON.parse(h.get("vertices").getValue());t.splice(e,1),p("vertices",JSON.stringify(t))}})}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(NC,{id:"physics2-parameter-density",properties:h,propertyName:"density",step:.1,onUpdate:function(e){return p("density",parseFloat(e)>0?e:"0")}}),(0,f.jsx)(NC,{properties:h,propertyName:"gravityScale",step:.1,onUpdate:function(e){return p("gravityScale",e)}})]}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(NC,{properties:h,propertyName:"friction",step:.1,onUpdate:function(e){return p("friction",parseFloat(e)>0?e:"0")}}),(0,f.jsx)(NC,{properties:h,propertyName:"restitution",step:.1,onUpdate:function(e){return p("restitution",parseFloat(e)>0?e:"0")}})]}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(NC,{properties:h,propertyName:"linearDamping",step:.05,onUpdate:function(e){return p("linearDamping",e)}}),(0,f.jsx)(NC,{id:"physics2-parameter-angular-damping",properties:h,propertyName:"angularDamping",step:.05,onUpdate:function(e){return p("angularDamping",e)}})]}),(0,f.jsxs)(M.x1,{children:[(0,f.jsx)(N.Z,{style:{marginRight:10},children:h.get("layers").getLabel()}),(0,f.jsx)(BC,{bits:g.map((function(e,t){return UC(x,t)})),onChange:function(e,t){var n=VC(x,e,t);p("layers",n.toString(10))}})]}),(0,f.jsxs)(M.x1,{children:[(0,f.jsx)(N.Z,{style:{marginRight:10},children:h.get("masks").getLabel()}),(0,f.jsx)(BC,{bits:g.map((function(e,t){return UC(v,t)})),onChange:function(e,t){var n=VC(v,e,t);p("masks",n.toString(10))}})]})]})},zC=n.g.gd,WC=function(e){return(0,f.jsx)("div",{style:{overflowX:"auto",flex:1},children:(0,f.jsx)(FC.Z,{disableElevation:!0,fullWidth:!0,disabled:e.disabled,children:e.bits.map((function(t,n){return(0,f.jsx)(fi.Z,{variant:t?"contained":"outlined",color:t?"primary":"default",onClick:function(){return e.onChange(e.firstIndex+n,!t)},children:e.firstIndex+n+1},e.firstIndex+n)}))})})},GC=function(e,t){return!!(e&1<<t)},YC=function(e,t,n){return n?e|=1<<t:e&=~(1<<t),e},qC=function(e){var t=e.behavior,n=e.onBehaviorUpdated,r=(0,gt.Z)(),i=c.useMemo((function(){var e=zC.MetadataProvider.getBehaviorMetadata(zC.JsPlatform.get(),t.getTypeName());return function(e,t){var n=e.keys(),r=!1;return(0,mt.mapFor)(0,n.size(),(function(i){var a=n.at(i),o=e.get(a),s=o.getValue(),l=t(a),c="boolean"===o.getType().toLowerCase()?"true"===s===("true"===l):s===l;o.isAdvanced()&&!c&&(r=!0)})),r}(t.getProperties(),(function(t){var n=e.getProperties();return n.has(t)?n.get(t).getValue():""}))}),[t]),a=c.useCallback((function(e,i){t.updateProperty(e,i),r(),n()}),[t,r,n]),o=t.getProperties(),s=Array(4).fill(null),l=Array(4).fill(null),u=o.get("shape").getValue(),d=parseInt(o.get("layers").getValue(),10),p=parseInt(o.get("masks").getValue(),10),h="Static"===o.get("bodyType").getValue(),g="Sphere"!==o.get("shape").getValue()&&"Box"!==o.get("shape").getValue();return(0,f.jsxs)(M.sg,{expand:!0,noOverflowParent:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(Hn.Z,{id:"physics3d-parameter-body-type",fullWidth:!0,floatingLabelText:o.get("bodyType").getLabel(),value:o.get("bodyType").getValue(),onChange:function(e,t,n){return a("bodyType",n)},children:[(0,f.jsx)(P.Z,{value:"Dynamic",label:{id:"Dynamic"}},"dynamic"),(0,f.jsx)(P.Z,{value:"Static",label:{id:"Static"}},"static"),(0,f.jsx)(P.Z,{value:"Kinematic",label:{id:"Kinematic"}},"kinematic")]},"bodyType")}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(Vn.Z,{label:o.get("bullet").getLabel(),checked:"true"===o.get("bullet").getValue(),onCheck:function(e,t){return a("bullet",t?"1":"0")}}),(0,f.jsx)(Vn.Z,{label:o.get("fixedRotation").getLabel(),checked:"true"===o.get("fixedRotation").getValue(),onCheck:function(e,t){return a("fixedRotation",t?"1":"0")}})]}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(Y.Z,{identifier:"physics2-shape-collisions",kind:"info",children:(0,f.jsx)(w.Trans,{id:'The shape used in the Physics behavior is independent from the collision mask of the object. Be sure to use the "Collision" condition provided by the Physics behavior in the events. The usual "Collision" condition won\'t take into account the shape that you\'ve set up here.'})})}),(0,f.jsxs)(_.ep,{children:[(0,f.jsxs)(Hn.Z,{id:"physics3d-parameter-shape",fullWidth:!0,floatingLabelText:o.get("shape").getLabel(),value:o.get("shape").getValue(),onChange:function(e,t,n){return a("shape",n)},children:[(0,f.jsx)(P.Z,{value:"Sphere",label:{id:"Sphere"}},"sphere"),(0,f.jsx)(P.Z,{value:"Box",label:{id:"Box"}},"box"),(0,f.jsx)(P.Z,{value:"Capsule",label:{id:"Capsule"}},"capsule"),(0,f.jsx)(P.Z,{value:"Cylinder",label:{id:"Cylinder"}},"cylinder")]}),(0,f.jsxs)(Hn.Z,{id:"physics3d-parameter-shape-orientation",fullWidth:!0,floatingLabelText:o.get("shapeOrientation").getLabel(),value:g?o.get("shapeOrientation").getValue():"Z",onChange:function(e,t,n){return a("shapeOrientation",n)},disabled:!g,children:[(0,f.jsx)(P.Z,{value:"Z",label:{id:"Z"}},"shape-orientation-z"),(0,f.jsx)(P.Z,{value:"Y",label:{id:"Y"}},"shape-orientation-y"),(0,f.jsx)(P.Z,{value:"X",label:{id:"X"}},"shape-orientation-x")]})]}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(yn.Z,{fullWidth:!0,value:o.get("shapeDimensionA").getValue(),floatingLabelText:"Box"===u?(0,f.jsx)(w.Trans,{id:"Width"}):(0,f.jsx)(w.Trans,{id:"Radius"}),min:0,onChange:function(e){return a("shapeDimensionA",e)},type:"number",endAdornment:(0,f.jsx)(_C,{property:o.get("shapeDimensionA")})},"shapeDimensionA"),"Sphere"!==u&&(0,f.jsx)(yn.Z,{fullWidth:!0,value:o.get("shapeDimensionB").getValue(),floatingLabelText:"Box"===u?(0,f.jsx)(w.Trans,{id:"Height"}):(0,f.jsx)(w.Trans,{id:"Depth"}),min:0,onChange:function(e){return a("shapeDimensionB",e)},type:"number",endAdornment:(0,f.jsx)(_C,{property:o.get("shapeDimensionB")})},"shapeDimensionB"),"Box"===u&&(0,f.jsx)(yn.Z,{fullWidth:!0,value:o.get("shapeDimensionC").getValue(),floatingLabelText:(0,f.jsx)(w.Trans,{id:"Depth"}),min:0,onChange:function(e){return a("shapeDimensionC",e)},type:"number",endAdornment:(0,f.jsx)(_C,{property:o.get("shapeDimensionC")})},"shapeDimensionC")]}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(NC,{id:"physics3d-parameter-density",properties:o,propertyName:"density",step:.1,onUpdate:function(e){return a("density",parseFloat(e)>0?e:"0")}}),(0,f.jsx)(NC,{id:"physics3d-parameter-mass-override",properties:o,propertyName:"massOverride",step:.1,onUpdate:function(e){return a("massOverride",parseFloat(e)>0?e:"0")}}),(0,f.jsx)(NC,{properties:o,propertyName:"gravityScale",step:.1,onUpdate:function(e){return a("gravityScale",e)}})]}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(NC,{properties:o,propertyName:"friction",step:.1,onUpdate:function(e){return a("friction",parseFloat(e)>0?e:"0")}}),(0,f.jsx)(NC,{properties:o,propertyName:"restitution",step:.1,onUpdate:function(e){return a("restitution",parseFloat(e)>0?e:"0")}})]}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(NC,{properties:o,propertyName:"linearDamping",step:.05,onUpdate:function(e){return a("linearDamping",e)}}),(0,f.jsx)(NC,{id:"physics3d-parameter-angular-damping",properties:o,propertyName:"angularDamping",step:.05,onUpdate:function(e){return a("angularDamping",e)}})]}),(0,f.jsxs)(M.x1,{children:[(0,f.jsx)(N.Z,{style:{marginRight:10},children:o.get("layers").getLabel()}),(0,f.jsx)(WC,{firstIndex:0,bits:s.map((function(e,t){return GC(d,t)&&h})),onChange:function(e,t){var n=YC(d,e,t);a("layers",n.toString(10))},disabled:!h},"static-layers"),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(WC,{firstIndex:4,bits:l.map((function(e,t){return GC(d,t+4)&&!h})),onChange:function(e,t){var n=YC(d,e,t);a("layers",n.toString(10))},disabled:h},"dynamic-layers")]}),(0,f.jsxs)(M.x1,{children:[(0,f.jsx)(N.Z,{style:{marginRight:10},children:o.get("masks").getLabel()}),(0,f.jsx)(WC,{firstIndex:0,bits:s.map((function(e,t){return GC(p,t)||h})),onChange:function(e,t){var n=YC(p,e,t);a("masks",n.toString(10))},disabled:h},"static-mask"),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(WC,{firstIndex:4,bits:l.map((function(e,t){return GC(p,t+4)||h})),onChange:function(e,t){var n=YC(p,e,t);a("masks",n.toString(10))},disabled:h},"dynamic-mask")]}),(0,f.jsxs)(ni.UQ,{defaultExpanded:i,noMargin:!0,children:[(0,f.jsx)(ni._m,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Advanced properties"})})}),(0,f.jsx)(ni.X1,{disableGutters:!0,children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(NC,{properties:o,propertyName:"shapeOffsetX",step:1,onUpdate:function(e){return a("shapeOffsetX",e)}}),(0,f.jsx)(NC,{properties:o,propertyName:"shapeOffsetY",step:1,onUpdate:function(e){return a("shapeOffsetY",e)}}),(0,f.jsx)(NC,{properties:o,propertyName:"shapeOffsetZ",step:1,onUpdate:function(e){return a("shapeOffsetZ",e)}})]}),(0,f.jsxs)(_.ep,{children:[(0,f.jsx)(NC,{properties:o,propertyName:"massCenterOffsetX",step:1,onUpdate:function(e){return a("massCenterOffsetX",e)}}),(0,f.jsx)(NC,{properties:o,propertyName:"massCenterOffsetY",step:1,onUpdate:function(e){return a("massCenterOffsetY",e)}}),(0,f.jsx)(NC,{properties:o,propertyName:"massCenterOffsetZ",step:1,onUpdate:function(e){return a("massCenterOffsetZ",e)}})]})]})})]})]})},JC={getEditor:function(e){return this.components[e]?this.components[e].component:EC},components:{"Physics2::Physics2Behavior":{component:HC},"Physics3D::Physics3DBehavior":{component:qC}}},XC=n.g.gd;function KC(e){e.open;var t=e.onClose,n=e.propertyNames,r=e.propertiesQuickCustomizationVisibilities,i=(0,gt.Z)();return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Quick Customization: Behavior properties"}),secondaryActions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:t},"close")],open:!0,onRequestClose:t,flexColumnBody:!0,fullHeight:!0,children:(0,mt.mapFor)(0,n.length,(function(e){var t=n[e],a=function(e,t){return t.get(e)}(t,r);return(0,f.jsxs)(_.pJ,{justifyContent:"flex-start",alignItems:"center",children:[(0,f.jsx)(N.Z,{children:t}),(0,f.jsxs)(Hn.Z,{margin:"none",value:a,onChange:function(e,n,a){var o=parseInt(a,10);if([XC.QuickCustomization.Visible,XC.QuickCustomization.Hidden,XC.QuickCustomization.Default].includes(o))return r.set(t,o),void i();r.set(t,XC.QuickCustomization.Default),i()},children:[(0,f.jsx)(P.Z,{value:XC.QuickCustomization.Default,label:{id:"Default"}}),(0,f.jsx)(P.Z,{value:XC.QuickCustomization.Visible,label:{id:"Visible"}}),(0,f.jsx)(P.Z,{value:XC.QuickCustomization.Hidden,label:{id:"Hidden"}})]})]},t)}))})}var QC=n.g.gd,$C="Behaviors",ej=c.forwardRef((function(e,t){var n=e.project,i=e.object,a=e.behavior,o=(e.isChildObject,e.resourceManagementProps),s=e.projectScopedContainersAccessor,l=e.onBehaviorsUpdated,u=e.onChangeBehaviorName,d=e.onRemoveBehavior,p=e.copyBehavior,h=e.canPasteBehaviors,g=e.pasteBehaviors,m=e.openExtension,x=e.openBehaviorPropertiesQuickCustomizationDialog,v=e.isListLocked,b=c.useContext(D.ZP).values,C=(0,gt.Z)(),j=a.getName(),Z=a.getTypeName();if(a.isDefaultBehavior())return null;var k=!a.isFolded(),T=QC.MetadataProvider.getBehaviorMetadata(QC.JsPlatform.get(),Z);if(QC.MetadataProvider.isBadBehaviorMetadata(T))return(0,f.jsxs)(ni.UQ,{defaultExpanded:!0,id:"behavior-parameters-".concat(j),ref:t,children:[(0,f.jsxs)(ni._m,{actions:[(0,f.jsx)($.Z,{onClick:function(e){e.stopPropagation(),d(j)},children:(0,f.jsx)(Jt.Z,{})},"delete")],children:[(0,f.jsxs)(Wh.c,{firstChild:!0,children:[(0,f.jsx)(w.Trans,{id:"Unknown behavior"})," "]}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(yi.ZP,{margin:"none",value:j,disabled:!0})})]}),(0,f.jsx)(ni.X1,{children:(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"This behavior is unknown. It might be a behavior that was defined in an extension and that was later removed. You should delete it."})})})]});var S=JC.getEditor(Z),P=(0,Ei.r1)(Z),I=P.filter((function(e){return!b.hiddenTutorialHints[e]})),E=T.getIconFilename();return(0,f.jsxs)(ni.UQ,{expanded:k,onChange:function(e,t){a.setFolded(!t),C()},id:"behavior-parameters-".concat(j),ref:t,children:[(0,f.jsxs)(ni._m,{actions:[(0,f.jsx)(Pi.Z,{size:"small",helpPagePath:T.getHelpPath()},"help"),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",children:(0,f.jsx)(Mh.Z,{})}),buildMenuTemplate:function(e){return[{label:e._({id:"Delete"}),click:function(){return d(j)},enabled:!v},{label:e._({id:"Copy"}),click:function(){return p(j)}},{label:e._({id:"Paste"}),click:g,enabled:h&&!v}].concat((0,r.Z)(n.hasEventsBasedBehavior(Z)?[{type:"separator"},{label:e._({id:"Edit this behavior"}),click:function(){return m(Z)}}]:[]),(0,r.Z)(y.ZP.isDev()?[{type:"separator"},{label:e._({id:"Quick Customization settings"}),click:function(){return x(j)}}]:[]))}},"menu")],children:[E?(0,f.jsx)(Hr.q,{src:E,alt:T.getFullName(),size:20}):null,(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(yi.ZP,{value:j,translatableHintText:{id:"Behavior name"},margin:"none",fullWidth:!0,disabled:!0,onChange:function(e,t){return u(a,t)},id:"behavior-".concat(j,"-name-text-field")})})]}),(0,f.jsx)(ni.X1,{children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[I.length?(0,f.jsx)(M.x1,{children:(0,f.jsx)(_.ak,{expand:!0,children:P.map((function(e){return(0,f.jsx)(Ii.Z,{tutorialId:e},e)}))})}):null,(0,f.jsx)(M.x1,{children:(0,f.jsx)(S,{behavior:a,project:n,object:i,resourceManagementProps:o,projectScopedContainersAccessor:s,onBehaviorUpdated:l})})]})})]})})),tj=function(e){var t=e.project,n=e.object,r=e.isChildObject,i=e.eventsFunctionsExtension,l=e.onUpdate,u=e.onSizeUpdated,d=e.onBehaviorsUpdated,p=e.onUpdateBehaviorsSharedData,h=e.onWillInstallExtension,g=e.onExtensionInstalled,m=c.useState(null),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useState(!1),j=(0,s.Z)(C,2),Z=j[0],k=j[1],w=c.useCallback((function(){k(!0)}),[]),T=function(){var e=(0,Ye.Z)().showConfirmation;return function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({title:{id:"Existing behaviors"},message:{id:"These behaviors are already attached to the object:{0}Do you want to replace their property values?",values:{0:"\n\n - "+n.join("\n\n - ")+"\n\n"}},confirmButtonLabel:{id:"Replace"},dismissButtonLabel:{id:"Omit"}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),S=c.useCallback((function(e,r){Dh(t,n,e,r)&&(k(!1),(0,ai.qH)({behaviorType:e,parentEditor:"behaviors-editor"}),b(r)),l(),u&&u(),p(),d&&d()}),[l,n,d,u,p,t]);return{changeBehaviorName:c.useCallback((function(e,t){n.hasBehaviorNamed(t)||(n.renameBehavior(e.getName(),t),l(),d&&d())}),[l,n,d]),removeBehavior:c.useCallback((function(e){var r="Are you sure you want to remove this behavior? This can't be undone.",i=QC.WholeProjectRefactorer.findDependentBehaviorNames(t,n,e).toJSArray();i.length>0&&(r+="\nDependent behaviors will be removed too: "+i.join(", ")),y.ZP.showConfirmDialog(r)&&(n.removeBehavior(e),i.forEach((function(e){return n.removeBehavior(e)})),u&&u()),d&&d()}),[n,d,u,t]),copyBehavior:c.useCallback((function(e){var t=n.getBehavior(e);vt.Z.set($C,[{name:e,type:t.getTypeName(),serializedBehavior:(0,Ct.XH)(t)}]),l()}),[l,n]),copyAllBehaviors:c.useCallback((function(){vt.Z.set($C,(0,mt.mapVector)(n.getAllBehaviorNames(),(function(e){var t=n.getBehavior(e);return t.isDefaultBehavior()?null:{name:e,type:t.getTypeName(),serializedBehavior:(0,Ct.XH)(t)}})).filter(Boolean)),l()}),[l,n]),pasteBehaviors:c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var r,i,o,s,c,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vt.Z.get($C),i=bt.$.extractArray(r)){e.next=4;break}return e.abrupt("return");case 4:if(o=[],s=[],c=[],i.forEach((function(e){var r=bt.$.extractStringProperty(e,"name"),i=bt.$.extractStringProperty(e,"type"),a=bt.$.extractObjectProperty(e,"serializedBehavior");if(r&&i&&a&&QC.ObjectTools.isBehaviorCompatibleWithObject(t.getCurrentPlatform(),n.getType(),i)){var l=QC.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),i);if(""===l.getObjectType()||l.getObjectType()===n.getType())if(n.hasBehaviorNamed(r)){if(n.getBehavior(r).getTypeName()!==i)return;s.push({name:r,type:i,serializedBehavior:a}),c.push(l.getFullName())}else o.push({name:r,type:i,serializedBehavior:a})}})),f=null,o.forEach((function(e){var r=e.name,i=e.type,a=e.serializedBehavior;if(n.addNewBehavior(t,i,r),n.hasBehaviorNamed(r)){f||(f=r);var o=n.getBehavior(r);(0,Ct.qx)(o,a)}})),o.forEach((function(e){var r=e.name;QC.WholeProjectRefactorer.addRequiredBehaviorsFor(t,n,r)})),h=!1,!(s.length>0)){e.next=17;break}return e.next=15,T(c);case 15:(h=e.sent)&&s.forEach((function(e){var t=e.name,r=(e.type,e.serializedBehavior);if(n.hasBehaviorNamed(t)){var i=n.getBehavior(t);(0,Ct.qx)(i,r)}}));case 17:l(),f?(b(f),u&&u(),p()):1===s.length&&b(s[0].name),(f||h)&&d&&d();case 20:case"end":return e.stop()}}),e)}))),[l,n,d,u,p,t,T]),newBehaviorDialog:Z&&(0,f.jsx)(Rh,{open:!0,objectType:n.getType(),objectBehaviorsTypes:Nh(n),isChildObject:r,onClose:function(){return k(!1)},onChoose:S,project:t,eventsFunctionsExtension:i,onWillInstallExtension:h,onExtensionInstalled:g}),openNewBehaviorDialog:w,justAddedBehaviorName:v,resetJustAddedBehaviorName:c.useCallback((function(){b(null)}),[])}},nj=function(e){var t=(0,be.UQ)().isMobile,n=c.useRef(null),r=c.useRef(null),i=e.object,a=e.isChildObject,o=e.project,l=e.eventsFunctionsExtension,u=e.onSizeUpdated,d=e.onBehaviorsUpdated,p=e.onUpdateBehaviorsSharedData,h=e.openBehaviorEvents,g=e.onWillInstallExtension,m=e.onExtensionInstalled,x=e.isListLocked,v=(0,gt.Z)(),b=c.useState(null),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=tj({project:o,object:i,isChildObject:a,eventsFunctionsExtension:l,onUpdate:v,onSizeUpdated:u,onBehaviorsUpdated:d,onUpdateBehaviorsSharedData:p,onWillInstallExtension:g,onExtensionInstalled:m}),k=Z.changeBehaviorName,T=Z.removeBehavior,S=Z.copyBehavior,P=Z.copyAllBehaviors,I=Z.pasteBehaviors,E=Z.newBehaviorDialog,L=Z.openNewBehaviorDialog,A=Z.justAddedBehaviorName,O=Z.resetJustAddedBehaviorName;c.useEffect((function(){n.current&&r.current&&A&&(n.current.scrollTo(r.current),O(),r.current=null)}),[A,O]);var R=i.getAllBehaviorNames().toJSArray().map((function(e){return i.getBehavior(e)})).filter((function(e){return!e.isDefaultBehavior()})),F=c.useCallback((function(e){var t=e.split("::");if(2===t.length){var n=t[0],r=t[1];n&&o.hasEventsFunctionsExtensionNamed(n)&&h(n,r)}}),[h,o]),D=c.useCallback((function(e){if(i.hasBehaviorNamed(e)){var t=i.getBehavior(e);y(t)}}),[i]),B=vt.Z.has($C);return(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,useFullHeight:!0,noOverflowParent:!0,children:[0===R.length?x?(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:[(0,f.jsx)(N.Z,{size:"block-title",align:"center",children:(0,f.jsx)(w.Trans,{id:"No behavior"})}),(0,f.jsx)(N.Z,{align:"center",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"There is no behavior to set up for this object."})})]}):(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,f.jsx)(pt.$,{title:(0,f.jsx)(w.Trans,{id:"Add your first behavior"}),description:(0,f.jsx)(w.Trans,{id:"Behaviors add features to objects in a matter of clicks."}),helpPagePath:"/behaviors",tutorialId:"intro-behaviors-and-functions",actionButtonId:"add-behavior-button",actionLabel:t?(0,f.jsx)(w.Trans,{id:"Add"}):(0,f.jsx)(w.Trans,{id:"Add a behavior"}),onAction:L,secondaryActionIcon:(0,f.jsx)(Bg,{}),secondaryActionLabel:B?(0,f.jsx)(w.Trans,{id:"Paste"}):null,onSecondaryAction:function(){I()}})}):(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(ft.Z,{ref:n,children:R.map((function(t,n){var s=t.getName(),l=A===s?r:null;return(0,f.jsx)(ej,{ref:l,project:o,object:i,isChildObject:a,behavior:t,copyBehavior:S,onRemoveBehavior:T,onBehaviorsUpdated:d,onChangeBehaviorName:k,openExtension:F,openBehaviorPropertiesQuickCustomizationDialog:D,canPasteBehaviors:B,pasteBehaviors:I,resourceManagementProps:e.resourceManagementProps,projectScopedContainersAccessor:e.projectScopedContainersAccessor,isListLocked:x},s)}))}),(0,f.jsx)(M.sg,{children:(0,f.jsxs)(_.pJ,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{expand:!0,children:[(0,f.jsx)(Qe.Z,{leftIcon:(0,f.jsx)(Xt.Z,{}),label:t?(0,f.jsx)(w.Trans,{id:"Copy all"}):(0,f.jsx)(w.Trans,{id:"Copy all behaviors"}),onClick:function(){P()}},"copy-all-behaviors"),(0,f.jsx)(Qe.Z,{leftIcon:(0,f.jsx)(Bg,{}),label:(0,f.jsx)(w.Trans,{id:"Paste"}),onClick:function(){I()},disabled:!B||x},"paste-behaviors")]}),(0,f.jsx)(_.pJ,{justifyContent:"flex-end",expand:!0,children:(0,f.jsx)(G.Z,{label:t?(0,f.jsx)(w.Trans,{id:"Add"}):(0,f.jsx)(w.Trans,{id:"Add a behavior"}),primary:!0,onClick:L,icon:(0,f.jsx)(it.Z,{}),id:"add-behavior-button",disabled:x},"add-behavior-line")})]})})]}),E,!!j&&(0,f.jsx)(KC,{open:!!j,onClose:function(){return y(null)},propertyNames:j.getProperties().keys().toJSArray(),propertiesQuickCustomizationVisibilities:j.getPropertiesQuickCustomizationVisibilities()})]})},rj=n.g.gd,ij=function(e){var t=(0,Ye.Z)().showConfirmation,n=e.openBehaviorEvents,r=e.object,i=e.project,u=e.layout,d=e.eventsFunctionsExtension,p=e.eventsBasedObject,h=e.helpPagePath,g=e.resourceManagementProps,m=e.getValidatedObjectOrGroupName,x=e.onCancel,v=e.onRename,b=e.initialTab,C=e.projectScopedContainersAccessor,j=e.onUpdateBehaviorsSharedData,y=e.onComputeAllVariableNames,Z=e.onWillInstallExtension,k=e.onExtensionInstalled,S=e.onOpenEventBasedObjectEditor,P=e.onOpenEventBasedObjectVariantEditor,I=e.onDeleteEventsBasedObjectVariant,L=e.isBehaviorListLocked,A=e.isVariableListLocked,O=c.useState(b||"properties"),R=(0,s.Z)(O,2),F=R[0],D=R[1],N=c.useState(e.objectName),_=(0,s.Z)(N,2),U=_[0],V=_[1],H=(0,gt.Z)(),z=Je({serializableObject:r,useProjectToUnserialize:i,onCancel:x,resetThenClearPersistentUuid:!0}),W=z.onCancelChanges,G=z.notifyOfChange,Y=z.hasUnsavedChanges,q=z.getOriginalContentSerializedElement,J=c.useState(!1),X=(0,s.Z)(J,2),K=X[0],Q=X[1],$=c.useMemo((function(){return(0,l.Z)((0,l.Z)({},g),{},{onResourceUsageChanged:function(){Q(!0)}})}),[g]),ee=c.useState(!1),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=rj.MetadataProvider.getObjectMetadata(i.getCurrentPlatform(),r.getType()),ae=e.editorComponent,oe=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(){var n,o,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.onApply(K,ne),n=u&&u.getInitialInstances()||p&&p.getInitialInstances()||null){t.next=4;break}return t.abrupt("return");case 4:o=q().getChild("variables"),s=rj.WholeProjectRefactorer.computeChangesetForVariablesContainer(o,r.getVariables()),rj.WholeProjectRefactorer.applyRefactoringForObjectVariablesContainer(i,r.getVariables(),n,r.getName(),s,o),p&&rj.ObjectVariableHelper.applyChangesToVariants(p,r.getName(),s),r.clearPersistentUuid(),v(U);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),se=(0,et.Z)("intro-variables").DismissableTutorialMessage;c.useEffect((function(){"behaviors"===F&&(0,ai.KY)({parentEditor:"object-editor-dialog"})}),[F]);var le=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r,i){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y()){e.next=6;break}return e.next=3,t({title:{id:"Discard changes and open events"},message:{id:"You've made some changes here. Are you sure you want to discard them and open the behavior events?"},confirmButtonLabel:{id:"Yes, discard my changes"},dismissButtonLabel:{id:"Stay there"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:W(),n(r,i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Y,W,n,t]);return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Edit {objectName}",values:{objectName:U}}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:W},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Apply"}),id:"apply-button",primary:!0,onClick:oe},"apply")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:h},"help-button"),(0,f.jsx)($e,(0,l.Z)({},e.hotReloadPreviewButtonProps),"hot-reload-preview-button")],onRequestClose:W,onApply:oe,open:e.open,fullHeight:!0,flexBody:!0,fixedContent:(0,f.jsx)(B.m,{value:F,onChange:D,options:[{label:(0,f.jsx)(w.Trans,{id:"Properties"}),value:"properties"},{label:(0,f.jsx)(w.Trans,{id:"Behaviors"}),value:"behaviors",id:"behaviors-tab"},{label:(0,f.jsx)(w.Trans,{id:"Variables"}),value:"variables"},ie.hasDefaultBehavior("EffectCapability::EffectBehavior")?{label:(0,f.jsx)(w.Trans,{id:"Effects"}),value:"effects"}:null].filter(Boolean)}),id:"object-editor-dialog",children:["properties"===F&&ae?(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,useFullHeight:!0,noOverflowParent:!0,children:(0,f.jsx)(ae,{objectConfiguration:r.getConfiguration(),project:i,layout:u,eventsFunctionsExtension:d,eventsBasedObject:p,object:r,resourceManagementProps:$,projectScopedContainersAccessor:C,onSizeUpdated:H,objectName:e.objectName,onObjectUpdated:G,renderObjectNameField:function(){return(0,f.jsx)(yn.Z,{fullWidth:!0,id:"object-name",commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Object name"}),floatingLabelFixed:!0,value:U,translatableHintText:{id:"Object Name"},onChange:function(e){e!==U&&(V(m(e)),G())},autoFocus:"desktop"})},onOpenEventBasedObjectEditor:S,onOpenEventBasedObjectVariantEditor:P,onDeleteEventsBasedObjectVariant:I})}):null,"behaviors"===F&&(0,f.jsx)(nj,{object:r,isChildObject:!!p,project:i,eventsFunctionsExtension:d,resourceManagementProps:$,projectScopedContainersAccessor:C,onSizeUpdated:H,onUpdateBehaviorsSharedData:j,onBehaviorsUpdated:G,openBehaviorEvents:le,onWillInstallExtension:Z,onExtensionInstalled:k,isListLocked:L}),"variables"===F&&(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[r.getVariables().count()>0&&se&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:se})}),(0,f.jsx)(Ln,{projectScopedContainersAccessor:C,variablesContainer:r.getVariables(),areObjectVariables:!0,emptyPlaceholderTitle:(0,f.jsx)(w.Trans,{id:"Add your first object variable"}),emptyPlaceholderDescription:(0,f.jsx)(w.Trans,{id:"These variables hold additional information on an object."}),helpPagePath:"/all-features/variables/object-variables",onComputeAllVariableNames:y,onVariablesUpdated:G,isListLocked:A})]}),"effects"===F&&(0,f.jsx)(kC,{target:"object",layerRenderingType:"2d",project:i,resourceManagementProps:$,projectScopedContainersAccessor:C,effectsContainer:r.getEffects(),onEffectsRenamed:function(e,t){u?rj.WholeProjectRefactorer.renameObjectEffectInScene(i,u,r,e,t):d&&p&&rj.WholeProjectRefactorer.renameObjectEffectInEventsBasedObject(i,d,p,r,e,t)},onEffectsUpdated:function(){H(),G()},onEffectAdded:function(){re(!0)}})]},r&&r.ptr)},aj=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={editorComponent:null,castToObjectType:null,helpPagePath:null,objectName:""},e}return(0,We.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){this._loadFrom(this.props.object)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){(!this.props.open&&e.open||e.open&&this.props.object!==e.object)&&this._loadFrom(e.object)}},{key:"_loadFrom",value:function(e){if(e){var t=PC.Z.getEditorConfiguration(this.props.project,e.getType());if(!t)return this.setState({editorComponent:null,castToObjectType:null});this.setState({editorComponent:t.component,helpPagePath:t.helpPagePath,castToObjectType:t.castToObjectType,objectName:e.getName()})}}},{key:"render",value:function(){var e=this.props,t=e.object,n=e.initialTab,r=this.state,i=r.editorComponent,a=r.castToObjectType,o=r.helpPagePath;return t&&a?(0,c.createElement)(ij,(0,l.Z)((0,l.Z)({},this.props),{},{editorComponent:i,key:this.props.object&&this.props.object.ptr,helpPagePath:o,object:t,objectName:this.state.objectName,initialTab:n})):null}}]),n}(c.Component),oj=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Object editor"}),scope:"object-details",onClose:e.onCancel,showOnTop:!0,children:(0,f.jsx)(aj,(0,l.Z)({},e))})},sj=n(37054),lj=n(81303),cj=n(51063),uj=n(34517),dj=n(96826),pj=["BBText::BBText","Lighting::LightObject","PrimitiveDrawing::Drawer","TextEntryObject::TextEntry","TextInput::TextInputObject","TextObject::Text","Video::VideoObject"],fj=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.resourceNames,i=t.onAddBlobFile,o=t.onProgress,s={erroredResources:[]},l=n.getResourcesManager(),c=r.map((function(e){var t=l.getResource(e),r=Sr.Z.getResourceFullUrl(n,e,{});return{resource:t,url:r,filename:(0,uj.dh)(r)}})).filter(Boolean),e.next=6,(0,lj.R7)({urlContainers:c,onProgress:function(e,t){o(e,2*t)}});case 6:return e.sent.forEach((function(e){var t=e.item,n=e.error,r=e.blob,a=t.resource;!n&&r?i(a.getName(),r):s.erroredResources.push({resourceName:a.getName(),error:n||new Error("Unknown error during download.")})})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hj=function(e){var t=e.replace(/([A-Z]+|\d+)/g," $1").replace(/_(\w)/g,(function(e,t){return" "+t.toUpperCase()})).replace(/_/g,"").replace(/\s+/g," ").trim();return t=" "===t.charAt(0)?t.substring(1):t},gj=function e(t,n,r){t.isFolder()?(0,mt.mapFor)(0,t.getChildrenCount(),(function(i){e(t.getChildAt(i),n+t.getFolderName()+"/",r)})):r.push({object:t.getObject(),path:n})},mj=function(e,t,n){var r=e.getObjects().getRootFolder();(0,mt.mapFor)(0,r.getChildrenCount(),(function(e){gj(r.getChildAt(e),t,n)}))},xj=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,l){var c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new Map,u=[],e.prev=2,e.next=5,Promise.all(n.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,o,d,p,f,h,g,m,x,v,b,C,j;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.object,o=n.path,d=[],p=(0,Ct.ax)(t,r,hj(r.getName()),d),f=new Map,e.next=6,l({project:t,resourceNames:d,onAddBlobFile:function(e,t){f.set(e,t)}});case 6:h=t.getResourcesManager(),g=(0,i.Z)(f);try{for(g.s();!(m=g.n()).done;)x=(0,s.Z)(m.value,2),v=x[0],b=x[1],C=h.getResource(v),j="resources/"+C.getFile(),c.set(j,{filePath:j,blob:b})}catch(a){g.e(a)}finally{g.f()}u.push({text:JSON.stringify(p,null,2),filePath:"objects/"+o+r.getName()+".asset.json"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.next=7,(0,dj.f)({textFiles:u,blobFiles:(0,r.Z)(c.values()),basePath:"",onProgress:function(e,t){}});case 7:return d=e.sent,e.abrupt("return",d);case 11:return e.prev=11,e.t0=e.catch(2),(0,bi.gR)({message:"Unable to export your assets because of an internal error.",rawError:e.t0,errorId:"download-file-save-as-dialog-error"}),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),vj=function(e){var t=e.project,n=e.layout,r=e.onClose,i=c.useState(null),u=(0,s.Z)(i,2),d=u[0],p=u[1],h=(0,cj.s)({onDoProcess:c.useCallback((function(e,t){return fj((0,l.Z)((0,l.Z)({},e),{},{onProgress:t}))}),[])}),g=h.ensureProcessIsDone,m=h.renderProcessDialog;return c.useEffect((function(){return(0,o.Z)((0,a.Z)().mark((function e(){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(null),mj(n,"",r=[]),r.filter((function(e){var t=e.object;return!pj.includes(t.getType())})),e.next=6,xj(t,r,g);case 6:i=e.sent,p(i);case 8:case"end":return e.stop()}}),e)})))(),function(){p(null)}}),[t,g,n]),(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Export {0} assets",values:{0:n.getName()}}),secondaryActions:[(0,f.jsx)(An.Z,{label:(0,f.jsx)(w.Trans,{id:"Submit a free pack"}),helpPagePath:"/community/contribute-to-the-assets-store"},"free-pack-help"),(0,f.jsx)(An.Z,{label:(0,f.jsx)(w.Trans,{id:"Submit a paid pack"}),helpPagePath:"/community/sell-asset-pack-store/"},"paid-pack-help")],actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),keyboardFocused:!0,onClick:r},"close")],open:!0,onRequestClose:r,maxWidth:"sm",children:[(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Export the scene objects to a file and learn more about the submission process in the documentation."})}),(0,f.jsx)(M.sg,{alignItems:"center",children:d?(0,f.jsx)(sj.j,{blob:d,children:function(e){return(0,f.jsx)(G.Z,{icon:(0,f.jsx)(Uv,{}),primary:!0,onClick:function(){return(0,sj.z)(e,n.getName()+".gdo")},label:(0,f.jsx)(w.Trans,{id:"Export as a pack"})})}}):(0,f.jsx)(Oe.Z,{})})]}),m()]})},bj=n.g.gd,Cj=function(){function e(){(0,ze.Z)(this,e),this.selection=[]}return(0,We.Z)(e,[{key:"hasSelectedInstances",value:function(){return!!this.getSelectedInstances().length}},{key:"getSelectedInstances",value:function(){return this.selection}},{key:"isInstanceSelected",value:function(e){for(var t=0;t<this.selection.length;t++)if(bj.compare(this.selection[t],e))return!0;return!1}},{key:"clearSelection",value:function(){this.selection.length=0}},{key:"selectInstance",value:function(e){var t=e.instance,n=e.multiSelect,r=e.layersLocks,i=void 0===r?null:r,a=e.ignoreSeal;(void 0===a||!a)&&t.isSealed()||(this.isInstanceSelected(t)?n&&this.unselectInstance(t):(n||this.clearSelection(),i&&i[t.getLayer()]||this.selection.push(t)))}},{key:"selectInstances",value:function(e){var t=this,n=e.instances,r=e.multiSelect,i=e.layersLocks,a=void 0===i?null:i,o=e.ignoreSeal,s=void 0!==o&&o;r||this.clearSelection(),n.forEach((function(e){t.selectInstance({instance:e,multiSelect:!0,layersLocks:a,ignoreSeal:s})}))}},{key:"unselectInstance",value:function(e){if(this.isInstanceSelected(e)){for(var t=this.selection.length-1;t>=-1&&this.selection[t].ptr!==e.ptr;)--t;this.selection.splice(t,1)}}},{key:"unselectInstancesOfObject",value:function(e){for(var t=0;t<this.selection.length;)this.selection[t].getObjectName()===e?this.selection.splice(t,1):t++}},{key:"unselectInstancesOnLayer",value:function(e){for(var t=0;t<this.selection.length;)this.selection[t].getLayer()===e?this.selection.splice(t,1):t++}},{key:"cleanNonExistingInstances",value:function(e){var t=new Set,n=new bj.InitialInstanceJSFunctor;n.invoke=function(e){t.add(e)},e.iterateOverInstances(n),n.delete();for(var r=0;r<this.selection.length;){var i=this.selection[r];t.has(i.ptr)?r++:this.selection.splice(r,1)}}}]),e}(),jj=function(e){return 700/e},yj=function(e,t){return{grid:e.grid||!1,gridType:e.gridType||"rectangular",gridWidth:e.gridWidth||32,gridHeight:e.gridHeight||32,gridDepth:e.gridDepth||32,gridOffsetX:e.gridOffsetX||0,gridOffsetY:e.gridOffsetY||0,gridOffsetZ:e.gridOffsetZ||0,gridColor:void 0!==e.gridColor?e.gridColor:(0,Xn.Y9)(158,180,255),gridAlpha:void 0!==e.gridAlpha?e.gridAlpha:.8,snap:e.snap||!1,zoomFactor:Math.max(e.zoomFactor||jj(t),.01),windowMask:e.windowMask||!1,selectedLayer:e.selectedLayer||""}},Zj=.01;function kj(e){var t=c.useState((function(){return t=e.instancesEditorSettings,(0,l.Z)({},t);var t})),n=(0,s.Z)(t,1)[0],r=function(){e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridWidth:n.gridWidth,gridHeight:n.gridHeight,gridDepth:n.gridDepth,gridOffsetX:n.gridOffsetX,gridOffsetY:n.gridOffsetY,gridOffsetZ:n.gridOffsetZ,gridColor:n.gridColor,gridType:n.gridType})),e.onCancel()};return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Edit Grid Options"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:r},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Apply"}),primary:!0,onClick:e.onApply},"apply")],onRequestClose:r,onApply:e.onApply,open:!0,maxWidth:"sm",exceptionallyStillAllowRenderingInstancesEditors:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(_.ep,{noMargin:!0,expand:!0,noResponsiveLandscape:!0,children:(0,f.jsx)(Jn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Line color"}),fullWidth:!0,color:(0,Xn.m0)(e.instancesEditorSettings.gridColor),alpha:e.instancesEditorSettings.gridAlpha,onChange:function(t,n){e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridColor:(0,Xn.UQ)(t),gridAlpha:void 0===n||null===n?1:n}))}})}),(0,f.jsxs)(_.ep,{noMargin:!0,expand:!0,noResponsiveLandscape:!0,children:[(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Cell width (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridWidth,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridWidth:Math.max(parseFloat(n),Zj)}))}}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Cell height (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridHeight,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridHeight:Math.max(parseFloat(n),Zj)}))}}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Cell depth (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridDepth,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridDepth:Math.max(parseFloat(n),Zj)}))}})]}),(0,f.jsxs)(_.ep,{noMargin:!0,expand:!0,noResponsiveLandscape:!0,children:[(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"X offset (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridOffsetX,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridOffsetX:parseFloat(n)}))}}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Y offset (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridOffsetY,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridOffsetY:parseFloat(n)}))}}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Z offset (in pixels)"}),fullWidth:!0,type:"number",value:e.instancesEditorSettings.gridOffsetZ,onChange:function(t,n){return e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridOffsetZ:parseFloat(n)}))}})]}),(0,f.jsx)(_.ep,{noMargin:!0,expand:!0,noResponsiveLandscape:!0,children:(0,f.jsx)(Vn.Z,{checked:"isometric"===e.instancesEditorSettings.gridType,label:(0,f.jsx)(w.Trans,{id:"Isometric"}),onCheck:function(t,n){return e.onChangeInstancesEditorSettings((0,l.Z)((0,l.Z)({},e.instancesEditorSettings),{},{gridType:n?"isometric":"rectangular"}))}})})]})})}var wj=function(e){var t=e.eventsBasedObject,n=e.eventsBasedObjectVariant,r=(e.project,e.onApply),i=e.onClose,a=e.getContentAABB,o=e.onEventsBasedObjectChildrenEdited,l=c.useState(n.getAreaMinX()),u=(0,s.Z)(l,2),d=u[0],p=u[1],h=c.useState(n.getAreaMinY()),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(n.getAreaMinZ()),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState(n.getAreaMaxX()),Z=(0,s.Z)(y,2),k=Z[0],T=Z[1],S=c.useState(n.getAreaMaxY()),P=(0,s.Z)(S,2),I=P[0],M=P[1],L=c.useState(n.getAreaMaxZ()),A=(0,s.Z)(L,2),O=A[0],R=A[1],F=c.useState(t.isRenderedIn3D()),D=(0,s.Z)(F,2),N=D[0],B=D[1],U=c.useState(t.isInnerAreaFollowingParentSize()),V=(0,s.Z)(U,2),H=V[0],z=V[1],W=function(){d<k&&(n.setAreaMinX(d),n.setAreaMaxX(k)),m<I&&(n.setAreaMinY(m),n.setAreaMaxY(I)),C<O&&(n.setAreaMinZ(C),n.setAreaMaxZ(O)),t.isRenderedIn3D()!==N&&(t.markAsRenderedIn3D(N),o(t)),t.isInnerAreaFollowingParentSize()!==H&&(t.markAsInnerAreaFollowingParentSize(H),o(t)),r()},Y=c.useCallback((function(){var e=a();e&&(e.width()>0&&(p(e.left),x(e.top)),e.height()>0&&(T(e.right),M(e.bottom)),e.depth()>0&&(j(e.zMin),R(e.zMax)))}),[a]),q=[(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Ok"}),primary:!0,onClick:W},"ok")];return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"{0} properties",values:{0:(t.getFullName()||t.getName())+" ("+n.getName()+")"}}),actions:q,onRequestClose:i,onApply:W,open:!0,maxWidth:"sm",secondaryActions:[(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Fit to content"}),fullWidth:!0,onClick:function(){Y()}},"edit-scene-variables")],children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(_.pJ,{expand:!0,noMargin:!0,children:[(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Left bound"}),fullWidth:!0,type:"number",value:d,onChange:function(e,t){return p(parseFloat(t)||0)},errorText:d>k?(0,f.jsx)(w.Trans,{id:"Left bound should be smaller than right bound"}):null}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Right bound"}),fullWidth:!0,type:"number",value:k,onChange:function(e,t){return T(parseFloat(t)||0)},errorText:d>k?(0,f.jsx)(w.Trans,{id:"Right bound should be greater than left bound"}):null})]}),(0,f.jsxs)(_.pJ,{expand:!0,noMargin:!0,children:[(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Top bound"}),fullWidth:!0,type:"number",value:m,onChange:function(e,t){return x(parseFloat(t)||0)},errorText:m>I?(0,f.jsx)(w.Trans,{id:"Top bound should be smaller than bottom bound"}):null}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Bottom bound"}),fullWidth:!0,type:"number",value:I,onChange:function(e,t){return M(parseFloat(t)||0)},errorText:m>I?(0,f.jsx)(w.Trans,{id:"Bottom bound should be greater than right bound"}):null})]}),(0,f.jsxs)(_.pJ,{expand:!0,noMargin:!0,children:[(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Z min bound"}),fullWidth:!0,type:"number",value:C,onChange:function(e,t){return j(parseFloat(t)||0)},disabled:!N,errorText:C>O?(0,f.jsx)(w.Trans,{id:"Z min bound should be smaller than Z max bound"}):null}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Z max bound"}),fullWidth:!0,type:"number",value:O,onChange:function(e,t){return R(parseFloat(t)||0)},disabled:!N,errorText:C>O?(0,f.jsx)(w.Trans,{id:"Z max bound should be greater than Z min bound"}):null})]}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Use 3D rendering"}),checked:N,onCheck:function(e,t){return B(t)}}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Expand inner area with parent"}),checked:H,onCheck:function(e,t){return z(t)}})]})})};function Tj(e){var t=e.suggestedName,n=e.onApply,r=e.onCancel,i=c.useState(t),a=(0,s.Z)(i,2),o=a[0],l=a[1],u=c.useCallback((function(){return n(o)}),[o,n]);return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Extract as an external layout"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:r},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Move instances"}),primary:!0,onClick:u},"apply")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/interface/scene-editor/external-layouts/"},"help")],onRequestClose:r,onApply:u,open:!0,maxWidth:"sm",children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Selected instances will be moved to a new external layout."})}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"External layout name"}),fullWidth:!0,value:o,onChange:function(e,t){return l(t)}})]})})}var Sj=n.g.gd,Pj="<create a new extension>";function Ij(e){var t=e.project,n=e.globalObjectsContainer,a=e.objectsContainer,o=e.initialInstances,l=e.selectedInstances,u=e.onApply,d=e.onCancel,p=c.useState(""),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=c.useState(!0),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=c.useState(""),y=(0,s.Z)(j,2),Z=y[0],k=y[1],S=c.useState(!0),I=(0,s.Z)(S,2),M=I[0],L=I[1],A=c.useMemo((function(){return Tu(t)}),[t]),O=c.useMemo((function(){var e,t=new Map,n=(0,i.Z)(l);try{for(n.s();!(e=n.n()).done;){var r=e.value.getObjectName(),a=t.get(r)||0;a++,t.set(r,a)}}catch(h){n.e(h)}finally{n.f()}var c,u=(0,i.Z)(t);try{for(u.s();!(c=u.n()).done;){var d=(0,s.Z)(c.value,2),p=d[0],f=d[1];if(o.isInstancesCountOfObjectGreaterThan(p,f))return!1}}catch(h){u.e(h)}finally{u.f()}return!0}),[o,l]),R=c.useMemo((function(){var e,r=!1,o=!1,s=(0,i.Z)(l);try{for(s.s();!(e=s.n()).done;){var c=e.value.getObjectName(),u=(0,iu.Z)(n,a,c);if(u){var d=Sj.MetadataProvider.getObjectMetadata(t.getCurrentPlatform(),u.getType());if(r=r||!d.isRenderedIn3D(),o=o||d.isRenderedIn3D(),r&&o)return!0}}}catch(p){s.e(p)}finally{s.f()}return!1}),[n,a,t,l]),F=c.useMemo((function(){var e,o=new Set,s=(0,i.Z)(l);try{for(s.s();!(e=s.n()).done;){var c=e.value.getObjectName(),u=(0,iu.Z)(n,a,c);u&&o.add(u)}}catch(g){s.e(g)}finally{s.f()}var d,p=new Set,f=(0,i.Z)(o);try{var h=function(){var e=d.value;(0,mt.mapVector)(e.getAllBehaviorNames(),(function(n){var r=e.getBehavior(n),i=t.getCurrentPlatform(),a=Sj.MetadataProvider.getBehaviorMetadata(i,r.getTypeName());a.isRelevantForChildObjects()&&a.getRequiredBehaviorTypes().toJSArray().every((function(e){return Sj.MetadataProvider.getBehaviorMetadata(i,e).isRelevantForChildObjects()}))||p.add(a)}))};for(f.s();!(d=f.n()).done;)h()}catch(g){f.e(g)}finally{f.f()}return(0,r.Z)(p)}),[n,a,t,l]),D=c.useCallback((function(e){R||F.length>0?d():u(g||e._({id:"UntitledExtension"}),b,Z||e._({id:"MyObject"}),O&&M)}),[R,F,d,u,g,b,Z,O,M]);return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Extract as a custom object"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:d},"cancel"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Move instances"}),primary:!0,onClick:function(){return D(t)},disabled:R||F.length>0},"apply")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/objects/custom-objects-prefab-template/"},"help")],onRequestClose:d,onApply:function(){return D(t)},open:!0,maxWidth:"sm",children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Selected instances will be moved to a new custom object."})}),R?(0,f.jsx)(je.Z,{kind:"error",children:(0,f.jsx)(w.Trans,{id:"Custom objects can't contain both 2D or 3D.<0/>Please select either 2D instances or 3D instances.",components:[(0,f.jsx)("br",{})]})}):null,F.length>0?(0,f.jsxs)(je.Z,{kind:"error",children:[(0,f.jsx)(w.Trans,{id:"Objects inside custom objects can't contain the following behaviors:"}),(0,f.jsx)("ul",{children:F.map((function(e){return(0,f.jsx)("li",{children:e.getFullName()})}))})]}):null,(0,f.jsxs)(_.ep,{noMargin:!0,expand:!0,noResponsiveLandscape:!0,children:[(0,f.jsxs)(Hn.Z,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Extension (storing the custom object)"}),value:b?Pj:g,onChange:function(e,t,n){n===Pj?(C(!0),m("")):(C(!1),m(n))},fullWidth:!0,children:[A.map((function(e){return(0,f.jsx)(P.Z,{value:e.getName(),label:e.getFullName()||e.getName()},e.getName())})),(0,f.jsx)(P.Z,{value:Pj,label:{id:"<Create a New Extension>"}})]}),b?(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"New extension name"}),fullWidth:!0,value:g,onChange:function(e,t){return m(t)}}):null]}),(0,f.jsx)(yi.ZP,{floatingLabelText:(0,f.jsx)(w.Trans,{id:"Custom object name"}),fullWidth:!0,value:Z,onChange:function(e,t){return k(t)}}),(0,f.jsx)(Vn.Z,{label:(0,f.jsx)(w.Trans,{id:"Remove objects from the scene list"}),checked:O&&M,onCheck:function(e,t){return L(t)},disabled:!O})]})})}})}var Ej=function(e){return(0,Fi.YZ)("OPEN_OBJECTS_PANEL",!0,{handler:e.toggleObjectsList}),(0,Fi.YZ)("OPEN_OBJECT_GROUPS_PANEL",!0,{handler:e.toggleObjectGroupsList}),(0,Fi.YZ)("OPEN_PROPERTIES_PANEL",!0,{handler:e.togglePropertiesPanel}),(0,Fi.YZ)("TOGGLE_INSTANCES_PANEL",!0,{handler:e.toggleInstancesList}),(0,Fi.YZ)("TOGGLE_LAYERS_PANEL",!0,{handler:e.toggleLayersList}),(0,Fi.YZ)("SCENE_EDITOR_UNDO",e.canUndo,{handler:e.undo}),(0,Fi.YZ)("SCENE_EDITOR_REDO",e.canRedo,{handler:e.redo}),(0,Fi.YZ)("DELETE_INSTANCES",e.canDeleteSelection,{handler:e.deleteSelection}),(0,Fi.YZ)("TOGGLE_WINDOW_MASK",!0,{handler:e.toggleWindowMask}),(0,Fi.YZ)("TOGGLE_GRID",!0,{handler:e.toggleGrid}),(0,Fi.YZ)("OPEN_SETUP_GRID",!0,{handler:e.setupGrid}),(0,Fi.YZ)("OPEN_SCENE_VARIABLES",!0,{handler:e.onOpenSceneVariables}),null},Mj=c.memo(c.forwardRef((function(e,t){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,f.jsxs)("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round",children:[(0,f.jsx)("path",{d:"M4.75 8L12 4.75L19.25 8L12 11.25L4.75 8Z",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M4.75 16L12 19.25L19.25 16",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"m19.25 8v8"}),(0,f.jsx)("path",{d:"m4.75 8v8"}),(0,f.jsx)("path",{d:"M12 11.5V19"})]})}))}))),Lj=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.818 1.86582C12.0132 1.77833 12.2364 1.77833 12.4316 1.86582L17.5566 4.16323C17.8263 4.28412 17.9998 4.55209 17.9998 4.84762C17.9998 5.14314 17.8263 5.41111 17.5566 5.532L12.4316 7.82941C12.2364 7.9169 12.0132 7.9169 11.818 7.82941L6.69303 5.532C6.42336 5.41111 6.24982 5.14314 6.24982 4.84762C6.24982 4.55209 6.42336 4.28412 6.69303 4.16323L11.818 1.86582ZM8.83331 4.84762L12.1248 6.32312L15.4163 4.84762L12.1248 3.37211L8.83331 4.84762Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.31544 10.196C6.48487 9.81802 6.92864 9.64897 7.30661 9.81841L12.1248 11.9783L16.943 9.81841C17.321 9.64897 17.7648 9.81802 17.9342 10.196C18.1036 10.574 17.9346 11.0177 17.5566 11.1872L12.4316 13.4846C12.2364 13.5721 12.0132 13.5721 11.818 13.4846L6.69303 11.1872C6.31505 11.0177 6.146 10.574 6.31544 10.196Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2498 4.09762C17.664 4.09762 17.9998 4.4334 17.9998 4.84762L17.9998 10.5028C17.9998 10.917 17.664 11.2528 17.2498 11.2528C16.8356 11.2528 16.4998 10.917 16.4998 10.5028V4.84762C16.4998 4.4334 16.8356 4.09762 17.2498 4.09762Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99982 4.09762C7.41403 4.09762 7.74982 4.4334 7.74982 4.84762V10.5028C7.74982 10.917 7.41403 11.2528 6.99982 11.2528C6.58561 11.2528 6.24982 10.917 6.24982 10.5028V4.84762C6.24982 4.4334 6.58561 4.09762 6.99982 4.09762Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1248 6.57175C12.539 6.57175 12.8748 6.90754 12.8748 7.32175V12.6235C12.8748 13.0377 12.539 13.3735 12.1248 13.3735C11.7106 13.3735 11.3748 13.0377 11.3748 12.6235V7.32175C11.3748 6.90754 11.7106 6.57175 12.1248 6.57175Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.818 9.86582C17.0132 9.77833 17.2364 9.77833 17.4316 9.86582L22.5566 12.1632C22.8263 12.2841 22.9998 12.5521 22.9998 12.8476C22.9998 13.1431 22.8263 13.4111 22.5566 13.532L17.4316 15.8294C17.2364 15.9169 17.0132 15.9169 16.818 15.8294L11.693 13.532C11.4234 13.4111 11.2498 13.1431 11.2498 12.8476C11.2498 12.5521 11.4234 12.2841 11.693 12.1632L16.818 9.86582ZM13.8333 12.8476L17.1248 14.3231L20.4163 12.8476L17.1248 11.3721L13.8333 12.8476Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3154 18.196C11.4849 17.818 11.9286 17.649 12.3066 17.8184L17.1248 19.9783L21.943 17.8184C22.321 17.649 22.7648 17.818 22.9342 18.196C23.1036 18.574 22.9346 19.0177 22.5566 19.1872L17.4316 21.4846C17.2364 21.5721 17.0132 21.5721 16.818 21.4846L11.693 19.1872C11.3151 19.0177 11.146 18.574 11.3154 18.196Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.2498 12.0976C22.664 12.0976 22.9998 12.4334 22.9998 12.8476L22.9998 18.5028C22.9998 18.917 22.664 19.2528 22.2498 19.2528C21.8356 19.2528 21.4998 18.917 21.4998 18.5028V12.8476C21.4998 12.4334 21.8356 12.0976 22.2498 12.0976Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9998 12.0976C12.414 12.0976 12.7498 12.4334 12.7498 12.8476V18.5028C12.7498 18.917 12.414 19.2528 11.9998 19.2528C11.5856 19.2528 11.2498 18.917 11.2498 18.5028V12.8476C11.2498 12.4334 11.5856 12.0976 11.9998 12.0976Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1248 14.5718C17.539 14.5718 17.8748 14.9075 17.8748 15.3218V20.6235C17.8748 21.0377 17.539 21.3735 17.1248 21.3735C16.7106 21.3735 16.3748 21.0377 16.3748 20.6235V15.3218C16.3748 14.9075 16.7106 14.5718 17.1248 14.5718Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.81803 9.86582C7.0132 9.77833 7.23644 9.77833 7.43161 9.86582L12.5566 12.1632C12.8263 12.2841 12.9998 12.5521 12.9998 12.8476C12.9998 13.1431 12.8263 13.4111 12.5566 13.532L7.43161 15.8294C7.23644 15.9169 7.0132 15.9169 6.81803 15.8294L1.69303 13.532C1.42336 13.4111 1.24982 13.1431 1.24982 12.8476C1.24982 12.5521 1.42336 12.2841 1.69303 12.1632L6.81803 9.86582ZM3.83331 12.8476L7.12482 14.3231L10.4163 12.8476L7.12482 11.3721L3.83331 12.8476Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.31544 18.196C1.48487 17.818 1.92864 17.649 2.30661 17.8184L7.12482 19.9783L11.943 17.8184C12.321 17.649 12.7648 17.818 12.9342 18.196C13.1036 18.574 12.9346 19.0177 12.5566 19.1872L7.43161 21.4846C7.23644 21.5721 7.0132 21.5721 6.81803 21.4846L1.69303 19.1872C1.31505 19.0177 1.146 18.574 1.31544 18.196Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2498 12.0976C12.664 12.0976 12.9998 12.4334 12.9998 12.8476V18.5028C12.9998 18.917 12.664 19.2528 12.2498 19.2528C11.8356 19.2528 11.4998 18.917 11.4998 18.5028V12.8476C11.4998 12.4334 11.8356 12.0976 12.2498 12.0976Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.99982 12.0976C2.41403 12.0976 2.74982 12.4334 2.74982 12.8476V18.5028C2.74982 18.917 2.41403 19.2528 1.99982 19.2528C1.58561 19.2528 1.24982 18.917 1.24982 18.5028V12.8476C1.24982 12.4334 1.58561 12.0976 1.99982 12.0976Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.12482 14.5718C7.53903 14.5718 7.87482 14.9075 7.87482 15.3218V20.6235C7.87482 21.0377 7.53903 21.3735 7.12482 21.3735C6.71061 21.3735 6.37482 21.0377 6.37482 20.6235V15.3218C6.37482 14.9075 6.71061 14.5718 7.12482 14.5718Z",fill:"currentColor"})]}))})),Aj=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.96967 8.46967C5.26256 8.17678 5.73744 8.17678 6.03033 8.46967L8.53033 10.9697C8.82322 11.2626 8.82322 11.7374 8.53033 12.0303L6.03033 14.5303C5.73744 14.8232 5.26256 14.8232 4.96967 14.5303L2.46967 12.0303C2.17678 11.7374 2.17678 11.2626 2.46967 10.9697L4.96967 8.46967ZM4.06066 11.5L5.5 12.9393L6.93934 11.5L5.5 10.0607L4.06066 11.5Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 7C21.75 7.41421 21.4142 7.75 21 7.75H12C11.5858 7.75 11.25 7.41421 11.25 7C11.25 6.58579 11.5858 6.25 12 6.25H21C21.4142 6.25 21.75 6.58579 21.75 7Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 17C21.75 17.4142 21.4142 17.75 21 17.75H12C11.5858 17.75 11.25 17.4142 11.25 17C11.25 16.5858 11.5858 16.25 12 16.25H21C21.4142 16.25 21.75 16.5858 21.75 17Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H12C11.5858 12.75 11.25 12.4142 11.25 12C11.25 11.5858 11.5858 11.25 12 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12Z",fill:"currentColor"})]}))})),Oj=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6646 3.32918C11.8758 3.22361 12.1243 3.22361 12.3355 3.32918L20.3355 7.32918C20.5895 7.45622 20.75 7.71592 20.75 8C20.75 8.28408 20.5895 8.54378 20.3355 8.67082L12.3355 12.6708C12.1243 12.7764 11.8758 12.7764 11.6646 12.6708L3.66463 8.67082C3.41054 8.54378 3.25004 8.28408 3.25004 8C3.25004 7.71592 3.41054 7.45622 3.66463 7.32918L11.6646 3.32918ZM5.67709 8L12 11.1615L18.323 8L12 4.83853L5.67709 8Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.32922 15.6646C3.51446 15.2941 3.96497 15.1439 4.33545 15.3292L12 19.1615L19.6646 15.3292C20.0351 15.1439 20.4856 15.2941 20.6709 15.6646C20.8561 16.0351 20.7059 16.4856 20.3355 16.6708L12.3355 20.6708C12.1243 20.7764 11.8758 20.7764 11.6646 20.6708L3.66463 16.6708C3.29415 16.4856 3.14398 16.0351 3.32922 15.6646Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.32922 11.6646C3.51446 11.2941 3.96497 11.1439 4.33545 11.3292L12 15.1615L19.6646 11.3292C20.0351 11.1439 20.4856 11.2941 20.6709 11.6646C20.8561 12.0351 20.7059 12.4856 20.3355 12.6708L12.3355 16.6708C12.1243 16.7764 11.8758 16.7764 11.6646 16.6708L3.66463 12.6708C3.29415 12.4856 3.14398 12.0351 3.32922 11.6646Z",fill:"currentColor"})]}))})),Rj=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.25C8.41421 3.25 8.75 3.58579 8.75 4V20C8.75 20.4142 8.41421 20.75 8 20.75C7.58579 20.75 7.25 20.4142 7.25 20V4C7.25 3.58579 7.58579 3.25 8 3.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 3.25C16.4142 3.25 16.75 3.58579 16.75 4V20C16.75 20.4142 16.4142 20.75 16 20.75C15.5858 20.75 15.25 20.4142 15.25 20V4C15.25 3.58579 15.5858 3.25 16 3.25Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.75 8C20.75 8.41421 20.4142 8.75 20 8.75L4 8.75C3.58579 8.75 3.25 8.41421 3.25 8C3.25 7.58579 3.58579 7.25 4 7.25L20 7.25C20.4142 7.25 20.75 7.58579 20.75 8Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.75 16C20.75 16.4142 20.4142 16.75 20 16.75L4 16.75C3.58579 16.75 3.25 16.4142 3.25 16C3.25 15.5858 3.58579 15.25 4 15.25L20 15.25C20.4142 15.25 20.75 15.5858 20.75 16Z",fill:"currentColor"})]}))})),Fj=n(87199),Dj="toolbar-open-objects-panel-button",Nj="toolbar-open-object-groups-panel-button",_j="toolbar-open-properties-panel-button",Bj="toolbar-open-instances-list-panel-button",Uj="toolbar-open-layers-panel-button",Vj=["#".concat(Dj),"#".concat(Nj),"#".concat(_j),"#".concat(Bj),"#".concat(Uj)],Hj=n(15637),zj=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 3.25C19.9665 3.25 20.75 4.0335 20.75 5V19C20.75 19.9665 19.9665 20.75 19 20.75H5C4.0335 20.75 3.25 19.9665 3.25 19V5C3.25 4.0335 4.0335 3.25 5 3.25H19ZM4.75 19C4.75 19.1381 4.86193 19.25 5 19.25H8.5V15.5H4.75V19ZM10 19.25H14V15.5H10V19.25ZM15.5 19.25H19C19.1381 19.25 19.25 19.1381 19.25 19V15.5H15.5V19.25ZM4.75 14H8.5V10H4.75V14ZM10 14H14V10H10V14ZM15.5 14H19.25V10H15.5V14ZM5 4.75C4.86193 4.75 4.75 4.86193 4.75 5V8.5H8.5V4.75H5ZM10 8.5H14V4.75H10V8.5ZM15.5 8.5H19.25V5C19.25 4.86193 19.1381 4.75 19 4.75H15.5V8.5Z",fill:"currentColor"})}))})),Wj=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2949 4.25C17.0344 4.25005 17.6946 4.71482 17.9434 5.41113L22.2295 17.4111C22.6365 18.5507 21.7911 19.7499 20.5811 19.75H3.32617C2.16365 19.75 1.32348 18.6373 1.64258 17.5195L4.25 8.39355V8.25H4.29102L5.07129 5.51953C5.28591 4.7684 5.97274 4.25017 6.75391 4.25H16.2949ZM3.08496 17.9316C3.03964 18.0912 3.16022 18.25 3.32617 18.25H7.32324L7.67188 15H3.92285L3.08496 17.9316ZM8.83301 18.25H15.1064L14.5264 15H9.18164L8.83301 18.25ZM16.625 18.25H20.5811C20.7538 18.2499 20.8744 18.0787 20.8164 17.916L19.7744 15H16.0449L16.625 18.25ZM4.35156 13.5H7.83301L8.23535 9.75H5.42285L4.35156 13.5ZM9.34277 13.5H14.2578L13.5889 9.75H9.74512L9.34277 13.5ZM15.7773 13.5H19.2393L17.8994 9.75H15.1074L15.7773 13.5ZM6.75391 5.75C6.64246 5.75017 6.54431 5.82446 6.51367 5.93164L5.85156 8.25H8.39648L8.66406 5.75H6.75391ZM9.90527 8.25H13.3213L12.875 5.75H10.1738L9.90527 8.25ZM14.8398 8.25H17.3643L16.5303 5.91602C16.5036 5.84138 16.4439 5.78508 16.3711 5.76172L16.2949 5.75H14.3936L14.8398 8.25Z",fill:"currentColor"})}))})),Gj=function(e){var t=e.onClose;return(0,f.jsx)(E.ZP,{open:!0,title:(0,f.jsx)(w.Trans,{id:"New 3D editor"}),flexColumnBody:!0,maxWidth:"sm",fullscreen:"never-even-on-mobile",actions:[(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Ok, don't show me this again"}),onClick:t,primary:!0},"close")],children:(0,f.jsx)(Re.r,{allowParagraphs:!0,isStandaloneText:!0,translatableSource:{id:"The 3D editor is new and may still have rough edges. It will continue to be improved in the near future. Read more about it on the [GDevelop blog](https://gdevelop.io/blog/3d-editor)."}})})},Yj=c.memo((function(e){var t=c.useContext(D.ZP),n=t.values,i=t.setHasSeenInGameEditorWarning,a=c.useState(!1),o=(0,s.Z)(a,2),l=o[0],u=o[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ej,{toggleObjectsList:e.toggleObjectsList,toggleObjectGroupsList:e.toggleObjectGroupsList,togglePropertiesPanel:e.toggleProperties,toggleInstancesList:e.toggleInstancesList,toggleLayersList:e.toggleLayersList,undo:e.undo,canUndo:e.canUndo,redo:e.redo,canRedo:e.canRedo,deleteSelection:e.deleteSelection,toggleWindowMask:e.toggleWindowMask,toggleGrid:e.toggleGrid,setupGrid:e.openSetupGrid,canDeleteSelection:0!==e.selectedInstancesCount,onOpenSceneVariables:e.onOpenSceneVariables}),(0,f.jsxs)(Ls.k,{lastChild:!0,children:[(0,f.jsx)(Hj.Z,{id:"game-editor-toggle",noSeparator:!0,buttons:[{id:"2d-instances-editor",renderIcon:function(e){return(0,f.jsx)(zj,{className:e})},tooltip:(0,f.jsx)(w.Trans,{id:"Top-down, classic editor"}),label:"2D",onClick:function(){e.setGameEditorMode("instances-editor")},isActive:"instances-editor"===e.gameEditorMode},{id:"3d-game-editor",renderIcon:function(e){return(0,f.jsx)(Wj,{className:e})},tooltip:(0,f.jsx)(w.Trans,{id:"3D, real-time editor (new)"}),label:"3D",onClick:function(){n.hasSeenInGameEditorWarning||u(!0),e.setGameEditorMode("embedded-game")},isActive:"embedded-game"===e.gameEditorMode}]}),(0,f.jsx)(Qh,{}),(0,f.jsx)($.Z,{size:"small",color:"default",id:Dj,onClick:e.toggleObjectsList,selected:e.isObjectsListShown,tooltip:e.isObjectsListShown?{id:"Close Objects Panel"}:{id:"Open Objects Panel"},children:(0,f.jsx)(Mj,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",id:Nj,onClick:e.toggleObjectGroupsList,selected:e.isObjectGroupsListShown,tooltip:e.isObjectGroupsListShown?{id:"Close Object Groups Panel"}:{id:"Open Object Groups Panel"},children:(0,f.jsx)(Lj,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",id:_j,onClick:e.toggleProperties,selected:e.isPropertiesShown,tooltip:e.isPropertiesShown?{id:"Close Properties Panel"}:{id:"Open Properties Panel"},children:(0,f.jsx)(at.Z,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",id:Bj,onClick:e.toggleInstancesList,selected:e.isInstancesListShown,tooltip:e.isInstancesListShown?{id:"Close Instances List Panel"}:{id:"Open Instances List Panel"},children:(0,f.jsx)(Aj,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",id:Uj,onClick:e.toggleLayersList,selected:e.isLayersListShown,tooltip:e.isLayersListShown?{id:"Close Layers Panel"}:{id:"Open Layers Panel"},children:(0,f.jsx)(Oj,{})}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",color:"default",tooltip:{id:"Toggle/edit grid"},children:(0,f.jsx)(Rj,{})}),buildMenuTemplate:function(t){return[{type:"checkbox",label:t._({id:"Show Mask"}),checked:e.isWindowMaskShown,click:function(){return e.toggleWindowMask()}},{type:"checkbox",label:t._({id:"Show grid"}),checked:e.isGridShown,click:function(){return e.toggleGrid()}},{type:"separator"},{label:t._({id:"Setup grid"}),click:function(){return e.openSetupGrid()}}]}}),(0,f.jsx)(Qh,{}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e.undo,disabled:!e.canUndo,tooltip:{id:"Undo the last changes"},children:(0,f.jsx)(ne,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e.redo,disabled:!e.canRedo,tooltip:{id:"Redo the last changes"},children:(0,f.jsx)(qt,{})}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",color:"default",tooltip:{id:"Change editor zoom"},children:(0,f.jsx)(Fj.Z,{})}),buildMenuTemplate:function(t){return[].concat((0,r.Z)(e.getContextMenuZoomItems(t)),[{type:"separator"},{label:"5%",click:function(){return e.setZoomFactor(.05)}},{label:"10%",click:function(){return e.setZoomFactor(.1)}},{label:"25%",click:function(){return e.setZoomFactor(.25)}},{label:"50%",click:function(){return e.setZoomFactor(.5)}},{label:"100%",click:function(){return e.setZoomFactor(1)}},{label:"150%",click:function(){return e.setZoomFactor(1.5)}},{label:"200%",click:function(){return e.setZoomFactor(2)}},{label:"400%",click:function(){return e.setZoomFactor(4)}}])}}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e.deleteSelection,disabled:!e.selectedInstancesCount,tooltip:{id:"Delete the selected instances from the scene"},children:(0,f.jsx)(Jt.Z,{})}),e.onOpenSettings&&(0,f.jsx)(Qh,{}),e.onOpenSettings&&(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e.onOpenSettings,tooltip:{id:"Open settings"},children:e.settingsIcon||(0,f.jsx)(ag,{})})]}),l&&(0,f.jsx)(Gj,{onClose:function(){u(!1),i(!0)}})]})})),qj=Yj,Jj=c.memo((function(e){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ej,{toggleObjectsList:e.toggleObjectsList,toggleObjectGroupsList:e.toggleObjectGroupsList,togglePropertiesPanel:e.toggleProperties,toggleInstancesList:e.toggleInstancesList,toggleLayersList:e.toggleLayersList,undo:e.undo,canUndo:e.canUndo,redo:e.redo,canRedo:e.canRedo,deleteSelection:e.deleteSelection,toggleWindowMask:e.toggleWindowMask,toggleGrid:e.toggleGrid,setupGrid:e.openSetupGrid,canDeleteSelection:0!==e.selectedInstancesCount,onOpenSceneVariables:e.onOpenSceneVariables}),(0,f.jsx)(Hj.Z,{id:"game-editor-toggle",noSeparator:!0,buttons:[{id:"2d-instances-editor",renderIcon:function(e){return(0,f.jsx)(zj,{className:e})},tooltip:(0,f.jsx)(w.Trans,{id:"Top-down, classic editor"}),label:"2D",onClick:function(){e.setGameEditorMode("instances-editor")},isActive:"instances-editor"===e.gameEditorMode},{id:"3d-game-editor",renderIcon:function(e){return(0,f.jsx)(Wj,{className:e})},tooltip:(0,f.jsx)(w.Trans,{id:"3D, real-time editor (new)"}),label:"3D",onClick:function(){e.setGameEditorMode("embedded-game")},isActive:"embedded-game"===e.gameEditorMode}]}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e.undo,disabled:!e.canUndo,tooltip:{id:"Undo the last changes"},children:(0,f.jsx)(ne,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e.redo,disabled:!e.canRedo,tooltip:{id:"Redo the last changes"},children:(0,f.jsx)(qt,{})}),(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",color:"default",tooltip:{id:"Change editor zoom"},children:(0,f.jsx)(Fj.Z,{})}),buildMenuTemplate:function(t){return[].concat((0,r.Z)(e.getContextMenuZoomItems(t)),[{type:"separator"},{label:"5%",click:function(){return e.setZoomFactor(.05)}},{label:"10%",click:function(){return e.setZoomFactor(.1)}},{label:"25%",click:function(){return e.setZoomFactor(.25)}},{label:"50%",click:function(){return e.setZoomFactor(.5)}},{label:"100%",click:function(){return e.setZoomFactor(1)}},{label:"150%",click:function(){return e.setZoomFactor(1.5)}},{label:"200%",click:function(){return e.setZoomFactor(2)}},{label:"400%",click:function(){return e.setZoomFactor(4)}}])}}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e.deleteSelection,disabled:!e.selectedInstancesCount,tooltip:{id:"Delete the selected instances from the scene"},children:(0,f.jsx)(Jt.Z,{})}),(0,f.jsx)(Qh,{}),(0,f.jsxs)(Ls.k,{lastChild:!0,children:[(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",color:"default",tooltip:{id:"Toggle/edit grid"},children:(0,f.jsx)(Rj,{})}),buildMenuTemplate:function(t){return[{type:"checkbox",label:t._({id:"Show Mask"}),checked:e.isWindowMaskShown,click:function(){return e.toggleWindowMask()}},{type:"checkbox",label:t._({id:"Show grid"}),checked:e.isGridShown,click:function(){return e.toggleGrid()}},{type:"separator"},{label:t._({id:"Setup grid"}),click:function(){return e.openSetupGrid()}}]}}),(0,f.jsx)(Qh,{}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:e.onOpenSettings,tooltip:{id:"Open settings"},children:e.settingsIcon||(0,f.jsx)(ag,{})})]})]})})),Xj=function(e,t,n,r,i){return(0,tc.el)(t,n).containerObjectsList.map((function(t){return{text:t.object.getName(),handler:function(){return r(t.object,i)},iconSrc:rc.Z.getThumbnail.bind(rc.Z)(e,t.object.getConfiguration())}}))},Kj=function(e){var t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.onEditObject,a=e.onEditObjectVariables;(0,Fi.gT)("EDIT_OBJECT",!0,{generateOptions:c.useCallback((function(){return Xj(t,n,r,i)}),[t,n,r,i])}),(0,Fi.gT)("EDIT_OBJECT_BEHAVIORS",!0,{generateOptions:c.useCallback((function(){return Xj(t,n,r,i,"behaviors")}),[t,n,r,i])}),(0,Fi.gT)("EDIT_OBJECT_EFFECTS",!0,{generateOptions:c.useCallback((function(){return Xj(t,n,r,i,"effects")}),[t,n,r,i])}),(0,Fi.gT)("EDIT_OBJECT_VARIABLES",!0,{generateOptions:c.useCallback((function(){return Xj(t,n,r,a)}),[t,n,r,a])})},Qj=function(e){var t=e.globalObjectsContainer,n=e.objectsContainer,i=e.onEditObjectGroup;(0,Fi.gT)("EDIT_OBJECT_GROUP",!0,{generateOptions:c.useCallback((function(){return[].concat((0,r.Z)(n?(0,tc.Wr)(n.getObjectGroups()):[]),(0,r.Z)(t?(0,tc.Wr)(t.getObjectGroups()):[])).map((function(e){return{text:e.getName(),handler:function(){return i(e)}}}))}),[i,t,n])})},$j=function(e){var t=e.layersContainer,n=e.onEditLayerEffects,r=e.onEditLayer;(0,Fi.gT)("EDIT_LAYER_EFFECTS",!0,{generateOptions:c.useCallback((function(){var e=t.getLayersCount();return(0,mt.mapReverseFor)(0,e,(function(e){var r=t.getLayerAt(e);return{text:r.getName()||"Base layer",handler:function(){return n(r)}}}))}),[t,n])}),(0,Fi.gT)("EDIT_LAYER",!0,{generateOptions:c.useCallback((function(){var e=t.getLayersCount();return(0,mt.mapReverseFor)(0,e,(function(e){var n=t.getLayerAt(e);return{text:n.getName()||"Base layer",handler:function(){return r(n)}}}))}),[t,r])})},ey=function(e){var t=e.project,n=e.layersContainer,r=e.globalObjectsContainer,i=e.objectsContainer,a=e.onEditObject,o=e.onEditObjectVariables,s=e.onOpenSceneProperties,l=e.onEditObjectGroup,c=e.onEditLayerEffects,u=e.onEditLayer;return(0,Fi.YZ)("OPEN_SCENE_PROPERTIES",!0,{handler:s}),Kj({project:t,globalObjectsContainer:r,objectsContainer:i,onEditObject:a,onEditObjectVariables:o}),Qj({globalObjectsContainer:r,objectsContainer:i,onEditObjectGroup:l}),$j({layersContainer:n,onEditLayerEffects:c,onEditLayer:u}),null},ty=n(58247),ny=function(e){for(var t=0;t<e.getLayersCount();t++){var n=e.getLayerAt(t);if(n.isLightingLayer())return n}return null},ry={"Lighting::LightObject":{onObjectAdded:function(e){e.object;var t=e.layersContainer;if(null===ny(t)){var n=(0,xt.Z)("Lighting",(function(e){return t.hasLayerNamed(e)}));t.insertNewLayer(n,t.getLayersCount());var r=t.getLayer("Lighting");r.setLightingLayer(!0),r.setFollowBaseLayerCamera(!0),r.setAmbientLightColor(128,128,128)}},onInstanceAdded:function(e){var t=e.instance,n=e.layersContainer,r=ny(n);r&&t.setLayer(r.getName())},getInfoBarDetails:function(e){return"onObjectAdded"===e?{identifier:"automatic-lighting-layer",message:{id:"A lighting layer was created. Lights will be placed on it automatically. You can change the ambient light color in the properties of this layer"},touchScreenMessage:{id:"A lighting layer was created. Lights will be placed on it automatically. You can change the ambient light color in the properties of this layer"}}:"onInstanceAdded"===e?{identifier:"object-moved-in-lighting-layer",message:{id:"The light object was automatically placed on the Lighting layer."},touchScreenMessage:{id:"The light object was automatically placed on the Lighting layer."}}:null}}},iy=n(45735),ay=n(5675),oy=n(71046),sy=n.n(oy),ly=n(36425);function cy(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){var t=e.data.originalEvent.nativeEvent;e.data.isPrimary?r(e,t):a(e,t)}function r(t,n){var r=new Date,i=r-e._pan.p.date;if(!(i<12)){var a=n.clientX-e._pan.p.x,o=n.clientY-e._pan.p.y,s=Math.sqrt(a*a+o*o);if(e._pan.pp){var l={deltaX:a,deltaY:o,velocity:s/i,data:t.data};e.emit("panmove",l)}else{if(!(s>(n instanceof window.MouseEvent?2:7)))return;e.emit("panstart")}e._pan.pp={x:e._pan.p.x,y:e._pan.p.y,date:e._pan.p.date},e._pan.p={x:n.clientX,y:n.clientY,date:r}}}function i(e){a(e,e.data.originalEvent.nativeEvent)}function a(i,a){if(e.removeEventListener("globalpointermove",n),e._pan&&e._pan.pp)if(t&&a){if(e._pan.intervalId)return;var o=new Date-e._pan.pp.date,s=(a.clientX-e._pan.pp.x)/o,l=(a.clientY-e._pan.pp.y)/o;e._pan.intervalId=setInterval((function(){if(Math.abs(s)<.04&&Math.abs(l)<.04)return clearInterval(e._pan.intervalId),e.emit("panend"),void(e._pan=null);var t={clientX:e._pan.p.x+12*s,clientY:e._pan.p.y+12*l};r(i,t),s*=.9,l*=.9}),12)}else e.emit("panend"),e._pan=null;else e._pan=null}e.eventMode="static",e.addEventListener("pointerdown",(function(t){!function(t){if(e._pan){if(!e._pan.intervalId)return;clearInterval(e._pan.intervalId),e.emit("panend")}e._pan={p:{x:t.clientX,y:t.clientY,date:new Date}},e.addEventListener("globalpointermove",n)}(t.data.originalEvent.nativeEvent)})),e.addEventListener("pointerup",i),e.addEventListener("pointerupoutside",i)}var uy=n(79916),dy=function(){function e(t){var n=this,r=t.initialViewX,i=t.initialViewY,a=t.width,o=t.height,s=t.instancesEditorSettings;(0,ze.Z)(this,e),this.viewX=0,this.viewY=0,this._pixiContainer=new ly.Container,this.toSceneCoordinates=function(e,t){e-=n._width/2,t-=n._height/2,e/=Math.abs(n.instancesEditorSettings.zoomFactor),t/=Math.abs(n.instancesEditorSettings.zoomFactor);var r=e;return e=Math.cos(0*Math.PI)*e-Math.sin(0*Math.PI)*t,t=Math.sin(0*Math.PI)*r+Math.cos(0*Math.PI)*t,[e+n.viewX,t+n.viewY]},this.toSceneScale=function(e){return 0===n.instancesEditorSettings.zoomFactor?e:e/Math.abs(n.instancesEditorSettings.zoomFactor)},this.toCanvasScale=function(e){return e*Math.abs(n.instancesEditorSettings.zoomFactor)},this.toCanvasCoordinates=function(e,t){e-=n.viewX,t-=n.viewY;var r=e;return e=Math.cos(-0*Math.PI)*e-Math.sin(-0*Math.PI)*t,t=Math.sin(-0*Math.PI)*r+Math.cos(-0*Math.PI)*t,e*=Math.abs(n.instancesEditorSettings.zoomFactor),t*=Math.abs(n.instancesEditorSettings.zoomFactor),[e+n._width/2,t+n._height/2]},this.viewX=r,this.viewY=i,this.instancesEditorSettings=s,this.resize(a,o)}return(0,We.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"resize",value:function(e,t){this._width=e,this._height=t}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"containsPoint",value:function(e,t){var n=this.toCanvasCoordinates(e,t);return 0<=n[0]&&n[0]<=this._width&&0<=n[1]&&n[1]<=this._height}},{key:"scrollBy",value:function(e,t){this.viewX+=e,this.viewY+=t}},{key:"scrollTo",value:function(e,t){this.viewX=e,this.viewY=t}},{key:"fitToRectangle",value:function(e){this.viewX=e.centerX(),this.viewY=e.centerY();var t=this._width/e.width(),n=this._height/e.height();return.95*Math.min(t,n)}},{key:"getViewX",value:function(){return this.viewX}},{key:"getViewY",value:function(){return this.viewY}},{key:"applyTransformationToPixi",value:function(e){e.position.x=-this.viewX*this.instancesEditorSettings.zoomFactor,e.position.y=-this.viewY*this.instancesEditorSettings.zoomFactor,e.position.x+=this._width/2,e.position.y+=this._height/2,e.scale.x=this.instancesEditorSettings.zoomFactor,e.scale.y=this.instancesEditorSettings.zoomFactor}},{key:"applyTransformationToThree",value:function(e,t){e.aspect=this._width/this._height;var n=this.instancesEditorSettings.zoomFactor;e.position.x=this.viewX,e.position.y=-this.viewY,e.rotation.z=0;var r=uy.Z.toRad(e.fov),i=.5*this._height/n/Math.tan(.5*r);e.position.z=i,e.far=i+2e3,e.updateProjectionMatrix(),t.scale.x=this._width/n,t.scale.y=this._height/n,t.position.x=e.position.x,t.position.y=-e.position.y,t.rotation.z=0}}]),e}(),py=n(46564),fy=function(e){if(!e)return!1;var t=e.targetTouches;return t&&t.length>=2},hy=(0,We.Z)((function e(t){var n=this,r=t.canvas,i=t.setZoomFactor,a=t.getZoomFactor,o=t.viewPosition;(0,ze.Z)(this,e),this._lastPinchCenterX=null,this._lastPinchCenterY=null,this._startPinch=function(){},this._onPinchMove=function(e,t,r){if(null===n._lastPinchCenterX||null===n._lastPinchCenterY)return n._lastPinchCenterX=e,void(n._lastPinchCenterY=t);var i=e-n._lastPinchCenterX,a=t-n._lastPinchCenterY,o=i/n._getZoomFactor(),s=a/n._getZoomFactor();n._viewPosition.scrollBy(-o,-s),n._lastPinchCenterX=e,n._lastPinchCenterY=t,n._setZoomFactor(n._getZoomFactor()*r)},this._endPinch=function(){n._lastPinchCenterX=null,n._lastPinchCenterY=null},this.unmount=function(){n._unregisterCanvasPinchDetector()},this._setZoomFactor=i,this._getZoomFactor=a,this._viewPosition=o,this._unregisterCanvasPinchDetector=function(e){var t=e.canvas,n=e.onPinchStart,r=e.onPinchMove,i=e.onPinchEnd,a=null;function o(){t.addEventListener("touchmove",s)}function s(e){if(fy(e)){var t=e.targetTouches,i=t[0].clientX-t[1].clientX,o=t[0].clientY-t[1].clientY,s=Math.sqrt(i*i+o*o);if(!a)return a={p:{distance:s,date:new Date}},void n();var l=new Date;if(!(l-a.p.date<12)){var c={x:(t[0].clientX+t[1].clientX)/2,y:(t[0].clientY+t[1].clientY)/2},u=s/a.p.distance;r(c.x,c.y,u),a.p={distance:s,date:l}}}}function l(e){t.removeEventListener("touchmove",s),a&&(i(),a=null)}return t.addEventListener("touchstart",o),t.addEventListener("touchend",l),function(){t.removeEventListener("touchstart",o),t.removeEventListener("touchmove",s),t.removeEventListener("touchend",l)}}({canvas:r,onPinchStart:this._startPinch,onPinchMove:this._onPinchMove,onPinchEnd:this._endPinch})})),gy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(0,ze.Z)(this,e),this.left=t,this.top=n,this.right=r,this.bottom=i,this.zMin=a,this.zMax=o}return(0,We.Z)(e,[{key:"set",value:function(e){var t=e.left,n=e.top,r=e.right,i=e.bottom,a=e.zMin,o=e.zMax;this.left=t,this.top=n,this.right=r,this.bottom=i,this.zMin=a||0,this.zMax=o||0}},{key:"setThroughCenter",value:function(e){var t=e.centerX,n=e.centerY,r=e.width,i=e.height;this.set({left:t-r/2,top:n-i/2,right:t+r/2,bottom:n+i/2,zMin:0,zMax:0})}},{key:"setRectangle",value:function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom,this.zMin=e.zMin,this.zMax=e.zMax}},{key:"width",value:function(){return this.right-this.left}},{key:"height",value:function(){return this.bottom-this.top}},{key:"depth",value:function(){return this.zMax-this.zMin}},{key:"centerX",value:function(){return(this.left+this.right)/2}},{key:"centerY",value:function(){return(this.top+this.bottom)/2}},{key:"centerZ",value:function(){return(this.zMin+this.zMax)/2}},{key:"union",value:function(e){e.left<this.left&&(this.left=e.left),e.top<this.top&&(this.top=e.top),e.right>this.right&&(this.right=e.right),e.bottom>this.bottom&&(this.bottom=e.bottom),e.zMin<this.zMin&&(this.zMin=e.zMin),e.zMax>this.zMax&&(this.zMax=e.zMax)}},{key:"containsPoint",value:function(e,t){return this.left<=e&&this.right>e&&this.bottom>t&&this.top<=t}},{key:"toCSSPosition",value:function(){return{top:this.top,left:this.left,width:this.width(),height:this.height()}}},{key:"toString",value:function(){return"["+this.left+" -> "+this.right+" ; "+this.top+" -> "+this.bottom+" ; "+this.zMin+" -> "+this.zMax+"]"}}],[{key:"fromDOMRect",value:function(e){return new this(e.left,e.top,e.right,e.bottom)}}]),e}();var my=n(77672),xy=function(e){return e.instanceCounters={},e.totalInstancesUpdateCount=0,e.totalInstancesUpdateTime=0,e.totalPixiRenderingTime=0,e.totalPixiUiRenderingTime=0,e.totalThreeRenderingTime=0,e},vy=function(e,t){e.totalPixiRenderingTime+=t},by=function(e,t){for(var n in t.instanceCounters)if(t.instanceCounters.hasOwnProperty(n)){var r=t.instanceCounters[n],i=e.instanceCounters[n];i||(i=e.instanceCounters[n]={updateCount:0,totalUpdateTime:0}),i.updateCount+=r.updateCount,i.totalUpdateTime+=r.totalUpdateTime}return e.totalInstancesUpdateCount+=t.totalInstancesUpdateCount,e.totalInstancesUpdateTime+=t.totalInstancesUpdateTime,e.totalPixiRenderingTime+=t.totalPixiRenderingTime,e.totalPixiUiRenderingTime+=t.totalPixiUiRenderingTime,e.totalThreeRenderingTime+=t.totalThreeRenderingTime,e},Cy=n.g.gd,jy=function(){function e(t){var n=this,r=t.project,i=t.globalObjectsContainer,a=t.objectsContainer,o=t.layer,s=t.viewPosition,l=t.instances,c=t.onInstanceClicked,u=t.onInstanceRightClicked,d=t.onInstanceDoubleClicked,p=t.onOverInstance,f=t.onOutInstance,h=t.onMoveInstance,g=t.onMoveInstanceEnd,m=t.onDownInstance,x=t.onUpInstance,v=t.pixiRenderer,b=t.showObjectInstancesIn3D;(0,ze.Z)(this,e),this.renderedInstances={},this.wasUsed=!1,this._temporaryRectangle=new gy,this._temporaryRectanglePath=[[0,0],[0,0],[0,0],[0,0]],this._renderTexture=null,this._oldWidth=null,this._oldHeight=null,this._threeGroup=null,this._threeScene=null,this._threeCamera=null,this._threePlaneTexture=null,this._threePlaneGeometry=null,this._threePlaneMaterial=null,this._threePlaneMesh=null,this._basicProfilingCounters={instanceCounters:{},totalInstancesUpdateCount:0,totalInstancesUpdateTime:0,totalPixiRenderingTime:0,totalPixiUiRenderingTime:0,totalThreeRenderingTime:0},this.getUnrotatedInstanceLeft=function(e){return e.getX()-(n.renderedInstances[e.ptr]?n.renderedInstances[e.ptr].getOriginX():0)},this.getUnrotatedInstanceTop=function(e){return e.getY()-(n.renderedInstances[e.ptr]?n.renderedInstances[e.ptr].getOriginY():0)},this.getUnrotatedInstanceZMin=function(e){return e.getZ()-0},this.getUnrotatedInstanceSize=function(e){var t=n.getOrCreateRendererOfInstance(e),r=e.hasCustomSize(),i=e.hasCustomDepth();return[r?e.getCustomWidth():t?t.getDefaultWidth():0,r?e.getCustomHeight():t?t.getDefaultHeight():0,i?e.getCustomDepth():t?t.getDefaultDepth():0]},this.getOrCreateRendererOfInstance=function(e){var t=n.renderedInstances[e.ptr];if(void 0===t){var r=e.getObjectName(),i=(0,iu.Z)(n.globalObjectsContainer,n.objectsContainer,r);(t=n.renderedInstances[e.ptr]=i?rc.Z.createNewInstanceRenderer(n.project,e,i.getConfiguration(),n.pixiContainer,n._threeGroup):rc.Z.createNewUnknownInstanceRenderer(n.project,e,n.pixiContainer))._pixiObject.eventMode="static",cy(t._pixiObject),function(e){var t=0,n=0,r=0,i=function(i){var a=i.data.global,o=a.x,s=a.y,l=Date.now();l-t<500&&Math.abs(o-n)<=10&&Math.abs(s-r)<=10&&setTimeout((function(){e.emit("doubleclick",i)})),t=l,n=o,r=s};e.eventMode="static",e.addEventListener("click",i),e.addEventListener("touchend",i)}(t._pixiObject),t._pixiObject.addEventListener("click",(function(t){0===t.data.originalEvent.button&&n.onInstanceClicked(e)})),t._pixiObject.addEventListener("doubleclick",(function(){n.onInstanceDoubleClicked(e)})),t._pixiObject.addEventListener("mouseover",(function(){n.onOverInstance(e)})),t._pixiObject.addEventListener("mousedown",(function(t){if(0===t.data.originalEvent.button){var r=t.data.global,i=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onDownInstance(e,i[0],i[1])}})),t._pixiObject.addEventListener("mouseup",(function(t){if(0===t.data.originalEvent.button){var r=t.data.global,i=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onUpInstance(e,i[0],i[1])}})),t._pixiObject.addEventListener("rightclick",(function(t){var r=t.data,i=r.global,a=r.originalEvent,o=n.viewPosition.toSceneCoordinates(i.x,i.y);return n.onDownInstance(e,o[0],o[1]),n.onInstanceRightClicked&&n.onInstanceRightClicked({offsetX:a.offsetX,offsetY:a.offsetY,x:a.clientX,y:a.clientY}),!1})),t._pixiObject.addEventListener("touchstart",(function(t){if(fy(t.data&&t.data.originalEvent))return null;var r=t.data.global,i=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onDownInstance(e,i[0],i[1])})),t._pixiObject.addEventListener("touchend",(function(t){if(fy(t.data&&t.data.originalEvent))return null;var r=t.data.global,i=n.viewPosition.toSceneCoordinates(r.x,r.y);n.onUpInstance(e,i[0],i[1])})),t._pixiObject.addEventListener("mouseout",(function(){n.onOutInstance(e)})),t._pixiObject.addEventListener("panmove",(function(t){if(fy(t.data&&t.data.originalEvent))return null;n.onMoveInstance(e,t.deltaX,t.deltaY)})),t._pixiObject.addEventListener("panend",(function(e){n.onMoveInstanceEnd()}))}return t},this.project=r,this.instances=l,this.globalObjectsContainer=i,this.objectsContainer=a,this.layer=o,this.viewPosition=s,this.onInstanceClicked=c,this.onInstanceRightClicked=u,this.onInstanceDoubleClicked=d,this.onOverInstance=p,this.onOutInstance=f,this.onMoveInstance=h,this.onMoveInstanceEnd=g,this.onDownInstance=m,this.onUpInstance=x,this.viewTopLeft=[0,0],this.viewBottomRight=[0,0],this.pixiContainer=new ly.Container,this._showObjectInstancesIn3D=b,this.instancesRenderer=new Cy.InitialInstanceJSFunctor,this.instancesRenderer.invoke=function(e){var t=Cy.wrapPointer(e,Cy.InitialInstance),r=n.getOrCreateRendererOfInstance(t);if(r){var i=r.getPixiObject();i&&(r.isRenderedIn3D()?i.zOrder=t.getZ()+r.getDepth():i.zOrder=t.getZOrder());try{var a=n._isInstanceVisible(t);if(i&&(i.visible=a,i.eventMode=n.layer.isLocked()||t.isLocked()&&t.isSealed()?"auto":"static"),a){var o=t.getObjectName(),s=performance.now();r.update();var l=performance.now()-s;!function(e,t,n){var r=e.instanceCounters[t];r?(r.updateCount++,r.totalUpdateTime+=n):e.instanceCounters[t]={updateCount:1,totalUpdateTime:n},e.totalInstancesUpdateCount++,e.totalInstancesUpdateTime+=n}(n._basicProfilingCounters,o,l)}if(r instanceof my.Z){var c=r.getThreeObject();c&&(c.visible=a),n._threeGroup&&c&&n._threeGroup.add(c)}}catch(u){if(u instanceof TypeError)return void console.error("An error occurred when rendering instance for object ".concat(t.getObjectName(),":"),u);throw u}finally{r.wasUsed=!0}}},this._showObjectInstancesIn3D&&this._setup3dRendering(v)}return(0,We.Z)(e,[{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"getThreeScene",value:function(){return this._threeScene}},{key:"getThreeCamera",value:function(){return this._threeCamera}},{key:"getThreePlaneMesh",value:function(){return this._threePlaneMesh}},{key:"getRendererOfInstance",value:function(e){return this.renderedInstances.hasOwnProperty(e.ptr)?this.renderedInstances[e.ptr]:null}},{key:"getUnrotatedInstanceAABB",value:function(e,t){var n=this.getUnrotatedInstanceSize(e),r=this.getUnrotatedInstanceLeft(e),i=this.getUnrotatedInstanceTop(e),a=this.getUnrotatedInstanceZMin(e),o=r+n[0],s=i+n[1],l=a+n[2];return t.set({left:r,top:i,right:o,bottom:s,zMin:a,zMax:l}),t}},{key:"getInstanceAABB",value:function(e,t){var n=e.getAngle()*Math.PI/180,r=e.isFlippedX(),i=e.isFlippedY();if(0===n&&!r&&!i)return this.getUnrotatedInstanceAABB(e,t);var a=this.getUnrotatedInstanceSize(e),o=this._temporaryRectanglePath,s=this.getUnrotatedInstanceLeft(e),l=this.getUnrotatedInstanceTop(e),c=s+a[0],u=l+a[1];o[0][0]=s,o[0][1]=l,o[1][0]=s,o[1][1]=u,o[2][0]=c,o[2][1]=u,o[3][0]=c,o[3][1]=l;var d=void 0,p=void 0;this.renderedInstances[e.ptr]&&(d=s+this.renderedInstances[e.ptr].getCenterX(),p=l+this.renderedInstances[e.ptr].getCenterY()),void 0!==d&&void 0!==p||(d=(o[0][0]+o[2][0])/2,p=(o[0][1]+o[2][1])/2),function(e,t,n,r,i){for(var a=0,o=e.length;a<o;++a)e[a][0]=r?2*t-e[a][0]:e[a][0],e[a][1]=i?2*n-e[a][1]:e[a][1]}(o,d,p,r,i),function(e,t,n,r){for(var i=Math.cos(-r),a=Math.sin(-r),o=0,s=e.length;o<s;++o){var l=e[o][0]-t,c=e[o][1]-n;e[o][0]=t+l*i+c*a,e[o][1]=n-l*a+c*i}}(o,d,p,n);for(var f=Number.MAX_VALUE,h=-Number.MAX_VALUE,g=Number.MAX_VALUE,m=-Number.MAX_VALUE,x=0,v=o.length;x<v;++x)f=Math.min(f,o[x][0]),h=Math.max(h,o[x][0]),g=Math.min(g,o[x][1]),m=Math.max(m,o[x][1]);var b=this.getUnrotatedInstanceZMin(e),C=b+a[2];return t.set({left:f,top:g,right:h,bottom:m,zMin:b,zMax:C}),t}},{key:"_isInstanceVisible",value:function(e){var t=this.getInstanceAABB(e,this._temporaryRectangle);return!(t.left+t.width()<this.viewTopLeft[0]||t.top+t.height()<this.viewTopLeft[1]||t.left>this.viewBottomRight[0]||t.top>this.viewBottomRight[1])}},{key:"_computeViewBounds",value:function(){var e=1e3;this.viewTopLeft=this.viewPosition.toSceneCoordinates(-1e3,-1e3),this.viewBottomRight=this.viewPosition.toSceneCoordinates(this.viewPosition.getWidth()+e,this.viewPosition.getHeight()+e)}},{key:"render",value:function(){xy(this._basicProfilingCounters),this._computeViewBounds(),this.instances.iterateOverInstancesWithZOrdering(this.instancesRenderer,this.layer.getName()),this._updatePixiObjectsZOrder(),this._updateVisibility(),this._destroyUnusedInstanceRenderers()}},{key:"getBasicProfilingCounters",value:function(){return this._basicProfilingCounters}},{key:"_setup3dRendering",value:function(e){if(this._threeScene||this._threeGroup||this._threeCamera)throw new Error("Tried to setup 3D rendering for a layer that is already set up.");var t=new py.Scene;this._threeScene=t,t.scale.y=-1,this._threeGroup=new py.Group,this._threeGroup.rotation.order="ZYX",t.add(this._threeGroup);var n=new py.HemisphereLight;n.color=new py.Color(1,1,1),n.groundColor=new py.Color(.25,.25,.25),n.position.set(0,0,1);var r=new py.Group;r.rotation.order="ZYX",r.rotation.x=Math.PI/4,r.add(n),t.add(r);var i=new py.PerspectiveCamera(45,1,3,2e3);if(i.rotation.order="ZYX",this._threeCamera=i,this._renderTexture||this._threePlaneGeometry||this._threePlaneMaterial||this._threePlaneTexture||this._threePlaneMesh)throw new Error("Tried to setup PixiJS plane for 2D rendering in 3D for a layer that is already set up.");this._createPixiRenderTexture(e);var a=new Uint8Array(4),o=new py.DataTexture(a,1,1);o.needsUpdate=!0,this._threePlaneTexture=o,o.generateMipmaps=!1;var s="nearest"===this.project.getScaleMode()?py.NearestFilter:py.LinearFilter;o.minFilter=s,o.magFilter=s,o.wrapS=py.ClampToEdgeWrapping,o.wrapT=py.ClampToEdgeWrapping;var l=new py.PlaneGeometry(1,1);this._threePlaneGeometry=l;var c={vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform sampler2D map;\n        varying vec2 vUv;\n        void main() {\n          vec4 texel = texture2D(map, vUv);\n          gl_FragColor = texel;\n        }\n      ",uniforms:{map:{value:this._threePlaneTexture}},side:py.FrontSide,transparent:!0},u=new py.ShaderMaterial(c);this._threePlaneMaterial=u;var d=new py.Mesh(l,u);t.add(d),this._threePlaneMesh=d}},{key:"_createPixiRenderTexture",value:function(e){if(e&&e.type===ly.RENDERER_TYPE.WEBGL)if(this._renderTexture)console.error("Tried to create a PixiJS RenderTexture for a layer that already has one.");else{this._oldWidth=e.screen.width,this._oldHeight=e.screen.height;var t=this._oldWidth,n=this._oldHeight,r=e.resolution;this._renderTexture=ly.RenderTexture.create({width:t||100,height:n||100,resolution:r}),this._renderTexture.baseTexture.scaleMode=ly.SCALE_MODES.LINEAR,console.info("RenderTexture created for layer ".concat(this.layer.getName(),"."))}}},{key:"renderOnPixiRenderTexture",value:function(e){if(this._renderTexture){this._oldWidth===e.screen.width&&this._oldHeight===e.screen.height||(this._renderTexture.resize(e.screen.width||100,e.screen.height||100),this._oldWidth=e.screen.width,this._oldHeight=e.screen.height);var t=e.renderTexture.current,n=e.renderTexture.sourceFrame;e.renderTexture.bind(this._renderTexture),e.renderTexture.clear([0,0,0,0]),e.render(this.pixiContainer,{renderTexture:this._renderTexture,clear:!1}),e.renderTexture.bind(t,n,void 0)}}},{key:"updateThreePlaneTextureFromPixiRenderTexture",value:function(e,t){if(this._threePlaneTexture&&this._renderTexture){var n=this._renderTexture.baseTexture._glTextures[t.CONTEXT_UID];if(n)e.properties.get(this._threePlaneTexture).__webglTexture=n.texture}}},{key:"_updatePixiObjectsZOrder",value:function(){this.pixiContainer.children.sort((function(e,t){return e.zOrder=e.zOrder||0,t.zOrder=t.zOrder||0,e.zOrder-t.zOrder}))}},{key:"_updateVisibility",value:function(){var e=this.layer.getVisibility();this.pixiContainer.visible=e,this._threeScene&&(this._threeScene.visible=e)}},{key:"resetInstanceRenderersFor",value:function(e){for(var t in this.renderedInstances){var n=Number(t);if(this.renderedInstances.hasOwnProperty(n)){var r=this.renderedInstances[n];r.getInstance().getObjectName()===e&&(r.onRemovedFromScene(),r._wasDestroyed||console.error("Rendered instance was not marked as destroyed by onRemovedFromScene - verify the implementation.",r),delete this.renderedInstances[n])}}}},{key:"_destroyUnusedInstanceRenderers",value:function(){for(var e in this.renderedInstances){var t=Number(e);if(this.renderedInstances.hasOwnProperty(t)){var n=this.renderedInstances[t];n.wasUsed?n.wasUsed=!1:(n.onRemovedFromScene(),n._wasDestroyed||console.error("Rendered instance was not marked as destroyed by onRemovedFromScene - verify the implementation.",n),delete this.renderedInstances[t])}}}},{key:"delete",value:function(){for(var e in this.renderedInstances){var t=Number(e);if(this.renderedInstances.hasOwnProperty(t))this.renderedInstances[t].onRemovedFromScene(),delete this.renderedInstances[t]}this.pixiContainer.destroy(),this.instancesRenderer.delete()}}]),e}(),yy=function(){function e(t){var n=this,r=t.project,i=t.layersContainer,a=t.globalObjectsContainer,o=t.objectsContainer,s=t.layout,l=t.instances,c=t.viewPosition,u=t.onInstanceClicked,d=t.onInstanceRightClicked,p=t.onInstanceDoubleClicked,f=t.onOverInstance,h=t.onOutInstance,g=t.onMoveInstance,m=t.onMoveInstanceEnd,x=t.onDownInstance,v=t.onUpInstance,b=t.showObjectInstancesIn3D;(0,ze.Z)(this,e),this._basicProfilingCounters={instanceCounters:{},totalInstancesUpdateCount:0,totalInstancesUpdateTime:0,totalPixiRenderingTime:0,totalPixiUiRenderingTime:0,totalThreeRenderingTime:0},this.project=r,this.globalObjectsContainer=a,this.instances=l,this.layout=s,this.layersContainer=i,this.objectsContainer=o,this.viewPosition=c,this.onInstanceClicked=u,this.onInstanceRightClicked=d,this.onInstanceDoubleClicked=p,this.onOverInstance=f,this.onOutInstance=h,this.onMoveInstance=g,this.onMoveInstanceEnd=m,this.onDownInstance=x,this.onUpInstance=v,this._showObjectInstancesIn3D=b,this.layersRenderers={},this.pixiContainer=new ly.Container,this.pixiContainer.alpha=0,this.temporaryRectangle=new gy,this.instanceMeasurer={getInstanceAABB:function(e,t){var r=e.getLayer(),i=n.layersRenderers[r];return i?i.getInstanceAABB(e,t):(t.left=e.getX(),t.top=e.getY(),t.right=e.getX(),t.bottom=e.getY(),t.zMin=0,t.zMax=0,t)},getUnrotatedInstanceAABB:function(e,t){var r=e.getLayer(),i=n.layersRenderers[r];return i?i.getUnrotatedInstanceAABB(e,t):(t.left=e.getX(),t.top=e.getY(),t.right=e.getX(),t.bottom=e.getY(),t.zMin=0,t.zMax=0,t)},getUnrotatedInstanceSize:function(e){var t=e.getLayer(),r=n.layersRenderers[t];return r?r.getUnrotatedInstanceSize(e):[0,0,0]}}}return(0,We.Z)(e,[{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"getInstanceMeasurer",value:function(){return this.instanceMeasurer}},{key:"getBasicProfilingCounters",value:function(){return this._basicProfilingCounters}},{key:"render",value:function(e,t,n,r,i){xy(this._basicProfilingCounters),t&&(t.resetState(),e.reset());var a,o,s=this.layout,l=s?(0,Xn.Y9)(s.getBackgroundColorRed(),s.getBackgroundColorGreen(),s.getBackgroundColorBlue()):8947848;e.background.color=l,e.background.alpha=1,e.clear(),e.render(i);for(var c=0;c<this.layersContainer.getLayersCount();c++){var u=this.layersContainer.getLayerAt(c),d=u.getName(),p=this.layersRenderers[d];p||(this.layersRenderers[d]=p=new jy({project:this.project,globalObjectsContainer:this.globalObjectsContainer,objectsContainer:this.objectsContainer,instances:this.instances,viewPosition:this.viewPosition,layer:u,onInstanceClicked:this.onInstanceClicked,onInstanceRightClicked:this.onInstanceRightClicked,onInstanceDoubleClicked:this.onInstanceDoubleClicked,onOverInstance:this.onOverInstance,onOutInstance:this.onOutInstance,onMoveInstance:this.onMoveInstance,onMoveInstanceEnd:this.onMoveInstanceEnd,onDownInstance:this.onDownInstance,onUpInstance:this.onUpInstance,pixiRenderer:e,showObjectInstancesIn3D:this._showObjectInstancesIn3D}),this.pixiContainer.addChild(p.getPixiContainer())),p.layer=u,p.wasUsed=!0,p.getPixiContainer().zOrder=c,p.render(),by(this._basicProfilingCounters,p.getBasicProfilingCounters());var f=p.getPixiContainer();n.applyTransformationToPixi(f);var h=p.getThreeCamera(),g=p.getThreePlaneMesh();if(h&&g&&(n.applyTransformationToThree(h,g),h.fov=u.getCamera3DFieldOfView()),t){var m=p.getThreeScene(),x=p.getThreeCamera();if(m&&x){t.resetState(),e.reset();var v=performance.now();p.renderOnPixiRenderTexture(e),p.updateThreePlaneTextureFromPixiRenderTexture(t,e),vy(this._basicProfilingCounters,performance.now()-v),e.reset(),t.resetState(),t.clearDepth();var b=performance.now();t.render(m,x),a=this._basicProfilingCounters,o=performance.now()-b,a.totalThreeRenderingTime+=o}}else{var C=performance.now();e.render(f,{clear:!1}),vy(this._basicProfilingCounters,performance.now()-C)}}this._updatePixiObjectsZOrder(),this._cleanUnusedLayerRenderers(),t&&(t.resetState(),e.reset());var j=performance.now();e.render(r),function(e,t){e.totalPixiUiRenderingTime+=t}(this._basicProfilingCounters,performance.now()-j),t&&(e.reset(),t.resetState())}},{key:"_updatePixiObjectsZOrder",value:function(){this.pixiContainer.children.sort((function(e,t){return e.zOrder=e.zOrder||0,t.zOrder=t.zOrder||0,e.zOrder-t.zOrder}))}},{key:"resetInstanceRenderersFor",value:function(e){for(var t in this.layersRenderers){if(this.layersRenderers.hasOwnProperty(t))this.layersRenderers[t].resetInstanceRenderersFor(e)}}},{key:"getRendererOfInstance",value:function(e,t){return this.layersRenderers.hasOwnProperty(e)?this.layersRenderers[e].getRendererOfInstance(t):null}},{key:"_cleanUnusedLayerRenderers",value:function(){for(var e in this.layersRenderers)if(this.layersRenderers.hasOwnProperty(e)){var t=this.layersRenderers[e];t.wasUsed?t.wasUsed=!1:(t.delete(),delete this.layersRenderers[e])}}},{key:"delete",value:function(){for(var e in this.layersRenderers)this.layersRenderers.hasOwnProperty(e)&&this.layersRenderers[e].delete();this.pixiContainer.destroy()}}]),e}();function Zy(e,t){var n=e(t.left,t.top),r=e(t.right,t.bottom);return new gy(n[0],n[1],r[0],r[1])}var ky=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e;return t.grid&&t.snap&&!n?wy(r,t.gridWidth,t.gridHeight,t.gridOffsetX,t.gridOffsetY,t.gridType):(r[0]=Math.round(r[0]),r[1]=Math.round(r[1])),r},wy=function(e,t,n,r,i,a){if("isometric"===a){if(t<=0||n<=0)return e[0]=Math.round(e[0]),void(e[1]=Math.round(e[1]));var o=Math.round(2*(e[0]-r)/t),s=Math.round(2*(e[1]-i)/n);if(((o+s)%2+2)%2===1){var l=(e[0]-(o/2*t+r))/t,c=(e[1]-(s/2*n+i))/n;Math.abs(l)>Math.abs(c)?l>0?o++:o--:c>0?s++:s--}e[0]=o/2*t+r,e[1]=s/2*n+i}else e[0]=t<=0?Math.round(e[0]):Math.round((e[0]-r)/t)*t+r,e[1]=n<=0?Math.round(e[1]):Math.round((e[1]-i)/n)*n+i},Ty=["TopLeft","BottomLeft","BottomRight","TopRight","Top","Left","Bottom","Right"],Sy={TopLeft:[0,0],BottomLeft:[0,1],BottomRight:[1,1],TopRight:[1,0],Top:[.5,0],Left:[0,.5],Bottom:[.5,1],Right:[1,.5]},Py=function(e){return"Top"!==e&&"Bottom"!==e},Iy=function(e){return"Left"!==e&&"Right"!==e},Ey=function(){function e(t){var n=t.instanceMeasurer,r=t.instancesEditorSettings;(0,ze.Z)(this,e),this._initialSelectionAABB=null,this._unrotatedInstanceAABBs={},this._instanceAABBs={},this._instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0,this._temporaryGrabbingPosition=[0,0],this.instanceMeasurer=n,this.instancesEditorSettings=r}return(0,We.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"_getOrCreateInstanceAABB",value:function(e){var t=this._instanceAABBs[e.ptr];return t||(this._instanceAABBs[e.ptr]=this.instanceMeasurer.getInstanceAABB(e,new gy))}},{key:"_getOrCreateUnrotatedInstanceAABB",value:function(e){var t=this._unrotatedInstanceAABBs[e.ptr];return t||(this._unrotatedInstanceAABBs[e.ptr]=this.instanceMeasurer.getUnrotatedInstanceAABB(e,new gy))}},{key:"_getOrCreateInstanceOriginPosition",value:function(e){var t=this._instancePositions[e.ptr];return t||(this._instancePositions[e.ptr]={x:e.getX(),y:e.getY()})}},{key:"_getOrCreateSelectionAABB",value:function(e){var t=this._initialSelectionAABB;if(t)return t;if(!e.length)return null;(t=new gy).setRectangle(this._getOrCreateInstanceAABB(e[0]));for(var n=1;n<e.length;n++)t.union(this._getOrCreateInstanceAABB(e[n]));return this._initialSelectionAABB=t,t}},{key:"resizeBy",value:function(e,t,n,r,i,a){this.totalDeltaX+=t,this.totalDeltaY+=n;var o=e.filter((function(e){return!e.isLocked()})),s=this._getOrCreateSelectionAABB(o);if(s){var l,c,u,d,p,f,h=Sy[r],g=s.left+s.width()*h[0],m=s.top+s.height()*h[1],x=this._temporaryGrabbingPosition;x[0]=g+this.totalDeltaX,x[1]=m+this.totalDeltaY,this.instancesEditorSettings.snap&&this.instancesEditorSettings.grid&&!a?(l=x,c=this.instancesEditorSettings.gridWidth,u=this.instancesEditorSettings.gridHeight,d=this.instancesEditorSettings.gridOffsetX,p=this.instancesEditorSettings.gridOffsetY,"isometric"===(f=this.instancesEditorSettings.gridType)?wy(l,c/2,u/2,d,p,"rectangular"):wy(l,c,u,d,p,f)):(x[0]=Math.round(x[0]),x[1]=Math.round(x[1]));var v=x[0]-g,b=x[1]-m;Py(r)||(v=0),Iy(r)||(b=0);var C="TopLeft"===r||"BottomLeft"===r||"Left"===r?-v:v,j="TopLeft"===r||"TopRight"===r||"Top"===r?-b:b,y=0!==s.width()?(s.width()+C)/s.width():C,Z=0!==s.height()?(s.height()+j)/s.height():j,k=1,w=function(e){for(var t=0;t<e.length;t++)if(e[t].getAngle()%90!==0)return!0;return!1}(o);(i||w)&&(!Iy(r)||Py(r)&&C*s.height()>j*s.width()?(Z=y,k=y):(y=Z,k=Z)),y=Math.max(0!==s.width()?1/s.width():1e-5,y),Z=Math.max(0!==s.height()?1/s.height():1e-5,Z),k=Math.max(0!==s.depth()?1/s.depth():1e-5,k);for(var T=s.right-Sy[r][0]*s.width(),S=s.bottom-Sy[r][1]*s.height(),P=0;P<o.length;P++){var I=o[P],E=this._getOrCreateUnrotatedInstanceAABB(I),M=this._getOrCreateInstanceOriginPosition(I),L=0!==E.width()?E.width():1,A=0!==E.height()?E.height():1,O=0!==E.depth()?E.depth():1,R=(I.getAngle()%360+360)%360,F=M.x,D=M.y,N=L,_=A,B=O;if(i||w||90!==R&&270!==R)N=y*L,_=Z*A,B=k*O,F=(M.x-T)*y+T,D=(M.y-S)*Z+S;else{N=Z*L,_=y*A,B=k*O;var U=(E.centerX()-T)*y+T,V=(E.centerY()-S)*Z+S;F=U+Z*(M.x-E.centerX()),D=V+y*(M.y-E.centerY())}I.setX(Math.round(F)),I.setY(Math.round(D)),I.setHasCustomDepth(!0),I.setHasCustomSize(!0),I.setCustomWidth(Math.round(N)),I.setCustomHeight(Math.round(_)),I.setCustomDepth(Math.round(B))}}}},{key:"endResize",value:function(){this._initialSelectionAABB=null,this._unrotatedInstanceAABBs={},this._instanceAABBs={},this._instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0}}]),e}(),My={TopLeft:"nwse-resize",BottomLeft:"nesw-resize",BottomRight:"nwse-resize",TopRight:"nesw-resize",Top:"ns-resize",Left:"ew-resize",Bottom:"ns-resize",Right:"ew-resize"},Ly=function(){function e(t){var n=this,r=t.instancesSelection,a=t.instanceMeasurer,o=t.shouldDisplayHandles,s=t.onResize,l=t.onResizeEnd,c=t.onRotate,u=t.onRotateEnd,d=t.toCanvasCoordinates,p=t.screenType,f=t.keyboardShortcuts,h=t.onPanMove,g=t.onPanEnd,m=t.getFillColor;(0,ze.Z)(this,e),this.pixiContainer=new ly.Container,this.rectanglesContainer=new ly.Container,this.selectedRectangles=[],this.resizeButtons={},this.rotateButton=new ly.Graphics,this._currentPanMovingGoal=null,this.getSelectionAABB=function(){for(var e=new gy,t=n.instancesSelection.getSelectedInstances(),r=new gy,i=0;i<t.length;i++){var a=t[i];r=n.instanceMeasurer.getInstanceAABB(a,r),0===i?e.setRectangle(r):e.union(r)}return e},this.instanceMeasurer=a,this.onResize=s,this.shouldDisplayHandles=o,this.onResizeEnd=l,this.onRotate=c,this.onRotateEnd=u,this.toCanvasCoordinates=d,this.instancesSelection=r,this._screenType=p,this.keyboardShortcuts=f,this.onPanMove=h,this.onPanEnd=g,this.getFillColor=m,this.pixiContainer.addChild(this.rectanglesContainer);var x,v=(0,i.Z)(Ty);try{var b=function(){var e=x.value,t=new ly.Graphics;n.resizeButtons[e]=t,n._makeButton({objectButton:t,onMove:function(t){n.onResize(t.deltaX,t.deltaY,e)},onEnd:function(){n.onResizeEnd()},onPanMove:function(e){n.onPanMove(e.deltaX,e.deltaY,e.data.global.x,e.data.global.y)},onPanEnd:function(){n.onPanEnd()},cursor:My[e]})};for(v.s();!(x=v.n()).done;)b()}catch(C){v.e(C)}finally{v.f()}this._makeButton({objectButton:this.rotateButton,onMove:function(e){n.onRotate(e.deltaX,e.deltaY)},onEnd:function(){n.onRotateEnd()},onPanMove:function(e){n.onPanMove(e.deltaX,e.deltaY,e.data.global.x,e.data.global.y)},onPanEnd:function(){n.onPanEnd()},cursor:'url("res/actions/rotate24_black.png"),auto'})}return(0,We.Z)(e,[{key:"setScreenType",value:function(e){this._screenType=e}},{key:"_makeButton",value:function(e){var t=this,n=e.objectButton,r=e.onMove,i=e.onEnd,a=e.onPanMove,o=e.onPanEnd,s=e.cursor;n.eventMode="static",n.buttonMode=!0,n.cursor=s,cy(n),n.addEventListener("mousemove",(function(e){t.keyboardShortcuts.shouldMoveView()?n.cursor="grab":n.cursor=s})),n.addEventListener("panmove",(function(e){t.keyboardShortcuts.shouldMoveView()?("buttonInteraction"===t._currentPanMovingGoal&&i(),a(e),t._currentPanMovingGoal="viewMoving"):(r(e),t._currentPanMovingGoal="buttonInteraction")})),n.addEventListener("panend",(function(e){t.keyboardShortcuts.shouldMoveView()?o():i(),t._currentPanMovingGoal=null})),this.pixiContainer.addChild(n)}},{key:"getPixiContainer",value:function(){return this.pixiContainer}},{key:"_renderButton",value:function(e,t,n,r,i,a){t.clear(),e?(t.beginFill(16777215),t.lineStyle(1,6842600,1),t.fill.alpha=.9,0===i?t.drawRect(n[0],n[1],r,r):1===i&&t.drawCircle(n[0]+r/2,n[1]+r/2,r/2),t.endFill(),t.hitArea=new ly.Rectangle(n[0]-a,n[1]-a,r+2*a,r+2*a)):t.hitArea=new ly.Rectangle(0,0,0,0)}},{key:"render",value:function(){for(var e="touch"===this._screenType?{bigButtonSize:14,smallButtonSize:12,buttonPadding:5,hitAreaPadding:12}:{bigButtonSize:10,smallButtonSize:8,buttonPadding:5,hitAreaPadding:5},t=e.bigButtonSize,n=e.smallButtonSize,r=e.buttonPadding,a=e.hitAreaPadding,o=this.shouldDisplayHandles(),s=this.instancesSelection.getSelectedInstances(),l=0,c=0,u=0,d=0,p=!1,f=0;f<s.length;f++){if(this.selectedRectangles.length===f){var h=new ly.Graphics;h.hitArea=new ly.Rectangle(0,0,0,0),this.selectedRectangles.push(h),this.rectanglesContainer.addChild(h)}var g=s[f],m=this.instanceMeasurer.getInstanceAABB(g,new gy),x=Zy(this.toCanvasCoordinates,m);this.selectedRectangles[f].clear();var v=this.getFillColor(g.isLocked()),b=v.color,C=v.alpha;this.selectedRectangles[f].beginFill(b,C),this.selectedRectangles[f].lineStyle(1,b,1),this.selectedRectangles[f].fill.alpha=.3,this.selectedRectangles[f].alpha=.8,this.selectedRectangles[f].drawRect(x.left,x.top,x.width(),x.height()),this.selectedRectangles[f].endFill(),g.isLocked()||(p?(m.left<l&&(l=m.left),m.top<c&&(c=m.top),m.left+m.width()>u&&(u=m.left+m.width()),m.top+m.height()>d&&(d=m.top+m.height())):(l=m.left,c=m.top,u=m.left+m.width(),d=m.top+m.height(),p=!0))}for(;this.selectedRectangles.length>s.length;)this.rectanglesContainer.removeChild(this.selectedRectangles.pop());var j,y=0!==s.filter((function(e){return!e.isLocked()})).length&&o,Z=(0,i.Z)(Ty);try{for(Z.s();!(j=Z.n()).done;){var k=j.value,w=this.resizeButtons[k],T=Sy[k],S=Py(k)&&Iy(k)?t:n,P=r+S/2,I=this.toCanvasCoordinates(l+T[0]*(u-l),c+T[1]*(d-c));I[0]+=-S/2+P*Math.sign(T[0]-.5),I[1]+=-S/2+P*Math.sign(T[1]-.5),this._renderButton(y,w,I,S,0,a)}}catch(M){Z.e(M)}finally{Z.f()}var E=this.toCanvasCoordinates(l+(u-l)/2,c);E[0]-=n/2,E[1]-=8*r,this._renderButton(y,this.rotateButton,E,n,1,a)}}]),e}(),Ay=function(){function e(t){var n=t.instanceMeasurer,r=t.toCanvasCoordinates,i=t.isInstanceOf3DObject;(0,ze.Z)(this,e),this.instanceMeasurer=n,this.toCanvasCoordinates=r,this.isInstanceOf3DObject=i,this.highlightedInstance=null,this.isHighlightedInstanceOf3DObject=!1,this.highlightRectangle=new ly.Graphics,this.highlightRectangle.hitArea=new ly.Rectangle(0,0,0,0),this.tooltipBackground=new ly.Graphics,this.tooltipText=new ly.Text("",{fontSize:15,fill:16777215,align:"center"}),this.highlightRectangle.addChild(this.tooltipBackground),this.highlightRectangle.addChild(this.tooltipText)}return(0,We.Z)(e,[{key:"setInstance",value:function(e){this.isHighlightedInstanceOf3DObject=!!e&&this.isInstanceOf3DObject(e),this.highlightedInstance=e}},{key:"getInstance",value:function(){return this.highlightedInstance}},{key:"getPixiObject",value:function(){return this.highlightRectangle}},{key:"render",value:function(){var e=this.highlightedInstance;if(null!==e){var t=Zy(this.toCanvasCoordinates,this.instanceMeasurer.getInstanceAABB(e,new gy));this.highlightRectangle.visible=!0,this.highlightRectangle.clear(),this.highlightRectangle.beginFill(15658751),this.highlightRectangle.fill.alpha=.1,this.highlightRectangle.alpha=.8,this.highlightRectangle.lineStyle(1,0,1),this.highlightRectangle.drawRect(t.left,t.top,t.width(),t.height()),this.highlightRectangle.endFill();var n=e.getObjectName()+"\nX: "+Math.round(100*e.getX())/100+"  Y: "+Math.round(100*e.getY())/100+(this.isHighlightedInstanceOf3DObject?"  Z: "+Math.round(100*e.getZ())/100:"")+"\nLayer: "+(e.getLayer()||"Base layer")+(this.isHighlightedInstanceOf3DObject?"":"\nZ order: "+e.getZOrder())+"\n";this.tooltipText.text=n,this.tooltipText.x=Math.round(t.left-this.tooltipText.width/2+t.width()/2),this.tooltipText.y=Math.round(t.top-this.tooltipText.height);this.tooltipBackground.clear(),this.tooltipBackground.beginFill(0,.8),this.tooltipBackground.drawRoundedRect(this.tooltipText.x-5,this.tooltipText.y-5,this.tooltipText.width+10,this.tooltipText.height-5,4),this.tooltipBackground.endFill()}else this.highlightRectangle.visible=!1}}]),e}(),Oy=n.g.gd,Ry=function(){function e(t){var n=this,r=t.instances,i=t.instanceMeasurer,a=t.toSceneCoordinates;(0,ze.Z)(this,e),this.startSelectionRectangle=function(e,t){n.selectionRectangleStart={x:e,y:t},n.selectionRectangleEnd={x:e,y:t}},this.updateSelectionRectangle=function(e,t){n.selectionRectangleStart||(n.selectionRectangleStart={x:e,y:t}),n.selectionRectangleEnd={x:e,y:t}},this.endSelectionRectangle=function(){if(!n.selectionRectangleStart||!n.selectionRectangleEnd)return[];if(n._instancesInSelectionRectangle.length=0,n.selectionRectangleStart.x>n.selectionRectangleEnd.x){var e=n.selectionRectangleStart.x;n.selectionRectangleStart.x=n.selectionRectangleEnd.x,n.selectionRectangleEnd.x=e}if(n.selectionRectangleStart.y>n.selectionRectangleEnd.y){var t=n.selectionRectangleStart.y;n.selectionRectangleStart.y=n.selectionRectangleEnd.y,n.selectionRectangleEnd.y=t}return n.instances.iterateOverInstances(n.selector),n.selectionRectangleStart=null,n._instancesInSelectionRectangle},this.instances=r,this.instanceMeasurer=i,this.toSceneCoordinates=a,this.pixiRectangle=new ly.Graphics,this.pixiRectangle.hitArea=new ly.Rectangle(0,0,0,0),this.selectionRectangleStart=null,this.selectionRectangleEnd=null,this._instancesInSelectionRectangle=[],this._temporaryAABB=new gy,this.selector=new Oy.InitialInstanceJSFunctor,this.selector.invoke=function(e){var t=Oy.wrapPointer(e,Oy.InitialInstance),r=n.instanceMeasurer.getInstanceAABB(t,n._temporaryAABB),i=n.selectionRectangleEnd,o=n.selectionRectangleStart;if(o&&i){var s=a(o.x,o.y),l=a(i.x,i.y);s[0]<=r.left&&r.right<=l[0]&&s[1]<=r.top&&r.bottom<=l[1]&&n._instancesInSelectionRectangle.push(t)}}}return(0,We.Z)(e,[{key:"hasStartedSelectionRectangle",value:function(){return this.selectionRectangleStart}},{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){if(this.selectionRectangleStart&&this.selectionRectangleEnd){var e=this.selectionRectangleStart.x,t=this.selectionRectangleStart.y,n=this.selectionRectangleEnd.x,r=this.selectionRectangleEnd.y;this.pixiRectangle.visible=!0,this.pixiRectangle.clear(),this.pixiRectangle.beginFill(6842600),this.pixiRectangle.lineStyle(1,6842600,1),this.pixiRectangle.fill.alpha=.1,this.pixiRectangle.alpha=.8,this.pixiRectangle.drawRect(Math.min(e,n),Math.min(t,r),Math.abs(n-e),Math.abs(r-t)),this.pixiRectangle.endFill()}else this.pixiRectangle.visible=!1}},{key:"delete",value:function(){this.selector.delete()}}]),e}(),Fy=function(){function e(t){(0,ze.Z)(this,e),this._instanceAngles={},this._instancePositions={},this._instanceAABBs={},this.totalDeltaX=0,this.totalDeltaY=0,this._fixedPointIsUpToDate=!1,this._fixedPoint=[0,0],this._instanceMeasurer=t}return(0,We.Z)(e,[{key:"_getNewAngle",value:function(e,t){var n=180*Math.atan2(this.totalDeltaY,this.totalDeltaX)/Math.PI+90+t;return e?15*Math.round(n/15):n}},{key:"_getOrCreateInstanceAABB",value:function(e){var t=this._instanceAABBs[e.ptr];return t||(this._instanceAABBs[e.ptr]=this._instanceMeasurer.getInstanceAABB(e,new gy))}},{key:"_getOrCreateInstanceOriginPosition",value:function(e){var t=this._instancePositions[e.ptr];return t||(this._instancePositions[e.ptr]={x:e.getX(),y:e.getY()})}},{key:"_getOrCreateInstanceAngle",value:function(e){var t=this._instanceAngles[e.ptr];return void 0!==t?t:this._instanceAngles[e.ptr]=e.getAngle()}},{key:"rotateBy",value:function(e,t,n,r){var i=e.filter((function(e){return!e.isLocked()}));if(!this._fixedPointIsUpToDate){this._fixedPointIsUpToDate=!0;var a=new gy;a.setRectangle(this._getOrCreateInstanceAABB(i[0]));for(var o=1;o<i.length;o++)a.union(this._getOrCreateInstanceAABB(i[o]));this._fixedPoint[0]=a.centerX(),this._fixedPoint[1]=a.centerY(),this.totalDeltaY-=a.height()/2}this.totalDeltaX+=t,this.totalDeltaY+=n;for(var s=0;s<i.length;s++){var l=i[s],c=this._getOrCreateInstanceAABB(l),u=this._getOrCreateInstanceAngle(l),d=this._getOrCreateInstanceOriginPosition(l),p=this._getNewAngle(r,u),f=Math.round((p%360+360)%360);l.setAngle(f);var h=(p-u)*Math.PI/180,g=Math.cos(-h),m=Math.sin(-h),x=c.centerX()-this._fixedPoint[0],v=c.centerY()-this._fixedPoint[1],b=Math.round(this._fixedPoint[0]+(d.x-c.centerX())+g*x+m*v),C=Math.round(this._fixedPoint[1]+(d.y-c.centerY())-m*x+g*v);l.setX(b),l.setY(C)}}},{key:"endRotate",value:function(){this._instanceAngles={},this._instancePositions={},this._instanceAABBs={},this.totalDeltaX=0,this.totalDeltaY=0,this._fixedPointIsUpToDate=!1}}]),e}(),Dy=function(){function e(t){var n=t.instanceMeasurer,r=t.instancesEditorSettings;(0,ze.Z)(this,e),this._initialSelectionAABB=null,this._startX=0,this._startY=0,this.instanceMeasurer=n,this.instancesEditorSettings=r,this.instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0,this._temporaryPoint=[0,0]}return(0,We.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"_getMoveDeltaX",value:function(e,t,n){return n&&Math.abs(e)<Math.abs(t)?0:e}},{key:"_getMoveDeltaY",value:function(e,t,n){return n&&Math.abs(t)<Math.abs(e)?0:t}},{key:"_getOrCreateSelectionAABB",value:function(e){if(this._initialSelectionAABB)return this._initialSelectionAABB;if(!e.length)return null;var t=new gy;this.instanceMeasurer.getInstanceAABB(e[0],t);for(var n=new gy,r=1;r<e.length;r++)this.instanceMeasurer.getInstanceAABB(e[r],n),t.union(n);return this._initialSelectionAABB=t,t}},{key:"startMove",value:function(e,t){this._startX=e,this._startY=t}},{key:"moveBy",value:function(e,t,n,r,i){this.totalDeltaX+=t,this.totalDeltaY+=n;var a=e.filter((function(e){return!e.isLocked()})),o=this._getOrCreateSelectionAABB(a);if(o){var s=this._startX<o.centerX(),l=this._startY<o.centerY(),c=s?o.left:o.right,u=l?o.top:o.bottom,d=this._temporaryPoint;d[0]=c+this.totalDeltaX,d[1]=u+this.totalDeltaY,ky(d,this.instancesEditorSettings,i);for(var p=d[0]-c,f=d[1]-u,h=0;h<a.length;h++){var g=a[h],m=this.instancePositions[g.ptr];m||(m=this.instancePositions[g.ptr]={x:g.getX(),y:g.getY()});var x=Math.round(m.x+this._getMoveDeltaX(p,f,r)),v=Math.round(m.y+this._getMoveDeltaY(p,f,r));g.setX(x),g.setY(v)}}}},{key:"endMove",value:function(){this._initialSelectionAABB=null,this.instancePositions={},this.totalDeltaX=0,this.totalDeltaY=0}},{key:"snapSelection",value:function(e){this.endMove(),this.startMove(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),this.moveBy(e,0,0,!1,!1),this.endMove()}},{key:"isMoving",value:function(){return!!this._initialSelectionAABB}}]),e}(),Ny=function(){function e(t){var n=t.viewPosition,r=t.instancesEditorSettings;(0,ze.Z)(this,e),this.pixiGrid=new ly.Graphics,this.viewPosition=n,this.instancesEditorSettings=r,this.pixiGrid.hitArea=new ly.Rectangle(0,0,0,0)}return(0,We.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"getPixiObject",value:function(){return this.pixiGrid}},{key:"render",value:function(){var e=this.instancesEditorSettings;if(e.grid){var t=e.gridColor,n=e.gridAlpha;this.pixiGrid.visible=!0,this.pixiGrid.clear(),this.pixiGrid.beginFill(t),this.pixiGrid.lineStyle(1,t,1),this.pixiGrid.alpha=n;var r=this.viewPosition.toSceneCoordinates(0,0),i=this.viewPosition.toSceneCoordinates(this.viewPosition.getWidth(),this.viewPosition.getHeight()),a=(e.gridOffsetX%e.gridWidth+e.gridWidth)%e.gridWidth,o=(e.gridOffsetY%e.gridHeight+e.gridHeight)%e.gridHeight,s=Math.floor((r[0]-a)/e.gridWidth)*e.gridWidth+a,l=Math.floor((r[1]-o)/e.gridHeight)*e.gridHeight+o,c=Math.ceil((i[0]-a)/e.gridWidth)*e.gridWidth+a,u=Math.ceil((i[1]-o)/e.gridHeight)*e.gridHeight+o;if("isometric"===e.gridType){for(var d=Math.round((c-s)/e.gridWidth),p=Math.round((u-l)/e.gridHeight),f=d+p,h=0;h<f;++h){var g=void 0,m=void 0;h<d?(g=s+e.gridWidth/2+h*e.gridWidth,m=l):(g=c,m=l+e.gridHeight/2+(h-d)*e.gridHeight);var x=void 0,v=void 0;h<p?(x=s,v=l+e.gridHeight/2+h*e.gridHeight):(x=s+e.gridWidth/2+(h-p)*e.gridWidth,v=u);var b=this.viewPosition.toCanvasCoordinates(g,m),C=this.viewPosition.toCanvasCoordinates(x,v);this.pixiGrid.moveTo(b[0],b[1]),this.pixiGrid.lineTo(C[0],C[1])}for(var j=0;j<f;++j){var y=void 0,Z=void 0;j<p?(y=s,Z=l+e.gridHeight/2+(p-1-j)*e.gridHeight):(y=s+e.gridWidth/2+(j-p)*e.gridWidth,Z=l);var k=void 0,w=void 0;j<d?(k=s+e.gridWidth/2+j*e.gridWidth,w=u):(k=c,w=l+e.gridHeight/2+(f-1-j)*e.gridHeight);var T=this.viewPosition.toCanvasCoordinates(y,Z),S=this.viewPosition.toCanvasCoordinates(k,w);this.pixiGrid.moveTo(T[0],T[1]),this.pixiGrid.lineTo(S[0],S[1])}}else{for(var P=s;P<c;P+=e.gridWidth){var I=this.viewPosition.toCanvasCoordinates(P,l),E=this.viewPosition.toCanvasCoordinates(P,u);this.pixiGrid.moveTo(I[0],I[1]),this.pixiGrid.lineTo(E[0],E[1])}for(var M=l;M<u;M+=e.gridHeight){var L=this.viewPosition.toCanvasCoordinates(s,M),A=this.viewPosition.toCanvasCoordinates(c,M);this.pixiGrid.moveTo(L[0],L[1]),this.pixiGrid.lineTo(A[0],A[1])}}this.pixiGrid.endFill()}else this.pixiGrid.visible=!1}}]),e}(),_y=function(){function e(t){var n=t.project,r=t.layout,i=t.eventsBasedObjectVariant,a=t.toCanvasCoordinates;(0,ze.Z)(this,e),this.pixiRectangle=new ly.Graphics,this.windowRectangle=new gy,this.project=n,this.layout=r,this.eventsBasedObjectVariant=i,this.toCanvasCoordinates=a,this.pixiRectangle.hitArea=new ly.Rectangle(0,0,0,0)}return(0,We.Z)(e,[{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){var e=this.layout,t=this.eventsBasedObjectVariant;this.windowRectangle.set(t?{left:t.getAreaMinX(),top:t.getAreaMinY(),right:t.getAreaMaxX(),bottom:t.getAreaMaxY()}:{left:0,top:0,right:this.project.getGameResolutionWidth(),bottom:this.project.getGameResolutionHeight()});var n=Zy(this.toCanvasCoordinates,this.windowRectangle);if(this.pixiRectangle.clear(),this.pixiRectangle.beginFill(0),e){var r=e.getBackgroundColorRed(),i=e.getBackgroundColorBlue(),a=e.getBackgroundColorGreen(),o=Math.max(r,i,a)<128;this.pixiRectangle.lineStyle(1,(0,Xn.Y9)(((o?255:0)+r)/2,((o?255:0)+i)/2,((o?255:0)+a)/2),1)}else this.pixiRectangle.lineStyle(1,8947848,1);if(this.pixiRectangle.alpha=1,this.pixiRectangle.fill.alpha=0,this.pixiRectangle.drawRect(n.left,n.top,n.width(),n.height()),t){var s=this.toCanvasCoordinates(0,0);this.pixiRectangle.drawRect(s[0]-8,s[1]-1,16,2),this.pixiRectangle.drawRect(s[0]-1,s[1]-8,2,16)}this.pixiRectangle.endFill()}}]),e}(),By=function(){function e(t){var n=t.project,r=t.viewPosition,i=t.instancesEditorSettings;(0,ze.Z)(this,e),this.pixiRectangle=new ly.Graphics,this.windowRectangle=new gy,this.project=n,this.viewPosition=r,this.instancesEditorSettings=i,this.pixiRectangle.hitArea=new ly.Rectangle(0,0,0,0)}return(0,We.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this.instancesEditorSettings=e}},{key:"getPixiObject",value:function(){return this.pixiRectangle}},{key:"render",value:function(){if(this.instancesEditorSettings.windowMask){this.windowRectangle.setThroughCenter({centerX:this.viewPosition.getViewX(),centerY:this.viewPosition.getViewY(),width:this.project.getGameResolutionWidth(),height:this.project.getGameResolutionHeight()});var e=Zy(this.viewPosition.toCanvasCoordinates,this.windowRectangle);this.pixiRectangle.visible=!0,this.pixiRectangle.clear(),this.pixiRectangle.beginFill(0),this.pixiRectangle.lineStyle(1,0,1),this.pixiRectangle.alpha=1,this.pixiRectangle.fill.alpha=0,this.pixiRectangle.drawRect(e.left,e.top,e.width(),e.height()),this.pixiRectangle.endFill()}else this.pixiRectangle.visible=!1}}]),e}(),Uy=function(){function e(t){var n=t.idleFps,r=t.maxFps;(0,ze.Z)(this,e),this._maxFps=r,this._idleFps=n,this._lastFrameTime=Date.now(),this._interval=1e3/n,this._forceUpdate=!1}return(0,We.Z)(e,[{key:"notifyInteractionHappened",value:function(){this._interval=1e3/this._maxFps,this._lastInteractionTime=Date.now()}},{key:"shouldUpdate",value:function(){var e=Date.now(),t=e-this._lastFrameTime;return e-this._lastInteractionTime>1e3&&(this._interval=1e3/this._idleFps),!!(t>this._interval||this._forceUpdate)&&(this._lastFrameTime=e-t%this._interval,this._forceUpdate=!1,!0)}},{key:"forceNextUpdate",value:function(){this._forceUpdate=!0}}]),e}(),Vy=function(){var e=ly.Ticker&&ly.Ticker.shared;e&&e.stop()},Hy=function(){function e(t){var n=t.getLastCursorSceneCoordinates,r=t.width,i=t.height;(0,ze.Z)(this,e),this._getLastCursorSceneCoordinates=n,this._statusBarContainer=new ly.Container,this._statusBarContainer.alpha=.8,this._statusBarContainer.hitArea=new ly.Rectangle(0,0,0,0),this._statusBarBackground=new ly.Graphics,this._statusBarText=new ly.Text("",{fontSize:15,fill:16777215,align:"left"}),this._statusBarContainer.addChild(this._statusBarBackground),this._statusBarContainer.addChild(this._statusBarText),this.resize(r,i)}return(0,We.Z)(e,[{key:"resize",value:function(e,t){this._width=e,this._height=t}},{key:"getPixiObject",value:function(){return this._statusBarContainer}},{key:"render",value:function(){var e=Math.round(this._width-15-5-this._statusBarText.width),t=Math.round(this._height-5-15-this._statusBarText.height),n=this._getLastCursorSceneCoordinates();if(n){var r=(0,s.Z)(n,2),i=r[0],a=r[1];this._statusBarText.text="".concat(i.toFixed(0),";").concat(a.toFixed(0)),this._statusBarText.position.x=e,this._statusBarText.position.y=t;var o=this._width-15-10-this._statusBarText.width,l=this._height-15-10-this._statusBarText.height,c=this._statusBarText.width+10,u=this._statusBarText.height+10;this._statusBarBackground.clear(),this._statusBarBackground.beginFill(0,.8),this._statusBarBackground.drawRoundedRect(o,l,c,u,6),this._statusBarBackground.endFill()}}}]),e}(),zy=function(){function e(){(0,ze.Z)(this,e),this._profilerBarContainer=new ly.Container,this._profilerBarContainer.alpha=.8,this._profilerBarContainer.hitArea=new ly.Rectangle(0,0,0,0),this._profilerBarBackground=new ly.Graphics,this._profilerBarText=new ly.Text("",{fontSize:12,fill:16777215,align:"left"}),this._profilerBarContainer.addChild(this._profilerBarBackground),this._profilerBarContainer.addChild(this._profilerBarText)}return(0,We.Z)(e,[{key:"getPixiObject",value:function(){return this._profilerBarContainer}},{key:"render",value:function(e){var t=e.basicProfilingCounters;if(e.display){this._profilerBarContainer.visible=!0;this._profilerBarText.text=function(e){var t=[];for(var n in t.push("Instances update count: ".concat(e.totalInstancesUpdateCount)),t.push("Instances update time: ".concat(e.totalInstancesUpdateTime.toFixed(2),"ms")),t.push("Pixi rendering time: ".concat(e.totalPixiRenderingTime.toFixed(2),"ms")),t.push("Three rendering time: ".concat(e.totalThreeRenderingTime.toFixed(2),"ms")),t.push("Pixi UI rendering time: ".concat(e.totalPixiUiRenderingTime.toFixed(2),"ms")),t.push(" "),e.instanceCounters){var r=e.instanceCounters[n];t.push("".concat(n,": ").concat(r.updateCount," updates, ").concat(r.totalUpdateTime.toFixed(2),"ms"))}return t.join("\n")}(t),this._profilerBarText.position.x=20,this._profilerBarText.position.y=20;var n=this._profilerBarText.width+10,r=this._profilerBarText.height+10;this._profilerBarBackground.clear(),this._profilerBarBackground.beginFill(0,.8),this._profilerBarBackground.drawRoundedRect(15,15,n,r,6),this._profilerBarBackground.endFill()}else this._profilerBarContainer.visible=!1}}]),e}(),Wy=function(){function e(t){var n=t.canvas,r=t.shouldMoveView;(0,ze.Z)(this,e),this.canvas=n,this.shouldMoveView=r}return(0,We.Z)(e,[{key:"render",value:function(){if(this.shouldMoveView())return this.canvas.style.cursor="grab",void("grab"!==this.canvas.style.cursor&&(this.canvas.style.cursor="-webkit-grab"));this.canvas.style.cursor="default"}}]),e}(),Gy=n.g.gd,Yy=function(e){var t=e.instancesContainer,n=e.copyReferential,r=e.serializedInstances,i=e.addInstancesInTheForeground,a=void 0!==i&&i,o=e.doesObjectExistInContext,s=new Gy.HighestZOrderFinder;s.reset(),t.iterateOverInstances(s);var l=s.getHighestZOrder()+1;s.delete();var c=null,u=r.map((function(e){var r=new Gy.InitialInstance;if((0,Ct.qx)(r,e),!o(r.getObjectName()))return null;r.setX(r.getX()-n[0]),r.setY(r.getY()-n[1]),a&&(null===c||c>r.getZOrder())&&(c=r.getZOrder());var i=t.insertInitialInstance(r).resetPersistentUuid();return r.delete(),i})).filter(Boolean);return a&&null!==c&&u.forEach((function(e){e.setZOrder(e.getZOrder()-(c||0)+l)})),u},qy=function(){function e(t){var n=this,r=t.instances,a=t.instancesEditorSettings;(0,ze.Z)(this,e),this._zOrderFinder=new Gy.HighestZOrderFinder,this.addSerializedInstances=function(e){var t,r=e.position,a=e.copyReferential,o=e.serializedInstances,s=(e.addInstancesInTheForeground,e.doesObjectExistInContext),l=Yy({instancesContainer:n._instances,copyReferential:a,serializedInstances:o,addInstancesInTheForeground:!1,doesObjectExistInContext:s}),c=(0,i.Z)(l);try{for(c.s();!(t=c.n()).done;){var u=t.value;u.setX(u.getX()+r[0]),u.setY(u.getY()+r[1])}}catch(d){c.e(d)}finally{c.f()}return l},this.addInstances=function(e,t,r){n._zOrderFinder.reset(),n._instances.iterateOverInstances(n._zOrderFinder);var i=n._zOrderFinder.getHighestZOrder()+1,a=ky(e,n._instancesEditorSettings);return t.map((function(e){var t=n._instances.insertNewInitialInstance();return t.setObjectName(e),t.setX(a[0]),t.setY(a[1]),t.setLayer(r),t.setZOrder(i),t}))},this.createOrUpdateTemporaryInstancesFromObjectNames=function(e,t,r){t.length&&(n._temporaryInstances.length?n.updateTemporaryInstancePositions(e):n._createTemporaryInstancesFromObjectNames(e,t,r))},this._createTemporaryInstancesFromObjectNames=function(e,t,r){n.deleteTemporaryInstances(),n._zOrderFinder.reset(),n._instances.iterateOverInstances(n._zOrderFinder);var i=n._zOrderFinder.getHighestZOrder()+1,a=ky(e,n._instancesEditorSettings);n._temporaryInstances=t.map((function(e){var t=n._instances.insertNewInitialInstance();return t.setObjectName(e),t.setX(a[0]),t.setY(a[1]),t.setLayer(r),t.setZOrder(i),t}))},this.updateTemporaryInstancePositions=function(e){var t=ky(e,n._instancesEditorSettings);return n._temporaryInstances.forEach((function(e){e.setX(t[0]),e.setY(t[1])})),n._temporaryInstances},this._instances=r,this._instancesEditorSettings=a,this._temporaryInstances=[]}return(0,We.Z)(e,[{key:"setInstancesEditorSettings",value:function(e){this._instancesEditorSettings=e}},{key:"deleteTemporaryInstances",value:function(){var e=this;this._temporaryInstances.forEach((function(t){e._instances.removeInstance(t)})),this._temporaryInstances=[]}},{key:"commitTemporaryInstances",value:function(){this._temporaryInstances=[]}},{key:"unmount",value:function(){this._zOrderFinder.delete()}}]),e}(),Jy=(0,We.Z)((function e(t){var n=this,r=t.canvas,i=t.onLongTouch;(0,ze.Z)(this,e),this._lastTouchX=0,this._lastTouchY=0,this._onTouchStart=function(e){if(1===e.touches.length){var t=e.touches[0];n._lastTouchX=t.clientX,n._lastTouchY=t.clientY,n._clear(),n._longTouchTimeoutID=setTimeout((function(){n._onLongTouch&&n._onLongTouch({clientX:n._lastTouchX,clientY:n._lastTouchY})}),600)}},this._onTouchMove=function(e){if(1===e.touches.length){var t=e.touches[0];(Math.abs(t.clientX-n._lastTouchX)>10||Math.abs(t.clientY-n._lastTouchY)>10)&&n._clear()}else n._clear()},this._clear=function(){clearTimeout(n._longTouchTimeoutID)},this.unmount=function(){n._canvas.removeEventListener("touchstart",n._onTouchStart),n._canvas.removeEventListener("touchmove",n._onTouchMove),n._canvas.removeEventListener("touchend",n._clear)},this._canvas=r,this._onLongTouch=i,r.addEventListener("touchstart",this._onTouchStart),r.addEventListener("touchmove",this._onTouchMove),r.addEventListener("touchend",this._clear)})),Xy=function(){function e(t){var n=t.width,r=t.height,i=t.layout;(0,ze.Z)(this,e),this._checkeredBackground=new ly.TilingSprite(new ly.Texture(ly.Texture.from("res/transparentback.png")),n,r),this._checkeredBackground.tint=4473924,this._checkeredBackground.visible=!i}return(0,We.Z)(e,[{key:"resize",value:function(e,t){this._checkeredBackground.width=e,this._checkeredBackground.height=t}},{key:"getPixiObject",value:function(){return this._checkeredBackground}},{key:"render",value:function(){}}]),e}(),Ky=function(e,t,n){var r=Math.abs(e),i=Math.abs(t),a=Math.abs(e-t);return e===t||(0==e||0==t||r+i<Number.EPSILON?a<n*Number.EPSILON:a/Math.min(r+i,Number.MAX_VALUE)<n)},Qy=function(){function e(){(0,ze.Z)(this,e),this.matrix=new Float32Array([1,0,0,1,0,0])}return(0,We.Z)(e,[{key:"setToIdentity",value:function(){var e=this.matrix;e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0}},{key:"isIdentity",value:function(){var e=this.matrix;return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]}},{key:"equals",value:function(e){var t=this.matrix,n=e.matrix;return this===e||t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]}},{key:"nearlyEquals",value:function(e,t){var n=this.matrix,r=e.matrix;return this===e||Ky(n[0],r[0],t)&&Ky(n[1],r[1],t)&&Ky(n[2],r[2],t)&&Ky(n[3],r[3],t)&&Ky(n[4],r[4],t)&&Ky(n[5],r[5],t)}},{key:"copyFrom",value:function(e){var t=this.matrix,n=e.matrix;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],this}},{key:"setToTranslation",value:function(e,t){var n=this.matrix;n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=e,n[5]=t}},{key:"translate",value:function(e,t){var n=this.matrix;n[4]=n[0]*e+n[2]*t+n[4],n[5]=n[1]*e+n[3]*t+n[5]}},{key:"setToScale",value:function(e,t){var n=this.matrix;n[0]=e,n[1]=0,n[2]=0,n[3]=t,n[4]=0,n[5]=0}},{key:"scale",value:function(e,t){var n=this.matrix;n[0]*=e,n[1]*=e,n[2]*=t,n[3]*=t}},{key:"setToRotation",value:function(e){var t=this.matrix,n=Math.cos(e),r=Math.sin(e);-1!==n&&1!==n||(r=0),-1!==r&&1!==r||(n=0),t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0}},{key:"rotate",value:function(e){var t=this.matrix,n=Math.cos(e),r=Math.sin(e);-1!==n&&1!==n||(r=0),-1!==r&&1!==r||(n=0);var i=t[0],a=t[1],o=t[2],s=t[3];t[0]=i*n+o*r,t[1]=a*n+s*r,t[2]=i*-r+o*n,t[3]=a*-r+s*n}},{key:"setToRotationAround",value:function(e,t,n){var r=this.matrix,i=Math.cos(e),a=Math.sin(e);-1!==i&&1!==i||(a=0),-1!==a&&1!==a||(i=0),r[0]=i,r[1]=a,r[2]=-a,r[3]=i,r[4]=t-t*i+n*a,r[5]=n-t*a+n*i}},{key:"rotateAround",value:function(e,t,n){this.translate(t,n),this.rotate(e),this.translate(-t,-n)}},{key:"setToFlipX",value:function(e){var t=this.matrix;t[0]=-1,t[1]=0,t[2]=0,t[3]=1,t[4]=2*e,t[5]=0}},{key:"flipX",value:function(e){this.translate(e,0),this.scale(-1,1),this.translate(-e,0)}},{key:"setToFlipY",value:function(e){var t=this.matrix;t[0]=-1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=2*e}},{key:"flipY",value:function(e){this.translate(0,e),this.scale(1,-1),this.translate(0,-e)}},{key:"concatenate",value:function(e){var t=this.matrix,n=e.matrix,r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=n[0],u=n[1],d=n[2],p=n[3],f=n[4],h=n[5];t[0]=c*r+u*a,t[1]=c*i+u*o,t[2]=d*r+p*a,t[3]=d*i+p*o,t[4]=f*r+h*a+s,t[5]=f*i+h*o+l}},{key:"preConcatenate",value:function(e){var t=this.matrix,n=e.matrix,r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=n[0],u=n[1],d=n[2],p=n[3],f=n[4],h=n[5];t[0]=r*c+i*d,t[1]=r*u+i*p,t[2]=a*c+o*d,t[3]=a*u+o*p,t[4]=s*c+l*d+f,t[5]=s*u+l*p+h}},{key:"transform",value:function(e,t){var n=this.matrix,r=n[0]*e[0]+n[2]*e[1]+n[4],i=n[1]*e[0]+n[3]*e[1]+n[5];t[0]=r,t[1]=i}},{key:"invert",value:function(){var e=this.matrix,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=t*i-n*r;return e[0]=i/s,e[1]=-n/s,e[2]=-r/s,e[3]=t/s,e[4]=(r*o-i*a)/s,e[5]=-(t*o-n*a)/s,this}},{key:"toString",value:function(){var e=this.matrix;return"[[".concat(e[0]," ").concat(e[1],"] [").concat(e[2]," ").concat(e[3],"] [").concat(e[4]," ").concat(e[5],"]]")}}]),e}(),$y=n(61165),eZ=function(e,t,n,r){var i=1,a=1;if(e.hasCustomSize()){var o=t.getEditableTileMap();o?(i=e.getCustomWidth()/o.getWidth(),a=e.getCustomHeight()/o.getHeight()):console.error("Could not find the editable tile map for instance of object ".concat(e.getObjectName(),". Make sure the tile map object is correctly configured."))}var s=Math.abs(i),l=Math.abs(a);r.setToIdentity(),r.translate(e.getX(),e.getY());var c=e.getAngle()*Math.PI/180;return c&&r.rotateAround(c,t.getCenterX(),t.getCenterY()),r.scale(s,l),n.copyFrom(r),n.invert(),{scaleX:i,scaleY:a}},tZ=function(){function e(t){var n=t.instancesSelection,r=t.getCoordinatesToRender,i=t.project,a=t.globalObjectsContainer,o=t.objectsContainer,s=t.getTileMapTileSelection,l=t.getRendererOfInstance,c=t.viewPosition;(0,ze.Z)(this,e),this.project=i,this.globalObjectsContainer=a,this.objectsContainer=o,this.instancesSelection=n,this.getCoordinatesToRender=r,this.getTileMapTileSelection=s,this.getRendererOfInstance=l,this.viewPosition=c,this.preview=new ly.Container,this.cache=new Map,this.sceneToTileMapTransformation=new Qy,this.tileMapToSceneTransformation=new Qy}return(0,We.Z)(e,[{key:"getPixiObject",value:function(){return this.preview}},{key:"_getTextureInAtlas",value:function(e){var t=e.tileSet,n=e.x,r=e.y,i=t.atlasImage,a=t.tileSize;if(i){var o="".concat(i,"-").concat(a,"-").concat(n,"-").concat(r),s=this.cache.get(o);if(s)return s;var l=ty.Z.getPIXITexture(this.project,i),c=new ly.Rectangle(n*a,r*a,a,a);try{var u=new ly.Texture(l,c);this.cache.set(o,u)}catch(d){return console.error("Tile could not be extracted from atlas texture:",d),ty.Z.getInvalidPIXITexture()}}}},{key:"_getTilingSpriteForRectangle",value:function(e){var t=e.bottomRightCorner,n=e.topLeftCorner,r=e.texture,i=e.scaleX,a=e.scaleY,o=e.flipHorizontally,s=e.flipVertically,l=e.tileSize,c=e.angle,u=new ly.TilingSprite(r),d=[0,0];u.tileScale.x=(o?-1:1)*this.viewPosition.toCanvasScale(i),u.tileScale.y=(s?-1:1)*this.viewPosition.toCanvasScale(a),this.tileMapToSceneTransformation.transform([n.x*l,n.y*l],d);var p=this.viewPosition.toCanvasScale(l);return u.x=this.viewPosition.toCanvasScale(d[0]),u.y=this.viewPosition.toCanvasScale(d[1]),u.width=(t.x-n.x+1)*p*i,u.height=(t.y-n.y+1)*p*a,u.angle=c,u}},{key:"_getPreviewSprites",value:function(e){var t=this,n=e.instance,r=e.tileSet,i=e.isBadlyConfigured,a=e.tileMapTileSelection,o=this.getRendererOfInstance(n);if(!o||!o.getEditableTileMap)return console.error("Instance of ".concat(n.getObjectName()," seems to not be a RenderedSimpleTileMapInstance (method getEditableTileMap does not exist).")),null;var s=eZ(n,o,this.sceneToTileMapTransformation,this.tileMapToSceneTransformation);if(!s)return null;var c=s.scaleX,u=s.scaleY,d=this.getCoordinatesToRender();if(0===d.length)return null;var p=r.tileSize,f=(0,$y.TN)({tileMapTileSelection:a,coordinates:d,tileSize:p,sceneToTileMapTransformation:this.sceneToTileMapTransformation});if(0===f.length)return console.warn("Could't get coordinates to render in tile map grid."),null;var h=new ly.Container;return f.forEach((function(e){var o,s=e.bottomRightCorner,d=e.topLeftCorner,f=e.tileCoordinates;if(i)o=ty.Z.getInvalidPIXITexture();else if("rectangle"===a.kind&&f){if(!(o=t._getTextureInAtlas((0,l.Z)({tileSet:r},f))))return null}else"erase"===a.kind&&((o=ly.Texture.from("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAARSURBVHgBY7h58+Z/BhgAcQA/VAcVLiw46wAAAABJRU5ErkJggg==")).baseTexture.scaleMode=ly.SCALE_MODES.NEAREST);var g=t._getTilingSpriteForRectangle({bottomRightCorner:s,topLeftCorner:d,texture:o,scaleX:c,scaleY:u,flipHorizontally:a.flipHorizontally||!1,flipVertically:a.flipVertically||!1,tileSize:p,angle:n.getAngle()});h.addChild(g)})),h}},{key:"render",value:function(){this.preview.removeChildren(0);var e=this.getTileMapTileSelection();if(e){var t=this.instancesSelection.getSelectedInstances();if(1===t.length){var n=t[0],r=n.getObjectName(),i=(0,iu.Z)(this.globalObjectsContainer,this.objectsContainer,r);if(i&&"TileMap::SimpleTileMap"===i.getType()){var a=(0,$y.AD)(i),o=(0,$y.Jv)(a);if(o||"rectangle"===e.kind||"erase"===e.kind){var s=this._getPreviewSprites({instance:n,tileSet:a,tileMapTileSelection:e,isBadlyConfigured:o});s&&this.preview.addChild(s)}var l=this.viewPosition.toCanvasCoordinates(0,0);this.preview.position.x=l[0],this.preview.position.y=l[1]}}}}}]),e}(),nZ=tZ,rZ=n(67790),iZ=function(){function e(t){var n=this,r=t.viewPosition,i=t.getTileMapTileSelection,a=t.onClick,o=t.onPanMove,s=t.onInterceptPointerMove;(0,ze.Z)(this,e),this._shouldCancelClick=!1,this._isIntercepting=!1,this._touchingPointerIds=new Set,this._cancelUntilNoMoreTouches=!1,this.viewPosition=r,this.onClick=a,this.onPanMove=o,this.onInterceptPointerMove=s,this.getTileMapTileSelection=i,this.interceptingSprite=new ly.Sprite,cy(this.interceptingSprite),this.interceptingSprite.alpha=0,this.interceptingSprite.eventMode="static",this.pointerPathCoordinates=null,this.interceptingSprite.addEventListener("panmove",(function(e){return n.onPanMove(e.deltaX,e.deltaY,e.data.global.x,e.data.global.y)})),this.interceptingSprite.addEventListener("pointerdown",(function(e){if("touch"===e.pointerType){if(n._touchingPointerIds.add(e.pointerId),n._touchingPointerIds.size>=2)return n._cancelUntilNoMoreTouches=!0,void(n.pointerPathCoordinates=null)}else if("mouse"===e.pointerType&&0!==e.button)return;n._startClickInterception(e.originalEvent.globalX,e.originalEvent.globalY)})),this.interceptingSprite.addEventListener("pointerup",(function(e){if("touch"===e.pointerType)n._touchingPointerIds.delete(e.pointerId),0===n._touchingPointerIds.size&&(n._cancelUntilNoMoreTouches=!1);else if("mouse"===e.pointerType&&0!==e.button)return;n._endClickInterception()})),this.interceptingSprite.addEventListener("pointerleave",(function(e){"touch"===e.pointerType&&(n._touchingPointerIds.delete(e.pointerId),0===n._touchingPointerIds.size&&(n._cancelUntilNoMoreTouches=!1)),n._endClickInterception()})),this.interceptingSprite.addEventListener("pointermove",(function(e){n._interceptPointerMove(e.originalEvent.globalX,e.originalEvent.globalY)})),this.pixiContainer=new ly.Container,this.pixiContainer.addChild(this.interceptingSprite)}return(0,We.Z)(e,[{key:"_startClickInterception",value:function(e,t){this._shouldCancelClick=!1,this._isIntercepting=!0;var n=this.viewPosition.toSceneCoordinates(e,t);this.pointerPathCoordinates=[{x:n[0],y:n[1]}]}},{key:"_endClickInterception",value:function(){this._isIntercepting=!1,this.pointerPathCoordinates&&(this._shouldCancelClick?this._shouldCancelClick=!1:(this.onClick(this.pointerPathCoordinates),this.pointerPathCoordinates=null))}},{key:"_interceptPointerMove",value:function(e,t){if(!this._shouldCancelClick&&!this._cancelUntilNoMoreTouches){this.onInterceptPointerMove();var n=this.pointerPathCoordinates;if(n){var r=this.viewPosition.toSceneCoordinates(e,t);n[1]?n[1]={x:r[0],y:r[1]}:n.push({x:r[0],y:r[1]})}}}},{key:"getPixiObject",value:function(){return this.pixiContainer}},{key:"getPointerPathCoordinates",value:function(){return this.pointerPathCoordinates}},{key:"isIntercepting",value:function(){return this._isIntercepting}},{key:"cancelClickInterception",value:function(){this._shouldCancelClick=!0,this.pointerPathCoordinates&&(this.pointerPathCoordinates=null)}},{key:"render",value:function(){this.pixiContainer.removeChildren(0),this.getTileMapTileSelection()&&(this.pixiContainer.position.x=0,this.pixiContainer.position.y=0,this.interceptingSprite.width=this.viewPosition.getWidth(),this.interceptingSprite.height=this.viewPosition.getHeight(),this.pixiContainer.addChild(this.interceptingSprite))}}]),e}(),aZ=iZ,oZ=n(95016),sZ=n.g.gd,lZ="instances-editor-canvas",cZ={canvasArea:{flex:1,position:"absolute",overflow:"hidden"},dropCursor:{cursor:"copy"}},uZ=(0,Cd.L)(mx.eK),dZ=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).lastContextMenuX=0,e.lastContextMenuY=0,e.lastCursorX=null,e.lastCursorY=null,e.fpsLimiter=new Uy({maxFps:60,idleFps:10}),e.threeRenderer=null,e._unmounted=!1,e._renderingPaused=!1,e.hasCursorMovedSinceItIsDown=!1,e._showObjectInstancesIn3D=!1,e.state={renderingError:null},e.forceRemount=function(){e._mountEditorComponents(e.props)},e.resetInstanceRenderersFor=function(t){e.instancesRenderer&&e.instancesRenderer.resetInstanceRenderersFor(t)},e.zoomBy=function(t){e.setZoomFactor(e.getZoomFactor()*t)},e.getTileMapTileSelection=function(){return e.props.tileMapTileSelection},e.getSelectedInstancesObjectFillColor=function(t){return e.props.tileMapTileSelection?{color:4095,alpha:0}:{color:t?12343123:6842600,alpha:1}},e.shouldDisplayClickableHandles=function(){return!e.props.tileMapTileSelection},e.getZoomFactor=function(){return e.props.instancesEditorSettings.zoomFactor},e.setZoomFactor=function(t){e.props.instancesEditorSettings.zoomFactor=(0,ay.r9)(t),e.props.onInstancesEditorSettingsMutated(e.props.instancesEditorSettings)},e.addSerializedInstances=function(t){return e._instancesAdder.addSerializedInstances(t)},e.snapSelection=function(t){e.instancesMover.snapSelection(t)},e.addInstances=function(t,n,r){return e._instancesAdder.addInstances(t,n,r)},e._onMouseMove=function(t,n){e.lastCursorX=t,e.lastCursorY=n},e._onInterceptClick=function(t){var n=e.props,r=n.tileMapTileSelection,i=n.instancesSelection,a=n.globalObjectsContainer,o=n.objectsContainer;if(r){var s=i.getSelectedInstances();if(1===s.length){var c=s[0],u=(0,iu.Z)(a,o,c.getObjectName());if(u){var d=e.getRendererOfInstance(c);if("TileMap::SimpleTileMap"===u.getType()&&d&&d.getEditableTileMap){var p=d.getEditableTileMap();if(!p)return void console.error("Could not find the editable tile map for instance of object ".concat(c.getObjectName()));var f=new Qy,h=new Qy,g=eZ(c,d,f,h);if(!g)return;var m=g.scaleX,x=g.scaleY,v=(0,$y.AD)(u);if(!v.atlasImage)return void console.warn("Trying to paint on a tilemap without an atlas image.");if((0,$y.Jv)(v))return void console.warn("Trying to paint on a tilemap with a badly configured tileset.");var b=(0,$y.TN)({tileMapTileSelection:r,coordinates:t,tileSize:v.tileSize,sceneToTileMapTransformation:f}),C=!1;if("rectangle"===r.kind){C=p.isEmpty();var j=0,y=0;if(!p.getTileLayer(0))return;b.forEach((function(e){var t=e.bottomRightCorner,n=e.topLeftCorner,i=e.tileCoordinates;if(i){var a=(0,rZ.FZ)((0,l.Z)({columnCount:v.columnCount},i));if(p.getTileDefinition(a))for(var o=n.x;o<=t.x;o++)for(var s=n.y;s<=t.y;s++){var u=o+y,d=s+j,f=Math.max(0,d-(p.getDimensionY()-1)),h=Math.max(0,u-(p.getDimensionX()-1)),g=Math.abs(Math.min(0,d)),b=Math.abs(Math.min(0,u));(f>0||h>0||g>0||b>0)&&p.increaseDimensions(h,b,f,g);var C=u+b,Z=d+g;p.setTile(C,Z,0,a),p.flipTileOnX(C,Z,0,r.flipHorizontally),p.flipTileOnY(C,Z,0,r.flipVertically),j+=g,y+=b,c.setX(c.getX()-b*(v.tileSize*m)),c.setY(c.getY()-g*(v.tileSize*x)),c.hasCustomSize()&&(c.setCustomWidth(c.getCustomWidth()+v.tileSize*m*(h+b)),c.setCustomHeight(c.getCustomHeight()+v.tileSize*x*(f+g)))}}}))}else{if("erase"!==r.kind)return;for(var Z=b[0],k=Z.bottomRightCorner,w=Z.topLeftCorner,T=w.x;T<=k.x;T++)for(var S=w.y;S<=k.y;S++)p.removeTile(T,S,0);C=!0}if(C){var P=p.trimEmptyColumnsAndRowToFitLayer(0);if(P){var I=P.shiftedRows,E=P.shiftedColumns,M=P.poppedRows,L=P.poppedColumns;c.setX(c.getX()+E*(v.tileSize*m)),c.setY(c.getY()+I*(v.tileSize*x)),c.hasCustomSize()&&(c.setCustomWidth(c.getCustomWidth()-v.tileSize*m*(L+E)),c.setCustomHeight(c.getCustomHeight()-v.tileSize*x*(M+I)))}}d.updatePixiTileMap(),c.setRawStringProperty("tilemap",JSON.stringify(p.toJSObject())),e.props.onInstancesResized([c])}}}}},e.getRendererOfInstance=function(t){return e.instancesRenderer.getRendererOfInstance(t.getLayer(),t)},e._onDownBackground=function(t,n,r){e.lastCursorX=t,e.lastCursorY=n,e.pixiRenderer.view.focus();var i=e.keyboardShortcuts.shouldMoveView()||!!r&&r.button===ht.KR;i||e.selectionRectangle.startSelectionRectangle(t,n),e.keyboardShortcuts.shouldMultiSelect()||i||!e.props.instancesSelection.hasSelectedInstances()||(e.props.instancesSelection.clearSelection(),e.props.onInstancesSelected([]))},e._onPanMove=function(t,n,r,i){if(e.fpsLimiter.notifyInteractionHappened(),e.keyboardShortcuts.shouldMoveView()){var a=t/e.getZoomFactor(),o=n/e.getZoomFactor();e.scrollBy(-a,-o)}else e.selectionRectangle.hasStartedSelectionRectangle()&&e.selectionRectangle.updateSelectionRectangle(r,i)},e._getLayersLocks=function(){for(var t=e.props.layersContainer,n={},r=0;r<t.getLayersCount();r++){var i=t.getLayerAt(r);n[t.getLayerAt(r).getName()]=!i.getVisibility()||i.isLocked()}return n},e._onUpBackground=function(t,n,r){e.selectionRectangle.hasStartedSelectionRectangle()&&e._selectInstanceInsideSelectionRectangle()},e._onPanEnd=function(){e.selectionRectangle.hasStartedSelectionRectangle()&&e._selectInstanceInsideSelectionRectangle()},e._selectInstanceInsideSelectionRectangle=function(){var t=e.selectionRectangle.endSelectionRectangle();e.props.instancesSelection.selectInstances({instances:t,multiSelect:e.keyboardShortcuts.shouldMultiSelect(),layersLocks:e._getLayersLocks()}),t=e.props.instancesSelection.getSelectedInstances(),e.props.onInstancesSelected(t)},e._onInstanceClicked=function(t){e.fpsLimiter.notifyInteractionHappened(),e.pixiRenderer.view.focus()},e._onInstanceRightClicked=function(t){e._onRightClicked((0,l.Z)((0,l.Z)({},t),{},{ignoreSelectedObjectNamesForContextMenu:!1}))},e._onRightClicked=function(t){var n=t.offsetX,r=t.offsetY,i=t.x,a=t.y,o=t.ignoreSelectedObjectNamesForContextMenu;e.lastContextMenuX=n,e.lastContextMenuY=r,e.props.onContextMenu&&e.props.onContextMenu(i,a,!!o)},e._onInstanceDoubleClicked=function(t){e.keyboardShortcuts.shouldIgnoreDoubleClick()||e.props.onInstanceDoubleClicked(t)},e._onOverInstance=function(t){e.instancesMover.isMoving()||e.highlightedInstance.setInstance(t)},e._onDownInstance=function(t,n,r){if(e.fpsLimiter.notifyInteractionHappened(),e.hasCursorMovedSinceItIsDown=!1,!e.keyboardShortcuts.shouldMoveView())if(e.keyboardShortcuts.shouldStartRectangleSelectionInsteadOfSelecting()){var i=e.viewPosition.toCanvasCoordinates(n,r);e.selectionRectangle.startSelectionRectangle(i[0],i[1])}else e.props.instancesSelection.selectInstance({instance:t,multiSelect:e.keyboardShortcuts.shouldMultiSelect(),layersLocks:e._getLayersLocks()}),e.props.onInstancesSelected&&e.props.onInstancesSelected(e.props.instancesSelection.getSelectedInstances()),e.instancesMover.startMove(n,r)},e._onOutInstance=function(t){t===e.highlightedInstance.getInstance()&&e.highlightedInstance.setInstance(null)},e._onUpInstance=function(t,n,r){e.hasCursorMovedSinceItIsDown||(e.props.instancesSelection.selectInstance({instance:t,multiSelect:e.keyboardShortcuts.shouldMultiSelect(),layersLocks:e._getLayersLocks()}),e.props.onInstancesSelected&&e.props.onInstancesSelected(e.props.instancesSelection.getSelectedInstances()),e.selectionRectangle.hasStartedSelectionRectangle()&&e._selectInstanceInsideSelectionRectangle())},e._onMoveInstance=function(t,n,r){e.fpsLimiter.notifyInteractionHappened();var i=!e.hasCursorMovedSinceItIsDown;e.hasCursorMovedSinceItIsDown=!0;var a=n/e.getZoomFactor(),o=r/e.getZoomFactor();if(e.keyboardShortcuts.shouldMoveView())e.scrollBy(-a,-o);else if(e.selectionRectangle.hasStartedSelectionRectangle()&&e.selectionRectangle.selectionRectangleEnd)e.selectionRectangle.updateSelectionRectangle(e.selectionRectangle.selectionRectangleEnd.x+n,e.selectionRectangle.selectionRectangleEnd.y+r);else{if(e.keyboardShortcuts.shouldCloneInstances()&&i)for(var s=e.props.instancesSelection.getSelectedInstances(),l=0;l<s.length;l++){var c=s[l];e.props.initialInstances.insertInitialInstance(c).resetPersistentUuid()}e.props.instancesSelection.isInstanceSelected(t)||e._onInstanceClicked(t);var u=e.props.instancesSelection.getSelectedInstances();e.instancesMover.moveBy(u,a,o,e.keyboardShortcuts.shouldFollowAxis(),e.keyboardShortcuts.shouldNotSnapToGrid())}},e._onMoveInstanceEnd=function(){if(e.hasCursorMovedSinceItIsDown)if(e.selectionRectangle.hasStartedSelectionRectangle())e._selectInstanceInsideSelectionRectangle();else{e.instancesMover.endMove();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesMoved(t)}},e._onResize=function(t,n,r){e.fpsLimiter.notifyInteractionHappened();var i=t/e.getZoomFactor(),a=n/e.getZoomFactor(),o=e.props.instancesSelection.getSelectedInstances(),s="touch"===e.props.screenType&&Py(r)&&Iy(r)||e.keyboardShortcuts.shouldResizeProportionally();e.instancesResizer.resizeBy(o,i,a,r,s,e.keyboardShortcuts.shouldNotSnapToGrid())},e._onResizeEnd=function(){e.instancesResizer.endResize();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesResized(t)},e._onRotate=function(t,n){e.fpsLimiter.notifyInteractionHappened();var r=t/e.getZoomFactor(),i=n/e.getZoomFactor(),a=e.props.instancesSelection.getSelectedInstances();e.instancesRotator.rotateBy(a,r,i,e.keyboardShortcuts.shouldResizeProportionally())},e._onRotateEnd=function(){e.instancesRotator.endRotate();var t=e.props.instancesSelection.getSelectedInstances();e.props.onInstancesRotated(t)},e.clearHighlightedInstance=function(){e.highlightedInstance.setInstance(null)},e.onInstancesMovedDebounced=sy()(e.props.onInstancesMoved,50,{trailing:!0}),e.moveSelection=function(t,n){e.fpsLimiter.notifyInteractionHappened();var r=e.props.instancesSelection.getSelectedInstances().filter((function(e){return!e.isLocked()}));r.forEach((function(e){e.setX(e.getX()+t),e.setY(e.getY()+n)})),e.onInstancesMovedDebounced(r)},e.onPressEscape=function(){e.clickInterceptor&&e.clickInterceptor.isIntercepting()?e.clickInterceptor.cancelClickInterception():e.props.tileMapTileSelection&&e.props.onSelectTileMapTile(null)},e.getContentAABB=function(){var t=e.props.initialInstances;if(0===t.getInstancesCount())return null;var n=e.instancesRenderer.getInstanceMeasurer(),r=null,i=new sZ.InitialInstanceJSFunctor;return i.invoke=function(e){var t=sZ.wrapPointer(e,sZ.InitialInstance);r?r.union(n.getInstanceAABB(t,new gy)):r=n.getInstanceAABB(t,new gy)},t.iterateOverInstances(i),i.delete(),r},e.zoomToFitContent=function(){var t=e.getContentAABB();t&&e.fitViewToRectangle(t,{adaptZoom:!0})},e._getAreaRectangle=function(){var t=e.props,n=t.eventsBasedObjectVariant,r=t.project;return n?new gy(n.getAreaMinX(),n.getAreaMinY(),n.getAreaMaxX(),n.getAreaMaxY()):new gy(0,0,r.getGameResolutionWidth(),r.getGameResolutionHeight())},e.zoomToInitialPosition=function(){var t=e._getAreaRectangle();e.setZoomFactor(jj(Math.max(t.width(),t.height()))),e.scrollTo(t.centerX(),t.centerY())},e.zoomToFitSelection=function(){var t=e.selectedInstances.getSelectionAABB();t.width()>0&&t.height()>0&&e.fitViewToRectangle(t,{adaptZoom:!0})},e.centerViewOnLastInstance=function(t,n){if(0!==t.length){var r=e.instancesRenderer.getInstanceMeasurer().getInstanceAABB(t[t.length-1],new gy);e.fitViewToRectangle(r,{adaptZoom:!1}),n&&e.scrollBy(n[0],n[1])}},e.getLastContextMenuSceneCoordinates=function(){return e.viewPosition.toSceneCoordinates(e.lastContextMenuX,e.lastContextMenuY)},e.getLastCursorSceneCoordinates=function(){return null===e.lastCursorX||null===e.lastCursorY?null:e.viewPosition.toSceneCoordinates(e.lastCursorX,e.lastCursorY)},e.getCoordinatesToRenderTileMapPreview=function(){var t=e.clickInterceptor.getPointerPathCoordinates();if(t)return t;var n=e.getLastCursorSceneCoordinates();return n?[{x:n[0],y:n[1]}]:[]},e.getViewPosition=function(){return e.viewPosition},e._renderScene=function(){if(!e._unmounted&&!e._renderingPaused)try{e.fpsLimiter.shouldUpdate()&&!(0,Wd.EU)()&&(e.canvasCursor.render(),e.grid.render(),e.highlightedInstance.render(),e.tileMapPaintingPreview.render(),e.clickInterceptor.render(),e.selectedInstances.render(),e.selectionRectangle.render(),e.windowBorder.render(),e.windowMask.render(),e.statusBar.render(),e.profilerBar.render({basicProfilingCounters:e.instancesRenderer.getBasicProfilingCounters(),display:e.props.showBasicProfilingCounters}),e.background.render(),e.instancesRenderer.render(e.pixiRenderer,e.threeRenderer,e.viewPosition,e.uiPixiContainer,e.backgroundPixiContainer));var t=e.props.editorViewPosition2D;t.viewX=e.viewPosition.viewX,t.viewY=e.viewPosition.viewY,e.nextFrame=requestAnimationFrame(e._renderScene)}catch(n){console.error("Exception caught while doing the rendering:",n),e.setState({renderingError:{error:n,uniqueErrorId:(0,oZ.DO)()}})}},e.pauseSceneRendering=function(){e.nextFrame&&cancelAnimationFrame(e.nextFrame),e._renderingPaused=!0,e.instancesRenderer.getPixiContainer().eventMode="none",Vy()},e.restartSceneRendering=function(){e._renderingPaused=!1,e._renderScene(),e.instancesRenderer.getPixiContainer().eventMode="auto",setTimeout((function(){var e=ly.Ticker&&ly.Ticker.shared;e&&e.start()}),50)},e.getInstanceSize=function(t){return e.instancesRenderer.getInstanceMeasurer().getUnrotatedInstanceSize(t)},e}return(0,We.Z)(n,[{key:"componentDidMount",value:function(){this.canvasArea&&!this.pixiRenderer&&this._initializeCanvasAndRenderer()}},{key:"componentDidUpdate",value:function(){this.canvasArea&&!this.pixiRenderer&&this._initializeCanvasAndRenderer()}},{key:"_initializeCanvasAndRenderer",value:function(){var e=this,t=this.canvasArea;if(t){var n,r=this.props,i=r.onMouseMove,a=r.onMouseLeave;if(this.keyboardShortcuts=new ht.ZP({shortcutCallbacks:(0,l.Z)({onMove:this.moveSelection,onEscape:this.onPressEscape},this.props.instancesEditorShortcutsCallbacks)}),this._showObjectInstancesIn3D=this.props.showObjectInstancesIn3D,this._showObjectInstancesIn3D){n=document.createElement("canvas");var o=new py.WebGLRenderer({canvas:n});o.useLegacyLights=!0,o.autoClear=!1,o.setSize(this.props.width,this.props.height),this.pixiRenderer=new ly.Renderer({width:this.props.width,height:this.props.height,view:n,context:o.getContext(),clearBeforeRender:!1,preserveDrawingBuffer:!0,antialias:!1,backgroundAlpha:0,eventMode:"auto"}),this.threeRenderer=o}else this.pixiRenderer=ly.autoDetectRenderer({width:this.props.width,height:this.props.height,preserveDrawingBuffer:!0,antialias:!1,clearBeforeRender:!1,backgroundAlpha:0}),n=this.pixiRenderer.view;this.pixiRenderer.plugins.accessibility.destroy(),delete this.pixiRenderer.plugins.accessibility,t.appendChild(n),this.pixiRenderer.view.style.outline="none",this.longTouchHandler=new Jy({canvas:this.pixiRenderer.view,onLongTouch:function(t){return e.props.onContextMenu(t.clientX,t.clientY)}}),this.pixiRenderer.view.onwheel=function(t){e.fpsLimiter.notifyInteractionHappened();var n=e.getZoomFactor();if(e.keyboardShortcuts.shouldZoom(t))e.zoomOnCursorBy((0,ay.$u)(-t.deltaY));else if(e.keyboardShortcuts.shouldScrollHorizontally()){var r=t.deltaY/(5*n);e.scrollBy(-r,0)}else{var i=t.deltaX/(5*n),a=t.deltaY/(5*n);e.scrollBy(i,a)}t.preventDefault()},this.pixiRenderer.view.setAttribute("tabIndex",-1),this.pixiRenderer.view.addEventListener("keydown",this.keyboardShortcuts.onKeyDown),this.pixiRenderer.view.addEventListener("keyup",this.keyboardShortcuts.onKeyUp),this.pixiRenderer.view.addEventListener("mousedown",this.keyboardShortcuts.onMouseDown),this.pixiRenderer.view.addEventListener("mouseup",this.keyboardShortcuts.onMouseUp),i&&this.pixiRenderer.view.addEventListener("mousemove",(function(e){i(e)})),a&&this.pixiRenderer.view.addEventListener("mouseout",(function(e){a(e)})),this.pixiRenderer.view.addEventListener("focusout",(function(t){e.keyboardShortcuts&&e.keyboardShortcuts.resetModifiers()})),this.uiPixiContainer=new ly.Container,this.backgroundPixiContainer=new ly.Container,this.backgroundArea=new ly.Container,this.backgroundArea.hitArea=new ly.Rectangle(0,0,this.props.width,this.props.height),cy(this.backgroundArea),this.backgroundArea.addEventListener("mousedown",(function(t){return e._onDownBackground(t.data.global.x,t.data.global.y,t)})),this.backgroundArea.addEventListener("mouseup",(function(t){return e._onUpBackground(t.data.global.x,t.data.global.y,t)})),this.backgroundArea.addEventListener("rightclick",(function(t){var n=t.data.originalEvent;return e._onRightClicked({offsetX:n.offsetX,offsetY:n.offsetY,x:n.clientX,y:n.clientY,ignoreSelectedObjectNamesForContextMenu:!0}),!1})),this.backgroundArea.addEventListener("touchstart",(function(t){fy(t.data&&t.data.originalEvent)||e._onDownBackground(t.data.global.x,t.data.global.y)})),this.backgroundArea.addEventListener("touchend",(function(t){fy(t.data&&t.data.originalEvent)||e._onUpBackground(t.data.global.x,t.data.global.y)})),this.backgroundArea.addEventListener("globalmousemove",(function(t){var n=t.data.global.x||0,r=t.data.global.y||0;e._onMouseMove(n,r)})),this.backgroundArea.addEventListener("panmove",(function(t){return e._onPanMove(t.deltaX,t.deltaY,t.data.global.x,t.data.global.y)})),this.backgroundArea.addEventListener("panend",(function(t){return e._onPanEnd()})),this.uiPixiContainer.addChild(this.backgroundArea);var s=this._getAreaRectangle();this.viewPosition=new dy({initialViewX:null===this.props.editorViewPosition2D.viewX?s.centerX():this.props.editorViewPosition2D.viewX,initialViewY:null===this.props.editorViewPosition2D.viewY?s.centerY():this.props.editorViewPosition2D.viewY,width:this.props.width,height:this.props.height,instancesEditorSettings:this.props.instancesEditorSettings}),this.grid=new Ny({viewPosition:this.viewPosition,instancesEditorSettings:this.props.instancesEditorSettings}),this.uiPixiContainer.addChild(this.grid.getPixiObject()),this.pinchHandler=new hy({canvas:this.pixiRenderer.view,setZoomFactor:this.setZoomFactor,getZoomFactor:this.getZoomFactor,viewPosition:this.viewPosition}),this.canvasCursor=new Wy({canvas:t,shouldMoveView:function(){return e.keyboardShortcuts.shouldMoveView()}}),this._instancesAdder=new qy({instances:this.props.initialInstances,instancesEditorSettings:this.props.instancesEditorSettings}),this._mountEditorComponents(this.props),this._renderScene(),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}}},{key:"_mountEditorComponents",value:function(e){var t=this;this.highlightedInstance&&this.uiPixiContainer.removeChild(this.highlightedInstance.getPixiObject()),this.tileMapPaintingPreview&&this.uiPixiContainer.removeChild(this.tileMapPaintingPreview.getPixiObject()),this.clickInterceptor&&this.uiPixiContainer.removeChild(this.clickInterceptor.getPixiObject()),this.selectedInstances&&this.uiPixiContainer.removeChild(this.selectedInstances.getPixiContainer()),this.instancesRenderer&&(this.uiPixiContainer.removeChild(this.instancesRenderer.getPixiContainer()),this.instancesRenderer.delete()),this.selectionRectangle&&(this.uiPixiContainer.removeChild(this.selectionRectangle.getPixiObject()),this.selectionRectangle.delete()),this.windowBorder&&this.uiPixiContainer.removeChild(this.windowBorder.getPixiObject()),this.windowMask&&this.uiPixiContainer.removeChild(this.windowMask.getPixiObject()),this.statusBar&&this.uiPixiContainer.removeChild(this.statusBar.getPixiObject()),this.background&&this.backgroundPixiContainer.removeChild(this.background.getPixiObject()),this.profilerBar&&this.uiPixiContainer.removeChild(this.profilerBar.getPixiObject()),this.instancesRenderer=new yy({project:e.project,layout:e.layout||null,layersContainer:e.layersContainer,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,instances:e.initialInstances,viewPosition:this.viewPosition,onOverInstance:this._onOverInstance,onMoveInstance:this._onMoveInstance,onMoveInstanceEnd:this._onMoveInstanceEnd,onDownInstance:this._onDownInstance,onUpInstance:this._onUpInstance,onOutInstance:this._onOutInstance,onInstanceClicked:this._onInstanceClicked,onInstanceRightClicked:this._onInstanceRightClicked,onInstanceDoubleClicked:this._onInstanceDoubleClicked,showObjectInstancesIn3D:this._showObjectInstancesIn3D}),this.selectionRectangle=new Ry({instances:e.initialInstances,instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toSceneCoordinates:this.viewPosition.toSceneCoordinates}),this.selectedInstances=new Ly({instancesSelection:this.props.instancesSelection,shouldDisplayHandles:this.shouldDisplayClickableHandles,onResize:this._onResize,onResizeEnd:this._onResizeEnd,onRotate:this._onRotate,onRotateEnd:this._onRotateEnd,instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toCanvasCoordinates:this.viewPosition.toCanvasCoordinates,getFillColor:this.getSelectedInstancesObjectFillColor,screenType:this.props.screenType,keyboardShortcuts:this.keyboardShortcuts,onPanMove:this._onPanMove,onPanEnd:this._onPanEnd}),this.tileMapPaintingPreview=new nZ({instancesSelection:this.props.instancesSelection,project:e.project,globalObjectsContainer:e.globalObjectsContainer,objectsContainer:e.objectsContainer,getTileMapTileSelection:this.getTileMapTileSelection,getRendererOfInstance:this.getRendererOfInstance,getCoordinatesToRender:this.getCoordinatesToRenderTileMapPreview,viewPosition:this.viewPosition}),this.clickInterceptor=new aZ({getTileMapTileSelection:this.getTileMapTileSelection,viewPosition:this.viewPosition,onClick:this._onInterceptClick,onPanMove:this._onPanMove,onInterceptPointerMove:function(){t.fpsLimiter.notifyInteractionHappened()}}),this.highlightedInstance=new Ay({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),toCanvasCoordinates:this.viewPosition.toCanvasCoordinates,isInstanceOf3DObject:this.props.isInstanceOf3DObject}),this.instancesResizer=new Ey({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),instancesEditorSettings:this.props.instancesEditorSettings}),this.instancesRotator=new Fy(this.instancesRenderer.getInstanceMeasurer()),this.instancesMover=new Dy({instanceMeasurer:this.instancesRenderer.getInstanceMeasurer(),instancesEditorSettings:this.props.instancesEditorSettings}),this.windowBorder=new _y({project:e.project,layout:e.layout,eventsBasedObjectVariant:e.eventsBasedObjectVariant,toCanvasCoordinates:this.viewPosition.toCanvasCoordinates}),this.windowMask=new By({project:e.project,viewPosition:this.viewPosition,instancesEditorSettings:this.props.instancesEditorSettings}),this.statusBar=new Hy({width:this.props.width,height:this.props.height,getLastCursorSceneCoordinates:this.getLastCursorSceneCoordinates}),this.profilerBar=new zy,this.uiPixiContainer.addChild(this.selectionRectangle.getPixiObject()),this.uiPixiContainer.addChild(this.instancesRenderer.getPixiContainer()),this.uiPixiContainer.addChild(this.windowBorder.getPixiObject()),this.uiPixiContainer.addChild(this.windowMask.getPixiObject()),this.uiPixiContainer.addChild(this.selectedInstances.getPixiContainer()),this.uiPixiContainer.addChild(this.highlightedInstance.getPixiObject()),this.uiPixiContainer.addChild(this.statusBar.getPixiObject()),this.uiPixiContainer.addChild(this.profilerBar.getPixiObject()),this.uiPixiContainer.addChild(this.tileMapPaintingPreview.getPixiObject()),this.uiPixiContainer.addChild(this.clickInterceptor.getPixiObject()),this.background=new Xy({width:this.props.width,height:this.props.height,layout:e.layout||null}),this.backgroundPixiContainer.addChild(this.background.getPixiObject())}},{key:"componentWillUnmount",value:function(){this._unmounted=!0,this.selectionRectangle&&this.selectionRectangle.delete(),this.instancesRenderer&&this.instancesRenderer.delete(),this._instancesAdder&&this._instancesAdder.unmount(),this.pinchHandler&&this.pinchHandler.unmount(),this.longTouchHandler&&this.longTouchHandler.unmount(),this.nextFrame&&cancelAnimationFrame(this.nextFrame),Vy(),this.uiPixiContainer&&this.uiPixiContainer.destroy(),this.backgroundPixiContainer&&this.backgroundPixiContainer.destroy(),this.pixiRenderer&&this.pixiRenderer.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.width===this.props.width&&e.height===this.props.height||(this.pixiRenderer.resize(e.width,e.height),this.threeRenderer&&this.threeRenderer.setSize(e.width,e.height),this.viewPosition.resize(e.width,e.height),this.statusBar.resize(e.width,e.height),this.backgroundArea.hitArea=new ly.Rectangle(0,0,e.width,e.height),this.background.resize(e.width,e.height),this.fpsLimiter.forceNextUpdate(),this._renderScene()),e.instancesEditorSettings!==this.props.instancesEditorSettings&&(this.grid.setInstancesEditorSettings(e.instancesEditorSettings),this.instancesMover.setInstancesEditorSettings(e.instancesEditorSettings),this.instancesResizer.setInstancesEditorSettings(e.instancesEditorSettings),this.windowMask.setInstancesEditorSettings(e.instancesEditorSettings),this.viewPosition.setInstancesEditorSettings(e.instancesEditorSettings),this._instancesAdder.setInstancesEditorSettings(e.instancesEditorSettings)),e.screenType!==this.props.screenType&&this.selectedInstances.setScreenType(this.props.screenType),this.props.layout===e.layout&&this.props.layersContainer===e.layersContainer&&this.props.objectsContainer===e.objectsContainer&&this.props.initialInstances===e.initialInstances&&this.props.project===e.project||this._mountEditorComponents(e),e.pauseRendering&&!this.props.pauseRendering&&this.pauseSceneRendering(),!e.pauseRendering&&this.props.pauseRendering&&this.restartSceneRendering()}},{key:"zoomOnCursorBy",value:function(e){var t=this.getLastCursorSceneCoordinates();if(t){this.setZoomFactor(this.getZoomFactor()*e);var n=this.getLastCursorSceneCoordinates();n&&this.scrollBy(t[0]-n[0],t[1]-n[1])}}},{key:"scrollBy",value:function(e,t){this.fpsLimiter.notifyInteractionHappened(),this.viewPosition.scrollBy(e,t),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"scrollTo",value:function(e,t){this.fpsLimiter.notifyInteractionHappened(),this.viewPosition.scrollTo(e,t),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"fitViewToRectangle",value:function(e,t){var n=t.adaptZoom,r=this.viewPosition.fitToRectangle(e);n&&this.setZoomFactor(r),this.props.onViewPositionChanged&&this.props.onViewPositionChanged(this.viewPosition)}},{key:"getBoundingClientRect",value:function(){return this.canvasArea?this.canvasArea.getBoundingClientRect():{left:0,top:0,right:0,bottom:0}}},{key:"render",value:function(){var e=this;return this.props.project?this.state.renderingError?(0,f.jsx)(ye.Z9,{error:this.state.renderingError.error,componentTitle:(0,f.jsx)(w.Trans,{id:"Instances editor rendering"}),componentStack:"[InstancesEditor rendering]",uniqueErrorId:this.state.renderingError.uniqueErrorId}):(0,f.jsx)(uZ,{canDrop:function(){return!0},hover:function(t){e.fpsLimiter.notifyInteractionHappened();var n=e._instancesAdder,r=e.viewPosition,i=e.canvasArea;if(n&&i&&r){var a=t.getClientOffset(),o=a.x,s=a.y,l=i.getBoundingClientRect(),c=r.toSceneCoordinates(o-l.left,s-l.top);n.createOrUpdateTemporaryInstancesFromObjectNames(c,e.props.selectedObjectNames,e.props.chosenLayer)}},drop:function(t){e.fpsLimiter.notifyInteractionHappened();var n=e._instancesAdder,r=e.viewPosition,i=e.canvasArea;if(n&&i&&r)if(t.didDrop())n.deleteTemporaryInstances();else{var a=t.getClientOffset(),o=a.x,s=a.y,l=i.getBoundingClientRect(),c=r.toSceneCoordinates(o-l.left,s-l.top),u=n.updateTemporaryInstancePositions(c);n.commitTemporaryInstances(),e.props.onInstancesAdded(u)}},children:function(t){var n=t.connectDropTarget,r=t.isOver;return e._instancesAdder&&!r&&e._instancesAdder.deleteTemporaryInstances(),n((0,f.jsx)("div",{ref:function(t){return e.canvasArea=t},style:cZ.canvasArea,id:lZ}))}}):null}}]),n}(c.Component),pZ=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16691 7.66663C5.07486 7.66663 5.00024 7.74124 5.00024 7.83329V11.5C5.00024 11.9602 5.37333 12.3333 5.83358 12.3333H11.5002C11.9605 12.3333 12.3336 11.9602 12.3336 11.5V7.83329C12.3336 7.74124 12.259 7.66663 12.1669 7.66663H5.16691ZM4.00024 7.83329C4.00024 7.18894 4.52259 6.66663 5.16691 6.66663H12.1669C12.8113 6.66663 13.3336 7.18895 13.3336 7.83329V11.5C13.3336 12.5125 12.5128 13.3333 11.5002 13.3333H5.83358C4.82106 13.3333 4.00024 12.5125 4.00024 11.5V7.83329Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.66691 3.66663C7.52676 3.66663 6.97342 4.10514 6.68719 4.49816C6.51299 4.73736 6.41931 5.03154 6.37339 5.38803C6.33198 5.70961 6.33265 6.0462 6.33338 6.41357C6.33348 6.46257 6.33358 6.51212 6.33358 6.56225V6.99996C6.33358 7.2761 6.10972 7.49996 5.83358 7.49996C5.55744 7.49996 5.33358 7.2761 5.33358 6.99996V6.56225C5.33358 6.51517 5.33344 6.46707 5.33331 6.41811C5.33232 6.05826 5.3312 5.65155 5.38159 5.2603C5.43986 4.80784 5.5709 4.33229 5.87884 3.90946C6.35856 3.25076 7.21613 2.66663 8.66691 2.66663C9.46147 2.66663 10.0987 2.96465 10.5276 3.2506C10.743 3.39423 10.9109 3.53802 11.0264 3.6474C11.0843 3.70227 11.1296 3.74899 11.1616 3.78343C11.1776 3.80067 11.1903 3.81488 11.1997 3.82555L11.2112 3.83887L11.2151 3.84343L11.2165 3.84517L11.2172 3.8459C11.2173 3.84605 11.2177 3.84653 10.8482 4.1544L11.2177 3.84653C11.3945 4.05867 11.3658 4.37395 11.1537 4.55074C10.9421 4.72701 10.6281 4.69902 10.451 4.48855M10.451 4.48855L10.4481 4.48524C10.4446 4.48126 10.4382 4.47399 10.4288 4.46388C10.41 4.44364 10.3797 4.41224 10.3387 4.37335C10.2562 4.29524 10.1325 4.18902 9.97289 4.08265C9.65182 3.8686 9.20569 3.66663 8.66691 3.66663",fill:"currentColor"})]}))})),fZ={tooltip:{marginRight:5,verticalAlign:"bottom"}},hZ=function(e){return"layer-".concat(e.ptr)},gZ=function(){function e(t,n){(0,ze.Z)(this,e),this.layer=t,this.props=n}return(0,We.Z)(e,[{key:"isDescendantOf",value:function(e){return e.getId()===jZ}},{key:"getRootId",value:function(){return jZ}},{key:"getName",value:function(e){return this._isBaseLayer()?e._({id:"Base layer"}):this.layer.getName()}},{key:"_isBaseLayer",value:function(){return!this.layer.getName()}},{key:"getId",value:function(){return hZ(this.layer)}},{key:"getHtmlId",value:function(e){return"layer-".concat(this.props.layersContainer.getLayerPosition(this.layer.getName()))}},{key:"getDataSet",value:function(){return{scene:this.layer.getName()}}},{key:"getThumbnail",value:function(){return null}},{key:"onClick",value:function(){this.props.onSelectLayer(this.layer)}},{key:"rename",value:function(e){if(e){var t=this.layer.getName();t!==e&&this.props.onRenameLayer(t,e)}}},{key:"edit",value:function(){this.props.onEditLayer(this.layer),this.props.onSelectLayer(null)}},{key:"_isVisible",value:function(){return this.layer.getVisibility()}},{key:"_isLocked",value:function(){return this.layer.isLocked()}},{key:"_setVisibility",value:function(e){this.layer.setVisibility(e),this.props.triggerOnLayersModified()}},{key:"_setLocked",value:function(e){this.layer.setLocked(e),this.props.triggerOnLayersModified()}},{key:"getRightButton",value:function(e){var t=this;return[{icon:this._isVisible()?(0,f.jsx)(ex.Z,{}):(0,f.jsx)(tx.Z,{}),label:e._({id:"Visible"}),click:function(){return t._setVisibility(!t._isVisible())},id:"layer-visibility"},{icon:this._isLocked()||!this._isVisible()?(0,f.jsx)(Fo,{}):(0,f.jsx)(pZ,{}),label:e._({id:"Locked"}),enabled:this._isVisible(),click:function(){return t._setLocked(!t._isLocked())},id:"layer-lock"}]}},{key:"buildMenuTemplate",value:function(e,t){var n=this;return[{label:e._({id:"Rename"}),click:function(){return n.props.editName(n.getId())},accelerator:"F2",enabled:!this._isBaseLayer()},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace",enabled:!this._isBaseLayer()},{type:"separator"},{label:e._({id:"Open layer editor"}),click:function(){n.props.onEditLayer(n.layer),n.props.onSelectLayer(null)}},{type:"separator"},{type:"checkbox",label:e._({id:"Visible"}),checked:this._isVisible(),click:function(){return n._setVisibility(!n._isVisible())}},{type:"checkbox",label:e._({id:"Locked"}),enabled:this._isVisible(),checked:this._isLocked()||!this._isVisible(),click:function(){return n._setLocked(!n._isLocked())}}]}},{key:"_isChosenLayer",value:function(){return this.layer.getName()===this.props.chosenLayer}},{key:"renderRightComponent",value:function(e){var t=this;return(0,f.jsx)(re.ZP,{style:fZ.tooltip,title:(0,f.jsx)(w.Trans,{id:"Layer where instances are added by default"}),children:(0,f.jsx)(aC.Z,{checked:this._isChosenLayer(),onChange:function(){return t.props.onChooseLayer(t.layer.getName())},size:"small",id:"layer-selected-".concat(this._isChosenLayer()?"checked":"unchecked")})})}},{key:"delete",value:function(){this.props.onDeleteLayer(this.layer)}},{key:"getIndex",value:function(){return this._getRevertedIndex(this.props.layersContainer.getLayerPosition(this.layer.getName()))}},{key:"_getRevertedIndex",value:function(e){return this.props.layersContainer.getLayersCount()-1-e}},{key:"moveAt",value:function(e){var t=this.getIndex();e!==t&&(this.props.layersContainer.moveLayer(this._getRevertedIndex(t),this._getRevertedIndex(e+(e<=t?0:-1))),this._onProjectItemModified())}},{key:"_onProjectItemModified",value:function(){this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges(),this.props.forceUpdate()}}]),e}(),mZ="background-color",xZ=function(){function e(t,n){(0,ze.Z)(this,e),this.layout=t,this.onBackgroundColorChanged=n}return(0,We.Z)(e,[{key:"getName",value:function(e){return e._({id:"Background color"})}},{key:"getId",value:function(){return mZ}},{key:"getRightButton",value:function(e){return[]}},{key:"getHtmlId",value:function(e){return mZ}},{key:"getDataSet",value:function(){return null}},{key:"getThumbnail",value:function(){return null}},{key:"onClick",value:function(){}},{key:"buildMenuTemplate",value:function(e,t){return[]}},{key:"renderRightComponent",value:function(e){var t=this;return(0,f.jsx)(bu.Z,{disableAlpha:!0,color:{r:this.layout.getBackgroundColorRed(),g:this.layout.getBackgroundColorGreen(),b:this.layout.getBackgroundColorBlue(),a:255},onChangeComplete:function(e){t.layout.setBackgroundColor(e.rgb.r,e.rgb.g,e.rgb.b),t.onBackgroundColorChanged()}})}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"getRootId",value:function(){return""}}]),e}(),vZ=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m3.4714 3.4679c0.29385-0.29193 0.76872-0.29037 1.0607 0.00348l0.88888 0.89474c0.29194 0.29385 0.29038 0.76872-0.00347 1.0606s-0.76873 0.29038-1.0607-0.00347l-0.88889-0.89474c-0.29193-0.29385-0.29037-0.76872 0.0035-1.0607zm17.057 0c0.2938 0.29194 0.2954 0.76681 0.0035 1.0607l-0.8889 0.89474c-0.292 0.29385-0.7668 0.2954-1.0607 0.00347-0.2938-0.29193-0.2954-0.7668-0.0035-1.0606l0.8889-0.89474c0.292-0.29385 0.7668-0.29541 1.0607-0.00348zm-13.037 2.0742c1.0746-0.93409 2.6176-1.3974 4.508-1.3974s3.4334 0.46335 4.508 1.3974c1.091 0.94831 1.5994 2.295 1.5752 3.838-0.0236 1.5368-0.5346 2.6252-1.5511 3.6484-0.463 0.466-0.7019 0.7163-0.8604 1.0353-0.1497 0.3013-0.255 0.7296-0.255 1.5677 0 0.4142-0.3358 0.75-0.75 0.75h-5.3334c-0.41421 0-0.75-0.3358-0.75-0.75 0-0.8381-0.10536-1.2664-0.25503-1.5677-0.15847-0.319-0.39737-0.5693-0.86037-1.0353-1.0166-1.0233-1.5275-2.1116-1.5512-3.6484m1.5752-3.838c-1.0909 0.94827-1.5993 2.2951-1.5752 3.838zm0.98406 1.1321c-0.69749 0.60629-1.078 1.4964-1.0594 2.6824 0.01727 1.1239 0.35432 1.8485 1.1155 2.6147 0.01355 0.0137 0.0271 0.0273 0.04065 0.0409 0.41232 0.4147 0.82211 0.8269 1.099 1.3843 0.2112 0.4252 0.3311 0.9 0.3821 1.485h3.8924c0.051-0.585 0.1709-1.0598 0.3821-1.485 0.2769-0.5574 0.6867-0.9696 1.099-1.3843 0.0135-0.0136 0.0271-0.0272 0.0406-0.0409 0.7612-0.7662 1.0983-1.4905 1.1155-2.6145 0.0186-1.186-0.3619-2.0763-1.0594-2.6826-0.7139-0.62052-1.8589-1.0295-3.524-1.0295s-2.8101 0.40901-3.524 1.0295zm-3.0586 8.4252c0.29385 0.2919 0.29541 0.7668 0.0035 1.0607l-0.88889 0.8947c-0.29194 0.2939-0.76681 0.2954-1.0607 0.0035s-0.29541-0.7668-0.0035-1.0607l0.88889-0.8947c0.29193-0.2939 0.76681-0.2954 1.0607-0.0035zm13.165 0c0.2939-0.2919 0.7687-0.2904 1.0607 0.0035l0.8889 0.8947c0.2919 0.2939 0.2903 0.7688-0.0035 1.0607-0.2939 0.2919-0.7687 0.2904-1.0607-0.0035l-0.8889-0.8947c-0.2919-0.2939-0.2903-0.7688 0.0035-1.0607zm-9.9992 3.2163c0-0.4142 0.33579-0.75 0.75-0.75h5.3334c0.4142 0 0.75 0.3358 0.75 0.75s-0.3358 0.75-0.75 0.75h-5.3334c-0.41421 0-0.75-0.3358-0.75-0.75zm0.88889 2.6842c0-0.4142 0.33579-0.75 0.74998-0.75h3.5556c0.4142 0 0.75 0.3358 0.75 0.75s-0.3358 0.75-0.75 0.75h-3.5556c-0.41419 0-0.74998-0.3358-0.74998-0.75z",fill:"currentColor"})}))})),bZ=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m20.53 3.4697c-0.29289-0.29289-0.76777-0.29289-1.0607 0l-16 16c-0.2929 0.2929-0.2929 0.7677 0 1.0606s0.7677 0.2929 1.0606 0l12.052-12.052c-0.02557 1.088-0.3625 1.7968-1.1129 2.5471-0.01365 0.0137-0.0273 0.0273-0.04095 0.041-0.41204 0.4117-0.82226 0.8216-1.0995 1.3762-0.29554 0.591-0.41248 1.2782-0.41248 2.2243 0 0.4142 0.33575 0.75 0.74997 0.75 0.41421 0 0.75-0.3358 0.75-0.75 0-0.8317 0.10524-1.2557 0.25415-1.5535 0.15798-0.316 0.39629-0.5641 0.85951-1.0273 1.0164-1.0164 1.5286-2.0986 1.5529-3.627 0.01031-0.4543-0.03333-0.908-0.12986-1.3516l2.577-2.577c0.29289-0.29289 0.29289-0.76777 0-1.0607zm-5.6008 0.25191c-0.84048-0.31455-1.8226-0.47158-2.9296-0.47158-1.8893 0-3.4316 0.45995-4.5062 1.3879-1.0916 0.94272-1.6012 2.2826-1.577 3.8183 0.0237 1.5298 0.5359 2.6126 1.5529 3.6296 0.2929 0.2929 0.7677 0.2929 1.0606 0s0.2929-0.7678 0-1.0607c-0.7607-0.7607-1.0965-1.4787-1.1137-2.5924-0.0185-1.1754 0.3608-2.0579 1.0576-2.6597 0.7139-0.61648 1.8596-1.0232 3.5258-1.0232 0.9696 0 1.7669 0.13808 2.4038 0.37642 0.38793 0.14518 0.82011-0.0516 0.9653-0.43954 0.14518-0.38794-0.05161-0.82012-0.43954-0.9653zm0.48712 13.612c0-0.4142-0.33579-0.75-0.75-0.75h-5.3334c-0.4142 0-0.75 0.3358-0.75 0.75s0.3358 0.75 0.75 0.75h5.3334c0.41421 0 0.75-0.3358 0.75-0.75zm-1.6389 3.4167c0.41419 0 0.74998-0.3358 0.74998-0.75s-0.33579-0.75-0.74998-0.75h-3.5556c-0.4142 0-0.75 0.3358-0.75 0.75s0.3358 0.75 0.75 0.75z",fill:"currentColor"})}))})),CZ=n.g.gd,jZ="layers",yZ={listContainer:{flex:1,display:"flex",flexDirection:"column",padding:"0 8px 8px 8px"},autoSizerContainer:{flex:1},autoSizer:{width:"100%"}},ZZ=function(){function e(t){(0,ze.Z)(this,e),this.content=t}return(0,We.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),kZ=function(){function e(t,n,r,i){(0,ze.Z)(this,e),this.id=t,this.label=n,this.rightButtons=r,this.buildMenuTemplateFunction=i}return(0,We.Z)(e,[{key:"getName",value:function(e){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return this.rightButtons}},{key:"getHtmlId",value:function(e){return this.id}},{key:"getDataSet",value:function(){return null}},{key:"getThumbnail",value:function(){return null}},{key:"onClick",value:function(){}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"moveAt",value:function(e){}},{key:"isDescendantOf",value:function(e){return!1}},{key:"getRootId",value:function(){return""}}]),e}(),wZ=function(e){return function(t){return t.content.getName(e)}},TZ=function(e){return e.content.getId()},SZ=function(e,t){return e.content.getHtmlId(t)},PZ=function(e){return function(t){return t.getChildren(e)}},IZ=function(e){return e.content.getThumbnail()},EZ=function(e){return e.content.getDataSet()},MZ=function(e){return function(t,n){return t.content.buildMenuTemplate(e,n)}},LZ=function(e){return function(t){return t.content.renderRightComponent(e)}},AZ=function(e,t){e.content.rename(t)},OZ=function(e){e.content.onClick()},RZ=function(e){e.content.edit()},FZ=function(e){return function(t){return t.content.getRightButton(e)}},DZ=c.forwardRef((function(e,t){var n=e.project,i=e.chosenLayer,a=e.onChooseLayer,o=e.onSelectLayer,u=e.layout,d=e.eventsFunctionsExtension,p=e.eventsBasedObject,h=e.layersContainer,g=(e.onEditLayerEffects,e.onEditLayer),m=e.onLayersModified,x=e.onRemoveLayer,v=e.onLayerRenamed,b=e.onCreateLayer,C=e.onLayersVisibilityInEditorChanged,y=e.onBackgroundColorChanged,k=e.gameEditorMode,T=(e.hotReloadPreviewButtonProps,c.useState([])),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=c.useContext(Z.Z),M=E.triggerUnsavedChanges,L=c.useContext(D.ZP),A=c.useContext(j.Z),O=c.useContext(gi.Z).currentlyRunningInAppTutorial,R=c.useRef(null),F=(0,gt.Z)(),N=(0,be.UQ)().isMobile,_=(0,Ye.Z)().showDeleteConfirmation,B=c.useCallback((function(){F(),R.current&&R.current.forceUpdateList()}),[F]),U=c.useCallback((function(e){R.current&&R.current.scrollToItemFromId(e)}),[]);c.useImperativeHandle(t,(function(){return{forceUpdateList:function(){F(),R.current&&R.current.forceUpdateList()}}}));var V=c.useCallback((function(e){var t=R.current;t&&(N&&t.scrollToItemFromId(e,"start"),t.renameItemFromId(e))}),[N]),H=c.useCallback((function(e){M(),e?B():F()}),[F,B,M]),z=c.useRef(new ht.ZP({shortcutCallbacks:{}}));c.useEffect((function(){z.current&&(z.current.setShortcutCallback("onDelete",(function(){P.length>0&&P[0].content.delete()})),z.current.setShortcutCallback("onRename",(function(){P.length>0&&V(P[0].content.getId())})))}),[V,P]);var W=c.useCallback((function(){m(),E&&E.triggerUnsavedChanges(),F()}),[F,m,E]),G=c.useCallback((function(){y(),E&&E.triggerUnsavedChanges(),F()}),[F,y,E]),Y=c.useCallback((function(e,t){var r=(0,xt.Z)(t||"Unnamed",(function(e){return h.hasLayerNamed(e)}));h.getLayer(e).setName(r),u?CZ.WholeProjectRefactorer.renameLayerInScene(n,u,e,r):d&&p&&CZ.WholeProjectRefactorer.renameLayerInEventsBasedObject(n,d,p,e,r),v(),W()}),[p,d,h,u,v,n,W]),q=c.useMemo((function(){return n?{project:n,layersContainer:h,chosenLayer:i,onChooseLayer:a,onSelectLayer:o,onDeleteLayer:function(e){var t=e.getName();x(t,(function(e){e&&(h.removeLayer(t),W())}))},onEditLayer:g,onLayersModified:m,editName:V,onRenameLayer:Y,forceUpdate:F,forceUpdateList:B,gdevelopTheme:A,preferences:L,scrollToItem:U,showDeleteConfirmation:_,triggerOnLayersModified:W}:null}),[n,h,i,a,o,g,m,V,Y,F,B,A,L,U,_,W,x]),J=c.useCallback((function(){M(),m(),F()}),[F,m,M]),X=c.useCallback((function(){var e=(0,xt.Z)("Layer",(function(e){return h.hasLayerNamed(e)}));h.insertNewLayer(e,h.getLayersCount());var t=h.getLayer(e);Hi(t),b(),J();var n=hZ(t);R.current&&R.current.openItems([n,jZ]),V(n),B()}),[V,B,h,b,J]),K=c.useCallback((function(){var e=(0,xt.Z)("Lighting",(function(e){return h.hasLayerNamed(e)}));h.insertNewLayer(e,h.getLayersCount());var t=h.getLayer(e);t.setLightingLayer(!0),t.setFollowBaseLayerCamera(!0),t.setAmbientLightColor(200,200,200),b(),J(),B()}),[B,h,b,J]),Q=function(e){var t=e.getLayersCount();return(0,mt.mapReverseFor)(0,t,(function(t){return e.getLayerAt(t).isLightingLayer()})).filter(Boolean).length>0}(h),$=c.useCallback((function(e){return n&&q?[{isRoot:!1,content:new kZ(jZ,"",["embedded-game"===k?{icon:n.areEffectsHiddenInEditor()?(0,f.jsx)(bZ,{}):(0,f.jsx)(vZ,{}),label:n.areEffectsHiddenInEditor()?e._({id:"Display effects/lighting in the editor"}):e._({id:"Disable effects/lighting in the editor"}),click:function(){n.setEffectsHiddenInEditor(!n.areEffectsHiddenInEditor()),C(),F()},id:"show-effects-button"}:null,{icon:(0,f.jsx)(it.Z,{}),label:e._({id:"Add a layer"}),click:X,id:"add-layer-button"}].filter(Boolean),(function(){return["embedded-game"===k?{label:n.areEffectsHiddenInEditor()?e._({id:"Display effects/lighting in the editor"}):e._({id:"Disable effects/lighting in the editor"}),click:function(){n.setEffectsHiddenInEditor(!n.areEffectsHiddenInEditor()),C(),F()}}:null,{label:e._({id:"Add a layer"}),click:X},{label:e._({id:"Add 2D lighting layer"}),enabled:!Q,click:K}].filter(Boolean)})),getChildren:function(e){return null}}].concat((0,r.Z)((0,mt.mapReverseFor)(0,h.getLayersCount(),(function(e){return new ZZ(new gZ(h.getLayerAt(e),q))}))),[u?{isRoot:!1,content:new xZ(u,G),getChildren:function(e){return null}}:null]).filter(Boolean):[]}),[n,q,k,X,u,C,F,Q,K,h,G]),ee=c.useCallback((function(e,t){return P.every((function(t){return t.content.getRootId().length>0&&t.content.getRootId()===e.content.getRootId()}))}),[P]),te=c.useCallback((function(e,t,n){0!==P.length&&(P[0].content.moveAt(t.content.getIndex()+("after"===n?1:0)),H(!0))}),[H,P]),ne=c.useCallback((function(e){1!==P.length||e.isPlaceholder||P[0].content.isDescendantOf(e.content)&&I([])}),[P]),re=n?n.ptr:"no-project",ie=[jZ];return(0,f.jsx)(Ki.Z,{maxWidth:!0,children:(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)("div",{id:"layers-list",style:(0,l.Z)((0,l.Z)({},yZ.listContainer),yZ.autoSizerContainer),onKeyDown:z.current.onKeyDown,onKeyUp:z.current.onKeyUp,children:(0,f.jsx)(Br.qj,{style:yZ.autoSizer,disableWidth:!0,children:function(e){var n=e.height;return(0,f.jsx)(Qi.Z,{ref:R,items:$(t),height:n,forceAllOpened:!!O,getItemName:wZ(t),getItemThumbnail:IZ,getItemChildren:PZ(t),multiSelect:!1,getItemId:TZ,getItemHtmlId:SZ,getItemDataset:EZ,onEditItem:RZ,onCollapseItem:ne,selectedItems:P,onSelectItems:function(e){var t=e[0];t&&(t.isRoot||I(e))},onClickItem:OZ,onRenameItem:AZ,buildMenuTemplate:MZ(t),getItemRightButton:FZ(t),renderRightComponent:LZ(t),onMoveSelectionToItem:function(e,n){return te(t,e,n)},canMoveSelectionToItem:ee,reactDndType:"GD_EXTENSION_ITEM",initiallyOpenedNodeIds:ie,forceDefaultDraggingPreview:!0,shouldHideMenuIcon:function(e){return e.content.getId()===jZ||e.content.getId()===mZ}},re)}})})}})})})),NZ=c.forwardRef((function(e,t){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Layers list"}),scope:"scene-editor-layers-list",children:(0,f.jsx)(DZ,(0,l.Z)({ref:t},e))})})),_Z=n(9215),BZ=n.n(_Z),UZ={flexContainer:{display:"flex",flex:1,position:"relative"}},VZ=function(e){var t=e.children;return(0,f.jsx)(tt.Z,{bounds:!0,children:function(e){var n=e.contentRect,r=e.measureRef;return(0,f.jsx)("div",{style:UZ.flexContainer,ref:r,children:!!n&&!!n.bounds&&t({width:n.bounds.width,height:n.bounds.height})})}})},HZ=["wrappedEditorRef"],zZ=200,WZ=1e3/60,GZ={container:{overflow:"hidden"}},YZ=function(){},qZ=function(e){var t=e.wrappedEditorRef,n=(0,go.Z)(e,HZ),r=c.useContext(D.ZP).values,i=(0,Ps.t)(),a=c.useRef(null),o=c.useRef(null),s=c.useRef(null),u=c.useRef(null),d=c.useRef(null),p=c.useRef(!1),h=c.useRef(null),g=c.useRef(!1),m=c.useRef(0),x=c.useRef(0),v=c.useRef(-5e3),b=c.useRef(5e3),C=c.useRef(-5e3),j=c.useRef(5e3),y=c.useRef(0),Z=c.useRef(0),k=(0,gt.Z)(),T=c.useMemo((function(){return new gy}),[]);if(a.current){var S=a.current.getBoundingClientRect();T.set({left:S.left,top:S.top,right:S.right-50,bottom:S.bottom-50})}var P=c.useCallback((function(){h.current&&clearTimeout(h.current),h.current=setTimeout((function(){i.current&&(p.current=!1,k())}),1500)}),[k,i]),I=(0,sr.N)((function(){P()}),500),E=BZ()((function(){p.current||(p.current=!0,k()),h.current&&(clearTimeout(h.current),h.current=null)}),1e3,{leading:!0,trailing:!1}),M=BZ()(P,1e3,{leading:!0,trailing:!1}),L=c.useCallback((function(e){a.current&&(!T.containsPoint(e.clientX,e.clientY)?(h.current&&clearTimeout(h.current),p.current||E()):!g.current&&p.current&&M())}),[T,M,E]),A=c.useCallback((function(){return!g.current}),[]),O=c.useCallback((function(e,t){return BZ()((function(n){if(y.current){var r=n.clientX-e,i=(b.current-v.current)/y.current,o=t+r*i;m.current=o,a.current&&a.current.scrollTo(o,x.current),k()}else console.error("canvasWidth not initialized")}),WZ,{leading:!1,trailing:!0})}),[k]),R=c.useCallback((function(e,t){return BZ()((function(n){if(Z.current){var r=n.clientY-e,i=(j.current-C.current)/Z.current,o=t+r*i;x.current=o,a.current&&a.current.scrollTo(m.current,o),k()}else console.error("canvasHeight not initialized")}),WZ,{leading:!1,trailing:!0})}),[k]),F=c.useCallback((function(e){return function t(n){g.current=!1,n.target!==o.current&&n.target!==s.current&&P(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[P]),N=c.useCallback((function(e){return function t(n){g.current=!1,n.target!==u.current&&n.target!==d.current&&P(),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}}),[P]),_=c.useCallback((function(e){g.current=!0;var t=e.clientX,n=O(t,m.current),r=F(n);document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}),[O,F]),B=c.useCallback((function(e){g.current=!0;var t=e.clientY,n=R(t,x.current),r=N(n);document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}),[R,N]);c.useEffect((function(){var e=s.current,t=d.current;if(e&&t)return e.addEventListener("mousedown",_),t.addEventListener("mousedown",B),function(){e.removeEventListener("mousedown",_),t.removeEventListener("mousedown",B)}}),[_,B]);var U=c.useCallback((function(e){var t=e.newXValue,n=e.newYValue,r=e.newWidth,i=e.newHeight;A()&&(b.current=Math.max(Math.abs(t)+100,b.current),j.current=Math.max(Math.abs(n)+100,j.current),v.current=-b.current,C.current=-j.current),m.current=t,x.current=n,y.current=r,Z.current=i,p.current||(p.current=!0),I(),k()}),[k,I,A]),V=c.useCallback((function(e){return BZ()((function(){e&&U({newXValue:e.getViewX(),newYValue:e.getViewY(),newWidth:e.getWidth(),newHeight:e.getHeight()})}),WZ,{leading:!1,trailing:!0})()}),[U]),H=function(e){h.current&&clearTimeout(h.current)},z=function(e){g.current||P()},W="calc(100% - ".concat(zZ,"px - ").concat(8,"px)"),G="calc(".concat((m.current-v.current)/(b.current-v.current)*100+"%"," - ").concat(zZ,"px / 2)"),Y="max(min(".concat(G,", ").concat(W,"), ").concat("0%",")"),q="calc(100% - ".concat(zZ,"px - ").concat(8,"px)"),J="calc(".concat((x.current-C.current)/(j.current-C.current)*100+"%"," - ").concat(zZ,"px / 2)"),X="max(min(".concat(J,", ").concat(q,"), ").concat("0%",")"),K=(0,hi.BF)();return(0,f.jsx)(VZ,{children:function(e){var i=e.width,c=e.height;return(0,f.jsxs)("div",{style:GZ.container,children:[void 0!==i&&void 0!==c&&(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Instances editor"}),scope:"scene-editor-canvas",children:(0,f.jsx)(dZ,(0,l.Z)({onViewPositionChanged:"touch"!==K?V:YZ,ref:function(e){t&&t(e),a.current=e},width:i,height:c,screenType:K,onMouseMove:L,onMouseLeave:function(e){var t=e.relatedTarget;!g.current&&t&&t.className&&"string"===typeof t.className&&!t.className.includes("canvas-scrollbar-thumb")&&P()},showObjectInstancesIn3D:r.use3DEditor,showBasicProfilingCounters:r.showBasicProfilingCounters},n))}),"touch"!==K&&(0,f.jsx)("div",{style:{visibility:p.current?"visible":"hidden"},className:"canvas-vertical-scrollbar-track",ref:u,children:(0,f.jsx)("div",{style:{top:X},className:"canvas-scrollbar-thumb canvas-vertical-scrollbar-thumb",ref:d,onMouseEnter:H,onMouseLeave:z})}),"touch"!==K&&(0,f.jsx)("div",{style:{visibility:p.current?"visible":"hidden"},className:"canvas-horizontal-scrollbar-track",ref:o,children:(0,f.jsx)("div",{style:{marginLeft:Y},className:"canvas-scrollbar-thumb canvas-horizontal-scrollbar-thumb",ref:s,onMouseEnter:H,onMouseLeave:z})})]})}})},JZ=n(18624),XZ=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 3.66663C5.60679 3.66663 3.66669 5.60673 3.66669 7.99996C3.66669 10.3932 5.60679 12.3333 8.00002 12.3333C10.3933 12.3333 12.3334 10.3932 12.3334 7.99996C12.3334 5.60673 10.3933 3.66663 8.00002 3.66663ZM2.66669 7.99996C2.66669 5.05444 5.0545 2.66663 8.00002 2.66663C10.9456 2.66663 13.3334 5.05445 13.3334 7.99996C13.3334 10.9455 10.9456 13.3333 8.00002 13.3333C5.05451 13.3333 2.66669 10.9455 2.66669 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33335 7.99996C5.33335 7.72382 5.55721 7.49996 5.83335 7.49996H10.1667C10.4428 7.49996 10.6667 7.72382 10.6667 7.99996C10.6667 8.2761 10.4428 8.49996 10.1667 8.49996H5.83335C5.55721 8.49996 5.33335 8.2761 5.33335 7.99996Z",fill:"currentColor"})]}))})),KZ=n(96355),QZ=n.g.gd,$Z=400,ek=80,tk=40,nk=50,rk={container:{flex:1,display:"flex",flexDirection:"column",alignItems:"stretch"},tableContainer:{flex:1,overflowX:"auto",overflowY:"hidden"}},ik=function(e,t,n){return(e=e.toLowerCase())<(t=t.toLowerCase())?1*n:e>t?-1*n:0},ak=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={searchText:"",sortBy:"",sortDirection:Br.Sr.ASC},e.renderedRows=[],e._searchBar=c.createRef(),e._keyboardShortcuts=new ht.ZP({isActive:function(){return!1},shortcutCallbacks:{}}),e._onRowClick=function(t){var n=t.index;e.renderedRows[n]&&e.props.onSelectInstances([e.renderedRows[n].instance],e._keyboardShortcuts.shouldMultiSelect())},e._rowGetter=function(t){var n=t.index;return e.renderedRows[n]},e._rowClassName=function(t){var n=t.index;if(n<0)return"tableHeaderRow";var r=e.renderedRows[n];return r&&-1!==e.props.selectedInstances.indexOf(r.instance)?"tableSelectedRow":n%2===0?"tableEvenRow":"tableOddRow"},e._renderLockCell=function(t){var n=t.rowData.instance;return(0,f.jsx)($.Z,{size:"small",onClick:function(){n.isSealed()?(n.setSealed(!1),n.setLocked(!1)):n.isLocked()?n.setSealed(!0):n.setLocked(!0),e.props.onInstancesModified([n])},children:n.isLocked()&&n.isSealed()?(0,f.jsx)(XZ,{}):n.isLocked()?(0,f.jsx)(Fo,{}):(0,f.jsx)(pZ,{})})},e._selectFirstInstance=function(){e.renderedRows.length&&e.props.onSelectInstances([e.renderedRows[0].instance],!1)},e._sort=function(t){var n=t.sortBy,r=t.sortDirection;e.setState({sortBy:n,sortDirection:r})},e._orderRenderedRows=function(){e.renderedRows.sort((function(t,n){var r=e.state.sortDirection===Br.Sr.ASC?1:-1;switch(e.state.sortBy){case"name":return ik(t.name,n.name,r);case"x":return r*(parseFloat(t.x)-parseFloat(n.x));case"y":return r*(parseFloat(t.y)-parseFloat(n.y));case"angle":return r*(parseFloat(t.angle)-parseFloat(n.angle));case"layer":return ik(t.layer,n.layer,r);case"locked":return r*(Number(t.locked)-Number(n.locked));case"zOrder":return r*(parseFloat(t.zOrder)-parseFloat(n.zOrder));default:return 0}}))},e}return(0,We.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.instanceRowRenderer=new QZ.InitialInstanceJSFunctor,this.instanceRowRenderer.invoke=function(t){var n=e.state.searchText,r=QZ.wrapPointer(t,QZ.InitialInstance),i=r.getObjectName();n&&-1===i.toLowerCase().indexOf(n.toLowerCase())||e.renderedRows.push({instance:r,name:i,locked:r.isLocked(),x:(0,KZ.q)(r.getX(),2),y:(0,KZ.q)(r.getY(),2),angle:(0,KZ.q)(r.getAngle(),2),layer:r.getLayer(),zOrder:r.getZOrder()})}}},{key:"componentWillUnmount",value:function(){this.instanceRowRenderer&&this.instanceRowRenderer.delete()}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchText,r=t.sortBy,i=t.sortDirection,a=this.props.instances;if(!this.instanceRowRenderer)return null;this.renderedRows.length=0,a.iterateOverInstances(this.instanceRowRenderer),this._orderRenderedRows();var o=a.ptr;return(0,f.jsx)(j.Z.Consumer,{children:function(t){return(0,f.jsxs)("div",{style:rk.container,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(Ge.Z,{value:n,onChange:function(t){return e.setState({searchText:t})},onRequestSearch:e._selectFirstInstance,ref:e._searchBar,placeholder:{id:"Search instances"},autoFocus:"desktop"})})}),(0,f.jsx)("div",{style:rk.tableContainer,onKeyDown:e._keyboardShortcuts.onKeyDown,onKeyUp:e._keyboardShortcuts.onKeyUp,children:(0,f.jsx)(Br.qj,{children:function(t){var n=t.height,a=t.width;return(0,f.jsxs)(Br.iA,{ref:function(t){return e.table=t},headerHeight:30,height:n,className:"gd-table",headerClassName:"tableHeaderColumn",rowCount:e.renderedRows.length,rowGetter:e._rowGetter,rowHeight:32,onRowClick:e._onRowClick,rowClassName:e._rowClassName,sort:e._sort,sortBy:r,sortDirection:i,width:Math.max(a,$Z),children:[(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"Object name"}),dataKey:"name",width:Math.max(.35*a,ek),className:"tableColumn"}),(0,f.jsx)(Br.sg,{label:"",dataKey:"locked",width:Math.max(.05*a,tk),className:"tableColumn",cellRenderer:e._renderLockCell}),(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"X"}),dataKey:"x",width:Math.max(.1*a,tk),className:"tableColumn"}),(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"Y"}),dataKey:"y",width:Math.max(.1*a,tk),className:"tableColumn"}),(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"Angle"}),dataKey:"angle",width:Math.max(.1*a,tk),className:"tableColumn"}),(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"Layer"}),dataKey:"layer",width:Math.max(.2*a,nk),className:"tableColumn"}),(0,f.jsx)(Br.sg,{label:(0,f.jsx)(w.Trans,{id:"Z Order"}),dataKey:"zOrder",width:Math.max(.1*a,tk),className:"tableColumn"})]},o)}})})]})}})}}]),n}(c.Component),ok=c.forwardRef((function(e,t){var n=(0,gt.Z)();return c.useImperativeHandle(t,(function(){return{forceUpdate:n}})),(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Instances list"}),scope:"scene-editor-instances-list",children:(0,f.jsx)(ak,(0,l.Z)({},e))})})),sk=n(53731),lk=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"12",height:"20",viewBox:"0 0 12 20",fill:"none",children:(0,f.jsx)("path",{d:"M6.55 9.792L9.49 15H7.978L5.752 10.73L3.498 15H2.07L4.968 9.862L2.322 5.354H3.834L5.78 8.98L7.74 5.354H9.168L6.55 9.792Z",fill:"currentColor"})}))})),ck=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"20",viewBox:"0 0 17 20",fill:"none",children:(0,f.jsx)("path",{d:"M12.13 5.354L9.022 11.29V15H7.678V11.304L4.57 5.354H6.04L8.392 10.128L10.744 5.354H12.13Z",fill:"currentColor"})}))})),uk=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"20",viewBox:"0 0 16 20",fill:"none",children:(0,f.jsx)("path",{d:"M10.29 15V10.478H6.23V15H4.9V5.354H6.23V9.386H10.29V5.354H11.62V15H10.29Z",fill:"currentColor"})}))})),dk=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"20",viewBox:"0 0 17 20",fill:"none",children:(0,f.jsx)("path",{d:"M13.214 5.354L11.254 15H9.546L7.768 6.922L5.976 15H4.31L2.35 5.354H3.652L5.206 13.838L7.068 5.354H8.482L10.386 13.838L11.996 5.354H13.214Z",fill:"currentColor"})}))})),pk=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"-5 -4 17 18",fill:"none",children:(0,f.jsx)("path",{d:"M2.91112 0.354C4.36712 0.354 5.53378 0.694666 6.41112 1.376C7.29778 2.048 7.74112 3.29867 7.74112 5.128C7.74112 6.91067 7.29778 8.17067 6.41112 8.908C5.53378 9.636 4.46512 10 3.20512 10H0.895117V0.354H2.91112ZM2.22512 1.418V8.95H3.30312C4.19912 8.95 4.92712 8.67467 5.48712 8.124C6.04712 7.57333 6.32712 6.57467 6.32712 5.128C6.32712 4.11067 6.18245 3.33133 5.89312 2.79C5.60378 2.23933 5.23512 1.87533 4.78712 1.698C4.33912 1.51133 3.81178 1.418 3.20512 1.418H2.22512Z",fill:"currentColor"})}))})),fk=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",children:(0,f.jsx)("path",{d:"M10.678 5.354V6.432L5.904 13.866H10.678L10.524 15H4.42V13.936L9.236 6.474H4.924V5.354H10.678Z",fill:"currentColor"})}))})),hk=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50008 3.66699C4.03984 3.66699 3.66675 4.04009 3.66675 4.50033V11.5003C3.66675 11.9606 4.03984 12.3337 4.50008 12.3337H11.5001C11.9603 12.3337 12.3334 11.9606 12.3334 11.5003V4.50033C12.3334 4.04008 11.9603 3.66699 11.5001 3.66699H4.50008ZM2.66675 4.50033C2.66675 3.4878 3.48756 2.66699 4.50008 2.66699H11.5001C12.5126 2.66699 13.3334 3.48781 13.3334 4.50033V11.5003C13.3334 12.5129 12.5126 13.3337 11.5001 13.3337H4.50008C3.48756 13.3337 2.66675 12.5129 2.66675 11.5003V4.50033Z",fill:"currentColor"}),(0,f.jsx)("path",{opacity:"0.8",fillRule:"evenodd",clipRule:"evenodd",d:"M10.8536 4.81344C11.0489 5.0087 11.0489 5.32528 10.8536 5.52055L5.5203 10.8539C5.32504 11.0491 5.00846 11.0491 4.81319 10.8539C4.61793 10.6586 4.61793 10.342 4.81319 10.1468L10.1465 4.81344C10.3418 4.61818 10.6584 4.61818 10.8536 4.81344Z",fill:"currentColor"}),(0,f.jsx)("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M11.0202 7.64645C11.2155 7.84171 11.2155 8.15829 11.0202 8.35355L8.35355 11.0202C8.15829 11.2155 7.84171 11.2155 7.64645 11.0202C7.45118 10.825 7.45118 10.5084 7.64645 10.3131L10.3131 7.64645C10.5084 7.45118 10.825 7.45118 11.0202 7.64645Z",fill:"currentColor"}),(0,f.jsx)("path",{opacity:"0.3",fillRule:"evenodd",clipRule:"evenodd",d:"M11.6869 9.64645C11.8821 9.84171 11.8821 10.1583 11.6869 10.3536L10.3536 11.6869C10.1583 11.8821 9.84171 11.8821 9.64645 11.6869C9.45118 11.4916 9.45118 11.175 9.64645 10.9798L10.9798 9.64645C11.175 9.45118 11.4916 9.45118 11.6869 9.64645Z",fill:"currentColor"})]}))})),gk=n(59517),mk=n(6217),xk=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00016 3.93256L3.93273 8L8.00016 12.0674L12.0676 8L8.00016 3.93256ZM7.46279 3.05572C7.60537 2.91331 7.79865 2.83333 8.00016 2.83333C8.20168 2.83333 8.39495 2.91331 8.53753 3.05572L12.9442 7.46241C13.0866 7.60499 13.1668 7.79848 13.1668 8C13.1668 8.20151 13.0868 8.39478 12.9444 8.53736L8.53775 12.9441C8.39517 13.0865 8.20168 13.1667 8.00016 13.1667C7.79865 13.1667 7.60537 13.0867 7.46279 12.9443L3.05611 8.53759C2.9137 8.395 2.8335 8.20151 2.8335 8C2.8335 7.79848 2.91348 7.60521 3.05589 7.46263L7.46279 3.05572Z",fill:"currentColor"})}))})),vk=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.6537 5.19282C4.64208 3.3546 6.12275 1.85505 7.96096 1.84338C9.7992 1.83171 11.2988 3.31241 11.3104 5.15065L11.3179 6.32914C11.3196 6.60528 11.0972 6.83055 10.8211 6.8323C10.5449 6.83405 10.3197 6.61161 10.3179 6.33548L10.3104 5.15699C10.3023 3.87101 9.25325 2.83519 7.96732 2.84336C6.68136 2.85153 5.64556 3.90054 5.65368 5.18649C5.65368 5.18649 5.65368 5.18649 5.65368 5.18649L5.66115 6.36498C5.6629 6.64112 5.44046 6.86639 5.16432 6.86814C4.88819 6.86989 4.66292 6.64745 4.66117 6.37132L4.6537 5.19282Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.17889 9.16792C5.45503 9.16617 5.6803 9.38861 5.68205 9.66474L5.68952 10.8432C5.68952 10.8432 5.68952 10.8432 5.68952 10.8432C5.69769 12.1292 6.74671 13.165 8.03266 13.1569C9.3186 13.1487 10.3544 12.0997 10.3463 10.8137L10.3388 9.63524C10.3371 9.35911 10.5595 9.13383 10.8356 9.13208C11.1118 9.13034 11.337 9.35277 11.3388 9.62891L11.3463 10.8074C11.3579 12.6456 9.87721 14.1452 8.03898 14.1568C6.20076 14.1685 4.70121 12.6878 4.68954 10.8496L4.68207 9.67108C4.68032 9.39494 4.90276 9.16967 5.17889 9.16792Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.98337 5.37884C8.25951 5.37709 8.48478 5.59953 8.48653 5.87567L8.51341 10.1182C8.51516 10.3944 8.29272 10.6196 8.01659 10.6214C7.74045 10.6231 7.51518 10.4007 7.51343 10.1246L7.48655 5.882C7.4848 5.60586 7.70724 5.38059 7.98337 5.37884Z",fill:"currentColor"})]}))})),bk=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.65394 5.19279C4.64233 3.35457 6.12299 1.85502 7.96121 1.84335C9.79944 1.83168 11.299 3.31238 11.3107 5.15062L11.3181 6.32911C11.3199 6.60525 11.0974 6.83052 10.8213 6.83227C10.5452 6.83402 10.3199 6.61158 10.3182 6.33544L10.3107 5.15696C10.3025 3.87098 9.2535 2.83516 7.96756 2.84333C6.68161 2.8515 5.6458 3.90051 5.65392 5.18646L5.66139 6.36495C5.66314 6.64109 5.4407 6.86636 5.16457 6.86811C4.88843 6.86986 4.66316 6.64742 4.66141 6.37128L4.65394 5.19279Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.17914 9.16789C5.45528 9.16614 5.68055 9.38858 5.6823 9.66471L5.68976 10.8432C5.69793 12.1291 6.74695 13.165 8.0329 13.1568C9.31884 13.1487 10.3547 12.0997 10.3465 10.8137L10.3391 9.63521C10.3373 9.35908 10.5597 9.1338 10.8359 9.13205C11.112 9.1303 11.3373 9.35274 11.339 9.62888L11.3465 10.8074C11.3581 12.6456 9.87746 14.1452 8.03922 14.1568C6.20101 14.1684 4.70146 12.6878 4.68978 10.8495L4.68232 9.67105C4.68057 9.39491 4.903 9.16964 5.17914 9.16789Z",fill:"currentColor"})]}))})),Ck=n(50813),jk=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{d:"M18.3354 16.8292C18.7059 17.0144 18.8561 17.4649 18.6708 17.8354C17.836 19.5051 16.6858 20.3836 15.5412 20.8248C14.4377 21.2502 13.3821 21.2501 12.7617 21.25H12.74C10.7017 21.25 8.93591 20.0576 7.71129 18.2913C6.68276 16.8079 6.0001 14.8784 5.80645 12.75H3C2.58579 12.75 2.25 12.4142 2.25 12C2.25 11.5858 2.58579 11.25 3 11.25H5.75224C5.79738 8.72852 6.52384 6.42139 7.71129 4.70871C8.93591 2.94243 10.7017 1.75 12.74 1.75C14.9841 1.75 16.8921 3.19102 18.1228 5.25995L18.7885 3.26283C18.9195 2.86987 19.3442 2.6575 19.7372 2.78849C20.1301 2.91947 20.3425 3.34421 20.2115 3.73717L19.2115 6.73717C19.1094 7.04343 18.8228 7.25 18.5 7.25H14.5C14.0858 7.25 13.75 6.91421 13.75 6.5C13.75 6.08579 14.0858 5.75 14.5 5.75H16.6615C15.6172 4.14409 14.205 3.25 12.74 3.25C11.332 3.25 9.97781 4.07229 8.94399 5.56337C7.94886 6.99866 7.29758 8.99981 7.2525 11.25H21C21.4142 11.25 21.75 11.5858 21.75 12C21.75 12.4142 21.4142 12.75 21 12.75H7.31336C7.50184 14.5909 8.09894 16.2178 8.94399 17.4366C9.9778 18.9277 11.332 19.75 12.74 19.75C13.3598 19.75 14.1724 19.7448 15.0017 19.4252C15.8027 19.1164 16.664 18.4949 17.3292 17.1646C17.5144 16.7941 17.9649 16.6439 18.3354 16.8292Z",fill:"currentColor"})}))})),yk=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{d:"M12 21.75C11.5858 21.75 11.25 21.4142 11.25 21V18.7298C8.92433 18.604 6.8075 17.8972 5.20869 16.7887C3.44242 15.5641 2.25 13.7983 2.25 11.76V11.7383C2.24994 11.1179 2.24984 10.0623 2.67519 8.95884C3.11641 7.81418 3.99487 6.66404 5.66459 5.82918C6.03508 5.64394 6.48558 5.79411 6.67082 6.16459C6.85606 6.53507 6.7059 6.98558 6.33541 7.17082C5.00513 7.83596 4.38359 8.69727 4.07481 9.49834C3.75516 10.3276 3.75 11.1402 3.75 11.76C3.75 13.168 4.57228 14.5222 6.06336 15.556C7.39142 16.4768 9.20395 17.1032 11.25 17.2274V3C11.25 2.58579 11.5858 2.25 12 2.25C12.4142 2.25 12.75 2.58579 12.75 3V17.2274C14.796 17.1032 16.6086 16.4768 17.9366 15.556C19.4277 14.5222 20.25 13.168 20.25 11.76C20.25 10.295 19.3559 8.8828 17.75 7.83851V10C17.75 10.4142 17.4142 10.75 17 10.75C16.5858 10.75 16.25 10.4142 16.25 10V6C16.25 5.67718 16.4566 5.39057 16.7628 5.28849L19.7628 4.28849C20.1558 4.1575 20.5805 4.36987 20.7115 4.76283C20.8425 5.15579 20.6301 5.58053 20.2372 5.71151L18.2401 6.37722C20.309 7.60786 21.75 9.51592 21.75 11.76C21.75 13.7983 20.5576 15.5641 18.7913 16.7887C17.1925 17.8972 15.0757 18.604 12.75 18.7298V21C12.75 21.4142 12.4142 21.75 12 21.75Z",fill:"currentColor"})}))})),Zk=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{d:"M10.416 1.37604C10.0714 1.14628 9.60573 1.23941 9.37596 1.58405C9.1462 1.9287 9.23933 2.39435 9.58397 2.62412L10.6599 3.34142C5.90924 3.99445 2.25 8.06994 2.25 13.0001C2.25 18.3849 6.61523 22.7501 12 22.7501C17.3848 22.7501 21.75 18.3849 21.75 13.0001C21.75 12.5859 21.4142 12.2501 21 12.2501C20.5858 12.2501 20.25 12.5859 20.25 13.0001C20.25 17.5565 16.5564 21.2501 12 21.2501C7.44365 21.2501 3.75 17.5565 3.75 13.0001C3.75 8.73222 6.99073 5.22127 11.1456 4.79378L9.46967 6.46975C9.17678 6.76264 9.17678 7.23752 9.46967 7.53041C9.76256 7.8233 10.2374 7.8233 10.5303 7.53041L13.5303 4.53041C13.6892 4.37153 13.7685 4.14978 13.7463 3.92618C13.7242 3.70258 13.603 3.50068 13.416 3.37604L10.416 1.37604Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M12 15.7501C11.5858 15.7501 11.25 15.4143 11.25 15.0001V13.2501H9.5C9.08579 13.2501 8.75 12.9143 8.75 12.5001C8.75 12.0859 9.08579 11.7501 9.5 11.7501H11.25V10.0001C11.25 9.58587 11.5858 9.25008 12 9.25008C12.4142 9.25008 12.75 9.58587 12.75 10.0001V11.7501H14.5C14.9142 11.7501 15.25 12.0859 15.25 12.5001C15.25 12.9143 14.9142 13.2501 14.5 13.2501H12.75V15.0001C12.75 15.4143 12.4142 15.7501 12 15.7501Z",fill:"currentColor"})]}))})),kk=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.32922 17.3355C2.14398 16.965 2.29415 16.5145 2.66463 16.3293L3.56463 15.8793C3.93511 15.694 4.38562 15.8442 4.57086 16.2147C4.7561 16.5851 4.60594 17.0356 4.23546 17.2209L3.33546 17.6709C2.96497 17.8561 2.51447 17.706 2.32922 17.3355ZM5.92922 15.5355C5.74398 15.165 5.89415 14.7145 6.26463 14.5292L8.06463 13.6292C8.43511 13.444 8.88562 13.5942 9.07086 13.9646C9.2561 14.3351 9.10594 14.7856 8.73545 14.9709L6.93545 15.8709C6.56497 16.0561 6.11447 15.906 5.92922 15.5355ZM10.4292 13.2854C10.244 12.915 10.3941 12.4645 10.7646 12.2792L12.5646 11.3792C12.9351 11.194 13.3856 11.3441 13.5709 11.7146C13.7561 12.0851 13.6059 12.5356 13.2355 12.7208L11.4355 13.6208C11.065 13.8061 10.6145 13.6559 10.4292 13.2854ZM14.9292 11.0354C14.744 10.6649 14.8941 10.2144 15.2646 10.0292L17.0646 9.12917C17.4351 8.94393 17.8856 9.0941 18.0709 9.46458C18.2561 9.83506 18.1059 10.2856 17.7355 10.4708L15.9355 11.3708C15.565 11.5561 15.1145 11.4059 14.9292 11.0354ZM19.4292 8.78539C19.244 8.41491 19.3941 7.9644 19.7646 7.77916L20.6646 7.32915C21.0351 7.14391 21.4856 7.29408 21.6709 7.66456C21.8561 8.03504 21.7059 8.48555 21.3355 8.67079L20.4355 9.1208C20.065 9.30604 19.6145 9.15587 19.4292 8.78539Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.6709 17.3355C21.4856 17.7059 21.0351 17.8561 20.6646 17.6709L19.7646 17.2209C19.3942 17.0356 19.244 16.5851 19.4292 16.2146C19.6145 15.8442 20.065 15.694 20.4355 15.8792L21.3355 16.3292C21.7059 16.5145 21.8561 16.965 21.6709 17.3355ZM18.0709 15.5355C17.8856 15.9059 17.4351 16.0561 17.0646 15.8709L15.2646 14.9709C14.8942 14.7856 14.744 14.3351 14.9292 13.9646C15.1145 13.5942 15.565 13.444 15.9355 13.6292L17.7355 14.5292C18.1059 14.7145 18.2561 15.165 18.0709 15.5355ZM13.5709 13.2855C13.3856 13.6559 12.9351 13.8061 12.5646 13.6209L10.7646 12.7209C10.3942 12.5356 10.244 12.0851 10.4292 11.7146C10.6145 11.3441 11.065 11.194 11.4355 11.3792L13.2355 12.2792C13.606 12.4645 13.7561 12.915 13.5709 13.2855ZM9.07088 11.0355C8.88563 11.4059 8.43513 11.5561 8.06465 11.3709L6.26465 10.4709C5.89416 10.2856 5.74399 9.83511 5.92924 9.46463C6.11448 9.09414 6.56498 8.94397 6.93547 9.12922L8.73547 10.0292C9.10595 10.2145 9.25612 10.665 9.07088 11.0355ZM4.57088 8.78545C4.38564 9.15593 3.93513 9.3061 3.56465 9.12085L2.66465 8.67085C2.29416 8.48561 2.144 8.03511 2.32924 7.66462C2.51448 7.29414 2.96498 7.14397 3.33547 7.32921L4.23547 7.77921C4.60595 7.96446 4.75612 8.41496 4.57088 8.78545Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.34808 1.50476C7.25003 1.28516 6.43937 2.50911 7.07001 3.43445L11.0289 9.24331C11.4795 9.90457 12.4268 9.97795 12.974 9.39399L16.9328 5.16868C17.6029 4.4535 17.2268 3.2805 16.2658 3.0883L8.34808 1.50476ZM8.65439 3.09573L15.531 4.47104L12.0927 8.14074L8.65439 3.09573Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.3263 22.2809C16.4823 22.6277 17.4098 21.2971 16.6846 20.3324L12.9409 15.3533C12.534 14.8121 11.7702 14.6933 11.2181 15.0852L7.40035 17.796C6.5518 18.3984 6.76803 19.7134 7.76483 20.0125L15.3263 22.2809ZM15.0282 20.6254L8.686 18.7228L11.8882 16.4492L15.0282 20.6254Z",fill:"currentColor"})]}))})),wk=function(e){var t=e.oldReferenceValue;return e.newReferenceValue/t*e.valueToApplyTo},Tk=function(e){var t=e.i18n,n=e.onEditObject,r=e.is3DInstance;return{label:t._({id:"Edit object"}),disabled:"onValuesDifferent",nonFieldType:"button",getIcon:r?function(e){return(0,f.jsx)(zb,(0,l.Z)({},e))}:function(e){return(0,f.jsx)(Hb,(0,l.Z)({},e))},getValue:function(e){return e.getObjectName()},onClick:function(e){return n(e.getObjectName())}}},Sk=function(e){var t=e.i18n;return[{name:"Rotation X",getLabel:function(){return t._({id:"Rotation (X)"})},valueType:"number",getValue:function(e){return e.getRotationX()},setValue:function(e,t){return e.setRotationX(t)},renderLeftIcon:function(e){return(0,f.jsx)(jk,{className:e})}},{name:"Rotation Y",getLabel:function(){return t._({id:"Rotation (Y)"})},valueType:"number",getValue:function(e){return e.getRotationY()},setValue:function(e,t){return e.setRotationY(t)},renderLeftIcon:function(e){return(0,f.jsx)(yk,{className:e})}}]},Pk=function(e){var t=e.i18n;return{name:"Angle",getLabel:function(){return t._({id:"Rotation (Z)"})},valueType:"number",getValue:function(e){return e.getAngle()},setValue:function(e,t){return e.setAngle(t)},renderLeftIcon:function(e){return(0,f.jsx)(Zk,{className:e})}}},Ik=function(e){var t=e.i18n;return[{name:"X",getLabel:function(){return t._({id:"X"})},valueType:"number",getValue:function(e){return e.getX()},setValue:function(e,t){return e.setX(t)},renderLeftIcon:function(e){return(0,f.jsx)(lk,{className:e})}},{name:"Y",getLabel:function(){return t._({id:"Y"})},valueType:"number",getValue:function(e){return e.getY()},setValue:function(e,t){return e.setY(t)},renderLeftIcon:function(e){return(0,f.jsx)(ck,{className:e})}}]},Ek=function(e){var t=e.i18n;return{name:"Z",getLabel:function(){return t._({id:"Z"})},valueType:"number",getValue:function(e){return e.getZ()},setValue:function(e,t){return e.setZ(t)},renderLeftIcon:function(e){return(0,f.jsx)(fk,{className:e})}}},Mk=function(e){var t=e.i18n,n=e.layersContainer;return{name:"Layer",getLabel:function(){return t._({id:"Layer"})},valueType:"string",getChoices:function(){return pC(n)},getValue:function(e){return e.getLayer()},setValue:function(e,t){return e.setLayer(t)},renderLeftIcon:function(e){return(0,f.jsx)(Oj,{className:e})}}},Lk=function(e){var t=e.i18n;return{name:"Z Order",getLabel:function(){return t._({id:"Z Order"})},valueType:"number",getValue:function(e){return e.getZOrder()},setValue:function(e,t){return e.setZOrder(t)},renderLeftIcon:function(e){return(0,f.jsx)(fk,{className:e})}}},Ak=function(e){var t=e.i18n;return{name:"Title",type:"row",preventWrap:!0,children:[{name:"Instance",title:t._({id:"Instance"}),renderLeftIcon:function(e){return(0,f.jsx)(xk,{className:e,style:Uk.icon})},getValue:function(e){return e.getObjectName()},nonFieldType:"title",defaultValue:t._({id:"Different objects"})},{name:"Lock instance",getLabel:function(e){return e.isSealed()?t._({id:"Free instance"}):e.isLocked()?t._({id:"Prevent selection in the editor"}):t._({id:"Lock position/angle in the editor"})},valueType:"enumIcon",renderIcon:function(e){return"sealed"===e?(0,f.jsx)(XZ,{style:Uk.icon}):"locked"===e?(0,f.jsx)(Fo,{style:Uk.icon}):(0,f.jsx)(pZ,{style:Uk.icon})},isHighlighted:function(e){return"locked"===e||"sealed"===e},getValue:function(e){return e.isSealed()?"sealed":e.isLocked()?"locked":"free"},setValue:function(e,t){e.setSealed("sealed"===t),e.setLocked("sealed"===t||"locked"===t)},getNextValue:function(e){return"free"===e?"locked":"locked"===e?"sealed":"free"}}]}},Ok=function(e){var t=e.i18n,n=e.getInstanceWidth,r=e.getInstanceHeight,i=e.getInstanceDepth,a=e.forceUpdate;return{name:"Width",getLabel:function(){return t._({id:"Width"})},valueType:"number",getValue:n,setValue:function(e,t){var o=e.shouldKeepRatio(),s=Math.max(t,0);if(o){var l=n(e)||1;e.setCustomWidth(s),e.setCustomHeight(wk({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:r(e)})),e.setCustomDepth(wk({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:i(e)}))}else e.setCustomWidth(s),e.setCustomHeight(r(e)),e.setCustomDepth(i(e));e.setHasCustomSize(!0),e.setHasCustomDepth(!0),a()},renderLeftIcon:function(e){return(0,f.jsx)(dk,{className:e})},getEndAdornmentIcon:function(e){return e.hasCustomDepth()||e.hasCustomSize()?function(e){return(0,f.jsx)(Ck.Z,{className:e})}:null},onClickEndAdornment:function(e){e.setHasCustomSize(!1),e.setHasCustomDepth(!1),a()}}},Rk=function(e){var t=e.i18n,n=e.getInstanceWidth,r=e.getInstanceHeight,i=e.getInstanceDepth,a=e.forceUpdate;return{name:"Height",getLabel:function(){return t._({id:"Height"})},valueType:"number",getValue:r,setValue:function(e,t){var o=e.shouldKeepRatio(),s=Math.max(t,0);if(o){var l=r(e)||1;e.setCustomWidth(wk({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:n(e)})),e.setCustomHeight(s),e.setCustomDepth(wk({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:i(e)}))}else e.setCustomWidth(n(e)),e.setCustomHeight(s),e.setCustomDepth(i(e));e.setHasCustomSize(!0),e.setHasCustomDepth(!0),a()},renderLeftIcon:function(e){return(0,f.jsx)(uk,{className:e})},getEndAdornmentIcon:function(e){return e.hasCustomDepth()||e.hasCustomSize()?function(e){return(0,f.jsx)(Ck.Z,{className:e})}:null},onClickEndAdornment:function(e){e.setHasCustomSize(!1),e.setHasCustomDepth(!1),a()}}},Fk=function(e){var t=e.i18n,n=e.getInstanceWidth,r=e.getInstanceHeight,i=e.getInstanceDepth,a=e.forceUpdate;return{name:"Depth",getLabel:function(){return t._({id:"Depth"})},valueType:"number",getValue:i,setValue:function(e,t){var o=e.shouldKeepRatio(),s=Math.max(t,0);if(o){var l=i(e)||1;e.setCustomWidth(wk({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:n(e)})),e.setCustomHeight(wk({oldReferenceValue:l,newReferenceValue:s,valueToApplyTo:r(e)})),e.setCustomDepth(s)}else e.setCustomWidth(n(e)),e.setCustomHeight(r(e)),e.setCustomDepth(s);e.setHasCustomSize(!0),e.setHasCustomDepth(!0),a()},renderLeftIcon:function(e){return(0,f.jsx)(pk,{className:e})},getEndAdornmentIcon:function(e){return e.hasCustomDepth()||e.hasCustomSize()?function(e){return(0,f.jsx)(Ck.Z,{className:e})}:null},onClickEndAdornment:function(e){e.setHasCustomSize(!1),e.setHasCustomDepth(!1),a()}}},Dk=function(e){var t=e.i18n;e.getInstanceWidth,e.getInstanceHeight,e.getInstanceDepth,e.forceUpdate;return{name:"Keep ratio",getLabel:function(){return t._({id:"Keep ratio"})},valueType:"enumIcon",isHighlighted:function(e){return e},renderIcon:function(e){return e?(0,f.jsx)(vk,{style:Uk.icon}):(0,f.jsx)(bk,{style:Uk.icon})},getValue:function(e){return e.shouldKeepRatio()},setValue:function(e,t){return e.setShouldKeepRatio(t)},getNextValue:function(e){return!e}}},Nk=function(e){var t=e.i18n;return{name:"Opacity",getLabel:function(){return t._({id:"Opacity"})},valueType:"number",getValue:function(e){var t=e.getOpacity();return Math.round(t/255*100)},setValue:function(e,t){var n=Math.round(t/100*255),r=Math.max(0,Math.min(255,n));e.setOpacity(r)},renderLeftIcon:function(e){return(0,f.jsx)(hk,{className:e})},getDisplayedValueFromValue:function(e){return"".concat(e,"%")},getValueFromDisplayedValue:function(e){return e.replace("%","")}}},_k=function(e){var t=e.i18n,n=e.canFlipZ;return{name:"Flip",nonFieldType:"toggleButtons",buttons:[{name:"Flip horizontal",renderIcon:function(e){return(0,f.jsx)(gk.Z,{className:e})},tooltip:t._({id:"Flip horizontally"}),getValue:function(e){return e.isFlippedX()},setValue:function(e,t){return e.setFlippedX(t)}},{name:"Flip vertical",tooltip:t._({id:"Flip vertically"}),renderIcon:function(e){return(0,f.jsx)(mk.Z,{className:e})},getValue:function(e){return e.isFlippedY()},setValue:function(e,t){return e.setFlippedY(t)}},n?{name:"Flip Z",tooltip:t._({id:"Flip along Z axis"}),renderIcon:function(e){return(0,f.jsx)(kk,{className:e})},getValue:function(e){return e.isFlippedZ()},setValue:function(e,t){return e.setFlippedZ(t)}}:null].filter(Boolean)}},Bk=n.g.gd,Uk={icon:{fontSize:18},scrollView:{paddingTop:M.XW}},Vk=function(){console.warn("An instance tried to refresh all fields, but the editor doesn't support it.")},Hk=function(e){var t=e.instances,n=e.i18n,i=e.project,a=e.layout,o=e.objectsContainer,u=e.globalObjectsContainer,d=e.layersContainer,p=e.unsavedChanges,h=e.historyHandler,g=e.editObjectInPropertiesPanel,m=e.onGetInstanceSize,x=e.editInstanceVariables,v=e.onInstancesModified,b=e.projectScopedContainersAccessor,C=e.tileMapTileSelection,j=e.onSelectTileMapTile,y=e.isVariableListLocked,Z=(0,gt.Z)(),k=c.useRef(null),T=c.useRef(null),S=t[0],P=1===t.length,I=c.useCallback((function(e){T.current&&T.current.scrollBy(e)}),[]),E=c.useMemo((function(){if(!S)return{object:void 0,instanceSchema:void 0};var e=S.getObjectName(),t=(0,iu.Z)(u,o,e),a=S.getCustomProperties(u||o,o);if(!t)return{object:void 0,instanceSchema:void 0};var c=Bk.MetadataProvider.getObjectMetadata(i.getCurrentPlatform(),t.getType()),p=c.isRenderedIn3D(),f=c.hasDefaultBehavior("OpacityCapability::OpacityBehavior"),h=c.hasDefaultBehavior("FlippableCapability::FlippableBehavior"),x=c.hasDefaultBehavior("Scene3D::Base3DBehavior"),v=(0,Gn.ZP)({properties:a,defaultValueProperties:null,getProperties:function(e){return e.getCustomProperties(u||o,o)},onUpdateProperty:function(e,t,n){return e.updateCustomProperty(t,n,u||o,o)}}),b=function(e,t){var n=(0,r.Z)(e),i=n.findIndex((function(e){return e.name&&"animation"===e.name})),a={nonFieldType:"sectionTitle",name:"Content",title:t._({id:"Content"}),getValue:void 0};if(-1===i)return n.length>0&&n.unshift(a),n;var o=n.splice(i,1),c=(0,s.Z)(o,1)[0],u=[{name:"Animation",type:"row",title:t._({id:"Animation"}),children:[(0,l.Z)((0,l.Z)({},c),{},{hideLabel:!0})]}];return n.length>0&&u.push(a),n.unshift.apply(n,u),n}(v,n),C=function(e){var t=e.is3DInstance,n=e.hasOpacity,i=e.canBeFlippedXY,a=e.canBeFlippedZ,o=e.i18n,s=e.forceUpdate,l=e.onEditObject,c=e.onGetInstanceSize,u=e.layersContainer,d=function(e){return e.hasCustomSize()?e.getCustomWidth():c(e)[0]},p=function(e){return e.hasCustomSize()?e.getCustomHeight():c(e)[1]},f=function(e){return e.hasCustomDepth()?e.getCustomDepth():c(e)[2]};return t?[Ak({i18n:o}),Tk({i18n:o,onEditObject:l,is3DInstance:t}),{name:"Position",type:"row",preventWrap:!0,removeSpacers:!0,children:[].concat((0,r.Z)(Ik({i18n:o})),[Ek({i18n:o})])},{name:"Size",type:"row",preventWrap:!0,children:[{name:"Custom size",type:"column",children:[Ok({i18n:o,getInstanceWidth:d,getInstanceHeight:p,getInstanceDepth:f,forceUpdate:s}),Rk({i18n:o,getInstanceWidth:d,getInstanceHeight:p,getInstanceDepth:f,forceUpdate:s}),Fk({i18n:o,getInstanceWidth:d,getInstanceHeight:p,getInstanceDepth:f,forceUpdate:s})]},{name:"Keep ratio column",nonFieldType:"verticalCenterWithBar",child:Dk({i18n:o,getInstanceWidth:d,getInstanceHeight:p,getInstanceDepth:f,forceUpdate:s})}]},n?{name:"Opacity",type:"row",preventWrap:!0,removeSpacers:!0,children:[Nk({i18n:o})]}:null,Mk({i18n:o,layersContainer:u}),{name:"Rotation",type:"row",title:o._({id:"Rotation"}),preventWrap:!0,removeSpacers:!0,children:i?[_k({i18n:o,canFlipZ:a})]:[]},{name:"Rotation X and Y",type:"row",preventWrap:!0,removeSpacers:!0,children:[].concat((0,r.Z)(Sk({i18n:o})),[Pk({i18n:o})])}].filter(Boolean):[Ak({i18n:o}),Tk({i18n:o,onEditObject:l,is3DInstance:t}),{name:"Position",type:"row",preventWrap:!0,removeSpacers:!0,children:Ik({i18n:o})},Lk({i18n:o}),{name:"Size",type:"row",preventWrap:!0,children:[{name:"Custom size",type:"column",children:[Ok({i18n:o,getInstanceWidth:d,getInstanceHeight:p,getInstanceDepth:f,forceUpdate:s}),Rk({i18n:o,getInstanceWidth:d,getInstanceHeight:p,getInstanceDepth:f,forceUpdate:s})]},{name:"Keep ratio column",nonFieldType:"verticalCenterWithBar",child:Dk({i18n:o,getInstanceWidth:d,getInstanceHeight:p,getInstanceDepth:f,forceUpdate:s})}]},n?{name:"Opacity",type:"row",preventWrap:!0,removeSpacers:!0,children:[Nk({i18n:o})]}:null,Mk({i18n:o,layersContainer:u}),{name:"Rotation",type:"row",title:o._({id:"Rotation"}),preventWrap:!0,removeSpacers:!0,children:i?[_k({i18n:o,canFlipZ:a})]:[]},{name:"Rotation Z",type:"row",preventWrap:!0,removeSpacers:!0,children:[Pk({i18n:o})]}].filter(Boolean)}({i18n:n,is3DInstance:p,hasOpacity:f,canBeFlippedXY:h,canBeFlippedZ:x,onGetInstanceSize:m,onEditObject:g,layersContainer:d,forceUpdate:Z}).concat(b);return{object:t,instanceSchema:C}}),[S,u,o,i,n,Z,d,m,g]),L=E.object,A=E.instanceSchema,O=!!L&&"TileMap::SimpleTileMap"===L.getType();return c.useEffect((function(){return O||j(null),function(){return j(null)}}),[O,j]),c.useEffect((function(){j(null)}),[S.ptr,j]),L&&S&&A?(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Instance properties"}),scope:"scene-editor-instance-properties",children:(0,f.jsx)(ft.Z,{ref:T,autoHideScrollbar:!0,style:Uk.scrollView,children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,id:"instance-properties-editor",children:[(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(sk.ZP,{unsavedChanges:p,schema:A,instances:t,onInstancesModified:v,onRefreshAllFields:Vk}),(0,f.jsx)(M.LZ,{})]}),O&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(sk.Z0,{}),(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(M.x1,{alignItems:"center",justifyContent:"space-between",children:(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Tilemap painter"})})}),(0,f.jsx)(rZ.ZP,{project:i,objectConfiguration:L.getConfiguration(),tileMapTileSelection:C,onSelectTileMapTile:j,showPaintingToolbar:!0,allowMultipleSelection:!1,onScrollY:I,allowRectangleSelection:!0,interactive:!0})]})]}),L&&P?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(sk.Z0,{}),(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Instance Variables"})}),(0,f.jsxs)(M.x1,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)($.Z,{size:"small",onClick:function(){x(S)},children:(0,f.jsx)(so.Z,{style:Uk.icon})}),y?null:(0,f.jsx)($.Z,{size:"small",onClick:k.current?k.current.addVariable:void 0,children:(0,f.jsx)(it.Z,{style:Uk.icon})})]})]})}),(0,f.jsx)(Ln,{ref:k,projectScopedContainersAccessor:b,directlyStoreValueChangesWhileEditing:!0,inheritedVariablesContainer:L.getVariables(),variablesContainer:S.getVariables(),areObjectVariables:!0,size:"compact",onComputeAllVariableNames:function(){return L&&a?_n.findAllObjectVariables(i.getCurrentPlatform(),i,a,L.getName()):[]},historyHandler:h,toolbarIconStyle:Uk.icon,compactEmptyPlaceholderText:(0,f.jsx)(w.Trans,{id:"There are no variables on this instance."}),isListLocked:y})]}):null]})},t.map((function(e){return""+e.ptr})).join(";"))}):null},zk=n(70834),Wk=function(e){var t=e.project,n=e.behaviorMetadata,r=e.behavior,i=e.object,a=e.onOpenFullEditor,o=e.onBehaviorUpdated,l=e.resourceManagementProps,u=n.getOpenFullEditorLabel(),d=(0,gt.W)(),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useMemo((function(){return(0,Gn.ZP)({properties:r.getProperties(),defaultValueProperties:n.getProperties(),getProperties:function(e){return e.getProperties()},onUpdateProperty:function(e,t,n){e.updateProperty(t,n)},object:i,visibility:"All"})}),[h,r,n,i]);return(0,f.jsx)(_.ak,{expand:!0,noMargin:!0,noOverflowParent:!0,children:(0,f.jsx)(zk._6,{project:t,object:i,schema:m,instances:[r],onInstancesModified:o,resourceManagementProps:l,placeholder:(0,f.jsx)(w.Trans,{id:"Nothing to configure for this behavior."}),customizeBasicSchema:function(e){return function(e){var t=e.schema,n=e.fullEditorLabel,r=(e.behavior,e.onOpenFullEditor);if(!n)return t;var i={label:n,disabled:"onValuesDifferent",nonFieldType:"button",showRightIcon:!0,getIcon:function(e){return(0,f.jsx)(so.Z,{style:e})},getValue:function(e){return e.getName()},onClick:function(e){return r()}},a=!1;return t.forEach((function(e){e.children&&""===e.name&&(e.children.push(i),a=!0)})),a||t.push(i),t}({schema:e,fullEditorLabel:u,behavior:r,onOpenFullEditor:a})},onRefreshAllFields:g})})},Gk=n(19210),Yk=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"3.5",stroke:"currentColor",fill:"none"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.49303 6.80026C5.69538 6.61236 6.01175 6.62408 6.19965 6.82643L7.99992 8.76519L9.80019 6.82643C9.98809 6.62408 10.3045 6.61236 10.5068 6.80026C10.7092 6.98816 10.7209 7.30453 10.533 7.50688L8.36632 9.84022C8.27171 9.9421 8.13896 9.99999 7.99992 9.99999C7.86089 9.99999 7.72813 9.9421 7.63352 9.84022L5.46686 7.50688C5.27896 7.30453 5.29067 6.98816 5.49303 6.80026Z",fill:"currentColor"})]}))})),qk=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"3.5",stroke:"currentColor",fill:"none"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.80035 5.49309C6.98825 5.29073 7.30462 5.27902 7.50698 5.46692L9.84031 7.63359C9.94219 7.72819 10.0001 7.86095 10.0001 7.99998C10.0001 8.13902 9.94219 8.27177 9.84031 8.36638L7.50698 10.533C7.30462 10.7209 6.98825 10.7092 6.80035 10.5069C6.61245 10.3045 6.62417 9.98815 6.82652 9.80025L8.76528 7.99998L6.82652 6.19971C6.62417 6.01181 6.61245 5.69544 6.80035 5.49309Z",fill:"currentColor"})]}))})),Jk=function(e){var t=e.schema,n=e.fullEditorLabel,r=(e.object,e.onEditObject);if(!n)return t;var i={label:n,disabled:"onValuesDifferent",nonFieldType:"button",showRightIcon:!0,getIcon:function(e){return(0,f.jsx)(so.Z,{style:e})},getValue:function(e){return e.object.getName()},onClick:function(e){var t=e.object;return r(t)}},a=!1;return t.forEach((function(e){e.children&&""===e.name&&(e.children.push(i),a=!0)})),a||t.push(i),t},Xk=n.g.gd,Kk=function(e){var t=e.project,n=e.resourceManagementProps,r=e.unsavedChanges,i=e.customObjectConfiguration,a=e.childObject,o=e.onEditObject,l=Xk.MetadataProvider.getObjectMetadata(t.getCurrentPlatform(),a.getType()),u=l?l.getOpenFullEditorLabel():null,d=i.getChildObjectConfiguration(a.getName()),p=Xk.castObject(d,Xk.ObjectConfiguration),h=(0,gt.W)(),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useMemo((function(){return(0,Gn.ZP)({properties:p.getProperties(),defaultValueProperties:null,getProperties:function(e){e.object;return e.objectConfiguration.getProperties()},onUpdateProperty:function(e,t,n){e.object;return e.objectConfiguration.updateProperty(t,n)},visibility:"All"})}),[m,p]);return(0,f.jsx)(_.ak,{noMargin:!0,noOverflowParent:!0,children:(0,f.jsx)(zk._6,{project:t,resourceManagementProps:n,unsavedChanges:r,schema:v,instances:[{object:a,objectConfiguration:p}],onInstancesModified:function(){},onRefreshAllFields:x,placeholder:(0,f.jsx)(w.Trans,{id:"This object has no properties."}),customizeBasicSchema:function(e){return Jk({schema:e,fullEditorLabel:u,object:a,onEditObject:o})}})})},Qk=n(86065),$k=n(64949),ew=n(43416),tw=n(87567),nw={icon:{fontSize:18},scrollView:{paddingTop:M.XW,overflowX:"hidden"},hiddenContent:{display:"none"},subPanelContentContainer:{display:"flex",flexDirection:"column",flex:1,paddingLeft:3*M.XW,paddingRight:M.XW}},rw=(0,fp.vA)("/interface/scene-editor/layer-effects"),iw=(0,fp.vA)("/objects/effects"),aw=function(e){var t=e.renderContent,n=e.isFolded,r=e.toggleFolded,i=e.title,a=e.titleIcon,o=e.titleBarButtons;return(0,f.jsx)(H.Z,{background:"medium",children:(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)($.Z,{onClick:r,size:"small",children:n?(0,f.jsx)(ot.Z,{style:nw.icon}):(0,f.jsx)(st.Z,{style:nw.icon})}),a,a&&(0,f.jsx)(M.LZ,{}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body",style:pr.t,children:i})]}),(0,f.jsxs)(M.x1,{noMargin:!0,children:[o&&o.map((function(e){var t=e.icon;return(0,f.jsx)($.Z,{id:e.id,tooltip:e.label,onClick:e.onClick,size:"small",children:(0,f.jsx)(t,{style:nw.icon})},e.id)})),(0,f.jsx)(M.LZ,{})]})]}),n?null:(0,f.jsx)("div",{style:nw.subPanelContentContainer,children:t()})]})})})},ow=function(e){var t=e.title,n=e.isFolded,r=e.toggleFolded,i=e.renderContent,a=e.renderContentAsHiddenWhenFolded,o=e.noContentMargin,s=e.onOpenFullEditor,l=e.onAdd;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(sk.Z0,{}),(0,f.jsx)(M.sg,{noOverflowParent:!0,children:(0,f.jsxs)(_.pJ,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)($.Z,{size:"small",onClick:r,children:n?(0,f.jsx)(qk,{style:nw.icon}):(0,f.jsx)(Yk,{style:nw.icon})}),(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,style:pr.t,children:t})]}),(0,f.jsxs)(M.x1,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)($.Z,{size:"small",onClick:s,children:(0,f.jsx)(so.Z,{style:nw.icon})}),l&&(0,f.jsx)($.Z,{size:"small",onClick:l,children:(0,f.jsx)(it.Z,{style:nw.icon})})]})]})}),(0,f.jsx)(M.sg,{noMargin:o,children:n?a?(0,f.jsx)("div",{style:nw.hiddenContent,children:i()}):null:i()})]})},sw=function(e){var t=e.project,n=e.resourceManagementProps,r=(e.projectScopedContainersAccessor,e.unsavedChanges,e.i18n,e.effectsContainer),i=e.onEffectsUpdated,a=e.onOpenFullEditor,o=e.onEffectAdded,l=e.layerRenderingType,u=e.target,d=(0,gt.Z)(),p=c.useState(!1),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=ZC({effectsContainer:r,project:t,onEffectsUpdated:function(){i(),d()},onEffectAdded:o,onUpdate:d,target:u}),v=x.allEffectMetadata,b=x.all2DEffectMetadata,C=x.all3DEffectMetadata,j=x.addEffect,Z=x.removeEffect,k=x.chooseEffectType,T="3d"===l?C:b;return(0,f.jsx)(ow,{title:"object"===u?(0,f.jsx)(w.Trans,{id:"Effects"}):"3d"===l?(0,f.jsx)(w.Trans,{id:"3D effects"}):(0,f.jsx)(w.Trans,{id:"2D effects"}),isFolded:g,toggleFolded:function(){return m(!g)},onOpenFullEditor:a,onAdd:function(){return j("3d"===l)},renderContent:function(){return(0,f.jsxs)(_.ak,{noMargin:!0,children:[0===r.getEffectsCount()&&(0,f.jsx)(N.Z,{size:"body2",align:"center",color:"secondary",children:"object"===u?(0,f.jsx)(w.Trans,{id:"There are no <0>effects</0> on this object.",components:[(0,f.jsx)(pe.Z,{href:iw,onClick:function(){return y.ZP.openExternalURL(iw)}})]}):"3d"===l?(0,f.jsx)(w.Trans,{id:"There are no <0>3D effects</0> on this layer.",components:[(0,f.jsx)(pe.Z,{href:rw,onClick:function(){return y.ZP.openExternalURL(rw)}})]}):(0,f.jsx)(w.Trans,{id:"There are no <0>2D effects</0> on this layer.",components:[(0,f.jsx)(pe.Z,{href:rw,onClick:function(){return y.ZP.openExternalURL(rw)}})]})}),(0,mt.mapFor)(0,r.getEffectsCount(),(function(e){var a=r.getEffectAt(e),o=a.getEffectType(),s=yC(v,o);return!s||"3d"!==l&&!s.isMarkedAsOnlyWorkingFor3D||"2d"!==l&&!s.isMarkedAsOnlyWorkingFor2D?(0,f.jsx)(aw,{renderContent:function(){return(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,f.jsx)(fe.Z,{value:o,onChange:function(e){return k(a,e)},children:T.map((function(e){return(0,f.jsx)(P.Z,{value:e.type,label:e.fullName,disabled:"object"===u&&e.isMarkedAsNotWorkingForObjects},e.type)}))}),s&&(0,f.jsx)(zk._6,{project:t,schema:s.parametersSchema,instances:[a],onInstancesModified:i,resourceManagementProps:n,placeholder:(0,f.jsx)(w.Trans,{id:"Nothing to configure for this effect."}),onRefreshAllFields:d})]})},isFolded:a.isFolded(),toggleFolded:function(){a.setFolded(!a.isFolded()),d()},title:a.getName(),titleBarButtons:[{id:"effect-visibility",icon:a.isEnabled()?ex.Z:tx.Z,label:a.isEnabled()?{id:"Hide effect"}:{id:"Show effect"},onClick:function(){a.setEnabled(!a.isEnabled()),i(),d()}},{id:"remove-effect",icon:Gk.Z,label:{id:"Remove effect"},onClick:function(){Z(a),i()}}]},a.ptr):null}))]})}})},lw=n.g.gd,cw={icon:{fontSize:18},scrollView:{paddingTop:M.XW,overflowX:"hidden"},hiddenContent:{display:"none"},subPanelContentContainer:{display:"flex",flexDirection:"column",flex:1,paddingLeft:3*M.XW,paddingRight:M.XW}},uw=(0,fp.vA)("/behaviors"),dw=(0,fp.vA)("/all-features/variables/object-variables"),pw=function(e){var t=e.renderContent,n=e.isFolded,r=e.toggleFolded,i=e.title,a=e.titleIcon,o=e.titleBarButtons;return(0,f.jsx)(H.Z,{background:"medium",children:(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)($.Z,{onClick:r,size:"small",children:n?(0,f.jsx)(ot.Z,{style:cw.icon}):(0,f.jsx)(st.Z,{style:cw.icon})}),a,a&&(0,f.jsx)(M.LZ,{}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body",style:pr.t,children:i})]}),(0,f.jsxs)(M.x1,{noMargin:!0,children:[o&&o.map((function(e){var t=e.icon;return(0,f.jsx)($.Z,{id:e.id,tooltip:e.label,onClick:e.onClick,size:"small",children:(0,f.jsx)(t,{style:cw.icon})},e.id)})),(0,f.jsx)(M.LZ,{})]})]}),n?null:(0,f.jsx)("div",{style:cw.subPanelContentContainer,children:t()})]})})})},fw=function(e){var t=e.title,n=e.isFolded,r=e.toggleFolded,i=e.renderContent,a=e.renderContentAsHiddenWhenFolded,o=e.noContentMargin,s=e.onOpenFullEditor,l=e.onAdd;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(sk.Z0,{}),(0,f.jsx)(M.sg,{noOverflowParent:!0,children:(0,f.jsxs)(_.pJ,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)($.Z,{size:"small",onClick:r,children:n?(0,f.jsx)(qk,{style:cw.icon}):(0,f.jsx)(Yk,{style:cw.icon})}),(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,style:pr.t,children:t})]}),(0,f.jsxs)(M.x1,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)($.Z,{size:"small",onClick:s,children:(0,f.jsx)(so.Z,{style:cw.icon})}),l&&(0,f.jsx)($.Z,{size:"small",onClick:l,children:(0,f.jsx)(it.Z,{style:cw.icon})})]})]})}),(0,f.jsx)(M.sg,{noMargin:o,children:n?a?(0,f.jsx)("div",{style:cw.hiddenContent,children:i()}):null:i()})]})},hw=function(e){var t=e.project,n=e.resourceManagementProps,r=e.layout,i=e.eventsFunctionsExtension,l=e.onUpdateBehaviorsSharedData,u=(e.objectsContainer,e.globalObjectsContainer,e.layersContainer,e.projectScopedContainersAccessor),d=e.unsavedChanges,p=e.i18n,h=e.historyHandler,g=e.objects,m=e.onEditObject,x=e.onObjectsModified,v=e.onEffectAdded,b=e.onOpenEventBasedObjectVariantEditor,C=e.onDeleteEventsBasedObjectVariant,j=e.onWillInstallExtension,Z=e.onExtensionInstalled,k=e.isVariableListLocked,T=e.isBehaviorListLocked,S=(0,gt.Z)(),I=c.useState(!1),E=(0,s.Z)(I,2),L=E[0],A=E[1],O=c.useState(!1),R=(0,s.Z)(O,2),F=R[0],D=R[1],B=c.useState(!1),U=(0,s.Z)(B,2),V=U[0],H=U[1],z=c.useState(!1),W=(0,s.Z)(z,2),G=W[0],Y=W[1],q=c.useState(!1),J=(0,s.Z)(q,2),X=J[0],K=J[1],Q=(0,Ye.Z)().showDeleteConfirmation,ee=c.useRef(null),te=g[0],ne=te.getConfiguration(),re=lw.MetadataProvider.getObjectMetadata(t.getCurrentPlatform(),te.getType()),ie=!!re&&re.isRenderedIn3D(),ae=re?re.getOpenFullEditorLabel():null,oe=lw.castObject(ne,lw.ObjectConfiguration),se=tj({project:t,object:te,isChildObject:!r,eventsFunctionsExtension:i,onUpdate:S,onBehaviorsUpdated:S,onUpdateBehaviorsSharedData:l,onWillInstallExtension:j,onExtensionInstalled:Z}),le=se.openNewBehaviorDialog,ce=se.newBehaviorDialog,ue=se.removeBehavior,de=te.getAllBehaviorNames().toJSArray().map((function(e){return te.getBehavior(e)})).filter((function(e){return!e.isDefaultBehavior()})),he=t.hasEventsBasedObject(ne.getType())?t.getEventsBasedObject(ne.getType()):null,ge=he?lw.asCustomObjectConfiguration(ne):null,me=ge?(0,ew.R$)(he,ge):"",xe=ge?lw.PlatformExtension.getExtensionFromFullObjectType(ge.getType()):null,ve=xe&&t.hasEventsFunctionsExtensionNamed(xe)?t.getEventsFunctionsExtension(xe):null,be=ge&&(ge.isForcedToOverrideEventsBasedObjectChildrenConfiguration()||!me&&ge.isMarkedAsOverridingEventsBasedObjectChildrenConfiguration()),Ce=!!ge&&!ge.isForcedToOverrideEventsBasedObjectChildrenConfiguration(),je=(0,fp.vA)(re.getHelpPath()),Ze=c.useCallback((function(){return m(te,"properties")}),[te,m]),ke=c.useCallback((function(){(0,ew.fh)(ge,he,ve)?ve&&he&&ge&&b&&b(ve.getName(),he.getName(),ge.getVariantName()):K(!0)}),[ge,b,ve,he]),we=c.useCallback((function(e,n){(0,ew.jj)(n,ge,he,ve,t,e),Y(!1),S()}),[ge,he,ve,S,t]),Te=c.useCallback((function(e,n){(0,ew.jj)(n,ge,he,ve,t,e),K(!1),S(),ke()}),[ge,he,ve,S,t,ke]),Se=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q({title:{id:"Remove variant"},message:{id:"Are you sure you want to remove this variant from your project? This can't be undone."}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:(0,ew.h)(ge,he,ve,t,C),S();case 7:case"end":return e.stop()}}),e)}))),[ge,he,S,C,t,ve,Q]),Pe=(0,gt.W)(),Ie=(0,s.Z)(Pe,2),Ee=Ie[0],Me=Ie[1],Le=c.useMemo((function(){var e=oe.getProperties();return(0,Gn.ZP)({properties:e,defaultValueProperties:he?he.getPropertyDescriptors():null,getProperties:function(e){return e.objectConfiguration.getProperties()},onUpdateProperty:function(e,t,n){e.objectConfiguration.updateProperty(t,n)},object:te,visibility:"All"})}),[Ee,oe,te,he]);return(0,f.jsxs)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Object properties"}),scope:"scene-editor-object-properties",children:[(0,f.jsx)(ft.Z,{autoHideScrollbar:!0,style:cw.scrollView,children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,id:"object-properties-editor",noOverflowParent:!0,children:[(0,f.jsxs)(_.ak,{expand:!0,noOverflowParent:!0,children:[(0,f.jsx)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[ie?(0,f.jsx)(zb,{style:cw.icon}):(0,f.jsx)(Hb,{style:cw.icon}),(0,f.jsx)(N.Z,{size:"body",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"{0}",values:{0:re.getFullName()}})}),je&&(0,f.jsx)($.Z,{size:"small",onClick:function(){y.ZP.openExternalURL(je)},children:(0,f.jsx)(Qk.Z,{style:cw.icon})})]})}),(0,f.jsx)($k.Z,{value:te.getName(),onChange:function(){},disabled:!0})]}),(0,f.jsx)(fw,{title:(0,f.jsx)(w.Trans,{id:"Properties"}),isFolded:L,toggleFolded:function(){return A(!L)},onOpenFullEditor:Ze,renderContent:function(){return(0,f.jsxs)(_.ak,{noMargin:!0,noOverflowParent:!0,children:[(0,f.jsx)(zk._6,{project:t,object:te,schema:Le,instances:[{object:te,objectConfiguration:oe}],onInstancesModified:function(){},resourceManagementProps:n,placeholder:(0,f.jsx)(w.Trans,{id:"This object has no properties."}),customizeBasicSchema:function(e){return Jk({schema:e,fullEditorLabel:ae,object:te,onEditObject:m})},onRefreshAllFields:Me}),Ce&&(0,f.jsxs)(_.ak,{noMargin:!0,noOverflowParent:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{size:"body",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Variant"})}),(0,f.jsxs)(_.pJ,{noMargin:!0,children:[(0,f.jsx)($.Z,{size:"small",onClick:Se,disabled:!me,children:(0,f.jsx)(Jt.Z,{style:cw.icon})},"delete-variant"),(0,f.jsx)($.Z,{size:"small",onClick:function(){return Y(!0)},children:(0,f.jsx)(it.Z,{style:cw.icon})},"duplicate-variant"),(0,f.jsx)($.Z,{size:"small",onClick:ke,children:(0,f.jsx)(so.Z,{style:cw.icon})},"edit-variant")]})]}),(0,f.jsxs)(fe.Z,{value:me,onChange:function(e){ge&&ge.setVariantName(e),x([te]),S()},children:[(0,f.jsx)(P.Z,{value:"",label:{id:"Default"}},"default-variant"),he&&(0,mt.mapFor)(0,he.getVariants().getVariantsCount(),(function(e){if(!he)return null;var t=he.getVariants().getVariantAt(e);return(0,f.jsx)(P.Z,{value:t.getName(),label:t.getName()},"variant-"+t.getName())}))]},"variant-name")]}),be&&ge&&!ge.isForcedToOverrideEventsBasedObjectChildrenConfiguration()&&(0,f.jsx)(ew.jy,{}),he&&ge&&be&&(0,mt.mapFor)(0,he.getObjects().getObjectsCount(),(function(e){var r=he.getObjects().getObjectAt(e),i=r.getName(),a=ge.isChildObjectFolded(i);return(0,f.jsx)(pw,{renderContent:function(){return(0,f.jsx)(Kk,{project:t,resourceManagementProps:n,unsavedChanges:d,customObjectConfiguration:ge,childObject:r,onEditObject:Ze},e)},isFolded:a,toggleFolded:function(){ge.setChildObjectFolded(i,!a),S()},title:i},e)}))]})}}),(0,f.jsx)(fw,{title:(0,f.jsx)(w.Trans,{id:"Behaviors"}),isFolded:F,toggleFolded:function(){return D(!F)},onOpenFullEditor:function(){return m(te,"behaviors")},onAdd:T?null:le,renderContent:function(){return(0,f.jsxs)(_.ak,{noMargin:!0,children:[!de.length&&(0,f.jsx)(N.Z,{size:"body2",align:"center",color:"secondary",children:(0,f.jsx)(w.Trans,{id:"There are no <0>behaviors</0> on this object.",components:[(0,f.jsx)(pe.Z,{href:uw,onClick:function(){return y.ZP.openExternalURL(uw)}})]})}),de.map((function(e){var r=e.getTypeName(),i=lw.MetadataProvider.getBehaviorMetadata(lw.JsPlatform.get(),r),a=i.getIconFilename();return(0,f.jsx)(pw,{renderContent:function(){return(0,f.jsx)(Wk,{project:t,behaviorMetadata:i,behavior:e,object:te,onBehaviorUpdated:function(){},resourceManagementProps:n,onOpenFullEditor:function(){return m(te,"behaviors")}})},isFolded:e.isFolded(),toggleFolded:function(){e.setFolded(!e.isFolded()),S()},titleIcon:a?(0,f.jsx)(Hr.q,{src:a,alt:i.getFullName(),size:16}):null,title:e.getName(),titleBarButtons:[{id:"remove-behavior",icon:Gk.Z,label:{id:"Remove behavior"},onClick:function(){ue(e.getName())}}]},e.ptr)}))]})}}),(0,f.jsx)(fw,{title:(0,f.jsx)(w.Trans,{id:"Object Variables"}),isFolded:V,toggleFolded:function(){return H(!V)},onOpenFullEditor:function(){return m(te,"variables")},onAdd:k?null:function(){ee.current&&ee.current.addVariable(),H(!1)},renderContentAsHiddenWhenFolded:!0,noContentMargin:!0,renderContent:function(){return(0,f.jsx)(Ln,{ref:ee,projectScopedContainersAccessor:u,directlyStoreValueChangesWhileEditing:!0,variablesContainer:te.getVariables(),areObjectVariables:!0,size:"compact",onComputeAllVariableNames:function(){return te&&r?_n.findAllObjectVariables(t.getCurrentPlatform(),t,r,te.getName()):[]},historyHandler:h,toolbarIconStyle:cw.icon,compactEmptyPlaceholderText:(0,f.jsx)(w.Trans,{id:"There are no <0>variables</0> on this object.",components:[(0,f.jsx)(pe.Z,{href:dw,onClick:function(){return y.ZP.openExternalURL(dw)}})]}),isListLocked:k})}}),re&&re.hasDefaultBehavior("EffectCapability::EffectBehavior")&&(0,f.jsx)(sw,{layerRenderingType:"2d",target:"layer",project:t,resourceManagementProps:n,projectScopedContainersAccessor:u,unsavedChanges:d,i18n:p,effectsContainer:te.getEffects(),onEffectsUpdated:function(){return x([te])},onOpenFullEditor:function(){return m(te,"effects")},onEffectAdded:v})]})},g.map((function(e){return""+e.ptr})).join(";")),ce,G&&he&&(0,f.jsx)(tw.Z,{initialName:me||p._({id:"New variant"}),onApply:function(e){return we(p,e)},onCancel:function(){Y(!1)}}),X&&he&&(0,f.jsx)(tw.Z,{isDuplicationBeforeEdition:!0,initialName:me||p._({id:"New variant"}),onApply:function(e){return Te(p,e)},onCancel:function(){K(!1)}})]})},gw=[{value:"do-nothing",label:{id:"Keep centered (best for game content)"}},{value:"top-left-anchored-if-never-moved",label:{id:"Keep top-left corner fixed (best for content that can extend)"}}],mw=function(e){var t=e.i18n;return{name:"Default camera behavior",getLabel:function(){return t._({id:"Default camera behavior"})},valueType:"string",getChoices:function(){return gw},getValue:function(e){return e.getDefaultCameraBehavior()},setValue:function(e,t){return e.setDefaultCameraBehavior(t)}}},xw=[{value:"",label:{id:"Display both 2D and 3D objects (default)"}},{value:"2d",label:{id:"Force display only 2D objects"}},{value:"3d",label:{id:"Force display only 3D objects"}},{value:"2d+3d",label:{id:"Force display both 2D and 3D objects"}}],vw=function(e){var t=e.i18n,n=e.forceUpdate;return{name:"Rendering type",getLabel:function(){return t._({id:"Rendering type"})},valueType:"string",getChoices:function(){return xw},getValue:function(e){return e.getRenderingType()},setValue:function(e,t){e.setRenderingType(t),n()}}},bw=[{value:"perspective",label:{id:"Perspective camera"}},{value:"orthographic",label:{id:"Orthographic camera"}}],Cw=function(e){var t=e.i18n;return{name:"Camera type",getLabel:function(){return t._({id:"Camera type"})},valueType:"string",getChoices:function(){return bw},getValue:function(e){return e.getCameraType()},setValue:function(e,t){return e.setCameraType(t)}}},jw=function(e){var t=e.i18n;return{name:"Field of view",getLabel:function(){return t._({id:"Field of view (in degrees)"})},valueType:"number",getValue:function(e){return e.getCamera3DFieldOfView()},setValue:function(e,t){return e.setCamera3DFieldOfView(t)},disabled:function(e){return e[0]&&"perspective"!==e[0].getCameraType()}}},yw=function(e){var t=e.i18n;return{name:"Near plane distance",getLabel:function(){return t._({id:"Near plane distance"})},valueType:"number",getValue:function(e){return e.getCamera3DNearPlaneDistance()},setValue:function(e,t){return e.setCamera3DNearPlaneDistance(t)}}},Zw=function(e){var t=e.i18n;return{name:"Far plane distance",getLabel:function(){return t._({id:"Far plane distance"})},valueType:"number",getValue:function(e){return e.getCamera3DFarPlaneDistance()},setValue:function(e,t){return e.setCamera3DFarPlaneDistance(t)}}},kw=function(e){var t=e.i18n;return{name:"Maximum 2D drawing distance",getLabel:function(){return t._({id:"Maximum 2D drawing distance"})},valueType:"number",getValue:function(e){return e.getCamera2DPlaneMaxDrawingDistance()},setValue:function(e,t){return e.setCamera2DPlaneMaxDrawingDistance(t)}}},ww=function(e){var t=e.i18n;return{name:"Automatically follow the base layer",getLabel:function(){return t._({id:"Automatically follow the base layer."})},valueType:"boolean",getValue:function(e){return e.isFollowingBaseLayerCamera()},setValue:function(e,t){return e.setFollowBaseLayerCamera(t)}}},Tw=function(e){var t=e.i18n;return{name:"Ambient light color",getLabel:function(){return t._({id:"Ambient light color"})},valueType:"color",getValue:function(e){return(0,Xn.KC)({r:e.getAmbientLightColorRed(),g:e.getAmbientLightColorGreen(),b:e.getAmbientLightColorBlue()})},setValue:function(e,t){var n=e.getAmbientLightColorRed(),r=e.getAmbientLightColorGreen(),i=e.getAmbientLightColorBlue(),a=(0,Xn.A0)(t);!a||a.r===n&&a.g===r&&a.b===i||e.setAmbientLightColor(a.r,a.g,a.b)}}},Sw={icon:{fontSize:18},scrollView:{paddingTop:M.XW,overflowX:"hidden"},hiddenContent:{display:"none"},subPanelContentContainer:{display:"flex",flexDirection:"column",flex:1,paddingLeft:3*M.XW,paddingRight:M.XW}},Pw=(0,fp.vA)("/interface/scene-editor/layers-and-cameras"),Iw=function(e){var t=e.title,n=e.isFolded,r=e.toggleFolded,i=e.renderContent,a=e.renderContentAsHiddenWhenFolded,o=e.noContentMargin,s=e.onOpenFullEditor,l=e.onAdd;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(sk.Z0,{}),(0,f.jsx)(M.sg,{noOverflowParent:!0,children:(0,f.jsxs)(_.pJ,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)($.Z,{size:"small",onClick:r,children:n?(0,f.jsx)(qk,{style:Sw.icon}):(0,f.jsx)(Yk,{style:Sw.icon})}),(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,style:pr.t,children:t})]}),(0,f.jsxs)(M.x1,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)($.Z,{size:"small",onClick:s,children:(0,f.jsx)(so.Z,{style:Sw.icon})}),l&&(0,f.jsx)($.Z,{size:"small",onClick:l,children:(0,f.jsx)(it.Z,{style:Sw.icon})})]})]})}),(0,f.jsx)(M.sg,{noMargin:o,children:n?a?(0,f.jsx)("div",{style:Sw.hiddenContent,children:i()}):null:i()})]})},Ew=function(e){var t=e.project,n=e.resourceManagementProps,r=e.layersContainer,i=e.projectScopedContainersAccessor,a=e.unsavedChanges,o=e.i18n,l=e.layer,u=e.onEditLayer,d=e.onEditLayerEffects,p=e.onLayersModified,h=e.onEffectAdded,g=(0,gt.Z)(),m=c.useState(null),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=null===v?!l.isLightingLayer():!!v,j=(0,gt.W)(),Z=(0,s.Z)(j,2),k=Z[0],T=Z[1],S=c.useMemo((function(){return function(e){var t=e.i18n,n=e.forceUpdate;return e.onEditLayer,e.layersContainer,[mw({i18n:t}),{name:"Not a lighting layer",type:"column",isHidden:function(e){return e[0]&&e[0].isLightingLayer()},children:[vw({i18n:t,forceUpdate:n}),{name:"Optional 3D settings",type:"column",isHidden:function(e){return e[0]&&"2d"===e[0].getRenderingType()},children:[{name:"3D settings",title:t._({id:"3D settings"}),nonFieldType:"sectionTitle",getValue:void 0},Cw({i18n:t}),jw({i18n:t}),yw({i18n:t}),Zw({i18n:t}),kw({i18n:t})]}]},{name:"Optional lighting layer settings",type:"column",isHidden:function(e){return e[0]&&!e[0].isLightingLayer()},children:[{name:"Lighting settings",title:t._({id:"Lighting settings"}),nonFieldType:"sectionTitle",getValue:void 0},ww({i18n:t}),Tw({i18n:t})]}].filter(Boolean)}({i18n:o,onEditLayer:u,layersContainer:r,forceUpdate:g})}),[k,o,u,r,g]),P=c.useCallback((function(){return u(l)}),[l,u]);return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Layer properties"}),scope:"scene-editor-layer-properties",children:(0,f.jsx)(ft.Z,{autoHideScrollbar:!0,style:Sw.scrollView,children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,id:"layer-properties-editor",noOverflowParent:!0,children:[(0,f.jsxs)(_.ak,{expand:!0,noOverflowParent:!0,children:[(0,f.jsx)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(Oj,{style:Sw.icon}),(0,f.jsx)(N.Z,{size:"body",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Layer"})}),(0,f.jsx)($.Z,{size:"small",onClick:function(){y.ZP.openExternalURL(Pw)},children:(0,f.jsx)(Qk.Z,{style:Sw.icon})})]})}),(0,f.jsx)($k.Z,{value:l.getName()||o._({id:"Base layer"}),onChange:function(){},disabled:!0})]}),S&&(0,f.jsx)(Iw,{title:(0,f.jsx)(w.Trans,{id:"Properties"}),isFolded:C,toggleFolded:function(){return b(!C)},onOpenFullEditor:P,renderContent:function(){return(0,f.jsx)(_.ak,{noMargin:!0,noOverflowParent:!0,children:(0,f.jsx)(sk.ZP,{unsavedChanges:a,schema:S,instances:[l],onInstancesModified:p,onRefreshAllFields:T})})}}),"3d"!==l.getRenderingType()&&(0,f.jsx)(sw,{layerRenderingType:"2d",target:"layer",project:t,resourceManagementProps:n,projectScopedContainersAccessor:i,unsavedChanges:a,i18n:o,effectsContainer:l.getEffects(),onEffectsUpdated:function(){return p([l])},onOpenFullEditor:function(){return d(l)},onEffectAdded:h}),"2d"!==l.getRenderingType()&&!l.isLightingLayer()&&(0,f.jsx)(sw,{layerRenderingType:"3d",target:"layer",project:t,resourceManagementProps:n,projectScopedContainersAccessor:i,unsavedChanges:a,i18n:o,effectsContainer:l.getEffects(),onEffectsUpdated:function(){return p([l])},onOpenFullEditor:function(){return d(l)},onEffectAdded:h})]})},l.ptr)})},Mw=["lastSelectionType","objects","onEditObject","onObjectsModified","onEffectAdded","resourceManagementProps","eventsFunctionsExtension","onUpdateBehaviorsSharedData","onWillInstallExtension","onExtensionInstalled","onOpenEventBasedObjectVariantEditor","onDeleteEventsBasedObjectVariant","isBehaviorListLocked","instances","editObjectInPropertiesPanel","onInstancesModified","onGetInstanceSize","editInstanceVariables","tileMapTileSelection","onSelectTileMapTile","layer","onEditLayer","onEditLayerEffects","onLayersModified","historyHandler","isVariableListLocked","layout","objectsContainer","globalObjectsContainer"],Lw={paper:{display:"flex",flex:1,minWidth:0,flexDirection:"column"}},Aw=c.forwardRef((function(e,t){var n=(0,gt.Z)();c.useImperativeHandle(t,(function(){return{forceUpdate:n,getEditorTitle:function(){return"instance"===r?(0,f.jsx)(w.Trans,{id:"Instance properties"}):(0,f.jsx)(w.Trans,{id:"Object properties"})}}}));var r=e.lastSelectionType,i=e.objects,a=e.onEditObject,o=e.onObjectsModified,s=e.onEffectAdded,u=e.resourceManagementProps,d=e.eventsFunctionsExtension,p=e.onUpdateBehaviorsSharedData,h=e.onWillInstallExtension,g=e.onExtensionInstalled,m=e.onOpenEventBasedObjectVariantEditor,x=e.onDeleteEventsBasedObjectVariant,v=e.isBehaviorListLocked,b=e.instances,C=e.editObjectInPropertiesPanel,j=e.onInstancesModified,y=e.onGetInstanceSize,Z=e.editInstanceVariables,k=e.tileMapTileSelection,T=e.onSelectTileMapTile,S=e.layer,P=e.onEditLayer,I=e.onEditLayerEffects,E=e.onLayersModified,M=e.historyHandler,L=e.isVariableListLocked,A=e.layout,O=e.objectsContainer,R=e.globalObjectsContainer,F=(0,go.Z)(e,Mw);return(0,f.jsx)(H.Z,{background:"dark",square:!0,style:Lw.paper,children:b.length&&"instance"===r?(0,f.jsx)(Hk,(0,l.Z)({instances:b,editObjectInPropertiesPanel:C,onInstancesModified:j,onGetInstanceSize:y,editInstanceVariables:Z,tileMapTileSelection:k,onSelectTileMapTile:T,historyHandler:M,isVariableListLocked:L,layout:A,objectsContainer:O,globalObjectsContainer:R},F)):i.length&&"object"===r?(0,f.jsx)(hw,(0,l.Z)({objects:i,onEditObject:a,onObjectsModified:o,onEffectAdded:s,resourceManagementProps:u,eventsFunctionsExtension:d,onUpdateBehaviorsSharedData:p,onWillInstallExtension:h,onExtensionInstalled:g,isBehaviorListLocked:v,onOpenEventBasedObjectVariantEditor:m,onDeleteEventsBasedObjectVariant:x,historyHandler:M,isVariableListLocked:L,layout:A,objectsContainer:O,globalObjectsContainer:R},F)):S&&"layer"===r?(0,f.jsx)(Ew,(0,l.Z)({layer:S,onEditLayer:P,onEditLayerEffects:I,onLayersModified:E,onEffectAdded:s,resourceManagementProps:u},F)):(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Click on an instance on the canvas or an object in the list to display their properties."})})})})),Ow=function(e){var t=c.useState(null),n=(0,s.Z)(t,2),r=n[0],i=n[1],a=c.useCallback((function(t){e.current?t(e.current):i((function(){return t}))}),[e]);return c.useEffect((function(){r&&(e.current&&r(e.current),i(null))}),[r,e]),a},Rw=n(18699),Fw={direction:"row",first:"properties",splitPercentage:23,second:{direction:"row",first:"instances-editor",second:"objects-list",splitPercentage:77}},Dw=function(){},Nw={"objects-list":{position:"right"},properties:{position:"left"},"object-groups-list":{position:"right"},"instances-list":{position:"bottom"},"layers-list":{position:"right"}},_w=c.forwardRef((function(e,t){var n=e.gameEditorMode,r=e.project,i=e.resourceManagementProps,a=e.layout,o=e.eventsFunctionsExtension,s=e.eventsBasedObject,l=e.eventsBasedObjectVariant,u=e.updateBehaviorsSharedData,d=e.layersContainer,p=e.globalObjectsContainer,h=e.objectsContainer,g=e.projectScopedContainersAccessor,m=e.initialInstances,x=e.chosenLayer,v=e.selectedLayer,b=e.onSelectInstances,C=e.onInstancesModified,j=e.onWillInstallExtension,y=e.onExtensionInstalled,Z=e.isActive,k=e.onRestartInGameEditor,T=e.showRestartInGameEditorAfterErrorButton,S=c.useContext(D.ZP),P=S.getDefaultEditorMosaicNode,I=S.setDefaultEditorMosaicNode,E=e.instancesSelection.getSelectedInstances(),M=c.useRef(null),L=c.useRef(null),A=c.useRef(null),O=c.useRef(null),R=c.useRef(null),F=c.useRef(null),N=c.useRef(null),_=Ow(R),B=c.useCallback((function(){M.current&&M.current.forceUpdate()}),[]),U=c.useCallback((function(){A.current&&A.current.forceUpdate()}),[]),V=c.useCallback((function(){R.current&&R.current.forceUpdateList()}),[]),H=c.useCallback((function(){N.current&&N.current.forceUpdate()}),[]),z=c.useCallback((function(e){N.current&&N.current.scrollToObjectGroup(e)}),[]),W=c.useCallback((function(){L.current&&L.current.forceUpdateList()}),[]),G=c.useCallback((function(e){return O.current?O.current.getInstanceSize(e):[e.getDefaultWidth(),e.getDefaultHeight(),e.getDefaultDepth()]}),[]),Y=c.useCallback((function(e){C&&C(e),U()}),[C,U]),q=c.useCallback((function(e){if(F.current){var t=Nw[e];F.current.toggleEditor(e,t.position)}}),[]),J=c.useCallback((function(e){return!!F.current&&F.current.getOpenedEditorNames().includes(e)}),[]),X=c.useCallback((function(e){J(e)||q(e)}),[J,q]),K=c.useCallback((function(e){var t=O.current;t&&(e?t.restartSceneRendering():t.pauseSceneRendering())}),[]),Q=c.useCallback((function(){J("objects-list")||q("objects-list"),_((function(e){e&&e.openNewObjectDialog()}))}),[J,q,_]);c.useImperativeHandle(t,(function(){var e=O.current;return{getName:function(){return"mosaic"},forceUpdateInstancesList:U,forceUpdatePropertiesEditor:B,forceUpdateObjectsList:V,forceUpdateObjectGroupsList:H,scrollObjectGroupsListToObjectGroup:z,forceUpdateLayersList:W,openNewObjectDialog:Q,toggleEditorView:q,isEditorVisible:J,ensureEditorVisible:X,startSceneRendering:K,viewControls:{zoomBy:e?e.zoomBy:Dw,setZoomFactor:e?e.setZoomFactor:Dw,zoomToInitialPosition:e?e.zoomToInitialPosition:Dw,zoomToFitContent:e?e.zoomToFitContent:Dw,zoomToFitSelection:e?e.zoomToFitSelection:Dw,centerViewOnLastInstance:e?e.centerViewOnLastInstance:Dw,getLastCursorSceneCoordinates:e?e.getLastCursorSceneCoordinates:function(){return[0,0]},getLastContextMenuSceneCoordinates:e?e.getLastContextMenuSceneCoordinates:function(){return[0,0]},getViewPosition:e?e.getViewPosition:Dw},instancesHandlers:{getContentAABB:e?e.getContentAABB:function(){return null},getSelectionAABB:e?e.selectedInstances.getSelectionAABB:function(){return new gy},addInstances:e?e.addInstances:function(){return[]},clearHighlightedInstance:e?e.clearHighlightedInstance:Dw,resetInstanceRenderersFor:e?e.resetInstanceRenderersFor:Dw,forceRemountInstancesRenderers:e?e.forceRemount:Dw,addSerializedInstances:e?e.addSerializedInstances:function(){return[]},snapSelection:e?e.snapSelection:Dw}}}));var $=c.useCallback((function(e,t){b(e,t),U(),B()}),[U,B,b]),ee=e.selectedObjectFolderOrObjectsWithContext.map((function(e){var t=e.objectFolderOrObject;return t?t.isFolder()?null:t.getObject():null})).filter(Boolean),te=ee.map((function(e){return e.getName()})),ne=!!s&&s.getDefaultVariant()!==l,re={properties:{type:"secondary",title:{id:"Properties"},renderEditor:function(){return(0,f.jsx)(w.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(Aw,{i18n:n,project:r,resourceManagementProps:i,layout:a,eventsFunctionsExtension:o,onUpdateBehaviorsSharedData:u,objectsContainer:h,globalObjectsContainer:p,layersContainer:d,projectScopedContainersAccessor:g,instances:E,objects:ee,layer:v,editInstanceVariables:e.editInstanceVariables,editObjectInPropertiesPanel:e.editObjectInPropertiesPanel,onEditObject:e.onEditObject,onObjectsModified:e.onObjectsModified,onEffectAdded:e.onEffectAdded,onInstancesModified:Y,onGetInstanceSize:G,ref:M,unsavedChanges:e.unsavedChanges,historyHandler:e.historyHandler,tileMapTileSelection:e.tileMapTileSelection,onSelectTileMapTile:e.onSelectTileMapTile,lastSelectionType:e.lastSelectionType,onWillInstallExtension:e.onWillInstallExtension,onExtensionInstalled:e.onExtensionInstalled,onOpenEventBasedObjectVariantEditor:e.onOpenEventBasedObjectVariantEditor,onDeleteEventsBasedObjectVariant:e.onDeleteEventsBasedObjectVariant,isVariableListLocked:ne,isBehaviorListLocked:ne,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer,onLayersModified:e.onLayersModified})}})}},"layers-list":{type:"secondary",title:{id:"Layers"},renderEditor:function(){return(0,f.jsx)(NZ,{project:r,layout:a,eventsFunctionsExtension:o,eventsBasedObject:s,chosenLayer:x,onChooseLayer:e.onChooseLayer,onSelectLayer:e.onSelectLayer,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer,onLayersModified:e.onLayersModified,onLayersVisibilityInEditorChanged:e.onLayersVisibilityInEditorChanged,onRemoveLayer:e.onRemoveLayer,onLayerRenamed:e.onLayerRenamed,onCreateLayer:B,layersContainer:d,ref:L,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps,onBackgroundColorChanged:e.onBackgroundColorChanged,gameEditorMode:e.gameEditorMode})}},"instances-list":{type:"secondary",title:{id:"Instances List"},renderEditor:function(){return(0,f.jsx)(ok,{instances:m,selectedInstances:E,onSelectInstances:$,onInstancesModified:C||Dw,ref:A})}},"instances-editor":"embedded-game"===n?{type:"primary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,f.jsx)(Rw.jq,{isActive:Z,onRestartInGameEditor:k,showRestartInGameEditorAfterErrorButton:T})}}:{type:"primary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,f.jsx)(qZ,{project:r,layout:a,eventsBasedObject:s,eventsBasedObjectVariant:l,globalObjectsContainer:p,objectsContainer:h,layersContainer:d,chosenLayer:x,initialInstances:m,instancesEditorSettings:e.instancesEditorSettings,onInstancesEditorSettingsMutated:e.onInstancesEditorSettingsMutated,instancesSelection:e.instancesSelection,onInstancesAdded:e.onInstancesAdded,onInstancesSelected:e.onInstancesSelected,onInstanceDoubleClicked:e.onInstanceDoubleClicked,onInstancesMoved:e.onInstancesMoved,onInstancesResized:e.onInstancesResized,onInstancesRotated:e.onInstancesRotated,selectedObjectNames:te,onContextMenu:e.onContextMenu,isInstanceOf3DObject:e.isInstanceOf3DObject,instancesEditorShortcutsCallbacks:e.instancesEditorShortcutsCallbacks,wrappedEditorRef:function(e){O.current=e},pauseRendering:!e.isActive,tileMapTileSelection:e.tileMapTileSelection,onSelectTileMapTile:e.onSelectTileMapTile,editorViewPosition2D:e.editorViewPosition2D})}},"objects-list":{type:"secondary",title:{id:"Objects"},toolbarControls:[(0,f.jsx)(JZ.Z,{},"close")],renderEditor:function(){return(0,f.jsx)(w.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(mx.ZP,{getThumbnail:rc.Z.getThumbnail.bind(rc.Z),project:r,layout:a,eventsBasedObject:s,projectScopedContainersAccessor:g,globalObjectsContainer:p,objectsContainer:h,initialInstances:m,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,resourceManagementProps:e.resourceManagementProps,selectedObjectFolderOrObjectsWithContext:e.selectedObjectFolderOrObjectsWithContext,onEditObject:e.onEditObject,onOpenEventBasedObjectEditor:e.onOpenEventBasedObjectEditor,onOpenEventBasedObjectVariantEditor:e.onOpenEventBasedObjectVariantEditor,onExportAssets:e.onExportAssets,onDeleteObjects:function(t,r){return e.onDeleteObjects(n,t,r)},getValidatedObjectOrGroupName:function(t,r){return e.getValidatedObjectOrGroupName(t,r,n)},onObjectCreated:e.onObjectCreated,onObjectEdited:e.onObjectEdited,onObjectFolderOrObjectWithContextSelected:e.onObjectFolderOrObjectWithContextSelected,onRenameObjectFolderOrObjectWithContextFinish:e.onRenameObjectFolderOrObjectWithContextFinish,onAddObjectInstance:e.onAddObjectInstance,onObjectPasted:e.updateBehaviorsSharedData,beforeSetAsGlobalObject:function(t){return e.canObjectOrGroupBeGlobal(n,t)},onSetAsGlobalObject:e.onSetAsGlobalObject,ref:R,unsavedChanges:e.unsavedChanges,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps,isListLocked:ne,onWillInstallExtension:j,onExtensionInstalled:y})}})}},"object-groups-list":{type:"secondary",title:{id:"Object Groups"},renderEditor:function(){return(0,f.jsx)(w.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(Ix,{ref:N,globalObjectGroups:p&&p.getObjectGroups(),projectScopedContainersAccessor:g,objectGroups:h.getObjectGroups(),onCreateGroup:e.onCreateObjectGroup,onEditGroup:e.onEditObjectGroup,onDeleteGroup:e.onDeleteObjectGroup,onRenameGroup:e.onRenameObjectGroup,getValidatedObjectOrGroupName:function(t,r){return e.getValidatedObjectOrGroupName(t,r,n)},beforeSetAsGlobalGroup:function(t){return e.canObjectOrGroupBeGlobal(n,t)},unsavedChanges:e.unsavedChanges,isListLocked:ne})}})}}};return(0,f.jsx)(Zm.Z,{editors:re,centralNodeId:"instances-editor",initialNodes:P("scene-editor")||Fw,isTransparent:"embedded-game"===n,onDragOrResizedStarted:function(){(0,mm.Pt)(!0)},onDragOrResizedEnded:function(){(0,mm.Pt)(!1)},onOpenedEditorsChanged:e.onOpenedEditorsChanged,onPersistNodes:function(e){return I("scene-editor",e)},ref:F})})),Bw=_w,Uw=function(e){var t=e.containerRef,n=e.onSwipeDown,r=e.onSwipeUp,i=c.useRef(null),a=c.useRef(null);return{onTouchStart:c.useCallback((function(e){i.current=Date.now(),a.current=e.touches[0].clientY,t.current&&(t.current.style.transform="translateY(0px)")}),[t]),onTouchMove:c.useCallback((function(e){var n=e.touches[0].clientY,r=a.current||n,i=Math.min(30,Math.max(-30,n-r));t.current&&(t.current.style.transform="translateY(".concat(i,"px)"))}),[t]),onTouchEnd:c.useCallback((function(e){if(a.current&&i.current){var o=a.current,s=i.current,l=e.changedTouches[0].clientY-o,c=(Date.now()-s)/1e3;Math.abs(l)>30&&Math.abs(l)/c>200&&(l<0?r():n()),t.current&&(t.current.style.transform="translateY(0px)"),i.current=null,a.current=null}}),[r,n,t])}},Vw={container:{flexDirection:"column",overflow:"hidden"},childrenContainer:{display:"flex",flex:1,overflowY:"auto",overflowX:"hidden"},topBarContainer:{borderRadius:"8px 8px 0 0",padding:4},topBarHandleContainer:{height:4,display:"flex",justifyContent:"center",alignItems:"center"},topBarHandle:{height:4,width:"40%",borderRadius:2}},Hw=function(e){var t=c.useContext(j.Z),n=Uw({onSwipeUp:e.onSwipeUp,onSwipeDown:e.onSwipeDown,containerRef:e.containerRef}),r=n.onTouchStart,i=n.onTouchEnd,a=n.onTouchMove;return(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},Vw.topBarContainer),{},{backgroundColor:(0,H.d)(t,"light")}),onClick:e.onClick,onTouchStart:r,onTouchEnd:i,onTouchMove:a,children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)("div",{style:Vw.topBarHandleContainer,children:(0,f.jsx)("span",{style:(0,l.Z)((0,l.Z)({},Vw.topBarHandle),{},{backgroundColor:t.swipeableDrawer.topBar.pillColor})})}),(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:e.controls?"space-between":"flex-start",alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:e.title}),e.controls]})})]})})};var zw=function(e){var t=c.useRef(null),n=e.openingState,r=e.setOpeningState,i="closed"===n?0:"halfOpen"===n?.42*e.maxHeight:e.maxHeight-52,a="closed"===n?"none":"flex",o=function(e){var t=c.useRef(e);return c.useEffect((function(){t.current=e}),[e]),"halfOpen"===e&&"closed"===t.current?"swipe-up-ending":null}(n),s=(0,cg.T)();return(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)((0,l.Z)({},Vw.container),{},{height:i,display:a},(0,cg.E)(s)),{},{animation:o?"".concat(o," 0.4s ease-out"):void 0}),ref:t,children:[(0,f.jsx)(Hw,{containerRef:t,title:e.title,onClick:function(){return r("closed")},onSwipeUp:function(){"halfOpen"===n&&r("open")},onSwipeDown:function(){"halfOpen"===n?r("closed"):"open"===n&&r("halfOpen")},controls:e.topBarControls}),(0,f.jsx)("div",{style:Vw.childrenContainer,children:e.children})]})},Ww={iconButton:{padding:8,fontSize:"inherit"},buttonLabel:{padding:2,display:"flex"},container:{fontSize:24}},Gw={"objects-list":{buttonId:Dj,icon:(0,f.jsx)(Mj,{fontSize:"inherit"})},"object-groups-list":{buttonId:Nj,icon:(0,f.jsx)(Lj,{fontSize:"inherit"})},properties:{buttonId:_j,icon:(0,f.jsx)(at.Z,{fontSize:"inherit"})},"instances-list":{buttonId:Bj,icon:(0,f.jsx)(Aj,{fontSize:"inherit"})},"layers-list":{buttonId:Uj,icon:(0,f.jsx)(Oj,{fontSize:"inherit"})}},Yw=c.memo((function(e){return(0,f.jsx)(H.Z,{background:"medium",square:!0,style:Ww.container,children:(0,f.jsx)(Ls.o,{height:44,paddingBottom:12,children:(0,f.jsx)(Ls.k,{spaceOut:!0,children:Object.keys(Gw).map((function(t){var n=Gw[t],r=n.icon,i=n.buttonId,a=e.selectedEditorId===t;return(0,f.jsx)($.Z,{color:"default",disableRipple:!0,disableFocusRipple:!0,style:Ww.iconButton,id:i,onClick:function(){e.onSelectEditor(t)},selected:a,children:(0,f.jsx)("span",{style:Ww.buttonLabel,children:r})},t)}))})})})})),qw="swipeable-drawer-container",Jw={"objects-list":(0,f.jsx)(w.Trans,{id:"Objects"}),properties:(0,f.jsx)(w.Trans,{id:"Instance properties"}),"object-groups-list":(0,f.jsx)(w.Trans,{id:"Objects groups"}),"instances-list":(0,f.jsx)(w.Trans,{id:"Instances"}),"layers-list":(0,f.jsx)(w.Trans,{id:"Layers"})},Xw=function(){},Kw={container:{width:"100%"},bottomContainer:{position:"absolute",bottom:0,width:"100%",pointerEvents:"all"},instancesListContainer:{display:"flex",flex:1}},Qw=c.forwardRef((function(e,t){var n=e.gameEditorMode,r=e.project,i=e.resourceManagementProps,a=e.layout,o=e.eventsFunctionsExtension,l=e.eventsBasedObject,u=e.eventsBasedObjectVariant,d=e.updateBehaviorsSharedData,p=e.layersContainer,h=e.globalObjectsContainer,g=e.objectsContainer,m=e.projectScopedContainersAccessor,x=e.initialInstances,v=e.chosenLayer,b=e.selectedLayer,C=e.onSelectInstances,j=e.onInstancesModified,y=e.onWillInstallExtension,Z=e.onExtensionInstalled,k=e.isActive,T=e.onRestartInGameEditor,S=e.showRestartInGameEditorAfterErrorButton,P=e.instancesSelection.getSelectedInstances(),I=c.useContext(D.ZP).values,E=(0,hi.BF)(),M=c.useRef(null),L=c.useRef(null),A=c.useRef(null),O=c.useRef(null),R=c.useRef(null),F=c.useRef(null),N=Ow(R),_=c.useRef(null),B=c.useState(0),U=(0,s.Z)(B,2),V=U[0],z=U[1],W=c.useState(null),G=(0,s.Z)(W,2),Y=G[0],q=G[1],J=c.useState("closed"),X=(0,s.Z)(J,2),K=X[0],Q=X[1],$=c.useCallback((function(e){Y===e?Q("closed"===K?"halfOpen":"closed"):(q(e||null),"closed"===K&&Q("halfOpen"))}),[Y,K]),ee=c.useCallback((function(){M.current&&M.current.forceUpdate()}),[]),te=c.useCallback((function(){A.current&&A.current.forceUpdate()}),[]),ne=c.useCallback((function(){R.current&&R.current.forceUpdateList()}),[]),re=c.useCallback((function(){F.current&&F.current.forceUpdate()}),[]),ie=c.useCallback((function(e){F.current&&F.current.scrollToObjectGroup(e)}),[]),ae=c.useCallback((function(){L.current&&L.current.forceUpdateList()}),[]),oe=c.useCallback((function(e){return O.current?O.current.getInstanceSize(e):[e.getDefaultWidth(),e.getDefaultHeight(),e.getDefaultDepth()]}),[]),se=c.useCallback((function(e){return e===Y&&"closed"!==K}),[Y,K]),le=c.useCallback((function(e){se(e)||$(e)}),[$,se]),ce=c.useCallback((function(){se("objects-list")||$("objects-list"),N((function(e){e&&e.openNewObjectDialog()}))}),[$,se,N]),ue=c.useCallback((function(e){var t=O.current;t&&(e?t.restartSceneRendering():t.pauseSceneRendering())}),[]);c.useLayoutEffect((function(){_.current&&z(_.current.clientHeight||0)}),[K]),c.useImperativeHandle(t,(function(){var e=O.current;return{getName:function(){return"swipeableDrawer"},forceUpdateInstancesList:te,forceUpdatePropertiesEditor:ee,forceUpdateObjectsList:ne,forceUpdateObjectGroupsList:re,scrollObjectGroupsListToObjectGroup:ie,forceUpdateLayersList:ae,openNewObjectDialog:ce,toggleEditorView:$,isEditorVisible:se,ensureEditorVisible:le,startSceneRendering:ue,viewControls:{zoomBy:e?e.zoomBy:Xw,setZoomFactor:e?e.setZoomFactor:Xw,zoomToInitialPosition:e?e.zoomToInitialPosition:Xw,zoomToFitContent:e?e.zoomToFitContent:Xw,zoomToFitSelection:e?e.zoomToFitSelection:Xw,centerViewOnLastInstance:e?e.centerViewOnLastInstance:Xw,getLastCursorSceneCoordinates:e?e.getLastCursorSceneCoordinates:function(){return[0,0]},getLastContextMenuSceneCoordinates:e?e.getLastContextMenuSceneCoordinates:function(){return[0,0]},getViewPosition:e?e.getViewPosition:Xw},instancesHandlers:{getContentAABB:e?e.getContentAABB:function(){return null},getSelectionAABB:e?e.selectedInstances.getSelectionAABB:function(){return new gy},addInstances:e?e.addInstances:function(){return[]},clearHighlightedInstance:e?e.clearHighlightedInstance:Xw,resetInstanceRenderersFor:e?e.resetInstanceRenderersFor:Xw,forceRemountInstancesRenderers:e?e.forceRemount:Xw,addSerializedInstances:e?e.addSerializedInstances:function(){return[]},snapSelection:e?e.snapSelection:Xw}}}));var de=c.useCallback((function(e,t){C(e,t,"upperCenter"),te(),ee()}),[te,ee,C]),pe=e.selectedObjectFolderOrObjectsWithContext.map((function(e){var t=e.objectFolderOrObject;return t?t.isFolder()?null:t.getObject():null})).filter(Boolean),fe=pe.map((function(e){return e.getName()})),he="properties"===Y&&M.current?M.current.getEditorTitle():Y?Jw[Y]:null,ge=!!l&&l.getDefaultVariant()!==u;return(0,f.jsx)(VZ,{children:function(t){var s=t.width,c=t.height;return(0,f.jsxs)("div",{style:Kw.container,children:[(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Instances editor."}),scope:"scene-editor-canvas",children:"embedded-game"===n?(0,f.jsx)(Rw.jq,{marginBottom:V,isActive:k,onRestartInGameEditor:T,showRestartInGameEditorAfterErrorButton:S}):(0,f.jsx)(dZ,{ref:O,height:c,width:s,project:r,layout:a,eventsBasedObject:l,eventsBasedObjectVariant:u,globalObjectsContainer:h,objectsContainer:g,layersContainer:p,chosenLayer:v,screenType:E,initialInstances:x,instancesEditorSettings:e.instancesEditorSettings,onInstancesEditorSettingsMutated:e.onInstancesEditorSettingsMutated,instancesSelection:e.instancesSelection,onInstancesAdded:e.onInstancesAdded,onInstancesSelected:e.onInstancesSelected,onInstanceDoubleClicked:e.onInstanceDoubleClicked,onInstancesMoved:e.onInstancesMoved,onInstancesResized:e.onInstancesResized,onInstancesRotated:e.onInstancesRotated,selectedObjectNames:fe,onContextMenu:e.onContextMenu,isInstanceOf3DObject:e.isInstanceOf3DObject,instancesEditorShortcutsCallbacks:e.instancesEditorShortcutsCallbacks,pauseRendering:!e.isActive,showObjectInstancesIn3D:I.use3DEditor,showBasicProfilingCounters:I.showBasicProfilingCounters,tileMapTileSelection:e.tileMapTileSelection,onSelectTileMapTile:e.onSelectTileMapTile,editorViewPosition2D:e.editorViewPosition2D})}),(0,f.jsxs)("div",{style:Kw.bottomContainer,id:qw,ref:_,children:[(0,f.jsxs)(zw,{maxHeight:c,title:he,openingState:K,setOpeningState:Q,children:["objects-list"===Y&&(0,f.jsx)(w.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(mx.ZP,{getThumbnail:rc.Z.getThumbnail.bind(rc.Z),project:r,projectScopedContainersAccessor:m,globalObjectsContainer:h,objectsContainer:g,layout:a,eventsBasedObject:l,initialInstances:x,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,resourceManagementProps:e.resourceManagementProps,selectedObjectFolderOrObjectsWithContext:e.selectedObjectFolderOrObjectsWithContext,onEditObject:e.onEditObject,onOpenEventBasedObjectEditor:e.onOpenEventBasedObjectEditor,onOpenEventBasedObjectVariantEditor:e.onOpenEventBasedObjectVariantEditor,onExportAssets:e.onExportAssets,onDeleteObjects:function(t,r){return e.onDeleteObjects(n,t,r)},getValidatedObjectOrGroupName:function(t,r){return e.getValidatedObjectOrGroupName(t,r,n)},onObjectCreated:e.onObjectCreated,onObjectEdited:e.onObjectEdited,onObjectFolderOrObjectWithContextSelected:e.onObjectFolderOrObjectWithContextSelected,onRenameObjectFolderOrObjectWithContextFinish:e.onRenameObjectFolderOrObjectWithContextFinish,onAddObjectInstance:function(t){return e.onAddObjectInstance(t,"upperCenter")},onObjectPasted:e.updateBehaviorsSharedData,beforeSetAsGlobalObject:function(t){return e.canObjectOrGroupBeGlobal(n,t)},onSetAsGlobalObject:e.onSetAsGlobalObject,ref:R,unsavedChanges:e.unsavedChanges,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps,isListLocked:ge,onWillInstallExtension:y,onExtensionInstalled:Z})}}),"properties"===Y&&(0,f.jsx)(w.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(Aw,{i18n:n,project:r,resourceManagementProps:i,layout:a,eventsFunctionsExtension:o,onUpdateBehaviorsSharedData:d,objectsContainer:g,globalObjectsContainer:h,layersContainer:p,projectScopedContainersAccessor:m,objects:pe,instances:P,layer:b,editInstanceVariables:e.editInstanceVariables,editObjectInPropertiesPanel:e.editObjectInPropertiesPanel,onEditObject:e.onEditObject,onObjectsModified:e.onObjectsModified,onEffectAdded:e.onEffectAdded,onInstancesModified:te,onGetInstanceSize:oe,ref:M,historyHandler:e.historyHandler,tileMapTileSelection:e.tileMapTileSelection,onSelectTileMapTile:e.onSelectTileMapTile,lastSelectionType:e.lastSelectionType,onWillInstallExtension:e.onWillInstallExtension,onExtensionInstalled:e.onExtensionInstalled,onOpenEventBasedObjectVariantEditor:e.onOpenEventBasedObjectVariantEditor,onDeleteEventsBasedObjectVariant:e.onDeleteEventsBasedObjectVariant,isVariableListLocked:ge,isBehaviorListLocked:ge,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer,onLayersModified:e.onLayersModified})}}),"object-groups-list"===Y&&(0,f.jsx)(w.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(Ix,{ref:F,globalObjectGroups:h&&h.getObjectGroups(),projectScopedContainersAccessor:m,objectGroups:g.getObjectGroups(),onCreateGroup:e.onCreateObjectGroup,onEditGroup:e.onEditObjectGroup,onDeleteGroup:e.onDeleteObjectGroup,onRenameGroup:e.onRenameObjectGroup,getValidatedObjectOrGroupName:function(t,r){return e.getValidatedObjectOrGroupName(t,r,n)},beforeSetAsGlobalGroup:function(t){return e.canObjectOrGroupBeGlobal(n,t)},unsavedChanges:e.unsavedChanges,isListLocked:ge})}}),"instances-list"===Y&&(0,f.jsx)(H.Z,{background:"medium",square:!0,style:Kw.instancesListContainer,children:(0,f.jsx)(ok,{instances:x,selectedInstances:P,onSelectInstances:de,onInstancesModified:j||Xw,ref:A})}),"layers-list"===Y&&(0,f.jsx)(NZ,{project:r,layout:a,eventsFunctionsExtension:o,eventsBasedObject:l,chosenLayer:v,onChooseLayer:e.onChooseLayer,onSelectLayer:e.onSelectLayer,onEditLayerEffects:e.editLayerEffects,onLayersModified:e.onLayersModified,onLayersVisibilityInEditorChanged:e.onLayersVisibilityInEditorChanged,onEditLayer:e.editLayer,onRemoveLayer:e.onRemoveLayer,onLayerRenamed:e.onLayerRenamed,onCreateLayer:ee,layersContainer:p,ref:L,hotReloadPreviewButtonProps:e.hotReloadPreviewButtonProps,onBackgroundColorChanged:e.onBackgroundColorChanged,gameEditorMode:e.gameEditorMode})]}),(0,f.jsx)(Yw,{selectedEditorId:"closed"===K?null:Y,onSelectEditor:$})]})]})}})})),$w=Qw,eT=n.g.gd,tT=function(e,t,n){var r=new Set;return t&&(0,mt.mapVector)(t.getAllObjectFolderOrObjects(),(function(e){r.add(eT.getPointer(e))})),e&&(0,mt.mapVector)(e.getAllObjectFolderOrObjects(),(function(e){r.add(eT.getPointer(e))})),n.filter((function(e){return r.has(eT.getPointer(e.objectFolderOrObject))}))},nT=n.g.gd,rT=function(e){var t=e.project,n=e.globalObjects,r=e.sceneObjects,a=e.initialInstances,o=e.chosenExtensionName,s=e.isNewExtension,l=e.chosenEventsBasedObjectName,c=e.shouldRemoveSceneObjectsWhenNoMoreInstance,u=e.selectedInstances,d=e.selectionAABB,p=e.deleteSelection,f=e.onExtractAsEventBasedObject,h=o;!s&&t.hasEventsFunctionsExtensionNamed(h)||(h=(0,xt.Z)(nT.Project.getSafeName(o),(function(e){return t.hasEventsFunctionsExtensionNamed(e)})),t.insertNewEventsFunctionsExtension(h,0));var g=t.getEventsFunctionsExtension(h).getEventsBasedObjects(),m=u.map((function(e){return(0,Ct.XH)(e)})),x=(0,xt.Z)(nT.Project.getSafeName(l),(function(e){return g.has(e)})),v=g.insertNew(x,g.getCount());v.setAreaMinX(0),v.setAreaMinY(0),v.setAreaMinZ(0),v.setAreaMaxX(d.width()),v.setAreaMaxY(d.height()),v.setAreaMaxZ(d.depth());var b,C=v.getObjects(),j=0,y="",Z=null,k=(0,i.Z)(m);try{for(k.s();!(b=k.n()).done;){var w=b.value,T=new nT.InitialInstance;(0,Ct.qx)(T,w),y=T.getLayer(),j=Math.max(j,T.getZOrder()),T.setX(T.getX()-d.left),T.setY(T.getY()-d.top),T.setZ(T.getZ()-d.zMin),T.setLayer("");var S=T.getObjectName();if(!C.hasObjectNamed(S)){var P=(0,iu.Z)(n,r,S);if(P){if(null===Z)Z=nT.MetadataProvider.getObjectMetadata(t.getCurrentPlatform(),P.getType()).isRenderedIn3D();var I=(0,Ct.XH)(P),E=C.insertNewObject(t,P.getType(),S,0);(0,Ct.qx)(E,I,"unserializeFrom",t)}}v.markAsRenderedIn3D(!!Z),v.getInitialInstances().insertInitialInstance(T).resetPersistentUuid(),T.delete()}}catch(F){k.e(F)}finally{k.f()}var M=nT.PlatformExtension.getObjectFullType(h,x),L=(0,xt.Z)(x,(function(e){return!(!n||!n.hasObjectNamed(e))||!!r.hasObjectNamed(e)}));r.insertNewObject(t,M,L,0);var A=a.insertNewInitialInstance();if(A.setObjectName(L),A.setX(d.left),A.setY(d.top),A.setZ(d.zMin),A.setLayer(y),A.setZOrder(j),p(),c)for(var O=0;O<C.getObjectsCount();O++){var R=C.getObjectAt(O).getName();a.hasInstancesOfObject(R)||r.removeObject(R)}f(h,x)},iT=n.g.gd,aT="Instances",oT={container:{display:"flex",flex:1,position:"relative",overflow:"hidden"}},sT=(0,f.jsx)(ag,{}),lT=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(e){var s;(0,ze.Z)(this,n),(s=t.call(this,e)).unregisterDebuggerCallback=null,s.editorViewPosition2D={viewX:null,viewY:null},s.onResourceExternallyChanged=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.props.project,!(r=n.getResourcesManager().getResourceNameWithFile(t.identifier))){e.next=20;break}if(i=(0,nl.Z)(s),o=i.editorDisplay){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,o.startSceneRendering(!1),e.next=10,ty.Z.reloadResource(n,r);case 10:o.forceUpdateObjectsList(),l=new iT.ObjectsUsingResourceCollector(n.getResourcesManager(),r),iT.ProjectBrowserHelper.exposeProjectObjects(n,l),c=l.getObjectNames().toJSArray(),l.delete(),rc.Z.renderersCacheClearingMethods.forEach((function(e){return e(n)})),c.forEach((function(e){o.instancesHandlers.resetInstanceRenderersFor(e)}));case 17:return e.prev=17,o.startSceneRendering(!0),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[6,,17,20]])})));return function(t){return e.apply(this,arguments)}}(),s.onInstancesModifiedOutsideEditor=function(){s.instancesSelection.clearSelection(),s.editorDisplay&&s.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),s.updateToolbar(),s._sendHotReloadAllInstances()},s.onObjectsModifiedOutsideEditor=function(){s.forceUpdateObjectsList()},s.onObjectGroupsModifiedOutsideEditor=function(){s.forceUpdateObjectGroupsList()},s.updateToolbar=function(){var e=(0,nl.Z)(s).editorDisplay;e&&("mosaic"===e.getName()?s.props.setToolbar((0,f.jsx)(qj,{gameEditorMode:s.props.gameEditorMode,setGameEditorMode:s.props.setGameEditorMode,selectedInstancesCount:s.instancesSelection.getSelectedInstances().length,toggleObjectsList:s.toggleObjectsList,isObjectsListShown:e.isEditorVisible("objects-list"),toggleObjectGroupsList:s.toggleObjectGroupsList,isObjectGroupsListShown:e.isEditorVisible("object-groups-list"),toggleProperties:s.toggleProperties,isPropertiesShown:e.isEditorVisible("properties"),deleteSelection:s.deleteSelection,toggleInstancesList:s.toggleInstancesList,isInstancesListShown:e.isEditorVisible("instances-list"),toggleLayersList:s.toggleLayersList,isLayersListShown:e.isEditorVisible("layers-list"),toggleWindowMask:s.toggleWindowMask,isWindowMaskShown:!!s.state.instancesEditorSettings.windowMask,toggleGrid:s.toggleGrid,isGridShown:!!s.state.instancesEditorSettings.grid,openSetupGrid:s.openSetupGrid,setZoomFactor:s.setZoomFactor,getContextMenuZoomItems:s.getContextMenuZoomItems,canUndo:Zt(s.state.history),canRedo:yt(s.state.history),undo:s.undo,redo:s.redo,onOpenSettings:s.openSceneProperties,settingsIcon:sT,onOpenSceneVariables:s.editLayoutVariables})):s.props.setToolbar((0,f.jsx)(Jj,{gameEditorMode:s.props.gameEditorMode,setGameEditorMode:s.props.setGameEditorMode,selectedInstancesCount:s.instancesSelection.getSelectedInstances().length,toggleObjectsList:s.toggleObjectsList,toggleObjectGroupsList:s.toggleObjectGroupsList,toggleProperties:s.toggleProperties,deleteSelection:s.deleteSelection,toggleInstancesList:s.toggleInstancesList,toggleLayersList:s.toggleLayersList,toggleWindowMask:s.toggleWindowMask,isWindowMaskShown:!!s.state.instancesEditorSettings.windowMask,toggleGrid:s.toggleGrid,isGridShown:!!s.state.instancesEditorSettings.grid,openSetupGrid:s.openSetupGrid,setZoomFactor:s.setZoomFactor,getContextMenuZoomItems:s.getContextMenuZoomItems,canUndo:Zt(s.state.history),canRedo:yt(s.state.history),undo:s.undo,redo:s.redo,onOpenSettings:s.openSceneProperties,settingsIcon:sT,onOpenSceneVariables:s.editLayoutVariables})))},s.toggleObjectsList=function(){s.editorDisplay&&s.editorDisplay.toggleEditorView("objects-list")},s.toggleProperties=function(){s.editorDisplay&&s.editorDisplay.toggleEditorView("properties")},s.toggleObjectGroupsList=function(){s.editorDisplay&&s.editorDisplay.toggleEditorView("object-groups-list")},s.toggleInstancesList=function(){s.editorDisplay&&s.editorDisplay.toggleEditorView("instances-list")},s.toggleLayersList=function(){s.editorDisplay&&s.editorDisplay.toggleEditorView("layers-list")},s.toggleWindowMask=function(){s.setInstancesEditorSettings((0,l.Z)((0,l.Z)({},s.state.instancesEditorSettings),{},{windowMask:!s.state.instancesEditorSettings.windowMask}))},s.toggleGrid=function(){s.setInstancesEditorSettings((0,l.Z)((0,l.Z)({},s.state.instancesEditorSettings),{},{grid:!s.state.instancesEditorSettings.grid,snap:!s.state.instancesEditorSettings.grid}))},s.openSetupGrid=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s.setState({setupGridOpen:e})},s.openSceneProperties=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s.setState({scenePropertiesDialogOpen:e})},s.openObjectEditor=function(){if(s.instancesSelection.hasSelectedInstances()){var e=s.instancesSelection.getSelectedInstances()[0].getObjectName();s.editObjectByName(e)}},s.editLayerEffects=function(e){s.setState({editedLayer:e,editedLayerInitialTab:"effects"})},s.editLayer=function(e){s.setState({editedLayer:e,editedLayerInitialTab:"properties"})},s.editInstanceVariables=function(e){s.setState({variablesEditedInstance:e})},s.editLayoutVariables=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s.setState({layoutVariablesDialogOpen:e})},s.editObject=function(e,t,n){var r=s.props.project;e?s.setState({editedObjectWithContext:{object:e,global:r.getObjects().hasObjectNamed(e.getName())},editedObjectInitialTab:t||"properties"},n):s.setState({editedObjectWithContext:null,editedObjectInitialTab:"properties"},n)},s.isEditingObject=function(){return!!s.state.editedObjectWithContext},s.openObjectExporterDialog=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s.setState({isAssetExporterDialogOpen:e})},s.editObjectByName=function(e,t){var n=s.props,r=n.globalObjectsContainer,i=n.objectsContainer;i.hasObjectNamed(e)?s.editObject(i.getObject(e),t):r&&r.hasObjectNamed(e)&&s.editObject(r.getObject(e),t)},s.editObjectInPropertiesPanel=function(e){var t=function(e,t,n){var r=null;return e&&(0,mt.mapVector)(e.getAllObjectFolderOrObjects(),(function(e){e.isFolder()||e.getObject().getName()!==n||(r={objectFolderOrObject:e,global:!0})})),t&&(0,mt.mapVector)(t.getAllObjectFolderOrObjects(),(function(e){e.isFolder()||e.getObject().getName()!==n||(r={objectFolderOrObject:e,global:!1})})),r}(s.props.globalObjectsContainer,s.props.objectsContainer,e);t&&(s.setState({selectedObjectFolderOrObjectsWithContext:[t],lastSelectionType:"object"}),s.editorDisplay&&s.editorDisplay.ensureEditorVisible("properties"))},s._editObjectGroup=function(e){s.setState({editedGroup:e,isCreatingNewGroup:!1})},s._createObjectGroup=function(){s.setState({editedGroup:null,isCreatingNewGroup:!0})},s._closeObjectGroupEditorDialog=function(){s.state.editedGroup&&s.props.onObjectGroupEdited({group:s.state.editedGroup,global:!1}),s.setState({editedGroup:null,isCreatingNewGroup:!1})},s.setInstancesEditorSettings=function(e){s.setState({instancesEditorSettings:e},(function(){s.updateToolbar()}));var t=s.props.previewDebuggerServer;t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(n){t.sendMessage(n,{command:"setInstancesEditorSettings",payload:{instancesEditorSettings:e}})}))},s._onInstancesEditorSettingsMutated=sy()((function(e){s.setInstancesEditorSettings(e)}),1e3,{leading:!1,trailing:!0}),s.undo=function(){s.instancesSelection.clearSelection(),s.setState({history:wt(s.state.history,s.props.initialInstances)},(function(){s.editorDisplay&&s.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),s.updateToolbar(),s._sendHotReloadAllInstances()}))},s.redo=function(){s.instancesSelection.clearSelection(),s.setState({history:Tt(s.state.history,s.props.initialInstances)},(function(){s.editorDisplay&&s.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),s.updateToolbar(),s._sendHotReloadAllInstances()}))},s._sendHotReloadAllInstances=function(){var e=s.props.previewDebuggerServer;if(e){var t=(0,Ct.XH)(s.props.initialInstances);e.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(n){e.sendMessage(n,{command:"hotReloadAllInstances",payload:{instances:t}})}))}},s._onObjectFolderOrObjectWithContextSelected=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];e&&t.push(e),s.setState({lastSelectionType:"object",selectedObjectFolderOrObjectsWithContext:t},(function(){s.updateToolbar()}))},s._createNewObjectAndInstanceUnderCursor=function(){var e=(0,nl.Z)(s).editorDisplay;e&&(s.setState({newObjectInstanceSceneCoordinates:e.viewControls.getLastCursorSceneCoordinates()}),e.openNewObjectDialog())},s.addInstanceOnTheScene=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";if(s.editorDisplay){var n=s.editorDisplay.viewControls.getViewPosition(),r=[0,0];n&&(r=n.toSceneCoordinates(n.getWidth()/2,n.getHeight()/("upperCenter"===t?4:2))),s._addInstance(r,e)}},s._addInstance=function(e,t){if(t&&s.editorDisplay){var n=s.editorDisplay.instancesHandlers.addInstances(e,[t],s.state.chosenLayer);s._onInstancesAddedAndSendToEditor3D(n)}},s._onInstancesAddedAndSendToEditor3D=function(e){s._onInstancesAdded(e),s._sendAddedInstances(e)},s._onInstancesAdded=function(e){var t=null;e.forEach((function(e){null===t&&(s.props.layersContainer.getLayer(e.getLayer()).getVisibility()||(t=e.getLayer()));var n=function(e){var t=e.instance,n=e.globalObjectsContainer,r=e.objectsContainer,i=t.getObjectName(),a=(0,iu.Z)(n,r,i),o=a?ry[a.getType()]:null;return o?(o.onInstanceAdded(e),o.getInfoBarDetails("onInstanceAdded")):null}({instance:e,layersContainer:s.props.layersContainer,globalObjectsContainer:s.props.globalObjectsContainer,objectsContainer:s.props.objectsContainer});n&&s.setState({additionalWorkInfoBar:n,showAdditionalWorkInfoBar:!0})})),null!==t&&s.onInstanceAddedOnInvisibleLayer(t),s.setState({history:kt(s.state.history,s.props.initialInstances,"ADD")},(function(){return s.updateToolbar()}))},s.onInstanceAddedOnInvisibleLayer=function(e){s.setState({invisibleLayerOnWhichInstancesHaveJustBeenAdded:e})},s._sendAddedInstances=function(e){var t=s.props.previewDebuggerServer;t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(n){t.sendMessage(n,{command:"addInstances",payload:{instances:e.map((function(e){return(0,Ct.XH)(e)})),moveUnderCursor:!1}})}))},s._onInstancesSelected=function(e){s._sendSelectedInstances(),s._selectObjectOfInstances(e)},s._selectObjectOfInstances=function(e){if(0!==e.length){var t=s.props,n=t.globalObjectsContainer,r=t.objectsContainer,i=e[e.length-1].getObjectName();n&&n.hasObjectNamed(i)?s.setState({lastSelectionType:"instance",selectedObjectFolderOrObjectsWithContext:[{objectFolderOrObject:n.getRootFolder().getObjectNamed(i),global:!0}]},s.updateToolbar):r.hasObjectNamed(i)&&s.setState({lastSelectionType:"instance",selectedObjectFolderOrObjectsWithContext:[{objectFolderOrObject:r.getRootFolder().getObjectNamed(i),global:!1}]},s.updateToolbar)}else s.setState({lastSelectionType:"instance",selectedObjectFolderOrObjectsWithContext:[]},s.updateToolbar)},s._onInstanceDoubleClicked=function(e){s.editObjectByName(e.getObjectName())},s._onInstancesMovedAndSendToEditor3D=function(e){s._onInstancesMoved(e),s._sendUpdatedInstances(e)},s._onInstancesMoved=function(e){s.setState({history:kt(s.state.history,s.props.initialInstances,"EDIT")},(function(){return s.forceUpdatePropertiesEditor()})),s._sendUpdatedInstances(e)},s._onInstancesResized=function(e){s.setState({history:kt(s.state.history,s.props.initialInstances,"EDIT")},(function(){return s.forceUpdatePropertiesEditor()})),s._sendUpdatedInstances(e)},s._onInstancesRotated=function(e){s.setState({history:kt(s.state.history,s.props.initialInstances,"EDIT")},(function(){return s.forceUpdatePropertiesEditor()})),s._sendUpdatedInstances(e)},s._exportDataOnly=sy()((function(){s.props.hotReloadPreviewButtonProps.launchProjectDataOnlyPreview()}),250),s._onInstancesModified=function(e){s._sendUpdatedInstances(e),s.forceUpdate()},s._sendUpdatedInstances=function(e){var t=s.props.previewDebuggerServer;t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(n){t.sendMessage(n,{command:"updateInstances",payload:{instances:e.map((function(e){return(0,Ct.XH)(e)}))}})}))},s._onObjectsModified=function(e){s._hotReloadObjects({updatedObjects:e})},s._onSetAsGlobalObject=function(e){s.props.onObjectListsModified({isNewObjectTypeUsed:!1})},s._hotReloadObjects=function(e){var t=e.updatedObjects.map((function(e){return(0,Ct.VY)(e)})),n=s.props.previewDebuggerServer;n&&n.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){n.sendMessage(e,{command:"hotReloadObjects",payload:{updatedObjects:t}})}))},s._onObjectEdited=function(e,t){var n=s.props,r=n.project,i=n.layout,a=n.resourceManagementProps;s.props.onObjectEdited(e),i&&(e.global?iT.WholeProjectRefactorer.behaviorsAddedToGlobalObject(r,e.object.getName()):iT.WholeProjectRefactorer.behaviorsAddedToObjectInScene(r,i,e.object.getName())),s.updateBehaviorsSharedData(),s.props.unsavedChanges&&s.props.unsavedChanges.triggerUnsavedChanges(),t?a.onResourceUsageChanged():s._hotReloadObjects({updatedObjects:[e.object]})},s.onSelectTileMapTile=function(e){s.setState({tileMapTileSelection:e})},s._setSelectedInstances=function(e,t){s.instancesSelection.selectInstances({instances:e,multiSelect:t,layersLocks:null,ignoreSeal:!0}),s._onInstancesSelected(e)},s._sendSelectedInstances=function(){var e=s.props.previewDebuggerServer;e&&e.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(t){e.sendMessage(t,{command:"setSelectedInstances",payload:{instanceUuids:s.instancesSelection.getSelectedInstances().map((function(e){return e.getPersistentUuid()}))}})}))},s._onSelectInstances=function(e,t,n){s._setSelectedInstances(e,t);var r=(0,nl.Z)(s).editorDisplay;if(r){var i=null,a=r.viewControls,o=a.getViewPosition();o&&"upperCenter"===n&&(i=[0,o.toSceneScale(o.getHeight()/4)]),a.centerViewOnLastInstance(e,i)}"embedded-game"===s.props.gameEditorMode&&(0,mm.P6)("centerViewOnLastSelectedInstance")},s._addInstanceForNewObject=function(e){var t=s.state.newObjectInstanceSceneCoordinates;t&&(s._addInstance(t,e),s.setState({newObjectInstanceSceneCoordinates:null}))},s._onObjectCreated=function(e,t){if(0!==e.length){var n=e[0],r=function(e){var t=ry[e.object.getType()];return t?(t.onObjectAdded(e),t.getInfoBarDetails("onObjectAdded")):null}({object:n,layersContainer:s.props.layersContainer,globalObjectsContainer:s.props.globalObjectsContainer,objectsContainer:s.props.objectsContainer});r&&s.setState({additionalWorkInfoBar:r,showAdditionalWorkInfoBar:!0}),s.props.unsavedChanges&&s.props.unsavedChanges.triggerUnsavedChanges(),s._addInstanceForNewObject(n.getName()),s.props.onObjectListsModified({isNewObjectTypeUsed:t})}},s._onRemoveLayer=function(e,t){s.setState({layerRemoved:e,onCloseLayerRemoveDialog:function(n,r){s.setState(function(t){var n={layerRemoved:null};return t&&e===s.state.chosenLayer&&(n.chosenLayer=""),n}(n),(function(){n&&(null===r?(s.instancesSelection.unselectInstancesOnLayer(e),s.props.layout?iT.WholeProjectRefactorer.removeLayerInScene(s.props.project,s.props.layout,e):s.props.eventsBasedObject&&iT.WholeProjectRefactorer.removeLayerInEventsBasedObject(s.props.eventsBasedObject,e)):s.props.layout?iT.WholeProjectRefactorer.mergeLayersInScene(s.props.project,s.props.layout,e,r):s.props.eventsBasedObject&&iT.WholeProjectRefactorer.mergeLayersInEventsBasedObject(s.props.eventsBasedObject,e,r)),t(n),s.editorDisplay&&s.editorDisplay.instancesHandlers.forceRemountInstancesRenderers(),s.forceUpdateLayersList(),s.forceUpdatePropertiesEditor(),s.updateToolbar()}))}})},s._onLayerRenamed=function(){s.forceUpdatePropertiesEditor()},s._sendHotReloadLayers=function(){var e=s.props,t=e.previewDebuggerServer,n=e.layersContainer,r=e.project,i=(0,mt.mapFor)(0,n.getLayersCount(),(function(e){var t=n.getLayerAt(e);return(0,Ct.XH)(t)}));t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"hotReloadLayers",payload:{layers:i,areEffectsHidden:r.areEffectsHiddenInEditor()}})}))},s._sendSetBackgroundColor=function(){var e=s.props,t=e.previewDebuggerServer,n=e.layout;n&&t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"setBackgroundColor",payload:{backgroundColor:[n.getBackgroundColorRed(),n.getBackgroundColorGreen(),n.getBackgroundColorBlue()]}})}))},s._onLayersModified=function(e){var t=s.props.onEffectAdded;e?t():s._sendHotReloadLayers()},s._onLayersVisibilityInEditorChanged=function(){s._sendHotReloadLayers()},s._onChooseLayer=function(e){s.setState({chosenLayer:e});var t=s.props.previewDebuggerServer;t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(n){t.sendMessage(n,{command:"setSelectedLayer",payload:{layerName:e}})}))},s._onSelectLayer=function(e){s.setState({selectedLayer:e,lastSelectionType:"layer"})},s._onDeleteObjects=function(e,t,n){var r=s.props,i=r.project,a=r.layout,o=r.eventsBasedObject,l=r.onObjectsDeleted;t.forEach((function(e){var t=e.object,n=e.global;s.instancesSelection.unselectInstancesOfObject(t.getName()),a?n?iT.WholeProjectRefactorer.globalObjectRemoved(i,t.getName()):iT.WholeProjectRefactorer.objectRemovedInScene(i,a,t.getName()):o&&iT.WholeProjectRefactorer.objectRemovedInEventsBasedObject(i,o,t.getName())})),s.props.onObjectListsModified({isNewObjectTypeUsed:!1}),n(!0),l(),s.forceUpdatePropertiesEditor(),s.updateToolbar()},s._getValidatedObjectOrGroupName=function(e,t,n){var r=s.props,i=r.project,a=r.layout,o=r.projectScopedContainersAccessor.get(),l=o.getObjectsContainersList(),c=o.getVariablesContainersList(),u=(0,xt.Z)(iT.Project.getSafeName(e),(function(e){if(l.hasObjectOrGroupNamed(e)||c.has(e))return!0;if(t&&a){var n=a.getName(),r=(0,mt.mapFor)(0,i.getLayoutsCount(),(function(t){var r=i.getLayoutAt(t),a=r.getName();if(n!==a){if(r.getObjects().hasObjectNamed(e))return a;if(r.getObjects().getObjectGroups().has(e))return a}return null})).filter(Boolean);if(r.length>0)return!0}return!1}));return u},s._onRenameEditedObject=function(e){var t=s.state.editedObjectWithContext;t&&s._onRenameObjectFinish(t,e)},s._onRenameObjectFinish=function(e,t){var n=e.object,r=e.global,i=s.props,a=i.project,o=i.layout,l=i.eventsBasedObject,c=i.projectScopedContainersAccessor;n.getName()!==t&&(o?r?iT.WholeProjectRefactorer.globalObjectOrGroupRenamed(a,n.getName(),t,!1):iT.WholeProjectRefactorer.objectOrGroupRenamedInScene(a,o,n.getName(),t,!1):l&&iT.WholeProjectRefactorer.objectOrGroupRenamedInEventsBasedObject(a,c.get(),l,n.getName(),t,!1),n.setName(t),s.props.onObjectListsModified({isNewObjectTypeUsed:!1}))},s._onRenameObjectFolderOrObjectWithContextFinish=function(e,t,n){var r=e.objectFolderOrObject,i=e.global;if((0,yf.p3)(r)===t)return s._onObjectFolderOrObjectWithContextSelected(e),void n(!1);if(r.isFolder())return r.setFolderName(t),void n(!0);var a=r.getObject();s._onRenameObjectFinish({object:a,global:i},t),s._onObjectFolderOrObjectWithContextSelected(e),n(!0)},s._onMoveInstancesZOrder=function(e){var t=s.instancesSelection.getSelectedInstances(),n=t.reduce((function(e,t){return t.isLocked()||e.add(t.getLayer()),e}),new Set),r=new iT.HighestZOrderFinder,i={};n.forEach((function(t){r.reset(),r.restrictSearchToLayer(t),s.props.initialInstances.iterateOverInstances(r),i[t]="back"===e?r.getLowestZOrder():r.getHighestZOrder()})),r.delete(),t.forEach((function(t){if(!t.isLocked()){var n=i[t.getLayer()];if(t.getZOrder()===n)return;t.setZOrder(n+("front"===e?1:-1))}})),s.forceUpdateInstancesList(),s.forceUpdatePropertiesEditor()},s._onDeleteObjectGroup=function(e,t){t(!0),s.props.onObjectGroupsDeleted()},s._onRenameObjectGroup=function(e,t,n){var r=e.group,i=e.global,a=s.props,o=a.project,l=a.layout,c=a.eventsBasedObject,u=a.projectScopedContainersAccessor;l?r.getName()!==t&&(i?iT.WholeProjectRefactorer.globalObjectOrGroupRenamed(o,r.getName(),t,!0):iT.WholeProjectRefactorer.objectOrGroupRenamedInScene(o,l,r.getName(),t,!0)):c&&iT.WholeProjectRefactorer.objectOrGroupRenamedInEventsBasedObject(o,u.get(),c,r.getName(),t,!0),n(!0),s.props.onObjectGroupEdited(e)},s.canObjectOrGroupBeGlobal=function(e,t){var n=s.props,r=n.layout,i=n.project;if(!r)return!1;var a=r.getName(),o=(0,mt.mapFor)(0,i.getLayoutsCount(),(function(e){var n=i.getLayoutAt(e),r=n.getName();if(a!==r){if(n.getObjects().hasObjectNamed(t))return r;if(n.getObjects().getObjectGroups().has(t))return r}return null})).filter(Boolean);return!(o.length>0)||y.ZP.showConfirmDialog(e._({id:'Making "{objectOrGroupName}" global would conflict with the following scenes that have a group or an object with the same name:{0}Continue only if you know what you\'re doing.',values:{0:"\n\n - "+o.join("\n\n - ")+"\n\n",objectOrGroupName:t}}),"warning")},s.deleteSelection=function(){s.instancesSelection.getSelectedInstances().forEach((function(e){e.isLocked()||s.props.initialInstances.removeInstance(e)})),s.instancesSelection.clearSelection(),s.editorDisplay&&s.editorDisplay.instancesHandlers.clearHighlightedInstance(),s.forceUpdatePropertiesEditor(),s.setState({selectedObjectFolderOrObjectsWithContext:[],history:kt(s.state.history,s.props.initialInstances,"DELETE")},(function(){s.updateToolbar()}));var e=s.props.previewDebuggerServer;e&&e.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(t){e.sendMessage(t,{command:"deleteSelection",payload:{}})}))},s.zoomToInitialPosition=function(){var e=(0,nl.Z)(s).editorDisplay;e&&(e.viewControls.zoomToInitialPosition(),"embedded-game"===s.props.gameEditorMode&&(0,mm.P6)("zoomToInitialPosition"))},s.zoomToFitContent=function(){var e=(0,nl.Z)(s).editorDisplay;e&&(e.viewControls.zoomToFitContent(),"embedded-game"===s.props.gameEditorMode&&(0,mm.P6)("zoomToFitContent"))},s.zoomToFitSelection=function(){var e=(0,nl.Z)(s).editorDisplay;e&&(e.viewControls.zoomToFitSelection(),"embedded-game"===s.props.gameEditorMode&&(0,mm.P6)("zoomToFitSelection"))},s.getContextMenuZoomItems=function(e){return[{label:e._({id:"Zoom in"}),click:s.zoomIn,accelerator:"CmdOrCtrl+numadd"},{label:e._({id:"Zoom out"}),click:s.zoomOut,accelerator:"CmdOrCtrl+numsub"},{label:e._({id:"Zoom to fit selection"}),click:s.zoomToFitSelection,enabled:s.instancesSelection.hasSelectedInstances(),accelerator:"Shift+num1"},{label:e._({id:"Zoom to initial position"}),click:s.zoomToInitialPosition,accelerator:"Shift+num2"},{label:e._({id:"Zoom to fit content"}),click:s.zoomToFitContent,accelerator:"Shift+num3"}]},s.getContextMenuLayoutItems=function(e){var t=s.props.layout;return[{label:e._({id:"Open scene events"}),click:function(){return s.props.onOpenEvents(t?t.getName():"")}},{label:e._({id:"Open scene properties"}),click:function(){return s.openSceneProperties(!0)}}].filter(Boolean)},s.getContextMenuInstancesWiseItems=function(e){var t=s.instancesSelection.hasSelectedInstances();return[{label:e._({id:"Copy"}),click:function(){return s.copySelection()},enabled:t,accelerator:"CmdOrCtrl+C"},{label:e._({id:"Cut"}),click:function(){return s.cutSelection()},enabled:t,accelerator:"CmdOrCtrl+X"},{label:e._({id:"Paste"}),click:function(){return s.paste()},enabled:vt.Z.has(aT),accelerator:"CmdOrCtrl+V"},{label:e._({id:"Duplicate"}),enabled:t,click:function(){s.duplicateSelection()},accelerator:"CmdOrCtrl+D"},{label:e._({id:"Delete"}),click:function(){return s.deleteSelection()},enabled:t,accelerator:"Delete"},{type:"separator"},{label:e._({id:"Bring to front"}),enabled:t,click:function(){s._onMoveInstancesZOrder("front")}},{label:e._({id:"Send to back"}),enabled:t,click:function(){s._onMoveInstancesZOrder("back")}},{type:"separator"},{label:e._({id:"Extract"}),submenu:[{label:e._({id:"Extract as a custom object"}),click:function(){return s.setState({extractAsCustomObjectDialogOpen:!0})},enabled:t},s.props.layout&&{label:e._({id:"Extract as an external layout"}),click:function(){return s.setState({extractAsExternalLayoutDialogOpen:!0})},enabled:t}].filter(Boolean)},{type:"separator"},{label:e._({id:"Show/Hide instance properties"}),click:function(){return s.toggleProperties()},enabled:t}].filter(Boolean)},s.setZoomFactor=function(e){s.editorDisplay&&s.editorDisplay.viewControls.setZoomFactor(e),s._sendSetZoom(e)},s.zoomIn=function(){s.editorDisplay&&s.editorDisplay.viewControls.zoomBy(ay.Qi),s._sendZoomBy(ay.Qi)},s.zoomOut=function(){s.editorDisplay&&s.editorDisplay.viewControls.zoomBy(ay.e_),s._sendZoomBy(ay.e_)},s._onContextMenu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s.contextMenu&&s.contextMenu.open(e,t,{ignoreSelectedObjectsForContextMenu:!!n})},s.isInstanceOf3DObject=function(e){var t=s.props,n=t.project,r=t.globalObjectsContainer,i=t.objectsContainer,a=(0,iu.Z)(r,i,e.getObjectName());return!!a&&iT.MetadataProvider.getObjectMetadata(n.getCurrentPlatform(),a.getType()).isRenderedIn3D()},s.buildContextMenu=function(e,t){if(t.ignoreSelectedObjectsForContextMenu||!s.instancesSelection.hasSelectedInstances())return[{label:e._({id:"Paste"}),click:function(){return s.paste()},enabled:vt.Z.has(aT),accelerator:"CmdOrCtrl+V"},{type:"separator"},{label:e._({id:"Insert new..."}),click:function(){return s._createNewObjectAndInstanceUnderCursor()}},{type:"separator"}].concat((0,r.Z)(s.getContextMenuZoomItems(e)),[{type:"separator"}],(0,r.Z)(s.getContextMenuLayoutItems(e)));var n=s.instancesSelection.getSelectedInstances();if(1===n.length||1===Fu()(n.map((function(e){return e.getObjectName()}))).length){var i=s.props,a=i.project,o=i.globalObjectsContainer,l=i.objectsContainer,c=n[0].getObjectName(),u=(0,iu.Z)(o,l,c),d=u?iT.MetadataProvider.getObjectMetadata(a.getCurrentPlatform(),u.getType()):null,p=u?iT.PlatformExtension.getExtensionFromFullObjectType(u.getType()):null,f=p&&a.hasEventsFunctionsExtensionNamed(p)?a.getEventsFunctionsExtension(p):null;return[].concat((0,r.Z)(s.getContextMenuInstancesWiseItems(e)),[{type:"separator"},{label:e._({id:"Edit object {0}",values:{0:(0,Bs.S)(c,14)}}),click:function(){return s.editObjectByName(c,"properties")}},{label:e._({id:"Edit object variables"}),click:function(){return s.editObjectByName(c,"variables")}},{label:e._({id:"Edit behaviors"}),click:function(){return s.editObjectByName(c,"behaviors")}},d?{label:e._({id:"Edit effects"}),click:function(){return s.editObjectByName(c,"effects")},enabled:d.hasDefaultBehavior("EffectCapability::EffectBehavior")}:null,u&&a.hasEventsBasedObject(u.getType())?{label:e._({id:"Edit children"}),enabled:(0,ew.fh)(iT.asCustomObjectConfiguration(u.getConfiguration()),a.getEventsBasedObject(u.getType()),f),click:function(){var e=iT.asCustomObjectConfiguration(u.getConfiguration());s.props.onOpenEventBasedObjectVariantEditor(iT.PlatformExtension.getExtensionFromFullObjectType(u.getType()),iT.PlatformExtension.getObjectNameFromFullObjectType(u.getType()),e.getVariantName())}}:null,{type:"separator"}],(0,r.Z)(s.getContextMenuLayoutItems(e))).filter(Boolean)}return[].concat((0,r.Z)(s.getContextMenuInstancesWiseItems(e)),[{type:"separator"}],(0,r.Z)(s.getContextMenuLayoutItems(e)))},s.copySelection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.useLastCursorPosition,e.pasteInTheForeground),n=s.instancesSelection.getSelectedInstances().map((function(e){return(0,Ct.XH)(e)})),r=0,i=0;if(s.editorDisplay){var a=s.editorDisplay.instancesHandlers.getSelectionAABB();r=a.centerX(),i=a.centerY()}s.editorDisplay&&vt.Z.set(aT,{x:r,y:i,pasteInTheForeground:!!t,instances:n})},s.cutSelection=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition;s.copySelection({useLastCursorPosition:e,pasteInTheForeground:!0}),s.deleteSelection()},s.duplicateSelection=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition;var e=s.instancesSelection.getSelectedInstances().map((function(e){return(0,Ct.XH)(e)})),t=Yy({instancesContainer:s.props.initialInstances,copyReferential:[-2*ht.rA,-2*ht.rA],serializedInstances:e,doesObjectExistInContext:function(){return!0}});s._onInstancesAddedAndSendToEditor3D(t),s.instancesSelection.clearSelection(),s.instancesSelection.selectInstances({instances:t,multiSelect:!0,layersLocks:null}),s.forceUpdatePropertiesEditor()},s.paste=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).useLastCursorPosition,t=vt.Z.get(aT),n=bt.$.extractArrayProperty(t,"instances"),r=bt.$.extractNumberProperty(t,"x"),a=bt.$.extractNumberProperty(t,"y"),o=bt.$.extractBooleanProperty(t,"pasteInTheForeground")||!1;if(null!==r&&null!==a&&null!==n){var l=Yy({instancesContainer:s.props.initialInstances,copyReferential:[r,a],serializedInstances:n,addInstancesInTheForeground:o,doesObjectExistInContext:function(e){return s.props.projectScopedContainersAccessor.get().getObjectsContainersList().hasObjectNamed(e)}});s._onInstancesAddedAndSendToEditor3D(l),s.instancesSelection.clearSelection(),s.instancesSelection.selectInstances({instances:l,multiSelect:!0,layersLocks:null});var c=(0,nl.Z)(s).editorDisplay;if(c){var u=c.viewControls.getViewPosition();if(u){var d,p=e?c.viewControls.getLastCursorSceneCoordinates():c.viewControls.getLastContextMenuSceneCoordinates(),f=u.containsPoint(p[0],p[1])?p:[u.getViewX(),u.getViewY()],h=(0,i.Z)(l);try{for(h.s();!(d=h.n()).done;){var g=d.value;g.setX(g.getX()+f[0]),g.setY(g.getY()+f[1])}}catch(m){h.e(m)}finally{h.f()}c.instancesHandlers.snapSelection(l),s._sendUpdatedInstances(l)}}s.forceUpdatePropertiesEditor()}},s.extractAsExternalLayout=function(e){var t=s.props,n=t.project,r=t.layout,a=t.onExtractAsExternalLayout;if(r&&a){var o=s.instancesSelection.getSelectedInstances().map((function(e){return(0,Ct.XH)(e)})),l=(0,xt.Z)(e,(function(e){return n.hasExternalLayoutNamed(e)})),c=n.insertNewExternalLayout(l,n.getExternalLayoutsCount());c.setAssociatedLayout(r.getName());var u,d=(0,i.Z)(o);try{for(d.s();!(u=d.n()).done;){var p=u.value,f=new iT.InitialInstance;(0,Ct.qx)(f,p),c.getInitialInstances().insertInitialInstance(f).resetPersistentUuid(),f.delete()}}catch(h){d.e(h)}finally{d.f()}s.deleteSelection(),s.setState({extractAsExternalLayoutDialogOpen:!1}),a(l)}},s.extractAsCustomObject=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,l,c,u,d,p,f,h,g,m,x,v,b;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=s.props,l=o.project,c=o.globalObjectsContainer,u=o.objectsContainer,d=o.initialInstances,p=o.onExtractAsEventBasedObject,f=(0,nl.Z)(s),h=f.editorDisplay,g=f.deleteSelection,m=f.instancesSelection,p){e.next=4;break}return e.abrupt("return");case 4:if(x=new gy,"embedded-game"!==s.props.gameEditorMode){e.next=21;break}if(v=s.props.previewDebuggerServer){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,e.next=12,v.sendMessageWithResponse({command:"getSelectionAABB"});case 12:b=e.sent,x.set({left:b.payload.minX,top:b.payload.minY,right:b.payload.maxX,bottom:b.payload.maxY,zMin:b.payload.minZ,zMax:b.payload.maxZ}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.error("Can't get the selection AABB.",e.t0);case 19:e.next=24;break;case 21:if(h){e.next=23;break}return e.abrupt("return");case 23:x=h.instancesHandlers.getSelectionAABB();case 24:rT({project:l,globalObjects:c,sceneObjects:u,initialInstances:d,chosenExtensionName:t,isNewExtension:n,chosenEventsBasedObjectName:r,shouldRemoveSceneObjectsWhenNoMoreInstance:i,selectedInstances:m.getSelectedInstances(),selectionAABB:x,deleteSelection:g,onExtractAsEventBasedObject:p}),s.setState({extractAsCustomObjectDialogOpen:!1});case 26:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),s.onSelectAllInstancesOfObjectInLayout=function(e){var t=s.props.initialInstances,n=(0,iy.mC)(t,e);s._setSelectedInstances(n,!1),s.forceUpdateInstancesList(),s._onInstancesSelected(n)},s.updateBehaviorsSharedData=function(){var e=s.props,t=e.layout,n=e.project;t&&iT.WholeProjectRefactorer.updateBehaviorsSharedData(n)},s.forceUpdateObjectsList=function(){s.editorDisplay&&s.editorDisplay.forceUpdateObjectsList()},s.forceUpdateObjectGroupsList=function(){s.editorDisplay&&s.editorDisplay.forceUpdateObjectGroupsList()},s.forceUpdateLayersList=function(){s.props.layersContainer.hasLayerNamed(s.state.chosenLayer)||s.setState({chosenLayer:""}),s.editorDisplay&&s.editorDisplay.forceUpdateLayersList()},s.forceUpdateInstancesList=function(){s.editorDisplay&&s.editorDisplay.forceUpdateInstancesList()},s.forceUpdatePropertiesEditor=function(){s.editorDisplay&&s.editorDisplay.forceUpdatePropertiesEditor()},s.forceUpdateCustomObjectRenderedInstances=function(){var e=s.props,t=e.project,n=e.projectScopedContainersAccessor,r=new iT.ResourcesInUseHelper(t.getResourcesManager());n.forEachObject((function(e){t.hasEventsBasedObject(e.getType())&&e.getConfiguration().exposeResources(r)}));var i=r.getAllImages().toNewVectorString().toJSArray();r.delete(),ty.Z.loadTextures(t,i).then((function(){var e=(0,nl.Z)(s).editorDisplay;e&&n.forEachObject((function(t){e.instancesHandlers.resetInstanceRenderersFor(t.getName())})),s.forceUpdateObjectsList()}))},s.forceUpdateRenderedInstancesOfObject=function(e){var t=s.props.project,n=new iT.ResourcesInUseHelper(t.getResourcesManager());e.getConfiguration().exposeResources(n);var r=n.getAllImages().toNewVectorString().toJSArray();n.delete(),ty.Z.loadTextures(t,r).then((function(){s.editorDisplay&&s.editorDisplay.instancesHandlers.resetInstanceRenderersFor(e.getName()),s.forceUpdateObjectsList()}))},s.instancesSelection=new Cj;var c=e.getInitialInstancesEditorSettings();return s.state={setupGridOpen:!1,scenePropertiesDialogOpen:!1,layersListOpen:!1,onCloseLayerRemoveDialog:null,layerRemoved:null,editedLayer:null,editedLayerInitialTab:"properties",isAssetExporterDialogOpen:!1,editedObjectWithContext:null,editedObjectInitialTab:"properties",variablesEditedInstance:null,newObjectInstanceSceneCoordinates:null,editedGroup:null,isCreatingNewGroup:!1,extractAsExternalLayoutDialogOpen:!1,extractAsCustomObjectDialogOpen:!1,instancesEditorSettings:c,history:jt(e.initialInstances,{historyMaxSize:50}),layoutVariablesDialogOpen:!1,showAdditionalWorkInfoBar:!1,additionalWorkInfoBar:{identifier:"default-additional-work",message:"",touchScreenMessage:""},tileMapTileSelection:null,selectedObjectFolderOrObjectsWithContext:[],chosenLayer:c.selectedLayer||"",selectedLayer:null,invisibleLayerOnWhichInstancesHaveJustBeenAdded:null,lastSelectionType:"instance"},s}return(0,We.Z)(n,[{key:"componentDidUpdate",value:function(e,t){this.state.history!==t.history&&this.props.unsavedChanges&&this.props.unsavedChanges.triggerUnsavedChanges()}},{key:"componentDidMount",value:function(){var e=this;this.resourceExternallyChangedCallbackId=am(this.onResourceExternallyChanged.bind(this)),this.props.previewDebuggerServer&&!this.unregisterDebuggerCallback&&(this.unregisterDebuggerCallback=this.props.previewDebuggerServer.registerCallbacks({onErrorReceived:function(){},onConnectionClosed:function(){},onConnectionOpened:function(){},onConnectionErrored:function(){},onServerStateChanged:function(){},onHandleParsedMessage:function(t){t.id;var n=t.parsedMessage;n.editorId===e.props.editorId&&("notifyGraphicsContextLost"===n.command&&(console.info("Embedded game frame notified the graphics context was lost, restarting the editor..."),e.props.onRestartInGameEditor("relaunched-because-graphics-context-lost")),"embedded-game"===e.props.gameEditorMode&&("updateInstances"===n.command?e.onReceiveInstanceChanges(n.payload):"setCameraState"===n.command?(0,mm.FS)(n.editorId,n.payload):"openContextMenu"===n.command?e._onContextMenu(n.payload.cursorX,n.payload.cursorY):"undo"===n.command?Zt(e.state.history)&&e.undo():"redo"===n.command?yt(e.state.history)&&e.redo():"copy"===n.command?e.copySelection():"paste"===n.command?e.paste():"cut"===n.command&&e.cutSelection()))}}))}},{key:"componentWillUnmount",value:function(){om(this.resourceExternallyChangedCallbackId),this.unregisterDebuggerCallback&&(this.unregisterDebuggerCallback(),this.unregisterDebuggerCallback=null)}},{key:"onEditorReloaded",value:function(){this._sendSelectedInstances()}},{key:"getInstancesEditorSettings",value:function(){return this.state.instancesEditorSettings}},{key:"onReceiveInstanceChanges",value:function(e){var t=this,n=[];e.updatedInstances.forEach((function(e){var r=e.persistentUuid,i=e.x,a=e.y,o=e.z,s=e.angle,l=e.rotationY,c=e.rotationX,u=e.customSize,d=e.width,p=e.height,f=e.depth,h=e.defaultWidth,g=e.defaultHeight,m=e.defaultDepth,x=(0,iy.MK)(t.props.initialInstances,r);if(x){x.setX(i),x.setY(a),void 0!==o&&Number.isFinite(o)&&x.setZ(o),x.setAngle(s),void 0!==l&&Number.isFinite(l)&&x.setRotationY(l),void 0!==c&&Number.isFinite(c)&&x.setRotationX(c),x.setHasCustomSize(u),u&&(x.setCustomWidth(d||0),x.setCustomHeight(p||0));var v=Number.isFinite(f);x.setHasCustomDepth(v),v&&void 0!==f&&Number.isFinite(f)&&x.setCustomDepth(f),x.setDefaultWidth(h||0),x.setDefaultHeight(g||0),x.setDefaultDepth(m||0),n.push(x)}})),n.length>0&&this._onInstancesMoved(n);var r=e.selectedInstances.map((function(e){var n=e.persistentUuid,r=e.defaultWidth,i=e.defaultHeight,a=e.defaultDepth,o=(0,iy.MK)(t.props.initialInstances,n);return o&&(o.setDefaultWidth(r),o.setDefaultHeight(i),o.setDefaultDepth(a||0)),o||null})).filter(Boolean),i=e.removedInstances.map((function(e){var n=e.persistentUuid;return(0,iy.MK)(t.props.initialInstances,n)||null})).filter(Boolean);i.forEach((function(e){t.props.initialInstances.removeInstance(e)})),i.length&&(this.instancesSelection.selectInstances({instances:[],layersLocks:null,multiSelect:!1}),this.forceUpdatePropertiesEditor(),this.setState({selectedObjectFolderOrObjectsWithContext:[],history:kt(this.state.history,this.props.initialInstances,"DELETE")},(function(){t.updateToolbar()})));var a=e.addedInstances.map((function(e){var n=t.props.initialInstances.insertNewInitialInstance();return(0,Ct.qx)(n,e),n}));a.length&&this._onInstancesAdded(a),e.isSendingBackSelectionForDefaultSize||(this.instancesSelection.selectInstances({instances:r,multiSelect:!1,layersLocks:null,ignoreSeal:!0}),this._selectObjectOfInstances(r)),e.objectNameToEdit&&this.editObjectInPropertiesPanel(e.objectNameToEdit)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.layout===e.layout&&this.props.initialInstances===e.initialInstances&&this.props.project===e.project||(this.instancesSelection.clearSelection(),this.openSetupGrid(!1),this.editInstanceVariables(null),this.openSceneProperties(!1)),!this.props.isActive&&e.isActive&&(this.instancesSelection.cleanNonExistingInstances(this.props.initialInstances),this.setState((function(e){var n=e.selectedObjectFolderOrObjectsWithContext;return{selectedObjectFolderOrObjectsWithContext:tT(t.props.globalObjectsContainer,t.props.objectsContainer,n)}})))}},{key:"_sendSetZoom",value:function(e){if("embedded-game"===this.props.gameEditorMode){var t=this.props.previewDebuggerServer;if(!t)return;t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(n){t.sendMessage(n,{command:"setZoom",payload:{zoom:e}})}))}}},{key:"_sendZoomBy",value:function(e){if("embedded-game"===this.props.gameEditorMode){var t=this.props.previewDebuggerServer;if(!t)return;t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(n){t.sendMessage(n,{command:"zoomBy",payload:{zoomFactor:e}})}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectScopedContainersAccessor,i=t.layout,a=t.eventsFunctionsExtension,o=t.eventsBasedObject,s=t.eventsBasedObjectVariant,l=t.initialInstances,u=t.resourceManagementProps,d=t.isActive,p=this.state,h=p.editedObjectWithContext,g=p.selectedObjectFolderOrObjectsWithContext,m=this.state.variablesEditedInstance?this.state.variablesEditedInstance.getObjectName():null,x=m?(0,iu.Z)(this.props.globalObjectsContainer,this.props.objectsContainer,m):null,v=null!==this.state.invisibleLayerOnWhichInstancesHaveJustBeenAdded?(0,f.jsx)(w.Trans,{id:'You just added an instance to a hidden layer ("{0}"). Open the layer panel to make it visible.',values:{0:this.state.invisibleLayerOnWhichInstancesHaveJustBeenAdded||(0,f.jsx)(w.Trans,{id:"Base layer"})}}):null,b=!!o&&o.getDefaultVariant()!==s;return(0,f.jsx)(be.Ip,{children:function(t){var p=t.isMobile?$w:Bw;return(0,f.jsxs)("div",{style:oT.container,id:"scene-editor","data-active":d?"true":void 0,children:[(0,f.jsx)(ey,{project:n,layersContainer:e.props.layersContainer,globalObjectsContainer:e.props.globalObjectsContainer,objectsContainer:e.props.objectsContainer,onEditObject:e.editObject,onEditObjectVariables:function(t){e.editObject(t,"variables")},onOpenSceneProperties:e.openSceneProperties,onEditObjectGroup:e._editObjectGroup,onEditLayerEffects:e.editLayerEffects,onEditLayer:e.editLayer}),(0,f.jsx)(p,{ref:function(t){return e.editorDisplay=t},gameEditorMode:e.props.gameEditorMode,onRestartInGameEditor:e.props.onRestartInGameEditor,showRestartInGameEditorAfterErrorButton:e.props.showRestartInGameEditorAfterErrorButton,project:n,layout:i,eventsFunctionsExtension:a,eventsBasedObject:o,eventsBasedObjectVariant:s,layersContainer:e.props.layersContainer,globalObjectsContainer:e.props.globalObjectsContainer,objectsContainer:e.props.objectsContainer,projectScopedContainersAccessor:r,initialInstances:l,instancesSelection:e.instancesSelection,onSelectInstances:e._onSelectInstances,onInstancesModified:e._onInstancesModified,onAddObjectInstance:e.addInstanceOnTheScene,chosenLayer:e.state.chosenLayer,onChooseLayer:e._onChooseLayer,selectedLayer:e.state.selectedLayer,onSelectLayer:e._onSelectLayer,editLayer:e.editLayer,editLayerEffects:e.editLayerEffects,editInstanceVariables:e.editInstanceVariables,editObjectByName:e.editObjectByName,editObjectInPropertiesPanel:e.editObjectInPropertiesPanel,selectedObjectFolderOrObjectsWithContext:g,onLayerRenamed:e._onLayerRenamed,onLayersModified:function(){return e._onLayersModified(!1)},onBackgroundColorChanged:e._sendSetBackgroundColor,onLayersVisibilityInEditorChanged:e._onLayersVisibilityInEditorChanged,onRemoveLayer:e._onRemoveLayer,tileMapTileSelection:e.state.tileMapTileSelection,onSelectTileMapTile:e.onSelectTileMapTile,onExportAssets:e.openObjectExporterDialog,onDeleteObjects:e._onDeleteObjects,getValidatedObjectOrGroupName:e._getValidatedObjectOrGroupName,onCreateObjectGroup:e._createObjectGroup,onEditObjectGroup:e._editObjectGroup,onDeleteObjectGroup:e._onDeleteObjectGroup,onRenameObjectGroup:e._onRenameObjectGroup,canObjectOrGroupBeGlobal:e.canObjectOrGroupBeGlobal,updateBehaviorsSharedData:e.updateBehaviorsSharedData,onEditObject:e.editObject,onOpenEventBasedObjectEditor:e.props.onOpenEventBasedObjectEditor,onOpenEventBasedObjectVariantEditor:e.props.onOpenEventBasedObjectVariantEditor,onDeleteEventsBasedObjectVariant:e.props.onDeleteEventsBasedObjectVariant,onRenameObjectFolderOrObjectWithContextFinish:e._onRenameObjectFolderOrObjectWithContextFinish,onObjectCreated:e._onObjectCreated,onObjectEdited:e._onObjectEdited,onObjectsModified:e._onObjectsModified,onEffectAdded:e.props.onEffectAdded,onObjectFolderOrObjectWithContextSelected:e._onObjectFolderOrObjectWithContextSelected,onSetAsGlobalObject:e._onSetAsGlobalObject,historyHandler:{undo:e.undo,redo:e.redo,canUndo:function(){return Zt(e.state.history)},canRedo:function(){return yt(e.state.history)},saveToHistory:function(){return e.setState({history:kt(e.state.history,e.props.initialInstances)})}},instancesEditorShortcutsCallbacks:{onCopy:function(){return e.copySelection({useLastCursorPosition:!0})},onCut:function(){return e.cutSelection({useLastCursorPosition:!0})},onPaste:function(){return e.paste({useLastCursorPosition:!0})},onDuplicate:function(){return e.duplicateSelection({useLastCursorPosition:!0})},onDelete:e.deleteSelection,onUndo:e.undo,onRedo:e.redo,onZoomOut:e.zoomOut,onZoomIn:e.zoomIn,onShift1:e.zoomToFitSelection,onShift2:e.zoomToInitialPosition,onShift3:e.zoomToFitContent},onInstancesAdded:e._onInstancesAddedAndSendToEditor3D,onInstancesSelected:e._onInstancesSelected,onInstanceDoubleClicked:e._onInstanceDoubleClicked,onInstancesMoved:e._onInstancesMovedAndSendToEditor3D,onInstancesResized:e._onInstancesResized,onInstancesRotated:e._onInstancesRotated,isInstanceOf3DObject:e.isInstanceOf3DObject,onSelectAllInstancesOfObjectInLayout:e.onSelectAllInstancesOfObjectInLayout,instancesEditorSettings:e.state.instancesEditorSettings,onInstancesEditorSettingsMutated:e._onInstancesEditorSettingsMutated,onContextMenu:e._onContextMenu,resourceManagementProps:e.props.resourceManagementProps,hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,isActive:d,onOpenedEditorsChanged:e.updateToolbar,lastSelectionType:e.state.lastSelectionType,onWillInstallExtension:e.props.onWillInstallExtension,onExtensionInstalled:e.props.onExtensionInstalled,editorViewPosition2D:e.editorViewPosition2D}),(0,f.jsx)(w.I18n,{children:function(t){var s=t.i18n;return(0,f.jsx)(c.Fragment,{children:h&&(0,f.jsx)(oj,{open:!0,object:h.object,initialTab:e.state.editedObjectInitialTab,project:n,layout:i,eventsFunctionsExtension:a,eventsBasedObject:o,projectScopedContainersAccessor:r,resourceManagementProps:u,onComputeAllVariableNames:function(){var t=e.state.editedObjectWithContext;return t&&i?_n.findAllObjectVariables(n.getCurrentPlatform(),n,i,t.object.getName()):[]},onCancel:function(){h&&e.props.onObjectEdited(h),e.editObject(null),e.props.triggerHotReloadInGameEditorIfNeeded()},getValidatedObjectOrGroupName:function(t){return e._getValidatedObjectOrGroupName(t,h.global,s)},onRename:function(t){e._onRenameEditedObject(t)},onApply:function(t,n){var r=h;e.editObject(null,void 0,(function(){t||e.props.triggerHotReloadInGameEditorIfNeeded(),r&&e._onObjectEdited(r,t),n&&e.props.onEffectAdded()}))},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,onUpdateBehaviorsSharedData:function(){return e.updateBehaviorsSharedData()},openBehaviorEvents:e.props.openBehaviorEvents,onWillInstallExtension:e.props.onWillInstallExtension,onExtensionInstalled:e.props.onExtensionInstalled,onOpenEventBasedObjectEditor:e.props.onOpenEventBasedObjectEditor,onOpenEventBasedObjectVariantEditor:function(t,n,r){e.props.onOpenEventBasedObjectVariantEditor(t,n,r),h&&e._onObjectEdited(h,!1),e.editObject(null)},onDeleteEventsBasedObjectVariant:e.props.onDeleteEventsBasedObjectVariant,isBehaviorListLocked:b,isVariableListLocked:b})})}}),e.state.isAssetExporterDialogOpen&&i&&(0,f.jsx)(vj,{project:n,layout:i,onClose:function(){return e.openObjectExporterDialog(!1)}}),(e.state.editedGroup||e.state.isCreatingNewGroup)&&(0,f.jsx)(Fx,{project:n,projectScopedContainersAccessor:r,group:e.state.editedGroup,objectsContainer:e.props.objectsContainer,globalObjectsContainer:e.props.globalObjectsContainer,initialInstances:e.props.initialInstances,onCancel:e._closeObjectGroupEditorDialog,onApply:e._closeObjectGroupEditorDialog,onObjectGroupAdded:function(t){e.editorDisplay&&e.editorDisplay.scrollObjectGroupsListToObjectGroup(t),e.props.onObjectGroupEdited({group:t,global:!1})},initialTab:"objects",onComputeAllVariableNames:function(){var t=e.state.editedGroup;return t&&i?_n.findAllObjectVariables(n.getCurrentPlatform(),n,i,t.getName()):[]},isVariableListLocked:b,isObjectListLocked:b}),e.state.setupGridOpen&&(0,f.jsx)(kj,{instancesEditorSettings:e.state.instancesEditorSettings,onChangeInstancesEditorSettings:e.setInstancesEditorSettings,onCancel:function(){return e.openSetupGrid(!1)},onApply:function(){return e.openSetupGrid(!1)}}),!!e.state.variablesEditedInstance&&!!x&&(0,f.jsx)(SC,{project:n,layout:i,objectsContainer:e.props.objectsContainer,globalObjectsContainer:e.props.globalObjectsContainer,projectScopedContainersAccessor:r,objectInstance:e.state.variablesEditedInstance,open:!0,onCancel:function(){return e.editInstanceVariables(null)},onApply:function(){return e.editInstanceVariables(null)},onEditObjectVariables:function(){e.editObject(x,"variables"),e.editInstanceVariables(null)},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,isListLocked:!0}),!!e.state.layerRemoved&&e.state.onCloseLayerRemoveDialog&&(0,f.jsx)(hC,{open:!0,project:n,layout:i,layersContainer:e.props.layersContainer,initialInstances:l,layerRemoved:e.state.layerRemoved,onClose:e.state.onCloseLayerRemoveDialog}),!!e.state.editedLayer&&(0,f.jsx)(TC,{project:n,resourceManagementProps:e.props.resourceManagementProps,projectScopedContainersAccessor:e.props.projectScopedContainersAccessor,layout:i,eventsFunctionsExtension:a,eventsBasedObject:o,layer:e.state.editedLayer,initialInstances:l,initialTab:e.state.editedLayerInitialTab,onApply:function(t){e._onLayersModified(t),e.setState({editedLayer:null})},onCancel:function(){return e.setState({editedLayer:null})},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps}),e.state.scenePropertiesDialogOpen&&i&&(0,f.jsx)(Ai,{open:!0,project:n,layout:i,onClose:function(){return e.openSceneProperties(!1)},onApply:function(){return e.openSceneProperties(!1)},onEditVariables:function(){return e.editLayoutVariables(!0)},onOpenMoreSettings:e.props.onOpenMoreSettings,resourceManagementProps:e.props.resourceManagementProps,projectScopedContainersAccessor:e.props.projectScopedContainersAccessor,onBackgroundColorChanged:e._sendSetBackgroundColor}),e.state.scenePropertiesDialogOpen&&o&&s&&(0,f.jsx)(wj,{project:n,eventsBasedObject:o,eventsBasedObjectVariant:s,onClose:function(){return e.openSceneProperties(!1)},onApply:function(){e.openSceneProperties(!1);var t=e.props.previewDebuggerServer;t&&t.getExistingEmbeddedGameFrameDebuggerIds().forEach((function(e){t.sendMessage(e,{command:"updateInnerArea",payload:{areaMinX:s.getAreaMinX(),areaMinY:s.getAreaMinY(),areaMinZ:s.getAreaMinZ(),areaMaxX:s.getAreaMaxX(),areaMaxY:s.getAreaMaxY(),areaMaxZ:s.getAreaMaxZ()}})}))},getContentAABB:e.editorDisplay?e.editorDisplay.instancesHandlers.getContentAABB:function(){return null},onEventsBasedObjectChildrenEdited:e.props.onEventsBasedObjectChildrenEdited}),!!e.state.layoutVariablesDialogOpen&&i&&(0,f.jsx)(Oi,{open:!0,project:n,layout:i,onApply:function(){return e.editLayoutVariables(!1)},onCancel:function(){return e.editLayoutVariables(!1)},hotReloadPreviewButtonProps:e.props.hotReloadPreviewButtonProps,isListLocked:!1}),(0,f.jsx)(w.I18n,{children:function(t){var r=t.i18n;return(0,f.jsxs)(c.Fragment,{children:[e.state.extractAsExternalLayoutDialogOpen&&i&&(0,f.jsx)(Tj,{suggestedName:(0,xt.Z)(r._({id:"{0} part",values:{0:i.getName()}}),(function(e){return n.hasExternalLayoutNamed(e)})),onCancel:function(){return e.setState({extractAsExternalLayoutDialogOpen:!1})},onApply:function(t){return e.extractAsExternalLayout(t)}}),e.state.extractAsCustomObjectDialogOpen&&(0,f.jsx)(Ij,{project:n,globalObjectsContainer:e.props.globalObjectsContainer,objectsContainer:e.props.objectsContainer,initialInstances:e.props.initialInstances,selectedInstances:e.instancesSelection.getSelectedInstances(),onCancel:function(){return e.setState({extractAsCustomObjectDialogOpen:!1})},onApply:e.extractAsCustomObject}),(0,f.jsx)(mi,{show:e.state.showAdditionalWorkInfoBar,identifier:e.state.additionalWorkInfoBar.identifier,message:r._(e.state.additionalWorkInfoBar.message),touchScreenMessage:r._(e.state.additionalWorkInfoBar.touchScreenMessage)}),(0,f.jsx)(ns.Z,{ref:function(t){return e.contextMenu=t},buildMenuTemplate:e.buildContextMenu})]})}}),(0,f.jsx)(Ws.Z,{message:v,duration:7e3,visible:!!v,hide:function(){return e.onInstanceAddedOnInvisibleLayer(null)}})]})}})}}]),n}(c.Component),cT={container:{display:"flex",flex:1}},uT=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={externalPropertiesDialogOpen:!1},e.saveExternalProperties=function(t){var n=e.getExternalLayout();n&&(n.setAssociatedLayout(t.layoutName),e.setState({externalPropertiesDialogOpen:!1},(function(){return e.updateToolbar()})),e.props.onExternalLayoutAssociationChanged())},e.openExternalPropertiesDialog=function(){e.setState({externalPropertiesDialogOpen:!0})},e.saveUiSettings=function(){var t=e.getExternalLayout(),n=e.editor;n&&t&&(0,Ct.qx)(t.getAssociatedEditorSettings(),n.getInstancesEditorSettings())},e}return(0,We.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"shouldComponentUpdate",value:function(e){return!this.props.isActive&&e.isActive&&this._setPreviewedLayout(),this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){this.props.isActive&&this._setPreviewedLayout(),this.resourceExternallyChangedCallbackId=am(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){om(this.resourceExternallyChangedCallbackId)}},{key:"_setPreviewedLayout",value:function(){var e=this.props.projectItemName,t=this.getLayout();this.props.setPreviewedLayout({layoutName:t?t.getName():null,externalLayoutName:e||null,eventsBasedObjectType:null,eventsBasedObjectVariantName:null})}},{key:"notifyChangesToInGameEditor",value:function(e){this._switchToSceneEdition(e)}},{key:"_switchToSceneEdition",value:function(e){var t=this.props,n=t.projectItemName,r=t.editorId,i=this.getLayout();this._setPreviewedLayout(),"embedded-game"!==this.props.gameEditorMode||!i||!n||this.editor&&this.editor.isEditingObject()?(0,mm.VL)(e):((0,mm.dD)((0,l.Z)((0,l.Z)({},e),{},{editorId:r,sceneName:i.getName(),externalLayoutName:n,eventsBasedObjectType:null,eventsBasedObjectVariantName:null})),this.editor&&this.editor.onEditorReloaded())}},{key:"switchInGameEditorIfNoHotReloadIsNeeded",value:function(){var e=this.props,t=e.projectItemName,n=e.editorId,r=this.getLayout();t&&r&&(0,mm.nj)({editorId:n,sceneName:r.getName(),externalLayoutName:t,eventsBasedObjectType:null,eventsBasedObjectVariantName:null})}},{key:"onResourceExternallyChanged",value:function(e){var t=this.editor;t&&t.onResourceExternallyChanged(e)}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){var e=this.editor;e&&(e.forceUpdateObjectsList(),e.forceUpdateObjectGroupsList(),e.forceUpdateLayersList())}},{key:"onEventsBasedObjectChildrenEdited",value:function(){var e=this.editor;e&&e.forceUpdateCustomObjectRenderedInstances()}},{key:"onSceneObjectEdited",value:function(e,t){var n=this.editor,r=this.getExternalLayout();r&&(r.getAssociatedLayout()===e.getName()||t.global)&&n&&n.forceUpdateRenderedInstancesOfObject(t.object)}},{key:"onSceneObjectsDeleted",value:function(e){var t=this.editor,n=this.getExternalLayout();n&&n.getAssociatedLayout()===e.getName()&&t&&t.forceUpdateObjectsList()}},{key:"onSceneEventsModifiedOutsideEditor",value:function(e){}},{key:"onInstancesModifiedOutsideEditor",value:function(e){e.scene===this.getLayout()&&this.editor&&this.editor.onInstancesModifiedOutsideEditor()}},{key:"onObjectsModifiedOutsideEditor",value:function(e){e.scene===this.getLayout()&&this.editor&&this.editor.forceUpdateObjectsList()}},{key:"onObjectGroupsModifiedOutsideEditor",value:function(e){e.scene===this.getLayout()&&this.editor&&this.editor.onObjectGroupsModifiedOutsideEditor()}},{key:"getExternalLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasExternalLayoutNamed(n)?t.getExternalLayout(n):null}},{key:"getLayout",value:function(){var e=this.props.project;if(!e)return null;var t=this.getAssociatedLayoutName();return t?e.getLayout(t):void 0}},{key:"getAssociatedLayoutName",value:function(){var e=this.props.project;if(!e)return null;var t=this.getExternalLayout();if(!t)return null;var n=t.getAssociatedLayout();return e.hasLayoutNamed(n)?n:null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=t.isActive,a=this.getExternalLayout(),o=this.getLayout();if(!a||!n)return(0,f.jsxs)("div",{children:["No external layout called ",r," found!"]});var s=new Bn({project:n,layout:o});return(0,f.jsxs)("div",{style:cT.container,children:[o&&(0,f.jsx)(lT,{editorId:this.props.editorId,gameEditorMode:this.props.gameEditorMode,setGameEditorMode:this.props.setGameEditorMode,onRestartInGameEditor:this.props.onRestartInGameEditor,showRestartInGameEditorAfterErrorButton:this.props.showRestartInGameEditorAfterErrorButton,setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,unsavedChanges:this.props.unsavedChanges,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,ref:function(t){return e.editor=t},project:n,projectScopedContainersAccessor:s,layout:o,eventsFunctionsExtension:null,eventsBasedObject:null,eventsBasedObjectVariant:null,globalObjectsContainer:n.getObjects(),objectsContainer:o.getObjects(),layersContainer:o.getLayers(),initialInstances:a.getInitialInstances(),getInitialInstancesEditorSettings:function(){return yj((0,Ct.XH)(a.getAssociatedEditorSettings()),Math.max(n.getGameResolutionWidth(),n.getGameResolutionHeight()))},onOpenEvents:this.props.onOpenEvents,onOpenMoreSettings:this.openExternalPropertiesDialog,isActive:i,previewDebuggerServer:this.props.previewDebuggerServer,openBehaviorEvents:this.props.openBehaviorEvents,onExtractAsExternalLayout:this.props.onExtractAsExternalLayout,onExtractAsEventBasedObject:this.props.onExtractAsEventBasedObject,onOpenEventBasedObjectEditor:this.props.onOpenEventBasedObjectEditor,onOpenEventBasedObjectVariantEditor:this.props.onOpenEventBasedObjectVariantEditor,onObjectEdited:function(t){return e.props.onSceneObjectEdited(o,t)},onObjectsDeleted:function(){return e.props.onSceneObjectsDeleted(o)},onObjectGroupEdited:function(){},onObjectGroupsDeleted:function(){},onEventsBasedObjectChildrenEdited:function(){},onWillInstallExtension:this.props.onWillInstallExtension,onExtensionInstalled:this.props.onExtensionInstalled,onDeleteEventsBasedObjectVariant:this.props.onDeleteEventsBasedObjectVariant,onEffectAdded:this.props.onEffectAdded,onObjectListsModified:this.props.onObjectListsModified,triggerHotReloadInGameEditorIfNeeded:this.props.triggerHotReloadInGameEditorIfNeeded}),!o&&(0,f.jsx)(Ki.Z,{children:(0,f.jsxs)(fx.Z,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"To edit the external layout, choose the scene in which it will be included"})}),(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"Choose the scene"}),primary:!0,onClick:this.openExternalPropertiesDialog})}),(0,f.jsx)(M.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,f.jsx)(lC.Z,{tutorialId:"Intermediate-externals",label:(0,f.jsx)(w.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,f.jsx)(An.Z,{helpPagePath:"/interface/events-editor/external-events"})})})]})}),(0,f.jsx)(sC,{title:(0,f.jsx)(w.Trans,{id:"Configure the external layout"}),helpTexts:[(0,f.jsx)(w.Trans,{id:'In order to see your objects in the scene, you need to add an action "Create objects from external layout" in your events sheet.'}),(0,f.jsx)(w.Trans,{id:"You can also launch a preview from this external layout, but remember that it will still create objects from the scene, as well as trigger its events. Make sure to disable any action loading the external layout before doing so to avoid having duplicate objects!"})],open:this.state.externalPropertiesDialogOpen,project:n,layoutName:this.getAssociatedLayoutName(),onChoose:this.saveExternalProperties,onClose:function(){return e.setState({externalPropertiesDialogOpen:!1})}})]})}}]),n}(c.Component),dT=n(2139),pT=n(58893),fT={previewContainer:{position:"relative",display:"flex",width:"100%",alignItems:"center",justifyContent:"center",height:200},iconContainer:{display:"flex",flex:1,height:"100%",alignItems:"center",justifyContent:"center",position:"relative"},icon:{width:60,height:60}},hT=function(e){var t=e.renderIcon;return(0,f.jsxs)("div",{style:fT.previewContainer,children:[(0,f.jsx)(pT.Z,{}),(0,f.jsx)("div",{style:fT.iconContainer,children:t({style:fT.icon})})]})},gT=n(48812),mT=n(62981),xT=n(81730),vT=n(43717),bT=n(65671),CT=function(e){var t=e.project,n=e.resourceName,r=t.getResourcesManager();switch(r.hasResource(n)?r.getResource(n).getKind():null){case"image":return(0,f.jsx)(MC.Z,{resourceName:n,imageResourceSource:e.resourcesLoader.getResourceFullUrl(t,n,{}),isImageResourceSmooth:(0,MC.X)(t,n)});case"audio":return(0,f.jsx)(hT,{renderIcon:function(e){return(0,f.jsx)(vT.Z,(0,l.Z)({},e))}});case"model3D":return(0,f.jsx)(bT.Z,{modelUrl:e.resourcesLoader.getResourceFullUrl(t,n,{}),expand:!0});case"json":case"tilemap":case"tileset":case"atlas":case"spine":return(0,f.jsx)(hT,{renderIcon:function(e){return(0,f.jsx)(mT.Z,(0,l.Z)({},e))}});case"video":return(0,f.jsx)(hT,{renderIcon:function(e){return(0,f.jsx)(xT.Z,(0,l.Z)({},e))}});case"font":case"bitmapFont":return(0,f.jsx)(hT,{renderIcon:function(e){return(0,f.jsx)(gT.Z,(0,l.Z)({},e))}});default:return null}},jT={tableCell:{wordBreak:"break-word"}},yT=function(e){var t=e.resources;if(1!==t.length)return null;var n=t[0],r=(0,ty.k)(n);return r?(0,f.jsxs)(Rv.iA,{children:[(0,f.jsx)(Rv.xD,{children:(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Embedded file name"})}),(0,f.jsx)(Rv.bY,{children:(0,f.jsx)(w.Trans,{id:"Associated resource name"})})]})}),(0,f.jsx)(Rv.RM,{children:Object.entries(r).map((function(e){var t=(0,s.Z)(e,2),n=t[0],r=t[1],i="string"===typeof r?r:"Unrecognized value.";return(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.Nn,{style:jT.tableCell,children:n}),(0,f.jsx)(Rv.Nn,{style:jT.tableCell,children:i})]},n)}))})]}):null},ZT=c.forwardRef((function(e,t){var n=e.project,r=e.resourcesLoader,i=e.resources,s=e.onResourcePathUpdated,l=e.resourceManagementProps,u=(0,gt.Z)();c.useImperativeHandle(t,(function(){return{forceUpdate:u}}));var d=c.useMemo((function(){var e=l.getStorageProvider();return i.length?l.resourceSources.filter((function(e){return e.kind===i[0].getKind()})).filter((function(t){var n=t.onlyForStorageProvider;return!n||n===e.internalName})).filter((function(e){return!e.hideInResourceEditor})):[]}),[l,i]),p=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i[0],e.next=3,l.onChooseResource({initialSourceName:t.name,multiSelection:!1,resourceKind:n.getKind()});case 3:if(r=e.sent,o=r.selectedResources,c=r.selectedSourceName,o.length){e.next=8;break}return e.abrupt("return");case 8:if(d.find((function(e){return e.name===c}))){e.next=11;break}return e.abrupt("return");case 11:return n.setFile(o[0].getFile()),o.forEach((function(e){return e.delete()})),s(),u(),e.next=17,l.onFetchNewlyAddedResources();case 17:l.onNewResourcesAdded();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,i,s,u,d]),h=c.useMemo((function(){return[{name:"Resource name",valueType:"string",disabled:function(){return!0},getValue:function(e){return e.getName()},setValue:function(e,t){return e.setName(t)}},{name:"File",valueType:"string",getValue:function(e){return e.getFile()},setValue:function(e,t){return e.setFile(t)},onEditButtonClick:function(){var e=d[0];e&&p(e)},onEditButtonBuildMenuTemplate:d.length>1?function(e){return d.map((function(t){return{label:e._(t.displayName),click:function(){return p(t)}}}))}:void 0}]}),[d,p]),g=c.useCallback((function(){var e=i[0].getProperties(),t=(0,Gn.ZP)({properties:e,defaultValueProperties:null,getProperties:function(e){return e.getProperties()},onUpdateProperty:function(e,t,n){e.updateProperty(t,n),u()}});return(0,f.jsx)(Wn.Z,{schema:h.concat(t),instances:i})}),[i,h,u]);return(0,f.jsxs)(Ki.Z,{maxWidth:!0,children:[function(){if(i&&i.length)return(0,f.jsx)(CT,{resourceName:i[0].getName(),resourcesLoader:r,project:n})}(),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(ft.Z,{children:(0,f.jsxs)(_.ak,{expand:!0,children:[i&&i.length?g():(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Resources are automatically added to your project whenever you add an image, a font or a video to an object or when you choose an audio file in events. Choose a resource to display its properties."})}),i.length>0&&i.some((function(e){return"javascript"===e.getKind()}))&&(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"JavaScript files must be imported by an extension - by choosing it the extension properties. Otherwise, it won't be loaded by the game."})}),(0,f.jsx)(yT,{resources:i})]},i.map((function(e){return""+e.ptr})).join(";"))})]})})),kT=ZT,wT=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.canDelete,n=e.isPropertiesShown;return(0,f.jsxs)(Ls.k,{lastChild:!0,children:[this.props.canOpenProjectFolder&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.Z,{size:"small",color:"default",onClick:this.props.onOpenProjectFolder,tooltip:{id:"Open the project folder"},children:(0,f.jsx)(wf.Z,{})}),(0,f.jsx)(Qh,{})]}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:this.props.onToggleProperties,tooltip:{id:"Open the properties panel"},selected:n,children:(0,f.jsx)(at.Z,{})}),(0,f.jsx)($.Z,{size:"small",color:"default",onClick:this.props.onDeleteSelection,disabled:!t,tooltip:{id:"Delete the selected resource"},children:(0,f.jsx)(Jt.Z,{})})]})}}]),n}(c.PureComponent),TT=wT,ST=n(57974),PT=n.g.gd,IT=F()("@electron/remote"),ET=IT?IT.shell:null,MT=F()("path"),LT={container:{display:"flex",flex:1,position:"relative",overflow:"hidden"}},AT={direction:"row",first:"properties",second:"resources-list",splitPercentage:66},OT=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).editorMosaic=null,e._propertiesEditor=null,e._resourcesList=null,e.resourcesLoader=Sr.Z,e.state={selectedResource:null},e.updateToolbar=function(){var t=e.editorMosaic?e.editorMosaic.getOpenedEditorNames():[];e.props.setToolbar((0,f.jsx)(TT,{onOpenProjectFolder:e.openProjectFolder,canOpenProjectFolder:!!IT&&!!e.props.fileMetadata&&"LocalFile"===e.props.storageProvider.internalName,onToggleProperties:e.toggleProperties,isPropertiesShown:t.includes("properties"),canDelete:!!e.state.selectedResource,onDeleteSelection:function(){return e.deleteResource(e.state.selectedResource)}}))},e.deleteResource=function(t){var n=e.props,r=n.project,i=n.onDeleteResource;t&&(y.ZP.showConfirmDialog("Are you sure you want to remove this resource? This can't be undone.")&&i(t,(function(n){n&&t&&(r.getResourcesManager().removeResource(t.getName()),e.setState({selectedResource:null},(function(){e._resourcesList&&e._resourcesList.forceUpdateList(),e.updateToolbar()})))})))},e._removeUnusedResources=function(t){var n=e.props.project,r=e.state.selectedResource?e.state.selectedResource.getName():null,i=PT.ProjectResourcesAdder.getAllUseless(n,t).toJSArray();console.info("Removing ".concat(i.length," unused ").concat(t," resource(s):"),i),PT.ProjectResourcesAdder.removeAllUseless(n,t),i.includes(r)&&e._onResourceSelected(null),e._resourcesList&&e._resourcesList.forceUpdateList()},e._removeAllResourcesWithInvalidPath=function(){var t=e.props.project,n=e.state.selectedResource?e.state.selectedResource.getName():null,r=t.getResourcesManager(),i=r.getAllResourceNames().toJSArray().filter((function(e){return"error"===(0,ST.iz)(t,e)}));i.forEach((function(e){r.removeResource(e),console.info("Removed due to invalid path: "+e)})),i.includes(n)&&e._onResourceSelected(null),e._resourcesList&&e._resourcesList.forceUpdateList()},e.openProjectFolder=function(){ET&&ET.openPath(MT.dirname(e.props.project.getProjectFile()))},e.toggleProperties=function(){e.editorMosaic&&e.editorMosaic.toggleEditor("properties","left")},e._onResourceSelected=function(t){e.setState({selectedResource:t},(function(){e._propertiesEditor&&e._propertiesEditor.forceUpdate(),e.updateToolbar()}))},e.onResourceExternallyChanged=function(t){e._propertiesEditor&&e._propertiesEditor.forceUpdate(),e.refreshResourcesList()},e}return(0,We.Z)(n,[{key:"componentDidMount",value:function(){this.resourceExternallyChangedCallbackId=am(this.onResourceExternallyChanged.bind(this))}},{key:"componentWillUnmount",value:function(){om(this.resourceExternallyChangedCallbackId)}},{key:"refreshResourcesList",value:function(){this._resourcesList&&this._resourcesList.forceUpdateList()}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.onRenameResource,i=t.resourceManagementProps,a=t.fileMetadata,o=this.state.selectedResource,s=i.getStorageProviderResourceOperations(),l={properties:{type:"secondary",title:{id:"Properties"},renderEditor:function(){return(0,f.jsx)(kT,{resources:o?[o]:[],project:n,resourcesLoader:e.resourcesLoader,ref:function(t){return e._propertiesEditor=t},onResourcePathUpdated:function(){e._resourcesList&&e._resourcesList.checkMissingPaths()},resourceManagementProps:i},o?o.ptr:void 0)}},"resources-list":{type:"primary",noTitleBar:!0,renderEditor:function(){return(0,f.jsx)(dT.Z,{project:n,fileMetadata:a,onDeleteResource:e.deleteResource,onRenameResource:r,onSelectResource:e._onResourceSelected,selectedResource:o,ref:function(t){return e._resourcesList=t},onRemoveUnusedResources:e._removeUnusedResources,onRemoveAllResourcesWithInvalidPath:e._removeAllResourcesWithInvalidPath,getResourceActionsSpecificToStorageProvider:s})}}};return(0,f.jsx)("div",{style:LT.container,children:(0,f.jsx)(D.ZP.Consumer,{children:function(t){var n=t.getDefaultEditorMosaicNode,r=t.setDefaultEditorMosaicNode;return(0,f.jsx)(Zm.Z,{editors:l,centralNodeId:"resources-list",ref:function(t){return e.editorMosaic=t},initialNodes:n("resources-editor")||AT,onOpenedEditorsChanged:e.updateToolbar,onPersistNodes:function(e){return r("resources-editor",e)}})}})})}}]),n}(c.Component);OT.defaultProps={setToolbar:function(){}};var RT=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){return(0,ze.Z)(this,n),t.apply(this,arguments)}return(0,We.Z)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.isActive||e.isActive}},{key:"getProject",value:function(){return this.props.project}},{key:"getLayout",value:function(){return null}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){}},{key:"onEventsBasedObjectChildrenEdited",value:function(){}},{key:"onSceneObjectEdited",value:function(e,t){}},{key:"onSceneObjectsDeleted",value:function(e){}},{key:"onSceneEventsModifiedOutsideEditor",value:function(e){}},{key:"notifyChangesToInGameEditor",value:function(e){(0,mm.VL)(e)}},{key:"switchInGameEditorIfNoHotReloadIsNeeded",value:function(){}},{key:"onInstancesModifiedOutsideEditor",value:function(e){}},{key:"onObjectsModifiedOutsideEditor",value:function(e){}},{key:"onObjectGroupsModifiedOutsideEditor",value:function(e){}},{key:"componentDidUpdate",value:function(e){this.editor&&this.props.isActive&&e.isActive!==this.props.isActive&&this.editor.refreshResourcesList()}},{key:"render",value:function(){var e=this,t=this.props.project;return t?(0,f.jsx)(OT,{setToolbar:this.props.setToolbar,onDeleteResource:this.props.onDeleteResource,onRenameResource:this.props.onRenameResource,resourceManagementProps:this.props.resourceManagementProps,ref:function(t){return e.editor=t},fileMetadata:this.props.fileMetadata,project:t,storageProvider:this.props.storageProvider}):null}}]),n}(c.Component),FT=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).saveUiSettings=function(){var t=e.getLayout(),n=e.editor;n&&t&&(0,Ct.qx)(t.getAssociatedEditorSettings(),n.getInstancesEditorSettings())},e}return(0,We.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"shouldComponentUpdate",value:function(e){return!this.props.isActive&&e.isActive&&this._setPreviewedLayout(),this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){this.props.isActive&&this._setPreviewedLayout()}},{key:"_setPreviewedLayout",value:function(){var e=this.props.projectItemName;this.props.setPreviewedLayout({layoutName:e||null,externalLayoutName:null,eventsBasedObjectType:null,eventsBasedObjectVariantName:null})}},{key:"notifyChangesToInGameEditor",value:function(e){this._switchToSceneEdition(e)}},{key:"_switchToSceneEdition",value:function(e){var t=this.props,n=t.projectItemName,r=t.editorId;this._setPreviewedLayout(),"embedded-game"!==this.props.gameEditorMode||!n||this.editor&&this.editor.isEditingObject()?(0,mm.VL)(e):((0,mm.dD)((0,l.Z)((0,l.Z)({},e),{},{editorId:r,sceneName:n,externalLayoutName:null,eventsBasedObjectType:null,eventsBasedObjectVariantName:null})),this.editor&&this.editor.onEditorReloaded())}},{key:"switchInGameEditorIfNoHotReloadIsNeeded",value:function(){var e=this.props,t=e.projectItemName,n=e.editorId;t&&(0,mm.nj)({editorId:n,sceneName:t,externalLayoutName:null,eventsBasedObjectType:null,eventsBasedObjectVariantName:null})}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){var e=this.editor;e&&(e.forceUpdateObjectsList(),e.forceUpdateObjectGroupsList(),e.forceUpdateLayersList())}},{key:"onEventsBasedObjectChildrenEdited",value:function(){var e=this.editor;e&&e.forceUpdateCustomObjectRenderedInstances()}},{key:"onSceneObjectEdited",value:function(e,t){var n=this.getLayout();if(n&&(n===e||t.global)){var r=this.editor;r&&r.forceUpdateRenderedInstancesOfObject(t.object)}}},{key:"onSceneObjectsDeleted",value:function(e){var t=this.getLayout();if(t&&t===e){var n=this.editor;n&&n.forceUpdateObjectsList()}}},{key:"onSceneEventsModifiedOutsideEditor",value:function(e){}},{key:"onInstancesModifiedOutsideEditor",value:function(e){e.scene===this.getLayout()&&this.editor&&this.editor.onInstancesModifiedOutsideEditor()}},{key:"onObjectsModifiedOutsideEditor",value:function(e){e.scene===this.getLayout()&&this.editor&&this.editor.onObjectsModifiedOutsideEditor()}},{key:"onObjectGroupsModifiedOutsideEditor",value:function(e){e.scene===this.getLayout()&&this.editor&&this.editor.onObjectGroupsModifiedOutsideEditor()}},{key:"getLayout",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&t.hasLayoutNamed(n)?t.getLayout(n):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.projectItemName,i=t.isActive,a=this.getLayout();if(!a||!n)return(0,f.jsxs)("div",{children:["No layout called ",r," found!"]});var o=new Bn({project:n,layout:a});return(0,f.jsx)(lT,{editorId:this.props.editorId,gameEditorMode:this.props.gameEditorMode,setGameEditorMode:this.props.setGameEditorMode,onRestartInGameEditor:this.props.onRestartInGameEditor,showRestartInGameEditorAfterErrorButton:this.props.showRestartInGameEditorAfterErrorButton,setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,unsavedChanges:this.props.unsavedChanges,ref:function(t){return e.editor=t},project:n,projectScopedContainersAccessor:o,layout:a,eventsFunctionsExtension:null,eventsBasedObject:null,eventsBasedObjectVariant:null,globalObjectsContainer:n.getObjects(),objectsContainer:a.getObjects(),layersContainer:a.getLayers(),initialInstances:a.getInitialInstances(),getInitialInstancesEditorSettings:function(){return yj((0,Ct.XH)(a.getAssociatedEditorSettings()),Math.max(n.getGameResolutionWidth(),n.getGameResolutionHeight()))},onOpenEvents:this.props.onOpenEvents,isActive:i,previewDebuggerServer:this.props.previewDebuggerServer,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,openBehaviorEvents:this.props.openBehaviorEvents,onExtractAsExternalLayout:this.props.onExtractAsExternalLayout,onExtractAsEventBasedObject:this.props.onExtractAsEventBasedObject,onOpenEventBasedObjectEditor:this.props.onOpenEventBasedObjectEditor,onOpenEventBasedObjectVariantEditor:this.props.onOpenEventBasedObjectVariantEditor,onWillInstallExtension:this.props.onWillInstallExtension,onExtensionInstalled:this.props.onExtensionInstalled,onDeleteEventsBasedObjectVariant:this.props.onDeleteEventsBasedObjectVariant,onEffectAdded:this.props.onEffectAdded,onObjectListsModified:this.props.onObjectListsModified,onObjectEdited:function(t){return e.props.onSceneObjectEdited(a,t)},onObjectsDeleted:function(){return e.props.onSceneObjectsDeleted(a)},triggerHotReloadInGameEditorIfNeeded:this.props.triggerHotReloadInGameEditorIfNeeded,onObjectGroupEdited:function(){},onObjectGroupsDeleted:function(){},onEventsBasedObjectChildrenEdited:function(){}})}}]),n}(c.Component),DT=n.g.gd,NT={container:{display:"flex",flex:1}},_T=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(){var e;(0,ze.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._objectsContainer=new DT.ObjectsContainer(DT.ObjectsContainer.Function),e.saveUiSettings=function(){var t=e.getVariant(),n=e.editor;n&&t&&(0,Ct.qx)(t.getAssociatedEditorSettings(),n.getInstancesEditorSettings())},e}return(0,We.Z)(n,[{key:"getProject",value:function(){return this.props.project}},{key:"shouldComponentUpdate",value:function(e){return!this.props.isActive&&e.isActive&&this._setPreviewedLayout(),this.props.isActive||e.isActive}},{key:"componentDidMount",value:function(){this.props.isActive&&this._setPreviewedLayout(),this.resourceExternallyChangedCallbackId=am(this.onResourceExternallyChanged.bind(this))}},{key:"_setPreviewedLayout",value:function(){var e=this.props.projectItemName;this.props.setPreviewedLayout({layoutName:null,externalLayoutName:null,eventsBasedObjectType:e||null,eventsBasedObjectVariantName:this.getVariantName()})}},{key:"componentWillUnmount",value:function(){om(this.resourceExternallyChangedCallbackId),this._objectsContainer&&this._objectsContainer.delete()}},{key:"notifyChangesToInGameEditor",value:function(e){this._switchToSceneEdition(e)}},{key:"_switchToSceneEdition",value:function(e){var t=this.props,n=t.projectItemName,r=t.editorId;this._setPreviewedLayout(),"embedded-game"!==this.props.gameEditorMode||!n||this.editor&&this.editor.isEditingObject()?(0,mm.VL)(e):((0,mm.dD)((0,l.Z)((0,l.Z)({},e),{},{editorId:r,sceneName:null,externalLayoutName:null,eventsBasedObjectType:this.getEventsBasedObjectType()||null,eventsBasedObjectVariantName:this.getVariantName()})),this.editor&&this.editor.onEditorReloaded())}},{key:"switchInGameEditorIfNoHotReloadIsNeeded",value:function(){var e=this.props,t=e.projectItemName,n=e.editorId;t&&(0,mm.nj)({editorId:n,sceneName:null,externalLayoutName:null,eventsBasedObjectType:this.getEventsBasedObjectType()||null,eventsBasedObjectVariantName:this.getVariantName()})}},{key:"onResourceExternallyChanged",value:function(e){var t=this.editor;t&&t.onResourceExternallyChanged(e)}},{key:"updateToolbar",value:function(){this.editor&&this.editor.updateToolbar()}},{key:"forceUpdateEditor",value:function(){var e=this.editor;e&&(e.forceUpdateObjectsList(),e.forceUpdateObjectGroupsList(),e.forceUpdateLayersList())}},{key:"onEventsBasedObjectChildrenEdited",value:function(){var e=this.editor;e&&e.forceUpdateCustomObjectRenderedInstances()}},{key:"onSceneObjectEdited",value:function(e,t){}},{key:"onSceneObjectsDeleted",value:function(e){}},{key:"onSceneEventsModifiedOutsideEditor",value:function(e){}},{key:"onInstancesModifiedOutsideEditor",value:function(e){}},{key:"onObjectsModifiedOutsideEditor",value:function(e){}},{key:"onObjectGroupsModifiedOutsideEditor",value:function(e){}},{key:"getEventsFunctionsExtension",value:function(){var e=this.props,t=e.project,n=e.projectItemName;if(!t||!n)return null;var r=n.split("::")[0]||"";return t.hasEventsFunctionsExtensionNamed(r)?t.getEventsFunctionsExtension(r):null}},{key:"getEventsFunctionsExtensionName",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n?DT.PlatformExtension.getExtensionFromFullObjectType(n):null}},{key:"getEventsBasedObject",value:function(){var e=this.props,t=e.project,n=e.projectItemName;if(!t||!n)return null;var r=this.getEventsFunctionsExtension();if(!r)return null;var i=n.split("::")[1]||"";return r.getEventsBasedObjects().has(i)?r.getEventsBasedObjects().get(i):null}},{key:"getEventsBasedObjectType",value:function(){var e=this.props.projectItemName;return e&&e.split("::")[0]+"::"+e.split("::")[1]||""}},{key:"getVariantName",value:function(){var e=this.props.projectItemName;return e&&e.split("::")[2]||""}},{key:"getVariant",value:function(){var e=this.props,t=e.project,n=e.projectItemName;if(!t||!n)return null;var r=this.getEventsBasedObject();if(!r)return null;var i=n.split("::")[2]||"";return r.getVariants().hasVariantNamed(i)?r.getVariants().getVariant(i):r.getDefaultVariant()}},{key:"getEventsBasedObjectName",value:function(){var e=this.props,t=e.project,n=e.projectItemName;return t&&n&&this.getEventsFunctionsExtension()?DT.PlatformExtension.getObjectNameFromFullObjectType(n):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.project,r=t.isActive;if(!n)return null;var i=this.getEventsFunctionsExtension();if(!i)return null;var a=this.getEventsBasedObject();if(!a)return null;var o=this.getVariant();if(!o)return null;var s=new Bn({project:n,eventsFunctionsExtension:i,eventsBasedObject:a},this._objectsContainer);return(0,f.jsx)("div",{style:NT.container,children:(0,f.jsx)(lT,{editorId:this.props.editorId,gameEditorMode:this.props.gameEditorMode,setGameEditorMode:this.props.setGameEditorMode,onRestartInGameEditor:this.props.onRestartInGameEditor,showRestartInGameEditorAfterErrorButton:this.props.showRestartInGameEditorAfterErrorButton,setToolbar:this.props.setToolbar,resourceManagementProps:this.props.resourceManagementProps,unsavedChanges:this.props.unsavedChanges,ref:function(t){return e.editor=t},project:n,projectScopedContainersAccessor:s,layout:null,eventsFunctionsExtension:i,eventsBasedObject:a,eventsBasedObjectVariant:o,globalObjectsContainer:null,objectsContainer:o.getObjects(),layersContainer:o.getLayers(),initialInstances:o.getInitialInstances(),getInitialInstancesEditorSettings:function(){return yj((0,Ct.XH)(o.getAssociatedEditorSettings()),Math.max(o.getAreaMaxX()-o.getAreaMinX(),o.getAreaMaxY()-o.getAreaMinY()))},onOpenEvents:function(){return e.props.openObjectEvents(i.getName(),a.getName())},isActive:r,previewDebuggerServer:this.props.previewDebuggerServer,hotReloadPreviewButtonProps:this.props.hotReloadPreviewButtonProps,openBehaviorEvents:this.props.openBehaviorEvents,onObjectEdited:function(){return e.props.onEventsBasedObjectChildrenEdited(a)},onObjectsDeleted:function(){return e.props.onEventsBasedObjectChildrenEdited(a)},onObjectGroupEdited:function(){return e.props.onEventsBasedObjectChildrenEdited(a)},onObjectGroupsDeleted:function(){return e.props.onEventsBasedObjectChildrenEdited(a)},onEventsBasedObjectChildrenEdited:this.props.onEventsBasedObjectChildrenEdited,onExtractAsEventBasedObject:this.props.onExtractAsEventBasedObject,onOpenEventBasedObjectEditor:this.props.onOpenEventBasedObjectEditor,onOpenEventBasedObjectVariantEditor:this.props.onOpenEventBasedObjectVariantEditor,onWillInstallExtension:this.props.onWillInstallExtension,onExtensionInstalled:this.props.onExtensionInstalled,onDeleteEventsBasedObjectVariant:this.props.onDeleteEventsBasedObjectVariant,onEffectAdded:this.props.onEffectAdded,onObjectListsModified:this.props.onObjectListsModified,triggerHotReloadInGameEditorIfNeeded:this.props.triggerHotReloadInGameEditorIfNeeded})})}}]),n}(c.Component),BT=function(e,t){var n=t.label,i=t.icon,a=t.renderCustomIcon,o=t.projectItemName,s=t.tabOptions,c=t.kind,u=t.renderEditorContainer,d=t.key,p=t.extraEditorProps,f=t.dontFocusTab,h=t.closable,g=t.paneIdentifier;for(var m in e.panes){var x=e.panes[m],v=tl()(x.editors,(function(e){return e.key===d}));if(-1!==v)return f?(0,l.Z)({},e):UT(e,m,v)}var b={kind:c,label:n,icon:i,renderCustomIcon:a,projectItemName:o,tabOptions:s,renderEditorContainer:u,key:d,extraEditorProps:p,editorRef:null,closable:"undefined"===typeof h||!!h},C=e.panes[g];if(!C)throw new Error('Pane with identifier "'.concat(g,'" is not valid.'));var j=(0,l.Z)((0,l.Z)({},e),{},{panes:(0,l.Z)((0,l.Z)({},e.panes),{},(0,Qt.Z)({},g,(0,l.Z)((0,l.Z)({},C),{},{editors:"start page"===d?[b].concat((0,r.Z)(C.editors)):[].concat((0,r.Z)(C.editors),[b]),currentTab:C.currentTab})))});return f||(j=UT(j,g,C.editors.length)),j},UT=function(e,t,n){var r=e.panes[t];if(!r)throw new Error('Pane with identifier "'.concat(t,'" is not valid.'));return(0,l.Z)((0,l.Z)({},e),{},{panes:(0,l.Z)((0,l.Z)({},e.panes),{},(0,Qt.Z)({},t,(0,l.Z)((0,l.Z)({},r),{},{currentTab:Math.max(0,Math.min(n,r.editors.length-1))})))})},VT=function(e,t){var n=(0,l.Z)({},e);for(var r in e.panes){var i=e.panes[r];if(!i)throw new Error('Pane with identifier "'.concat(r,'" is not valid.'));var a=i.editors[i.currentTab]||null,o=i.editors.filter(t),s=o.indexOf(a);n.panes[r]=(0,l.Z)((0,l.Z)({},i),{},{editors:o,currentTab:-1===s?0:s})}return n},HT=function(e){return VT(e,(function(e){return!e.closable}))},zT=function(e,t){return VT(e,(function(e){return e!==t}))},WT=function(e,t){return e.panes[t].editors||[]},GT=function(e,t){return e.panes[t].currentTab||0},YT=function(e,t){var n=e.panes[t];return n.editors[n.currentTab]||null},qT=function(e,t){return VT(e,(function(e){var n=e.editorRef&&e.editorRef.getProject();return!n||n!==t}))},JT=function(e){for(var t in e.panes){var n=e.panes[t];n&&n.editors.forEach((function(e){e.editorRef&&(e.editorRef instanceof FT||e.editorRef instanceof uT||e.editorRef instanceof _T)&&e.editorRef.saveUiSettings()}))}},XT=function(e){for(var t in e.panes){var n=e.panes[t];n&&n.editors.forEach((function(e){var t=e.editorRef;t instanceof rC&&t.previewOrExportWillStart()}))}},KT=function(e,t){return VT(e,(function(e){var n=e.editorRef;if(n instanceof xm||n instanceof dC||n instanceof uT||n instanceof FT){var r=n.getLayout();return!r||r!==t}return!0}))},QT=function(e,t){return VT(e,(function(e){var n=e.editorRef;return!(n instanceof uT)||(!n.getExternalLayout()||n.getExternalLayout()!==t)}))},$T=function(e,t){return VT(e,(function(e){var n=e.editorRef;return!(n instanceof dC)||(!n.getExternalEvents()||n.getExternalEvents()!==t)}))},eS=function(e,t){return VT(e,(function(e){var n=e.editorRef;return!(n instanceof rC||n instanceof _T)||(!n.getEventsFunctionsExtensionName()||n.getEventsFunctionsExtensionName()!==t)}))},tS=function(e,t,n){return VT(e,(function(e){var r=e.editorRef;return!(r instanceof _T)||(!r.getEventsFunctionsExtensionName()||r.getEventsFunctionsExtensionName()!==t)&&(!r.getEventsBasedObjectName()||r.getEventsBasedObjectName()!==n)}))},nS=function(e,t,n,r){return VT(e,(function(e){var i=e.editorRef;return!(i instanceof _T)||(!i.getEventsFunctionsExtensionName()||i.getEventsFunctionsExtensionName()!==t)&&(!i.getEventsBasedObjectName()||i.getEventsBasedObjectName()!==n)&&(!i.getVariantName()||i.getVariantName()!==r)}))},rS=function(e,t){for(var n in e.panes)for(var r=e.panes[n],i=0;i<r.editors.length;++i){var a=r.editors[i].editorRef;if(a instanceof rC&&a.getEventsFunctionsExtension()===t)return{editor:a,paneIdentifier:n,tabIndex:i}}return null},iS=function(e,t,n,i){var a=(0,r.Z)(WT(e,t)),o=a[n];a.splice(n,1),a.splice(i,0,o);var s=GT(e,t),c=s;return n===s?c=i:n<s&&i>=s?c-=1:n>s&&i<=s&&(c+=1),(0,l.Z)((0,l.Z)({},e),{},{panes:(0,l.Z)((0,l.Z)({},e.panes),{},(0,Qt.Z)({},t,(0,l.Z)((0,l.Z)({},e.panes[t]),{},{editors:a,currentTab:c})))})},aS=function(e,t){for(var n in e.panes)for(var r=e.panes[n],i=0;i<r.editors.length;++i){var a=r&&r.editors[i];if(a&&a.key===t)return{editorTab:a,paneIdentifier:n,tabIndex:i}}return null},oS=function(e,t){return null!==aS(e,t)},sS=function(e){var t=aS(e,"ask-ai");return t?{askAiEditor:t.editorTab.editorRef,editorTab:t.editorTab,paneIdentifier:t.paneIdentifier,tabIndex:t.tabIndex}:null},lS=function(e){var t=[];for(var n in e.panes){var i=e.panes[n];t.push.apply(t,(0,r.Z)(i.editors))}return t},cS=function(e,t){var n=e.panes[t];return!!n&&n.editors.length>0},uS=n(43756),dS=n(42132),pS=n(12924),fS=n(38295),hS=n(84361),gS={appBar:{height:38,minHeight:38},toolbar:{height:38,minHeight:38,paddingLeft:8,paddingRight:8,WebkitAppRegion:"no-drag"},title:{fontSize:"15px",flexGrow:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},mS=function(e){var t=(0,f.jsx)(Yt.Z,{onClick:e.onClose,edge:"end",color:"inherit",size:"small",id:"".concat(e.id,"-close"),children:(0,f.jsx)(as.Z,{})});return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(dS.Z,{position:"static",style:gS.appBar,className:"safe-area-aware-top-margin",color:"primary",elevation:0,children:(0,f.jsxs)(pS.Z,{style:gS.toolbar,children:["right"!==e.drawerAnchor&&(0,f.jsx)($o.A,{}),(0,f.jsxs)(_.pJ,{noMargin:!0,expand:!0,alignItems:"center",children:[e.icon&&(0,f.jsx)(Yt.Z,{onClick:e.onClose,edge:"start",color:"inherit",size:"small",id:"".concat(e.id,"-icon"),children:e.icon}),"string"===typeof e.title&&e.title.length>30?(0,f.jsx)(re.ZP,{title:e.title,placement:"bottom",enterDelay:hS.K,children:(0,f.jsx)(fS.Z,{variant:"h6",style:gS.title,children:e.title})}):(0,f.jsx)(fS.Z,{variant:"h6",style:gS.title,children:e.title})]}),t,"right"===e.drawerAnchor&&(0,f.jsx)($o.$,{})]})})})},xS={container:{display:"flex",flexDirection:"column",flex:1,minHeight:0,minWidth:0}},vS=function(e,t){return"embedded-game"===t&&("layout"===e||"external layout"===e||"custom object"===e)},bS=c.forwardRef((function(e,t){var n=e.editorTabs,r=e.currentProject,i=e.currentFileMetadata,a=e.canSave,o=e.isSavingProject,l=e.isSharingEnabled,u=e.hasPreviewsRunning,d=e.previewState,p=e.checkedOutVersionStatus,h=e.canDoNetworkPreview,g=e.gamesPlatformFrameTools,m=e.toggleProjectManager,x=e.saveProject,v=e.openShareDialog,b=e.launchDebuggerAndPreview,C=e.launchNewPreview,j=e.launchNetworkPreview,y=e.launchHotReloadPreview,k=e.launchPreviewWithDiagnosticReport,w=e.setPreviewOverride,T=e.openVersionHistoryPanel,S=e.onQuitVersionHistory,P=e.onOpenAskAi,I=e.onCloseAskAi,E=e.getStorageProvider,M=e.setPreviewedLayout,L=e.openExternalEvents,A=e.openLayout,O=e.openTemplateFromTutorial,R=e.openTemplateFromCourseChapter,F=e.previewDebuggerServer,D=e.hotReloadPreviewButtonProps,N=e.resourceManagementProps,_=e.onCreateEventsFunction,B=e.openInstructionOrExpression,U=e.onOpenCustomObjectEditor,V=e.onRenamedEventsBasedObject,H=e.onDeletedEventsBasedObject,z=e.openObjectEvents,W=e.canOpen,G=e.openOpenFromStorageProviderDialog,Y=e.openFromFileMetadataWithStorageProvider,q=e.openNewProjectDialog,J=e.openProjectManager,X=e.askToCloseProject,K=e.closeProject,Q=e.onSelectExampleShortHeader,$=e.onSelectPrivateGameTemplateListingData,ee=e.createEmptyProject,te=e.createProjectFromExample,ne=e.onOpenProfileDialog,re=e.openLanguageDialog,ie=e.openPreferencesDialog,ae=e.openAboutDialog,oe=e.selectInAppTutorial,se=e.eventsFunctionsExtensionsState,le=e.isProjectClosedSoAvoidReloadingExtensions,ce=e.onLoadEventsFunctionsExtensions,ue=e.renameResourcesInProject,de=e.openBehaviorEvents,pe=e.onExtractAsExternalLayout,fe=e.onExtractAsEventBasedObject,he=e.onEventBasedObjectTypeChanged,ge=e.onOpenEventBasedObjectEditor,me=e.onOpenEventBasedObjectVariantEditor,xe=e.deleteEventsBasedObjectVariant,ve=e.onEventsBasedObjectChildrenEdited,Ce=e.onSceneObjectEdited,je=e.onSceneObjectsDeleted,Ze=e.onSceneEventsModifiedOutsideEditor,ke=e.onInstancesModifiedOutsideEditor,we=e.onObjectsModifiedOutsideEditor,Te=e.onObjectGroupsModifiedOutsideEditor,Se=e.onWillInstallExtension,Pe=e.onExtensionInstalled,Ie=e.onEffectAdded,Ee=e.onObjectListsModified,Me=e.onExternalLayoutAssociationChanged,Le=e.triggerHotReloadInGameEditorIfNeeded,Ae=e.gamesList,Oe=e.setEditorTabs,Re=e.onSetPointerEventsNone,Fe=e.paneIdentifier,De=e.isLeftMostPane,Ne=e.isRightMostPane,_e=e.isDrawer,Be=e.onSetPaneDrawerState,Ue=e.areSidePanesDrawers,Ve=e.gameEditorMode,He=e.setGameEditorMode,ze=e.onRestartInGameEditor,We=e.showRestartInGameEditorAfterErrorButton,Ge=c.useRef(null),Ye=c.useContext(Z.Z),qe=aS(n,"ask-ai"),Je=c.useRef(null),Xe=c.useState(!1),Ke=(0,s.Z)(Xe,2),Qe=Ke[0],$e=Ke[1],et=c.useCallback((function(e){var t=e.shown,n=e.isMobile;Re(t),$e(t&&n)}),[Re]),tt=c.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ge.current&&t&&Ge.current.setEditorToolbar(e||null)}),[]),nt=c.useCallback((function(){var e=YT(n,Fe);e&&e.editorRef?e.editorRef.updateToolbar():tt(null)}),[n,tt,Fe]);c.useEffect((function(){nt()}),[nt]);var rt=c.useCallback((function(e){nt(),e.editorRef&&e.editorRef.forceUpdateEditor()}),[nt]),it=c.useCallback((function(e){var t=UT(n,Fe,e);Oe(t);var r=YT(t,Fe);r&&rt(r)}),[n,Oe,rt,Fe]),at=c.useCallback((function(e){JT(n),Oe(zT(n,e))}),[n,Oe]),ot=c.useCallback((function(e){var t;JT(n),Oe((t=e,VT(n,(function(e){return!e.closable||e===t}))))}),[n,Oe]),st=c.useCallback((function(){JT(n),Oe(HT(n))}),[n,Oe]),lt=c.useCallback((function(e,t){Oe(function(e,t,n,r){return iS(e,t,n,n>r?r+1:r)}(n,Fe,e,t))}),[n,Fe,Oe]),ct=WT(n,Fe),ut=YT(n,Fe),dt=c.useState(null),pt=(0,s.Z)(dt,2),ft=pt[0],ht=pt[1],mt=c.useState(null),xt=(0,s.Z)(mt,2),vt=xt[0],bt=xt[1];c.useLayoutEffect((function(){var e=Je.current;e&&(e.clientWidth===ft&&e.clientHeight===vt||(ht(e.clientWidth),bt(e.clientHeight)))})),(0,ds.Z)((0,gt.Z)());var Ct=c.useCallback((function(){qe&&"right"===qe.paneIdentifier?Be("right","open"):P()}),[qe,P,Be]);return(0,f.jsxs)("div",{style:xS.container,ref:Je,children:[_e?(0,f.jsx)(mS,{drawerAnchor:Ne?"right":"left",title:"Ask AI",id:Fe+"-top-bar",onClose:function(){return Be(Fe,"closed")}}):(0,f.jsx)(Ms,{isLeftMostPane:De,isRightMostPane:Ne,displayMenuIcon:"center"===Fe,hidden:Qe,toggleProjectManager:m,renderTabs:function(e,t){return(0,f.jsx)(hs,{hideLabels:!1,editors:ct,currentTab:ut,onClickTab:it,onCloseTab:function(e){t(),at(e)},onCloseOtherTabs:function(e){t(),ot(e)},onCloseAll:function(){t(),st()},onTabActivated:rt,onDropTab:lt,onHoverTab:e})},displayAskAi:qe?Ue&&"center"!==qe.paneIdentifier:Ne,onAskAiClicked:Ct}),(0,f.jsx)(Xs,{ref:Ge,hidden:Qe,showProjectButtons:!["start page","debugger","ask-ai",null].includes(ut?ut.key:null),canSave:a,onSave:x,openShareDialog:function(){return v()},isSharingEnabled:l,onOpenDebugger:b,hasPreviewsRunning:u,onPreviewWithoutHotReload:C,onNetworkPreview:j,onHotReloadPreview:y,onLaunchPreviewWithDiagnosticReport:k,canDoNetworkPreview:h,setPreviewOverride:w,isPreviewEnabled:!!r&&r.getLayoutsCount()>0,previewState:d,onOpenVersionHistory:T,checkedOutVersionStatus:p,onQuitVersionHistory:S,canQuitVersionHistory:!o}),(0,f.jsx)(be.mA,{innerWidth:ft,innerHeight:vt,children:(0,f.jsx)(uS.E,{children:ct.map((function(e,t){var o=GT(n,Fe)===t,s=(0,ye.Ap)(e.key);return(0,f.jsx)(ls,{active:o,removePointerEvents:g.iframeVisible||vS(e.kind,Ve),children:(0,f.jsx)($s,{active:o,children:(0,f.jsx)(ye.ZP,{componentTitle:s.componentTitle,scope:s.scope,children:e.renderEditorContainer({editorId:e.key,gameEditorMode:Ve,setGameEditorMode:He,isActive:o,extraEditorProps:e.extraEditorProps,project:r,fileMetadata:i,storageProvider:E(),ref:function(t){return e.editorRef=t},setToolbar:function(e){return tt(e,o)},setGamesPlatformFrameShown:et,projectItemName:e.projectItemName,setPreviewedLayout:M,onOpenAskAi:P,onCloseAskAi:I,onOpenExternalEvents:L,onOpenEvents:function(e){A(e,{openEventsEditor:!0,openSceneEditor:!1,focusWhenOpened:"events"})},onOpenLayout:A,onOpenTemplateFromTutorial:O,onOpenTemplateFromCourseChapter:R,previewDebuggerServer:F,hotReloadPreviewButtonProps:D,onRestartInGameEditor:ze,showRestartInGameEditorAfterErrorButton:We,resourceManagementProps:N,onSave:x,canSave:a,onCreateEventsFunction:_,openInstructionOrExpression:B,onOpenCustomObjectEditor:U,onRenamedEventsBasedObject:V,onDeletedEventsBasedObject:H,openObjectEvents:z,unsavedChanges:Ye,canOpen:W,onChooseProject:function(){return G()},onOpenRecentFile:Y,onOpenNewProjectSetupDialog:q,onOpenProjectManager:function(){return J(!0)},onOpenVersionHistory:T,askToCloseProject:X,closeProject:K,onSelectExampleShortHeader:function(e){Q({exampleShortHeader:e,preventBackHome:!0})},onSelectPrivateGameTemplateListingData:function(e){$({privateGameTemplateListingData:e,preventBackHome:!0})},onOpenPrivateGameTemplateListingData:function(e){$({privateGameTemplateListingData:e,preventBackHome:!0})},onCreateEmptyProject:ee,onCreateProjectFromExample:te,onOpenProfile:ne,onOpenLanguageDialog:function(){return re(!0)},onOpenPreferences:function(){return ie(!0)},onOpenAbout:function(){return ae(!0)},selectInAppTutorial:oe,onLoadEventsFunctionsExtensions:ce,onReloadEventsFunctionsExtensionMetadata:function(e){le||se.reloadProjectEventsFunctionsExtensionMetadata(r,e)},onDeleteResource:function(e,t){t(!0)},onRenameResource:function(e,t,n){r&&ue(r,(0,Qt.Z)({},e.getName(),t)),n(!0)},openBehaviorEvents:de,onExtractAsExternalLayout:pe,onExtractAsEventBasedObject:fe,onEventBasedObjectTypeChanged:he,onOpenEventBasedObjectEditor:ge,onOpenEventBasedObjectVariantEditor:me,onDeleteEventsBasedObjectVariant:xe,onEventsBasedObjectChildrenEdited:ve,onSceneObjectEdited:Ce,onSceneObjectsDeleted:je,onSceneEventsModifiedOutsideEditor:Ze,onInstancesModifiedOutsideEditor:ke,onObjectsModifiedOutsideEditor:we,onObjectGroupsModifiedOutsideEditor:Te,onWillInstallExtension:Se,onExtensionInstalled:Pe,onEffectAdded:Ie,onObjectListsModified:Ee,onExternalLayoutAssociationChanged:Me,triggerHotReloadInGameEditorIfNeeded:Le,gamesList:Ae,gamesPlatformFrameTools:g})})})},e.key)}))})})]})})),CS=bS,jS=n(53669),yS=n(86682),ZS=n(67980),kS=n(35038),wS=n(16021),TS=n(7906),SS=function(e){return e<=2?"#3BF7F4":e<=5?"#FFBC57":"#FF8569"},PS=function(e){return e<=2?(0,f.jsx)(w.Trans,{id:"Beginner"}):e<=5?(0,f.jsx)(w.Trans,{id:"Intermediate"}):(0,f.jsx)(w.Trans,{id:"Advanced"})},IS={cardTextContainer:{flex:1,display:"flex",justifyContent:"center",padding:"8px 16px"},lockerImage:{height:80,width:80},imageContainer:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},keyPointsList:{paddingInlineStart:12,textAlign:"left",overflowWrap:"anywhere"},chip:{height:24}},ES=function(e){return e?{opacity:.4}:void 0},MS=function(e){var t=e.progress,n=e.locked,r=e.size,i=void 0===r?"large":r,a=e.disabled,o=e.title,s=e.description,u=e.shortDescription,d=e.durationInMinutes,p=e.keyPoints,h=e.onClick,g=e.renderImage,m=e.loading,x=c.useContext(j.Z),v=m||a||n,b=(0,be.UQ)().isMobile,C={isMobile:b}.isMobile?90:130;return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(ZS.HB,{onClick:h,size:i,disabled:v,children:(0,f.jsxs)(M.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},IS.imageContainer),{},{height:C,backgroundColor:n?x.paper.backgroundColor.light:a?"dark"===x.palette.type?"#4F28CD":"#9979F1":"#7046EC"}),children:n?(0,f.jsx)(Fo,{style:IS.lockerImage}):g({style:{height:C,width:C,opacity:a?.6:1}})}),(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},IS.cardTextContainer),{},{maxWidth:"banner"===i?"40%":void 0}),children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,justifyContent:"space-between",useFullHeight:!0,noOverflowParent:!0,children:[(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,justifyContent:"flex-start",useFullHeight:!0,noOverflowParent:!0,children:[(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,color:"primary",align:"left",style:ES(v),children:r._(o)}),(0,f.jsx)(N.Z,{noMargin:!0,align:"left",color:"secondary",children:b?r._(u):r._(s)}),p&&(0,f.jsx)(or.Z,{}),p&&(0,f.jsx)(M.sg,{noMargin:!0,alignItems:"flex-start",justifyContent:"flex-start",expand:!0,children:(0,f.jsx)("ul",{style:IS.keyPointsList,children:p.map((function(e,t){return(0,f.jsx)(N.Z,{size:"body2",noMargin:!0,style:ES(v),color:"secondary",displayAsListItem:!0,children:r._(e)},"key-point-".concat(t))}))})})]}),(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"flex-end",children:[(0,f.jsx)(Q.Z,{style:(0,l.Z)((0,l.Z)({},IS.chip),{},{border:"1px solid ".concat(SS(d||0))}),label:PS(d||0),variant:"outlined"}),t&&t>0?100!==t?(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsxs)(N.Z,{displayInlineAsSpan:!0,noMargin:!0,size:"body2",children:[t,"%"]}),(0,f.jsx)(TS.Z,{value:t})]}):(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"center",children:(0,f.jsx)(Q.Z,{size:"small",label:(0,f.jsx)(w.Trans,{id:"Finished"}),style:{backgroundColor:x.statusIndicator.success,color:"#111111"}})}):d?(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"center",children:(0,f.jsx)(Q.Z,{size:"small",label:b?(0,f.jsx)(w.Trans,{id:"{durationInMinutes} min.",values:{durationInMinutes:d}}):1===d?(0,f.jsx)(w.Trans,{id:"1 minute"}):(0,f.jsx)(w.Trans,{id:"{durationInMinutes} minutes",values:{durationInMinutes:d}})})}):(0,f.jsx)(M.LZ,{})]})]})})]})})}})},LS=n(19817),AS=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M15.8065 105.143C15.5397 104.631 15.0628 104.33 14.5177 104.311L11.1971 104.107L8.8545 101.592C8.47918 101.169 7.88351 101.06 7.36551 101.169C6.88471 101.304 6.4441 101.63 6.26409 102.136L5.13234 105.381L2.07322 106.927C1.61258 107.157 1.26653 107.631 1.22853 108.207C1.18376 108.751 1.39618 109.308 1.81887 109.654L4.54449 111.821L5.04443 115.259C5.12829 115.809 5.4863 116.302 5.98032 116.532C6.47434 116.763 7.0363 116.711 7.48366 116.417L10.1842 114.579L10.2385 114.534L13.518 115.148C14.0459 115.238 14.581 115.059 14.9404 114.649C15.2694 114.246 15.3989 113.65 15.254 113.113L14.3276 109.765L15.8484 106.705C16.096 106.218 16.097 105.617 15.8065 105.143Z",fill:"#FFDA2D"}),(0,f.jsx)("path",{d:"M46.4456 104.014C46.2466 103.303 45.7293 102.802 45.0527 102.634L40.9541 101.506L38.6859 97.7452C38.3276 97.1182 37.6114 96.8257 36.935 96.8257C36.2984 96.8675 35.6616 97.1601 35.3036 97.7452L33.0354 101.506L28.8039 102.634C28.1674 102.802 27.6101 103.303 27.4112 104.014C27.2122 104.682 27.3314 105.434 27.7692 105.977L30.6078 109.404L30.3295 113.834C30.2897 114.544 30.6078 115.255 31.165 115.673C31.7222 116.09 32.4384 116.174 33.0752 115.923L36.935 114.335L37.0147 114.293L40.9542 115.923C41.5908 116.174 42.3071 116.09 42.8642 115.673C43.3815 115.255 43.7 114.544 43.6601 113.834L43.3815 109.404L46.0874 105.977C46.525 105.434 46.6843 104.682 46.4456 104.014Z",fill:"#FFDA2D"}),(0,f.jsx)("path",{d:"M78.093 102.672C77.9392 101.753 77.3574 101.053 76.5305 100.752L71.5371 98.7819L69.1973 93.7537C68.8322 92.9182 67.9724 92.4542 67.1232 92.3628C66.3184 92.3293 65.4793 92.6108 64.9508 93.2969L61.5951 97.7124L56.1301 98.5577C55.3083 98.6814 54.541 99.2357 54.1952 100.101C53.8551 100.913 53.9032 101.874 54.3794 102.615L57.4805 107.301L56.5328 112.825C56.3869 113.711 56.6903 114.646 57.3335 115.246C57.9767 115.846 58.8645 116.047 59.6979 115.819L64.7584 114.346L64.8641 114.305L69.5901 116.883C70.3555 117.284 71.2661 117.275 72.0219 116.826C72.7279 116.371 73.2237 115.522 73.2695 114.625L73.518 109.026L77.3781 105.089C78.0009 104.466 78.3025 103.543 78.093 102.672Z",fill:"#FFDA2D"}),(0,f.jsx)("path",{d:"M116.484 102.221C116.451 101.083 115.865 100.14 114.915 99.6368L109.203 96.4176L107.214 89.9427C106.912 88.8707 105.949 88.1655 104.937 87.9128C103.969 87.7376 102.907 87.9377 102.153 88.6794L97.3538 93.4599L90.6005 93.568C89.5856 93.5801 88.5644 94.1224 88.0013 95.1113C87.4539 96.0373 87.3514 97.2074 87.8035 98.1838L90.7711 104.372L88.7002 110.896C88.3754 111.944 88.5859 113.126 89.2637 113.96C89.9415 114.793 90.9819 115.186 92.0284 115.048L98.3972 114.114L98.5321 114.081L103.818 117.991C104.677 118.604 105.78 118.746 106.77 118.329C107.7 117.897 108.442 116.953 108.648 115.875L109.885 109.143L115.214 105.026C116.072 104.376 116.591 103.31 116.484 102.221Z",fill:"#FFDA2D"}),(0,f.jsx)("path",{d:"M100.117 18H9.88281C4.53299 18 0 22.3113 0 27.6526V72.9126C0 78.2535 4.53299 82.5652 9.88281 82.5652H100.117C105.467 82.5652 110 78.2535 110 72.9126V27.6526C110 22.3113 105.467 18 100.117 18Z",fill:"#FF507E"}),(0,f.jsx)("path",{d:"M94.7786 31.1523H16.4174C14.5887 31.1523 13.1523 32.5909 13.1523 34.4222V67.339C13.1523 69.1699 14.5887 70.6089 16.4174 70.6089H94.7786C96.6073 70.6089 98.0437 69.1699 98.0437 67.339V34.4222C98.0437 32.5909 96.6073 31.1523 94.7786 31.1523Z",fill:"#E1E4FB"}),(0,f.jsx)("path",{d:"M36.4676 35.9346H22.1198C21.785 35.9346 21.522 36.9372 21.522 38.2136V61.1556C21.522 62.4317 21.785 63.4346 22.1198 63.4346H36.4676C36.8024 63.4346 37.0655 62.4317 37.0655 61.1556V38.2136C37.0655 36.9372 36.8024 35.9346 36.4676 35.9346Z",fill:"#B2B7DE"}),(0,f.jsx)("path",{d:"M61.576 35.9346H47.2282C46.8934 35.9346 46.6304 36.9372 46.6304 38.2136V61.1556C46.6304 62.4317 46.8934 63.4346 47.2282 63.4346H61.576C61.9108 63.4346 62.1739 62.4317 62.1739 61.1556V38.2136C62.1739 36.9372 61.9108 35.9346 61.576 35.9346Z",fill:"#B2B7DE"}),(0,f.jsx)("path",{d:"M87.8807 35.9346H73.5329C73.1981 35.9346 72.9351 36.9372 72.9351 38.2136V61.1556C72.9351 62.4317 73.1981 63.4346 73.5329 63.4346H87.8807C88.2155 63.4346 88.4785 62.4317 88.4785 61.1556V38.2136C88.4785 36.9372 88.2155 35.9346 87.8807 35.9346Z",fill:"#B2B7DE"}),(0,f.jsx)("path",{d:"M32.5586 51.0915H25.6422C24.6872 51.0915 23.9131 50.3172 23.9131 49.3624V42.4459C23.9131 41.4911 24.6872 40.7168 25.6422 40.7168H32.5586C33.5135 40.7168 34.2878 41.4911 34.2878 42.4459V49.3624C34.2878 50.3172 33.5135 51.0915 32.5586 51.0915ZM27.3713 47.6332H30.8295V44.175H27.3713V47.6332Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M32.5586 58.0075H25.6422C24.6872 58.0075 23.9131 57.2332 23.9131 56.2784C23.9131 55.3236 24.6872 54.5493 25.6422 54.5493H30.8295V49.3619C30.8295 48.4071 31.6038 47.6328 32.5586 47.6328C33.5135 47.6328 34.2878 48.4071 34.2878 49.3619V56.2784C34.2878 57.2332 33.5135 58.0075 32.5586 58.0075Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M57.6675 51.0915H50.7511C49.7961 51.0915 49.022 50.3172 49.022 49.3624V42.4459C49.022 41.4911 49.7961 40.7168 50.7511 40.7168H57.6675C58.6223 40.7168 59.3966 41.4911 59.3966 42.4459V49.3624C59.3966 50.3172 58.6223 51.0915 57.6675 51.0915ZM52.4802 47.6332H55.9384V44.175H52.4802V47.6332Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M57.6675 58.0075H50.7511C49.7961 58.0075 49.022 57.2332 49.022 56.2784C49.022 55.3236 49.7961 54.5493 50.7511 54.5493H55.9384V49.3619C55.9384 48.4071 56.7127 47.6328 57.6675 47.6328C58.6223 47.6328 59.3966 48.4071 59.3966 49.3619V56.2784C59.3966 57.2332 58.6223 58.0075 57.6675 58.0075Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M83.9717 51.0915H77.0553C76.1003 51.0915 75.3262 50.3172 75.3262 49.3624V42.4459C75.3262 41.4911 76.1003 40.7168 77.0553 40.7168H83.9717C84.9265 40.7168 85.7008 41.4911 85.7008 42.4459V49.3624C85.7008 50.3172 84.9265 51.0915 83.9717 51.0915ZM78.7844 47.6332H82.2426V44.175H78.7844V47.6332Z",fill:"#42516D"}),(0,f.jsx)("path",{d:"M83.9717 58.0075H77.0553C76.1003 58.0075 75.3262 57.2332 75.3262 56.2784C75.3262 55.3236 76.1003 54.5493 77.0553 54.5493H82.2426V49.3619C82.2426 48.4071 83.0169 47.6328 83.9717 47.6328C84.9265 47.6328 85.7008 48.4071 85.7008 49.3619V56.2784C85.7008 57.2332 84.9265 58.0075 83.9717 58.0075Z",fill:"#42516D"})]})}))})),OS=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M104.436 85.293L104.428 91.3533L52.5811 121.483L52.5902 115.423L104.436 85.293Z",fill:"#C17E47"}),(0,f.jsx)("path",{d:"M52.5904 115.423L52.5813 121.483L0.395996 91.3541L0.404919 85.2939L52.5904 115.423Z",fill:"#D89C60"}),(0,f.jsx)("path",{d:"M104.437 85.2929L52.5903 115.423L0.404785 85.2936L52.2512 55.1636L104.437 85.2929Z",fill:"#E5AE70"}),(0,f.jsx)("path",{d:"M104.676 39.2806L104.527 85.8499V85.8939L86.9473 76.9182V76.8956L86.7486 76.7924L85.1843 75.9811H85.1596L83.5705 75.1688H83.5458L81.9567 74.3566L81.9319 74.3352L80.3429 73.5229L80.3181 73.5002L78.7291 72.7106L78.7043 72.6892L77.1153 71.8769L77.0905 71.8543L75.5014 71.043H75.4767L73.8876 70.2307L73.8629 70.2081L72.2738 69.3967H72.249L71.3801 68.9359C71.0964 68.7934 56.0305 61.2298 67.4321 66.9538L66.0417 66.2293H66.0169L64.4279 65.417L64.4031 65.3956L62.814 64.5833H62.7893L61.2002 63.771L61.1755 63.7496L59.5864 62.96L59.5616 62.9374L57.9726 62.1251H57.9478V62.1037L56.3563 61.3147L56.3315 61.2921L54.7425 60.4798H54.7177V60.4584L53.1287 59.6688L53.1039 59.6461L51.5148 58.8338H51.4901V58.8124L49.876 58.0002L50.0248 11.4082L51.6389 12.2419H51.6637L53.2528 13.0542L53.2775 13.0756L54.8666 13.8665V13.8879H54.8913L56.4804 14.7002L56.5052 14.7216L58.0942 15.5124V15.5338H58.119L59.708 16.3461L59.7328 16.3675L61.3218 17.1584V17.1798H61.3466L62.9357 17.9921L62.9604 18.0135L63.0845 18.0585L64.5495 18.8044V18.8258L66.1633 19.6381L67.7774 20.4504V20.4718L69.3915 21.2841L71.0053 22.0963V22.1177L72.5944 22.9086V22.93H72.6191L74.2082 23.7423L74.2329 23.7637L75.822 24.5546V24.576H75.8468L77.4358 25.3883L77.4606 25.4097L79.0496 26.2006V26.222H79.0744L80.6635 27.0343H80.6882V27.0557L82.2792 27.8466V27.868H82.304L83.893 28.6802H83.9178V28.7016L85.5068 29.4925V29.5139H85.5316L87.1207 30.3262H87.1454V30.3476L88.7345 31.1385V31.1599H88.7592L90.3483 31.9722H90.3731V31.9936L91.9621 32.8059H91.9869L93.5759 33.6182H93.6007V33.6396L95.1897 34.4519H95.2145L96.8036 35.2641H96.8283V35.2856L98.4174 36.0978H98.4422L100.031 36.9101H100.056V36.9315L101.645 37.7438H101.67L103.259 38.5561H103.284V38.5775L104.676 39.2806Z",fill:"#89B5D6"}),(0,f.jsx)("path",{d:"M41.9198 34.286C44.6751 35.35 47.1361 34.7847 48.7581 32.2302C49.7768 33.8116 50.8996 36.4141 52.6155 36.4141C53.448 36.4141 54.2378 36.7092 54.9467 36.2846C55.536 36.7062 56.2137 36.9462 56.9349 36.9462C59.2068 36.9462 61.0486 34.5641 61.0486 31.6258C61.0486 28.9378 59.5073 26.7154 57.5055 26.3561C56.5671 24.1083 54.7292 22.5811 52.6155 22.049C51.6306 22.049 51.117 21.8485 50.315 21.366C49.1464 16.8171 45.8293 12.4723 41.9198 11.4082C38.5739 11.4082 35.6619 11.683 34.1593 15.2273C33.3791 14.8229 32.5274 13.5364 31.6355 13.5364C28.8354 13.5364 26.4313 14.6652 25.3939 17.7955C25.3492 17.7936 25.3043 17.7927 25.2592 17.7927C22.9873 17.7927 21.1455 20.1747 21.1455 23.1131C21.1455 26.0515 22.9873 28.4335 25.2592 28.4335C25.9409 28.4335 26.5838 28.2191 27.1498 27.8396C28.3459 29.2027 29.916 31.0937 31.6355 31.0937C33.4865 32.1578 35.1644 31.1996 36.3889 29.6457C37.9036 32.2816 39.8268 34.286 41.9198 34.286Z",fill:"#FEFBFB"}),(0,f.jsx)("path",{d:"M94.7728 69.0016C93.4231 69.1368 93.0555 67.8136 93.0362 67.8116C89.8222 67.4695 87.5458 64.0572 87.8878 60.8431C88.2299 57.629 91.0609 55.8303 94.2749 56.1724C95.2559 56.2768 96.1025 57.1474 96.8677 57.6623C98.2614 55.9695 101.313 54.2461 104.622 54.5983C108.164 55.0766 110.216 59.2832 111.161 62.1823C111.892 61.959 112.575 62.9353 113.383 63.0213C116.494 64.4224 118.822 67.3052 118.48 70.5192C118.138 73.7333 115.255 76.0615 112.145 74.6605C112.142 74.6602 112.14 74.6599 112.137 74.6597C112.121 74.6579 112.104 74.656 112.087 74.654C110.54 75.7364 108.459 75.8087 104.07 74.2716C99.5778 73.7935 96.0576 70.3853 94.7728 69.0016Z",fill:"#FEFBFB"}),(0,f.jsx)("path",{d:"M33.0208 30.6826C29.8087 30.4476 27.4525 39.5944 25.8195 48.2259L20.9621 72.8919L75.0424 106.314L76.5211 106.377L76.5211 81.1189C76.5211 70.5596 76.2805 37.4117 70.9506 37.0217C64.2883 36.5343 61.4394 60.7593 59.417 60.6113C57.3945 60.4633 55.3407 43.4096 51.0578 43.0962C46.7749 42.7829 46.1278 52.6139 44.4264 52.981C42.7251 53.348 41.0845 46.3465 40.1807 43.9865C39.2769 41.6265 36.233 30.9176 33.0208 30.6826Z",fill:"#0B8735"}),(0,f.jsx)("path",{d:"M31.6214 30.6826C28.4093 30.4476 26.0531 39.5944 24.4201 48.2259L19.5627 72.8919L75.1217 106.377L75.1217 81.1189C75.1217 70.5596 74.881 37.4117 69.5512 37.0217C62.8889 36.5343 60.04 60.7593 58.0175 60.6113C55.9951 60.4633 53.9413 43.4096 49.6584 43.0962C45.3755 42.7828 44.7284 52.6139 43.027 52.981C41.3257 53.348 39.685 46.3465 38.7813 43.9865C37.8775 41.6265 34.8336 30.9176 31.6214 30.6826Z",fill:"#0CB746"}),(0,f.jsx)("path",{d:"M29.6153 63.3294C30.5215 63.2287 32.757 63.0273 34.4487 63.0273C34.9522 63.984 36.0499 66.018 36.4124 66.5014C36.8655 67.1056 36.4124 69.3713 36.4124 70.4286C36.4124 71.2744 34.9019 76.7221 34.1467 79.3403L27.5006 75.8662C27.3999 74.6578 27.259 71.4859 27.5006 68.465C27.7423 65.4441 29.0111 63.7826 29.6153 63.3294Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M32.7045 95.6785C32.3426 96.2264 31.979 96.7723 31.6138 97.3163C31.4133 97.6098 31.583 98.1501 32.0028 98.5209C33.3616 99.7394 35.7595 101.864 35.9887 101.503C36.1664 101.225 35.0151 99.7325 34.4414 99.0156C34.2529 98.7827 34.1913 98.517 34.2697 98.3365C34.4285 97.9961 34.587 97.6551 34.7451 97.3133C34.0643 96.7667 33.3841 96.2218 32.7045 95.6785Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M35.9957 101.5C35.7595 101.858 33.3685 99.7364 32.0028 98.5209C31.583 98.1501 31.4133 97.6098 31.6138 97.3104C31.631 97.2853 31.6479 97.2601 31.6644 97.235C31.5979 97.5374 31.7825 97.9489 32.1249 98.2641C33.3576 99.3696 35.3674 101.158 35.9897 101.272C36.0175 101.378 36.0175 101.458 35.9957 101.5Z",fill:"#E4E8EB"}),(0,f.jsx)("path",{d:"M14.5586 77.4409C13.7262 77.0139 12.8942 76.5872 12.0624 76.1609C11.6099 75.9299 11.2059 76.0826 11.1702 76.5208C11.0451 77.9287 10.8655 80.4043 11.3975 80.67C11.8223 80.8822 12.3781 79.7242 12.6222 79.1412C12.7056 78.9508 12.915 78.8933 13.1572 78.9964C13.6223 79.1901 14.0878 79.3838 14.5536 79.5774C14.555 78.8656 14.5566 78.1534 14.5586 77.4409Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M11.4044 80.673C10.8655 80.3973 11.0521 77.9316 11.1632 76.5109C11.199 76.0727 11.6099 75.923 12.0624 76.147C12.0988 76.1675 12.1356 76.1877 12.1726 76.2075C11.8183 76.1213 11.5543 76.2977 11.5116 76.6576C11.3995 77.9336 11.2317 80.0097 11.6138 80.671C11.5444 80.7106 11.4679 80.6997 11.4044 80.673Z",fill:"#E4E8EB"}),(0,f.jsx)("path",{d:"M25.2727 70.4442C24.7301 69.9769 24.1872 69.5096 23.644 69.0423C23.644 69.0423 21.2153 71.2424 22.709 72.6502C23.4425 73.3323 23.6718 71.5299 24.0221 71.4347C24.0221 71.4347 23.9536 72.4876 24.5759 72.8802C24.8667 73.0696 24.6236 70.3917 25.2727 70.4442Z",fill:"#F4D0B5"}),(0,f.jsx)("path",{d:"M34.636 98.396C34.636 98.396 38.5117 91.1942 38.1008 87.6686C37.8348 85.302 34.9248 81.6376 33.8578 79.1065C33.3576 77.9187 30.2199 78.585 30.2199 78.585C29.3399 80.2869 30.4509 78.6273 29.5742 80.3081C30.9306 82.4443 32.2897 84.5802 33.6514 86.7158C33.175 89.8957 32.69 93.0442 32.1964 96.1613C33.0083 96.9035 33.8214 97.6484 34.636 98.396Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M34.2826 79.1253C34.1933 79.2294 34.1099 79.3454 34.0067 79.4356C33.5859 79.9105 33.1254 80.3289 32.6341 80.7255C32.3383 80.9763 32.0336 81.1617 31.7914 81.4304C31.5354 81.6783 31.2863 81.9569 31.0441 82.2464C30.9945 82.2989 30.9538 82.3495 30.9051 82.403C30.6941 82.0679 30.4837 81.7328 30.2739 81.3977C30.524 81.1042 30.794 80.8346 31.0987 80.5857C31.4113 80.3408 31.7766 80.1485 32.115 79.9988C32.6946 79.7103 33.2871 79.4426 33.9253 79.2433C34.0424 79.1937 34.1586 79.164 34.2826 79.1253Z",fill:"#424852"}),(0,f.jsx)("path",{d:"M32.4951 63.0114C32.4951 63.0114 27.4006 63.2999 26.0667 63.7768C24.9124 64.1863 23.241 69.2862 23.241 69.2862C23.8742 69.8276 24.5071 70.3702 25.1397 70.9142C26.0958 69.6332 27.0575 68.3454 28.0249 67.0505C29.3853 67.27 30.741 67.4901 32.0922 67.7108C32.2179 66.1463 32.3522 64.5799 32.4951 63.0114Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M13.7686 79.5616C13.7686 79.5616 23.9437 84.5733 27.0741 84.5168C29.1474 84.495 30.3771 81.5831 31.9334 80.6303C32.6648 80.1842 34.2826 79.1253 34.2826 79.1253C32.0687 77.929 29.8498 76.7475 27.6259 75.5809C26.5983 76.9154 25.5721 78.2459 24.5472 79.5725C21.0721 78.7231 17.5943 77.8857 14.114 77.0601C13.9982 77.8943 13.883 78.7281 13.7686 79.5616Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M27.2994 75.5829C27.2994 75.5829 28.5519 73.4453 28.8348 72.6393C29.5504 70.593 29.3479 65.1182 30.7275 63.5864C31.3389 62.9083 33.9779 62.9033 33.9779 62.9033C34.8679 64.1241 35.7615 65.3509 36.6587 66.5836C36.6587 66.5836 37.5013 70.7615 37.4735 72.0187C37.4299 74.184 36.0979 77.1147 35.4409 78.6812C35.2126 79.2146 34.8156 81.0011 34.8156 81.0011C32.1358 79.8689 29.6387 78.0268 27.2994 75.5829Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M27.2994 75.5829C27.2994 75.5829 28.5519 73.4453 28.8348 72.6393C29.5504 70.593 29.3479 65.1182 30.7275 63.5864C31.3389 62.9083 33.9779 62.9033 33.9779 62.9033C34.8679 64.1241 35.7615 65.3509 36.6587 66.5836C36.6587 66.5836 37.5013 70.7615 37.4735 72.0187C37.4299 74.184 36.0979 77.1147 35.4409 78.6812C35.2126 79.2146 34.8156 81.0011 34.8156 81.0011C32.1358 79.8689 29.6387 78.0268 27.2994 75.5829Z",fill:"#FA6C51"}),(0,f.jsx)("path",{d:"M36.4413 76.0459C36.3847 76.2283 36.3222 76.3989 36.2527 76.5733C35.822 76.0033 35.4796 75.4183 35.1521 74.8482C34.3521 73.371 33.6583 71.8729 33.0787 70.3768C33.8439 71.8343 34.626 73.2956 35.5084 74.6777C35.8031 75.1397 36.1178 75.6206 36.4413 76.0459Z",fill:"#E8553E"}),(0,f.jsx)("path",{d:"M38.7429 66.5509C39.4397 66.6064 40.7498 63.2612 40.4471 61.7543C40.1533 60.2582 37.4378 60.2453 37.4378 60.2453C36.2924 59.5126 35.5917 60.048 35.2235 61.5302C35.2235 61.5302 34.4136 62.6406 33.972 62.9004C33.972 62.9004 35.2741 66.8057 36.2081 67.2082C36.7411 67.4412 36.1684 66.534 37.5341 65.6635C37.548 65.6615 38.1494 66.5062 38.7429 66.5509Z",fill:"#F4D0B5"}),(0,f.jsx)("path",{d:"M34.9317 61.9238C34.9317 61.9238 33.9462 59.8923 34.7283 58.6956C35.4994 57.5 36.3242 56.9854 37.7782 57.4673C39.2303 57.9511 42.1006 60.0975 40.6505 62.6694C40.5463 62.8548 40.3051 62.8518 40.1017 62.6713C39.8019 62.4096 39.3732 61.9803 39.0308 61.3805C38.4353 60.3494 37.9678 62.2599 37.3991 61.6739C36.8552 60.1898 35.6493 60.5268 36.1882 62.0041C36.2627 62.5355 34.9317 61.9238 34.9317 61.9238Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M36.5684 63.5696C36.5684 63.5696 36.4274 65.0726 36.8433 66.2891C36.9902 66.0878 37.2125 65.8826 37.541 65.6586C37.541 65.6586 36.8155 64.5918 36.5684 63.5696Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M46.3435 76.0806C46.3167 76.0667 46.284 76.0429 46.2562 76.0211C36.2617 68.2436 25.9992 60.7638 15.4687 53.5818C15.2742 53.4579 15.169 53.2229 15.2236 53.0543C15.2782 52.8868 15.4836 52.861 15.6791 52.9839C26.2129 60.1527 36.4658 67.6153 46.4378 75.3717C46.6194 75.5145 46.7197 75.7792 46.6721 75.9626C46.6254 76.1064 46.4904 76.154 46.3435 76.0806Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M12.8019 59.352C12.6143 60.5625 12.918 62.2639 14.0564 63.2345C15.1501 64.1674 16.365 63.9067 17.55 64.2338C18.9792 64.6334 20.465 65.9639 21.8257 66.0165C23.0455 66.067 23.8355 64.9685 23.8881 63.6023C24.0102 60.9532 21.3453 56.103 18.5782 55.3168C15.7069 54.4899 13.1979 56.7752 12.8019 59.352Z",fill:"#FDCD56"}),(0,f.jsx)("path",{d:"M13.4212 58.9138C13.2515 59.9895 13.5204 61.4975 14.5338 62.361C15.5094 63.1889 16.5873 62.9509 17.6463 63.2454C18.9167 63.5973 20.2447 64.7831 21.4535 64.8248C22.5363 64.8634 23.24 63.8898 23.2906 62.6783C23.4028 60.3315 21.0258 56.0237 18.5633 55.3247C16.0176 54.5881 13.7844 56.6235 13.4212 58.9138Z",fill:"#FBD277"}),(0,f.jsx)("path",{d:"M20.1325 54.6664C20.1911 54.3601 20.1355 53.9397 19.8486 53.7117C19.5757 53.4886 19.2611 53.5629 18.9603 53.4856C18.5931 53.3984 18.2199 53.0742 17.8726 53.0712C17.5619 53.0672 17.3535 53.3349 17.3436 53.669C17.3178 54.3145 17.9956 55.4873 18.6695 55.6827C19.3653 55.8859 20.0025 55.3069 20.1325 54.6664Z",fill:"#FDCD56"}),(0,f.jsx)("path",{d:"M18.6954 55.5657C18.3688 55.4407 18.0443 55.3029 17.7267 55.1463C17.6403 55.1056 17.5768 55.0045 17.5867 54.9232C17.5957 54.8429 17.6701 54.7943 17.7634 54.8578C18.3996 55.1641 19.0517 55.413 19.6918 55.5865C19.7861 55.6014 19.8556 55.6985 19.8606 55.7848C19.8645 55.872 19.803 55.9256 19.7156 55.8998C19.3752 55.8125 19.0348 55.6955 18.6954 55.5657Z",fill:"#636C77"}),(0,f.jsx)("path",{d:"M18.7271 64.4668C18.5405 63.172 18.737 62.017 19.2521 61.1624C18.9474 62.1716 18.9981 63.3792 19.3703 64.564C19.1559 64.5316 18.9415 64.4992 18.7271 64.4668Z",fill:"#FDCD56"}),(0,f.jsx)("path",{d:"M16.9644 63.4248C17.9817 62.5058 18.5683 61.0345 18.5524 59.2856C18.7956 61.1039 18.4393 62.8101 17.5242 64.0078C17.3369 63.8135 17.1504 63.6192 16.9644 63.4248Z",fill:"#FDCD56"}),(0,f.jsx)("path",{d:"M44.3913 75.6315C44.3913 75.6315 46.6185 76.0727 45.5724 73.8132C44.9421 72.445 44.5064 73.2956 44.4439 73.6674C44.4439 73.6674 44.3873 72.9338 44.0151 72.8802C43.7213 72.8346 43.7144 74.0333 43.7144 74.0333C43.94 74.5647 44.1656 75.0974 44.3913 75.6315Z",fill:"#F4D0B5"}),(0,f.jsx)("path",{d:"M33.0738 70.3748C33.0738 70.3748 35.7366 76.3275 37.3147 77.307C39.5429 78.7317 44.952 75.9368 44.952 75.9368C44.5557 74.991 44.1607 74.0475 43.767 73.1063C42.1472 73.2946 40.5235 73.4774 38.8958 73.6545C38.1077 72.2421 37.3233 70.8362 36.5426 69.4369",fill:"#FA6C51"})]})}))})),RS=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("ellipse",{cx:"60.5",cy:"64",rx:"22.5",ry:"22",fill:"url(#paint0_radial_1818_4221)",fillOpacity:"0.5"}),(0,f.jsx)("circle",{cx:"60.5",cy:"64.5",r:"24.4",stroke:"#877629",strokeWidth:"0.2",fill:"none"}),(0,f.jsx)("path",{d:"M75.9801 54.0386C74.7269 52.2111 72.9567 50.9042 70.9538 50.3278C68.9509 49.7514 66.8315 49.939 64.9363 50.8605C63.2399 51.673 62.1935 52.3704 60.5 53.6757C58.8065 52.3704 57.7601 51.6686 56.0637 50.8605C54.1685 49.939 52.0491 49.7514 50.0462 50.3278C48.0433 50.9042 46.2731 52.2111 45.0199 54.0386C43.6984 55.9606 43 58.3627 43 60.9843C43 64.7571 45.0271 68.8963 49.0245 73.2914C52.2818 76.8714 56.131 79.8032 58.1349 81.2318C58.841 81.7334 59.6617 82 60.5 82C61.3383 82 62.159 81.7334 62.8651 81.2318C64.8674 79.8032 68.7182 76.8714 71.9755 73.2914C75.9729 68.898 78 64.7571 78 60.9843C78 58.3627 77.3016 55.9606 75.9801 54.0386Z",fill:"url(#paint1_radial_1818_4221)",fillOpacity:"0.3"}),(0,f.jsx)("path",{d:"M29.3264 56.1552C28.288 54.7274 26.8213 53.7064 25.1617 53.2561C23.5022 52.8058 21.7461 52.9523 20.1758 53.6723C18.7702 54.307 17.5167 55.3773 16.5 56.7976C15.4833 55.3738 14.2298 54.3036 12.8242 53.6723C11.2539 52.9523 9.49785 52.8058 7.83829 53.2561C6.17874 53.7064 4.71198 54.7274 3.67364 56.1552C2.57867 57.6567 2 59.5333 2 61.5815C2 64.529 3.67961 67.7627 6.99172 71.1964C9.69064 73.9933 12.88 76.2838 14.5403 77.3999C15.1254 77.7917 15.8054 78 16.5 78C17.1946 78 17.8746 77.7917 18.4597 77.3999C20.1187 76.2838 23.3094 73.9933 26.0083 71.1964C29.3204 67.7641 31 64.529 31 61.5815C31 59.5333 30.4213 57.6567 29.3264 56.1552Z",fill:"#EF6FFA"}),(0,f.jsx)("path",{d:"M74.2109 56.1552C73.101 54.7274 71.5331 53.7064 69.7591 53.2561C67.9851 52.8058 66.1079 52.9523 64.4293 53.6723C62.9268 54.307 61.5868 55.3773 60.5 56.7976C59.4132 55.3738 58.0732 54.3036 56.5707 53.6723C54.8921 52.9523 53.0149 52.8058 51.2409 53.2561C49.4669 53.7064 47.899 54.7274 46.7891 56.1552C45.6186 57.6567 45 59.5333 45 61.5815C45 64.529 46.7954 67.7627 50.336 71.1964C53.221 73.9933 56.6303 76.2838 58.4052 77.3999C59.0306 77.7917 59.7575 78 60.5 78C61.2425 78 61.9694 77.7917 62.5948 77.3999C64.3683 76.2838 67.779 73.9933 70.664 71.1964C74.2046 67.7641 76 64.529 76 61.5815C76 59.5333 75.3814 57.6567 74.2109 56.1552Z",fill:"#FA6FCB"}),(0,f.jsx)("path",{d:"M116.326 56.1552C115.288 54.7274 113.821 53.7064 112.162 53.2561C110.502 52.8058 108.746 52.9523 107.176 53.6723C105.77 54.307 104.517 55.3773 103.5 56.7976C102.483 55.3738 101.23 54.3036 99.8242 53.6723C98.2539 52.9523 96.4978 52.8058 94.8383 53.2561C93.1787 53.7064 91.712 54.7274 90.6736 56.1552C89.5787 57.6567 89 59.5333 89 61.5815C89 64.529 90.6796 67.7627 93.9917 71.1964C96.6906 73.9933 99.88 76.2838 101.54 77.3999C102.125 77.7917 102.805 78 103.5 78C104.195 78 104.875 77.7917 105.46 77.3999C107.119 76.2838 110.309 73.9933 113.008 71.1964C116.32 67.7641 118 64.529 118 61.5815C118 59.5333 117.421 57.6567 116.326 56.1552Z",fill:"#50379A"}),(0,f.jsx)("line",{x1:"60.75",y1:"48.75",x2:"60.75",y2:"38.25",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"60.75",y1:"94.75",x2:"60.75",y2:"84.25",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"78.25",y1:"66.75",x2:"86.75",y2:"66.75",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"33.25",y1:"66.75",x2:"42.75",y2:"66.75",stroke:"#F4C9FF",strokeWidth:"0.5",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"76.2373",y1:"49.2572",x2:"77.9875",y2:"47.507",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"43.6777",y1:"81.8168",x2:"45.4279",y2:"80.0666",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"74.7735",y1:"80.0664",x2:"76.5237",y2:"81.8166",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,f.jsx)("line",{x1:"42.2144",y1:"47.5073",x2:"43.9646",y2:"49.2575",stroke:"#F4C9FF",strokeLinecap:"round"}),(0,f.jsxs)("defs",{children:[(0,f.jsxs)("radialGradient",{id:"paint0_radial_1818_4221",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(60.5 64) rotate(90) scale(22 22.5)",children:[(0,f.jsx)("stop",{offset:"0.5",stopColor:"#DCFF7A",stopOpacity:"0"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#FFE27A",stopOpacity:"0.44"})]}),(0,f.jsxs)("radialGradient",{id:"paint1_radial_1818_4221",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(60.5 66) rotate(90) scale(16 17.5)",children:[(0,f.jsx)("stop",{stopColor:"#FA916F",stopOpacity:"0"}),(0,f.jsx)("stop",{offset:"1",stopColor:"#FA916F"})]})]})]}))})),FS=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("g",{filter:"url(#filter0_f_1901_4247)",children:(0,f.jsx)("ellipse",{cx:"57.5",cy:"72",rx:"33.5",ry:"33",fill:"#32323B"})}),(0,f.jsx)("ellipse",{cx:"56.5",cy:"69",rx:"33.5",ry:"33",fill:"#32323B"}),(0,f.jsx)("ellipse",{cx:"56.5",cy:"69",rx:"22.5",ry:"23",fill:"#3E3E4D"}),(0,f.jsx)("path",{d:"M71.2857 74L69 71.8L72.4285 68.5L69 65.2L71.2857 63L77 68.5L71.2857 74Z",fill:"#868698"}),(0,f.jsx)("path",{d:"M60 56L57 52.5715L54 56L52 53.7143L57 48L62 53.7143L60 56Z",fill:"#868698"}),(0,f.jsx)("path",{d:"M57 88L52 82.2857L54 80L57 83.4285L60 80L62 82.2857L57 88Z",fill:"#868698"}),(0,f.jsx)("path",{d:"M42.7143 74L37 68.5L42.7143 63L45 65.2L41.5715 68.5L45 71.8L42.7143 74Z",fill:"#868698"}),(0,f.jsx)("path",{d:"M86.4285 77L83 73.6L88.1427 68.5L83 63.4L86.4285 60L95 68.5L86.4285 77Z",fill:"#9A977E"}),(0,f.jsx)("path",{d:"M104.857 80L100 75.2L107.286 68L100 60.8L104.857 56L117 68L104.857 80Z",fill:"#CFD166"}),(0,f.jsx)("path",{d:"M25.7 63.1269L27.9219 65.2478L24.5891 68.4292L27.9219 71.6106L25.7 73.7314L20.1452 68.4292L25.7 63.1269Z",fill:"#9A977E",fillOpacity:"0.2"}),(0,f.jsx)("path",{d:"M12.0024 61.0057L15.0322 63.9749L10.4875 68.4289L15.0322 72.8828L12.0024 75.8521L4.42768 68.4289L12.0024 61.0057Z",fill:"#CFD166",fillOpacity:"0.2"}),(0,f.jsx)("defs",{children:(0,f.jsxs)("filter",{id:"filter0_f_1901_4247",x:"17",y:"32",width:"81",height:"80",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"3.5",result:"effect1_foregroundBlur_1901_4247"})]})})]}))})),DS=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0_1906_4221)",children:[(0,f.jsx)("path",{d:"M80.3175 45.6273V32.793H40.6821V45.6273C40.6821 54.6285 46.6834 62.2268 54.9028 64.6421C56.6159 65.1455 57.7944 66.7139 57.7944 68.4992V68.5011C57.7944 70.2864 56.6159 71.8548 54.9028 72.3582C46.6834 74.7735 40.6821 82.3719 40.6821 91.373V104.671H80.3174V91.373C80.3174 82.3709 74.3148 74.7718 66.0939 72.3574C64.3806 71.8542 63.2019 70.2856 63.2019 68.5002C63.2019 66.7145 64.3807 65.1459 66.0939 64.6429C74.315 62.2285 80.3175 54.6294 80.3175 45.6273Z",fill:"#EBEBFC"}),(0,f.jsx)("path",{d:"M66.0942 64.6429C74.3151 62.2285 80.3177 54.6294 80.3177 45.6273V32.793H74.5957V45.6273C74.5957 54.6294 71.6129 62.2285 63.3922 64.6429C61.6789 65.1461 60.5 66.7145 60.5 68.5002C60.5 70.2858 61.6789 71.8544 63.392 72.3574C71.6129 74.7717 74.5956 82.3709 74.5956 91.373V104.671H80.3175V91.373C80.3175 82.3709 74.315 74.7717 66.0941 72.3574C64.3809 71.8542 63.202 70.2858 63.202 68.5002C63.2022 66.7145 64.3811 65.1461 66.0942 64.6429Z",fill:"#B7B7DC"}),(0,f.jsx)("path",{d:"M79.7609 33.9936H41.2391C38.446 33.9936 36.1816 31.7292 36.1816 28.9361V27H84.8182V28.9361C84.8183 31.7292 82.554 33.9936 79.7609 33.9936Z",fill:"#BB706A"}),(0,f.jsx)("path",{d:"M73.7981 27V28.7824C73.7981 31.6605 71.465 33.9936 68.5869 33.9936H79.6069C82.485 33.9936 84.8181 31.6605 84.8181 28.7824V27H73.7981Z",fill:"#A55B5B"}),(0,f.jsx)("path",{d:"M41.2391 103.006H79.7609C82.554 103.006 84.8183 105.271 84.8183 108.064V110H36.1816V108.064C36.1816 105.271 38.446 103.006 41.2391 103.006Z",fill:"#BB706A"}),(0,f.jsx)("path",{d:"M79.6073 103.006H70.1362C73.0142 103.006 75.3474 105.339 75.3474 108.218V110H84.8185V108.218C84.8185 105.34 82.4854 103.006 79.6073 103.006Z",fill:"#A55B5B"}),(0,f.jsx)("path",{d:"M60.4999 60.6434C52.3001 60.6434 45.6528 53.9961 45.6528 45.7963V45.8618C47.0513 46.4616 49.2795 47.2073 51.9936 47.1333C59.7183 46.9228 63.19 40.2954 68.8303 41.1432C70.4768 41.3908 75.005 42.8303 75.3471 45.8618C75.3446 45.84 75.3471 45.8181 75.3471 45.7963C75.3471 53.9961 68.6998 60.6434 60.4999 60.6434Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 94.791C65.0373 94.791 68.7156 98.4693 68.7156 103.007V102.971H52.2842V103.007C52.2842 98.4693 55.9624 94.791 60.4999 94.791Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 59.3906C59.8078 59.3906 59.2471 59.9515 59.2471 60.6434V64.0166C59.2471 64.7086 59.8078 65.2694 60.4999 65.2694C61.1919 65.2694 61.7526 64.7085 61.7526 64.0166V60.6434C61.7526 59.9515 61.1919 59.3906 60.4999 59.3906Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 72.3257C59.8078 72.3257 59.2471 72.8864 59.2471 73.5785V75.7361C59.2471 76.4282 59.8078 76.9889 60.4999 76.9889C61.1919 76.9889 61.7526 76.428 61.7526 75.7361V73.5785C61.7526 72.8866 61.1919 72.3257 60.4999 72.3257Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 79.0381C59.8078 79.0381 59.2471 79.599 59.2471 80.2909V80.7595C59.2471 81.4516 59.8078 82.0123 60.4999 82.0123C61.1919 82.0123 61.7526 81.4516 61.7526 80.7595V80.2909C61.7526 79.599 61.1919 79.0381 60.4999 79.0381Z",fill:"#FBB84D"}),(0,f.jsx)("path",{d:"M60.4999 87.6826C59.8078 87.6826 59.2471 88.2435 59.2471 88.9354V94.7021C59.2471 95.394 59.8078 95.9549 60.4999 95.9549C61.1919 95.9549 61.7526 95.394 61.7526 94.7021V88.9354C61.7526 88.2434 61.1919 87.6826 60.4999 87.6826Z",fill:"#FBB84D"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_1906_4221",children:(0,f.jsx)("rect",{width:"83",height:"83",fill:"white",transform:"translate(19 27)"})})})]}))})),NS=n(83297),_S=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("path",{d:"M19.5 62.0972L6.00025 69.8906L19.5 77.684L32.9997 69.8906L19.5 62.0972Z",fill:"#FFFAF2"}),(0,f.jsx)("path",{d:"M33 69.8364L19.7721 77.5087L20 93L33 85.5596V69.8364Z",fill:"#FFECD1"}),(0,f.jsx)("path",{d:"M6.01367 69.8364L19.8503 77.5824L20 93L6.01367 85.5331V69.8364Z",fill:"#FFE1B4"}),(0,f.jsx)("path",{d:"M47.665 40L23.985 53.6705L47.665 67.341L71.3451 53.6705L47.665 40Z",fill:"#FFEDE8"}),(0,f.jsx)("path",{d:"M71.3447 53.5752L48.1556 67.182V94.6963L71.3447 81.1554V53.5752Z",fill:"#FFC2B4"}),(0,f.jsx)("path",{d:"M24.0088 53.5752L48.2798 67.1625V94.6962L24.0088 81.1088V53.5752Z",fill:"#FF8569"}),(0,f.jsx)("path",{d:"M94.6416 40.8213L76.2989 51.4105L94.6416 61.9997L112.984 51.4105L94.6416 40.8213Z",fill:"#FFFAF2"}),(0,f.jsx)("path",{d:"M112.984 51.3369L95.0236 61.8395V83.2396L112.984 72.7007V51.3369Z",fill:"#FFBC57"}),(0,f.jsx)("path",{d:"M76.3184 51.3369L95.1188 61.8617V83.1894L76.3184 72.6646V51.3369Z",fill:"#FB9600"}),(0,f.jsx)("path",{d:"M107.901 20H105.577V37.1051H107.901V20Z",fill:"#F9A823"}),(0,f.jsx)("path",{d:"M107.855 37.1051C111.115 37.1051 113.757 33.276 113.757 28.5526C113.757 23.8291 111.115 20 107.855 20C104.595 20 101.952 23.8291 101.952 28.5526C101.952 33.276 104.595 37.1051 107.855 37.1051Z",fill:"#F9A823"}),(0,f.jsx)("path",{d:"M113.757 27.9018C109.043 24.8164 104.599 25.8711 102.695 24.5293C103.687 21.833 105.641 20 107.889 20C110.988 20 113.527 23.4831 113.757 27.9018Z",fill:"#F9A823"}),(0,f.jsx)("path",{d:"M113.757 27.9018C109.043 24.8279 104.599 25.8787 102.695 24.5419C103.687 21.8556 102.695 19.7223 107.889 20.0295C110.988 20.0295 113.527 23.4996 113.757 27.9018Z",fill:"#F6C231"}),(0,f.jsx)("path",{d:"M105.856 37.1051C109.09 37.1051 111.712 33.276 111.712 28.5526C111.712 23.8291 109.09 20 105.856 20C102.622 20 100 23.8291 100 28.5526C100 33.276 102.622 37.1051 105.856 37.1051Z",fill:"#FFF69B"}),(0,f.jsx)("path",{d:"M105.763 37.1051C102.572 37.0137 100 33.2204 100 28.5536C100 23.8868 102.557 20.1105 105.737 20C105.15 25.6874 105.158 31.4195 105.763 37.1051Z",fill:"#FAF679"}),(0,f.jsx)("path",{d:"M105.205 32.4548C104.592 32.4081 104.117 31.8174 104.089 31.1481C104.074 30.7507 103.997 30.3364 103.997 28.7173C103.997 27.3425 104.08 26.5117 104.089 26.2525C104.085 25.9415 104.203 25.6413 104.417 25.4153C104.518 25.3105 104.641 25.2293 104.777 25.1775C104.913 25.1256 105.059 25.1046 105.205 25.1157C105.519 25.1589 105.807 25.316 106.013 25.5571C106.219 25.7981 106.328 26.1061 106.321 26.4224C106.271 27.1704 106.239 27.963 106.239 28.798C106.239 29.5948 106.261 30.3513 106.306 31.0673C106.321 31.2854 106.284 31.5041 106.197 31.7048C105.983 32.1765 105.591 32.4846 105.205 32.4548Z",fill:"#F9A823"}),(0,f.jsx)("path",{d:"M105.366 32.4557C104.841 32.409 104.418 31.8019 104.34 31.1353C104.279 30.6068 104.268 29.1739 104.281 28.7684C104.3 28.104 104.298 26.8706 104.361 26.2614C104.374 25.9488 104.491 25.6497 104.693 25.4123C104.773 25.3109 104.876 25.2308 104.993 25.179C105.111 25.1272 105.239 25.1052 105.366 25.1151C105.892 25.1618 106.321 25.7519 106.321 26.4206C106.273 27.1445 106.244 27.9066 106.241 28.7196C106.241 29.6345 106.269 30.5006 106.321 31.3115C106.223 31.9972 105.772 32.4833 105.366 32.4557Z",fill:"#FEBB2F"})]}))})),BS=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("path",{d:"M48.8168 24.8745C51.4816 24.4363 53.2867 21.9208 52.8485 19.2559C52.4103 16.5911 49.8948 14.786 47.2299 15.2242C44.5651 15.6624 42.76 18.1779 43.1982 20.8427C43.6364 23.5076 46.1519 25.3127 48.8168 24.8745Z",fill:"#E8C8B3"}),(0,f.jsx)("path",{d:"M40.1029 22.5906C42.2118 22.2438 44.3722 22.749 46.1087 23.9951L54.6338 30.1125L53.0146 35.3344L48.999 33.5169L47.7766 41.1513L36.9199 42.9365L39.3649 27.6676L33.7301 31.0719L32.9367 26.2467L37.2431 23.645C38.1206 23.1148 39.0912 22.7569 40.1029 22.5906Z",fill:"#04957C"}),(0,f.jsx)("path",{d:"M61.1363 47.0555L61.1842 47.3465C61.3413 48.3028 61.1915 49.2843 60.7563 50.1502L57.9208 55.792L53.9577 63.6742L49.9421 61.8567L53.1942 53.6531L55.1963 48.6036L44.3397 50.3888C43.7061 50.4932 43.058 50.4717 42.4327 50.3255C41.8073 50.1794 41.2169 49.9114 40.6951 49.537C40.1733 49.1626 39.7304 48.6891 39.3917 48.1434C39.053 47.5978 38.8252 46.9908 38.7212 46.357L38.1261 42.7382L47.7764 41.1513L54.2046 42.5722L57.602 43.3237C58.4966 43.5211 59.3116 43.9822 59.9416 44.6474C60.5716 45.3126 60.9878 46.1514 61.1363 47.0555Z",fill:"#E8C8B3"}),(0,f.jsx)("path",{d:"M45.5462 50.1904L42.9191 56.8169L41.4469 60.0695C41.2185 60.5749 40.9054 61.0375 40.5212 61.4374L33.7452 68.5061L28.4112 74.0693L25.4036 70.8472L35.8797 59.2133L37.3563 55.0927L40.126 47.3649L45.5462 50.1904Z",fill:"#E8C8B3"}),(0,f.jsx)("path",{d:"M47.2958 66.1589C47.2433 66.4869 47.2927 66.823 47.4372 67.1221C47.5817 67.4212 47.8144 67.6687 48.104 67.8314L53.9417 71.1103L54.7827 70.972C55.5195 70.8508 56.1779 70.442 56.6131 69.8354C57.0484 69.2288 57.2249 68.4741 57.1038 67.7374C57.0136 67.189 56.7631 66.6796 56.3839 66.2732L53.9578 63.6742L49.9423 61.8566C49.2402 62.3648 48.6452 63.0063 48.1911 63.7445C47.737 64.4827 47.4328 65.3031 47.2958 66.1589Z",fill:"#E4E4E2"}),(0,f.jsx)("path",{d:"M28.4111 74.0693L29.0061 77.6882L30.074 80.1592C30.1846 80.415 30.2354 80.6926 30.2225 80.971C30.2097 81.2494 30.1336 81.5211 30.0001 81.7657C29.8665 82.0102 29.6789 82.2211 29.4517 82.3823C29.2244 82.5436 28.9634 82.6509 28.6884 82.6961L26.1807 83.1084L23.173 79.8863L21.8301 76.3225C21.5844 75.6706 21.56 74.956 21.7606 74.2888C21.9612 73.6216 22.3757 73.0389 22.9401 72.6305L25.4035 70.8472L28.4111 74.0693Z",fill:"#E4E4E2"}),(0,f.jsx)("path",{d:"M33.7301 31.072L25.9357 36.411C25.5054 36.6853 24.9926 36.8004 24.4864 36.7363C23.9801 36.6722 23.5123 36.4329 23.164 36.0599C22.9471 35.8273 22.7836 35.5502 22.6849 35.2479C22.5862 34.9456 22.5547 34.6254 22.5926 34.3096C22.6304 33.9939 22.7367 33.6902 22.9041 33.4198C23.0714 33.1494 23.2958 32.9187 23.5615 32.744L32.9367 26.2468L33.7301 31.072Z",fill:"#E8C8B3"}),(0,f.jsx)("path",{d:"M54.6752 30.0646L59.8206 23.9846C60.2496 23.4887 60.8485 23.1712 61.4997 23.0942C62.1508 23.0173 62.8072 23.1865 63.34 23.5686C63.6309 23.7774 63.876 24.0435 64.0604 24.3504C64.2447 24.6574 64.3644 24.9988 64.4121 25.3536C64.4598 25.7085 64.4345 26.0693 64.3377 26.4141C64.2409 26.7588 64.0748 27.0801 63.8494 27.3583L57.8634 34.8342C57.3117 35.5148 56.5208 35.9589 55.6524 36.0756C54.7841 36.1923 53.904 35.9728 53.1922 35.4619C53.1404 35.4248 53.1017 35.3723 53.0814 35.312C53.0612 35.2516 53.0604 35.1864 53.0793 35.1256L54.6148 30.1733C54.6273 30.1333 54.6478 30.0963 54.6752 30.0646Z",fill:"#E8C8B3"}),(0,f.jsx)("path",{d:"M45.5461 50.1904L42.919 56.8169L37.6971 55.1978L37.3562 55.0928L40.1259 47.365L45.5461 50.1904Z",fill:"#F3AF3E"}),(0,f.jsx)("path",{d:"M51.1428 12.5279C51.0935 12.5445 51.0453 12.5627 50.9967 12.5812C50.9196 11.5123 50.4932 10.4984 49.7831 9.69579C49.073 8.89314 48.1187 8.34624 47.0672 8.13935C46.0157 7.93246 44.9253 8.07707 43.9641 8.55088C43.0028 9.0247 42.2241 9.80143 41.7478 10.7614C41.2714 11.7214 41.124 12.8114 41.3281 13.8634C41.5323 14.9155 42.0767 15.8712 42.8775 16.5834C43.6783 17.2956 44.691 17.7247 45.7597 17.8046C46.8284 17.8845 47.8937 17.6108 48.7915 17.0257C48.8058 17.0752 48.8207 17.1248 48.8373 17.1741C49.0688 17.8615 49.4989 18.4649 50.0733 18.9078C50.6477 19.3508 51.3405 19.6135 52.0642 19.6627C52.7879 19.7119 53.5099 19.5454 54.139 19.1842C54.768 18.8231 55.2759 18.2835 55.5983 17.6337C55.9207 16.9839 56.0431 16.2532 55.9502 15.5338C55.8573 14.8144 55.5531 14.1387 55.0762 13.5922C54.5992 13.0457 53.971 12.6529 53.2708 12.4635C52.5706 12.274 51.83 12.2965 51.1426 12.528L51.1428 12.5279Z",fill:"#533222"}),(0,f.jsx)("path",{d:"M57.9209 55.792L53.9578 63.6742L49.9423 61.8566L53.1943 53.6531L57.9209 55.792Z",fill:"#DC4D41"}),(0,f.jsx)("path",{d:"M33.7451 68.5061L28.4111 74.0694L25.4035 70.8472L30.6416 65.0303L33.6492 68.2524L33.7451 68.5061Z",fill:"#DC4D41"}),(0,f.jsx)("path",{d:"M54.2046 42.5722L52.7838 49.0003L44.3397 50.3888C43.7061 50.4932 43.058 50.4717 42.4327 50.3255C41.8073 50.1794 41.2169 49.9114 40.6951 49.537C40.1733 49.1626 39.7304 48.6891 39.3917 48.1434C39.053 47.5978 38.8252 46.9908 38.7212 46.357L38.1261 42.7382L47.7764 41.1513L54.2046 42.5722Z",fill:"#FBB540"}),(0,f.jsx)("rect",{x:"1",y:"107",width:"42",height:"30",rx:"3",fill:"#B28E66"}),(0,f.jsx)("path",{d:"M1 110C1 108.343 2.34315 107 4 107H40C41.6569 107 43 108.343 43 110V114.2H1V110Z",fill:"#8D6C46"}),(0,f.jsx)("rect",{x:"68",y:"74.4375",width:"51",height:"33.5625",rx:"3",fill:"#B9956E"}),(0,f.jsx)("path",{d:"M68 77.4375C68 75.7806 69.3431 74.4375 71 74.4375H116C117.657 74.4375 119 75.7806 119 77.4375V82.4925H68V77.4375Z",fill:"#0CB746"})]}))})),US=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("ellipse",{cx:"59",cy:"90.1111",rx:"44",ry:"30.5556",fill:"#0B8735"}),(0,f.jsx)("ellipse",{cx:"59",cy:"85.2222",rx:"44",ry:"30.5556",fill:"#0CB746"}),(0,f.jsx)("path",{d:"M49.8127 78.3526C49.2016 76.5191 50.0674 70.4583 50.5767 67.6572L57.0703 68.0391C56.8157 70.713 56.1536 76.5191 55.5424 78.3526C54.7785 80.6444 50.5767 80.6444 49.8127 78.3526Z",fill:"#C58C48"}),(0,f.jsx)("path",{d:"M70.6114 73.0048C71.2226 71.1713 70.3567 65.1106 69.8474 62.3094L63.3538 62.6914C63.6085 65.3653 64.2706 71.1713 64.8817 73.0048C65.6457 75.2967 69.8474 75.2967 70.6114 73.0048Z",fill:"#B17834"}),(0,f.jsx)("path",{d:"M40.1279 48.9777C42.6357 45.7984 45.6393 44.5198 47.1169 44.2751C50.1965 43.6133 50.9091 45.1658 48.9367 47.0111C47.6662 48.1997 46.0795 51.4426 45.0733 53.7771C44.663 54.729 43.9798 55.6315 42.99 55.9392C42.3259 56.1457 41.5064 56.2371 40.6145 55.9065C40.4388 55.8413 40.2741 55.7617 40.1199 55.6704C37.8809 54.3455 38.5167 51.0203 40.1279 48.9777Z",fill:"#C58C48"}),(0,f.jsx)("path",{d:"M40.2698 48.5671C42.7669 45.7892 45.1954 44.5932 47.1169 44.275C50.1965 43.6132 50.8862 44.7396 49.6862 47.1594C48.7359 49.0754 47.0302 49.9388 46.1946 52.0767C45.6771 52.3143 45.0054 50.2072 43.1933 49.5354C41.3812 48.8635 40.3759 49.2076 40.2698 48.5671Z",fill:"#C14177"}),(0,f.jsx)("path",{d:"M45.868 63.4081C46.3237 57.3472 48.1888 51.9507 49.6999 48.688C50.2978 47.3971 51.6233 46.6483 53.046 46.6483H66.3512C67.3702 46.6483 68.3735 47.0191 69.0075 47.8167C72.133 51.7492 73.2024 58.1152 73.6908 62.9642C73.9247 65.2857 72.0542 67.2751 69.7209 67.2751H49.6517C47.4944 67.2751 45.7062 65.5593 45.868 63.4081Z",fill:"#D46996"}),(0,f.jsx)("path",{d:"M45.7717 65.4009C45.8342 62.4152 46.2692 59.5472 46.8789 56.9618C52.2764 60.7815 68.3195 60.3995 72.7942 56.9618C73.4135 59.8924 73.6995 62.8209 73.8841 65.1266C73.9915 66.4679 73.3812 67.7512 72.1231 68.2284C70.0982 68.9964 66.3 69.949 59.916 69.949C53.2463 69.949 49.399 68.9092 47.4476 68.1265C46.3454 67.6843 45.7469 66.5883 45.7717 65.4009Z",fill:"#2F6B96"}),(0,f.jsx)("path",{d:"M75.6757 53.4042C74.2556 49.6121 71.7843 47.4793 70.4514 46.7961C67.7198 45.2277 66.5681 46.4893 67.8847 48.8477C68.7327 50.3668 69.2562 53.939 69.5034 56.469C69.6042 57.5007 69.98 58.5684 70.8291 59.163C71.3987 59.562 72.1514 59.8987 73.1017 59.8554C73.2889 59.8469 73.47 59.8212 73.6447 59.7813C76.1808 59.2014 76.5882 55.8405 75.6757 53.4042Z",fill:"#C58C48"}),(0,f.jsx)("path",{d:"M75.6656 52.97C74.1335 49.5635 72.1847 47.6845 70.4514 46.7961C67.7198 45.2277 66.7197 46.0904 67.1257 48.7607C67.4471 50.8751 68.8087 52.2171 68.9534 54.508C69.3739 54.8919 70.6555 53.0896 72.5862 53.0017C74.5169 52.9138 75.3695 53.5477 75.6656 52.97Z",fill:"#C14177"}),(0,f.jsx)("circle",{cx:"75.6383",cy:"31.8125",r:"4.20176",transform:"rotate(20.5422 75.6383 31.8125)",fill:"#2C3048"}),(0,f.jsx)("circle",{cx:"69.5266",cy:"23.409",r:"4.20176",transform:"rotate(20.5422 69.5266 23.409)",fill:"#2C3048"}),(0,f.jsx)("circle",{cx:"4.20176",cy:"4.20176",r:"4.20176",transform:"matrix(-0.936414 0.350898 0.350898 0.936414 44.4845 26.4035)",fill:"#2C3048"}),(0,f.jsx)("circle",{cx:"4.20176",cy:"4.20176",r:"4.20176",transform:"matrix(-0.936414 0.350898 0.350898 0.936414 50.5961 18)",fill:"#2C3048"}),(0,f.jsx)("path",{d:"M40.817 37.8628C40.817 35.4181 43.1089 35.0616 44.2548 35.1889L45.4008 41.6826C43.4909 41.6826 40.817 40.9186 40.817 37.8628Z",fill:"#B17834"}),(0,f.jsx)("path",{d:"M77.105 37.8628C77.105 35.4181 74.8131 35.0616 73.6672 35.1889L72.5212 41.6826C74.4311 41.6826 77.105 40.9186 77.105 37.8628Z",fill:"#B17834"}),(0,f.jsx)("path",{d:"M73.6671 36.3349C73.6671 44.3515 67.8413 50.0862 58.77 50.0862C49.6987 50.0862 43.8729 44.3515 43.8729 36.3349C43.8729 28.3184 49.6987 22.5837 58.77 22.5837C67.8413 22.5837 73.6671 28.3184 73.6671 36.3349Z",fill:"#C58C48"}),(0,f.jsx)("path",{d:"M73.6671 36.3349C70.2293 28.3134 60.2979 32.5151 58.77 29.0773C57.2421 32.5151 48.8386 26.7855 43.8728 36.3349C41.199 28.3134 52.6583 19.9099 58.77 22.5837C64.8816 20.2918 76.341 28.6954 73.6671 36.3349Z",fill:"#2C3253"}),(0,f.jsx)("path",{d:"M32 79.5229C30.8333 79.3563 28.4 78.2229 28 75.0229C29.3333 74.8563 32 75.5229 32 79.5229Z",fill:"#00A337"}),(0,f.jsx)("path",{d:"M32 79.5229C32.875 79.4124 34.7 78.6607 35 76.5382C34 76.4276 32 76.8698 32 79.5229Z",fill:"#00A337"}),(0,f.jsx)("path",{d:"M87.4793 96.9354C88.6205 96.6415 90.9144 95.2474 90.96 92.0228C89.6165 92.0038 87.0393 92.9597 87.4793 96.9354Z",fill:"#00A337"}),(0,f.jsx)("path",{d:"M87.4792 96.9355C86.5974 96.9218 84.7008 96.3754 84.1692 94.2988C85.1509 94.0789 87.1874 94.2984 87.4792 96.9355Z",fill:"#00A337"}),(0,f.jsx)("path",{d:"M82.2275 71.8942C83.3941 71.7275 85.8275 70.5942 86.2275 67.3942C84.8941 67.2275 82.2275 67.8942 82.2275 71.8942Z",fill:"#00A337"}),(0,f.jsx)("path",{d:"M82 72C80.8333 71.8526 78.4 70.8503 78 68.0203C79.3333 67.8729 82 68.4625 82 72Z",fill:"#00A337"}),(0,f.jsx)("path",{d:"M57.2275 106.523C58.3941 106.356 60.8275 105.223 61.2275 102.023C59.8941 101.856 57.2275 102.523 57.2275 106.523Z",fill:"#00A337"}),(0,f.jsx)("path",{d:"M57 106.629C55.8333 106.481 53.4 105.479 53 102.649C54.3333 102.502 57 103.091 57 106.629Z",fill:"#00A337"})]}))})),VS=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.6799 84.2797C21.9531 84.4687 22.3125 84.4032 22.5015 84.13L22.2111 87.9229L30.6625 87.5767L31.5081 83.046C31.2981 83.3495 31.394 83.7299 31.6671 83.9189C31.9403 84.1078 32.2997 84.0423 32.5097 83.7388L34.6931 80.5824C36.1418 78.4882 35.6179 75.6129 33.5237 74.1642C31.4295 72.7156 28.5542 73.2395 27.1055 75.3336L21.4999 83.4372C21.3109 83.7103 21.4068 84.0908 21.6799 84.2797Z",fill:"#F84848"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8304 102.633C16.7744 104.669 20.7793 103.94 22.8159 100.996L24.8524 98.0517C25.0413 97.7786 24.9968 97.3888 24.7237 97.1999C24.4505 97.0109 24.0398 97.0858 23.8508 97.3589L25.2668 95.3768L16.6473 89.4142L15.2313 91.3963C15.4203 91.1232 15.3758 90.7334 15.1026 90.5445C14.8295 90.3555 14.4187 90.4303 14.2298 90.7035L12.1932 93.6475C10.1567 96.5915 10.9168 100.617 13.8304 102.633Z",fill:"#A19DAE"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M64.3828 113.82C61.1417 115.975 60.3303 111.959 61.198 104.347C60.9248 104.158 60.829 103.778 61.039 103.474L63.2224 100.318C64.6711 98.2235 67.5464 97.6996 69.6406 99.1482C71.7348 100.597 72.289 103.493 70.8404 105.587L65.2347 113.691C65.0458 113.964 64.656 114.009 64.3828 113.82Z",fill:"#F84848"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M49.9473 127.617C47.0337 125.601 46.2736 121.575 48.3101 118.632L50.3466 115.688C50.5356 115.414 50.9463 115.34 51.2195 115.528C51.4926 115.717 51.5675 116.128 51.3785 116.401L53.674 113.278L62.2935 119.24L59.9677 122.343C60.1566 122.07 60.5674 121.995 60.8405 122.184C61.1137 122.373 61.1885 122.784 60.9996 123.057L58.9631 126.001C56.9266 128.945 52.8913 129.653 49.9473 127.617Z",fill:"#A19DAE"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M65.993 119.017L59.3896 99.3715C51.9144 101.29 49.125 106.945 47.183 112.736L28.7603 99.9921C36.0605 98.1315 40.3044 93.6182 36.8464 83.9566L38.0648 83.9468C38.4032 83.9117 38.6738 83.6501 38.6597 83.2814C38.6549 82.9639 38.363 82.6723 38.0246 82.7074L15.8702 83.4019C15.6858 83.409 15.4898 83.4978 15.3848 83.6495L11.7107 88.9608C11.5217 89.234 11.5966 89.6448 11.8697 89.8337L62.6459 124.958C62.919 125.147 63.3298 125.072 63.5187 124.799L67.1929 119.488C67.2978 119.336 67.3118 119.121 67.2533 118.946L60.1733 97.8494C60.0565 97.4993 59.711 97.3501 59.3819 97.4365C59.0832 97.544 58.8826 97.8989 59.0204 98.2186L65.993 119.017Z",fill:"#CDCDCD"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M45.8014 113.306L28.6838 101.465C28.4713 101.318 28.3639 101.019 28.4501 100.765C31.7236 91.3621 37.3404 82.0099 43.8778 75.0893C47.4545 71.2812 51.1482 68.4066 54.9076 66.4749C59.0287 64.3447 63.1082 63.4423 67.0436 63.7862C67.2373 63.8305 67.4194 63.9565 67.5595 64.1432C69.2694 67.7043 69.8638 71.8399 69.324 76.4475C68.8121 80.6257 67.425 85.0959 65.1534 89.8068C60.9834 98.3649 54.2132 106.919 46.5389 113.278C46.3313 113.448 46.0442 113.474 45.8014 113.306Z",fill:"#E4E4E4"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M41.4916 110.325L32.9936 104.446C32.7204 104.257 32.6759 103.868 32.8649 103.594L45.2309 85.7181C47.0575 83.0776 50.6516 82.4227 53.2618 84.2283C55.9022 86.0548 56.5571 89.649 54.7305 92.2895L42.3645 110.166C42.1756 110.439 41.7648 110.514 41.4916 110.325Z",fill:"#B9B9B9"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M69.324 76.4476C69.8638 71.84 69.2694 67.7043 67.5595 64.1432C67.4194 63.9565 67.2373 63.8305 67.0436 63.7863C63.1083 63.4423 59.0287 64.3448 54.9076 66.475C54.4945 66.6828 54.1328 66.8814 53.7198 67.0893C55.9052 69.1844 58.3591 71.1511 61.0299 72.9986C63.7007 74.8462 66.4368 76.4697 69.1378 77.7547C69.217 77.3159 69.2752 76.9074 69.324 76.4476Z",fill:"#F8485E"}),(0,f.jsx)("path",{d:"M81.5 20.5C83 16.5 86.8333 9.83333 89 7.99999C90.5 6.72121 107 7.49998 108.5 7.99998C110 8.49998 113.5 12 115 13.5C116.5 15 116 30 115 31.5C114 33 104.5 43.5 102 43.5C99.5 43.5 82.5 39.5 81.5 37C80.5531 34.6328 80.2586 23.8104 81.5 20.5Z",fill:"#C17E47"}),(0,f.jsx)("path",{d:"M86.5843 21.4791C87.6474 18.6058 90.3645 13.8172 91.9002 12.5003C92.9634 11.5817 104.659 12.1411 105.722 12.5003C106.785 12.8594 109.266 15.3735 110.329 16.4509C111.392 17.5284 111.038 28.3029 110.329 29.3804C109.62 30.4578 102.887 38 101.115 38C99.3426 38 87.293 35.1268 86.5842 33.331C85.9131 31.6307 85.7044 23.8569 86.5843 21.4791Z",fill:"#D89C60"}),(0,f.jsx)("ellipse",{cx:"105.5",cy:"16.5",rx:"2.5",ry:"1.5",fill:"#C17E47"}),(0,f.jsx)("circle",{cx:"93.5",cy:"14.5",r:"1.5",fill:"#C17E47"}),(0,f.jsx)("circle",{cx:"100.5",cy:"35.5",r:"1.5",fill:"#C17E47"}),(0,f.jsx)("path",{d:"M22.5365 12.639C24.2255 13.1884 27.0705 14.6704 27.8779 15.5504C28.4408 16.1595 28.4893 23.1838 28.316 23.8318C28.1428 24.4798 26.7731 26.0428 26.1861 26.7127C25.599 27.3825 19.3804 27.4986 18.7372 27.1068C18.094 26.7149 13.5353 22.9103 13.4792 21.8486C13.423 20.7869 14.6963 13.4797 15.7084 13.0002C16.6667 12.5463 21.1387 12.1843 22.5365 12.639Z",fill:"#C17E47"}),(0,f.jsx)("path",{d:"M21.8353 15.7177C22.8067 16.0337 24.4431 16.8861 24.9074 17.3923C25.2312 17.7426 25.2591 21.7827 25.1595 22.1554C25.0598 22.5281 24.272 23.4271 23.9344 23.8124C23.5967 24.1977 20.0199 24.2645 19.65 24.0391C19.28 23.8137 16.6581 21.6254 16.6257 21.0148C16.5934 20.4041 17.3258 16.2012 17.9079 15.9255C18.4591 15.6644 21.0313 15.4562 21.8353 15.7177Z",fill:"#D89C60"}),(0,f.jsx)("path",{d:"M99.3573 121.809C100.161 120.82 101.887 119.297 102.685 118.984C103.238 118.764 107.954 120.543 108.343 120.827C108.732 121.11 109.426 122.43 109.723 122.996C110.02 123.562 108.493 127.756 108.065 128.086C107.637 128.415 103.913 130.486 103.188 130.25C102.462 130.014 97.8977 127.276 97.8378 126.475C97.781 125.716 98.6922 122.628 99.3573 121.809Z",fill:"#C17E47"}),(0,f.jsx)("path",{d:"M101.238 123.073C101.7 122.504 102.693 121.628 103.152 121.448C103.47 121.321 106.183 122.345 106.406 122.508C106.63 122.671 107.029 123.43 107.2 123.756L107.2 123.756C107.371 124.081 106.493 126.494 106.246 126.683C106 126.873 103.858 128.064 103.441 127.928C103.024 127.792 100.398 126.217 100.364 125.757C100.331 125.32 100.855 123.544 101.238 123.073Z",fill:"#D89C60"}),(0,f.jsx)("g",{filter:"url(#filter0_dd_153_2)",children:(0,f.jsx)("path",{d:"M74.4037 93.3096L78.7656 85.9839",stroke:"#00F0FF",strokeWidth:"2",strokeLinecap:"round"})}),(0,f.jsx)("g",{filter:"url(#filter1_dd_153_2)",children:(0,f.jsx)("path",{d:"M38 68.7202L42.8935 61.7383",stroke:"#00F0FF",strokeWidth:"2",strokeLinecap:"round"})}),(0,f.jsx)("g",{filter:"url(#filter2_dd_153_2)",children:(0,f.jsx)("path",{d:"M81.819 80.856L86.181 73.5303",stroke:"#00F0FF",strokeWidth:"2",strokeLinecap:"round"})}),(0,f.jsx)("g",{filter:"url(#filter3_dd_153_2)",children:(0,f.jsx)("path",{d:"M46.3189 56.851L51.2124 49.8691",stroke:"#00F0FF",strokeWidth:"2",strokeLinecap:"round"})}),(0,f.jsx)("g",{filter:"url(#filter4_dd_153_2)",children:(0,f.jsx)("path",{d:"M89.2344 68.4023L93.5963 61.0766",stroke:"#00F0FF",strokeWidth:"2",strokeLinecap:"round"})}),(0,f.jsx)("g",{filter:"url(#filter5_dd_153_2)",children:(0,f.jsx)("path",{d:"M54.6378 44.9819L59.5313 38",stroke:"#00F0FF",strokeWidth:"2",strokeLinecap:"round"})}),(0,f.jsxs)("defs",{children:[(0,f.jsxs)("filter",{id:"filter0_dd_153_2",x:"68.379",y:"80.0089",width:"16.4113",height:"19.2759",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2.5"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.76 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_153_2"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.4 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_153_2",result:"effect2_dropShadow_153_2"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_153_2",result:"shape"})]}),(0,f.jsxs)("filter",{id:"filter1_dd_153_2",x:"31.9734",y:"55.7654",width:"16.9466",height:"18.9277",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2.5"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.76 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_153_2"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.4 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_153_2",result:"effect2_dropShadow_153_2"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_153_2",result:"shape"})]}),(0,f.jsxs)("filter",{id:"filter2_dd_153_2",x:"75.7944",y:"67.5552",width:"16.4113",height:"19.2759",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2.5"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.76 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_153_2"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.4 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_153_2",result:"effect2_dropShadow_153_2"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_153_2",result:"shape"})]}),(0,f.jsxs)("filter",{id:"filter3_dd_153_2",x:"40.2924",y:"43.8962",width:"16.9466",height:"18.9277",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2.5"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.76 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_153_2"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.4 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_153_2",result:"effect2_dropShadow_153_2"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_153_2",result:"shape"})]}),(0,f.jsxs)("filter",{id:"filter4_dd_153_2",x:"83.2097",y:"55.1016",width:"16.4113",height:"19.2759",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2.5"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.76 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_153_2"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.4 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_153_2",result:"effect2_dropShadow_153_2"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_153_2",result:"shape"})]}),(0,f.jsxs)("filter",{id:"filter5_dd_153_2",x:"48.6113",y:"32.0271",width:"16.9466",height:"18.9277",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,f.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2.5"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.76 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_153_2"}),(0,f.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,f.jsx)("feOffset",{}),(0,f.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,f.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,f.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.4 0 0 0 1 0"}),(0,f.jsx)("feBlend",{mode:"normal",in2:"effect1_dropShadow_153_2",result:"effect2_dropShadow_153_2"}),(0,f.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_153_2",result:"shape"})]})]})]}))})),HS=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("ellipse",{cx:"30.5",cy:"115.5",rx:"20.5",ry:"7.5",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"49",y:"109",width:"2",height:"7",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"10",y:"109",width:"2",height:"7",fill:"#FF8569"}),(0,f.jsx)("ellipse",{cx:"30.5",cy:"109.5",rx:"20.5",ry:"7.5",fill:"#FFC2B4"}),(0,f.jsx)("ellipse",{cx:"89.5",cy:"115.5",rx:"20.5",ry:"7.5",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"102",y:"104",width:"8",height:"12",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"69",y:"104",width:"9",height:"12",fill:"#FF8569"}),(0,f.jsx)("ellipse",{cx:"89.5",cy:"104.5",rx:"20.5",ry:"7.5",fill:"#FFC2B4"}),(0,f.jsx)("path",{d:"M85.397 27.5782C85.397 27.5782 88.5767 32.3937 89.0472 34.5894C89.5178 36.7851 92.968 47.2144 98.9277 44.5482C104.887 41.8821 107.161 38.3533 106.377 34.8247C105.593 31.296 101.026 29.5849 99.428 26.0883L91.9174 23.0375L85.397 27.5782Z",fill:"#3E3432"}),(0,f.jsx)("path",{d:"M84.5518 24.5168C84.5518 24.5168 85.761 19.2798 88.3413 19.2798C90.9214 19.2798 93.0131 21.3714 93.0131 23.9516C93.0131 25.9771 91.7504 27.692 89.948 28.3398C89.948 28.3398 84.6962 27.8437 84.5518 24.5168Z",fill:"#F8A991"}),(0,f.jsx)("path",{d:"M89.9478 19.5634C88.1591 20.2185 86.8827 21.936 86.8827 23.9516C86.8827 25.9672 88.1591 27.6847 89.9478 28.3398C89.4468 28.5233 88.9057 28.6235 88.341 28.6235C85.7609 28.6235 83.6692 26.5318 83.6692 23.9517C83.6692 22.3058 84.539 20.8484 85.825 20.0162C85.8251 20.016 89.4469 19.3799 89.9478 19.5634Z",fill:"#F6987C"}),(0,f.jsx)("path",{d:"M101.463 21.1781L102.906 23.0055L103.906 23.0376L105.99 23.1043L107.018 20.1664C107.338 19.2521 107.067 18.2607 106.384 17.6337C106.225 17.4862 106.043 17.3606 105.841 17.2593C105.5 17.0887 105.136 17.0067 104.779 17.0067C103.852 17.0067 102.964 17.5543 102.584 18.4725L101.463 21.1781Z",fill:"#F8A991"}),(0,f.jsx)("path",{d:"M85.3966 31.845H88.6101C87.0558 31.845 85.7948 33.106 85.7948 34.6615V47.5748H82.5814V34.6614C82.5814 33.1059 83.8424 31.845 85.3966 31.845Z",fill:"#FFB09E"}),(0,f.jsx)("path",{d:"M82.5811 47.5747L75.061 58.9416C73.6939 61.0079 74.0595 63.7658 75.9178 65.4046L85.8626 74.1746L88.0781 73.0731L89.4312 70.6606L81.9474 62.1208L89.7507 53.5015V47.5746L86.1043 45.584L82.5811 47.5747Z",fill:"#62DBFB"}),(0,f.jsx)("path",{d:"M75.061 58.9417L82.5812 47.5747L84.4021 46.546L85.7947 47.5747L78.2745 58.9417C76.9075 61.008 77.2731 63.7659 79.1313 65.4047L87.3808 72.6798L87.4902 73.3655L85.8625 74.1747L75.9179 65.4047C74.0596 63.7659 73.694 61.008 75.061 58.9417Z",fill:"#01D0FB"}),(0,f.jsx)("path",{d:"M91.0356 71.7401L89.4312 70.6607L85.8626 74.1747L86.759 79.2714C86.9078 80.1174 87.6426 80.7343 88.5015 80.7343H88.838C89.6351 80.7343 90.334 80.2012 90.5445 79.4323L92.036 73.9858C92.2382 73.178 91.9125 72.33 91.2215 71.8652L91.0356 71.7401Z",fill:"#EAF6FF"}),(0,f.jsx)("path",{d:"M94.036 47.5746L90.2927 45.9691L86.4767 47.5746L80.6892 60.2362C80.4969 60.6568 80.3975 61.1139 80.3975 61.5765C80.3975 63.2506 81.6789 64.6462 83.3469 64.7887L95.51 65.8283L96.792 63.4447L96.285 61.2571L89.5849 59.5899C89.0666 59.4609 88.8594 58.8358 89.1983 58.4229L92.1654 54.8056C93.4081 53.2907 94.0774 51.3866 94.0561 49.4273L94.036 47.5746Z",fill:"#62DBFB"}),(0,f.jsx)("path",{d:"M80.6893 60.2364L86.4768 47.5748L88.5947 46.5461L89.6902 47.5748L83.9027 60.6212C83.6316 61.0905 83.5822 61.4257 83.611 61.9614C83.611 63.348 84.4904 64.5428 85.7402 64.9936L83.3469 64.789C81.6789 64.6465 80.3975 63.2509 80.3975 61.5768C80.3975 61.1141 80.4971 60.657 80.6893 60.2364Z",fill:"#01D0FB"}),(0,f.jsx)("path",{d:"M95.51 65.8285L97.5206 69.93C97.8177 70.5362 98.4342 70.9205 99.1094 70.9205C100.087 70.9205 100.879 70.1283 100.879 69.1511V63.4317C100.879 62.3958 100.079 61.5354 99.0459 61.4595L98.9524 61.4527L96.285 61.2571L95.51 65.8285Z",fill:"#EAF6FF"}),(0,f.jsx)("path",{d:"M71.0104 19.598L71.3118 22.8501L74.6666 24.3749L76.1862 22.2372L75.7348 19.0453C75.6553 18.4798 75.3796 17.9835 74.9846 17.6245C74.5614 17.236 73.9985 17.0026 73.3868 17H73.3778C71.9786 17 70.8808 18.2029 71.0104 19.598Z",fill:"#F8A991"}),(0,f.jsx)("path",{d:"M71.0104 19.598L71.3118 22.8501L74.6666 24.3749L74.5255 22.8501L74.2242 19.598C74.1523 18.8235 74.4588 18.1093 74.9846 17.6258V17.6245C74.5614 17.236 73.9985 17.0026 73.3868 17H73.3778C71.9787 17 70.8809 18.2029 71.0104 19.598Z",fill:"#F6987C"}),(0,f.jsx)("path",{d:"M86.8086 20.3334L87.2404 22.1571C88.3057 23.2783 90.0827 24.4907 92.9267 24.8445L94.8662 29.9501L99.4279 26.0882C99.4279 26.0882 94.9577 19.4808 89.6414 19.1005L86.8086 20.3334Z",fill:"#544542"}),(0,f.jsx)("path",{d:"M87.2406 22.1571C86.1806 21.0415 85.8252 20.0161 85.8252 20.0161C87.5728 18.9931 89.3201 18.8981 90.9523 19.3197C89.2712 19.5363 87.8701 20.6452 87.2406 22.1571Z",fill:"#3E3432"}),(0,f.jsx)("path",{d:"M85.3967 31.845L82.5814 39.2796L74.2403 33.338C72.9105 32.3895 72.0588 30.9104 71.9083 29.2836L74.4883 22.4515L76.1861 22.2374L76.9872 27.8981C77.0521 28.3562 77.3223 28.7596 77.7214 28.9938L81.5868 31.2624C82.2383 31.6437 82.9791 31.8451 83.734 31.8451L85.3967 31.845Z",fill:"#FE5694"}),(0,f.jsx)("path",{d:"M71.3118 22.8503L71.9081 29.2839C72.0581 30.91 72.9109 32.3899 74.2407 33.3375L82.5813 39.2801L83.2636 37.4772L77.4532 33.3377C76.1234 32.39 75.2719 30.9102 75.1218 29.2841L74.4883 22.4515L71.3118 22.8503Z",fill:"#FD3581"}),(0,f.jsx)("path",{d:"M82.5814 34.6608C82.5814 33.1056 83.8423 31.8447 85.3975 31.8447H90.2513C91.785 31.8447 93.2713 31.301 94.4421 30.3097L96.1258 28.8837L98.9611 26.4831C99.2676 26.224 99.5087 25.8944 99.6613 25.5238L101.463 21.1778L104.193 22.3396L104.195 22.3408L105.99 23.1039L104.442 27.5294C104.006 28.7746 103.28 29.8967 102.321 30.8034L99.0087 33.9362L94.527 38.1706C94.2133 38.467 94.0355 38.8794 94.0355 39.311V47.5744L85.7947 47.5746L82.5813 41.1067L84.7562 38.8922L82.5813 35.9556V34.6608H82.5814Z",fill:"#FE5694"}),(0,f.jsx)("path",{d:"M85.3967 31.845H88.6102C87.0559 31.845 85.7949 33.106 85.7949 34.6615V47.5748H82.5814V34.6614C82.5814 33.1058 83.8424 31.845 85.3967 31.845Z",fill:"#FD3581"}),(0,f.jsx)("path",{d:"M35.5999 41.5101C35.5999 41.5101 34.3907 36.2731 31.8104 36.2731C29.2303 36.2731 27.1387 38.3647 27.1387 40.9448C27.1387 42.9704 28.4013 44.6853 30.2038 45.3331C30.2038 45.3331 35.4555 44.837 35.5999 41.5101Z",fill:"#FFCEBF"}),(0,f.jsx)("path",{d:"M30.2039 36.5567C31.9926 37.2119 33.269 38.9293 33.269 40.9449C33.269 42.9605 31.9926 44.678 30.2039 45.3331C30.705 45.5166 31.2461 45.6168 31.8107 45.6168C34.3908 45.6168 36.4825 43.5252 36.4825 40.9451C36.4825 39.2992 35.6127 37.8418 34.3267 37.0096C34.3266 37.0093 30.7048 36.3732 30.2039 36.5567Z",fill:"#FFB09E"}),(0,f.jsx)("path",{d:"M18.6886 38.1714L17.2458 39.9987L16.2456 40.0309L14.1618 40.0976L13.1334 37.1597C12.8141 36.2454 13.0847 35.254 13.7681 34.627C13.927 34.4795 14.1092 34.3539 14.3106 34.2526C14.6517 34.082 15.0159 34 15.3724 34C16.2995 34 17.1882 34.5476 17.5679 35.4658L18.6886 38.1714Z",fill:"#FFCEBF"}),(0,f.jsx)("path",{d:"M34.7551 48.8383H31.5416C33.0959 48.8383 34.3569 50.0993 34.3569 51.6548V64.5681H37.5704V51.6547C37.5704 50.0992 36.3094 48.8383 34.7551 48.8383Z",fill:"#FFB09E"}),(0,f.jsx)("path",{d:"M37.5706 64.568L45.0908 75.9348C46.4578 78.0012 46.0922 80.7591 44.234 82.3979L34.2892 91.1678L32.0737 90.0664L30.7205 87.6539L38.2043 79.1141L30.401 70.4948V64.5678L34.0474 62.5773L37.5706 64.568Z",fill:"#60818A"}),(0,f.jsx)("path",{d:"M45.0907 75.9349L37.5705 64.568L35.7496 63.5392L34.3571 64.568L41.8772 75.9349C43.2443 78.0013 42.8787 80.7592 41.0204 82.398L32.7709 89.6731L32.6615 90.3588L34.2892 91.1679L44.2339 82.398C46.0921 80.7592 46.4577 78.0013 45.0907 75.9349Z",fill:"#556D74"}),(0,f.jsx)("path",{d:"M29.1162 88.7334L30.7205 87.654L34.2891 91.168L33.3927 96.2647C33.244 97.1107 32.5092 97.7276 31.6502 97.7276H31.3138C30.5166 97.7276 29.8178 97.1945 29.6073 96.4256L28.1157 90.9791C27.9136 90.1712 28.2392 89.3233 28.9302 88.8585L29.1162 88.7334Z",fill:"#D3E5F3"}),(0,f.jsx)("path",{d:"M26.1157 64.568L29.859 62.9624L33.675 64.568L39.4625 77.2296C39.6548 77.6502 39.7543 78.1073 39.7543 78.5698C39.7543 80.244 38.4986 81.2046 37.1517 82.4933L29.6418 89.8216L28.3597 87.4381L28.8668 85.2504L32.1517 78.4933C32.6517 77.4933 31.2923 75.8291 30.9535 75.4162L27.9863 71.7989C26.7436 70.284 26.0743 68.3799 26.0956 66.4206L26.1157 64.568Z",fill:"#60818A"}),(0,f.jsx)("path",{d:"M39.4625 77.2297L33.675 64.5681L31.557 63.5394L30.4615 64.5681L36.249 77.6145C36.5201 78.0838 37.1804 78.9576 37.1517 79.4933C37.1517 80.8799 37.1517 81.9933 36.1517 83.4933L37.6517 82.4933C39.4625 81.1671 39.7543 80.2443 39.7543 78.5701C39.7543 78.1075 39.6547 77.6504 39.4625 77.2297Z",fill:"#556D74"}),(0,f.jsx)("path",{d:"M30.3674 89.51L29.0125 93.8723C28.8123 94.5171 28.2624 94.9917 27.5953 95.0957C26.6298 95.2462 25.725 94.5855 25.5745 93.62L24.6936 87.9688C24.534 86.9452 25.1915 85.9719 26.2008 85.7379L26.2921 85.7167L28.8976 85.1126L30.3674 89.51Z",fill:"#EAF6FF"}),(0,f.jsx)("path",{d:"M53.7056 46.7545L51.6552 49.2967L48.0171 48.7106L47.934 46.0891L50.076 43.6801C50.4551 43.2531 50.9594 42.9922 51.4871 42.9117C52.0546 42.8222 52.6526 42.9393 53.1636 43.2755L53.171 43.2805C54.3365 44.0546 54.5855 45.664 53.7056 46.7545Z",fill:"#FFCEBF"}),(0,f.jsx)("path",{d:"M53.7055 46.7544L51.6551 49.2966L48.017 48.7106L48.9781 47.5185L51.0285 44.9763C51.5169 44.3709 51.6568 43.6063 51.4863 42.9127L51.487 42.9116C52.0545 42.8222 52.6525 42.9392 53.1635 43.2755L53.171 43.2804C54.3365 44.0546 54.5854 45.664 53.7055 46.7544Z",fill:"#FFB09E"}),(0,f.jsx)("path",{d:"M33.3432 37.3267L32.9114 39.1504C31.846 40.2716 30.0691 41.484 27.2251 41.8378L26.6517 39.9933L26.1518 37.9933C26.1518 37.9933 27.1518 36.4933 30.5104 36.0938L33.3432 37.3267Z",fill:"#EE8B43"}),(0,f.jsx)("path",{d:"M32.9112 39.1504C33.9711 38.0348 37.6518 35.4933 37.6518 35.4933C32.1518 34.9933 30.8316 35.8914 29.1994 36.313C30.8805 36.5296 32.2817 37.6385 32.9112 39.1504Z",fill:"#EE6F14"}),(0,f.jsx)("path",{d:"M34.9458 48.9963L33.1774 56.7469L43.4129 56.4127C45.0455 56.3583 46.5733 55.5975 47.5988 54.3256L49.2297 47.2071L47.9339 46.0894L44.1346 50.3614C43.8271 50.7071 43.3788 50.8936 42.9168 50.8679L38.4417 50.619C37.6881 50.5761 36.9596 50.334 36.3308 49.9163L34.9458 48.9963Z",fill:"#9DD820"}),(0,f.jsx)("path",{d:"M51.655 49.2967L47.5987 54.3259C46.574 55.5975 45.0449 56.3583 43.4128 56.4119L33.1772 56.7473L33.6064 54.8679L40.7368 54.6346C42.3688 54.581 43.8969 53.8194 44.9216 52.5479L49.2297 47.207L51.655 49.2967Z",fill:"#84B61A"}),(0,f.jsx)("path",{d:"M37.5704 51.6542C37.5704 50.0989 36.3095 48.8381 34.7542 48.8381H29.9004C28.3667 48.8381 26.8804 48.2943 25.7097 47.3031L24.0259 45.877L21.1906 43.4764C20.8842 43.2174 20.643 42.8877 20.4904 42.5172L18.6887 38.1711L15.9584 39.3329L15.9572 39.3342L14.1618 40.0972L15.7096 44.5228C16.1457 45.768 16.8714 46.89 17.8306 47.7968L21.1431 50.9296L25.6248 55.1639C25.9385 55.4603 26.1162 55.8727 26.1162 56.3043V64.5677L34.357 64.568L37.5705 58.1001L35.3955 55.8855L37.5705 52.9489V51.6542H37.5704Z",fill:"#9DD820"}),(0,f.jsx)("path",{d:"M34.755 48.8383H31.5416C33.0958 48.8383 34.3568 50.0993 34.3568 51.6548V64.5681H37.5703V51.6547C37.5703 50.0992 36.3093 48.8383 34.755 48.8383Z",fill:"#84B61A"})]}))})),zS=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:[(0,f.jsx)("rect",{x:"13",y:"72",width:"23.25",height:"23.25",fill:"#FFC2B4"}),(0,f.jsx)("rect",{x:"82.75",y:"48.75",width:"23.25",height:"23.25",fill:"#FFC2B4"}),(0,f.jsx)("rect",{x:"82.75",y:"95.25",width:"23.25",height:"23.25",fill:"#FFC2B4"}),(0,f.jsx)("rect",{x:"59.5",y:"25.5",width:"23.25",height:"23.25",fill:"#FFC2B4"}),(0,f.jsx)("rect",{x:"59.5",y:"72",width:"23.25",height:"23.25",fill:"#FFC2B4"}),(0,f.jsx)("rect",{x:"36.25",y:"48.75",width:"23.25",height:"23.25",fill:"#FFC2B4"}),(0,f.jsx)("rect",{x:"36.25",y:"95.25",width:"23.25",height:"23.25",fill:"#FFC2B4"}),(0,f.jsx)("rect",{x:"36.25",y:"72",width:"23.25",height:"23.25",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"13",y:"95.25",width:"23.25",height:"23.25",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"82.75",y:"25.5",width:"23.25",height:"23.25",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"82.75",y:"72",width:"23.25",height:"23.25",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"59.5",y:"48.75",width:"23.25",height:"23.25",fill:"#FF8569"}),(0,f.jsx)("rect",{x:"59.5",y:"95.25",width:"23.25",height:"23.25",fill:"#FF8569"})]}))})),WS=n(68107),GS={"full-game":{title:(0,f.jsx)(w.Trans,{id:"Make an entire game"}),description:(0,f.jsx)(w.Trans,{id:"Make complete games step by step"})},"game-mechanic":{title:(0,f.jsx)(w.Trans,{id:"Specific game mechanics"}),description:(0,f.jsx)(w.Trans,{id:"Find how to implement the most common game mechanics and more"})},"official-beginner":{title:(0,f.jsx)(w.Trans,{id:"Beginner course"}),description:(0,f.jsx)(w.Trans,{id:"Learn the fundamental principles of GDevelop"})},"official-intermediate":{title:(0,f.jsx)(w.Trans,{id:"Intermediate course"}),description:(0,f.jsx)(w.Trans,{id:"Learn all the game-building mechanics of GDevelop"})},"official-advanced":{title:(0,f.jsx)(w.Trans,{id:"Advanced course"}),description:(0,f.jsx)(w.Trans,{id:"The icing on the cake"})},"education-curriculum":{title:(0,f.jsx)(w.Trans,{id:"Education curriculum and resources"}),description:(0,f.jsx)(w.Trans,{id:"For teachers and educators having the GDevelop Education subscription. Ready to use resources for teaching."})},course:{title:(0,f.jsx)(w.Trans,{id:"Loading"}),description:(0,f.jsx)(w.Trans,{id:"Loading course..."})},recommendations:{title:(0,f.jsx)(w.Trans,{id:"Recommendations"}),description:null}},YS=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},qS=function(e,t){return"official-beginner"===e?t._({id:"Beginner"}):"official-intermediate"===e?t._({id:"Intermediate"}):"official-advanced"===e?t._({id:"Advanced"}):"full-game"===e||"game-mechanic"===e?t._({id:"Intermediate"}):null},JS=function(e){var t,n=e.i18n,r=e.tutorial,i=e.limits,a=e.onSelectTutorial,o=!(0,Ei.$S)(r,i?i.capabilities:null);return{title:(0,vo.a)(n,r.titleByLocale)||r.title,description:(0,vo.a)(n,r.descriptionByLocale)||r.description,isLocked:o,onClick:function(){r.isPrivateTutorial?a(r):((0,ai.dw)(r.id),y.ZP.openExternalURL((0,vo.a)(n,r.linkByLocale)))},imageUrl:(0,vo.a)(n,r.thumbnailUrlByLocale),overlayText:r.duration?(0,WS.L)(r.duration):"\ud83d\udcd8",overlayTextPosition:"bottomRight",chipText:qS(r.category,n),chipColor:(t=r.category,"official-beginner"===t?"#3BF7F4":"official-intermediate"===t?"#FFBC57":"official-advanced"===t?"#FF8569":"full-game"===t||"game-mechanic"===t?"#FFBC57":null)}},XS="Carousel_arrowContainer__hAjc1",KS=YS("xlarge",!0),QS=(ZS.LF+10)*KS,$S={gridList:{textAlign:"center",maxWidth:QS,width:"calc(100% + ".concat(10,"px)"),overflowX:"scroll",overflowY:"hidden",flexWrap:"nowrap"},container:{display:"flex",position:"relative",width:"100%"},arrowsContainer:{width:"calc(100% + ".concat(10,"px)"),left:-5,justifyContent:"space-between",position:"absolute",top:0,bottom:0,pointerEvents:"none",padding:0,maxWidth:QS,zIndex:12,transition:"opacity 0.2s ease-in-out"},arrowContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:50,cursor:"pointer",transition:"all 0.2s ease-in-out"},arrow:{fontSize:50,cursor:"pointer"}},eP=function(e){var t=e.items,n=c.useState(!1),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=c.useState(!1),u=(0,s.Z)(o,2),d=u[0],p=u[1],h=c.useState(!1),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=(0,be.UQ)(),b=v.windowSize,C=v.isMobile,y=v.isLandscape,Z=c.useContext(j.Z),k=c.useRef(null),w=c.useMemo((function(){return function(e,t){switch(e){case"small":return t?2:1;case"medium":return 2;case"large":return 4;case"xlarge":return 6;default:return 3}}(b,y)}),[b,y]),T=c.useMemo((function(){return w+(t.length>w?(e=w)<2?.6:e<4?.9:.25:0);var e}),[t.length,w]),S=c.useCallback((function(){if(k.current){var e=k.current,t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;a(t>0),p(t+r<n-10)}}),[]);c.useEffect((function(){var e=k.current;if(e){S(),e.addEventListener("scroll",S);var t=function(){S()};return window.addEventListener("resize",t),function(){e&&(e.removeEventListener("scroll",S),window.removeEventListener("resize",t))}}}),[S]);var P=c.useCallback((function(e){var t=k.current;if(t){var n=t.children[0].offsetWidth,r=w*n,i=t.scrollLeft,a="left"===e?i-r:i+r;t.scrollTo({left:a,behavior:"smooth"})}}),[w]);return(0,f.jsxs)("div",{style:$S.container,onMouseEnter:function(){return x(!0)},onMouseLeave:function(){return x(!1)},children:[(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},$S.arrowsContainer),{},{display:C?"none":"flex",opacity:m?1:0}),children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},$S.arrowContainer),{},{backgroundColor:Z.paper.backgroundColor.medium,pointerEvents:i?"auto":"none",opacity:i?.8:0}),className:XS,onClick:function(){return P("left")},children:(0,f.jsx)(Ca.Z,{style:$S.arrow})}),(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},$S.arrowContainer),{},{backgroundColor:Z.paper.backgroundColor.medium,pointerEvents:d?"auto":"none",opacity:d?.8:0}),className:XS,onClick:function(){return P("right")},children:(0,f.jsx)(ot.Z,{style:$S.arrow})})]}),(0,f.jsx)(kS.Z,{className:"almost-invisible-scrollbar",cols:T,style:$S.gridList,cellHeight:"auto",spacing:10,ref:k,children:t.map((function(e){return e.renderItem()}))})]})},tP=function(e,t){switch(e){case"small":return t?4:2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},nP=tP("xlarge",!0),rP=(ZS.LF+10)*nP,iP={grid:{textAlign:"center",maxWidth:rP,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")},bannerContainer:{width:"100%",maxWidth:rP-10}},aP=[{id:LS.rM,title:{id:"Platformer"},description:{id:"Make a knight jump and run in this platformer game."},shortDescription:{id:"Make a knight jump and run."},durationInMinutes:1,renderImage:function(e){return(0,f.jsx)(BS,(0,l.Z)({},e))}},{id:LS.UO,title:{id:"Background and cameras"},shortDescription:{id:"Follow a character with scrolling background."},description:{id:"Follow this Castlevania-type character with the camera, while the background scrolls."},durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(OS,(0,l.Z)({},e))}},{id:LS.Hx,title:{id:"Top-Down RPG Pixel Perfect"},shortDescription:{id:"Move like in retro Pokemon games."},description:{id:"Make a character move like in a retro Pokemon game."},durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(US,(0,l.Z)({},e))}},{id:LS.EB,title:{id:"Joystick controls"},shortDescription:{id:"Control a spaceship with a joystick."},description:{id:"Control your spaceship with a joystick, while avoiding asteroids."},durationInMinutes:1,renderImage:function(e){return(0,f.jsx)(FS,(0,l.Z)({},e))}},{id:LS.Rv,title:{id:"3D platforms"},shortDescription:{id:"Place 3D platforms in a 2D game."},description:{id:"Place 3D platforms in this 2D platformer, creating a path to the end."},durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(_S,(0,l.Z)({},e))}},{id:LS.yw,title:{id:"Health bar"},shortDescription:{id:"Add a health bar for handle damage."},description:{id:"Add a health bar to this jumping character, losing health when hitting spikes."},durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(RS,(0,l.Z)({},e))}},{id:LS.v0,title:{id:"Paint a Level with Tiles"},shortDescription:{id:"Build dynamic levels with tiles."},description:{id:"Use a Tilemap to build a level and change it dynamically during the game."},durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(zS,(0,l.Z)({},e))}},{id:LS.UY,title:{id:"Fire a Bullet"},shortDescription:{id:"Fire bullets in an Asteroids game."},description:{id:"Fire bullets in this Asteroids game. Get ready for a Star Wars show."},durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(VS,(0,l.Z)({},e))}},{id:LS.HD,title:{id:"Time score"},shortDescription:{id:"Add a time attack mode."},description:{id:"Add a time attack mode, where you have to reach the end as fast as possible."},durationInMinutes:2,renderImage:function(e){return(0,f.jsx)(DS,(0,l.Z)({},e))}},{id:LS.hr,title:{id:"Co-op Multiplayer"},shortDescription:{id:"Transform a game into a multiplayer experience."},description:{id:"Transform this platformer into a co-op game, where two players can play together."},durationInMinutes:3,renderImage:function(e){return(0,f.jsx)(HS,(0,l.Z)({},e))}},{id:LS.Xj,title:{id:"Score multiplier"},shortDescription:{id:"Multiply scores with collectibles."},description:{id:"Transform this Plinko game with collectibles that multiply your score."},durationInMinutes:3,renderImage:function(e){return(0,f.jsx)(AS,(0,l.Z)({},e))}}],oP=function(e){var t=e.selectInAppTutorial,n=e.lessonsIds,r=e.displayAsCarousel,i=(0,NS.k)(),a=c.useContext(gi.Z),o=a.inAppTutorialShortHeaders,s=a.inAppTutorialsFetchingError,l=a.fetchInAppTutorials,u=a.currentlyRunningInAppTutorial,d=c.useContext(D.ZP).getTutorialProgress,p=c.useContext($n.ZP),h=(0,be.UQ)(),g=h.windowSize,m=h.isLandscape,x=function(e){var t=e.tutorialId;if("loggingIn"===p.loginState)return 0;var n=d({tutorialId:t,userId:p.profile?p.profile.id:void 0});return n&&n.progress?n.progress[0]:0},v=LS.PP.reduce((function(e,t){return 100===(x({tutorialId:t})||0)?e+1:e}),0),b=Math.round(v/LS.PP.length*100),C=tP(g,m),j=c.useMemo((function(){var e=LS.PP;return n&&(e=n),r&&(e=e.slice(0,3*C)),aP.filter((function(t){return e.includes(t.id)}))}),[n,r,C]);return(0,f.jsx)(M.x1,{children:(0,f.jsx)("div",{style:iP.bannerContainer,children:s?(0,f.jsxs)(_r.Z,{onRetry:l,children:[(0,f.jsx)(w.Trans,{id:"An error occurred when downloading the tutorials."})," ",(0,f.jsx)(w.Trans,{id:"Please check your internet connection or try again later."})]}):(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(M.sg,{children:(0,f.jsxs)(_.pJ,{alignItems:"center",children:[100!==b?(0,f.jsxs)(N.Z,{displayInlineAsSpan:!0,noMargin:!0,size:"body2",children:[b,"%"]}):(0,f.jsx)(Vo,{}),(0,f.jsx)(TS.Z,{value:b})]})}),r?(0,f.jsx)(eP,{items:j.map((function(e){return{renderItem:function(){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(MS,{title:e.title,description:e.description,shortDescription:e.shortDescription,durationInMinutes:e.durationInMinutes,renderImage:e.renderImage,progress:x({tutorialId:e.id}),onClick:function(){return t(e.id)},disabled:!!u||!i,loading:!o})},e.id)}}}))}):(0,f.jsx)(kS.Z,{cols:tP(g,m),style:iP.grid,cellHeight:"auto",spacing:10,children:j.map((function(e){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(MS,{title:e.title,description:e.description,shortDescription:e.shortDescription,durationInMinutes:e.durationInMinutes,renderImage:e.renderImage,progress:x({tutorialId:e.id}),onClick:function(){return t(e.id)},disabled:!!u||!i,loading:!o})},e.id)}))})]})})})},sP=n(61062),lP=n(84140),cP=function(e){var t=e.tutorial,n=e.onClose,r=c.useContext($n.ZP),i=r.limits,l=r.getAuthorizationHeader,u=r.profile,d=c.useState(null),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useState(null),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=!(0,Ei.$S)(t,i?i.capabilities:null),j=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return t.isPrivateTutorial&&"pdf-tutorial"===t.type||console.error("PrivateTutorialViewDialog is used for an unsupported tutorial type."),g(null),e.prev=4,e.next=7,(0,lP.sH)(l,{userId:u.id,tutorialId:t.id});case 7:n=e.sent,b(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("An error occurred while fetching the PDF tutorial:",e.t0),g(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,11]])}))),[l,u,t]);return c.useEffect((function(){j()}),[j]),(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(E.ZP,{title:(0,vo.a)(r,t.titleByLocale),open:!0,maxWidth:"md",actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],flexColumnBody:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(N.Z,{children:(0,vo.a)(r,t.descriptionByLocale)}),C?(0,f.jsxs)(_.ak,{noMargin:!0,children:[t.redeemLinkByLocale&&(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"center",alignItems:"center",children:(0,f.jsx)(G.Z,{icon:(0,f.jsx)(pZ,{}),label:(0,f.jsx)(w.Trans,{id:"Get access"}),primary:!0,onClick:function(){t.redeemLinkByLocale&&y.ZP.openExternalURL((0,vo.a)(r,t.redeemLinkByLocale))}})}),(0,f.jsx)(je.Z,{kind:"info",children:t.redeemHintByLocale?(0,vo.a)(r,t.redeemHintByLocale):(0,f.jsx)(w.Trans,{id:"This tutorial must be unlocked to be accessed."})})]}):v?(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"center",alignItems:"center",children:(0,f.jsx)(G.Z,{icon:(0,f.jsx)(vi.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Download"}),primary:!0,onClick:function(){(0,ai.dw)(t.id),y.ZP.openExternalURL(v.downloadUrl)}})}),(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"Remember that your access to this resource is exclusive to your account."})})]}):h?(0,f.jsx)(_r.Z,{onRetry:j,children:(0,f.jsx)(w.Trans,{id:"Unable to load the tutorial. Please try again later or contact us if the problem persists."})}):(0,f.jsx)(Oe.Z,{})]})})}})},uP=n(72037),dP=n(97890),pP=n(48784),fP={buttonStyle:{textAlign:"left",width:"100%"},imageContainer:{position:"relative",width:"100%"},overlay:{position:"absolute",background:"rgba(0, 0, 0, 0.7)",borderRadius:4,padding:"2px 6px"},overlayText:{color:"white",marginTop:0,marginBottom:0},thumbnailImageWithDescription:{display:"block",objectFit:"contain",verticalAlign:"middle",width:"100%",borderRadius:8,border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out"},dataLoadingSkeleton:{borderRadius:8,aspectRatio:"16 / 9"},imageLoadingSkeleton:{position:"absolute",borderRadius:8,aspectRatio:"16 / 9"},lockerImage:{height:80,width:80},lockedOverlay:{position:"absolute",background:"rgba(0, 0, 0, 0.6)",inset:0,display:"flex",justifyContent:"center",alignItems:"center"},textContainer:{flex:1,display:"flex",justifyContent:"center",padding:"8px 16px"},chip:{height:24}},hP=function(e){var t=e.content,n=e.position,r={top:"topLeft"===n||"topRight"===n?8:void 0,bottom:"bottomLeft"===n||"bottomRight"===n?8:void 0,left:"topLeft"===n||"bottomLeft"===n?8:void 0,right:"topRight"===n||"bottomRight"===n?8:void 0};return(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},fP.overlay),r),children:(0,f.jsx)(fS.Z,{variant:"body1",style:fP.overlayText,children:t})})},gP=function(){return(0,f.jsx)("div",{style:fP.lockedOverlay,children:(0,f.jsx)(Fo,{style:fP.lockerImage})})},mP=function(e){var t=e.items,n=e.isLoading,r=e.getColumnsFromWindowSize,i=e.getLimitFromWindowSize,a=(0,be.UQ)(),o=a.windowSize,s=a.isLandscape,u=r("xlarge",s),d=i?i(o,s):void 0,p=d?t.slice(0,d):t,h=(0,gt.Z)(),g=(0,Ps.t)(),m=c.useRef(new Set),x=c.useCallback((function(e){setTimeout((function(){g&&(m.current.add(e),h())}),50)}),[h,g]),v=r(o,s);return(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(kS.Z,{cols:v,style:{flex:1,maxWidth:(ZS.LF+10)*u},cellHeight:"auto",spacing:10,children:n?new Array(v).fill(0).map((function(e,t){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(pP.Z,{variant:"rect",width:"100%",height:"100%",style:fP.dataLoadingSkeleton})},t)})):p.map((function(e,t){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(ZS.HB,{onClick:e.onClick,size:"large",children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)("div",{style:fP.imageContainer,children:[m.current.has(e.imageUrl)?null:(0,f.jsx)(pP.Z,{variant:"rect",width:"100%",height:"100%",style:fP.imageLoadingSkeleton}),(0,f.jsx)(_p.W,{style:(0,l.Z)({opacity:m.current.has(e.imageUrl)?1:0},fP.thumbnailImageWithDescription),src:e.imageUrl,alt:"thumbnail ".concat(t),onLoad:function(){return x(e.imageUrl)}}),e.overlayText&&(0,f.jsx)(hP,{content:e.overlayText,position:e.overlayTextPosition||"bottomRight"}),e.isLocked&&(0,f.jsx)(gP,{})]}),(0,f.jsx)("div",{style:fP.textContainer,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,justifyContent:"space-between",useFullHeight:!0,noOverflowParent:!0,children:[(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,justifyContent:"flex-start",useFullHeight:!0,noOverflowParent:!0,children:[e.title&&(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,align:"left",children:e.title}),e.description&&(0,f.jsx)(N.Z,{size:"body",color:"secondary",noMargin:!0,align:"left",children:(0,Bs.S)(e.description,115)})]}),e.chipText&&(0,f.jsx)(M.x1,{justifyContent:"space-between",alignItems:"flex-end",children:(0,f.jsx)(Q.Z,{style:(0,l.Z)((0,l.Z)({},fP.chip),{},{border:"1px solid ".concat(e.chipColor||"#3BF7F4")}),label:e.chipText,variant:"outlined"})})]})})]})})},t)}))})})},xP=function(e){var t=e.title,n=e.description,r=e.isLoading,i=e.items,a=e.onShowAll,o=e.showAllIcon,s=e.getLimitFromWindowSize,l=e.getColumnsFromWindowSize,c=e.seeAllLabel,u=e.margin;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(_.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"section-title",children:t})}),o&&a&&(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(T.Z,{onClick:a,label:c||(0,f.jsx)(w.Trans,{id:"See all"}),rightIcon:o})})]}),n&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:n})}),"dense"===u?null:(0,f.jsx)(M.LZ,{}),(0,f.jsx)(mP,{items:i,isLoading:r,getLimitFromWindowSize:s,getColumnsFromWindowSize:l})]})},vP={paper:{flex:1,display:"flex"}},bP=function(e){var t=e.limits,n=e.category,i=e.onSelectCategory,a=e.onSelectTutorial,o=e.getColumnsFromWindowSize,s=c.useContext(nm.n),l=s.tutorials,u=s.error,d=s.fetchTutorials,p="all-tutorials"===n?(0,f.jsx)(w.Trans,{id:"Public tutorials"}):GS[n].title,h="all-tutorials"===n?null:GS[n].description,g=function(e){if(!l)return[];var i=l;if("all-tutorials"===n){var o=l.filter((function(e){return"official-beginner"===e.category})).slice(0,2),s=l.filter((function(e){return"official-intermediate"===e.category})).slice(0,2),c=l.filter((function(e){return"official-advanced"===e.category})).slice(0,2);i=[].concat((0,r.Z)(o),(0,r.Z)(s),(0,r.Z)(c))}else i=l.filter((function(e){return e.category===n}));return i.map((function(n){return JS({i18n:e,limits:t,tutorial:n,onSelectTutorial:a})}))};return u?(0,f.jsx)(H.Z,{square:!0,style:vP.paper,background:"dark",children:(0,f.jsx)(_r.Z,{onRetry:d,children:(0,f.jsx)(w.Trans,{id:"Can't load the tutorials. Verify your internet connection or retry later."})})}):(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(xP,{title:p,description:h,items:g(t),isLoading:!l,onShowAll:function(){return i(n)},showAllIcon:(0,f.jsx)(sP.Z,{fontSize:"small"}),getColumnsFromWindowSize:o,getLimitFromWindowSize:o})}})},CP=n(30227),jP=n(2866),yP=n(56487),ZP=n(27230),kP="EmptyAndStartingPointProjects_container__TIK49",wP="EmptyAndStartingPointProjects_emptyProject__vWZHy",TP=n(65522),SP=n.n(TP),PP=n(78602),IP=n.n(PP),EP=["abandoned","abashed","aberrant","abhorrent","abiding","abject","ablaze","able","abounding","abrasive","abrupt","absent","absorbed","absorbing","abstracted","absurd","abundant","acceptable","accessible","accidental","accurate","acidic","acoustic","acrid","actionable","active","actual","adamant","adaptable","adept","adhesive","adjoining","adorable","adroit","adventurous","affable","affectionate","afraid","aggressive","agile","agonizing","agreeable","airy","alert","alive","alleged","alluring","aloof","amazing","ambiguous","ambitious","amiable","ample","amused","amusing","ancient","angry","animated","annoyed","annoying","anxious","apathetic","apt","aquatic","ardent","aromatic","arrogant","ashamed","aspiring","assorted","astonishing","astute","attractive","august","auspicious","automatic","available","average","avid","aware","awesome","awful","axiomatic","bad","balmy","barbarous","bashful","bawdy","beautiful","befitting","belligerent","beneficial","benevolent","bent","berserk","best","better","bewildered","big","billowing","billowy","bitter","bizarre","blessed","bloody","blue","blushing","boiling","bold","boorish","bored","boring","boss","bouncy","boundless","brainy","brash","brave","brawny","breakable","breezy","brief","bright","brisk","broad","broken","bumpy","burly","bustling","busy","cagey","calculating","callous","calm","can","canny","capable","capricious","cared","careful","careless","caring","casual","cautious","ceaseless","celestial","certain","changeable","charming","cheap","cheerful","chemical","chic","chief","childlike","chilly","chivalrous","choice","chosen","chubby","chummy","chunky","civic","civil","clammy","classy","clean","clear","clever","cloistered","close","closed","cloudy","clumsy","cluttered","cogent","coherent","cold","colorful","colossal","combative","comfortable","common","complete","complex","composed","concerned","condemned","confused","conscious","cooing","cool","cooperative","coordinated","cosmic","courageous","cowardly","cozy","crabby","craven","crazy","creepy","crooked","crowded","cruel","cuddly","cultured","cumbersome","curious","curly","curved","curvy","cut","cute","cynical","daffy","daily","dainty","damaged","damaging","damp","dandy","dangerous","dapper","daring","dark","dashing","dazzling","dead","deadpan","deafening","dear","debonair","decent","decisive","decorous","deep","deeply","defeated","defective","defiant","deft","delicate","delicious","delightful","delirious","deluxe","demonic","dependent","deranged","descriptive","deserted","detailed","determined","devilish","devout","didactic","different","difficult","diligent","direct","direful","dirty","disagreeable","disastrous","discreet","disgusted","disgusting","disillusioned","dispensable","distinct","disturbed","divergent","divine","dizzy","domineering","doted","doting","doubtful","drab","draconian","dramatic","dreamy","dreary","driven","dry","dull","dusty","dynamic","dysfunctional","eager","early","earsplitting","earthy","easy","eatable","economic","educated","efficacious","efficient","eight","elastic","elated","electric","elegant","elfin","elite","embarrassed","eminent","empty","enchanted","enchanting","encouraging","end","endurable","energetic","energized","enigmatic","enormous","entertaining","enthusiastic","envious","equable","equal","erect","erratic","ethereal","evanescent","evasive","even","evil","exact","excellent","excited","exciting","exclusive","exotic","expensive","expert","exuberant","exultant","fabulous","faded","faint","fair","faithful","fallacious","false","famed","familiar","famous","fanatical","fancy","fantastic","far","fascinated","fast","faulty","fearful","fearless","feigned","fertile","festive","few","fierce","fiery","filthy","fine","finicky","first","fit","fixed","flagrant","flaky","flashy","flat","flawless","fleet","flimsy","flippant","flowery","flowing","fluent","fluffy","fluttering","flying","foamy","fond","foolish","for","foregoing","forgetful","forlorn","fortunate","fragile","frail","frank","frantic","free","freezing","frequent","fresh","fretful","friendly","frightened","frightening","full","fumbling","fun","functional","funny","furry","furtive","fuscia","future","futuristic","fuzzy","gabby","gainful","gamy","gaping","garrulous","gas","gaudy","general","genial","gentle","giant","giddy","gifted","gigantic","giving","glad","glamorous","gleaming","glib","glistening","glorious","glossy","gnarly","godly","gold","golden","good","goodly","goofy","gorgeous","graceful","grand","grandiose","grateful","gratis","gray","greasy","great","greedy","green","grey","grieving","groovy","grotesque","grouchy","grubby","gruesome","grumpy","guarded","guided","guiltless","gullible","gusty","gutsy","guttural","habitual","half","hallowed","haloed","halting","handsome","handsomely","handy","hanging","hapless","happy","hard","hardy","harmonious","harsh","heady","healthy","heartbreaking","hearty","heavenly","heavy","hellish","helpful","helpless","heroic","hesitant","hideous","high","highfalutin","hilarious","hip","hissing","historical","holistic","hollow","holy","homely","honest","honorable","horrible","hospitable","hot","huge","hulking","human","humane","humble","humdrum","humorous","hungry","hunky","hurried","hurt","hushed","husky","hypnotic","hysterical","icky","icy","ideal","ignorant","ill","illegal","illustrious","imaginary","immense","imminent","immune","impartial","imperfect","impolite","important","imported","impossible","incandescent","incompetent","inconclusive","incredible","indigo","industrious","inexpensive","infamous","innate","innocent","inquisitive","insidious","instinctive","intelligent","interesting","internal","invincible","irate","irritating","itchy","jaded","jagged","jazzed","jazzy","jealous","jittery","jolly","jovial","joyful","joyous","jubilant","judicious","juicy","jumbled","jumpy","just","kaput","keen","khaki","kind","kindhearted","kindly","kingly","knotty","knowing","knowledgeable","known","labored","lackadaisical","lacking","lame","lamentable","languid","large","last","late","laughable","lavish","lawful","lazy","lean","legal","legit","lethal","level","lewd","light","like","likeable","likely","limber","limitless","limping","literate","little","lively","living","lonely","long","longing","loose","lopsided","loud","lousy","loutish","loved","lovely","loving","low","lowly","loyal","lucid","lucky","ludicrous","lumpy","lush","luxuriant","lying","lyrical","macabre","macho","maddening","madly","magenta","magical","magnificent","main","majestic","major","makeshift","malicious","mammoth","maniacal","many","marked","married","marvelous","massive","material","materialistic","max","maxed","mean","measly","meaty","medical","meek","mellow","melodic","melted","merciful","mere","merry","messy","mighty","military","milky","mindless","miniature","minor","mint","mirthful","miscreant","misty","mixed","moaning","modern","modest","moldy","momentous","money","moonlit","moral","motionless","mountainous","moving","mucho","muddled","mundane","murky","mushy","mute","mutual","mysterious","naive","nappy","narrow","nasty","native","natural","naughty","nauseating","near","neat","nebulous","necessary","needed","needless","needy","neighborly","nervous","new","next","nice","nifty","nimble","nippy","noble","noiseless","noisy","nonchalant","nondescript","nonstop","normal","nostalgic","nosy","noted","novel","noxious","null","numberless","numero","numerous","nutritious","nutty","oafish","obedient","obeisant","obnoxious","obscene","obsequious","observant","obsolete","obtainable","oceanic","odd","offbeat","okay","omniscient","onerous","open","opposite","optimal","orange","ordinary","organic","ossified","outgoing","outrageous","outstanding","oval","overconfident","overjoyed","overrated","overt","overwrought","pacific","painful","painstaking","pale","paltry","panicky","panoramic","parallel","parched","parsimonious","past","pastoral","pathetic","peaceful","peachy","penitent","peppy","perfect","periodic","permissible","perpetual","petite","phobic","physical","picayune","pink","piquant","pithy","placid","plain","plant","plastic","plausible","pleasant","plucky","plum","poetic","pointless","poised","polite","political","posh","possessive","possible","potent","powerful","precious","premium","present","pretty","previous","pricey","prickly","prime","primo","private","prized","pro","probable","productive","profuse","prompt","proper","protective","proud","psychedelic","psychotic","public","puffy","pumped","punchy","puny","pure","purple","purring","pushy","puzzled","puzzling","quack","quaint","quarrelsome","questionable","quick","quickest","quiet","quirky","quixotic","quizzical","rabid","rad","radioactive","ragged","rainy","rambunctious","rampant","rapid","rare","raspy","ratty","reach","ready","real","rebel","receptive","recondite","red","redundant","reflective","regal","regular","relieved","remarkable","reminiscent","repulsive","resilient","resolute","resonant","responsible","rhetorical","rich","right","righteous","rightful","rigid","ripe","ritzy","roasted","robust","romantic","roomy","rooted","rosy","rotten","rough","round","royal","ruddy","rude","rugged","rural","rustic","ruthless","sable","sad","safe","salty","same","sassy","satisfying","saucy","savory","savvy","scandalous","scarce","scared","scary","scattered","scenic","scientific","scintillating","scrawny","screeching","second","secret","secretive","sedate","seemly","selective","selfish","sensitive","separate","serene","serious","shaggy","shaky","shallow","sharp","shiny","shivering","shocking","short","showy","shrewd","shrill","shut","shy","sick","silent","silky","silly","simple","simplistic","sincere","skillful","skinny","sleek","sleepy","slick","slim","slimy","slippery","sloppy","slow","small","smart","smelly","smiley","smiling","smoggy","smooth","snappy","snazzy","sneaky","snobbish","snotty","snowy","snugly","social","soft","soggy","sole","solid","solitary","somber","sophisticated","sordid","sore","sound","sour","spacial","sparkling","special","spectacular","spicy","spiffy","spiky","spiritual","spiteful","splendid","spooky","spotless","spotted","spotty","spry","spurious","squalid","square","squealing","squeamish","stable","staking","stale","standing","star","stark","statuesque","steadfast","steady","steep","stereotyped","sticky","stiff","stimulating","stingy","stoic","stormy","straight","strange","striped","strong","stunning","stupendous","sturdy","suave","subdued","subsequent","substantial","subtle","successful","succinct","sudden","sulky","sunny","sunset","super","superb","superficial","supreme","sure","swank","swanky","sweet","swell","sweltering","swift","symptomatic","synonymous","taboo","tacit","tacky","talented","tall","tame","tan","tangible","tangy","tart","tasteful","tasteless","tasty","tawdry","teal","tearful","tedious","teeny","telling","temporary","tender","tense","tenuous","terrible","terrific","tested","testy","thankful","therapeutic","thin","thinkable","third","thoughtful","thoughtless","threatening","thriving","thundering","tidy","timely","tiny","tired","tiresome","toothsome","top","tops","torpid","tough","touted","towering","tranquil","trashy","tremendous","tricky","trim","trite","tropical","troubled","truculent","true","trusty","truthful","try","typical","ubiquitous","ultra","unable","unaccountable","unadvised","unarmed","unbecoming","unbiased","uncovered","understood","undisturbed","unequal","unequaled","uneven","unhealthy","uninterested","unique","united","unkempt","unknown","unnatural","unruly","unsightly","unsuitable","untidy","unused","unusual","unwavering","unwieldy","unwritten","upbeat","uplifting","uppity","upset","uptight","urbane","usable","used","useful","utmost","utopian","utter","uttermost","vacuous","vagabond","vague","valid","valuable","various","vast","vengeful","venomous","verdant","versed","vestal","viable","victorious","vigorous","violent","violet","vital","vivacious","vivid","vocal","vogue","voiceless","volatile","voracious","wacky","waggish","waiting","wakeful","wandering","wanted","wanting","warlike","warm","wary","wasteful","watery","weak","wealthy","weary","wet","whimsical","whispering","whole","wholesale","wicked","wide","wiggly","wild","willing","windy","winged","wired","wiry","wise","wistful","witty","woebegone","wonderful","wooden","woozy","workable","worried","worthy","wrathful","wretched","wrong","wry","yielding","young","youthful","yummy","zany","zealous","zesty","zippy","zonked"],MP=["account","achiever","acoustics","act","action","activity","actor","addition","adjustment","advertisement","advice","aftermath","afternoon","afterthought","agreement","air","airplane","airport","alarm","amount","amusement","anger","angle","animal","ants","apparatus","apparel","appliance","approval","arch","argument","arithmetic","arm","army","art","attack","attraction","authority","back","badge","bag","bait","balance","ball","base","baseball","basin","basket","basketball","bat","bath","battle","bead","bear","bed","bedroom","beds","bee","beef","beginner","behavior","belief","believe","bell","bells","berry","bike","bikes","bird","birds","birth","birthday","bit","bite","blade","blood","blow","board","boat","bomb","bone","book","books","boot","border","bottle","boundary","box","brake","branch","brass","breath","brick","bridge","bubble","bucket","building","bulb","burst","bushes","business","butter","button","cabbage","cable","cactus","cake","cakes","calculator","calendar","camera","camp","can","cannon","canvas","cap","caption","car","card","care","carpenter","carriage","cars","cart","cast","cat","cats","cattle","cause","cave","celery","cellar","cemetery","cent","chalk","chance","change","channel","cheese","cherries","cherry","chess","chicken","chickens","chin","church","circle","clam","class","cloth","clover","club","coach","coal","coast","coat","cobweb","coil","collar","color","committee","company","comparison","competition","condition","connection","control","cook","copper","corn","cough","country","cover","cow","cows","crack","cracker","crate","crayon","cream","creator","creature","credit","crib","crime","crook","crow","crowd","crown","cub","cup","current","curtain","curve","cushion","day","death","debt","decision","deer","degree","design","desire","desk","destruction","detail","development","digestion","dime","dinner","dinosaurs","direction","dirt","discovery","discussion","distance","distribution","division","dock","doctor","dog","dogs","doll","dolls","donkey","door","downtown","drain","drawer","dress","drink","driving","drop","duck","ducks","dust","ear","earth","earthquake","edge","education","effect","egg","eggnog","eggs","elbow","end","engine","error","event","example","exchange","existence","expansion","experience","expert","eye","eyes","face","fact","fairies","fall","fang","farm","fear","feeling","field","finger","fire","fish","flag","flame","flavor","flesh","flight","flock","floor","flower","flowers","fly","fog","fold","food","foot","force","fork","form","fowl","frame","friction","friend","friends","frog","frogs","front","fruit","fuel","furniture","gate","geese","ghost","giants","giraffe","glass","glove","gold","government","governor","grade","grain","grape","grass","grip","ground","group","growth","guide","guitar","gun","hair","haircut","hall","hammer","hand","hands","harbor","harmony","hat","head","health","heat","hill","history","hobbies","hole","holiday","home","honey","hook","hope","horn","horse","horses","hose","hospital","hot","hour","house","houses","humor","hydrant","ice","icicle","idea","impulse","income","increase","industry","ink","insect","instrument","insurance","interest","invention","iron","island","jail","jam","jar","jeans","jelly","jellyfish","jewel","join","judge","juice","jump","kettle","key","kick","kiss","kittens","kitty","knee","knife","knot","knowledge","laborer","lace","ladybug","lake","lamp","land","language","laugh","leather","leg","legs","letter","letters","lettuce","level","library","limit","line","linen","lip","liquid","loaf","lock","locket","look","loss","love","low","lumber","lunch","lunchroom","machine","magic","maid","mailbox","marble","mark","market","mask","mass","match","meal","measure","meat","meeting","memory","metal","mice","middle","milk","mind","mine","minister","mint","minute","mist","mitten","money","month","moon","morning","mother","motion","mountain","mouth","move","muscle","name","nation","neck","need","needle","nerve","nest","night","noise","north","nose","note","notebook","number","nut","oatmeal","observation","ocean","offer","office","oil","orange","oranges","order","oven","page","pail","pan","pancake","paper","parcel","part","partner","party","passenger","payment","peace","pear","pen","pencil","person","pest","pet","pets","pickle","picture","pie","pies","pig","pigs","pin","pipe","pizzas","place","plane","planes","plant","plantation","plants","plastic","plate","play","playground","pleasure","plot","plough","pocket","point","poison","pollution","popcorn","porter","position","pot","potato","powder","power","price","produce","profit","property","prose","protest","pull","pump","punishment","purpose","push","quarter","quartz","question","quicksand","quiet","quill","quilt","quince","quiver","rabbit","rabbits","rail","railway","rain","rainstorm","rake","range","rat","rate","ray","reaction","reading","reason","receipt","recess","record","regret","relation","religion","representative","request","respect","rest","reward","rhythm","rice","riddle","rifle","ring","rings","river","road","robin","rock","rod","roll","roof","room","root","rose","route","rub","rule","run","sack","sail","salt","sand","scale","scarecrow","scarf","scene","scent","school","science","scissors","screw","sea","seashore","seat","secretary","seed","selection","self","sense","servant","shade","shake","shame","shape","sheep","sheet","shelf","ship","shirt","shock","shoe","shoes","shop","show","side","sidewalk","sign","silk","silver","sink","size","skate","skin","skirt","sky","sleep","sleet","slip","slope","smash","smell","smile","smoke","snail","snails","snake","snakes","sneeze","snow","soap","society","sock","soda","sofa","song","songs","sort","sound","soup","space","spade","spark","spiders","sponge","spoon","spot","spring","spy","square","squirrel","stage","stamp","star","start","statement","station","steam","steel","stem","step","stew","stick","sticks","stitch","stocking","stomach","stone","stop","store","story","stove","stranger","straw","stream","street","stretch","string","structure","substance","sugar","suggestion","suit","summer","sun","support","surprise","sweater","swim","swing","system","table","tail","talk","tank","taste","tax","teaching","team","teeth","temper","tendency","tent","territory","test","texture","theory","thing","things","thought","thread","thrill","throat","throne","thumb","thunder","ticket","tiger","time","tin","title","toad","toe","toes","tomatoes","tongue","tooth","toothbrush","toothpaste","top","touch","town","toy","toys","trade","trail","train","trains","tramp","transport","tray","treatment","tree","trees","trick","trip","trouble","trousers","truck","trucks","tub","turkey","turn","twig","twist","umbrella","underwear","unit","use","vacation","value","van","vase","vegetable","veil","vein","verse","vessel","vest","view","visitor","voice","volcano","volleyball","voyage","walk","wall","war","wash","waste","watch","water","wave","waves","wax","way","wealth","weather","week","weight","wheel","whip","whistle","wilderness","wind","window","wine","wing","winter","wire","wish","wood","wool","word","work","worm","wound","wren","wrench","wrist","writer","writing","yak","yam","yard","yarn","year","yoke","zebra","zephyr","zinc","zipper","zoo"],LP=function(){return"".concat(SP()(IP()(EP))," ").concat(SP()(IP()(MP)))},AP=n(56924),OP=n(37489),RP=function(e){if(!e.authenticated)return!1;var t=e.limits,n=e.cloudProjects;return!!(t&&n&&t.capabilities.cloudProjects.maximumCount>0)&&n.filter((function(e){return!e.deletedAt})).length>=t.capabilities.cloudProjects.maximumCount},FP=function(e){var t=e.margin,n=c.useContext($n.ZP),r=n.limits,i=n.subscription;if(!r)return null;var a=(0,er.e_)(i),o=r.capabilities.cloudProjects,s=o.maximumCount,l=o.canMaximumCountBeIncreased;return(0,f.jsx)(Qn.Z,{subscriptionDialogOpeningReason:"Cloud Project limit reached",label:"dense"===t?(0,f.jsx)(w.Trans,{id:"Upgrade"}):a?(0,f.jsx)(w.Trans,{id:"Upgrade your Premium Plan"}):(0,f.jsx)(w.Trans,{id:"Upgrade to GDevelop Premium"}),hideButton:!l,recommendedPlanIdIfNoSubscription:"gdevelop_silver",placementId:"max-projects-reached",children:(0,f.jsx)(M.x1,{children:(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(N.Z,{size:"dense"===t?"sub-title":"block-title",noMargin:"dense"===t,children:1===s?(0,f.jsx)(w.Trans,{id:"One project at a time \u2014 Upgrade for more"}):(0,f.jsx)(w.Trans,{id:"You've reached your maximum storage of {maximumCount} cloud projects",values:{maximumCount:s}})}),(0,f.jsx)(N.Z,{noMargin:"dense"===t,children:l?a?(0,f.jsx)(w.Trans,{id:"Upgrade to get more cloud projects, AI usage, publishing, multiplayer, courses and credits every month with GDevelop Premium."}):(0,f.jsx)(w.Trans,{id:"Thanks for trying GDevelop! Unlock more projects, AI usage, publishing, multiplayer, courses and much more by upgrading."}):(0,f.jsx)(w.Trans,{id:"To keep using GDevelop cloud, consider deleting old, unused projects."})})]})})})},DP=n(17358),NP=n(90569),_P=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"54",height:"38",viewBox:"0 0 54 38",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51 2.09815e-06C52.6569 2.17057e-06 54 1.34315 54 3V35C54 36.6569 52.6569 38 51 38L3 38C1.34315 38 0 36.6569 0 35V3C0 1.34315 1.34315 0 3 0L51 2.09815e-06ZM51 1C52.1046 1 53 1.89543 53 3V35C53 36.1046 52.1046 37 51 37L3 37C1.89543 37 1 36.1046 1 35L1 3C1 1.89543 1.89543 1 3 1L51 1Z",fill:"currentColor"})}))})),BP=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"40",height:"26",viewBox:"0 0 40 26",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37 0C38.6569 0 40 1.34315 40 3V23C40 24.6569 38.6569 26 37 26L3 26C1.34314 26 0 24.6569 0 23V3C0 1.34315 1.34315 0 3 0H37ZM37 1C38.1046 1 39 1.89543 39 3V23C39 24.1046 38.1046 25 37 25L3 25C1.89543 25 1 24.1046 1 23L1 3C1 1.89543 1.89543 1 3 1L37 1Z",fill:"currentColor"})}))})),UP=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"26",height:"40",viewBox:"0 0 26 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 3C0 1.34315 1.34315 0 3 0H23C24.6569 0 26 1.34315 26 3V37C26 38.6569 24.6569 40 23 40H3C1.34315 40 0 38.6569 0 37V3ZM1 3C1 1.89543 1.89543 1 3 1H23C24.1046 1 25 1.89543 25 3V37C25 38.1046 24.1046 39 23 39H3C1.89543 39 1 38.1046 1 37V3Z",fill:"currentColor"})}))})),VP=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"60",height:"46",viewBox:"0 0 60 46",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.9614 6.1923L6.1922 6.1923L6.19219 39.8077H53.9614V6.1923ZM7.1922 7.1923L7.19219 38.8077H52.9614V7.1923L7.1922 7.1923Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.0769 46L7.0769 41.5769H6.0769L6.0769 46H7.0769Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.0769 0V4.42308H6.0769V0H7.0769Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M0 7.07689H4.42308V6.07689H0V7.07689Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M53.0769 0V4.42308H54.0769V0H53.0769Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M60.1538 7.07689H55.7307V6.07689H60.1538V7.07689Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M53.0769 46V41.5769H54.0769V46H53.0769Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M60.1538 38.9231H55.7307V39.9231H60.1538V38.9231Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M0 38.9231H4.42308V39.9231H0V38.9231Z",fill:"currentColor"})]}))})),HP={optionsContainer:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(8rem, 1fr))",gridGap:"0.5rem",margin:2},optionContainer:{display:"flex",flexDirection:"column",flex:1,marginLeft:4,marginRight:4},buttonBase:{height:"100%",width:"100%",borderRadius:8,padding:8,cursor:"default",overflow:"hidden",boxSizing:"border-box"},contentWrapper:{height:"100%",width:"100%",display:"flex"},largeIcon:{transform:"scale(1.5)"},customSizeField:{fontSize:12,padding:2}},zP={mobilePortrait:{label:(0,f.jsx)(w.Trans,{id:"Mobile portrait"}),width:720,height:1280,orientation:"portrait",icon:(0,f.jsx)(UP,{fontSize:"large"})},desktopMobileLandscape:{label:(0,f.jsx)(w.Trans,{id:"Desktop & Mobile landscape"}),width:1280,height:720,orientation:"landscape",icon:(0,f.jsx)(BP,{fontSize:"large"})},desktopHD:{label:(0,f.jsx)(w.Trans,{id:"Desktop Full HD"}),width:1920,height:1080,orientation:"default",icon:(0,f.jsx)(_P,{fontSize:"large",style:HP.largeIcon})},custom:{label:(0,f.jsx)(w.Trans,{id:"Custom size"}),orientation:"default",icon:(0,f.jsx)(VP,{fontSize:"large",style:HP.largeIcon})}},WP=function(e){var t=e.value,n=e.onChange,r=e.defaultValue;e.disabled;return(0,f.jsx)(yn.Z,{margin:"none",style:HP.customSizeField,inputStyle:{padding:0},type:"number",value:t?t.toString(10):"",onChange:function(e){var t=parseInt(e,10),r=isNaN(t)?null:t;n(r)},onBlur:function(){var e=parseInt(t||r,10),i=Math.min(Math.max(e,1),9999);n(i)},min:0,max:9999,step:10})},GP=function(e){var t=e.children,n=e.onClick,r=e.selected,i=e.disabled,a=function(e){return(0,DP.Z)((function(t){return(0,NP.Z)({root:{outline:e?"2px solid ".concat(t.palette.secondary.dark):"1px solid ".concat(t.palette.text.disabled),"&:focus":{backgroundColor:t.palette.action.hover},"&:hover":{backgroundColor:t.palette.action.hover}}})}))()}(r);return(0,f.jsx)(lt.Z,{onClick:n,elevation:2,style:(0,l.Z)({},HP.buttonBase),classes:a,tabIndex:0,onKeyPress:function(e){(0,gn.ph)(e)&&!r&&n()},disableTouchRipple:r,disabled:i,children:(0,f.jsx)("div",{style:HP.contentWrapper,children:t})})},YP=function(e){var t=e.selectedOption,n=e.onClick,r=e.disabled,i=e.customWidth,a=e.customHeight,o=e.onCustomWidthChange,s=e.onCustomHeightChange;return(0,f.jsx)("div",{style:HP.optionsContainer,children:Object.keys(zP).map((function(e,l){var c=zP[e],u=c.width,d=c.height,p=c.label,h=c.icon;return(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(GP,{onClick:function(){return n(e)},selected:t===e,disabled:r,children:(0,f.jsxs)(M.sg,{expand:!0,alignItems:"center",justifyContent:"center",noMargin:!0,children:[h,(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"body2",noMargin:!0,children:p}),u&&d?(0,f.jsxs)(N.Z,{size:"body-small",noMargin:!0,color:"secondary",children:[u,"x",d]}):(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(N.Z,{size:"body-small",noMargin:!0,color:"secondary",children:"W"}),(0,f.jsx)(WP,{value:i,onChange:o,defaultValue:800,disabled:r}),(0,f.jsx)(N.Z,{size:"body-small",noMargin:!0,color:"secondary",children:"H"}),(0,f.jsx)(WP,{value:a,onChange:s,defaultValue:600,disabled:r})]})]})]})})},e)}))})},qP={iconBackground:{display:"flex",justifyContent:"left"},icon:(0,l.Z)((0,l.Z)({},Hr.b),{},{padding:1})},JP=function(e){var t=e.exampleShortHeader,n=(0,be.UQ)(),r=n.isMobile,i=n.isLandscape,a=t.previewImageUrls[0],o=a.endsWith("square-icon.png")?"1 / 1":"16 / 9",s=r&&!i?void 0:150,c=r&&!i?"calc(100% - ".concat(2,"px)"):void 0;return(0,f.jsx)("div",{style:qP.iconBackground,children:(0,f.jsx)(_p.W,{style:(0,l.Z)((0,l.Z)({},qP.icon),{},{height:s,width:c,aspectRatio:o}),src:a,alt:t.name})})},XP=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,f.jsx)("path",{d:"M3 22v-2h3.5v-4.5H11V11h4.5V6.5H20V3h2v5.5h-4.5V13H13v4.5H8.5V22Z"})}))})),KP={marginRight:2,marginBottom:2,background:"none"},QP=function(e){var t,n=e.difficultyLevel,r=c.useContext(j.Z).example.difficulty.color[n];return(0,f.jsx)(Q.Z,{icon:(0,f.jsx)(XP,{style:{color:r}}),size:"small",style:(0,l.Z)((0,l.Z)({},KP),{},{border:r?"1px solid ".concat(r):void 0}),label:"simple"===n?(0,f.jsx)(w.Trans,{id:"Simple"}):"advanced"===n?(0,f.jsx)(w.Trans,{id:"Advanced"}):"expert"===n?(0,f.jsx)(w.Trans,{id:"Expert"}):(t=n,t.charAt(0).toUpperCase()+t.slice(1))},"example-size-level")},$P=n(98809),eI={chip:{marginRight:2,marginBottom:2}},tI=function(e){var t,n=e.codeSizeLevel;return(0,f.jsx)(Q.Z,{icon:(0,f.jsx)($P.Z,{}),size:"small",style:eI.chip,label:"tiny"===n?(0,f.jsx)(w.Trans,{id:"Tiny"}):"small"===n?(0,f.jsx)(w.Trans,{id:"Short"}):"medium"===n?(0,f.jsx)(w.Trans,{id:"Medium"}):"big"===n?(0,f.jsx)(w.Trans,{id:"Long"}):"huge"===n?(0,f.jsx)(w.Trans,{id:"Huge"}):(t=n,t.charAt(0).toUpperCase()+t.slice(1))},"example-size-level")},nI=(y.ZP.isDev(),{chipsContainer:{display:"flex",flexWrap:"wrap"}}),rI=function(e){var t=e.exampleShortHeader,n=(0,Qr.XB)((0,De.r1)(),t.gdevelopVersion),r=t.previewImageUrls.length>0;return(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[!n&&(0,f.jsx)(je.Z,{kind:"error",children:(0,f.jsx)(w.Trans,{id:"Download the latest version of GDevelop to check out this example!"})}),(0,f.jsxs)(_.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[r?(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(JP,{exampleShortHeader:t})}):null,(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsxs)("div",{style:nI.chipsContainer,children:[t.difficultyLevel&&(0,f.jsx)(QP,{difficultyLevel:t.difficultyLevel}),t.codeSizeLevel&&(0,f.jsx)(tI,{codeSizeLevel:t.codeSizeLevel}),t.authors&&t.authors.map((function(e){return(0,f.jsx)(Yr,{user:e,isClickable:!0},e.id)}))]})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:t.name})}),(0,f.jsx)(N.Z,{size:"body",displayInlineAsSpan:!0,children:(0,f.jsx)(Re.r,{source:t.shortDescription})}),t.description&&(0,f.jsx)(N.Z,{size:"body",displayInlineAsSpan:!0,children:(0,f.jsx)(Re.r,{source:t.description})})]})]})]})},iI=n(46308),aI=n(41908),oI=n(51137),sI=n(9734),lI={iconBackground:{display:"flex",justifyContent:"left"},icon:(0,l.Z)((0,l.Z)({},Hr.b),{},{padding:1,aspectRatio:"16 / 9"})},cI=function(e){var t=e.privateGameTemplateListingData,n=e.simulateAppStoreProduct,r=(0,be.UQ)(),i=r.isMobile,a=r.isLandscape,o=c.useMemo((function(){return n&&t.appStoreThumbnailUrls&&t.appStoreThumbnailUrls[0]||t.thumbnailUrls[0]}),[t,n]),s=i&&!a?void 0:150,u=i&&!a?"calc(100% - ".concat(2,"px)"):void 0;return(0,f.jsx)("div",{style:lI.iconBackground,children:(0,f.jsx)(_p.W,{style:(0,l.Z)((0,l.Z)({},lI.icon),{},{height:s,width:u}),src:o,alt:t.name})})},uI={openProductContainer:{display:"flex",paddingLeft:32,marginTop:8,marginBottom:8}},dI=function(e){var t=e.privateGameTemplateListingData,n=e.purchaseUsageType,r=e.onStoreProductOpened,i=(0,oI.PN)(),a=c.useContext(fa.ZP).navigateToRoute;return(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsxs)(_.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(cI,{privateGameTemplateListingData:t,simulateAppStoreProduct:i})}),(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"block-title",children:t.name})}),(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Licensing"})}),(0,f.jsx)(Pi.Z,{size:"small",helpPagePath:"https://gdevelop.io/page/asset-store-license-agreement"})]}),(0,f.jsx)(sI.i,{productType:"game-template",ownedLicense:n}),(0,f.jsx)("div",{style:uI.openProductContainer,children:(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Open in Store"}),onClick:function(){a("store",{"game-template":"product-".concat(t.id)}),r()},primary:!0})}),(0,f.jsx)(N.Z,{size:"body",displayInlineAsSpan:!0,noMargin:!0,children:(0,f.jsx)(Re.r,{source:t.description,allowParagraphs:!0})})]})]})})},pI=n(49807),fI=(n(25625),"CompactTextAreaFieldWithControls_container__KCcfb"),hI="CompactTextAreaFieldWithControls_compactTextAreaField__rTLeH",gI="CompactTextAreaFieldWithControls_disabled__Y7Pmf",mI="CompactTextAreaFieldWithControls_errored__59CIo",xI="CompactTextAreaFieldWithControls_neonCorner__5k60D",vI="CompactTextAreaFieldWithControls_animatedNeonCorner__XjQiN",bI=c.forwardRef((function(e,t){var n=e.value,r=e.onChange,i=e.id,a=e.disabled,o=e.errored,s=e.placeholder,l=e.rows,u=e.maxRows,d=e.maxLength,p=e.onSubmit,h=e.onNavigateHistory,g=e.controls,m=e.neonCorner,x=e.hasAnimatedNeonCorner,v=c.useRef(i||(0,ln._)()),b=c.useRef(null),C=c.useCallback((function(e){b.current&&b.current.setSelectionRange(e,e)}),[]);c.useImperativeHandle(t,(function(){return{setCursorPosition:C}})),c.useEffect((function(){var e=b.current;if(e&&u){var t=l||3;e.style.flex="none",e.style.height="auto";var n,r=window.getComputedStyle(e),i=parseInt(r.lineHeight),a=parseInt(r.paddingTop),o=parseInt(r.paddingBottom),s=i*t+a+o,c=i*u+a+o,d=e.scrollHeight;n=d<=s?s:d>=c?c:d,e.style.height="".concat(n,"px"),e.style.maxHeight="".concat(c,"px")}}),[n,l,u]);var j=c.useCallback((function(e){if(p&&(0,gn.Fc)(e))p();else if(h){var t="ArrowUp"===e.key,i="ArrowDown"===e.key;if(t||i){var a=e.currentTarget,o=a.selectionStart,s=a.value,l=s.substring(0,o),c=s.split("\n"),u=l.split("\n").length-1,d=l.lastIndexOf("\n")+1,f=c[u],g=o-d,m=0===u&&0===g,x=u===c.length-1&&g===f.length;(t&&m||i&&x)&&(e.preventDefault(),h({currentText:n,onChangeText:r,direction:t?"up":"down"}),t&&setTimeout((function(){C(0)}),0))}}}),[p,h,C,n,r]);return(0,f.jsx)(w.I18n,{children:function(e){var t,i,c=e.i18n;return(0,f.jsx)("label",{className:en()((t={},(0,Qt.Z)(t,fI,!0),(0,Qt.Z)(t,gI,a),(0,Qt.Z)(t,mI,o),t)),children:(0,f.jsxs)("div",{className:en()((i={},(0,Qt.Z)(i,hI,!0),(0,Qt.Z)(i,xI,!!m),(0,Qt.Z)(i,vI,!!m&&x),i)),children:[(0,f.jsx)("textarea",{ref:b,id:v.current,disabled:a,value:null===n?"":n,onChange:function(e){return r(e.currentTarget.value)},placeholder:c._(s),onKeyDown:j,rows:l||3,maxLength:d}),g]})})}})})),CI="AiRequestChat_newChatContainer__QP3Xg",jI="AiRequestChat_aiRequestChatContainer__fxhC5",yI="AiRequestChat_creditOrSubscriptionPromptContainer__e7Pmf",ZI=function(e){var t=e.aiRequest,n=e.editorFunctionCallResults,r=[],i=new Set,a=new Set;(n||[]).forEach((function(e){i.add(e.call_id)}));for(var o=!1,s=t.output.length-1;s>=0;s--){var l=t.output[s];if("function_call_output"===l.type&&a.add(l.call_id),"message"===l.type&&"assistant"===l.role){var c=l.content.filter((function(e){return"function_call"===e.type}));if(c.length>0){o=!0;for(var u=c.length-1;u>=0;u--){var d=c[u];"function_call"===d.type&&(a.has(d.call_id)||i.has(d.call_id)||r.unshift(d))}}else if(o)break}}return r},kI=function(e){if(!e)return{hasUnfinishedResult:!1,functionCallOutputs:[]};var t=!1;return{functionCallOutputs:e.map((function(e){return"finished"===e.status?{type:"function_call_output",call_id:e.call_id,output:JSON.stringify((0,l.Z)({success:e.success},e.output))}:"ignored"===e.status?{type:"function_call_output",call_id:e.call_id,output:JSON.stringify({ignored:!0,message:"This was marked as ignored by the user."})}:(t=!0,null)})).filter(Boolean),hasUnfinishedResult:t}},wI=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M7.50004 9.33337C7.50004 8.75897 7.62133 8.3179 7.82556 7.95706C8.02491 7.60489 8.28686 7.36064 8.49874 7.16996C8.72526 6.9661 8.87687 6.8355 8.99028 6.6654C9.08917 6.51707 9.16671 6.32278 9.16671 6.00003C9.16671 5.56077 8.99983 5.2639 8.77022 5.06904C8.5297 4.86497 8.19128 4.75003 7.83337 4.75003C7.47547 4.75003 7.13704 4.86497 6.89653 5.06904C6.66692 5.2639 6.50004 5.56076 6.50004 6.00003C6.50004 6.27618 6.27618 6.50003 6.00004 6.50003C5.7239 6.50003 5.50004 6.27618 5.50004 6.00003C5.50004 5.27269 5.79154 4.6945 6.24939 4.30602C6.69636 3.92681 7.27464 3.75003 7.83337 3.75003C8.3921 3.75003 8.97039 3.92681 9.41736 4.30602C9.87521 4.6945 10.1667 5.27269 10.1667 6.00003C10.1667 6.51062 10.0359 6.89968 9.82231 7.22009C9.62323 7.5187 9.35815 7.74232 9.16801 7.91344C8.96324 8.09773 8.80849 8.2494 8.69535 8.44925C8.58712 8.64047 8.50004 8.90782 8.50004 9.33337C8.50001 9.60948 8.27616 9.83337 8.00004 9.83337C7.72392 9.83337 7.50007 9.60948 7.50004 9.33337Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M7.63546 11.6647C7.82023 11.4597 8.13605 11.443 8.34119 11.6276C8.54633 11.8124 8.56306 12.1288 8.3783 12.3339L8.37179 12.3411C8.18697 12.5463 7.87057 12.563 7.66541 12.3782C7.46024 12.1934 7.44348 11.877 7.6283 11.6718L7.63546 11.6647Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M14.1667 8.00004C14.1667 4.59428 11.4058 1.83337 8.00004 1.83337C4.59428 1.83337 1.83337 4.59428 1.83337 8.00004C1.83337 9.12401 2.13389 10.1762 2.65824 11.0827C2.718 11.186 2.73868 11.3079 2.71684 11.4252L2.29171 13.7077L4.57491 13.2832L4.66345 13.2748C4.75193 13.2742 4.83985 13.297 4.91736 13.3418C5.82386 13.8662 6.87608 14.1667 8.00004 14.1667C11.4058 14.1667 14.1667 11.4058 14.1667 8.00004ZM15.1667 8.00004C15.1667 11.958 11.958 15.1667 8.00004 15.1667C6.76239 15.1667 5.59699 14.852 4.58012 14.2989L1.7585 14.8249C1.59647 14.8551 1.42974 14.8034 1.31319 14.6869C1.19665 14.5703 1.145 14.4036 1.17517 14.2416L1.70056 11.4193C1.14763 10.4026 0.833374 9.23737 0.833374 8.00004C0.833374 4.042 4.042 0.833374 8.00004 0.833374C11.958 0.833374 15.1667 4.042 15.1667 8.00004Z",fill:"currentColor"})]}))})),TI=n(68789),SI="ChatBubble_chatBubbleContainer__7JSe1",PI="ChatBubble_chatBubbleContent__et-z5",II={chatBubble:{paddingTop:5,paddingLeft:16,paddingRight:16,paddingBottom:5},assistantChatBubbleLight:{background:"linear-gradient(90deg, #F5F5F7 77%, #EAE3FF 100%)"},assistantChatBubbleDark:{background:"linear-gradient(90deg, #25252E 0%, #312442 100%)"},avatar:{width:20,height:20}},EI=function(e){var t=e.children,n=e.feedbackButtons,r=e.role,i="light"===c.useContext(j.Z).palette.type,a=c.useContext($n.ZP),o=c.useMemo((function(){var e=a.profile&&a.profile.email||"";return(0,oo.y)(e,{size:40})}),[a]);return(0,f.jsxs)("div",{className:SI,children:[(0,f.jsxs)(H.Z,{background:"user"===r?"light":"medium",style:(0,l.Z)((0,l.Z)({},II.chatBubble),"assistant"===r?i?II.assistantChatBubbleLight:II.assistantChatBubbleDark:{}),children:[(0,f.jsx)("div",{className:PI,children:t}),n]}),"user"===r&&(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"flex-end",alignItems:"center",children:(0,f.jsx)(ao.Z,{src:o,style:II.avatar})})]})},MI=n(15092),LI=n(62407),AI="ChatMarkdownText_conceptLink__CrwU7",OI="ChatMarkdownText_noValidLink__b0AyA",RI="ChatMarkdownText_chatMarkdown__JVhzH";function FI(e){var t=new Map,n=new WeakMap;return function(r){var i=function(e){return"object"===typeof e?n:t}(r),a=i.get(r);if(a)return a;var o=e(r);return i.set(r,o),o}}var DI=n.g.gd,NI=function(e){switch(e){case"Action":return(0,f.jsx)(w.Trans,{id:"This is an action."});case"Condition":return(0,f.jsx)(w.Trans,{id:"This is a condition."});case"Event":return(0,f.jsx)(w.Trans,{id:"This is an event."});case"Expression":return(0,f.jsx)(w.Trans,{id:"This is an expression."});case"Object":return(0,f.jsx)(w.Trans,{id:"This is an object."});case"Behavior":return(0,f.jsx)(w.Trans,{id:"This is a behavior."});case"Extension":return(0,f.jsx)(w.Trans,{id:"This is an extension."});default:return null}},_I=function(e){var t=e.conceptMetadata;return t?(0,f.jsxs)(f.Fragment,{children:[t.iconSrc&&(0,f.jsx)(Hr.q,{alt:"",src:t.iconSrc,size:16}),t.name]}):null},BI=function(e){return e.parentObject?(0,f.jsx)(w.Trans,{id:"It is part of object <0/> from extension <1/>.",components:[(0,f.jsx)(UI,{forceNoLink:!0,conceptMetadata:e.parentObject}),(0,f.jsx)(UI,{forceNoLink:!0,conceptMetadata:e.parentObject.parentExtension})]}):e.parentBehavior?(0,f.jsx)(w.Trans,{id:"It is part of behavior <0/> from extension <1/>.",components:[(0,f.jsx)(UI,{forceNoLink:!0,conceptMetadata:e.parentBehavior}),(0,f.jsx)(UI,{forceNoLink:!0,conceptMetadata:e.parentBehavior.parentExtension})]}):e.parentExtension?(0,f.jsx)(w.Trans,{id:"It is part of extension <0/> {0} .",values:{0:e.parentExtension.alreadyAvailableInProject?(0,f.jsx)(w.Trans,{id:"(already installed in the project)"}):(0,f.jsx)(w.Trans,{id:"(install it from the Project Manager)"})},components:[(0,f.jsx)(UI,{forceNoLink:!0,conceptMetadata:e.parentExtension})]}):null},UI=function(e){var t,n=e.conceptMetadata,r=e.forceNoLink;if(!n)return null;var i=r?"":(0,fp.vA)(n.helpPath),a=BI(n);return(0,f.jsx)(re.ZP,{title:[(0,f.jsx)(N.Z,{color:"inherit",children:(0,f.jsx)("b",{children:NI(n.kind)})},"kind"),void 0!==n.alreadyAvailableInProject?(0,f.jsx)(N.Z,{color:"inherit",children:n.alreadyAvailableInProject?(0,f.jsx)(w.Trans,{id:"It is already installed/available in the project."}):(0,f.jsx)(w.Trans,{id:"You can install it from the Project Manager."})},"alreadyAvailableInProject"):null,a?(0,f.jsx)(N.Z,{color:"inherit",children:a},"parent"):null,(0,f.jsx)(Re.r,{source:n.description},"description")],placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-10"}}},children:(0,f.jsx)("a",{className:en()((t={},(0,Qt.Z)(t,AI,!0),(0,Qt.Z)(t,OI,!i),t)),href:i,onClick:function(e){e.preventDefault(),y.ZP.openExternalURL(i)},children:(0,f.jsx)(_I,{conceptMetadata:n})})})},VI=function(e,t){var n=t.split("::"),r=n[0]||"",i=n[1]||"",a=n[2]||"",o=e[r];if(!o)return{extensionShortHeader:null,eventsBasedBehavior:null,eventsBasedObject:null,eventsFunction:null};var s=function(e,t){return e.find((function(e){return e.name===t}))||null},l=(o.eventsBasedObjects||[]).find((function(e){return e.name===i}));if(l)return{extensionShortHeader:o,eventsBasedObject:l,eventsBasedBehavior:null,eventsFunction:s(l.eventsFunctions,a)};var c=(o.eventsBasedBehaviors||[]).find((function(e){return e.name===i}));return c?{extensionShortHeader:o,eventsBasedObject:null,eventsBasedBehavior:c,eventsFunction:s(c.eventsFunctions,a)}:{extensionShortHeader:o,eventsBasedBehavior:null,eventsBasedObject:null,eventsFunction:s(o.eventsFunctions||[],i)}},HI=["inline","children"],zI=["node"];var WI=c.memo((function(e){var t=function(){var e=c.useContext(Nr.H).translatedExtensionShortHeadersByName,t=(0,jn.B)((function(){return FI((function(t){var n=DI.JsPlatform.get().getAllPlatformExtensions(),r=(0,mt.mapFor)(0,n.size(),(function(e){var r=n.at(e);return r.getName()===t?r:null})).filter(Boolean)[0]||null;if(r)return{kind:"Extension",name:r.getFullName(),description:r.getDescription(),iconSrc:r.getIconUrl(),helpPath:r.getHelpPath(),alreadyAvailableInProject:!0};var i=e[t];return i?{kind:"Extension",name:i.fullName,description:i.shortDescription,iconSrc:i.previewIconUrl,helpPath:i.helpPath,alreadyAvailableInProject:!1}:null}))})).current,n=(0,jn.B)((function(){return FI((function(n){var r=function(e,t){var n=t.split("::"),r=n[0]||"",i=n[1]||"",a=e[r];return a?{extensionShortHeader:a,eventsBasedObject:(a.eventsBasedObjects||[]).find((function(e){return e.name===i}))}:{extensionShortHeader:null,eventsBasedObject:null}}(e,n),i=r.extensionShortHeader,a=r.eventsBasedObject;if(i&&a)return{kind:"Object",name:a.fullName,description:a.description,iconSrc:i.previewIconUrl,helpPath:i.helpPath,parentExtension:t(i.name)};var o=DI.MetadataProvider.getExtensionAndObjectMetadata(DI.JsPlatform.get(),n),s=o.getExtension(),l=o.getMetadata();return DI.MetadataProvider.isBadObjectMetadata(l)?null:{kind:"Object",name:l.getFullName(),description:l.getDescription(),iconSrc:l.getIconFilename(),helpPath:(0,fp.vA)(l.getHelpPath()),parentExtension:t(s.getName())}}))})).current,r=(0,jn.B)((function(){return FI((function(n){var r=function(e,t){var n=t.split("::"),r=n[0]||"",i=n[1]||"",a=e[r];return a?{extensionShortHeader:a,eventsBasedBehavior:(a.eventsBasedBehaviors||[]).find((function(e){return e.name===i}))}:{extensionShortHeader:null,eventsBasedBehavior:null}}(e,n),i=r.extensionShortHeader,a=r.eventsBasedBehavior;if(i&&a)return{kind:"Behavior",name:a.fullName,description:a.description,iconSrc:i.previewIconUrl,helpPath:i.helpPath,parentExtension:t(i.name)};var o=DI.MetadataProvider.getExtensionAndBehaviorMetadata(DI.JsPlatform.get(),n),s=o.getExtension(),l=o.getMetadata();return DI.MetadataProvider.isBadBehaviorMetadata(l)?null:{kind:"Behavior",name:l.getFullName(),description:l.getDescription(),iconSrc:l.getIconFilename(),helpPath:(0,fp.vA)(l.getHelpPath()),parentExtension:t(s.getName())}}))})).current,i=(0,jn.B)((function(){return FI((function(i){var a=VI(e,i),o=a.extensionShortHeader,s=a.eventsBasedBehavior,l=a.eventsBasedObject,c=a.eventsFunction;if(o&&c)return{kind:"Action",name:c.fullName,description:c.description,iconSrc:o.previewIconUrl,helpPath:o.helpPath,parentBehavior:s?r(o.name+"::"+s.name):null,parentObject:l?n(o.name+"::"+l.name):null,parentExtension:t(o.name)};var u=DI.MetadataProvider.getActionMetadata(DI.JsPlatform.get(),i);return DI.MetadataProvider.isBadInstructionMetadata(u)?null:{kind:"Action",name:u.getFullName(),description:u.getDescription(),iconSrc:u.getSmallIconFilename(),helpPath:(0,fp.vA)(u.getHelpPath())}}))})).current,a=(0,jn.B)((function(){return FI((function(i){var a=VI(e,i),o=a.extensionShortHeader,s=a.eventsBasedBehavior,l=a.eventsBasedObject,c=a.eventsFunction;if(o&&c)return{kind:"Condition",name:c.fullName,description:c.description,iconSrc:o.previewIconUrl,helpPath:o.helpPath,parentBehavior:s?r(o.name+"::"+s.name):null,parentObject:l?n(o.name+"::"+l.name):null,parentExtension:t(o.name)};var u=DI.MetadataProvider.getConditionMetadata(DI.JsPlatform.get(),i);return DI.MetadataProvider.isBadInstructionMetadata(u)?null:{kind:"Condition",name:u.getFullName(),description:u.getDescription(),iconSrc:u.getSmallIconFilename(),helpPath:(0,fp.vA)(u.getHelpPath())}}))})).current;return{getConceptMetadataFromHref:c.useCallback((function(e){return e.startsWith("action:")?i(e.replace("action:","")):e.startsWith("condition:")?a(e.replace("condition:","")):e.startsWith("object_type:")?n(e.replace("object_type:","")):e.startsWith("behavior_type:")?r(e.replace("behavior_type:","")):e.startsWith("extension:")?t(e.replace("extension:","")):null}),[i,r,a,n,t])}}(),n=t.getConceptMetadataFromHref,r=c.useMemo((function(){return function(e){var t=e.getConceptMetadataFromHref;return function(e){var n=e.node&&e.node.properties&&e.node.properties.href||"",r=e.href||"",i=t(n);if(i)return(0,f.jsx)(UI,{conceptMetadata:i});var a=r&&r.startsWith("/gdevelop5/")?(0,fp.vA)(r.replace("/gdevelop5/","/")):r;return a&&"javascript:void(0)"!==a?(0,f.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.preventDefault(),y.ZP.openExternalURL(a)},children:e.children}):e.children}}({getConceptMetadataFromHref:n})}),[n]),i=c.useMemo((function(){return function(e){var t=e.renderChatLink;return function(e){var n=e.inline,r=e.children,i=(0,go.Z)(e,HI);if(n)return(0,f.jsx)("code",(0,l.Z)((0,l.Z)({},i),{},{children:r}));var a=function(e){for(var t,n=e.text,r=e.renderLink,i=/\[([^\]]+)\]\(([^)]+)\)/g,a=[],o=0;t=i.exec(n);){t.index>o&&a.push(n.slice(o,t.index));var s=t[1],l=t[2];a.push(r({children:s,node:{properties:{href:l}}})),o=i.lastIndex}return o<n.length&&a.push(n.slice(o)),a}({text:String(r),renderLink:t});return(0,f.jsx)("code",(0,l.Z)((0,l.Z)({},i),{},{children:a}))}}({renderChatLink:r})}),[r]),a=c.useMemo((function(){return{a:r,code:i,img:function(e){e.node;var t=(0,go.Z)(e,zI);return(0,f.jsx)("img",(0,l.Z)({style:{display:"flex"}},t))}}}),[r,i]),o=(0,f.jsx)(w.I18n,{children:function(t){t.i18n;return(0,f.jsx)(MI.D,{components:a,remarkPlugins:[LI.Z],children:e.source})}}),s=en()((0,Qt.Z)({"gd-markdown":!0},RI,!0));return(0,f.jsx)("span",{className:s,children:o})})),GI=n(66789),YI="FunctionCallRow_functionCallContainer__iGSww",qI="FunctionCallRow_detailsButtonContainer__4BQSU",JI="FunctionCallRow_detailsPaperContainer__bFYBU",XI=n.g.gd,KI=function e(t){var n=t.instructionsList,r=t.padding,i=t.areConditions;return 0===n.size()?"".concat(r,i?"(no conditions)":"(no actions)"):(0,mt.mapFor)(0,n.size(),(function(t){var a=n.get(t),o=function(e){var t=e.isInverted()?"(inverted) ":"",n=i?XI.MetadataProvider.getConditionMetadata(XI.JsPlatform.get(),e.getType()):XI.MetadataProvider.getActionMetadata(XI.JsPlatform.get(),e.getType()),a=XI.InstructionSentenceFormatter.get().getAsFormattedText(e,n),o=(0,mt.mapFor)(0,a.size(),(function(e){return a.getString(e)})).join("");return{text:"".concat(r,"- ").concat([t,o].filter(Boolean).join("")),canHaveSubInstructions:n.canHaveSubInstructions()}}(a);return[o.text,o.canHaveSubInstructions?e({instructionsList:a.getSubInstructions(),padding:r+"  ",areConditions:i}):""].filter(Boolean).join("\n")})).join("\n")},QI={"BuiltinCommonInstructions::Standard":function(e){var t=e.event,n=e.padding,r=XI.asStandardEvent(t),i=KI({instructionsList:r.getConditions(),padding:n,areConditions:!0}),a=KI({instructionsList:r.getActions(),padding:n,areConditions:!1});return"".concat(n,"Conditions:\n").concat(i,"\n").concat(n,"Actions:\n").concat(a)},"BuiltinCommonInstructions::Comment":function(e){e.event;var t=e.padding;return"".concat(t,"(comment - content is not displayed)")},"BuiltinCommonInstructions::While":function(e){var t=e.event,n=e.padding,r=XI.asWhileEvent(t),i=KI({instructionsList:r.getWhileConditions(),padding:n+" ",areConditions:!0}),a=KI({instructionsList:r.getConditions(),padding:n+" ",areConditions:!0}),o=KI({instructionsList:r.getActions(),padding:n+" ",areConditions:!1});return"".concat(n,"While these conditions are true:\n").concat(i,"\n").concat(n,"Then do:\n").concat(n,"Conditions:\n").concat(a,"\n").concat(n,"Actions:\n").concat(o)},"BuiltinCommonInstructions::Repeat":function(e){var t=e.event,n=e.padding,r=XI.asRepeatEvent(t),i=KI({instructionsList:r.getConditions(),padding:n+" ",areConditions:!0}),a=KI({instructionsList:r.getActions(),padding:n+" ",areConditions:!1});return"".concat(n,"Repeat `").concat(r.getRepeatExpression().getPlainString(),"` times these:\n").concat(n,"Conditions:\n").concat(i,"\n").concat(n,"Actions:\n").concat(a)},"BuiltinCommonInstructions::ForEach":function(e){var t=e.event,n=e.padding,r=XI.asForEachEvent(t),i=KI({instructionsList:r.getConditions(),padding:n+" ",areConditions:!0}),a=KI({instructionsList:r.getActions(),padding:n+" ",areConditions:!1});return"".concat(n,"Repeat these separately for each instance of ").concat(r.getObjectToPick(),":\n").concat(n,"Conditions:\n").concat(i,"\n").concat(n,"Actions:\n").concat(a)},"BuiltinCommonInstructions::ForEachChildVariable":function(e){var t=e.event,n=e.padding,r=XI.asForEachChildVariableEvent(t),i=r.getValueIteratorVariableName(),a=r.getKeyIteratorVariableName(),o=r.getIterableVariableName(),s=KI({instructionsList:r.getConditions(),padding:n+" ",areConditions:!0}),l=KI({instructionsList:r.getActions(),padding:n+" ",areConditions:!1});return"".concat(n,"For each child in `").concat(o||"(no variable chosen yet)","`, store the child in variable `").concat(i||"(ignored)","`, the child name in `").concat(a||"(ignored)","` and do:\n").concat(n,"Conditions:\n").concat(n).concat(s,"\n").concat(n,"Actions:\n").concat(n).concat(l)},"BuiltinCommonInstructions::Group":function(e){var t=e.event,n=e.padding,r=XI.asGroupEvent(t);return"".concat(n,'Group called "').concat(r.getName(),'":')},"BuiltinCommonInstructions::Link":function(e){var t=e.event,n=e.padding;return"".concat(n,'(link to events in events sheet called "').concat(t.getTarget(),'")')}},$I=function e(t){if(t.getType()===XI.Variable.String)return t.getString();if(t.getType()===XI.Variable.Number)return t.getValue();if(t.getType()===XI.Variable.Boolean)return t.getBool();if(t.getType()===XI.Variable.Structure){var n=t.getAllChildrenNames().toJSArray(),r={};return n.forEach((function(n){r[n]=e(t.getChild(n))})),r}if(t.getType()===XI.Variable.Array){var i=t.getAllChildrenArray();return(0,mt.mapVector)(i,(function(t){return e(t)}))}return t.getValue()},eE=function(e){var t=e.variables,n=e.padding;return(0,mt.mapFor)(0,t.count(),(function(e){var r=t.getAt(e),i=t.getNameAt(e);return"".concat(n,'- Declare local variable "').concat(i,'" of type "').concat(XI.Variable.typeAsString(r.getType()),'" with value `').concat(JSON.stringify($I(r)),"`")})).join("\n")},tE=function(e){var t=e.event,n=e.padding,r=e.eventPath;if(t.isDisabled())return"".concat(n,"(This event is disabled - ignored)");var i=t.canHaveVariables()&&t.hasVariables()?eE({variables:t.getVariables(),padding:n}):"",a=QI[t.getType()],o=a?[i,a({event:t,padding:n})].filter(Boolean).join("\n\n"):"".concat(n,"(This event is unknown/unsupported - ignored)"),s="";return t.canHaveSubEvents()&&(s=nE({eventsList:t.getSubEvents(),parentPath:r,padding:n+" "})),o+(s?"\n".concat(n,"Sub-events:\n").concat(s):"")},nE=function(e){var t=e.eventsList,n=e.parentPath,r=e.padding;return(0,mt.mapFor)(0,t.getEventsCount(),(function(e){var i=t.getEventAt(e),a=(n?n+".":"")+e,o=tE({event:i,eventPath:a,padding:r+" "});return"".concat(r,"<event-").concat(a,">\n").concat(o,"\n").concat(r,"</event-").concat(a,">")})).join("\n")},rE=function(e){var t=e.eventsList,n=XI.getTranslation;XI.getTranslation=function(e){return e};var r="";try{r=nE({eventsList:t,parentPath:"",padding:""})}catch(i){console.error("Error while rendering events as text:",i),r="Error while rendering events as text."}finally{XI.getTranslation=n}return r},iE=n.g.gd,aE=function(e,t,n){if(0===t.length)throw new Error("Path cannot be empty for getParentListAndIndex.");for(var r=e,i=t.join("."),a=0;a<t.length-1;a++){var o=t[a];if(o<0||o>=r.getEventsCount())throw new Error("Invalid event path: index ".concat(o," out of bounds at depth ").concat(a+1," (max: ").concat(r.getEventsCount()-1,"). Path: ").concat(i));var s=r.getEventAt(o);if(!s.canHaveSubEvents())throw new Error("Event at path segment ".concat(a+1," (index ").concat(o,") cannot have sub-events. Path: ").concat(i));r=s.getSubEvents()}var l=t[t.length-1];if(l<0)throw new Error("Invalid event path: final index ".concat(l," is negative. Path: ").concat(i,"."));if("insertion"===n&&l>r.getEventsCount())throw new Error("Invalid event path for insertion: final index ".concat(l," is out of bounds. Max allowed for insertion: ").concat(r.getEventsCount(),". Path: ").concat(i));if("access"===n&&l>=r.getEventsCount())throw new Error("Invalid event path for access: final index ".concat(l," is out of bounds. Max allowed for access: ").concat(r.getEventsCount()-1,". Path: ").concat(i));return{parentList:r,eventIndexInParentList:l}},oE=function(e,t,n,r){var i=[];n.forEach((function(n){var a=n.operationName,o=n.operationTargetEvent,s=n.generatedEvents,l=null,c=null;try{if(o)l=function(e){var t=e;if(e.startsWith("event-"))e=e.substring(6);else{var n=e.split(".");if(!(n.length>0&&n.every((function(e){return""!==e&&!isNaN(parseInt(e,10))}))))throw new Error('Invalid event path string format: "'.concat(t,'". Expected "event-X.Y.Z" or "X.Y.Z".'));console.warn('Event path string "'.concat(t,'" does not start with "event-". Parsed as direct indices.'))}var r=e.split(".");if(0===r.length||r.some((function(e){return""===e||isNaN(parseInt(e,10))})))throw new Error('Invalid event path string content: "'.concat(t,'". Ensure numbers are separated by dots.'));return r.map((function(e){var n=parseInt(e,10);if(n<0)throw new Error('Event path indices must be positive in string "'.concat(t,'", but found ').concat(n,"."));return n}))}(o);else if("insert_at_end"!==a)return void console.warn('Skipping operation "'.concat(a,'" due to missing operationTargetEvent path.'));if(s&&"delete_event"!==a){var u=JSON.parse(s);c=new iE.EventsList,(0,Ct.qx)(c,u,"unserializeFrom",e),c.isEmpty()&&console.warn('Generated events for operation "'.concat(a,'" (path: ').concat(o||"N/A",") are empty. Insertion might not add any events.")),(0,mt.mapFor)(0,c.getEventsCount(),(function(e){c&&c.getEventAt(e).setAiGeneratedEventId(r)}))}switch(a){case"insert_and_replace_event":if(!l)return console.warn('Skipping "insert_and_replace_event" due to missing or invalid path.'),void(c&&c.delete());i.push({type:"delete",path:l}),i.push({type:"insert",path:l,eventsToInsert:c||void 0});break;case"insert_before_event":if(!l)return console.warn('Skipping "insert_before_event" due to missing or invalid path.'),void(c&&c.delete());i.push({type:"insert",path:l,eventsToInsert:c||void 0});break;case"insert_as_sub_event":if(!l)return console.warn('Skipping "insert_as_sub_event" due to missing or invalid path.'),void(c&&c.delete());i.push({type:"insertAsSub",path:l,eventsToInsert:c||void 0});break;case"delete_event":if(!l)return void console.warn('Skipping "delete_event" due to missing or invalid path.');c&&(console.warn('Internal warning: localEventsToInsert was populated for a "delete_event". Cleaning up.'),c.delete()),i.push({type:"delete",path:l});break;case"insert_at_end":i.push({type:"insert",path:[t.getEventsCount()],eventsToInsert:c||void 0});break;default:console.warn('Unknown operationName: "'.concat(a,'". Skipping operation.')),c&&c.delete()}}catch(VM){console.warn('Error processing event change (operation: "'.concat(a,'", path: "').concat(o||"N/A",'"): ').concat(VM.message,". Skipping this change.")),c&&c.delete()}})),i.sort((function(e,t){var n=function(e,t){for(var n=Math.max(e.length,t.length),r=0;r<n;r++){var i=r<e.length?e[r]:-1,a=r<t.length?t[r]:-1;if(i>a)return-1;if(i<a)return 1}return 0}(e.path,t.path);return 0!==n?n:"delete"===e.type&&"delete"!==t.type?-1:"delete"!==e.type&&"delete"===t.type?1:0})),i.forEach((function(e){var n=e.path.join(".");try{if("delete"===e.type){var r=aE(t,e.path,"access"),i=r.parentList,a=r.eventIndexInParentList;i.removeEventAt(a)}else if("insert"===e.type){var o=aE(t,e.path,"insertion"),s=o.parentList,l=o.eventIndexInParentList;e.eventsToInsert&&!e.eventsToInsert.isEmpty()?s.insertEvents(e.eventsToInsert,0,e.eventsToInsert.getEventsCount(),l):console.warn("Insert operation for path [".concat(n,"] skipped: no events to insert or events list is empty."))}else if("insertAsSub"===e.type){var c=function(e,t){var n=aE(e,t,"access"),r=n.parentList,i=n.eventIndexInParentList;return r.getEventAt(i)}(t,e.path);if(!c.canHaveSubEvents())return void console.warn("Cannot insert sub-events: Event at path [".concat(n,"] does not support sub-events. Skipping."));var u=c.getSubEvents();e.eventsToInsert&&!e.eventsToInsert.isEmpty()?u.insertEvents(e.eventsToInsert,0,e.eventsToInsert.getEventsCount(),u.getEventsCount()):console.warn("InsertAsSub operation for parent path [".concat(n,"] skipped: no events to insert or events list is empty."))}}catch(d){console.error("Error applying event operation type ".concat(e.type," for path [").concat(n,"]:"),d)}finally{e.eventsToInsert&&e.eventsToInsert.delete()}}))},sE=function(e){var t=e.project,n=e.scene;e.undeclaredVariables.forEach((function(e){var r=e.name,i=e.type,a=e.requiredScope,o=null;if("global"===a?t.getVariables().has(r)||(o=t.getVariables().insertNew(r,0)):"scene"===a||"none"===a?n.getVariables().has(r)||(o=n.getVariables().insertNew(r,0)):console.warn("Unknown requiredScope for undeclared variable: ".concat(r,". Skipping.")),o&&i){var s=i.toLowerCase();o.castTo("string"===s?"String":"boolean"===s?"Boolean":"array"===s?"Array":"structure"===s?"Structure":"Number")}}))},lE=function(e){var t=e.project,n=e.scene,r=e.objectName,i=e.undeclaredVariables,a=iE.ProjectScopedContainers.makeNewProjectScopedContainersForProjectAndLayout(t,n),o=function(e,t){if(t){var n=t.toLowerCase();e.castTo("string"===n?"String":"boolean"===n?"Boolean":"array"===n?"Array":"structure"===n?"Structure":"Number")}},s=function(e,r){var i=iE.ObjectVariableHelper.mergeVariableContainers(a.getObjectsContainersList(),e),s=new iE.SerializerElement;i.serializeTo(s);var l=i.insertNew(r.name,0);o(l,r.type);var c=iE.WholeProjectRefactorer.computeChangesetForVariablesContainer(s,i);s.delete(),iE.WholeProjectRefactorer.applyRefactoringForGroupVariablesContainer(t,t.getObjects(),n.getObjects(),n.getInitialInstances(),i,e,c,s)};i.forEach((function(e){if(!a.getObjectsContainersList().hasObjectOrGroupWithVariableNamed(r,e.name))if(n.getObjects().hasObjectNamed(r)){var i=n.getObjects().getObject(r).getVariables().insertNew(e.name,0);o(i,e.type)}else if(n.getObjects().getObjectGroups().has(r)){var l=n.getObjects().getObjectGroups().get(r);s(l,e)}else if(t.getObjects().hasObjectNamed(r)){var c=t.getObjects().getObject(r).getVariables().insertNew(e.name,0);o(c,e.type)}else if(t.getObjects().getObjectGroups().has(r)){var u=t.getObjects().getObjectGroups().get(r);s(u,e)}}))},cE=function(e){var t=e.project,n=e.scene,r=e.objectName,i=e.missingBehaviors,a=iE.ProjectScopedContainers.makeNewProjectScopedContainersForProjectAndLayout(t,n).getObjectsContainersList().getBehaviorsOfObject(r,!0).toJSArray(),o=function(e,n,r){e.hasBehaviorNamed(n)||iE.WholeProjectRefactorer.addBehaviorAndRequiredBehaviors(t,e,r,n)},s=function(e,r,i){e.getAllObjectsNames().toJSArray().forEach((function(e){if(n.getObjects().hasObjectNamed(e)){var a=n.getObjects().getObject(e);o(a,r,i)}else if(t.getObjects().hasObjectNamed(e)){var s=t.getObjects().getObject(e);o(s,r,i)}}))};i.forEach((function(e){if(!a.includes(e.name)){var i=iE.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),e.type);if(iE.MetadataProvider.isBadBehaviorMetadata(i))console.warn('Unknown behavior type: "'.concat(e.type,'". Skipping.'));else if(Zh(i))console.warn('Behavior "'.concat(e.name,'" of type "').concat(e.type,'" is a default capability and cannot be added to object "').concat(r,'".'));else if(n.getObjects().hasObjectNamed(r)){var l=n.getObjects().getObject(r);o(l,e.name,e.type)}else if(n.getObjects().getObjectGroups().has(r)){var c=n.getObjects().getObjectGroups().get(r);s(c,e.name,e.type)}else if(t.getObjects().hasObjectNamed(r)){var u=t.getObjects().getObject(r);o(u,e.name,e.type)}else if(t.getObjects().getObjectGroups().has(r)){var d=t.getObjects().getObjectGroups().get(r);s(d,e.name,e.type)}}})),n.updateBehaviorsSharedData(t)},uE=n.g.gd,dE=function e(t,n){if(null===t)n.setString("null");else if(void 0===t)n.setString("undefined");else if("number"===typeof t)n.setValue(t||0);else if("string"===typeof t)n.setString(t);else if("boolean"===typeof t)n.setBool(t);else if(Array.isArray(t)){n.castTo("Array"),n.clearChildren();var r,a=(0,i.Z)(t);try{for(a.s();!(r=a.n()).done;){e(r.value,n.pushNew())}}catch(d){a.e(d)}finally{a.f()}}else if("object"===typeof t){n.castTo("Structure"),n.clearChildren();for(var o=0,l=Object.entries(t);o<l.length;o++){var c=(0,s.Z)(l[o],2),u=c[0];e(c[1],n.getChild(u))}}},pE=function(e){var t=e.variablePath,n=e.forcedVariableType,r=e.variablesContainer,i=e.value,a=function(e){for(var t=[],n="",r=0;r<e.length;){var i=e[r];if("."===i)n.trim()&&(t.push({type:"property",value:n.trim()}),n=""),r++;else if("["===i){n.trim()&&(t.push({type:"property",value:n.trim()}),n=""),r++;for(var a="",o=!1;r<e.length&&"]"!==e[r];)a+=e[r],r++;if(r<e.length&&"]"===e[r]){var s=a.trim();if(!s||isNaN(parseInt(s,10)))throw new Error('Content of the index is invalid ("'.concat(s,'") - it should be a number.'));t.push({type:"index",value:s}),o=!0,r++}if(!o)throw new Error("Improperly formatted array index. Please check the variable path - it should be formatted like this: `myVar[1].prop`, `myVar`, `myVar.prop`, etc...")}else n+=i,r++}return n.trim()&&t.push({type:"property",value:n.trim()}),t}(t);if(0===a.length)throw new Error("Invalid variable path");var o=!1,s=a[0];if("property"!==s.type)throw new Error("Variable path must start with a property name");var l=s.value,c=null;r.has(l)?c=r.get(l):(c=r.insertNew(l,0),o=!0);for(var u=1;u<a.length;u++){var d=a[u];if("property"===d.type)c.castTo("Structure"),c.hasChild(d.value)||(o=!0),c=c.getChild(d.value);else if("index"===d.type){var p=parseInt(d.value,10);for(c.castTo("Array");c.getChildrenCount()<=p;)c.pushNew(),o=!0;c=c.getAtIndex(p)}}var f=function(e){try{var t=JSON.parse(e);return Array.isArray(t)||"object"===typeof t?t:null}catch(n){return null}}(i);if(f)return dE(f,c),{variable:c,variableType:c.getType()===uE.Variable.Array?"Array":"Structure",addedNewVariable:o};var h=function(e,t){if(e){var n=e.toLowerCase();if("string"===n)return"String";if("number"===n)return"Number";if("boolean"===n)return"Boolean"}if("true"===t.toLowerCase()||"false"===t.toLowerCase())return"Boolean";var r=Number(t);return Number.isNaN(r)?"String":"Number"}(n,i);return"String"===h?c.setString(i):"Number"===h?c.setValue(parseFloat(i)):"Boolean"===h&&c.setBool("true"===i.toLowerCase()),{variable:c,variableType:h,addedNewVariable:o}},fE=n(997),hE=n(8462),gE=n.g.gd,mE=function(e,t){var n=bt.$.extractStringProperty(e,t);if(null===n)throw new Error("Missing or invalid required string argument: ".concat(t));return n},xE=function(e){return{success:!1,message:e}},vE=function(e){return{success:!0,message:e}},bE=function(e,t){return 0===e.length&&0===t.length?{success:!1,message:"No changes were made."}:0===e.length&&t.length>0?{success:!1,message:["No changes were made because of these issues:"].concat((0,r.Z)(t)).join("\n")}:e.length>0&&0===t.length?{success:!0,message:["Successfully done the changes."].concat((0,r.Z)(e)).join("\n")}:{success:!0,message:["Successfully done some changes but some issues were found - see the warnings."].concat((0,r.Z)(e),(0,r.Z)(t)).join("\n")}},CE=function(e){return e.isHidden()||e.isDeprecated()||"Behavior"===e.getType()},jE=function(e,t){return(0,l.Z)((0,l.Z)({name:e},(0,Ct.XH)(t)),{},{group:void 0,quickCustomizationVisibility:void 0,advanced:void 0})},yE=function(e){var t=e.properties,n=e.name;if(!t)return{foundProperty:null,foundPropertyName:null};var r=t.keys().toJSArray().find((function(e){return e.toLowerCase()===n.toLowerCase()}))||null;return{foundProperty:r?t.get(r):null,foundPropertyName:r}},ZE=function(e,t){if(e&&"boolean"===e.getType().toLowerCase()){var n=t.toLowerCase();return"true"===n||"yes"===n||"1"===n?"1":"0"}return t},kE=function(e,t){var n=t.getType(),i=t.getMeasurementUnit(),a=i.isUndefined()?null:i.getName(),o=t.getValue();if("number"===n.toLowerCase())return"".concat(e,": ").concat(o," ").concat(a?"(".concat(a,")"):"");var s="choice"===n.toLowerCase()?[].concat((0,r.Z)((0,mt.mapVector)(t.getChoices(),(function(e){return e.getValue()}))),(0,r.Z)(t.getExtraInfo().toJSArray())):null,l=[n,s?"one of: [".concat(s.map((function(e){return'"'.concat(e,'"')})).join(", "),"]"):null,a].filter(Boolean);return"".concat(e,": ").concat(o," (").concat(l.join(", "),")")},wE=function(e){return e.map((function(e){var t=bt.$.extractStringProperty(e,"property_name"),n=bt.$.extractStringProperty(e,"new_value");return null===t||null===n?null:{label:t,newValue:n}})).filter(Boolean)},TE={renderForEditor:function(e){var t=e.args,n=e.editorCallbacks,r=mE(t,"scene_name"),i=mE(t,"object_name"),a=bt.$.extractBooleanProperty(t,"replace_existing_object"),o=bt.$.extractStringProperty(t,"duplicated_object_name");return{text:a?(0,f.jsx)(w.Trans,{id:"Replace object <0>{object_name}</0> in scene <1>{scene_name}</1>.",values:{object_name:i,scene_name:r},components:[(0,f.jsx)("b",{}),(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return n.onOpenLayout(r,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}})]}):o?(0,f.jsx)(w.Trans,{id:"Duplicate object <0>{duplicatedObjectName}</0> as <1>{object_name}</1> in scene <2>{scene_name}</2>.",values:{duplicatedObjectName:o,object_name:i,scene_name:r},components:[(0,f.jsx)("b",{}),(0,f.jsx)("b",{}),(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return n.onOpenLayout(r,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}})]}):(0,f.jsx)(w.Trans,{id:"Create object <0>{object_name}</0> in scene <1>{scene_name}</1>.",values:{object_name:i,scene_name:r},components:[(0,f.jsx)("b",{}),(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return n.onOpenLayout(r,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}})]})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,s,l,c,u,d,p,f,h,g,m,x,v,b,C,j,y,Z,k,w,T,S;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,s=t.ensureExtensionInstalled,l=t.searchAndInstallAsset,c=t.onObjectsModifiedOutsideEditor,u=t.onWillInstallExtension,d=t.onExtensionInstalled,p=mE(r,"scene_name"),f=mE(r,"object_type"),h=mE(r,"object_name"),g=bt.$.extractStringProperty(r,"target_object_scope"),m=bt.$.extractBooleanProperty(r,"replace_existing_object"),x=bt.$.extractStringProperty(r,"duplicated_object_name"),v=bt.$.extractStringProperty(r,"description"),b=bt.$.extractStringProperty(r,"search_terms"),C=bt.$.extractStringProperty(r,"two_dimensional_view_kind"),n.hasLayoutNamed(p)){e.next=12;break}return e.abrupt("return",xE('Scene not found: "'.concat(p,'".')));case 12:if(j=n.getLayout(p),y=j.getObjects(),Z=n.getObjects(),k=function(e){var t=e.getConfiguration().getProperties(),n=t.keys().toJSArray().map((function(e){var n=t.get(e);return CE(n)?null:kE(e,n)})).filter(Boolean);return"It has the following properties: ".concat(n.join(", "),".")},w=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r,i,o,m,x,w,T,S,P,I,E;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!gE.UsedObjectTypeFinder.scanProject(n,f),r=null,i=!1,y.hasObjectNamed(h)?r=y.getObject(h):Z.hasObjectNamed(h)&&(r=Z.getObject(h),i=!0),!r){e.next=11;break}if(r.getType()===f){e.next=9;break}if(!i){e.next=8;break}return e.abrupt("return",xE('Object with name "'.concat(h,'" already exists globally but with a different type ("').concat(f,'").')));case 8:return e.abrupt("return",xE('Object with name "'.concat(h,'" already exists in scene "').concat(p,'" but with a different type ("').concat(f,'").')));case 9:return c({scene:j,isNewObjectTypeUsed:!1}),e.abrupt("return",vE('Object with name "'.concat(h,'" already exists, no need to re-create it.')));case 11:return o="global"===g?Z:y,e.prev=12,e.next=15,l({objectsContainer:o,objectName:h,objectType:f,searchTerms:b||"",description:v||"",twoDimensionalViewKind:C||""});case 15:if(m=e.sent,x=m.status,w=m.message,T=m.createdObjects,"error"!==x){e.next=23;break}return e.abrupt("return",xE("Unable to search and install object (".concat(w,").")));case 23:if("asset-installed"!==x){e.next=31;break}if(c({scene:j,isNewObjectTypeUsed:t}),1!==T.length){e.next=28;break}return S=T[0],e.abrupt("return",vE(['Created (from the asset store) object "'.concat(S.getName(),'" of type "').concat(S.getType(),'" in scene "').concat(p,'".'),k(S)].join(" ")));case 28:return e.abrupt("return",vE("Created (from the asset store) ".concat(T.map((function(e){return'object "'.concat(e.getName(),'" of type "').concat(e.getType(),'"')})).join(", "),' in scene "').concat(p,'".')));case 31:e.next=36;break;case 33:return e.prev=33,e.t0=e.catch(12),e.abrupt("return",xE("An unexpected error happened while search and installing objects (".concat(e.t0.message,").")));case 36:if(!f.includes("::")){e.next=47;break}return P=f.split("::")[0],e.prev=38,e.next=41,s({extensionName:P,onWillInstallExtension:u,onExtensionInstalled:d});case 41:e.next=47;break;case 43:return e.prev=43,e.t1=e.catch(38),console.error('Could not get extension "'.concat(P,'" installed:'),e.t1),e.abrupt("return",xE('Could not install extension "'.concat(P,'" - should you consider trying with another object type?')));case 47:if(I=gE.MetadataProvider.getObjectMetadata(n.getCurrentPlatform(),f),!gE.MetadataProvider.isBadObjectMetadata(I)){e.next=50;break}return e.abrupt("return",xE('Type "'.concat(f,'" does not exist for objects.')));case 50:return E=o.insertNewObject(n,f,h,o.getObjectsCount()),c({scene:j,isNewObjectTypeUsed:t}),e.abrupt("return",vE(['Created a new object (from scratch) called "'.concat(h,'" of type "').concat(f,'" in scene "').concat(p,'".'),k(E)].join(" ")));case 53:case"end":return e.stop()}}),e,null,[[12,33],[38,43]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r,o,s,u,d,m,x,k,T,S,P,I;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,r=null,y.hasObjectNamed(h)?r=y.getObject(h):Z.hasObjectNamed(h)&&(r=Z.getObject(h),t=!0),r){e.next=5;break}return e.abrupt("return",w());case 5:return o=t?Z:y,s="global"===g?Z:o,e.prev=7,u=(0,xt.Z)(h+"Replacement",(function(e){return s.hasObjectNamed(e)})),e.next=11,l({objectsContainer:s,objectName:u,objectType:f,searchTerms:b||"",description:v||"",twoDimensionalViewKind:C||""});case 11:if(d=e.sent,m=d.status,x=d.message,k=d.createdObjects,T=d.assetShortHeader,"error"!==m){e.next=20;break}return e.abrupt("return",xE("Unable to search and install object (".concat(x,").")));case 20:if(!("asset-installed"===m&&k.length>0&&T)){e.next=28;break}(0,hE.j)(n,ty.Z,r,k[0],T),S=(0,i.Z)(k);try{for(S.s();!(P=S.n()).done;)I=P.value,o.removeObject(I.getName())}catch(a){S.e(a)}finally{S.f()}return c({scene:j,isNewObjectTypeUsed:!1}),e.abrupt("return",vE('Replaced object "'.concat(r.getName(),'" by an object from the asset store fitting the search.')));case 28:e.next=33;break;case 30:return e.prev=30,e.t0=e.catch(7),e.abrupt("return",xE("An unexpected error happened while search and installing objects (".concat(e.t0.message,").")));case 33:return e.abrupt("return",xE('Could not find an object in the asset store to replace "'.concat(h,'" in scene "').concat(p,'". Instead, inspect properties of the object and modify it until it matches what you want it to be.')));case 34:case"end":return e.stop()}}),e,null,[[7,30]])})));return function(){return e.apply(this,arguments)}}(),S=function(e){var t=!1,r=null;if(y.hasObjectNamed(e)?r=y.getObject(e):Z.hasObjectNamed(e)&&(r=Z.getObject(e),t=!0),!r)return w();var i="global"===g?Z:t?Z:y,a=(0,Ct.XH)(r),o=i.insertNewObject(n,r.getType(),h,i.getObjectsCount());return(0,Ct.qx)(o,a,"unserializeFrom",n),o.setName(h),c({scene:j,isNewObjectTypeUsed:!1}),vE('Duplicated object "'.concat(e,'" as "').concat(o.getName(),'". The new object "').concat(o.getName(),'" has the same type, behaviors, properties and effects as the one it was duplicated from.'))},!m){e.next=23;break}return e.abrupt("return",T());case 23:if(!x){e.next=27;break}return e.abrupt("return",S(x));case 27:return e.abrupt("return",w());case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},SE={renderForEditor:function(e){var t=e.args,n=e.editorCallbacks,r=mE(t,"scene_name"),i=mE(t,"object_name");return{text:(0,f.jsx)(w.Trans,{id:"Inspecting properties of object <0>{object_name}</0> in scene <1>{scene_name}</1>.",values:{object_name:i,scene_name:r},components:[(0,f.jsx)("b",{}),(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return n.onOpenLayout(r,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}})]})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g,m,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),o=mE(r,"object_name"),n.hasLayoutNamed(i)){e.next=5;break}return e.abrupt("return",xE('Scene not found: "'.concat(i,'".')));case 5:if(s=n.getLayout(i),l=s.getObjects(),c=n.getObjects(),u=null,l.hasObjectNamed(o)?u=l.getObject(o):c.hasObjectNamed(o)&&(u=c.getObject(o)),u){e.next=12;break}return e.abrupt("return",xE('Object not found: "'.concat(o,'" in scene "').concat(i,'", nor in the global objects.')));case 12:return d=u.getConfiguration(),p=d.getProperties(),f=p.keys().toJSArray(),h=f.map((function(e){var t=p.get(e);return CE(t)?null:jE(e,t)})).filter(Boolean),g=u.getAllBehaviorNames().toJSArray().map((function(e){return u?{behaviorName:e,behaviorType:u.getBehavior(e).getTypeName()}:null})).filter(Boolean),m=(0,mt.mapFor)(0,d.getAnimationsCount(),(function(e){return d.getAnimationName(e)||"(animation without name, animation index is: ".concat(e,")")})),x={success:!0,objectName:o,properties:h,behaviors:g,objectPropertiesDeduplicationKey:[i,o].filter(Boolean).join("-")},m.length>0&&(x.animationNames=m.join(", ")),e.abrupt("return",x);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},PE=function(e){return"name"===e.toLowerCase()||"objectname"===e.toLowerCase().replace(/-|_| /,"")},IE={renderForEditor:function(e){var t=e.project,n=e.shouldShowDetails,r=e.args,i=(e.editorCallbacks,mE(r,"scene_name")),a=mE(r,"object_name"),o=bt.$.extractArrayProperty(r,"changed_properties")||[],s=function(e){if(1===e.length){var t=e[0],r=t.label,o=t.newValue;return{text:"name"===r?(0,f.jsx)(w.Trans,{id:'Rename object "{object_name}" to "<0>{newValue}</0>" (in scene {scene_name}).',values:{object_name:a,newValue:o,scene_name:i},components:[(0,f.jsx)("b",{})]}):(0,f.jsx)(w.Trans,{id:'Change property "<0>{label}</0>" of object <1>{object_name}</1> (in scene {scene_name}) to <2>{newValue}</2>.',values:{label:r,object_name:a,scene_name:i,newValue:o},components:[(0,f.jsx)("b",{}),(0,f.jsx)("b",{}),(0,f.jsx)("b",{})]})}}return{text:(0,f.jsx)(w.Trans,{id:"Change {0} properties of object {object_name} (in scene {scene_name}).",values:{0:e.length,object_name:a,scene_name:i}}),hasDetailsToShow:!0,details:n?(0,f.jsx)(_.ak,{noMargin:!0,children:e.map((function(e){return"name"===e.label?(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Renamed object to {0}.",values:{0:e.newValue}})},e.label):(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"<0>{0}</0> set to {1}.",values:{0:e.label,1:e.newValue},components:[(0,f.jsx)("b",{})]})},e.label)}))}):null}};if(!t||!t.hasLayoutNamed(i))return s(wE(o));var l=t.getLayout(i).getObjects(),c=t.getObjects(),u=null;if(l.hasObjectNamed(a)?u=l.getObject(a):c.hasObjectNamed(a)&&(u=c.getObject(a)),!u)return s(wE(o));var d=u.getConfiguration().getProperties();return s(o.map((function(e){var t=bt.$.extractStringProperty(e,"property_name"),n=bt.$.extractStringProperty(e,"new_value");if(null===t||null===n)return null;if(PE(t))return{label:"name",newValue:n};var r=yE({properties:d,name:t}).foundProperty;return{label:r?r.getLabel():t,newValue:n}})).filter(Boolean))},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),o=mE(r,"object_name"),s=bt.$.extractArrayProperty(r,"changed_properties")||[],n.hasLayoutNamed(i)){e.next=6;break}return e.abrupt("return",xE('Scene not found: "'.concat(i,'".')));case 6:if(l=n.getLayout(i),c=l.getObjects(),u=n.getObjects(),d=null,p=!1,c.hasObjectNamed(o)?d=c.getObject(o):u.hasObjectNamed(o)&&(d=u.getObject(o),p=!0),d){e.next=14;break}return e.abrupt("return",xE('Object not found: "'.concat(o,'" in scene "').concat(i,'", nor in the global objects.')));case 14:return f=[],h=[],s.forEach((function(e){if(d){var t=bt.$.extractStringProperty(e,"property_name"),r=bt.$.extractStringProperty(e,"new_value");if(null!==t&&null!==r){if(PE(t)){if(d.getName()===r)return void h.push('Object "'.concat(o,'" already has the name "').concat(r,'", no need to rename it. Continue assuming this name is correct and valid.'));var i=gE.ObjectsContainersList.makeNewObjectsContainersListForProjectAndLayout(n,l),a=(0,xt.Z)(gE.Project.getSafeName(r),(function(e){return i.hasObjectOrGroupNamed(e)}));return l&&(p?gE.WholeProjectRefactorer.globalObjectOrGroupRenamed(n,d.getName(),a,!1):gE.WholeProjectRefactorer.objectOrGroupRenamedInScene(n,l,d.getName(),a,!1)),d.setName(a),void h.push('Renamed object "'.concat(o,'" to "').concat(a,'". Events and everything else refering to this object having been also updated. Continue assuming the object has now the name "').concat(a,'" and the whole project has been updated for it.'))}var s=d.getConfiguration(),c=s.getProperties(),u=yE({properties:c,name:t}),g=u.foundPropertyName,m=u.foundProperty;g?s.updateProperty(g,ZE(m,r))?h.push('Changed property "'.concat(g,'" of object "').concat(o,'" to "').concat(r,'".')):f.push('Could not change property "'.concat(g,'" of object "').concat(o,'". The value might be invalid, of the wrong type or not allowed.')):f.push("Property not found: ".concat(t," on object ").concat(o,"."))}else f.push('Missing "property_name" or "new_value" in an item of `changed_properties`: '.concat(JSON.stringify(e),". It was ignored and not changed."))}})),e.abrupt("return",bE(h,f));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},EE={renderForEditor:function(e){var t=e.project,n=e.args,r=e.editorCallbacks,i=mE(n,"scene_name"),a=mE(n,"object_name"),o=mE(n,"behavior_type"),s=bt.$.extractStringProperty(n,"behavior_name"),l=function(e){return{text:(0,f.jsx)(w.Trans,{id:"Add behavior {behaviorName} (<0>{behaviorTypeLabel}</0>) on object <1>{object_name}</1> in scene <2>{scene_name}</2>.",values:{behaviorName:u,behaviorTypeLabel:e,object_name:a,scene_name:i},components:[(0,f.jsx)("b",{}),(0,f.jsx)("b",{}),(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return r.onOpenLayout(i,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}})]})}};if(!t)return l(o);var c=gE.MetadataProvider.getBehaviorMetadata(t.getCurrentPlatform(),o);if(gE.MetadataProvider.isBadBehaviorMetadata(c))return l(o);var u=s||c.getDefaultName();return l(c.getFullName())},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g,m,x,v,b,C,j,y,Z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=t.ensureExtensionInstalled,o=t.onWillInstallExtension,s=t.onExtensionInstalled,l=mE(r,"scene_name"),c=mE(r,"object_name"),u=mE(r,"behavior_type"),d=bt.$.extractStringProperty(r,"behavior_name"),n.hasLayoutNamed(l)){e.next=7;break}return e.abrupt("return",xE('Scene not found: "'.concat(l,'".')));case 7:if(p=n.getLayout(l),f=p.getObjects(),h=n.getObjects(),g=null,f.hasObjectNamed(c)?g=f.getObject(c):h.hasObjectNamed(c)&&(g=h.getObject(c)),g){e.next=14;break}return e.abrupt("return",xE('Object not found: "'.concat(c,'" in scene "').concat(l,'", nor in the global objects.')));case 14:if(!u.includes("::")){e.next=25;break}return m=u.split("::")[0],e.prev=16,e.next=19,i({extensionName:m,onWillInstallExtension:o,onExtensionInstalled:s});case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(16),console.error('Could not get extension "'.concat(m,'" installed:'),e.t0),e.abrupt("return",xE('Could not install extension "'.concat(m,'" - should you consider trying with another behavior type?')));case 25:if(x=gE.MetadataProvider.getBehaviorMetadata(n.getCurrentPlatform(),u),!gE.MetadataProvider.isBadBehaviorMetadata(x)){e.next=28;break}return e.abrupt("return",xE('Type "'.concat(u,'" does not exist for behaviors.')));case 28:if(v=d||x.getDefaultName(),!g.hasBehaviorNamed(v)){e.next=34;break}if(g.getBehavior(v).getTypeName()===u){e.next=33;break}return e.abrupt("return",xE('Behavior with name "'.concat(v,'" already exists on object "').concat(c,'" but with a different type ("').concat(u,'").')));case 33:return e.abrupt("return",vE('Behavior with name "'.concat(v,'" already exists on object "').concat(c,'", no need to re-create it.')));case 34:if(!Zh(x)){e.next=39;break}if(b=g.getAllBehaviorNames().toJSArray().some((function(e){return!!g&&g.getBehavior(e).getTypeName()===u})),!b){e.next=38;break}return e.abrupt("return",vE('Behavior "'.concat(v,'" of type "').concat(u,'" is a default capability and is already available on object "').concat(c,"\". There is no need to add it (and it can't be removed).")));case 38:return e.abrupt("return",xE('Behavior "'.concat(v,'" of type "').concat(u,'" is a default capability and cannot be added to object "').concat(c,'".')));case 39:if(gE.WholeProjectRefactorer.addBehaviorAndRequiredBehaviors(n,g,u,v),g.hasBehaviorNamed(v)){e.next=42;break}return e.abrupt("return",xE('Unexpected error: behavior "'.concat(v,'" was not added to object "').concat(c,'" despite a valid type and name.')));case 42:return p.updateBehaviorsSharedData(n),C=g.getBehavior(v),j=C.getProperties(),y=j.keys().toJSArray().map((function(e){var t=j.get(e);return CE(t)?null:kE(e,t)})).filter(Boolean),Z="It has the following properties: ".concat(y.join(", "),"."),e.abrupt("return",vE(['Added behavior called "'.concat(v,'" with type "').concat(u,'" to object "').concat(c,'".'),Z].join(" ")));case 48:case"end":return e.stop()}}),e,null,[[16,21]])})));return function(t){return e.apply(this,arguments)}}()},ME={renderForEditor:function(e){var t=e.args,n=mE(t,"scene_name"),r=mE(t,"object_name"),i=mE(t,"behavior_name");return{text:(0,f.jsx)(w.Trans,{id:"Remove behavior {behavior_name} from object {object_name} in scene {scene_name}.",values:{behavior_name:i,object_name:r,scene_name:n}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),o=mE(r,"object_name"),s=mE(r,"behavior_name"),n.hasLayoutNamed(i)){e.next=6;break}return e.abrupt("return",xE('Scene not found: "'.concat(i,'".')));case 6:if(l=n.getLayout(i),c=l.getObjects(),u=n.getObjects(),d=null,c.hasObjectNamed(o)?d=c.getObject(o):u.hasObjectNamed(o)&&(d=u.getObject(o)),d){e.next=13;break}return e.abrupt("return",xE('Object not found: "'.concat(o,'" in scene "').concat(i,'", nor in the global objects.')));case 13:if(d.hasBehaviorNamed(s)){e.next=15;break}return e.abrupt("return",xE('Behavior not found: "'.concat(s,'" on object "').concat(o,'". So it was not removed.')));case 15:return p=gE.WholeProjectRefactorer.findDependentBehaviorNames(n,d,s).toJSArray(),d.removeBehavior(s),p.forEach((function(e){d&&d.removeBehavior(e)})),e.abrupt("return",vE(p.length>0?'Removed behavior "'.concat(s,'" from object "').concat(o,'". Dependent behaviors were also removed as they were based on this behavior: ').concat(p.join(", "),"."):'Removed behavior "'.concat(s,'" from object "').concat(o,'".')));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},LE={renderForEditor:function(e){var t=e.args,n=mE(t,"scene_name"),r=mE(t,"object_name"),i=mE(t,"behavior_name");return{text:(0,f.jsx)(w.Trans,{id:"Inspecting properties of behavior {behavior_name} on object {object_name} in scene {scene_name}.",values:{behavior_name:i,object_name:r,scene_name:n}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g,m,x,v,b,C;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),o=mE(r,"object_name"),s=mE(r,"behavior_name"),n.hasLayoutNamed(i)){e.next=6;break}return e.abrupt("return",xE('Scene not found: "'.concat(i,'".')));case 6:if(l=n.getLayout(i),c=l.getObjects(),u=n.getObjects(),d=null,c.hasObjectNamed(o)?d=c.getObject(o):u.hasObjectNamed(o)&&(d=u.getObject(o)),d){e.next=13;break}return e.abrupt("return",xE('Object not found: "'.concat(o,'" in scene "').concat(i,'", nor in the global objects.')));case 13:if(d.hasBehaviorNamed(s)){e.next=15;break}return e.abrupt("return",xE('Behavior not found: "'.concat(s,'" on object "').concat(o,'".')));case 15:return p=d.getBehavior(s),f=p.getProperties(),h=f.keys().toJSArray(),g=h.map((function(e){var t=f.get(e);return CE(t)?null:jE(e,t)})).filter(Boolean),m=l.getAllBehaviorSharedDataNames().toJSArray(),x=void 0,m.includes(s)&&(v=l.getBehaviorSharedData(s),b=v.getProperties(),C=b.keys().toJSArray(),x=C.map((function(e){var t=b.get(e);return CE(t)?null:jE(e,t)})).filter(Boolean)),e.abrupt("return",{success:!0,behaviorName:s,properties:g,sharedProperties:x});case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},AE={renderForEditor:function(e){var t=e.project,n=e.shouldShowDetails,r=e.args,i=e.editorCallbacks,a=mE(r,"scene_name"),o=mE(r,"object_name"),s=mE(r,"behavior_name"),l=bt.$.extractArrayProperty(r,"changed_properties")||[],c=function(e){if(1===e.length){var t=e[0],r=t.label,l=t.newValue;return{text:(0,f.jsx)(w.Trans,{id:'Change property "<0>{label}</0>" of behavior {behavior_name} on object <1>{object_name}</1> (in scene <2>{scene_name}</2>) to <3>{newValue}</3>.',values:{label:r,behavior_name:s,object_name:o,scene_name:a,newValue:l},components:[(0,f.jsx)("b",{}),(0,f.jsx)("b",{}),(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return i.onOpenLayout(a,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}}),(0,f.jsx)("b",{})]})}}return{text:(0,f.jsx)(w.Trans,{id:"Changed {0} properties of behavior {behavior_name} on object {object_name} (in scene {scene_name}).",values:{0:e.length,behavior_name:s,object_name:o,scene_name:a}}),hasDetailsToShow:!0,details:n?(0,f.jsx)(_.ak,{noMargin:!0,children:e.map((function(e){return(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"<0>{0}</0> set to {1}.",values:{0:e.label,1:e.newValue},components:[(0,f.jsx)("b",{})]})},e.label)}))}):null}};if(!t||!t.hasLayoutNamed(a))return c(wE(l));var u=t.getLayout(a),d=u.getObjects(),p=t.getObjects(),h=null;if(d.hasObjectNamed(o)?h=d.getObject(o):p.hasObjectNamed(o)&&(h=p.getObject(o)),!h)return c(wE(l));if(!h.hasBehaviorNamed(s))return c(wE(l));var g=h.getBehavior(s).getProperties(),m=u.getAllBehaviorSharedDataNames().toJSArray(),x=null;if(m.includes(s)){var v=u.getBehaviorSharedData(s);x=v.getProperties()}return c(l.map((function(e){var t=bt.$.extractStringProperty(e,"property_name"),n=bt.$.extractStringProperty(e,"new_value");if(null===t||null===n)return null;var r=yE({properties:g,name:t}),i=yE({properties:x,name:t});return r.foundProperty?{label:r.foundProperty.getLabel(),newValue:n}:i.foundProperty?{label:i.foundProperty.getLabel(),newValue:n}:{label:t,newValue:n}})).filter(Boolean))},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g,m,x,v,b;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),o=mE(r,"object_name"),s=mE(r,"behavior_name"),l=bt.$.extractArrayProperty(r,"changed_properties")||[],n.hasLayoutNamed(i)){e.next=7;break}return e.abrupt("return",xE('Scene not found: "'.concat(i,'".')));case 7:if(c=n.getLayout(i),u=c.getObjects(),d=n.getObjects(),p=null,u.hasObjectNamed(o)?p=u.getObject(o):d.hasObjectNamed(o)&&(p=d.getObject(o)),p){e.next=14;break}return e.abrupt("return",xE('Object not found: "'.concat(o,'" in scene "').concat(i,'", nor in the global objects.')));case 14:if(p.hasBehaviorNamed(s)){e.next=16;break}return e.abrupt("return",xE('Behavior not found: "'.concat(s,'" on object "').concat(o,'".')));case 16:return f=p.getBehavior(s),h=f.getProperties(),g=c.getAllBehaviorSharedDataNames().toJSArray(),m=null,x=null,g.includes(s)&&(m=c.getBehaviorSharedData(s),x=m.getProperties()),v=[],b=[],l.forEach((function(e){var t=bt.$.extractStringProperty(e,"property_name"),n=bt.$.extractStringProperty(e,"new_value");if(null!==t&&null!==n){var r=yE({properties:h,name:t}),i=yE({properties:x,name:t});if(r.foundPropertyName){var a=r.foundPropertyName,l=r.foundProperty;if(!f.updateProperty(a,ZE(l,n)))return void v.push('Could not change property "'.concat(a,'" of behavior "').concat(s,'". The value might be invalid, of the wrong type or not allowed.'));b.push('Changed property "'.concat(a,'" of behavior "').concat(s,'" to "').concat(n,'".'))}else if(m&&i.foundPropertyName){var c=i.foundPropertyName,u=i.foundProperty;if(!m.updateProperty(c,ZE(u,n)))return void v.push('Could not change shared property "'.concat(c,'" of behavior "').concat(s,'". The value might be invalid, of the wrong type or not allowed.'));b.push('Changed property "'.concat(c,'" of behavior "').concat(s,'" (shared between all objects having this behavior) to "').concat(n,'".'))}else v.push('Property "'.concat(t,'" not found on behavior "').concat(s,'" of object "').concat(o,'".'))}else v.push('Missing "property_name" or "new_value" in an item of `changed_properties`: '.concat(JSON.stringify(e),". It was ignored and not changed."))})),e.abrupt("return",bE(b,v));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},OE={renderForEditor:function(e){var t=e.args,n=e.editorCallbacks,r=mE(t,"scene_name");return{text:(0,f.jsx)(w.Trans,{id:"Inspecting instances of scene <0>{scene_name}.</0>",values:{scene_name:r},components:[(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return n.onOpenLayout(r,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}})]})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,o,s,c,u,d,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,i=t.args,o=mE(i,"scene_name"),s=bt.$.extractStringProperty(i,"filter_by_object_name")||"",c=new Set(s.split(",").map((function(e){return e.trim().toLowerCase()})).filter(Boolean)),n.hasLayoutNamed(o)){e.next=6;break}return e.abrupt("return",xE('Scene not found: "'.concat(o,'".')));case 6:if(u=n.getLayout(o),d=u.getInitialInstances(),p=[],(0,mt.mapFor)(0,u.getLayersCount(),(function(e){var t=u.getLayerAt(e).getName();(0,iy.sf)(d,t).forEach((function(e){if(!(c.size>0)||c.has(e.getObjectName().toLowerCase())){var t=(0,Ct.XH)(e);p.push((0,l.Z)((0,l.Z)({},t),{},{persistentUuid:void 0,id:e.getPersistentUuid().slice(0,10),initialVariables:void 0,numberProperties:void 0,stringProperties:void 0}))}}))})),!(c.size>0)){e.next=14;break}return e.abrupt("return",{success:!0,instances:p,instancesForSceneNamed:o,instancesOnlyForObjectsNamed:(0,r.Z)(c).sort().join(",")});case 14:return e.abrupt("return",{success:!0,instances:p,instancesForSceneNamed:o});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},RE=function(e,t){var n=new gE.InitialInstanceJSFunctor;n.invoke=function(e){var n=gE.wrapPointer(e,gE.InitialInstance);t(n)},e.iterateOverInstances(n),n.delete()},FE={renderForEditor:function(e){var t=e.args,n=mE(t,"scene_name"),r=bt.$.extractStringProperty(t,"object_name"),i=mE(t,"layer_name"),a=mE(t,"brush_kind"),o=bt.$.extractStringProperty(t,"brush_position"),s=bt.$.extractStringProperty(t,"existing_instance_ids"),l=s?s.split(","):[],c=bt.$.extractNumberProperty(t,"new_instances_count"),u=c||0!==l.length?c:1,d=s?s.split(",").length:0,p=o?o.split(",").map(Number):null;return"erase"===a?{text:(0,f.jsx)(w.Trans,{id:"Erase {existingInstanceCount} instance(s) in scene {scene_name}.",values:{existingInstanceCount:d,scene_name:n}})}:0===l.length?{text:(0,f.jsx)(w.Trans,{id:"Add {newInstancesCount} instance(s) of object {object_name} at {0} (layer: {1}) in scene {scene_name}.",values:{0:p?p.join(", "):(0,f.jsx)(w.Trans,{id:"scene center"}),1:i||"base",newInstancesCount:u,object_name:r,scene_name:n}})}:0===u?{text:(0,f.jsx)(w.Trans,{id:"Move {existingInstanceCount} instance(s) of object {object_name} to {0} (layer: {1}) in scene {scene_name}.",values:{0:p?p.join(", "):(0,f.jsx)(w.Trans,{id:"scene center"}),1:i||"base",existingInstanceCount:d,object_name:r,scene_name:n}})}:{text:(0,f.jsx)(w.Trans,{id:"Add {newInstancesCount} instance(s) and move {existingInstanceCount} instance(s) of object {object_name} to {0} (layer: {1}) in scene {scene_name}.",values:{0:p?p.join(", "):(0,f.jsx)(w.Trans,{id:"scene center"}),1:i||"base",newInstancesCount:u,existingInstanceCount:d,object_name:r,scene_name:n}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g,m,x,v,b,C,j,y,Z,k,w,T,S,P,I,E,M,L,A,O,R,F,D,N,_,B,U,V,H,z,W,G,Y,q,J,X,K,Q,$;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=t.onInstancesModifiedOutsideEditor,o=mE(r,"scene_name"),s=bt.$.extractStringProperty(r,"object_name"),l=mE(r,"layer_name"),c=mE(r,"brush_kind"),u=bt.$.extractStringProperty(r,"brush_position"),d=bt.$.extractNumberProperty(r,"brush_size"),p=bt.$.extractStringProperty(r,"brush_end_position"),f=bt.$.extractStringProperty(r,"existing_instance_ids"),h=bt.$.extractNumberProperty(r,"new_instances_count"),g=bt.$.extractNumberProperty(r,"instances_z_order"),m=bt.$.extractStringProperty(r,"instances_size"),n.hasLayoutNamed(o)){e.next=14;break}return e.abrupt("return",xE('Scene not found: "'.concat(o,'".')));case 14:if(x=n.getLayout(o),v=x.getObjects(),""===l||x.hasLayerNamed(l)){e.next=18;break}return e.abrupt("return",xE("Layer not found: ".concat(l,' in scene "').concat(o,'".')));case 18:if(b=f?f.split(","):[],C=x.getInitialInstances(),"erase"!==c){e.next=31;break}return j=u?u.split(",").map(Number):null,y=d||0,Z=new Set,k=new Set(b),RE(C,(function(e){var t=b.find((function(t){return e.getPersistentUuid().startsWith(t)}));if(t)return Z.add(e),void k.delete(t);if(e.getObjectName()===s&&(j&&e.getLayer()===l))if(0===y){if(e.getX()===j[0]&&e.getY()===j[1])return void Z.add(e)}else if(Math.sqrt(Math.pow(e.getX()-j[0],2)+Math.pow(e.getY()-j[1],2))<=y)return void Z.add(e)})),Z.forEach((function(e){C.removeInstance(e)})),i({scene:x}),e.abrupt("return",vE(["Erased ".concat(Z.size," instance").concat(Z.size>1?"s":"","."),k.size>0?"Could not find these instances to erase:\n        ".concat(Array.from(k).join(", "),". Verify the ids and layer names are ALWAYS exact and correct."):""].filter(Boolean).join(" ")));case 31:if(w=u?u.split(",").map(Number):[n.getGameResolutionWidth()/2,n.getGameResolutionHeight()/2],T=d||0,S=p?p.split(",").map(Number):null,P=bt.$.extractNumberProperty(r,"row_count"),I=bt.$.extractNumberProperty(r,"column_count"),0===(E=null!==h?h:0)&&0===b.length&&(E=P&&I?P*I:1),M=[],E>0&&!s&&M.push("You've specified to create ".concat(E," instances, but you didn't specify the object name. Please specify the object name.")),!s||v.hasObjectNamed(s)||n.getObjects().hasObjectNamed(s)){e.next=42;break}return e.abrupt("return",xE('Object not found: "'.concat(s,'" in scene "').concat(o,'". Please only specify the object name of an object existing in the scene (or create if before if necessary).')));case 42:for(L=new Map,A=new Set(b),O=[],RE(C,(function(e){var t=b.find((function(t){return e.getPersistentUuid().startsWith(t)}));t&&(A.delete(t),L.set(e,{originalLayer:e.getLayer(),originalX:e.getX(),originalY:e.getY(),originalZOrder:e.getZOrder(),originalRotation:e.getAngle(),originalOpacity:e.getOpacity(),originalCustomWidth:e.hasCustomSize()?e.getCustomWidth():null,originalCustomHeight:e.hasCustomSize()?e.getCustomHeight():null}),O.push(e),e.getLayer()!==l&&e.setLayer(l))})),R=0;R<E;R++)(F=C.insertNewInitialInstance()).setObjectName(s||""),F.setLayer(l),O.push(F);if("line"===c?(D=O.length,w&&S&&(N=D>1?(S[0]-w[0])/(D-1):0,_=D>1?(S[1]-w[1])/(D-1):0,O.forEach((function(e,t){e.setX(w[0]+t*N),e.setY(w[1]+t*_)})))):"grid"===c?(B=O.length,w&&S&&(U=P||Math.floor(Math.sqrt(B)),V=(S[0]-w[0])/U,H=I||Math.ceil(B/U),z=(S[1]-w[1])/H,O.forEach((function(e,t){var n=Math.floor(t/H),r=t%H;e.setX(w[0]+r*z),e.setY(w[1]+n*V)})))):"random_in_circle"===c?O.forEach((function(e){var t=Math.random()*T,n=2*Math.random()*Math.PI;e.setX(w[0]+t*Math.cos(n)),e.setY(w[1]+t*Math.sin(n))})):"point"===c?O.forEach((function(e){e.setX(w[0]),e.setY(w[1])})):"none"!==c&&(console.warn("Unknown brush kind: ".concat(c,' - assuming it\'s "none" instead.')),M.push('The brush kind is unknown and was considered to be "none" instead.')),W=m?m.split(",").map(Number):null,G=bt.$.extractNumberProperty(r,"instances_rotation"),Y=bt.$.extractNumberProperty(r,"instances_opacity"),O.forEach((function(e){W&&(e.setHasCustomSize(!0),e.setCustomWidth(W[0]),e.setCustomHeight(W[1])),null!==g&&e.setZOrder(g),null!==G&&e.setAngle(G),null!==Y&&e.setOpacity(Y)})),E>0&&M.push("Created ".concat(E," new instance").concat(E>1?"s":"",' of object "').concat(s||"",'" using ').concat(c," brush at ").concat(w.join(", "),' on layer "').concat(l||"base",'".')),q=0,J=0,X=0,K=0,Q=0,$=0,L.forEach((function(e,t){e.originalLayer!==t.getLayer()&&q++,e.originalX===t.getX()&&e.originalY===t.getY()||J++,!W||e.originalCustomWidth===t.getCustomWidth()&&e.originalCustomHeight===t.getCustomHeight()||X++,null!==G&&e.originalRotation!==t.getAngle()&&K++,null!==Y&&e.originalOpacity!==t.getOpacity()&&Q++,null!==g&&e.originalZOrder!==t.getZOrder()&&$++})),q>0&&M.push("Moved ".concat(q," instance").concat(q>1?"s":"",' to layer "').concat(l||"base",'".')),J>0&&M.push("Repositioned ".concat(J," instance").concat(J>1?"s":""," using ").concat(c," brush.")),X>0&&W&&M.push("Resized ".concat(X," instance").concat(X>1?"s":""," to ").concat(W[0],"x").concat(W[1],".")),K>0&&null!==G&&M.push("Rotated ".concat(K," instance").concat(K>1?"s":""," to ").concat(G,"\xb0.")),Q>0&&null!==Y&&M.push("Changed opacity of ".concat(Q," instance").concat(Q>1?"s":""," to ").concat(Y,".")),$>0&&null!==g&&M.push("Changed Z-order of ".concat($," instance").concat($>1?"s":""," to ").concat(g,".")),A.size>0&&M.push("Could not find these existing instance ids to modify:\n          ".concat(Array.from(A).join(", "),". Verify the ids and layer names are ALWAYS exact and correct.")),0!==M.length){e.next=69;break}return e.abrupt("return",vE("No changes were made to instances. Please specify a brush kind, position and number of instances to create, or specify the exact ids of the instances to manipulate."));case 69:return i({scene:x}),e.abrupt("return",vE(M.join(" ")));case 71:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},DE={renderForEditor:function(e){var t=e.args,n=mE(t,"scene_name"),r=bt.$.extractStringProperty(t,"object_name"),i=mE(t,"layer_name"),a=mE(t,"brush_kind"),o=bt.$.extractStringProperty(t,"brush_position"),s=bt.$.extractStringProperty(t,"existing_instance_ids"),l=s?s.split(","):[],c=bt.$.extractNumberProperty(t,"new_instances_count"),u=c||0!==l.length?c:1,d=s?s.split(",").length:0,p=o?o.split(",").map(Number):null;return"erase"===a?{text:(0,f.jsx)(w.Trans,{id:"Erase {existingInstanceCount} instance(s) in scene {scene_name}.",values:{existingInstanceCount:d,scene_name:n}})}:0===l.length?{text:(0,f.jsx)(w.Trans,{id:"Add {newInstancesCount} instance(s) of object {object_name} at {0} (layer: {1}) in scene {scene_name}.",values:{0:p?p.join(", "):(0,f.jsx)(w.Trans,{id:"scene center"}),1:i||"base",newInstancesCount:u,object_name:r,scene_name:n}})}:0===u?{text:(0,f.jsx)(w.Trans,{id:"Move {existingInstanceCount} instance(s) of object {object_name} to {0} (layer: {1}) in scene {scene_name}.",values:{0:p?p.join(", "):(0,f.jsx)(w.Trans,{id:"scene center"}),1:i||"base",existingInstanceCount:d,object_name:r,scene_name:n}})}:{text:(0,f.jsx)(w.Trans,{id:"Add {newInstancesCount} instance(s) and move {existingInstanceCount} instance(s) of object {object_name} to {0} (layer: {1}) in scene {scene_name}.",values:{0:p?p.join(", "):(0,f.jsx)(w.Trans,{id:"scene center"}),1:i||"base",newInstancesCount:u,existingInstanceCount:d,object_name:r,scene_name:n}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g,m,x,v,b,C,j,y,Z,k,w,T,S,P,I,E,M,L,A,O,R,F,D,N,_,B,U,V,H,z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=t.onInstancesModifiedOutsideEditor,o=mE(r,"scene_name"),s=bt.$.extractStringProperty(r,"object_name"),l=mE(r,"layer_name"),c=mE(r,"brush_kind"),u=bt.$.extractStringProperty(r,"brush_position"),d=bt.$.extractNumberProperty(r,"brush_size"),p=bt.$.extractStringProperty(r,"brush_end_position"),f=bt.$.extractStringProperty(r,"existing_instance_ids"),h=bt.$.extractNumberProperty(r,"new_instances_count"),g=bt.$.extractStringProperty(r,"instances_size"),m=bt.$.extractStringProperty(r,"instances_rotation"),n.hasLayoutNamed(o)){e.next=14;break}return e.abrupt("return",xE('Scene not found: "'.concat(o,'".')));case 14:if(x=n.getLayout(o),v=x.getObjects(),""===l||x.hasLayerNamed(l)){e.next=18;break}return e.abrupt("return",xE("Layer not found: ".concat(l,' in scene "').concat(o,'".')));case 18:if(b=f?f.split(","):[],C=x.getInitialInstances(),"erase"!==c){e.next=31;break}return j=u?u.split(",").map(Number):null,y=d||0,Z=new Set,k=new Set(b),RE(C,(function(e){var t=b.find((function(t){return e.getPersistentUuid().startsWith(t)}));if(t)return Z.add(e),void k.delete(t);if(e.getObjectName()===s&&(j&&e.getLayer()===l))if(y<=0){if(e.getX()===j[0]&&e.getY()===j[1]&&e.getZ()===j[2])return void Z.add(e)}else if(Math.sqrt(Math.pow(e.getX()-j[0],2)+Math.pow(e.getY()-j[1],2)+Math.pow(e.getZ()-j[2],2))<=y)return void Z.add(e)})),Z.forEach((function(e){C.removeInstance(e)})),i({scene:x}),e.abrupt("return",vE(["Erased ".concat(Z.size," instance").concat(Z.size>1?"s":"","."),k.size>0?"Could not find these instances to erase:\n        ".concat(Array.from(k).join(", "),". Verify the ids and layer names are ALWAYS exact and correct."):""].filter(Boolean).join(" ")));case 31:if(w=u?u.split(",").map(Number):[n.getGameResolutionWidth()/2,n.getGameResolutionHeight()/2,0],T=d||0,S=p?p.split(",").map(Number):null,0===(P=null!==h?h:0)&&0===b.length&&(P=1),I=[],P>0&&!s&&I.push("You've specified to create ".concat(P," instances, but you didn't specify the object name. Please specify the object name.")),!s||v.hasObjectNamed(s)||n.getObjects().hasObjectNamed(s)){e.next=40;break}return e.abrupt("return",xE('Object not found: "'.concat(s,'" in scene "').concat(o,'". Please only specify the object name of an object existing in the scene (or create if before if necessary).')));case 40:for(E=new Map,M=new Set(b),L=[],RE(C,(function(e){var t=b.find((function(t){return e.getPersistentUuid().startsWith(t)}));t&&(M.delete(t),E.set(e,{originalLayer:e.getLayer(),originalX:e.getX(),originalY:e.getY(),originalZ:e.getZ(),originalRotationX:e.getRotationX(),originalRotationY:e.getRotationY(),originalRotationZ:e.getAngle(),originalCustomWidth:e.hasCustomSize()?e.getCustomWidth():null,originalCustomHeight:e.hasCustomSize()?e.getCustomHeight():null,originalCustomDepth:e.hasCustomDepth()?e.getCustomDepth():null}),L.push(e),e.getLayer()!==l&&e.setLayer(l))})),A=0;A<P;A++)(O=C.insertNewInitialInstance()).setObjectName(s||""),O.setLayer(l),L.push(O);if("line"===c?(R=L.length,w&&S&&(F=R>1?(S[0]-w[0])/(R-1):0,D=R>1?(S[1]-w[1])/(R-1):0,N=R>1?(S[2]-w[2])/(R-1):0,L.forEach((function(e,t){e.setX(w[0]+t*F),e.setY(w[1]+t*D),e.setZ(w[2]+t*N)})))):"random_in_sphere"===c?L.forEach((function(e){if(w){var t=Math.random()*T,n=2*Math.random()*Math.PI,r=Math.acos(2*Math.random()-1);e.setX(w[0]+t*Math.sin(r)*Math.cos(n)),e.setY(w[1]+t*Math.sin(r)*Math.sin(n)),e.setZ(w[2]+t*Math.cos(r))}})):"point"===c?L.forEach((function(e){w&&(e.setX(w[0]),e.setY(w[1]),e.setZ(w[2]))})):"none"!==c&&(console.warn("Unknown brush kind: ".concat(c,' - assuming it\'s "none" instead.')),I.push('The brush kind is unknown and was considered to be "none" instead.')),_=g?g.split(",").map(Number):null,B=m?m.split(",").map((function(e){return parseFloat(e)||0})):null,L.forEach((function(e){_&&_.length>=3&&(e.setHasCustomSize(!0),e.setHasCustomDepth(!0),e.setCustomWidth(_[0]),e.setCustomHeight(_[1]),e.setCustomDepth(_[2])),B&&B.length>=3&&(e.setRotationX(B[0]),e.setRotationY(B[1]),e.setAngle(B[2]))})),P>0&&I.push("Created ".concat(P," new instance").concat(P>1?"s":"",' of object "').concat(s||"",'" using ').concat(c," brush at ").concat(w.join(", "),' on layer "').concat(l||"base",'".')),U=0,V=0,H=0,z=0,E.forEach((function(e,t){e.originalLayer!==t.getLayer()&&U++,e.originalX===t.getX()&&e.originalY===t.getY()&&e.originalZ===t.getZ()||V++,_&&_.length>=3&&(e.originalCustomWidth!==t.getCustomWidth()||e.originalCustomHeight!==t.getCustomHeight()||e.originalCustomDepth!==t.getCustomDepth())&&H++,B&&B.length>=3&&(e.originalRotationX!==t.getRotationX()||e.originalRotationY!==t.getRotationY()||e.originalRotationZ!==t.getAngle())&&z++})),U>0&&I.push("Moved ".concat(U," instance").concat(U>1?"s":"",' to layer "').concat(l||"base",'".')),V>0&&I.push("Repositioned ".concat(V," instance").concat(V>1?"s":""," using ").concat(c," brush.")),H>0&&_&&I.push("Resized ".concat(H," instance").concat(H>1?"s":""," to ").concat(_[0],"x").concat(_[1],"x").concat(_[2],".")),z>0&&B&&I.push("Rotated ".concat(z," instance").concat(z>1?"s":""," to (").concat(B[0],"\xb0, ").concat(B[1],"\xb0, ").concat(B[2],"\xb0).")),M.size>0&&I.push("Could not find these existing instance ids to modify:\n          ".concat(Array.from(M).join(", "),". Verify the ids and layer names are ALWAYS exact and correct.")),0!==I.length){e.next=62;break}return e.abrupt("return",vE("No changes were made to instances."));case 62:return i({scene:x}),e.abrupt("return",vE(I.join(" ")));case 64:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},NE={renderForEditor:function(e){var t=e.args,n=e.editorCallbacks,r=mE(t,"scene_name");return{text:(0,f.jsx)(w.Trans,{id:"Inspecting event sheet of scene <0>{scene_name}</0>.",values:{scene_name:r},components:[(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return n.onOpenLayout(r,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"events"})}})]})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),n.hasLayoutNamed(i)){e.next=4;break}return e.abrupt("return",xE('Scene not found: "'.concat(i,'".')));case 4:return o=n.getLayout(i),s=o.getEvents(),l=rE({eventsList:s}),e.abrupt("return",{success:!0,eventsForSceneNamed:i,eventsAsText:l});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_E={renderForEditor:function(e){var t=e.args,n=e.shouldShowDetails,r=e.editorCallbacks,i=mE(t,"scene_name"),a=mE(t,"events_description"),o=bt.$.extractStringProperty(t,"objects_list"),s=null===o?"":o,l=bt.$.extractStringProperty(t,"placement_hint")||"",c=n?(0,f.jsxs)(_.ak,{noMargin:!0,children:[a&&(0,f.jsxs)(N.Z,{noMargin:!0,allowSelection:!0,color:"secondary",style:{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},children:[(0,f.jsx)("b",{children:(0,f.jsx)(w.Trans,{id:"Description"})}),": ",a]}),l&&(0,f.jsxs)(N.Z,{noMargin:!0,allowSelection:!0,color:"secondary",style:{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},children:[(0,f.jsx)("b",{children:(0,f.jsx)(w.Trans,{id:"Generation hint"})}),": ",l]}),s&&(0,f.jsxs)(N.Z,{noMargin:!0,allowSelection:!0,color:"secondary",style:{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},children:[(0,f.jsx)("b",{children:(0,f.jsx)(w.Trans,{id:"Related objects"})}),": ",s]})]}):null;return a?{text:(0,f.jsx)(w.Trans,{id:"Add or rework <0>events of scene {scene_name}</0>.",values:{scene_name:i},components:[(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return r.onOpenLayout(i,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"events"})}})]}),details:c,hasDetailsToShow:!0}:l?{text:(0,f.jsx)(w.Trans,{id:'Adapt <0>events of scene {scene_name}</0> ("{placementHint}").',values:{scene_name:i,placementHint:l},components:[(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return r.onOpenLayout(i,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"events"})}})]}),details:c,hasDetailsToShow:!0}:{text:(0,f.jsx)(w.Trans,{id:"Modify <0>events of scene {scene_name}</0>.",values:{scene_name:i},components:[(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return r.onOpenLayout(i,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"events"})}})]}),details:c,hasDetailsToShow:!0}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,o,s,c,u,d,p,f,h,g,m,x,v,b,C,j,y,Z,k,w,T,S,P,I,E,M,L,A,O,R,F,D,N,_,B,U,V,H,z,W,G,Y,q,J,X;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,o=t.generateEvents,s=t.onSceneEventsModifiedOutsideEditor,c=t.ensureExtensionInstalled,u=t.onWillInstallExtension,d=t.onExtensionInstalled,p=mE(r,"scene_name"),f=mE(r,"events_description"),h=mE(r,"extension_names_list"),g=bt.$.extractStringProperty(r,"objects_list"),m=null===g?"":g,x=bt.$.extractStringProperty(r,"placement_hint")||"",n.hasLayoutNamed(p)){e.next=9;break}return e.abrupt("return",xE('Scene not found: "'.concat(p,'".')));case 9:return v=n.getLayout(p),b=v.getEvents(),C=rE({eventsList:b}),e.prev=12,e.next=15,o({sceneName:p,eventsDescription:f,extensionNamesList:h,objectsList:m,existingEventsAsText:C,placementHint:x});case 15:if((j=e.sent).generationCompleted){e.next=18;break}return e.abrupt("return",xE("Infrastructure error when launching or completing events generation (".concat(j.errorMessage,"). Consider trying again or a different approach.")));case 18:if(y=j.aiGeneratedEvent,Z=function(e,t){return(0,l.Z)({success:!1,message:e,aiGeneratedEventId:y.id},t)},!y.error){e.next=22;break}return e.abrupt("return",Z("Infrastructure error when generating events (".concat(y.error.message,"). Consider trying again or a different approach.")));case 22:if((k=y.changes)&&0!==k.length){e.next=26;break}return w=y.resultMessage||"No generated events found and no other information was given.",e.abrupt("return",Z("Error when generating events: ".concat(w,"\nConsider trying again or a different approach.")));case 26:if(!k.some((function(e){return!1===e.isEventsJsonValid}))&&!k.some((function(e){return!1===e.areEventsValid}))){e.next=29;break}return T=y.resultMessage||"This probably means what you asked for is not possible or does not work like this.",e.abrupt("return",Z("Generated events are not valid: ".concat(T,"\nRead also the attached diagnostics to try to understand what went wrong and either try again differently or consider a different approach."),{generatedEventsErrorDiagnostics:k.map((function(e){return e.diagnosticLines.join("\n")})).join("\n\n")}));case 29:e.prev=29,S=new Set,P=(0,i.Z)(k);try{for(P.s();!(I=P.n()).done;){E=I.value,M=(0,i.Z)(E.extensionNames||[]);try{for(M.s();!(L=M.n()).done;)A=L.value,S.add(A)}catch(a){M.e(a)}finally{M.f()}}}catch(a){P.e(a)}finally{P.f()}O=(0,i.Z)(S),e.prev=34,O.s();case 36:if((R=O.n()).done){e.next=42;break}return F=R.value,e.next=40,c({extensionName:F,onWillInstallExtension:u,onExtensionInstalled:d});case 40:e.next=36;break;case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(34),O.e(e.t0);case 47:return e.prev=47,O.f(),e.finish(47);case 50:e.next=55;break;case 52:return e.prev=52,e.t1=e.catch(29),e.abrupt("return",Z("Error when installing extensions: ".concat(e.t1.message,". Consider trying again or a different approach.")));case 55:e.prev=55,D=(0,i.Z)(k);try{for(D.s();!(N=D.n()).done;){for(_=N.value,sE({project:n,scene:v,undeclaredVariables:_.undeclaredVariables}),B=Object.keys(_.undeclaredObjectVariables),U=0,V=B;U<V.length;U++)H=V[U],z=_.undeclaredObjectVariables[H],lE({project:n,scene:v,objectName:H,undeclaredVariables:z});for(W=Object.keys(_.missingObjectBehaviors),G=0,Y=W;G<Y.length;G++)q=Y[G],J=_.missingObjectBehaviors[q],cE({project:n,scene:v,objectName:q,missingBehaviors:J})}}catch(a){D.e(a)}finally{D.f()}return oE(n,b,k,y.id),s({scene:v,newOrChangedAiGeneratedEventIds:new Set([y.id])}),X=y.resultMessage||"Properly modified or added new event(s).",e.abrupt("return",{success:!0,message:X,aiGeneratedEventId:y.id});case 64:return e.prev=64,e.t2=e.catch(55),console.error("Unexpected error when adding events from an AI Generated Event (id: ".concat(y.id,"):"),e.t2),e.abrupt("return",Z("An unexpected error happened in the GDevelop editor while adding generated events: ".concat(e.t2.message,". Consider a different approach.")));case 68:e.next=74;break;case 70:return e.prev=70,e.t3=e.catch(12),console.error("Unexpected error when creating AI Generated Event:",e.t3),e.abrupt("return",xE("An unexpected error happened in the GDevelop editor while creating generated events: ".concat(e.t3.message,". Consider a different approach.")));case 74:case"end":return e.stop()}}),e,null,[[12,70],[29,52],[34,44,47,50],[55,64]])})));return function(t){return e.apply(this,arguments)}}()},BE={renderForEditor:function(e){var t=e.args,n=e.editorCallbacks,r=mE(t,"scene_name");return{text:(0,f.jsx)(w.Trans,{id:"Create a new scene called <0>{scene_name}</0>. <1>Click to open it</1>.",values:{scene_name:r},components:[(0,f.jsx)("b",{}),(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return n.onOpenLayout(r,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}})]})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),o=bt.$.extractBooleanProperty(r,"include_ui_layer"),s=bt.$.extractStringProperty(r,"background_color"),!n.hasLayoutNamed(i)){e.next=11;break}if(l=n.getLayout(i),!o||l.hasLayerNamed("UI")){e.next=10;break}return l.insertNewLayer("UI",l.getLayersCount()),Hi(l.getLayer("UI")),e.abrupt("return",vE('Scene with name "'.concat(i,'" already exists, no need to re-create it. A layer called "UI" was added to it.')));case 10:return e.abrupt("return",vE('Scene with name "'.concat(i,'" already exists, no need to re-create it.')));case 11:return c=n.getLayoutsCount(),u=n.insertNewLayout(i,c),o&&u.insertNewLayer("UI",u.getLayersCount()),s&&(d=(0,Xn.vc)((0,Xn.gO)(s)),u.setBackgroundColor(d[0],d[1],d[2])),zi(u),e.abrupt("return",{success:!0,message:'Created new scene "'.concat(i,o?'" with the base layer and a layer called "UI".':'".'),meta:{newSceneNames:[i]}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},UE={renderForEditor:function(e){var t=e.args,n=mE(t,"scene_name");return{text:(0,f.jsx)(w.Trans,{id:"Delete scene {scene_name}.",values:{scene_name:n}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),n.hasLayoutNamed(i)){e.next=4;break}return e.abrupt("return",vE('Scene is already non existent or deleted: "'.concat(i,'". No need to delete it.')));case 4:return n.removeLayout(i),e.abrupt("return",vE('Deleted scene "'.concat(i,'".')));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},VE=function(e,t){var n=t.getProperties();return n.keys().toJSArray().map((function(t){var r=n.get(t);if(CE(r))return null;var i=null;return e.hasDoubleParameter(t)?i=e.getDoubleParameter(t):e.hasStringParameter(t)?i=e.getStringParameter(t):e.hasBooleanParameter(t)&&(i=e.getBooleanParameter(t)),null===i?jE(t,r):(0,l.Z)((0,l.Z)({},jE(t,r)),{},{value:i})})).filter(Boolean)},HE={renderForEditor:function(e){var t=e.args,n=mE(t,"scene_name");return{text:(0,f.jsx)(w.Trans,{id:"Inspecting scene properties, layers and effects for scene {scene_name} .",values:{scene_name:n}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"scene_name"),n.hasLayoutNamed(i)){e.next=4;break}return e.abrupt("return",xE('Scene not found: "'.concat(i,'".')));case 4:return o=n.getLayout(i),s=o.getLayers(),e.abrupt("return",{success:!0,propertiesLayersEffectsForSceneNamed:o.getName(),properties:{backgroundColor:(0,Xn.TU)(o.getBackgroundColorRed(),o.getBackgroundColorGreen(),o.getBackgroundColorBlue()),stopSoundsOnStartup:o.stopSoundsOnStartup(),gameResolutionWidth:n.getGameResolutionWidth(),gameResolutionHeight:n.getGameResolutionHeight(),gameOrientation:n.getOrientation(),gameScaleMode:n.getScaleMode(),gameName:n.getName()},layers:(0,mt.mapFor)(0,s.getLayersCount(),(function(e){var t=s.getLayerAt(e),r=t.getEffects();return{name:t.getName(),position:e,effects:(0,mt.mapFor)(0,r.getEffectsCount(),(function(e){var t=r.getEffectAt(e),i=gE.MetadataProvider.getEffectMetadata(n.getCurrentPlatform(),t.getEffectType());return gE.MetadataProvider.isBadEffectMetadata(i)?null:{effectName:t.getName(),effectType:t.getEffectType(),effectProperties:VE(t,i)}})).filter(Boolean)}}))});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},zE=function(e,t){return e.toLowerCase().replace(/\s|_|-/g,"")===t.toLowerCase().replace(/\s|_|-/g,"")},WE={renderForEditor:function(e){var t=e.args,n=(e.shouldShowDetails,mE(t,"scene_name")),r=bt.$.extractArrayProperty(t,"changed_properties"),i=bt.$.extractArrayProperty(t,"changed_layers"),a=bt.$.extractArrayProperty(t,"changed_layer_effects"),o=bt.$.extractArrayProperty(t,"changed_groups"),s=r&&r.length||0,l=i&&i.length||0,c=a&&a.length||0,u=o&&o.length||0;return{text:s>0&&l>0&&c>0&&u>0?(0,f.jsx)(w.Trans,{id:"Changing some scene properties, layers, effects and groups for scene {scene_name}.",values:{scene_name:n}}):s>0&&l>0&&u>0?(0,f.jsx)(w.Trans,{id:"Changing some scene properties, layers and groups for scene {scene_name}.",values:{scene_name:n}}):s>0&&c>0&&u>0?(0,f.jsx)(w.Trans,{id:"Changing some scene properties, effects and groups for scene {scene_name}.",values:{scene_name:n}}):c>0&&l>0&&u>0?(0,f.jsx)(w.Trans,{id:"Changing some scene effects, layers and groups for scene {scene_name}.",values:{scene_name:n}}):s>0&&u>0?(0,f.jsx)(w.Trans,{id:"Changing some scene properties and groups for scene {scene_name}.",values:{scene_name:n}}):l>0&&u>0?(0,f.jsx)(w.Trans,{id:"Changing some scene layers and groups for scene {scene_name}.",values:{scene_name:n}}):c>0&&u>0?(0,f.jsx)(w.Trans,{id:"Changing some scene effects and groups for scene {scene_name}.",values:{scene_name:n}}):s>0&&l>0?(0,f.jsx)(w.Trans,{id:"Changing some scene properties and layers for scene {scene_name}.",values:{scene_name:n}}):s>0&&c>0?(0,f.jsx)(w.Trans,{id:"Changing some scene properties and effects for scene {scene_name}.",values:{scene_name:n}}):c>0&&l>0?(0,f.jsx)(w.Trans,{id:"Changing some scene effects and layers for scene {scene_name}.",values:{scene_name:n}}):s>0?(0,f.jsx)(w.Trans,{id:"Changing some scene properties for scene {scene_name}.",values:{scene_name:n}}):l>0?(0,f.jsx)(w.Trans,{id:"Changing some scene layers for scene {scene_name}.",values:{scene_name:n}}):c>0?(0,f.jsx)(w.Trans,{id:"Changing some scene effects for scene {scene_name}.",values:{scene_name:n}}):u>0?(0,f.jsx)(w.Trans,{id:"Changing some scene groups for scene {scene_name}.",values:{scene_name:n}}):(0,f.jsx)(w.Trans,{id:"Unknown changes attempted for scene {scene_name}.",values:{scene_name:n}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=t.onInstancesModifiedOutsideEditor,o=t.onObjectGroupsModifiedOutsideEditor,s=mE(r,"scene_name"),n.hasLayoutNamed(s)){e.next=4;break}return e.abrupt("return",xE('Scene not found: "'.concat(s,'".')));case 4:if(l=n.getLayout(s),c=[],u=[],d=bt.$.extractArrayProperty(r,"changed_properties"),p=bt.$.extractArrayProperty(r,"changed_layers"),f=bt.$.extractArrayProperty(r,"changed_layer_effects"),h=bt.$.extractArrayProperty(r,"changed_groups"),d&&d.forEach((function(e){var t=bt.$.extractStringProperty(e,"property_name"),r=bt.$.extractStringProperty(e,"new_value");if(null!==t&&null!==r)if(zE(t,"backgroundColor")){var i=(0,Xn.vc)((0,Xn.gO)(r));l.setBackgroundColor(i[0],i[1],i[2]),c.push("Modified the scene background color.")}else zE(t,"gameResolutionWidth")?(n.setGameResolutionSize(parseInt(r),n.getGameResolutionHeight()),c.push("Modified the game resolution width.")):zE(t,"stopSoundsOnStartup")?(l.setStopSoundsOnStartup("true"===r.toLowerCase()),c.push("Modified whether sounds should be stopped on scene startup.")):zE(t,"gameResolutionHeight")?(n.setGameResolutionSize(n.getGameResolutionWidth(),parseInt(r)),c.push("Modified the game resolution height.")):zE(t,"gameOrientation")?(n.setOrientation(r),c.push("Modified the game orientation.")):zE(t,"gameScaleMode")?(n.setScaleMode(r),c.push("Modified the game scale mode.")):zE(t,"gameName")?(n.setName(r),c.push("Modified the game name.")):u.push('Unknown property for the scene: "'.concat(t,'". It was ignored and not changed.'));else u.push('Missing "property_name" or "new_value" in an item of `changed_properties`: '.concat(JSON.stringify(e),". It was ignored and not changed."))})),p&&p.forEach((function(e){var t=bt.$.extractStringProperty(e,"layer_name");if(null!==t){var r=bt.$.extractStringProperty(e,"new_layer_name"),a=bt.$.extractNumberProperty(e,"new_layer_position"),o=bt.$.extractBooleanProperty(e,"delete_this_layer"),s=bt.$.extractStringProperty(e,"move_instances_to_layer");l.hasLayerNamed(t)?(o?(s?gE.WholeProjectRefactorer.mergeLayersInScene(n,l,t,s):gE.WholeProjectRefactorer.removeLayerInScene(n,l,t),l.getLayers().removeLayer(t),c.push('Removed layer "'.concat(t,'" for scene "').concat(l.getName(),'".'))):r&&(gE.WholeProjectRefactorer.renameLayerInScene(n,l,t,r),c.push('Renamed layer "'.concat(t,'" to "').concat(r,'" for scene "').concat(l.getName(),'".'))),null!==a&&(l.getLayers().moveLayer(l.getLayers().getLayerPosition(t),a),c.push('Moved layer "'.concat(t,'" to position ').concat(a,' for scene "').concat(l.getName(),'".'))),i({scene:l})):(l.getLayers().insertNewLayer(r||t,null===a?l.getLayersCount():a),c.push('Created new layer "'.concat(r||t,'" for scene "').concat(l.getName(),'" at position ').concat(a||0,".")))}else u.push('Missing "layer_name" in an item of changed_layers. It was ignored and not changed.')})),f&&f.forEach((function(e){var t=bt.$.extractStringProperty(e,"layer_name");if(null!==t)if(l.hasLayerNamed(t)){var r=l.getLayers().getLayer(t).getEffects(),i=bt.$.extractStringProperty(e,"effect_name");if(null!==i){var a=bt.$.extractStringProperty(e,"effect_type"),o=bt.$.extractStringProperty(e,"new_effect_name"),s=bt.$.extractNumberProperty(e,"new_effect_position"),d=bt.$.extractBooleanProperty(e,"delete_this_effect"),p=null;if(r.hasEffectNamed(i)){var f=r.getEffect(i);d?(r.removeEffect(i),c.push('Removed "'.concat(i,'" effect on layer "').concat(t,'".'))):(o&&(f.setName(o),c.push('Renamed the "'.concat(i,'" effect on layer "').concat(t,'" to "').concat(o,'".'))),null!==s&&(r.moveEffect(r.getEffectPosition(i),s),c.push('Moved the "'.concat(i,'" effect on layer "').concat(t,'" to position ').concat(s,"."))))}else if(a){var h=o||i,g=gE.MetadataProvider.getEffectMetadata(n.getCurrentPlatform(),a);gE.MetadataProvider.isBadEffectMetadata(g)?u.push('Effect type "'.concat(a,'" is not a valid effect type. Effect "').concat(h,'" was NOT added.')):(p=r.insertNewEffect(h,s||0)).setEffectType(a)}var m=bt.$.extractArrayProperty(e,"changed_properties");if(m){if(!r.hasEffectNamed(i))return void u.push('Effect not found: "'.concat(i,'". It was ignored and not changed.'));var x=r.getEffect(i),v=gE.MetadataProvider.getEffectMetadata(n.getCurrentPlatform(),x.getEffectType());if(gE.MetadataProvider.isBadEffectMetadata(v))return void u.push('Effect "'.concat(i,'" is not a valid effect. It was ignored and not changed.'));var b=v.getProperties();m.forEach((function(e){var t=bt.$.extractStringProperty(e,"property_name"),n=bt.$.extractStringProperty(e,"new_value");if(null!==t&&null!==n){var r=yE({properties:b,name:t}).foundProperty;if(r){var a=r.getType().toLowerCase();"number"===a?x.setDoubleParameter(t,parseFloat(n)||0):"boolean"===a?x.setBooleanParameter(t,"true"===n.toLowerCase()):x.setStringParameter(t,n),c.push('Modified "'.concat(t,'" property of the "').concat(i,'" effect to "').concat(n,'".'))}else u.push('Property not found: "'.concat(t,'" in effect "').concat(i,'". It was ignored and not changed. Make sure you only change existing effect properties.'))}else u.push('Missing "property_name" or "new_value" in an item of `changed_properties`. It was ignored and not changed. Make sure you follow the exact format for changing effect properties.')}))}if(p){var C=gE.MetadataProvider.getEffectMetadata(n.getCurrentPlatform(),p.getEffectType());gE.MetadataProvider.isBadEffectMetadata(C)||c.push('Created new "'.concat(p.getName(),'" effect on layer "').concat(t,'" at position ').concat(s||0,". It properties are: ").concat(VE(p,C).map((function(e){return JSON.stringify(e)})).join(", "),"."))}}else u.push('Missing "effect_name" in an item of changed_layer_effects. It was ignored and not changed.')}else u.push('Layer not found: "'.concat(t,'". It was ignored and no effects on it were changed.'));else u.push('Missing "layer_name" in an item of changed_layer_effects. It was ignored and not changed.')})),h&&(g=l.getObjects().getObjectGroups(),h.forEach((function(e){var t,r=bt.$.extractStringProperty(e,"group_name"),i=bt.$.extractStringProperty(e,"new_group_name"),a=bt.$.extractBooleanProperty(e,"delete_this_group"),o=bt.$.extractArrayProperty(e,"objects");if(null!==r){if(t=g.has(r)?g.get(r):g.insertNew(r,g.count()),a)g.remove(r),c.push('Deleted group "'.concat(r,'" from scene "').concat(s,'".'));else if(i&&(gE.WholeProjectRefactorer.objectOrGroupRenamedInScene(n,l,t.getName(),i,!0),t.setName(i),c.push('Renamed group "'.concat(r,'" to "').concat(i,'" in scene "').concat(s,'".'))),o){var d=o.map((function(e){return bt.$.extractStringProperty(e,"object_name")})).filter(Boolean),p=t.getAllObjectsNames().toJSArray();p.forEach((function(e){d.includes(e)||t.removeObject(e)}));var f=n.getObjects(),h=l.getObjects();d.forEach((function(e){p.includes(e)||(h.hasObjectNamed(e)||f.hasObjectNamed(e)?t.addObject(e):u.push('Object "'.concat(e,'" not found in scene "').concat(s,'", so it was not added to group "').concat(r,'".')))})),c.push('Modified objects of group "'.concat(r,'" in scene "').concat(s,'".'))}}else u.push('Missing "group_name" in an item of `changed_groups`. It was ignored and not changed. Make sure you follow the exact format for changing group properties.')})),o({scene:l})),0!==c.length||0!==u.length){e.next=19;break}return e.abrupt("return",{success:!1,message:"No changes were made."});case 19:if(!(0===c.length&&u.length>0)){e.next=23;break}return e.abrupt("return",{success:!1,message:"No changes were made because of the issues listed in the warnings.",warnings:u.join("\n")});case 23:if(!(c.length>0&&0===u.length)){e.next=27;break}return e.abrupt("return",{success:!0,message:["Successfully done the changes."].concat(c).join("\n")});case 27:return e.abrupt("return",{success:!0,message:["Successfully done some changes but some issues were found - see the warnings."].concat(c).join("\n"),warnings:u.join("\n")});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},GE={renderForEditor:function(e){var t=e.args,n=e.shouldShowDetails,r=mE(t,"variable_name_or_path"),i=mE(t,"variable_scope"),a=mE(t,"value"),o=bt.$.extractStringProperty(t,"object_name"),s=bt.$.extractStringProperty(t,"scene_name"),l=n?(0,f.jsx)(_.ak,{noMargin:!0,children:(0,f.jsxs)(N.Z,{noMargin:!0,allowSelection:!0,color:"secondary",children:[(0,f.jsx)("b",{children:(0,f.jsx)(w.Trans,{id:"Value"})}),": ",a]})}):null;return"scene"===i?{text:(0,f.jsx)(w.Trans,{id:"Add or edit scene variable {variable_name_or_path} in scene {scene_name}.",values:{variable_name_or_path:r,scene_name:s}}),details:l,hasDetailsToShow:!0}:"object"===i?{text:(0,f.jsx)(w.Trans,{id:"Add or edit object variable {variable_name_or_path} for object {object_name}.",values:{variable_name_or_path:r,object_name:o}}),details:l,hasDetailsToShow:!0}:"global"===i?{text:(0,f.jsx)(w.Trans,{id:"Add or edit global variable {variable_name_or_path}.",values:{variable_name_or_path:r}}),details:l,hasDetailsToShow:!0}:{text:(0,f.jsx)(w.Trans,{id:"Add or edit variable {variable_name_or_path}.",values:{variable_name_or_path:r}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.args,i=mE(r,"variable_name_or_path"),o=mE(r,"value"),s=bt.$.extractStringProperty(r,"variable_type"),l=mE(r,"variable_scope"),c=bt.$.extractStringProperty(r,"object_name"),u=bt.$.extractStringProperty(r,"scene_name"),"scene"!==l){e.next=15;break}if(u){e.next=10;break}return e.abrupt("return",xE('Missing "scene_name" argument, required to edit a scene variable.'));case 10:if(n.hasLayoutNamed(u)){e.next=12;break}return e.abrupt("return",xE('Scene not found: "'.concat(u,'".')));case 12:d=n.getLayout(u).getVariables(),e.next=37;break;case 15:if("object"!==l){e.next=32;break}if(c){e.next=18;break}return e.abrupt("return",xE('Missing "object_name" argument, required to edit an object variable.'));case 18:if(!u){e.next=26;break}if(n.hasLayoutNamed(u)){e.next=21;break}return e.abrupt("return",xE('Scene not found: "'.concat(u,'".')));case 21:if((p=n.getLayout(u).getObjects()).hasObjectNamed(c)){e.next=24;break}return e.abrupt("return",xE('Object not found: "'.concat(c,'" in scene "').concat(u,"\". Have you created it? For a global object, don't specify the scene name.")));case 24:e.next=29;break;case 26:if((p=n.getObjects()).hasObjectNamed(c)){e.next=29;break}return e.abrupt("return",xE('Object not found: "'.concat(c,'" in project. Have you created it or forgot to specify the scene name?')));case 29:d=p.getObject(c).getVariables(),e.next=37;break;case 32:if("global"!==l){e.next=36;break}d=n.getVariables(),e.next=37;break;case 36:return e.abrupt("return",xE('Invalid "variable_scope" argument: "'.concat(l,'". Valid values are `scene`, `object` or `global`.')));case 37:return f=pE({variablePath:i,forcedVariableType:s,variablesContainer:d,value:o}),h=f.addedNewVariable,g=f.variableType,e.abrupt("return",vE(h?'Properly added variable "'.concat(i,'" of type "').concat(g,'".'):'Properly edited variable "'.concat(i,'".')));case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},YE={renderForEditor:function(e){var t=e.args,n=bt.$.extractStringProperty(t,"extension_names");return{text:(0,f.jsx)(w.Trans,{id:"Inspecting {extension_names} features and capabilities.",values:{extension_names:n}})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.args,e.abrupt("return",xE("Unable to read full documentation - continue with your existing GDevelop knowledge."));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},qE={renderForEditor:function(e){var t=e.args,n=mE(t,"project_name");return{text:(0,f.jsx)(w.Trans,{id:'Initializing a new game project "<0>{project_name}</0>".',values:{project_name:n},components:[(0,f.jsx)("b",{})]})}},launchFunction:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.args,r=t.editorCallbacks,t.i18n,i=mE(n,"project_name"),o=mE(n,"template_slug"),s=bt.$.extractBooleanProperty(n,"also_read_existing_events"),e.prev=4,l=["","none","empty"].includes(o.toLowerCase())?null:o,e.next=8,(0,fE.x)({times:2},(function(){return r.onCreateProject({name:i,exampleSlug:l})}));case 8:if(c=e.sent,u=c.exampleSlug,d=c.createdProject){e.next=13;break}throw new Error("Unexpected null project after creation.");case 13:return p={success:!0},s&&(f={},(0,mt.mapFor)(0,d.getLayoutsCount(),(function(e){var t=d.getLayoutAt(e),n=t.getEvents();f[t.getName()]=rE({eventsList:n})})),p.eventsAsTextByScene=f),u?(p.message='Initialized project using starter game template "'.concat(u,'".'),p.initializedProject=!0,p.initializedFromTemplateSlug=u):o?(p.message="Initialized project but this is an empty project, with 1 scene.",p.initializedProject=!0):(p.message="Initialized empty project with 1 scene.",p.initializedProject=!0),p.meta={createdProject:d},e.abrupt("return",p);case 20:return e.prev=20,e.t0=e.catch(4),e.abrupt("return",xE("Unable to initialize project. This might be because of a network error. Please try again."));case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t){return e.apply(this,arguments)}}()},JE={create_object:TE,create_or_replace_object:TE,inspect_object_properties:SE,change_object_property:IE,add_behavior:EE,remove_behavior:ME,inspect_behavior_properties:LE,change_behavior_property:AE,describe_instances:OE,put_2d_instances:FE,put_3d_instances:DE,read_scene_events:NE,add_scene_events:_E,create_scene:BE,delete_scene:UE,inspect_scene_properties_layers_effects:HE,change_scene_properties_layers_effects_groups:WE,add_or_edit_variable:GE,read_full_docs:YE},XE={initialize_project:qE},KE={functionCallText:{overflowWrap:"anywhere"}},QE=c.memo((function(e){var t,n=e.project,r=e.functionCall,i=e.editorFunctionCallResult,a=e.existingFunctionCallOutput,o=(e.onProcessFunctionCalls,e.editorCallbacks),l=c.useState(!1),u=(0,s.Z)(l,2),d=u[0],p=u[1],h=c.useContext(j.Z);try{a&&(t=JSON.parse(a.output))}catch(T){t=null}var g,m,x=!!i&&"ignored"===i.status||t&&!!t.ignored,v=!!a||!!i&&"finished"===i.status,b=i&&"finished"===i.status&&!1===i.success||t&&!1===t.success,C=!v&&!!i&&"working"===i.status,y=JE[r.name]||XE[r.name]||null,Z=!1;if(y)try{var k=y.renderForEditor({project:n,args:JSON.parse(r.arguments),editorCallbacks:o,shouldShowDetails:d});g=k.text,m=k.details,Z=k.hasDetailsToShow}catch(T){console.error("Error rendering function call:",T),g=(0,f.jsx)(w.Trans,{id:"The editor was unable to display the operation ({0}) used by the AI.",values:{0:r.name}})}else g=(0,f.jsx)(w.Trans,{id:"The AI tried to use a function of the editor that is unknown."});return(0,f.jsxs)("div",{className:YI,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(re.ZP,{title:JSON.stringify(a||i),children:(0,f.jsx)("span",{style:{width:16},children:b?(0,f.jsx)(Qm.Z,{htmlColor:h.message.error,fontSize:"small"}):x?(0,f.jsx)(co.Z,{htmlColor:h.text.color.disabled,fontSize:"small"}):v?(0,f.jsx)(co.Z,{htmlColor:h.message.valid,fontSize:"small"}):(0,f.jsx)(GI.Z,{size:16,value:100,variant:C?"indeterminate":"determinate"})})}),(0,f.jsx)(N.Z,{size:"body-small",color:"secondary",style:KE.functionCallText,children:g||(0,f.jsx)(w.Trans,{id:"Working..."})})]}),Z&&(0,f.jsx)("div",{className:qI,onClick:function(){return p(!d)},role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),p(!d))},children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[d?(0,f.jsx)(st.Z,{fontSize:"small"}):(0,f.jsx)(ot.Z,{fontSize:"small"}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body-small",color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Details"})})]})}),m&&(0,f.jsx)("div",{className:JI,children:(0,f.jsx)(H.Z,{background:"medium",elevation:0,square:!0,variant:"outlined",children:(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,color:"secondary",children:m})})})})})]})})),$E="FunctionCallsGroup_container__R+qpy",eM="FunctionCallsGroup_header__rNnVl",tM="FunctionCallsGroup_content__B+jUA",nM=function(e){var t=e.children,n=c.useState(!1),r=(0,s.Z)(n,2),i=r[0],a=r[1];return(0,f.jsxs)("div",{className:$E,children:[(0,f.jsx)("div",{className:eM,onClick:function(){return a(!i)},role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a(!i))},children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[i?(0,f.jsx)(ot.Z,{fontSize:"small"}):(0,f.jsx)(st.Z,{fontSize:"small"}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body-small",color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Implementation"})})]})}),!i&&(0,f.jsx)("div",{className:tM,children:t})]})},rM=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.81252 3.12758C7.8934 2.94848 8.07169 2.83337 8.26821 2.83337C8.77555 2.83337 9.26369 3.03164 9.62483 3.38705C9.98625 3.74273 10.1908 4.22685 10.1908 4.73336V6.10002H12.3722C12.5799 6.09814 12.7858 6.14048 12.9758 6.22441C13.1668 6.30877 13.3375 6.43327 13.4758 6.58979C13.6141 6.74633 13.7166 6.93114 13.7758 7.13159C13.8349 7.33206 13.8491 7.54297 13.8172 7.74956L13.1629 11.9495C13.1628 11.9496 13.1629 11.9493 13.1629 11.9495C13.1098 12.2932 12.9325 12.6051 12.6661 12.828C12.4005 13.0502 12.0638 13.1698 11.7178 13.1666H4.94887C4.56729 13.1666 4.19977 13.0175 3.92755 12.7497C3.65506 12.4815 3.50049 12.1161 3.50049 11.7333V8.46667C3.50049 8.08393 3.65506 7.7185 3.92755 7.45034C4.19977 7.18245 4.56729 7.03335 4.94887 7.03335H6.04863L7.81252 3.12758ZM5.87144 8.03335H4.94887C4.82739 8.03335 4.71247 8.08091 4.62898 8.16308C4.54575 8.24499 4.50049 8.35435 4.50049 8.46667V11.7333C4.50049 11.8456 4.54575 11.955 4.62898 12.0369C4.71247 12.1191 4.82739 12.1666 4.94887 12.1666H5.87144V8.03335ZM6.87144 12.1666H11.7259C11.8363 12.1679 11.9423 12.1298 12.0244 12.061C12.1064 11.9924 12.1589 11.8984 12.1745 11.7972L12.8289 7.59713C12.8289 7.59717 12.8289 7.59709 12.8289 7.59713C12.8383 7.53623 12.8342 7.47389 12.8166 7.41454C12.7991 7.35513 12.7685 7.29958 12.7264 7.25193C12.6843 7.20426 12.6316 7.1656 12.5717 7.13916C12.5119 7.11271 12.4465 7.09925 12.3803 7.09999L12.3747 7.10005L9.69078 7.10002C9.41464 7.10002 9.19078 6.87616 9.19078 6.60002V4.73336C9.19078 4.49728 9.09556 4.26921 8.9234 4.09979C8.82317 4.00115 8.70162 3.92717 8.56884 3.8825L6.87144 7.64101V12.1666Z",fill:"currentColor"})}))})),iM=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.52146 12.8724C9.44058 13.0515 9.26229 13.1666 9.06578 13.1666C8.55844 13.1666 8.0703 12.9684 7.70915 12.6129C7.34774 12.2573 7.14321 11.7731 7.14321 11.2666L7.14321 9.89998L4.96177 9.89998C4.7541 9.90186 4.54823 9.85951 4.3582 9.77558C4.16722 9.69123 3.9965 9.56673 3.8582 9.41021C3.71988 9.25367 3.61734 9.06886 3.5582 8.86841C3.49906 8.66794 3.48488 8.45702 3.51675 8.25044L4.17112 4.05053C4.17114 4.05038 4.1711 4.05068 4.17112 4.05053C4.22419 3.70684 4.40146 3.39486 4.66792 3.17197C4.93351 2.94981 5.27019 2.83023 5.61614 2.83335L12.3851 2.83335C12.7667 2.83335 13.1342 2.98245 13.4064 3.25035C13.6789 3.51851 13.8335 3.88393 13.8335 4.26668L13.8335 7.53333C13.8335 7.91607 13.6789 8.2815 13.4064 8.54966C13.1342 8.81755 12.7667 8.96665 12.3851 8.96665L11.2854 8.96665L9.52146 12.8724ZM11.4625 7.96665L12.3851 7.96665C12.5066 7.96665 12.6215 7.91909 12.705 7.83692C12.7882 7.75501 12.8335 7.64565 12.8335 7.53333L12.8335 4.26668C12.8335 4.15436 12.7882 4.04499 12.705 3.96309C12.6215 3.88092 12.5066 3.83335 12.3851 3.83335L11.4625 3.83335L11.4625 7.96665ZM10.4625 3.83335L5.60811 3.83335C5.49771 3.83212 5.39172 3.87025 5.30954 3.93899C5.22755 4.00757 5.17506 4.10158 5.15945 4.20283L4.50506 8.40287C4.50507 8.40283 4.50505 8.40291 4.50506 8.40287C4.49569 8.46377 4.49983 8.52611 4.51734 8.58546C4.53487 8.64487 4.56548 8.70042 4.60758 8.74807C4.6497 8.79574 4.70237 8.8344 4.76224 8.86084C4.82213 8.88729 4.88749 8.90075 4.95371 8.90001L4.95929 8.89995L7.64321 8.89998C7.91935 8.89998 8.14321 9.12384 8.14321 9.39998L8.14321 11.2666C8.14321 11.5027 8.23843 11.7308 8.41058 11.9002C8.51081 11.9988 8.63236 12.0728 8.76515 12.1175L10.4625 8.35899L10.4625 3.83335Z",fill:"currentColor"})}))})),aM="ChatMessages_thinkingText__hhtb5",oM="ChatMessages_feedbackButtonsContainer__9EtqZ",sM=n(81040),lM=function(e){var t=e.mode,n=e.open,r=e.onClose,i=e.onSendFeedback,a=c.useState(null),o=(0,s.Z)(a,2),l=o[0],u=o[1],d=c.useState(""),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=function(e){u(e.target.value)},x=function(){l&&(i(l,h),r())};return(0,f.jsx)(w.I18n,{children:function(e){var i=e.i18n;return(0,f.jsx)(E.ZP,{title:"agent"===t?(0,f.jsx)(w.Trans,{id:"What went wrong?"}):(0,f.jsx)(w.Trans,{id:"What could be improved?"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:r},"cancel"),(0,f.jsx)(E.vF,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Send feedback"}),onClick:x,disabled:!l},"send")],open:n,onRequestClose:r,maxWidth:"sm",children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{children:"agent"===t?(0,f.jsx)(w.Trans,{id:"The AI agent is in beta. Help us make it better by telling us what went wrong:"}):(0,f.jsx)(w.Trans,{id:"Help us improve by telling us what could be improved:"})}),(0,f.jsxs)(oC.Z,{value:l||"",onChange:m,children:["agent"===t?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(iC.Z,{value:"not-as-good-as-it-could-be",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"The result wasn't as good as it could have been"})}),(0,f.jsx)(iC.Z,{value:"too-little-work",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"It didn't do enough"})}),(0,f.jsx)(iC.Z,{value:"does-not-work",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"It didn't work at all"})}),(0,f.jsx)(iC.Z,{value:"too-much-modified-or-broken",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"Too many things were changed or broken"})})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(iC.Z,{value:"not-in-my-language",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"The answer is not in my language"})}),(0,f.jsx)(iC.Z,{value:"non-existing-things",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"Some things in the answer don't exist in GDevelop"})}),(0,f.jsx)(iC.Z,{value:"not-as-good-as-it-could-be",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"The answer is not as good as it could be"})}),(0,f.jsx)(iC.Z,{value:"very-wrong-answer",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"The answer is entirely wrong"})}),(0,f.jsx)(iC.Z,{value:"out-of-scope",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"The answer is out of scope for GDevelop"})}),(0,f.jsx)(iC.Z,{value:"too-short",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"The answer is too short"})}),(0,f.jsx)(iC.Z,{value:"too-long",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"The answer is too long"})})]}),(0,f.jsx)(iC.Z,{value:"other",control:(0,f.jsx)(aC.Z,{color:"secondary"}),label:(0,f.jsx)(w.Trans,{id:"Other reason"})})]}),(0,f.jsx)(sM.Q,{label:i._({id:"More details (optional)"}),value:h,onChange:function(e){return g(e)},rows:5,maxLength:1e4})]})})}})},cM="FeedbackBanner_feedbackBannerContainer__bN2M8",uM="FeedbackBanner_textAndButtonsContainer__3Y5YH",dM={paper:{flex:1,display:"flex"}},pM=function(e){var t=e.onSendFeedback,n=c.useState(null),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=c.useContext(j.Z),l=c.useState(!1),u=(0,s.Z)(l,2),d=u[0],p=u[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:cM,children:(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"center",children:(0,f.jsx)(H.Z,{background:"dark",variant:"outlined",style:dM.paper,children:(0,f.jsx)(M.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,f.jsxs)("div",{className:uM,children:[(0,f.jsx)(N.Z,{size:"sub-title",color:"inherit",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Did it work?"})}),(0,f.jsxs)(M.x1,{alignItems:"center",noMargin:!0,neverShrink:!0,children:[(0,f.jsx)($.Z,{tooltip:{id:"This was helpful"},onClick:function(){a("like"),t("like")},color:"inherit",size:"small",children:(0,f.jsx)(rM,{htmlColor:"like"===i?o.message.valid:void 0})}),(0,f.jsx)($.Z,{tooltip:{id:"There was a problem"},onClick:function(){p(!0)},color:"inherit",size:"small",children:(0,f.jsx)(iM,{htmlColor:"dislike"===i?o.message.warning:void 0})})]})]})})})})}),d&&(0,f.jsx)(lM,{mode:"agent",open:d,onClose:function(){return p(!1)},onSendFeedback:function(e,n){p(!1),t("dislike",e,n),a("dislike")}})]})},fM=n(14331),hM=n(59202),gM=n(84482),mM=n(62903),xM={subscriptionPaper:{paddingTop:5,paddingLeft:16,paddingRight:16,paddingBottom:5},assistantChatBubbleLight:{background:"linear-gradient(90deg, #F5F5F7 77%, #EAE3FF 100%)"},assistantChatBubbleDark:{background:"linear-gradient(90deg, #25252E 0%, #312442 100%)"}},vM=c.memo((function(e){var t=e.aiRequest,n=e.onSendFeedback,i=e.editorFunctionCallResults,a=e.onProcessFunctionCalls,o=e.editorCallbacks,u=e.project,d=e.onUserRequestTextChange,p=e.shouldBeWorkingIfNotPaused,h=e.isPaused,g=e.isForAnotherProject,m=e.shouldDisplayFeedbackBanner,x=e.onPause,v=e.onScrollToBottom,b=e.hasStartedRequestButCannotContinue,C=e.onSwitchedToGDevelopCredits,y=c.useContext(j.Z),Z="light"===y.palette.type,k=c.useContext(mo.J),S=k.getSubscriptionPlansWithPricingSystems,P=k.openSubscriptionDialog,I=S(),E=c.useContext($n.ZP),L=E.subscription,A=E.limits,O=A?A.credits.userBalance.amount:0,R=A&&A.quotas&&A.quotas["consumed-ai-credits"]||null,F=!!R&&R.limitReached,B=c.useContext(D.ZP),U=B.values.automaticallyUseCreditsForAiRequests,V=B.setAutomaticallyUseCreditsForAiRequests,z=c.useContext(mM.q$).openCreditsPackageDialog,W=c.useMemo((function(){if(!I||0===I.length||!F||L&&!(0,er.Lf)(L)||!b)return null;var e=I.find((function(e){return"gdevelop_gold"===e.id})),t=I.find((function(e){return"gdevelop_startup"===e.id}));return(L&&"gdevelop_gold"===L.planId?t:e)||I[0]}),[I,L,F,b]),G=I&&F&&b;c.useEffect((function(){G&&v()}),[G,v]);var Y=t.output.length-1,q=m&&(0,f.jsx)(pM,{onSendFeedback:function(e,r,i){n(t.id,Y,e,r,i)}},"feedback-banner-".concat(t.id,"-").concat(Y)),J=c.useState({}),X=(0,s.Z)(J,2),K=X[0],Q=X[1],ee=c.useState(null),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=c.useMemo((function(){return t?function(e){for(var t=e.aiRequest,n=new Map,r=new Map,i=0;i<t.output.length;i++){var a=t.output[i];if("message"===a.type&&"assistant"===a.role)a.content.forEach((function(e){"function_call"===e.type&&(n.set(e,null),r.set(e.call_id,e))}));else if("function_call_output"===a.type){var o=r.get(a.call_id);r.delete(a.call_id),o&&n.set(o,a)}}return n}({aiRequest:t}):new Map}),[t]),ae=c.useMemo((function(){var e=[],n=[],a=function(){n.length>0&&(e.push({type:"function_call_group",items:n}),n=[])};return t.output.forEach((function(o,s){var l=s===t.output.length-1;if("message"===o.type&&"user"===o.role)a(),e.push({type:"user_message",messageIndex:s,message:o});else if("message"===o.type&&"assistant"===o.role){var c=[];o.content.forEach((function(t,a){if("function_call"===t.type){var u=ie.get(t),d=!u&&i&&i.find((function(e){return e.call_id===t.call_id}))||null;n.push({key:"messageIndex".concat(s,"-").concat(a),messageContent:t,existingFunctionCallOutput:u,editorFunctionCallResult:d})}else n.length>0&&(c=(0,r.Z)(n),n=[]),e.push({type:"message_content",messageIndex:s,messageContentIndex:a,message:o,messageContent:t,isLastMessage:l,functionCallItems:c.length>0?c:void 0}),c=[]}))}if(("function_call_output"===o.type||"message"===o.type&&"assistant"===o.role)&&o.suggestions){var u=o.suggestions&&o.suggestions.explanationMessage&&n.length>0?(0,r.Z)(n):void 0;u?n=[]:a(),e.push({type:"suggestions",messageIndex:s,message:o,onlyShowExplanationMessage:!l,functionCallItems:u})}l&&a()})),e}),[t,i,ie]),oe=!!p&&!h||g;return(0,f.jsxs)(f.Fragment,{children:[ae.flatMap((function(e,i){if("user_message"===e.type){var s=e.messageIndex,c=e.message;return[(0,f.jsx)(M.x1,{justifyContent:"flex-end",children:(0,f.jsx)(EI,{role:"user",children:(0,f.jsx)(WI,{source:c.content.map((function(e){return e.text})).join("\n")})})},s)]}if("function_call_group"===e.type)return[(0,f.jsx)(M.x1,{justifyContent:"flex-start",children:(0,f.jsx)(EI,{role:"assistant",children:(0,f.jsx)(nM,{children:e.items.map((function(e){var t=e.key,n=e.messageContent,r=e.existingFunctionCallOutput,i=e.editorFunctionCallResult;return(0,f.jsx)(QE,{project:u,onProcessFunctionCalls:a,functionCall:n,editorFunctionCallResult:i,existingFunctionCallOutput:r,editorCallbacks:o},t)}))},"group-".concat(i))})},"group-line-".concat(i))];if("message_content"===e.type){var p=e.messageIndex,h=e.messageContentIndex,g=e.messageContent,m=e.isLastMessage,x=e.functionCallItems,v="messageIndex".concat(p,"-").concat(h);if("output_text"===g.type){var b="".concat(p,"-").concat(h),C=K[b],j=g.text.trim();return j?[(0,f.jsx)(M.x1,{justifyContent:"flex-start",children:(0,f.jsx)(EI,{role:"assistant",feedbackButtons:(0,f.jsxs)("div",{className:oM,children:[(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Copy"},onClick:function(){navigator.clipboard.writeText(g.text)},children:(0,f.jsx)(Xt.Z,{fontSize:"small"})}),(0,f.jsx)($.Z,{size:"small",tooltip:{id:"This was helpful"},onClick:function(){Q((0,l.Z)((0,l.Z)({},K),{},(0,Qt.Z)({},b,"like"))),n(t.id,p,"like")},children:(0,f.jsx)(rM,{fontSize:"small",htmlColor:"like"===C?y.message.valid:void 0})}),(0,f.jsx)($.Z,{size:"small",tooltip:{id:"This needs improvement"},onClick:function(){Q((0,l.Z)((0,l.Z)({},K),{},(0,Qt.Z)({},b,"dislike"))),re({aiRequestId:t.id,messageIndex:p})},children:(0,f.jsx)(iM,{fontSize:"small",htmlColor:"dislike"===C?y.message.warning:void 0})})]}),children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[x&&x.length>0&&(0,f.jsx)(nM,{children:x.map((function(e){var t=e.key,n=e.messageContent,r=e.existingFunctionCallOutput,i=e.editorFunctionCallResult;return(0,f.jsx)(QE,{project:u,onProcessFunctionCalls:a,functionCall:n,editorFunctionCallResult:i,existingFunctionCallOutput:r,editorCallbacks:o},t)}))}),(0,f.jsx)(WI,{source:j})]})})},v),m?q:null]:null}return"reasoning"===g.type?[(0,f.jsx)(M.x1,{justifyContent:"flex-start",children:(0,f.jsx)(EI,{role:"assistant",children:(0,f.jsx)(WI,{source:g.summary.text})})},v)]:null}if("suggestions"===e.type){var Z=e.messageIndex,k=e.message,S=e.onlyShowExplanationMessage,P=e.functionCallItems;return(0,r.Z)(function(e){var t=e.aiRequest,n=e.onUserRequestTextChange,r=e.disabled,i=e.message,a=e.messageIndex,o=e.onlyShowExplanationMessage,s=e.functionCallItems,l=e.project,c=e.onProcessFunctionCalls,u=e.editorCallbacks,d=[],p=i.suggestions;return p&&p.explanationMessage&&d.push((0,f.jsx)(M.x1,{justifyContent:"flex-start",children:(0,f.jsx)(EI,{role:"assistant",children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[s&&s.length>0&&(0,f.jsx)(nM,{children:s.map((function(e){var t=e.key,n=e.messageContent,r=e.existingFunctionCallOutput,i=e.editorFunctionCallResult;return(0,f.jsx)(QE,{project:l,onProcessFunctionCalls:c,functionCall:n,editorFunctionCallResult:i,existingFunctionCallOutput:r,editorCallbacks:u},t)}))}),(0,f.jsx)(WI,{source:p.explanationMessage})]})})},"".concat(a,"-suggestion-message"))),!o&&p&&p.suggestions.length&&(d.push((0,f.jsx)(M.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"What should I do next?"})})},"".concat(a,"-suggestions-title"))),d.push((0,f.jsx)(M.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,f.jsx)(_.ep,{noMargin:!0,children:p.suggestions.map((function(e,i){return(0,f.jsx)(T.Z,{onClick:function(){n(e.suggestedMessage,t.id)},label:e.title,disabled:r,color:"ai"},"suggestion-".concat(i))}))})},"".concat(a,"-suggestions")))),d}({aiRequest:t,onUserRequestTextChange:d,disabled:oe,message:k,messageIndex:Z,onlyShowExplanationMessage:S,functionCallItems:P,project:u,onProcessFunctionCalls:a,editorCallbacks:o}))}return[]})).filter(Boolean),"error"===t.status?(0,f.jsx)(M.x1,{justifyContent:"flex-start",children:(0,f.jsx)(je.Z,{kind:"error",children:(0,f.jsx)(w.Trans,{id:"The AI encountered an error while handling your request - this request was not counted in your AI usage. Try again later."})})}):p?(0,f.jsx)(M.x1,{justifyContent:"flex-start",children:(0,f.jsxs)("div",{className:aM,children:[x&&"agent"===t.mode&&(0,f.jsx)($.Z,{onClick:function(){return x(!h)},size:"small",style:{backgroundColor:h?void 0:(0,H.d)(y,"light"),borderRadius:4,padding:0},selected:h,children:h?(0,f.jsx)(fM.Z,{}):(0,f.jsx)(Cm.Z,{})}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(N.Z,{noMargin:!0,displayInlineAsSpan:!0,size:"body-small",color:"inherit",children:h?(0,f.jsx)(w.Trans,{id:"Paused"}):(0,f.jsx)(w.Trans,{id:"Thinking..."})})]})}):null,G&&(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsxs)(H.Z,{background:"medium",style:(0,l.Z)((0,l.Z)({},xM.subscriptionPaper),Z?xM.assistantChatBubbleLight:xM.assistantChatBubbleDark),children:[W&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(Ts,{size:20,sad:!0})}),(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"You don't have enough AI credits to continue this conversation."})}),(0,f.jsx)(N.Z,{children:L?(0,f.jsx)(w.Trans,{id:"Upgrade your Premium subscription to have more AI requests and GDevelop coins to unlock the engine's extra benefits."}):(0,f.jsx)(w.Trans,{id:"Get a Premium subscription to have more AI requests and GDevelop coins to unlock the engine's extra benefits."})}),(0,f.jsx)(hM.Z,{subscriptionPlanWithPricingSystems:W,displayedFeatures:["AI_PROTOTYPING","FREE_CREDITS"],hideFullTableLink:!0,actionLabel:(0,f.jsx)(w.Trans,{id:"Upgrade"})})]}),W&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"horizontal"})})}),(0,f.jsxs)(_.ak,{noMargin:!0,children:[W?(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"You can switch to GDevelop credits."})}):(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(gM.Z,{})}),(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"You've ran out of GDevelop credits to continue this conversation."})})]}),(0,f.jsx)(N.Z,{noMargin:!0,color:"secondary",children:O>0?(0,f.jsx)(w.Trans,{id:"You still have {availableCredits} credits you can use for AI requests.",values:{availableCredits:O}}):(0,f.jsx)(w.Trans,{id:"You don't have any credits available. You can purchase GDevelop credits to continue making AI requests."})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"What would you like to do next?"})})}),(0,f.jsx)(T.Z,{color:"ai",onClick:function(){P({analyticsMetadata:{reason:"AI requests (subscribe)",recommendedPlanId:W?W.id:"gdevelop_gold",placementId:"ai-requests"}})},label:(0,f.jsx)(w.Trans,{id:"See subscriptions"})}),O>0?(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(gM.Z,{fontSize:"small"}),color:"ai",onClick:function(){V(!0),C()},label:U?(0,f.jsx)(w.Trans,{id:"Using GDevelop Credits"}):(0,f.jsx)(w.Trans,{id:"Switch to GDevelop Credits"}),disabled:U}):(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(gM.Z,{fontSize:"small"}),color:"ai",onClick:z,label:(0,f.jsx)(w.Trans,{id:"Get more credits"}),disabled:!1})]})]})}),ne&&(0,f.jsx)(lM,{mode:t.mode||"chat",open:!0,onClose:function(){return re(null)},onSendFeedback:function(e,t){n(ne.aiRequestId,ne.messageIndex,"dislike",e,t)}})]})})),bM=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9113 2.25541C13.068 2.36185 13.151 2.54765 13.1259 2.73536L11.6907 13.4473C11.6623 13.6594 11.5021 13.8298 11.2923 13.8714C11.0824 13.913 10.8694 13.8164 10.7623 13.6312L8.19675 9.19375L3.12638 8.44262C2.91475 8.41126 2.74652 8.24874 2.70788 8.03833C2.66923 7.82791 2.76875 7.61622 2.95543 7.51172L12.3861 2.23267C12.5513 2.14017 12.7547 2.14897 12.9113 2.25541ZM4.72309 7.66824L8.58206 8.23991C8.73292 8.26226 8.86532 8.35223 8.94165 8.48425L10.8942 11.8615L12.0019 3.59372L4.72309 7.66824Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.91385 6.66672C10.1423 6.82191 10.2016 7.13289 10.0464 7.36129L9.01602 8.87768C8.86083 9.10608 8.54985 9.16542 8.32145 9.01022C8.09305 8.85503 8.0337 8.54405 8.1889 8.31565L9.21928 6.79926C9.37448 6.57086 9.68545 6.51152 9.91385 6.66672Z",fill:"currentColor"})]}))})),CM=function(e){var t=e.getAiSettings,n=e.limits,r=t();return r?n?r.aiRequest.presets.map((function(e){var t=n.capabilities.ai.availablePresets.find((function(t){return t.id===e.id&&t.mode===e.mode}));return(0,l.Z)((0,l.Z)({},e),{},{disabled:t&&void 0!==t.disabled?t.disabled:e.disabled,enableWith:t&&t.enableWith||null})})):r.aiRequest.presets.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{enableWith:null,disabled:!e.isDefault})})):[]},jM=function(e){var t=e.chosenOrDefaultAiConfigurationPresetId,n=e.setAiConfigurationPresetId,r=e.aiConfigurationPresetsWithAvailability,i=e.aiRequestMode,a=e.disabled,o=r.filter((function(e){return e.mode===i}));c.useEffect((function(){var e=o.find((function(e){return e.id===t}));if(e&&e.disabled){var r=o.find((function(e){return!e.disabled}));r&&n(r.id)}}),[t,o,n]);var s=o.filter((function(e){return!e.disabled||"higher-tier-plan"!==e.enableWith})),l=o.filter((function(e){return e.disabled&&"higher-tier-plan"===e.enableWith}));return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(fe.Z,{value:t,onChange:function(e){n(e)},disabled:a,children:[s.map((function(e){return(0,f.jsx)(P.Z,{value:e.id,label:(0,vo.a)(r,e.nameByLocale),disabled:e.disabled,shouldNotTranslate:!0},e.id)})),l.length>0&&(0,f.jsx)("optgroup",{label:r._({id:"Upgrade for:"}),children:l.map((function(e){return(0,f.jsx)(P.Z,{value:e.id,label:(0,vo.a)(r,e.nameByLocale),disabled:e.disabled,shouldNotTranslate:!0},e.id)}))},"upgrade")]})}})},yM=n(98769),ZM=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"28",height:"27",viewBox:"8 8 12 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M13.9004 8.64441L18.5064 13.6601L13.9004 14.7856V8.64441Z",fill:"#FFF69B"}),(0,f.jsx)("path",{d:"M13.9004 18.9861L9.2944 13.6602L13.9004 14.7857L13.9004 18.9861Z",fill:"#D39902"}),(0,f.jsx)("path",{d:"M13.9009 8.64509V14.7862L9.29492 13.6607L13.9009 8.64509Z",fill:"#FED501"}),(0,f.jsx)("path",{d:"M13.8999 18.9859L13.8999 14.7856L18.5059 13.66L13.8999 18.9859Z",fill:"#FED501"})]}))})),kM={chatScrollView:{display:"flex",flexDirection:"column",paddingLeft:8,paddingRight:8,paddingBottom:8,paddingTop:14,maskImage:"linear-gradient(to bottom, transparent, black 14px)",maskSize:"100% 100%",maskRepeat:"no-repeat"},creditOrSubscriptionPaper:{margin:2,display:"flex",alignItems:"center"}},wM=function(e){var t=e.standAloneForm;return{rows:t?2:5,height:t?93:153}},TM=[{id:"Add solid rocks that falls from the sky at a random position around the player every 0.5 seconds"},{id:"Add a score and display it on the screen"},{id:"Create a 3D explosion when the player is hit"}],SM=[{id:"Start a simple platformer with a player that can move and jump"},{id:"Begin a top-down adventure with one controllable character."},{id:"Start a game where a ball can bounce around the screen"},{id:"Start a quizz game with a question and 4 answers"},{id:"Make a minimal 3D shooter"},{id:"Start a simple endless runner game"},{id:"Begin a driving game with a controllable car"},{id:"Create a simple flying game with obstacles to avoid"}],PM=[{id:"How to add a leaderboard?"},{id:"How to display the health of my player?"},{id:"How to add an explosion when an enemy is destroyed?"},{id:"How to create a main menu for my game?"}],IM=[{id:"What would you add to my game?"},{id:"How to make my game more fun?"},{id:"What is a good GDevelop feature I could use in my game?"}],EM=c.forwardRef((function(e,t){var n=e.aiConfigurationPresetsWithAvailability,r=e.project,i=e.aiRequest,u=e.isSending,d=e.onStartNewAiRequest,p=e.onSendUserMessage,h=e.onSendFeedback,g=e.onStartOrOpenChat,m=e.quota,x=e.increaseQuotaOffering,v=e.lastSendError,b=e.price,C=e.availableCredits,j=e.hasOpenedProject,Z=e.editorFunctionCallResults,k=e.onProcessFunctionCalls,S=e.isAutoProcessingFunctionCalls,I=e.setAutoProcessFunctionCalls,E=(e.i18n,e.editorCallbacks),L=e.standAloneForm,A=c.useContext(yM.X0).aiRequestHistory,O=A.handleNavigateHistory,R=A.resetNavigation,F=c.useState(i&&i.mode||(j?"chat":"agent")),B=(0,s.Z)(F,2),U=B[0],V=B[1],z=c.useContext(D.ZP),W=z.values.automaticallyUseCreditsForAiRequests,Y=z.setAutomaticallyUseCreditsForAiRequests,q=c.useContext(mo.J).openSubscriptionDialog,J=c.useContext(mM.q$).openCreditsPackageDialog,X=c.useState(!1),K=(0,s.Z)(X,2),Q=K[0],$=K[1],ee=c.useState(!1),te=(0,s.Z)(ee,2),ne=te[0],ie=te[1],ae=(0,Ye.Z)().showConfirmation,oe=c.useState(null),se=(0,s.Z)(oe,2),le=se[0],ce=se[1];c.useEffect((function(){n.length&&le&&(n.find((function(e){return e.id===le&&e.mode===U}))||(console.info("Reset the AI configuration preset because it's not valid for the current mode."),ce(null)))}),[U,n,le]);var ue=i?i.id:"",de=c.useState({}),he=(0,s.Z)(de,2),ge=he[0],me=he[1],xe=c.useRef(null),ve=c.useState(!0),Ce=(0,s.Z)(ve,2),ye=Ce[0],Ze=Ce[1],ke=i&&i.gameId||null,we=c.useCallback((function(){xe.current&&xe.current.scrollToBottom({behavior:"smooth"})}),[]);c.useEffect((function(){ye&&we()}),[we,i,Z,v,ye]);var Te=c.useCallback((function(e){var t=e.remainingScreensToBottom;Ze(t<.1)}),[]),Se=c.useMemo((function(){var e="agent"===U?j&&!L?TM:SM:j&&!L?[].concat(IM,PM):PM;return e[Math.floor(Math.random()*e.length)]}),[U,j,L]),Pe=c.useCallback((function(e,t){me((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,Qt.Z)({},t,e))})),e||R()}),[R]);c.useEffect((function(){R()}),[R,ue]),c.useImperativeHandle(t,(function(){return{resetUserInput:function(e){Pe("",e||""),we()}}}));var Ie,Ee=(0,be.UQ)().isMobile,Me=v?(0,f.jsx)(N.Z,{size:"body-small",color:"error",children:(0,f.jsx)(w.Trans,{id:"An error happened when sending your request, please try again."})}):null,Le=function(e){var t=e.quota,n=e.price,r=e.availableCredits,i=(e.selectedMode,e.automaticallyUseCreditsForAiRequests);if(!t||!n)return(0,f.jsx)("div",{style:{height:29}});var a=Math.max(0,t.max-t.current),o=(0,f.jsx)(w.Trans,{id:"{aiCreditsAvailable} AI credits available",values:{aiCreditsAvailable:a}}),s=(0,f.jsx)(w.Trans,{id:"{0} credits available",values:{0:Math.max(0,r)}}),l=t.resetsAt?new Date(t.resetsAt):null,c=new Date,u="7days"===t.period?(0,f.jsx)(w.Trans,{id:"Your credits reset every week."}):"30days"===t.period?(0,f.jsx)(w.Trans,{id:"Your credits reset every month."}):(0,f.jsx)(w.Trans,{id:"Your credits reset every day."});if(l){var d=l.getTime()-c.getTime(),p=l.toLocaleDateString(void 0,{month:"short",day:"numeric"}),h=l.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1});u=d<=0?(0,f.jsx)(w.Trans,{id:"Your credits will reset soon."}):(0,f.jsx)(w.Trans,{id:"You need to wait until {dateString} at {timeString} to reset to {0} AI credits.",values:{0:t.max,dateString:p,timeString:h}})}var g=(0,f.jsxs)(_.ak,{noMargin:!0,children:[u&&(0,f.jsx)(M.x1,{noMargin:!0,children:u}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(pe.Z,{href:(0,fp.vA)("/interface/ai/","cost-of-ai-requests"),color:"secondary",onClick:function(){return y.ZP.openExternalURL((0,fp.vA)("/interface/ai/","cost-of-ai-requests"))},children:"Learn more"})})]}),m=t.limitReached&&i;return(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[m&&(0,f.jsx)(gM.Z,{fontSize:"small"}),(0,f.jsxs)(N.Z,{size:"body-small",color:"secondary",noMargin:!0,children:[m?s:o,(0,f.jsx)("span",{style:{verticalAlign:"middle",display:"inline-block",marginRight:-3,marginTop:1},children:(0,f.jsx)(re.ZP,{title:g,placement:"top",interactive:!0,children:(0,f.jsx)(cp.Z,{color:"inherit"})})})]})]})}({quota:m,price:b,availableCredits:C,selectedMode:U,automaticallyUseCreditsForAiRequests:W}),Ae=le||function(e,t){var n=t.find((function(t){return t.isDefault&&t.mode===e}));return n&&n.id||"default"}(U,n),Oe=i&&ZI({aiRequest:i,editorFunctionCallResults:Z}).length>0,Re=Z&&Z.some((function(e){return"working"===e.status})),Fe=i&&kI(Z).hasUnfinishedResult||!!Re||!!Oe||!!i&&"working"===i.status,De=!!i&&!S,Ne=u||Fe&&!De,_e=!!b&&C<b.priceInCredits,Be=!!m&&m.limitReached&&(!W||_e),Ue=!!ke&&(!r||ke!==r.getProjectUuid()),Ve=Q&&!ne||Ne||!ge[ue],He=Q&&(!ne||_e)&&!i,ze=function(e){var t=e.aiRequest,n=e.selectedMode,r=e.isWorking,i=e.isMobile,a=e.hasOpenedProject,o=e.standAloneForm;return t&&!o?{label:null,icon:(0,f.jsx)(bM,{fontSize:"small"})}:"agent"===n?r?{label:(0,f.jsx)(w.Trans,{id:"Building..."}),icon:(0,f.jsx)(bM,{fontSize:"small"})}:i?{label:(0,f.jsx)(w.Trans,{id:"Build"}),icon:(0,f.jsx)(bM,{fontSize:"small"})}:a&&!o?{label:(0,f.jsx)(w.Trans,{id:"Build this on my game"}),icon:(0,f.jsx)(bM,{fontSize:"small"})}:{label:(0,f.jsx)(w.Trans,{id:"Start building the game"}),icon:(0,f.jsx)(bM,{fontSize:"small"})}:r?{label:(0,f.jsx)(w.Trans,{id:"Sending..."}),icon:(0,f.jsx)(bM,{fontSize:"small"})}:{label:(0,f.jsx)(w.Trans,{id:"Send"}),icon:(0,f.jsx)(bM,{fontSize:"small"})}}({aiRequest:i,selectedMode:U,isWorking:Ne,isMobile:Ee,hasOpenedProject:j,standAloneForm:L}),We=ze.label,Ge=ze.icon,qe=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(we(),$(Be),!Be){e.next=4;break}return e.abrupt("return");case 4:if(!j||!L){e.next=10;break}return e.next=7,ae({title:{id:"Start a new game?"},message:{id:"This will close your current project. Unsaved changes will be lost."},confirmButtonLabel:{id:"Continue"}});case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:d({userRequest:ge[""],aiConfigurationPresetId:Ae,mode:U});case 11:case"end":return e.stop()}}),e)}))),[d,ge,Ae,we,Be,j,ae,U,L]),Je=c.useCallback((function(){we(),$(Be),Be||(I(!0),p({userMessage:ge[ue]||"",mode:U}))}),[ue,p,ge,we,I,Be,U]);if(!i||L)return(0,f.jsxs)("div",{className:en()((Ie={},(0,Qt.Z)(Ie,CI,!0),(0,Qt.Z)(Ie,"avoid-soft-keyboard",!0),Ie)),children:[(0,f.jsxs)(_.ak,{justifyContent:"center",expand:!0,noMargin:!0,children:[!L&&(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"center",children:(0,f.jsx)(Ts,{rotating:!0,size:40})}),!L&&(0,f.jsx)(M.sg,{noMargin:!0,alignItems:"center",children:(0,f.jsx)(N.Z,{size:"bold-title",align:"center",children:(0,f.jsx)(w.Trans,{id:"What do you want to make?"})})}),(0,f.jsx)("form",{onSubmit:qe,children:(0,f.jsxs)(_.ak,{noMargin:!0,alignItems:"stretch",justifyContent:"stretch",children:[He?(0,f.jsx)("div",{className:en()((0,Qt.Z)({},yI,!0)),children:(0,f.jsx)(H.Z,{background:"light",style:(0,l.Z)((0,l.Z)({},kM.creditOrSubscriptionPaper),{},{minHeight:wM({standAloneForm:L}).height}),children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsxs)(_.pJ,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(Ts,{size:24,sad:!0}),(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{children:W?(0,f.jsx)(w.Trans,{id:"You've ran out of GDevelop Credits."}):(0,f.jsx)(w.Trans,{id:"You've ran out of free AI requests."})}),(0,f.jsx)(N.Z,{children:W?"subscribe"===x?(0,f.jsx)(w.Trans,{id:"Get a subscription to keep building with AI."}):"upgrade"===x?(0,f.jsx)(w.Trans,{id:"Upgrade your subscription to keep building with AI."}):(0,f.jsx)(w.Trans,{id:"Get more GDevelop credits to keep building with AI."}):(0,f.jsx)(w.Trans,{id:"Switch to GDevelop credits or keep building with AI."})})]})]}),W?"none"!==x?(0,f.jsx)(G.Z,{icon:(0,f.jsx)(ZM,{fontSize:"small"}),primary:!0,onClick:function(){q({analyticsMetadata:{reason:"AI requests (subscribe)",recommendedPlanId:"gdevelop_gold",placementId:"ai-requests"}})},label:"subscribe"===x?(0,f.jsx)(w.Trans,{id:"Get subscription"}):(0,f.jsx)(w.Trans,{id:"Upgrade subscription"})}):(0,f.jsx)(G.Z,{icon:(0,f.jsx)(gM.Z,{fontSize:"small"}),primary:!0,onClick:function(){return J()},label:(0,f.jsx)(w.Trans,{id:"Get more credits"})}):(0,f.jsx)(T.Z,{leftIcon:(0,f.jsx)(gM.Z,{fontSize:"small"}),primary:!0,onClick:function(){Y(!0),ie(!0)},label:(0,f.jsx)(w.Trans,{id:"Use GDevelop Credits"}),noBackground:!0})]})})})}):(0,f.jsx)(bI,{maxLength:6e3,value:ge[""]||"",disabled:Ne,neonCorner:!0,hasAnimatedNeonCorner:Ne,errored:!!v,onChange:function(e){Pe(e,"")},onNavigateHistory:O,onSubmit:qe,placeholder:Ne?{id:"Thinking about your request..."}:Se,rows:wM({standAloneForm:L}).rows,controls:(0,f.jsx)(M.sg,{children:(0,f.jsxs)(_.pJ,{alignItems:"flex-end",justifyContent:"space-between",children:[(0,f.jsx)(jM,{chosenOrDefaultAiConfigurationPresetId:Ae,setAiConfigurationPresetId:ce,aiConfigurationPresetsWithAvailability:n,aiRequestMode:U,disabled:Ne}),(0,f.jsx)(G.Z,{color:"primary",icon:Ge,label:We,style:{flexShrink:0},disabled:Ve,onClick:qe})]})})}),(0,f.jsxs)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(M.sg,{noMargin:!0,children:!L&&(0,f.jsxs)(fe.Z,{disabled:Ne,value:U,onChange:function(e){"chat"!==e&&"agent"!==e||V(e)},renderOptionIcon:function(e){return"chat"===U?(0,f.jsx)(wI,{className:e}):(0,f.jsx)(TI.Z,{className:e})},rounded:!0,children:[(0,f.jsx)(P.Z,{value:"chat",label:{id:"Ask"}},"chat"),(0,f.jsx)(P.Z,{value:"agent",label:{id:"Build"}},"agent")]})}),(0,f.jsx)(M.sg,{noMargin:!0,children:Me||Le})]})]})})]}),!L&&(0,f.jsxs)(M.sg,{justifyContent:"center",children:[(0,f.jsx)(N.Z,{size:"body-small",color:"secondary",align:"center",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"The AI is experimental and still being improved. <0>It can inspect your game objects and events.</0>",components:[(0,f.jsx)(pe.Z,{href:(0,fp.vA)("/interface/ai"),color:"secondary",onClick:function(){return y.ZP.openExternalURL((0,fp.vA)("/interface/ai"))}})]})}),(0,f.jsx)(N.Z,{size:"body-small",color:"secondary",align:"center",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Changes and answers may have mistakes: experiment and use it for learning."})})]})]});var Xe=i.output.filter((function(e){return"message"===e.type&&"user"===e.role})).length,Ke=ZI({aiRequest:i,editorFunctionCallResults:Z}),Qe=!S&&Ke.length>0,$e=!Re&&!Qe&&!u&&"ready"===i.status&&"agent"===i.mode,et=Ue?(0,f.jsx)(N.Z,{size:"body-small",color:"secondary",align:"center",children:(0,f.jsx)(w.Trans,{id:"This request is for another project. <0>Start a new chat</0> to build on a new project.",components:[(0,f.jsx)(pe.Z,{href:"#",onClick:function(){return g({aiRequestId:null})}})]})}):null;return(0,f.jsxs)("div",{className:en()((0,Qt.Z)({},jI,!0)),children:[(0,f.jsxs)(ft.Z,{ref:xe,style:kM.chatScrollView,onScroll:Te,children:[(0,f.jsx)(vM,{aiRequest:i,onSendFeedback:h,editorFunctionCallResults:Z,editorCallbacks:E,project:r,onProcessFunctionCalls:k,onUserRequestTextChange:Pe,isPaused:De,shouldBeWorkingIfNotPaused:Fe||Ne,isForAnotherProject:Ue,shouldDisplayFeedbackBanner:$e,onPause:function(e){return I(!e)},onScrollToBottom:we,hasStartedRequestButCannotContinue:Q,onSwitchedToGDevelopCredits:function(){return ie(!0)}}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(_.ak,{noMargin:!0,children:Xe>=15?(0,f.jsx)(je.Z,{kind:Xe>=20?"error":"warning",children:(0,f.jsx)(w.Trans,{id:"The chat is becoming long - consider creating a new chat to ask other questions. The AI will better analyze your game and request in a new chat."})}):null})]}),(0,f.jsx)("form",{onSubmit:Je,className:en()({"avoid-soft-keyboard":!0}),children:(0,f.jsxs)(_.ak,{justifyContent:"stretch",alignItems:"stretch",noMargin:!0,children:[!L&&(0,f.jsx)(bI,{maxLength:6e3,value:ge[ue]||"",disabled:Ne||Ue,errored:!!v,neonCorner:!0,hasAnimatedNeonCorner:Ne,onChange:function(e){return Pe(e,ue)},onNavigateHistory:O,placeholder:"agent"===i.mode?Ue?{id:"You must re-open the project to continue this chat."}:Ne?{id:"Thinking about your request..."}:{id:"Specify something more to the AI to build"}:{id:"Ask a follow up question"},rows:2,maxRows:6,onSubmit:Je,controls:(0,f.jsx)(M.sg,{children:(0,f.jsx)(_.pJ,{alignItems:"center",justifyContent:"flex-end",children:(0,f.jsx)(G.Z,{color:"primary",disabled:Ve,icon:Ge,label:We,onClick:Je})})})}),(0,f.jsxs)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsxs)(fe.Z,{disabled:Ne,value:U,onChange:function(e){"chat"!==e&&"agent"!==e||V(e)},renderOptionIcon:function(e){return"chat"===U?(0,f.jsx)(wI,{className:e}):(0,f.jsx)(TI.Z,{className:e})},rounded:!0,children:[(0,f.jsx)(P.Z,{value:"chat",label:{id:"Ask"}},"chat"),(0,f.jsx)(P.Z,{value:"agent",label:{id:"Build"}},"agent")]})}),(0,f.jsx)(M.sg,{noMargin:!0,children:et||Me||Le})]})]})})]})})),MM=n(39688),LM=n(58336),AM=function(e){var t,n={type:(t=e.getType(),"expression"===t?"number":"object"===t||"objectPtr"===t||"objectList"===t||"objectListOrEmptyIfJustDeclared"===t||"objectListOrEmptyWithoutPicking"===t?"object":t)};return e.getDescription()&&(n.description=e.getDescription()),e.getName()&&(n.name=e.getName()),e.isCodeOnly()&&(n.isCodeOnly=!0),e.isOptional()&&(n.isOptional=!0),e.getExtraInfo()&&(n.extraInfo=e.getExtraInfo()),n},OM=function(e,t){var n={name:e,description:t.getDescription(),type:t.getType()};t.getLabel()&&(n.label=t.getLabel()),t.getGroup()&&(n.group=t.getGroup()),t.getMeasurementUnit().isUndefined()||(n.measurementUnit={name:t.getMeasurementUnit().getName()}),t.getChoices().size()>0&&(n.choices=(0,mt.mapVector)(t.getChoices(),(function(e){return{value:e.getValue(),label:e.getLabel()}}))),t.isHidden()&&(n.hidden=!0),t.isDeprecated()&&(n.deprecated=!0),t.isAdvanced()&&(n.advanced=!0);var r=t.getExtraInfo().toJSArray();return r.length>0&&(n.extraInfo=r),n},RM=function(e){var t=e.propertiesMetadata,n=e.propertiesContainer;return t?t.keys().toJSArray().map((function(e){var n=t.get(e);return OM(e,n)})):n?(0,mt.mapVector)(n,(function(e){return OM(e.getName(),e)})):[]},FM=function(e){var t=function(t){var n=t.getType();return n===e.Variable.String?"String":n===e.Variable.Number?"Number":n===e.Variable.Boolean?"Boolean":n===e.Variable.Structure?"Structure":n===e.Variable.Array?"Array":"unknown"},n=function(t){var n=t.getType();return n===e.Variable.Structure||n===e.Variable.Array?0===t.getChildrenCount()?"No children":1===t.getChildrenCount()?"1 child":"".concat(t.getChildrenCount()," children"):n===e.Variable.String?t.getString():n===e.Variable.Number?t.getValue().toString():n===e.Variable.Boolean?t.getBool()?"True":"False":"unknown"},i=function r(i,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Et(a)){if(a.getType()===e.Variable.Structure)return{variableName:i,type:t(a),variableChildren:a.getAllChildrenNames().toJSArray().map((function(e){var t=a.getChild(e);return r(e,t,o+1)}))};if(a.getType()===e.Variable.Array)return{variableName:i,type:t(a),variableChildren:(0,mt.mapFor)(0,a.getChildrenCount(),(function(e){var t=a.getAtIndex(e);return r(e.toString(),t,o+1)}))}}return{variableName:i,type:t(a),value:n(a)}},a=function(e){return(0,mt.mapFor)(0,e.count(),(function(t){var n=e.getNameAt(t),r=e.getAt(t);return i(n,r)})).filter(Boolean)},o=function(e){return(0,mt.mapFor)(0,e.getObjectsCount(),(function(t){return function(e){var t=a(e.getVariables()),n=e.getAllBehaviorNames().toJSArray().map((function(t){var n=e.getBehavior(t);return{behaviorName:n.getName(),behaviorType:n.getTypeName()}})).filter(Boolean),r={objectName:e.getName(),objectType:e.getType()};n.length>0&&(r.behaviors=n),t.length>0&&(r.objectVariables=t);var i=e.getConfiguration(),o=(0,mt.mapFor)(0,i.getAnimationsCount(),(function(e){return i.getAnimationName(e)||"(animation without name, animation index is: ".concat(e,")")}));return o.length>0&&(r.animationNames=o.join(", ")),r}(e.getObjectAt(t))}))},s=function(t,n){return(0,mt.mapFor)(0,t.count(),(function(r){var i=t.getAt(r),o=n.getBehaviorsOfObject(i.getName(),!0).toJSArray(),s=e.ObjectVariableHelper.mergeVariableContainers(n,i);return{objectGroupName:i.getName(),objectGroupType:n.getTypeOfObject(i.getName()),objectNames:i.getAllObjectsNames().toJSArray(),behaviors:o.length>0?o.map((function(e){return{behaviorName:e,behaviorType:n.getTypeOfBehaviorInObjectOrGroup(i.getName(),e,!0)}})):void 0,variables:s.count()>0?a(s):void 0}}))},l=function(t){var n=!0,i={},a=new e.InitialInstanceJSFunctor;if(a.invoke=function(t){var r=e.wrapPointer(t,e.InitialInstance),a=r.getObjectName();if(a){var o=r.getLayer(),s=i[o]=i[o]||{};s[a]=(s[a]||0)+1,n=!1}},t.getInitialInstances().iterateOverInstances(a),a.delete(),n)return"There are no instances of objects placed on the scene - the scene is empty.";var o=t.getLayers();return["On the scene, there are:"].concat((0,r.Z)((0,mt.mapFor)(0,o.getLayersCount(),(function(e){var t=o.getLayerAt(e),n=t.getName(),r=i[n];return[n?'- on layer "'.concat(t.getName(),'":'):"- on base layer:",r&&0!==Object.keys(r).length?Object.keys(r).map((function(e){return"  - ".concat(r[e]," ").concat(e)})).join("\n"):"  - Nothing (no instances)"].join("\n")}))),["","Inspect instances on the scene to get more details if needed."]).join("\n")};return{getSimplifiedProject:function(t,n){var r=o(t.getObjects()),i=(0,mt.mapFor)(0,t.getLayoutsCount(),(function(r){var i=t.getLayoutAt(r);return n.scopeToScene&&i.getName()!==n.scopeToScene?null:function(t,n){var r=e.ProjectScopedContainers.makeNewProjectScopedContainersForProjectAndLayout(t,n);return{sceneName:n.getName(),objects:o(n.getObjects()),objectGroups:s(n.getObjects().getObjectGroups(),r.getObjectsContainersList()),sceneVariables:a(n.getVariables()),instancesOnSceneDescription:l(n)}}(t,i)})).filter(Boolean),c=e.ProjectScopedContainers.makeNewProjectScopedContainersForProject(t);return{properties:{gameResolutionWidth:t.getGameResolutionWidth(),gameResolutionHeight:t.getGameResolutionHeight()},globalObjects:r,globalObjectGroups:s(t.getObjects().getObjectGroups(),c.getObjectsContainersList()),scenes:i,globalVariables:a(t.getVariables())}},getProjectSpecificExtensionsSummary:function(t){var n=Date.now(),i=t.getCurrentPlatform().getAllPlatformExtensions(),a=new Set((0,mt.mapFor)(0,t.getEventsFunctionsExtensionsCount(),(function(e){return t.getEventsFunctionsExtensionAt(e).getName()}))),o={extensionSummaries:(0,mt.mapVector)(i,(function(e){return a.has(e.getName())?e:null})).filter(Boolean).map((function(n){var i=n.getName(),a=t.hasEventsFunctionsExtensionNamed(i)?t.getEventsFunctionsExtension(i):null;return function(e){var t=e.gd,n=e.eventsFunctionsExtension,i=e.extension,a={},o={},s={},l=function(e){var t=e.instructionsMetadata;return t.keys().toJSArray().map((function(e){var n=t.get(e);if(n.isPrivate())return null;var r={type:e,description:n.getDescription(),parameters:(0,mt.mapFor)(0,n.getParameters().getParametersCount(),(function(e){var t=n.getParameter(e);return AM(t)}))};return n.isHidden()&&(r.hidden=!0),n.isRelevantForLayoutEvents()||(r.relevantForSceneEvents=!1),r})).filter(Boolean)},c=function(e){var t=e.expressionsMetadata;return t.keys().toJSArray().map((function(e){var n=t.get(e);if(n.isPrivate())return null;var r={type:e,description:n.getDescription(),parameters:(0,mt.mapFor)(0,n.getParameters().getParametersCount(),(function(e){var t=n.getParameter(e);return AM(t)}))};return n.isShown()||(r.hidden=!0),n.isRelevantForLayoutEvents()||(r.relevantForSceneEvents=!1),r})).filter(Boolean)};return i.getExtensionObjectsTypes().toJSArray().forEach((function(e){var o=i.getObjectMetadata(e);if(!t.MetadataProvider.isBadObjectMetadata(o)&&!o.isPrivate()){var s=e.split("::").pop()||"Unrecognized object type format",u=n?n.getEventsBasedObjects():null,d=u&&u.has(s)?u.get(s):null;a[e]={name:o.getName(),fullName:o.getFullName(),description:o.getDescription(),properties:d?RM({propertiesContainer:d.getPropertyDescriptors()}):void 0,actions:l({instructionsMetadata:o.getAllActions()}),conditions:l({instructionsMetadata:o.getAllConditions()}),expressions:[].concat((0,r.Z)(c({expressionsMetadata:o.getAllExpressions()})),(0,r.Z)(c({expressionsMetadata:o.getAllStrExpressions()})))}}})),i.getBehaviorsTypes().toJSArray().forEach((function(e){var n=i.getBehaviorMetadata(e);if(!t.MetadataProvider.isBadBehaviorMetadata(n)&&!n.isPrivate()){var a={name:n.getName(),fullName:n.getFullName(),description:n.getDescription(),properties:RM({propertiesMetadata:n.getProperties()}),sharedProperties:RM({propertiesMetadata:n.getSharedProperties()}),actions:l({instructionsMetadata:n.getAllActions()}),conditions:l({instructionsMetadata:n.getAllConditions()}),expressions:[].concat((0,r.Z)(c({expressionsMetadata:n.getAllExpressions()})),(0,r.Z)(c({expressionsMetadata:n.getAllStrExpressions()})))};n.getObjectType()&&(a.objectType=n.getObjectType()),o[e]=a}})),i.getExtensionEffectTypes().toJSArray().forEach((function(e){var n=i.getEffectMetadata(e);if(!t.MetadataProvider.isBadEffectMetadata(n)){var r={name:n.getType(),fullName:n.getFullName(),description:n.getDescription(),notWorkingForObjects:n.isMarkedAsNotWorkingForObjects(),onlyWorkingFor2D:n.isMarkedAsOnlyWorkingFor2D(),onlyWorkingFor3D:n.isMarkedAsOnlyWorkingFor3D(),unique:n.isMarkedAsUnique(),properties:RM({propertiesMetadata:n.getProperties()})};s[e]=r}})),{extensionName:i.getName(),extensionFullName:i.getFullName(),description:i.getDescription(),freeActions:l({instructionsMetadata:i.getAllActions()}),freeConditions:l({instructionsMetadata:i.getAllConditions()}),freeExpressions:[].concat((0,r.Z)(c({expressionsMetadata:i.getAllExpressions()})),(0,r.Z)(c({expressionsMetadata:i.getAllStrExpressions()}))),objects:a,behaviors:o,effects:s}}({gd:e,eventsFunctionsExtension:a,extension:n})}))},s=Date.now()-n;return console.info("Project specific extensions summary generated in ".concat(s.toFixed(0),"ms")),o}}},DM=n(85545),NM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_M="ARRAYBUFFER not supported by this environment",BM="UINT8ARRAY not supported by this environment";function UM(e,t,n,r){var i,a,o,s=t||[0],l=(n=n||0)>>>3,c=-1===r?3:0;for(i=0;i<e.length;i+=1)a=(o=i+l)>>>2,s.length<=a&&s.push(0),s[a]|=e[i]<<8*(c+r*(o%4));return{value:s,binLen:8*e.length+n}}function VM(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":return function(e,t,r){return function(e,t,n,r){var i,a,o,s;if(0!=e.length%2)throw new Error("String of HEX type must be in byte increments");var l=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(i=0;i<e.length;i+=2){if(a=parseInt(e.substr(i,2),16),isNaN(a))throw new Error("String of HEX type contains invalid characters");for(o=(s=(i>>>1)+c)>>>2;l.length<=o;)l.push(0);l[o]|=a<<8*(u+r*(s%4))}return{value:l,binLen:4*e.length+n}}(e,t,r,n)};case"TEXT":return function(e,r,i){return function(e,t,n,r,i){var a,o,s,l,c,u,d,p,f=0,h=n||[0],g=(r=r||0)>>>3;if("UTF8"===t)for(d=-1===i?3:0,s=0;s<e.length;s+=1)for(o=[],128>(a=e.charCodeAt(s))?o.push(a):2048>a?(o.push(192|a>>>6),o.push(128|63&a)):55296>a||57344<=a?o.push(224|a>>>12,128|a>>>6&63,128|63&a):(s+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(s)),o.push(240|a>>>18,128|a>>>12&63,128|a>>>6&63,128|63&a)),l=0;l<o.length;l+=1){for(c=(u=f+g)>>>2;h.length<=c;)h.push(0);h[c]|=o[l]<<8*(d+i*(u%4)),f+=1}else for(d=-1===i?2:0,p="UTF16LE"===t&&1!==i||"UTF16LE"!==t&&1===i,s=0;s<e.length;s+=1){for(a=e.charCodeAt(s),!0===p&&(a=(l=255&a)<<8|a>>>8),c=(u=f+g)>>>2;h.length<=c;)h.push(0);h[c]|=a<<8*(d+i*(u%4)),f+=2}return{value:h,binLen:8*f+r}}(e,t,r,i,n)};case"B64":return function(e,t,r){return function(e,t,n,r){var i,a,o,s,l,c,u=0,d=t||[0],p=(n=n||0)>>>3,f=-1===r?3:0,h=e.indexOf("=");if(-1===e.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(e=e.replace(/=/g,""),-1!==h&&h<e.length)throw new Error("Invalid '=' found in base-64 string");for(i=0;i<e.length;i+=4){for(s=e.substr(i,4),o=0,a=0;a<s.length;a+=1)o|=NM.indexOf(s.charAt(a))<<18-6*a;for(a=0;a<s.length-1;a+=1){for(l=(c=u+p)>>>2;d.length<=l;)d.push(0);d[l]|=(o>>>16-8*a&255)<<8*(f+r*(c%4)),u+=1}}return{value:d,binLen:8*u+n}}(e,t,r,n)};case"BYTES":return function(e,t,r){return function(e,t,n,r){var i,a,o,s,l=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(a=0;a<e.length;a+=1)i=e.charCodeAt(a),o=(s=a+c)>>>2,l.length<=o&&l.push(0),l[o]|=i<<8*(u+r*(s%4));return{value:l,binLen:8*e.length+n}}(e,t,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(NM){throw new Error(_M)}return function(e,t,r){return function(e,t,n,r){return UM(new Uint8Array(e),t,n,r)}(e,t,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(NM){throw new Error(BM)}return function(e,t,r){return UM(e,t,r,n)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function HM(e,t,n,r){switch(e){case"HEX":return function(e){return function(e,t,n,r){var i,a,o="0123456789abcdef",s="",l=t/8,c=-1===n?3:0;for(i=0;i<l;i+=1)a=e[i>>>2]>>>8*(c+n*(i%4)),s+=o.charAt(a>>>4&15)+o.charAt(15&a);return r.outputUpper?s.toUpperCase():s}(e,t,n,r)};case"B64":return function(e){return function(e,t,n,r){var i,a,o,s,l,c="",u=t/8,d=-1===n?3:0;for(i=0;i<u;i+=3)for(s=i+1<u?e[i+1>>>2]:0,l=i+2<u?e[i+2>>>2]:0,o=(e[i>>>2]>>>8*(d+n*(i%4))&255)<<16|(s>>>8*(d+n*((i+1)%4))&255)<<8|l>>>8*(d+n*((i+2)%4))&255,a=0;a<4;a+=1)c+=8*i+6*a<=t?NM.charAt(o>>>6*(3-a)&63):r.b64Pad;return c}(e,t,n,r)};case"BYTES":return function(e){return function(e,t,n){var r,i,a="",o=t/8,s=-1===n?3:0;for(r=0;r<o;r+=1)i=e[r>>>2]>>>8*(s+n*(r%4))&255,a+=String.fromCharCode(i);return a}(e,t,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(NM){throw new Error(_M)}return function(e){return function(e,t,n){var r,i=t/8,a=new ArrayBuffer(i),o=new Uint8Array(a),s=-1===n?3:0;for(r=0;r<i;r+=1)o[r]=e[r>>>2]>>>8*(s+n*(r%4))&255;return a}(e,t,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(NM){throw new Error(BM)}return function(e){return function(e,t,n){var r,i=t/8,a=-1===n?3:0,o=new Uint8Array(i);for(r=0;r<i;r+=1)o[r]=e[r>>>2]>>>8*(a+n*(r%4))&255;return o}(e,t,n)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var zM=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],WM=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],GM=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function YM(e){var t={outputUpper:!1,b64Pad:"=",outputLen:-1},n=e||{},r="Output length must be a multiple of 8";if(t.outputUpper=n.outputUpper||!1,n.b64Pad&&(t.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(r);t.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(r);t.outputLen=n.shakeLen}if("boolean"!=typeof t.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw new Error("Invalid b64Pad formatting option");return t}var qM=function(){function e(t,n,r){(0,ze.Z)(this,e);var i=r||{};if(this.t=n,this.i=i.encoding||"UTF8",this.numRounds=i.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=t,this.h=[],this.u=0,this.l=!1,this.A=0,this.p=!1,this.U=[],this.R=[]}return(0,We.Z)(e,[{key:"update",value:function(e){var t,n=0,r=this.T>>>5,i=this.F(e,this.h,this.u),a=i.binLen,o=i.value,s=a>>>5;for(t=0;t<s;t+=r)n+this.T<=a&&(this.m=this.g(o.slice(t,t+r),this.m),n+=this.T);return this.A+=n,this.h=o.slice(n>>>5),this.u=a%this.T,this.l=!0,this}},{key:"getHash",value:function(e,t){var n,r,i=this.H,a=YM(t);if(this.B){if(-1===a.outputLen)throw new Error("Output length must be specified in options");i=a.outputLen}var o=HM(e,i,this.v,a);if(this.p&&this.C)return o(this.C(a));for(r=this.Y(this.h.slice(),this.u,this.A,this.S(this.m),i),n=1;n<this.numRounds;n+=1)this.B&&i%32!=0&&(r[r.length-1]&=16777215>>>24-i%32),r=this.Y(r,i,0,this.I(this.o),i);return o(r)}},{key:"setHMACKey",value:function(e,t,n){if(!this.L)throw new Error("Variant does not support HMAC");if(this.l)throw new Error("Cannot set MAC key after calling update");var r=VM(t,(n||{}).encoding||"UTF8",this.v);this.M(r(e))}},{key:"M",value:function(e){var t,n=this.T>>>3,r=n/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.p)throw new Error("MAC key already set");for(n<e.binLen/8&&(e.value=this.Y(e.value,e.binLen,0,this.I(this.o),this.H));e.value.length<=r;)e.value.push(0);for(t=0;t<=r;t+=1)this.U[t]=909522486^e.value[t],this.R[t]=1549556828^e.value[t];this.m=this.g(this.U,this.m),this.A=this.T,this.p=!0}},{key:"getHMAC",value:function(e,t){var n=YM(t);return HM(e,this.H,this.v,n)(this.N())}},{key:"N",value:function(){var e;if(!this.p)throw new Error("Cannot call getHMAC without first setting MAC key");var t=this.Y(this.h.slice(),this.u,this.A,this.S(this.m),this.H);return e=this.g(this.R,this.I(this.o)),e=this.Y(t,this.H,this.T,e,this.H)}}]),e}();function JM(e,t){return e>>>t|e<<32-t}function XM(e,t){return e>>>t}function KM(e,t,n){return e&t^~e&n}function QM(e,t,n){return e&t^e&n^t&n}function $M(e){return JM(e,2)^JM(e,13)^JM(e,22)}function eL(e,t){var n=(65535&e)+(65535&t);return(65535&(e>>>16)+(t>>>16)+(n>>>16))<<16|65535&n}function tL(e,t,n,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&r);return(65535&(e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16))<<16|65535&i}function nL(e,t,n,r,i){var a=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&i);return(65535&(e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(a>>>16))<<16|65535&a}function rL(e){return JM(e,7)^JM(e,18)^XM(e,3)}function iL(e){return JM(e,6)^JM(e,11)^JM(e,25)}function aL(e){return"SHA-224"==e?WM.slice():GM.slice()}function oL(e,t){var n,r,i,a,o,s,l,c,u,d,p,f,h=[];for(n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],p=0;p<64;p+=1)h[p]=p<16?e[p]:tL(JM(f=h[p-2],17)^JM(f,19)^XM(f,10),h[p-7],rL(h[p-15]),h[p-16]),u=nL(c,iL(o),KM(o,s,l),zM[p],h[p]),d=eL($M(n),QM(n,r,i)),c=l,l=s,s=o,o=eL(a,u),a=i,i=r,r=n,n=eL(u,d);return t[0]=eL(n,t[0]),t[1]=eL(r,t[1]),t[2]=eL(i,t[2]),t[3]=eL(a,t[3]),t[4]=eL(o,t[4]),t[5]=eL(s,t[5]),t[6]=eL(l,t[6]),t[7]=eL(c,t[7]),t}var sL=function(e){(0,Zi.Z)(n,e);var t=(0,ki.Z)(n);function n(e,r,i){var a;if((0,ze.Z)(this,n),"SHA-224"!==e&&"SHA-256"!==e)throw new Error("Chosen SHA variant is not supported");var o=i||{};return(a=t.call(this,e,r,i)).C=a.N,a.L=!0,a.v=-1,a.F=VM(a.t,a.i,a.v),a.g=oL,a.S=function(e){return e.slice()},a.I=aL,a.Y=function(t,n,r,i){return function(e,t,n,r,i){for(var a,o=15+(t+65>>>9<<4),s=t+n;e.length<=o;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[o]=4294967295&s,e[o-1]=s/4294967296|0,a=0;a<e.length;a+=16)r=oL(e.slice(a,a+16),r);return"SHA-224"===i?[r[0],r[1],r[2],r[3],r[4],r[5],r[6]]:r}(t,n,r,i,e)},a.m=aL(e),a.T=512,a.H="SHA-224"===e?224:256,a.B=!1,o.hmacKey&&a.M(function(e,t,n,r){var i="hmacKey must include a value and format";if(!t)throw new Error(i);if(void 0===t.value||!t.format)throw new Error(i);return VM(t.format,t.encoding||"UTF8",n)(t.value)}(0,o.hmacKey,a.v)),a}return(0,We.Z)(n)}(qM),lL=function(e){var t=e.minimalContentLength,n={};return{getUserRelativeKey:function(e){return e&&n[e]&&n[e].userRelativeKey||null},storeUpload:function(e,t){e&&(n[e]=t)},shouldUpload:function(e){var r=e.hash,i=e.contentLength;return!!r&&(!(t&&i<t)&&!(n[r]&&n[r].uploadedAt>Date.now()-18e5))}}},cL=lL({minimalContentLength:null}),uL=lL({minimalContentLength:1e4}),dL=function(e){var t=new sL("SHA-256","TEXT",{encoding:"UTF8"});return t.update(e),t.getHash("HEX")},pL=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p,f,h,g,m,x,v,b,C,j,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getAuthorizationHeader,r=t.userId,i=t.simplifiedProjectJson,o=t.projectSpecificExtensionsSummaryJson,s=Date.now(),l=i?dL(i):null,c=o?dL(o):null,u=Date.now(),console.info("Hash of simplified project json and project specific extensions summary json took ".concat((u-s).toFixed(2),"ms")),d=cL.shouldUpload({hash:c,contentLength:o?o.length:0}),!(p=uL.shouldUpload({hash:l,contentLength:i?i.length:0}))&&!d){e.next=22;break}return f=Date.now(),e.next=12,(0,fE.x)({times:3},(function(){return(0,MM.n1)(n,{userId:r,gameProjectJsonHash:p?l:null,projectSpecificExtensionsSummaryJsonHash:d?c:null})}));case 12:return h=e.sent,g=h.gameProjectJsonSignedUrl,m=h.gameProjectJsonUserRelativeKey,x=h.projectSpecificExtensionsSummaryJsonSignedUrl,v=h.projectSpecificExtensionsSummaryJsonUserRelativeKey,b=Date.now(),e.next=20,Promise.all([g?(0,fE.x)({times:3},(function(){return Ie().put(g,i,{headers:{"Content-Type":"application/json"},maxContentLength:1/0})})).then((function(){uL.storeUpload(l,{uploadedAt:b,userRelativeKey:m||null})})):null,x?(0,fE.x)({times:3},(function(){return Ie().put(x,o,{headers:{"Content-Type":"application/json"},maxContentLength:1/0})})).then((function(){cL.storeUpload(c,{uploadedAt:b,userRelativeKey:v||null})})):null]);case 20:C=Date.now(),console.info("Upload of ".concat([p?"simplified project":null,d?"project specific extensions summary":null].filter(Boolean).join(" and ")," took ").concat((C-f).toFixed(2),"ms"));case 22:return j=uL.getUserRelativeKey(l),y=cL.getUserRelativeKey(c),e.abrupt("return",{gameProjectJsonUserRelativeKey:j,gameProjectJson:j?null:i,projectSpecificExtensionsSummaryJsonUserRelativeKey:y,projectSpecificExtensionsSummaryJson:y?null:o});case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fL=["success","meta"],hL=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,o,s,c,u,d,p,f,h,g,m,x,v,b,C,j,y,Z,k,w,T,S,P,I,E,M,L,A,O,R,F;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.functionCalls,o=t.project,s=t.i18n,c=t.editorCallbacks,u=t.generateEvents,d=t.onSceneEventsModifiedOutsideEditor,p=t.onInstancesModifiedOutsideEditor,f=t.onObjectsModifiedOutsideEditor,h=t.onObjectGroupsModifiedOutsideEditor,g=t.ignore,m=t.ensureExtensionInstalled,x=t.onWillInstallExtension,v=t.onExtensionInstalled,b=t.searchAndInstallAsset,C=[],j=[],y=null,Z=(0,i.Z)(n),e.prev=5,Z.s();case 7:if((k=Z.n()).done){e.next=61;break}if(w=k.value,T=w.call_id,!g){e.next=13;break}return C.push({status:"ignored",call_id:T}),e.abrupt("continue",59);case 13:if(S=w.name,o||"initialize_project"===S){e.next=17;break}return C.push({status:"finished",call_id:T,success:!1,output:{message:"No project opened."}}),e.abrupt("continue",59);case 17:P=void 0,e.prev=18;try{P=JSON.parse(w.arguments)}catch(a){console.error("Error parsing arguments: ",a),C.push({status:"finished",call_id:T,success:!1,output:{message:"Invalid arguments (not a valid JSON string)."}})}if(null!==S){e.next=23;break}return C.push({status:"finished",call_id:T,success:!1,output:{message:"Missing or invalid function name."}}),e.abrupt("continue",59);case 23:if(null!==P){e.next=26;break}return C.push({status:"finished",call_id:T,success:!1,output:{message:"Invalid arguments for function: ".concat(S,".")}}),e.abrupt("continue",59);case 26:if(E=XE[S]||null,(I=JE[S]||null)||E){e.next=31;break}return C.push({status:"finished",call_id:T,success:!1,output:{message:"Unknown function: ".concat(S,".")}}),e.abrupt("continue",59);case 31:if(M={args:P,i18n:s,editorCallbacks:c,generateEvents:u,onSceneEventsModifiedOutsideEditor:d,onInstancesModifiedOutsideEditor:p,onObjectsModifiedOutsideEditor:f,onObjectGroupsModifiedOutsideEditor:h,ensureExtensionInstalled:m,onWillInstallExtension:x,onExtensionInstalled:v,searchAndInstallAsset:b},L=void 0,!I){e.next=43;break}if(!o){e.next=40;break}return e.next=37,I.launchFunction((0,l.Z)((0,l.Z)({},M),{},{project:o}));case 37:L=e.sent,e.next=41;break;case 40:L={success:!1,message:"Function ".concat(S," requires a project to be opened before being used.")};case 41:e.next=50;break;case 43:if(!E){e.next=49;break}return e.next=46,E.launchFunction(M);case 46:L=e.sent,e.next=50;break;case 49:L={success:!1,message:"Unknown function with name: ".concat(S,". Please use something else as this seems not supported or existing.")};case 50:O=(A=L).success,R=A.meta,F=(0,go.Z)(A,fL),C.push({status:"finished",call_id:T,success:O,output:F}),R&&R.newSceneNames&&j.push.apply(j,(0,r.Z)(R.newSceneNames)),R&&R.createdProject&&(y=R.createdProject),e.next=59;break;case 56:e.prev=56,e.t0=e.catch(18),C.push({status:"finished",call_id:T,success:!1,output:{message:e.t0.message||"Unknown error"}});case 59:e.next=7;break;case 61:e.next=66;break;case 63:e.prev=63,e.t1=e.catch(5),Z.e(e.t1);case 66:return e.prev=66,Z.f(),e.finish(66);case 69:return e.abrupt("return",{results:C,createdSceneNames:j,createdProject:y});case 70:case"end":return e.stop()}}),e,null,[[5,63,66,69],[18,56]])})));return function(t){return e.apply(this,arguments)}}(),gL=n.g.gd,mL=n(77987),xL=["objectsContainer","objectName"],vL=n.g.gd,bL="v7",CL=function(e){var t=e.i18n,n=e.project,r=e.resourceManagementProps,i=e.editorCallbacks,u=e.selectedAiRequest,d=e.onSendEditorFunctionCallResults,p=e.getEditorFunctionCallResults,f=e.addEditorFunctionCallResults,h=e.onSceneEventsModifiedOutsideEditor,g=e.onInstancesModifiedOutsideEditor,m=e.onObjectsModifiedOutsideEditor,x=e.onObjectGroupsModifiedOutsideEditor,v=e.onWillInstallExtension,b=e.onExtensionInstalled,C=e.isReadyToProcessFunctionCalls,j=function(e){var t=e.project,n=(e.i18n,c.useContext(Nr.H).translatedExtensionShortHeadersByName),r=(0,pi.WF)();return{ensureExtensionInstalled:c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(i){var o,s,l,c,u,d,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.extensionName,s=i.onExtensionInstalled,l=i.onWillInstallExtension,t){e.next=3;break}return e.abrupt("return");case 3:if(!t.getCurrentPlatform().isExtensionLoaded(o)){e.next=5;break}return e.abrupt("return");case 5:return c=(0,pi.Fk)(n,o),u=[c],(d=(0,pi.WC)(u)).push({extensionName:c.name,extensionVersion:c.version}),e.next=11,(0,pi.bg)({requiredExtensions:d,project:t,extensionShortHeadersByName:n});case 11:return p=e.sent,e.next=14,r({project:t,requiredExtensionInstallation:p,importedSerializedExtensions:[],onWillInstallExtension:l,onExtensionInstalled:s,updateMode:"safeOnly",reason:"extension"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,r,t])}}({project:n,i18n:t}),y=j.ensureExtensionInstalled,Z=function(e){var t=e.project,n=e.resourceManagementProps,r=e.onWillInstallExtension,i=e.onExtensionInstalled,s=c.useContext($n.ZP),u=s.profile,d=s.getAuthorizationHeader,p=(0,mL.wF)({project:t,resourceManagementProps:n,onWillInstallExtension:r,onExtensionInstalled:i});return{searchAndInstallAsset:c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,c,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.objectsContainer,r=t.objectName,i=(0,go.Z)(t,xL),u){e.next=3;break}throw new Error("User should be authenticated.");case 3:return e.next=5,(0,fE.x)({times:2},(function(){return(0,MM.rX)(d,(0,l.Z)({userId:u.id},i))}));case 5:if((o=e.sent).results&&0!==o.results.length){e.next=8;break}return e.abrupt("return",{status:"nothing-found",message:"No assets found.",createdObjects:[],assetShortHeader:null});case 8:if(s=o.results[0]){e.next=11;break}throw new Error("No asset found.");case 11:return c=s.asset,e.next=14,p({assetShortHeader:c,objectsContainer:n,requestedObjectName:r,setIsAssetBeingInstalled:function(){}});case 14:if(f=e.sent){e.next=17;break}return e.abrupt("return",{status:"error",message:"Asset found but failed to install asset.",createdObjects:[],assetShortHeader:null});case 17:return e.abrupt("return",{status:"asset-installed",message:"Asset installed successfully.",createdObjects:f.createdObjects,assetShortHeader:c});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,u,d])}}({project:n,resourceManagementProps:r,onWillInstallExtension:v,onExtensionInstalled:b}),k=Z.searchAndInstallAsset,w=function(e){var t=e.project,n=c.useContext($n.ZP),r=n.profile,i=n.getAuthorizationHeader,s=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var o,s,c,u,d,p,f,h,g,m,x,v,b,C;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.sceneName,s=n.eventsDescription,c=n.extensionNamesList,u=n.objectsList,d=n.existingEventsAsText,p=n.placementHint,f=n.relatedAiRequestId,t){e.next=3;break}throw new Error("No project is opened.");case 3:if(r){e.next=5;break}throw new Error("User should be authenticated.");case 5:return h=FM(gL),g=JSON.stringify(h.getSimplifiedProject(t,{})),m=JSON.stringify(h.getProjectSpecificExtensionsSummary(t)),e.next=10,pL({getAuthorizationHeader:i,userId:r.id,simplifiedProjectJson:g,projectSpecificExtensionsSummaryJson:m});case 10:return x=e.sent,e.next=13,(0,fE.x)({times:2},(function(){return(0,MM.Mn)(i,(0,l.Z)((0,l.Z)({userId:r.id},x),{},{sceneName:o,eventsDescription:s,extensionNamesList:c,objectsList:u,existingEventsAsText:d,placementHint:p,relatedAiRequestId:f}))}));case 13:if((v=e.sent).creationSucceeded){e.next=16;break}return e.abrupt("return",{generationCompleted:!1,errorMessage:v.errorMessage});case 16:b=50,C=v.aiGeneratedEvent;case 18:if("working"!==C.status){e.next=35;break}return b--,e.next=22,(0,LM.g)(1e3);case 22:return e.prev=22,e.next=25,(0,MM.Hh)(i,{userId:r.id,aiGeneratedEventId:C.id});case 25:C=e.sent,e.next=31;break;case 28:e.prev=28,e.t0=e.catch(22),console.warn("Error while checking status of AI generated event - continuing...",e.t0);case 31:if(!(b<=0)){e.next=33;break}return e.abrupt("return",{generationCompleted:!1,errorMessage:"Event generation started but failed to complete in time."});case 33:e.next=18;break;case 35:return e.abrupt("return",{generationCompleted:!0,aiGeneratedEvent:C});case 36:case"end":return e.stop()}}),e,null,[[22,28]])})));return function(t){return e.apply(this,arguments)}}(),[i,t,r]);return{generateEvents:s}}({project:n}),T=w.generateEvents,S=c.useState({}),P=(0,s.Z)(S,2),I=P[0],E=P[1],M=c.useCallback((function(e){return void 0===I[e]||I[e]}),[I]),L=c.useCallback((function(e,t){E((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,Qt.Z)({},e,t))}))}),[E]),A=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r,s){var c,p,j,Z,w;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&C){e.next=2;break}return e.abrupt("return");case 2:return f(u.id,r.map((function(e){return{status:"working",call_id:e.call_id}}))),e.next=5,hL({project:n,editorCallbacks:i,i18n:t,functionCalls:r.map((function(e){return{name:e.name,arguments:e.arguments,call_id:e.call_id}})),ignore:!!s&&!!s.ignore,generateEvents:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T((0,l.Z)((0,l.Z)({},t),{},{relatedAiRequestId:u.id}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSceneEventsModifiedOutsideEditor:h,onInstancesModifiedOutsideEditor:g,onObjectsModifiedOutsideEditor:m,onObjectGroupsModifiedOutsideEditor:x,ensureExtensionInstalled:y,onWillInstallExtension:v,onExtensionInstalled:b,searchAndInstallAsset:k});case 5:return c=e.sent,p=c.results,j=c.createdSceneNames,Z=c.createdProject,w=f(u.id,p),e.next=12,d(w,{createdSceneNames:j,createdProject:Z});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,u,C,f,n,i,h,g,m,x,y,v,b,k,T,d]),O=c.useMemo((function(){return u?ZI({aiRequest:u,editorFunctionCallResults:p(u.id)}):[]}),[u,p]);return c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:if(!M(u.id)){e.next=8;break}if(0!==O.length){e.next=5;break}return e.abrupt("return");case 5:return console.info("Automatically processing AI function calls..."),e.next=8,A(O);case 8:case"end":return e.stop()}}),e)})))()}),[u,M,A,O]),{isAutoProcessingFunctionCalls:M,setAutoProcessFunctionCalls:L,onProcessFunctionCalls:A}},jL=function(e){var t=e.project,n=c.useContext($n.ZP),r=n.profile,i=n.getAuthorizationHeader,u=c.useContext(yM.X0),d=u.aiRequestStorage,p=u.editorFunctionCallResultsStorage,f=d.aiRequests,h=d.updateAiRequest,g=d.isSendingAiRequest,m=p.getEditorFunctionCallResults,x=c.useContext(D.ZP),v=x.values,b=x.setAiState,C=v.aiState.aiRequestId,j=C&&f[C]||null,y=c.useState(!1),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=j?j.status:null,S=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(C&&T&&"working"===T){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,MM.zn)(i,{userId:r.id,aiRequestId:C});case 6:t=e.sent,h(C,t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Ss.Y)((function(){S()}),k?1e3:null),c.useEffect((function(){function e(){return(e=(0,o.Z)((0,a.Z)().mark((function e(){var n,o,s,c,u,d,p,f,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j&&"agent"===j.mode&&!g(j.id)&&0!==j.output.length&&"ready"===j.status&&r){e.next=2;break}return e.abrupt("return");case 2:if(!(ZI({aiRequest:j,editorFunctionCallResults:m(j.id)}).length>0)){e.next=5;break}return e.abrupt("return");case 5:if(n=kI(m(j.id)),!n.hasUnfinishedResult){e.next=8;break}return e.abrupt("return");case 8:if((o=j.output.length>0?j.output[j.output.length-1]:null)&&("message"===o.type&&"assistant"===o.role||"function_call_output"===o.type)&&!o.suggestions){e.next=11;break}return e.abrupt("return");case 11:return s=FM(vL),c=t?JSON.stringify(s.getSimplifiedProject(t,{})):null,u=t?JSON.stringify(s.getProjectSpecificExtensionsSummary(t)):null,e.next=16,pL({getAuthorizationHeader:i,userId:r.id,simplifiedProjectJson:c,projectSpecificExtensionsSummaryJson:u});case 16:return d=e.sent,p="function_call_output"===o.type&&-1!==o.call_id.indexOf("initialize_project"),e.prev=18,e.next=21,(0,MM._Z)(i,(0,l.Z)({userId:r.id,aiRequestId:j.id,suggestionsType:p?"list-with-explanations":"simple-list"},d));case 21:f=e.sent,h(j.id,f),e.next=31;break;case 25:if(e.prev=25,e.t0=e.catch(18),!(x=(0,uo.T)(e.t0))||400!==x.status||"ai-request/request-still-working"!==x.code){e.next=30;break}return e.abrupt("return");case 30:console.error("Error getting AI request suggestions:",e.t0);case 31:case"end":return e.stop()}}),e,null,[[18,25]])})))).apply(this,arguments)}var n=setTimeout((function(){!function(){e.apply(this,arguments)}()}),300);return function(){return clearTimeout(n)}}),[j,r,i,t,m,h,g]),c.useEffect((function(){return C&&j&&"working"===j.status?w(!0):w(!1),function(){w(!1)}}),[C,j]),c.useEffect((function(){r||b({aiRequestId:null})}),[r,b]),c.useEffect((function(){C&&!j&&b({aiRequestId:null})}),[C,j,b]),{selectedAiRequest:j,selectedAiRequestId:C,setAiState:b}},yL=n.g.gd,ZL=function(e){var t=e.project,n=e.resourceManagementProps,r=e.fileMetadata,i=e.storageProvider,u=e.i18n,d=e.onCreateProjectFromExample,p=e.onCreateEmptyProject,h=e.onOpenLayout,g=e.onCloseAskAi,m=e.dismissableIdentifier,x=e.onWillInstallExtension,v=e.onExtensionInstalled,b=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,f,h,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,r=t.exampleSlug,i={projectName:n,storageProvider:Bi.Z,saveAsLocation:null,forceOpenAskAiEditor:!0,creationSource:"ai-agent-request"},!r){e.next=14;break}return e.next=5,(0,_i.rx)();case 5:if(o=e.sent,s=o.exampleShortHeaders,!(l=s.find((function(e){return e.slug===r})))){e.next=14;break}return e.next=11,d({exampleShortHeader:l,newProjectSetup:i,i18n:u});case 11:return c=e.sent,f=c.createdProject,e.abrupt("return",{exampleSlug:r,createdProject:f});case 14:return e.next=16,p(i);case 16:return h=e.sent,g=h.createdProject,e.abrupt("return",{exampleSlug:null,createdProject:g});case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,p,u]),C=c.useMemo((function(){return{onOpenLayout:h,onCreateProject:b}}),[h,b]),j=c.useState(null),y=(0,s.Z)(j,2),Z=y[0],k=y[1],T=c.useContext(yM.X0),S=T.aiRequestStorage,P=T.editorFunctionCallResultsStorage,I=T.getAiSettings,E=P.getEditorFunctionCallResults,L=P.addEditorFunctionCallResults,A=P.clearEditorFunctionCallResults,O=S.aiRequests,R=S.updateAiRequest,F=S.isSendingAiRequest,B=S.getLastSendError,U=S.setSendingAiRequest,V=S.setLastSendError,H=jL({project:t}).setAiState,z=c.useState(null),W=(0,s.Z)(z,2),G=W[0],Y=W[1],q="agent",J=G&&O[G]||null,X=(0,DM.i)(G),K=c.useRef(null),Q=c.useContext(mM.q$).openCreditsPackageDialog,ee=c.useContext(D.ZP).values.automaticallyUseCreditsForAiRequests,te=c.useContext($n.ZP),ne=te.profile,re=te.getAuthorizationHeader,ie=te.onOpenCreateAccountDialog,ae=te.limits,oe=te.onRefreshLimits,se=te.subscription,le=c.useContext(mo.J).openSubscriptionDialog,ce=!!ae&&!!ae.capabilities.classrooms&&ae.capabilities.classrooms.hideAskAi,ue=ae?ae.credits.userBalance.amount:0,de=ae&&ae.quotas&&ae.quotas["consumed-ai-credits"]||null,pe=ae&&ae.credits&&ae.credits.prices["ai-request"]||null,fe=pe?pe.priceInCredits:null;c.useEffect((function(){oe()}),[]),c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,o,s,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=2;break}return e.abrupt("return");case 2:if(console.info("Starting a new AI request..."),ne){e.next=7;break}return ie(),k(null),e.abrupt("return");case 7:if(g(),t=Z.userRequest,n=Z.aiConfigurationPresetId,k(null),r=!1,!(de&&de.limitReached&&fe)){e.next=17;break}if(r=!0,o=ue<fe,!(!ee||o)){e.next=17;break}return e.abrupt("return");case 17:return e.prev=17,s=i?i.internalName:null,U(null,!0),e.next=22,pL({getAuthorizationHeader:re,userId:ne.id,simplifiedProjectJson:null,projectSpecificExtensionsSummaryJson:null});case 22:return c=e.sent,e.next=25,(0,MM.m5)(re,(0,l.Z)((0,l.Z)({userRequest:t,userId:ne.id},c),{},{payWithCredits:r,gameId:null,fileMetadata:null,storageProviderName:s,mode:q,toolsVersion:bL,aiConfiguration:{presetId:n}}));case 25:u=e.sent,console.info("Successfully created a new AI request:",u),U(null,!1),R(u.id,u),X.current||(Y(u.id),H({aiRequestId:u.id})),(0,ai.t3)({simplifiedProjectJsonLength:0,projectSpecificExtensionsSummaryJsonLength:0,payWithCredits:r,storageProviderName:s,mode:q,aiRequestId:u.id}),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(17),console.error("Error starting a new AI request:",e.t0),V(null,e.t0);case 37:return e.next=39,(0,LM.g)(500);case 39:return e.prev=39,e.next=42,(0,fE.x)({times:2},oe);case 42:e.next=46;break;case 44:e.prev=44,e.t1=e.catch(39);case 46:case"end":return e.stop()}}),e,null,[[17,33],[39,44]])})))()}),[fe,ue,re,ie,oe,Q,ne,t,r,i,de,G,V,q,H,U,X,R,Z,se,le,g,ee]);var he=F(G),ge=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,i,o,s,c,u,d,p,f,h,g,m,x,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.userMessage,n.createdSceneNames,r=n.createdProject,i=n.editorFunctionCallResults,ne&&G&&J&&!he){e.next=3;break}return e.abrupt("return");case 3:if(o=kI(i),s=o.hasUnfinishedResult,c=o.functionCallOutputs,u=ZI({aiRequest:J,editorFunctionCallResults:i}).length>0,!s){e.next=7;break}return e.abrupt("return");case 7:if(!u){e.next=9;break}return e.abrupt("return");case 9:if(0!==c.length){e.next=11;break}return e.abrupt("return");case 11:return e.prev=11,U(G,!0),d=r||t,p=FM(yL),f=d?JSON.stringify(p.getSimplifiedProject(d,{})):null,h=d?JSON.stringify(p.getProjectSpecificExtensionsSummary(d)):null,e.next=19,pL({getAuthorizationHeader:re,userId:ne.id,simplifiedProjectJson:f,projectSpecificExtensionsSummaryJson:h});case 19:return g=e.sent,m=c.length>0&&c.some((function(e){return-1!==e.call_id.indexOf("initialize_project")})),e.next=23,(0,fE.x)({times:2},(function(){return(0,MM.zi)(re,(0,l.Z)((0,l.Z)({userId:ne.id,aiRequestId:G,functionCallOutputs:c},g),{},{gameId:d?d.getProjectUuid():void 0,payWithCredits:!1,userMessage:"",paused:m,mode:q,toolsVersion:bL}))}));case 23:x=e.sent,R(x.id,x),U(x.id,!1),A(x.id),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(11),V(G,e.t0);case 32:return J&&((v=K.current)&&(v.resetUserInput(""),v.resetUserInput(G)),Y("")),e.next=35,(0,LM.g)(500);case 35:return e.prev=35,e.next=38,(0,fE.x)({times:2},oe);case 38:e.next=42;break;case 40:e.prev=40,e.t1=e.catch(35);case 42:case"end":return e.stop()}}),e,null,[[11,29],[35,40]])})));return function(t){return e.apply(this,arguments)}}(),[ne,G,he,U,R,A,re,V,t,J,oe]),me=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({userMessage:"",createdSceneNames:n.createdSceneNames,createdProject:n.createdProject,editorFunctionCallResults:t});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[ge]),xe=CL({project:t,resourceManagementProps:n,selectedAiRequest:J,editorCallbacks:C,onSendEditorFunctionCallResults:me,getEditorFunctionCallResults:E,addEditorFunctionCallResults:L,i18n:u,onSceneEventsModifiedOutsideEditor:function(){},onInstancesModifiedOutsideEditor:function(){},onObjectsModifiedOutsideEditor:function(){},onObjectGroupsModifiedOutsideEditor:function(){},onWillInstallExtension:x,onExtensionInstalled:v,isReadyToProcessFunctionCalls:!0}),ve=xe.isAutoProcessingFunctionCalls,be=xe.setAutoProcessFunctionCalls,Ce=xe.onProcessFunctionCalls,je=c.useContext(D.ZP),ye=je.values,Ze=je.showAskAiStandAloneForm;return m&&ye.hiddenAskAiStandAloneForms[m]||ce?null:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{noMargin:!0,children:[(0,f.jsx)(Ts,{size:20,rotating:he}),(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"What would you like to create?"})})]}),m&&(0,f.jsx)($.Z,{onClick:function(){Ze(m,!1)},size:"small",disabled:he,children:(0,f.jsx)(as.Z,{})})]}),(0,f.jsx)(EM,{aiConfigurationPresetsWithAvailability:CM({limits:ae,getAiSettings:I}),project:t,ref:K,aiRequest:J,onStartNewAiRequest:k,onSendUserMessage:function(e){var t=e.userMessage;e.mode;return ge({userMessage:t,editorFunctionCallResults:J&&E(J.id)||[]})},isSending:he,lastSendError:B(G),quota:de,increaseQuotaOffering:(0,er.e_)(se)?(0,er.Lf)(se)?"upgrade":"none":"subscribe",onProcessFunctionCalls:Ce,editorFunctionCallResults:J&&E(J.id)||null,price:pe,availableCredits:ue,onSendFeedback:(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),hasOpenedProject:!!t,isAutoProcessingFunctionCalls:!!J&&ve(J.id),setAutoProcessFunctionCalls:function(e){J&&be(J.id,e)},i18n:u,editorCallbacks:C,onStartOrOpenChat:function(){},standAloneForm:!0})]})},kL=F()("electron"),wL=F()("@electron/remote"),TL=wL?wL.app:null,SL=function(e,t){return"small"!==e||t?4:2},PL=function(e){return(e?"".concat(LP()," (").concat(e,")"):LP()).slice(0,uj.v9)},IL=function(e){var t=e.project,n=e.fileMetadata,i=e.resourceManagementProps,l=e.isProjectOpening,u=e.onClose,d=e.onCreateEmptyProject,p=e.onCreateFromExample,h=e.onCreateProjectFromPrivateGameTemplate,g=e.onCloseAskAi,m=e.selectedExampleShortHeader,x=e.onSelectExampleShortHeader,v=e.selectedPrivateGameTemplateListingData,b=e.onSelectPrivateGameTemplateListingData,C=e.storageProviders,j=e.storageProvider,y=e.privateGameTemplateListingDatasFromSameCreator,Z=e.preventBackHome,k=e.onOpenLayout,S=e.onWillInstallExtension,I=e.onExtensionInstalled,L=c.useContext($n.ZP),A=L.authenticated,O=L.onOpenLoginDialog,R=L.onOpenCreateAccountDialog,F=L.receivedGameTemplates,B=L.receivedBundles,U=L.gameTemplatePurchases,V=L.bundlePurchases,z=c.useState(!1),W=(0,s.Z)(z,2),G=W[0],Y=W[1],q=c.useState(!1),J=(0,s.Z)(q,2),X=J[0],K=J[1],Q=c.useContext(CP.I).exampleShortHeaders,ee=!m&&!v&&!G&&!X,te=!m&&!v&&!G&&X,ne=c.useContext(jP.mJ).privateGameTemplateListingDatas,re=c.useContext(pI.bQ).bundleListingDatas,ie=(0,NS.k)(),ae=c.useContext(D.ZP),oe=ae.values,se=ae.setNewProjectsDefaultStorageProviderName,le=c.useContext(gi.Z).currentlyRunningInAppTutorial,ce=c.useState(null),ue=(0,s.Z)(ce,2),de=ue[0],pe=ue[1],fe=c.useState(PL()),he=(0,s.Z)(fe,2),ge=he[0],me=he[1],xe=c.useState("desktopMobileLandscape"),ve=(0,s.Z)(xe,2),be=ve[0],Ce=ve[1],je=c.useState(800),ye=(0,s.Z)(je,2),Ze=ye[0],ke=ye[1],we=c.useState(600),Te=(0,s.Z)(we,2),Se=Te[0],Pe=Te[1],Ie=c.useState(!1),Ee=(0,s.Z)(Ie,2),Me=Ee[0],Le=Ee[1],Oe=TL?(0,OP.X)(TL,oe.newProjectsDefaultFolder||""):"",Re=c.useState((function(){var e=C.find((function(e){return"LocalFile"===e.internalName})),t=C.find((function(e){return"Cloud"===e.internalName})),n=C.find((function(e){return e.internalName===oe.newProjectsDefaultStorageProviderName}));return le?e||AP.H:v?n||(e||(t||AP.H)):"Empty"===oe.newProjectsDefaultStorageProviderName?AP.H:n||(A&&t?t:e||AP.H)})),Fe=(0,s.Z)(Re,2),De=Fe[0],Ne=Fe[1],_e=c.useState(De.getProjectLocation?De.getProjectLocation({projectName:ge,saveAsLocation:null,newProjectsDefaultFolder:Oe}):null),Be=(0,s.Z)(_e,2),Ue=Be[0],Ve=Be[1],He=De.needUserAuthentication&&!A,ze="Cloud"===De.internalName&&RP(L),We="Empty"!==De.internalName,Ge=zP[be].width||Ze||800,Ye=zP[be].height||Se||600,qe=zP[be].orientation,Je=c.useContext(yM.X0).aiRequestStorage.isSendingAiRequest,Xe=l||Je(""),Ke=c.useMemo((function(){return Q&&m&&m.linkedExampleShortHeaders?m.linkedExampleShortHeaders.map((function(e){var t=e.slug,n=e.relation,r=Q.find((function(e){return e.slug===t}));return r?{exampleShortHeader:r,relation:n}:null})).filter(Boolean):[]}),[Q,m]),Qe=c.useMemo((function(){var e=Ke.find((function(e){return"pixel-art-version"===e.relation}));return e?e.exampleShortHeader:null}),[Ke]),$e=c.useMemo((function(){var e=Ke.find((function(e){return"non-pixel-art-version"===e.relation}));return e?e.exampleShortHeader:null}),[Ke]),et=c.useCallback((function(e,t){!$e||t?Qe&&t?x(Qe):Le(t):x($e)}),[Le,x,Qe,$e]),tt=c.useMemo((function(){return(0,aI.aS)({productId:v?v.id:null,receivedProducts:[].concat((0,r.Z)(F||[]),(0,r.Z)(B||[])),productPurchases:[].concat((0,r.Z)(U||[]),(0,r.Z)(V||[])),allProductListingDatas:[].concat((0,r.Z)(ne||[]),(0,r.Z)(re||[]))})}),[U,V,v,ne,re,F,B]),nt=G||m||!!tt,rt=!kL&&!v,it=!Xe&&!He&&!ze&&(We||rt),at=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(it){e.next=2;break}return e.abrupt("return");case 2:if(pe(null),ge){e.next=6;break}return pe((0,f.jsx)(w.Trans,{id:"Please enter a name for your project."})),e.abrupt("return");case 6:if(n=De.getProjectLocation?De.getProjectLocation({projectName:ge,saveAsLocation:Ue,newProjectsDefaultFolder:Oe}):Ue,r={projectName:ge,storageProvider:De,saveAsLocation:n,height:Ye,width:Ge,orientation:qe,optimizeForPixelArt:Me,creationSource:"default"},!m){e.next=13;break}return e.next=11,p({exampleShortHeader:m,newProjectSetup:{projectName:ge,storageProvider:De,saveAsLocation:n,creationSource:"default"},i18n:t});case 11:case 16:e.next=20;break;case 13:if(!v){e.next=18;break}return e.next=16,h(v,{projectName:ge,storageProvider:De,saveAsLocation:Ue,creationSource:"default"},t);case 18:return e.next=20,d(r);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[it,ge,De,Ue,Oe,Ye,Ge,qe,Me,m,v,p,h,d]),ot=c.useCallback((function(e,t){de&&pe(null),me(t)}),[me,de]);c.useEffect((function(){G||m||v||X||me(PL()),!m||ML(m)||Q&&LL(Q,m)?v&&me(PL(v.name)):me(PL(m.name))}),[m,v,G,X,Q]);var st=c.useCallback((function(){if(!ee&&!Z){if(G)return void Y(!1);if(m)return void x(null);if(v)return void b(null);if(X)return void K(!1)}}),[ee,G,Y,m,x,v,b,X,Z]),lt=c.useMemo((function(){return!ee&&!Z}),[ee,Z]);return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(E.ZP,{open:!0,title:(0,f.jsx)(w.Trans,{id:"Create a new game"}),id:"project-pre-creation-dialog",maxWidth:"md",actions:[(0,f.jsx)(T.Z,{disabled:Xe,label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:u},"cancel"),nt?(0,f.jsx)(E.vF,{primary:!0,disabled:!it,label:(0,f.jsx)(w.Trans,{id:"Create new game"}),onClick:function(){return at(r)},id:"create-project-button"},"create"):null].filter(Boolean),cannotBeDismissed:Xe,onRequestClose:u,fullHeight:ee||X&&!m&&!G||!!v&&!tt,flexColumnBody:!0,forceScrollVisible:!0,children:(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[lt&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(ba.Z,{icon:(0,f.jsx)(Ca.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Back"}),onClick:st,disabled:Xe})}),(0,f.jsx)(M.LZ,{})]}),ee&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(ZL,{i18n:r,project:t,resourceManagementProps:i,fileMetadata:n,storageProvider:j,onCreateProjectFromExample:p,onCreateEmptyProject:d,onOpenLayout:k,onWillInstallExtension:S,onExtensionInstalled:I,onCloseAskAi:g}),(0,f.jsx)(AL,{onSelectExampleShortHeader:function(e){x(e)},onSelectEmptyProject:function(){Y(!0)},disabled:Xe,onSeeAll:function(){K(!0)}}),ie?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Remix an existing game"})}),(0,f.jsx)(FL,{onSelectExampleShortHeader:function(e){x(e)},onSelectPrivateGameTemplateListingData:function(e){b(e)},i18n:r,getColumnsFromWindowSize:SL,hideStartingPoints:!0,limitRowsTo:6,showLoadMore:!0,disabled:Xe})]}):(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Get back online to browse the huge library of free and premium examples."})})})]}),!ee&&v&&!tt&&(0,f.jsx)(iI.Z,{privateGameTemplateListingData:v,privateGameTemplateListingDatasFromSameCreator:y,onGameTemplateOpen:b}),te&&(0,f.jsx)(AL,{onSelectExampleShortHeader:function(e){x(e)},onSelectEmptyProject:function(){Y(!0)},disabled:Xe}),nt&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[m?(0,f.jsx)(rI,{exampleShortHeader:m}):v&&tt?(0,f.jsx)(dI,{privateGameTemplateListingData:v,purchaseUsageType:tt,onStoreProductOpened:u}):null,G&&(0,f.jsx)(YP,{onClick:function(e){return Ce(e)},selectedOption:be,disabled:Xe,customHeight:Se,customWidth:Ze,onCustomHeightChange:Pe,onCustomWidthChange:ke}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(yi.ZP,{type:"text",errorText:de,disabled:Xe,value:ge,onChange:ot,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Project name"}),endAdornment:(0,f.jsx)($.Z,{size:"small",onClick:function(){return me(PL())},tooltip:{id:"Generate random name"},disabled:Xe,children:(0,f.jsx)(lo.Z,{})}),autoFocus:"desktop",maxLength:uj.v9,fullWidth:!0}),(0,f.jsxs)(Hn.Z,{fullWidth:!0,disabled:Xe,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Where to store this project"}),value:De.internalName,onChange:function(e,t,n){se(n);var r=C.find((function(e){return e.internalName===n}))||AP.H;Ne(r),Ve(null)},children:[C.filter((function(e){return!!e.renderNewProjectSaveAsLocationChooser})).map((function(e){return(0,f.jsx)(P.Z,{value:e.internalName,label:e.name,disabled:e.disabled},e.internalName)})),!kL&&!(0,ja._F)()&&(0,f.jsx)(P.Z,{value:"FakeLocalFile",label:{id:"Save on your computer: download GDevelop desktop app"},disabled:!0}),rt&&(0,f.jsx)(P.Z,{value:AP.H.internalName,label:{id:"Don't save this project now"}})]}),!He&&De.renderNewProjectSaveAsLocationChooser&&De.renderNewProjectSaveAsLocationChooser({projectName:ge,saveAsLocation:Ue,setSaveAsLocation:Ve,newProjectsDefaultFolder:Oe}),(G||!!Qe||!!$e)&&(0,f.jsx)(Vn.Z,{checked:Me||!!$e,label:(0,f.jsx)(w.Trans,{id:"Optimize for Pixel Art"}),onCheck:et,disabled:Xe}),He&&(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(H.Z,{background:"dark",variant:"outlined",children:(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(Go.Z,{onOpenLoginDialog:O,onOpenCreateAccountDialog:R,message:(0,f.jsx)(w.Trans,{id:"Create an account to store your project online."})})})})}),ze?(0,f.jsx)(FP,{}):null]})]})})}})},EL=function(e){var t=e.onSelectEmptyProject,n=e.disabled,r=e.style,i=(0,be.UQ)().isMobile;return(0,f.jsx)(wS.Z,{style:r,children:(0,f.jsxs)("div",{className:kP,children:[(0,f.jsx)("div",{className:wP,onClick:n?void 0:t,tabIndex:0,onKeyPress:function(e){(0,gn.ph)(e)&&!n&&t()},id:"empty-project-tile",children:(0,f.jsxs)(M.sg,{alignItems:"center",justifyContent:"center",expand:!0,children:[(0,f.jsx)(it.Z,{}),(0,f.jsx)(N.Z,{align:"center",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Empty project"})})]})}),(0,f.jsxs)(M.sg,{children:[i&&(0,f.jsx)(M.LZ,{}),(0,f.jsx)(M.x1,{justifyContent:"flex-start",noMargin:!0,children:(0,f.jsx)(N.Z,{size:"body2",hidden:!0,noMargin:i,children:(0,f.jsx)(w.Trans,{id:"Empty project"})})})]})]})})},ML=function(e){return e.tags.includes("Starting point")||function(e){return e.slug.startsWith("starting-")&&!e.slug.includes("-pixel")}(e)},LL=function(e,t){return e.filter(ML).some((function(e){return!!e.linkedExampleShortHeaders&&e.linkedExampleShortHeaders.some((function(e){return e.slug===t.slug}))}))},AL=function(e){var t=e.onSelectExampleShortHeader,n=e.onSelectEmptyProject,r=e.disabled,i=e.onSeeAll,a=(c.useContext(j.Z),{grid:{width:"calc(100% + ".concat(10,"px)"),overflow:"unset"}}),o=c.useContext(CP.I).exampleShortHeaders,s=(0,be.UQ)(),l=s.windowSize,u=s.isLandscape,d=SL(l,u),p=c.useMemo((function(){var e=o?o.filter(ML):[];if(i){var t=2*d-1;return e.slice(0,t)}return e}),[o,i,d]);return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(M.sg,{noMargin:!0,children:[i?(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Continue with Human Intelligence"})}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See all"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"}),onClick:i,primary:!0,disabled:r})]}):null,(0,f.jsxs)(kS.Z,{cols:d,style:a.grid,cellHeight:"auto",spacing:10,children:[(0,f.jsx)(EL,{onSelectEmptyProject:n,disabled:r}),p.map((function(e){return(0,f.jsx)(ZP.Hm,{exampleShortHeader:e,onSelect:function(){return t(e)},disabled:r,centerTitle:!0},e.name)}))]})]})}})},OL={grid:{textAlign:"center",width:"calc(100% + ".concat(10,"px)"),overflow:"unset"}},RL=function(e){return!e.previewImageUrls||e.tags.includes("game")&&!!e.previewImageUrls[0]},FL=function(e){var t=e.onSelectExampleShortHeader,n=e.onSelectPrivateGameTemplateListingData,r=e.i18n,i=e.onlyShowGames,a=e.hideStartingPoints,o=e.getColumnsFromWindowSize,u=e.hideSearch,d=e.limitRowsTo,p=e.showLoadMore,h=e.hidePremiumTemplates,g=e.disabled,m=o("xlarge",!0),x=(ZS.LF+10)*m,v=(0,be.UQ)(),b=v.windowSize,C=v.isLandscape,y=c.useContext($n.ZP).receivedGameTemplates,Z=c.useContext(CP.I),k=Z.exampleShortHeaders,S=Z.exampleShortHeadersSearchResults,P=Z.fetchExamplesAndFilters,I=Z.searchText,E=Z.setSearchText,L=c.useContext(jP.mJ),A=L.fetchGameTemplates,O=L.exampleStore,R=O.privateGameTemplateListingDatasSearchResults,F=O.setSearchText,D=c.useState(I),N=(0,s.Z)(D,2),B=N[0],U=N[1],V=c.useContext(j.Z),H=o(b,C),z=c.useCallback((function(e){e.length<2?(E(""),F("")):(E(e),F(e)),U(e)}),[E,F]),W=c.useCallback((function(){A(),P()}),[A,P]);c.useEffect((function(){W()}),[W]);var G=c.useMemo((function(){return(0,yP.S$)({receivedGameTemplates:y,privateGameTemplateListingDatas:R&&!h?R.map((function(e){return e.item})).filter((function(e){return!i||RL(e)})):[],exampleShortHeaders:S?S.map((function(e){return e.item})).filter((function(e){return!i||RL(e)})).filter((function(e){return!k||!a||function(e,t){return!ML(t)&&!LL(e,t)}(k,e)})):[],onSelectPrivateGameTemplateListingData:function(e){var t=e.prices.find((function(e){return"default"===e.usageType}));(0,ai.rG)({gameTemplateName:e.name,gameTemplateId:e.id,source:"examples-list",priceValue:t&&t.value,priceCurrency:t&&t.currency}),n(e)},onSelectExampleShortHeader:function(e){(0,ai.CU)(e.slug),t(e)},i18n:r,gdevelopTheme:V,privateGameTemplatesPeriodicity:1,showOwnedGameTemplatesFirst:!0,disabled:g})}),[y,R,S,n,t,r,V,i,a,k,h,g]),Y=c.useState(d||1/0),q=(0,s.Z)(Y,2),J=q[0],X=q[1],K=c.useCallback((function(){X(J+(d||6))}),[J,d]),Q=p&&G.length>J*H,$=G.slice(0,J*H);return(0,f.jsx)(c.Fragment,{children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[!u&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(Ge.Z,{value:B,onChange:z,onRequestSearch:function(){},placeholder:{id:"Search examples"},disabled:g})})}),0===G.length?(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"No results returned for your search. Try something else!"})})]}):(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(kS.Z,{cols:H,style:(0,l.Z)((0,l.Z)({},OL.grid),{},{maxWidth:x}),cellHeight:"auto",spacing:10,children:$}),Q&&(0,f.jsx)(_.pJ,{justifyContent:"center",children:(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Show more"}),onClick:K,disabled:g})})]})]})})},DL=n(36465),NL=n(84090),_L=n(15859),BL=n(6879),UL=n(98981),VL=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.99998 4.83643C10.2761 4.83643 10.5 5.06028 10.5 5.33643C10.5 6.92911 10.8416 7.93462 11.4633 8.5523C12.0857 9.17065 13.0921 9.50309 14.6666 9.50309C14.9428 9.50309 15.1666 9.72695 15.1666 10.0031C15.1666 10.2792 14.9428 10.5031 14.6666 10.5031C13.0954 10.5031 12.0881 10.8439 11.4645 11.4676C10.8408 12.0912 10.5 13.0985 10.5 14.6698C10.5 14.9459 10.2761 15.1698 9.99998 15.1698C9.72384 15.1698 9.49998 14.9459 9.49998 14.6698C9.49998 13.0994 9.15702 12.0918 8.53206 11.4679C7.90693 10.8438 6.89915 10.5031 5.33331 10.5031C5.05717 10.5031 4.83331 10.2792 4.83331 10.0031C4.83331 9.72695 5.05717 9.50309 5.33331 9.50309C6.90248 9.50309 7.90932 9.17083 8.53322 8.55201C9.15628 7.93402 9.49998 6.92828 9.49998 5.33643C9.49998 5.06028 9.72384 4.83643 9.99998 4.83643ZM9.99893 8.15238C9.80712 8.57551 9.55579 8.94624 9.23743 9.262C8.92295 9.57392 8.55568 9.81967 8.13887 10.0073C8.55639 10.1976 8.924 10.4461 9.23859 10.7602C9.55628 11.0774 9.80728 11.4488 9.99893 11.8714C10.1899 11.449 10.4402 11.0776 10.7574 10.7605C11.0716 10.4462 11.439 10.1976 11.8567 10.0073C11.4397 9.81963 11.0726 9.5738 10.7585 9.26172C10.4407 8.94597 10.1901 8.57533 9.99893 8.15238Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.33331 0.836426C4.60946 0.836426 4.83331 1.06028 4.83331 1.33643C4.83331 2.33996 5.04929 2.92879 5.39988 3.2771C5.75114 3.62607 6.34086 3.83643 7.33331 3.83643C7.60946 3.83643 7.83331 4.06028 7.83331 4.33643C7.83331 4.61257 7.60946 4.83643 7.33331 4.83643C6.34419 4.83643 5.75353 5.05166 5.40104 5.40415C5.04855 5.75664 4.83331 6.34731 4.83331 7.33643C4.83331 7.61257 4.60946 7.83643 4.33331 7.83643C4.05717 7.83643 3.83331 7.61257 3.83331 7.33643C3.83331 6.34813 3.61686 5.75724 3.26349 5.40444C2.90995 5.05148 2.31883 4.83643 1.33331 4.83643C1.05717 4.83643 0.833313 4.61257 0.833313 4.33643C0.833313 4.06028 1.05717 3.83643 1.33331 3.83643C2.32217 3.83643 2.91234 3.62625 3.26465 3.27681C3.61612 2.9282 3.83331 2.33913 3.83331 1.33643C3.83331 1.06028 4.05717 0.836426 4.33331 0.836426ZM4.33243 3.52757C4.22953 3.69452 4.10889 3.84791 3.96886 3.9868C3.83181 4.12273 3.68111 4.23989 3.51774 4.33997C3.68164 4.44128 3.83272 4.55968 3.97002 4.69676C4.10952 4.83603 4.22978 4.98957 4.33243 5.1564C4.43478 4.9897 4.55472 4.83626 4.69393 4.69705C4.83114 4.55983 4.98219 4.44134 5.14612 4.33997C4.98271 4.23983 4.83205 4.12258 4.69509 3.98652C4.55535 3.84768 4.43503 3.69439 4.33243 3.52757Z",fill:"currentColor"})]}))})),HL=n(80287),zL=n(10283),WL=n(33714),GL="#6CF9F7",YL={container:{display:"flex",borderRadius:8},leftColumn:{display:"flex",flex:1,flexDirection:"column",gap:16,justifyContent:"space-between"},bundlePreviewContainer:{flex:1,background:"linear-gradient(90deg, rgba(59, 247, 244, 0.1) 0%, rgba(255, 188, 87, 0.1) 100%)",borderLeft:"2px solid ".concat(GL)},discountChip:{height:24,backgroundColor:"#F03F18",color:"white"},ownedChip:{height:24,backgroundColor:"#8BE7C4",color:"black"},imageContainer:{display:"flex",alignItems:"center",position:"relative",borderRadius:8,overflow:"hidden"},image:{width:"100%",aspectRatio:"16 / 9"},discountedPrice:{textDecoration:"line-through",opacity:.7}},qL=function(e){var t=e.courseListingData,n=e.isAlreadyReceived;return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsx)("div",{style:YL.imageContainer,children:(0,f.jsx)("img",{src:t.thumbnailUrls[0],style:YL.image,alt:t.name})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:t.name})}),!n&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,color:"secondary",children:(0,f.jsx)("span",{style:YL.discountedPrice,children:(0,_L.e3)({i18n:r,productListingData:t,usageType:"default",plainText:!0})})})})]})}})},JL=function(e){var t=e.bundleListingData,n=(0,be.UQ)().isMobile;if(!t)return null;var r=t.includedListableProducts||[],i=t.includedRedemptionCodes||[],a=r.filter((function(e){return"ASSET_PACK"===e.productType})).length,o=r.filter((function(e){return"GAME_TEMPLATE"===e.productType})).length,s=r.filter((function(e){return"COURSE"===e.productType})).length,c=r.filter((function(e){return"CREDITS_PACKAGE"===e.productType})).reduce((function(e,t){return e+(0,mM.dV)(t.productId)}),0);return(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},YL.bundlePreviewContainer),{},{padding:n?8:16,margin:n?-8:-16,marginLeft:n?-8:0,marginTop:n?0:-16}),children:(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(VL,{style:{color:GL}}),(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:(0,f.jsx)(w.Trans,{id:"This bundle includes:"})})]}),(0,f.jsx)(M.LZ,{}),a>0&&(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(BL.Z,{}),(0,f.jsx)(N.Z,{noMargin:!0,children:1===a?(0,f.jsx)(w.Trans,{id:"{numberOfAssetPacks} Asset Pack",values:{numberOfAssetPacks:a}}):(0,f.jsx)(w.Trans,{id:"{numberOfAssetPacks} Asset Packs",values:{numberOfAssetPacks:a}})})]}),o>0&&(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(TI.Z,{}),(0,f.jsx)(N.Z,{noMargin:!0,children:1===o?(0,f.jsx)(w.Trans,{id:"{numberOfGameTemplates} Game Template",values:{numberOfGameTemplates:o}}):(0,f.jsx)(w.Trans,{id:"{numberOfGameTemplates} Game Templates",values:{numberOfGameTemplates:o}})})]}),s>0&&(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(UL.Z,{}),(0,f.jsx)(N.Z,{noMargin:!0,children:1===s?(0,f.jsx)(w.Trans,{id:"{numberOfCourses} Course",values:{numberOfCourses:s}}):(0,f.jsx)(w.Trans,{id:"{numberOfCourses} Courses",values:{numberOfCourses:s}})})]}),c>0&&(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(gM.Z,{}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"{totalCredits} Credits",values:{totalCredits:c}})})]}),i.length>0&&i.map((function(e,t){return(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,bo.sG)({planId:e.givenSubscriptionPlanId,logoSize:15}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"{0} of {1} subscription",values:{0:(0,zL.v)(e.durationInDays),1:(0,bo.FZ)(e.givenSubscriptionPlanId)}})})]},"".concat(e.givenSubscriptionPlanId,"-").concat(t))}))]})})},XL=function(e){var t=e.onDisplayBundle,n=e.i18n,i=e.category,a=(0,be.UQ)(),o=a.isMobile,s=a.isLandscape,u=function(e){return"xlarge"===e?6:"large"===e?4:"medium"===e?3:2}(a.windowSize)-1,d=c.useContext(jP.mJ).privateGameTemplateListingDatas,p=c.useContext(mM.q$).creditsPackageListingDatas,h=c.useContext(pI.bQ).bundleListingDatas,g=c.useContext(NL.KY).privateAssetPackListingDatas,m=c.useContext(dP.ZP).listedCourses,x=c.useContext($n.ZP),v=x.bundlePurchases,b=x.receivedBundles,C=c.useMemo((function(){if(!h||!b)return null;var e=h.filter((function(e){return e.categories.includes(i)}))[0],t=b.filter((function(e){return e.categories.includes(i)}))[0];if(!t)return e||h[0];var n=h.find((function(e){return e.id===t.id}));return n||(0,DL.zv)({bundle:t})}),[h,b,i]),j=!!c.useMemo((function(){return C?(0,aI.aS)({productId:C.id,receivedProducts:b,productPurchases:v,allProductListingDatas:h}):null}),[v,C,h,b]),y=c.useMemo((function(){return C?(0,aI.QS)({productListingDatas:[].concat((0,r.Z)(h||[]),(0,r.Z)(d||[]),(0,r.Z)(g||[]),(0,r.Z)(m||[]),(0,r.Z)(p||[])),productListingData:C}):null}),[C,h,d,g,m,p]),Z=c.useMemo((function(){return C?C.includedRedemptionCodes||[]:null}),[C]),k=c.useMemo((function(){return(0,HL.O1)({i18n:n,bundleListingData:C,productListingDatasIncludedInBundle:y,redemptionCodesIncludedInBundle:Z})}),[n,C,y,Z]),T=c.useMemo((function(){return(0,HL.Tm)({i18n:n,bundleListingData:C,productListingDatasIncludedInBundle:y,redemptionCodesIncludedInBundle:Z})}),[n,C,y,Z]),S=c.useMemo((function(){return C?(0,_L.e3)({i18n:n,productListingData:C,usageType:"default",plainText:!0}):null}),[n,C]),P=c.useMemo((function(){if(o&&!s)return null;if(!y)return new Array(u).fill(0).map((function(e,t){return(0,f.jsxs)(c.Fragment,{children:[t>0&&(o&&!s?(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"horizontal"})}):(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"vertical"})})),t>0&&(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsx)(pP.Z,{height:140}),(0,f.jsx)(pP.Z,{height:20}),(0,f.jsx)(pP.Z,{height:20}),(0,f.jsx)(M.hS,{})]})]},"skeleton-".concat(t))}));var e=y.filter((function(e){return"COURSE"===e.productType}));return new Array(u).fill(0).map((function(t,n){var r=e[n];return r?(0,f.jsxs)(c.Fragment,{children:[n>0&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"vertical"})}),n>0&&(0,f.jsx)(M.LZ,{}),(0,f.jsx)(qL,{courseListingData:r,isAlreadyReceived:j})]},"course-".concat(r.id)):(0,f.jsx)("div",{style:{flex:1}},"empty-tile-".concat(n))}))}),[o,s,u,y,j]);return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(H.Z,{background:"medium",variant:"outlined",style:(0,l.Z)((0,l.Z)({},YL.container),{},{padding:o?8:16}),children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,noColumnMargin:!0,noOverflowParent:!0,children:[(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},YL.leftColumn),{},{width:o&&!s?"100%":void 0}),children:[(0,f.jsxs)(_.ak,{noMargin:!0,children:[C?(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:C.nameByLocale?(0,vo.a)(n,C.nameByLocale):C.name}):(0,f.jsx)(pP.Z,{height:30}),C?(0,f.jsx)(N.Z,{noMargin:!0,children:C.descriptionByLocale?(0,vo.a)(n,C.descriptionByLocale):C.description}):(0,f.jsx)(pP.Z,{height:30}),o&&(0,f.jsx)(JL,{bundleListingData:C})]}),C?(0,f.jsxs)(_.ak,{noMargin:!0,children:[T&&k&&null!==S?(0,f.jsxs)(_.pJ,{alignItems:"center",justifyContent:C.visibleUntil&&!o?"flex-start":"space-between",noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[!j&&k&&(0,f.jsx)(N.Z,{noMargin:!0,color:"secondary",size:"sub-title",children:(0,f.jsx)("span",{style:YL.discountedPrice,children:k})}),(j||!C.visibleUntil)&&(0,f.jsx)(Q.Z,{label:j?(0,f.jsx)(w.Trans,{id:"Owned"}):(0,f.jsx)(w.Trans,{id:"{0} OFF",values:{0:T.savingsPercentageFormatted}}),style:j?YL.ownedChip:YL.discountChip})]}),!j&&(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:S})]}):(0,f.jsx)(pP.Z,{variant:"rect",height:20}),!j&&C.visibleUntil&&(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(WL.Z,{visibleUntil:C.visibleUntil,hideMinutesAndSeconds:!0,alignCenter:!0})})}),(0,f.jsx)(G.Z,{primary:!0,label:j?(0,f.jsx)(w.Trans,{id:"Browse bundle"}):(0,f.jsx)(w.Trans,{id:"Discover this bundle"}),onClick:function(){return t(C)}})]}):(0,f.jsx)(_.ak,{noMargin:!0,children:(0,f.jsx)(pP.Z,{variant:"rect",height:40})})]}),P,!o&&(0,f.jsx)(JL,{bundleListingData:C})]})})})}})},KL=YS("xlarge",!0),QL=(ZS.LF+10)*KL,$L={grid:{textAlign:"center",maxWidth:QL,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")},helpItem:{padding:10,flex:1,display:"flex"}},eA=function(e){var t=e.onSelectCategory,n=e.selectInAppTutorial,r=e.courses,i=e.onSelectCourse,a=e.onSelectBundle,o=e.getCourseCompletion,l=(e.getCourseChapterCompletion,e.onOpenAskAi),u=e.onOpenNewProjectSetupDialog,d=e.onSelectPrivateGameTemplateListingData,p=e.onSelectExampleShortHeader,h=c.useContext($n.ZP).limits,g=c.useContext(j.Z).palette.type,m=c.useContext(dP.ZP).listedCourses,x=(0,be.UQ)(),v=x.windowSize,b=x.isMobile,C=x.isLandscape,Z=x.isMediumScreen,k=!!h&&!!h.capabilities.classrooms&&h.capabilities.classrooms.hidePremiumProducts,S=c.useMemo((function(){if(!r)return null;var e=3*YS(v,C);return r.slice(0,e)}),[r,v,C]),P=c.useState(null),I=(0,s.Z)(P,2),E=I[0],L=I[1],A=[{title:(0,f.jsx)(w.Trans,{id:"Documentation"}),description:(0,f.jsx)(w.Trans,{id:"Find the complete documentation on everything"}),action:function(){return y.ZP.openExternalURL("https://wiki.gdevelop.io/gdevelop5/")}},{title:(0,f.jsx)(w.Trans,{id:"Forums"}),description:(0,f.jsx)(w.Trans,{id:"Ask your questions to the community"}),action:function(){return y.ZP.openExternalURL("https://forum.gdevelop.io")}},{title:(0,f.jsx)(w.Trans,{id:"Discord"}),description:(0,f.jsx)(w.Trans,{id:"Join the discussion"}),action:function(){return y.ZP.openExternalURL("https://discord.gg/gdevelop")}}].filter(Boolean),O=YS(v,C);return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(yS.ZP,{chipText:(0,f.jsx)(w.Trans,{id:"Start for free"}),title:(0,f.jsx)(w.Trans,{id:"Official Game Dev courses"}),titleAdornment:(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)(T.Z,{onClick:function(){return t("all-courses")},label:(0,f.jsx)(w.Trans,{id:"See all"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"})})}),subtitleText:(0,f.jsx)(w.Trans,{id:"Break into the <0>booming industry</0> of casual gaming. Sharpen your skills and become a professional. Start for free:",components:[(0,f.jsx)(pe.Z,{href:"https://gdevelop.io/blog/indie-mobile-creators-2025",onClick:function(){return y.ZP.openExternalURL("https://gdevelop.io/blog/indie-mobile-creators-2025")}})]}),customPaperStyle:{backgroundAttachment:"local",backgroundRepeat:"no-repeat",backgroundPosition:"top",backgroundSize:b&&!C?"contain":"auto",backgroundImage:"url('res/premium/premium_dialog_background.png'),".concat("dark"===g?"linear-gradient(180deg, #322659 0px, #3F2458 20px, #1D1D26 200px, #1D1D26 100%)":"linear-gradient(180deg, #CBBAFF 0px, #DEBBFF 20px, #F5F5F7 200px, #F5F5F7 100%)")},children:[(0,f.jsx)(yS.L,{children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(eP,{items:S&&m?S.map((function(e){var t=o(e.id),n=m.find((function(t){return t.id===e.id}));return{renderItem:function(){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(uP.ZP,{course:e,courseListingData:n,completion:t,onClick:function(){n&&i(n)}})},e.id)}}})):new Array(6).fill(0).map((function(e,t){return{renderItem:function(){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(uP.ZP,{course:null,courseListingData:null,completion:null})},"skeleton-course-".concat(t))}}}))})})}),!k&&(0,f.jsx)(yS.L,{children:(0,f.jsx)(XL,{onDisplayBundle:a,category:"starter",i18n:r})}),(0,f.jsxs)(yS.L,{children:[(0,f.jsxs)(_.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"section-title",children:(0,f.jsx)(w.Trans,{id:"Free in-app tutorials"})})}),(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(T.Z,{onClick:function(){return t("in-app-tutorials")},label:(0,f.jsx)(w.Trans,{id:"See all"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"})})})]}),(0,f.jsx)(oP,{selectInAppTutorial:n,displayAsCarousel:!0})]}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(bP,{limits:h,category:"all-tutorials",onSelectCategory:t,onSelectTutorial:L,getColumnsFromWindowSize:YS})}),(0,f.jsxs)(yS.L,{children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(N.Z,{size:"section-title",children:(0,f.jsx)(w.Trans,{id:"Learn by dissecting ready-made games"})})}),(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)(T.Z,{onClick:u,label:(0,f.jsx)(w.Trans,{id:"See all"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"})})})})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(FL,{onSelectExampleShortHeader:p,onSelectPrivateGameTemplateListingData:d,i18n:r,getColumnsFromWindowSize:YS,hideSearch:!0,onlyShowGames:!0,hidePremiumTemplates:!0,limitRowsTo:1})]}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(bP,{limits:h,category:"full-game",onSelectCategory:t,onSelectTutorial:L,getColumnsFromWindowSize:YS})}),(0,f.jsx)(yS.L,{children:(0,f.jsxs)(_.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"section-title",children:(0,f.jsx)(w.Trans,{id:"Want to know more?"})})}),(0,f.jsxs)(_.pJ,{noMargin:!0,children:[!b&&(0,f.jsx)(T.Z,{onClick:function(){y.ZP.openExternalURL("https://github.com/GDevelopApp/GDevelop-examples/issues/new/choose")},primary:!0,leftIcon:(0,f.jsx)(Uv,{}),label:Z?(0,f.jsx)(w.Trans,{id:"Submit an example"}):(0,f.jsx)(w.Trans,{id:"Submit your project as an example"})}),!b&&(0,f.jsx)(T.Z,{onClick:function(){y.ZP.openExternalURL("https://airtable.com/shrv295oHlsuS69el")},primary:!0,leftIcon:(0,f.jsx)(jS.Z,{}),label:Z?(0,f.jsx)(w.Trans,{id:"Submit a tutorial"}):(0,f.jsx)(w.Trans,{id:"Submit a tutorial translated in your language"})})]})]})}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(_.ak,{noMargin:!0,expand:!0,children:(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsxs)(kS.Z,{cols:O,style:$L.grid,cellHeight:"auto",spacing:10,children:[(0,f.jsx)(wS.Z,{cols:1,style:{background:"transparent"},children:(0,f.jsx)(H.Z,{background:"light",style:{display:"flex",height:"100%"},children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsxs)(M.x1,{expand:!0,alignItems:"flex-start",children:[(0,f.jsx)(Qk.Z,{}),(0,f.jsxs)(_.ak,{expand:!0,alignItems:"flex-start",children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",align:"left",children:(0,f.jsx)(w.Trans,{id:"Blocked on GDevelop?"})}),(0,f.jsx)(G.Z,{size:"large",color:"success",label:(0,f.jsx)(w.Trans,{id:"Ask the AI"}),rightIcon:(0,f.jsx)(sP.Z,{}),onClick:function(){return l({aiRequestId:null})}})]})]})})})}),A.map((function(e,t){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(ZS.HB,{onClick:e.action,size:"large",disabled:e.disabled,useDefaultDisabledStyle:!0,children:(0,f.jsx)("div",{style:$L.helpItem,children:(0,f.jsxs)(_.ak,{expand:!0,justifyContent:"center",useFullHeight:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:e.title}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body",color:"secondary",children:e.description})]})})},t)},t)}))]})})})}),E&&(0,f.jsx)(cP,{tutorial:E,onClose:function(){return L(null)}})]})}})},tA=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0_703_137)",children:[(0,f.jsx)("path",{d:"M7.99984 0.166626C8.27598 0.166626 8.49984 0.390484 8.49984 0.666626V1.33329C8.49984 1.60944 8.27598 1.83329 7.99984 1.83329C7.7237 1.83329 7.49984 1.60944 7.49984 1.33329V0.666626C7.49984 0.390484 7.7237 0.166626 7.99984 0.166626Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M14.1665 7.99996C14.1665 7.72382 14.3904 7.49996 14.6665 7.49996H15.3332C15.6093 7.49996 15.8332 7.72382 15.8332 7.99996C15.8332 8.2761 15.6093 8.49996 15.3332 8.49996H14.6665C14.3904 8.49996 14.1665 8.2761 14.1665 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M8.49984 14.6666C8.49984 14.3905 8.27598 14.1666 7.99984 14.1666C7.7237 14.1666 7.49984 14.3905 7.49984 14.6666V15.3333C7.49984 15.6094 7.7237 15.8333 7.99984 15.8333C8.27598 15.8333 8.49984 15.6094 8.49984 15.3333V14.6666Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M12.313 12.3131C12.5082 12.1178 12.8248 12.1178 13.0201 12.3131L13.6867 12.9797C13.882 13.175 13.882 13.4916 13.6867 13.6868C13.4915 13.8821 13.1749 13.8821 12.9796 13.6868L12.313 13.0202C12.1177 12.8249 12.1177 12.5083 12.313 12.3131Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M13.6867 3.02018C13.882 2.82492 13.882 2.50833 13.6867 2.31307C13.4915 2.11781 13.1749 2.11781 12.9796 2.31307L12.313 2.97974C12.1177 3.175 12.1177 3.49158 12.313 3.68685C12.5082 3.88211 12.8248 3.88211 13.0201 3.68685L13.6867 3.02018Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M3.68672 12.3131C3.88199 12.5083 3.88199 12.8249 3.68672 13.0202L3.02006 13.6868C2.8248 13.8821 2.50821 13.8821 2.31295 13.6868C2.11769 13.4916 2.11769 13.175 2.31295 12.9797L2.97962 12.3131C3.17488 12.1178 3.49146 12.1178 3.68672 12.3131Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M3.02006 2.31307C2.8248 2.11781 2.50821 2.11781 2.31295 2.31307C2.11769 2.50833 2.11769 2.82492 2.31295 3.02018L2.97962 3.68685C3.17488 3.88211 3.49146 3.88211 3.68672 3.68685C3.88199 3.49158 3.88199 3.175 3.68672 2.97974L3.02006 2.31307Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M0.166504 7.99996C0.166504 7.72382 0.390362 7.49996 0.666504 7.49996H1.33317C1.60931 7.49996 1.83317 7.72382 1.83317 7.99996C1.83317 8.2761 1.60931 8.49996 1.33317 8.49996H0.666504C0.390362 8.49996 0.166504 8.2761 0.166504 7.99996Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.22346 5.21941C4.05488 5.13512 3.85322 5.15279 3.70187 5.26512C3.55052 5.37745 3.47519 5.56534 3.50704 5.75111L4.30704 10.4178C4.34819 10.6578 4.55631 10.8333 4.79985 10.8333H11.1999C11.4434 10.8333 11.6515 10.6578 11.6927 10.4178L12.4927 5.75111C12.5245 5.56534 12.4492 5.37745 12.2978 5.26512C12.1465 5.15279 11.9448 5.13512 11.7762 5.21941L9.32542 6.44483L8.37948 5.34123C8.28449 5.23041 8.14581 5.16663 7.99985 5.16663C7.85389 5.16663 7.71521 5.23041 7.62022 5.34123L6.67428 6.44483L4.22346 5.21941ZM5.22143 9.83329L4.65952 6.55548L6.57624 7.51384C6.78146 7.61645 7.03017 7.56622 7.17948 7.39202L7.99985 6.43492L8.82022 7.39202C8.96954 7.56622 9.21825 7.61645 9.42346 7.51384L11.3402 6.55548L10.7783 9.83329H5.22143Z",fill:"currentColor"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_703_137",children:(0,f.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]}))})),nA={1:(0,f.jsx)(w.Trans,{id:"1st"}),2:(0,f.jsx)(w.Trans,{id:"2nd"}),3:(0,f.jsx)(w.Trans,{id:"3rd"}),4:(0,f.jsx)(w.Trans,{id:"4th"}),5:(0,f.jsx)(w.Trans,{id:"5th"}),6:(0,f.jsx)(w.Trans,{id:"6th"}),7:(0,f.jsx)(w.Trans,{id:"7th"}),8:(0,f.jsx)(w.Trans,{id:"8th"}),9:(0,f.jsx)(w.Trans,{id:"9th"}),10:(0,f.jsx)(w.Trans,{id:"10th"})},rA={container:{maxWidth:850},thumbnail:{display:"block",objectFit:"contain",verticalAlign:"middle",borderRadius:8,width:"100%",border:"1px solid lightgrey",boxSizing:"border-box",aspectRatio:"16 / 9",transition:"opacity 0.3s ease-in-out"},lockerImage:{height:60,width:60},lockedOverlay:{position:"absolute",background:"rgba(0, 0, 0, 0.6)",aspectRatio:"16 / 9",borderRadius:8,inset:0,display:"flex",justifyContent:"center",alignItems:"center",color:"white"},textContainer:{flex:1},imageContainer:{position:"relative"},desktopImageContainer:{maxWidth:300,minWidth:200},mobileImageContainer:{width:"100%"},tagsContainer:{flexWrap:"wrap"},chip:{marginRight:2,marginBottom:2}},iA=function(){return(0,f.jsx)("div",{style:rA.lockedOverlay,children:(0,f.jsx)(Fo,{style:rA.lockerImage})})},aA=function(e){var t=e.message;return(0,f.jsx)("div",{style:rA.lockedOverlay,children:(0,f.jsx)(N.Z,{color:"inherit",children:t})})},oA=function(e){var t=e.i18n,n=e.tutorial,r=e.limits,i=e.onSelectTutorial,a=e.onSelectCourse,o=e.index,u=e.onOpenTemplateFromTutorial,d=e.isLocked,p=e.onClickSubscribe,h=(0,be.UQ)(),g=h.isMobile,m=h.isLandscape,x=c.useState(!1),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=d||!r||!(0,Ei.$S)(n,r.capabilities),Z=n.availableAt?t._({id:"Coming in {0}",values:{0:t.date(new Date(Date.parse(n.availableAt)),{month:"long",year:"numeric"})}}):null,k=n.gameLink,S=n.courseId,P=(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(Q.Z,{size:"small",color:"secondary",label:nA[o+1]}),(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:(0,vo.a)(t,n.titleByLocale)})]});return(0,f.jsx)("div",{style:rA.container,children:(0,f.jsxs)(_.ep,{alignItems:"stretch",noColumnMargin:!0,noMargin:!0,expand:!0,noResponsiveLandscape:!0,children:[g&&!m&&P,(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},rA.imageContainer),g&&!m?rA.mobileImageContainer:rA.desktopImageContainer),children:[(0,f.jsx)(_p.W,{style:(0,l.Z)({opacity:b?1:0,filter:Z?"grayscale(1)":void 0},rA.thumbnail),src:(0,vo.a)(t,n.thumbnailUrlByLocale),alt:"Lesson thumbnail",onLoad:function(){return C(!0)}}),j?(0,f.jsx)(iA,{}):Z?(0,f.jsx)(aA,{message:Z}):null]}),(0,f.jsxs)(_.ak,{alignItems:"flex-start",noMargin:!0,expand:!0,children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},rA.textContainer),{},{opacity:d?.6:1}),children:(0,f.jsxs)(_.ak,{justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[!(g&&!m)&&P,k&&g&&!m&&!Z&&!j&&(0,f.jsx)(T.Z,{primary:!0,leftIcon:(0,f.jsx)(fM.Z,{fontSize:"small"}),label:(0,f.jsx)(w.Trans,{id:"Play game"}),onClick:function(){return y.ZP.openExternalURL(k)}}),(0,f.jsx)("div",{style:rA.tagsContainer,children:n.tagsByLocale&&n.tagsByLocale.map((function(e){var n=(0,vo.a)(t,e);return(0,f.jsx)(Q.Z,{size:"small",style:rA.chip,label:n,textColor:"secondary"},n)}))}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,vo.a)(t,n.descriptionByLocale)})]}),!Z&&!j&&(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:k?"space-between":"flex-end",expand:g&&!m,children:[k&&!(g&&!m)&&(0,f.jsx)(T.Z,{primary:!0,leftIcon:(0,f.jsx)(fM.Z,{fontSize:"small"}),label:(0,f.jsx)(w.Trans,{id:"Play game"}),onClick:function(){return y.ZP.openExternalURL(k)}}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",expand:g&&!m,children:[u&&(0,f.jsx)(T.Z,{primary:!0,fullWidth:g&&!m,label:(0,f.jsx)(w.Trans,{id:"Open project"}),onClick:u}),S?(0,f.jsx)(G.Z,{primary:!0,fullWidth:g&&!m,disabled:j,label:(0,f.jsx)(w.Trans,{id:"Open course"}),onClick:function(){return a(S)}}):(0,f.jsx)(G.Z,{primary:!0,fullWidth:g&&!m,disabled:j,label:(0,f.jsx)(w.Trans,{id:"Open lesson"}),onClick:function(){return i(n)}})]})]})]})}),p&&(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(tA,{fontSize:"small"}),fullWidth:g&&!m,label:(0,f.jsx)(w.Trans,{id:"Get lesson with Edu"}),onClick:p})]})]})})},sA={educationCurriculumTutorialContainer:{display:"flex",flexDirection:"column",gap:24},sectionTitleContainer:{marginBottom:-10}},lA=function(e){var t=e.i18n,n=e.limits,r=e.tutorials,i=e.onSelectTutorial,a=e.onSelectCourse,o=e.onOpenTemplateFromTutorial,s=e.isLocked,l=e.onClickSubscribe,u=e.renderInterstitialCallout,d=c.useMemo((function(){var e=[],c=null,d=0;return r.forEach((function(r){if(r.sectionByLocale){var p=(0,vo.a)(t,r.sectionByLocale);p!==c&&(0!==d&&u&&e.push(u("interstitial-".concat(d))),e.push((0,f.jsx)("div",{style:sA.sectionTitleContainer,children:(0,f.jsx)(N.Z,{size:"section-title",noMargin:!0,children:p})},"section-".concat(p))),d=0,c=p),e.push((0,f.jsx)(oA,{i18n:t,limits:n,tutorial:r,isLocked:s,onClickSubscribe:l,onSelectTutorial:i,onSelectCourse:a,index:d,onOpenTemplateFromTutorial:r.templateUrl?function(){o(r.id)}:null},r.id)),d+=1}})),e}),[r,t,n,i,a,o,u,s,l]);return(0,f.jsx)("div",{style:sA.educationCurriculumTutorialContainer,children:d})},cA=function(e){switch(e){case"small":return 2;case"medium":default:return 3;case"large":return 4;case"xlarge":return 6}},uA=function(e){var t=e.category,n=e.onBack,r=e.onOpenTemplateFromTutorial,i=e.onSelectCourse,a=c.useContext(dP.ZP).listedCourses,o=c.useContext($n.ZP).limits,l=c.useContext(nm.n).tutorials,u=GS[t],d=l?l.filter((function(e){return e.category===t})):null,p=c.useState(null),h=(0,s.Z)(p,2),g=h[0],m=h[1];return d?(0,f.jsx)(w.I18n,{children:function(e){var s=e.i18n;return(0,f.jsxs)(yS.ZP,{title:u.title,subtitleText:u.description,backAction:n,children:[(0,f.jsx)(yS.L,{children:"education-curriculum"===t?(0,f.jsx)(lA,{tutorials:d,onSelectTutorial:m,onSelectCourse:function(e){if(a){var t=a.find((function(t){return t.id===e}));t&&i(t)}},i18n:s,limits:o,onOpenTemplateFromTutorial:r}):(0,f.jsx)(mP,{items:d.map((function(e){return JS({i18n:s,limits:o,tutorial:e,onSelectTutorial:m})})),getColumnsFromWindowSize:cA})}),g&&(0,f.jsx)(cP,{tutorial:g,onClose:function(){return m(null)}})]})}}):(0,f.jsx)(yS.ZP,{flexBody:!0,children:(0,f.jsx)(yS.L,{expand:!0,children:(0,f.jsx)(Oe.Z,{})})})},dA=n(34294),pA=n(12094),fA=["src"],hA=function(e){var t=e.src,n=(0,go.Z)(e,fA),r=c.useState(!1),i=(0,s.Z)(r,2),a=i[0],o=i[1];return(0,f.jsx)(pA.Z,(0,l.Z)((0,l.Z)({src:t},n),{},{className:en()({"with-min-height":a,"with-grab-cursor":a}),afterZoomIn:function(){return o(!0)},afterZoomOut:function(){return o(!1)},zoomType:"click",moveType:"drag",hideHint:!0,zoomScale:1.4}))},gA={paddingTop:6},mA=function(e){var t=e.courseChapterTask,n=e.isOpen,r=e.isComplete,i=e.onComplete,a=c.useState(n),o=(0,s.Z)(a,2),u=o[0],d=o[1],p=(0,be.UQ)(),h=p.isMobile,g=p.isLandscape;c.useEffect((function(){n||d(!1)}),[n]);var m=n||u;return(0,f.jsxs)(_.pJ,{alignItems:"flex-start",noMargin:!0,children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},gA),{},{paddingLeft:h&&!g?0:20}),children:(0,f.jsx)(Vn.Z,{checked:r,onCheck:function(){return i(!r)},style:{margin:0}})}),(0,f.jsx)(M.x1,{children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[(0,f.jsx)("div",{onClick:function(){d(!0)},style:{pointerEvents:m?"none":"all"},children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"sub-title",children:t.title}),t.text&&(0,f.jsx)(Re.r,{withTextEllipsis:!m,source:t.text,allowParagraphs:!0})]})}),m&&t.imageUrls&&t.imageUrls.map((function(e){return(0,f.jsx)(hA,{width:"100%",alt:"",src:e},e)})),m&&t.hint&&(0,f.jsx)(je.Z,{kind:"info",background:"light",children:(0,f.jsx)(Re.r,{source:t.hint})}),m&&t.answer&&(t.answer.text||t.answer.imageUrls)&&(0,f.jsxs)(ni.UQ,{kind:"answer",noMargin:!0,children:[(0,f.jsx)(ni._m,{children:(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Answer"})})}),(0,f.jsxs)(ni.X1,{children:[!!t.answer.text&&(0,f.jsx)(Re.r,{source:t.answer.text,allowParagraphs:!0}),!!t.answer.imageUrls&&(0,f.jsx)(_.ak,{noMargin:!0,noOverflowParent:!0,children:t.answer.imageUrls.map((function(e){return(0,f.jsx)(hA,{width:"100%",alt:"",src:e},e)}))})]})]})]})})]})},xA=function(e){if(!e||!e.startsWith("https://youtu.be/"))return null;try{var t=new URL(e).pathname.split("/").pop();return t&&t.length?t:(console.error("The video URL is badly formatted ".concat(e)),null)}catch(n){return console.error("Could not parse youtube url ".concat(e,":"),n),null}},vA={videoAndMaterialsContainer:{display:"flex",marginTop:8,gap:8,alignItems:"stretch",flexWrap:"wrap",marginBottom:8,flex:1,minWidth:0},lockedChapterTextContainer:{display:"flex",flex:1,minHeight:0},videoContainer:{flex:2,minWidth:300,display:"flex",position:"relative"},videoThumbnail:{flex:1,aspectRatio:"16 / 9",objectFit:"cover",width:"100%",borderRadius:4},lockerImage:{height:60,width:60},lockedOverlay:{position:"absolute",background:"rgba(0, 0, 0, 0.6)",borderRadius:4,inset:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"white"},sideBar:{padding:16,display:"flex"}},bA=function(){return(0,f.jsx)("div",{style:vA.lockedOverlay,children:(0,f.jsx)(Fo,{style:vA.lockerImage})})},CA=c.forwardRef((function(e,t){e.course;var n=e.courseChapter,r=e.onClickUnlock,i=(0,be.UQ)().windowSize,a=n.videoUrl?xA(n.videoUrl):null;return(0,f.jsxs)("div",{style:vA.videoAndMaterialsContainer,children:[a&&(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},vA.videoContainer),{},{maxWidth:"xlarge"===i?960:640}),children:[(0,f.jsx)("img",{alt:"Video for lesson ".concat(n.title),style:vA.videoThumbnail,src:"https://i.ytimg.com/vi/".concat(a,"/sddefault.jpg")}),(0,f.jsx)(bA,{})]}),(0,f.jsx)("div",{style:vA.lockedChapterTextContainer,children:(0,f.jsx)(H.Z,{background:"medium",style:vA.sideBar,children:(0,f.jsxs)(_.ak,{noMargin:!0,justifyContent:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Unlock this lesson to finish the course"})}),(0,f.jsx)(G.Z,{primary:!0,fullWidth:!0,label:(0,f.jsx)(w.Trans,{id:"Unlock the whole course"}),onClick:r})]})})})]})})),jA=CA,yA={flex:1,display:"flex"},ZA={display:"flex",alignItems:"center",gap:4},kA=c.forwardRef((function(e,t){e.course;var n=e.chapterIndex,r=e.courseChapter,i=e.getChapterCompletion,a=c.useContext(j.Z),o=(0,be.UQ)(),s=o.isMobile,u=o.isLandscape,d=s&&!u,p=i(r.id),h=!!p&&p.completedTasks>=p.tasks;return(0,f.jsxs)("div",{ref:t,style:(0,l.Z)((0,l.Z)({},yA),{},{flexDirection:d?"column-reverse":"row",alignItems:d?"flex-start":"center",justifyContent:"space-between"}),children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsxs)(N.Z,{size:"title",children:[n+1,". ",r.title]}),h&&!d&&(0,f.jsx)("div",{style:{display:"flex",color:a.statusIndicator.success},children:(0,f.jsx)(xo.Z,{})})]}),(0,f.jsx)(_.pJ,{noMargin:!0,alignItems:"center",children:h?(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},ZA),{},{color:a.statusIndicator.success}),children:[d&&(0,f.jsx)(xo.Z,{}),(0,f.jsx)(N.Z,{color:"inherit",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Finished"})})]}):p?(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"{0} of {1} completed",values:{0:p.completedTasks,1:p.tasks}})}):null})]})})),wA=kA,TA={icon:{fontSize:18},stickyTitle:{position:"sticky",top:-1,display:"flex",flexDirection:"column",zIndex:2},videoContainer:{display:"flex",position:"relative",minWidth:300,marginTop:8,alignItems:"stretch",flexWrap:"wrap",marginBottom:8,flex:1},videoIFrame:{flex:1,aspectRatio:"16 / 9"},sideBar:{padding:16,display:"flex"}},SA=c.forwardRef((function(e,t){var n=e.chapterIndex,r=e.course,i=e.courseChapter,a=e.onOpenTemplate,o=e.onCompleteTask,u=e.isTaskCompleted,d=e.getChapterCompletion,p=e.onClickUnlock,h=c.useContext(D.ZP).values.language.split("_")[0],g=c.useContext(j.Z),m=(0,be.UQ)().windowSize,x=c.useState(!1),v=(0,s.Z)(x,2),b=v[0],C=v[1],y=xA(i.videoUrl);return(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(wA,{course:r,chapterIndex:n,courseChapter:i,getChapterCompletion:d,ref:t}),i.isLocked?(0,f.jsx)(jA,{course:r,courseChapter:i,onClickUnlock:p}):y?(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},TA.videoContainer),{},{maxWidth:"xlarge"===m?960:640}),children:(0,f.jsx)("iframe",{title:"Video for lesson ".concat(i.title),type:"text/html",style:TA.videoIFrame,src:"https://www.youtube.com/embed/".concat(y,"?cc_load_policy=1&cc_lang_pref=","en","&hl=").concat(h),frameBorder:"0",referrerPolicy:"strict-origin-when-cross-origin",credentialless:!0,credentialLess:!0})}):void 0,!i.isLocked&&(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},TA.stickyTitle),{},{backgroundColor:g.paper.backgroundColor.dark}),children:[(0,f.jsx)(or.Z,{}),(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.x1,{alignItems:"center",justifyContent:"space-between",noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Tasks"})}),(0,f.jsx)(T.Z,{primary:!0,label:b?(0,f.jsx)(w.Trans,{id:"Close all tasks"}):(0,f.jsx)(w.Trans,{id:"Open all tasks"}),leftIcon:b?(0,f.jsx)(st.Z,{style:TA.icon}):(0,f.jsx)(ot.Z,{style:TA.icon}),onClick:function(){return C(!b)}})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(or.Z,{})]}),!i.isLocked&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(_.ak,{noMargin:!0,expand:!0,children:(0,f.jsx)(H.Z,{background:"medium",style:TA.sideBar,children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,children:nA[n+1]}),"\xa0",(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Chapter"})}),"\xa0-\xa0",(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Template"})})]}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"After watching the video, use this template to complete the following tasks."})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(dA.Z,{fontSize:"small"}),label:(0,f.jsx)(w.Trans,{id:"Open template"}),onClick:a})})]})})}),i.tasks.map((function(e,t){return(0,f.jsx)(mA,{courseChapterTask:e,isOpen:b,isComplete:u(i.id,t),onComplete:function(e){return o(i.id,t,e)}},t.toString())}))]})]})})),PA=SA,IA={textContainer:{overflow:"hidden"},checkboxContainer:{paddingTop:15},image:{maxWidth:"100%"},icon:{fontSize:18},stickyTitle:{position:"sticky",top:-1,display:"flex",flexDirection:"column",zIndex:2},checkbox:{margin:0}},EA=function(e){var t=e.task,n=e.isComplete,r=e.onComplete,i=c.useState(!1),a=(0,s.Z)(i,2),o=a[0],u=a[1],d=(0,be.UQ)(),p=d.isMobile,h=d.isLandscape,g=c.useContext(j.Z);return(0,f.jsx)(M.x1,{children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(_.ak,{noMargin:!0,children:(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},IA.stickyTitle),{},{backgroundColor:g.paper.backgroundColor.dark}),children:[(0,f.jsx)(or.Z,{}),(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.x1,{alignItems:"center",justifyContent:"space-between",noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:t.title}),(0,f.jsx)(T.Z,{primary:!0,label:o?(0,f.jsx)(w.Trans,{id:"Close task"}):(0,f.jsx)(w.Trans,{id:"Open task"}),leftIcon:o?(0,f.jsx)(st.Z,{style:IA.icon}):(0,f.jsx)(ot.Z,{style:IA.icon}),onClick:function(){return u(!o)}})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(or.Z,{})]})}),o&&(0,f.jsxs)(_.pJ,{alignItems:"flex-start",noMargin:!0,children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},IA.checkboxContainer),{},{paddingLeft:p&&!h?0:20}),children:(0,f.jsx)(Vn.Z,{checked:n,onCheck:function(){return r(!n)},style:IA.checkbox})}),(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[(0,f.jsx)(JA,{items:t.items}),o&&t.answer&&(0,f.jsxs)(ni.UQ,{kind:"answer",noMargin:!0,children:[(0,f.jsx)(ni._m,{children:(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Answer"})})}),(0,f.jsx)(ni.X1,{children:(0,f.jsx)(_.ak,{children:(0,f.jsx)(JA,{items:t.answer.items})})})]})]})]})]})})},MA=new Set(["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","let","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield","await","async","static","get","set","of","from"]),LA=new Set(["true","false","null","undefined"]),AA={wrapper:{display:"grid",gridTemplateColumns:"auto 1fr",borderRadius:8,overflow:"hidden",border:"1px solid transparent",fontSize:14},lineNumbersColumn:{padding:"12px 8px",textAlign:"right",userSelect:"none",fontFamily:'Menlo, Monaco, "Courier New", monospace'},lineNumber:{paddingRight:12,lineHeight:1.6},codeColumn:{padding:"12px 16px",fontFamily:'Menlo, Monaco, "Courier New", monospace',overflowX:"auto",userSelect:"text",cursor:"text"},codeLine:{display:"block",whiteSpace:"pre",lineHeight:1.6,userSelect:"text",cursor:"text"},token:{whiteSpace:"pre",userSelect:"text",cursor:"text"}},OA={keyword:{color:"#c792ea"},boolean:{color:"#c792ea"},string:{color:"#ecc48d"},comment:{color:"#637777",fontStyle:"italic"},number:{color:"#f78c6c"},operator:{color:"#89ddff"},punctuation:{color:"#89ddff"},identifier:{color:"#82aaff"},plain:{color:"#d6deeb"}},RA={keyword:{color:"#7c3aed"},boolean:{color:"#7c3aed"},string:{color:"#b45309"},comment:{color:"#64748b",fontStyle:"italic"},number:{color:"#b91c1c"},operator:{color:"#0f766e"},punctuation:{color:"#0f766e"},identifier:{color:"#1d4ed8"},plain:{color:"#0f172a"}},FA=/^\s+/,DA=/^(0[xX][0-9a-fA-F]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)/,NA=/^[A-Za-z_$][A-Za-z0-9_$]*/,_A=/^((===|!==|>>>|<<=|>>=|==|!=|<=|>=|=>|\+\+|--|\+=|-=|\*=|\/=|%=|&&|\|\||\^=|&=|\|=)|[+\-*/%&|^!~<>?:=])/,BA=/^[{}()[\].,;]/,UA=function(e){for(var t=e.line,n=[],r=0,i=e.isInBlockComment,a=e.isInTemplateString;r<t.length;)if(a){var o=zA(t,r);if(-1===o)return n.push({type:"string",text:t.slice(r)}),{tokens:n,isInBlockComment:i,isInTemplateString:!0};n.push({type:"string",text:t.slice(r,o+1)}),r=o+1,a=!1}else if(i){var s=t.indexOf("*/",r);if(-1===s)return n.push({type:"comment",text:t.slice(r)}),{tokens:n,isInBlockComment:!0,isInTemplateString:!1};n.push({type:"comment",text:t.slice(r,s+2)}),r=s+2,i=!1}else{if(t.startsWith("//",r)){n.push({type:"comment",text:t.slice(r)});break}if(t.startsWith("/*",r)){var l=t.indexOf("*/",r+2);if(-1===l)return n.push({type:"comment",text:t.slice(r)}),{tokens:n,isInBlockComment:!0,isInTemplateString:!1};n.push({type:"comment",text:t.slice(r,l+2)}),r=l+2}else{var c=t[r];if('"'!==c&&"'"!==c)if("`"!==c){var u=VA(FA,t,r);if(u)n.push({type:"whitespace",text:u}),r+=u.length;else{var d=VA(DA,t,r);if(d)n.push({type:"number",text:d}),r+=d.length;else{var p=VA(NA,t,r);if(p)LA.has(p)?n.push({type:"boolean",text:p}):MA.has(p)?n.push({type:"keyword",text:p}):n.push({type:"identifier",text:p}),r+=p.length;else{var f=VA(_A,t,r);if(f)n.push({type:"operator",text:f}),r+=f.length;else{var h=VA(BA,t,r);h?(n.push({type:"punctuation",text:h}),r+=h.length):(n.push({type:"plain",text:c}),r+=1)}}}}}else{var g=zA(t,r+1);if(-1===g)return n.push({type:"string",text:t.slice(r)}),{tokens:n,isInBlockComment:!1,isInTemplateString:!0};n.push({type:"string",text:t.slice(r,g+1)}),r=g+1}else{var m=HA(t,r,c);n.push({type:"string",text:t.slice(r,m)}),r=m}}}return{tokens:n,isInBlockComment:i,isInTemplateString:a}},VA=function(e,t,n){var r=t.slice(n).match(e);return r?r[0]:null},HA=function(e,t,n){for(var r=t+1;r<e.length;)if("\\"!==e[r]){if(e[r]===n)return r+1;r+=1}else r+=2;return e.length},zA=function(e,t){for(var n=t;n<e.length;)if("\\"!==e[n]){if("`"===e[n])return n;n+=1}else n+=2;return-1},WA=function(e){var t=e.code,n=e.language,r=c.useContext(j.Z),a=c.useMemo((function(){return t.replace(/\t/g,"  ")}),[t]),o=c.useMemo((function(){return n&&"javascript"!==n.toLowerCase()&&"js"!==n.toLowerCase()?a.replace(/\r\n/g,"\n").split("\n").map((function(e){return[{type:"plain",text:e}]})):function(e){var t,n=e.replace(/\r\n/g,"\n").split("\n"),r=[],a=!1,o=!1,s=(0,i.Z)(n);try{for(s.s();!(t=s.n()).done;){var l=t.value,c=UA({line:l,isInBlockComment:a,isInTemplateString:o}),u=c.tokens,d=c.isInBlockComment,p=c.isInTemplateString;r.push(u),a=d,o=p}}catch(f){s.e(f)}finally{s.f()}return 0===r.length?[[]]:r}(a)}),[a,n]),u="dark"===r.palette.type,d=u?"#0f172a":"#f3f4f6",p=u?"rgba(255, 255, 255, 0.08)":"rgba(15, 23, 42, 0.15)",h=u?"rgba(148, 163, 184, 0.85)":"rgba(139, 100, 118, 0.85)",g=c.useMemo((function(){return u?OA:RA}),[u]),m=c.useState(!1),x=(0,s.Z)(m,2),v=x[0],b=x[1];return(0,f.jsxs)("div",{style:{position:"relative"},children:[(0,f.jsx)($.Z,{onClick:function(){a&&(navigator.clipboard.writeText(a),b(!0))},style:{position:"absolute",top:8,right:8,backgroundColor:d},children:(0,f.jsx)(Xt.Z,{})}),(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},AA.wrapper),{},{backgroundColor:d,color:h,borderColor:p}),children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},AA.lineNumbersColumn),{},{color:r.text.secondary}),children:o.map((function(e,t){return(0,f.jsx)("div",{style:AA.lineNumber,children:t+1},"line-number-".concat(t))}))}),(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},AA.codeColumn),{},{backgroundColor:d}),children:o.map((function(e,t){return(0,f.jsx)("div",{style:AA.codeLine,children:e.map((function(e,n){return(0,f.jsx)("span",{style:(0,l.Z)({color:(g[e.type]||{}).color||g.plain.color,fontStyle:(g[e.type]||{}).fontStyle},AA.token),children:e.text},"token-".concat(t,"-").concat(n))}))},"code-line-".concat(t))}))})]}),(0,f.jsx)(Ws.Z,{message:(0,f.jsx)(w.Trans,{id:"Copied to clipboard!"}),visible:v,hide:function(){return b(!1)}})]})},GA={container:{width:"100%",overflowX:"auto",margin:"12px 0"}},YA=function(e){var t=e.header,n=e.rows,r=c.useMemo((function(){var e=n.reduce((function(e,t){return t.length>e?t.length:e}),0);return t&&t.length?Math.max(t.length,e):e}),[t,n]),i=c.useMemo((function(){return r>0?Array.from({length:r},(function(e,t){return t})):[]}),[r]);return t||0!==n.length?(0,f.jsx)(_.ak,{noMargin:!0,children:(0,f.jsx)("div",{style:GA.container,children:(0,f.jsxs)(Rv.iA,{children:[t&&t.length>0&&(0,f.jsx)(Rv.xD,{children:(0,f.jsx)(Rv.SC,{children:i.map((function(e){return(0,f.jsx)(Rv.bY,{children:t&&(0,f.jsx)(Re.r,{allowParagraphs:!0,source:t[e]})||""},"header-".concat(e))}))})}),(0,f.jsx)(Rv.RM,{children:n.map((function(e,t){return(0,f.jsx)(Rv.SC,{children:i.length>0?i.map((function(n){return(0,f.jsx)(Rv.Nn,{children:e&&(0,f.jsx)(Re.r,{allowParagraphs:!0,source:e[n]})||""},"row-".concat(t,"-cell-").concat(n))})):e.map((function(e,n){return(0,f.jsx)(Rv.Nn,{children:e&&(0,f.jsx)(Re.r,{allowParagraphs:!0,source:e})||""},"row-".concat(t,"-cell-").concat(n))}))},"row-".concat(t))}))})]})})}):null},qA={media:{maxWidth:"80%"}},JA=function(e){var t=e.items,n=e.onCompleteTask,r=e.isTaskCompleted,i=c.useContext(j.Z);return(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,children:t.map((function(e,t){if("text"===e.type)return(0,f.jsx)(Re.r,{allowParagraphs:!0,source:e.text},t.toString());if("image"===e.type)return(0,f.jsxs)(_.ak,{alignItems:"center",children:[(0,f.jsx)(hA,{width:"90%",alt:"",src:e.url}),e.caption&&(0,f.jsx)("div",{style:{color:i.text.color.secondary},children:(0,f.jsx)(Re.r,{source:e.caption})})]},t.toString());if("video"===e.type)return(0,f.jsxs)(_.ak,{alignItems:"center",children:[(0,f.jsx)("video",{src:e.url,style:qA.media,controls:!0}),e.caption&&(0,f.jsx)("div",{style:{color:i.text.color.secondary},children:(0,f.jsx)(Re.r,{source:e.caption})})]},t.toString());if("task"===e.type&&r&&n){var a=r(t);return(0,f.jsx)(EA,{task:e,isComplete:a,onComplete:function(){return n(t,!a)}},t.toString())}return"code"===e.type?(0,f.jsx)(WA,{code:e.code,language:e.language},t.toString()):"table"===e.type?(0,f.jsx)(YA,{header:e.header,rows:e.rows},t.toString()):null}))})})},XA={icon:{fontSize:18},videoAndMaterialsContainer:{display:"flex",marginTop:8,gap:8,alignItems:"stretch",flexWrap:"wrap",marginBottom:8,flex:1,minWidth:0},sideBar:{padding:16,display:"flex"},image:{maxWidth:"100%"}},KA=c.forwardRef((function(e,t){var n=e.chapterIndex,r=e.courseChapter,i=e.course,a=e.onOpenTemplate,o=e.onCompleteTask,s=e.isTaskCompleted,l=e.getChapterCompletion,c=e.onClickUnlock;return(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(wA,{course:i,chapterIndex:n,courseChapter:r,getChapterCompletion:l,ref:t}),r.isLocked?(0,f.jsx)(jA,{course:i,courseChapter:r,onClickUnlock:c}):r.templates.length>0?(0,f.jsx)("div",{style:XA.videoAndMaterialsContainer,children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Chapter materials"})}),(0,f.jsx)(H.Z,{background:"medium",style:XA.sideBar,children:(0,f.jsx)(_.ak,{noMargin:!0,children:r.templates.map((function(e){return(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,children:nA[n+1]}),"\xa0",(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Chapter"})}),"\xa0-\xa0",e.title&&(0,f.jsxs)(N.Z,{noMargin:!0,children:[e.title,"\xa0"]}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Template"})}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(dA.Z,{fontSize:"small"}),label:(0,f.jsx)(w.Trans,{id:"Open template"}),onClick:function(){return a(e.id)}})})]},e.id)}))})})]})}):null,(0,f.jsx)(M.sg,{children:!r.isLocked&&(0,f.jsx)(JA,{items:r.items,onCompleteTask:function(e,t){return o(r.id,e,t)},isTaskCompleted:function(e){return s(r.id,e)}})})]})})),QA=KA,$A=n(23883),eO=function(e){var t=e.course,n=e.courseListingData,r=e.onClose,i=c.useContext($n.ZP),u=i.profile,d=i.onOpenLoginDialog,p=i.onOpenCreateAccountDialog,h=i.onPurchaseSuccessful,g=i.onRefreshCoursePurchases,m=i.coursePurchases,x=i.loginState,v=c.useState(!1),b=(0,s.Z)(v,2),C=b[0],j=b[1],Z=c.useState("loggingIn"===x),k=(0,s.Z)(Z,2),S=k[0],P=k[1],I=c.useState(!1),L=(0,s.Z)(I,2),A=L[0],O=L[1],R=c.useState(!1),F=(0,s.Z)(R,2),D=F[0],B=F[1],U=c.useState(""),V=(0,s.Z)(U,2),H=V[0],z=V[1],W=(0,Ye.Z)().showAlert,G=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:if(B(!1),t=n.prices.find((function(e){return"default"===e.usageType}))){e.next=9;break}return console.error("Unable to find the price for the usage type default"),e.next=8,W({title:{id:"An error happened"},message:{id:"Unable to find the price for this course. Please try again later."}});case 8:return e.abrupt("return");case 9:e.prev=9,j(!0),r=(0,DL.RB)((0,l.Z)({productId:n.id,priceName:t.name,userId:u.id,userEmail:u.email},H?{password:H}:void 0)),y.ZP.openExternalURL(r),e.next=27;break;case 15:if(e.prev=15,e.t0=e.catch(9),!(i=(0,uo.T)(e.t0))||403!==i.status||"auth/wrong-password"!==i.code){e.next=23;break}return e.next=21,W({title:{id:"Operation not allowed"},message:{id:"The password you entered is incorrect. Please try again."}});case 21:e.next=26;break;case 23:return console.error("Unable to get the checkout URL",e.t0),e.next=26,W({title:{id:"An error happened"},message:{id:"Unable to get the checkout URL. Please try again later."}});case 26:j(!1);case 27:return e.prev=27,z(""),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[9,15,27,30]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){y.ZP.isDev()?B(!0):G()};c.useEffect((function(){Y()}),[]),c.useEffect((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(C&&m&&m.find((function(e){return e.productId===n.id})))){e.next=3;break}return e.next=3,h();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C,m,n,h,g]),(0,Ss.Y)((function(){g()}),C?3900:null),c.useEffect((function(){var e;return(0,o.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"done"===x&&(e=setTimeout((function(){return P(!1)}),3e3));case 1:case"end":return t.stop()}}),t)})))(),function(){clearTimeout(e)}}),[x]),c.useEffect((function(){t&&(t.isLocked||(C?(j(!1),O(!0)):A||r()))}),[t,n,C,r,A]);var q=u?A?{subtitle:(0,f.jsx)(w.Trans,{id:"Your purchase has been processed!"}),content:(0,f.jsx)(M.x1,{justifyContent:"center",alignItems:"center",children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"You can now go back to the course."})})})}:C?{subtitle:(0,f.jsx)(w.Trans,{id:"Complete your payment on the web browser"}),content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(M.x1,{justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(GI.Z,{size:20}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Waiting for the purchase confirmation..."})})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"Once you're done, come back to GDevelop and the assets will be added to your account automatically."})})})]})}:S?{subtitle:(0,f.jsx)(w.Trans,{id:"Loading your profile..."}),content:(0,f.jsx)(M.x1,{justifyContent:"center",alignItems:"center",children:(0,f.jsx)(GI.Z,{size:20})})}:{subtitle:(0,f.jsx)(w.Trans,{id:"The course {0} will be linked to your account {1}.",values:{0:n.name,1:u.email}}),content:(0,f.jsx)(M.x1,{justifyContent:"center",alignItems:"center",children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"A new secure window will open to complete the purchase."})})})}:{subtitle:(0,f.jsx)(w.Trans,{id:"Log-in to purchase this course"}),content:(0,f.jsx)(Go.Z,{onOpenLoginDialog:d,onOpenCreateAccountDialog:p,message:(0,f.jsx)(w.Trans,{id:"Courses will be linked to your user account and available indefinitely. Log in or sign up to purchase this course or restore a previous purchase."}),justifyContent:"center"})},J=u&&!C&&!A&&!S,X=[(0,f.jsx)(T.Z,{label:A?(0,f.jsx)(w.Trans,{id:"Close"}):(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:r},"cancel"),J?(0,f.jsx)(E.vF,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Continue"}),onClick:Y},"continue"):null];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"{0}",values:{0:n.name}}),maxWidth:"sm",open:!0,onRequestClose:r,actions:X,onApply:A?r:Y,cannotBeDismissed:!0,flexColumnBody:!0,children:[(0,f.jsxs)(_.pJ,{justifyContent:"center",alignItems:"center",children:[A&&(0,f.jsx)(Qb.Z,{}),(0,f.jsx)(N.Z,{size:"sub-title",children:q.subtitle})]}),q.content]}),D&&(0,f.jsx)($A.Z,{onApply:G,onClose:function(){return B(!1)},passwordValue:H,setPasswordValue:z})]})},tO="CoursePageHeader_premiumContainer__Vq9D7",nO=n(40480),rO={title:{overflowWrap:"anywhere",textWrap:"wrap"},image:{width:300,aspectRatio:"16 / 9"},specializationDot:{width:8,height:8,borderRadius:"50%",flexShrink:0},imageContainer:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",borderRadius:8,overflow:"hidden"},paper:{zIndex:2,flex:1},diamondIcon:{width:20,height:20},chip:{height:24}},iO=function(){return(0,be.UQ)().isMobile?(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"horizontal"})}):(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"vertical"})})},aO=function(e){var t=e.course,n=e.courseChapters,r=e.onBuyCourseWithCredits,i=e.onBuyCourse,u=e.purchasingCourseListingData,d=e.setPurchasingCourseListingData,p=e.simulateAppStoreProduct,h=c.useContext(j.Z),g=c.useContext(dP.ZP).listedCourses,m=(0,be.UQ)(),x=m.isMobile,v=m.isMediumScreen,b=c.useState(!1),C=(0,s.Z)(b,2),Z=C[0],k=C[1],T=c.useState(""),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLocked){e.next=2;break}return e.abrupt("return");case 2:return k(!1),e.next=5,r(t,P,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,r,P]),L=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.ZP.isDev()?k(!0):E(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E]),A=(0,uP.V0)(t?t.specializationId:"loading"),O=g?g.find((function(e){return e.id===t.id})):null,R=(0,oI.PN)()||p,F=n.some((function(e){return"videoUrl"in e}));return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(yS.L,{children:(0,f.jsx)(H.Z,{background:"dark",variant:"outlined",style:{padding:16},children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,alignItems:"center",justifyContent:"flex-start",forceMobileLayout:v,expand:!0,children:[(0,f.jsx)("div",{style:rO.imageContainer,children:(0,f.jsx)("img",{src:(0,vo.a)(n,t.imageUrlByLocale),style:rO.image,alt:""})}),(0,f.jsxs)(_.ak,{expand:!0,justifyContent:"flex-start",children:[(0,f.jsxs)(_.ep,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)("span",{style:(0,l.Z)((0,l.Z)({},rO.specializationDot),{},{backgroundColor:A.color})}),(0,f.jsx)(N.Z,{displayInlineAsSpan:!0,size:"body-small",noMargin:!0,color:"secondary",style:pr.t,children:A.label})]}),t.isLocked&&t.includedInSubscriptions.length&&(0,f.jsx)("div",{className:tO,children:(0,f.jsx)(H.Z,{style:rO.paper,background:"medium",children:(0,f.jsx)(M.sg,{children:(0,f.jsxs)(M.x1,{expand:!0,alignItems:"center",noMargin:!0,children:[(0,f.jsx)(ZM,{style:rO.diamondIcon}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Included with GDevelop subscriptions"})})]})})})})]}),(0,f.jsx)(N.Z,{size:"title",noMargin:!0,style:rO.title,children:(0,vo.a)(n,t.titleByLocale)}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,vo.a)(n,t.shortDescriptionByLocale)})})]})]}),(0,f.jsxs)(_.ep,{expand:!0,justifyContent:"space-between",noColumnMargin:!0,children:[(0,f.jsxs)(M.sg,{justifyContent:"center",expand:!0,children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"{0} chapters",values:{0:t.chaptersTargetCount}})}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:F?(0,f.jsx)(w.Trans,{id:"Find the substitles in your language in the setting of each video."}):(0,f.jsx)(w.Trans,{id:"This course is translated in multiple languages."})})]}),(0,f.jsx)(iO,{}),(0,f.jsx)(M.sg,{justifyContent:"center",alignItems:"flex-start",expand:!0,children:(0,f.jsx)(N.Z,{children:(0,vo.a)(n,t.levelByLocale)})}),!R&&t.isLocked&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(iO,{}),(0,f.jsx)(M.sg,{justifyContent:"center",expand:!0,children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(nO.Z,{})})})]})]}),t.isLocked&&(0,f.jsx)(H.Z,{background:"medium",style:{padding:16},children:!!O&&(0,f.jsxs)(_.ep,{justifyContent:"space-between",noMargin:!0,children:[!x&&!v&&(0,f.jsx)(M.sg,{noMargin:!0,justifyContent:"center",children:(0,f.jsx)("div",{style:{color:h.text.color.secondary},children:(0,_L.e3)({i18n:n,productListingData:O,usageType:"default",showBothPrices:"line"})})}),(0,f.jsx)(_.ep,{noMargin:!0,forceMobileLayout:v,children:(0,f.jsx)(aI.dP,{i18n:n,productListingData:O,selectedUsageType:"default",onUsageTypeChange:function(){},simulateAppStoreProduct:R,isAlreadyReceived:!t.isLocked,onClickBuy:function(){return i(t,P,n)},onClickBuyWithCredits:function(){return L(n)}})})]})})]})})}),!!u&&(0,f.jsx)(eO,{course:t,courseListingData:u,onClose:function(){return d(null)}}),Z&&(0,f.jsx)($A.Z,{onApply:function(){return E(n)},onClose:function(){return k(!1)},passwordValue:P,setPasswordValue:I})]})}})},oO="RatingBanner_container__4z3ad",sO=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsxs)("g",{clipPath:"url(#clip0_2645_48)",children:[(0,f.jsx)("path",{d:"M12 21.25C12.4142 21.25 12.75 21.5858 12.75 22V23C12.75 23.4142 12.4142 23.75 12 23.75C11.5858 23.75 11.25 23.4142 11.25 23V22C11.25 21.5858 11.5858 21.25 12 21.25Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M4.46973 18.4697C4.76262 18.1768 5.23738 18.1768 5.53027 18.4697C5.82314 18.7626 5.82316 19.2374 5.53027 19.5303L4.53027 20.5303C4.23739 20.8231 3.76261 20.8231 3.46973 20.5303C3.17684 20.2374 3.17686 19.7626 3.46973 19.4697L4.46973 18.4697Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M18.4697 18.4697C18.7626 18.1768 19.2374 18.1768 19.5303 18.4697L20.5303 19.4697L20.582 19.5264C20.8223 19.8209 20.8049 20.2557 20.5303 20.5303C20.2557 20.8048 19.8209 20.8223 19.5264 20.582L19.4697 20.5303L18.4697 19.5303C18.1768 19.2374 18.1769 18.7626 18.4697 18.4697Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9316 5.82324C11.438 5.05951 12.562 5.05951 13.0684 5.82324L13.167 5.99805L14.5547 8.94043L17.6465 9.41406C18.7435 9.58195 19.089 10.9222 18.3701 11.6553L16.1143 13.9541L16.6484 17.21C16.8129 18.2139 15.7729 19.1504 14.7549 18.5898L12 17.0732L9.24512 18.5898C8.22715 19.1503 7.18705 18.214 7.35156 17.21L7.88477 13.9541L5.62988 11.6553C4.91081 10.9222 5.25654 9.58195 6.35352 9.41406L9.44434 8.94043L10.833 5.99805L10.9316 5.82324ZM10.6309 9.94238C10.5244 10.1681 10.3121 10.3265 10.0654 10.3643L6.93457 10.8428L9.22266 13.1748C9.38987 13.3453 9.46532 13.5856 9.42676 13.8213L8.89453 17.0703L11.6387 15.5605L11.7246 15.5195C11.9307 15.4382 12.1644 15.4523 12.3613 15.5605L15.1045 17.0703L14.5732 13.8213C14.5347 13.5856 14.6101 13.3453 14.7773 13.1748L17.0645 10.8428L13.9346 10.3643C13.6879 10.3265 13.4756 10.1681 13.3691 9.94238L12 7.03906L10.6309 9.94238Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M2 11.25C2.41421 11.25 2.75 11.5858 2.75 12C2.75 12.4142 2.41421 12.75 2 12.75H1C0.585786 12.75 0.25 12.4142 0.25 12C0.25 11.5858 0.585786 11.25 1 11.25H2Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M23 11.25C23.4142 11.25 23.75 11.5858 23.75 12C23.75 12.4142 23.4142 12.75 23 12.75H22C21.5858 12.75 21.25 12.4142 21.25 12C21.25 11.5858 21.5858 11.25 22 11.25H23Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M19.4697 3.46973C19.7626 3.17683 20.2374 3.17683 20.5303 3.46973C20.8231 3.76262 20.8232 4.23739 20.5303 4.53027L19.5303 5.53027C19.2374 5.82313 18.7626 5.82313 18.4697 5.53027C18.1768 5.23739 18.1769 4.76262 18.4697 4.46973L19.4697 3.46973Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M3.46973 3.46973C3.76262 3.17683 4.23738 3.17683 4.53027 3.46973L5.53027 4.46973L5.58203 4.52637C5.82231 4.82095 5.80487 5.25568 5.53027 5.53027C5.25568 5.80484 4.82094 5.82231 4.52637 5.58203L4.46973 5.53027L3.46973 4.53027C3.17684 4.23739 3.17686 3.76262 3.46973 3.46973Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M12 0.25C12.4142 0.25 12.75 0.585786 12.75 1V2C12.75 2.41421 12.4142 2.75 12 2.75C11.5858 2.75 11.25 2.41421 11.25 2V1C11.25 0.585786 11.5858 0.25 12 0.25Z",fill:"currentColor"})]}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip0_2645_48",children:(0,f.jsx)("rect",{width:"24",height:"24",fill:"white"})})})]}))})),lO=function(e){var t=e.onClick,n=e.disabled;return(0,f.jsx)("div",{className:oO,children:(0,f.jsxs)(_.ep,{expand:!0,justifyContent:"space-between",alignItems:"center",children:[(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Help us improve our learning content"})}),(0,f.jsx)(N.Z,{size:"body2",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"How would you rate this chapter?"})})]}),(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Rate chapter"}),leftIcon:(0,f.jsx)(sO,{}),disabled:n,onClick:t})]})})},cO={desktopContainer:{display:"flex",gap:16},sideContainer:{width:250,flexShrink:0,position:"relative"},sideContent:{position:"sticky",top:20,display:"flex",flexDirection:"column",gap:16},desktopTableOfContent:{display:"flex",flexDirection:"column",padding:16,gap:4},mobileTableOfContent:{display:"flex",flex:1,flexDirection:"column",gap:8,maxHeight:250,overflowY:"auto"},navLine:{padding:"2px 3px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,borderRadius:4},navIcon:{fontSize:20,display:"flex"},footer:{height:150},askAQuestionContainer:{display:"flex",padding:8},progress:{borderRadius:4,height:5},mobileStickyFooter:{position:"sticky",bottom:-1,width:"100%",zIndex:2}},uO=function(e){var t=e.course,n=e.courseChapters,r=e.onOpenTemplateFromCourseChapter,a=e.onBack,o=e.onCompleteTask,u=e.isTaskCompleted,d=e.getChapterCompletion,p=e.getCourseCompletion,h=e.onBuyCourseWithCredits,g=e.onBuyCourse,m=e.purchasingCourseListingData,x=e.setPurchasingCourseListingData,v=e.simulateAppStoreProduct,b=e.onOpenAskAi,C=c.useContext($n.ZP).profile,Z=C&&C.id||null,k=c.useContext(D.ZP).values.language,T=c.useContext(j.Z),S=(0,be.UQ)(),P=S.isMobile,I=S.isLandscape,E=p(),L=c.useRef(n.reduce((function(e,t,n){if(e)return e;var r=d(t.id);return!r||r.completedTasks<r.tasks?0===n?"BEGINNER":t.id:null}),null)),A=c.useRef(null),O=c.useRef(new Array(n.length)),R=c.useState(null),F=(0,s.Z)(R,2),B=F[0],U=F[1],V=n.map((function(e,t){var n=d(e.id);return(0,f.jsxs)("div",{tabIndex:0,onClick:function(){return W(e.id)},style:(0,l.Z)((0,l.Z)({},cO.navLine),{},{backgroundColor:e.id===B?T.paper.backgroundColor.light:void 0}),children:[(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsxs)(N.Z,{noMargin:!0,color:"secondary",children:[t+1,"."]}),"\xa0",(0,f.jsx)(N.Z,{noMargin:!0,style:pr.t,color:e.isLocked?"secondary":"primary",children:e.shortTitle||e.title})]}),e.isLocked?(0,f.jsx)("div",{style:cO.navIcon,children:(0,f.jsx)(Fo,{fontSize:"inherit"})}):n?n.completedTasks>=n.tasks?(0,f.jsx)("div",{style:{display:"flex",fontSize:20,color:T.statusIndicator.success},children:(0,f.jsx)(xo.Z,{fontSize:"inherit"})}):(0,f.jsxs)(N.Z,{color:"secondary",noMargin:!0,children:[n.completedTasks,"/",n.tasks]}):null]},e.id)})),z=c.useCallback((function(e){U((function(){var t=e.target,n=t.scrollTop,r=t.offsetHeight;if(void 0!==n){var a,o,s=(0,i.Z)(O.current);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(!(l.ref.offsetTop<n+(r||0)/3))break;a=l.chapterId}}catch(c){s.e(c)}finally{s.f()}return!a&&O.current[0]&&O.current[0].chapterId&&(a=O.current[0].chapterId),a}}))}),[]),W=c.useCallback((function(e){var t=A.current;if(t){var n=O.current.find((function(t){return t.chapterId===e}));n&&t.scrollTo({top:n.ref.offsetTop,behavior:"smooth"})}}),[]);c.useEffect((function(){var e=A.current;if(e)return e.addEventListener("scroll",z),function(){return e.removeEventListener("scroll",z)}}),[z]),c.useEffect((function(){if(L.current){if("BEGINNER"===L.current)return;W(L.current)}}),[W]);var Y=c.useCallback((function(){A.current&&A.current.scrollTo({top:0,behavior:"smooth"})}),[A]);return(0,f.jsx)(w.I18n,{children:function(e){var i=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(yS.ZP,{ref:A,applyTopSpacingAsMarginOnChildrenContainer:!0,backAction:a,children:(0,f.jsxs)("div",{style:P&&!I?void 0:cO.desktopContainer,children:[(0,f.jsxs)(M.sg,{noOverflowParent:!0,noMargin:!0,children:[(0,f.jsx)(aO,{course:t,courseChapters:n,onBuyCourseWithCredits:h,onBuyCourse:g,purchasingCourseListingData:m,setPurchasingCourseListingData:x,simulateAppStoreProduct:v}),t.introByLocale&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(je.Z,{background:"light",children:(0,vo.a)(i,t.introByLocale)})}),n.map((function(e,n){return(0,f.jsxs)(_.ak,{expand:!0,noOverflowParent:!0,noMargin:!0,children:[e.videoUrl?(0,f.jsx)(PA,{chapterIndex:n,course:t,courseChapter:e,onOpenTemplate:function(){r(e)},onCompleteTask:o,isTaskCompleted:u,getChapterCompletion:d,onClickUnlock:Y,ref:function(t){t&&(O.current[n]={chapterId:e.id,ref:t})}},e.id):(0,f.jsx)(QA,{chapterIndex:n,course:t,courseChapter:e,onOpenTemplate:function(t){r(e,t)},onCompleteTask:o,isTaskCompleted:u,getChapterCompletion:d,onClickUnlock:Y,ref:function(t){t&&(O.current[n]={chapterId:e.id,ref:t})}},e.id),!e.isLocked&&(0,f.jsx)(lO,{disabled:!Z,onClick:function(){if(Z){var n=(0,lP.Xt)({userId:Z,courseId:t.id,chapterId:e.id,language:k});y.ZP.openExternalURL(n)}}}),(0,f.jsx)(M.hS,{})]},e.id)})),(0,f.jsx)("div",{style:cO.footer})]}),P&&!I?null:(0,f.jsx)("div",{style:cO.sideContainer,children:(0,f.jsxs)("div",{style:cO.sideContent,children:[(0,f.jsxs)(H.Z,{background:"medium",style:cO.desktopTableOfContent,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Chapters"})}),null!==E&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(Ym.Z,{value:100*E.percentage,variant:"determinate",style:cO.progress,color:"success"})}),(0,f.jsx)(M.LZ,{}),V]}),(0,f.jsx)(H.Z,{background:"light",style:cO.askAQuestionContainer,children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(_.pJ,{expand:!0,alignItems:"center",noMargin:!0,justifyContent:"center",children:[(0,f.jsx)(Qk.Z,{}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Do you need any help?"})})]}),(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Ask the AI"}),onClick:function(){return b({aiRequestId:null})}})]})})]})})]})}),P&&!I&&(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},cO.mobileStickyFooter),{},{borderTop:"2px solid ".concat(T.home.separator.color),borderBottom:"1px solid ".concat(T.home.separator.color)}),children:(0,f.jsx)(H.Z,{background:"light",square:!0,children:(0,f.jsxs)(ni.UQ,{noMargin:!0,children:[(0,f.jsx)(ni._m,{children:(0,f.jsxs)(_.pJ,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"sub-title",children:"Chapters"}),null!==E&&(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,f.jsx)(Ym.Z,{value:100*E.percentage,variant:"determinate",style:cO.progress,color:"success"})})]})}),(0,f.jsx)(ni.X1,{children:(0,f.jsx)("div",{style:cO.mobileTableOfContent,children:V})})]})})})]})}})},dO=function(e){var t=e.onSelectCategory,n=c.useContext($n.ZP).limits,r=c.useState(null),i=(0,s.Z)(r,2),a=i[0],o=i[1];return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(yS.ZP,{backAction:function(){return t(null)},children:[(0,f.jsx)(yS.L,{children:(0,f.jsx)(bP,{limits:n,category:"official-beginner",onSelectCategory:t,onSelectTutorial:o,getColumnsFromWindowSize:YS})}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(bP,{limits:n,category:"official-intermediate",onSelectCategory:t,onSelectTutorial:o,getColumnsFromWindowSize:YS})}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(bP,{limits:n,category:"official-advanced",onSelectCategory:t,onSelectTutorial:o,getColumnsFromWindowSize:YS})}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(bP,{limits:n,category:"education-curriculum",onSelectCategory:t,onSelectTutorial:o,getColumnsFromWindowSize:YS})}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(bP,{limits:n,category:"full-game",onSelectCategory:t,onSelectTutorial:o,getColumnsFromWindowSize:YS})}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(bP,{limits:n,category:"game-mechanic",onSelectCategory:t,onSelectTutorial:o,getColumnsFromWindowSize:YS})}),a&&(0,f.jsx)(cP,{tutorial:a,onClose:function(){return o(null)}})]})}})},pO=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"89",height:"138",viewBox:"0 0 89 138",fill:"none",children:[(0,f.jsx)("path",{d:"M37.987 47.4639V74.2398H11.5396C11.7151 73.853 11.9604 73.4966 12.2648 73.192L37.987 47.4639Z",fill:"#57B3DF"}),(0,f.jsx)("path",{d:"M11.2158 85.0957V112.252C11.2158 113.242 12.0175 114.043 13.0066 114.043H30.7706C31.7597 114.043 32.5614 113.242 32.5614 112.252V106.261C32.5614 99.6982 37.7809 94.228 44.3419 94.1428C51.0082 94.0563 56.4395 99.4352 56.4395 106.083V112.252C56.4395 113.242 57.2411 114.043 58.2302 114.043H75.9942C76.9833 114.043 77.785 113.242 77.785 112.252V85.0957H11.2158Z",fill:"#FFD064"}),(0,f.jsx)("path",{d:"M37.9885 44.931C37.9885 33.9396 46.8972 25.0293 57.8868 25.0293C68.8764 25.0293 77.7853 33.9396 77.7853 44.931H37.9885Z",fill:"#EAB14D"}),(0,f.jsx)("path",{d:"M67.2933 36.4279C67.2933 39.5019 66.5258 42.3962 65.1736 44.9314H77.7852C77.7852 36.0635 71.9854 28.5515 63.9731 25.9795C66.0641 28.9307 67.2933 32.5356 67.2933 36.4279Z",fill:"#E49824"}),(0,f.jsx)("path",{d:"M73.0818 85.0957V105.721C73.0818 107.719 71.462 109.339 69.4639 109.339H56.4395V112.252C56.4395 113.242 57.2411 114.043 58.2302 114.043H75.9942C76.9833 114.043 77.785 113.242 77.785 112.252V85.0957H73.0818Z",fill:"#FFC250"}),(0,f.jsx)("path",{d:"M13.0066 114.043H30.7706C31.7597 114.043 32.5614 113.241 32.5614 112.252V109.339H11.2158V112.252C11.2158 113.241 12.0177 114.043 13.0066 114.043Z",fill:"#FFC250"}),(0,f.jsx)("path",{d:"M77.785 74.24V85.0954H11.2158V75.7247C11.2158 75.2071 11.3286 74.7002 11.54 74.24H77.785Z",fill:"#95D6A4"}),(0,f.jsx)("path",{d:"M73.0818 74.2412H77.7851V85.0966H73.0818V74.2412Z",fill:"#78C2A4"}),(0,f.jsx)("path",{d:"M48.8423 44.9307V74.2403H37.9886V44.9307H48.8423Z",fill:"#E877A7"}),(0,f.jsx)("path",{d:"M77.7852 44.9307V74.2403H66.9315V44.9307H77.7852Z",fill:"#E877A7"}),(0,f.jsx)("path",{d:"M77.7852 44.9307V74.2403H73.0819V44.9307H77.7852Z",fill:"#DD5790"})]}))})),fO=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"120",height:"138",viewBox:"0 0 120 138",fill:"none",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M54.193 62.1191L22.0432 73.4481L54.2016 89.8419L86.36 73.4481L54.193 62.1191Z",fill:"#936319"}),(0,f.jsx)("path",{d:"M86.3307 74.3174L54.2017 89.9795V122.001L86.3601 106.848V74.3703L86.3307 74.3174Z",fill:"#F0BB6B"}),(0,f.jsx)("path",{d:"M23.154 74.3174L23.1519 74.324V106.853L54.2014 122.001V89.9899L23.154 74.3174Z",fill:"#E5AC56"}),(0,f.jsx)("path",{d:"M86.4567 73.208L54.2017 89.5308L60.9187 103.149L93.0135 85.8519L86.4567 73.208Z",fill:"#EAB14D"}),(0,f.jsx)("path",{d:"M21.9465 73.208L15.3896 85.8519L47.4845 103.149L54.2015 89.5308L21.9465 73.208Z",fill:"#F0BB6B"}),(0,f.jsx)("path",{d:"M39.4453 44L52.3786 69.6372L42.9333 74.4021L30 48.7649L39.4453 44Z",fill:"#E877A7"}),(0,f.jsx)("path",{d:"M58.48 53.8975L65.1114 71.8263C65.353 72.4794 66.0667 72.8172 66.7056 72.5809L78.1802 68.3367C78.8191 68.1004 79.1412 67.3795 78.8996 66.7264L77.4365 62.7707C75.834 58.4381 77.8698 53.5796 82.087 51.9558C86.372 50.3059 91.1938 52.5595 92.8171 56.9482L94.3237 61.0214C94.5653 61.6745 95.2789 62.0123 95.9178 61.776L107.393 57.5318C108.031 57.2955 108.353 56.5746 108.112 55.9215L101.48 37.9926L58.48 53.8975Z",fill:"#FFD064"}),(0,f.jsx)("path",{d:"M3.28991 28.9998L21.6084 40.2898L10.3185 58.6083C10.1288 58.3236 9.98968 58.0034 9.91123 57.6642L3.28991 28.9998Z",fill:"#75CEF9"}),(0,f.jsx)("path",{d:"M50.5994 30.8701C52.0805 24.5156 48.13 18.1636 41.7755 16.6824C35.4211 15.2013 29.069 19.1519 27.5878 25.5064L50.5994 30.8701Z",fill:"#EAB14D"}),(0,f.jsx)("circle",{cx:"65",cy:"32",r:"9",fill:"#95D6A4"})]})}))})),hO=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"104",height:"138",viewBox:"0 0 104 138",fill:"none",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M31.8503 53.6963H2.16699V112.827H31.8503V53.6963Z",fill:"#FFD15C"}),(0,f.jsx)("path",{d:"M31.8503 53.6963H2.16699V56.5224H31.8503V53.6963Z",fill:"#F7B64C"}),(0,f.jsx)("path",{d:"M34.0167 46.7393H0V53.9132H34.0167V46.7393Z",fill:"#FFD15C"}),(0,f.jsx)("path",{d:"M101.833 66.7393H72.1499V112.826H101.833V66.7393Z",fill:"#F78471"}),(0,f.jsx)("path",{d:"M101.833 66.7393H72.1499V69.5654H101.833V66.7393Z",fill:"#F05540"}),(0,f.jsx)("path",{d:"M104 59.7822H69.9834V66.9561H104V59.7822Z",fill:"#F78471"}),(0,f.jsx)("path",{d:"M18.8503 74.7834C19.5003 73.9138 19.717 73.2616 19.717 72.3922C19.717 71.5228 19.5003 71.0879 19.067 70.4357C18.6337 70.001 17.9837 69.5661 17.117 69.5661C15.6003 69.5661 14.3003 70.6529 13.0003 72.6095L8.66699 70.4355C9.75026 68.6964 10.8335 67.6095 12.1335 66.7399C13.4335 65.8703 14.9503 65.4355 17.1168 65.4355C19.0668 65.4355 20.8001 66.0877 22.3168 67.3921C23.8335 68.6964 24.4835 70.4355 24.4835 72.6095C24.4835 73.6963 24.2668 75.0007 23.6168 76.0878C22.9668 77.1747 21.8835 78.479 20.3668 80.2183L16.2503 84.566H25.3503V89.1313H9.10026V85.2182L15.817 78.2618C17.117 76.74 18.2003 75.6531 18.8503 74.7834Z",fill:"white"}),(0,f.jsx)("path",{d:"M80.1672 82.6095V78.2617H94.2505V81.9573L89.4837 87.3922C91.217 87.6096 92.7337 88.479 93.817 89.7834C94.9002 91.0877 95.3337 92.3921 95.3337 94.1311C95.3337 96.5224 94.467 98.4789 92.9505 99.7833C91.2172 101.088 89.2672 101.74 86.6672 101.74C84.0672 101.74 81.4672 100.87 78.8672 99.1311L81.0337 95.0008C83.2005 96.5226 85.1505 97.392 86.8837 97.392C87.967 97.392 88.8337 97.1746 89.4837 96.7398C90.1337 96.3051 90.567 95.4355 90.567 94.5659C90.567 93.6962 90.1337 92.8268 89.4837 92.3919C88.617 91.7397 87.7505 91.5222 86.2337 91.5222C85.5837 91.5222 84.5005 91.7397 83.2005 92.1744V88.479L87.5337 83.2616H80.167V82.6095H80.1672Z",fill:"white"}),(0,f.jsx)("path",{d:"M66.9499 31.9561H37.2666V112.826H66.9499V31.9561Z",fill:"#95D6A4"}),(0,f.jsx)("path",{d:"M66.9499 31.9561H37.2666V34.7822H66.9499V31.9561Z",fill:"#4ABAA5"}),(0,f.jsx)("path",{d:"M68.9 25H34.8833V32.1739H68.9V25Z",fill:"#95D6A4"}),(0,f.jsx)("path",{d:"M47.4502 43.4785H56.7669V66.5221H51.7837V47.8265H47.4502V43.4785Z",fill:"white"})]})}))})),gO=function(e,t){return"small"===e?t?3:2:3},mO=gO("xlarge",!0),xO=(ZS.LF+10)*mO,vO={grid:{textAlign:"center",maxWidth:xO,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")},bannerContainer:{width:"100%",maxWidth:xO-10}},bO=function(e){var t=e.selectInAppTutorial,n=c.useContext(gi.Z),r=n.inAppTutorialShortHeaders,i=n.inAppTutorialsFetchingError,a=n.fetchInAppTutorials,o=n.currentlyRunningInAppTutorial,s=c.useContext(D.ZP).getTutorialProgress,u=c.useContext($n.ZP),d=(0,be.UQ)(),p=d.windowSize,h=d.isLandscape,g=function(e){var t=e.tutorialId,n=e.part,r=s({tutorialId:t,userId:u.profile?u.profile.id:void 0});return r&&r.progress?r.progress[n]:0},m=function(e){var t=e.tutorialId,n=e.part;return 100===g({tutorialId:t,part:n})},x=[{key:"create",title:{id:"Start your game"},description:{id:"Add your first characters to the scene and throw your first objects."},shortDescription:{id:"Add characters and objects to the scene."},keyPoints:[{id:"Game scene size"},{id:"Objects and characters"},{id:"Game Scenes"},{id:"Throwing physics"}],durationInMinutes:5,locked:!1,disabled:!!o||m({tutorialId:LS.bs,part:0}),progress:g({tutorialId:LS.bs,part:0}),renderImage:function(e){return(0,f.jsx)(fO,(0,l.Z)({},e))}},{key:"publish",title:{id:"Improve and publish your Game"},description:{id:"Add personality to your game and publish it online."},shortDescription:{id:"Add personality and publish your game."},keyPoints:[{id:"Game background"},{id:"In-game obstacles"},{id:"\u201cYou win\u201d message"},{id:"Sharing online"}],durationInMinutes:10,locked:!m({tutorialId:LS.bs,part:0}),disabled:!!o||m({tutorialId:LS.bs,part:1}),progress:g({tutorialId:LS.bs,part:1}),renderImage:function(e){return(0,f.jsx)(pO,(0,l.Z)({},e))}},{key:"leaderboards",title:{id:"Add leaderboards to your online Game"},description:{id:"Add player logins to your game and add a leaderboard."},shortDescription:{id:"Add player logins and a leaderboard."},keyPoints:[{id:"Game personalisation"},{id:"\u201cStart\u201d screen"},{id:"Timers"},{id:"Leaderboards"}],durationInMinutes:15,locked:!m({tutorialId:LS.bs,part:1}),disabled:!!o||m({tutorialId:LS.bs,part:2}),progress:g({tutorialId:LS.bs,part:2}),renderImage:function(e){return(0,f.jsx)(hO,(0,l.Z)({},e))}}],v=m({tutorialId:LS.bs,part:0})&&m({tutorialId:LS.bs,part:1})&&m({tutorialId:LS.bs,part:2});return(0,f.jsx)(M.x1,{children:(0,f.jsx)("div",{style:vO.bannerContainer,children:i?(0,f.jsxs)(_r.Z,{onRetry:a,children:[(0,f.jsx)(w.Trans,{id:"An error occurred when downloading the tutorials."})," ",(0,f.jsx)(w.Trans,{id:"Please check your internet connection or try again later."})]}):null===r?(0,f.jsx)(Oe.Z,{}):(0,f.jsx)(kS.Z,{cols:v?1:gO(p,h),style:vO.grid,cellHeight:"auto",spacing:10,children:v?(0,f.jsx)(wS.Z,{children:(0,f.jsx)(MS,{title:{id:"Congratulations! You've finished this tutorial!"},description:{id:"Find your finished game on the \u201cBuild\u201d section. Or restart the tutorial by clicking on the card."},shortDescription:{id:"Your game is in the \u201cBuild\u201d section or you can restart the tutorial."},size:"banner",locked:!1,disabled:!1,renderImage:function(e){return(0,f.jsxs)(M.x1,{justifyContent:"space-around",expand:!0,children:[(0,f.jsx)(fO,(0,l.Z)({},e)),(0,f.jsx)(pO,(0,l.Z)({},e)),(0,f.jsx)(hO,(0,l.Z)({},e))]})},onClick:function(){return t(LS.bs)}})}):x.map((function(e){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(MS,(0,l.Z)((0,l.Z)({},e),{},{onClick:function(){return t(LS.bs)}}))},e.key)}))})})})},CO=function(e){var t=e.onBack,n=e.selectInAppTutorial,r=c.useContext(D.ZP).values.showInAppTutorialDeveloperMode,i=c.useContext(gi.Z).onLoadInAppTutorialFromLocalFile;return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(yS.ZP,{backAction:t,children:[(0,f.jsxs)(yS.L,{children:[(0,f.jsxs)(M.x1,{justifyContent:"space-between",noMargin:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"section-title",children:(0,f.jsx)(w.Trans,{id:"In-app Tutorials"})}),r&&(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Load local lesson"}),onClick:i})]}),(0,f.jsx)(oP,{selectInAppTutorial:n})]}),(0,f.jsxs)(yS.L,{children:[(0,f.jsx)(N.Z,{size:"section-title",children:(0,f.jsx)(w.Trans,{id:"Create and Publish a Fling game"})}),(0,f.jsx)(N.Z,{size:"body",color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"3-part tutorial to creating and publishing a game from scratch."})}),(0,f.jsx)(M.hS,{}),(0,f.jsx)(bO,{selectInAppTutorial:n})]})]})}})},jO=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"50",height:"58",viewBox:"0 0 50 58",fill:"none",children:(0,f.jsx)("path",{d:"M24.5151 0.430664C19.1615 0.430664 2.913 9.48732 1.45032 13.7963C-0.939147 20.8355 -0.411903 38.2649 3.32877 44.288C6.78335 49.8505 18.2536 57.6315 24.5151 57.6537C30.7765 57.6758 41.6702 51.048 45.8685 44.288C49.6092 38.2649 50.7175 20.6104 47.7469 13.7963C45.8685 9.48732 29.8686 0.430664 24.5151 0.430664Z",fill:"currentColor"})}))})),yO={height:20,backgroundColor:"#8BE7C4",color:"#1D1D26"},ZO={container:{padding:16,display:"flex",borderRadius:8},mobileContainer:{padding:8,display:"flex",borderRadius:8},badgePaper:{padding:"8px 16px"},mobileBadgePaper:{padding:8},badgeImage:{width:25},leftColumn:{display:"flex",flexDirection:"column",gap:8,justifyContent:"space-between"},progress:{borderRadius:4,height:5},chip:{height:24},gdevelopAvatar:{width:20,height:20},thumbnail:{borderRadius:4,aspectRatio:"16 / 9",maxWidth:"100%"},statusContainer:{display:"flex",alignItems:"center",fontSize:20},statusIconOnly:{fontSize:22},emptyBadgeContainer:{display:"flex"},badgeIcon:{height:28,width:28,objectFit:"cover"}},kO=function(e){var t=e.course,n=e.chapter,r=e.chapterIndex,i=e.isComplete,a=e.gdevelopTheme;return(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsx)(M.LZ,{}),n.isLocked?(0,f.jsx)(H.Z,{background:"light",style:{padding:4},children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)("div",{style:ZO.statusContainer,children:(0,f.jsx)(Fo,{fontSize:"inherit",color:"secondary"})}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Unlock with the full course"})})]})}):i?(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},ZO.statusIconOnly),{},{color:a.statusIndicator.success}),children:(0,f.jsx)(xo.Z,{fontSize:"inherit"})}):t.isLocked&&n.isFree?(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(Q.Z,{style:yO,label:(0,f.jsx)(w.Trans,{id:"Free!"})})}):(0,f.jsx)("div",{style:ZO.statusIconOnly,children:(0,f.jsx)(pZ,{fontSize:"inherit",color:"secondary"})}),(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:nA[r+1]}),"\xa0",(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Chapter"})})]}),(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,color:n.isLocked?"secondary":"primary",children:n.title}),(0,f.jsx)(M.hS,{})]})},wO=function(e){var t=e.course,n=e.getCourseChapters,r=e.getCourseCompletion,a=e.getCourseChapterCompletion,o=e.onDisplayCourse,s=c.useContext(j.Z),u=c.useContext($n.ZP),d=u.achievements,p=u.badges,h=(0,be.UQ)(),g=h.isMobile,m=h.isLandscape,x=h.windowSize,v=t?r(t.id):null,b=g?2:"xlarge"===x?5:4,C=c.useMemo((function(){var e=t?n(t.id):null;if(!t||!e)return new Array(b).fill(0).map((function(e,t){return(0,f.jsxs)(c.Fragment,{children:[t>0&&(g&&!m?(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"horizontal"})}):(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"vertical"})})),t>0&&(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.sg,{expand:!0,children:[(0,f.jsx)(pP.Z,{height:40}),(0,f.jsx)(pP.Z,{height:20}),(0,f.jsx)(pP.Z,{height:60}),(0,f.jsx)(M.hS,{})]})]},"skeleton-".concat(t))}));var r,o=new Array(t.chaptersTargetCount).fill(0).map((function(n,r){var i=e[r];if(!i)return!1;var o=a(t.id,i.id);return!!o&&o.completedTasks>=o.tasks})),l=-1,u=(0,i.Z)(o);try{for(u.s();!(r=u.n()).done;){if(!r.value)break;l++}}catch(p){u.e(p)}finally{u.f()}var d=Math.max(0,Math.min(t.chaptersTargetCount-b,l));return new Array(b).fill(0).map((function(n,r){var i=d+r;if(i>=t.chaptersTargetCount)return null;var a=e[i];return(0,f.jsxs)(c.Fragment,{children:[r>0&&(g&&!m?(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"horizontal"})}):(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"vertical"})})),r>0&&(0,f.jsx)(M.LZ,{}),(0,f.jsx)(kO,{course:t,chapter:a,chapterIndex:i,gdevelopTheme:s,isComplete:o[i]})]},"chapter-".concat(i))}))}),[t,n,a,b,s,g,m]),y=function(e){return(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsxs)(N.Z,{size:"sub-title",children:[(0,f.jsx)(w.Trans,{id:"{0} chapters",values:{0:e.chaptersTargetCount}}),":"]}),null!==v&&(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",children:(0,f.jsx)(Ym.Z,{value:100*v.percentage,variant:"determinate",style:ZO.progress,color:"success"})}),v&&(0,f.jsx)(M.sg,{children:(0,f.jsxs)(N.Z,{noMargin:!0,color:"secondary",children:[v.completedChapters,"/",v.chapters]})})]})},Z=c.useMemo((function(){if(!t)return null;var e="course-".concat(t.id),n=e&&d?d.find((function(t){return t.id===e})):null;return n&&p&&n&&!!p.find((function(e){return e.achievementId===n.id}))?n.iconUrl:null}),[t,p,d]);return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(H.Z,{background:"medium",variant:"outlined",children:(0,f.jsx)(lt.Z,{onClick:o,component:"div",style:g&&!m?ZO.mobileContainer:ZO.container,children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noMargin:!0,noColumnMargin:!0,noOverflowParent:!0,children:[(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},ZO.leftColumn),{},{width:g&&!m?"100%":220}),children:[(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(Q.Z,{label:(0,f.jsx)(w.Trans,{id:"Recommended for you"}),style:ZO.chip})}),t?(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:(0,vo.a)(n,t.titleByLocale)}):(0,f.jsx)(pP.Z,{height:40}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(ao.Z,{src:"./res/gdevelop-logo-b-w.png",style:ZO.gdevelopAvatar}),(0,f.jsx)(N.Z,{noMargin:!0,children:"GDevelop"})]}),t?(0,f.jsx)("img",{src:(0,vo.a)(n,t.imageUrlByLocale),alt:"",style:ZO.thumbnail}):(0,f.jsx)(pP.Z,{width:g&&!m?void 0:220,variant:"rect",height:124})]}),(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[g&&!m?t?(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(N.Z,{color:"secondary",noMargin:!0,children:[(0,vo.a)(n,t.levelByLocale),"\xa0\u2022\xa0",(0,f.jsx)(w.Trans,{id:"{0} weeks",values:{0:t.durationInWeeks}})]}),y(t)]}):(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(pP.Z,{}),(0,f.jsx)(pP.Z,{})]}):t?(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",expand:!0,children:[y(t),(0,f.jsxs)(N.Z,{color:"secondary",noMargin:!0,children:[(0,vo.a)(n,t.levelByLocale),"\xa0\u2022\xa0",(0,f.jsx)(w.Trans,{id:"{0} weeks",values:{0:t.durationInWeeks}})]})]}):(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(pP.Z,{height:30})}),(0,f.jsx)(_.ep,{noResponsiveLandscape:!0,children:C}),(0,f.jsx)(H.Z,{style:g&&!m?ZO.mobileBadgePaper:ZO.badgePaper,background:"light",children:(0,f.jsxs)(_.ep,{noResponsiveLandscape:!0,noColumnMargin:!0,alignItems:"center",noMargin:!0,justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},ZO.emptyBadgeContainer),{},{opacity:Z?1:.5,color:s.text.color.secondary}),children:Z?(0,f.jsx)("img",{src:Z,alt:"Course badge",style:ZO.badgeIcon}):(0,f.jsx)(jO,{})}),(0,f.jsx)(N.Z,{noMargin:!0,children:Z?(0,f.jsx)(w.Trans,{id:"Congrats on finishing this course!"}):v&&1===v.percentage?(0,f.jsx)(w.Trans,{id:"Complete all tasks to claim your badge"}):(0,f.jsx)(w.Trans,{id:"Earn an exclusive badge"})})]}),(0,f.jsx)(G.Z,{primary:!0,disabled:!t,label:v&&0!==v.percentage?1===v.percentage?(0,f.jsx)(w.Trans,{id:"Open"}):(0,f.jsx)(w.Trans,{id:"Keep learning"}):(0,f.jsx)(w.Trans,{id:"Start learning"}),onClick:o})]})})]})]})})})})}})},TO=YS("xlarge",!0),SO=(ZS.LF+10)*TO,PO={grid:{textAlign:"center",maxWidth:SO,overflow:"hidden",width:"calc(100% + ".concat(10,"px)")}},IO=function(e){var t=e.onBack,n=e.courses,r=e.onSelectCourse,i=e.onSelectBundle,a=e.previewedCourse,o=e.getCourseChapters,s=e.getCourseChapterCompletion,l=e.getCourseCompletion,u=c.useContext(dP.ZP).listedCourses,d=(0,be.UQ)(),p=d.windowSize,h=d.isLandscape,g=YS(p,h),m=c.useContext($n.ZP).limits,x=!!m&&!!m.capabilities.classrooms&&m.capabilities.classrooms.hidePremiumProducts;return(0,f.jsx)(w.I18n,{children:function(e){var c=e.i18n;return(0,f.jsxs)(yS.ZP,{title:(0,f.jsx)(w.Trans,{id:"Official Game Dev courses"}),backAction:t,children:[(0,f.jsx)(yS.L,{children:(0,f.jsx)(wO,{course:a,getCourseChapters:o,getCourseCompletion:l,getCourseChapterCompletion:s,onDisplayCourse:function(){if(a&&u){var e=u.find((function(e){return e.id===a.id}));e&&r(e)}}})}),(0,f.jsx)(yS.L,{children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(kS.Z,{cols:g,style:PO.grid,cellHeight:"auto",spacing:10,children:n&&u?n.slice(0,g).map((function(e){var t=l(e.id),n=u.find((function(t){return t.id===e.id}));return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(uP.ZP,{course:e,courseListingData:n,completion:t,onClick:function(){n&&r(n)}})},e.id)})):new Array(6).fill(0).map((function(e,t){return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(uP.ZP,{course:null,courseListingData:null,completion:null})},"skeleton-course-".concat(t))}))})})}),!x&&(0,f.jsx)(yS.L,{children:(0,f.jsx)(XL,{onDisplayBundle:i,category:"starter",i18n:c})}),n&&u&&n.length>g&&(0,f.jsx)(yS.L,{children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(kS.Z,{cols:g,style:PO.grid,cellHeight:"auto",spacing:10,children:n.slice(g,2*g).map((function(e){var t=l(e.id),n=u.find((function(t){return t.id===e.id}));return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(uP.ZP,{course:e,courseListingData:n,completion:t,onClick:function(){n&&r(n)}})},e.id)}))})})}),!x&&(0,f.jsx)(yS.L,{children:(0,f.jsx)(XL,{onDisplayBundle:i,category:"premium",i18n:c})}),n&&u&&n.length>2*g&&(0,f.jsx)(yS.L,{children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(kS.Z,{cols:g,style:PO.grid,cellHeight:"auto",spacing:10,children:n.slice(2*g).map((function(e){var t=l(e.id),n=u.find((function(t){return t.id===e.id}));return(0,f.jsx)(wS.Z,{children:(0,f.jsx)(uP.ZP,{course:e,courseListingData:n,completion:t,onClick:function(){n&&r(n)}})},e.id)}))})})})]})}})},EO=n(87779),MO=n(12123),LO=function(e){var t=e.selectInAppTutorial,n=e.selectedCategory,r=e.onSelectCategory,i=e.onOpenTemplateFromTutorial,a=e.onOpenTemplateFromCourseChapter,o=e.previewedCourse,l=e.onSelectCourse,u=e.course,d=e.getCourseChapters,p=e.courses,h=e.onCompleteCourseTask,g=e.isCourseTaskCompleted,m=e.getCourseChapterCompletion,x=e.getCourseCompletion,v=e.onBuyCourseWithCredits,b=e.onBuyCourse,C=e.purchasingCourseListingData,j=e.setPurchasingCourseListingData,y=e.onOpenAskAi,Z=e.onOpenNewProjectSetupDialog,k=e.onSelectPrivateGameTemplateListingData,w=e.onSelectExampleShortHeader,T=e.initialBundleUserFriendlySlug,S=e.initialBundleCategory,P=e.clearInitialBundleValues,I=c.useContext(nm.n).fetchTutorials,E=c.useContext(pI.bQ),M=E.fetchBundles,L=E.bundleListingDatas,A=c.useContext(fa.ZP).navigateToRoute,O=(0,Ye.Z)().showAlert,R=c.useState(null),F=(0,s.Z)(R,2),D=F[0],N=F[1],_=c.useCallback((function(e){var t=e.prices.find((function(e){return"default"===e.usageType}));(0,ai.VW)({bundleName:e.name,bundleId:e.id,source:"learn",priceValue:t&&t.value,priceCurrency:t&&t.currency}),N(e)}),[N]);c.useEffect((function(){if((T||S)&&L){P();var e=null;if(T?e=(0,MO.El)({bundleListingDatas:L,userFriendlySlug:T}):S&&(e=(0,MO.Xk)({bundleListingDatas:L,category:S})),e){var t=e.prices.find((function(e){return"default"===e.usageType}));(0,ai.VW)({bundleName:e.name,bundleId:e.id,source:"web-link",priceValue:t&&t.value,priceCurrency:t&&t.currency}),N(e)}else O({title:{id:"Bundle not found"},message:{id:"The link to the bundle you've followed seems outdated. Why not take a look at the other bundles?"}})}}),[L,O,T,S,P]);var B=c.useCallback((function(e){var t=e.id;if(p){var n=p.find((function(e){return e.id===t}));if(n&&n.isLocked){var r=e.prices.find((function(e){return"default"===e.usageType}));(0,ai.o$)({courseName:e.name,courseId:e.id,source:"learn",priceValue:r&&r.value,priceCurrency:r&&r.currency})}l(t)}}),[l,p]);if(c.useEffect((function(){I(),M()}),[]),u){var U=d(u.id);return U?(0,f.jsx)(uO,{course:u,courseChapters:U,onBack:function(){l(null)},onOpenTemplateFromCourseChapter:a,onCompleteTask:h,isTaskCompleted:g,getChapterCompletion:function(e){return m(u.id,e)},getCourseCompletion:function(){return x(u.id)},onBuyCourseWithCredits:v,onBuyCourse:b,purchasingCourseListingData:C,setPurchasingCourseListingData:j,onOpenAskAi:y}):(0,f.jsx)(yS.ZP,{flexBody:!0,children:(0,f.jsx)(yS.L,{expand:!0,children:(0,f.jsx)(Oe.Z,{})})})}return D?(0,f.jsx)(EO.Z,{bundleListingData:D,onBack:function(){return N(null)},onAssetPackOpen:function(e){A("store",{"asset-pack":"product-".concat(e.id)})},onGameTemplateOpen:k,onBundleOpen:_,onCourseOpen:B,courses:p,getCourseCompletion:x}):n?"all-tutorials"===n?(0,f.jsx)(dO,{onSelectCategory:r}):"in-app-tutorials"===n?(0,f.jsx)(CO,{onBack:function(){return r(null)},selectInAppTutorial:t}):"all-courses"===n?(0,f.jsx)(IO,{onBack:function(){return r(null)},courses:p,onSelectCourse:B,onSelectBundle:_,previewedCourse:o,getCourseChapters:d,getCourseCompletion:x,getCourseChapterCompletion:m}):(0,f.jsx)(uA,{onBack:function(){return r("all-tutorials")},category:n,onOpenTemplateFromTutorial:i,onSelectCourse:B}):(0,f.jsx)(eA,{onSelectCategory:r,selectInAppTutorial:t,courses:p,onSelectCourse:B,onSelectBundle:_,getCourseCompletion:x,getCourseChapterCompletion:m,onOpenAskAi:y,onOpenNewProjectSetupDialog:Z,onSelectPrivateGameTemplateListingData:k,onSelectExampleShortHeader:w})},AO=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Learn section"}),scope:"start-page-learn",children:(0,f.jsx)(LO,(0,l.Z)({},e))})},OO={iframeTarget:{position:"absolute",inset:0,pointerEvents:"none"}},RO=function(e){var t=e.gamesPlatformFrameTools,n=(0,be.UQ)().isMobile,r=t.iframeLoaded,i=t.iframeErrored,a=t.loadIframeOrRemoveTimeout,o=t.updateIframePosition,s=c.useRef(null);return c.useLayoutEffect((function(){if(s.current){var e=s.current.getBoundingClientRect();o({isMobile:n,top:e.top,left:e.left,width:e.width,height:e.height})}})),c.useEffect((function(){(0,ai.xH)()}),[]),r?(0,f.jsx)("div",{style:OO.iframeTarget,ref:s}):(0,f.jsx)(yS.ZP,{flexBody:!0,children:(0,f.jsx)(yS.L,{expand:!0,children:i?(0,f.jsx)(_r.Z,{onRetry:a,children:(0,f.jsx)(w.Trans,{id:"Error while loading the Play section. Verify your internet connection or try again later."})}):(0,f.jsx)(Oe.Z,{})})})},FO=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Play section"}),scope:"start-page-play",children:(0,f.jsx)(RO,(0,l.Z)({},e))})},DO=n(87284),NO=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5C8.41015 5.5 5.5 8.41015 5.5 12C5.5 15.5899 8.41015 18.5 12 18.5C15.5899 18.5 18.5 15.5899 18.5 12C18.5 8.41015 15.5899 5.5 12 5.5ZM4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 10.375C9 9.06334 10.0633 8 11.375 8H14.25C14.6642 8 15 8.33579 15 8.75C15 9.16421 14.6642 9.5 14.25 9.5H11.375C10.8917 9.5 10.5 9.89174 10.5 10.375C10.5 10.8583 10.8917 11.25 11.375 11.25H12.625C13.9367 11.25 15 12.3133 15 13.625C15 14.9367 13.9367 16 12.625 16H9.75C9.33579 16 9 15.6642 9 15.25C9 14.8358 9.33579 14.5 9.75 14.5H12.625C13.1083 14.5 13.5 14.1083 13.5 13.625C13.5 13.1417 13.1083 12.75 12.625 12.75H11.375C10.0633 12.75 9 11.6867 9 10.375Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 7C12.4142 7 12.75 7.33579 12.75 7.75V8.25C12.75 8.66421 12.4142 9 12 9C11.5858 9 11.25 8.66421 11.25 8.25V7.75C11.25 7.33579 11.5858 7 12 7Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 15C12.4142 15 12.75 15.3358 12.75 15.75V16.25C12.75 16.6642 12.4142 17 12 17C11.5858 17 11.25 16.6642 11.25 16.25V15.75C11.25 15.3358 11.5858 15 12 15Z",fill:"currentColor"})]}))})),_O=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49996 3.66666C4.03972 3.66666 3.66663 4.03975 3.66663 4.49999V9.49999C3.66663 9.96024 4.03972 10.3333 4.49996 10.3333H6.24996C6.39414 10.3333 6.5313 10.3956 6.62625 10.5041L7.99996 12.074L9.37367 10.5041C9.46862 10.3956 9.60578 10.3333 9.74996 10.3333H11.5C11.9602 10.3333 12.3333 9.96025 12.3333 9.49999V4.49999C12.3333 4.03975 11.9602 3.66666 11.5 3.66666H4.49996ZM2.66663 4.49999C2.66663 3.48747 3.48744 2.66666 4.49996 2.66666H11.5C12.5125 2.66666 13.3333 3.48747 13.3333 4.49999V9.49999C13.3333 10.5125 12.5125 11.3333 11.5 11.3333H9.97684L8.37625 13.1626C8.2813 13.2711 8.14414 13.3333 7.99996 13.3333C7.85578 13.3333 7.71862 13.2711 7.62367 13.1626L6.02308 11.3333H4.49996C3.48744 11.3333 2.66663 10.5125 2.66663 9.49999V4.49999Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33329 7.33332C5.33329 6.96518 5.63175 6.66666 5.99996 6.66666C6.36817 6.66666 6.66663 6.96518 6.66663 7.33332C6.66663 7.70147 6.36817 7.99999 5.99996 7.99999C5.63175 7.99999 5.33329 7.70147 5.33329 7.33332Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33329 7.33332C7.33329 6.96516 7.6318 6.66666 7.99996 6.66666C8.36812 6.66666 8.66663 6.96516 8.66663 7.33332C8.66663 7.70148 8.36812 7.99999 7.99996 7.99999C7.6318 7.99999 7.33329 7.70148 7.33329 7.33332Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33329 7.33332C9.33329 6.96516 9.6318 6.66666 9.99996 6.66666C10.3681 6.66666 10.6666 6.96516 10.6666 7.33332C10.6666 7.70148 10.3681 7.99999 9.99996 7.99999C9.6318 7.99999 9.33329 7.70148 9.33329 7.33332Z",fill:"currentColor"})]}))})),BO=n(10928),UO=n(75087),VO={buttonsContainer:{flexShrink:0},columnContainer:{display:"grid"}},HO=function(e){var t=e.children;return(0,f.jsx)("div",{style:VO.columnContainer,children:t})},zO=function(e){var t=e.children;return(0,f.jsx)(_.pJ,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:t})},WO=function(e){var t=e.url,n=e.display,r="column"===n?HO:zO;return(0,f.jsxs)(r,{children:[(0,f.jsx)(UO.Z,{url:t}),"column"===n&&(0,f.jsx)(M.LZ,{}),(0,f.jsx)("div",{style:VO.buttonsContainer,children:(0,f.jsx)(BO.Z,{url:t})})]})},GO=n(57244),YO=function(e){var t=e.status,n=c.useContext(j.Z),r="success"===t?n.statusIndicator.success:"error"===t?n.statusIndicator.error:n.statusIndicator.warning;return(0,f.jsx)("div",{style:{width:8,height:8,margin:6,borderRadius:6,backgroundColor:r}})},qO={avatar:{width:20,height:20}},JO=function(e){var t=e.avatarUrl,n=e.status,r=e.tooltipMessage,i=e.hideStatus;return t?r?(0,f.jsx)(_o,{overlap:"circle",color:n,invisible:i,children:(0,f.jsx)(re.ZP,{title:r,children:(0,f.jsx)(ao.Z,{src:t,style:qO.avatar})})}):(0,f.jsx)(_o,{overlap:"circle",color:n,invisible:i,children:(0,f.jsx)(ao.Z,{src:t,style:qO.avatar})}):(0,f.jsx)(YO,{status:"success"})},XO=function(e){var t=e.file,n=e.lastModifiedInfo,r=e.storageProvider,i=e.authenticatedUser,a=e.currentFileMetadata,o=e.textColor,s=void 0===o?"primary":o,l=e.textSize,c=void 0===l?"body":l,u=e.textPrefix,d=!!r&&"Cloud"===r.internalName,p=!!a&&a.fileIdentifier===t.fileMetadata.fileIdentifier,h=n?n.lastModifiedAt:t.fileMetadata.lastModifiedDate?t.fileMetadata.lastModifiedDate:null;if(!h)return null;var g=i.profile&&i.profile.email,m=i.profile&&i.profile.username,x=d&&g?(0,oo.y)(g,{size:40}):null,v=n?n.lastModifiedByUsername:m,b=n?n.lastModifiedByIconUrl:x,C=!!p&&!!a&&!!n&&a.version!==n.lastKnownVersionId;return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[u&&(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,size:c,children:u}),p&&(0,f.jsx)(JO,{avatarUrl:x,tooltipMessage:m,status:"success"}),d&&(!p||C)&&(0,f.jsx)(JO,{avatarUrl:b,tooltipMessage:v,status:"error",hideStatus:!C}),p?(0,f.jsx)(N.Z,{noMargin:!0,color:s,size:c,children:(0,f.jsx)(w.Trans,{id:"Modifying"})}):(0,f.jsx)(re.ZP,{placement:"right",title:aR(t,h),children:(0,f.jsx)(N.Z,{noMargin:!0,color:s,size:c,children:iR(t,h)})})]})}})},KO=c.memo(c.forwardRef((function(e,t){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:t,width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{d:"M8.5993 4.4995C8.87545 4.4995 9.0993 4.72335 9.0993 4.9995V7.9995C9.0993 8.27564 8.87545 8.4995 8.5993 8.4995C8.32316 8.4995 8.0993 8.27564 8.0993 7.9995V4.9995C8.0993 4.72335 8.32316 4.4995 8.5993 4.4995Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M8.59928 11.3328C8.96747 11.3328 9.26595 11.0344 9.26595 10.6662C9.26595 10.298 8.96747 9.9995 8.59928 9.9995C8.23109 9.9995 7.93262 10.298 7.93262 10.6662C7.93262 11.0344 8.23109 11.3328 8.59928 11.3328Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.46281 1.4128L11.3389 2.31078L13.2106 3.21766C13.7554 3.48159 14.1513 3.97804 14.2874 4.56786L14.755 6.5945L15.213 8.62334C15.3463 9.2138 15.205 9.83286 14.8287 10.307L13.5358 11.9362L12.2352 13.5592C11.8566 14.0316 11.2845 14.3071 10.6792 14.3086L8.59933 14.3135L6.51944 14.3086C5.91412 14.3071 5.34203 14.0316 4.9635 13.5592L3.66284 11.9362L2.36992 10.307C1.99364 9.83286 1.85234 9.2138 1.98563 8.62334L2.44363 6.5945L2.91127 4.56786C3.04737 3.97804 3.44327 3.48159 3.98802 3.21766L5.85979 2.31078L7.73584 1.4128C8.28184 1.15146 8.91682 1.15146 9.46281 1.4128ZM9.03107 2.3148L10.9028 3.21071L10.9071 3.21278L12.7746 4.1176C13.047 4.24956 13.2449 4.49779 13.313 4.79269L13.7796 6.8147L13.7806 6.81934L14.2376 8.84354C14.3042 9.13877 14.2336 9.4483 14.0454 9.68538L12.7555 11.3109L12.7525 11.3146L11.4548 12.9339C11.2655 13.1701 10.9795 13.3078 10.6768 13.3086L8.6017 13.3135H8.59695L6.52182 13.3086C6.21916 13.3078 5.93311 13.1701 5.74384 12.9339L4.44615 11.3146L4.44319 11.3109L3.15323 9.68538C2.96509 9.4483 2.89444 9.13877 2.96109 8.84354L3.41856 6.81703L3.88567 4.79269C3.95372 4.49779 4.15167 4.24956 4.42404 4.1176L6.29367 3.21175L8.16759 2.3148C8.44058 2.18413 8.75807 2.18413 9.03107 2.3148Z",fill:"currentColor"})]}))}))),QO=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"11",height:"12",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.932617 2.49935C0.932617 1.48683 1.75343 0.666016 2.76595 0.666016H6.93262C7.06523 0.666016 7.1924 0.718694 7.28617 0.812462L10.1195 3.6458C10.2133 3.73956 10.266 3.86674 10.266 3.99935V9.49935C10.266 10.5119 9.44516 11.3327 8.43262 11.3327H2.76595C1.75343 11.3327 0.932617 10.5119 0.932617 9.49935V2.49935ZM2.76595 1.66602C2.30571 1.66602 1.93262 2.03911 1.93262 2.49935V9.49935C1.93262 9.9596 2.30571 10.3327 2.76595 10.3327H8.43262C8.89288 10.3327 9.26595 9.95961 9.26595 9.49935V4.20646L6.72551 1.66602H2.76595Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.76595 0.832682C7.04209 0.832682 7.26595 1.05654 7.26595 1.33268V3.66602H9.59928C9.87543 3.66602 10.0993 3.88987 10.0993 4.16602C10.0993 4.44216 9.87543 4.66602 9.59928 4.66602H6.76595C6.48981 4.66602 6.26595 4.44216 6.26595 4.16602V1.33268C6.26595 1.05654 6.48981 0.832682 6.76595 0.832682Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.59928 8.16602C3.59928 7.88987 3.82314 7.66602 4.09928 7.66602H7.09928C7.37543 7.66602 7.59928 7.88987 7.59928 8.16602C7.59928 8.44216 7.37543 8.66602 7.09928 8.66602H4.09928C3.82314 8.66602 3.59928 8.44216 3.59928 8.16602Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.59928 6.16602C3.59928 5.88987 3.82314 5.66602 4.09928 5.66602H7.09928C7.37543 5.66602 7.59928 5.88987 7.59928 6.16602C7.59928 6.44216 7.37543 6.66602 7.09928 6.66602H4.09928C3.82314 6.66602 3.59928 6.44216 3.59928 6.16602Z",fill:"currentColor"})]}))})),$O=function(e){var t=e.i18n,n=e.dateAsNumber,r=e.relativeLimit,i=e.sameDayFormat,a=e.sameWeekFormat,o=e.dayBeforeFormat,s=Date.now();if(s-n<6e4)return t._({id:"Just now"});var l=new Date(s),c=new Date(n);if(l.getFullYear()===c.getFullYear()&&l.getMonth()===c.getMonth()&&l.getDate()===c.getDate()){if("todayAndHour"===i)return t._({id:"Today"})+" ".concat(t.date(c,{hour:"numeric"}));if("today"===i)return t._({id:"Today"});if(s-n<36e5){var u=Math.floor((s-n)/6e4);return t._({id:"{minutesAgo} minutes ago",values:{minutesAgo:u}})}var d=Math.floor((s-n)/36e5);return 1===d?t._({id:"1 hour ago"}):t._({id:"{hoursAgo} hours ago",values:{hoursAgo:d}})}var p=new Date(l);if(p.setDate(l.getDate()-1),l.getFullYear()===c.getFullYear()&&l.getMonth()===c.getMonth()&&p.getDate()===c.getDate())return"yesterdayAndHour"===o?t._({id:"Yesterday"})+" ".concat(t.date(c,{hour:"numeric"})):t._({id:"Yesterday"});var f=new Date(l);if(f.setDate(l.getDate()-7),f.setHours(0,0,0,0),l.getFullYear()===c.getFullYear()&&l.getMonth()===c.getMonth()&&f.getTime()<=c.getTime()){if("thisWeek"===a)return t._({id:"This week"});var h=Math.floor((s-n)/864e5);return 1===h?t._({id:"1 day ago"}):t._({id:"{daysAgo} days ago",values:{daysAgo:h}})}return"currentWeek"===r?t.date(c):l.getFullYear()===c.getFullYear()&&l.getMonth()===c.getMonth()?t._({id:"This month"}):l.getFullYear()===c.getFullYear()?t._({id:"This year"}):c.getFullYear()},eR=F()("@electron/remote"),tR=eR?eR.shell:null,nR=F()("path"),rR=function(e){return e.isMobile?void 0:Math.min(245,Math.max(130,window.innerWidth/4))},iR=function(e,t){return $O({i18n:e,dateAsNumber:t,sameDayFormat:"todayAndHour",dayBeforeFormat:"yesterdayAndHour",relativeLimit:"currentWeek",sameWeekFormat:"thisWeek"})},aR=function(e,t){return e.date(t,{dateStyle:"short",timeStyle:"short"})},oR={tooltipButtonContainer:{display:"flex",flexDirection:"column",alignItems:"stretch"},buttonsContainer:{display:"flex",flexShrink:0,flexDirection:"column",justifyContent:"center"},iconAndText:{display:"flex",gap:2,alignItems:"flex-start"},title:(0,l.Z)((0,l.Z)({},pr.t),{},{overflowWrap:"break-word"}),projectFilesButton:{minWidth:32},fileIcon:{width:16,height:16}},sR=function(e,t,n){var r=e.fileMetadata.name||"-",i="LocalFile"===e.storageProviderName&&function(e){var t=e.replace(/\\/g,"/").split("/").pop();if(t){var n=t.split(".");return n.length>1?n.slice(0,-1).join("."):t}return""}(e.fileMetadata.fileIdentifier)||r,a=(0,yP.fl)(t,e.storageProviderName);return n._("".concat(i," (").concat(a?n._(a.name):e.storageProviderName,")"))},lR=function(e){var t=e.dashboardItem,n=e.storageProviders,i=e.isCurrentProjectOpened,s=e.onOpenGameManager,u=e.onOpenProject,d=e.onUnregisterGame,p=e.disabled,h=e.canSaveProject,g=e.askToCloseProject,m=(e.closeProject,e.onSaveProject),x=e.lastModifiedInfoByProjectId,v=e.currentFileMetadata,b=e.onRefreshGames,C=e.onDeleteCloudProject,y=e.onRegisterProject;(0,ds.Z)((0,gt.Z)());var Z=c.useMemo((function(){return t.projectFiles||[]}),[t.projectFiles]),k=t.game,S=Z.length?Z[0]:null,P=S?x[S.fileMetadata.fileIdentifier]:null,I=c.useContext($n.ZP),E=I.profile,L=I.onOpenLoginDialog,A=c.useContext(D.ZP).removeRecentProjectFile,O=(0,Ye.Z)(),R=O.showAlert,F=O.showConfirmation,B=O.showDeleteConfirmation,U=!!k&&!!k.publicWebBuildId,V=k&&k.cachedLastWeekSessionsCount||0,H=U?(0,Cr.IH)(k):null,z=c.useMemo((function(){return k?(0,Cr.nC)(k):null}),[k]),W=k?k.gameName:S?S.fileMetadata.name:null,Y=(0,be.UQ)(),q=Y.isMobile,J=Y.windowSize,X=Y.isLandscape,K="small"===J||"medium"===J,Q=c.useContext(j.Z),ee=S?(0,yP.fl)(n,S.storageProviderName):null,te=function(){var e=k&&k.discoverable&&H?ex.Z:tx.Z,t=k&&k.displayAdsOnGamePage?NO:as.Z,n=k&&k.acceptsGameComments?_O:as.Z,r={color:"secondary",size:"body-small",noMargin:!0},i={htmlColor:Q.text.color.secondary,fontSize:"small"};return(0,f.jsxs)(_.ep,{alignItems:"center",noColumnMargin:!0,children:[(0,f.jsxs)("div",{style:oR.iconAndText,children:[(0,f.jsx)(e,(0,l.Z)({},i)),(0,f.jsx)(N.Z,(0,l.Z)((0,l.Z)({},r),{},{children:k&&k.discoverable&&H?(0,f.jsx)(w.Trans,{id:"Public on gd.games"}):H?(0,f.jsx)(w.Trans,{id:"Hidden on gd.games"}):(0,f.jsx)(w.Trans,{id:"Not published"})}))]}),k&&(0,f.jsxs)("div",{style:oR.iconAndText,children:[(0,f.jsx)(t,(0,l.Z)({},i)),(0,f.jsx)(N.Z,(0,l.Z)((0,l.Z)({},r),{},{children:k.displayAdsOnGamePage?(0,f.jsx)(w.Trans,{id:"Ad revenue sharing on"}):(0,f.jsx)(w.Trans,{id:"Ad revenue sharing off"})}))]}),k&&(0,f.jsxs)("div",{style:oR.iconAndText,children:[(0,f.jsx)(n,(0,l.Z)({},i)),(0,f.jsx)(N.Z,(0,l.Z)((0,l.Z)({},r),{},{children:k.acceptsGameComments?(0,f.jsx)(w.Trans,{id:"Player feedback on"}):(0,f.jsx)(w.Trans,{id:"Player feedback off"})}))]})]})},ne=function(){return(0,f.jsxs)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,style:oR.title,children:W||(0,f.jsx)(w.Trans,{id:"Unknown game"})}),Z.length>=2&&k&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(re.ZP,{title:(0,f.jsx)(w.Trans,{id:"{0} projects",values:{0:Z.length}}),children:(0,f.jsx)("div",{style:oR.tooltipButtonContainer,children:(0,f.jsx)(ba.Z,{onClick:function(){return s({game:k,widgetToScrollTo:"projects"})},icon:(0,f.jsx)(QO,{style:oR.fileIcon}),label:(0,f.jsx)(N.Z,{noMargin:!0,color:"secondary",children:Z.length}),disabled:p,style:oR.projectFilesButton})})})]})]})},ie=function(e){return S?(0,f.jsx)(XO,{file:S,lastModifiedInfo:P,storageProvider:ee,authenticatedUser:I,currentFileMetadata:v,textColor:"secondary",textSize:"body-small",textPrefix:i?null:(0,f.jsx)(w.Trans,{id:"Last edited:"})}):k?(0,f.jsxs)(_.pJ,{noMargin:!0,expand:!0,children:[(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,size:"body-small",children:!ee&&i?(0,f.jsx)(w.Trans,{id:"Draft created:"}):(0,f.jsx)(w.Trans,{id:"Last edited:"})}),(0,f.jsx)(re.ZP,{placement:"right",title:aR(e,1e3*(k.updatedAt||0)),children:(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,size:"body-small",children:iR(e,1e3*(k.updatedAt||0))})})]}):null},ae=function(e){var t=ee?ee.renderIcon?ee.renderIcon({size:"small"}):null:(0,f.jsx)(KO,{}),n=ee?e._(ee.name):i?(0,f.jsx)(w.Trans,{id:"Project not saved"}):(0,f.jsx)(w.Trans,{id:"Project not found"});return(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[t&&(0,f.jsxs)(f.Fragment,{children:[t,(0,f.jsx)(M.LZ,{})]}),(0,f.jsx)(N.Z,{noMargin:!0,color:"secondary",children:n})]})},oe=function(){return(0,f.jsx)(jr.J,{gameName:W||"unknown game",gameId:k?k.id:void 0,thumbnailUrl:z,background:"light",width:rR({isMobile:q})})},se=function(){return(0,f.jsx)(ya.Z,{element:(0,f.jsx)($.Z,{size:"small",disabled:p,children:(0,f.jsx)(Mh.Z,{})}),buildMenuTemplate:function(e){var t=[];if(i&&t.push({label:e._({id:"Close project"}),click:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Z.length,1===Z.length){var n=Z[0];n&&"LocalFile"===n.storageProviderName&&t.push({label:e._({id:"Show in local folder"}),click:function(){return e=n,void(tR&&tR.showItemInFolder(nR.resolve(e.fileMetadata.fileIdentifier)));var e}})}return Z.length>1&&t.push({label:e._({id:"See all projects"}),click:k?function(){return s({game:k,widgetToScrollTo:"projects"})}:void 0}),i||Z.length>1||(t.length>0&&t.push({type:"separator"}),t.push({label:e._({id:"Delete"}),click:function(){var t=(0,o.Z)((0,a.Z)().mark((function t(){var n,r,i,o,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._({id:"delete"}),r=U?{id:"Is published on gd.games"}:{id:"Is not published on gd.games"},i=V?{id:"Had {countOfSessionsLastWeek} players in the last week",values:{countOfSessionsLastWeek:V}}:{id:"Had no players in the last week"},o={id:"You're deleting a game which:{0} - {1} {2} - {3} {4} If you continue, the game and this project will be deleted.{5} This action is irreversible. Do you want to continue?",values:{0:"\n\n",1:e._(r),2:"\n",3:e._(i),4:"\n\n",5:"\n\n"}},t.next=6,B({title:{id:"Delete {gameName}",values:{gameName:W}},header:oe(),message:o,confirmButtonLabel:{id:"Delete game"},fieldMessage:{id:'To confirm, type "{translatedConfirmText}"',values:{translatedConfirmText:n}},confirmText:n});case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:if(!k){t.next=19;break}return t.prev=10,t.next=13,d();case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(10),console.error("Unable to unregister the game.",t.t0),t.abrupt("return");case 19:if(!(s=Z[0])){t.next=28;break}if("Cloud"!==s.storageProviderName){t.next=26;break}return t.next=24,C(s);case 24:t.next=28;break;case 26:return t.next=28,A(s);case 28:return t.next=30,b();case 30:case"end":return t.stop()}}),t,null,[[10,15]])})));return function(){return t.apply(this,arguments)}}()})),t}})},le=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=5;break}return s({game:k}),e.abrupt("return");case 5:if(E){e.next=8;break}return L(),e.abrupt("return");case 8:return e.next=10,F({title:{id:"Manage game online"},message:{id:"This game is not registered online. Do you want to register it to access the online features?"},confirmButtonLabel:{id:"Continue"}});case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,y(Z[0]);case 15:if(t=e.sent){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,b();case 20:s({game:t});case 21:case"end":return e.stop()}}),e)}))),[k,s,F,y,Z,b,L,E]),ce=function(e){var t=e.fullWidth,a=i?(0,f.jsx)(w.Trans,{id:"Save"}):(0,f.jsx)(w.Trans,{id:"Open"}),o=i?m:Z.length>0?function(){return u(Z[0])}:function(){R({title:{id:"No project to open"},message:eR?{id:'We couldn\'t find your project.{0}If your project is stored on a different computer, launch GDevelop on that computer.{1}Otherwise, use the "Open project" button and find it in your filesystem.',values:{0:"\n\n",1:"\n"}}:{id:"Looks like your project isn't there!{0}Your project must be stored on your computer.",values:{0:"\n\n"}}})};return(0,f.jsx)("div",{style:oR.buttonsContainer,children:(0,f.jsxs)(_.pJ,{noMargin:!0,children:[(0,f.jsx)(T.Z,{primary:!0,fullWidth:t,label:(0,f.jsx)(w.Trans,{id:"Manage"}),onClick:le,disabled:p}),Z.length<2?(0,f.jsx)(G.Z,{primary:!0,fullWidth:t,label:a,onClick:o,disabled:p||i&&!h}):(0,f.jsx)(GO.Z,{primary:!0,fullWidth:t,label:a,onClick:o,buildMenuTemplate:function(e){return function(e){var t=[];return Z.length>1&&(t.push.apply(t,(0,r.Z)(Z.slice(0,3).map((function(t){return{label:sR(t,n,e),click:function(){return u(t)}}})))),k&&t.push.apply(t,[{type:"separator"},{label:e._({id:"See all in the game dashboard"}),click:function(){return s({game:k,widgetToScrollTo:"projects"})}}])),t}(e)},disabled:p||i&&!h})]})})},ue=function(e){return H?(0,f.jsx)(WO,{url:H,display:K?"column":"line"}):null};return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(DO.Z,{background:"medium",isHighlighted:i,padding:q?8:16,children:q&&!X?(0,f.jsxs)(_.ak,{children:[(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,justifyContent:"space-between",children:[ne(),se()]}),ie(t)]}),(0,f.jsxs)(_.pJ,{noMargin:!0,children:[oe(),te()]}),ue(),ce({fullWidth:!0})]}):(0,f.jsxs)(_.pJ,{noMargin:!0,children:[oe(),(0,f.jsxs)(_.ak,{expand:!0,justifyContent:"space-between",noOverflowParent:!0,children:[(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,justifyContent:"space-between",alignItems:"flex-start",children:[(0,f.jsxs)(_.ak,{noMargin:!0,children:[ie(t),ne()]}),(0,f.jsxs)(_.pJ,{noMargin:!0,children:[!K&&ae(t),se()]})]}),te()]}),(0,f.jsxs)(_.pJ,{noMargin:!0,justifyContent:H?"space-between":"flex-end",children:[ue(),ce({fullWidth:!1})]})]})]})})}})},cR=!!F()("electron"),uR={noGameMessageContainer:{padding:10},refreshIconContainer:{fontSize:20,display:"flex",alignItems:"center"},gameLoadingSkeleton:{borderRadius:8}},dR=function(e,t){return(t.game&&t.game.cachedTotalSessionsCount||0)-(e.game&&e.game.cachedTotalSessionsCount||0)},pR=function(e,t){return(t.game&&t.game.cachedLastWeekSessionsCount||0)-(e.game&&e.game.cachedLastWeekSessionsCount||0)},fR=function(e){return e.projectFiles&&e.projectFiles.length>0?Math.max.apply(Math,(0,r.Z)(e.projectFiles.map((function(e){return e.fileMetadata.lastModifiedDate||0})))):e.game&&1e3*(e.game.updatedAt||0)||0},hR=function(e,t){return fR(t)-fR(e)},gR=function(e){var t=e.project,n=e.currentFileMetadata,i=e.allDashboardItems,a=e.searchText,o=e.searchClient,s=e.currentPage,l=e.orderBy;if(!i)return null;var c=(0,r.Z)(i);if(a){c=o.search((0,jf.G9)(a,["game.gameName","projectFiles.fileMetadata.name"])).map((function(e){return e.item}))}else{if(l&&c.sort("totalSessions"===l?dR:"weeklySessions"===l?pR:hR),t&&"lastModifiedAt"===l){var u=t.getProjectUuid(),d=n?n.fileIdentifier:null,p=i.find((function(e){return e.game&&e.game.id===u||e.projectFiles&&e.projectFiles.some((function(e){return e.fileMetadata.gameId===u&&e.fileMetadata.fileIdentifier===d}))}));if(p)c=[p].concat((0,r.Z)(c.filter((function(e){return!function(e,t){var n=e.game,r=t.game;if(n&&r)return n.id===r.id;var i=e.projectFiles,a=t.projectFiles;return!(!i||!a)&&i.length===a.length&&i.every((function(e,t){var n=a[t];return e.fileMetadata.gameId===n.fileMetadata.gameId&&e.fileMetadata.fileIdentifier===n.fileMetadata.fileIdentifier}))}(e,p)}))));else c=[{projectFiles:[{fileMetadata:n||{fileIdentifier:"unsaved-project",name:t.getName(),gameId:t.getProjectUuid()},storageProviderName:""}]}].concat((0,r.Z)(c))}c=c.slice(10*(s-1),10*s)}return c},mR=function(e){var t=e.project,n=e.currentFileMetadata,i=e.games,u=e.onRefreshGames,d=e.onOpenGameManager,p=e.onOpenProject,h=e.onUnregisterGame,g=e.onRegisterProject,m=e.onDeleteCloudProject,x=e.disabled,v=e.storageProviders,b=e.canOpen,C=e.onOpenNewProjectSetupDialog,j=e.onChooseProject,y=e.closeProject,Z=e.askToCloseProject,k=e.onSaveProject,T=e.canSaveProject,S=e.currentPage,I=e.setCurrentPage,E=e.searchText,L=e.setSearchText,A=c.useContext($n.ZP),O=A.cloudProjects,R=A.profile,F=A.onCloudProjectsChanged,B=c.useContext(D.ZP),U=B.values.gamesDashboardOrderBy,V=B.setGamesDashboardOrderBy,z=(0,be.UQ)().isMobile,W=rR({isMobile:z}),Y=(0,yP.ZA)(null),q=c.useMemo((function(){if(!i)return null;var e=i.map((function(e){var t=Y.filter((function(t){return t.fileMetadata.gameId===e.id}));return{game:e,projectFiles:t}})),n=Y.filter((function(e){return!i.find((function(t){return t.id===e.fileMetadata.gameId}))})).map((function(e){return{projectFiles:[e]}}));return[].concat((0,r.Z)(e),(0,r.Z)(n)).filter((function(e){return!(e.game&&"draft"===e.game.savedStatus&&(!e.projectFiles||!e.projectFiles.length)&&(!t||e.game.id!==t.getProjectUuid()))}))}),[i,Y,t]),J=q?Math.ceil(q.length/10):1,X=c.useCallback((function(e){I(e<1?1:e>J?J:e)}),[I,J]),K=c.useMemo((function(){return new Cf.Z(q||[],(0,l.Z)((0,l.Z)({},jf.KE),{},{keys:[{name:"game.gameName",weight:1},{name:"projectFiles.fileMetadata.name",weight:1}]}))}),[q]),Q=c.useState(gR({project:t,currentFileMetadata:n,allDashboardItems:q,searchText:E,searchClient:K,currentPage:S,orderBy:U})),ee=(0,s.Z)(Q,2),te=ee[0],ne=ee[1],re=(0,sr.N)((function(){ne(gR({project:t,currentFileMetadata:n,allDashboardItems:q,searchText:E,searchClient:K,currentPage:S,orderBy:U}))}),E?250:150);c.useEffect(re,[re,E,i,S,U,n,Y.length,t]);var ie=t?t.getProjectUuid():null,ae=c.useState(!1),oe=(0,s.Z)(ae,2),se=oe[0],le=oe[1],ce=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,le(!0),e.next=6,Promise.all([F(),u()]);case 6:return e.prev=6,setTimeout((function(){return le(!1)}),2e3),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[2,,6,9]])}))),[F,se,u]),ue=c.useState({}),de=(0,s.Z)(ue,2),pe=de[0],fe=de[1];c.useEffect((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,yP.gn)({cloudProjects:O,profile:R});case 4:t=e.sent,fe(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[O,R]),c.useEffect((function(){I(1)}),[U]);var he=b&&!z&&cR;return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"section-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Games"})}),(0,f.jsx)($.Z,{size:"small",onClick:ce,disabled:se||!q||!q.length,tooltip:{id:"Refresh games"},children:(0,f.jsx)("div",{style:uR.refreshIconContainer,children:(0,f.jsx)(lo.Z,{fontSize:"inherit"})})})]}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(G.Z,{primary:!0,label:z?(0,f.jsx)(w.Trans,{id:"Create"}):(0,f.jsx)(w.Trans,{id:"Create new game"}),onClick:C,icon:(0,f.jsx)(it.Z,{fontSize:"small"}),id:"home-create-project-button",disabled:x}),he&&(0,f.jsx)(ba.Z,{label:z?(0,f.jsx)(w.Trans,{id:"Open"}):(0,f.jsx)(w.Trans,{id:"Open a project"}),onClick:j,disabled:x})]})]}),q&&q.length>0&&(0,f.jsxs)(_.ep,{expand:!0,noMargin:!0,alignItems:"center",noResponsiveLandscape:!0,children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsx)(Ge.Z,{value:E,onChange:L,onRequestSearch:function(){},placeholder:{id:"Search by name"}})}),(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsxs)(li,{value:U,onChange:function(e,t,n){return V(n)},children:[(0,f.jsx)(P.Z,{value:"lastModifiedAt",label:{id:"Last modified"}}),(0,f.jsx)(P.Z,{value:"totalSessions",label:{id:"Most sessions (all time)"}}),(0,f.jsx)(P.Z,{value:"weeklySessions",label:{id:"Most sessions (past 7 days)"}})]}),(0,f.jsxs)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",justifyContent:"flex-end",children:[(0,f.jsx)($.Z,{tooltip:{id:"Previous page"},onClick:function(){return X(S-1)},disabled:!!E||1===S,size:"small",children:(0,f.jsx)(Ca.Z,{})}),(0,f.jsx)(N.Z,{noMargin:!0,style:{opacity:E?.6:1,fontVariantNumeric:"tabular-nums"},children:E||1===J?1:"".concat(S,"/").concat(J)}),(0,f.jsx)($.Z,{tooltip:{id:"Next page"},onClick:function(){return X(S+1)},disabled:!!E||S>=J,size:"small",children:(0,f.jsx)(ot.Z,{})})]})]})]}),!te&&Array.from({length:10}).map((function(e,t){return(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsx)(pP.Z,{variant:"rect",height:W?9*W/16:9*window.innerWidth/16,width:"100%",style:uR.gameLoadingSkeleton})},t)})),te&&te.length>0?te.map((function(e,r){var i=e.game,s=e.projectFiles?e.projectFiles[0]:null,l=i?i.id:s?"".concat(s.fileMetadata.name||"project","-").concat(r):"",c=!!ie&&!!i&&i.id===ie||!!s&&!!n&&s.fileMetadata.gameId===ie&&s.fileMetadata.fileIdentifier===n.fileIdentifier;return(0,f.jsx)(lR,{dashboardItem:e,storageProviders:v,isCurrentProjectOpened:c,onOpenGameManager:d,onOpenProject:p,onUnregisterGame:(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h(i.id,t,{skipConfirmation:!0,throwOnError:!0});case 4:case"end":return e.stop()}}),e)}))),onRegisterProject:g,disabled:x,canSaveProject:T,askToCloseProject:Z,closeProject:y,onSaveProject:k,lastModifiedInfoByProjectId:pe,currentFileMetadata:n,onRefreshGames:ce,onDeleteCloudProject:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t,n,{skipConfirmation:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l)})).filter(Boolean):E?(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,children:(0,f.jsx)(H.Z,{variant:"outlined",background:"dark",style:uR.noGameMessageContainer,children:(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"No game matching your search."})})})}):null]})}})},xR=n(41693),vR={iconAndText:{display:"flex",gap:2,alignItems:"flex-start"}},bR=function(e){var t=e.game,n=e.onEditGame,r=e.gameUrl,i=e.onPublishOnGdGames;(0,ds.Z)((0,gt.Z)());var a=(0,be.UQ)(),o=a.isMobile,s=a.isLandscape,u=c.useContext(j.Z),d=(0,Cr.nC)(t),p=function(){var e=t.discoverable&&r?ex.Z:tx.Z,n=t.displayAdsOnGamePage?NO:as.Z,i=t.acceptsGameComments?_O:as.Z,a={color:"secondary",size:"body-small",noMargin:!0},o={htmlColor:u.text.color.secondary,fontSize:"small"};return(0,f.jsxs)(_.ep,{alignItems:"center",noColumnMargin:!0,noResponsiveLandscape:!0,children:[(0,f.jsxs)("div",{style:vR.iconAndText,children:[(0,f.jsx)(e,(0,l.Z)({},o)),(0,f.jsx)(N.Z,(0,l.Z)((0,l.Z)({},a),{},{children:t.discoverable&&r?(0,f.jsx)(w.Trans,{id:"Public on gd.games"}):r?(0,f.jsx)(w.Trans,{id:"Hidden on gd.games"}):(0,f.jsx)(w.Trans,{id:"Not published"})}))]}),(0,f.jsxs)("div",{style:vR.iconAndText,children:[(0,f.jsx)(n,(0,l.Z)({},o)),(0,f.jsx)(N.Z,(0,l.Z)((0,l.Z)({},a),{},{children:t.displayAdsOnGamePage?(0,f.jsx)(w.Trans,{id:"Ad revenue sharing on"}):(0,f.jsx)(w.Trans,{id:"Ad revenue sharing off"})}))]}),(0,f.jsxs)("div",{style:vR.iconAndText,children:[(0,f.jsx)(i,(0,l.Z)({},o)),(0,f.jsx)(N.Z,(0,l.Z)((0,l.Z)({},a),{},{children:t.acceptsGameComments?(0,f.jsx)(w.Trans,{id:"Player feedback on"}):(0,f.jsx)(w.Trans,{id:"Player feedback off"})}))]})]})},h=function(e){return(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(re.ZP,{placement:"right",title:aR(e,1e3*t.createdAt),children:(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Created on {0}",values:{0:e.date(1e3*t.createdAt,{dateStyle:"short"})}})})})}),(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:t.gameName})]})},g=function(){return(0,f.jsx)(jr.J,{gameName:t.gameName,gameId:t.id,thumbnailUrl:d,background:"medium",width:Math.min(272,Math.max(150,window.innerWidth/4.5))})},m=function(){return(0,f.jsx)(_.pJ,{noMargin:!0,children:(0,f.jsx)(G.Z,{primary:!0,fullWidth:!0,label:(0,f.jsx)(w.Trans,{id:"Edit details"}),onClick:n,icon:(0,f.jsx)(at.Z,{fontSize:"small"})})})},x=function(e){return(0,f.jsx)(M.Qc,{heights:{small:60},children:r?(0,f.jsx)(WO,{url:r,display:"line"}):(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[i&&(0,f.jsx)(I.K,{checked:!1,label:e._({id:"Publish on gd.games"}),onCheck:i}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Publish on gd.games to let players try your game"})})]})})};return o&&!s?(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(_.ak,{noMargin:!0,children:[h(t),(0,f.jsxs)(_.pJ,{children:[g(),p()]}),x(t),m()]})}}):(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(_.pJ,{children:[g(),(0,f.jsxs)(_.ak,{expand:!0,noOverflowParent:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,justifyContent:"space-between",alignItems:"flex-start",children:[h(t),m()]}),p(),x(t)]})]})}})},CR={paper:{padding:"".concat(16,"px"),display:"flex",flexDirection:"column",alignItems:"stretch"},maxHeightNotWrapped:{height:"calc(100% - ".concat(32,"px)")}},jR=function(e){switch(e){case"full":default:return 12;case"half":return 6;case"oneThird":return 4;case"twoThirds":return 8}},yR=function(e){var t=e.title,n=e.topRightAction,r=e.widgetSize,i=e.renderSubtitle,a=e.children,o=e.minHeight,s=e.widgetName,c=(0,be.UQ)().isMobile;return(0,f.jsx)(xR.Z,(0,l.Z)((0,l.Z)({item:!0,sm:jR(r),xs:12},(0,is.Y)({widgetName:s})),{},{children:(0,f.jsx)(H.Z,{background:"medium",style:(0,l.Z)((0,l.Z)((0,l.Z)({},CR.paper),CR.maxHeightNotWrapped),o&&!c?{minHeight:o?300:120}:{}),children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,useFullHeight:!0,children:[(0,f.jsxs)(M.x1,{alignItems:"center",justifyContent:"space-between",noMargin:!0,children:[(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:t}),i&&i()]}),n]}),a]})})}))},ZR={marginRight:4,flexShrink:0},kR=function(e){var t=e.color,n=e.size,r=void 0===n?6:n,i=c.useContext(j.Z);return(0,f.jsx)("span",{style:(0,l.Z)((0,l.Z)({},ZR),{},{height:r,width:r,borderRadius:Math.ceil(r/2),backgroundColor:"notification"===t?i.notification.badgeColor:i.statusIndicator.warning})})},wR=function(e){var t=e.onSeeAll,n=e.feedbacks,r=e.game,i=e.onUpdateGame,a=e.gameUrl,o=n?n.filter((function(e){return!e.processedAt})):null,s=!r.acceptsGameComments&&n&&0===n.length,l=!!n&&0===n.length;return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(yR,{widgetSize:"oneThird",title:(0,f.jsx)(w.Trans,{id:"Feedbacks"}),topRightAction:n&&0!==n.length?(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See more"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"}),onClick:t,primary:!0}):null,widgetName:"feedback",minHeight:!0,renderSubtitle:function(){return s?null:o&&n?o.length>0?(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(kR,{color:"notification"}),(0,f.jsx)(N.Z,{color:"secondary",size:"body-small",noMargin:!0,children:1===o.length?(0,f.jsx)(w.Trans,{id:"1 new feedback"}):(0,f.jsx)(w.Trans,{id:"{0} new feedbacks",values:{0:o.length}})})]}):n.length>0?(0,f.jsx)(N.Z,{color:"secondary",size:"body-small",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"All feedbacks processed"})}):null:null},children:o&&o.length>0?(0,f.jsx)(ft.Z,{children:(0,f.jsx)(_.ak,{noMargin:!0,children:o.slice(0,3).map((function(e,t){return(0,f.jsxs)(c.Fragment,{children:[t>0&&(0,f.jsx)(M.LZ,{}),t>0&&(0,f.jsx)(or.Z,{orientation:"horizontal"}),(0,f.jsxs)(_.ak,{children:[(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{allowSelection:!0,color:"secondary",size:"body-small",children:r.date(e.createdAt)}),(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(kR,{color:"notification"}),(0,f.jsx)(N.Z,{allowSelection:!0,color:"secondary",size:"body-small",children:(0,f.jsx)(w.Trans,{id:"New"})})]})]}),(0,f.jsx)(N.Z,{allowSelection:!0,color:e.text?"primary":"secondary",size:"body-small",noMargin:!0,children:e.text?(0,Bs.S)(e.text,120):(0,f.jsx)("i",{children:(0,f.jsx)(w.Trans,{id:"Empty free text"})})})]})]},e.id)}))})}):l&&s?(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(I.K,{checked:!1,label:r._({id:"Collect game feedback"}),onCheck:function(e){i({acceptsGameComments:e})}}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"\u201cPlayer feedback\u201d is off, turn it on to start collecting feedback on your game."})})]}):a?(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,justifyContent:"center",children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"You don\u2019t have any feedback about your game. Share your game and start collecting player feedback."})}),(0,f.jsx)(WO,{url:a,display:"column"})]}):(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Share your game on gd.games and collect players feedback about your game."})})]})})}})},TR=n(14737),SR=n(10959),PR=Ie().create({baseURL:Ee.Jv.baseUrl}),IR=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r,i){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,PR.get("/game-metrics",{params:{userId:n,gameId:r,firstDayIsoDate:i},headers:{Authorization:o},validateStatus:function(e){return e>=200&&e<300||404===e}});case 5:if(404!==(s=e.sent).status){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",(0,Me.Ii)({data:s.data,endpointName:"/game-metrics of Analytics API"}));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),ER=n(10570),MR=n(28648),LR=n(83013),AR=n(38465),OR=n(51111),RR=n(70958),FR=n(65261),DR=n(43770),NR=n(5866),_R=n(71039),BR=n(25779),UR=n(96522),VR=n(7374),HR={overview:{viewersCount:0,playersCount:0,bounceRatePercent:0,meanPlayedDurationInMinutes:0,nearestToMedianDuration:{playersCount:0,playersPercent:0,durationInMinutes:0},greaterDurationPlayerSurface:{playersCount:0,playersPercent:0,durationInMinutes:0}},overTime:[],overPlayedDuration:[]},zR={for1Minute:0,for3Minutes:1,for5Minutes:2,for10Minutes:3,for15Minutes:4},WR=[1,3,5,10,15],GR=function(e){return{date:(0,_R.Z)(e),sessions:{d0Sessions:0,d0SessionsDurationTotal:0},players:{d0Players:0,d0NewPlayers:0,d0PlayersBelow60s:0,d0PlayersBelow180s:0,d0PlayersBelow300s:0,d0PlayersBelow600s:0,d0PlayersBelow900s:0},retention:null}},YR=function(e,t){var n,r=[],a=(0,BR.Z)(t,1),o=(0,i.Z)(e);try{for(o.s();!(n=o.n()).done;){for(var s=n.value,l=(0,Ro.Z)(s.date);(0,UR.Z)((0,Ro.Z)(s.date),a)<-1;){var c=(0,VR.Z)(a,1);r.push(GR(c)),a=c}r.push(s),a=l}}catch(d){o.e(d)}finally{o.f()}for(;r.length<364;){var u=(0,VR.Z)(a,1);r.push(GR(u)),a=u}return r},qR=function(e,t){return{date:e.date,startDate:t.date,sessions:e.sessions&&t.sessions&&{d0Sessions:e.sessions.d0Sessions+t.sessions.d0Sessions,d0SessionsDurationTotal:null!=e.sessions.d0SessionsDurationTotal&&null!=t.sessions.d0SessionsDurationTotal?e.sessions.d0SessionsDurationTotal+t.sessions.d0SessionsDurationTotal:void 0},players:e.players&&t.players&&{d0Players:e.players.d0Players+t.players.d0Players,d0NewPlayers:e.players.d0NewPlayers+t.players.d0NewPlayers,d0PlayersBelow60s:null!=e.players.d0PlayersBelow60s&&null!=t.players.d0PlayersBelow60s?e.players.d0PlayersBelow60s+t.players.d0PlayersBelow60s:void 0,d0PlayersBelow180s:null!=e.players.d0PlayersBelow180s&&null!=t.players.d0PlayersBelow180s?e.players.d0PlayersBelow180s+t.players.d0PlayersBelow180s:void 0,d0PlayersBelow300s:null!=e.players.d0PlayersBelow300s&&null!=t.players.d0PlayersBelow300s?e.players.d0PlayersBelow300s+t.players.d0PlayersBelow300s:void 0,d0PlayersBelow600s:null!=e.players.d0PlayersBelow600s&&null!=t.players.d0PlayersBelow600s?e.players.d0PlayersBelow600s+t.players.d0PlayersBelow600s:void 0,d0PlayersBelow900s:null!=e.players.d0PlayersBelow900s&&null!=t.players.d0PlayersBelow900s?e.players.d0PlayersBelow900s+t.players.d0PlayersBelow900s:void 0},retention:null}},JR=function(e){for(var t=[],n=0;n<e.length;n+=7){for(var r=e[n],i=n+1;i<n+7&&i<e.length;i++)r=qR(r,e[i]);t.push(r)}return t},XR=function(e,t){return null!=e&&t>0?100*(t-e)/t:0},KR=function(e,t,n){return null!=e&&null!=t&&n>0?100*(e-t)/n:0},QR=function(e,t){return null!=e&&null!=t?e-t:0},$R=function(e){var t=[0,0,0,0,0],n=0,r=0,i=0;e.forEach((function(e){var a=e.sessions&&null!==e.sessions.d0SessionsDurationTotal?e.sessions.d0SessionsDurationTotal:void 0,o=e.players?e.players.d0Players:0,s=e.players&&null!==e.players.d0PlayersBelow60s?e.players.d0PlayersBelow60s:void 0,l=e.players&&null!==e.players.d0PlayersBelow180s?e.players.d0PlayersBelow180s:void 0,c=e.players&&null!==e.players.d0PlayersBelow300s?e.players.d0PlayersBelow300s:void 0,u=e.players&&null!==e.players.d0PlayersBelow600s?e.players.d0PlayersBelow600s:void 0,d=e.players&&null!==e.players.d0PlayersBelow900s?e.players.d0PlayersBelow900s:void 0;t[zR.for1Minute]+=s||0,t[zR.for3Minutes]+=l||0,t[zR.for5Minutes]+=c||0,t[zR.for10Minutes]+=u||0,t[zR.for15Minutes]+=d||0,i+=a||0,n+=o,r+=void 0!==s?o:0})),i/=60;var a=r,o=r-t[zR.for1Minute],s=function(e,t){var n=e.findIndex((function(e,n){return n>0&&e>t/2})),r=e[n],i=e[n+1];return i&&Math.abs(r-t/2)<Math.abs(i-t/2)?n:n+1}(t,o),l=function(e,t){for(var n=0,r=0,i=0;i<e.length;i++){var a=(t-e[i])*WR[i];a>=n&&(n=a,r=i)}return r}(t,a),c={month:"short",day:"numeric"},u={day:"numeric"},d=function(e){var t=e.startDate,n=(0,Ro.Z)(e.date),r=n.toLocaleDateString(void 0,c);if(!t)return r;var i=(0,Ro.Z)(t);return i.toLocaleDateString(void 0,n.getMonth()===i.getMonth()?u:c)+"-"+r};return{overview:{viewersCount:n,playersCount:o,bounceRatePercent:a>0?100*t[zR.for1Minute]/a:0,meanPlayedDurationInMinutes:a>0?i/a:0,nearestToMedianDuration:{playersCount:a-t[s],playersPercent:a>0?100*(a-t[s])/a:0,durationInMinutes:WR[s]},greaterDurationPlayerSurface:{playersCount:a-t[l],playersPercent:a>0?100*(a-t[l])/a:0,durationInMinutes:WR[l]}},overTime:e.map((function(e){var t=e.sessions&&null!==e.sessions.d0SessionsDurationTotal?e.sessions.d0SessionsDurationTotal:void 0,n=e.players?e.players.d0Players:0,r=e.players&&null!==e.players.d0PlayersBelow60s?e.players.d0PlayersBelow60s:void 0,i=e.players&&null!==e.players.d0PlayersBelow180s?e.players.d0PlayersBelow180s:void 0,a=e.players&&null!==e.players.d0PlayersBelow300s?e.players.d0PlayersBelow300s:void 0,o=e.players&&null!==e.players.d0PlayersBelow600s?e.players.d0PlayersBelow600s:void 0,s=e.players&&null!==e.players.d0PlayersBelow900s?e.players.d0PlayersBelow900s:void 0;return{timestamp:(0,Ro.Z)(e.date).getTime(),date:d(e),meanPlayedDurationInMinutes:t?t/60/n:0,bounceRatePercent:KR(r,0,n),viewersCount:n,playersCount:QR(n,r),over60sPlayersCount:QR(n,r),over180sPlayersCount:QR(n,i),over300sPlayersCount:QR(n,a),over600sPlayersCount:QR(n,o),over900sPlayersCount:QR(n,s),below60sPlayersCount:QR(r,0),from60sTo180sPlayersCount:QR(i,r),from180sTo300sPlayersCount:QR(a,i),from300sTo600sPlayersCount:QR(o,a),from600sTo900sPlayersCount:QR(s,o),from900sToInfinityPlayersCount:QR(n,s),over0sPlayersPercent:100,over60sPlayersPercent:XR(r,n),over180sPlayersPercent:XR(i,n),over300sPlayersPercent:XR(a,n),over600sPlayersPercent:XR(o,n),over900sPlayersPercent:XR(s,n),below60sPlayersPercent:KR(r,0,n),from60sTo180sPlayersPercent:KR(i,r,n),from180sTo300sPlayersPercent:KR(a,i,n),from300sTo600sPlayersPercent:KR(o,a,n),from600sTo900sPlayersPercent:KR(s,o,n),from900sToInfinityPlayersPercent:KR(n,s,n)}})).sort((function(e,t){return e.timestamp-t.timestamp})),overPlayedDuration:[{duration:0,playersCount:r}].concat(Object.keys(zR).map((function(e){var n=zR[e];return{duration:WR[n],playersCount:r-t[n]}})))}},eF={top:5,bottom:5,right:25,left:0},tF="99%",nF=function(e){return e.toFixed(2)},rF=function(e){return e.toFixed(2)},iF=function(e){return{tooltipContent:{color:e.chart.textColor,padding:10},tickLabel:{fontFamily:e.chart.fontFamily},chartLineDot:{fill:e.chart.dataColor1,strokeWidth:0}}},aF=function(e){var t=e.payload,n=e.label,r=e.customStyle,i=e.labelSuffix;return t?(0,f.jsx)(H.Z,{style:r,background:"light",children:(0,f.jsxs)(_.ak,{children:[(0,f.jsxs)(N.Z,{size:"sub-title",noMargin:!0,children:[n," ",i||""]}),t.length>0&&t.map((function(e,t){var n=e.name,r=e.unit,i=e.value;return(0,f.jsx)(N.Z,{noMargin:!0,children:"".concat(n,": ").concat(Number.isInteger(i)?i.toString():i.toFixed(2)).concat(r?" ".concat(r):"")},t)}))]})}):null},oF=function(e){var t=e.i18n,n=e.chartData,r=e.height,i=e.fontSize,a=c.useContext(j.Z),o=iF(a);return(0,f.jsx)(ER.h,{width:tF,height:r,debounce:1,children:(0,f.jsxs)(MR.T,{data:n.overTime,margin:eF,children:[(0,f.jsx)(LR.u,{name:t._({id:"Viewers"}),type:"monotone",dataKey:"viewersCount",stroke:a.chart.dataColor1,fill:a.chart.dataColor1,fillOpacity:.125,yAxisId:0}),(0,f.jsx)(LR.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"playersCount",stroke:a.chart.dataColor1,fill:a.chart.dataColor1,fillOpacity:.25,yAxisId:0}),(0,f.jsx)(AR.q,{stroke:a.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(OR.K,{dataKey:"date",stroke:a.chart.textColor,style:o.tickLabel,tick:{fontSize:"small"===i?12:16}}),(0,f.jsx)(RR.B,{dataKey:"viewersCount",stroke:a.chart.textColor,style:o.tickLabel,tick:{fontSize:"small"===i?12:16}}),(0,f.jsx)(FR.u,{content:function(e){return aF((0,l.Z)((0,l.Z)({},e),{},{customStyle:o.tooltipContent}))}})]})})},sF=function(e){var t=e.i18n,n=e.chartData,r=e.height,i=(e.fontSize,c.useContext(j.Z)),a=iF(i);return(0,f.jsx)(ER.h,{width:tF,height:r,debounce:1,children:(0,f.jsxs)(DR.w,{data:n.overTime,margin:eF,children:[(0,f.jsx)(NR.x,{name:t._({id:"Bounce rate"}),unit:"%",formatter:nF,type:"monotone",dataKey:"bounceRatePercent",stroke:i.chart.dataColor1,dot:a.chartLineDot,yAxisId:0}),(0,f.jsx)(AR.q,{stroke:i.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(OR.K,{dataKey:"date",stroke:i.chart.textColor,style:a.tickLabel}),(0,f.jsx)(RR.B,{unit:"%",dataKey:"bounceRatePercent",stroke:i.chart.textColor,style:a.tickLabel}),(0,f.jsx)(FR.u,{content:function(e){return aF((0,l.Z)((0,l.Z)({},e),{},{customStyle:a.tooltipContent}))}})]})})},lF=function(e){var t=e.i18n,n=e.chartData,r=e.height,i=(e.fontSize,c.useContext(j.Z)),a=iF(i);return(0,f.jsx)(ER.h,{width:tF,height:r,debounce:1,children:(0,f.jsxs)(DR.w,{data:n.overTime,margin:eF,children:[(0,f.jsx)(NR.x,{name:t._({id:"Mean played time"}),unit:" "+t._({id:"minutes"}),formatter:nF,type:"monotone",dataKey:"meanPlayedDurationInMinutes",stroke:i.chart.dataColor1,dot:a.chartLineDot,yAxisId:0}),(0,f.jsx)(AR.q,{stroke:i.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(OR.K,{dataKey:"date",stroke:i.chart.textColor,style:a.tickLabel}),(0,f.jsx)(RR.B,{unit:" "+t._({id:"min"}),dataKey:"meanPlayedDurationInMinutes",stroke:i.chart.textColor,style:a.tickLabel}),(0,f.jsx)(FR.u,{content:function(e){return aF((0,l.Z)((0,l.Z)({},e),{},{customStyle:a.tooltipContent}))}})]})})},cF=function(e){var t=e.i18n,n=e.chartData,r=e.height,i=(e.fontSize,c.useContext(j.Z)),a=iF(i);return(0,f.jsx)(ER.h,{width:tF,height:r,debounce:1,children:(0,f.jsxs)(MR.T,{data:n.overPlayedDuration,margin:eF,children:[(0,f.jsx)(LR.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"playersCount",stroke:i.chart.dataColor1,fill:i.chart.dataColor1,fillOpacity:.25,yAxisId:0}),(0,f.jsx)(OR.K,{unit:" "+t._({id:"min"}),name:t._({id:"Played time"}),dataKey:"duration",type:"number",domain:[0,WR[WR.length-1]],ticks:WR,stroke:i.chart.textColor,style:a.tickLabel}),(0,f.jsx)(RR.B,{dataKey:"playersCount",stroke:"#f5f5f5",style:a.tickLabel,domain:[0,"dataMax"]}),(0,f.jsx)(AR.q,{stroke:i.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(FR.u,{content:function(e){return aF((0,l.Z)((0,l.Z)({},e),{},{customStyle:a.tooltipContent,labelSuffix:t._({id:"minutes"})}))}})]})})},uF=function(e){var t=e.i18n,n=e.chartData,r=e.height,i=(e.fontSize,c.useContext(j.Z)),a=iF(i);return(0,f.jsx)(ER.h,{width:tF,height:r,debounce:1,children:(0,f.jsxs)(MR.T,{data:n.overTime,margin:eF,children:[(0,f.jsx)(LR.u,{name:t._({id:"Players"}),type:"monotone",dataKey:"over60sPlayersPercent",formatter:rF,unit:"%",stroke:i.chart.dataColor1,fill:i.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(LR.u,{name:t._({id:"Played > 3 minutes"}),type:"monotone",dataKey:"over180sPlayersPercent",formatter:rF,unit:"%",stroke:i.chart.dataColor1,fill:i.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(LR.u,{name:t._({id:"Played > 5 minutes"}),type:"monotone",dataKey:"over300sPlayersPercent",formatter:rF,unit:"%",stroke:i.chart.dataColor1,fill:i.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(LR.u,{name:t._({id:"Played > 10 minutes"}),type:"monotone",dataKey:"over600sPlayersPercent",formatter:rF,unit:"%",stroke:i.chart.dataColor1,fill:i.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(LR.u,{name:t._({id:"Played > 15 minutes"}),type:"monotone",dataKey:"over900sPlayersPercent",formatter:rF,unit:"%",stroke:i.chart.dataColor1,fill:i.chart.dataColor1,fillOpacity:.15,yAxisId:0}),(0,f.jsx)(AR.q,{stroke:i.chart.gridColor,strokeDasharray:"3 3"}),(0,f.jsx)(OR.K,{dataKey:"date",stroke:i.chart.textColor,style:a.tickLabel}),(0,f.jsx)(RR.B,{dataKey:"over60sPlayersPercent",stroke:i.chart.textColor,style:a.tickLabel,unit:"%"}),(0,f.jsx)(FR.u,{content:function(e){return aF((0,l.Z)((0,l.Z)({},e),{},{customStyle:a.tooltipContent}))}})]})})},dF=n(35666),pF=(0,fp.vA)("/publishing","publish-your-game"),fF={loadingSpace:{height:100}},hF=function(e){var t=e.game,n=e.onSeeAll,r=e.gameMetrics,i=e.gameUrl,a=r&&0===r.length,o=(0,be.UQ)().isMobile,u=new Date((new Date).setHours(0,0,0,0)-6048e5).toISOString(),d=c.useState(!1),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useMemo((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return HR;var n=YR(e.sort((function(e,t){return(0,Ro.Z)(t.date).getTime()-(0,Ro.Z)(e.date).getTime()})),t);return $R(n.slice(0,7).map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{startDate:null})})))}(r?r.filter((function(e){return e.date>u})):null)}),[r,u]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(yR,{widgetSize:"twoThirds",minHeight:!0,title:(0,f.jsx)(w.Trans,{id:"Analytics"}),topRightAction:(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See all"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"}),onClick:n,primary:!0}),widgetName:"analytics",children:(0,f.jsx)(_.ep,{expand:!0,noColumnMargin:!0,noMargin:!0,children:r?a?i?(0,f.jsxs)(_.ak,{noMargin:!0,alignItems:o?"stretch":"flex-start",noOverflowParent:!0,children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(N.Z,{noMargin:!0,color:"secondary",children:(0,f.jsx)(w.Trans,{id:"No data to show yet. Share your game creator profile with more people to get more players!"})}),(0,f.jsx)(WO,{display:"column",url:i})]}):(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"<0>Share your game</0> and start collecting data from your players to better understand them.",components:[(0,f.jsx)(pe.Z,{href:pF,onClick:function(){return y.ZP.openExternalURL(pF)}})]})})]}):(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(M.x1,{alignItems:"center",justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Sessions"})}),(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(gM.Z,{fontSize:"small"}),label:(0,f.jsx)(w.Trans,{id:"Get more players"}),onClick:function(){return g(!0)}})]}),(0,f.jsx)(oF,{i18n:t,height:200,chartData:m,fontSize:"small"})]}):(0,f.jsx)("div",{style:fF.loadingSpace})})})}}),h&&t&&(0,f.jsx)(dF.Z,{game:t,onClose:function(){return g(!1)}})]})},gF=(0,fp.vA)("/all-features/leaderboards"),mF=(0,fp.vA)("/all-features/multiplayer"),xF=function(e){var t=e.leaderboards,n=e.onSeeAllLeaderboards,r=e.onSeeLobbyConfiguration,i=e.displayUnlockMoreLeaderboardsCallout,a=(0,be.UQ)().isMobile,o=c.useContext(mo.J).openSubscriptionDialog;return(0,f.jsx)(yR,{widgetSize:"full",title:(0,f.jsx)(w.Trans,{id:"Player services"}),widgetName:"services",children:(0,f.jsxs)(_.ep,{noColumnMargin:!0,noMargin:!0,expand:!0,children:[(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Game leaderboards"})}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See more"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"}),onClick:n,primary:!0})]}),t&&0!==t.length?(0,f.jsxs)(_.ep,{noMargin:!0,noColumnMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)("b",{children:t.length})}),"\xa0",(0,f.jsx)(N.Z,{color:"secondary",children:1===t.length?(0,f.jsx)(w.Trans,{id:"leaderboard."}):(0,f.jsx)(w.Trans,{id:"leaderboards."})})]}),i&&(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Get more leaderboards"}),onClick:function(){return o({analyticsMetadata:{reason:"Leaderboard count per game limit reached",recommendedPlanId:"gdevelop_silver",placementId:"leaderboards"}})}})]}):(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Learn how to use <0>leaderboards</0> on GDevelop.",components:[(0,f.jsx)(pe.Z,{href:gF,onClick:function(){return y.ZP.openExternalURL(gF)}})]})})]}),a?(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(or.Z,{orientation:"horizontal"})}):(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsx)(M.hS,{}),(0,f.jsx)(or.Z,{orientation:"vertical"}),(0,f.jsx)(M.hS,{})]}),(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Multiplayer lobbies"})}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See more"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"}),onClick:r,primary:!0})]}),(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Learn how to make <0>multiplayer games</0> with GDevelop.",components:[(0,f.jsx)(pe.Z,{href:mF,onClick:function(){return y.ZP.openExternalURL(mF)}})]})})]})]})})},vF=n(56809),bF=function(e){var t=e.value,n=e.label;return(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(M.x1,{justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{size:"body2",children:n}),(0,f.jsx)(N.Z,{size:"body2",children:(0,KZ.R)(t,1)})]}),(0,f.jsx)(M.x1,{noMargin:!0,expand:!0,children:(0,f.jsx)(Ym.Z,{variant:"determinate",value:10*t,style:{height:8,borderRadius:8}})})]})},CF=function(e,t){var n=c.useState(e),r=(0,s.Z)(n,2),i=r[0],l=r[1],u=c.useState(null),d=(0,s.Z)(u,2),p=d[0],f=d[1],h=(0,sr.N)(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,i,o,s=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,r=s.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=s[o];return e.next=4,t.apply(void 0,[n].concat(i));case 4:l(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error while updating optimistic state: ",e.t0);case 10:return e.prev=10,f(null),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),500);return[null!==p?p:i,function(e,t){f(e),h(e,t)},l]},jF=n(42352),yF=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,f.jsx)("path",{d:"M8.66718 4.49998C8.94332 4.49998 9.16718 4.72384 9.16718 4.99998V7.99998C9.16718 8.27613 8.94332 8.49998 8.66718 8.49998C8.39103 8.49998 8.16718 8.27613 8.16718 7.99998V4.99998C8.16718 4.72384 8.39103 4.49998 8.66718 4.49998Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M8.66715 11.3333C9.03534 11.3333 9.33382 11.0348 9.33382 10.6667C9.33382 10.2985 9.03534 9.99998 8.66715 9.99998C8.29896 9.99998 8.00049 10.2985 8.00049 10.6667C8.00049 11.0348 8.29896 11.3333 8.66715 11.3333Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.53068 1.41329L11.4067 2.31127L13.2785 3.21815C13.8233 3.48208 14.2192 3.97853 14.3553 4.56835L14.8229 6.59499L15.2809 8.62383C15.4142 9.21428 15.2729 9.83334 14.8966 10.3075L13.6037 11.9367L12.303 13.5597C11.9245 14.0321 11.3524 14.3076 10.7471 14.309L8.6672 14.314L6.58731 14.309C5.982 14.3076 5.4099 14.0321 5.03137 13.5597L3.73071 11.9367L2.43779 10.3075C2.06151 9.83334 1.92021 9.21429 2.0535 8.62383L2.5115 6.59499L2.97914 4.56835C3.11524 3.97853 3.51114 3.48208 4.05589 3.21815L5.92766 2.31127L7.80372 1.41329C8.34971 1.15195 8.98469 1.15195 9.53068 1.41329ZM9.09894 2.31529L10.9707 3.2112L10.975 3.21326L12.8425 4.11808C13.1149 4.25005 13.3128 4.49827 13.3809 4.79318L13.8474 6.81519L13.8485 6.81982L14.3054 8.84403C14.3721 9.13926 14.3014 9.44879 14.1133 9.68586L12.8233 11.3114L12.8204 11.3151L11.5227 12.9344C11.3334 13.1706 11.0474 13.3083 10.7447 13.309L8.66958 13.314H8.66482L6.58969 13.309C6.28703 13.3083 6.00098 13.1706 5.81172 12.9344L4.51403 11.3151L4.51106 11.3114L3.2211 9.68586C3.03296 9.44879 2.96231 9.13926 3.02896 8.84403L3.48643 6.81751L3.95354 4.79318C4.02159 4.49827 4.21954 4.25005 4.49191 4.11808L6.36154 3.21224L8.23546 2.31529C8.50845 2.18462 8.82594 2.18462 9.09894 2.31529Z",fill:"currentColor"})]}))})),ZF=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.963 3.83337C10.2864 3.83337 9.63869 4.10382 9.16307 4.5834L9.02164 4.72592C8.92777 4.82052 8.80001 4.87373 8.66674 4.87374C8.53347 4.87375 8.40571 4.82055 8.31183 4.72595L8.17039 4.58344C7.17841 3.58373 5.56241 3.58369 4.57042 4.58341C3.58786 5.57362 3.58785 7.17246 4.57042 8.1627L8.46111 12.0836C8.56696 12.1903 8.75051 12.1953 8.86292 12.0926C9.75598 11.2564 10.6034 10.3815 11.4592 9.4979C11.8894 9.05377 12.3217 8.60744 12.763 8.16269C13.2354 7.68675 13.5002 7.04316 13.5002 6.37305C13.5002 5.70294 13.2355 5.05945 12.7631 4.58347C12.2874 4.10392 11.6396 3.83337 10.963 3.83337ZM8.66681 3.68075C9.3039 3.13641 10.1172 2.83337 10.963 2.83337C11.9066 2.83337 12.8097 3.21053 13.4729 3.87911C14.1315 4.5427 14.5002 5.43949 14.5002 6.37305C14.5002 7.30669 14.1314 8.20357 13.4728 8.86712C13.0499 9.29331 12.6267 9.73012 12.2008 10.1698C11.3339 11.0647 10.4555 11.9714 9.54472 12.8241L9.54205 12.8266C9.03528 13.2942 8.23752 13.278 7.75127 12.788L3.86058 8.86706C2.49114 7.48694 2.49113 5.25915 3.86058 3.87905C5.17468 2.55472 7.27431 2.48862 8.66681 3.68075Z",fill:"currentColor"})}))})),kF={textComment:{whiteSpace:"pre-wrap",overflowWrap:"anywhere"},backgroundText:{padding:0,textAlign:"left"},readIcon:{fontSize:32,display:"flex",alignItems:"center"},rateIcon:{fontSize:20,display:"flex",alignItems:"center"},rateIconsContainer:{borderRadius:16,padding:"2px 4px",display:"flex",alignItems:"center",gap:2}},wF=function(e){return e?1===e.version?[{key:"rating-sound",label:(0,f.jsx)(w.Trans,{id:"Sound"}),value:e.sound},{key:"rating-visuals",label:(0,f.jsx)(w.Trans,{id:"Visuals"}),value:e.visuals},{key:"rating-fun",label:(0,f.jsx)(w.Trans,{id:"Fun"}),value:e.fun},{key:"rating-ease-of-use",label:(0,f.jsx)(w.Trans,{id:"Ease of use"}),value:e.easeOfUse}]:void 0:null},TF=function(e){var t=e.comment,n=e.buildProperties,r=e.authenticatedUser,i=e.onCommentUpdated,l=r.getAuthorizationHeader,u=r.profile,d=wF(t.ratings),p=c.useContext(j.Z),h=c.useContext(zr.Z).openUserPublicProfile,g=t.playerId,m=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,r){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,TR.uA)(l,u.id,{gameId:t.gameId,commentId:t.id,processed:n});case 5:o=e.sent,i(o),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to update comment: ",e.t0),(0,bi.gR)({message:r._({id:"Unable to change read status of feedback."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"feedback-card-set-processed-error"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),x=CF(!!t.processedAt,m),v=(0,s.Z)(x,2),b=v[0],C=v[1],y=(0,TR.hO)(t),Z=CF(t.qualityRatingPerRole&&t.qualityRatingPerRole.owner||null,function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,r){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,TR.uA)(l,u.id,{gameId:t.gameId,commentId:t.id,qualityRating:n||void 0});case 5:o=e.sent,i(o),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to update comment: ",e.t0),(0,bi.gR)({message:r._({id:"Unable to change quality rating of feedback."})+" "+r._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"feedback-card-set-quality-rating-error"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),k=(0,s.Z)(Z,2),T=k[0],S=k[1];return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(DO.Z,{disabled:b,cardCornerAction:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[y&&(0,f.jsxs)(H.Z,{variant:"outlined",background:"medium",style:kF.rateIconsContainer,children:[(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Rank this comment as great"},onClick:function(){return S("great",r)},children:(0,f.jsx)("div",{style:kF.rateIcon,children:(0,f.jsx)(ZF,{htmlColor:"great"===T?p.message.valid:void 0,fontSize:"inherit"})})}),(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Rank this comment as good"},onClick:function(){return S("good",r)},children:(0,f.jsx)("div",{style:kF.rateIcon,children:(0,f.jsx)(rM,{htmlColor:"good"===T?p.message.valid:void 0,fontSize:"inherit"})})}),(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Rank this comment as bad"},onClick:function(){return S("bad",r)},children:(0,f.jsx)("div",{style:kF.rateIcon,children:(0,f.jsx)(iM,{htmlColor:"bad"===T?p.message.warning:void 0,fontSize:"inherit"})})}),(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Report this comment as abusive, harmful or spam"},onClick:function(){return S("harmful",r)},children:(0,f.jsx)("div",{style:kF.rateIcon,children:(0,f.jsx)(yF,{htmlColor:"harmful"===T?p.message.error:void 0,fontSize:"inherit"})})})]}),(0,f.jsx)($.Z,{size:"small",tooltip:b?{id:"Mark as unread"}:{id:"Mark as read"},onClick:function(){return C(!b,r)},children:(0,f.jsx)("div",{style:kF.readIcon,children:b?(0,f.jsx)(jF.Z,{htmlColor:p.message.valid,fontSize:"inherit"}):(0,f.jsx)(xo.Z,{fontSize:"inherit"})})})]}),header:(0,f.jsx)(Io.Z,{style:kF.backgroundText,children:(0,f.jsx)(w.Trans,{id:"{0}",values:{0:r.date(t.createdAt)}})}),children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"start",children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[n&&(0,f.jsxs)(N.Z,{color:"primary",children:[n.name||(0,TR.GA)(n.id),n.isDeleted&&(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(w.Trans,{id:"(deleted)"})]})]}),g?(0,f.jsx)(pe.Z,{onClick:function(){return h({userId:g})},href:"#",children:(0,f.jsx)(N.Z,{noMargin:!0,color:"inherit",children:t.playerName||"Anonymous player"})}):(0,f.jsx)(Io.Z,{style:kF.backgroundText,children:t.playerName||"Anonymous player"}),t.contact&&(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(Io.Z,{style:kF.backgroundText,children:(0,f.jsx)(w.Trans,{id:"Contact:"})}),(0,f.jsx)(N.Z,{allowSelection:!0,children:t.contact})]})]})}),(0,f.jsx)(M.LZ,{}),d&&(0,f.jsx)(_.ep,{noColumnMargin:!0,expand:!0,children:d.map((function(e){return(0,f.jsxs)(M.x1,{expand:!0,noMargin:!0,children:[(0,f.jsx)(bF,{label:e.label,value:e.value}),(0,f.jsx)(M.LZ,{})]},e.key)}))}),(0,f.jsx)(M.hS,{}),(0,f.jsx)(N.Z,{style:kF.textComment,allowSelection:!0,children:t.text})]})})})}})},SF=function(e){var t=e.feedbacks;if(0===t.length)return null;var n=t.map((function(e){return e.ratings})).filter(Boolean),r=n.reduce((function(e,t){return t?{sound:e.sound+t.sound,visuals:e.visuals+t.visuals,fun:e.fun+t.fun,easeOfUse:e.easeOfUse+t.easeOfUse,version:1}:e}),{sound:0,visuals:0,fun:0,easeOfUse:0,version:1}),i={sound:r.sound/n.length,visuals:r.visuals/n.length,fun:r.fun/n.length,easeOfUse:r.easeOfUse/n.length,version:1},a=wF(i);return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsx)(DO.Z,{background:"dark",children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"start",children:(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(N.Z,{color:"primary",size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Average user feedback"})})})}),(0,f.jsx)(M.LZ,{}),a&&(0,f.jsx)(_.ep,{noColumnMargin:!0,expand:!0,children:a.map((function(e){return(0,f.jsxs)(M.x1,{expand:!0,noMargin:!0,children:[(0,f.jsx)(bF,{label:e.label,value:e.value}),(0,f.jsx)(M.LZ,{})]},e.key)}))})]})})}})},PF=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 3C0 2.58579 0.335786 2.25 0.75 2.25H3.25C3.66421 2.25 4 2.58579 4 3C4 3.41421 3.66421 3.75 3.25 3.75H0.75C0.335786 3.75 0 3.41421 0 3Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3C8 2.58579 8.33579 2.25 8.75 2.25H15.25C15.6642 2.25 16 2.58579 16 3C16 3.41421 15.6642 3.75 15.25 3.75H8.75C8.33579 3.75 8 3.41421 8 3Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 1.5C5.17157 1.5 4.5 2.17157 4.5 3C4.5 3.82843 5.17157 4.5 6 4.5C6.82843 4.5 7.5 3.82843 7.5 3C7.5 2.17157 6.82843 1.5 6 1.5ZM3 3C3 1.34315 4.34315 0 6 0C7.65685 0 9 1.34315 9 3C9 4.65685 7.65685 6 6 6C4.34315 6 3 4.65685 3 3Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 11C0 10.5858 0.335786 10.25 0.75 10.25H8.25C8.66421 10.25 9 10.5858 9 11C9 11.4142 8.66421 11.75 8.25 11.75H0.75C0.335786 11.75 0 11.4142 0 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 11C13 10.5858 13.3358 10.25 13.75 10.25H15.25C15.6642 10.25 16 10.5858 16 11C16 11.4142 15.6642 11.75 15.25 11.75H13.75C13.3358 11.75 13 11.4142 13 11Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 9.5C10.1716 9.5 9.5 10.1716 9.5 11C9.5 11.8284 10.1716 12.5 11 12.5C11.8284 12.5 12.5 11.8284 12.5 11C12.5 10.1716 11.8284 9.5 11 9.5ZM8 11C8 9.34315 9.34315 8 11 8C12.6569 8 14 9.34315 14 11C14 12.6569 12.6569 14 11 14C9.34315 14 8 12.6569 8 11Z",fill:"currentColor"})]}))})),IF={selectFieldContainer:{minWidth:200,maxWidth:350,width:"100%"}},EF=function(e,t,n){return n[e]?n[e].push(t):n[e]=[t],n},MF=function(e){var t=e.i18n,n=e.authenticatedUser,i=e.game,l=c.useRef(null),u=n.getAuthorizationHeader,d=n.profile,p=c.useState(!1),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=c.useState(!0),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=c.useState(null),y=(0,s.Z)(j,2),Z=y[0],k=y[1],S=c.useState(null),I=(0,s.Z)(S,2),E=I[0],L=I[1],A=c.useState(""),O=(0,s.Z)(A,2),R=O[0],F=O[1],D=c.useState(!1),B=(0,s.Z)(D,2),U=B[0],V=B[1],H=c.useState(!1),z=(0,s.Z)(H,2),W=z[0],G=z[1],Y=c.useState(1),q=(0,s.Z)(Y,2),J=q[0],X=q[1],K=function(e,t,n,r,i,a){if(!t)return null;var o=t;return"game-only"===i?o=t.filter((function(e){return!e.buildId})):i&&(o=t.filter((function(e){return e.buildId===i}))),n?o.filter((function(e){return!e.processedAt})):o}(0,Z,g,0,R),Q=""!==R&&"game-only"!==R,ee=K?function(e,t,n,r){var i=r.build;return r.date,t.slice(20*(n-1),20*n).reduce((function(t,n){if(i)return n.buildId?EF(n.buildId,n,t):EF("game-only",n,t);var r=e.date(n.createdAt,{month:"long",year:"numeric"});return EF(r,n,t)}),{})}(t,K,J,b?{build:!1,date:!0}:{build:!0,date:!1}):null,te=Math.ceil(K?K.length/20:1),ne=c.useCallback((function(e){X(e<1?1:e>te?te:e)}),[X,te]),re=function(e){var t=(0,TR.GA)(e);if(!E)return t;var n=E[e].name;return n?"".concat(n.substring(0,15)).concat(n.length>=15?"...":""," (").concat(t,")"):t},ie=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,r,o,l,c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(!1),t=n.getAuthorizationHeader,r=n.profile){e.next=5;break}return V(!0),e.abrupt("return");case 5:return e.prev=5,e.next=8,Promise.all([(0,TR.BM)(t,r.id,{gameId:i.id,type:"FEEDBACK"}),(0,SR.BY)(t,r.id,i.id)]);case 8:o=e.sent,l=(0,s.Z)(o,2),c=l[0],u=l[1],k(c),d=u.reduce((function(e,t){return e[t.id]=t,e}),{}),L(d),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),V(!0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])}))),[n,i]),ae=function(e){Z&&k((function(t){if(!t)return t;var n=(0,r.Z)(t),i=n.findIndex((function(t){return t.id===e.id}));return-1!==i?(n[i]=e,n):void 0}))},oe=function(e){if(e.buildId){if(!E)return{id:e.buildId};var t=E[e.buildId];return t?{id:t.id,name:t.name,isDeleted:!1}:{id:e.buildId,isDeleted:!0}}};c.useEffect((function(){ie()}),[ie]);var se=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&!W&&K){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,G(!0),e.next=6,Promise.all(K.filter((function(e){return!e.processedAt})).map((function(e){return(0,TR.uA)(u,d.id,{gameId:e.gameId,commentId:e.id,processed:!0})})));case 6:ie(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Unable to update one of the comments: ",e.t0),(0,bi.gR)({message:t._({id:"Unable to mark one of the feedback as read."})+" "+t._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"all-feedback-card-set-processed-error"});case 13:return e.prev=13,G(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}();return c.useEffect((function(){X(1)}),[b,g,R]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:(0,f.jsxs)(M.x1,{children:[!n.authenticated&&(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"You need to login first to see your game feedbacks."})}),n.authenticated&&!K&&!U&&(0,f.jsx)(Oe.Z,{}),n.authenticated&&U&&(0,f.jsx)(_r.Z,{onRetry:ie,children:(0,f.jsx)(w.Trans,{id:"An error occurred while retrieving feedbacks for this game."})}),n.authenticated&&K&&(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,children:[(0,f.jsxs)(_.ep,{justifyContent:"space-between",noColumnMargin:!0,children:[(0,f.jsx)(M.sg,{justifyContent:"center",children:(0,f.jsx)(_.pJ,{noMargin:!0,alignItems:"center",children:(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"This is all the feedback received on {0} coming from gd.games.",values:{0:i.gameName}})})})}),E&&(0,f.jsx)(M.sg,{children:(0,f.jsx)(M.x1,{children:(0,f.jsx)("div",{style:IF.selectFieldContainer,children:(0,f.jsxs)(Hn.Z,{fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Show"}),value:R,onChange:function(e,t,n){F(n)},children:[(0,f.jsx)(P.Z,{value:"",label:{id:"All exports"}},"all"),(0,f.jsx)(P.Z,{value:"game-only",label:{id:"On game page only"}},"game-only"),Object.keys(E).map((function(e){return(0,f.jsx)(P.Z,{value:e,label:re(e)},e)}))]})})})})]}),(0,f.jsx)(_.ak,{expand:!0,noMargin:!0,children:!!Z&&Z.length>0&&(0,f.jsx)(SF,{feedbacks:Z})}),0===K.length&&(0,f.jsx)(f.Fragment,{children:g?(0,f.jsxs)(_.pJ,{alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(Ae.Z,{children:Q?(0,f.jsx)(w.Trans,{id:"You don't have any unread feedback for this export."}):(0,f.jsx)(w.Trans,{id:"You don't have any unread feedback for this game."})}),(0,f.jsx)(T.Z,{onClick:function(){return m(!1)},label:(0,f.jsx)(w.Trans,{id:"Show all feedbacks"})})]}):(0,f.jsx)(Ae.Z,{children:Q?(0,f.jsx)(w.Trans,{id:"You don't have any feedback for this export."}):(0,f.jsx)(w.Trans,{id:"You don't have any feedback for this game."})})}),0!==K.length&&!!ee&&(0,f.jsx)(_.ak,{expand:!0,noMargin:!0,children:Object.keys(ee).map((function(e,t){var r=b?e:function(e){if("game-only"===e)return"";var t=(0,TR.GA)(e);if(!E)return t;var n=E[e];return n?n.name?"".concat(n.name," (").concat(t,")"):t:(0,f.jsxs)(f.Fragment,{children:["".concat(t," "),(0,f.jsx)(w.Trans,{id:"(deleted)"})]})}(e);return(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(M.sg,{children:(0,f.jsxs)(N.Z,{size:"block-title",children:[r,r?" - ":" ",1===ee[e].length?(0,f.jsx)(w.Trans,{id:"1 review"}):(0,f.jsx)(w.Trans,{id:"{0} reviews",values:{0:ee[e].length}})]})}),0===t&&(0,f.jsxs)(M.x1,{alignItems:"center",children:[(0,f.jsxs)(M.x1,{noMargin:!0,expand:!0,alignItems:"center",justifyContent:"flex-end",children:[(0,f.jsx)($.Z,{tooltip:{id:"Previous page"},onClick:function(){return ne(J-1)},disabled:1===J,size:"small",children:(0,f.jsx)(Ca.Z,{})}),(0,f.jsx)(N.Z,{noMargin:!0,style:{opacity:1,fontVariantNumeric:"tabular-nums"},children:1===te?1:"".concat(J,"/").concat(te)}),(0,f.jsx)($.Z,{tooltip:{id:"Next page"},onClick:function(){return ne(J+1)},disabled:J>=te,size:"small",children:(0,f.jsx)(ot.Z,{})})]}),(0,f.jsx)($.Z,{disabled:W,onClick:function(e){return function(e){l.current&&l.current.open(e.clientX,e.clientY)}(e)},children:W?(0,f.jsx)(GI.Z,{size:20}):(0,f.jsx)(PF,{fontSize:"small"})})]})]}),ee[e].map((function(e,t){return(0,f.jsx)(TF,{comment:e,buildProperties:oe(e),authenticatedUser:n,onCommentUpdated:ae},e.id)}))]},e)}))})]})]})}),(0,f.jsx)(ns.Z,{ref:l,buildMenuTemplate:function(e){return[{label:e._({id:"Sort by most recent"}),click:function(){return C(!b)},checked:b,type:"checkbox"},{label:e._({id:"Show unread feedback only"}),click:function(){return m(!g)},checked:g,type:"checkbox"},{type:"separator"},{label:e._({id:"Mark all as solved"}),click:function(){return se(e)}}]}})]})},LF=n(86335),AF=n(21762),OF=n(81840),RF=n(58582),FF={borderRadius:8,padding:8},DF=function(e){var t=e.game,n=e.marketingPlan,r=e.gameFeaturings,i=e.fetchGameFeaturings,a=c.useContext(j.Z),o=c.useState(!1),u=(0,s.Z)(o,2),d=u[0],p=u[1],h=c.useMemo((function(){return r?r.filter((function(e){return e.expiresAt>Date.now()/1e3})):null}),[r]),g=(0,OF.Z)({game:t,activeGameFeaturings:h,fetchGameFeaturings:i}).onPurchaseMarketingPlan,m=(0,RF.Ib)(n,h),x=m?(0,RF.ap)(t,n):[];return(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},FF),{},{backgroundColor:a.credits.backgroundColor,color:a.credits.color}),children:[(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(N.Z,{size:"block-title",color:"inherit",children:(0,f.jsx)(w.Trans,{id:"Get more players on your game"})}),(0,f.jsx)(H.Z,{background:"dark",children:(0,f.jsx)(AF.Z,{gameFeaturings:r,marketingPlan:n,onPurchase:function(e){return g(e,n)},isPlanActive:m,requirementsErrors:x,hideBorder:!0})}),(0,f.jsx)(N.Z,{size:"body-small",color:"inherit",children:(0,f.jsx)(w.Trans,{id:"Make your game visible to the GDevelop community and to the world with <0>Marketing Boosts</0>.",components:[(0,f.jsx)(pe.Z,{onClick:function(){return p(!0)},href:"#"})]})})]}),d&&t&&(0,f.jsx)(dF.Z,{game:t,onClose:function(){return p(!1)}})]})},NF=300,_F=function(e){var t=e.game,n=e.recommendedMarketingPlan,r=e.gameFeaturings,i=e.fetchGameFeaturings,u=c.useContext($n.ZP),d=u.getAuthorizationHeader,p=u.profile,h=c.useState(null),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useMemo((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!e)return{yearChartData:HR,monthChartData:HR};var n=YR(e.sort((function(e,t){return(0,Ro.Z)(t.date).getTime()-(0,Ro.Z)(e.date).getTime()})),t);return{yearChartData:$R(JR(n)),monthChartData:$R(n.slice(0,30).map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{startDate:null})})))}}(m)}),[m]),b=v.yearChartData,C=v.monthChartData,j=c.useState("month"),y=(0,s.Z)(j,2),Z=y[0],k=y[1],T="year"===Z?b:C,S=c.useState(null),I=(0,s.Z)(S,2),E=I[0],L=I[1],A=c.useState(!1),O=(0,s.Z)(A,2),R=O[0],F=O[1],D=(0,_R.Z)((0,VR.Z)(new Date,364),{representation:"date"}),B=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return n=p.id,F(!0),L(null),e.prev=5,e.next=8,IR(d,n,t.id,D);case 8:r=e.sent,x(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Unable to load game rolling metrics:",e.t0),L(e.t0);case 16:F(!1);case 17:case"end":return e.stop()}}),e,null,[[5,12]])}))),[d,p,t,D]);if(c.useEffect((function(){B()}),[B]),R)return(0,f.jsx)(Oe.Z,{});var U=n&&r&&i;return(0,f.jsx)(w.I18n,{children:function(e){var a=e.i18n;return E?(0,f.jsxs)(_r.Z,{onRetry:function(){B()},children:[(0,f.jsx)(w.Trans,{id:"There was an issue getting the game analytics."})," ",(0,f.jsx)(w.Trans,{id:"Verify your internet connection or try again later."})]}):(0,f.jsxs)(_.ak,{expand:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsxs)(Hn.Z,{value:Z,onChange:function(e,t,n){k(n)},disableUnderline:!0,children:[(0,f.jsx)(P.Z,{value:"month",label:{id:"Month"}},"month"),(0,f.jsx)(P.Z,{value:"year",label:{id:"Year"}},"year")]})}),(0,f.jsxs)(xR.Z,{container:!0,spacing:2,children:[(0,f.jsx)(xR.Z,{item:!0,xs:12,sm:U?7:12,md:U?8:12,children:(0,f.jsxs)(M.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsxs)(N.Z,{size:"block-title",align:"center",children:[(0,f.jsx)(w.Trans,{id:"{0} sessions",values:{0:T.overview.playersCount}}),(0,f.jsx)(re.ZP,{style:{verticalAlign:"bottom"},title:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Number of people who launched the game. Viewers are considered players when they stayed at least 60 seconds including loading screens."})}),children:(0,f.jsx)(cp.Z,{})})]}),(0,f.jsx)(oF,{chartData:T,height:NF,i18n:a})]})}),n&&r&&i&&(0,f.jsx)(xR.Z,{item:!0,xs:12,sm:5,md:4,children:(0,f.jsx)(DF,{fetchGameFeaturings:i,gameFeaturings:r,marketingPlan:n,game:t})}),(0,f.jsx)(xR.Z,{item:!0,xs:12,sm:6,children:(0,f.jsxs)(M.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,f.jsxs)(N.Z,{size:"block-title",align:"center",children:[(0,f.jsx)(w.Trans,{id:"{0}% bounce rate",values:{0:Math.round(T.overview.bounceRatePercent)}}),(0,f.jsx)(re.ZP,{style:{verticalAlign:"bottom"},title:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Percentage of people who leave before 60 seconds including loading screens."})}),children:(0,f.jsx)(cp.Z,{})})]}),(0,f.jsx)(sF,{chartData:T,height:NF,i18n:a})]})}),(0,f.jsx)(xR.Z,{item:!0,xs:12,sm:6,children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(N.Z,{size:"block-title",align:"center",children:[(0,f.jsx)(w.Trans,{id:"{0} minutes per player",values:{0:Math.round(T.overview.meanPlayedDurationInMinutes)}}),(0,f.jsx)(re.ZP,{style:{verticalAlign:"bottom"},title:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Is the average time a player spends in the game."})}),children:(0,f.jsx)(cp.Z,{})})]}),(0,f.jsx)(lF,{chartData:T,height:NF,i18n:a})]})}),(0,f.jsx)(xR.Z,{item:!0,xs:12,sm:6,children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(N.Z,{size:"block-title",align:"center",children:[(0,f.jsx)(w.Trans,{id:"{0} players with more than {1} minutes",values:{0:T.overview.greaterDurationPlayerSurface.playersCount,1:T.overview.greaterDurationPlayerSurface.durationInMinutes}}),(0,f.jsx)(re.ZP,{style:{verticalAlign:"bottom"},title:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Average of players still active after 15 minutes. This graph shows how long players stay in the game after X minutes. It helps to see if the players quit quickly or keep playing for a while."})}),children:(0,f.jsx)(cp.Z,{})})]}),(0,f.jsx)(cF,{chartData:T,height:NF,i18n:a})]})}),(0,f.jsx)(xR.Z,{item:!0,xs:12,sm:6,children:(0,f.jsxs)(M.sg,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(N.Z,{size:"block-title",align:"center",children:[(0,f.jsx)(w.Trans,{id:"{0} % of players with more than {1} minutes",values:{0:Math.round(T.overview.nearestToMedianDuration.playersPercent),1:T.overview.nearestToMedianDuration.durationInMinutes}}),(0,f.jsx)(re.ZP,{style:{verticalAlign:"bottom"},title:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Shows how long players stay in the game over time. The percentages are showing people playing for more than 3, 5, 10, and 15 minutes based on the best day. A higher value means better player retention on the day. This helps you understand when players are most engaged \u2014 and when they drop off quickly."})}),children:(0,f.jsx)(cp.Z,{})})]}),(0,f.jsx)(uF,{chartData:T,height:NF,i18n:a})]})})]})]})}})},BF=n(84340),UF=function(e){var t=e.gameId,n=c.useState(!0),r=(0,s.Z)(n,2),i=r[0],l=r[1],u=c.useState(null),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useState(!1),m=(0,s.Z)(g,2),x=m[0],v=m[1],b=c.useState(2),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=c.useState(1),k=(0,s.Z)(Z,2),T=k[0],S=k[1],I=c.useState(!1),E=(0,s.Z)(I,2),L=E[0],A=E[1],O=c.useContext($n.ZP),R=O.getAuthorizationHeader,F=O.profile,D=O.limits,B=c.useState(null),U=(0,s.Z)(B,2),V=U[0],H=U[1],z=c.useState(null),W=(0,s.Z)(z,2),Y=W[0],q=W[1],J=F?F.id:null,X=D?D.capabilities.multiplayer.maxPlayersPerLobby:4;c.useEffect((function(){if(V)return y(V.maxPlayers),S(V.minPlayers),void A(V.canJoinAfterStart);D&&y(D.capabilities.multiplayer.maxPlayersPerLobby)}),[V,D]);var K=c.useMemo((function(){var e=new Array(X-1).fill(0).map((function(e,t){return(0,f.jsx)(P.Z,{value:t+2,label:(t+2).toString(),shouldNotTranslate:!0},t)}));return X<8&&e.push((0,f.jsx)(P.Z,{value:X+1,label:{id:"{0}+ (Available with a subscription)",values:{0:(X+1).toString()}},disabled:!0},"more")),e}),[X]),Q=c.useMemo((function(){return new Array(j).fill(0).map((function(e,t){return(0,f.jsx)(P.Z,{value:t+1,label:(t+1).toString(),shouldNotTranslate:!0},t)}))}),[j]),$=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=3;break}return H(null),e.abrupt("return");case 3:return l(!0),h(null),e.prev=5,e.next=8,(0,TR.s3)(R,J,{gameId:t});case 8:n=e.sent,H(n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),h((0,f.jsx)(w.Trans,{id:"An error happened when retrieving the game's configuration. Please check your internet connection or try again later."})),console.error("An error occurred while fetching lobby configuration: ",e.t0);case 16:return e.prev=16,l(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,12,16,19]])}))),[t,J,R]);c.useEffect((function(){$()}),[$]);var ee=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J&&j){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(!0),e.next=6,(0,TR.iv)(R,J,{gameId:t,maxPlayers:j,minPlayers:T,canJoinAfterStart:L});case 6:n=e.sent,H(n),q((0,f.jsx)(w.Trans,{id:"Game configuration has been saved"})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("An error occurred while updating lobby configuration: ",e.t0),q((0,f.jsx)(w.Trans,{id:"\u274c Game configuration could not be saved, please try again later."}));case 15:return e.prev=15,v(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,11,15,18]])}))),[R,t,J,j,T,L]),te=V&&(V.maxPlayers!==j||V.minPlayers!==T||V.canJoinAfterStart!==L);return i?(0,f.jsx)(Oe.Z,{}):p?(0,f.jsx)(_r.Z,{onRetry:$,children:p}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Lobby configuration"})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(Hn.Z,{value:T,onChange:function(e,t,n){var r=parseInt(n,10);Number.isNaN(r)||S(r)},fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Minimum number of players to start the lobby"}),children:Q})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(Hn.Z,{value:j,onChange:function(e,t,n){var r=parseInt(n,10);if(!Number.isNaN(r)){var i=Math.min(X,Math.max(2,r));y(i),i<T&&S(i)}},fullWidth:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Maximum number of players per lobby"}),children:K})}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(gg.Z,{label:(0,f.jsx)(w.Trans,{id:"Allow players to join after the game has started"}),checked:L,onCheck:function(e,t){A(t)}})}),(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)($r.Z,{isLoading:x,children:(0,f.jsx)(G.Z,{disabled:x||!te,label:(0,f.jsx)(w.Trans,{id:"Save"}),onClick:ee,primary:!0})})})]}),(0,f.jsx)(Ws.Z,{message:Y,visible:!!Y,hide:function(){return q(null)}})]})},VF={display:"flex",alignItems:"center"},HF=function(e){var t=e.builds,n=e.onSeeAllBuilds,r=c.useContext(j.Z),i=t?t.filter((function(e){return"pending"===e.status})):null;return(0,f.jsx)(yR,{widgetSize:"full",title:(0,f.jsx)(w.Trans,{id:"Exports"}),topRightAction:(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See all"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"}),onClick:n,primary:!0}),widgetName:"builds",children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[i&&i.length>0&&(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},VF),{},{color:r.statusIndicator.warning}),children:[(0,f.jsx)(kR,{color:"warning",size:7}),(0,f.jsx)(N.Z,{color:"inherit",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"{0} exports ongoing...",values:{0:i.length}})})]}),(0,f.jsx)(M.x1,{noMargin:!0,children:t?(0,f.jsx)(N.Z,{color:"secondary",noMargin:!0,children:t.length<100?(0,f.jsx)(w.Trans,{id:"{0} exports created",values:{0:t.length-(i?i.length:0)}}):(0,f.jsx)(w.Trans,{id:"100+ exports created"})}):null})]})})},zF=n(83607),WF=function(e){var t=e.publicGame,n=e.onClose,r=e.onApply,i=e.isLoading,l=(e.i18n,e.onUpdatingGame),u=e.onGameUpdated,d=e.canBePublishedOnGdGames,p=e.onUnregisterGame,h=c.useContext($n.ZP).profile,g=t.authors.map((function(e){return e.id})),m=t.authors.map((function(e){return e.username})).filter(Boolean),x=t.owners.map((function(e){return e.id})),v=c.useState(t.gameName),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState(t.categories),Z=(0,s.Z)(y,2),k=Z[0],S=Z[1],P=c.useState(t.description),I=(0,s.Z)(P,2),L=I[0],A=I[1],O=c.useState(g),R=(0,s.Z)(O,2),F=R[0],D=R[1],N=c.useState(m),_=(0,s.Z)(N,2),B=_[0],U=_[1],V=c.useState(x),H=(0,s.Z)(V,2),z=H[0],W=H[1],G=c.useState(t.playWithKeyboard),Y=(0,s.Z)(G,2),q=Y[0],J=Y[1],X=c.useState(t.playWithGamepad),K=(0,s.Z)(X,2),Q=K[0],$=K[1],ee=c.useState(t.playWithMobile),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=c.useState(t.orientation),ae=(0,s.Z)(ie,2),oe=ae[0],se=ae[1],le=c.useState(t.userSlug||h&&h.username||""),ce=(0,s.Z)(le,2),ue=ce[0],de=ce[1],pe=c.useState(t.gameSlug||kr(t.gameName)),fe=(0,s.Z)(pe,2),he=fe[0],ge=fe[1],me=c.useState(t.discoverable),xe=(0,s.Z)(me,2),ve=xe[0],be=xe[1],Ce=c.useState(!!t.publicWebBuildId),je=(0,s.Z)(Ce,2),ye=je[0],Ze=je[1],ke=c.useState(t.displayAdsOnGamePage),we=(0,s.Z)(ke,2),Te=we[0],Se=we[1],Pe=c.useState(!!t.acceptsGameComments),Ie=(0,s.Z)(Pe,2),Ee=Ie[0],Me=Ie[1],Le=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({ownerIds:z,userSlug:ue,gameSlug:he,discoverable:ve,authorUsernames:B,authorIds:F,gameName:C,categories:k,description:L,playWithKeyboard:q,playWithGamepad:Q,playWithMobile:ne,orientation:oe,displayAdsOnGamePage:Te,acceptsGameComments:Ee,isPublishedOnGdGames:ye});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=c.useMemo((function(){return(0,Cr.nC)(t)}),[t]),Oe=[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:n,disabled:i},"back"),(0,f.jsx)($r.Z,{isLoading:i,children:(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Save"}),primary:!0,onClick:Le,disabled:i})},"save")];return(0,f.jsxs)(E.ZP,{title:t.gameName,actions:Oe,cannotBeDismissed:i,onRequestClose:n,onApply:Le,open:!0,children:[(0,f.jsx)(wr,{gameId:t.id,name:C,setName:j,categories:k,setCategories:S,description:L,setDescription:A,authorIds:F,setAuthorIds:D,setAuthorUsernames:U,ownerIds:z,setOwnerIds:W,setPlayableWithKeyboard:J,playWithKeyboard:q,setPlayableWithGamepad:$,playWithGamepad:Q,setPlayableWithMobile:re,playWithMobile:ne,setOrientation:se,orientation:oe,setUserSlug:de,userSlug:ue,setGameSlug:ge,gameSlug:he,setDiscoverable:be,isPublishedOnGdGames:ye,setIsPublishedOnGdGames:Ze,acceptsAdvertisementsOnGdGames:Te,setAcceptsAdvertisementsOnGdGames:Se,acceptsGameComments:Ee,setAcceptsGameComments:Me,discoverable:ve,displayThumbnail:!0,thumbnailUrl:Ae,onGameUpdated:u,onUpdatingGame:l,disabled:i,canBePublishedOnGdGames:d}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(T.Z,{primary:!0,onClick:p,label:(0,f.jsx)(w.Trans,{id:"Unregister game"}),leftIcon:(0,f.jsx)(zF.Z,{fontSize:"small"}),disabled:i})})]})},GF={listItem:{padding:0,borderRadius:8,overflowWrap:"anywhere"},projectSkeleton:{borderRadius:6},noProjectsContainer:{padding:10},mobileIconContainer:{marginTop:4}},YF=function(e){var t=e.path,n=Array.from(t).map((function(e,t){return["/","\\"].includes(e)?t:null})).filter(Boolean);return 0===n.length?t:n.reduce((function(e,i,a){var o=n[a+1];return[].concat((0,r.Z)(e),[(0,f.jsx)("wbr",{},i),t.substring(i,o||t.length)])}),[])},qF=function(e){var t=e.file,n=e.currentFileMetadata,r=e.lastModifiedInfo,i=e.storageProviders,a=e.onOpenProject,o=e.isWindowSizeMediumOrLarger,s=e.disabled,u=e.isLoading,d=e.onOpenContextMenu,p=c.useContext($n.ZP),h=(0,yP.fl)(i,t.storageProviderName),g=c.useCallback((function(e,t){s||d(e,t)}),[s,d]),m=(0,rs.i)(c.useCallback((function(e){g(e,t)}),[g,t]));return(0,f.jsx)(w.I18n,{children:function(e){var i=e.i18n;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(J.Z,(0,l.Z)((0,l.Z)({button:!0,onClick:function(){s||a(t)},style:GF.listItem,onContextMenu:function(e){return g(e,t)}},m),{},{children:o?(0,f.jsxs)(_.pJ,{justifyContent:"flex-start",expand:!0,children:[(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[h&&h.renderIcon&&(0,f.jsxs)(f.Fragment,{children:[h.renderIcon({size:"small"}),(0,f.jsx)(M.LZ,{})]}),(0,f.jsx)(N.Z,{noMargin:!0,children:t.fileMetadata.name||(0,f.jsx)(YF,{path:t.fileMetadata.fileIdentifier})}),u&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsx)(GI.Z,{size:16})]})]})}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:h?i._(h.name):""})}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(XO,{file:t,lastModifiedInfo:r,storageProvider:h,authenticatedUser:p,currentFileMetadata:n})}),(0,f.jsx)(K.Z,{children:(0,f.jsx)($.Z,{size:"small",edge:"end","aria-label":"menu",onClick:function(e){e.stopPropagation(),g(e,t)},children:(0,f.jsx)(Mh.Z,{})})})]}):(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsxs)(_.pJ,{alignItems:"start",children:[h&&h.renderIcon&&(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)("div",{style:GF.mobileIconContainer,children:h.renderIcon({size:"small"})})}),(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,children:t.fileMetadata.name||(0,f.jsx)(YF,{path:t.fileMetadata.fileIdentifier})}),(0,f.jsx)(XO,{file:t,lastModifiedInfo:r,storageProvider:h,authenticatedUser:p,currentFileMetadata:n,textColor:"secondary"})]}),u&&(0,f.jsx)(GI.Z,{size:24})]})})}),t.fileMetadata.fileIdentifier)})}})},JF=F()("@electron/remote"),XF=JF?JF.shell:null,KF=F()("path"),QF={listItem:{padding:0,marginTop:2,marginBottom:2,borderRadius:8,overflowWrap:"anywhere"},projectSkeleton:{borderRadius:6},noProjectsContainer:{padding:10},refreshIconContainer:{fontSize:20,display:"flex",alignItems:"center"},grid:{margin:0,overflow:"unset"}},$F=function(e){e.project;var t=e.currentFileMetadata,n=e.game,r=e.onOpenProject,i=e.storageProviders,l=(e.closeProject,e.onDeleteCloudProject),u=e.disabled,d=(0,yP.ZA)(n.id),p=c.useRef(null),h=c.useState(null),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useContext(D.ZP).removeRecentProjectFile,b=c.useContext($n.ZP),C=b.profile,j=b.cloudProjects,y=b.cloudProjectsFetchingErrorLabel,Z=b.onCloudProjectsChanged,k=(0,be.UQ)().isMobile,T=c.useState({}),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=(0,Ye.Z)().showConfirmation;c.useEffect((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j&&C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,yP.gn)({cloudProjects:j,profile:C});case 4:t=e.sent,I(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[j,C]);var L=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({title:{id:"Remove project from list"},message:{id:'You are about to remove "{0}" from the list of your projects.{1}It will not delete it from your disk and you can always re-open it later. Do you want to proceed?',values:{0:t.fileMetadata.name,1:"\n\n"}},confirmButtonLabel:{id:"Remove"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:v(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,E]),A=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(n.fileMetadata.fileIdentifier),e.prev=1,e.next=4,l(t,n);case 4:return e.prev=4,x(null),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[l]),O=function(e,t){if(!t)return[];var n=[{label:e._({id:"Open"}),click:function(){return r(t)}}];return"Cloud"===t.storageProviderName?n.push({type:"separator"},{label:e._({id:"Delete"}),click:function(){return A(e,t)}}):"LocalFile"===t.storageProviderName?n.push.apply(n,[{label:e._({id:"Show in local folder"}),click:function(){return function(e){XF&&XF.showItemInFolder(KF.resolve(e.fileMetadata.fileIdentifier))}(t)}},{type:"separator"},{label:e._({id:"Remove from list"}),click:function(){return L(t)}}]):n.push({type:"separator"},{label:e._({id:"Remove from list"}),click:function(){return L(t)}}),n},R=c.useCallback((function(e,t){p.current&&p.current.open(e.clientX,e.clientY,{file:t})}),[]),F=(0,yP.R1)({isMobile:k});return y?(0,f.jsx)(M.x1,{children:(0,f.jsx)(_r.Z,{onRetry:Z,children:(0,f.jsx)(je.Z,{kind:"warning",children:y})})}):(0,f.jsxs)(f.Fragment,{children:["loggingIn"===b.loginState&&0===d.length?new Array(3).fill(0).map((function(e,t){return(0,f.jsx)(J.Z,{style:QF.listItem,children:(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(pP.Z,{variant:"rect",height:F,style:QF.projectSkeleton})})})},"skeleton-".concat(t))})):d.length>0?(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[!k&&(0,f.jsxs)(M.x1,{justifyContent:"space-between",children:[(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"File name"})})}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Location"})})}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Last edited"})})})]}),(0,f.jsx)(U.Z,{children:d.map((function(e){return(0,f.jsx)(qF,{file:e,onOpenContextMenu:R,disabled:u,isLoading:e.fileMetadata.fileIdentifier===m,currentFileMetadata:t,storageProviders:i,isWindowSizeMediumOrLarger:!k,onOpenProject:r,lastModifiedInfo:P[e.fileMetadata.fileIdentifier]},e.fileMetadata.fileIdentifier)}))})]})}):(0,f.jsx)(M.x1,{children:(0,f.jsx)(J.Z,{style:QF.listItem,children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(H.Z,{variant:"outlined",background:"dark",style:QF.noProjectsContainer,children:n?(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"No projects found for this game. Open manually a local project to have it added to the game dashboard."})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"No projects yet."})}),(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"Create your first project using one of our templates or start from scratch."})})]})})})})}),(0,f.jsx)(ns.Z,{ref:p,buildMenuTemplate:function(e,t){var n=t.file;return O(e,n)}})]})},eD=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Project file list"}),scope:"project-file-list",children:(0,f.jsx)($F,(0,l.Z)({},e))})},tD=function(e){return(0,f.jsx)(yR,{widgetSize:"full",title:(0,f.jsx)(w.Trans,{id:"Projects"}),widgetName:"projects",children:(0,f.jsx)(eD,(0,l.Z)({},e))})},nD={mobileFooter:{height:150},desktopFooter:{height:200}},rD=function(e){var t=e.project,n=e.currentFileMetadata,r=e.onOpenProject,i=e.storageProviders,l=e.closeProject,u=e.onDeleteCloudProject,d=e.game,p=e.onGameUpdated,h=e.onUnregisterGame,g=e.currentView,m=e.setCurrentView,x=e.onBack,v=e.disabled,b=e.initialWidgetToScrollTo,C=c.useRef(null),j=(0,be.UQ)().isMobile,y=c.useState(b),Z=(0,s.Z)(y,2),k=Z[0],T=Z[1],S=c.useState(!1),P=(0,s.Z)(S,2),I=P[0],E=P[1],L=c.useState(!1),A=(0,s.Z)(L,2),O=A[0],R=A[1],F=(0,Ye.Z)().showAlert,D=c.useContext($n.ZP),N=D.getAuthorizationHeader,B=D.profile,U=D.limits,V=c.useState(null),H=(0,s.Z)(V,2),z=H[0],W=H[1],G=c.useState(null),Y=(0,s.Z)(G,2),q=Y[0],J=Y[1],X=c.useState(null),K=(0,s.Z)(X,2),Q=K[0],$=K[1],ee=c.useState(null),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=c.useState(null),ae=(0,s.Z)(ie,2),oe=ae[0],se=ae[1],le=c.useState(null),ce=(0,s.Z)(le,2),ue=ce[0],de=ce[1],pe=c.useState(null),fe=(0,s.Z)(pe,2),he=fe[0],ge=fe[1],me=(0,_R.Z)((0,VR.Z)(new Date,364),{representation:"date"}),xe=q?q.filter((function(e){return"web-build"===e.type})):null,ve=c.useMemo((function(){if(!U||!he||!U.capabilities.leaderboards)return!1;var e=U.capabilities.leaderboards;return e.maximumCountPerGame>0&&he.filter((function(e){return!e.deletedAt})).length>=e.maximumCountPerGame}),[U,he]),Ce=!!xe&&xe.length>0,je=xe&&xe.length>0?xe[0].id:null,ye=!!d.publicWebBuildId?(0,Cr.IH)(d):null,Ze=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,Cr.LK)(N,{gameId:d.id,userId:B.id});case 5:t=e.sent,de(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("An error occurred while fetching game featurings.",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),[d,N,B]),ke=function(e,n){if(t&&t.getProjectUuid()===e.id){var r=e.gameName,i=e.categories,a=e.description,o=n.authorIds,s=n.authorUsernames;if(t.setName(r),t.setDescription(a||""),t.setPlayableWithKeyboard(d.playWithKeyboard),t.setPlayableWithGamepad(d.playWithGamepad),t.setPlayableWithMobile(d.playWithMobile),t.setOrientation(d.orientation||"default"),i){var l=t.getCategories();l.clear(),i.forEach((function(e){return l.push_back(e)}))}if(o){var c=t.getAuthorIds();c.clear(),o.forEach((function(e){return c.push_back(e)}))}if(s){var u=t.getAuthorUsernames();u.clear(),s.forEach((function(e){return u.push_back(e)}))}}},we=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Cr.Pv)(d.id);case 3:t=e.sent,$(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Unable to load the public game:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d.id]),Te=c.useCallback((function(e){p(e),we()}),[we,p]),Se=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,Cr.Bi)(N,B.id,d.id,t);case 4:n=e.sent,Te(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N,B,d.id,Te]),Pe=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,l,c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B&&Q){e.next=2;break}return e.abrupt("return",null);case 2:if(r=n.ownerIds,i=n.userSlug,o=n.gameSlug,s=n.authorIds,r&&r.length){e.next=7;break}return e.next=6,F({title:{id:"Select an owner"},message:{id:"You must select at least one user to be the owner of the game."}});case 6:case 10:return e.abrupt("return",null);case 7:if(s&&s.length){e.next=11;break}return e.next=10,F({title:{id:"Select an author"},message:{id:"You must select at least one user to be the author of the game."}});case 11:return l=null,e.prev=12,R(!0),c=void 0,n.isPublishedOnGdGames?Q.publicWebBuildId||je&&(c=je):c=null,e.next=18,(0,Cr.Bi)(N,B.id,Q.id,{gameName:n.gameName||"Untitled game",authorName:n.authorName||"Unspecified publisher",categories:n.categories,publicWebBuildId:c,description:n.description,playWithKeyboard:n.playWithKeyboard,playWithGamepad:n.playWithGamepad,playWithMobile:n.playWithMobile,orientation:n.orientation,discoverable:n.discoverable,acceptsBuildComments:n.acceptsBuildComments,acceptsGameComments:n.acceptsGameComments,displayAdsOnGamePage:n.displayAdsOnGamePage});case 18:if(l=e.sent,!i||!o||i!==B.username){e.next=30;break}return e.prev=20,e.next=23,(0,Cr.b)(N,B.id,Q.id,i,o);case 23:e.next=30;break;case 25:return e.prev=25,e.t0=e.catch(20),console.error("Unable to update the game slug:",e.t0.response||e.t0.message),(0,bi.gR)({message:t._({id:"Unable to update the game slug. A slug must be 6 to 30 characters long and only contains letters, digits or dashes."})+" "+t._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"game-slug-update-error"}),e.abrupt("return",!1);case 30:return e.prev=30,u=(0,Cr.WO)(s),d=(0,Cr.WO)(r),e.next=35,(0,Cr.wC)(N,B.id,Q.id,{ownership:d,author:u});case 35:e.next=42;break;case 37:return e.prev=37,e.t1=e.catch(30),console.error("Unable to update the game owners or authors:",e.t1.response||e.t1.message),(0,bi.gR)({message:t._({id:"Unable to update the game owners or authors. Have you removed yourself from the owners?"})+" "+t._({id:"Verify your internet connection or try again later."}),rawError:e.t1,errorId:"game-acls-update-error"}),e.abrupt("return",!1);case 42:Te(l),e.next=50;break;case 45:return e.prev=45,e.t2=e.catch(12),console.error("Unable to update the game:",e.t2.response||e.t2.message),(0,bi.gR)({message:t._({id:"Unable to update the game details."})+" "+t._({id:"Verify your internet connection or try again later."}),rawError:e.t2,errorId:"game-details-update-error"}),e.abrupt("return",!1);case 50:return e.prev=50,R(!1),e.finish(50);case 53:return e.abrupt("return",l);case 54:case"end":return e.stop()}}),e,null,[[12,45,50,53],[20,25],[30,37]])})));return function(t,n){return e.apply(this,arguments)}}(),Ie=c.useCallback((function(e){Se({publicWebBuildId:e})}),[Se]);c.useEffect((function(){$(null),we()}),[we]),c.useEffect((function(){if(k&&C.current){var e=C.current.querySelector('[data-widget-name="'.concat(k,'"]'));e&&(e.scrollIntoView({behavior:"smooth",inline:"start"}),T(null))}}),[b,k]);var Ee=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=8;break}return W(null),J(null),re(null),ge(null),de(null),se(null),e.abrupt("return");case 8:return e.next=10,Promise.all([(0,TR.BM)(N,B.id,{gameId:d.id,type:"FEEDBACK"}),(0,SR.BY)(N,B.id,d.id),IR(N,B.id,d.id,me),(0,TR.mf)(N,B.id,d.id),(0,Cr.sQ)(N,{gameId:d.id,userId:B.id}),Ze()]);case 10:t=e.sent,n=(0,s.Z)(t,5),r=n[0],i=n[1],o=n[2],l=n[3],c=n[4],W(r),J(i),re(o),ge(l),se(c);case 22:case"end":return e.stop()}}),e)}))),[Ze,d.id,N,B,me]);c.useEffect((function(){Ee()}),[Ee]);var Me=c.useCallback((function(){"details"===g?x():(Ee(),m("details"))}),[g,x,m,Ee]);return(0,f.jsx)(w.I18n,{children:function(e){var s=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(ba.Z,{onClick:Me,icon:(0,f.jsx)(vF.Z,{fontSize:"small"}),label:"details"===g?(0,f.jsx)(w.Trans,{id:"Back"}):(0,f.jsx)(w.Trans,{id:"Back to {0}",values:{0:d.gameName}})})}),"feedback"===g?(0,f.jsx)(MF,{authenticatedUser:D,game:d,i18n:s}):"builds"===g?(0,f.jsx)(LF.Z,{game:d,authenticatedUser:D,onGameUpdated:Te}):"analytics"===g?(0,f.jsx)(_F,{game:d,gameFeaturings:ue,fetchGameFeaturings:Ze,recommendedMarketingPlan:oe}):"leaderboards"===g?(0,f.jsx)(BF.Z,{gameId:d.id,onLoading:function(){}}):"multiplayer"===g?(0,f.jsx)(UF,{gameId:d.id}):(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(bR,{game:d,onEditGame:function(){return E(!0)},gameUrl:ye,onPublishOnGdGames:je?function(){return Ie(je)}:null}),(0,f.jsxs)(xR.Z,{container:!0,spacing:2,ref:C,children:[(0,f.jsx)(hF,{onSeeAll:function(){return m("analytics")},gameMetrics:ne,game:d,gameUrl:ye}),(0,f.jsx)(wR,{onSeeAll:function(){return m("feedback")},feedbacks:z,game:d,onUpdateGame:Se,gameUrl:ye}),(0,f.jsx)(xF,{onSeeAllLeaderboards:function(){return m("leaderboards")},onSeeLobbyConfiguration:function(){return m("multiplayer")},leaderboards:he,displayUnlockMoreLeaderboardsCallout:ve}),(0,f.jsx)(tD,{project:t,currentFileMetadata:n,game:d,onOpenProject:r,storageProviders:i,closeProject:l,onDeleteCloudProject:u,disabled:v}),(0,f.jsx)(HF,{builds:q,onSeeAllBuilds:function(){return m("builds")}})]}),(0,f.jsx)("div",{style:j?nD.mobileFooter:nD.desktopFooter})]})]}),I&&Q&&(0,f.jsx)(WF,{i18n:s,onClose:function(){return E(!1)},publicGame:Q,isLoading:O||v,onApply:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(s,t);case 2:(n=e.sent)&&ke(n,t),E(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),canBePublishedOnGdGames:Ce,onGameUpdated:Te,onUpdatingGame:R,onUnregisterGame:function(){return h(s)}})]})}})},iD=function(e){var t=e.onClose,n=e.userEarningsBalance,r=e.onSuccess,i=e.type,l=c.useState(!1),u=(0,s.Z)(l,2),d=u[0],p=u[1],h=c.useState(!1),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=(0,Ye.Z)().showAlert,b=c.useContext($n.ZP),C=b.onRefreshLimits,j=b.getAuthorizationHeader,y=b.profile,Z=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=3;break}return console.error("The user is not authenticated."),e.abrupt("return");case 3:return p(!0),e.prev=4,e.next=7,(0,er.rL)(j,y.id,i);case 7:return e.next=9,Promise.all([C(),r()]);case 9:x(!0),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(4),console.error("An error happened while cashing out:",e.t0),e.next=17,v({title:"credits"===i?{id:"Could not transfer your credits"}:{id:"Could not cash out"},message:"credits"===i?{id:"An error happened while transferring your credits. Verify your internet connection or try again later."}:{id:"An error happened while cashing out. Verify your internet connection or try again later."}});case 17:return e.prev=17,p(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,12,17,20]])}))),[C,v,r,j,y,i]);return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsx)(E.ZP,{title:"credits"===i?(0,f.jsx)(w.Trans,{id:"Credit out"}):(0,f.jsx)(w.Trans,{id:"Cash out"}),open:!0,maxWidth:"sm",cannotBeDismissed:!0,onRequestClose:t,actions:[(0,f.jsx)(T.Z,{label:m?(0,f.jsx)(w.Trans,{id:"Close"}):(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:t,disabled:d},"close"),!m&&(0,f.jsx)(G.Z,{label:"credits"===i?(0,f.jsx)(w.Trans,{id:"Convert"}):(0,f.jsx)(w.Trans,{id:"Continue"}),primary:!0,onClick:Z,disabled:d},"confirm")],children:(0,f.jsxs)(_.ak,{noMargin:!0,children:["credits"===i?m?(0,f.jsx)(qo.Z,{displayPurchaseAction:!1}):(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Exchange your earnings with GDevelop credits, and use them on the GDevelop store"})}):null,(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsx)(M.sg,{expand:!0,noMargin:!0,alignItems:"center",justifyContent:"center",children:d?(0,f.jsx)(Oe.Z,{}):m?"credits"===i?(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"\ud83c\udf89 You can now use your credits!"})}):(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"\ud83c\udf89 Your request has been saved. Lay back, we'll contact you shortly."})}):"credits"===i?(0,f.jsxs)(_.ak,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(gM.Z,{}),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"You'll convert {0} USD to {1} credits.",values:{0:(n.amountInMilliUSDs/1e3).toFixed(2),1:n.amountInCredits}})}),(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"This action cannot be undone."})}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Do you wish to continue?"})})]})]}):(0,f.jsxs)(_.ak,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"You're about to cash out {0} USD.",values:{0:(n.amountInMilliUSDs/1e3).toFixed(2)}})}),(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"This action is not automatic yet, we will get in touch to gather your bank details."})}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Do you wish to continue?"})})]})]})})})]})})}})},aD=(0,fp.vA)("/monetization"),oD={separator:{height:50},buttonContainer:{display:"flex",flexDirection:"column",alignItems:"stretch"}},sD=function(e){var t=e.size,n=c.useContext($n.ZP),r=n.userEarningsBalance,i=n.onRefreshEarningsBalance,u=n.onRefreshLimits,d=c.useContext(j.Z),p=(0,be.UQ)().isMobile,h=c.useState(0),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(0),b=(0,s.Z)(v,2),C=b[0],Z=b[1],k=c.useState(null),T=(0,s.Z)(k,2),S=T[0],P=T[1],I=c.useRef(null),E=c.useState(null),L=(0,s.Z)(E,2),A=L[0],O=L[1],R=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,n,i,o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:try{t=r.amountInMilliUSDs,n=r.amountInCredits,500,30,500/30,i=t/30,o=n/30,s=0,l=0,c=0,I.current=setInterval((function(){c++,l+=o,x(s+=i),Z(l),c>=30&&(clearInterval(I.current),x(t),Z(n))}),16.666666666666668)}catch(S){console.error("Unable to get user earnings balance:",S),P(S)}case 3:case"end":return e.stop()}}),e)}))),[r]);c.useEffect((function(){R()}),[R]),c.useEffect((function(){return function(){I.current&&clearInterval(I.current)}}),[]);var F=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([i(),u()]);case 2:case"end":return e.stop()}}),e)}))),[i,u]),D=r&&m>=r.minAmountToCashoutInMilliUSDs,B=S?(0,f.jsx)(_.pJ,{noMargin:!0,alignItems:"center",children:(0,f.jsx)(_r.Z,{onRetry:i,children:(0,f.jsx)(w.Trans,{id:"Can't load your game earnings. Verify your internet connection or try again later."})})}):(0,f.jsxs)(_.ep,{noMargin:!0,alignItems:"center",justifyContent:"space-between",expand:!0,children:[(0,f.jsx)(Io.Z,{align:p?"center":"left",children:(0,f.jsx)(pe.Z,{href:aD,onClick:function(){return y.ZP.openExternalURL(aD)},children:(0,f.jsx)(w.Trans,{id:"Learn about revenue on gd.games"})})}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(_.ep,{alignItems:"center",noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(Io.Z,{children:"USD"}),(0,f.jsx)(N.Z,{size:"sub-title",align:"center",noMargin:!0,style:{fontVariantNumeric:"tabular-nums"},children:(m/1e3).toFixed(2)})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(re.ZP,{title:r&&!D?(0,f.jsx)(w.Trans,{id:"Collect at least {0} USD to cash out your earnings",values:{0:r.minAmountToCashoutInMilliUSDs/1e3}}):"",children:(0,f.jsx)("div",{style:oD.buttonContainer,children:(0,f.jsx)(G.Z,{disabled:!D,primary:!0,label:(0,f.jsx)(w.Trans,{id:"Cash out"}),onClick:function(){O("cash")}})})})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},oD.separator),{},{border:"1px solid ".concat(d.home.separator.color)})}),(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(_.ep,{alignItems:"center",noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(gM.Z,{fontSize:"small"}),(0,f.jsx)(N.Z,{size:"sub-title",align:"center",noMargin:!0,style:{fontVariantNumeric:"tabular-nums"},children:C.toFixed(0)})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(G.Z,{primary:!0,disabled:0===C,label:(0,f.jsx)(w.Trans,{id:"Credit out"}),onClick:function(){O("credits")}})]})]})]});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(yR,{widgetSize:t,title:(0,f.jsx)(w.Trans,{id:"Game earnings"}),widgetName:"earnings",children:B}),A&&r&&(0,f.jsx)(iD,{userEarningsBalance:r,onClose:function(){return O(null)},onSuccess:F,type:A})]})},lD=n(62463),cD=function(e){var t=e.onOpenProfile,n=e.size,r=e.showOneItem,i=e.showAllItems,a=c.useContext($n.ZP),o=a.profile,s=a.limits,l=a.achievements,u=a.badges,d=a.onOpenCreateAccountDialog,p=s?s.credits.userBalance.amount:0;return(0,f.jsx)(yR,{widgetSize:n,title:(0,f.jsx)(w.Trans,{id:"Wallet"}),topRightAction:(0,f.jsx)(ba.Z,{icon:(0,f.jsx)(gM.Z,{fontSize:"small"}),label:p.toString(),onClick:o?t:d}),widgetName:"wallet",children:(0,f.jsx)(_.ak,{noMargin:!0,expand:!0,children:(0,f.jsx)(lD.Z,{achievements:l,badges:u,onOpenProfile:t,showRandomItem:r,showAllItems:i})})})},uD=function(e,t){return"small"===e?t?3:2:"medium"===e?3:"large"===e?4:6},dD=uD("xlarge",!0),pD=(ZS.LF+10)*dD,fD={grid:{maxWidth:pD,width:"calc(100% + ".concat(10,"px)"),overflow:"unset"}},hD=function(e){var t=e.onSelectExampleShortHeader,n=e.quickCustomizationRecommendation,r=e.disabled,i=c.useContext(CP.I).exampleShortHeaders,a=(0,be.UQ)(),o=a.windowSize,s=a.isLandscape,l=uD(o,s),u=c.useMemo((function(){return i?n.list.map((function(e){var t=e.type,n=e.exampleSlug,r=e.thumbnailTitleByLocale;if("example"!==t)return null;var a=i.find((function(e){return e.slug===n}));return a?{exampleShortHeader:a,thumbnailTitleByLocale:r}:null})).filter(Boolean):null}),[i,n.list]);return(0,f.jsx)(w.I18n,{children:function(e){var i=e.i18n;return(0,f.jsx)(kS.Z,{cols:l,style:fD.grid,cellHeight:"auto",spacing:10,children:u?u.map((function(e){var n=e.exampleShortHeader,a=e.thumbnailTitleByLocale;return(0,f.jsx)(ZP.Hm,{exampleShortHeader:n,onSelect:function(){t(n)},customTitle:(0,vo.a)(i,a),useQuickCustomizationThumbnail:!0,disabled:r},n.name)})):new Array(n.list.length).fill(0).map((function(e,t){return(0,f.jsx)(ZP.Hm,{exampleShortHeader:null,onSelect:function(){}},"skeleton-".concat(t))}))})}})},gD=n(31689),mD=function(e,t){switch(e){case"small":return t?4:2;case"medium":return 3;case"large":default:return 4;case"xlarge":return 6}},xD=function(e){var t=e.project,n=e.currentFileMetadata,r=e.onOpenProject,i=e.storageProviders,l=e.storageProvider,u=e.resourceManagementProps,d=e.onCreateEmptyProject,p=e.onOpenLayout,h=e.onWillInstallExtension,g=e.onExtensionInstalled,m=e.onCloseAskAi,x=e.closeProject,v=e.canOpen,b=e.onOpenProfile,C=e.askToCloseProject,j=e.onCreateProjectFromExample,y=e.onSelectPrivateGameTemplateListingData,Z=e.onSelectExampleShortHeader,k=e.i18n,S=e.games,P=e.onRefreshGames,I=e.onGameUpdated,E=e.gamesFetchingError,L=e.openedGame,A=e.setOpenedGameId,O=e.currentTab,R=e.setCurrentTab,F=e.onOpenNewProjectSetupDialog,D=e.onChooseProject,B=e.onSaveProject,U=e.canSaveProject,V=c.useContext($n.ZP),H=V.profile,z=V.getAuthorizationHeader,W=V.recommendations,G=V.limits,Y=(0,Ye.Z)(),q=Y.showDeleteConfirmation,J=Y.showConfirmation,X=Y.showAlert,K=c.useState(!1),Q=(0,s.Z)(K,2),$=Q[0],ee=Q[1],te=c.useState(null),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],ae=c.useContext(fa.ZP),oe=ae.routeArguments,se=ae.removeRouteArguments,le=c.useMemo((function(){return W?W.find((function(e){return"quick-customization"===e.type})):null}),[W]),ce=(0,be.UQ)(),ue=ce.windowSize,de=ce.isMobile,pe=ce.isLandscape,fe="small"===ue||"medium"===ue,he=RP(V),ge=(0,yP.ZA)(null),me=(S||[]).filter((function(e){return"draft"!==e.savedStatus})),xe=!!t||me.length||!!ge.length,ve=!!G&&!!G.capabilities.classrooms&&G.capabilities.classrooms.hideSocials;c.useEffect((function(){P()}),[P]),c.useEffect((function(){L&&!H&&A(null)}),[H,L,A]);var Ce=c.useState(1),je=(0,s.Z)(Ce,2),ye=je[0],Ze=je[1],ke=c.useState(""),we=(0,s.Z)(ke,2),Te=we[0],Se=we[1],Pe=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=2;break}return e.abrupt("return");case 2:if(r&&r.skipConfirmation){e.next=8;break}return e.next=5,J({title:{id:"Unregister game"},message:{id:"Are you sure you want to unregister this game?{0}If you haven't saved it, it will disappear from your games dashboard and you won't get access to player services, unless you register it again.",values:{0:"\n\n"}}});case 5:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return i=H.id,ee(!0),e.prev=10,e.next=13,(0,Cr.TT)(z,i,t);case 13:L&&L.id===t&&A(null),e.next=29;break;case 16:if(e.prev=16,e.t0=e.catch(10),console.error("Unable to delete the game:",e.t0),!(o=(0,uo.T)(e.t0))||"game-deletion/leaderboards-exist"!==o.code){e.next=25;break}return e.next=23,X({title:{id:"Unable to unregister the game"},message:{id:"You cannot unregister a game that has active leaderboards. To delete them, access the player services, and delete them one by one."}});case 23:e.next=27;break;case 25:return e.next=27,X({title:{id:"Unable to unregister the game"},message:{id:"An error happened while unregistering the game. Verify your internet connection or retry later."}});case 27:if(!r||!r.throwOnError){e.next=29;break}throw e.t0;case 29:return e.prev=29,ee(!1),e.finish(29);case 32:P();case 33:case"end":return e.stop()}}),e,null,[[10,16,29,32]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[L,H,z,P,A,J,X]);c.useEffect((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=oe["game-id"],!S||!t){e.next=10;break}if(n=S.find((function(e){return e.id===t})),se(["game-id"]),!n){e.next=8;break}A(n.id),e.next=10;break;case 8:return e.next=10,X({title:{id:"Game not found"},message:{id:"The game you're trying to open is not registered online. Open the project file, then register it before continuing."}});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[S,oe,se,J,X,t,A]);var Ie=c.useCallback((function(){R("details"),A(null)}),[R,A]),Ee=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r,i,o){var s,l,c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i.fileMetadata,"Cloud"===i.storageProviderName){e.next=3;break}return e.abrupt("return");case 3:if(l=s.name){e.next=6;break}return e.abrupt("return");case 6:if(!(!!t&&!!n&&s.fileIdentifier===n.fileIdentifier)){e.next=15;break}return e.next=10,J({title:{id:"Project is opened"},message:{id:"You are about to delete the project {projectName}, which is currently opened. If you proceed, the project will be closed and you will lose any unsaved changes. Do you want to proceed?",values:{projectName:l}},confirmButtonLabel:{id:"Continue"}});case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,x();case 15:if(o&&o.skipConfirmation){e.next=22;break}return c=r._({id:"delete"}),e.next=19,q({title:{id:"Permanently delete the project?"},message:{id:"Project {projectName} will be deleted. You will no longer be able to access it.",values:{projectName:l}},fieldMessage:{id:'To confirm, type "{translatedConfirmText}"',values:{translatedConfirmText:c}},confirmText:c,confirmButtonLabel:{id:"Delete project"}});case 19:if(e.sent){e.next=22;break}return e.abrupt("return");case 22:return e.prev=22,ee(!0),e.next=26,(0,uj.Hj)(V,s.fileIdentifier);case 26:V.onCloudProjectsChanged(),e.next=34;break;case 29:e.prev=29,e.t0=e.catch(22),u=(0,uo.T)(e.t0),d=u&&403===u.status?{id:"You don't have permissions to delete this project."}:{id:"An error occurred when deleting the project. Please try again later."},X({title:{id:"Unable to delete the project"},message:d});case 34:return e.prev=34,ee(!1),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[22,29,34,37]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Me=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.fileMetadata.gameId,V.profile){e.next=3;break}return e.abrupt("return");case 3:if(n){e.next=7;break}return console.error("No project id found for registering the game."),X({title:{id:"Unable to register the game"},message:{id:"An error happened while registering the game. Verify your internet connection or retry later."}}),e.abrupt("return");case 7:return r=V.profile,i=r.id,o=r.username,e.prev=8,ee(!0),e.next=12,(0,Cr.r$)(V.getAuthorizationHeader,i,(0,gD.dN)({projectId:n,projectName:t.fileMetadata.name,projectAuthor:o,savedStatus:"saved"}));case 12:return s=e.sent,e.abrupt("return",s);case 16:if(e.prev=16,e.t0=e.catch(8),console.error("Unable to register the game.",e.t0),!(l=(0,uo.T)(e.t0))||403!==l.status){e.next=25;break}return e.next=23,X({title:{id:"Game already registered"},message:{id:"This game is registered online but you don't have access to it. Ask the owner of the game to add your account to the list of owners to be able to manage it."}});case 23:e.next=27;break;case 25:return e.next=27,X({title:{id:"Unable to register the game"},message:{id:"An error happened while registering the game. Verify your internet connection or retry later."}});case 27:return e.prev=27,ee(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[8,16,27,30]])})));return function(t){return e.apply(this,arguments)}}(),[V.getAuthorizationHeader,V.profile,X]),Le=(0,c.useContext(yM.X0).aiRequestStorage.isSendingAiRequest)(""),Ae=$||Le;return L?(0,f.jsx)(yS.ZP,{flexBody:!0,children:(0,f.jsx)(rD,{project:t,currentFileMetadata:n,onOpenProject:r,storageProviders:i,closeProject:x,currentView:O,setCurrentView:R,game:L,onBack:Ie,onGameUpdated:I,disabled:Ae,onUnregisterGame:function(){return Pe(L.id,k)},onDeleteCloudProject:Ee,initialWidgetToScrollTo:re})}):(0,f.jsx)(w.I18n,{children:function(e){var s=e.i18n;return(0,f.jsx)(yS.ZP,{flexBody:!0,renderFooter:!de&&he?function(){return(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(FP,{})})})}:void 0,showUrgentAnnouncements:!0,children:(0,f.jsxs)(yS.L,{expand:!0,children:[(0,f.jsx)(ZL,{i18n:s,project:t,resourceManagementProps:u,fileMetadata:n,storageProvider:l,onCreateProjectFromExample:j,onCreateEmptyProject:d,onOpenLayout:p,onWillInstallExtension:h,onExtensionInstalled:g,onCloseAskAi:m,dismissableIdentifier:"home-page-create-section"}),(0,f.jsxs)(_.ak,{noMargin:!0,children:[ve?null:xe?(0,f.jsx)(_.ak,{noMargin:!0,children:(0,f.jsxs)(xR.Z,{container:!0,spacing:2,children:[(0,f.jsx)(sD,{size:de&&pe?"half":fe?"full":"twoThirds"}),(0,f.jsx)(cD,{onOpenProfile:b,showOneItem:!0,size:de&&pe?"half":fe?"full":"oneThird"})]})}):(0,f.jsx)(xR.Z,{container:!0,spacing:2,children:(0,f.jsx)(cD,{onOpenProfile:b,size:"full"})}),(0,f.jsx)(M.hS,{}),E?(0,f.jsx)(_r.Z,{onRetry:P,children:(0,f.jsx)(w.Trans,{id:"Can't load the games. Verify your internet connection or retry later."})}):(0,f.jsx)(mR,{storageProviders:i,project:t,games:S,onRefreshGames:P,onOpenGameManager:function(e){var t=e.game,n=e.widgetToScrollTo;ie(n),A(t.id)},onOpenProject:r,disabled:Ae,onUnregisterGame:Pe,canOpen:v,onOpenNewProjectSetupDialog:F,onChooseProject:D,currentFileMetadata:n,closeProject:x,askToCloseProject:C,onSaveProject:B,canSaveProject:U,onDeleteCloudProject:Ee,onRegisterProject:Me,currentPage:ye,setCurrentPage:Ze,searchText:Te,setSearchText:Se}),de&&he&&(0,f.jsx)(FP,{margin:"dense"}),le&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Remix a game in 2 minutes"})})}),(0,f.jsx)(hD,{onSelectExampleShortHeader:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:n={storageProvider:Bi.Z,saveAsLocation:null,openQuickCustomizationDialog:!0,creationSource:"quick-customization"},j({exampleShortHeader:t,newProjectSetup:n,i18n:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),quickCustomizationRecommendation:le,disabled:Ae})]}),!xe&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Start from a template"})}),(0,f.jsx)(T.Z,{onClick:F,label:de?(0,f.jsx)(w.Trans,{id:"Browse"}):(0,f.jsx)(w.Trans,{id:"Browse all templates"}),leftIcon:(0,f.jsx)(ot.Z,{fontSize:"small"}),disabled:Ae})]}),(0,f.jsx)(FL,{onSelectExampleShortHeader:Z,onSelectPrivateGameTemplateListingData:y,i18n:s,getColumnsFromWindowSize:mD,hideSearch:!0,onlyShowGames:!0,disabled:Ae})]})]})]})})}})},vD=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Create section"}),scope:"start-page-create",children:(0,f.jsx)(xD,(0,l.Z)({},e))})},bD=n(1637),CD=n(34193),jD=n(25808),yD=n(36173),ZD=n(1525),kD=function(e){var t=e.project,n=e.resourceManagementProps,r=e.onOpenPrivateGameTemplateListingData,i=e.onOpenProfile,a=e.onWillInstallExtension,o=e.onExtensionInstalled,l=e.onCourseOpen,u=e.courses,d=e.getCourseCompletion,p=c.useState(!1),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=c.useContext(ZD.xP),v=c.useContext(NL.KY).assetShortHeadersSearchResults,b=x.getCurrentPage(),C=b.openedAssetPack,j=b.openedAssetShortHeader,y=b.selectedFolders,Z=c.useMemo((function(){return j?[j]:v?(0,yD.f)(v,y):[]}),[j,v,y]),k=c.useMemo((function(){return t&&g?(0,jD.f)(t):new Set}),[t,g]);return(0,f.jsxs)(yS.ZP,{flexBody:!0,noScroll:!0,children:[(0,f.jsx)(bD.M,{onOpenPrivateGameTemplateListingData:r,displayPromotions:!0,onOpenProfile:i,courses:u,onCourseOpen:l,getCourseCompletion:d}),(C||j)&&(0,f.jsx)(M.x1,{justifyContent:"flex-end",children:(0,f.jsx)(G.Z,{primary:!0,onClick:function(){t&&m(!0)},disabled:!t||!Z.length,label:t?j||1===Z.length?(0,f.jsx)(w.Trans,{id:"Add this asset to the project"}):(0,f.jsx)(w.Trans,{id:"Add these assets to the project"}):j||1===Z.length?(0,f.jsx)(w.Trans,{id:"Create a project first to add this asset"}):(0,f.jsx)(w.Trans,{id:"Create a project first to add assets from the asset store"})})}),t&&g&&!!Z.length&&(0,f.jsx)(CD.Z,{assetPack:C,assetShortHeaders:Z,addedAssetIds:k,onClose:function(){return m(!1)},onAssetsAdded:function(){m(!1)},project:t,objectsContainer:null,resourceManagementProps:n,onWillInstallExtension:a,onExtensionInstalled:o})]})},wD=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Shop section"}),scope:"start-page-shop",children:(0,f.jsx)(kD,(0,l.Z)({},e))})},TD=n(20400),SD="UserAvatar_premiumContainer__zqUCX",PD={avatar:{width:20,height:20},premiumAvatar:{width:16,height:16}};function ID(e){var t=e.iconUrl;return e.isPremium?(0,f.jsx)("div",{className:SD,children:(0,f.jsx)(ao.Z,{src:t,style:PD.premiumAvatar})}):(0,f.jsx)(ao.Z,{src:t,style:PD.avatar})}var ED={buttonContainer:{flexShrink:0}},MD=function(){var e=c.useContext(mo.J).openSubscriptionDialog;return(0,f.jsx)(G.Z,{icon:(0,f.jsx)(TD.Z,{}),onClick:function(){e({analyticsMetadata:{reason:"Account get premium",recommendedPlanId:"gdevelop_silver",placementId:"account-get-premium"}})},id:"get-premium-button",label:(0,f.jsx)(w.Trans,{id:"Get premium"}),color:"premium"})},LD=function(e){var t=e.onOpenProfile,n=c.useContext($n.ZP),r=n.profile,i=n.onOpenCreateAccountDialog,a=n.onOpenLoginDialog,o=n.loginState,s=n.subscription,l=(0,er.e_)(s),u=(0,be.UQ)().isMobile;return r||"loggingIn"!==o?r?(0,f.jsxs)(_.pJ,{noMargin:!0,children:[u?(0,f.jsx)($.Z,{size:"small",onClick:t,children:(0,f.jsx)(ID,{iconUrl:(0,oo.y)(r.email||"",{size:50}),isPremium:l})}):(0,f.jsx)(ba.Z,{label:(0,Bs.S)(r.username||r.email,20),onClick:t,allowBrowserAutoTranslate:!1,icon:(0,f.jsx)(ID,{iconUrl:(0,oo.y)(r.email||"",{size:50}),isPremium:l})}),l?null:(0,f.jsx)(MD,{})]}):(0,f.jsx)("div",{style:ED.buttonContainer,children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(T.Z,{label:(0,f.jsx)("span",{children:(0,f.jsx)(w.Trans,{id:"Log in"})}),onClick:a,primary:!0}),(0,f.jsx)(G.Z,{label:(0,f.jsx)("span",{children:(0,f.jsx)(w.Trans,{id:"Sign up"})}),onClick:function(){return i()},primary:!0})]})}):(0,f.jsx)(GI.Z,{size:25})},AD=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,f.jsx)("path",{d:"M15.3333 9.66669C14.1285 9.66669 12.7081 10.0654 11.5773 11.0934C10.4227 12.143 9.66663 13.7607 9.66663 16C9.66663 18.1527 10.206 19.8116 11.4106 20.9066C12.5958 21.9841 14.229 22.3334 16 22.3334C19.2021 22.3334 20.6502 20.1669 20.9672 18.9206L20.9938 18.823L21.0698 18.5411C21.1327 18.3072 21.2167 17.9923 21.3009 17.6698C21.3847 17.3485 21.47 17.0146 21.5349 16.7445C21.5671 16.6102 21.5959 16.4846 21.6173 16.3812L21.6192 16.3719C21.6326 16.3077 21.6666 16.1443 21.6666 16C21.6666 15.5087 21.3402 15.24 21.2244 15.1595C21.0927 15.0678 20.9671 15.0257 20.912 15.0085C20.7884 14.9699 20.665 14.9524 20.5852 14.9428C20.4086 14.9217 20.1875 14.9113 19.9614 14.9058C19.4991 14.8947 18.8962 14.9022 18.3093 14.9163C17.7187 14.9305 17.1296 14.9517 16.6892 14.9693C16.4687 14.9781 16.2848 14.9861 16.156 14.9918L16.006 14.9986L15.952 15.0012C15.4004 15.0276 14.9746 15.4963 15.0011 16.048C15.0276 16.5996 15.4969 17.0253 16.0486 16.9988L16.0987 16.9965L16.245 16.9898C16.3713 16.9842 16.5521 16.9764 16.7691 16.9677C17.2036 16.9504 17.7812 16.9296 18.3573 16.9158C18.7356 16.9067 19.1071 16.9008 19.4342 16.9005C19.4118 16.9877 19.3888 17.0763 19.3657 17.1648C19.2832 17.481 19.2005 17.7908 19.1384 18.0219L19.0635 18.2996L19.0352 18.4034L19.0324 18.4137L19.0298 18.4242C18.8965 18.9575 18.1214 20.3334 16 20.3334C14.4375 20.3334 13.4041 20.0159 12.756 19.4267C12.1272 18.8552 11.6666 17.8473 11.6666 16C11.6666 14.2394 12.2439 13.1904 12.9226 12.5733C13.6251 11.9347 14.5381 11.6667 15.3333 11.6667H22.6666C23.2189 11.6667 23.6666 11.219 23.6666 10.6667C23.6666 10.1144 23.2189 9.66669 22.6666 9.66669H15.3333Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 1.66669C8.08387 1.66669 1.66663 8.08394 1.66663 16C1.66663 23.916 8.08387 30.3334 16 30.3334C23.916 30.3334 30.3333 23.916 30.3333 16C30.3333 8.08393 23.916 1.66669 16 1.66669ZM3.66663 16C3.66663 9.1885 9.18844 3.66669 16 3.66669C22.8114 3.66669 28.3333 9.18851 28.3333 16C28.3333 22.8115 22.8114 28.3334 16 28.3334C9.18845 28.3334 3.66663 22.8115 3.66663 16Z",fill:"currentColor"})]}))})),OD=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.00004 7.33331C8.07957 7.33331 7.33337 8.0795 7.33337 8.99998V19C7.33337 19.9205 8.07956 20.6666 9.00004 20.6666H12.5C12.7884 20.6666 13.0627 20.7911 13.2526 21.0081L16 24.1481L18.7475 21.0081C18.9374 20.7911 19.2117 20.6666 19.5 20.6666H23C23.9206 20.6666 24.6667 19.9205 24.6667 19V8.99998C24.6667 8.07949 23.9205 7.33331 23 7.33331H9.00004ZM5.33337 8.99998C5.33337 6.97493 6.975 5.33331 9.00004 5.33331H23C25.0251 5.33331 26.6667 6.97494 26.6667 8.99998V19C26.6667 21.0251 25.0251 22.6666 23 22.6666H19.9538L16.7526 26.3252C16.5627 26.5422 16.2884 26.6666 16 26.6666C15.7117 26.6666 15.4374 26.5422 15.2475 26.3252L12.0463 22.6666H9.00004C6.97501 22.6666 5.33337 21.0251 5.33337 19V8.99998Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6667 14.6666C10.6667 13.9304 11.2636 13.3333 12 13.3333C12.7365 13.3333 13.3334 13.9304 13.3334 14.6666C13.3334 15.4029 12.7365 16 12 16C11.2636 16 10.6667 15.4029 10.6667 14.6666Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.6667 14.6666C14.6667 13.9303 15.2637 13.3333 16 13.3333C16.7364 13.3333 17.3334 13.9303 17.3334 14.6666C17.3334 15.403 16.7364 16 16 16C15.2637 16 14.6667 15.403 14.6667 14.6666Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.6667 14.6666C18.6667 13.9303 19.2637 13.3333 20 13.3333C20.7364 13.3333 21.3334 13.9303 21.3334 14.6666C21.3334 15.403 20.7364 16 20 16C19.2637 16 18.6667 15.403 18.6667 14.6666Z",fill:"currentColor"})]}))})),RD=n(6307),FD=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.8016 18.0978C19.1921 17.7073 19.8253 17.7073 20.2158 18.0978L26.7654 24.6475C27.1559 25.038 27.1559 25.6711 26.7654 26.0617C26.3749 26.4522 25.7417 26.4522 25.3512 26.0617L18.8016 19.5121C18.4111 19.1215 18.4111 18.4884 18.8016 18.0978Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.8016 26.0618C18.4111 25.6713 18.4111 25.0381 18.8016 24.6476L25.3512 18.098C25.7417 17.7075 26.3749 17.7075 26.7654 18.098C27.1559 18.4885 27.1559 19.1217 26.7654 19.5122L20.2158 26.0618C19.8253 26.4523 19.1921 26.4523 18.8016 26.0618Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.03705 19.0667V23.9185H11.8889V19.0667H7.03705ZM5.03705 18.828C5.03705 17.8552 5.82562 17.0667 6.79837 17.0667H12.1276C13.1003 17.0667 13.8889 17.8552 13.8889 18.828V24.1572C13.8889 25.13 13.1003 25.9185 12.1276 25.9185H6.79837C5.82562 25.9185 5.03705 25.13 5.03705 24.1572V18.828Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.75704 6.02592C9.41578 5.02757 10.8806 5.02758 11.5393 6.02592L15.0478 11.3432C15.7789 12.4513 14.9842 13.9278 13.6567 13.9278H6.63966C5.31209 13.9278 4.51738 12.4513 5.24854 11.3432L8.75704 6.02592ZM10.1482 7.54907L7.25896 11.9278H13.0374L10.1482 7.54907Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7963 8.10371C20.4565 8.10371 19.3704 9.18984 19.3704 10.5296C19.3704 11.8694 20.4565 12.9556 21.7963 12.9556C23.1361 12.9556 24.2222 11.8694 24.2222 10.5296C24.2222 9.18984 23.1361 8.10371 21.7963 8.10371ZM17.3704 10.5296C17.3704 8.08527 19.3519 6.10371 21.7963 6.10371C24.2407 6.10371 26.2222 8.08527 26.2222 10.5296C26.2222 12.974 24.2407 14.9556 21.7963 14.9556C19.3519 14.9556 17.3704 12.974 17.3704 10.5296Z",fill:"currentColor"})]}))})),DD=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33337 6.33331C5.33337 5.78103 5.78109 5.33331 6.33337 5.33331H9.33337C9.79224 5.33331 10.1922 5.64561 10.3035 6.09078L11.1142 9.33331H25.6667C25.9722 9.33331 26.261 9.47296 26.4506 9.71244C26.6403 9.95193 26.7101 10.265 26.6401 10.5624L24.4572 19.8398C24.0674 21.496 22.5896 22.6666 20.888 22.6666H15.386C13.7223 22.6666 12.2671 21.5465 11.8414 19.9383L9.36724 10.5914C9.36614 10.5872 9.36507 10.5831 9.36402 10.579C9.36376 10.5779 9.36349 10.5769 9.36323 10.5758L8.5526 7.33331H6.33337C5.78109 7.33331 5.33337 6.8856 5.33337 6.33331ZM11.6325 11.3333L13.7748 19.4265C13.7748 19.4265 13.7748 19.4265 13.7748 19.4265C13.9683 20.1575 14.6298 20.6666 15.386 20.6666H20.888C21.6614 20.6666 22.3332 20.1346 22.5104 19.3817L24.4041 11.3333H11.6325Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M13.3334 26.6666C14.0698 26.6666 14.6667 26.0697 14.6667 25.3333C14.6667 24.5969 14.0698 24 13.3334 24C12.597 24 12 24.5969 12 25.3333C12 26.0697 12.597 26.6666 13.3334 26.6666Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M22.6667 26.6666C23.4031 26.6666 24 26.0697 24 25.3333C24 24.5969 23.4031 24 22.6667 24C21.9303 24 21.3334 24.5969 21.3334 25.3333C21.3334 26.0697 21.9303 26.6666 22.6667 26.6666Z",fill:"currentColor"})]}))})),ND={"credits-drop":(0,f.jsx)(AD,{}),"free-trial-about-to-expire":(0,f.jsx)(RD.Z,{}),"one-game-feedback-received":(0,f.jsx)(OD,{}),"multiple-game-feedback-received":(0,f.jsx)(OD,{}),"claimable-asset-pack":(0,f.jsx)(DD,{}),"game-sessions-achievement":(0,f.jsx)(FD,{})},_D=function(e){var t=e.notification,n=e.onCloseNotificationList,r=e.onMarkNotificationAsSeen,i=c.useContext(j.Z),a=c.useContext(fa.ZP).addRouteArguments,o=function(e){var t=e.notification,n=e.addRouteArguments,r=e.onCloseNotificationList,i=e.onMarkNotificationAsSeen;if("credits-drop"===t.type||"free-trial-about-to-expire"===t.type)return null;if("one-game-feedback-received"===t.type||"multiple-game-feedback-received"===t.type)return function(){n({"initial-dialog":"games-dashboard","game-id":t.data.gameId,"games-dashboard-tab":"feedback"}),i(),r()};if("claimable-asset-pack"===t.type)return function(){n({"initial-dialog":"store","asset-pack":t.data.privateAssetPackId}),i(),r()};if("game-sessions-achievement"===t.type){if(1===t.data.gameCount){var a=t.data,o=a.gameId,s=a.gameName;return o&&s?function(){n({"initial-dialog":"games-dashboard","game-id":o,"games-dashboard-tab":"analytics"}),i(),r()}:null}if("all"===t.data.gameCount||Number.isInteger(t.data.gameCount))return function(){n({"initial-dialog":"games-dashboard","games-dashboard-tab":"analytics"}),i(),r()}}return null}({notification:t,addRouteArguments:a,onMarkNotificationAsSeen:r,onCloseNotificationList:n}),s=function(e){if("credits-drop"===e.type&&e.data.reason.startsWith("subscription"))return(0,f.jsx)(w.Trans,{id:"You received {0} credits thanks to your subscription",values:{0:e.data.creditsAmount}});if("one-game-feedback-received"===e.type)return e.data.playerName?(0,f.jsx)(w.Trans,{id:'Player {0} left a feedback message on {1}: "{2}..."',values:{0:e.data.playerName,1:e.data.gameName,2:(0,Bs.S)(e.data.comment,25)}}):(0,f.jsx)(w.Trans,{id:'Your game {0} received a feedback message: "{1}..."',values:{0:e.data.gameName,1:(0,Bs.S)(e.data.comment,25)}});if("multiple-game-feedback-received"===e.type)return(0,f.jsx)(w.Trans,{id:"Your game {0} received {1} feedback messages",values:{0:e.data.gameName,1:e.data.count}});if("free-trial-about-to-expire"===e.type)return(0,f.jsx)(w.Trans,{id:"Your free trial will expire in {0} hours.",values:{0:Math.max(0,Math.round((e.data.endDate-Date.now())/36e5))}});if("claimable-asset-pack"===e.type)return(0,f.jsx)(w.Trans,{id:"The asset pack {0} is now available, go claim it in the shop!",values:{0:e.data.privateAssetPackName}});if("game-sessions-achievement"===e.type){if(1===e.data.gameCount)return e.data.gameId&&e.data.gameName?(0,f.jsx)(w.Trans,{id:"Your game {0} was played more than {1} times!",values:{0:e.data.gameName,1:e.data.sessionsCount}}):null;if(e.data.allGames)return(0,f.jsx)(w.Trans,{id:"All your games were played more than {0} times in total!",values:{0:e.data.sessionsCount}});var t=e.data.gameCount;if(Number.isInteger(t))return(0,f.jsx)(w.Trans,{id:"{gameCount} of your games were played more than {0} times in total!",values:{0:e.data.sessionsCount,gameCount:t}})}return null}(t);return s?(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(Te.HC,{primaryText:s,secondaryText:$O({i18n:n,dateAsNumber:t.createdAt,sameDayFormat:"timeAgo",sameWeekFormat:"timeAgo",dayBeforeFormat:"yesterday",relativeLimit:"currentWeek"}),onClick:o,leftIcon:ND[t.type],displayDot:!t.seenAt,dotColor:i.notification.badgeColor,isGreyed:!!t.seenAt,secondaryTextSize:"body-small"})}}):null},BD=function(e){var t=e.notifications,n=e.onMarkAllAsRead,r=e.canMarkAllAsRead,i=e.onMarkNotificationAsSeen,l=e.onCloseNotificationList,u=c.useState(!1),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useState(!1),m=(0,s.Z)(g,2),x=m[0],v=m[1],b=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,n();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("An error occurred while marking all notifications as seen:",e.t0);case 9:return e.prev=9,h(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])}))),[n]),C=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("An error occurred while marking notification as seen:",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[i]),j=x?t:t.slice(0,5),y=t.length>5&&!x;return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Notifications"})}),(0,f.jsx)($r.Z,{isLoading:p,children:(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Mark all as read"}),disabled:!r,onClick:b})})]}),(0,f.jsx)(ft.Z,{autoHideScrollbar:!0,children:(0,f.jsxs)(M.sg,{children:[(0,f.jsx)(Te.aV,{children:j.length>0?j.map((function(e){return(0,f.jsx)(_D,{notification:e,onCloseNotificationList:l,onMarkNotificationAsSeen:function(){C(e)}},e.id)})):(0,f.jsx)(Te.HC,{primaryText:(0,f.jsx)(w.Trans,{id:"You have 0 notifications."})})}),y&&(0,f.jsx)(ba.Z,{secondary:!0,label:(0,f.jsx)(w.Trans,{id:"Load more..."}),onClick:function(){return v(!0)}})]})})]})}})},UD=["forcedColor"],VD=function(e){var t=e.forcedColor,n=(0,go.Z)(e,UD),r=c.useMemo((function(){return t?(0,ur.Z)({badge:{backgroundColor:t}}):function(){}}),[t])();return(0,f.jsx)(Do.Z,(0,l.Z)((0,l.Z)({},n),{},{classes:r}))},HD=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.66707 6.66663C4.66707 4.45749 6.45794 2.66663 8.66707 2.66663C10.8762 2.66663 12.6671 4.45748 12.6671 6.66663V7.88819L13.9528 10.6204C14.0257 10.7753 14.0143 10.9567 13.9226 11.1012C13.8309 11.2457 13.6716 11.3333 13.5004 11.3333H3.83374C3.66257 11.3333 3.50329 11.2457 3.41157 11.1012C3.31986 10.9567 3.30845 10.7753 3.38133 10.6204L4.66707 7.88819V6.66663ZM8.66707 3.66663C7.01022 3.66663 5.66707 5.00978 5.66707 6.66663V7.99996C5.66707 8.07356 5.65082 8.14626 5.61948 8.21286L4.62163 10.3333H12.7125L11.7147 8.21286C11.6833 8.14626 11.6671 8.07356 11.6671 7.99996V6.66663C11.6671 5.00977 10.3239 3.66663 8.66707 3.66663Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.16706 11.1623C7.16472 10.8881 6.94177 10.6666 6.66707 10.6666C6.39093 10.6666 6.16707 10.8905 6.16707 11.1666H6.66707C6.16707 11.1666 6.16707 11.1663 6.16707 11.1666L6.16708 11.1679L6.16708 11.1693L6.1671 11.1726L6.16723 11.1811C6.16735 11.1876 6.16758 11.1957 6.16796 11.2053C6.16873 11.2246 6.17016 11.2501 6.17281 11.2809C6.17808 11.3424 6.18826 11.4262 6.20803 11.5251C6.24722 11.721 6.32626 11.9871 6.48833 12.2572C6.83186 12.8298 7.49768 13.3333 8.66707 13.3333C9.83646 13.3333 10.5023 12.8298 10.8458 12.2572C11.0079 11.9871 11.0869 11.721 11.1261 11.5251C11.1459 11.4262 11.1561 11.3424 11.1613 11.2809C11.164 11.2501 11.1654 11.2246 11.1662 11.2053C11.1666 11.1957 11.1668 11.1876 11.1669 11.1811L11.167 11.1726L11.1671 11.1693L11.1671 11.1679C11.1671 11.1676 11.1671 11.1666 10.6671 11.1666H11.1671C11.1671 10.8905 10.9432 10.6666 10.6671 10.6666C10.3924 10.6666 10.1694 10.8881 10.1671 11.1623",fill:"currentColor"})]}))})),zD=n(50631),WD={notificationListContainer:{padding:16,display:"flex",maxWidth:400,minWidth:300},popoverPaper:{overflowY:"hidden",maxHeight:"80%",display:"flex"}},GD=function(e){var t=c.useContext(j.Z),n=c.useContext($n.ZP),r=n.notifications,i=n.profile,l=n.getAuthorizationHeader,u=n.onRefreshNotifications,d=c.useState(null),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useMemo((function(){return!!r&&r.some((function(e){return!e.seenAt}))}),[r]),x=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&i){e.next=2;break}return e.abrupt("return");case 2:if(t=r[0]){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,zD.nq)(l,{allStartingFromNotificationId:t.id,userId:i.id});case 7:return e.next=9,u();case 9:case"end":return e.stop()}}),e)}))),[r,i,l,u]),v=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&!t.seenAt){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,zD.nq)(l,{notificationIds:[t.id],userId:i.id});case 4:return e.next=6,u();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,l,u]),b=c.useCallback((function(){g(null)}),[]);return i&&r?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.Z,{size:"small",onClick:function(e){g(e.currentTarget)},children:(0,f.jsx)(VD,{variant:"dot",overlap:"circle",invisible:!m,forcedColor:t.notification.badgeColor,children:(0,f.jsx)(HD,{color:"secondary"})})}),(0,f.jsx)(Vh.ZP,{open:!!h,anchorEl:h,PaperProps:{style:WD.popoverPaper},onClose:b,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,f.jsx)(H.Z,{style:WD.notificationListContainer,background:"light",children:(0,f.jsx)(BD,{notifications:r,onMarkAllAsRead:x,onMarkNotificationAsSeen:v,canMarkAllAsRead:m,onCloseNotificationList:b})})})]}):null},YD=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16671 3.66669C4.70647 3.66669 4.33337 4.03978 4.33337 4.50002V11.5C4.33337 11.9603 4.70646 12.3334 5.16671 12.3334H9.50004C9.9603 12.3334 10.3334 11.9603 10.3334 11.5V4.50002C10.3334 4.03978 9.96029 3.66669 9.50004 3.66669H5.16671ZM3.33337 4.50002C3.33337 3.4875 4.15418 2.66669 5.16671 2.66669H9.50004C10.5126 2.66669 11.3334 3.4875 11.3334 4.50002V11.5C11.3334 12.5126 10.5126 13.3334 9.50004 13.3334H5.16671C4.15419 13.3334 3.33337 12.5126 3.33337 11.5V4.50002Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66671 11.1667C6.66671 10.8905 6.89057 10.6667 7.16671 10.6667H7.50004C7.77618 10.6667 8.00004 10.8905 8.00004 11.1667C8.00004 11.4428 7.77618 11.6667 7.50004 11.6667H7.16671C6.89057 11.6667 6.66671 11.4428 6.66671 11.1667Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9252 6.06224C13.1669 5.92883 13.4711 6.01669 13.6045 6.25847L13.1667 6.50002C13.6045 6.25847 13.6044 6.25833 13.6045 6.25847L13.6051 6.25966L13.6059 6.26108L13.6078 6.26459L13.613 6.27434C13.6171 6.28204 13.6223 6.29212 13.6284 6.30451C13.6408 6.32929 13.6571 6.36337 13.676 6.40612C13.7138 6.49153 13.7622 6.61219 13.81 6.76305C13.9054 7.06405 14 7.49057 14 8.00002C14 8.50947 13.9054 8.936 13.81 9.23699C13.7622 9.38785 13.7138 9.50851 13.676 9.59392C13.6571 9.63667 13.6408 9.67075 13.6284 9.69553C13.6223 9.70792 13.6171 9.71801 13.613 9.7257L13.6078 9.73545L13.6059 9.73897L13.6051 9.74038L13.6048 9.741C13.6047 9.74114 13.6045 9.74157 13.1667 9.50002M12.7276 6.73915L12.7284 6.7406L12.7276 6.73915Z",fill:"currentColor"})]}))})),qD=n(50583),JD=F()("electron"),XD=function(e){var t=e.hasProject,n=e.onOpenVersionHistory,r=e.onOpenProfile,i=e.onOpenLanguageDialog,a=e.onSave,o=e.canSave,s=(0,be.UQ)().isMobile,l=c.useContext($n.ZP).profile;return(0,f.jsx)(w.I18n,{children:function(e){var c=e.i18n;return(0,f.jsxs)(_.pJ,{justifyContent:"space-between",alignItems:"center",noMargin:!0,expand:!0,children:[(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(M.x1,{noMargin:!0,children:!!t&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.Z,{size:"small",id:"main-toolbar-history-button",onClick:n,tooltip:{id:"Open version history"},color:"default",children:(0,f.jsx)(Ns,{})}),(0,f.jsx)(qs,{id:"main-toolbar-save-button",onSave:a,canSave:o})]})})}),(0,f.jsx)(M.sg,{children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[!JD&&!(0,ja._F)()&&(s?(0,f.jsx)($.Z,{size:"small",onClick:function(){return y.ZP.openExternalURL("https://gdevelop.io/download")},children:(0,f.jsx)(YD,{})}):(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Get the app"}),onClick:function(){return y.ZP.openExternalURL("https://gdevelop.io/download")},leftIcon:(0,f.jsx)(qD.Z,{})})),(0,f.jsx)(LD,{onOpenProfile:r}),l&&(0,f.jsx)(GD,{}),s?(0,f.jsx)($.Z,{size:"small",onClick:i,children:(0,f.jsx)(jS.Z,{fontSize:"small"})}):(0,f.jsx)(ba.Z,{label:c.language.toUpperCase(),onClick:i,icon:(0,f.jsx)(jS.Z,{fontSize:"small"})})]})})]})}})},KD=n(85902),QD={team:null,groups:null,members:null,admins:null,memberships:null,onChangeGroupName:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onChangeUserGroup:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onListUserProjects:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onDeleteGroup:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCreateGroup:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshMembers:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAvailableSeats:function(){return null},onCreateMembers:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onActivateMembers:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshAdmins:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSetAdmin:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onChangeMemberPassword:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onEditUser:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},$D=c.createContext(QD),eN=["value","callback","callbackErrorText","errorText","emptyErrorText","onCancel"],tN=function(e){var t=e.value,n=e.callback,r=e.callbackErrorText,i=e.errorText,u=e.emptyErrorText,d=e.onCancel,p=(0,go.Z)(e,eN),h=c.useState(!1),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(null),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState(t),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=k.trim(),!u||i){e.next=4;break}return j(u),e.abrupt("return");case 4:if(i!==t){e.next=7;break}return d(),e.abrupt("return");case 7:return x(!0),e.prev=8,e.next=11,n(i);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(8),console.error(e.t0),j(r);case 17:return e.prev=17,x(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[8,13,17,20]])})));return function(){return e.apply(this,arguments)}}(),S=c.useCallback((function(e,t){i&&j(null),w(t)}),[i]),P=c.useCallback((function(){w(t),d()}),[t,d]),I=i||C;return(0,f.jsx)(yi.ZP,(0,l.Z)({value:k,disabled:m,onChange:S,errorText:I,onKeyUp:function(e){(0,gn.ph)(e)?T():(0,gn.W$)(e)&&(e.stopPropagation(),P())},onKeyDown:function(e){(0,gn.W$)(e)&&e.stopPropagation()},endAdornment:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.Z,{edge:"end",onClick:P,disabled:m,size:"small",children:(0,f.jsx)(as.Z,{})}),(0,f.jsx)($.Z,{edge:"end",onClick:T,disabled:m,size:"small",children:(0,f.jsx)(co.Z,{})})]}),type:"text"},p))},nN=function(e){var t=e.group,n=e.onFinishEditingGroupName,r=e.allowDelete,i=e.onDeleteGroup,l=c.useState(!1),u=(0,s.Z)(l,2),d=u[0],p=u[1],h=c.useState(!1),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useCallback((function(){x(!0)}),[]),b=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,i(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("An error occurred when deleting the group ".concat(t.id),e.t0),p(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),[t,i]);return(0,f.jsx)(M.x1,{noMargin:!0,children:m?(0,f.jsx)(tN,{margin:"dense",maxLength:50,autoFocus:"desktopAndMobileDevices",value:t.name,callback:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t,r);case 2:x(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),callbackErrorText:(0,f.jsx)(w.Trans,{id:"An error occurred while renaming the group name. Please try again later."}),onCancel:function(){return x(!1)},emptyErrorText:(0,f.jsx)(w.Trans,{id:"Group name cannot be empty."})}):(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"block-title",children:t.name}),(0,f.jsx)($.Z,{onClick:v,size:"small",children:(0,f.jsx)(at.Z,{fontSize:"small"})}),r&&(0,f.jsx)($.Z,{onClick:b,size:"small",children:d?(0,f.jsx)(GI.Z,{size:10}):(0,f.jsx)(Jt.Z,{fontSize:"small"})})]})})},rN=function(e){var t=e.onValidateGroupName,n=e.onDismiss;return(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(tN,{margin:"dense",maxLength:50,autoFocus:"desktopAndMobileDevices",translatableHintText:{id:"New group name"},value:"",callback:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({name:r});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),callbackErrorText:(0,f.jsx)(w.Trans,{id:"An error occurred while creating the group. Please try again later."}),onCancel:n,emptyErrorText:(0,f.jsx)(w.Trans,{id:"Group name cannot be empty."})})})},iN={listItem:{padding:"4px 0",borderRadius:8,overflowWrap:"anywhere"},copyIconContainer:{opacity:.7,display:"flex"}},aN=(0,ut.x)("team-groups"),oN=function(e){var t=e.isTemporary,n=e.member,r=e.onListUserProjects,i=e.onDrag,u=e.onOpenContextMenu,d=(0,be.UQ)().isMobile,p=c.useContext(j.Z),h=c.useState(!1),g=(0,s.Z)(h,2),m=g[0],x=g[1];return c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,LM.g)(2e3);case 4:x(!1);case 5:case"end":return e.stop()}}),e)})))()}),[m]),(0,f.jsx)(aN,{canDrop:function(){return!1},beginDrag:function(){return i(n),{}},drop:function(){},children:function(e){var i=e.connectDragSource,a=e.connectDragPreview;return(0,f.jsx)(J.Z,{style:(0,l.Z)((0,l.Z)({},iN.listItem),{},{backgroundColor:t?p.paper.backgroundColor.light:void 0}),children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",expand:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[i((0,f.jsx)("div",{children:(0,f.jsx)(ct.Z,{})})),a((0,f.jsx)("div",{children:d?(0,f.jsx)(X.Z,{disableTypography:!0,primary:(0,f.jsx)(N.Z,{allowSelection:!0,noMargin:!0,children:n.username||n.email}),secondary:n.username?(0,f.jsx)(N.Z,{allowSelection:!0,noMargin:!0,color:"secondary",children:n.email}):null}):(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(n.username||n.fullName)&&(0,f.jsx)(N.Z,{allowSelection:!0,noMargin:!0,children:n.fullName?n.username?(0,f.jsx)(w.Trans,{id:"{0} ({1})",values:{0:n.fullName,1:n.username}}):n.fullName:n.username}),(0,f.jsx)(N.Z,{allowSelection:!0,noMargin:!0,color:"secondary",children:n.email}),(0,f.jsx)(Yt.Z,{size:"small",onClick:function(){x(!0),(0,vt.T)(n.email)},children:m?(0,f.jsx)(co.Z,{fontSize:"small"}):(0,f.jsx)("div",{style:iN.copyIconContainer,children:(0,f.jsx)(Xt.Z,{fontSize:"small"})})})]})}))]}),d?(0,f.jsx)(K.Z,{children:(0,f.jsx)(Yt.Z,{size:"small",edge:"end","aria-label":"menu",onClick:function(e){e.stopPropagation(),u(e,n)},children:(0,f.jsx)(Mh.Z,{})})}):(0,f.jsx)(T.Z,{primary:!0,rightIcon:(0,f.jsx)(ot.Z,{fontSize:"small"}),label:(0,f.jsx)(w.Trans,{id:"See projects"}),onClick:r})]})})}})},sN={listItem:{padding:0,marginTop:2,marginBottom:2,borderRadius:8,overflowWrap:"anywhere"},skeleton:{borderRadius:6}},lN=function(e){var t=e.user,n=e.currentFileMetadata,r=e.onClickBack,i=e.onOpenRecentFile,a=e.storageProviders,o=e.projects,s=e.onRefreshProjects,l=e.isLoadingProjects,u=(0,be.UQ)().isMobile,d=(0,yP.R1)({isMobile:u}),p=c.useRef(null),h=o?(0,yP.K)(o,t.id):null,g=c.useCallback((function(e,t){p.current&&p.current.open(e.clientX,e.clientY,{file:t})}),[]);return(0,f.jsxs)(yS.ZP,{title:(0,f.jsx)(w.Trans,{id:"{0}'s projects",values:{0:t.username||t.email}}),titleAdornment:(0,f.jsx)(T.Z,{primary:!0,disabled:l,label:u?(0,f.jsx)(w.Trans,{id:"Refresh"}):(0,f.jsx)(w.Trans,{id:"Refresh dashboard"}),onClick:function(){return s(t)},leftIcon:(0,f.jsx)(lo.Z,{fontSize:"small"})}),backAction:r,children:[(0,f.jsxs)(yS.L,{children:[!u&&(0,f.jsxs)(M.x1,{justifyContent:"space-between",children:[(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"File name"})})}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Location"})})}),(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(N.Z,{color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Last edited"})})})]}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,children:h?0===h.length?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"This user does not have projects yet."})}),(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"Only cloud projects can be displayed here. If the user has created local projects, they need to be saved as cloud projects to be visible."})})]}):(0,f.jsx)(Te.aV,{children:h.map((function(e){return(0,f.jsx)(qF,{file:e,currentFileMetadata:n,disabled:!1,isLoading:!1,onOpenContextMenu:g,onOpenProject:i,storageProviders:a,isWindowSizeMediumOrLarger:!u},e.fileMetadata.fileIdentifier)}))}):(0,f.jsx)(Te.aV,{children:new Array(5).fill(0).map((function(e,t){return(0,f.jsx)(J.Z,{style:sN.listItem,children:(0,f.jsx)(M.x1,{expand:!0,children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(pP.Z,{variant:"rect",height:d,width:"100%",style:sN.skeleton})})})},"skeleton-".concat(t))}))})})})]}),(0,f.jsx)(ns.Z,{ref:p,buildMenuTemplate:function(e,t){return function(e,t){return t?[{label:e._({id:"Open"}),click:function(){return i(t)}}]:[]}(e,t.file)}})]})},cN=function(e){var t=e.groups,n=e.members,i=e.memberships;if(!(t&&n&&i))return null;var a={NONE:{group:{id:"none",name:"none"},members:[]}},o=[];return n.forEach((function(e){var n=i.find((function(t){return t.userId===e.id}));if(n)if(e.deactivatedAt)o.push(e);else{var s=n.groups;if(s){var l=t.find((function(e){return e.id===s[0]}));if(l){var c=a[l.id];c?c.members=[].concat((0,r.Z)(c.members),[e]):a[l.id]={group:l,members:[e]}}}else{var u=a.NONE;a.NONE={members:[].concat((0,r.Z)(u&&u.members||[]),[e]),group:{id:"none",name:"none"}}}}})),t.forEach((function(e){e.id in a||(a[e.id]={group:e,members:[]})})),{active:a,inactive:o}},uN=function(e){return Object.keys(e).map((function(t){return"NONE"===t?null:e[t]})).filter(Boolean).sort((function(e,t){return e.group.name.localeCompare(t.group.name)}))},dN={card:{display:"flex",borderRadius:10,alignItems:"center",padding:16,maxWidth:1300},xlargeImageSize:{width:280,height:110},largeImageSize:{width:250,height:110},mediumImageSize:{width:120,height:100},smallImageSize:{width:200,height:110}},pN=function(e){var t=e.children,n=e.renderImage,r=c.useContext(j.Z),i=(0,be.UQ)().windowSize,a=(0,l.Z)((0,l.Z)({},dN.card),{},{border:"1px solid ".concat(r.palette.secondary)});return(0,f.jsx)("div",{style:a,children:(0,f.jsxs)(_.ep,{noMargin:!0,expand:!0,noResponsiveLandscape:!0,children:[n("small"===i?dN.smallImageSize:"medium"===i?dN.mediumImageSize:"large"===i?dN.largeImageSize:dN.xlargeImageSize),t]})})},fN=function(e){var t=e.onSeeResources;return e.unlocked?(0,f.jsx)(H.Z,{background:"medium",style:{padding:20},children:(0,f.jsxs)(_.ak,{alignItems:"flex-start",expand:!0,noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Content for Teachers"})}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body",color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Access GDevelop\u2019s resources for teaching game development and promote careers in technology."})}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See all"}),rightIcon:(0,f.jsx)(sP.Z,{fontSize:"small"}),primary:!0,fullWidth:!0,onClick:t})})]})}):(0,f.jsx)(pN,{renderImage:function(e){return(0,f.jsx)("img",{src:"res/education-resources.svg",style:e,alt:"Content for teachers"})},children:(0,f.jsxs)(_.ep,{noMargin:!0,expand:!0,alignItems:"stretch",noResponsiveLandscape:!0,children:[(0,f.jsxs)(_.ak,{alignItems:"flex-start",expand:!0,noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:(0,f.jsx)(w.Trans,{id:"Content for Teachers"})}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body",children:(0,f.jsx)(w.Trans,{id:"Access GDevelop\u2019s resources for teaching game development and promote careers in technology."})}),(0,f.jsx)(M.LZ,{})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(_.ak,{justifyContent:"center",alignItems:"center",noMargin:!0,children:[(0,f.jsx)(G.Z,{label:(0,f.jsx)(w.Trans,{id:"See resources"}),primary:!0,fullWidth:!0,onClick:t}),(0,f.jsx)(ba.Z,{label:(0,f.jsx)(w.Trans,{id:"About education plan"}),fullWidth:!0,onClick:function(){y.ZP.openExternalURL("https://gdevelop.io/pricing/education")}})]})]})})},hN=n(87622),gN=n(47221),mN=n(86567),xN=n(32677),vN=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},e),{},{children:(0,f.jsx)("rect",{x:"2.5",y:"2.5",width:"15",height:"15",rx:"1.5",stroke:"currentColor",fill:"none"})}))})),bN=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},e),{},{children:[(0,f.jsx)("rect",{x:"2.5",y:"2.5",width:"15",height:"15",rx:"1.5",fill:"currentColor",fillOpacity:"0.2",stroke:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4509 6.08872C14.6781 6.24571 14.7349 6.55714 14.5779 6.78431L10.145 13.1986L10.145 13.1987C9.42755 14.2368 7.90022 14.2566 7.1561 13.2374L7.55992 12.9426L7.1561 13.2374L5.42947 10.8725C5.26663 10.6495 5.31543 10.3367 5.53845 10.1739C5.76147 10.0111 6.07427 10.0599 6.23711 10.2829L7.96374 12.6477C8.30196 13.111 8.99622 13.102 9.32236 12.6301C9.32236 12.6301 9.32236 12.6301 9.32236 12.6301L13.7553 6.21578C13.9123 5.98861 14.2237 5.93172 14.4509 6.08872Z",fill:"currentColor"})]}))})),CN=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 6.75C7.5 4.67893 9.17894 3 11.25 3C13.3211 3 15 4.67893 15 6.75C15 8.82106 13.3211 10.5 11.25 10.5C11.0856 10.5 10.9235 10.4894 10.7642 10.4688L10.5227 10.7102C10.4173 10.8157 10.2742 10.875 10.125 10.875H9.375V11.625C9.375 11.7742 9.31574 11.9173 9.21025 12.0227L8.27275 12.9602C8.16726 13.0657 8.02418 13.125 7.875 13.125H7.125V13.875C7.125 14.0242 7.06574 14.1673 6.96025 14.2727L6.39775 14.8352C6.29226 14.9407 6.14918 15 6 15H3.5625C3.25184 15 3 14.7482 3 14.4375V12C3 11.8508 3.05926 11.7077 3.16475 11.6023L7.53124 7.23578C7.51061 7.07655 7.5 6.91439 7.5 6.75ZM11.25 4.125C9.80026 4.125 8.625 5.30025 8.625 6.75C8.625 6.94233 8.64558 7.12918 8.68447 7.30868C8.72497 7.4956 8.66771 7.6903 8.53247 7.82554L4.125 12.233V13.875H5.76701L6 13.642V12.5625C6 12.2518 6.25184 12 6.5625 12H7.64201L8.25 11.392V10.3125C8.25 10.0018 8.50184 9.75 8.8125 9.75H9.89201L10.1745 9.46753C10.3097 9.33228 10.5044 9.27503 10.6913 9.31553C10.8708 9.35442 11.0577 9.375 11.25 9.375C12.6997 9.375 13.875 8.19974 13.875 6.75C13.875 5.30025 12.6997 4.125 11.25 4.125Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 6C11.25 5.58577 11.5858 5.25 12 5.25C12.4142 5.25 12.75 5.58577 12.75 6C12.75 6.41423 12.4142 6.75 12 6.75C11.5858 6.75 11.25 6.41423 11.25 6Z",fill:"currentColor"})]}))})),jN=n(45019),yN=function(e){var t=e.member,n=e.onApply,r=e.onClose,i=e.isSaving,u=e.error,d=c.useState(null),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useState(null),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useState(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=!v||v.isAvailable&&!!h,S=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k&&h){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n(h);case 4:case"end":return e.stop()}}),e)}))),[h,k,n]);return(0,f.jsx)(E.ZP,{open:!0,title:(0,f.jsx)(w.Trans,{id:"Edit student"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:r,disabled:i,id:"close-button"},"close"),(0,f.jsx)($r.Z,{isLoading:i,children:(0,f.jsx)(E.vF,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Apply"}),onClick:S,disabled:i||!k,id:"apply-button"},"apply")})],onRequestClose:r,onApply:S,maxWidth:"sm",children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[u&&(0,f.jsx)(je.Z,{kind:"error",children:(0,f.jsx)(w.Trans,{id:"An error occurred while editing the student. Please try again."})}),(0,f.jsx)(yn.Z,{onChange:function(e){return g((0,l.Z)((0,l.Z)({},h),{},{fullName:e}))},value:h&&"undefined"!==typeof h.fullName?h.fullName:t.fullName||"",disabled:i,fullWidth:!0,commitOnBlur:!0,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Full name"})}),(0,f.jsx)(jN.uR,{initialUsername:t.username,value:h&&"undefined"!==typeof h.username?h.username:t.username||"",onChange:function(e,t){return g((0,l.Z)((0,l.Z)({},h),{},{username:t}))},disabled:i,allowEmpty:!0,onAvailabilityChecked:b,onAvailabilityCheckLoading:Z,isValidatingUsername:y})]})})},ZN={cell:{display:"flex",alignItems:"center"},mobileCell:{display:"flex",alignItems:"center",paddingRight:4},passwordTextFieldContainer:{height:21},passwordTextField:{fontSize:14}},kN=function(e){var t=e.member,n=e.isSelected,r=e.isArchived,i=e.onSelect,u=e.onChangePassword,d=e.onEdit,p=(0,be.UQ)().isMobile,h=c.useState(!1),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(!1),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState(!1),Z=(0,s.Z)(y,2),k=Z[0],T=Z[1],S=c.useState(null),P=(0,s.Z)(S,2),I=P[0],E=P[1],L=c.useState(null),A=(0,s.Z)(L,2),O=A[0],R=A[1],F=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.password||n!==t.password){e.next=3;break}return x(!1),e.abrupt("return");case 3:if(R(null),!(n.length<8||n.length>30)){e.next=7;break}return R((0,f.jsx)(w.Trans,{id:"Your password must be between 8 and 30 characters long."})),e.abrupt("return");case 7:return e.prev=7,e.next=10,u({userId:t.id,newPassword:n});case 10:x(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(7),console.error("An error occurred while changing member password",e.t0),R((0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(w.Trans,{id:"An error occurred."})," ",(0,f.jsx)(w.Trans,{id:"Please check your internet connection or try again later."})]}));case 17:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}(),[t.password,t.id,u]),D=(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(Vn.Z,{style:{margin:0},checked:n,onCheck:function(e,t){i(t)},uncheckedIcon:(0,f.jsx)(vN,{}),checkedIcon:(0,f.jsx)(bN,{})}),t.username||t.fullName?(0,f.jsx)(N.Z,{allowSelection:!0,style:(0,l.Z)((0,l.Z)({},pr.t),{},{opacity:r?.6:void 0}),tooltip:[t.fullName,t.username].filter(Boolean).join(" - "),children:(0,f.jsx)("b",{children:t.fullName?t.username?(0,f.jsx)(w.Trans,{id:"{0} ({1})",values:{0:t.fullName,1:t.username}}):t.fullName:t.username})}):(0,f.jsx)(N.Z,{style:(0,l.Z)((0,l.Z)({},pr.t),{},{opacity:r?.6:.7,paddingRight:1}),children:(0,f.jsx)("i",{children:(0,f.jsx)(w.Trans,{id:"Not set"})})}),!r&&(0,f.jsx)($.Z,{size:"small",onClick:function(){return T(!0)},tooltip:{id:"Change username or full name"},children:(0,f.jsx)(at.Z,{fontSize:"small"})})]}),B=(0,f.jsx)(N.Z,{style:(0,l.Z)((0,l.Z)({},pr.t),{},{opacity:.6}),allowSelection:!0,noMargin:!0,children:t.email}),U=m?(0,f.jsx)(M.x1,{children:(0,f.jsx)("div",{style:ZN.passwordTextFieldContainer,children:(0,f.jsx)(tN,{margin:"none",autoFocus:"desktop",value:t.password||"",callback:F,errorText:O,callbackErrorText:(0,f.jsx)(w.Trans,{id:"An error occurred while changing the password. Please try again later."}),emptyErrorText:(0,f.jsx)(w.Trans,{id:"Password cannot be empty"}),onCancel:function(){return x(!1)},style:ZN.passwordTextField})})}):(0,f.jsxs)(_.pJ,{alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,style:(0,l.Z)((0,l.Z)({},pr.t),{},{opacity:r?.55:.7,paddingRight:1}),allowSelection:!0,children:t.password||(0,f.jsx)("i",{children:(0,f.jsx)(w.Trans,{id:"Not stored"})})}),!r&&(0,f.jsx)($.Z,{size:"small",onClick:function(){return x(!0)},tooltip:{id:"Define custom password"},children:(0,f.jsx)(CN,{fontSize:"small"})})]}),V=k&&(0,f.jsx)(yN,{member:t,isSaving:C,error:I,onApply:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(null),j(!0),e.next=5,d({editedUserId:t.id,changes:n});case 5:T(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("An error occurred while editing user:",e.t0),E(e.t0);case 12:return e.prev=12,j(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(t){return e.apply(this,arguments)}}(),onClose:function(){T(!1),E(null)}});return p?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(xR.Z,{item:!0,xs:4,style:p?ZN.mobileCell:ZN.cell,children:D}),(0,f.jsx)(xR.Z,{item:!0,xs:4,style:p?ZN.mobileCell:ZN.cell,children:B}),(0,f.jsx)(xR.Z,{item:!0,xs:4,style:p?ZN.mobileCell:ZN.cell,children:U}),V]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(xR.Z,{item:!0,xs:9,style:p?ZN.mobileCell:ZN.cell,children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[D,B]})}),(0,f.jsx)(xR.Z,{item:!0,xs:3,style:p?ZN.mobileCell:ZN.cell,children:U}),V]})},wN=function(){var e=(0,c.useContext($D).getAvailableSeats)();return(0,f.jsxs)(M.x1,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,style:{opacity:.7},displayInlineAsSpan:!0,children:(0,f.jsx)(w.Trans,{id:"Seats available:"})}),(0,f.jsx)(N.Z,{noMargin:!0,displayInlineAsSpan:!0,children:(0,f.jsxs)("b",{children:["\xa0",e]})})]})},TN=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{d:"M10 13.25C9.58579 13.25 9.25 13.5858 9.25 14C9.25 14.4142 9.58579 14.75 10 14.75H14C14.4142 14.75 14.75 14.4142 14.75 14C14.75 13.5858 14.4142 13.25 14 13.25H10Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 5C3.25 4.58579 3.58579 4.25 4 4.25H20C20.4142 4.25 20.75 4.58579 20.75 5V9C20.75 9.41421 20.4142 9.75 20 9.75H19.75V19C19.75 19.4142 19.4142 19.75 19 19.75H5C4.58579 19.75 4.25 19.4142 4.25 19V9.75H4C3.58579 9.75 3.25 9.41421 3.25 9V5ZM5.75 18.25H18.25V9.75H5.75V18.25ZM19.25 8.25H4.75V5.75H19.25V8.25Z",fill:"currentColor"})]}))})),SN=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,f.jsx)("path",{d:"M12.0001 2.25C11.5367 2.25 11.0828 2.37417 10.6823 2.60837C10.2821 2.84244 9.95013 3.1777 9.71576 3.5791L6.2295 9.62537C6.0226 9.9842 6.14577 10.4428 6.5046 10.6497C6.86344 10.8566 7.32206 10.7335 7.52897 10.3746L11.0111 4.33545L11.012 4.33392C11.1188 4.15158 11.267 4.00417 11.4397 3.90316C11.6126 3.802 11.8055 3.75 12.0001 3.75C12.1947 3.75 12.3876 3.802 12.5606 3.90316C12.7333 4.00417 12.8814 4.15158 12.9882 4.33392L12.9891 4.33545L14.8862 7.62569L13.532 7.06198C13.1496 6.9028 12.7105 7.08377 12.5514 7.46618C12.3922 7.84858 12.5731 8.28762 12.9556 8.4468L15.9609 9.69778C16.1446 9.77422 16.351 9.77458 16.5349 9.69878C16.7189 9.62297 16.8651 9.47722 16.9415 9.29358L18.1925 6.28821C18.3517 5.90581 18.1707 5.46676 17.7883 5.30759C17.4059 5.14841 16.9669 5.32938 16.8077 5.71178L16.2654 7.01463L14.2865 3.58264L14.2845 3.57911C14.0501 3.17771 13.7181 2.84244 13.3179 2.60837C12.9175 2.37417 12.4635 2.25 12.0001 2.25Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M19.0248 11.8004C18.8179 11.4415 18.3593 11.3184 18.0005 11.5253C17.6416 11.7322 17.5185 12.1908 17.7254 12.5496L21.0906 18.3859C21.1939 18.5736 21.2495 18.788 21.2501 19.0079C21.2507 19.2296 21.1953 19.446 21.0914 19.6355C20.9875 19.8248 20.8397 19.979 20.6655 20.0855C20.4926 20.1912 20.2985 20.2471 20.1021 20.25H16.1679L17.2481 19.1698C17.541 18.8769 17.541 18.402 17.2481 18.1091C16.9552 17.8162 16.4803 17.8162 16.1874 18.1091L13.8856 20.411C13.7449 20.5516 13.6659 20.7424 13.6659 20.9413C13.6659 21.1402 13.7449 21.331 13.8856 21.4716L16.1874 23.7735C16.4803 24.0664 16.9552 24.0664 17.2481 23.7735C17.541 23.4806 17.541 23.0057 17.2481 22.7128L16.2853 21.75L20.1069 21.75L20.1155 21.75C20.5863 21.7446 21.0457 21.6112 21.4478 21.3653C21.8497 21.1196 22.1793 20.7711 22.4065 20.357C22.6336 19.9431 22.7514 19.4767 22.7501 19.0039C22.7488 18.531 22.6286 18.0652 22.3992 17.6526L19.0248 11.8004Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M3.53981 14.2901L2.15351 14.7878C1.76366 14.9278 1.33417 14.7252 1.19421 14.3353C1.05426 13.9455 1.25685 13.516 1.6467 13.376L4.71059 12.2761C4.8978 12.2089 5.10405 12.2188 5.28395 12.3037C5.46385 12.3885 5.60268 12.5414 5.66989 12.7286L6.76979 15.7925C6.90974 16.1823 6.70716 16.6118 6.31731 16.7518C5.92745 16.8917 5.49796 16.6892 5.35801 16.2993L4.88022 14.9684L2.90966 18.386C2.80635 18.5737 2.75072 18.7881 2.75013 19.0079C2.74953 19.2296 2.8049 19.446 2.90884 19.6355C3.0127 19.8248 3.1605 19.979 3.33475 20.0855C3.50766 20.1912 3.70173 20.2471 3.89811 20.25H11.0001C11.4143 20.25 11.7501 20.5858 11.7501 21C11.7501 21.4142 11.4143 21.75 11.0001 21.75H3.88476C3.41397 21.7446 2.95454 21.6112 2.55241 21.3653C2.1505 21.1196 1.82096 20.7711 1.59378 20.357C1.36669 19.9431 1.24886 19.4767 1.25013 19.0039C1.25141 18.531 1.37175 18.0653 1.60111 17.6527L1.60684 17.6423L3.53981 14.2901Z",fill:"currentColor"})]}))})),PN={container:{padding:24},mobileContainer:{padding:8}},IN=function(e){var t=e.availableSeats,n=e.onCreateStudentAccounts,r=e.isCreatingMembers,i=c.useState(t.toString()),l=(0,s.Z)(i,2),u=l[0],d=l[1],p=c.useState(null),h=(0,s.Z)(p,2),g=h[0],m=h[1],x=(0,be.UQ)().isMobile,v=parseInt(u,10),b=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!v||v>t||v<=0)){e.next=2;break}return e.abrupt("return");case 2:return m(null),e.prev=3,e.next=6,n(v);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("An error occurred while batch creating member accounts:",e.t0),m((0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(w.Trans,{id:"An error occurred while creating the accounts."})," ",(0,f.jsx)(w.Trans,{id:"Please check your internet connection or try again later."})]}));case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))),[v,n,t]);return(0,f.jsx)(H.Z,{style:x?PN.mobileContainer:PN.container,variant:"outlined",background:"medium",children:(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(N.Z,{size:"block-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"You don't have any students yet."})}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Start by creating their accounts"})}),r?(0,f.jsxs)(_.pJ,{alignItems:"center",children:[(0,f.jsx)(GI.Z,{size:10}),(0,f.jsx)(N.Z,{style:{opacity:.7},noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Generating your student\u2019s accounts..."})})]}):(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(yi.ZP,{type:"number",min:0,value:u,onChange:function(e,t){return d(t)},translatableHintText:{id:"Number of students"},errorText:g}),(0,f.jsx)(G.Z,{primary:!0,disabled:!v||v>t,icon:(0,f.jsx)(it.Z,{fontSize:"small"}),label:x?(0,f.jsx)(w.Trans,{id:"Create"}):(0,f.jsx)(w.Trans,{id:"Create accounts"}),onClick:b})]})]})})},EN=n(78377),MN={selectedMembersControlsContainer:{padding:8},selectedMembersControlsContainerMobile:{padding:8,marginTop:12,marginBottom:12},subscriptionPaper:{padding:"8px 16px 8px 8px"}},LN={"no-seats-available":(0,f.jsx)(w.Trans,{id:"Your team does not have enough seats for a new admin."}),"user-not-found":(0,f.jsx)(w.Trans,{id:"The email you provided could not be found."}),"user-already-added":(0,f.jsx)(w.Trans,{id:"The email you provided is already an admin in your team."}),"user-has-subscription":(0,f.jsx)(w.Trans,{id:"The email you provided already has a subscription with GDevelop. Please ask them to cancel it before defining them as teacher in your team."}),"user-with-autogenerated-email":(0,f.jsx)(w.Trans,{id:"A student account cannot be an admin of your team."}),"user-owner":(0,f.jsx)(w.Trans,{id:"The main account of the Education plan cannot be modified."}),"not-allowed":(0,f.jsx)(w.Trans,{id:"You don't have enough rights to add a new admin."}),unexpected:(0,f.jsx)(w.Trans,{id:"An unexpected error happened. Please contact us for more details."})},AN={"user-not-found":(0,f.jsx)(w.Trans,{id:"The email you provided could not be found."}),"user-not-admin":(0,f.jsx)(w.Trans,{id:"The email you provided is not an admin in your team."}),"user-owner":(0,f.jsx)(w.Trans,{id:"The main account of the Education plan cannot be modified."}),"not-allowed":(0,f.jsx)(w.Trans,{id:"You don't have enough rights to add a new admin."}),unexpected:(0,f.jsx)(w.Trans,{id:"An unexpected error happened. Please contact us for more details."})},ON="mailto:education@gdevelop.io?subject=Purchase%20Education%20plan%20seats",RN=function(e){var t=e.onClose,n=e.onAddTeacher,r=c.useState(""),i=(0,s.Z)(r,2),l=i[0],u=i[1],d=c.useState(!1),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useState(!0),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useState(null),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),Z(null),e.prev=2,e.next=5,n(l);case 5:u(""),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),(t=(0,uo.T)(e.t0))?(r=404===t.status?"user-not-found":403===t.status?"not-allowed":"team-admin-creation/user-with-autogenerated-email"===t.code?"user-with-autogenerated-email":"team-admin-creation/owner-cannot-be-modified"===t.code?"user-owner":"team-admin-creation/team-full"===t.code?"no-seats-available":"team-admin-creation/user-has-subscription"===t.code?"user-has-subscription":"team-admin-creation/user-not-admin"===t.code?"user-already-added":"unexpected",Z(r)):Z("unexpected");case 13:return e.prev=13,g(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,8,13,16]])}))),[l,n]);return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Add a teacher"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Back"}),disabled:h,primary:!1,onClick:t},"back"),(0,f.jsx)($r.Z,{isLoading:h,children:(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Add"}),primary:!0,onClick:k,disabled:h})},"add-collaborator")],maxWidth:"xs",cannotBeDismissed:h,onRequestClose:t,onApply:k,open:!0,children:(0,f.jsx)(mN.Z,{onSubmit:k,name:"addCollaborator",children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(yi.ZP,{autoFocus:"desktop",value:l,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Email"}),type:"email",onChange:function(e,t){v||b(!0),y&&Z(null),u(t)},errorText:v?null:(0,f.jsx)(w.Trans,{id:"Invalid email address."}),fullWidth:!0,onBlur:function(e){var t=e.currentTarget.value.trim();u(t),t&&b(xN.H.test(t))},disabled:h}),y&&(0,f.jsx)(je.Z,{kind:"error",children:LN[y]})]})})})},FN=function(e){var t=e.onClose,n=c.useContext($n.ZP),i=n.profile,l=n.subscription,u=c.useContext(mo.J),d=u.openSubscriptionDialog,p=(0,u.getSubscriptionPlansWithPricingSystems)(),h=c.useState([]),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(!1),b=(0,s.Z)(v,2),C=b[0],j=b[1],Z=c.useState(!1),k=(0,s.Z)(Z,2),S=k[0],P=k[1],I=c.useState(!1),L=(0,s.Z)(I,2),A=L[0],O=L[1],R=c.useState(!1),F=(0,s.Z)(R,2),D=F[0],B=F[1],U=c.useState(null),V=(0,s.Z)(U,2),z=V[0],W=V[1],Y=c.useState(null),q=(0,s.Z)(Y,2),J=q[0],X=q[1],K=(0,Ye.Z)().showConfirmation,ee=(0,be.UQ)().isMobile,te=c.useState(null),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],ae=c.useState(!1),oe=(0,s.Z)(ae,2),se=oe[0],le=oe[1],ce=c.useState(!1),ue=(0,s.Z)(ce,2),de=ue[0],fe=ue[1],he=c.useContext($D),ge=he.groups,me=he.team,xe=he.admins,ve=he.members,Ce=he.memberships,ye=he.onRefreshMembers,Ze=he.getAvailableSeats,ke=he.onCreateMembers,we=he.onChangeMemberPassword,Te=he.onActivateMembers,Se=he.onSetAdmin,Pe=he.onRefreshAdmins,Ie=he.onEditUser;c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,LM.g)(2e3);case 4:B(!1);case 5:case"end":return e.stop()}}),e)})))()}),[D]);var Ee=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.editedUserId,r=t.changes,e.next=3,Ie(n,r);case 3:return e.next=5,ye();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Ie,ye]),Me=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.newPassword,e.next=3,we(n,r);case 3:return e.next=5,ye();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ye,we]),Le=c.useCallback((function(){if(ve){var e="Username,Full Name,Email,Password";(0===m.length?ve.filter((function(e){return!e.deactivatedAt})):ve.filter((function(e){return m.includes(e.id)}))).forEach((function(t){e+="\n".concat(t.username||"",",").concat(t.fullName||"",",").concat(t.email,",").concat(t.password||"")})),(0,vt.T)(e),B(!0)}}),[m,ve]),Ae=!p,Oe=Ze(),Re=l&&l.planId&&p?p.find((function(e){return e.id===l.planId})):null,Fe=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!Oe||t>Oe||C)){e.next=2;break}return e.abrupt("return");case 2:return j(!0),e.prev=3,e.next=6,ke(t);case 6:return e.next=8,ye();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("An error occurred when creating members: ",e.t0);case 13:return e.prev=13,j(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),[ke,ye,Oe,C]),De=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(t),X(null),e.prev=2,e.next=5,Se(t,!1);case 5:return e.next=7,Pe();case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),(n=(0,uo.T)(e.t0))?(r=404===n.status?"user-not-found":403===n.status?"not-allowed":"team-admin-creation/owner-cannot-be-modified"===n.code?"user-owner":"team-admin-creation/user-not-admin"===n.code?"user-not-admin":"unexpected",X(r)):X("unexpected");case 14:return e.prev=14,W(null),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,9,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[Se,Pe]),Ne=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(t,!0);case 2:return e.next=4,Pe();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Se,Pe]),_e=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==m.length){e.next=2;break}return e.abrupt("return");case 2:if(ie(null),e.prev=3,t){e.next=10;break}return e.next=7,K({title:{id:"Archive {0} accounts?",values:{0:m.length}},confirmButtonLabel:{id:"Archive {0} accounts",values:{0:m.length}},dismissButtonLabel:{id:"Cancel"},message:{id:"Projects in disabled accounts will not be deleted. All disabled accounts can be reactivated after 15 days."},level:"info",maxWidth:"xs"});case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:return t?O(!0):P(!0),e.next=13,Te(m,t);case 13:return t||x([]),e.next=16,ye();case 16:e.next=25;break;case 18:e.prev=18,e.t0=e.catch(3),n=(0,uo.T)(e.t0),r=null,n&&("user-activation/team-full"===n.code?r=(0,f.jsx)(w.Trans,{id:"You don't have enough available seats to restore those accounts."}):"user-activation/user-deactivated-recently"===n.code?r=(0,f.jsx)(w.Trans,{id:"You have to wait {0} days before you can reactivate an archived account.",values:{0:n.data?n.data.daysToWait:15}}):"user-activation/member-outside-of-team"===n.code&&(r=(0,f.jsx)(w.Trans,{id:"You don't have enough rights to manage those accounts."}))),r||(r=(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(w.Trans,{id:"An unknown error happened."})," ",(0,f.jsx)(w.Trans,{id:"Please check your internet connection or try again later."})]})),ie(r);case 25:return e.prev=25,t?O(!1):P(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[3,18,25,28]])})));return function(t){return e.apply(this,arguments)}}(),[Te,ye,m,K]),Be=cN({groups:ge,members:ve,memberships:Ce});if(!xe||!ve||!me||!ge||!Ce||!Be)return null;var Ue=Be.active,Ve=Be.inactive,He=[Ue.NONE?{group:null,members:Ue.NONE.members}:null].concat((0,r.Z)(uN(Ue))).filter(Boolean),ze=ve.filter((function(e){return!e.deactivatedAt})),We=ze.every((function(e){return m.includes(e.id)})),Ge=ve.filter((function(e){return m.includes(e.id)})),qe=Ge.some((function(e){return!e.deactivatedAt})),Je=Ge.some((function(e){return!!e.deactivatedAt})),Xe=0===ve.length,Ke=0===ze.length;return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Manage seats"}),flexColumnBody:!0,fullHeight:!0,open:!0,onRequestClose:t,children:Ae?(0,f.jsx)(M.sg,{useFullHeight:!0,expand:!0,justifyContent:"center",alignItems:"center",children:(0,f.jsx)(GI.Z,{})}):(0,f.jsxs)(_.ak,{noMargin:!0,children:[Re&&(0,f.jsx)(H.Z,{background:"light",style:MN.subscriptionPaper,children:(0,f.jsxs)(_.ep,{alignItems:"center",justifyContent:"space-between",noMargin:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,bo.sG)({planId:Re.id,logoSize:20}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)("b",{children:(0,vo.a)(n,Re.nameByLocale).toUpperCase()})}),(0,f.jsx)(Q.Z,{label:me.seats,size:"small"}),(0,f.jsx)(N.Z,{noMargin:!0,color:"secondary",children:(0,f.jsx)(w.Trans,{id:"Seats"})})]}),(0,f.jsx)(ba.Z,{secondary:!0,label:(0,f.jsx)(w.Trans,{id:"Manage subscription"}),onClick:function(){return d({analyticsMetadata:{reason:"Manage subscription as teacher",recommendedPlanId:"gdevelop_education",placementId:"education"},filter:"education"})}})]})}),0===Oe&&(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"You\u2019ve reached the maximum amount of available seats. <0>Increase the number of seats</0> on your subscription to invite more students and collaborators.",components:[(0,f.jsx)(pe.Z,{href:ON,onClick:function(){return y.ZP.openExternalURL(ON)}})]})}),(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Teacher accounts"})}),(0,f.jsx)(M.sg,{noMargin:!0,children:xe&&xe.map((function(e){return(0,f.jsx)(gN.Z,{username:e.username,fullName:e.fullName,email:e.email,level:null,onDelete:function(){return De(e.email)},disabled:i&&e.id===i.id||!!z&&z===e.email},e.id)}))}),J&&(0,f.jsx)(je.Z,{kind:"error",children:AN[J]}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(G.Z,{primary:!0,disabled:null!==Oe&&Oe<=0,icon:(0,f.jsx)(it.Z,{fontSize:"small"}),label:(0,f.jsx)(w.Trans,{id:"Add teacher"}),onClick:function(){return le(!0)}})}),(0,f.jsx)(or.Z,{}),(0,f.jsxs)(_.ep,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Student accounts"})}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(wN,{}),(0,f.jsx)(M.x1,{expand:!0,noMargin:!0,justifyContent:"flex-end",children:null!==Oe&&Oe<=0?(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Purchase seats"}),leftIcon:(0,f.jsx)(EN.Z,{fontSize:"small"}),onClick:function(){return y.ZP.openExternalURL(ON)}}):(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Add student"}),icon:C?(0,f.jsx)(GI.Z,{size:10}):(0,f.jsx)(it.Z,{fontSize:"small"}),onClick:function(){return Fe(1)},disabled:C})})]})]}),Xe&&null!==Oe&&(0,f.jsx)(IN,{availableSeats:Oe,isCreatingMembers:C,onCreateStudentAccounts:Fe}),(!Xe||!Ke)&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(H.Z,{style:ee?MN.selectedMembersControlsContainerMobile:MN.selectedMembersControlsContainer,background:"light",children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsxs)(M.x1,{justifyContent:"space-between",noMargin:!0,alignItems:"center",children:[(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,children:[(0,f.jsx)(Vn.Z,{style:{margin:0},checked:We&&m.length>0,onCheck:function(e,t){x(t?ve.filter((function(e){return!e.deactivatedAt})).map((function(e){return e.id})):[])},uncheckedIcon:(0,f.jsx)(vN,{}),checkedIcon:(0,f.jsx)(bN,{})}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Select all active"})})]}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Archive accounts"},disabled:0===m.length||Je||S,onClick:function(){return _e(!1)},children:S?(0,f.jsx)(GI.Z,{size:22}):(0,f.jsx)(TN,{})}),(0,f.jsx)($.Z,{size:"small",tooltip:{id:"Restore accounts"},disabled:0===m.length||qe||A,onClick:function(){return _e(!0)},children:A?(0,f.jsx)(GI.Z,{size:22}):(0,f.jsx)(SN,{})}),(0,f.jsx)($.Z,{size:"small",tooltip:0===m.length?{id:"Copy active credentials to CSV"}:{id:"Copy {0} credentials to CSV",values:{0:m.length}},disabled:Ke&&0===m.length,onClick:Le,children:D?(0,f.jsx)(co.Z,{}):(0,f.jsx)(Xt.Z,{})})]})]}),re&&(0,f.jsx)(je.Z,{kind:"error",children:re})]})}),(0,f.jsxs)(M.sg,{children:[!ee&&(0,f.jsxs)(kS.Z,{cols:2,cellHeight:"auto",children:[(0,f.jsx)(xR.Z,{item:!0,xs:9,children:(0,f.jsx)(N.Z,{style:{opacity:.7},children:(0,f.jsx)(w.Trans,{id:"Student"})})}),(0,f.jsx)(xR.Z,{item:!0,xs:3,children:(0,f.jsx)(N.Z,{style:{opacity:.7},children:(0,f.jsx)(w.Trans,{id:"Password"})})})]}),He.map((function(e,t){var n=e.group,i=e.members;return(0,f.jsxs)(c.Fragment,{children:[t>0&&(0,f.jsx)(M.LZ,{}),(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(N.Z,{size:"sub-title",children:n?(0,f.jsx)(w.Trans,{id:"Room: {0}",values:{0:n.name}}):(0,f.jsx)(w.Trans,{id:"Lobby"})})}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(kS.Z,{cols:ee?3:2,cellHeight:"auto",children:i.map((function(e){return(0,f.jsx)(kN,{member:e,onChangePassword:Me,onEdit:Ee,isSelected:m.includes(e.id),onSelect:function(t){var n=m.indexOf(e.id);if(t)-1===n&&x([].concat((0,r.Z)(m),[e.id]));else{var i=(0,r.Z)(m);n>=0&&(i.splice(n,1),x(i))}}},e.id)}))})})]},n?n.id:"lobby")})),Ve.length>0&&(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(M.LZ,{}),(0,f.jsxs)(M.x1,{noMargin:!0,children:[de?(0,f.jsx)($.Z,{size:"small",edge:"end","aria-label":"collapse",onClick:function(){return fe(!1)},children:(0,f.jsx)(st.Z,{})}):(0,f.jsx)($.Z,{size:"small",edge:"end","aria-label":"expand",onClick:function(){return fe(!0)},children:(0,f.jsx)(ot.Z,{})}),(0,f.jsx)(N.Z,{size:"sub-title",children:(0,f.jsx)(w.Trans,{id:"Archived accounts"})})]}),(0,f.jsx)(M.sg,{children:(0,f.jsx)(hN.Z,{in:de,timeout:"auto",unmountOnExit:!0,children:(0,f.jsx)(kS.Z,{cols:2,cellHeight:"auto",children:Ve.map((function(e){return(0,f.jsx)(kN,{member:e,isArchived:!0,onChangePassword:Me,onEdit:Ee,isSelected:m.includes(e.id),onSelect:function(t){var n=m.indexOf(e.id);if(t)-1===n&&x([].concat((0,r.Z)(m),[e.id]));else{var i=(0,r.Z)(m);n>=0&&(i.splice(n,1),x(i))}}},e.id)}))})})})]},"archived")]})]})]})}),se&&(0,f.jsx)(RN,{onClose:function(){return le(!1)},onAddTeacher:Ne})]})}})},DN={list:{padding:0},lobbyContainer:{padding:16},roomsContainer:{paddingRight:16},educationCardContainer:{marginTop:12},manageSeatsInsertContainer:{padding:16,display:"flex",alignItems:"center",border:"1px solid",borderRadius:8}},NN=function(e,t){return(e.username||e.email).localeCompare(t.username||t.email)},_N=(0,Cd.L)("team-groups"),BN=c.forwardRef((function(e,t){e.project;var n=e.onOpenRecentFile,i=e.storageProviders,u=e.currentFileMetadata,d=e.onOpenTeachingResources,p=c.useContext($D),h=p.groups,g=p.members,m=p.memberships,x=p.onChangeGroupName,v=p.onChangeUserGroup,b=p.onListUserProjects,C=p.onDeleteGroup,y=p.onCreateGroup,Z=p.onRefreshMembers,k=p.onRefreshAdmins,S=p.getAvailableSeats,P=p.onCreateMembers,I=c.useContext(j.Z),E=c.useState(!1),L=(0,s.Z)(E,2),A=L[0],O=L[1],R=(0,gt.Z)(),F=(0,be.UQ)().isMobile,D=c.useRef(null);c.useImperativeHandle(t,(function(){return{forceUpdate:R}}));var B=c.useRef(null),V=c.useState(null),z=(0,s.Z)(V,2),W=z[0],Y=z[1],q=c.useState(null),J=(0,s.Z)(q,2),X=J[0],K=J[1],Q=c.useState(!1),$=(0,s.Z)(Q,2),ee=$[0],te=$[1],ne=c.useState(!1),re=(0,s.Z)(ne,2),ie=re[0],ae=re[1],oe=c.useState(!1),se=(0,s.Z)(oe,2),le=se[0],ce=se[1],ue=c.useState(!1),de=(0,s.Z)(ue,2),pe=de[0],fe=de[1],he=c.useState(null),ge=(0,s.Z)(he,2),me=ge[0],xe=ge[1],ve=c.useCallback((function(e){B.current=e}),[]),Ce=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.prev=1,Y(t),e.next=5,b(t);case 5:n=e.sent,K(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:return e.prev=12,te(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),[b]),je=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce(!0),e.prev=1,e.next=4,Z();case 4:return e.next=6,k();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("An error occurred when refreshing team members:",e.t0);case 11:return e.prev=11,ce(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),[Z,k]),ye=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,xe({groupId:n.id,users:[t]}),e.next=4,v(t,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("An error occurred when changing user ".concat(t.email," to group ").concat(n.name,": "),e.t0);case 9:return e.prev=9,xe(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[v]),Ze=S(),ke=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!Ze||t>Ze||t<=0||pe)){e.next=2;break}return e.abrupt("return");case 2:return fe(!0),e.prev=3,e.next=6,P(t);case 6:return e.next=8,je();case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(3),console.error("An error occurred when creating members: ",e.t0),e.t0;case 14:return e.prev=14,fe(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,10,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[P,je,Ze,pe]),we=c.useCallback((function(e,t){D.current&&D.current.open(e.clientX,e.clientY,{member:t})}),[]),Te=cN({groups:h,members:g,memberships:m});if(!Te)return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(yS.ZP,{children:(0,f.jsx)(yS.L,{children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,expand:!0,alignItems:"center",children:(0,f.jsx)(GI.Z,{})})})})})});var Se=Te.active;if(W)return(0,f.jsx)(lN,{user:W,currentFileMetadata:u,projects:X,storageProviders:i,onOpenRecentFile:n,onClickBack:function(){Y(null),K(null)},onRefreshProjects:Ce,isLoadingProjects:ee});var Pe=Se.NONE,Ie=Pe&&me?{group:Pe.group,members:Pe.members.filter((function(e){return!me.users.includes(e)}))}:Pe,Ee=uN(Se),Me=(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},DN.manageSeatsInsertContainer),{},{border:"1px solid ".concat(I.dialog.separator)}),children:(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,useLargeSpacer:!0,expand:!0,justifyContent:"space-between",children:[(0,f.jsx)(wN,{}),(0,f.jsx)(G.Z,{primary:!0,label:F?(0,f.jsx)(w.Trans,{id:"Manage"}):(0,f.jsx)(w.Trans,{id:"Manage seats"}),icon:(0,f.jsx)(Wr,{fontSize:"small"}),onClick:function(){return O(!0)}})]})}),Le=!!g&&0===g.filter((function(e){return!e.deactivatedAt})).length;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(yS.ZP,{renderSubtitle:function(){return(0,f.jsx)("div",{style:DN.educationCardContainer,children:(0,f.jsx)(fN,{onSeeResources:d,unlocked:!0})})},children:[(0,f.jsx)(yS.L,{children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",useLargeSpacer:!0,children:[(0,f.jsx)(N.Z,{size:"title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Classrooms"})}),!F&&(0,f.jsx)(T.Z,{primary:!0,disabled:le,label:(0,f.jsx)(w.Trans,{id:"Refresh dashboard"}),onClick:je,leftIcon:(0,f.jsx)(lo.Z,{fontSize:"small"})})]}),(0,f.jsx)(M.sg,{noMargin:!0,children:F?(0,f.jsx)(T.Z,{primary:!0,disabled:le,label:(0,f.jsx)(w.Trans,{id:"Refresh"}),onClick:je,leftIcon:(0,f.jsx)(lo.Z,{fontSize:"small"})}):Me})]})}),(0,f.jsxs)(yS.L,{children:[F?(0,f.jsxs)(f.Fragment,{children:[Me,(0,f.jsx)(M.LZ,{})]}):null,(0,f.jsx)(M.LZ,{}),(Ie||Le)&&(0,f.jsx)(H.Z,{background:"medium",style:DN.lobbyContainer,children:(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(N.Z,{size:"section-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Lobby"})}),Le&&null!==Ze?(0,f.jsx)(IN,{availableSeats:Ze,onCreateStudentAccounts:ke,isCreatingMembers:pe}):(0,f.jsx)(U.Z,{style:DN.list,children:Ie.members.sort(NN).map((function(e){return(0,f.jsx)(oN,{isTemporary:!1,onOpenContextMenu:we,member:e,onListUserProjects:function(){return Ce(e)},onDrag:ve},e.id)}))})]})})}),(0,f.jsxs)("div",{style:DN.roomsContainer,children:[(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(N.Z,{size:"section-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Rooms"})}),(0,f.jsx)(G.Z,{primary:!0,label:F?(0,f.jsx)(w.Trans,{id:"Create"}):(0,f.jsx)(w.Trans,{id:"Create a new room"}),icon:(0,f.jsx)(it.Z,{fontSize:"small"}),onClick:function(){return ae(!0)}})]}),ie&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(rN,{onValidateGroupName:y,onDismiss:function(){return ae(!1)}})}),(0,f.jsx)(_.ak,{noMargin:!0,children:Ee.length>0?Ee.map((function(e){var t=e.group,n=e.members,i=(0,r.Z)(n);return me&&me.groupId===t.id&&me.users.forEach((function(e){n.some((function(t){return t.id===e.id}))||i.push(e)})),(0,f.jsx)(_N,{canDrop:function(){return!0},drop:function(){var e=B.current;e&&(ye(e,t),B.current=null)},children:function(e){var n=e.connectDropTarget,r=e.isOver;return n((0,f.jsx)("div",{style:r?{backgroundColor:I.paper.backgroundColor.light,outline:"2px dashed ".concat(I.dropIndicator.canDrop)}:void 0,children:(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(nN,{group:t,onFinishEditingGroupName:x,allowDelete:0===i.length,onDeleteGroup:C})}),(0,f.jsx)(U.Z,{style:DN.list,children:i.sort(NN).map((function(e){var t=!!me&&me.users.some((function(t){return t.id===e.id}));return(0,f.jsx)(oN,{isTemporary:t,member:e,onOpenContextMenu:we,onListUserProjects:function(){return Ce(e)},onDrag:ve},e.id+(t?"_temp":""))}))})]})})}))}},t.id)})):ie?null:(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"Create a room and drag and drop members in it."})})})]})]}),(0,f.jsx)(ns.Z,{ref:D,buildMenuTemplate:function(e,t){return function(e,t){return[{label:e._({id:"See projects"}),click:function(){return Ce(t)}},{label:e._({id:"Copy email address"}),click:function(){return(0,vt.T)(t.email)}}]}(e,t.member)}})]}),A&&(0,f.jsx)(FN,{onClose:function(){return O(!1)}})]})})),UN=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Team section"}),scope:"start-page-team",children:(0,f.jsx)(BN,(0,l.Z)({},e))})},VN=function(e){var t=e.children,n=c.useContext($n.ZP),i=n.limits,u=n.profile,d=n.getAuthorizationHeader,p=n.authenticated,h=c.useState(null),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(null),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState(null),Z=(0,s.Z)(y,2),k=Z[0],w=Z[1],T=c.useState(null),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=c.useState(null),M=(0,s.Z)(E,2),L=M[0],A=M[1],O=u?u.id:null;c.useEffect((function(){p||(j(null),x(null),w(null),A(null))}),[p]),c.useEffect((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&(i&&i.capabilities.classrooms&&i.capabilities.classrooms.showClassroomTab)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,xr.wO)(d,O);case 4:t=e.sent,j(t[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[d,O,i]),c.useEffect((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&O){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,xr.TA)(d,O,C.id);case 5:t=e.sent,x(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("An error occurred while fetching groups:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[C,d,O]);var R=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&O){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,xr.on)(d,O,C.id);case 5:return t=e.sent,w(t),e.next=9,(0,xr.hV)(d,O,C.id);case 9:n=e.sent,I(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("An error occurred while fetching members:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),[C,d,O]),F=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&O){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,xr.UD)(d,{teamId:C.id,quantity:t,adminUserId:O});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("An error occurred while creating team members:",e.t0),(0,bi.gR)({rawError:e.t0,message:"There was an error while creating students in your plan. You can report it at education@gdevelop.io or try again later.",errorId:"student-creation-error"});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),[C,d,O]),D=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,xr.uz)(d,{userId:O,editedUserId:t,changes:n});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[d,O]),N=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,xr.Bw)(d,{adminUserId:O,userId:t,newPassword:n});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("An error occurred while changing password:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[d,O]),_=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&C&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,xr.$E)(d,{adminUserId:O,userIds:t,teamId:C.id,activate:n});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[d,O,C]);c.useEffect((function(){R()}),[R]);var B=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&O){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,xr.YB)(d,O,C.id);case 5:t=e.sent,A(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("An error occurred while fetching memberships:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),[C,d,O]);c.useEffect((function(){B()}),[B]);var U=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&O&&m){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,xr.mD)(d,O,C.id,t.id,{name:n});case 4:i=e.sent,-1!==(o=m.findIndex((function(e){return e.id===t.id})))&&((s=(0,r.Z)(m))[o]=i,x(s));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[C,d,O,m]),V=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&O&&L){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,i=L.findIndex((function(e){return e.userId===t.id})),!L[i].groups||L[i].groups[0]!==n.id){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,(0,xr.GX)(d,O,C.id,n.id,t.id);case 8:-1!==i&&((o=(0,r.Z)(L))[i]=(0,l.Z)((0,l.Z)({},L[i]),{},{groups:[n.id]}),A(o)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("An error occurred while update user group:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[C,d,O,L]),H=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",(0,uj.Un)(d,O,t.id));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,O]),z=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&O){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,xr.Qo)(d,{teamId:C.id,email:t,activate:n,adminUserId:O});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[C,d,O]),W=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,xr.iE)(d,O,C.id,t.id);case 4:x((function(e){return e?e.filter((function(e){return e.id!==t.id})):null}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C,d,O]),G=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,xr.sS)(d,O,C.id,t);case 4:n=e.sent,x(m?[].concat((0,r.Z)(m),[n]):null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[C,d,O,m]),Y=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([R(),B()]);case 2:case"end":return e.stop()}}),e)}))),[R,B]),q=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O&&C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,xr.hV)(d,O,C.id);case 4:t=e.sent,I(t);case 6:case"end":return e.stop()}}),e)}))),[C,d,O]),J=c.useCallback((function(){return C&&k&&P?C.seats-k.filter((function(e){return!e.deactivatedAt})).length-P.length:null}),[C,k,P]);return(0,f.jsx)($D.Provider,{value:{team:C,groups:m,admins:P,members:k,memberships:L,onEditUser:D,onChangeGroupName:U,onChangeUserGroup:V,onListUserProjects:H,onDeleteGroup:W,onCreateGroup:G,onRefreshMembers:Y,onRefreshAdmins:q,getAvailableSeats:J,onCreateMembers:F,onChangeMemberPassword:N,onActivateMembers:_,onSetAdmin:z},children:t})},HN={banner:{padding:10,flex:1,display:"flex"},buttonContainer:{flexGrow:1,flexShrink:0,display:"flex",alignItems:"center"},desktopRightContainer:{minWidth:350},educationIcon:{width:40,height:40},desktopFooter:{height:200},paper:{padding:"16px 32px",flex:1},stickyPaper:{padding:"16px 32px",flex:1,position:"sticky",top:0},mobilePaper:{padding:"16px 16px",flex:1},formContainer:{flex:1,display:"flex",alignSelf:"stretch"},mobileFooter:{height:150},freeTag:{alignSelf:"flex-start",padding:"4px 6px",border:"1px solid white",borderRadius:6,color:"white"}},zN=(0,f.jsx)(N.Z,{size:"sub-title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Get a sample in your email"})}),WN=function(e){var t=e.form,n=e.formError,r=e.onChangeForm,i=e.onResetForm,u=e.onSendForm,d=e.formStatus,p=e.onLogin,h=(0,be.UQ)().isMobile,g=c.useContext($n.ZP).limits,m=c.useContext(j.Z),x=c.useState(!0),v=(0,s.Z)(x,2),b=v[0],C=v[1],Z=c.useContext(mo.J).openSubscriptionDialog,k=c.useContext(nm.n).tutorials,S=c.useMemo((function(){return k?k.filter((function(e){return"education-curriculum"===e.category})):null}),[k]),P=c.useCallback((function(){Z({filter:"education",analyticsMetadata:{reason:"Callout in Classroom tab",recommendedPlanId:"gdevelop_education",placementId:"education"}})}),[Z]),I=function(e){return(0,f.jsx)(H.Z,{background:"dark",variant:"outlined",style:h?HN.mobilePaper:HN.paper,children:(0,f.jsxs)(_.ak,{alignItems:"flex-start",expand:!0,noMargin:!0,children:[(0,f.jsx)(EN.Z,{style:HN.educationIcon}),(0,f.jsx)(N.Z,{size:"title",noMargin:!0,children:h?(0,f.jsx)(w.Trans,{id:"Purchase the Education subscription"}):(0,f.jsx)(w.Trans,{id:"New lesson every month with the Education subscription"})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"The Education subscription gives access to GDevelop's Game Development curriculum. Co-created with teachers and institutions, it\u2019s a ready-to-use, proven way to implement STEM in your classroom."})}),(0,f.jsx)("div",{style:{alignSelf:h?"stretch":"flex-start"},children:(0,f.jsxs)(_.ep,{noColumnMargin:!0,noMargin:!0,children:[(0,f.jsx)("div",{style:HN.buttonContainer,children:(0,f.jsx)(T.Z,{primary:!0,fullWidth:!0,onClick:function(){y.ZP.openExternalURL("https://gdevelop.io/education")},label:(0,f.jsx)(w.Trans,{id:"Learn more"})})}),(0,f.jsx)("div",{style:HN.buttonContainer,children:(0,f.jsx)(G.Z,{primary:!0,fullWidth:!0,icon:(0,f.jsx)(tA,{fontSize:"small"}),onClick:P,label:(0,f.jsx)(w.Trans,{id:"Subscribe to Edu"})})})]})})]})},e)};return(0,f.jsx)(w.I18n,{children:function(e){var s=e.i18n;return(0,f.jsxs)(yS.ZP,{children:[(0,f.jsx)(yS.L,{children:(0,f.jsxs)(_.ep,{noColumnMargin:!0,noMargin:!0,children:[(0,f.jsxs)(_.ak,{noMargin:!0,children:[!h&&S&&(0,f.jsx)(lA,{i18n:s,limits:g,tutorials:S,onSelectTutorial:function(){},onSelectCourse:function(){},onOpenTemplateFromTutorial:(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),isLocked:!0,onClickSubscribe:P,renderInterstitialCallout:I}),h&&I("callout"),!h&&(0,f.jsx)("div",{style:HN.desktopFooter})]}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)("div",{style:h?void 0:HN.desktopRightContainer,children:(0,f.jsx)(H.Z,{background:"medium",style:h?HN.mobilePaper:HN.stickyPaper,children:(0,f.jsxs)(_.ak,{alignItems:"flex-start",noMargin:!0,children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},HN.freeTag),{},{color:m.statusIndicator.success,borderColor:m.statusIndicator.success}),children:(0,f.jsx)(N.Z,{noMargin:!0,color:"inherit",children:(0,f.jsx)(w.Trans,{id:"Free"})})}),(0,f.jsx)(N.Z,{size:"title",noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Get our teaching resources"})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Receive a copy of GDevelop\u2019s teaching resources:<0>Extract of our ready-to-teach Curriculum</0><1>Poster with GDevelop's core concepts to use in your classroom</1><2>\u201cGame Development as an Educational wonder\u201d PDF</2>",components:[(0,f.jsx)("li",{}),(0,f.jsx)("li",{}),(0,f.jsx)("li",{})]})}),(0,f.jsx)("div",{style:HN.formContainer,children:"login"===d?(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[zN,(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Please login to access free samples of the Education plan resources."})}),(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Login"}),onClick:p})})]}):"sending"===d?(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[zN,(0,f.jsx)(Oe.Z,{})]}):"error"===d?(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[zN,(0,f.jsx)(_r.Z,{onRetry:i,children:(0,f.jsx)(w.Trans,{id:"An error occurred when sending the form, please verify your internet connection and try again later."})})]}):"success"===d?(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[zN,(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Form sent with success. You should receive an email in the next minutes."})}),(0,f.jsx)(M.x1,{noMargin:!0,justifyContent:"flex-end",children:(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Send a new form"}),onClick:i})})]}):(0,f.jsx)(mN.Z,{onSubmit:u,autoComplete:"on",name:"education-form",fullWidth:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[zN,(0,f.jsxs)(_.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,f.jsx)(yi.ZP,{value:t.firstName,floatingLabelText:(0,f.jsx)(w.Trans,{id:"First name"}),fullWidth:!0,type:"text",required:!0,onChange:function(e,n){r((0,l.Z)((0,l.Z)({},t),{},{firstName:n.slice(0,100)}))},onBlur:function(e){r((0,l.Z)((0,l.Z)({},t),{},{firstName:e.currentTarget.value.trim()}))}}),(0,f.jsx)(yi.ZP,{value:t.lastName,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Last name"}),fullWidth:!0,type:"text",required:!0,onChange:function(e,n){r((0,l.Z)((0,l.Z)({},t),{},{lastName:n.slice(0,100)}))},onBlur:function(e){r((0,l.Z)((0,l.Z)({},t),{},{lastName:e.currentTarget.value.trim()}))}})]}),(0,f.jsx)(yi.ZP,{required:!0,value:t.email,floatingLabelText:(0,f.jsx)(w.Trans,{id:"Email"}),onChange:function(e,n){b||C(!0),r((0,l.Z)((0,l.Z)({},t),{},{email:n}))},errorText:b?void 0:(0,f.jsx)(w.Trans,{id:"Invalid email address."}),type:"email",fullWidth:!0,onBlur:function(e){var n=e.currentTarget.value.trim();r((0,l.Z)((0,l.Z)({},t),{},{email:n})),C(xN.H.test(n))}}),(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[n?(0,f.jsx)(N.Z,{noMargin:!0,color:"error",children:n}):(0,f.jsx)("span",{}),(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Send"}),onClick:u})]})]})})})]})})})]})}),h&&(0,f.jsx)("div",{style:HN.mobileFooter})]})}})},GN={firstName:"",lastName:"",email:""},YN=function(e){var t=e.authenticatedUser,n=t.authenticated,r=t.profile,i=t.getAuthorizationHeader,u=c.useState((0,l.Z)((0,l.Z)({},GN),{},{email:r?r.email:""})),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useState(null),m=(0,s.Z)(g,2),x=m[0],v=m[1],b=c.useState(n?"fill":"login"),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=c.useMemo((function(){return Object.values(p).every((function(e){return!e}))}),[p]),k=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.values(p).some((function(e){return!e}))){e.next=3;break}return v((0,f.jsx)(w.Trans,{id:"Please fill out every field."})),e.abrupt("return");case 3:if(r){e.next=5;break}return e.abrupt("return");case 5:return y("sending"),e.prev=6,e.next=9,(0,xr.MS)(i,r.id,(0,l.Z)((0,l.Z)({},p),{},{interestKind:"education"}));case 9:y("success"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.error("Error while sending education form data:",e.t0),y("error");case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),T=c.useCallback((function(){h(GN),y("fill")}),[]),S=c.useCallback((function(e){x&&v(null),h(e)}),[x]);return c.useEffect((function(){n?(y("fill"),Z&&r&&h((function(e){return(0,l.Z)((0,l.Z)({},e),{},{email:r.email})}))):(y("login"),h(GN))}),[n,r,Z]),{educationForm:p,educationFormStatus:j,onChangeEducationForm:S,onResetEducationForm:T,educationFormError:x,onSendEducationForm:k}},qN={},JN=function(){var e=function(){var e=c.useContext($n.ZP),t=e.profile,n=e.subscription,r=e.coursePurchases,i=e.bundlePurchases,a=e.loginState,o=c.useState({userStatus:"not-ready",userId:null,userSubscriptionPlanId:null,userCoursePurchasesCount:null,userBundlePurchaseCount:null}),l=(0,s.Z)(o,2),u=l[0],d=l[1];return c.useEffect((function(){"done"===a&&d({userStatus:"ready",userId:t?t.id:null,userSubscriptionPlanId:n?n.planId:null,userCoursePurchasesCount:r?r.length:0,userBundlePurchaseCount:i?i.length:0})}),[t,a,n,r,i]),u}(),t=e.userStatus,n=e.userId,r=e.userSubscriptionPlanId,i=e.userCoursePurchasesCount,u=e.userBundlePurchaseCount,d=c.useContext($n.ZP),p=d.limits,h=d.getAuthorizationHeader,g=d.onOpenLoginDialog,m=c.useContext(D.ZP).values.language,x=c.useState(null),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=c.useContext(dP.ZP).listedCourses,y=c.useState(null),Z=(0,s.Z)(y,2),k=Z[0],T=Z[1],S=c.useContext(mM.q$),P=S.openCreditsPackageDialog,I=S.openCreditsUsageDialog,E=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:(0,xr.qX)(h,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h]),M=c.useState(null),L=(0,s.Z)(M,2),A=L[0],O=L[1],R=c.useState({}),F=(0,s.Z)(R,2),N=F[0],_=F[1],B=CF(null,E),U=(0,s.Z)(B,3),V=U[0],H=U[1],z=U[2],W=c.useState(!1),G=(0,s.Z)(W,2),Y=G[0],q=G[1],J=c.useState({"":qN}),X=(0,s.Z)(J,2),K=X[0],Q=X[1],$=!!p&&!!p.capabilities.classrooms&&p.capabilities.classrooms.hidePremiumProducts,ee=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,lP.Fm)(h,{userId:n});case 2:return t=e.sent,r=t.filter((function(e){return!$||!e.isLocked})),C(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),[n,h,$]),te=c.useCallback((function(e){if(e){var t=N[e];z(t||null)}else z(null);O(e)}),[N,z]),ne=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,i,c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.info("Fetching chapters for course ".concat(t," for userId=").concat(n||"null",".")),e.next=4,Promise.all([(0,lP.kw)(h,{courseId:t,userId:n,language:m}),(0,o.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,(0,xr.ql)(h,n,t);case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})))()]);case 4:r=e.sent,i=(0,s.Z)(r,2),c=i[0],u=i[1],_((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Qt.Z)({},t,u))})),d=n||"",Q((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Qt.Z)({},d,(0,l.Z)((0,l.Z)({},e[d]),{},(0,Qt.Z)({},t,c))))})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("An error occurred while fetching chapters for course ".concat(t,":"),e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),[h,n,m]),re=c.useCallback((function(e,t,r){if(A)if(n){var i=V?(0,l.Z)({},V):{courseId:A,userId:n,progress:[]},a=i.progress.find((function(t){return t.chapterId===e}));a||(i.progress.push({chapterId:e,completedTasks:[]}),a=i.progress[i.progress.length-1]);var o=a.completedTasks.indexOf(t);r?-1===o&&a.completedTasks.push(t):-1!==o&&a.completedTasks.splice(o,1),H(i),_((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Qt.Z)({},A,i))}))}else g()}),[V,n,A,H,g]),ie=c.useCallback((function(e,t){if(!V)return!1;var n=V.progress.find((function(t){return t.chapterId===e}));return!!n&&n.completedTasks.indexOf(t)>=0}),[V]),ae=K[n||""]||qN,oe=c.useCallback((function(e,t){var n=ae?ae[e]:null;if(!n)return null;var r=n.find((function(e){return e.id===t}));if(!r||r.isLocked)return null;var i=r.tasks?r.tasks.length:r.items.filter((function(e){return"task"===e.type})).length,a=N[e];if(!a)return{completedTasks:0,tasks:i};var o=a.progress.find((function(e){return e.chapterId===t}));return o?{completedTasks:o.completedTasks.length,tasks:i}:{completedTasks:0,tasks:i}}),[N,ae]),se=c.useCallback((function(e){if(!b)return null;var t=b.find((function(t){return t.id===e}));if(!t)return null;var n=t.chaptersTargetCount,r=N[e];if(!r)return{percentage:0,completedChapters:0,chapters:n};var i=ae?ae[e]:null;if(!i)return null;var a=0,o=0,s=1/n;return i.forEach((function(e){if(!e.isLocked){var t=r.progress.find((function(t){return t.chapterId===e.id}));if(t){var n=e.tasks?e.tasks.length:e.items.filter((function(e){return"task"===e.type})).length;t.completedTasks.length>=n&&o++,a+=t.completedTasks.length/n*s}}})),{percentage:a,chapters:n,completedChapters:o}}),[N,ae,b]),le=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,i){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLocked&&j){e.next=2;break}return e.abrupt("return");case 2:if(n&&p){e.next=5;break}return g(),e.abrupt("return");case 5:if(o=j.find((function(e){return e.id===t.id}))){e.next=9;break}return console.error("Couldn't find course with id ".concat(t.id," in Shop API.")),e.abrupt("return");case 9:if(s=o.prices.find((function(e){return"default"===e.usageType}))){e.next=13;break}return console.error("Unable to find the price for the default usage type"),e.abrupt("return");case 13:try{(0,ai.oJ)({courseId:t.id,courseName:t.titleByLocale.en,usageType:"default",priceValue:s.value,priceCurrency:s.currency}),T(o)}catch(VM){console.warn("Unable to send event",VM)}case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n,p,j,g,T]),ce=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,i){var s,l,c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLocked&&j){e.next=2;break}return e.abrupt("return");case 2:if(n&&p){e.next=5;break}return g(),e.abrupt("return");case 5:if(s=p.credits.userBalance.amount,l=j.find((function(e){return e.id===t.id}))){e.next=10;break}return console.error("Couldn't find course with id ".concat(t.id," in Shop API.")),e.abrupt("return");case 10:if(c=l.creditPrices.find((function(e){return"default"===e.usageType}))){e.next=14;break}return console.error("Unable to find the credits price for the default usage type"),e.abrupt("return");case 14:if(u=c.amount,(0,ai.oJ)({courseId:t.id,courseName:t.titleByLocale.en,usageType:"default",priceValue:u,priceCurrency:"CREDITS"}),!(s<u)){e.next=19;break}return P({missingCredits:u-s}),e.abrupt("return");case 19:d=(0,vo.a)(i,t.titleByLocale),I({title:(0,f.jsx)(w.Trans,{id:"Purchase {translatedCourseTitle}",values:{translatedCourseTitle:d}}),message:(0,f.jsx)(w.Trans,{id:'You are about to use {creditsAmount} credits to purchase the course "{translatedCourseTitle}". Continue?',values:{creditsAmount:u,translatedCourseTitle:d}}),onConfirm:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,DL.LN)(h,{productId:l.id,usageType:"default",userId:n,password:r});case 2:return e.next=4,Promise.all([ee(),ne(t.id)]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),successMessage:(0,f.jsx)(w.Trans,{id:"\ud83c\udf89 You can now follow your new course!"})});case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n,p,j,P,I,h,g,ee,ne]);c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ready"===t){e.next=2;break}return e.abrupt("return");case 2:return console.info("Fetching all courses for userId=".concat(n||"null",".")),n&&(r=n||"",Q((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Qt.Z)({},r,qN))}))),e.next=7,ee();case 7:q(!0);case 8:case"end":return e.stop()}}),e)})))()}),[ee,r,i,u,n,t]),c.useEffect((function(){m&&(console.info("Resetting course chapters cache as language changed to ".concat(m,".")),Q((function(){return{"":qN}})))}),[m]);var ue=c.useCallback((function(e){return void 0!==ae[e]?ae[e]:(ne(e),null)}),[ae,ne]),de=c.useMemo((function(){return A&&b&&b.find((function(e){return e.id===A}))||null}),[A,b]);return{courses:b,fetchCourses:ee,onSelectCourse:te,selectedCourse:de,getCourseChapters:ue,areCoursesFetched:Y,onCompleteTask:re,isTaskCompleted:ie,getChapterCompletion:oe,getCourseCompletion:se,onBuyCourseWithCredits:ce,onBuyCourse:le,purchasingCourseListingData:k,setPurchasingCourseListingData:T}},XN=function(){},KN=function(e){return"asset-store"===e["initial-dialog"]||"store"===e["initial-dialog"]?"shop":["games-dashboard","build","create"].includes(e["initial-dialog"])?"create":"education"===e["initial-dialog"]?"team-view":"play"===e["initial-dialog"]?"play":"learn"===e["initial-dialog"]?"learn":null},QN={container:{display:"flex",flexDirection:"row-reverse",marginTop:0,marginBottom:0,flex:1,minHeight:0,width:"100%"},mobileContainer:{display:"flex",flexDirection:"column",flex:1,width:"100%"},scrollableContainer:{display:"flex",position:"relative",marginLeft:0,marginRight:0,flexDirection:"column",alignItems:"stretch",flex:1,height:"100%",minWidth:0,overflowY:"auto"}},$N=c.memo(c.forwardRef((function(e,t){var n=e.project,r=e.fileMetadata,i=e.canOpen,a=e.onChooseProject,o=e.onOpenRecentFile,l=e.onOpenNewProjectSetupDialog,u=e.onSelectExampleShortHeader,d=e.onSelectPrivateGameTemplateListingData,p=e.onOpenPrivateGameTemplateListingData,h=e.onOpenVersionHistory,g=e.onOpenLanguageDialog,m=e.onOpenProfile,x=e.onCreateProjectFromExample,v=e.onCreateEmptyProject,b=e.setToolbar,C=e.setGamesPlatformFrameShown,j=e.selectInAppTutorial,y=e.onOpenPreferences,Z=e.onOpenAbout,k=e.onOpenAskAi,T=e.onCloseAskAi,S=e.onOpenLayout,P=e.isActive,I=e.storageProviders,E=e.storageProvider,M=e.onSave,L=e.canSave,A=e.resourceManagementProps,O=e.askToCloseProject,R=e.closeProject,F=e.onOpenTemplateFromTutorial,N=e.onOpenTemplateFromCourseChapter,_=e.gamesList,B=e.gamesPlatformFrameTools,U=e.onWillInstallExtension,V=e.onExtensionInstalled,H=(e.gameEditorMode,c.useContext($n.ZP)),z=H.authenticated,W=H.onCloudProjectsChanged,G=H.onOpenLoginDialog,Y=H.limits,q=B.startTimeoutToUnloadIframe,J=B.loadIframeOrRemoveTimeout,X=c.useContext(nm.n).fetchTutorials,K=c.useContext(CP.I).fetchExamplesAndFilters,Q=c.useContext(jP.mJ),$=Q.fetchGameTemplates,ee=Q.shop.setInitialGameTemplateUserFriendlySlug,te=c.useContext(mM.q$).fetchCreditsPackages,ne=c.useState(null),re=(0,s.Z)(ne,2),ie=re[0],ae=re[1],oe=_.games,se=_.fetchGames,le=_.gamesFetchingError,ce=_.onGameUpdated,ue=c.useState("details"),de=(0,s.Z)(ue,2),pe=de[0],fe=de[1],he=c.useContext(fa.ZP),ge=he.routeArguments,me=he.removeRouteArguments,xe=YN({authenticatedUser:H}),ve=xe.educationForm,Ce=xe.onChangeEducationForm,je=xe.onSendEducationForm,ye=xe.educationFormError,Ze=xe.educationFormStatus,ke=xe.onResetEducationForm,we=JN(),Te=we.courses,Se=we.selectedCourse,Pe=we.getCourseChapters,Ie=we.onSelectCourse,Ee=we.areCoursesFetched,Me=we.onCompleteTask,Le=we.isTaskCompleted,Ae=we.getChapterCompletion,Oe=we.getCourseCompletion,Re=we.onBuyCourseWithCredits,Fe=we.onBuyCourse,De=we.purchasingCourseListingData,Ne=we.setPurchasingCourseListingData,_e=c.useState(null),Be=(0,s.Z)(_e,2),Ue=Be[0],Ve=Be[1],He=(0,be.UQ)().isMobile,ze=c.useContext(D.ZP).values.showCreateSectionByDefault,We=c.useRef(KN(ge)),Ge=We.current?We.current:ze?"create":"learn",Ye=c.useState(Ge),qe=(0,s.Z)(Ye,2),Je=qe[0],Xe=qe[1],Ke=c.useContext(NL.KY).setInitialPackUserFriendlySlug,Qe=c.useContext(pI.bQ),$e=Qe.fetchBundles,et=Qe.shop,tt=et.setInitialBundleUserFriendlySlug,nt=et.setInitialBundleCategory,rt=c.useState(null),it=(0,s.Z)(rt,2),at=it[0],ot=it[1],st=c.useState(null),lt=(0,s.Z)(st,2),ct=lt[0],ut=lt[1],dt=c.useMemo((function(){return ie&&oe?oe.find((function(e){return e.id===ie})):null}),[oe,ie]);c.useEffect((function(){var e=KN(ge);if(e){if(Xe(e),"shop"===e)ge["asset-pack"]&&Ke(ge["asset-pack"]),ge["game-template"]&&ee(ge["game-template"]),ge.bundle&&tt(ge.bundle),ge["bundle-category"]&&nt(ge["bundle-category"]),me(["asset-pack","game-template","bundle","bundle-category"]);else if("manage"===e){var t=ge["game-id"];t&&oe&&oe.find((function(e){return e.id===t}))&&(ae(t),ge["games-dashboard-tab"]&&(fe(ge["games-dashboard-tab"]),me(["games-dashboard-tab"])))}else if("learn"===e){if(ge["course-id"]){if(!Ee)return;Ie(ge["course-id"])}ge.bundle&&ot(ge.bundle),ge["bundle-category"]&&ut(ge["bundle-category"]),me(["course-id","bundle","bundle-category"])}me(["initial-dialog"])}}),[ge,Ie,me,Ke,ee,tt,nt,oe,Ee]),c.useEffect((function(){K(),$(),X(),$e(),te()}),[K,X,$,$e,te]),c.useEffect((function(){P&&z&&W()}),[P,z,W]),c.useEffect((function(){P&&"create"===Je&&z&&se()}),[P,Je,z,se]);var pt=c.useCallback((function(){}),[]),ft=c.useCallback((function(){b&&b((0,f.jsx)(XD,{hasProject:!!n,onOpenLanguageDialog:g,onOpenProfile:m,onOpenVersionHistory:h,onSave:M,canSave:L}))}),[b,g,m,h,n,M,L]);c.useLayoutEffect((function(){return"play"===Je?C({shown:!0,isMobile:He}):(C({shown:!1,isMobile:He}),ft()),function(){C({shown:!1,isMobile:He})}}),[ft,Je,C,He]),c.useImperativeHandle(t,(function(){return{getProject:pt,updateToolbar:ft,forceUpdateEditor:XN,onEventsBasedObjectChildrenEdited:XN,onSceneObjectEdited:XN,onSceneObjectsDeleted:XN,onSceneEventsModifiedOutsideEditor:XN,notifyChangesToInGameEditor:mm.VL,switchInGameEditorIfNoHotReloadIsNeeded:XN,onInstancesModifiedOutsideEditor:XN,onObjectsModifiedOutsideEditor:XN,onObjectGroupsModifiedOutsideEditor:XN}})),c.useEffect((function(){P&&"play"===Je?J():q()}),[P,q,J,Je]);var ht=Te?Te.find((function(e){return"premium-course"===e.id})):null;return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(VN,{children:(0,f.jsxs)("div",{style:He?QN.mobileContainer:QN.container,children:[(0,f.jsxs)("div",{style:QN.scrollableContainer,children:["create"===Je&&(0,f.jsx)(vD,{project:n,currentFileMetadata:r,onOpenProject:o,storageProviders:I,storageProvider:E,resourceManagementProps:A,onCreateEmptyProject:v,onOpenLayout:S,onWillInstallExtension:U,onExtensionInstalled:V,onCloseAskAi:T,closeProject:R,games:oe,onRefreshGames:se,onGameUpdated:ce,gamesFetchingError:le,openedGame:dt,setOpenedGameId:ae,currentTab:pe,setCurrentTab:fe,canOpen:i,onOpenProfile:m,askToCloseProject:O,onCreateProjectFromExample:x,onSelectExampleShortHeader:u,onSelectPrivateGameTemplateListingData:d,i18n:t,onOpenNewProjectSetupDialog:l,onChooseProject:a,onSaveProject:M,canSaveProject:L}),"learn"===Je&&(0,f.jsx)(AO,{selectInAppTutorial:j,onOpenTemplateFromTutorial:F,onOpenTemplateFromCourseChapter:N,selectedCategory:Ue,onSelectCategory:Ve,onSelectCourse:Ie,courses:Te,previewedCourse:ht,course:Se,getCourseChapters:Pe,onCompleteCourseTask:Me,isCourseTaskCompleted:Le,getCourseChapterCompletion:Ae,getCourseCompletion:Oe,onBuyCourseWithCredits:Re,onBuyCourse:Fe,purchasingCourseListingData:De,setPurchasingCourseListingData:Ne,onOpenAskAi:k,onOpenNewProjectSetupDialog:l,onSelectPrivateGameTemplateListingData:d,onSelectExampleShortHeader:u,clearInitialBundleValues:function(){ot(null),ut(null)},initialBundleUserFriendlySlug:at,initialBundleCategory:ct}),"play"===Je&&(0,f.jsx)(FO,{gamesPlatformFrameTools:B}),"shop"===Je&&(0,f.jsx)(wD,{project:n,resourceManagementProps:A,onOpenPrivateGameTemplateListingData:p,onOpenProfile:m,onWillInstallExtension:U,onExtensionInstalled:V,onCourseOpen:function(e){Ie(e),Xe("learn")},courses:Te,getCourseCompletion:Oe}),"team-view"===Je&&((0,er.zV)(Y)?(0,f.jsx)(UN,{project:n,onOpenRecentFile:o,storageProviders:I,currentFileMetadata:r,onOpenTeachingResources:function(){Ve("education-curriculum"),Xe("learn")}}):(0,f.jsx)(WN,{form:ve,onChangeForm:Ce,onSendForm:je,formError:ye,formStatus:Ze,onResetForm:ke,onLogin:G}))]}),(0,f.jsx)(KD.xM,{activeTab:Je,setActiveTab:Xe,onOpenPreferences:y,onOpenAbout:Z})]})})}})})),(function(e,t){return e.isActive||t.isActive})),e_=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.00016 7.33337C7.30137 7.33337 9.16683 9.19883 9.16683 11.5C9.16683 13.8013 7.30137 15.6667 5.00016 15.6667C4.31044 15.6667 3.65935 15.4974 3.08545 15.1999L1.60824 15.4747C1.44622 15.5048 1.2801 15.4532 1.16357 15.3366C1.04704 15.2201 0.995409 15.054 1.02555 14.892L1.30029 13.4141C1.00294 12.8403 0.833496 12.1896 0.833496 11.5C0.833496 9.19883 2.69898 7.33337 5.00016 7.33337ZM5.00016 8.33337C3.25126 8.33337 1.8335 9.75112 1.8335 11.5C1.8335 12.0775 1.98763 12.6175 2.25667 13.0827C2.31643 13.186 2.33711 13.3079 2.31527 13.4252L2.14144 14.3581L3.07503 14.1849L3.16357 14.1765C3.25206 14.1759 3.33997 14.1987 3.41748 14.2435C3.88267 14.5126 4.42265 14.6667 5.00016 14.6667C6.74909 14.6667 8.16683 13.249 8.16683 11.5C8.16683 9.75112 6.74909 8.33337 5.00016 8.33337Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M9.3335 1.33337C12.5551 1.33344 15.1668 3.94509 15.1668 7.16671C15.1668 8.16108 14.917 9.0984 14.4774 9.91866L14.8914 12.142C14.9216 12.3039 14.8699 12.4701 14.7534 12.5866C14.6369 12.7031 14.4707 12.7547 14.3088 12.7247L12.0835 12.3106C11.5262 12.6091 10.915 12.8215 10.2677 12.9258C9.99532 12.9696 9.73889 12.7841 9.69482 12.5118C9.65092 12.2392 9.83633 11.9822 10.1089 11.9382C10.6982 11.8432 11.2518 11.6415 11.7495 11.3536C11.8527 11.2939 11.9741 11.2732 12.0913 11.295L13.7749 11.6081L13.4618 9.92517C13.4399 9.80787 13.4606 9.68601 13.5203 9.58272C13.9312 8.87235 14.1668 8.04778 14.1668 7.16671C14.1668 4.49737 12.0028 2.33344 9.3335 2.33337C6.90077 2.33343 4.88676 4.1314 4.54964 6.47074C4.51017 6.74396 4.25649 6.9333 3.98324 6.89392C3.71023 6.85433 3.52082 6.60126 3.56006 6.32817C3.96708 3.50378 6.39649 1.33343 9.3335 1.33337Z",fill:"currentColor"})]}))})),t_=function(e){var t=e.onStartNewChat,n=e.canStartNewChat,r=e.onOpenHistory;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Ls.k,{firstChild:!0,children:(0,f.jsx)($.Z,{size:"small",color:"default",tooltip:{id:"View history"},onClick:r,children:(0,f.jsx)(e_,{})})}),(0,f.jsx)(Ls.k,{lastChild:!0,children:(0,f.jsx)(G.Z,{primary:!0,onClick:t,icon:(0,f.jsx)(it.Z,{}),label:(0,f.jsx)(w.Trans,{id:"New chat"}),disabled:!n,style:{flexShrink:0}})})]})},n_=n(93453),r_={drawer:{width:320,height:"100%"},requestItem:{width:"100%",display:"flex",flexDirection:"column",padding:8,borderRadius:4,alignItems:"stretch"},requestItemContent:{display:"flex",flexDirection:"column",maxWidth:"100%"},paperItem:{marginBottom:4,borderRadius:4},selectedRequestItem:{backgroundColor:"rgba(255, 255, 255, 0.1)"}},i_=function(e){var t=e.onSelectAiRequest,n=e.selectedAiRequestId,r=c.useContext(yM.X0).aiRequestStorage,i=r.aiRequests,a=r.fetchAiRequests,o=r.onLoadMoreAiRequests,s=r.canLoadMore,u=r.isLoading,d=r.error,p=Object.values(i).sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}));return!p.length&&u?(0,f.jsx)(M.sg,{noMargin:!0,useFullHeight:!0,expand:!0,alignItems:"center",justifyContent:"center",children:(0,f.jsx)(GI.Z,{})}):d?(0,f.jsx)(_r.Z,{onRetry:a,children:(0,f.jsx)(w.Trans,{id:"An error occurred while loading your AI requests."})}):0===p.length?(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"You don't have any previous chat. Ask the AI your first question!"})}):(0,f.jsx)(ft.Z,{children:(0,f.jsxs)(_.ak,{expand:!0,children:[p.map((function(e){var r=n===e.id,i=function(e){if(!e.output||0===e.output.length)return"";var t=e.output.find((function(e){return"message"===e.type&&"user"===e.role}));return t&&"message"===t.type&&"user"===t.role?t.content.map((function(e){return"user_request"===e.type?e.text:null})).filter(Boolean).join(" "):""}(e),a=new Date(e.createdAt),o=(0,n_.Z)(a,"MMM d, yyyy h:mm a");return(0,f.jsx)(H.Z,{background:r?"dark":"medium",style:(0,l.Z)((0,l.Z)({},r_.paperItem),r?r_.selectedRequestItem:{}),children:(0,f.jsx)(lt.Z,{style:r_.requestItem,onClick:function(){return t(e)},focusRipple:!0,children:(0,f.jsxs)("div",{style:r_.requestItemContent,children:[(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{size:"body-small",color:"secondary",children:o}),(0,f.jsx)(N.Z,{size:"body-small",color:"error"===e.status?"error":"secondary",children:"working"===e.status?(0,f.jsx)(w.Trans,{id:"Working..."}):"error"===e.status?(0,f.jsx)(w.Trans,{id:"Error"}):null})]}),(0,f.jsx)(N.Z,{noMargin:!0,style:pr.t,align:"left",children:i})]})})},e.id)})),(0,f.jsxs)(_.pJ,{justifyContent:"center",children:[(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Refresh"}),onClick:a,disabled:u}),(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Load more"}),onClick:o,disabled:u||!s})]})]})})},a_=function(e){var t=e.open,n=e.onClose,r=e.onSelectAiRequest,i=e.selectedAiRequestId,a=(0,be.UQ)().isMobile;return(0,f.jsx)(lg.ZP,{open:t,anchor:"right",onClose:n,PaperProps:{style:r_.drawer,className:"safe-area-aware-left-container"},ModalProps:{keepMounted:!0},children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[(0,f.jsx)(mS,{title:(0,f.jsx)(w.Trans,{id:"AI Chat History"}),drawerAnchor:"right",id:"ai-chat-history-drawer-top-bar",onClose:n}),(0,f.jsx)(i_,{onSelectAiRequest:function(e){r(e),a&&n()},selectedAiRequestId:i})]})})},o_=n.g.gd,s_={paper:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",minWidth:0,overflowY:"scroll",overflowX:"hidden"},chatContainer:{flex:1,display:"flex",flexDirection:"column",width:"min(100%, 800px)",marginLeft:10,marginRight:10,marginBottom:10,minHeight:0,minWidth:0}},l_=function(){},c_=c.memo(c.forwardRef((function(e,t){var n=e.isActive,r=e.setToolbar,i=e.project,u=e.resourceManagementProps,d=e.fileMetadata,p=e.storageProvider,h=e.i18n,g=e.onCreateProjectFromExample,m=e.onCreateEmptyProject,x=e.onOpenLayout,v=e.onSceneEventsModifiedOutsideEditor,b=e.onInstancesModifiedOutsideEditor,C=e.onObjectsModifiedOutsideEditor,j=e.onObjectGroupsModifiedOutsideEditor,y=e.onWillInstallExtension,Z=e.onExtensionInstalled,k=(e.onOpenAskAi,e.gameEditorMode,e.continueProcessingFunctionCallsOnMount),w=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,r=t.exampleSlug,i={projectName:n,storageProvider:Bi.Z,saveAsLocation:null,creationSource:"ai-agent-request"},!r){e.next=14;break}return e.next=5,(0,_i.rx)();case 5:if(o=e.sent,s=o.exampleShortHeaders,!(l=s.find((function(e){return e.slug===r})))){e.next=14;break}return e.next=11,g({exampleShortHeader:l,newProjectSetup:i,i18n:h});case 11:return c=e.sent,u=c.createdProject,e.abrupt("return",{exampleSlug:r,createdProject:u});case 14:return e.next=16,m(i);case 16:return d=e.sent,p=d.createdProject,e.abrupt("return",{exampleSlug:null,createdProject:p});case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[g,m,h]),T=c.useMemo((function(){return{onOpenLayout:x,onCreateProject:w}}),[x,w]),S=c.useContext(yM.X0).aiRequestStorage,P=S.fetchAiRequests,I=S.aiRequests,E=jL({project:i}),M=E.selectedAiRequest,L=E.selectedAiRequestId,A=E.setAiState,O=(0,DM.i)(L),R=c.useState(null),F=(0,s.Z)(R,2),N=F[0],_=F[1],B=c.useState(!1),U=(0,s.Z)(B,2),V=U[0],z=U[1],W=c.useState(!!k),G=(0,s.Z)(W,2),Y=G[0],q=G[1];c.useEffect((function(){n&&0===Object.keys(I).length&&P()}),[n]);var J=!!L,X=c.useCallback((function(){z(!0)}),[]),K=c.useCallback((function(){z(!1)}),[]),Q=c.useContext(yM.X0),$=Q.aiRequestStorage,ee=Q.editorFunctionCallResultsStorage,te=Q.getAiSettings,ne=ee.getEditorFunctionCallResults,re=ee.addEditorFunctionCallResults,ie=ee.clearEditorFunctionCallResults,ae=$.updateAiRequest,oe=$.refreshAiRequest,se=$.isSendingAiRequest,le=$.getLastSendError,ce=$.setSendingAiRequest,ue=$.setLastSendError,de=c.useRef(null),pe=c.useContext(D.ZP).values.automaticallyUseCreditsForAiRequests,fe=c.useContext($n.ZP),he=fe.profile,ge=fe.getAuthorizationHeader,me=fe.onOpenCreateAccountDialog,xe=fe.limits,ve=fe.onRefreshLimits,be=fe.subscription,Ce=xe?xe.credits.userBalance.amount:0,je=xe&&xe.quotas&&xe.quotas["consumed-ai-credits"]||null,ye=xe&&xe.credits&&xe.credits.prices["ai-request"]||null,Ze=ye?ye.priceInCredits:null;c.useEffect((function(){n&&ve()}),[n,ve]),c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,o,s,c,u,f,h,g,m,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return");case 2:if(console.info("Starting a new AI request..."),he){e.next=7;break}return me(),_(null),e.abrupt("return");case 7:if(t=N.mode,n=N.userRequest,r=N.aiConfigurationPresetId,_(null),o=!1,!(je&&je.limitReached&&Ze)){e.next=16;break}if(o=!0,s=Ce<Ze,!(!pe||s)){e.next=16;break}return e.abrupt("return");case 16:return e.prev=16,c=FM(o_),u=i?JSON.stringify(c.getSimplifiedProject(i,{})):null,f=i?JSON.stringify(c.getProjectSpecificExtensionsSummary(i)):null,h=p?p.internalName:null,ce(null,!0),e.next=24,pL({getAuthorizationHeader:ge,userId:he.id,simplifiedProjectJson:u,projectSpecificExtensionsSummaryJson:f});case 24:return g=e.sent,e.next=27,(0,MM.m5)(ge,(0,l.Z)((0,l.Z)({userRequest:n,userId:he.id},g),{},{payWithCredits:o,gameId:i?i.getProjectUuid():null,fileMetadata:d,storageProviderName:h,mode:t,toolsVersion:"v7",aiConfiguration:{presetId:r}}));case 27:m=e.sent,console.info("Successfully created a new AI request:",m),ce(null,!1),ae(m.id,m),O.current||A({aiRequestId:m.id}),(x=de.current)&&(x.resetUserInput(""),x.resetUserInput(L)),(0,ai.t3)({simplifiedProjectJsonLength:u?u.length:0,projectSpecificExtensionsSummaryJsonLength:f?f.length:0,payWithCredits:o,storageProviderName:h,mode:t,aiRequestId:m.id}),e.next=41;break;case 37:e.prev=37,e.t0=e.catch(16),console.error("Error starting a new AI request:",e.t0),ue(null,e.t0);case 41:return e.next=43,(0,LM.g)(500);case 43:return e.prev=43,e.next=46,(0,fE.x)({times:2},ve);case 46:e.next=50;break;case 48:e.prev=48,e.t1=e.catch(43);case 50:case"end":return e.stop()}}),e,null,[[16,37],[43,48]])})))()}),[Ze,Ce,ge,me,ve,he,i,d,p,je,L,ue,A,ce,O,ae,N,pe]);var ke=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,o,s,c,u,d,p,f,h,g,m,v,b,C,j,y,Z,k;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.userMessage,r=t.createdSceneNames,o=t.createdProject,s=t.editorFunctionCallResults,c=t.mode,he&&L&&M&&!se(L)){e.next=3;break}return e.abrupt("return");case 3:if(u=kI(s),d=u.hasUnfinishedResult,p=u.functionCallOutputs,f=ZI({aiRequest:M,editorFunctionCallResults:s}).length>0,!d){e.next=7;break}return e.abrupt("return");case 7:if(!f){e.next=9;break}return e.abrupt("return");case 9:if(0!==p.length||n){e.next=11;break}return e.abrupt("return");case 11:if(h=!1,!(n&&je&&je.limitReached&&Ze)){e.next=18;break}if(h=!0,g=Ce<Ze,!(!pe||g)){e.next=18;break}return e.abrupt("return");case 18:return e.prev=18,ce(L,!0),m=o||i,v=FM(o_),b=m?JSON.stringify(v.getSimplifiedProject(m,{})):null,C=m?JSON.stringify(v.getProjectSpecificExtensionsSummary(m)):null,e.next=26,pL({getAuthorizationHeader:ge,userId:he.id,simplifiedProjectJson:b,projectSpecificExtensionsSummaryJson:C});case 26:return j=e.sent,y=p.length>0&&p.some((function(e){return-1!==e.call_id.indexOf("initialize_project")})),e.next=30,(0,fE.x)({times:2},(function(){return(0,MM.zi)(ge,(0,l.Z)((0,l.Z)({userId:he.id,aiRequestId:L,functionCallOutputs:p},j),{},{gameId:m?m.getProjectUuid():void 0,payWithCredits:h,userMessage:n,paused:y,mode:c,toolsVersion:"agent"===c?bL:"chat"===c?"v7":void 0}))}));case 30:Z=e.sent,ae(Z.id,Z),ce(Z.id,!1),ie(Z.id),n&&(0,ai.Cb)({simplifiedProjectJsonLength:b?b.length:0,projectSpecificExtensionsSummaryJsonLength:C?C.length:0,payWithCredits:h,mode:Z.mode||"chat",aiRequestId:Z.id,outputLength:Z.output.length}),e.next=40;break;case 37:e.prev=37,e.t0=e.catch(18),ue(L,e.t0);case 40:return n&&(k=de.current)&&(k.resetUserInput(""),k.resetUserInput(L)),e.next=43,(0,LM.g)(500);case 43:return e.prev=43,e.next=46,(0,fE.x)({times:2},ve);case 46:e.next=50;break;case 48:e.prev=48,e.t1=e.catch(43);case 50:M&&r&&r.length>0&&r.forEach((function(e){x(e,{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"})}));case 51:case"end":return e.stop()}}),e,null,[[18,37],[43,48]])})));return function(t){return e.apply(this,arguments)}}(),[he,L,se,je,Ze,Ce,ce,ae,ie,ge,ue,ve,i,x,M,pe]),we=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke({userMessage:"",createdProject:n.createdProject,createdSceneNames:n.createdSceneNames,editorFunctionCallResults:t});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[ke]),Te=CL({project:i,resourceManagementProps:u,selectedAiRequest:M,editorCallbacks:T,onSendEditorFunctionCallResults:we,getEditorFunctionCallResults:ne,addEditorFunctionCallResults:re,onSceneEventsModifiedOutsideEditor:v,onInstancesModifiedOutsideEditor:b,onObjectsModifiedOutsideEditor:C,onObjectGroupsModifiedOutsideEditor:j,i18n:h,onWillInstallExtension:y,onExtensionInstalled:Z,isReadyToProcessFunctionCalls:Y}),Se=Te.isAutoProcessingFunctionCalls,Pe=Te.setAutoProcessFunctionCalls,Ie=Te.onProcessFunctionCalls;c.useEffect((function(){if(L){if(!he)return void A({aiRequestId:null});Pe(L,!!k)}q(!0)}),[]);var Ee=c.useCallback((function(e){var t=e&&e.aiRequestId;t&&Pe(t,!1),e&&A(e)}),[A,Pe]),Me=c.useCallback((function(){Ee({aiRequestId:null})}),[Ee]),Le=c.useCallback((function(){r&&r((0,f.jsx)(t_,{onStartNewChat:Me,canStartNewChat:J,onOpenHistory:X}))}),[r,Me,J,X]);c.useEffect(Le,[Le]),c.useImperativeHandle(t,(function(){return{getProject:l_,updateToolbar:Le,forceUpdateEditor:l_,onEventsBasedObjectChildrenEdited:l_,onSceneObjectEdited:l_,onSceneObjectsDeleted:l_,onSceneEventsModifiedOutsideEditor:l_,onInstancesModifiedOutsideEditor:l_,onObjectsModifiedOutsideEditor:l_,onObjectGroupsModifiedOutsideEditor:l_,startOrOpenChat:Ee,notifyChangesToInGameEditor:mm.VL,switchInGameEditorIfNoHotReloadIsNeeded:l_}}));var Ae=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r,i,o){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(he){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,fE.x)({times:2},(function(){return(0,MM.v7)(ge,{userId:he.id,aiRequestId:t,messageIndex:n,feedback:r,reason:i,freeFormDetails:o})}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error sending feedback: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),[ge,he]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(H.Z,{square:!0,background:"dark",style:s_.paper,children:(0,f.jsx)("div",{style:s_.chatContainer,children:(0,f.jsx)(EM,{aiConfigurationPresetsWithAvailability:CM({limits:xe,getAiSettings:te}),project:i,ref:de,aiRequest:M,onStartNewAiRequest:_,onSendUserMessage:function(e){var t=e.userMessage,n=e.mode;return ke({userMessage:t,mode:n,editorFunctionCallResults:M&&ne(M.id)||[]})},isSending:se(L),lastSendError:le(L),quota:je,increaseQuotaOffering:(0,er.e_)(be)?(0,er.Lf)(be)?"upgrade":"none":"subscribe",onProcessFunctionCalls:Ie,editorFunctionCallResults:M&&ne(M.id)||null,price:ye,availableCredits:Ce,onSendFeedback:Ae,hasOpenedProject:!!i,isAutoProcessingFunctionCalls:!!M&&Se(M.id),setAutoProcessFunctionCalls:function(e){M&&Pe(M.id,e)},i18n:h,editorCallbacks:T,onStartOrOpenChat:Ee})})}),(0,f.jsx)(a_,{open:V,onClose:K,onSelectAiRequest:function(e){Pe(e.id,!1),ae(e.id,e),A({aiRequestId:e.id}),oe(e.id),K()},selectedAiRequestId:L})]})})),(function(e,t){return e.isActive||t.isActive})),u_=function(e){var t=e.open,n=e.onClose,r=(0,gt.Z)();if(!t)return null;var i=[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!0,onClick:n},"close")];return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"What's new in GDevelop?"}),actions:i,open:t,onRequestClose:n,flexColumnBody:!0,children:[(0,f.jsxs)(_.ep,{noMargin:!0,justifyContent:"space-between",children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"GDevelop was upgraded to a new version! Check out the changes."})}),(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"See all the release notes"}),onClick:function(){return y.ZP.openExternalURL("https://github.com/4ian/GDevelop/releases")}})]}),(0,f.jsx)(Ne,{onUpdated:r})]})},d_=function(e){var t=e.defaultOpen,n=c.useState(t),r=(0,s.Z)(n,2),i=r[0],a=r[1];return(0,f.jsx)(u_,{open:i,onClose:function(){return a(!1)}})},p_=function(e){return(0,f.jsx)(D.ZP.Consumer,{children:function(e){var t=e.values,n=e.verifyIfIsNewVersion;return(0,f.jsx)(d_,{defaultOpen:n()&&t.autoDisplayChangelog})}})},f_=n(88991),h_=function(e){var t=e.open,n=e.onClose,r=c.useContext(D.ZP).values,i=c.useState(!1),a=(0,s.Z)(i,2),o=a[0],l=a[1];return t?(0,f.jsx)(w.I18n,{children:function(e){var i=e.i18n.language!==r.language.replace("_","-");return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Language"}),actions:[(0,f.jsx)(T.Z,{label:i?(0,f.jsx)(w.Trans,{id:"Loading..."}):(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:function(){n({languageDidChange:o})},disabled:i},"close")],secondaryActions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Report a wrong translation"}),primary:!1,onClick:function(){return y.ZP.openExternalURL("https://github.com/4ian/GDevelop/issues/969")}},"report-wrong-translation")],cannotBeDismissed:i,onRequestClose:function(){return n({languageDidChange:o})},open:t,maxWidth:"sm",children:(0,f.jsx)(ve,{onLanguageChanged:function(){return l(!0)}})})}}):null},g_=n.g.GD_STARTUP_TIMES;g_||console.error("Could not find GD_STARTUP_TIMES array. Have you declared it in index.html, in a synchronous script?");var m_=function(){var e=["<init>",0];return{steps:g_.map((function(t){var n={stepName:t[0],time:t[1],elapsedTime:t[1]-e[1]};return e=t,n})),totalStartupTime:e[1]}},x_=n(81666),v_=(0,DP.Z)((function(e){return{root:{border:"1px solid ".concat(e.palette.divider),borderRadius:8}}})),b_=function(e){var t=e.storageProvider,n=e.onChooseProvider,r=e.disabled,i=c.useContext($n.ZP),a=v_(),o=t.needUserAuthentication&&!i.authenticated,s=t.disabled||r,l=!s&&(!t.needUserAuthentication||!o);return(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(J.Z,{classes:a,disabled:s,onClick:l?function(){return n(t)}:null,button:l,children:[(0,f.jsx)(x_.Z,{children:t.renderIcon?t.renderIcon({}):void 0}),(0,f.jsx)(X.Z,{children:(0,f.jsxs)(M.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,children:r._(t.name)}),o&&(0,f.jsxs)(M.x1,{noMargin:!0,children:[(0,f.jsx)(T.Z,{label:r._({id:"Create an Account"}),onClick:function(){return i.onOpenCreateAccountDialog()}}),(0,f.jsx)(M.LZ,{}),(0,f.jsx)(G.Z,{primary:!0,label:r._({id:"Login with GDevelop"}),onClick:function(){return i.onOpenLoginDialog()}})]})]})})]},t.internalName)}})},C_=n(44032),j_=F()("electron"),y_={internalName:"LocalFile",name:{id:"Open from computer with GDevelop desktop app"},disabled:!0,renderIcon:function(e){return(0,f.jsx)(C_.Z,{fontSize:e.size})},createOperations:function(){return{}}},Z_=function(e){var t=e.onClose,n=e.storageProviders,r=e.onChooseProvider,i=n.some((function(e){return"Cloud"===e.internalName}));return(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Choose where to load the project from"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close")],onRequestClose:t,open:!0,maxWidth:"sm",children:[i&&(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"You can find your cloud projects in the Create section of the homepage."})}),(0,f.jsxs)(Te.aV,{useGap:!0,children:[n.filter((function(e){return!e.hiddenInOpenDialog})).map((function(e){return(0,f.jsx)(c.Fragment,{children:(0,f.jsx)(b_,{onChooseProvider:r,storageProvider:e})},e.internalName)})),!j_&&!(0,ja._F)()&&(0,f.jsx)(b_,{onChooseProvider:r,storageProvider:y_})]})]})}})},k_=F()("electron"),w_={internalName:"LocalFile",name:{id:"Save to computer with GDevelop desktop app"},disabled:!0,renderIcon:function(e){return(0,f.jsx)(C_.Z,{fontSize:e.size})},createOperations:function(){return{}}},T_=function(e){var t=e.onClose,n=e.storageProviders,r=e.onChooseProvider,i=c.useContext($n.ZP),a=i.profile,o=i.cloudProjects,s=!!a&&!o,l=RP(i);return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Choose where to save the project to"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close")],onRequestClose:t,open:!0,maxWidth:"sm",children:(0,f.jsxs)(Te.aV,{useGap:!0,children:[n.filter((function(e){return!e.hiddenInSaveDialog})).map((function(e){return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(b_,{onChooseProvider:r,storageProvider:e,disabled:"Cloud"===e.internalName&&(l||s)}),"Cloud"===e.internalName&&l&&(0,f.jsx)(FP,{margin:"dense"})]},e.internalName)})),!k_&&!(0,ja._F)()&&(0,f.jsx)(b_,{onChooseProvider:r,storageProvider:w_})]})})},S_=function(e){var t=e.onClose,n=e.onConfirm;return(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"Confirm the opening"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!1,onClick:t},"close"),(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Open the project"}),primary:!0,onClick:n},"open-project")],onRequestClose:t,onApply:n,open:!0,maxWidth:"sm",children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:'You\'re about to open (or re-open) a project. Click on "Open the Project" to continue.'})})})}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(Io.Z,{children:(0,f.jsx)(w.Trans,{id:"If you have a popup blocker interrupting the opening, allow the popups and try a second time to open the project."})})})})]})};function P_(e,t){return!t.gdVersion&&t.eventsFunctions?((0,bi.gR)({message:[e._({id:"Unable to open this file."}),e._({id:"This file is an extension file for GDevelop 5. You should instead import it, using the window to add a new extension to your project."})].join("\n"),rawError:void 0,errorId:"extension-opened-as-project-error",doNotReport:!0}),!1):!(!t.gdVersion&&!t.eventsFunctions)||((0,bi.gR)({message:[e._({id:"Unable to open this file."}),e._({id:"This file is not recognized as a GDevelop 5 project. Be sure to open a file that was saved using GDevelop."})].join("\n"),rawError:void 0,errorId:"malformed-project-error",doNotReport:!0}),!1)}var I_=function(e,t,n){return e?t(e).map((function(e){return{text:e.getName(),handler:function(){return n(e.getName())}}})):[]},E_=function(e){(0,Fi.YZ)("QUIT_APP",!0,{handler:e.onCloseApp}),(0,Fi.YZ)("OPEN_PROFILE",!0,{handler:e.onOpenProfile}),(0,Fi.YZ)("OPEN_PROJECT_MANAGER",!0,{handler:e.onOpenProjectManager}),(0,Fi.YZ)("LAUNCH_NEW_PREVIEW",e.previewEnabled,{handler:e.onLaunchPreview}),(0,Fi.YZ)("HOT_RELOAD_PREVIEW",e.hasPreviewsRunning,{handler:e.onHotReloadPreview}),(0,Fi.YZ)("LAUNCH_DEBUG_PREVIEW",e.previewEnabled&&e.allowNetworkPreview,{handler:e.onLaunchDebugPreview}),(0,Fi.YZ)("LAUNCH_NETWORK_PREVIEW",e.previewEnabled&&e.allowNetworkPreview,{handler:e.onLaunchNetworkPreview}),(0,Fi.YZ)("LAUNCH_PREVIEW_WITH_DIAGNOSTIC_REPORT",e.previewEnabled&&!e.hasPreviewsRunning,{handler:e.onLaunchPreviewWithDiagnosticReport}),(0,Fi.YZ)("OPEN_HOME_PAGE",!0,{handler:e.onOpenHomePage}),(0,Fi.YZ)("CREATE_NEW_PROJECT",!0,{handler:e.onCreateProject}),(0,Fi.YZ)("OPEN_PROJECT",!0,{handler:e.onOpenProject}),(0,Fi.YZ)("SAVE_PROJECT",!!e.project,{handler:e.onSaveProject}),(0,Fi.YZ)("SAVE_PROJECT_AS",!!e.project,{handler:e.onSaveProjectAs}),(0,Fi.YZ)("CLOSE_PROJECT",!!e.project,{handler:e.onCloseProject}),(0,Fi.YZ)("EXPORT_GAME",!!e.project,{handler:e.onExportGame}),(0,Fi.YZ)("INVITE_COLLABORATORS",!!e.project,{handler:e.onInviteCollaborators}),(0,Fi.YZ)("OPEN_COMMAND_PALETTE",!0,{handler:e.onOpenCommandPalette});var t=e.onRestartInGameEditor;(0,Fi.YZ)("RESTART_IN_GAME_EDITOR",!0,{handler:c.useCallback((function(){return t("relaunched-manually")}),[t])}),(0,Fi.gT)("OPEN_LAYOUT",!!e.project,{generateOptions:c.useCallback((function(){return I_(e.project,Zu,e.onOpenLayout)}),[e.project,e.onOpenLayout])}),(0,Fi.gT)("OPEN_EXTERNAL_EVENTS",!!e.project,{generateOptions:c.useCallback((function(){return I_(e.project,ku,e.onOpenExternalEvents)}),[e.project,e.onOpenExternalEvents])}),(0,Fi.gT)("OPEN_EXTERNAL_LAYOUT",!!e.project,{generateOptions:c.useCallback((function(){return I_(e.project,wu,e.onOpenExternalLayout)}),[e.project,e.onOpenExternalLayout])}),(0,Fi.gT)("OPEN_EXTENSION",!!e.project,{generateOptions:c.useCallback((function(){return I_(e.project,Tu,e.onOpenEventsFunctionsExtension)}),[e.project,e.onOpenEventsFunctionsExtension])})},M_=n(37477),L_=function(e,t){var n=t.inputValue.toLowerCase();if(""===n)return e;var r=[],i=[];return e.forEach((function(e){if(e.hit)return r.push(e);var a=t.getOptionLabel(e).toLowerCase();return a.includes(n)?r.push(e):function(e,t){return!t||function(e,t){var n=t.toLowerCase();e=e.toLowerCase();for(var r=0,i=0;i<t.length;i++)n[i]===e[r]&&(r+=1);return r===e.length}(e,t)}(n,a)?i.push(e):void 0})),[].concat(r,i)},A_=n(60274),O_=n(85814),R_=n.n(O_)()("RC2XAJAUNE","7853cc8136c930e6c7b8f68238eea179"),F_=!0,D_={search:function(e){return(0,o.Z)((0,a.Z)().mark((function t(){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==F_){t.next=3;break}return F_=!1,t.abrupt("return",Promise.resolve({results:[{hits:[]}]}));case 3:return t.abrupt("return",R_.search(e));case 4:case"end":return t.stop()}}),t)})))()}},N_=function(e){return Object.entries(e).reduce((function(e,t){var n=(0,s.Z)(t,2),r=n[0],i=n[1];return i&&e.push([Number(r.replace("lvl","")),i]),e}),[]).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))},__=(0,ur.Z)((function(e){return{listItemContainer:{width:"100%"},rootSmallPadding:{paddingLeft:0},wikiPrimaryTextHierarchy:{color:e.palette.text.secondary},wikiSecondaryText:{color:e.palette.text.primary}}})),B_={chip:{borderRadius:3}},U_=function(e){var t,n=e.hit,r=(0,be.UQ)().isMobile,i=__(),a=!1;n.content?t=n.content:(a=!0,t=function(e){var t=N_(e.hierarchy);return t[t.length-1]}(n));var o=function(e,t){var n=t.removeLastLevel,r=__(),i=N_(e.hierarchy),a=(i=i.slice(0,i.length-(n?1:0))).pop();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:r.wikiPrimaryTextHierarchy,children:i.map((function(e){return"".concat(e," > ")}))})," ",(0,f.jsx)("span",{children:a})]})}(n,{removeLastLevel:a});return(0,f.jsxs)(J.Z,{dense:!0,component:"div",ContainerComponent:"div",classes:{container:i.listItemContainer,root:r?i.rootSmallPadding:null},children:[(0,f.jsx)(x_.Z,{children:(0,f.jsx)(A_.Z,{})}),(0,f.jsx)(X.Z,{primary:o,secondary:(0,f.jsx)("span",{className:i.wikiSecondaryText,children:t})})]})},V_=function(e){var t=(0,be.UQ)(),n=t.isMobile,r=t.isMediumScreen,i=(0,hi.bX)(),a=c.useState(!0),o=(0,s.Z)(a,2),u=o[0],d=o[1],p=(0,V.LB)(),h=__(),g=c.useCallback((function(e){if(n||r)return null;if(e.text)return null;if(e.name){var t=p[e.name];if(!t)return null;var i=(0,V.$3)(t);return(0,f.jsx)(K.Z,{children:(0,f.jsx)(Q.Z,{label:i,style:B_.chip})})}}),[p,n,r]),m=c.useCallback((function(t){if(t.text)return t.text;if(t.name){var n=ee.Z[t.name],r=n.area,i=n.displayText,a=ee.R[r];return e.i18n._(a)+" \u3009"+e.i18n._(i)}}),[e.i18n]),x=c.useCallback((function(e){return e.text&&e.iconSrc?(0,f.jsx)(nc.Z,{iconSize:20,src:e.iconSrc}):e.icon?e.icon:(0,f.jsx)(ot.Z,{})}),[]),v=c.useCallback((function(e){return e.hit?(0,f.jsx)(U_,{hit:e.hit}):(0,f.jsxs)(J.Z,{dense:!0,component:"div",ContainerComponent:"div",classes:{container:h.listItemContainer,root:n?h.rootSmallPadding:null},children:[(0,f.jsx)(x_.Z,{children:x(e)}),(0,f.jsx)(X.Z,{primary:m(e)}),g(e)]})}),[h.listItemContainer,h.rootSmallPadding,n,m,g,x]);return(0,f.jsx)(cr.ZP,{open:u,onClose:function(t,n){"select-option"!==n&&"toggleInput"!==n&&e.onClose()},onOpen:function(){return d(!0)},options:e.items,getOptionLabel:m,onChange:function(t,n){e.onSelect(n)},onInputChange:function(t,n,r){"input"===r&&e.onInputChange&&e.onInputChange(n)},openOnFocus:!0,autoHighlight:!0,filterOptions:L_,renderInput:function(t){return(0,f.jsx)(lr.Z,(0,l.Z)((0,l.Z)({},t),{},{placeholder:e.i18n._(e.placeholder),variant:"outlined",autoFocus:i}))},renderOption:v})},H_=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,f.jsx)("path",{d:"M6.00016 6.16663C5.72402 6.16663 5.50016 6.39048 5.50016 6.66663C5.50016 6.94277 5.72402 7.16663 6.00016 7.16663H7.41741L8.1925 9.49144C8.26056 9.69559 8.45163 9.83329 8.66683 9.83329H11.3335C11.6096 9.83329 11.8335 9.60944 11.8335 9.33329C11.8335 9.05715 11.6096 8.83329 11.3335 8.83329H9.02719L8.2521 6.50848C8.18403 6.30433 7.99297 6.16663 7.77776 6.16663H6.00016Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M9.7335 6.16663C9.45735 6.16663 9.2335 6.39048 9.2335 6.66663C9.2335 6.94277 9.45735 7.16663 9.7335 7.16663H11.3335C11.6096 7.16663 11.8335 6.94277 11.8335 6.66663C11.8335 6.39048 11.6096 6.16663 11.3335 6.16663H9.7335Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.51868 2.16663C4.07174 2.16663 3.64311 2.34417 3.32708 2.66021C3.01104 2.97624 2.8335 3.40487 2.8335 3.85181V12.1481C2.8335 12.595 3.01104 13.0237 3.32708 13.3397C3.64311 13.6557 4.07174 13.8333 4.51868 13.8333H12.815C13.2619 13.8333 13.6905 13.6557 14.0066 13.3397C14.3226 13.0237 14.5002 12.595 14.5002 12.1481V3.85181C14.5002 3.40487 14.3226 2.97624 14.0066 2.66021C13.6905 2.34417 13.2619 2.16663 12.815 2.16663H4.51868ZM4.03418 3.36731C4.16268 3.23882 4.33696 3.16663 4.51868 3.16663H12.815C12.9967 3.16663 13.171 3.23881 13.2995 3.36731C13.428 3.49581 13.5002 3.67009 13.5002 3.85181V12.1481C13.5002 12.3298 13.428 12.5041 13.2995 12.6326C13.171 12.7611 12.9967 12.8333 12.815 12.8333H4.51868C4.33696 12.8333 4.16268 12.7611 4.03418 12.6326C3.90568 12.5041 3.8335 12.3298 3.8335 12.1481V3.85181C3.8335 3.67009 3.90569 3.49581 4.03418 3.36731Z",fill:"currentColor"})]}))})),z_=n(6571),W_=n(4324),G_=n(61567),Y_=(0,ur.Z)({scrollPaper:{alignItems:"flex-start"}}),q_=(0,ur.Z)({rounded:{borderRadius:4}}),J_=c.forwardRef((function(e,t){var n=Y_(),r=q_(),i=(0,be.UQ)().isMobile,a=c.useState(""),o=(0,s.Z)(a,2),u=o[0],d=o[1],p=c.useContext(Ks.Z),h=c.useState("closed"),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(null),b=(0,s.Z)(v,2),C=b[0],j=b[1],Z=(0,z_.b)(),k=Z.results,T=Z.status,S=(0,W_.l)().refine,P=c.useState("ok"),I=(0,s.Z)(P,2),E=I[0],M=I[1];c.useEffect((function(){"ok"===E&&"error"===T?M("error"):"error"===E&&"idle"===T&&M("ok")}),[T,E]);var L=!u||"error"===E,A=c.useCallback((function(e){e.handler?(e.handler(),"OPEN_COMMAND_PALETTE"!==e.name&&x("closed")):(j(e),x("option"))}),[j,x]),O=function(e){e.handler(),x("closed")},R=c.useCallback((function(){x(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?"command":"closed")}),[]),F=c.useCallback((function(e){var t=p.getNamedCommand(e);t&&A(t)}),[A,p]);c.useImperativeHandle(t,(function(){return{open:R,launchCommand:F}}));var D=(0,sr.N)((function(){u&&S(u)}),200);c.useEffect(D,[u,D]);var N=c.useMemo((function(){var e=p.getAllNamedCommands().filter((function(e){return!ee.Z[e.name].ghost})).map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{icon:(0,f.jsx)(H_,{})})}));if(L)return e;var t=k.hits.map((function(e){return{hit:e,handler:function(){return y.ZP.openExternalURL(e.url)}}}));return e.concat(t)}),[p,k.hits,L]),_=c.useCallback((function(){x("closed")}),[]);return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsxs)(M_.Z,{onClose:_,"aria-label":"command-palette",open:"closed"!==m,fullWidth:!0,hideBackdrop:!0,maxWidth:"sm",classes:n,transitionDuration:0,PaperProps:{classes:r},children:["command"===m&&(0,f.jsx)(V_,{i18n:t,onInputChange:d,items:N,placeholder:i?{id:"Search"}:{id:"Start typing a command or searching something..."},onClose:_,onSelect:A}),"option"===m&&C&&(0,f.jsx)(V_,{i18n:t,items:C.generateOptions(),placeholder:ee.Z[C.name],onClose:_,onSelect:O})]})}})})),X_=c.forwardRef((function(e,t){return(0,f.jsx)(G_.p,{searchClient:D_,indexName:"gdevelop",children:(0,f.jsx)(J_,{ref:t})})})),K_=n(49142);function Q_(e){var t=e.isForEditor,n=e.onClose,r=e.onLaunchNewPreview;return function(e){return e.filter((function(e){return"error"===e.kind||"fatal"===e.kind})).length>0}(e.logs)?(0,f.jsx)(E.ZP,{title:t?(0,f.jsx)(w.Trans,{id:"The 3D editor or the game crashed"}):(0,f.jsx)(w.Trans,{id:"Restarting the preview from scratch is required"}),actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!1,onClick:n},"close"),(0,f.jsx)(E.vF,{icon:(0,f.jsx)(Xe,{}),label:t?(0,f.jsx)(w.Trans,{id:"Relaunch the 3D editor"}):(0,f.jsx)(w.Trans,{id:"Close and launch a new preview"}),primary:!0,onClick:r},"new-preview")],secondaryActions:[(0,f.jsx)(An.Z,{helpPagePath:"/interface/preview"},"help")],onRequestClose:n,open:!0,children:(0,f.jsx)(_.ak,{noMargin:!0,children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"{0}",values:{0:t?(0,f.jsx)(w.Trans,{id:"The 3D editor, or some logic/code inside the game, has encountered an unhandled exception or error. It's necessary to restart the 3D editor."}):(0,f.jsx)(w.Trans,{id:"Your latest changes could not be applied to the preview(s) being run. You should start a new preview instead to make sure that all your changes are reflected in the game."})}})})})}):null}var $_=F()("electron"),eB=$_?$_.ipcRenderer:null,tB=Date.now(),nB=function(e){(0,c.useEffect)((function(){!function(e){if(null!==eB){var t={details:e?"Working on:":"Not working on",state:e?e.getName():"any game",startTimestamp:tB,largeImageKey:"gdicon",largeImageText:"GDevelop"};eB.send("update-discord-rich-presence",t)}}(e)}),[e])},rB=function(e){var t=e.project,n=e.fileMetadata,r=e.resourceManagementProps,i=e.isProjectOpening,l=e.newProjectSetupDialogOpen,u=e.setNewProjectSetupDialogOpen,d=e.createEmptyProject,p=e.createProjectFromExample,h=e.createProjectFromPrivateGameTemplate,g=e.closeAskAi,m=e.storageProviders,x=e.storageProvider,v=e.onOpenLayout,b=e.onWillInstallExtension,C=e.onExtensionInstalled,j=c.useState(!1),y=(0,s.Z)(j,2),Z=y[0],k=y[1],w=c.useState(null),T=(0,s.Z)(w,2),S=T[0],P=T[1],I=c.useState(null),E=(0,s.Z)(I,2),M=E[0],L=E[1],A=c.useState(!0),O=(0,s.Z)(A,2),R=O[0],F=O[1],D=c.useContext(fa.ZP).removeRouteArguments,N=c.useContext($n.ZP).receivedGameTemplates,_=c.useContext(jP.mJ).privateGameTemplateListingDatas,B=c.useCallback((function(){F(!1),L(null),P(null),u(!1)}),[u]),U=c.useCallback((function(){F(!1),L(null),P(null),u(!0)}),[u]),V=c.useMemo((function(){if(!S||!_||!N)return null;var e=N.map((function(e){return e.id}));return _.filter((function(t){return t.sellerId===S.sellerId&&!e.includes(t.sellerId)})).sort((function(e,t){return e.name.localeCompare(t.name)}))}),[S,_,N]),H=c.useCallback((function(e){var t=e.privateGameTemplateListingData,n=e.preventBackHome;P(t),F(!!n),t&&u(!0)}),[P,u]),z=c.useCallback((function(e){var t=e.exampleShortHeader,n=e.preventBackHome;L(t),F(!!n),t&&u(!0)}),[L,u]),W=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,(0,_i.rx)();case 4:if(n=e.sent,r=n.exampleShortHeaders.find((function(e){return e.slug===t}))){e.next=8;break}throw new Error('Unable to find the example with slug "'.concat(t,'"'));case 8:z({exampleShortHeader:r,preventBackHome:!0}),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),console.error("Error caught while opening example:",e.t0),e.abrupt("return");case 15:return e.prev=15,k(!1),D(["create-from-example"]),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[0,11,15,19]])})));return function(t){return e.apply(this,arguments)}}(),[z,D]);return{selectedExampleShortHeader:M,selectedPrivateGameTemplateListingData:S,closeNewProjectDialog:B,openNewProjectDialog:U,onSelectExampleShortHeader:z,onSelectPrivateGameTemplateListingData:H,renderNewProjectDialog:function(){return(0,f.jsxs)(f.Fragment,{children:[Z&&(0,f.jsx)(to.Z,{showImmediately:!0}),l&&(0,f.jsx)(IL,{project:t,fileMetadata:n,resourceManagementProps:r,isProjectOpening:i,onClose:B,onCreateEmptyProject:d,onCreateFromExample:p,onCreateProjectFromPrivateGameTemplate:h,onCloseAskAi:g,storageProviders:m,storageProvider:x,selectedExampleShortHeader:M,onSelectExampleShortHeader:function(e){return z({exampleShortHeader:e,preventBackHome:!1})},selectedPrivateGameTemplateListingData:S,onSelectPrivateGameTemplateListingData:function(e){return H({privateGameTemplateListingData:e,preventBackHome:!1})},privateGameTemplateListingDatasFromSameCreator:V,preventBackHome:R,onOpenLayout:v,onWillInstallExtension:b,onExtensionInstalled:C})]})},fetchAndOpenNewProjectSetupDialogForExample:W}},iB=function(e){var t=e.project,n=e.fileMetadata,i=e.getStorageProvider,l=e.options,u=e.i18n,d=e.resourceSources,p=e.onClose,h=e.onChooseResources,g=(0,be.UQ)().isMobile,m=c.useContext(Ev.Z).searchResults,x=c.useMemo((function(){return i()}),[i]),v=c.useState(null),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState([]),Z=(0,s.Z)(y,2),k=Z[0],S=Z[1],P=c.useContext(D.ZP),I=d.filter((function(e){return e.kind===l.resourceKind})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===x.internalName})),L=I.filter((function(e){return"standalone"===e.displayTab})),A=I.filter((function(e){return"import"===e.displayTab})),O=I.filter((function(e){return"import-advanced"===e.displayTab})),R=I.find((function(e){return e.name===l.initialSourceName})),F=R&&R.selectResourcesHeadless,U=c.useState((function(){return R?"import"===R.displayTab?"import":"standalone"===R.displayTab?"standalone-"+R.name:"import":"import"})),V=(0,s.Z)(U,2),H=V[0],z=V[1],W=c.useState(!1),G=(0,s.Z)(W,2),Y=G[0],q=G[1],J=c.useState(!1),X=(0,s.Z)(J,2),K=X[0],Q=X[1];return c.useEffect((function(){return function(){return q(!0)}}),[H]),c.useEffect((function(){if(R){var e=R.selectResourcesHeadless;e&&(0,o.Z)((0,a.Z)().mark((function r(){var o;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e({i18n:u,options:l,project:t,fileMetadata:n,getStorageProvider:i,getLastUsedPath:P.getLastUsedPath,setLastUsedPath:P.setLastUsedPath,resourcesImporationBehavior:P.values.resourcesImporationBehavior});case 3:o=r.sent,h({selectedResources:o,selectedSourceName:R.name}),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.error("Unexpected error from a resource source:",r.t0),h({selectedResources:[],selectedSourceName:R.name});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}),[]),F?null:(0,f.jsxs)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"New resource"}),open:!0,fullHeight:!0,flexColumnBody:!0,actions:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),primary:!0,onClick:p},"close"),L.map((function(e){if(H!=="standalone-"+e.name||!e.renderPrimaryAction)return null;var t=m&&"number"===typeof C?m[C]:null;return e.renderPrimaryAction({resource:t,selectedResources:k,onChooseResources:h})}))],secondaryActions:[O.length>0?(0,f.jsx)(M.sg,{children:(0,f.jsx)(yr.Z,{onToggle:function(e,t){return Q(t)},toggled:K,labelPosition:"right",label:(0,f.jsx)(w.Trans,{id:"Show advanced import options"})})},"show-advanced-toggle"):null],onRequestClose:p,fixedContent:L.length?(0,f.jsx)(B.m,{value:H,onChange:z,options:[].concat((0,r.Z)(L.map((function(e){var t=e.name,n=e.displayName;return{label:u._(n),value:"standalone-"+t}}))),[{label:(0,f.jsx)(w.Trans,{id:"Choose a file"}),value:"import"}]),variant:g?"scrollable":void 0}):null,children:[L.map((function(e){return H!=="standalone-"+e.name?null:e.renderComponent({i18n:u,options:l,project:t,fileMetadata:n,selectedResourceIndex:C,onSelectResource:j,selectedResources:k,onResourcesSelected:S,getStorageProvider:i,getLastUsedPath:P.getLastUsedPath,setLastUsedPath:P.setLastUsedPath,onChooseResources:h,resourcesImporationBehavior:P.values.resourcesImporationBehavior})})),"import"===H?(0,f.jsx)(M.x1,{expand:!0,noMargin:!0,children:(0,f.jsxs)(_.ak,{expand:!0,noMargin:!0,children:[A.map((function(e){return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(N.Z,{size:"block-title",children:u._(e.displayName)}),e.renderComponent({i18n:u,options:l,project:t,fileMetadata:n,getStorageProvider:i,getLastUsedPath:P.getLastUsedPath,setLastUsedPath:P.setLastUsedPath,onChooseResources:h,resourcesImporationBehavior:P.values.resourcesImporationBehavior,automaticallyOpenIfPossible:R===e&&!Y})]},e.name)})),K&&O.map((function(e){return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(N.Z,{size:"block-title",children:u._(e.displayName)}),e.renderComponent({i18n:u,options:l,project:t,fileMetadata:n,getStorageProvider:i,getLastUsedPath:P.getLastUsedPath,setLastUsedPath:P.setLastUsedPath,onChooseResources:h,resourcesImporationBehavior:P.values.resourcesImporationBehavior})]},e.name)}))]})}):null]})},aB={imgContainer:{marginBottom:16}},oB=function(e){var t=e.open,n=e.tutorialId,r=e.onClose,i=e.tutorialCompletionStatus,a=e.isProjectOpened,o=e.startTutorial,s=e.isProjectOpening,l=(0,c.useContext(gi.Z).getInAppTutorialShortHeader)(n);return l?(0,f.jsx)(w.I18n,{children:function(e){var c=function(e){var t=e.i18n,n=e.status,r=e.startTutorial,i=e.onClose,a=e.isProjectOpened,o=e.tutorialShortHeader,s=(e.tutorialId,function(){return r("startOver")});return"started"===n?{title:(0,f.jsx)(w.Trans,{id:"Welcome back!"}),content:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Let's finish your game, shall we?"})}),primaryAction:{label:(0,f.jsx)(w.Trans,{id:"Let's go"}),onClick:function(){return r("resume")}},secondaryAction:{label:a?(0,f.jsx)(w.Trans,{id:"No, close project"}):(0,f.jsx)(w.Trans,{id:"Back"}),onClick:i},tertiaryAction:{label:(0,f.jsx)(w.Trans,{id:"Restart tutorial"}),onClick:s}}:"complete"===n?{title:(0,f.jsx)(w.Trans,{id:"Restart the Tutorial"}),content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"You're about to restart this multichapter guided lesson."})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"GDevelop will save your progress, so you can take a break if you need."})})]}),primaryAction:{label:(0,f.jsx)(w.Trans,{id:"Restart"}),onClick:s},secondaryAction:{label:(0,f.jsx)(w.Trans,{id:"Back"}),onClick:i},tertiaryAction:null}:{title:(0,vo.a)(t,o.titleByLocale),content:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"In this tutorial you will learn:"})}),o.bulletPointsByLocale.map((function(e,n){return(0,f.jsx)(N.Z,{displayAsListItem:!0,noMargin:!0,children:(0,vo.a)(t,e)},n)})),!o.isMiniTutorial&&(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"This is a multichapter tutorial. GDevelop will save your progress so you can take a break when you need it."})})]}),primaryAction:{label:(0,f.jsx)(w.Trans,{id:"Let's go"}),onClick:function(){return r("start")}},secondaryAction:{label:(0,f.jsx)(w.Trans,{id:"Back"}),onClick:i},tertiaryAction:null}}({i18n:e.i18n,status:l.isMiniTutorial?"notStarted":i,startTutorial:o,onClose:r,isProjectOpened:a,tutorialShortHeader:l,tutorialId:n}),u=c.title,d=c.content,p=c.primaryAction,h=c.secondaryAction,g=c.tertiaryAction,m=[(0,f.jsx)(T.Z,{label:h.label,onClick:h.onClick,disabled:s},"close"),(0,f.jsx)(E.vF,{label:p.label,primary:!0,onClick:p.onClick,disabled:s},"start")],x=g?[(0,f.jsx)(T.Z,{label:g.label,onClick:g.onClick,disabled:s},"other")]:void 0;return(0,f.jsx)(E.ZP,{title:u,actions:m,secondaryActions:x,open:t,onRequestClose:r,onApply:p.onClick,maxWidth:"xs",cannotBeDismissed:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(M.x1,{alignItems:"center",justifyContent:"center",noMargin:!0,children:(0,f.jsx)("div",{style:aB.imgContainer,children:(0,f.jsx)("img",{alt:"hero",src:"res/hero.png",width:48,height:48})})}),d]})})}}):(console.error("No tutorial short header found for tutorial ".concat(n," - StartInAppTutorialDialog was opened despite tutorials not being loaded?")),null)},sB=n(39128),lB=n(63873),cB=function(e){var t=e.onSaveProject,n=e.canEndTutorial,r=e.endTutorial,i=e.onClose,a=e.isSavingProject,o=c.useState(!1),l=(0,s.Z)(o,2),u=l[0],d=l[1],p=c.useState((0,f.jsx)(w.Trans,{id:"Leave the tutorial"})),h=(0,s.Z)(p,2),g=h[0],m=h[1];c.useEffect((function(){u&&(a?m((0,f.jsx)(w.Trans,{id:"Saving project"})):n&&m((0,f.jsx)(w.Trans,{id:"Project saved"})))}),[a,n,u]);var x=function(){r({reason:"user-early-exit"}),i()},v=function(){d(!0),n?x():t()},b=a?(0,f.jsx)(w.Trans,{id:"Saving..."}):n?(0,f.jsx)(w.Trans,{id:"Close Project"}):(0,f.jsx)(w.Trans,{id:"Save Project"});return(0,f.jsxs)(E.ZP,{open:!0,maxWidth:"sm",title:g,onRequestClose:function(){a||i()},onApply:v,secondaryActions:[(0,f.jsx)(T.Z,{onClick:x,label:(0,f.jsx)(w.Trans,{id:"Exit without saving"})},"exit")],actions:[(0,f.jsx)(T.Z,{onClick:i,label:(0,f.jsx)(w.Trans,{id:"Cancel"})},"cancel"),(0,f.jsx)($r.Z,{isLoading:a,children:(0,f.jsx)(E.vF,{primary:!0,label:b,disabled:a,onClick:v})},"save-and-exit")],flexColumnBody:!0,children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"You are about to quit the tutorial."})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"You can save your project to come back to it later. What do you want to do?"})})]})},uB=function(e){var t=e.openInAppTutorialDialog,n=e.openProfileDialog,r=e.openAskAi,i=e.openStandaloneDialog,s=c.useContext(fa.ZP),l=s.routeArguments,u=s.removeRouteArguments,d=c.useContext(mo.J).openSubscriptionDialog,p=c.useContext(mM.q$).openCreditsPackageDialog,f=c.useContext($n.ZP),h=f.onOpenCreateAccountDialog,g=f.onOpenCreateAccountWithPurchaseClaimDialog,m=f.onOpenPurchaseClaimDialog,x=f.onOpenLoginDialog,v=f.authenticated,b=f.loginState,C=(0,Ye.Z)().showAlert,y=c.useContext(j.Z);c.useEffect((function(){function e(){return(e=(0,o.Z)((0,a.Z)().mark((function e(){var o,s,c,f,j,y,Z,k;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=l["initial-dialog"],e.next="subscription"===e.t0?3:"profile"===e.t0?7:"signup"===e.t0?12:"onboarding"===e.t0||"guided-lesson"===e.t0?38:"games-dashboard"===e.t0?42:"ask-ai"===e.t0?43:"standalone"===e.t0?46:"credits-purchase"===e.t0?48:51;break;case 3:return o=l["recommended-plan-id"]||"gdevelop_silver",d({analyticsMetadata:{reason:"Landing dialog at opening",recommendedPlanId:o,placementId:"opening-from-link"}}),u(["initial-dialog","recommended-plan-id"]),e.abrupt("break",52);case 7:if("done"===b){e.next=9;break}return e.abrupt("return");case 9:return v?n():x(),u(["initial-dialog"]),e.abrupt("break",52);case 12:if("done"===b){e.next=14;break}return e.abrupt("return");case 14:if(e.prev=14,s=l["claimable-token"],(c=l["purchase-id"])&&s){e.next=20;break}return v?n():h(),e.abrupt("return");case 20:if(f=l.bundle,j=null,!f){e.next=27;break}return e.next=25,(0,DL.Al)({bundleId:f,visibility:"all"});case 25:y=e.sent,j=y;case 27:if(j){e.next=32;break}return console.error("The bundle with id ".concat(f," does not exist. Cannot claim.")),e.next=31,C({title:{id:"Unknown bundle"},message:{id:"The bundle you are trying to claim does not exist anymore. Please contact support if you think this is an error."}});case 31:return e.abrupt("return");case 32:Z={productListingData:j,purchaseId:c,claimableToken:s},v?m(Z):g(Z);case 34:return e.prev=34,u(["initial-dialog","purchase-id","claimable-token","bundle"]),e.finish(34);case 37:return e.abrupt("break",52);case 38:return k=l["tutorial-id"],t(k||LS.bs),u(["initial-dialog","tutorial-id"]),e.abrupt("break",52);case 42:return e.abrupt("break",52);case 43:return r({aiRequestId:null}),u(["initial-dialog"]),e.abrupt("break",52);case 46:return i(),e.abrupt("break",52);case 48:return p(),u(["initial-dialog"]),e.abrupt("break",52);case 51:return e.abrupt("break",52);case 52:case"end":return e.stop()}}),e,null,[[14,,34,37]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l,t,n,i,u,d,v,h,g,x,r,b,C,y,m,p])},dB={image:{maxWidth:350},imageLink:{cursor:"pointer",maxWidth:350}};var pB=function(e){var t=e.dialogContent,n=e.endTutorial,r=e.goToNextStep,i=e.isLastStep,a=function(){i?n({reason:"completed"}):r&&r()},o=i?[(0,f.jsx)(E.vF,{primary:!0,onClick:a,label:(0,f.jsx)(w.Trans,{id:"Close"})},"close")]:[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Leave the tutorial"}),onClick:n},"leave"),(0,f.jsx)(E.vF,{primary:!0,onClick:a,label:(0,f.jsx)(w.Trans,{id:"Start next chapter"})},"next")];return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsx)(E.ZP,{title:null,onApply:a,open:!0,actions:o,maxWidth:"sm",flexColumnBody:!0,cannotBeDismissed:!0,children:(0,f.jsx)(_.ak,{noMargin:!0,children:t.content.map((function(e,t){if(e.messageDescriptor)return(0,f.jsx)(Re.r,{translatableSource:e.messageDescriptor},e.messageDescriptor.id||e.messageDescriptor);if(e.messageByLocale)return(0,f.jsx)(Re.r,{source:(0,vo.a)(n,e.messageByLocale)},Object.values(e.messageByLocale)[0]);if(e.image){var r=e.image,i=r.linkHref,a=r.imageSource;return i?(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(pe.Z,{href:i,onClick:function(){return y.ZP.openExternalURL(i)},children:(0,f.jsx)(_p.W,{style:dB.imageLink,src:a,alt:"End of tutorial dialog image"})})},"image-".concat(t)):(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(_p.W,{style:dB.image,src:a,alt:"End of tutorial dialog image"})},"image-".concat(t))}return null}))})})}})},fB=function(e,t){return getComputedStyle(e).getPropertyValue(t)},hB=function e(t,n){return t.parentElement?e(t.parentElement,n.concat([t])):n},gB=function(e){return/(auto|scroll)/.test(function(e){return fB(e,"overflow")+fB(e,"overflow-y")+fB(e,"overflow-x")}(e))},mB=function(e){return"in-app-tutorial-avatar"===e.id?Wd.BI:function(e){var t=document.querySelector("#root");return!!t&&t.contains(e)}(e)?getComputedStyle(e).getPropertyPriority("z-index")+10:Wd.BI},xB=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66669C8.13664 2.66669 8.26733 2.72261 8.36168 2.82145L11.8617 6.48812C12.0523 6.68787 12.045 7.00436 11.8452 7.19503C11.6455 7.3857 11.329 7.37834 11.1383 7.17859L8 3.89083L4.86168 7.17859C4.67101 7.37834 4.35451 7.3857 4.15476 7.19503C3.95501 7.00436 3.94765 6.68787 4.13832 6.48812L7.63832 2.82145C7.73267 2.72261 7.86336 2.66669 8 2.66669Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3.33335C8.27614 3.33335 8.5 3.55721 8.5 3.83335V12.8334C8.5 13.1095 8.27614 13.3334 8 13.3334C7.72386 13.3334 7.5 13.1095 7.5 12.8334V3.83335C7.5 3.55721 7.72386 3.33335 8 3.33335Z",fill:"currentColor"})]}))})),vB=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.15476 8.80501C4.35451 8.61434 4.67101 8.6217 4.86168 8.82145L8 12.1092L11.1383 8.82145C11.329 8.6217 11.6455 8.61434 11.8452 8.80501C12.045 8.99568 12.0523 9.31218 11.8617 9.51193L8.36168 13.1786C8.26733 13.2774 8.13664 13.3334 8 13.3334C7.86336 13.3334 7.73267 13.2774 7.63832 13.1786L4.13832 9.51193C3.94765 9.31218 3.95501 8.99568 4.15476 8.80501Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66669C8.27614 2.66669 8.5 2.89054 8.5 3.16669V12.1667C8.5 12.4428 8.27614 12.6667 8 12.6667C7.72386 12.6667 7.5 12.4428 7.5 12.1667V3.16669C7.5 2.89054 7.72386 2.66669 8 2.66669Z",fill:"currentColor"})]}))})),bB=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 203.079 203.079",fill:"currentColor",children:(0,f.jsx)("path",{d:"M192.231,104.082V102c0-12.407-10.094-22.5-22.5-22.5c-2.802,0-5.484,0.519-7.961,1.459 C159.665,70.722,150.583,63,139.731,63c-2.947,0-5.76,0.575-8.341,1.61C128.667,55.162,119.624,48,109.231,48 c-2.798,0-5.496,0.541-8,1.516V22.5c0-12.407-10.094-22.5-22.5-22.5s-22.5,10.093-22.5,22.5v66.259 c-3.938-5.029-8.673-9.412-14.169-11.671c-6.133-2.52-12.587-2.219-18.667,0.872c-11.182,5.686-15.792,19.389-10.277,30.548 l27.95,56.563c0.79,1.552,19.731,38.008,54.023,38.008h40c31.54,0,57.199-25.794,57.199-57.506l-0.031-41.491H192.231z M135.092,188.079h-40c-24.702,0-40.091-28.738-40.646-29.796l-27.88-56.42c-1.924-3.893-0.33-8.519,3.629-10.532 c2.182-1.11,4.081-1.223,6.158-0.372c8.281,3.395,16.41,19.756,19.586,29.265l2.41,7.259l12.883-4.559V22.5 c0-4.136,3.364-7.5,7.5-7.5s7.5,3.364,7.5,7.5V109h0.136h14.864h0.136V71c0-4.187,3.748-8,7.864-8c4.262,0,8,3.505,8,7.5v15v26h15 v-26c0-4.136,3.364-7.5,7.5-7.5s7.5,3.364,7.5,7.5V102v16.5h15V102c0-4.136,3.364-7.5,7.5-7.5s7.5,3.364,7.5,7.5v10.727h0.035 l0.025,32.852C177.291,169.014,158.36,188.079,135.092,188.079z"})}))})),CB=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"3 2.5 19 19",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 10C7.5 7.23858 9.73858 5 12.5 5C15.2614 5 17.5 7.23858 17.5 10V14C17.5 16.7614 15.2614 19 12.5 19C9.73858 19 7.5 16.7614 7.5 14V10Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,f.jsx)("path",{d:"M12.5 9V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none"})]}))})),jB="#FF8629",yB={rectangleHighlight:{position:"fixed",outline:"1px solid ".concat(jB),boxShadow:"0 0 8px 6px ".concat(jB),boxSizing:"border-box",pointerEvents:"none"},scrollIndicator:{position:"fixed",zIndex:Wd.BI},scrollDirectionArrow:{color:"#1D1D26",display:"flex",alignItems:"center",backgroundColor:jB,boxShadow:"0 0 12px 2px ".concat(jB),padding:"2px 5px 2px 2px",borderRadius:3,gap:1}};var ZB=function(e){var t=e.element,n=(0,gt.Z)();(0,ds.Z)(n);var r=c.useState(!0),a=(0,s.Z)(r,2),o=a[0],u=a[1],d=(0,be.UQ)().isMobile,p=function(e){if(!(e instanceof HTMLElement))return null;var t=e.parentElement;if(!t)return null;var n,r=hB(t,[]),a=(0,i.Z)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(gB(o))return o}}catch(s){a.e(s)}finally{a.f()}return document.scrollingElement||document.documentElement}(t),h=p?gy.fromDOMRect(p.getBoundingClientRect()):void 0,g=gy.fromDOMRect(t.getBoundingClientRect()),m=c.useCallback((function(){return h?g.left<h.left?"left":g.right>h.right?"right":g.top<h.top?"top":g.bottom>h.bottom?"bottom":null:null}),[h,g]),x=c.useState(m()),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=c.useCallback((function(e){var t=e[0].isIntersecting;u(t),!t&&h&&C(m()),n()}),[n,h,m]);Yo(t,j),c.useEffect((function(){if(p)return p.addEventListener("scroll",n),function(){p.removeEventListener("scroll",n)}}),[p,n]);var y=getComputedStyle(t),Z=c.useMemo((function(){switch(b){case"top":return xB;case"bottom":return vB;case"left":return vF.Z;case"right":return sP.Z;default:return null}}),[b]);return(0,f.jsxs)(f.Fragment,{children:[o&&(0,f.jsx)("div",{id:"in-app-tutorial-element-highlighter",style:(0,l.Z)((0,l.Z)((0,l.Z)({},yB.rectangleHighlight),g.toCSSPosition()),{},{borderRadius:y.getPropertyValue("border-radius"),zIndex:mB(t)})}),!o&&Z&&h&&(0,f.jsx)("div",{id:"in-app-tutorial-scroll-indicator",style:(0,l.Z)((0,l.Z)({},yB.scrollIndicator),{},{animation:"0.5s ease-in-out 0s infinite alternate none running ".concat("top"===b||"bottom"===b?"vertical-translate":"horizontal-translate"),top:"top"===b?h.top+15:"bottom"===b?h.bottom-50:g.centerY()-15,left:"left"===b?h.left+15:"right"===b?h.right-50:g.centerX()-35}),children:(0,f.jsx)("div",{style:yB.scrollDirectionArrow,children:Z&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Z,{fontSize:"large"}),d?(0,f.jsx)(bB,{}):(0,f.jsx)(CB,{}),(0,f.jsx)(N.Z,{noMargin:!0,color:"inherit",children:(0,f.jsx)(w.Trans,{id:"Scroll"})})]})})})]})},kB="#EBEBED",wB="#D9D9DE",TB="#C5C5C9",SB="#A6A6AB",PB="#7F7F85",IB="#1D1D26",EB={paper:{padding:"10px 12px",minWidth:180},title:{color:IB},description:{color:"#494952"},divider:{backgroundColor:wB,height:1},descriptionImage:{margin:"auto"},iconButtonContainer:{cursor:"pointer",borderRadius:5,display:"flex",alignItems:"center"},iconButtonContainerWithPadding:{paddingRight:5},headerText:{fontSize:12},headerContentPreview:{color:IB}},MB=(0,ur.Z)({popper:{'&[x-placement*="bottom"] #arrow-popper':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] #arrow-popper':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] #arrow-popper':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] #arrow-popper':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box","&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}}),LB=function(e){var t=e.tooltip,n=e.buttonLabel,r=e.goToNextStep,i=e.fillAutomatically,a=(0,be.UQ)().isMobile,o=(0,f.jsxs)(M.sg,{noMargin:!0,children:[t.title&&(0,f.jsx)(fS.Z,{style:EB.title,variant:"subtitle1",translate:"no",children:(0,f.jsx)(Re.r,{source:t.title,allowParagraphs:!0})}),t.title&&t.description&&(0,f.jsx)("span",{style:EB.divider}),t.description&&(0,f.jsx)(fS.Z,{style:EB.description,translate:"no",children:(0,f.jsx)(Re.r,{source:t.description,allowParagraphs:!0})})]}),s=t.image&&(0,f.jsx)("img",{src:t.image.dataUrl,alt:"Tutorial helper",style:(0,l.Z)((0,l.Z)({},EB.descriptionImage),{},{width:t.image.width||"100%",maxWidth:a?150:"100%",maxHeight:a?150:"100%"})}),c=n&&(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[t.image?(0,f.jsx)(M.LZ,{}):null,(0,f.jsx)(G.Z,{primary:!0,label:n,onClick:r})]}),u=a?(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[s,c]}):(0,f.jsxs)(M.sg,{noMargin:!0,alignItems:"center",children:[s,c]}),d=i&&(0,f.jsx)(ba.Z,{onClick:i,label:(0,f.jsx)(w.Trans,{id:"Fill automatically"}),primary:!0});return(0,f.jsxs)(M.sg,{noMargin:!0,children:[o,u,d]})},AB=function(e){var t=e.paletteType,n=e.progress,r=e.showFoldButton,i=e.onClickFoldButton,a=e.tooltipContent,o=e.endTutorial,s="light"===t?SB:TB,c="light"===t?{color:PB,backgroundColor:wB}:{color:SB,backgroundColor:kB};return(0,f.jsxs)(_.pJ,{alignItems:"center",noMargin:!0,justifyContent:a?void 0:"space-between",children:[(0,f.jsxs)(fS.Z,{style:(0,l.Z)((0,l.Z)({},EB.headerText),{},{color:s}),translate:"no",children:[n,"%"]}),(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",overflow:"hidden",children:[a?null:(0,f.jsx)(lt.Z,{disableRipple:!0,onClick:function(){return o({reason:"user-early-exit"})},children:(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)((0,l.Z)({},EB.iconButtonContainer),EB.iconButtonContainerWithPadding),c),children:[(0,f.jsx)(as.Z,{}),(0,f.jsx)(fS.Z,{style:EB.headerText,translate:"no",children:(0,f.jsx)(w.Trans,{id:"Quit tutorial"})})]})}),a&&(0,f.jsx)(fS.Z,{variant:"body2",style:(0,l.Z)((0,l.Z)({},EB.headerContentPreview),pr.t),translate:"no",children:a}),r?(0,f.jsx)(lt.Z,{disableRipple:!0,onClick:i,children:(0,f.jsx)("span",{style:(0,l.Z)((0,l.Z)({},EB.iconButtonContainer),c),children:a?(0,f.jsx)(yp.Z,{}):(0,f.jsx)(st.Z,{})})}):null]})]})},OB=function(e){var t=e.anchorElement,n=e.tooltip,r=e.buttonLabel,i=e.progress,a=e.endTutorial,o=e.goToNextStep,u=e.fillAutomatically,d=e.isBlockingLayerDisplayed,p=(0,be.UQ)().isMobile,h=c.useContext(j.Z).palette.type,g=c.useState(!1),m=(0,s.Z)(g,2),x=m[0],v=m[1],b=c.useState(!1),C=(0,s.Z)(b,2),y=C[0],Z=C[1],k=c.useCallback((function(e){v(e[0].isIntersecting)}),[]),w=((n.title||"")+(n.description||"")).replace(/\(.+\)/g,"");c.useEffect((function(){Z(!1)}),[w]),Yo(t,k);var T=MB(),S=p&&n.mobilePlacement?n.mobilePlacement:n.placement||"bottom",P="light"===h?"#EBEBED":"#FAFAFA";return(0,f.jsx)(vs.Z,{id:"in-app-tutorial-tooltip-displayer",open:x,className:T.popper,anchorEl:t,transition:!0,placement:S,popperOptions:{modifiers:{arrow:{enabled:!0,element:"#arrow-popper"},offset:{enabled:!0,offset:"0,10"},preventOverflow:{enabled:!0,boundariesElement:document.querySelector(".main-frame")}}},style:{zIndex:d?Wd.BI:mB(t),maxWidth:"min(90%, 300px)",width:p?"100%":void 0},children:function(e){var t=e.TransitionProps;return(0,f.jsx)(ms.Z,(0,l.Z)((0,l.Z)({},t),{},{timeout:{enter:350,exit:0},children:(0,f.jsxs)(xs.Z,{style:(0,l.Z)((0,l.Z)({},EB.paper),{},{backgroundColor:P}),elevation:4,children:[(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(AB,{paletteType:h,showFoldButton:!!n.standalone,progress:i,tooltipContent:y?n.title||n.description:void 0,onClickFoldButton:function(){return Z(!y)},endTutorial:a}),!y&&(0,f.jsx)(LB,{tooltip:n,buttonLabel:r,goToNextStep:o,fillAutomatically:u})]}),(0,f.jsx)("span",{id:"arrow-popper",className:T.arrow,style:{color:P}})]})}))}})},RB=n(60494),FB={avatarContainer:{position:"absolute",left:20,bottom:20,zIndex:Wd.BI,display:"flex",visibility:"hidden",boxShadow:"0px 2px 4px -1px rgb(0 0 0 / 20%), 0px 4px 5px 0px rgb(0 0 0 / 14%), 0px 1px 10px 0px rgb(0 0 0 / 12%)",borderRadius:30},link:{cursor:"pointer"},avatarImage:{cursor:"pointer"}};var DB=function(e){var t=e.step,n=t.elementToHighlightId,r=t.tooltip,i=t.nextStepTrigger,a=t.dialog,o=t.interactsWithCanvas,u=t.disableBlockingLayer,d=e.expectedEditor,p=e.goToFallbackStep,h=e.endTutorial,g=e.progress,m=e.goToNextStep,x=c.useState(null),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=c.useState(null),y=(0,s.Z)(j,2),Z=y[0],k=y[1],T=c.useState(!1),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=c.useState(null),M=(0,s.Z)(E,2),L=M[0],A=M[1],O=c.useState([]),R=(0,s.Z)(O,2),F=R[0],D=R[1],N=c.useCallback((function(e){e&&A(e)}),[]),_=c.useCallback((function(){if(n){var e=function(e){var t=document.querySelector(e);if(t instanceof HTMLTextAreaElement){var n=t.closest("div");if(n instanceof HTMLElement&&(0,Wd.h$)(n))return{elementToHighlight:n,elementWithId:t}}else if(t instanceof HTMLInputElement&&"searchBar"in t.dataset){var r=t.closest("div[data-search-bar-container]");if(r instanceof HTMLElement)return{elementToHighlight:r,elementWithId:t}}return{elementToHighlight:t,elementWithId:t}}(n),t=e.elementToHighlight,r=e.elementWithId;C(t),k(r)}}),[n]);(0,Ss.Y)(_,500);var B=c.useCallback((function(){if(b){I(!1);var e=function(e){for(var t=hB(e,[]),n=t.length-1;n>=0;n--){var r=t[n];if((0,Wd.yP)(r))return r}return null}(b);e&&(function(e){for(var t=e.nextElementSibling;t;){if((0,Wd.yP)(t,{isVisible:!0}))return!0;t=t.nextElementSibling}return!1}(e)||document.querySelector("[data-error-boundary]"))&&I(!0)}}),[b]);(0,Ss.Y)(B,1e3),c.useEffect((function(){C(null),I(!1)}),[n]),c.useEffect((function(){if(n&&!b&&!d){var e=setTimeout(p,1e3);return function(){return clearTimeout(e)}}}),[n,b,p,d]);var U=function(){if(!b&&!d||P)return null;if(d){var e=document.querySelector(YB({editor:d.editor,sceneName:d.scene}));return e?(0,f.jsx)(ZB,{element:e}):null}return b?(0,f.jsx)(ZB,{element:b}):null},V=c.useCallback((function(){if(i&&"valueEquals"in i){var e=i.valueEquals;if(null!==e&&void 0!==e&&"string"===typeof e&&(Z instanceof HTMLInputElement||Z instanceof HTMLTextAreaElement)){var t=Object.getOwnPropertyDescriptor(Z.constructor.prototype,"value");if(t){var n=t.set;if(n)return function(){n.call(Z,e),Z.dispatchEvent(new Event("blur",{bubbles:!0}))}}}}}),[i,Z]),H=r?r.standalone?L:b||null:null,z=document.querySelector("#scene-editor[data-active=true] #".concat(lZ)),W=document.querySelector("#scene-editor[data-active=true] #".concat(Rw.eh)),G=document.querySelector("#".concat(qw)),Y=c.useCallback((function(e){var t=[];!H||d||P||u||e[0].isIntersecting&&(b&&t.push(b),r&&r.standalone&&L&&t.push(L),o&&(z||W)&&(G?t=[]:(z&&t.push(z),W&&t.push(W))));D(t)}),[H,d,P,z,o,u,b,L,r,G,W]);Yo(H,Y);var q=function(e){if(r&&!d&&!P)return H?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(OB,{endTutorial:h,anchorElement:H,tooltip:r,progress:g,goToNextStep:m,buttonLabel:i&&i.clickOnTooltipButton?i.clickOnTooltipButton:void 0,fillAutomatically:V(),isBlockingLayerDisplayed:!!F.length}),(0,f.jsx)(RB.Z,{elements:F})]}):null;var t=function(e,t){if(!t)return null;var n="Scene"===t.editor?e._({id:"the scene editor"}):"Home"===t.editor?e._({id:"the home page"}):e._({id:"the events sheet"}),r=t.scene?' for scene "'.concat(t.scene,'"'):"";return{title:e._({id:"You're leaving the game tutorial"}),placement:"top",description:e._({id:"Go back to {translatedExpectedEditor}{sceneMention} to keep creating your game.",values:{translatedExpectedEditor:n,sceneMention:r}}),standalone:!0}}(e,d);return t&&L?(0,f.jsx)(OB,{endTutorial:h,anchorElement:L,tooltip:t,progress:g,goToNextStep:m,isBlockingLayerDisplayed:!1}):null};return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n,n=d||r&&r.standalone;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:(0,l.Z)((0,l.Z)({},FB.avatarContainer),{},{visibility:n?"visible":"hidden"}),ref:N,id:"in-app-tutorial-avatar",children:(0,f.jsx)("img",{alt:"GDevelop mascot red hero",src:"res/hero60.png",width:60,height:60,style:FB.avatarImage})}),U(),q(t),a?(0,f.jsx)(pB,{dialogContent:a,goToNextStep:m,endTutorial:h}):null]})}})},NB="instancesCount:",_B="objectInObjectsList:",BB="sceneInProjectManager:",UB="objectInObjectOrResourceSelector:",VB="editorTab:",HB=function(e){return e.map((function(t,n){return 0===n?0:e[n-1]+1}))},zB=function(e){var t,n=e.text,i=e.data,a=e.i18n,o=e.project;if(n)return"string"!==typeof(t=n.messageByLocale?(0,vo.a)(a,n.messageByLocale):a._(n.messageDescriptor,i))?"":function(e,t,n){var i=e.matchAll(/\$\(([\w:]+)\)/g),a=e;return(0,r.Z)(i).forEach((function(e){var r,i=e[0],o=e[1];if(o.startsWith(NB)){var s=o.split(":")[1],l=t[s];if(l&&n&&n.getLayoutsCount()>0){var c=n.getLayoutAt(0);r=(0,iy.pG)(c.getInitialInstances(),l).toString()}}!r&&Object.keys(t).includes(o)&&(r=t[o]),r&&(a=a.replace(i,r))})),a}(t,i,o)},WB=function(e,t){if(!e)return null;var n=void 0;if(e.scene){var r=t[e.scene];r||console.warn("The user should now be focused on editor ".concat(e.editor," for scene with key ").concat(e.scene," but the scene name couldn't be found in project data:"),t),n=r}return(0,l.Z)((0,l.Z)({},e),{},{scene:n})},GB=function(e){var t=e.project,n=e.sceneName;if(0!==t.getLayoutsCount())return(t.hasLayoutNamed(n)?t.getLayout(n):t.getLayoutAt(0)).getObjects().getObjectsCount()},YB=function(e){var t=e.editor,n=e.sceneName;if("Home"===t)return'button[id="tab-start-page-button"]';var r=n?'[data-scene="'.concat(n,'"]'):"";return'button[id^="tab"][data-type="'.concat("Scene"===t?"layout":"layout-events",'"]').concat(r)},qB=function(e){var t=e.elementId,n=e.data,r=e.isMobile;if(t.startsWith(VB)){var i=t.split(":"),a=i[1],o=i[2];if(!o)throw new Error('There might be missing a ":" in the element id '.concat(t));return YB({editor:o,sceneName:n[a]})}if(t.startsWith(_B)){var s=t.split(":")[1];return'#scene-editor[data-active] #objects-list div[data-object-name="'.concat(n[s],'"]')}if(t.startsWith(BB)){var l=t.split(":")[1];return'div[role="presentation"][data-open="true"] #project-manager [id^="scene-item"][data-scene="'.concat(n[l],'"]')}if(t.startsWith(UB)){var c=t.split(":")[1];return'#instruction-or-object-selector div[data-object-name="'.concat(n[c],'"]')}return r&&Vj.includes(t)?"#scene-editor[data-active=true] ".concat(t):t},JB=function(e){var t=e.trigger,n=e.data,r=e.isMobile;return!!t&&(!(!t.presenceOfElement||!document.querySelector(qB({elementId:t.presenceOfElement,data:n,isMobile:r})))||(!(!t.absenceOfElement||document.querySelector(qB({elementId:t.absenceOfElement,data:n,isMobile:r})))||!(!t.editorIsActive||!document.querySelector(function(e){var t=e.trigger,n=e.data,r=t.split(":"),i=(0,s.Z)(r,2),a=i[0],o=i[1];if(!o)throw new Error('There might be missing a ":" in the trigger '.concat(t));if("Home"===o)return'button[id="tab-start-page-button"][data-active="true"]';var l=a?'[data-scene="'.concat(n[a],'"]'):"";return'button[id^="tab"][data-active="true"][data-type="'.concat("Scene"===o?"layout":"layout-events",'"]').concat(l)}({trigger:t.editorIsActive,data:n})))))},XB=function(e){return(0,Wd.NL)(e)?(0,Wd.Rz)(e):"TEXTAREA"===e.tagName?e.textContent:e.value},KB=c.forwardRef((function(e,t){var n=e.tutorial,r=e.endTutorial,u=e.project,d=e.currentEditor,p=e.currentSceneName,h=e.startStepIndex,g=e.startProjectData,m=e.i18n,x=e.quitInAppTutorialDialogOpen,v=(0,gt.Z)(),b=(0,be.UQ)().isMobile,C=c.useState(!1),j=(0,s.Z)(C,2),y=j[0],Z=j[1],k=c.useState(h),w=(0,s.Z)(k,2),T=w[0],S=w[1],P=c.useState(null),I=(0,s.Z)(P,2),E=I[0],M=I[1],L=c.useState(g),A=(0,s.Z)(L,2),O=A[0],R=A[1],F=c.useRef({}),N=c.useState(!1),_=(0,s.Z)(N,2),B=_[0],U=_[1],V=c.useRef(0),H=c.useState(null),z=(0,s.Z)(H,2),W=z[0],G=z[1],Y=c.useState(null),q=(0,s.Z)(Y,2),J=q[0],X=q[1],K=c.useRef(null),Q=c.useState(null),$=(0,s.Z)(Q,2),ee=$[0],te=$[1],ne=c.useRef(null),re=c.useState(null),ie=(0,s.Z)(re,2),ae=ie[0],oe=ie[1],se=c.useState(!1),le=(0,s.Z)(se,2),ce=le[0],ue=le[1],de=c.useRef(null),pe=c.useState(!1),fe=(0,s.Z)(pe,2),he=fe[0],ge=fe[1],me=c.useContext(D.ZP),xe=c.useContext($n.ZP),ve=n.flow,Ce=n.endDialog,je=n.editorSwitches,ye=n.id,Ze=ve.length,ke=ve[T],we=c.useCallback((function(e){S(e),(0,ai.xN)({tutorialId:ye,step:e,isCompleted:e>=Ze-1,isUIRestricted:!!n.shouldRestrictUI})}),[ye,Ze,n.shouldRestrictUI]);c.useEffect((function(){we(h);for(var e=h;e>=0;e--)if(!n.flow[e].isOnClosableDialog){V.current=e;break}for(var t={editor:"Home"},r=h;r>=0;r--)if(n.flow[r].id&&n.editorSwitches.hasOwnProperty(n.flow[r].id)){t=n.editorSwitches[n.flow[r].id];break}G(t)}),[n,we,h]);var Te=c.useCallback((function(e){var t=e.stepIndex,n=e.gatherData;if(t>=Ze)U(!0);else{for(var r=t;r<Ze-1&&ve[r]&&(ve[r].deprecated||ve[r].skippable&&JB({trigger:ve[r].nextStepTrigger,data:O,isMobile:b}));)r+=1;if(n){var i=function(e){var t=e.flow,n=e.startIndex,r=e.endIndex,i=e.data,a=e.project;if(!a)return i;for(var o=(0,l.Z)({},i),c=function(e){var n=t[e].mapProjectData;n&&Object.entries(n).forEach((function(t){var n=(0,s.Z)(t,2),r=n[0],l=n[1];if("projectLastSceneName"===l){if(!a)return;if(0===a.getLayoutsCount())throw new Error("No layout was found in project after step ".concat(e," of flow"));o[r]=a.getLayoutAt(a.getLayoutsCount()-1).getName()}else if(l.startsWith("sceneLastObjectName")){if(!a||0===a.getLayoutsCount())return;var c=l.split(":")[1],u=c?i[c]:void 0,d=u&&a.hasLayoutNamed(u)?a.getLayout(u):a.getLayoutAt(0);if(0===d.getObjects().getObjectsCount())throw new Error("No object was found in layout after step ".concat(e," of flow"));o[r]=d.getObjects().getObjectAt(d.getObjects().getObjectsCount()-1).getName()}}))},u=n;u<=r;u++)c(u);return o}({flow:ve,startIndex:T,endIndex:r-1,data:O,project:u});R(i)}we(r)}}),[ve,we,Ze,O,u,T,b]);c.useEffect((function(){for(var e=[],t=0;t<n.flow.length;t++)n.flow[t].isCheckpoint&&e.push(t);e.push(n.flow.length-1),M(e)}),[n.flow]);var Se=c.useCallback((function(){if(!E)return[0];var e=HB(E);return E.map((function(t,n){if(T>=t)return 100;var r=e[n];return T<r?0:Math.floor((T-r)/(t-r)*100)}))}),[T,E]),Pe=c.useCallback((function(){if(!u||0===u.getLayoutsCount()||!p)return!1;var e=GB({project:u,sceneName:p}),t=F.current[p];return"number"===typeof t&&"number"===typeof e&&e>t}),[u,p]),Ie=function(){return{step:T,progress:Se(),projectData:O}},Ee=c.useCallback((function(){for(var e=T;ve[e].skippable;)e+=1;for(var t=null,n=e;n>=T;n--){if(JB({trigger:ve[n].nextStepTrigger,data:O,isMobile:b})){t=n+1;break}}if(null===t){var r=ve[T].shortcuts;if(!r)return;var a,o=(0,i.Z)(r);try{var s,l=function(){var e=a.value;if(JB({trigger:e.trigger,data:O,isMobile:b})||e.trigger&&e.trigger.objectAddedInLayout&&Pe())return(t=ve.findIndex((function(t){return t.id===e.stepId})))<0?(console.warn("Step with id ".concat(e.stepId," could not be found. Shortcut not taken.")),{v:void 0}):0};for(o.s();!(a=o.n()).done&&0!==(s=l());)if(s)return s.v}catch(c){o.e(c)}finally{o.f()}if(null===t)return}Te({stepIndex:t,gatherData:!0})}),[T,Te,O,ve,Pe,b]),Me=(0,sr.N)(Ee,200),Le=c.useCallback((function(e){Te({stepIndex:T+1,gatherData:e})}),[T,Te]),Ae=function(e,t){var n=null;Object.entries(O).forEach((function(t){var r=(0,s.Z)(t,2),i=r[0];r[1]!==e||(n=i)})),n&&(O[n]=t)},Oe=function(){var e=ke.nextStepTrigger;if(!e||!e.previewLaunched)return null;var t=Ue&&e.inGameTouchMessage||e.inGameMessage,n=t&&zB({text:t,data:O,i18n:m,project:u})||null;return n?{message:n,position:e.inGameMessagePosition||"bottom-left"}:null};c.useImperativeHandle(t,(function(){return{onPreviewLaunch:Re,getProgress:Ie,changeData:Ae,getPreviewMessage:Oe}}));var Re=c.useCallback((function(){if(ke){var e=ke.nextStepTrigger;e&&e.previewLaunched&&Le()}}),[Le,ke]);c.useEffect((function(){var e=document.querySelector("body");if(e){var t=new MutationObserver(Me);return t.observe(e,{childList:!0,attributes:!1,subtree:!0,characterData:!0}),de.current=t,function(){de.current&&(de.current.disconnect(),de.current=null)}}}),[Me]),c.useEffect((function(){if(ke){var e=ke.id,t=ke.isOnClosableDialog;e&&je.hasOwnProperty(e)&&G(je[e]),t||(V.current=T),X(null),te(null),oe(null),ue(!1),ge(!1),T>=Ze&&U(!0)}}),[ke,T,Ze,je]),c.useEffect((function(){if(ke&&p&&u){var e=GB({project:u,sceneName:p});"number"===typeof e&&(F.current[p]=e)}}),[ke,p,u]),c.useEffect((function(){if(ke){var e=ke.nextStepTrigger,t=ke.elementToHighlightId;if(e&&void 0!==e.valueEquals&&null!==e.valueEquals){if(!t)return;ne.current=e.valueEquals,te(t)}else if(e&&e.valueHasChanged){if(!t)return;var n=document.querySelector(t);n&&(K.current=XB(n)),X(t)}else if(e&&e.instanceAddedOnScene){var r=e.instanceAddedOnScene.split(":"),i=(0,s.Z)(r,2),a=i[0],o=i[1],l=O[a];if(!l)return;var c=o?O[o]:void 0;oe({objectName:l,sceneName:c,count:e.instancesCount})}else e&&e.objectAddedInLayout&&ue(!0)}}),[ke,O]),c.useEffect((function(){if(ke){var e=ke.tooltip;e&&[e.description,e.title].some((function(e){return!!(t=e)&&(t.messageByLocale?Object.values(t.messageByLocale).some((function(e){return e.includes("$(".concat(NB))})):"string"===typeof t.messageDescriptor&&t.messageDescriptor.includes("$(".concat(NB))||"object"===typeof t.messageDescriptor&&Object.values(t.messageDescriptor).some((function(e){return"string"===typeof e&&e.includes("$(".concat(NB))})));var t}))&&ge(!0)}}),[ke]);var Fe=c.useCallback((function(){if(J){var e=document.querySelector(J),t=K.current;e&&XB(e)!==t&&Le()}}),[Le,J]),De=c.useCallback((function(){if(ee){var e=document.querySelector(ee);if(e){var t=ne.current;if(null!==t){var n=XB(e);("boolean"!==typeof t||t!==n)&&("string"!==typeof t||"string"!==typeof n||n.replace(/\s/g,"")!==t.replace(/\s/g,""))||Le()}}}}),[Le,ee]),Ne=c.useCallback((function(){if(ae&&u&&0!==u.getLayoutsCount()){var e=ae.objectName,t=ae.sceneName,n=ae.count,r=t&&u.hasLayoutNamed(t)?u.getLayout(t):u.getLayoutAt(0);if(n)(0,iy.pG)(r.getInitialInstances(),e)>=n&&Le();else r.getInitialInstances().hasInstancesOfObject(e)&&Le()}}),[u,Le,ae]),_e=c.useCallback((function(){ce&&Pe()&&Le(!0)}),[Pe,Le,ce]);(0,Ss.Y)(v,he?500:null),(0,Ss.Y)(Fe,J?1e3:null),(0,Ss.Y)(De,ee?1e3:null),(0,Ss.Y)(Ne,ae?500:null),(0,Ss.Y)(_e,ce?1e3:null),(0,Ss.Y)(Ee,ke&&ke.isTriggerFlickering?500:null);var Be=n.isMiniTutorial,Ue="touch"===(0,hi.BF)(),Ve=(0,sr.N)((function(){Z(!!W&&(W.editor!==d||!!W.scene&&O[W.scene]!==p))}),y?0:1e3);return c.useEffect((function(){Ve()}),[Ve,d,p]),function(e){var t=e.authenticatedUser,n=e.displayEndDialog,r=e.tutorial,i=t.badges,s=t.onBadgesChanged,l=t.profile,u=t.getAuthorizationHeader;c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,fE.x)({times:3},(function(){return(0,xi.gK)({badges:i,onBadgesChanged:s,profile:l,getAuthorizationHeader:u},(0,xi.vO)(r.id))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Couldn't create completion badge for tutorial ".concat(r.id,"."),e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))()}),[n,i,s,l,u,r.id])}({authenticatedUser:xe,tutorial:n,displayEndDialog:B}),(0,f.jsxs)(f.Fragment,{children:[function(){if(B||x)return null;if(!ke)return null;var e,t,i=ke.tooltip;if(i){var a=zB({text:i.title,data:O,i18n:m,project:u}),o=zB({text:Ue&&i.touchDescription?i.touchDescription:i.description,data:O,i18n:m,project:u});e=(0,l.Z)((0,l.Z)({},i),{},{title:a,description:o})}var s=ke.nextStepTrigger;if(s&&s.clickOnTooltipButton){var c=zB({text:s.clickOnTooltipButton,data:O,i18n:m,project:u});t=c?{clickOnTooltipButton:c}:void 0}else t=s;var d=(0,l.Z)((0,l.Z)({},ke),{},{tooltip:e,nextStepTrigger:t});n.shouldRestrictUI||(d.disableBlockingLayer=!0),ke.elementToHighlightId&&(d.elementToHighlightId=qB({elementId:ke.elementToHighlightId,data:O,isMobile:b}));var p=0;if(E){var h=HB(E);p=E.map((function(e,t){return T<=e&&T>=h[t]})).indexOf(!0)}return(0,f.jsx)(DB,{step:d,expectedEditor:y?WB(W,O):null,goToFallbackStep:function(){we(V.current)},endTutorial:function(e){var t=e.reason;(0,ai.zo)({tutorialId:ye,reason:t,isUIRestricted:!!n.shouldRestrictUI}),r({shouldCloseProject:!Be,shouldWarnAboutUnsavedChanges:!Be})},progress:Se()[p],goToNextStep:Le})}(),B&&(0,f.jsx)(pB,{isLastStep:!0,dialogContent:Ce,endTutorial:function(e){var t=e.reason;U(!1),Be&&me.saveTutorialProgress((0,l.Z)({tutorialId:n.id,userId:xe.profile?xe.profile.id:void 0},Ie())),(0,ai.zo)({tutorialId:ye,reason:t,isUIRestricted:!!n.shouldRestrictUI}),r({shouldCloseProject:!1,shouldWarnAboutUnsavedChanges:!Be})}})]})})),QB=KB,$B=function(e){var t=e.editorTabs,n=c.useState(null),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=c.useState(null),l=(0,s.Z)(o,2),u=l[0],d=l[1];return c.useEffect((function(){var e=YT(t,"center");if(e){var n=e.key.startsWith("start page")?"Home":e.key.startsWith("layout event")?"EventsSheet":e.key.startsWith("external events")?"ExternalEvents":e.key.startsWith("external layout")?"ExternalLayout":e.key.startsWith("events functions extension")?"Extension":e.key.startsWith("resources")?"Resources":"Scene";a(n),e.key.startsWith("layout")&&e.projectItemName&&d(e.projectItemName)}else a(null)}),[t]),{InAppTutorialOrchestrator:QB,orchestratorProps:{currentEditor:i,currentSceneName:u}}},eU=n(17777),tU=(n(51497),{position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"}),nU=function(e){var t=e.clientOffset,n=e.previewPosition,r=e.screenType;if(!t)return{display:"none"};var i=t.x,a=t.y,o="touch"===r?80:48,s="center"===n?a-o/2:a-16,l="translate(".concat("center"===n?i-o/2:i+16,"px, ").concat(s,"px)");return{transform:l,WebkitTransform:l}},rU=(0,eU.DragLayer)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),clientOffset:e.getClientOffset(),isDragging:e.isDragging()}}))((function(e){var t=e.item,n=(e.itemType,e.isDragging),r=(e.initialOffset,e.currentOffset,e.clientOffset),i=(0,hi.BF)(),a=c.useMemo((function(){if(!t||!r)return null;if(function(e){var t=e.x,n=e.y,r=(0,Rw.d8)();if(r&&t>=r.left&&t<=r.right&&n>=r.top&&n<=r.bottom)return!0;var i=document.querySelector("#".concat(qw));if(i){var a=i.getBoundingClientRect();return!(t>=a.left&&t<=a.right&&n>=a.top&&n<=a.bottom)}var o=document.querySelector("#scene-editor[data-active=true] #".concat(lZ));if(o){var s=o.getBoundingClientRect();if(t>=s.left&&t<=s.right&&n>=s.top&&n<=s.bottom)return!0}return!1}(r))return null;var e="touch"===i?80:48;return t.thumbnail?(0,f.jsx)(_p.W,{alt:t.name,src:t.thumbnail,style:{maxWidth:e,maxHeight:e}}):(0,f.jsx)(N.Z,{children:t.name})}),[t,r,i]);return n?(0,f.jsx)("div",{style:tU,children:(0,f.jsx)("div",{style:nU({clientOffset:r,previewPosition:t&&!t.thumbnail?"aboveRight":"center",screenType:i}),children:a})}):null})),iU=rU,aU=function(e){var t=e.cloudProjectId,n=e.onClose,r=e.onOpenPreviousVersion,i=c.useContext($n.ZP),l=i.profile,u=c.useState(null),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useState(!1),m=(0,s.Z)(g,2),x=m[0],v=m[1],b=c.useState(!1),C=(0,s.Z)(b,2),j=C[0],y=C[1],Z=c.useState(!0),k=(0,s.Z)(Z,2),S=k[0],P=k[1];c.useEffect((function(){t&&l&&l.id&&(0,ai.eN)({cloudProjectId:t,userId:l.id})}),[t,l]),c.useEffect((function(){var e,n=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,uj.MH)(i,t);case 2:if(n=e.sent){e.next=5;break}throw new Error("We couldn't get the project last versions.");case 5:r=1;case 6:if(!(r<n.length)){e.next=17;break}return o=n[r],e.next=10,(0,uj.Rn)(i,t,o.id);case 10:if(!e.sent){e.next=14;break}return h(o),e.abrupt("return");case 14:r++,e.next=6;break;case 17:y(!0);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(t){return new Promise((function(n){e=setTimeout((function(){n()}),t)}))},s=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n(),r(15e3)]);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),v(!0);case 8:return e.prev=8,P(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,5,8,11]])})));return function(){return e.apply(this,arguments)}}();return s(),function(){return clearTimeout(e)}}),[t,i]);var I=x||j?[(0,f.jsx)(E.vF,{label:(0,f.jsx)(w.Trans,{id:"Close"}),onClick:n},"close")]:S?[]:p?[(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Cancel"}),onClick:n},"cancel"),(0,f.jsx)(E.vF,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Accept"}),onClick:function(){return r(p.id)}},"restore")]:[],L=x||j?n:S?void 0:p?function(){return r(p.id)}:void 0,A=i.cloudProjects?i.cloudProjects.find((function(e){return e.id===t})):null,O=A?A.name:null;return(0,f.jsx)(w.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(E.ZP,{open:!0,flexColumnBody:!0,maxWidth:"sm",onRequestClose:n,onApply:L,actions:I,title:p&&!S?(0,f.jsx)(w.Trans,{id:"A functioning save has been found!"}):(0,f.jsx)(w.Trans,{id:"This file is corrupt"}),children:x?(0,f.jsx)(je.Z,{kind:"error",children:(0,f.jsx)(w.Trans,{id:"An error occurred while trying to recover your project last versions. Please try again later."})}):S?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.x1,{children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,children:O?(0,f.jsx)(w.Trans,{id:'The latest save of "{cloudProjectName}" is corrupt and cannot be opened.',values:{cloudProjectName:O}}):(0,f.jsx)(w.Trans,{id:"The latest save of this project is corrupt and cannot be opened."})}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Please wait while we scan your project to find a solution."})})]})}),(0,f.jsx)(M.x1,{justifyContent:"center",children:(0,f.jsx)(GI.Z,{})})]}):j?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(M.x1,{children:(0,f.jsxs)(M.sg,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"We couldn't find a version to go back to."})}),(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"Please get in touch with us to find a solution."})})]})})}):p?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(N.Z,{noMargin:!0,children:(0,f.jsx)(w.Trans,{id:"We have found a non-corrupt save from {0} available for modification.",values:{0:t.date(p.createdAt,{dateStyle:"long",timeStyle:"short"})}})})})}),(0,f.jsx)(M.x1,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Would you like to open the non-corrupt version instead?"})})})]}):null})}})},oU=function(e){var t=e.onClose,n=e.isLoading,r=e.onSaveAsDuplicate,i=e.onSaveAsMainVersion,a=[(0,f.jsx)(T.Z,{disabled:n,label:(0,f.jsx)(w.Trans,{id:"Save as..."}),onClick:r},"save-copy"),(0,f.jsx)($r.Z,{isLoading:n,children:(0,f.jsx)(E.vF,{primary:!0,disabled:n,label:(0,f.jsx)(w.Trans,{id:"Save as main version"}),onClick:i})},"save-main")];return(0,f.jsx)(E.ZP,{open:!0,flexColumnBody:!0,cannotBeDismissed:n,maxWidth:"sm",onRequestClose:t,onApply:i,actions:a,title:(0,f.jsx)(w.Trans,{id:"What would you like to do with this uncorrupted version of your project?"}),children:(0,f.jsx)(M.x1,{})})},sU=n(71799),lU=function(e){var t=e.beforeCreatingProject,n=e.afterCreatingProject,r=e.onSuccessOrError,i=e.onError,s=e.getStorageProviderOperations,l=e.getStorageProvider,u=e.loadFromProject,d=e.openFromFileMetadata,p=e.onProjectSaved,f=e.ensureResourcesAreMoved,h=e.onGameRegistered,g=c.useContext($n.ZP),m=g.profile,x=c.useContext(Z.Z),v=c.useContext(D.ZP),b=(0,Ye.Z)().showAlert,C=c.useContext(gi.Z).getInAppTutorialShortHeader,j=c.useContext(nm.n).tutorials,y=function(e,t){e.resetProjectUuid(),e.setVersion("1.0.0"),e.getAuthorIds().clear(),e.setAuthor(""),t.width&&t.height&&e.setGameResolutionSize(t.width,t.height),t.orientation&&e.setOrientation(t.orientation),t.optimizeForPixelArt&&(e.setPixelsRounding(!0),e.setScaleMode("nearest")),t.projectName&&e.setName(t.projectName||"New game")},k=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,c,m){var C,j,Z,k,w,T,S,P,I,E,M,L,A,O,R,F,D,N;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return",{createdProject:null});case 3:if(j=t.storageProvider,Z=j?s(t.storageProvider):null,!t.project){e.next=11;break}return e.next=8,u(t.project,null);case 8:C=e.sent,e.next=15;break;case 11:if(!t.fileMetadata||!j){e.next=15;break}return e.next=14,d(t.fileMetadata);case 14:C=e.sent;case 15:if(C){e.next=17;break}throw new Error("Neither a project nor a file metadata to load was provided for the new project");case 17:if(w=(k=C).currentProject,T=k.editorTabs,w){e.next=20;break}throw new Error("The new project could not be opened.");case 20:if(S=w.getProjectUuid(),y(w,c),t.templateSlug&&w.setTemplateSlug(t.templateSlug),!g.profile||c.openQuickCustomizationDialog){e.next=34;break}return e.prev=24,e.next=27,(0,Cr.r$)(g.getAuthorizationHeader,g.profile.id,(0,gD.dN)({projectId:w.getProjectUuid(),projectName:w.getName(),projectAuthor:w.getAuthor(),savedStatus:"LocalFile"===c.storageProvider.internalName||"Cloud"===c.storageProvider.internalName?"saved":"draft"}));case 27:return e.next=29,h();case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(24),console.error("Unable to register the game to the user profile, the game will not be listed in the user profile.",e.t0);case 34:if(P=s(c.storageProvider),I=l(),E=I.internalName,!(M=P.onSaveProjectAs)){e.next=53;break}return e.next=41,M(w,c.saveAsLocation,{onStartSaving:function(){console.log("Start saving as the new project...")},onMoveResources:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.newFileMetadata,console.log("Start moving resources to the new project..."),j&&Z&&t.fileMetadata){e.next=5;break}return console.log("No storage provider set or no previous FileMetadata (probably creating a blank project) - skipping resources copy."),e.abrupt("return");case 5:return e.next=7,f({project:w,newFileMetadata:r,newStorageProvider:c.storageProvider,newStorageProviderOperations:P,oldFileMetadata:t.fileMetadata,oldStorageProvider:j,oldStorageProviderOperations:Z,authenticatedUser:g});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 41:if(L=e.sent,A=L.wasSaved,O=L.fileMetadata,A){e.next=46;break}return e.abrupt("return",{createdProject:null});case 46:if(O){e.next=48;break}return e.abrupt("return",{createdProject:null});case 48:p(O),x.sealUnsavedChanges(),"LocalFile"===c.storageProvider.internalName&&v.setHasProjectOpened(!0),R={fileMetadata:O,storageProviderName:E},v.insertRecentProjectFile(R);case 53:return e.next=55,n({project:w,editorTabs:T,oldProjectId:S,options:{openAllScenes:!!m&&m.openAllScenes,openQuickCustomizationDialog:!!c.openQuickCustomizationDialog,forceOpenAskAiEditor:!!c.forceOpenAskAiEditor}});case 55:return e.abrupt("return",{createdProject:w});case 58:return e.prev=58,e.t1=e.catch(0),F=s(),D=F.getWriteErrorMessage,N=D?D(e.t1):{id:"An error occurred when opening or saving the project. Try again later or choose another location to save the project to."},b({title:{id:"Unable to create the project"},message:N}),i(),e.abrupt("return",{createdProject:null});case 65:return e.prev=65,r(),e.finish(65);case 68:case"end":return e.stop()}}),e,null,[[0,58,65,68],[24,31]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[g,l,s,u,i,p,d,v,b,n,f,r,x,h]),w=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),r=Gi({creationSource:n.creationSource}),e.next=4,k(r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,k]),T=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,Xi(n);case 3:return r=e.sent,e.next=6,k(r,n.newProjectSetup);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,k]),S=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),m){e.next=3;break}throw new Error("Unable to create the project with the game template because no profile was found.");case 3:return e.next=5,(0,DL.W_)(g.getAuthorizationHeader,{userId:m.id});case 5:return i=e.sent,e.next=8,(0,lP.N)(n,i);case 8:return o=e.sent,e.next=11,Ji(o,n.id);case 11:return s=e.sent,e.next=14,k(s,r);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,k,m,g]),P=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),i=C(n)){e.next=4;break}throw new Error('No in app tutorial found for id "'.concat(n,'"'));case 4:if(o=i.initialTemplateUrl){e.next=7;break}throw new Error('No initial template URL for the in-app tutorial "'.concat(n,'"'));case 7:return e.next=9,Yi(o,i.id);case 9:return s=e.sent,e.next=12,k(s,r,{openAllScenes:!0});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,k,C]),I=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),j){e.next=3;break}throw new Error("Tutorials could not be loaded");case 3:if(i=j.find((function(e){return e.id===n}))){e.next=6;break}throw new Error('No tutorial found for id "'.concat(n,'"'));case 6:if(o=i.templateUrl){e.next=9;break}throw new Error('No template URL for the tutorial "'.concat(n,'"'));case 9:return e.next=11,Yi(o,n);case 11:return s=e.sent,e.next=14,k(s,r,{openAllScenes:!0});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,k,j]),E=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,i,o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.courseChapter,i=n.templateId,o=n.newProjectSetup,!r.isLocked){e.next=3;break}return e.abrupt("return",{createdProject:null});case 3:if(t(),r.templateUrl?s=r.templateUrl:r.templates&&(l=r.templates.find((function(e){return e.id===i})))&&(s=l.url),s){e.next=7;break}throw new Error('No template URL for the course chapter "'.concat(r.id,'" and template id "').concat(i||"undefined",'"'));case 7:return e.next=9,qi(s,r.id);case 9:return c=e.sent,e.next=12,k(c,o,{openAllScenes:!0});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,k]);return{createEmptyProject:w,createProjectFromExample:T,createProjectFromPrivateGameTemplate:S,createProjectFromInAppTutorial:P,createProjectFromTutorial:I,createProjectFromCourseChapter:E}},cU=function(e){var t=e.currentProjectId,n=e.editorTabs,r=e.getEditorOpeningOptions,a=e.setEditorTabs,o=c.useContext(D.ZP),s=o.setEditorStateForProject,l=o.getEditorStateForProject,u=c.useCallback((function(){if(t&&0!==n.panes.center.currentTab){var e={currentTab:n.panes.center.currentTab,editors:n.panes.center.editors.filter((function(e){return"start page"!==e.key})).map((function(e){return{projectItemName:e.projectItemName,editorKind:e.kind}}))};s(t,0===e.editors.length?void 0:{editorTabs:e})}}),[t,n,s]),d=(0,sr.N)(u,t?1e3:0);c.useEffect((function(){d()}),[d,t,n,s]);var p=c.useCallback((function(e){var t=e.getProjectUuid();return!!l(t)}),[l]),f=c.useCallback((function(e){var t=e.getProjectUuid(),o=l(t);if(!o)return 0;var s=!0,c=o.editorTabs.editors.map((function(t){return function(e){var t=e.project,n=e.kind,r=e.name;if(["debugger","start page","resources"].includes(n))return!0;switch(n){case"events functions extension":return t.hasEventsFunctionsExtensionNamed(r);case"layout":case"layout events":return t.hasLayoutNamed(r);case"external layout":return t.hasExternalLayoutNamed(r);case"external events":return t.hasExternalEventsNamed(r);case"custom object":var i=r.split("::"),a=i[0]+"::"+i[1],o=i[2];return t.hasEventsBasedObject(a)&&(!o||t.getEventsBasedObject(a).getVariants().getVariant(o));default:return!1}}({project:e,kind:t.editorKind,name:t.projectItemName||""})?r({kind:t.editorKind,name:t.projectItemName||"",dontFocusTab:!0,project:e}):(s=!1,null)})).filter(Boolean),u=HT(n);oS(u,"start page")||(u=BT(u,r({kind:"start page",name:""})));var d,p=(0,i.Z)(c);try{for(p.s();!(d=p.n()).done;){var f=d.value;u=BT(u,f)}}catch(h){p.e(h)}finally{p.f()}return u=UT(u,"center",s?o.editorTabs.currentTab:u.panes.center.editors.length>=1?1:0),a(u),c.length}),[r,a,n,l]);return{hasAPreviousSaveForEditorTabsState:p,openEditorTabsFromPersistedState:f}},uU=(new Date).getFullYear(),dU={avatar:{width:20,height:20},greyed:{opacity:.7},versionsContainer:{display:"flex",flexDirection:"column",paddingLeft:30,gap:2},dateContainer:{flexShrink:0},iconContainer:{fontSize:20,display:"flex",alignItems:"center"},restoredVersionContainer:{opacity:.7},sharedRowStyle:{display:"flex",alignItems:"center",padding:8,borderRadius:4},labelTextfield:{width:"100%"},labelSubRow:{display:"flex",alignItems:"center",padding:"2px 12px 2px 2px",borderRadius:4},versionSubRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"2px 12px 2px 32px",borderRadius:4},statusIndicator:{height:6,width:6,borderRadius:3},rowContainer:{flex:1,display:"flex",flexDirection:"column"}},pU=function(e){var t=e.status,n=c.useContext(j.Z);if("opened"===t)return null;var r=_s(n,t);return(0,f.jsx)("span",{style:(0,l.Z)((0,l.Z)({},dU.statusIndicator),{},{backgroundColor:r})})},fU=function(e){var t=e.status,n=c.useContext(j.Z),r="unsavedChanges"===t?(0,f.jsx)(w.Trans,{id:"Unsaved changes"}):"saving"===t?(0,f.jsx)(w.Trans,{id:"Saving..."}):"latest"===t?(0,f.jsx)(w.Trans,{id:"Latest save"}):(0,f.jsx)(w.Trans,{id:"Changes saved"}),i=_s(n,t);return(0,f.jsx)(Q.Z,{style:{backgroundColor:i,color:"#111111",padding:"3px 0",height:"auto"},label:r})},hU=(0,ur.Z)((function(e){return(0,No.Z)({root:(0,l.Z)((0,l.Z)({},dU.sharedRowStyle),{},{justifyContent:"space-between",alignItems:"flex-start","&:hover":{backgroundColor:e.palette.action.hover},"&.selected":{backgroundColor:e.palette.action.focus}})})})),gU=function(e){var t=e.authenticatedUserId,n=e.version,r=e.usersPublicProfileByIds,i=e.isEditing,a=e.isLatest,o=e.isLoading,u=e.onRename,d=e.onCancelRenaming,p=e.onContextMenu,h=e.displayFullDate,g=e.openedVersionStatus,m=e.getAnonymousAvatar,x=c.useRef(null),v=c.useState(n.label||""),b=(0,s.Z)(v,2),C=b[0],y=b[1],Z=n.userId?r[n.userId]:null,k=function(){u(n,C)},T=c.useCallback((function(){y(n.label||""),d()}),[n,d]),S=(0,rs.i)((function(e){return p(e,n)})),P=hU(),I=function(e,t){var n=c.useContext(j.Z);if(t&&t.version.id===e.id&&"unsavedChanges"===t.status)return{border:"1px solid ".concat(n.statusIndicator.error)}}(n,g),E=m(),L=g&&"opened"!==g.status&&g.version.id===n.id?g.status:a?"latest":null;return(0,f.jsx)(w.I18n,{children:function(e){var r,a=e.i18n;return(0,f.jsxs)("div",{className:en()((r={},(0,Qt.Z)(r,P.root,!0),(0,Qt.Z)(r,"selected",!!g&&g.version.id===n.id),r)),style:I,children:[(0,f.jsxs)("div",(0,l.Z)((0,l.Z)({onContextMenu:function(e){return p(e,n)},style:dU.rowContainer},S),{},{children:[L&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(fU,{status:L})}),(0,f.jsx)(M.LZ,{})]}),i?(0,f.jsx)(yi.ZP,{ref:x,margin:"none",value:C,stopContextMenuPropagation:!0,translatableHintText:{id:"End of jam"},onChange:function(e,t){return y(t.slice(0,uj.XU))},autoFocus:"desktopAndMobileDevices",onKeyPress:function(e){(0,gn.ph)(e)&&k()},onKeyDown:function(e){e.stopPropagation()},onKeyUp:function(e){(0,gn.W$)(e)&&T()},inputStyle:{fontSize:14},endAdornment:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)($.Z,{edge:"end",onClick:T,disabled:o,size:"small",children:(0,f.jsx)(as.Z,{})}),(0,f.jsx)($.Z,{edge:"end",onClick:k,disabled:o,size:"small",children:(0,f.jsx)(co.Z,{})})]}),style:dU.labelTextfield}):n.label?(0,f.jsxs)(_.pJ,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,children:n.label}),o&&(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(GI.Z,{size:20})}),(0,f.jsx)("div",{style:dU.dateContainer,children:(0,f.jsx)(N.Z,{noMargin:!0,style:dU.greyed,children:h?a.date(n.createdAt,{dateStyle:"medium",timeStyle:"short"}):a.date(n.createdAt,{hour:"numeric",minute:"numeric"})})})]}):(0,f.jsxs)(_.pJ,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,children:a.date(n.createdAt,{hour:"numeric",minute:"numeric"})}),o&&(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(GI.Z,{size:20})})]}),n.restoredFromVersion&&(0,f.jsx)("div",{style:dU.restoredVersionContainer,children:(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)("div",{style:dU.iconContainer,children:(0,f.jsx)(Ns,{fontSize:"inherit"})}),(0,f.jsx)(N.Z,{noMargin:!0,children:n.restoredFromVersion.label||a.date(n.restoredFromVersion.createdAt,{dateStyle:"medium",timeStyle:"short"})})]})}),Z?(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)(ao.Z,{src:Z.iconUrl,style:dU.avatar}),(0,f.jsx)(N.Z,{noMargin:!0,style:dU.greyed,children:Z.username||(n.userId===t?(0,f.jsx)(w.Trans,{id:"Me"}):"")})]}):(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",children:[(0,f.jsx)("img",{src:E.src,alt:E.alt,style:dU.avatar}),(0,f.jsx)(N.Z,{noMargin:!0,style:dU.greyed,children:(0,f.jsx)(w.Trans,{id:"Anonymous"})})]})]})),(0,f.jsx)($.Z,{size:"small",onClick:function(e){p(e,n)},children:(0,f.jsx)(Mh.Z,{})})]})}})},mU=(0,ur.Z)((function(e){return(0,No.Z)({root:(0,l.Z)((0,l.Z)({},dU.sharedRowStyle),{},{justifyContent:"flex-start","&:hover":{backgroundColor:e.palette.action.hover},"&:focus":{backgroundColor:e.palette.action.hover}}),labelSubRow:(0,l.Z)((0,l.Z)({},dU.labelSubRow),{},{"&.selected":{backgroundColor:e.palette.action.focus}}),versionSubRow:(0,l.Z)((0,l.Z)({},dU.versionSubRow),{},{"&.selected":{backgroundColor:e.palette.action.focus}})})})),xU=function(e){var t=e.day,n=e.authenticatedUserId,r=e.versions,i=e.isOpenedInitially,a=e.editedVersionId,o=e.latestVersion,l=e.loadingVersionId,u=e.onRenameVersion,d=e.onCancelRenaming,p=e.onContextMenu,h=e.openedVersionStatus,g=e.usersPublicProfileByIds,m=e.getAnonymousAvatar,x=c.useState(i),v=(0,s.Z)(x,2),b=v[0],C=v[1],j=new Date(t).getFullYear()!==uU,y=c.useMemo((function(){return r.filter((function(e){return e.label}))}),[r]),Z=!!o&&r.find((function(e){return e.id===o.id})),k=!!h&&r.find((function(e){return e.id===h.version.id}))&&!!h&&!h.version.label&&!b,T=Z&&o&&!o.label&&!b,S=mU();return(0,f.jsx)(w.I18n,{children:function(e){var i,s=e.i18n;return(0,f.jsxs)(c.Fragment,{children:[(0,f.jsx)(lt.Z,{onClick:function(){return C(!b)},className:S.root,children:(0,f.jsxs)(M.sg,{noMargin:!0,expand:!0,children:[(0,f.jsxs)("div",{className:en()((i={},(0,Qt.Z)(i,S.labelSubRow,!0),(0,Qt.Z)(i,"selected",k),i)),children:[b?(0,f.jsx)(st.Z,{}):(0,f.jsx)(ot.Z,{}),(0,f.jsxs)(M.x1,{noMargin:!0,justifyContent:"space-between",expand:!0,alignItems:"center",children:[(0,f.jsx)(N.Z,{noMargin:!0,children:s.date(t,{month:"short",day:"numeric",year:j?"numeric":void 0})}),k&&h?(0,f.jsx)(pU,{status:h.status}):T?(0,f.jsx)(pU,{status:"latest"}):null]})]}),y&&(0,f.jsx)(hN.Z,{in:!b,children:(0,f.jsx)(_.ak,{noMargin:!0,children:y.map((function(e){var t,n=h&&h.version.id===e.id,r=o&&o.id===e.id;return(0,f.jsxs)("div",{className:en()((t={},(0,Qt.Z)(t,S.versionSubRow,!0),(0,Qt.Z)(t,"selected",n),t)),children:[(0,f.jsx)("div",{style:dU.greyed,children:(0,f.jsx)(N.Z,{size:"body-small",noMargin:!0,children:e.label})}),n&&h?(0,f.jsx)(pU,{status:h.status}):r?(0,f.jsx)(pU,{status:"latest"}):null]},e.id)}))})})]})}),(0,f.jsx)(hN.Z,{in:b,children:(0,f.jsx)("div",{style:dU.versionsContainer,children:r.map((function(e){return(0,f.jsx)(gU,{authenticatedUserId:n,isLatest:!!o&&o.id===e.id,version:e,onRename:u,isLoading:l===e.id,onCancelRenaming:d,usersPublicProfileByIds:g,isEditing:e.id===a,onContextMenu:p,getAnonymousAvatar:m,openedVersionStatus:h},e.id)}))})})]})}})},vU=[{src:"res/avatar/green-hero.svg",alt:"Green hero avatar"},{src:"res/avatar/red-hero.svg",alt:"Red hero avatar"},{src:"res/avatar/ghost.svg",alt:"Ghost avatar"},{src:"res/avatar/pink-cloud.svg",alt:"Pink cloud avatar"}],bU={scrollView:{display:"flex",flexDirection:"column",justifyContent:"space-between"},container:{flex:1,display:"flex",flexDirection:"column",gap:2}},CU=c.memo((function(e){var t=e.projectId,n=e.authenticatedUserId,r=e.versions,i=e.onRenameVersion,l=e.openedVersionStatus,u=e.onLoadMore,d=e.canLoadMore,p=e.onCheckoutVersion,h=c.useState(),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useState(null),b=(0,s.Z)(v,2),C=b[0],j=b[1],y=c.useState(null),Z=(0,s.Z)(y,2),k=Z[0],S=Z[1],P=c.useState(!1),I=(0,s.Z)(P,2),E=I[0],L=I[1],A=c.useRef(null),O=c.useMemo((function(){return new Set(r.map((function(e){return e.userId})).filter(Boolean))}),[r]),R=r[0]||null,F=c.useMemo((function(){return function(e){if(0===e.length)return{};var t={};return e.forEach((function(e){var n=new Date(e.createdAt.slice(0,10)).getTime();t[n]?t[n].push(e):t[n]=[e]})),t}(r)}),[r]),D=Object.keys(F).map((function(e){return Number(e)})).sort().reverse();c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return");case 2:if(0!==O.size){e.next=5;break}return x({}),e.abrupt("return");case 5:return e.next=7,(0,xr.TL)(Array.from(O));case 7:t=e.sent,x(t);case 9:case"end":return e.stop()}}),e)})))()}),[O]);var N=c.useCallback((function(e,t){var n=!l&&R&&R.id!==t.version.id,r=!!l&&l.version.id!==t.version.id,i=!!l&&R&&R.id===t.version.id;return[{label:e._(t.version.label?{id:"Edit name"}:{id:"Name version"}),click:function(){j(t.version.id)}},{label:i?e._({id:"Come back to latest version"}):e._({id:"Open version"}),click:function(){p(t.version)},enabled:n||r}]}),[p,R,l]),_=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(null),S(t.id),e.prev=2,e.next=5,i(t,{label:n});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("An error occurred while rename project version:",e.t0);case 10:return e.prev=10,S(null),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}(),[i]),B=c.useCallback((function(){j(null)}),[]),U=c.useCallback((function(e,t){var n=A.current;n&&n.open(e.clientX,e.clientY,{version:t})}),[]),V=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.prev=1,e.next=4,u();case 4:return e.prev=4,L(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),[u]),H=c.useCallback((function(){var e=0;return t.split("").forEach((function(n){e+=t.charCodeAt(0)})),vU[e%vU.length]}),[t]);return m?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(w.I18n,{children:function(e){e.i18n;return(0,f.jsxs)(ft.Z,{style:bU.scrollView,children:[(0,f.jsxs)("div",{style:bU.container,children:[D.map((function(e,t){var r=F[e];return r&&0!==r.length?(0,f.jsx)(xU,{versions:r,latestVersion:R,authenticatedUserId:n,day:e,isOpenedInitially:0===t,usersPublicProfileByIds:m,onRenameVersion:_,onCancelRenaming:B,onContextMenu:U,editedVersionId:C,loadingVersionId:k,getAnonymousAvatar:H,openedVersionStatus:l},e):null})),d&&(0,f.jsx)(T.Z,{primary:!0,disabled:E||!d,label:E?(0,f.jsx)(w.Trans,{id:"Loading..."}):(0,f.jsx)(w.Trans,{id:"Show older"}),onClick:V})]}),!d&&(0,f.jsx)(M.x1,{noMargin:!0,children:(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"This is the end of the version history."})})})]})}}),(0,f.jsx)(ns.Z,{ref:A,buildMenuTemplate:N})]}):null}),(function(e,t){return!e.isVisible&&!t.isVisible})),jU=CU,yU=function(e,t){return t&&e===sU.Z.internalName?t.fileIdentifier.startsWith("http")?null:t.fileIdentifier:null},ZU={drawerContent:{width:320,overflowX:"hidden",display:"flex",flexDirection:"column"}},kU=function(e,t){if(0===t.length)return e;var n=Date.parse(t[0].createdAt),i=e.filter((function(e){return Date.parse(e.createdAt)>n}));return[].concat((0,r.Z)(i),(0,r.Z)(t))},wU={versions:null,nextPageUri:null},TU=function(e){var t=e.fileMetadata,n=e.isSavingProject,i=e.getStorageProvider,u=e.onOpenCloudProjectOnSpecificVersion,d=c.useContext(Z.Z).hasUnsavedChanges,p=(0,Ye.Z)().showAlert,h=c.useState(null),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useContext($n.ZP),b=c.useRef(!1),C=c.useRef(!1),j=v.limits,y=v.getAuthorizationHeader,k=v.profile,T=i(),S=c.useState(wU),P=(0,s.Z)(S,2),I=P[0],E=P[1],L=c.useState(null),A=(0,s.Z)(L,2),O=A[0],R=A[1],F=c.useState(!1),D=(0,s.Z)(F,2),_=D[0],B=D[1],U=T.internalName,V=U===sU.Z.internalName,H=(0,er.$D)(j),z=c.useState(yU(U,t)),W=(0,s.Z)(z,2),G=W[0],Y=W[1],q=c.useState(V&&t?t.lastModifiedDate:null),J=(0,s.Z)(q,2),X=J[0],K=J[1],Q=V&&0!==H,$=I.versions&&I.versions[0]?I.versions[0].id:null,ee=k?k.id:null;c.useEffect((function(){b.current||(Y(yU(U,t)),K(V&&t?t.lastModifiedDate:null))}),[U,V,t]),c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C.current){e.next=2;break}return e.abrupt("return");case 2:if(G&&Q){e.next=5;break}return E(wU),e.abrupt("return");case 5:return x(null),e.prev=6,e.next=9,(0,uj.If)(y,ee,G,{forceUri:null});case 9:if(t=e.sent){e.next=12;break}return e.abrupt("return");case 12:E((function(e){return e.versions?{versions:kU(t.versions,e.versions),nextPageUri:e.nextPageUri}:{versions:t.versions,nextPageUri:t.nextPageUri}})),e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(6),console.error("An error occurred while fetching project versions:",e.t0),!(n=(0,uo.T)(e.t0))||403!==n.status){e.next=22;break}return x((0,f.jsx)(w.Trans,{id:"You don't have the rights to access the version history of this project. Are you connected with the right account?"})),e.abrupt("return");case 22:x((0,f.jsx)(w.Trans,{id:"Could not load the project versions. Verify your internet connection or try again later."}));case 23:case"end":return e.stop()}}),e,null,[[6,15]])})))()}),[T,y,ee,G,Q,X,j]),c.useEffect((function(){C.current||R((function(e){return!e||d&&"unsavedChanges"===e.status?e:{version:e.version,status:"unsavedChanges"}}))}),[d]),c.useEffect((function(){C.current||R((function(e){return!e||n&&"saving"===e.status?e:n?{version:e.version,status:"saving"}:null}))}),[n]),c.useEffect((function(){t||R(null)}),[t]);var te=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G){e.next=2;break}return e.abrupt("return");case 2:return x(null),e.prev=3,e.next=6,(0,uj.If)(y,ee,G,{forceUri:I.nextPageUri});case 6:if(t=e.sent){e.next=9;break}return e.abrupt("return");case 9:E({versions:[].concat((0,r.Z)(I.versions||[]),(0,r.Z)(t.versions)),nextPageUri:t.nextPageUri}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("An error occurred while fetching more project versions:",e.t0),x((0,f.jsx)(w.Trans,{id:"Could not load the project versions. Verify your internet connection or try again later."}));case 16:case"end":return e.stop()}}),e,null,[[3,12]])}))),[y,ee,G,I]),ne=c.useCallback((function(){B(!0)}),[]),re=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&O&&$){e.next=2;break}return e.abrupt("return");case 2:return C.current=!0,b.current=!0,e.prev=4,e.next=7,u({fileMetadata:t,versionId:$,ignoreUnsavedChanges:!0,openingMessage:{id:"Opening latest save..."}});case 7:R(null);case 8:return e.prev=8,C.current=!1,b.current=!1,e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[4,,8,12]])}))),[t,u,O,$]),ie=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(O||!d){e.next=6;break}return e.next=5,p({title:{id:"There are unsaved changes"},message:{id:"Save your project before using the version history."}});case 5:return e.abrupt("return");case 6:if(!O||n.id!==$){e.next=11;break}return e.next=9,re();case 9:return B(!1),e.abrupt("return");case 11:return C.current=!0,b.current=!0,e.prev=13,e.next=16,u({fileMetadata:t,versionId:n.id,ignoreUnsavedChanges:!0,openingMessage:{id:"Opening older version..."}});case 16:R({version:n,status:"opened"});case 17:return e.prev=17,C.current=!1,b.current=!1,e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[13,,17,21]])})));return function(t){return e.apply(this,arguments)}}(),[t,u,O,p,d,$,re]),ae=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,uj.Gk)(v,G,t.id,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:E((function(e){return e.versions?{versions:e.versions.map((function(e){return e.id===r.id?(0,l.Z)((0,l.Z)({},e),{},{label:r.label}):e})),nextPageUri:e.nextPageUri}:e}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[v,G]);return{checkedOutVersionStatus:O,openVersionHistoryPanel:ne,renderVersionHistoryPanel:function(){return(0,f.jsx)(w.I18n,{children:function(e){var n=e.i18n;return(0,f.jsxs)(lg.ZP,{open:_,PaperProps:{style:ZU.drawerContent,className:"safe-area-aware-left-container"},ModalProps:{keepMounted:!0},onClose:function(){return B(!1)},children:[(0,f.jsx)(mS,{icon:(0,f.jsx)(Ns,{}),title:n._({id:"File history"}),onClose:function(){return B(!1)},id:"version-history-drawer"}),G?0===H?(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(Qn.Z,{subscriptionDialogOpeningReason:"Version history",forceColumnLayout:!0,recommendedPlanIdIfNoSubscription:"gdevelop_gold",placementId:"version-history",children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Access project history, name saves, restore older versions.<0/>Get a subscription to enable this feature.",components:[(0,f.jsx)("br",{})]})})})})}):!I.versions&&m?(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(_r.Z,{onRetry:te,children:m})})}):I.versions?(0,f.jsxs)(M.sg,{children:[-1!==H&&(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(Qn.Z,{subscriptionDialogOpeningReason:"Version history",forceColumnLayout:!0,filter:"team",placementId:"version-history",children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Your current subscription plan allows restoring versions from the last {historyRetentionDays} days.<0/>Get a higher plan to access older versions.",values:{historyRetentionDays:H},components:[(0,f.jsx)("br",{})]})})})})}),(0,f.jsx)(jU,{authenticatedUserId:v.profile?v.profile.id:"",isVisible:_,projectId:t?t.fileIdentifier:"",canLoadMore:!!I.nextPageUri,onCheckoutVersion:ie,onLoadMore:te,onRenameVersion:ae,openedVersionStatus:O,versions:I.versions})]}):(0,f.jsx)(Oe.Z,{}):(0,f.jsx)(M.x1,{children:(0,f.jsx)(M.sg,{expand:!0,children:(0,f.jsx)(je.Z,{kind:"info",children:(0,f.jsx)(w.Trans,{id:"The version history is available for cloud projects only."})})})})]})}})},onQuitVersionHistory:re}},SU={width:320,overflowX:"hidden",display:"flex",flexDirection:"column"},PU=function(e){var t=e.title,n=e.children,r=e.projectManagerOpen,i=e.toggleProjectManager,a=(0,cg.T)();return(0,f.jsxs)(lg.ZP,(0,l.Z)((0,l.Z)({open:r,PaperProps:{style:(0,l.Z)((0,l.Z)({},SU),(0,cg.E)(a)),className:"safe-area-aware-left-container"},ModalProps:{keepMounted:!0},onClose:i},(0,is.Y)({open:r?"true":void 0})),{},{children:[(0,f.jsx)(mS,{icon:(0,f.jsx)(Qo,{}),title:t,onClose:i,id:"project-manager-drawer"}),n]}))},IU=n.g.gd,EU=function(e,t,n){var r=e.get(t);r||(r=new Set,e.set(t,r)),r.add(n)};function MU(e){var t=e.wholeProjectDiagnosticReport,n=e.onClose,a=c.useContext(j.Z),o=c.useContext(D.ZP),l=c.useCallback((function(e){var t=new Set,n=new Set,o=new Set,l=new Map,c=new Map;(0,mt.mapFor)(0,e.count(),(function(r){var i=e.get(r),a=i.getObjectName();switch(i.getType()){case IU.ProjectDiagnostic.UndeclaredVariable:0===a.length?t.add(i.getActualValue()):EU(l,a,i.getActualValue());break;case IU.ProjectDiagnostic.MissingBehavior:var s=i.getExpectedValue();IU.MetadataProvider.getBehaviorMetadata(IU.JsPlatform.get(),s).isHidden()?o.add(a):EU(c,a,s);break;case IU.ProjectDiagnostic.UnknownObject:n.add(i.getActualValue());break;case IU.ProjectDiagnostic.MismatchedObjectType:o.add(a)}}));var u,d=(0,i.Z)(n);try{for(d.s();!(u=d.n()).done;){var p=u.value;o.delete(p)}}catch(h){d.e(h)}finally{d.f()}return(0,f.jsx)(_.ak,{noMargin:!0,useLargeSpacer:!0,children:(0,f.jsxs)(Rv.iA,{children:[(0,f.jsx)(Rv.xD,{children:(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.bY,{}),(0,f.jsx)(Rv.bY,{})]})}),(0,f.jsxs)(Rv.RM,{children:[n.size>0&&(0,f.jsxs)(Rv.SC,{style:{backgroundColor:a.list.itemsBackgroundColor},children:[(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",children:(0,f.jsx)(w.Trans,{id:"Missing objects"})})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",allowSelection:!0,children:(0,r.Z)(n).join(", ")})})]},"missing-objects"),o.size>0&&(0,f.jsxs)(Rv.SC,{style:{backgroundColor:a.list.itemsBackgroundColor},children:[(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",children:(0,f.jsx)(w.Trans,{id:"Objects used with wrong actions or conditions"})})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",allowSelection:!0,children:(0,r.Z)(o).join(", ")})})]},"missing-objects"),t.size>0&&(0,f.jsxs)(Rv.SC,{style:{backgroundColor:a.list.itemsBackgroundColor},children:[(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",children:(0,f.jsx)(w.Trans,{id:"Missing scene variables"})})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",allowSelection:!0,children:(0,r.Z)(t).join(", ")})})]}),(0,r.Z)(l.entries()).map((function(e){var t=(0,s.Z)(e,2),n=t[0],i=t[1];return(0,f.jsxs)(Rv.SC,{style:{backgroundColor:a.list.itemsBackgroundColor},children:[(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",children:(0,f.jsx)(w.Trans,{id:'Missing variables for object "{objectName}"',values:{objectName:n}})})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",allowSelection:!0,children:(0,r.Z)(i).join(", ")})})]},"missing-object-variables-".concat(n))})),(0,r.Z)(c.entries()).map((function(e){var t=(0,s.Z)(e,2),n=t[0],i=t[1];return(0,f.jsxs)(Rv.SC,{style:{backgroundColor:a.list.itemsBackgroundColor},children:[(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",children:(0,f.jsx)(w.Trans,{id:'Missing behaviors for object "{objectName}"',values:{objectName:n}})})}),(0,f.jsx)(Rv.Nn,{children:(0,f.jsx)(N.Z,{size:"body",children:(0,r.Z)(i).map((function(e){return IU.MetadataProvider.getBehaviorMetadata(IU.JsPlatform.get(),e).getFullName()})).join(", ")})})]},"missing-object-behaviors-".concat(n))}))]})]})})}),[a.list.itemsBackgroundColor]);return(0,f.jsx)(E.ZP,{id:"diagnostic-report-dialog",title:(0,f.jsx)(w.Trans,{id:"Diagnostic report"}),actions:[(0,f.jsx)(E.vF,{id:"close-button",label:(0,f.jsx)(w.Trans,{id:"Close"}),primary:!0,onClick:n},"close")],secondaryActions:[(0,f.jsx)(yr.Z,{label:(0,f.jsx)(w.Trans,{id:"Generate report at each preview"}),toggled:o.values.openDiagnosticReportAutomatically,onToggle:function(e,t){return o.setOpenDiagnosticReportAutomatically(t)},labelPosition:"right"},"report-automatically")],onRequestClose:n,onApply:n,open:!0,maxWidth:"sm",children:(0,f.jsx)(_.ak,{noMargin:!0,useLargeSpacer:!0,children:(0,mt.mapFor)(0,t.count(),(function(e){var n=t.get(e);return n.count()>0&&(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"block-title",children:n.getSceneName()}),l(n)]},"diagnostic-report-".concat(n.getSceneName()))}))})})}var LU=n(15954),AU=n(10158),OU={previewContainer:{display:"flex",justifyContent:"center",alignItems:"center"},cardContainer:{overflow:"hidden",position:"relative",borderRadius:8,flexShrink:0},titleContainer:{position:"absolute",bottom:0,left:0,right:0,color:"#fff",backgroundColor:"rgb(0,0,0,0.5)",display:"inline-block",textAlign:"center",flexDirection:"column",height:20},title:(0,l.Z)((0,l.Z)({},pr.t),{},{overflowWrap:"break-word"}),previewImage:{position:"relative",objectFit:"contain",verticalAlign:"middle",pointerEvents:"none"}},RU=function(e){var t=e.project,n=e.object,r=128,i=(0,c.useContext(NL.KY).getAssetShortHeaderFromId)(n.getAssetStoreId());return(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},OU.cardContainer),{},{width:r,height:r}),children:[(0,f.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},OU.previewContainer),{},{width:r,height:r}),children:[(0,f.jsx)(pT.Z,{}),i?(0,f.jsx)(AU.D,{assetShortHeader:i,maxSize:128}):(0,f.jsx)(_p.W,{alt:"",src:rc.Z.getThumbnail(t,n.getConfiguration()),style:(0,l.Z)((0,l.Z)({},OU.previewImage),{},{maxWidth:108,maxHeight:108})})]}),(0,f.jsx)("div",{style:OU.titleContainer,children:(0,f.jsx)(N.Z,{noMargin:!0,style:OU.title,color:"inherit",children:n.getName()})})]})},FU=n(5946),DU=c.memo((function(e){return(0,f.jsx)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.82935 3.83804C5.39722 4.23619 5.15563 4.82786 5.16706 5.62218C5.17848 6.37508 5.39213 6.85711 5.86513 7.36172C5.87329 7.37041 5.88144 7.3791 5.8896 7.38778C6.14834 7.66335 6.40538 7.9371 6.57841 8.30629C6.7614 8.69671 6.83385 9.15028 6.83356 9.77797C6.83343 10.0541 6.60946 10.2779 6.33332 10.2777C6.05718 10.2776 5.83343 10.0536 5.83356 9.7775C5.83382 9.22001 5.76768 8.93284 5.67293 8.73067C5.57371 8.51898 5.42477 8.35385 5.13572 8.04579C4.49779 7.36524 4.18245 6.64653 4.16718 5.63715C4.15254 4.62416 4.46642 3.73406 5.15174 3.10262C5.83056 2.47716 6.80717 2.16663 7.99999 2.16663C9.19304 2.16663 10.1699 2.47714 10.8488 3.1026C11.5343 3.7341 11.8481 4.62398 11.8328 5.63712C11.8181 6.64672 11.5022 7.36518 10.8646 8.04543C10.5761 8.35353 10.4272 8.51874 10.3279 8.73067C10.233 8.93308 10.1667 9.22047 10.1664 9.77797C10.1663 10.0541 9.94234 10.2779 9.6662 10.2777C9.39005 10.2776 9.1663 10.0536 9.16643 9.7775C9.16672 9.14982 9.23954 8.69647 9.42241 8.30629C9.59521 7.9376 9.85155 7.66405 10.1096 7.38872C10.1179 7.37979 10.1263 7.37085 10.1347 7.3619C10.6079 6.85708 10.822 6.37487 10.8329 5.62234C10.8449 4.82808 10.6034 4.23619 10.1713 3.83806C9.73257 3.43389 9.02942 3.16663 7.99999 3.16663C6.9709 3.16663 6.26801 3.43387 5.82935 3.83804ZM5.83356 11.5555C5.83356 11.2794 6.05741 11.0555 6.33356 11.0555H9.66643C9.94257 11.0555 10.1664 11.2794 10.1664 11.5555C10.1664 11.8317 9.94257 12.0555 9.66643 12.0555H6.33356C6.05741 12.0555 5.83356 11.8317 5.83356 11.5555ZM6.38903 13.3333C6.38903 13.0572 6.61289 12.8333 6.88903 12.8333H9.11095C9.38709 12.8333 9.61095 13.0572 9.61095 13.3333C9.61095 13.6094 9.38709 13.8333 9.11095 13.8333H6.88903C6.61289 13.8333 6.38903 13.6094 6.38903 13.3333Z",fill:"currentColor"})}))})),NU=function(e){var t=e.title,n=e.description;return(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(H.Z,{background:"light",children:(0,f.jsxs)(M.x1,{alignItems:"flex-start",justifyContent:"flex-start",expand:!0,children:[(0,f.jsx)(M.sg,{alignItems:"center",justifyContent:"flex-start",children:(0,f.jsx)(DU,{})}),(0,f.jsxs)(_.ak,{alignItems:"flex-start",justifyContent:"flex-start",children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"sub-title",children:t}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body",children:n})]})]})})})},_U={objectsContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:8}},BU=function(e){var t=e.project,n=e.resourceManagementProps,r=e.onWillInstallExtension,i=e.onExtensionInstalled,a=c.useState(null),o=(0,s.Z)(a,2),l=o[0],u=o[1];return(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(NU,{title:(0,f.jsx)(w.Trans,{id:"These are objects"}),description:(0,f.jsx)(w.Trans,{id:"Each character, player, obstacle, background, item, etc. is an object. Objects are the building blocks of your game."})}),(0,mt.mapFor)(0,t.getLayoutsCount(),(function(e){var n=t.getLayoutAt(e),r=iV(n.getObjects().getRootFolder());return r.length?(0,f.jsxs)(_.ak,{noMargin:!0,children:[t.getLayoutsCount()>1&&(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:n.getName()}),r.map((function(e){var r=e.folderName,i=e.objects;return(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"sub-title",children:r}),(0,f.jsx)("div",{style:_U.objectsContainer,children:i.map((function(e){return(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(RU,{object:e,project:t}),(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Replace"}),onClick:function(){u({object:e,layout:n})}})]},e.ptr)}))})]},r)}))]},n.getName()):null})),l&&(0,f.jsx)(FU.Z,{project:t,layout:l.layout,eventsBasedObject:null,objectsContainer:l.layout.getObjects(),object:l.object,resourceManagementProps:n,onClose:function(){u(null)},minimalUI:!0,onWillInstallExtension:r,onExtensionInstalled:i})]})},UU=n.g.gd,VU=function(e){var t=e.project,n=e.behavior,r=e.object,i=e.onBehaviorUpdated,a=e.resourceManagementProps,o=(0,gt.W)(),l=(0,s.Z)(o,2),u=l[0],d=l[1],p=c.useMemo((function(){return(0,Gn.ZP)({properties:n.getProperties(),defaultValueProperties:null,getProperties:function(e){return e.getProperties()},onUpdateProperty:function(e,t,n){e.updateProperty(t,n)},object:r,visibility:"Basic-Quick",quickCustomizationVisibilities:n.getPropertiesQuickCustomizationVisibilities()})}),[n,r,u]);return(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(sk.ZP,{project:t,schema:p,instances:[n],onInstancesModified:i,resourceManagementProps:a,onRefreshAllFields:d})})},HU=function(e){var t=e.project,n=e.resourceManagementProps;return(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(NU,{title:(0,f.jsx)(w.Trans,{id:"These are behaviors"}),description:(0,f.jsx)(w.Trans,{id:"Behaviors are attached to objects and make them alive. The rules of the game can be created using behaviors and events."})}),(0,mt.mapFor)(0,t.getLayoutsCount(),(function(e){var r=t.getLayoutAt(e),i=iV(r.getObjects().getRootFolder());if(!i.length)return null;var a=i.map((function(e){var r=e.folderName,i=e.objects.map((function(e){var r=function(e){return e.getAllBehaviorNames().toJSArray().filter((function(t){var n=e.getBehavior(t);if(n.isDefaultBehavior())return!1;if(0===n.getProperties().keys().size())return!1;var r=UU.MetadataProvider.getBehaviorMetadata(UU.JsPlatform.get(),n.getTypeName());return!UU.MetadataProvider.isBadBehaviorMetadata(r)&&r.getQuickCustomizationVisibility()!==UU.QuickCustomization.Hidden}))}(e);return r.length?(0,f.jsxs)(_.ep,{noMargin:!0,expand:!0,children:[(0,f.jsx)(RU,{object:e,project:t}),(0,f.jsx)(_.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:r.map((function(r){var i=e.getBehavior(r);return(0,f.jsx)(VU,{project:t,behavior:i,object:e,onBehaviorUpdated:function(){},resourceManagementProps:n},i.ptr)}))})]},e.ptr):null})).filter(Boolean);return i.length?(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[(0,f.jsx)(N.Z,{noMargin:!0,size:"sub-title",children:r}),(0,f.jsx)(_.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,useLargeSpacer:!0,children:i})]},r):null})).filter(Boolean);return a.length?(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:[t.getLayoutsCount()>1&&(0,f.jsx)(N.Z,{noMargin:!0,size:"block-title",children:r.getName()}),a]},r.getName()):null})).filter(Boolean)]})},zU=n(6745),WU="QuickPublish_paperContainer__AZxVi",GU=n(5295),YU=n(31370),qU=n(35638),JU={paper:{overflow:"hidden",justifyContent:"center",maxWidth:400,width:"100%",height:"auto"},paperNoImage:{height:250},image:{display:"block",objectFit:"scale-down",width:4e3/9,height:250},imageMobile:{width:"100%",height:"auto",maxHeight:250}},XU=function(e){e.project;var t=e.game,n=e.previewScreenshotUrls,r=e.onLaunchPreview,i=e.disabled,a=(0,be.UQ)().isMobile,o=c.useMemo((function(){if(t){var e=(0,Cr.nC)(t);if(e)return e}if(n.length)return n[n.length-1]}),[t,n]);return(0,f.jsx)(H.Z,{style:(0,l.Z)((0,l.Z)((0,l.Z)({},JU.paper),o?{}:JU.paperNoImage),{},{whiteSpace:"normal",display:"flex"}),background:"light",children:o?(0,f.jsx)(_p.W,{alt:"Customize your game with GDevelop",src:o,style:(0,l.Z)((0,l.Z)({},JU.image),a?JU.imageMobile:{})}):i?(0,f.jsx)(Ae.Z,{children:(0,f.jsx)(w.Trans,{id:"No thumbnail for your game, you can update it in your Game Dashboard!"})}):(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Start a preview to generate a thumbnail!"})}),(0,f.jsx)(G.Z,{color:"success",size:"medium",label:(0,f.jsx)(w.Trans,{id:"Preview"}),onClick:r,icon:(0,f.jsx)(Xe,{})})]})})},KU=function(e){var t=e.project,n=e.gameAndBuildsManager,i=e.setIsNavigationDisabled,l=e.onlineWebExporter,u=e.onSaveProject,d=e.isSavingProject,p=e.isRequiredToSaveAsNewCloudProject,h=e.onClose,g=e.onContinueQuickCustomization,m=e.gameScreenshotUrls,x=e.onScreenshotsClaimed,v=e.onLaunchPreview,b=c.useContext($n.ZP),C=b.profile,j=b.onOpenCreateAccountDialog,y=b.cloudProjects,Z=b.getAuthorizationHeader,k=n.game,S=n.setGame,P=c.useState(""),I=(0,s.Z)(P,2),E=I[0],L=I[1],A=c.useContext(di.Z),O=c.useState(""),R=(0,s.Z)(O,2),F=R[0],D=R[1],B=c.useRef(null),U=c.useCallback((function(){B.current&&B.current.launchWholeExport({payWithCredits:!1})}),[]),V=!!C&&!y,z=RP(b),W=p()&&z,Y=!!C&&""===F&&!W&&!V;c.useEffect((function(){Y&&(u(),U())}),[U,u,Y]);var q=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.build,e.prev=1,!(C&&k&&n)){e.next=11;break}return D("updating-game"),i=k.screenshotUrls||[],o=[].concat((0,r.Z)(i),(0,r.Z)(m)),e.next=8,(0,Cr.Bi)(Z,C.id,k.id,{publicWebBuildId:n.id,screenshotUrls:o,savedStatus:"saved"});case 8:s=e.sent,S(s),x();case 11:L(k?(0,Cr.IH)(k):n?(0,SR.Fp)(n,"s3Key"):""),D("succeeded"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Unable to update the game",e.t0),D("errored");case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),[D,S,k,C,Z,m,x]),J=!C&&""===F;return(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,alignItems:"center",justifyContent:"space-between",children:[(0,f.jsxs)(_.ak,{alignItems:"center",children:[(0,f.jsx)(XU,{project:t,previewScreenshotUrls:m,game:k,onLaunchPreview:v,disabled:""!==F}),(0,f.jsx)(M.LZ,{}),C?V?(0,f.jsx)(Oe.Z,{}):W?(0,f.jsx)(FP,{}):(0,f.jsx)(w.I18n,{children:function(e){var r=e.i18n;return(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,alignItems:"stretch",children:[(0,f.jsx)(zU.Z,{ref:B,i18n:r,project:t,onSaveProject:u,isSavingProject:d,onChangeSubscription:function(){},authenticatedUser:b,eventsFunctionsExtensionsState:A,exportPipeline:l.exportPipeline,setIsNavigationDisabled:i,gameAndBuildsManager:n,uiMode:"minimal",onExportLaunched:function(){D("started")},onExportErrored:function(){D("errored")},onExportSucceeded:q}),"succeeded"===F?(0,f.jsx)(H.Z,{background:"medium",variant:"outlined",children:(0,f.jsx)("div",{className:en()((0,Qt.Z)({},WU,!0)),children:(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(N.Z,{size:"body",align:"center",children:(0,f.jsx)(w.Trans,{id:"Share your game with your friends or teammates."})}),E&&(0,f.jsx)(UO.Z,{url:E})]})})}):"errored"===F?(0,f.jsxs)(_.ak,{noMargin:!0,children:[(0,f.jsx)(N.Z,{size:"body",align:"center",children:(0,f.jsx)(w.Trans,{id:"An error occurred while exporting your game. Verify your internet connection and try again."})}),(0,f.jsx)(G.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Try again"}),onClick:U})]}):"updating-game"===F?(0,f.jsx)(Oe.Z,{}):null]})}}):(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(H.Z,{background:"light",children:(0,f.jsx)("div",{className:en()((0,Qt.Z)({},WU,!0)),children:(0,f.jsxs)(_.ak,{children:[(0,f.jsx)(N.Z,{size:"body",align:"center",children:(0,f.jsx)(w.Trans,{id:"Create a GDevelop account to save your changes and keep personalizing your game"})}),(0,f.jsxs)(_.ep,{expand:!0,justifyContent:"center",alignItems:"center",noMargin:!0,children:[(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(GU.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Google"}),onClick:function(){return j()},fullWidth:!0}),(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(YU.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Github"}),onClick:function(){return j()},fullWidth:!0}),(0,f.jsx)(G.Z,{primary:!0,icon:(0,f.jsx)(qU.Z,{}),label:(0,f.jsx)(w.Trans,{id:"Apple"}),onClick:function(){return j()},fullWidth:!0})]}),(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Use your email"}),onClick:function(){return j()}})]})})})})]}),"started"!==F&&"updating-game"!==F&&!V&&(0,f.jsxs)(_.ak,{justifyContent:"center",alignItems:"center",children:[(0,f.jsx)(ba.Z,{secondary:!0,onClick:h,label:J||W?(0,f.jsx)(w.Trans,{id:"Leave and lose all changes"}):(0,f.jsx)(w.Trans,{id:"Finish and close"}),icon:J||W?(0,f.jsx)(Jt.Z,{}):null}),(0,f.jsx)(ba.Z,{secondary:!0,onClick:g,label:(0,f.jsx)(w.Trans,{id:"Rework the game"}),icon:(0,f.jsx)(vF.Z,{})})]})]})},QU=n.g.gd,$U=function e(t){for(var n=0;n<t.getChildrenCount();n++){var r=t.getChildAt(n);if(r.isFolder()){var i=e(r);if(i)return i}else{var a=r.getObject();if("Title"===a.getName())return a}}return null},eV=function(e){var t=e.project,n=e.object,r=e.objectConfiguration,i=e.onObjectUpdated,a=e.resourceManagementProps,o=(0,gt.W)(),l=(0,s.Z)(o,2),u=l[0],d=l[1],p=c.useMemo((function(){var e=r.getProperties(),t=(0,Gn.ZP)({properties:e,defaultValueProperties:null,getProperties:function(e){return e.getProperties()},onUpdateProperty:function(e,t,n){return e.updateProperty(t,n)},object:n,visibility:"Basic-Quick"});return t}),[r,u,n]);return(0,f.jsx)(_.ak,{children:(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(sk.ZP,{project:t,schema:p,instances:[r],onInstancesModified:i,resourceManagementProps:a,onRefreshAllFields:d})})})},tV=function(e){var t=e.project,n=e.resourceManagementProps,r=c.useMemo((function(){for(var e=0;e<t.getLayoutsCount();e++){var n=t.getLayoutAt(e),r=$U(n.getObjects().getRootFolder());if(r)return r}return null}),[t]),i=c.useMemo((function(){if(!r)return null;var e=r.getConfiguration();return QU.castObject(e,QU.ObjectConfiguration)}),[r]),a=c.useCallback((function(){if(r&&i){var e=i.getProperties().get("text");if(e){var n=e.getValue();n!==t.getName()&&t.setName(n)}else console.error('Title object does not have a "text" property.')}}),[r,i,t]);return r&&i?(0,f.jsx)(_.ep,{noMargin:!0,expand:!0,children:(0,f.jsx)(_.ak,{noMargin:!0,expand:!0,noOverflowParent:!0,children:(0,f.jsx)(eV,{project:t,object:r,objectConfiguration:i,onObjectUpdated:a,resourceManagementProps:n})})}):(0,f.jsx)(M.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,f.jsx)(M.x1,{children:(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"Oops! Looks like this game has no logo set up, you can continue to the next step."})})})})},nV=n.g.gd,rV=[{name:"replace-objects",canPreview:!0,title:(0,f.jsx)(w.Trans,{id:"Choose your game art"}),nextLabel:(0,f.jsx)(w.Trans,{id:"Next: Tweak Gameplay"})},{name:"tweak-behaviors",canPreview:!0,title:(0,f.jsx)(w.Trans,{id:"Tweak gameplay"}),nextLabel:(0,f.jsx)(w.Trans,{id:"Next: Game logo"})},{name:"game-logo",canPreview:!0,title:(0,f.jsx)(w.Trans,{id:"Make your game title"}),nextLabel:(0,f.jsx)(w.Trans,{id:"Next"})},{name:"publish",canPreview:!1,title:(0,f.jsx)(w.Trans,{id:"Save your game"})}],iV=function e(t){var n=[""],r={"":[]};return(0,mt.mapFor)(0,t.getChildrenCount(),(function(i){var a=t.getChildAt(i);if(a.getQuickCustomizationVisibility()!==nV.QuickCustomization.Hidden)if(a.isFolder()){var o=a.getFolderName(),s=r[o]=r[o]||[];n.push(o),e(a).forEach((function(e){e.folderName;var t=e.objects;s.push.apply(s,t)}))}else{var l=a.getObject();(0,hE.s)(l)&&r[""].push(a.getObject())}})),n.map((function(e){return{folderName:e,objects:r[e]}})).filter((function(e){return e.objects.length>0}))},aV=c.memo((function(e){return(0,f.jsxs)(p.Z,(0,l.Z)((0,l.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49999 3.66667C4.03975 3.66667 3.66666 4.03977 3.66666 4.50001V11.5C3.66666 11.9603 4.03975 12.3333 4.49999 12.3333H11.5C11.9602 12.3333 12.3333 11.9603 12.3333 11.5V4.50001C12.3333 4.03976 11.9602 3.66667 11.5 3.66667H4.49999ZM2.66666 4.50001C2.66666 3.48748 3.48747 2.66667 4.49999 2.66667H11.5C12.5125 2.66667 13.3333 3.48749 13.3333 4.50001V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H4.49999C3.48747 13.3333 2.66666 12.5126 2.66666 11.5V4.50001Z",fill:"currentColor"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25218 5.39907C6.40812 5.31009 6.59979 5.31154 6.75435 5.40288L10.421 7.56954C10.5733 7.6595 10.6667 7.82318 10.6667 8.00001C10.6667 8.17683 10.5733 8.34051 10.421 8.43047L6.75435 10.5971C6.59979 10.6885 6.40812 10.6899 6.25218 10.6009C6.09625 10.512 5.99999 10.3462 5.99999 10.1667V5.83334C5.99999 5.6538 6.09625 5.48805 6.25218 5.39907ZM6.99999 6.70956V9.29045L9.18382 8.00001L6.99999 6.70956Z",fill:"currentColor"})]}))})),oV="PreviewLine_previewLine__tg3aV",sV=function(e){var t=e.onLaunchPreview,n=c.useContext(j.Z);return(0,f.jsx)(M.sg,{noMargin:!0,children:(0,f.jsx)(H.Z,{background:"light",children:(0,f.jsx)("div",{className:en()((0,Qt.Z)({},oV,!0)),children:(0,f.jsx)(M.sg,{children:(0,f.jsxs)(_.pJ,{alignItems:"center",justifyContent:"space-between",expand:!0,children:[(0,f.jsxs)(_.pJ,{noMargin:!0,alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(aV,{htmlColor:n.message.valid}),(0,f.jsx)(N.Z,{noMargin:!0,size:"body",children:(0,f.jsx)(w.Trans,{id:"Try your game"})})]}),(0,f.jsx)(G.Z,{color:"success",size:"medium",label:(0,f.jsx)(w.Trans,{id:"Preview"}),onClick:t,icon:(0,f.jsx)(Xe,{})})]})})})})})},lV=function(e){var t=e.project,n=e.resourceManagementProps,r=e.onLaunchPreview,i=e.onClose,a=e.onlineWebExporter,o=e.onSaveProject,l=e.isSavingProject,u=e.isRequiredToSaveAsNewCloudProject,d=e.canClose,p=e.sourceGameId,h=e.gameScreenshotUrls,g=e.onScreenshotsClaimed,m=e.onWillInstallExtension,x=e.onExtensionInstalled,v=c.useContext(Z.Z).triggerUnsavedChanges,b=(0,gD.Px)({project:t,copyLeaderboardsAndMultiplayerLobbiesFromGameId:p}),C=function(e){var t=e.onClose,n=c.useState(0),r=(0,s.Z)(n,2),i=r[0],a=r[1],o=c.useState(!1),l=(0,s.Z)(o,2),u=l[0],d=l[1];return{isNavigationDisabled:u,step:rV[i],goToNextStep:c.useCallback((function(){i!==rV.length-1?a(i+1):t()}),[i,t]),goToPreviousStep:c.useCallback((function(){0!==i&&a(i-1)}),[i]),canGoToPreviousStep:0!==i&&i!==rV.length-1,setIsNavigationDisabled:d}}({onClose:i}),j=c.useCallback((function(){C.goToPreviousStep()}),[C]),y=function(e){var t=e.project,n=e.gameAndBuildsManager,r=e.resourceManagementProps,i=e.quickCustomizationState,a=e.onLaunchPreview,o=e.onlineWebExporter,s=e.onSaveProject,l=e.isSavingProject,c=e.isRequiredToSaveAsNewCloudProject,u=e.onClose,d=e.onContinueQuickCustomization,p=e.gameScreenshotUrls,h=e.onScreenshotsClaimed,g=e.onWillInstallExtension,m=e.onExtensionInstalled;return{title:i.step.title,content:(0,f.jsx)(f.Fragment,{children:"replace-objects"===i.step.name?(0,f.jsx)(BU,{project:t,resourceManagementProps:r,onWillInstallExtension:g,onExtensionInstalled:m}):"tweak-behaviors"===i.step.name?(0,f.jsx)(HU,{project:t,resourceManagementProps:r}):"game-logo"===i.step.name?(0,f.jsx)(tV,{project:t,resourceManagementProps:r}):"publish"===i.step.name?(0,f.jsx)(KU,{onlineWebExporter:o,project:t,gameAndBuildsManager:n,setIsNavigationDisabled:i.setIsNavigationDisabled,onSaveProject:s,isSavingProject:l,isRequiredToSaveAsNewCloudProject:c,onClose:u,onContinueQuickCustomization:d,gameScreenshotUrls:p,onScreenshotsClaimed:h,onLaunchPreview:a}):null}),showPreview:i.step.canPreview}}({project:t,gameAndBuildsManager:b,resourceManagementProps:n,onLaunchPreview:r,quickCustomizationState:C,onlineWebExporter:a,onSaveProject:o,isSavingProject:l,isRequiredToSaveAsNewCloudProject:u,onClose:i,onContinueQuickCustomization:j,gameScreenshotUrls:h,onScreenshotsClaimed:g,onWillInstallExtension:m,onExtensionInstalled:x}),k=y.title,S=y.content,P=y.showPreview,I=t.getName();return c.useEffect((function(){(0,ai.vI)({stepName:C.step.name,sourceGameId:p,projectName:I})}),[C.step.name,p,I]),c.useEffect((function(){v()}),[]),(0,f.jsx)(E.ZP,{open:!0,title:k,maxWidth:"md",fullHeight:!0,actions:C.step.nextLabel?[(0,f.jsx)(E.vF,{label:C.step.nextLabel,primary:!0,onClick:C.goToNextStep,disabled:C.isNavigationDisabled,fullWidth:!0},"next")]:[],secondaryActions:[C.canGoToPreviousStep?(0,f.jsx)(T.Z,{primary:!0,label:(0,f.jsx)(w.Trans,{id:"Back"}),onClick:C.goToPreviousStep,disabled:!C.canGoToPreviousStep||C.isNavigationDisabled,fullWidth:!0},"previous"):null],onRequestClose:d?i:void 0,flexBody:!0,actionsFullWidthOnMobile:!0,cannotBeDismissed:C.isNavigationDisabled,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(ft.Z,{children:(0,f.jsx)(_.ak,{noMargin:!0,expand:!0,children:S})},C.step.name),P&&(0,f.jsx)(sV,{onLaunchPreview:r})]})})},cV=function(){var e=c.useContext($n.ZP),t=c.useRef(null),n=e.authenticated,r=e.firebaseUser,i=e.getAuthorizationHeader,l=e.loginState,u=c.useState(null),d=(0,s.Z)(u,2),p=d[0],f=d[1],h=c.useState(null),g=(0,s.Z)(h,2),m=g[0],x=g[1],v=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("done"===l){e.next=2;break}return e.abrupt("return");case 2:if(n&&r){e.next=5;break}return f([]),e.abrupt("return");case 5:if(!t.current){e.next=7;break}return e.abrupt("return",t.current);case 7:return e.prev=7,x(null),t.current=(0,Cr.m7)(i,r.uid),e.next=12,t.current;case 12:o=e.sent,f(o),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),console.error("Error while loading user games.",e.t0),x(e.t0);case 20:return e.prev=20,t.current=null,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[7,16,20,23]])}))),[n,r,i,l]),b=c.useCallback((function(e){p&&f(p.map((function(t){return t.id===e.id?e:t})))}),[p]),C=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&r){e.next=2;break}return e.abrupt("return");case 2:if((n=p&&p.find((function(e){return e.id===t})))&&"draft"===n.savedStatus){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,(0,Cr.Bi)(i,r.uid,n.id,{savedStatus:"saved"});case 8:o=e.sent,b(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("Error while marking game as saved:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),[p,b,r,i]);return{games:p,gamesFetchingError:m,fetchGames:v,onGameUpdated:b,markGameAsSavedIfRelevant:C}},uV=function(e){var t=e.project,n=e.gamesList,i=c.useState([]),u=(0,s.Z)(i,2),d=u[0],p=u[1],f=c.useState({}),h=(0,s.Z)(f,2),g=h[0],m=h[1],x=c.useContext($n.ZP),v=x.getAuthorizationHeader,b=x.profile,C=c.useContext(D.ZP),j=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={screenshots:[]},e.prev=1,!t||!t.screenshots.length){e.next=11;break}return r=t.screenshots,e.next=6,(0,Cr.UC)({uploadType:"game-screenshot",files:r.map((function(e){return{contentType:"image/png"}}))});case 6:if(i=e.sent,(o=i.signedUrls)&&0!==o.length){e.next=10;break}throw new Error("No signed url returned");case 10:n.screenshots=r.map((function(e,t){var n=o[t];return n?{delayTimeInSeconds:e.delayTimeInSeconds,signedUrl:n.signedUrl,publicUrl:n.publicUrl}:null})).filter(Boolean);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Error caught while creating signed URLs for game resources. Skipping.",e.t0);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),[]),y=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(i){var s,c,u,d,f,h,g,x,C;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(s=t.getProjectUuid(),e.prev=3,c=i.screenshots){e.next=7;break}return e.abrupt("return");case 7:return u=c.map((function(e){return e.publicUrl})),e.next=10,Promise.all(u.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"HEAD"});case 2:if(e.sent.ok){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:if(d=e.sent,(f=d.filter(Boolean)).length){e.next=14;break}return e.abrupt("return");case 14:if(h=n.games?n.games.find((function(e){return e.id===s})):null,m((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Qt.Z)({},s,Date.now()))})),!h||!b){e.next=30;break}return e.prev=17,g=h.screenshotUrls||[],x=[].concat((0,r.Z)(g),(0,r.Z)(f)),e.next=22,(0,Cr.Bi)(v,b.id,h.id,{screenshotUrls:x});case 22:C=e.sent,n.onGameUpdated(C),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(17),console.error("Error while updating game with new screenshots:",e.t0);case 29:return e.abrupt("return");case 30:p((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(f.map((function(e){return{projectUuid:s,unverifiedPublicUrl:e}}))))})),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(3),console.error("Error while handling finished capture options:",e.t1);case 36:case"end":return e.stop()}}),e,null,[[3,33],[17,26]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,v,b]);return{createCaptureOptionsForPreview:j,onCaptureFinished:y,getGameUnverifiedScreenshotUrls:c.useCallback((function(e){return d.filter((function(t){return t.projectUuid===e})).map((function(e){return e.unverifiedPublicUrl}))}),[d]),onGameScreenshotsClaimed:c.useCallback((function(){t&&p((function(e){return e.filter((function(e){return e.projectUuid!==t.getProjectUuid()}))}))}),[t]),getHotReloadPreviewLaunchCaptureOptions:c.useCallback((function(e){return C.values.takeScreenshotOnPreview&&Date.now()>(g[e]||0)+18e4?{screenshots:[{delayTimeInSeconds:3e3}]}:void 0}),[C.values.takeScreenshotOnPreview,g])}},dV=["play","learn","build","create","games-dashboard","asset-store","store","education"],pV=function(e){var t=e.openHomePage,n=e.closeDialogs,r=c.useContext(fa.ZP),i=r.navigateToRoute,a=r.removeRouteArguments,o=r.routeArguments;return c.useEffect((function(){var e=o["initial-dialog"];e&&dV.includes(e)&&(n(),t())}),[o,t,n,a]),{navigateToRoute:i}},fV=n(74802),hV=n(80882),gV=F()("electron"),mV=null,xV=null,vV=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gV&&!(0,ja._F)()){e.next=2;break}return e.abrupt("return");case 2:if(!mV){e.next=4;break}return e.abrupt("return");case 4:if(!xV){e.next=6;break}return e.abrupt("return",xV);case 6:return xV=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,fE.x)({times:2},(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,import("https://resources.gdevelop.io/a/ggm-web.js");case 2:return e.abrupt("return",e.sent.default);case 3:case"end":return e.stop()}}),e)}))));case 3:if(!(t=e.sent)){e.next=8;break}return e.next=7,t.initialize(document.body);case 7:mV=t;case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error while loading GDevelop Games Monetization:",e.t0);case 13:return e.prev=13,xV=null,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))(),e.abrupt("return",xV);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bV=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=document.getElementById(fV.Ao))&&n.contentWindow){e.next=3;break}return e.abrupt("return");case 3:e.prev=3,n.contentWindow.postMessage({type:"setKeyboardOffset",value:t},"*"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(3),console.error("Error while sending keyboard offset to frame.",e.t0),e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t){return e.apply(this,arguments)}}(),CV=function(e){var t=e.fetchAndOpenNewProjectSetupDialogForExample,n=e.onOpenProfileDialog,r=c.useState(!1),i=(0,s.Z)(r,2),l=i[0],u=i[1],d=c.useState(!1),p=(0,s.Z)(d,2),h=p[0],g=p[1],m=c.useState(!1),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=c.useState(!1),j=(0,s.Z)(C,2),Z=j[0],k=j[1],w=c.useState(null),T=(0,s.Z)(w,2),S=T[0],P=T[1],I=c.useState(null),E=(0,s.Z)(I,2),M=E[0],L=E[1],A=c.useRef(null),O=c.useContext(zr.Z).openUserPublicProfile,R=(0,cg.T)({useCumulatedValue:!1}),F=c.useContext($n.ZP),D=F.onOpenLoginDialog,N=F.onOpenCreateAccountDialog,_=F.profile,B=c.useContext(fa.ZP),U=B.navigateToRoute,V=B.routeArguments,H=B.removeRouteArguments,z=c.useCallback((function(e){U("store",{"game-template":"product-".concat(e)})}),[U]),W=c.useCallback((function(e){U("store",{"asset-pack":"product-".concat(e)})}),[U]),G=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),Y=c.useCallback((function(){(l||v)&&(A.current&&(clearTimeout(A.current),A.current=null),g(!1),A.current=setTimeout((function(){u(!1),b(!1)}),2e3))}),[v,l]),q=c.useCallback((function(){A.current&&(clearTimeout(A.current),A.current=null),vV(),u(!0),g(!0),k(!1)}),[]),J=c.useCallback((function(e){if(v){var t=document.getElementById(fV.Ao);t&&t.contentWindow&&t.contentWindow.postMessage({id:"openGame",gameId:e},"*")}}),[v]);c.useEffect((function(){V["playable-game-id"]&&(L(V["playable-game-id"]),H(["playable-game-id"]))}),[V,H]);var X=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("https://gd.games"===t.origin||"http://localhost:4000"===t.origin){e.next=2;break}return e.abrupt("return");case 2:if("pageLoaded"===t.data.id&&(b(!0),r=t.data.gameId,L(r||null)),"openUserProfile"===t.data.id&&O({userId:t.data.userId,callbacks:{onGameOpen:function(){},onExampleOpen:function(){},onGameTemplateOpen:function(){},onAssetPackOpen:function(){}}}),"openLoginDialog"===t.data.id&&(_?n():D()),"openRegisterDialog"===t.data.id&&(_?n():N()),"openGameTemplate"===t.data.id&&z(t.data.productId),"openAssetPack"===t.data.id&&W(t.data.productId),"openExample"===t.data.id&&(t.data.exampleSlug&&G(t.data.exampleSlug),t.data.exampleShortHeader&&G(t.data.exampleShortHeader.slug)),"openGame"===t.data.id&&J(t.data.gameId),"sendGgmCommand"!==t.data.id){e.next=22;break}return e.prev=11,e.next=14,vV();case 14:if(!mV){e.next=17;break}return e.next=17,mV.sendCommand(t.data.command);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),console.error("Error while sending GGM command:",e.t0);case 22:if("openExternalUrl"!==t.data.id){e.next=27;break}if("string"===typeof t.data.url){e.next=26;break}return console.warn("Received an invalid URL to open from the games platform:",t.data),e.abrupt("return");case 26:y.ZP.openExternalURL(t.data.url);case 27:case"end":return e.stop()}}),e,null,[[11,19]])})));return function(t){return e.apply(this,arguments)}}(),[O,D,N,J,z,W,G,n,_]);c.useEffect((function(){return window.addEventListener("message",X),function(){window.removeEventListener("message",X)}}),[X]);var K=function(){var e=c.useContext($n.ZP),t=e.profile,n=e.getAuthorizationHeader,r=t?t.id:null,i=c.useState(null),l=(0,s.Z)(i,2),u=l[0],d=l[1],p=c.useState(null),f=(0,s.Z)(p,2),h=f[0],g=f[1],m=c.useState(0),x=(0,s.Z)(m,2),v=x[0],b=x[1],C=u!==r,j=Date.now()-v>18e5||C,y=c.useCallback((function(){g(null),b(0),d(null)}),[]);return c.useEffect((function(){C&&(y(),console.info("User has changed, cleared stored user custom token."))}),[C,y]),c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:if(r){e.next=5;break}return y(),e.abrupt("return");case 5:return e.prev=5,console.info("Generating a custom token for user ".concat(r,", for usage in the Games Platform frame...")),e.next=9,(0,fE.x)({times:2},(function(){return(0,xr.Nd)(n,r)}));case 9:t=e.sent,g(t),b(Date.now()),d(r),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error("Error while generating custom token. User will not be logged in the Games Platform frame.",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))()}),[j,r,n,y]),{userCustomToken:h}}(),Q=K.userCustomToken,$=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:if((t=document.getElementById(fV.Ao))&&t.contentWindow){e.next=6;break}return console.error("Iframe not found or not accessible."),e.abrupt("return");case 6:e.prev=6,Q?(console.info("Sending user custom token to Games Platform frame..."),t.contentWindow.postMessage({id:"connectUserWithCustomToken",token:Q},y.ZP.isDev()?"*":"https://gd.games")):(console.info("Notifying the Games Platform frame that the user is not connected (or just disconnected)."),t.contentWindow.postMessage({id:"disconnectUser"},"*")),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(6),console.error("Error while sending user custom token. User will not be logged in the Games Platform frame.",e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[6,10]])}))),[v,Q]);c.useEffect((function(){$()}),[$]),c.useEffect((function(){if(v){var e=R-hV.aD;bV(e)}}),[v,R]);var ee=(0,DM.i)(v);c.useEffect((function(){(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,LM.g)(12e3);case 4:if(!ee.current){e.next=6;break}return e.abrupt("return");case 6:k(!0),g(!1);case 8:case"end":return e.stop()}}),e)})))()}),[h,ee]);var te=c.useCallback((function(){return(0,f.jsx)(fV.ZP,{initialGameId:M,loaded:l,visible:h,iframePosition:S})}),[M,l,h,S]),ne=c.useCallback((function(e){S&&S.isMobile===e.isMobile&&S.top===e.top&&S.left===e.left&&S.width===e.width&&S.height===e.height||P(e)}),[P,S]);return c.useMemo((function(){return{startTimeoutToUnloadIframe:Y,loadIframeOrRemoveTimeout:q,iframeLoaded:v,iframeVisible:h,iframeErrored:Z,updateIframePosition:ne,renderGamesPlatformFrame:te}}),[Y,q,v,h,Z,ne,te])},jV="https://gdevelop.io/download",yV=function(e){var t=e.erroredExtensionLoadingResults,n=e.genericError,r=e.onClose;return(0,f.jsx)(E.ZP,{title:(0,f.jsx)(w.Trans,{id:"GDevelop's installation is corrupted and can't be used"}),actions:[y.ZP.isDev()?(0,f.jsx)(T.Z,{label:(0,f.jsx)(w.Trans,{id:"Continue anyway"}),primary:!0,onClick:r},"retry"):null],cannotBeDismissed:!0,open:!0,children:(0,f.jsxs)(_.ak,{noMargin:!0,expand:!0,children:[(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"There were errors when loading extensions. You cannot continue using GDevelop."})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"If you are in a browser, ensure you close all GDevelop tabs or restart the browser."})}),(0,f.jsx)(N.Z,{children:(0,f.jsx)(w.Trans,{id:"If you are on desktop, please re-install it by downloading the latest version from <0>the website</0>",components:[(0,f.jsx)(pe.Z,{href:jV,onClick:function(){return y.ZP.openExternalURL(jV)}})]})}),(0,f.jsxs)(Rv.iA,{children:[(0,f.jsx)(Rv.xD,{children:(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.bY,{style:{width:"25%"},children:(0,f.jsx)(w.Trans,{id:"Extension name"})}),(0,f.jsx)(Rv.bY,{style:{width:"35%"},children:(0,f.jsx)(w.Trans,{id:"Message"})}),(0,f.jsx)(Rv.bY,{style:{width:"40%"},children:(0,f.jsx)(w.Trans,{id:"Raw error"})})]})}),(0,f.jsxs)(Rv.RM,{children:[t.map((function(e){var t=e.extensionModulePath,n=e.result,r=n.message,i=n.rawError;return(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.Nn,{style:{width:"25%",wordBreak:"break-word"},children:t}),(0,f.jsx)(Rv.Nn,{style:{width:"35%",wordBreak:"break-word"},children:r}),(0,f.jsx)(Rv.Nn,{style:{width:"40%",wordBreak:"break-word"},children:i&&(0,f.jsxs)(N.Z,{style:{whiteSpace:"pre-wrap"},children:[i.toString(),(0,f.jsx)("br",{}),i.stack]})})]},t)})),n?(0,f.jsxs)(Rv.SC,{children:[(0,f.jsx)(Rv.Nn,{style:{width:"25%"},children:"-"}),(0,f.jsx)(Rv.Nn,{style:{width:"35%",wordBreak:"break-word"},children:n.toString()}),(0,f.jsx)(Rv.Nn,{style:{width:"40%"},children:"-"})]}):null]})]})]})})},ZV="PanesContainer_container__jq9eu",kV="PanesContainer_pane__zNaSl",wV="PanesContainer_leftPane__vOd-H",TV="PanesContainer_rightPane__ZSKHY",SV="PanesContainer_hidden__0zqJM",PV="PanesContainer_rightResizer__IQ2pj",IV="PanesContainer_leftResizer__+XYhw",EV="PanesContainer_drawer__poMEo",MV="PanesContainer_closedDrawer__BVEiM",LV="PanesContainer_centerPane__3BUWR",AV="PanesContainer_resizer__5wNPS",OV={pointerEventsNone:{pointerEvents:"none"},pointerEventsAll:{pointerEvents:"all"}},RV=function(e){var t=e.enabled,n=e.paneRef,r=e.direction,i=e.onClose;c.useEffect((function(){var e=n.current;if(e&&t){var a=0,o=0,s=!1,l=function(t){a=t.touches[0].clientX,o=t.touches[0].clientX,s=!0,e.style.transition="none"},c=function(t){if(s){var n=(o=t.touches[0].clientX)-a,i=Math.abs(n)>30?"left"===r?Math.max(0,n):Math.min(0,n):0;e.style.transform="translateX(".concat(i,"px)")}},u=function(){if(s){s=!1;var t=o-a,n="left"===r?t>80:t<-80;if(e.style.transition="transform 0.".concat(200,"s ease-out"),n){var l="left"===r?"100vw":"-100vw";e.style.transform="translateX(".concat(l,")"),setTimeout((function(){i(),e.style.transform=""}),250)}else e.style.transform="translateX(0)",setTimeout((function(){e.style.transform=""}),250)}};return e.addEventListener("touchstart",l),e.addEventListener("touchmove",c),e.addEventListener("touchend",u),function(){e.removeEventListener("touchstart",l),e.removeEventListener("touchmove",c),e.removeEventListener("touchend",u),e.style.transform=""}}}),[t,n,r,i])},FV=function(e){var t,n,r,i,a,o=e.renderPane,u=e.hasEditorsInLeftPane,d=e.hasEditorsInRightPane,p=(0,be.UQ)().isMobile,h=(0,gt.Z)(),g=(0,sr.N)(h,200),m=c.useRef(null),x=c.useRef(null),v=c.useRef(null),b=c.useRef(null),C=c.useRef(null),j=c.useRef(null),y=p,Z=c.useState({left:"open",right:"open"}),k=(0,s.Z)(Z,2),w=k[0],T=k[1],S=c.useCallback((function(e,t){T((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,Qt.Z)({},e,t))}))}),[]);c.useEffect((function(){T(y?{left:"closed",right:"closed"}:{left:"open",right:"open"})}),[y]),c.useEffect((function(){d&&S("right","open")}),[S,d]),c.useEffect((function(){u&&S("left","open")}),[S,u]);var P=c.useCallback((function(){return S("left","closed")}),[S]);RV({enabled:y,paneRef:v,direction:"left",onClose:P});var I=c.useCallback((function(){return S("right","closed")}),[S]);RV({enabled:y,paneRef:C,direction:"left",onClose:I});var E=c.useRef(null);c.useEffect((function(){var e=function(e){var t=v.current,n=C.current,r=E.current;if(r&&m.current&&t&&n){var i=m.current.getBoundingClientRect(),a="left"===r.paneIdentifier?r.startWidth+(e.clientX-r.startClientX):r.startWidth-(e.clientX-r.startClientX),o=i.width-300,s=Math.max(300,Math.min(o,a));"left"===r.paneIdentifier?t.style.flexBasis="".concat(s,"px"):n.style.flexBasis="".concat(s,"px"),g()}},t=function t(){E.current=null,h(),document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",t)},n=function(n){n.preventDefault();var r=v.current;r&&(E.current={paneIdentifier:"left",startClientX:n.clientX,startWidth:r.getBoundingClientRect().width},h(),document.addEventListener("pointermove",e),document.addEventListener("pointerup",t))},r=function(n){n.preventDefault();var r=C.current;r&&(E.current={paneIdentifier:"right",startClientX:n.clientX,startWidth:r.getBoundingClientRect().width},h(),document.addEventListener("pointermove",e),document.addEventListener("pointerup",t))},i=x.current;i&&i.addEventListener("pointerdown",n);var a=j.current;return a&&a.addEventListener("pointerdown",r),function(){i&&i.removeEventListener("pointerdown",n),a&&a.removeEventListener("pointerdown",r)}}),[g,h]);var M=c.useState(!1),L=(0,s.Z)(M,2),A=L[0],O=L[1],R=c.useState(!1),F=(0,s.Z)(R,2),D=F[0],N=F[1],_=c.useState(!1),B=(0,s.Z)(_,2),U=B[0],V=B[1],H=null!==E.current;return(0,f.jsxs)("div",{ref:m,className:ZV,role:"group","aria-label":"Resizable split pane",style:H?OV.pointerEventsAll:void 0,children:[(0,f.jsx)("div",{ref:v,className:en()((t={},(0,Qt.Z)(t,kV,!0),(0,Qt.Z)(t,wV,!0),(0,Qt.Z)(t,EV,y),(0,Qt.Z)(t,MV,y&&"closed"===w.left),(0,Qt.Z)(t,SV,!u),t)),style:A&&!H?OV.pointerEventsNone:void 0,id:"pane-left",children:o({paneIdentifier:"left",isLeftMostPane:!0,isRightMostPane:!1,isDrawer:y,areSidePanesDrawers:y,onSetPaneDrawerState:S,onSetPointerEventsNone:O})}),(0,f.jsx)("div",{className:en()((n={},(0,Qt.Z)(n,AV,!0),(0,Qt.Z)(n,IV,!0),(0,Qt.Z)(n,SV,!u||y),n)),role:"separator","aria-orientation":"vertical","aria-controls":"pane-left pane-center",tabIndex:0,ref:x}),(0,f.jsx)("div",{ref:b,className:en()((r={},(0,Qt.Z)(r,kV,!0),(0,Qt.Z)(r,LV,!0),r)),style:D&&!H?OV.pointerEventsNone:void 0,id:"pane-center",children:o({paneIdentifier:"center",isLeftMostPane:y||!u,isRightMostPane:y||!d,isDrawer:!1,areSidePanesDrawers:y,onSetPaneDrawerState:S,onSetPointerEventsNone:N})}),(0,f.jsx)("div",{className:en()((i={},(0,Qt.Z)(i,AV,!0),(0,Qt.Z)(i,PV,!0),(0,Qt.Z)(i,SV,!d||y),i)),role:"separator","aria-orientation":"vertical","aria-controls":"pane-center pane-right",tabIndex:0,ref:j}),(0,f.jsx)("div",{ref:C,className:en()((a={},(0,Qt.Z)(a,kV,!0),(0,Qt.Z)(a,TV,!0),(0,Qt.Z)(a,EV,y),(0,Qt.Z)(a,MV,y&&"closed"===w.right),(0,Qt.Z)(a,SV,!d),a)),style:U&&!H?OV.pointerEventsNone:void 0,id:"pane-right",children:o({paneIdentifier:"right",isLeftMostPane:!1,isRightMostPane:!0,isDrawer:y,areSidePanesDrawers:y,onSetPaneDrawerState:S,onSetPointerEventsNone:V})})]})},DV=function(e){var t=e.onClose,n=c.useContext(fa.ZP),r=n.routeArguments,i=n.removeRouteArguments,a=n.navigateToRoute,o=c.useState(null),l=(0,s.Z)(o,2),u=l[0],d=l[1],p=JN(),h=p.courses,g=p.getCourseCompletion,m=c.useContext(pI.bQ).bundleListingDatas;return c.useEffect((function(){if(!u){var e=r["bundle-category"];if(e&&m){var n=null;if(e&&(n=(0,MO.Xk)({bundleListingDatas:m,category:e})),n){var i=n.prices.find((function(e){return"default"===e.usageType}));(0,ai.VW)({bundleName:n.name,bundleId:n.id,source:"web-link",priceValue:i&&i.value,priceCurrency:i&&i.currency}),d(n)}else t()}}}),[u,m,r,t,i]),(0,f.jsx)(E.ZP,{title:null,open:!0,fullscreen:"always-even-on-desktop",noPadding:!0,cannotBeDismissed:!0,flexColumnBody:!0,children:u?(0,f.jsx)(EO.Z,{bundleListingData:u,onAssetPackOpen:function(){},onGameTemplateOpen:function(){},onBundleOpen:function(){},onCourseOpen:function(){},courses:h,getCourseCompletion:g,noActions:!0,fastCheckout:!0,onCloseAfterPurchaseDone:function(){i(["bundle-category"]),a("learn",{bundle:u.id}),t()}}):(0,f.jsx)(Oe.Z,{})})},NV=function(e){return(0,f.jsx)(ye.ZP,{componentTitle:(0,f.jsx)(w.Trans,{id:"Standalone dialog"}),scope:"standalone",children:(0,f.jsx)(DV,(0,l.Z)({},e))})},_V=n(50327),BV=n.g.GD_STARTUP_TIMES||[],UV=n.g.gd,VV={debugger:function(e){return(0,f.jsx)(gx,(0,l.Z)({},e))},"layout events":function(e){return(0,f.jsx)(xm,(0,l.Z)({},e))},"external events":function(e){return(0,f.jsx)(dC,(0,l.Z)({},e))},layout:function(e){return(0,f.jsx)(FT,(0,l.Z)({},e))},"external layout":function(e){return(0,f.jsx)(uT,(0,l.Z)({},e))},"events functions extension":function(e){return(0,f.jsx)(rC,(0,l.Z)({},e))},"custom object":function(e){return(0,f.jsx)(_T,(0,l.Z)({},e))},"start page":function(e){return(0,f.jsx)($N,{ref:e.ref,project:e.project,fileMetadata:e.fileMetadata,isActive:e.isActive,projectItemName:e.projectItemName,setToolbar:e.setToolbar,setGamesPlatformFrameShown:e.setGamesPlatformFrameShown,canOpen:e.canOpen,onChooseProject:e.onChooseProject,onOpenRecentFile:e.onOpenRecentFile,onSelectExampleShortHeader:e.onSelectExampleShortHeader,onSelectPrivateGameTemplateListingData:e.onSelectPrivateGameTemplateListingData,onOpenPrivateGameTemplateListingData:e.onOpenPrivateGameTemplateListingData,onOpenNewProjectSetupDialog:e.onOpenNewProjectSetupDialog,onOpenVersionHistory:e.onOpenVersionHistory,onOpenTemplateFromTutorial:e.onOpenTemplateFromTutorial,onOpenTemplateFromCourseChapter:e.onOpenTemplateFromCourseChapter,onOpenLanguageDialog:e.onOpenLanguageDialog,onOpenProfile:e.onOpenProfile,onCreateProjectFromExample:e.onCreateProjectFromExample,onCreateEmptyProject:e.onCreateEmptyProject,askToCloseProject:e.askToCloseProject,closeProject:e.closeProject,selectInAppTutorial:e.selectInAppTutorial,onOpenPreferences:e.onOpenPreferences,onOpenAbout:e.onOpenAbout,onOpenAskAi:e.onOpenAskAi,onCloseAskAi:e.onCloseAskAi,onOpenLayout:e.onOpenLayout,storageProviders:e.extraEditorProps&&e.extraEditorProps.storageProviders||[],storageProvider:e.storageProvider,onSave:e.onSave,canSave:e.canSave,resourceManagementProps:e.resourceManagementProps,gamesList:e.gamesList,gamesPlatformFrameTools:e.gamesPlatformFrameTools,onWillInstallExtension:e.onWillInstallExtension,onExtensionInstalled:e.onExtensionInstalled,gameEditorMode:e.gameEditorMode})},resources:function(e){return(0,f.jsx)(RT,(0,l.Z)({},e))},"ask-ai":function(e){return(0,f.jsx)(w.I18n,{children:function(t){var n=t.i18n;return(0,f.jsx)(c_,{ref:e.ref,i18n:n,project:e.project,resourceManagementProps:e.resourceManagementProps,fileMetadata:e.fileMetadata,storageProvider:e.storageProvider,setToolbar:e.setToolbar,isActive:e.isActive,onCreateProjectFromExample:e.onCreateProjectFromExample,onCreateEmptyProject:e.onCreateEmptyProject,onOpenLayout:e.onOpenLayout,onSceneEventsModifiedOutsideEditor:e.onSceneEventsModifiedOutsideEditor,onInstancesModifiedOutsideEditor:e.onInstancesModifiedOutsideEditor,onObjectsModifiedOutsideEditor:e.onObjectsModifiedOutsideEditor,onObjectGroupsModifiedOutsideEditor:e.onObjectGroupsModifiedOutsideEditor,onWillInstallExtension:e.onWillInstallExtension,onExtensionInstalled:e.onExtensionInstalled,onOpenAskAi:e.onOpenAskAi,gameEditorMode:e.gameEditorMode,continueProcessingFunctionCallsOnMount:!!e.extraEditorProps&&e.extraEditorProps.continueProcessingFunctionCallsOnMount})}})}},HV=3e3,zV=function(e,t,n){var r=n.storageProviderName,i=t.filter((function(e){return e.internalName===r}))[0];if(i)return i;(0,bi.gR)({message:e._({id:"Unable to open the project because this provider is unknown: {storageProviderName}. Try to open the project again from another location.",values:{storageProviderName:r}}),rawError:new Error("Can't find storage provider called \"".concat(r,'"')),errorId:"unknown-storage-provider"})},WV=function(e,t){return e.current&&t.ptr===e.current.ptr},GV=function(e,t){return(0,l.Z)((0,l.Z)({},e),{},{gameId:t.getProjectUuid(),name:t.getName()})},YV={previewLayoutName:null,previewExternalLayoutName:null,isPreviewOverriden:!1,overridenPreviewLayoutName:null,overridenPreviewExternalLayoutName:null},qV=function(e){var t=function(e){var t=c.useState(e),n=(0,s.Z)(t,2),r=n[0],i=n[1],a=c.useRef(null),o=c.useCallback((function(e){return new Promise((function(t){a.current=t,i(e)}))}),[i]);return c.useEffect((function(){null!==a.current&&(a.current(r),a.current=null)}),[r]),[r,o]}({currentProject:null,currentFileMetadata:null,editorTabs:{panes:{left:{editors:[],currentTab:0},center:{editors:[],currentTab:0},right:{editors:[],currentTab:0}}},snackMessage:"",snackMessageOpen:!1,snackDuration:HV,updateStatus:{message:"",status:"unknown"},openFromStorageProviderDialogOpen:!1,saveToStorageProviderDialogOpen:!1,gdjsDevelopmentWatcherEnabled:!1}),n=(0,s.Z)(t,2),p=n[0],j=n[1],w=c.useContext($n.ZP),T=c.useState(null),S=(0,s.Z)(T,2),P=S[0],I=S[1],E=c.useState(null),M=(0,s.Z)(E,2),L=M[0],A=M[1],O=c.useState(!1),R=(0,s.Z)(O,2),F=R[0],N=R[1],_=c.useState(null),B=(0,s.Z)(_,2),U=B[0],H=B[1],z=c.useState(null),W=(0,s.Z)(z,2),G=W[0],Y=W[1],q=c.useRef(null),J=(0,gt.Z)(),X=c.useState(!1),K=(0,s.Z)(X,2),Q=K[0],$=K[1],ee=c.useState(!1),te=(0,s.Z)(ee,2),ne=te[0],re=te[1],ie=c.useState(!1),ae=(0,s.Z)(ie,2),oe=ae[0],se=ae[1],le=c.useState(!1),ce=(0,s.Z)(le,2),ue=ce[0],de=ce[1],pe=c.useState(!1),fe=(0,s.Z)(pe,2),he=fe[0],ge=fe[1],me=c.useState(!1),xe=(0,s.Z)(me,2),ve=xe[0],be=xe[1],Ce=c.useState(!1),je=(0,s.Z)(Ce,2),ye=je[0],Ze=je[1],ke=c.useState(!1),Te=(0,s.Z)(ke,2),Se=Te[0],Pe=Te[1],Ie=c.useState(!1),Ee=(0,s.Z)(Ie,2),Me=Ee[0],Le=Ee[1],Ae=c.useState(!1),Oe=(0,s.Z)(Ae,2),Re=Oe[0],Fe=Oe[1],De=c.useState(!1),Ne=(0,s.Z)(De,2),_e=Ne[0],Be=Ne[1],Ue=c.useState(null),Ve=(0,s.Z)(Ue,2),ze=Ve[0],We=Ve[1],Ge=c.useState(!1),qe=(0,s.Z)(Ge,2),Je=qe[0],Xe=qe[1],Ke=(0,Ye.Z)(),Qe=Ke.showConfirmation,$e=Ke.showAlert,et=Ke.showDeleteConfirmation,tt=c.useContext(D.ZP),nt=tt.setHasProjectOpened,rt=function(){var e=(0,gt.Z)(),t=c.useRef(null);return{previewLoadingRef:t,setPreviewLoading:c.useCallback((function(n){t.current=n,e()}),[e])}}(),it=rt.previewLoadingRef,at=rt.setPreviewLoading,ot=c.useState(YV),st=(0,s.Z)(ot,2),lt=st[0],ct=st[1],ut=c.useRef(null),dt=c.useRef(null),pt=c.useState(null),ft=(0,s.Z)(pt,2),ht=ft[0],mt=ft[1],vt=c.useContext(di.Z),bt=q.current&&q.current.getPreviewDebuggerServer(),Ct=function(e){var t=c.useState({}),n=(0,s.Z)(t,2),r=n[0],i=n[1],a=c.useState([]),o=(0,s.Z)(a,2),u=o[0],d=o[1],p=c.useState([]),f=(0,s.Z)(p,2),h=f[0],g=f[1],m=c.useState(null),x=(0,s.Z)(m,2),v=x[0],b=x[1];c.useEffect((function(){if(e){var t=e.registerCallbacks({onErrorReceived:function(e){},onConnectionClosed:function(e){var t=e.id;e.debuggerIds,i((function(e){var n=e[t],r=(0,go.Z)(e,[t].map(K_.Z));return console.info('Connection closed with preview with id "'.concat(t,'". Last status was:'),n),r}))},onConnectionOpened:function(t){var n=t.id;t.debuggerIds,e.sendMessage(n,{command:"getStatus"})},onConnectionErrored:function(e){e.id},onServerStateChanged:function(){},onHandleParsedMessage:function(e){var t=e.id,n=e.parsedMessage;"hotReloader.logs"===n.command?n.payload.isInGameEdition?g(n.payload.logs):d(n.payload.logs):"status"===n.command?i((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Qt.Z)({},t,{isPaused:!!n.payload.isPaused,isInGameEdition:!!n.payload.isInGameEdition,sceneName:n.payload.sceneName}))})):"game.crashed"===n.command&&n.payload.isInGameEdition&&b((function(e){return e||n.payload.exception}))}});return function(){t()}}i({})}),[e]);var C=c.useCallback((function(){return d([])}),[d]),j=c.useCallback((function(){return g([])}),[g]),y=c.useCallback((function(){return b(null)}),[b]),Z=c.useCallback((function(){e&&(console.info("Hard reloading all previews..."),e.getExistingDebuggerIds().forEach((function(t){e.sendMessage(t,{command:"hardReload"})})))}),[e]);return{hasNonEditionPreviewsRunning:Object.keys(r).some((function(e){return!r[e].isInGameEdition})),gameHotReloadLogs:u,clearGameHotReloadLogs:C,editorHotReloadLogs:h,clearEditorHotReloadLogs:j,editorUncaughtError:v,clearEditorUncaughtError:y,hardReloadAllPreviews:Z}}(bt),jt=Ct.hasNonEditionPreviewsRunning,yt=Ct.gameHotReloadLogs,Zt=Ct.editorHotReloadLogs,kt=Ct.editorUncaughtError,wt=Ct.clearGameHotReloadLogs,Tt=Ct.clearEditorHotReloadLogs,St=Ct.clearEditorUncaughtError,Pt=Ct.hardReloadAllPreviews,It=function(){var e=c.useRef(!1),t=c.useRef(null),n=c.useState(!1),r=(0,s.Z)(n,2),i=r[0],a=r[1];return{ensureInteractionHappened:function(n){return new Promise((function(r){!e.current&&n.doesInitialOpenRequireUserInteraction?(console.info("Displaying confirmation dialog to ensure an interaction is made before continuing."),t.current=r,a(!0)):r(!0)}))},renderOpenConfirmDialog:function(){if(!i)return null;var n=function(n){e.current=!0,a(!1);var r=t.current;r&&(r(n),t.current=null)};return(0,f.jsx)(S_,{onClose:function(){return n(!1)},onConfirm:function(){return n(!0)}})}}}(),Et=It.ensureInteractionHappened,Mt=It.renderOpenConfirmDialog,Lt=(0,lB.tj)(),At=Lt.openLeaderboardReplacerDialogIfNeeded,Ot=Lt.renderLeaderboardReplacerDialog,Rt=(0,LU.h)().configureMultiplayerLobbiesIfNeeded,Ft=c.useContext(di.Z),Dt=c.useContext(Z.Z),Nt=Dt.hasUnsavedChanges,_t=Dt.sealUnsavedChanges,Bt=Dt.triggerUnsavedChanges,Ut=c.useContext(gi.Z),Vt=Ut.currentlyRunningInAppTutorial,Ht=Ut.getInAppTutorialShortHeader,zt=Ut.endTutorial,Wt=Ut.startTutorial,Gt=Ut.startStepIndex,Yt=Ut.startProjectData,qt=c.useState(null),Jt=(0,s.Z)(qt,2),Xt=Jt[0],Kt=Jt[1],$t=$B({editorTabs:p.editorTabs}),en=$t.InAppTutorialOrchestrator,tn=$t.orchestratorProps,nn=c.useState(!1),rn=(0,s.Z)(nn,2),an=rn[0],on=rn[1],sn=c.useState(!1),ln=(0,s.Z)(sn,2),cn=ln[0],un=ln[1],dn=c.useState(null),pn=(0,s.Z)(dn,2),fn=pn[0],hn=pn[1],gn=c.useState(null),mn=(0,s.Z)(gn,2),xn=mn[0],vn=mn[1],bn=c.useState(null),Cn=(0,s.Z)(bn,2),jn=Cn[0],yn=Cn[1],Zn=c.useState("instances-editor"),kn=(0,s.Z)(Zn,2),wn=kn[0],Tn=kn[1],Sn=p.currentProject,Pn=p.currentFileMetadata,In=p.updateStatus,En=e.renderShareDialog,Mn=e.resourceSources,Ln=e.renderPreviewLauncher,An=e.resourceExternalEditors,On=e.resourceMover,Rn=e.resourceFetcher,Fn=e.getStorageProviderOperations,Dn=e.getStorageProviderResourceOperations,Nn=e.getStorageProvider,_n=e.initialFileMetadataToOpen,Un=e.initialExampleSlugToOpen,Vn=e.i18n,Hn=e.renderGDJSDevelopmentWatcher,Wn=e.renderMainMenu,Gn=e.quickPublishOnlineWebExporter,Yn=function(e){var t=e.resourceMover,n=(0,cj.s)({onDoProcess:c.useCallback((function(e,n){return t.moveAllProjectResources((0,l.Z)((0,l.Z)({},e),{},{onProgress:n}))}),[t])}),r=n.ensureProcessIsDone,i=n.renderProcessDialog;return c.useMemo((function(){return{ensureResourcesAreMoved:r,renderResourceMoverDialog:i}}),[r,i])}({resourceMover:On}),qn=Yn.ensureResourcesAreMoved,Jn=Yn.renderResourceMoverDialog,Xn=function(e){var t=e.resourceFetcher,n=(0,cj.s)({onDoProcess:c.useCallback((function(e,n){var r=e(),i=r.project,a=r.fileMetadata,o=r.storageProvider,s=r.storageProviderOperations,l=r.authenticatedUser;return i&&a?t.fetchAllProjectResources({project:i,fileMetadata:a,storageProvider:o,storageProviderOperations:s,authenticatedUser:l,onProgress:n}):Promise.resolve({erroredResources:[]})}),[t])}),r=n.ensureProcessIsDone,i=n.renderProcessDialog;return c.useMemo((function(){return{ensureResourcesAreFetched:r,renderResourceFetcherDialog:i}}),[r,i])}({resourceFetcher:Rn}),Kn=Xn.ensureResourcesAreFetched,Qn=Xn.renderResourceFetcherDialog;sm({getStorageProvider:Nn,fileMetadata:Pn,isProjectSplitInMultipleFiles:!!Sn&&Sn.isFolderProject()});var er=cV(),tr=uV({project:Sn,gamesList:er}),nr=tr.createCaptureOptionsForPreview,rr=tr.onCaptureFinished,ir=tr.onGameScreenshotsClaimed,ar=tr.getGameUnverifiedScreenshotUrls,or=tr.getHotReloadPreviewLaunchCaptureOptions,sr=function(e){var t=e.project,n=e.gamesList,r=c.useContext($n.ZP),i=r.profile,s=r.getAuthorizationHeader,l=c.useContext(D.ZP).values,u=c.useRef({}),d=c.useRef(null),p=t?t.getProjectUuid():null,f=c.useMemo((function(){return n.games&&p?n.games.find((function(e){return e.id===p})):null}),[n.games,p]),h=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&f&&l.fetchPlayerTokenForPreviewAutomatically){e.next=2;break}return e.abrupt("return",null);case 2:if(!(t=u.current[f.id])){e.next=5;break}return e.abrupt("return",{playerId:i.id,playerUsername:i.username||"Player",playerToken:t});case 5:if(!d.current){e.next=7;break}return e.abrupt("return",d.current);case 7:return n=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,fE.x)({times:2},(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,TR.fJ)({getAuthorizationHeader:s,userId:i.id,gameId:f.id});case 2:return t=e.sent,u.current[f.id]=t,e.abrupt("return",{playerId:i.id,playerUsername:i.username||"Player",playerToken:t});case 5:case"end":return e.stop()}}),e)}))));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error("Error while fetching player token for preview:",e.t0),e.abrupt("return",null);case 9:return e.prev=9,d.current=null,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,5,9,12]])})));return function(){return e.apply(this,arguments)}}(),d.current=n(),e.abrupt("return",d.current);case 10:case"end":return e.stop()}}),e)}))),[f,i,s,l.fetchPlayerTokenForPreviewAutomatically]);return c.useEffect((function(){h()}),[h]),c.useEffect((function(){i||(u.current={})}),[i]),{getAuthenticatedPlayerForPreview:h}}({project:Sn,gamesList:er}),lr=sr.getAuthenticatedPlayerForPreview,cr=function(){var e=c.useState(null),t=(0,s.Z)(e,2),n=t[0],r=t[1],i=c.useState(null),a=(0,s.Z)(i,2),o=a[0],l=a[1],u=c.useState(!1),d=(0,s.Z)(u,2),p=d[0],h=d[1],g=c.useCallback((function(e){var t=e.results.filter((function(e){return e.result.error}));r(t);var n=e.expectedNumberOfJSExtensionModulesLoaded!==e.results.length;l(n?new Error("Some extensions could not be loaded. Please check the console for more details."):null),h(!1)}),[]),m=c.useMemo((function(){return!p&&(!!n&&n.length>0||!!o)}),[p,n,o]);c.useEffect((function(){if(m){var e="Extensions loaded with errors: \n";o&&(e+=o.toString()),n&&(e+=n.map((function(e){var t=e.extensionModulePath,n=e.result;return"".concat(t,": ").concat(n.message)})).join("\n")),(0,ai.pl)(e,"error-boundary_extension-loader",null,"extension-loaded-with-errors")}}),[m,o,n]);var x=c.useCallback((function(){return p||!n||!n.length&&!o?null:(0,f.jsx)(yV,{erroredExtensionLoadingResults:n,onClose:function(){h(!0)},genericError:o})}),[p,n,o]);return c.useMemo((function(){return{setExtensionLoadingResults:g,hasExtensionLoadErrors:!p&&(!!n&&n.length>0||!!o),renderExtensionLoadErrorDialog:x}}),[n,x,g,o,p])}(),ur=cr.setExtensionLoadingResults,dr=cr.hasExtensionLoadErrors,pr=cr.renderExtensionLoadErrorDialog,fr=(0,DM.i)(Sn),hr=(0,DM.i)(Pn),gr=c.useCallback((function(t){var n=t.kind,r=t.name,i=t.dontFocusTab,a=t.project,o=t.paneIdentifier,s=t.continueProcessingFunctionCallsOnMount,l="resources"===n?Vn._({id:"Resources"}):"ask-ai"===n?Vn._({id:"Ask AI"}):"start page"===n?void 0:"debugger"===n?Vn._({id:"Debugger"}):"layout events"===n?r+" ".concat(Vn._({id:"(Events)"})):"custom object"===n?r.split("::")[2]||r.split("::")[1]+" ".concat(Vn._({id:"(Object)"})):r,c="layout"===n?{data:{scene:r,type:"layout"}}:"layout events"===n?{data:{scene:r,type:"layout-events"}}:void 0,u=["layout","layout events","external events","external layout","events functions extension","custom object"].includes(n)?"".concat(n," ").concat(r):n,p="";if("events functions extension"===n||"custom object"===n){var j=r.split("::")[0];if(a&&a.hasEventsFunctionsExtensionNamed(j)){var y=a.getEventsFunctionsExtension(j);p=y.getIconUrl()}}var Z="start page"===n?(0,f.jsx)(d.Z,{titleAccess:"Home"}):"debugger"===n?(0,f.jsx)(h,{}):"resources"===n?(0,f.jsx)(g,{}):"layout"===n?(0,f.jsx)(m,{}):"layout events"===n?(0,f.jsx)(x,{}):"external events"===n?(0,f.jsx)(v,{}):"external layout"===n?(0,f.jsx)(b,{}):"events functions extension"===n||"custom object"===n?(0,f.jsx)(C,{}):"ask-ai"===n?(0,f.jsx)(Ts,{size:16}):null,k="start page"!==n,w="start page"===n?{storageProviders:e.storageProviders}:"ask-ai"===n?{continueProcessingFunctionCallsOnMount:s}:void 0;return{icon:Z,renderCustomIcon:p?function(e){return(0,f.jsx)(nc.Z,{iconSize:20,src:p,brightness:e})}:null,closable:k,label:l,projectItemName:r,tabOptions:c,kind:n,renderEditorContainer:VV[n],extraEditorProps:w,key:u,dontFocusTab:i,paneIdentifier:o||"center"}}),[Vn,e.storageProviders]),mr=c.useCallback((function(e){j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{editorTabs:e})}))}),[j]),xr=cU({currentProjectId:p.currentProject?p.currentProject.getProjectUuid():null,editorTabs:p.editorTabs,setEditorTabs:mr,getEditorOpeningOptions:gr}),vr=xr.hasAPreviousSaveForEditorTabsState,br=xr.openEditorTabsFromPersistedState,Cr=c.useCallback((function(){j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{snackMessageOpen:!1,snackDuration:HV})}))}),[j]),jr=c.useCallback((function(e,t){j((function(n){return(0,l.Z)((0,l.Z)({},n),{},{snackMessage:e,snackMessageOpen:!0,snackDuration:void 0!==t?t:HV})}))}),[j]),yr=c.useCallback((function(e,t){Cr(),setTimeout((function(){return jr(e,t)}),200)}),[Cr,jr]),Zr=c.useCallback((function(e){XT(p.editorTabs),We(e||null),Be(!0)}),[p.editorTabs]),kr=c.useCallback((function(){Be(!1),We(null)}),[Be,We]),wr=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Rr(_n);case 4:(t=e.sent)&&ua({currentProject:t.currentProject,editorTabs:t.editorTabs});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tr=function(){console.info("Language changed, reloading extensions..."),UV.MeasurementUnit.applyTranslation(),UV.JsPlatform.get().reloadBuiltinExtensions(),Ft.reloadProjectEventsFunctionsExtensions(Sn),Pr().catch((function(){}))},Pr=function(){var t=e.extensionsLoader,n=e.i18n;return t?t.loadAllExtensions((0,f_.L)(n)).then((function(e){var t=e.expectedNumberOfJSExtensionModulesLoaded,n=e.results,r=n.filter((function(e){return!e.result.error}));console.info("Loaded ".concat(r.length,"/").concat(t," JS extensions.")),ur({expectedNumberOfJSExtensionModulesLoaded:t,results:n})})):(console.info("No extensions loader specified, skipping extensions loading."),Promise.reject(new Error("No extension loader specified.")))};nB(Sn);var Ir=c.useCallback((function(e){var t=e||{},n=t.aiRequestId,r=t.paneIdentifier,i=t.continueProcessingFunctionCallsOnMount,a=r||(Sn?"right":"center");j((function(e){var t=sS(e.editorTabs),n=e.editorTabs;return t&&t.paneIdentifier!==a&&(n=zT(n,t.editorTab),n=BT(n,gr({kind:"ask-ai",name:"",paneIdentifier:a,continueProcessingFunctionCallsOnMount:i}))),n=BT(n,gr({kind:"ask-ai",name:"",paneIdentifier:a,continueProcessingFunctionCallsOnMount:i})),(0,l.Z)((0,l.Z)({},e),{},{editorTabs:n})})).then((function(e){var t=void 0===n?void 0:{aiRequestId:n},r=sS(e.editorTabs);r?r.askAiEditor&&r.askAiEditor.startOrOpenChat(t):console.error("No Ask AI editor found after opening it. This should not happen.")}))}),[j,gr,Sn]),Er=c.useCallback((function(){j((function(e){var t=sS(e.editorTabs);return t?(0,l.Z)((0,l.Z)({},e),{},{editorTabs:zT(e.editorTabs,t.editorTab)}):e}))}),[j]),Mr=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nt(!1),ct(YV),console.info("Closing project..."),(t=q.current)&&t.closeAllPreviews&&t.closeAllPreviews(),bt&&bt.closeAllConnections(),Fe(!0),n=fr.current){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{currentProject:null,currentFileMetadata:null,editorTabs:qT(e.editorTabs,n)})}));case 12:return console.info("Deleting project from memory..."),Ft.unloadProjectEventsFunctionsExtensions(n),e.next=16,Ft.ensureLoadFinished();case 16:n.delete(),_t(),console.info("Project closed."),(r=sS(p.editorTabs))&&"center"!==r.paneIdentifier&&Ir({paneIdentifier:"center"});case 21:case"end":return e.stop()}}),e)}))),[bt,fr,Ft,nt,j,_t,Ir,p.editorTabs]),Lr=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n?GV(n,t):null)&&(i=Nn(),o=Fn(i),o.onSaveProject&&tt.insertRecentProjectFile({fileMetadata:r,storageProviderName:i.internalName})),e.next=4,Mr();case 4:return Sr.Z.burstAllUrlsCache(),ty.Z.burstCache(),e.next=8,j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{currentProject:t,currentFileMetadata:r})}));case 8:if(s=e.sent,Ft.loadProjectEventsFunctionsExtensions(t),!r){e.next=17;break}return t.setProjectFile(r.fileIdentifier),c=Nn(),u=Fn(c),e.next=16,Kn((function(){return{project:t,fileMetadata:r,storageProvider:c,storageProviderOperations:u,authenticatedUser:w}}));case 16:Fe(!1);case 17:return e.abrupt("return",s);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[j,Mr,tt,Ft,Nn,Fn,Kn,w]),Ar=c.useCallback((function(e,t){var n=Date.now(),r=UV.ProjectHelper.createNewGDJSProject();r.unserializeFrom(e);var i=Date.now()-n;return console.info("Unserialization took ".concat(i.toFixed(2)," ms")),Lr(r,t)}),[Lr]),Or=function(e,t){hn(e),vn(t)},Rr=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,s,l,c,u,d,p,f,h,g,m,x,v,b,C;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fn(),i=r.getAutoSaveCreationDate,s=r.onGetAutoSave,l=r.onOpen,c=r.getOpenErrorMessage,l){e.next=5;break}return console.error("Tried to open a file for a storage without onOpen support:",t,r),e.abrupt("return");case 5:return u=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&s){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,i(t,!0);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",t);case 7:return e.next=9,(0,LM.g)(200);case 9:return e.next=11,Qe({title:{id:"This project has an auto-saved version"},message:{id:"GDevelop automatically saved a newer version of this project on {0}. This new version might differ from the one that you manually saved. Which version would you like to open?",values:{0:new Date(n).toLocaleString()}},dismissButtonLabel:{id:"My manual save"},confirmButtonLabel:{id:"GDevelop auto-save"}});case 11:if(e.sent){e.next=14;break}return e.abrupt("return",t);case 14:return e.abrupt("return",s(t));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&s){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,i(t,!1);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,(0,LM.g)(200);case 9:return e.next=11,Qe({title:{id:"This project cannot be opened"},message:{id:"The project file appears to be corrupted, but an autosave file exists (backup made automatically by GDevelop on {0}). Would you like to try to load it instead?",values:{0:new Date(n).toLocaleString()}},confirmButtonLabel:{id:"Load autosave"}});case 11:if(e.sent){e.next=14;break}return e.abrupt("return",null);case 14:return e.abrupt("return",s(t));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n&&n.openingMessage&&mt(n.openingMessage),$(!0),e.prev=9,e.next=12,(0,LM.g)(50);case 12:return f=null,e.prev=13,e.next=16,u();case 16:return h=e.sent,e.next=19,l(h,Or);case 19:g=e.sent,p=g.content,e.next=34;break;case 23:return e.prev=23,e.t0=e.catch(13),f=e.t0,e.next=28,d();case 28:if(!(m=e.sent)){e.next=34;break}return e.next=32,l(m);case 32:x=e.sent,p=x.content;case 34:return e.prev=34,$(!1),mt(null),Or(null,null),e.finish(34);case 39:if(p){e.next=41;break}throw f||new Error("The project file content could not be read. It might be corrupted/malformed.");case 41:if(P_(Vn,p)){e.next=43;break}return e.abrupt("return");case 43:return v=UV.Serializer.fromJSObject(p),e.prev=44,b=Ar(v,t),e.abrupt("return",b);case 47:return e.prev=47,_t(),v.delete(),e.finish(47);case 51:e.next=64;break;case 53:if(e.prev=53,e.t1=e.catch(9),"CloudProjectReadingError"!==e.t1.name){e.next=59;break}I(t),e.next=64;break;case 59:return console.error("Failed to open the project:",e.t1),C=c?c(e.t1):{id:"Ensure that you are connected to internet and that the URL used is correct, then try again."},e.next=63,$e({title:{id:"Unable to open the project"},message:C});case 63:throw e.t1;case 64:case"end":return e.stop()}}),e,null,[[9,53],[13,23,34,39],[44,,47,51]])})));return function(t,n){return e.apply(this,arguments)}}(),[Vn,Fn,Ar,Qe,$e,_t]),Fr=lU({beforeCreatingProject:function(){Le(!0)},getStorageProviderOperations:Fn,getStorageProvider:Nn,afterCreatingProject:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.project,r=t.editorTabs,i=t.oldProjectId,o=t.options,hr.current&&(s=GV(hr.current,n),j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{currentFileMetadata:s})}))),Pe(!1),o.openQuickCustomizationDialog?yn(i):(At(n,i),Rt(n,i)),o.openAllScenes||o.openQuickCustomizationDialog?pa({currentProject:n,editorTabs:r}):ua({currentProject:n,editorTabs:r}),(sS(p.editorTabs)||o.forceOpenAskAiEditor)&&Ir({paneIdentifier:"right",continueProcessingFunctionCallsOnMount:!0}),Fe(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(){Fe(!0)},onSuccessOrError:function(){Le(!1),$(!1),Or(null,null)},loadFromProject:Lr,openFromFileMetadata:Rr,onProjectSaved:function(e){j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{currentFileMetadata:e})}))},ensureResourcesAreMoved:qn,onGameRegistered:er.fetchGames}),Dr=Fr.createEmptyProject,Nr=Fr.createProjectFromExample,_r=Fr.createProjectFromPrivateGameTemplate,Br=Fr.createProjectFromInAppTutorial,Ur=Fr.createProjectFromTutorial,Vr=Fr.createProjectFromCourseChapter,Hr=c.useCallback((function(){be(!0)}),[be]),Wr=c.useCallback((function(){return y.ZP.quit()}),[]),Gr=c.useCallback((function(){se((function(e){return!e}))}),[se]),Yr=function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){var r,i,s,c,u;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p.currentProject,i=e.i18n,r){t.next=4;break}return t.abrupt("return");case 4:return s=UV.UsedExtensionsFinder.findExtensionsDependentOn(r,n).toJSArray(),t.next=7,et({title:{id:"Remove the extension"},message:{id:"{0}Are you sure you want to remove this extension? This can't be undone.",values:{0:s.length>0?i._("This extension is used by the following extensions:".concat("\n\n"+s.map((function(e){return"- ".concat((r.hasEventsFunctionsExtensionNamed(e)?r.getEventsFunctionsExtension(e).getFullName():e)||e,"\n")})).join("")+"\n")):""}}});case 7:if(t.sent){t.next=10;break}return t.abrupt("return");case 10:c=n.getName(),u=n.getEventsBasedObjects().size()>0,j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:eS(e.editorTabs,c)})})).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft.loadProjectEventsFunctionsExtensions(r);case 2:return Ft.unloadProjectEventsFunctionsExtension(r,c),r.removeEventsFunctionsExtension(c),e.next=6,Ft.reloadProjectEventsFunctionsExtensions(r);case 6:Xr(u?{shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!0,reasons:["deleted-extension-with-custom-object"]}:{shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["deleted-extension-without-custom-object"]}),la();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),qr=function(e){var t=p.currentProject;if(t){var n,r=(0,i.Z)(e);try{var a=function(){var e=n.value;t.hasEventsFunctionsExtensionNamed(e)&&j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{editorTabs:eS(t.editorTabs,e)})}))};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}}},Jr=function(e){var t=p.currentProject;if(t){var n,r=!1,a=(0,i.Z)(e);try{var o=function(){for(var e=n.value,i=t.getEventsFunctionsExtension(e).getEventsBasedObjects(),a=0;a<i.getCount();a++){var o=i.getAt(a);UV.EventsBasedObjectVariantHelper.complyVariantsToEventsBasedObject(t,o)}j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{editorTabs:eS(t.editorTabs,e)})})),r=r||i.getCount()>0};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}r&&Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["installed-extension-with-custom-object"]})}},Xr=c.useCallback((function(e){var t=!1;for(var n in p.editorTabs.panes){var r=YT(p.editorTabs,n),i=r?r.editorRef:null;i&&(i.notifyChangesToInGameEditor(e),t=!0)}t||(0,mm.VL)(e)}),[p.editorTabs]),Kr=c.useCallback((function(){Xr({shouldReloadProjectData:!1,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["triggered-if-needed"]})}),[Xr]),Qr=c.useState(!1),$r=(0,s.Z)(Qr,2),ei=$r[0],ti=$r[1],ni=c.useCallback((function(e){ti(!1),Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!0,shouldHardReload:!0,reasons:[e]})}),[Xr]);c.useEffect((function(){if("embedded-game"===wn)Xr({shouldReloadProjectData:!1,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["switched-tab-while-using-3d-editor"]});else for(var e in p.editorTabs.panes){var t=YT(p.editorTabs,e),n=t?t.editorRef:null;n&&n.switchInGameEditorIfNoHotReloadIsNeeded()}}),[wn,p.editorTabs,Xr]),function(e){var t=e.onRestartInGameEditor,n=e.gameEditorMode,r=c.useState(0),i=(0,s.Z)(r,2),a=i[0],o=i[1];c.useEffect((function(){o((function(e){return e+1}))}),[n]),c.useEffect((function(){a>=10&&"embedded-game"===n&&(console.info("Restarting in-game editor because of regular restart after too many switches between 2D and 3D."),t("relaunched-because-of-regular-restart"),o(0))}),[a,n,t])}({onRestartInGameEditor:ni,gameEditorMode:wn});var ri=c.useCallback((function(){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["external-layout-association-changed"]})}),[Xr]),ii=c.useCallback((function(){Xr({shouldReloadProjectData:!1,shouldReloadLibraries:!1,shouldReloadResources:!0,shouldHardReload:!1,reasons:["resource-externally-changed"]})}),[Xr]),oi=c.useCallback((function(){(0,mm.uJ)()?Xr({shouldReloadProjectData:!1,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["resource-usage-changed"]}):Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["resource-usage-changed"]})}),[Xr]),si=c.useCallback((function(){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["scene-added"]})}),[Xr]),li=c.useCallback((function(){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["external-layout-added"]})}),[Xr]),ci=c.useCallback((function(){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["effect-added"]})}),[Xr]),ui=c.useCallback((function(e){var t=e.isNewObjectTypeUsed;Xr({shouldReloadProjectData:!0,shouldReloadLibraries:t,shouldReloadResources:!1,shouldHardReload:!1,reasons:["object-lists-modified"]})}),[Xr]),pi=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn){e.next=2;break}return e.abrupt("return");case 2:if(t=Fn(),!(Nt&&tt.values.autosaveOnPreview&&t.onAutoSaveProject&&Pn)){e.next=13;break}return e.prev=4,e.next=7,t.onAutoSaveProject(Sn,Pn);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Error while auto-saving the project: ",e.t0),jr(Vn._({id:"There was an error while making an auto-save of the project. Verify that you have permissions to write in the project folder."}));case 13:case"end":return e.stop()}}),e,null,[[4,9]])}))),[Vn,jr,Sn,Pn,Fn,tt.values.autosaveOnPreview,Nt]),fi=(0,_V.A)(),hi=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,l,c,u,d,f,h,g,m,x,v,b,C,j,y,Z,k,T,S,P,I;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.networkPreview,r=t.numberOfWindows,i=t.hotReload,o=t.shouldReloadProjectData,l=t.shouldReloadLibraries,c=t.shouldGenerateScenesEventsCode,u=t.shouldReloadResources,d=t.shouldHardReload,f=t.fullLoadingScreen,h=t.forceDiagnosticReport,g=t.launchCaptureOptions,m=t.isForInGameEdition,Sn){e.next=3;break}return e.abrupt("return");case 3:if(0!==Sn.getLayoutsCount()){e.next=5;break}return e.abrupt("return");case 5:if(console.info("Launching a new ".concat(m?"in-game edition preview":"preview"," with options:"),{networkPreview:n,numberOfWindows:r,hotReload:i,shouldReloadProjectData:o,shouldReloadLibraries:l,shouldGenerateScenesEventsCode:c,shouldReloadResources:u,shouldHardReload:d,fullLoadingScreen:f,forceDiagnosticReport:h,launchCaptureOptions:g,isForInGameEdition:m}),x=q.current){e.next=10;break}return console.error("Preview launcher not found."),e.abrupt("return");case 10:if(!it.current){e.next=13;break}return console.error("Preview already loading. Ignoring but it should not be even possible to launch a preview while another one is loading, as this could break the game of the first preview when it is loading or reading files."),e.abrupt("return");case 13:return v=x.immediatelyPreparePreviewWindows?x.immediatelyPreparePreviewWindows({project:Sn,hotReload:!!i,numberOfWindows:r||1,isForInGameEdition:!!m}):null,at(m&&i?"hot-reload-for-in-game-edition":"preview"),XT(p.editorTabs),b=m?m.forcedSceneName:lt.isPreviewOverriden?lt.overridenPreviewLayoutName:lt.previewLayoutName,C=m?m.forcedExternalLayoutName:lt.isPreviewOverriden?lt.overridenPreviewExternalLayoutName:lt.previewExternalLayoutName,m||pi().catch((function(e){console.error("Error while auto-saving the project. Ignoring.",e)})),(0,zn.IE)(Sn),j=w.profile?{username:w.profile.username||"",id:w.profile.id}:null,e.next=23,Promise.all([m?null:lr(),m?null:nr(g)]);case 23:return y=e.sent,Z=(0,s.Z)(y,2),k=Z[0],T=Z[1],e.prev=27,e.next=30,Ft.ensureLoadFinished();case 30:return S=Date.now(),P={message:"",position:""},dt.current&&(P=dt.current.getPreviewMessage()||P),e.next=35,x.launchPreview({project:Sn,sceneName:b||Sn.getLayoutAt(0).getName(),externalLayoutName:C||null,eventsBasedObjectType:m?m.eventsBasedObjectType:null,eventsBasedObjectVariantName:m?m.eventsBasedObjectVariantName:null,networkPreview:!!n,hotReload:!!i,shouldReloadProjectData:void 0===o||o,shouldReloadLibraries:void 0===l||l,shouldGenerateScenesEventsCode:void 0===c||c,shouldReloadResources:!!u,shouldHardReload:!!d,fullLoadingScreen:!!f,fallbackAuthor:j,authenticatedPlayer:k,getIsMenuBarHiddenInPreview:tt.getIsMenuBarHiddenInPreview,getIsAlwaysOnTopInPreview:tt.getIsAlwaysOnTopInPreview,numberOfWindows:void 0===r?1:r,isForInGameEdition:!!m,editorId:m?m.editorId:"",editorCameraState3D:m?m.editorCameraState3D:null,inGameEditorSettings:m?fi:null,inAppTutorialMessageInPreview:P.message,inAppTutorialMessagePositionInPreview:P.position,captureOptions:T,onCaptureFinished:rr,previewWindows:v});case 35:at(null),m||(0,ai.C)({quickCustomizationGameId:jn||null,networkPreview:!!n,hotReload:!!i,projectDataOnlyExport:void 0!==c&&!c,fullLoadingScreen:!!f,numberOfWindows:r||1,forceDiagnosticReport:!!h,previewLaunchDuration:Date.now()-S}),dt.current&&dt.current.onPreviewLaunch(),Vt||(I=Sn.getWholeProjectDiagnosticReport(),!m&&(h||tt.values.openDiagnosticReportAutomatically)&&I.hasAnyIssue()&&un(!0)),e.next=45;break;case 41:e.prev=41,e.t0=e.catch(27),at(null),console.error("Error caught while launching preview, this should never happen.",e.t0);case 45:case"end":return e.stop()}}),e,null,[[27,41]])})));return function(t){return e.apply(this,arguments)}}(),[Sn,p.editorTabs,lt.isPreviewOverriden,lt.overridenPreviewLayoutName,lt.previewLayoutName,lt.overridenPreviewExternalLayoutName,lt.previewExternalLayoutName,pi,w.profile,Ft,tt.getIsMenuBarHiddenInPreview,tt.getIsAlwaysOnTopInPreview,tt.values.openDiagnosticReportAutomatically,Vt,lr,jn,rr,nr,fi,it,at]),mi=(0,xi.zi)(w,xi.SH,hi),vi=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sn&&!jt?or(Sn.getProjectUuid()):void 0,r=t?t.numberOfWindows:1,e.next=4,mi({networkPreview:!1,numberOfWindows:r,launchCaptureOptions:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Sn,mi,or,jt]),Ci=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Sn?or(Sn.getProjectUuid()):void 0,e.next=3,mi({networkPreview:!1,hotReload:!0,launchCaptureOptions:t});case 3:case"end":return e.stop()}}),e)}))),[Sn,mi,or]),ji=c.useCallback((function(){return mi({networkPreview:!0,hotReload:!1})}),[mi]),yi=c.useCallback((function(){return mi({forceDiagnosticReport:!0})}),[mi]),Zi=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c,u,d,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.editorId,r=t.sceneName,i=t.externalLayoutName,o=t.eventsBasedObjectType,s=t.eventsBasedObjectVariantName,l=t.shouldReloadProjectData,c=t.shouldReloadLibraries,u=t.shouldReloadResources,d=t.shouldHardReload,p=t.editorCameraState3D,e.next=3,hi({networkPreview:!1,hotReload:!0,shouldReloadProjectData:l,shouldReloadLibraries:c,shouldGenerateScenesEventsCode:!1,shouldReloadResources:u,shouldHardReload:d,forceDiagnosticReport:!1,isForInGameEdition:{editorId:n,forcedSceneName:r,forcedExternalLayoutName:i,eventsBasedObjectType:o,eventsBasedObjectVariantName:s,editorCameraState3D:p},numberOfWindows:0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[hi]),ki=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi({networkPreview:!1,hotReload:!1,forceDiagnosticReport:!1,numberOfWindows:0});case 2:Pt();case 3:case"end":return e.stop()}}),e)}))),[Pt,mi]),wi=c.useCallback((function(){return mi({networkPreview:!1,launchCaptureOptions:{screenshots:[{delayTimeInSeconds:1e3},{delayTimeInSeconds:5e3}]},hotReload:!0,shouldGenerateScenesEventsCode:!1})}),[mi]),Ti=c.useMemo((function(){return{hasPreviewsRunning:jt,launchProjectWithLoadingScreenPreview:function(){return mi({fullLoadingScreen:!0})},launchProjectDataOnlyPreview:function(){return mi({hotReload:!0,shouldGenerateScenesEventsCode:!1})},launchProjectCodeAndDataPreview:function(){return mi({hotReload:!0,shouldGenerateScenesEventsCode:!0})}}}),[jt,mi]),Si=c.useCallback((function(e,t,n){var r=n.openEventsEditor,i=n.openSceneEditor,a=n.focusWhenOpened,o=gr({kind:"layout",name:t,dontFocusTab:!("scene"===a||"scene-or-events-otherwise"===a)}),s=gr({kind:"layout events",name:t,dontFocusTab:!("events"===a||"scene-or-events-otherwise"===a&&!i)}),l=i?BT(e,o):e;return r?BT(l,s):l}),[gr]),Pi=c.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{openEventsEditor:!0,openSceneEditor:!0,focusWhenOpened:"scene"},n=arguments.length>2?arguments[2]:void 0;j((function(r){return(0,l.Z)((0,l.Z)({},r),{},{editorTabs:Si(n||r.editorTabs,e,{openEventsEditor:t.openEventsEditor,openSceneEditor:t.openSceneEditor,focusWhenOpened:t.focusWhenOpened})})}))}),[j,Si]),Ii=c.useCallback((function(e){j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{editorTabs:BT(t.editorTabs,gr({kind:"external events",name:e}))})}))}),[j,gr]),Ei=c.useCallback((function(e){j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{editorTabs:BT(t.editorTabs,gr({kind:"external layout",name:e}))})}))}),[j,gr]),Mi=c.useCallback((function(e,t,n,r){j((function(i){return(0,l.Z)((0,l.Z)({},i),{},{editorTabs:BT(i.editorTabs,(0,l.Z)((0,l.Z)({},gr({kind:"events functions extension",name:e,project:Sn})),{},{extraEditorProps:{initiallyFocusedFunctionName:t,initiallyFocusedBehaviorName:n,initiallyFocusedObjectName:r}}))})}))}),[Sn,j,gr]),Li=c.useCallback((function(){j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:BT(e.editorTabs,gr({kind:"resources",name:""}))})}))}),[gr,j]),Ai=c.useCallback((function(){j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:BT(e.editorTabs,gr({kind:"start page",name:""}))})}))}),[j,gr]),Oi=c.useCallback((function(){Be(!1)}),[]),Fi=c.useCallback((function(){Xe(!0)}),[Xe]),Di=pV({openHomePage:Ai,closeDialogs:Oi}).navigateToRoute,Ni=c.useCallback((function(){j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:BT(e.editorTabs,gr({kind:"debugger",name:""}))})}))}),[gr,j]),_i=(0,xi.zi)(w,xi.x9,Ni),Bi=c.useCallback((function(){_i(),vi()}),[_i,vi]),Ui=c.useCallback((function(e,t,n){var r=p.currentProject,i=p.editorTabs;if(r){var a=function(e,t,n,r){for(var i in e.panes)for(var a=e.panes[i],o=0;o<a.editors.length;++o){var s=a.editors[o].editorRef;if(s instanceof _T&&s.getEventsFunctionsExtension()===t&&s.getEventsBasedObject()===n&&s.getVariantName()===r)return{editor:s,paneIdentifier:i,tabIndex:o}}return null}(i,e,t,n);j(a?function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:UT(i,a.paneIdentifier,a.tabIndex)})}:function(i){return(0,l.Z)((0,l.Z)({},i),{},{editorTabs:BT(i.editorTabs,(0,l.Z)({},gr({kind:"custom object",name:e.getName()+"::"+t.getName()+(t.getVariants().hasVariantNamed(n)?"::"+n:""),project:r})))})})}}),[gr,j,p]),Vi=c.useCallback((function(e,t,n){var r=p.currentProject;r&&j((function(i){return(0,l.Z)((0,l.Z)({},i),{},{editorTabs:BT(BT(i.editorTabs,(0,l.Z)((0,l.Z)({},gr({kind:"events functions extension",name:e.getName(),project:r})),{},{extraEditorProps:{initiallyFocusedFunctionName:null,initiallyFocusedBehaviorName:null,initiallyFocusedObjectName:t.getName()}})),(0,l.Z)({},gr({kind:"custom object",name:e.getName()+"::"+t.getName()+(t.getVariants().hasVariantNamed(n)?"::"+n:""),project:r})))})}))}),[gr,j,p]),Hi=c.useCallback((function(e){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["extracted-instances-to-external-layout"]}),Ei(e)}),[Xr,Ei]),Wi=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Re){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ft.reloadProjectEventsFunctionsExtensions(Sn);case 4:Xr({shouldReloadProjectData:!1,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["reloaded-extensions"]});case 5:case"end":return e.stop()}}),e)}))),[Re,Sn,Ft,Xr]),Gi=c.useCallback((function(){Wi()}),[Wi]),Yi=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.shouldHotReloadEditor,!Re){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ft.loadProjectEventsFunctionsExtensions(Sn);case 5:n&&Xr({shouldReloadProjectData:!1,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["loaded-extensions"]});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Re,Sn,Ft,Xr]),qi=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn&&Sn.hasEventsFunctionsExtensionNamed(t)){e.next=2;break}return e.abrupt("return");case 2:if(r=Sn.getEventsFunctionsExtension(t),(i=r.getEventsBasedObjects()).has(n)){e.next=6;break}return e.abrupt("return");case 6:return o=i.get(n),e.next=9,Ft.loadProjectEventsFunctionsExtensions(Sn);case 9:(0,mm.VL)({shouldReloadProjectData:!1,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["opened-custom-object-editor"]}),Vi(r,o,"");case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Sn,Vi,Ft]),Ji=c.useCallback((function(e,t){qi(e,t)}),[qi]),Xi=c.useCallback((function(){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["changed-custom-object-type"]})}),[Xr]),Ki=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qi(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[qi]),Qi=c.useCallback((function(e,t){Ki(e,t)}),[Ki]),$i=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn){e.next=2;break}return e.abrupt("return");case 2:if(Sn.hasEventsFunctionsExtensionNamed(t)){e.next=4;break}return e.abrupt("return");case 4:if(i=Sn.getEventsFunctionsExtension(t),(o=i.getEventsBasedObjects()).has(n)){e.next=8;break}return e.abrupt("return");case 8:return s=o.get(n),e.next=11,Ft.loadProjectEventsFunctionsExtensions(Sn);case 11:(0,mm.VL)({shouldReloadProjectData:!1,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["opened-custom-object-variant-editor"]}),Ui(i,s,r);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[Sn,Ui,Ft]),ea=c.useCallback((function(e,t,n){$i(e,t,n)}),[$i]),ta=c.useCallback((function(e){var t=p.currentProject;if(t){UV.EventsBasedObjectVariantHelper.complyVariantsToEventsBasedObject(t,e);var n,r=(0,i.Z)(lS(p.editorTabs));try{for(r.s();!(n=r.n()).done;){var a=n.value.editorRef;a&&a.onEventsBasedObjectChildrenEdited()}}catch(o){r.e(o)}finally{r.f()}}}),[p.editorTabs,p.currentProject]),na=c.useCallback((function(e,t){var n,r=(0,i.Z)(lS(p.editorTabs));try{for(r.s();!(n=r.n()).done;){var a=n.value.editorRef;a&&a.onSceneObjectEdited(e,t)}}catch(o){r.e(o)}finally{r.f()}}),[p.editorTabs]),ra=c.useCallback((function(e){var t,n=(0,i.Z)(lS(p.editorTabs));try{for(n.s();!(t=n.n()).done;){var r=t.value.editorRef;r&&r.onSceneObjectsDeleted(e)}}catch(a){n.e(a)}finally{n.f()}}),[p.editorTabs]),ia=c.useCallback((function(e){var t,n=(0,i.Z)(lS(p.editorTabs));try{for(n.s();!(t=n.n()).done;){var r=t.value.editorRef;r&&r.onSceneEventsModifiedOutsideEditor(e)}}catch(a){n.e(a)}finally{n.f()}}),[p.editorTabs]),aa=c.useCallback((function(e){var t,n=(0,i.Z)(lS(p.editorTabs));try{for(n.s();!(t=n.n()).done;){var r=t.value.editorRef;r&&r.onInstancesModifiedOutsideEditor(e)}}catch(a){n.e(a)}finally{n.f()}}),[p.editorTabs]),oa=c.useCallback((function(e){var t,n=(0,i.Z)(lS(p.editorTabs));try{for(n.s();!(t=n.n()).done;){var r=t.value.editorRef;r&&r.onObjectsModifiedOutsideEditor(e)}}catch(a){n.e(a)}finally{n.f()}ui({isNewObjectTypeUsed:e.isNewObjectTypeUsed})}),[p.editorTabs,ui]),sa=c.useCallback((function(e){var t,n=(0,i.Z)(lS(p.editorTabs));try{for(n.s();!(t=n.n()).done;){var r=t.value.editorRef;r&&r.onObjectGroupsModifiedOutsideEditor(e)}}catch(a){n.e(a)}finally{n.f()}}),[p.editorTabs]),la=function(){Bt(),J()},ca=c.useCallback((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{openFromStorageProviderDialogOpen:e})}))}),[j]),ua=c.useCallback((function(e){var t=e.currentProject,n=e.editorTabs;if(t){if(0===t.getLayoutsCount()){var r=Vn._({id:"Untitled scene"});t.insertNewLayout(r,0);var i=t.getLayout(r);zi(i)}Pi(t.getLayoutAt(0).getName(),{openSceneEditor:!0,openEventsEditor:!0,focusWhenOpened:"scene"},n),$(!1),Or(null,null),t.getLayoutsCount()>1?se(!0):se(!1)}}),[Pi,Vn]),da=c.useCallback((function(e){var t=e.currentProject,n=e.editorTabs;if(!t)return n;var r=t.getLayoutsCount();if(0===r)return n;for(var i=n,a=0;a<r;a++)i=Si(i,t.getLayoutAt(a).getName(),{openSceneEditor:!0,openEventsEditor:!0,focusWhenOpened:"scene"});return i}),[Si]),pa=c.useCallback((function(e){var t=e.currentProject;if(t&&0!==t.getLayoutsCount()){j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{editorTabs:da(e)})}));var n=t.getFirstLayout()||t.getLayoutAt(0).getName();Pi(n,{openSceneEditor:!0,openEventsEditor:!0,focusWhenOpened:"scene"}),$(!1),Or(null,null),se(!1)}}),[da,j,Pi]),fa=c.useCallback((function(){var e=Fn();if(e.onOpenWithPicker)return e.onOpenWithPicker().then((function(e){if(e)return Rr(e).then((function(e){if(e){var t=e.currentProject;if(t&&vr(t))0===br(t)?ua({currentProject:t,editorTabs:e.editorTabs}):($(!1),Or(null,null),se(!1));else ua({currentProject:t,editorTabs:e.editorTabs});"LocalFile"===Nn().internalName&&nt(!0)}}))})).catch((function(t){var n=e.getOpenErrorMessage?e.getOpenErrorMessage(t):{id:"Verify that you have the authorization for reading the file you're trying to access."};(0,bi.gR)({message:[Vn._({id:"Unable to open the project."}),Vn._(n)].join("\n"),errorId:"project-open-with-picker-error",rawError:t})}))}),[Vn,vr,br,Fn,Rr,ua,Nn,nt]),ha=c.useCallback(function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n,r){var i,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Nt||r&&r.ignoreUnsavedChanges){t.next=4;break}if(y.ZP.showConfirmDialog(Vn._({id:"Open a new project? Any changes that have not been saved will be lost."}))){t.next=4;break}return t.abrupt("return");case 4:if(i=n.fileMetadata,o=zV(Vn,e.storageProviders,n)){t.next=8;break}return t.abrupt("return");case 8:return Fn(o),t.next=11,Rr(i,{openingMessage:r&&r.openingMessage||null}).then((function(e){if(e){var t=e.currentProject;if(r&&r.openAllScenes)pa({currentProject:t,editorTabs:e.editorTabs});else if(t&&vr(t)){0===br(t)?ua({currentProject:t,editorTabs:e.editorTabs}):($(!1),Or(null,null),se(!1))}else ua({currentProject:t,editorTabs:e.editorTabs});"LocalFile"===Nn().internalName&&nt(!0);var n=sS(e.editorTabs);n&&"center"===n.paneIdentifier&&Ir({paneIdentifier:"right"})}})).catch((function(e){}));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[Vn,Rr,ua,e.storageProviders,Fn,Nt,Nn,nt,pa,vr,br,Ir]),ga=c.useCallback((function(e){var t=e.fileMetadata,n=e.versionId,r=e.ignoreUnsavedChanges,i=e.openingMessage;return ha({storageProviderName:"Cloud",fileMetadata:(0,l.Z)((0,l.Z)({},t),{},{version:n})},{ignoreUnsavedChanges:r,openingMessage:i})}),[ha]),ma=TU({getStorageProvider:Nn,isSavingProject:ne,fileMetadata:Pn,onOpenCloudProjectOnSpecificVersion:ga}),xa=ma.renderVersionHistoryPanel,va=ma.openVersionHistoryPanel,ba=ma.checkedOutVersionStatus,Ca=ma.onQuitVersionHistory,ja=c.useCallback((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&se(!1),j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{saveToStorageProviderDialogOpen:e})}))}),[j]),ya=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,s,c,u,d,f,h,g,m,x,v,b,C,y,Z,k,T,S,P,I,E;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn){e.next=2;break}return e.abrupt("return");case 2:if(!dr){e.next=4;break}return e.abrupt("return");case 4:if(JT(p.editorTabs),!ne){e.next=8;break}return console.info("Project is already being saved, not triggering save."),e.abrupt("return");case 8:if(n=Nn(),r=Fn(),i=t&&t.requestedStorageProvider,s=Fn(i),c=Nn(),u=s.onSaveProjectAs,d=s.onChooseSaveProjectAsLocation,f=s.getWriteErrorMessage,h=s.canFileMetadataBeSafelySavedAs,u){e.next=16;break}return e.abrupt("return");case 16:if(re(!0),g=c.internalName,e.prev=18,m=t&&t.forcedSavedAsLocation,x=null,!d||m){e.next=32;break}return e.next=24,d({project:Sn,fileMetadata:Pn,displayOptionToGenerateNewProjectUuid:!!Pn&&!!Pn.gameId&&"UrlStorageProvider"!==n.internalName});case 24:if(v=e.sent,b=v.saveAsLocation,C=v.saveAsOptions,b){e.next=30;break}return Fn(n),e.abrupt("return");case 30:m=b,x=C;case 32:if(!h||!Pn){e.next=38;break}return e.next=35,h(Pn,{showAlert:$e,showConfirmation:Qe});case 35:if(e.sent){e.next=38;break}return e.abrupt("return");case 38:return y=null,x&&x.generateNewProjectUuid&&(y=Sn.getProjectUuid(),Sn.resetProjectUuid()),Z=null,(k=m&&m.name?m.name:null)&&(Z=Sn.getName(),Sn.setName(k)),e.next=45,u(Sn,m,{onStartSaving:function(){return yr(Vn._({id:"Saving..."}),null)},onMoveResources:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.newFileMetadata,!Pn){e.next=4;break}return e.next=4,qn({project:Sn,newFileMetadata:i,newStorageProvider:c,newStorageProviderOperations:s,oldFileMetadata:Pn,oldStorageProvider:n,oldStorageProviderOperations:r,authenticatedUser:w});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 45:if(T=e.sent,S=T.wasSaved,P=T.fileMetadata,S){e.next=53;break}return yr(Vn._({id:"An error occurred. Please try again."})),Z&&Sn.setName(Z),y&&Sn.setProjectUuid(y),e.abrupt("return");case 53:if(_t(),yr(Vn._({id:"Project properly saved"})),N(!1),A(null),P){e.next=59;break}return e.abrupt("return");case 59:if(!P.gameId){e.next=62;break}return e.next=62,er.markGameAsSavedIfRelevant(P.gameId);case 62:I={fileMetadata:P,storageProviderName:g},tt.insertRecentProjectFile(I),Vt&&!Vt.isMiniTutorial&&dt.current&&tt.saveTutorialProgress((0,l.Z)((0,l.Z)({tutorialId:Vt.id,userId:w.profile?w.profile.id:null},dt.current.getProgress()),{},{fileMetadataAndStorageProviderName:I})),w.onCloudProjectsChanged(),Sr.Z.burstAllUrlsCache(),WV(fr,Sn)&&j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{currentFileMetadata:P})})),e.next=75;break;case 70:e.prev=70,e.t0=e.catch(18),Cr(),E=f?f(e.t0):{id:"An error occurred when saving the project. Please try again later."},(0,bi.gR)({message:Vn._(E),rawError:e.t0,errorId:"project-save-as-error"});case 75:return e.prev=75,re(!1),e.finish(75);case 78:case"end":return e.stop()}}),e,null,[[18,70,75,78]])})));return function(t){return e.apply(this,arguments)}}(),[Vn,ne,Sn,fr,Pn,Fn,_t,j,p.editorTabs,yr,Cr,Nn,tt,qn,w,Vt,$e,Qe,er,dr]),Za=!!Sn&&!ba,ka=c.useCallback((function(){if(Za&&!dr)if(!L||F){var t=Fn();e.storageProviders.filter((function(e){return!e.hiddenInSaveDialog})).length>1||!t.onSaveProjectAs?ja():ya()}else N(!0)}),[Fn,ja,e.storageProviders,ya,L,F,Za,dr]),wa=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,i,o,s,c,u,d,f,h,g;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn){e.next=2;break}return e.abrupt("return");case 2:if(!dr){e.next=4;break}return e.abrupt("return");case 4:if(Pn){e.next=6;break}return e.abrupt("return",ka());case 6:if(!!!Pn.ownerId){e.next=9;break}return e.abrupt("return");case 9:if(!L||F){e.next=12;break}return N(!0),e.abrupt("return");case 12:if(t=Fn(),n=t.onSaveProject,r=t.canFileMetadataBeSafelySaved,n){e.next=16;break}return e.abrupt("return",ka());case 16:if(JT(p.editorTabs),!ne){e.next=20;break}return console.info("Project is already being saved, not triggering save."),e.abrupt("return");case 20:if(!ba){e.next=28;break}return e.next=23,Qe({title:{id:"Restore this version"},message:{id:"You're trying to save changes made to a previous version of your project. If you continue, it will be used as the new latest version."}});case 23:if(e.sent){e.next=26;break}return e.abrupt("return");case 26:e.next=34;break;case 28:if(!r){e.next=34;break}return e.next=31,r(Pn,{showAlert:$e,showConfirmation:Qe});case 31:if(e.sent){e.next=34;break}return e.abrupt("return");case 34:return jr(Vn._({id:"Saving..."}),null),re(!0),e.prev=36,i=performance.now(),o=Nn().internalName,s={},L&&(s.previousVersion=L),ba&&(s.restoredFromVersionId=ba.version.id),e.next=44,n(Sn,Pn,s);case 44:if(c=e.sent,u=c.wasSaved,d=c.fileMetadata,!u){e.next=60;break}if(console.info("Project saved in ".concat(performance.now()-i,"ms.")),!d.gameId){e.next=52;break}return e.next=52,er.markGameAsSavedIfRelevant(d.gameId);case 52:N(!1),A(null),f={fileMetadata:d,storageProviderName:o},tt.insertRecentProjectFile(f),Vt&&!Vt.isMiniTutorial&&dt.current&&tt.saveTutorialProgress((0,l.Z)((0,l.Z)({tutorialId:Vt.id,userId:w.profile?w.profile.id:null},dt.current.getProgress()),{},{fileMetadataAndStorageProviderName:f})),WV(fr,Sn)&&j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{currentFileMetadata:d})})),_t(),yr(Vn._({id:"Project properly saved"}));case 60:e.next=68;break;case 62:e.prev=62,e.t0=e.catch(36),h=(0,uo.T)(e.t0),g=h&&403===h.status?{id:"You don't have permissions to save this project. Please choose another location."}:{id:"An error occurred when saving the project. Please try again later."},$e({title:{id:"Unable to save the project"},message:g}),Cr();case 68:return e.prev=68,re(!1),e.finish(68);case 71:case"end":return e.stop()}}),e,null,[[36,62,68,71]])}))),[ne,Sn,fr,Pn,Fn,jr,Cr,yr,Vn,_t,ka,p.editorTabs,Nn,tt,j,w,Vt,L,F,$e,Qe,ba,er,dr]),Ta=Ys({onSave:wa,project:Sn,isInQuickCustomization:!!jn}),Sa=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn){e.next=2;break}return e.abrupt("return",!0);case 2:if(!Nt){e.next=6;break}if(y.ZP.showConfirmDialog(Vn._({id:"Close the project? Any changes that have not been saved will be lost."}))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,Mr();case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),[Sn,Nt,Vn,Mr]),Pa=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,Mr();case 3:zt(),e.next=7;break;case 6:zt();case 7:Ai();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[zt,Mr,Ai]),Ia=c.useCallback((function(e){var t=tt.getTutorialProgress({tutorialId:e,userId:w.profile?w.profile.id:void 0});Kt({tutorialId:e,userProgress:t})}),[tt,w.profile]);uB({openInAppTutorialDialog:Ia,openProfileDialog:Hr,openAskAi:Ir,openStandaloneDialog:Fi});var Ea=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn&&Pn){e.next=2;break}return e.abrupt("return");case 2:if(n=Fn(),r=(0,l.Z)((0,l.Z)({},Pn),{},{name:t}),!n.onChangeProjectProperty){e.next=9;break}return e.next=7,n.onChangeProjectProperty(Sn,Pn,{name:t});case 7:(i=e.sent)&&(_t(),r=(0,l.Z)((0,l.Z)({},r),i));case 9:return e.next=11,j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{currentFileMetadata:r})}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ma=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Cloud"!==Nn().internalName||!t.newName){e.next=3;break}return e.abrupt("return",Qe({title:{id:"Project name changed"},message:{id:"Your project name has changed, this will also save the whole project, continue?"},confirmButtonLabel:{id:"Save and continue"}}));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),La=c.useCallback((function(e){P&&(ga({fileMetadata:P,versionId:e,ignoreUnsavedChanges:!1,openingMessage:{id:"Recovering older version..."}}),I(null),A(e))}),[P,ga]),Aa=c.useCallback((function(){var e=Nn();return"LocalFile"===e.internalName||"Cloud"===e.internalName}),[Nn]),Oa=c.useCallback((function(e){return new Promise((function(t){H(e);Y((function(){return t}))}))}),[Y,H]),Ra=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sa();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,Ur(t,{storageProvider:AP.H,saveAsLocation:null,creationSource:"in-app-tutorial"});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),(0,bi.gR)({message:Vn._({id:"Unable to create a new project for the tutorial. Try again later."}),rawError:new Error("Can't create project from template of tutorial \"".concat(t,'"')),errorId:"cannot-create-project-from-tutorial-template"}),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),[Sa,Ur,Vn]),Fa=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sa();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return r={storageProvider:AP.H,saveAsLocation:null,creationSource:"course-chapter"},e.prev=6,e.next=9,Vr({courseChapter:t,templateId:n,newProjectSetup:r});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),(0,bi.gR)({message:Vn._({id:"Unable to create a new project for the course chapter. Try again later."}),rawError:new Error("Can't create project from template of course chapter \"".concat(t.id,'"')),errorId:"cannot-create-project-from-course-chapter-template"}),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,n){return e.apply(this,arguments)}}(),[Sa,Vr,Vn]),Da=c.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xt){e.next=2;break}return e.abrupt("return");case 2:if(n=Xt.userProgress,r=Xt.tutorialId,i=n?n.fileMetadataAndStorageProviderName:null,!n||"resume"!==t||!i){e.next=21;break}if(!Sn){e.next=18;break}if(!Pn||Pn.fileIdentifier===i.fileMetadata.fileIdentifier){e.next=15;break}return e.next=9,Sa();case 9:if(e.sent){e.next=12;break}return e.abrupt("return");case 12:ha(i,{openAllScenes:!0}),e.next=16;break;case 15:pa({currentProject:Sn,editorTabs:p.editorTabs});case 16:e.next=19;break;case 18:ha(i,{openAllScenes:!0});case 19:e.next=26;break;case 21:return e.next=23,Sa();case 23:if(e.sent){e.next=26;break}return e.abrupt("return");case 26:if(o=Ht(r)){e.next=29;break}return e.abrupt("return");case 29:if(!(s=o.initialTemplateUrl)){e.next=40;break}return e.prev=31,e.next=34,Br(o.id,{storageProvider:AP.H,saveAsLocation:null,creationSource:"in-app-tutorial"});case 34:e.next=40;break;case 36:return e.prev=36,e.t0=e.catch(31),(0,bi.gR)({message:Vn._({id:"Unable to create a new project for the tutorial. Try again later."}),rawError:new Error("Can't create project from template \"".concat(s,'"')),errorId:"cannot-create-project-from-template"}),e.abrupt("return");case 40:return l=n&&"resume"===t?n.step:0,c=n&&"resume"===t?n.projectData:o.initialProjectData||{},e.next=44,Wt({tutorialId:r,initialStepIndex:l,initialProjectData:c});case 44:(0,ai.ei)({tutorialId:r,scenario:t,isUIRestricted:!!o.shouldRestrictUI}),Kt(null);case 46:case"end":return e.stop()}}),e,null,[[31,36]])})));return function(t){return e.apply(this,arguments)}}(),[Vn,Ht,Br,Sa,Wt,Xt,ha,p.editorTabs,Sn,Pn,pa]),Na=c.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fr.current&&hr.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Kn((function(){return{project:fr.current,fileMetadata:hr.current,storageProvider:Nn(),storageProviderOperations:Fn(),authenticatedUser:w}}));case 4:case"end":return e.stop()}}),e)}))),[fr,hr,Kn,Nn,Fn,w]),_a=(0,DM._)(Na),Ba=c.useCallback((function(){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["added-new-resources"]})}),[Xr]);(0,V.aL)({previewDebuggerServer:bt,onRunCommand:ut.current?ut.current.launchCommand:function(){}});var Ua=c.useCallback((function(){ut.current&&ut.current.open()}),[]),Va=c.useContext(zr.Z).configureNewProjectActions;c.useEffect((function(){Ai(),BV.push(["MainFrameComponentDidMount",performance.now()]),Pr().then((function(){return j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{gdjsDevelopmentWatcherEnabled:!0})}))})).then(function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n){var r,i,o,s,l,c,u;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(BV.push(["MainFrameComponentDidMountFinished",performance.now()]),console.info("Startup times:",m_()),r=tt.getAutoOpenMostRecentProject,i=tt.getRecentProjectFiles,o=tt.hadProjectOpenedDuringLastSession,!_n){t.next=11;break}return s=Fn(),t.next=7,Et(s);case 7:t.sent&&wr(),t.next=26;break;case 11:if(!Un){t.next=16;break}return t.next=14,Ja(Un);case 14:t.next=26;break;case 16:if(!(r()&&o()&&i()[0])){t.next=26;break}if(l=i()[0],c=zV(Vn,e.storageProviders,l)){t.next=21;break}return t.abrupt("return");case 21:return u=Fn(c),t.next=24,Et(u);case 24:t.sent&&ha(l);case 26:Va({fetchAndOpenNewProjectSetupDialogForExample:Ja});case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){}))}),[]),c.useEffect((function(){var e=am(ii);return function(){om(e)}}),[ii]),E_({i18n:Vn,project:p.currentProject,previewEnabled:!!p.currentProject&&p.currentProject.getLayoutsCount()>0,onOpenProjectManager:Gr,hasPreviewsRunning:jt,allowNetworkPreview:!!q.current&&q.current.canDoNetworkPreview(),onLaunchPreview:vi,onHotReloadPreview:Ci,onLaunchDebugPreview:Bi,onLaunchNetworkPreview:ji,onLaunchPreviewWithDiagnosticReport:yi,onOpenHomePage:Ai,onCreateProject:function(){return Pe(!0)},onOpenProject:function(){return ca()},onSaveProject:wa,onSaveProjectAs:ka,onCloseApp:Wr,onCloseProject:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sa();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onExportGame:function(){return Zr("publish")},onInviteCollaborators:function(){return Zr("invite")},onOpenLayout:function(e){Pi(e)},onOpenExternalEvents:Ii,onOpenExternalLayout:Ei,onOpenEventsFunctionsExtension:Mi,onOpenCommandPalette:Ua,onOpenProfile:Hr,onRestartInGameEditor:ni});var Ha=c.useMemo((function(){return{resourceSources:Mn,onChooseResource:Oa,resourceExternalEditors:An,getStorageProvider:Nn,onFetchNewlyAddedResources:_a,getStorageProviderResourceOperations:Dn,canInstallPrivateAsset:Aa,onNewResourcesAdded:Ba,onResourceUsageChanged:oi}}),[Mn,Oa,An,Nn,_a,Dn,Aa,Ba,oi]),za=c.useMemo((function(){return Sn?new Bn({project:Sn}):null}),[Sn]),Wa=rB({project:p.currentProject,fileMetadata:Pn,isProjectOpening:Me,newProjectSetupDialogOpen:Se,setNewProjectSetupDialogOpen:Pe,createEmptyProject:Dr,createProjectFromExample:Nr,createProjectFromPrivateGameTemplate:_r,closeAskAi:Er,storageProviders:e.storageProviders,storageProvider:Nn(),resourceManagementProps:Ha,onOpenLayout:function(e,t){return Pi(e,t)},onWillInstallExtension:qr,onExtensionInstalled:Jr}),Ga=Wa.onSelectExampleShortHeader,Ya=Wa.onSelectPrivateGameTemplateListingData,qa=Wa.renderNewProjectDialog,Ja=Wa.fetchAndOpenNewProjectSetupDialogForExample,Xa=Wa.openNewProjectDialog,Ka=CV({fetchAndOpenNewProjectSetupDialogForExample:Ja,onOpenProfileDialog:Hr}),Qa=it.current,$a=!!w.limits&&!!w.limits.capabilities.classrooms&&w.limits.capabilities.classrooms.hideAskAi,no="hot-reload-for-in-game-edition"===Qa,ro=Me||Q||"preview"===Qa,ao=(0,V.LB)(),oo={i18n:Vn,project:p.currentProject,canSaveProjectAs:Za,recentProjectFiles:tt.getRecentProjectFiles({limit:20}),shortcutMap:ao,isApplicationTopLevelMenu:!1,hideAskAi:$a},so={onChooseProject:function(){return ca()},onOpenRecentFile:ha,onSaveProject:wa,onSaveProjectAs:ka,onShowVersionHistory:va,onCloseProject:Sa,onCloseApp:Wr,onExportProject:function(){return Zr("publish")},onInviteCollaborators:function(){return Zr("invite")},onCreateProject:function(){return Pe(!0)},onOpenProjectManager:function(){return se(!0)},onOpenHomePage:Ai,onOpenDebugger:_i,onOpenAbout:function(){return ge(!0)},onOpenPreferences:function(){return Ze(!0)},onOpenLanguage:function(){return de(!0)},onOpenProfile:Hr,onOpenAskAi:Ir,setElectronUpdateStatus:function(e){j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{updateStatus:e})}));var t=function(e){return"update-available"===e.status?"A new update is available!":""}(e),n=function(e){return"update-available"===e.status?"It will be downloaded and installed automatically (unless you deactivated this in preferences)":""}(e);t&&(new window.Notification(t,{body:n}).onclick=function(){return ge(!0)})}},lo=!!Pn&&!!Pn.ownerId,co=!!p.currentProject&&!ne&&(!Pn||!lo),po={gameEditorMode:wn,setGameEditorMode:Tn,editorTabs:p.editorTabs,currentProject:Sn,currentFileMetadata:Pn,canSave:co,isSavingProject:ne,isSharingEnabled:!ba&&!L,hasPreviewsRunning:jt,previewState:lt,checkedOutVersionStatus:ba,canDoNetworkPreview:!!q.current&&q.current.canDoNetworkPreview(),gamesPlatformFrameTools:Ka,toggleProjectManager:Gr,setEditorTabs:mr,saveProject:wa,openShareDialog:Zr,launchDebuggerAndPreview:Bi,launchNewPreview:vi,launchNetworkPreview:ji,launchHotReloadPreview:Ci,launchPreviewWithDiagnosticReport:yi,setPreviewOverride:function(e){var t=e.isPreviewOverriden,n=e.overridenPreviewLayoutName,r=e.overridenPreviewExternalLayoutName;ct((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isPreviewOverriden:t,overridenPreviewLayoutName:n,overridenPreviewExternalLayoutName:r})}))},openVersionHistoryPanel:va,onQuitVersionHistory:Ca,onOpenAskAi:Ir,onCloseAskAi:Er,getStorageProvider:Nn,setPreviewedLayout:function(e){var t=e.layoutName,n=e.externalLayoutName;ct((function(e){return(0,l.Z)((0,l.Z)({},e),{},{previewLayoutName:t,previewExternalLayoutName:n})}))},openExternalEvents:Ii,openLayout:Pi,openTemplateFromTutorial:Ra,openTemplateFromCourseChapter:Fa,previewDebuggerServer:bt,hotReloadPreviewButtonProps:Ti,resourceManagementProps:Ha,onCreateEventsFunction:function(e,t,n){var r=p.currentProject;if(r){(0,ai.cc)({step:"end",parentEditor:n});var i=!r.hasEventsFunctionsExtensionNamed(e),a=i?r.insertNewEventsFunctionsExtension(e,0):r.getEventsFunctionsExtension(e);i&&(a.setFullName(e),a.setDescription("Originally automatically extracted from events of the project")),a.getEventsFunctions().insertEventsFunction(t,0),Ft.loadProjectEventsFunctionsExtensions(r),(0,mm.VL)({shouldReloadProjectData:!1,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["created-events-function"]})}},openInstructionOrExpression:function(e,t){var n=p.currentProject,r=p.editorTabs;if(n){var i=e.getName();if(n.hasEventsFunctionsExtensionNamed(i)){var a=n.getEventsFunctionsExtension(i),o=(0,sd._u)(t),s=o.behaviorName,c=null,u=null;s&&(a.getEventsBasedBehaviors().has(s)?c=s:a.getEventsBasedObjects().has(s)&&(u=s));var d=rS(r,a);d?(d.editor.selectEventsFunctionByName(o.name,c,u),j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:UT(r,d.paneIdentifier,d.tabIndex)})}))):Mi(i,o.name,c,u)}else console.warn("Extension with name=".concat(i," can not be opened (no editor for this)"))}},onOpenCustomObjectEditor:Ui,onRenamedEventsBasedObject:function(e,t,n){j((function(n){return(0,l.Z)((0,l.Z)({},n),{},{editorTabs:tS(n.editorTabs,e.getName(),t)})})).then((function(e){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["renamed-custom-object"]})}))},onDeletedEventsBasedObject:function(e,t){j((function(n){return(0,l.Z)((0,l.Z)({},n),{},{editorTabs:tS(n.editorTabs,e.getName(),t)})})).then((function(e){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!0,reasons:["deleted-custom-object"]})}))},openObjectEvents:function(e,t){var n=p.currentProject,r=p.editorTabs;if(n)if(n.hasEventsFunctionsExtensionNamed(e)){var i=n.getEventsFunctionsExtension(e),a=rS(r,i);a?(a.editor.selectEventsBasedBehaviorByName(t),j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:UT(r,a.paneIdentifier,a.tabIndex)})}))):Mi(e,null,null,t)}else console.warn("Extension with name=".concat(e," can not be opened (no editor for this)"))},canOpen:!!e.storageProviders.filter((function(e){return!e.hiddenInOpenDialog})).length,openOpenFromStorageProviderDialog:ca,openFromFileMetadataWithStorageProvider:ha,openNewProjectDialog:Xa,openProjectManager:se,askToCloseProject:Sa,closeProject:Mr,onSelectExampleShortHeader:Ga,onSelectPrivateGameTemplateListingData:Ya,createEmptyProject:Dr,createProjectFromExample:Nr,onOpenProfileDialog:Hr,openLanguageDialog:de,openPreferencesDialog:Ze,openAboutDialog:ge,selectInAppTutorial:Ia,eventsFunctionsExtensionsState:Ft,isProjectClosedSoAvoidReloadingExtensions:Re,renameResourcesInProject:ST.jJ,openBehaviorEvents:function(e,t){var n=p.currentProject,r=p.editorTabs;if(n)if(n.hasEventsFunctionsExtensionNamed(e)){var i=n.getEventsFunctionsExtension(e),a=rS(r,i);a?(a.editor.selectEventsBasedBehaviorByName(t),j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:UT(r,a.paneIdentifier,a.tabIndex)})}))):Mi(e,null,t,null)}else console.warn("Extension with name=".concat(e," can not be opened (no editor for this)"))},onExtractAsExternalLayout:Hi,onExtractAsEventBasedObject:Qi,onEventBasedObjectTypeChanged:Xi,onOpenEventBasedObjectEditor:Ji,onOpenEventBasedObjectVariantEditor:ea,deleteEventsBasedObjectVariant:function(e,t,n){var r=t.getVariants(),i=n.getName();r.hasVariantNamed(i)&&(r.removeVariant(i),j((function(n){return(0,l.Z)((0,l.Z)({},n),{},{editorTabs:nS(n.editorTabs,e.getName(),t.getName(),i)})})).then((function(e){Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["deleted-custom-object-variant"]})})))},onEventsBasedObjectChildrenEdited:ta,onLoadEventsFunctionsExtensions:Yi,onSceneObjectEdited:na,onSceneObjectsDeleted:ra,onSceneEventsModifiedOutsideEditor:ia,onInstancesModifiedOutsideEditor:aa,onObjectsModifiedOutsideEditor:oa,onObjectGroupsModifiedOutsideEditor:sa,onWillInstallExtension:qr,onExtensionInstalled:Jr,onEffectAdded:ci,onObjectListsModified:ui,onExternalLayoutAssociationChanged:ri,gamesList:er,triggerHotReloadInGameEditorIfNeeded:Kr,onRestartInGameEditor:ni,showRestartInGameEditorAfterErrorButton:ei},fo=cS(p.editorTabs,"left"),ho=cS(p.editorTabs,"right");return(0,f.jsxs)("div",{className:"main-frame",children:[!!Ln&&Ln({crashReportUploadLevel:tt.values.previewCrashReportUploadLevel||"exclude-javascript-code-events",previewContext:jn?"preview-quick-customization":"preview",sourceGameId:jn||"",getIncludeFileHashs:vt.getIncludeFileHashs,onExport:function(){return Zr("publish")},onCaptureFinished:rr},(function(e){q.current=e})),(0,f.jsx)(mm.o4,{enabled:"embedded-game"===wn,previewDebuggerServer:bt||null,onLaunchPreviewForInGameEdition:Zi},Sn?Sn.ptr:0),!!Wn&&Wn((0,l.Z)((0,l.Z)({},oo),{},{isApplicationTopLevelMenu:!0}),so,{onClosePreview:q.current&&q.current.closePreview?q.current.closePreview:null}),(0,f.jsx)(k,{projectName:Sn?Sn.getName():null,fileMetadata:Pn,storageProvider:Nn(),i18n:Vn}),(0,f.jsx)(PU,{projectManagerOpen:oe,toggleProjectManager:Gr,title:p.currentProject?p.currentProject.getName():Vn._({id:"Menu"}),children:(0,f.jsx)(eo,{project:Sn,onChangeProjectName:Ea,onSaveProjectProperties:Ma,onOpenExternalEvents:Ii,onOpenLayout:function(e,t){return Pi(e,t)},onOpenExternalLayout:Ei,onOpenEventsFunctionsExtension:Mi,onDeleteLayout:function(t){var n=p.currentProject,r=e.i18n;n&&(y.ZP.showConfirmDialog(r._({id:"Are you sure you want to remove this scene? This can't be undone."}))&&j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:KT(e.editorTabs,t)})})).then((function(e){n.getFirstLayout()===t.getName()&&n.setFirstLayout(""),n.removeLayout(t.getName()),la()})))},onDeleteExternalLayout:function(t){var n=p.currentProject,r=e.i18n;n&&(y.ZP.showConfirmDialog(r._({id:"Are you sure you want to remove this external layout? This can't be undone."}))&&j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:QT(e.editorTabs,t)})})).then((function(e){e.currentProject&&e.currentProject.removeExternalLayout(t.getName()),la()})))},onDeleteEventsFunctionsExtension:Yr,onDeleteExternalEvents:function(t){var n=e.i18n;p.currentProject&&(y.ZP.showConfirmDialog(n._({id:"Are you sure you want to remove these external events? This can't be undone."}))&&j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:$T(e.editorTabs,t)})})).then((function(e){e.currentProject&&e.currentProject.removeExternalEvents(t.getName()),la()})))},onRenameLayout:function(t,n){var r=p.currentProject,i=e.i18n;if(r&&r.hasLayoutNamed(t)&&n!==t){var a=(0,xt.Z)(n||i._({id:"Unnamed"}),(function(e){return r.hasLayoutNamed(e)})),o=r.getLayout(t),s=t===r.getFirstLayout();j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:KT(e.editorTabs,o)})})).then((function(e){o.setName(a),UV.WholeProjectRefactorer.renameLayout(r,t,a),dt.current&&dt.current.changeData(t,a),s&&r.setFirstLayout(a),Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["renamed-scene"]}),la()}))}},onRenameExternalLayout:function(t,n){var r=p.currentProject,i=e.i18n;if(r&&r.hasExternalLayoutNamed(t)&&n!==t){var a=(0,xt.Z)(n||i._({id:"Unnamed"}),(function(e){return r.hasExternalLayoutNamed(e)})),o=r.getExternalLayout(t);j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:QT(e.editorTabs,o)})})).then((function(e){o.setName(a),UV.WholeProjectRefactorer.renameExternalLayout(r,t,a),Xr({shouldReloadProjectData:!0,shouldReloadLibraries:!1,shouldReloadResources:!1,shouldHardReload:!1,reasons:["renamed-external-layout"]}),la()}))}},onRenameEventsFunctionsExtension:function(e,t){var n=p.currentProject;if(n&&n.hasEventsFunctionsExtensionNamed(e)&&t!==e){var r=(0,xt.Z)(UV.Project.getSafeName(t),(function(e){return Ri(e,n)})),i=n.getEventsFunctionsExtension(e);UV.WholeProjectRefactorer.renameEventsFunctionsExtension(n,i,e,r),i.setName(r),Ft.unloadProjectEventsFunctionsExtension(n,e),j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{editorTabs:eS(t.editorTabs,e)})})).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft.reloadProjectEventsFunctionsExtensions(n);case 2:Xr({shouldReloadProjectData:!1,shouldReloadLibraries:!0,shouldReloadResources:!1,shouldHardReload:!1,reasons:["renamed-extension"]}),la();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},onRenameExternalEvents:function(t,n){var r=p.currentProject,i=e.i18n;if(r&&r.hasExternalEventsNamed(t)&&n!==t){var a=(0,xt.Z)(n||i._({id:"Unnamed"}),(function(e){return r.hasExternalEventsNamed(e)})),o=r.getExternalEvents(t);j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{editorTabs:$T(e.editorTabs,o)})})).then((function(e){o.setName(a),UV.WholeProjectRefactorer.renameExternalEvents(r,t,a),la()}))}},onOpenResources:Li,onReloadEventsFunctionsExtensions:Gi,onWillInstallExtension:qr,onExtensionInstalled:Jr,onSceneAdded:si,onExternalLayoutAdded:li,onShareProject:function(){return Zr()},isOpen:oe,hotReloadPreviewButtonProps:Ti,resourceManagementProps:Ha,projectScopedContainersAccessor:za,gamesList:er,onOpenHomePage:Ai,toggleProjectManager:Gr,mainMenuCallbacks:so,buildMainMenuProps:oo})}),Ka.renderGamesPlatformFrame(),(0,f.jsx)(sB.Z,{gameId:p.currentProject?p.currentProject.getProjectUuid():"",children:(0,f.jsx)(FV,{hasEditorsInLeftPane:fo,hasEditorsInRightPane:ho,renderPane:function(e){var t=e.paneIdentifier,n=e.isLeftMostPane,r=e.isRightMostPane,i=e.isDrawer,a=e.areSidePanesDrawers,o=e.onSetPointerEventsNone,s=e.onSetPaneDrawerState;return(0,f.jsx)(CS,(0,l.Z)((0,l.Z)({},po),{},{paneIdentifier:t,isLeftMostPane:n,isRightMostPane:r,isDrawer:i,areSidePanesDrawers:a,onSetPointerEventsNone:o,onSetPaneDrawerState:s}))}})}),(0,f.jsx)(X_,{ref:ut}),(0,f.jsx)(to.Z,{showImmediately:ro,showAfterDelay:no,progress:fn,message:ht||xn||(Qa?{id:"Loading preview..."}:null)}),(0,f.jsx)(u.Z,{open:p.snackMessageOpen,autoHideDuration:p.snackDuration,onClose:Cr,ContentProps:{"aria-describedby":"snackbar-message"},message:(0,f.jsx)("span",{id:"snackbar-message",children:p.snackMessage})}),_e&&En({onClose:kr,onChangeSubscription:kr,project:p.currentProject,onSaveProject:wa,isSavingProject:ne,fileMetadata:Pn,storageProvider:Nn(),initialTab:ze,gamesList:er}),U&&G&&!!Sn&&(0,f.jsx)(iB,{project:Sn,fileMetadata:Pn,getStorageProvider:Nn,i18n:Vn,resourceSources:Mn,onChooseResources:function(e){Y(null),H(null),G(e)},onClose:function(){Y(null),H(null),G({selectedResources:[],selectedSourceName:""})},options:U}),ve&&(0,f.jsx)(Ko,{onClose:function(){be(!1)}}),qa(),P&&(0,f.jsx)(aU,{cloudProjectId:P.fileIdentifier,onClose:function(){return I(null)},onOpenPreviousVersion:La}),F&&(0,f.jsx)(oU,{isLoading:ne,onClose:function(){return N(!1)},onSaveAsMainVersion:wa,onSaveAsDuplicate:ka}),ye&&(0,f.jsx)(we,{i18n:e.i18n,onClose:function(e){Ze(!1),e.languageDidChange&&Tr()},onOpenQuickCustomizationDialog:function(){return yn("fake-source-game-id-for-testing")}}),ue&&(0,f.jsx)(h_,{open:!0,onClose:function(e){de(!1),e.languageDidChange&&Tr()}}),he&&(0,f.jsx)(He,{open:!0,onClose:function(){return ge(!1)},updateStatus:In}),p.openFromStorageProviderDialogOpen&&(0,f.jsx)(Z_,{onClose:function(){return ca(!1)},storageProviders:e.storageProviders,onChooseProvider:function(e){ca(!1),Fn(e),fa()}}),p.saveToStorageProviderDialogOpen&&(0,f.jsx)(T_,{onClose:function(){return ja(!1)},storageProviders:e.storageProviders,onChooseProvider:function(e){ja(!1),ya({requestedStorageProvider:e})}}),Mt(),Ot(),Jn(),Qn(),xa(),Ta(),pr(),(0,f.jsx)(io,{shouldPrompt:!!p.currentProject,i18n:e.i18n,language:e.i18n.language,hasUnsavedChanges:Nt}),(0,f.jsx)(p_,{}),Xt&&(0,f.jsx)(oB,{open:!0,tutorialCompletionStatus:Xt.userProgress?Xt.userProgress.progress.every((function(e){return 100===e}))?"complete":"started":"notStarted",tutorialId:Xt.tutorialId,startTutorial:Da,onClose:function(){Kt(null)},isProjectOpening:Me}),p.gdjsDevelopmentWatcherEnabled&&Hn&&Hn({onGDJSUpdated:ki}),yt.length>0&&(0,f.jsx)(Q_,{logs:yt,onClose:wt,onLaunchNewPreview:function(){wt(),vi()}}),(Zt.length>0||null!==kt)&&(0,f.jsx)(Q_,{isForEditor:!0,logs:kt?[].concat((0,r.Z)(Zt),[{kind:"error",message:kt.message}]):Zt,onClose:function(){Tt(),St(),ti(!0)},onLaunchNewPreview:function(){Tt(),St(),ni("relaunched-after-uncaught-error-or-hot-reload-error")}}),Vt&&(0,f.jsx)(en,(0,l.Z)({ref:dt,tutorial:Vt,startStepIndex:Gt,startProjectData:Yt,project:Sn,quitInAppTutorialDialogOpen:an,i18n:e.i18n,endTutorial:function(e){var t=e.shouldCloseProject;e.shouldWarnAboutUnsavedChanges&&Sn&&(!Pn||Nt)?on(!0):Pa(t)}},tn)),an&&(0,f.jsx)(cB,{onSaveProject:wa,onClose:function(){return on(!1)},isSavingProject:ne,canEndTutorial:!!Pn&&!Nt,endTutorial:function(){Pa(!0)}}),cn&&Sn&&(0,f.jsx)(MU,{wholeProjectDiagnosticReport:Sn.getWholeProjectDiagnosticReport(),onClose:function(){return un(!1)}}),Je&&(0,f.jsx)(NV,{onClose:function(){return Xe(!1)}}),jn&&Sn&&(0,f.jsx)(lV,{project:Sn,resourceManagementProps:Ha,onLaunchPreview:wi,onClose:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Nt){e.next=6;break}return e.next=3,Qe({title:{id:"Leave the customization?"},message:{id:"Do you want to quit the customization? All your changes will be lost."},confirmButtonLabel:{id:"Leave"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return yn(null),e.next=9,Mr();case 9:Ai(),Nt||Di("build");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onlineWebExporter:Gn,isRequiredToSaveAsNewCloudProject:function(){return"Cloud"!==Nn().internalName},onSaveProject:(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Cloud"!==(t=Nn()).internalName){e.next=4;break}return wa(),e.abrupt("return");case 4:return["Empty","UrlStorageProvider"].includes(t.internalName)||console.error("Unexpected storage provider ".concat(t.internalName," when saving project from quick customization dialog. Saving anyway as a new cloud project.")),ya({requestedStorageProvider:sU.Z,forcedSavedAsLocation:{name:Sn.getName()}}),e.abrupt("return");case 7:case"end":return e.stop()}}),e)}))),isSavingProject:ne,canClose:!0,sourceGameId:jn,gameScreenshotUrls:ar(Sn.getProjectUuid()),onScreenshotsClaimed:ir,onWillInstallExtension:qr,onExtensionInstalled:Jr}),(0,f.jsx)(iU,{})]})}},21762:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(36600),o=n(40243),s=n(82422),l=n(86278),c=n(61325),u=n(24910),d=n(58582),p=n(92078),f=n(71106),h=n(60022),g=n(29343),m={campaign:{display:"flex",flex:1,borderRadius:8,padding:16},titleContainer:{width:"100%",display:"flex",justifyContent:"center"},bulletPointsContainer:{width:"100%",display:"flex",flexDirection:"column"},bulletIcon:{width:20,height:20,marginRight:10},bulletPointText:{flex:1}};t.Z=function(e){var t=e.marketingPlan,n=e.gameFeaturings,x=e.requirementsErrors,v=e.onPurchase,b=e.isPlanActive,C=e.hideBorder,j=i.useContext(f.ZP).limits,y=i.useContext(u.Z),Z=t.id,k=t.nameByLocale,w=t.canExtend,T=t.descriptionByLocale,S=t.bulletPointsByLocale,P=t.ownedBulletPointsByLocale,I=i.useMemo((function(){return n?n.filter((function(e){return e.expiresAt>Date.now()/1e3})):[]}),[n]),E=j?(0,d.aq)(t,j):null,M=x.length>0,L=b?P:S;return(0,g.jsx)(a.I18n,{children:function(e){var i=e.i18n;return(0,g.jsx)("div",{style:(0,r.Z)((0,r.Z)({},m.campaign),{},{border:C?void 0:b?"2px solid ".concat(y.message.valid):"1px solid ".concat(y.palette.secondary)}),children:(0,g.jsxs)(c.ak,{alignItems:"center",justifyContent:"space-between",noMargin:!0,expand:!0,children:[(0,g.jsx)("div",{style:m.titleContainer,children:(0,g.jsxs)(c.pJ,{justifyContent:"space-between",alignItems:"flex-start",expand:!0,noMargin:!0,children:[(0,g.jsxs)(c.pJ,{noMargin:!0,alignItems:"flex-start",children:[(0,d.j8)(t),(0,g.jsx)(l.Z,{size:"sub-title",children:(0,p.a)(i,k)})]}),E&&(0,g.jsx)(l.Z,{size:"body-small",color:"secondary",children:(0,g.jsx)(a.Trans,{id:"{planCreditsAmount} credits",values:{planCreditsAmount:E}})})]})}),(0,g.jsx)("div",{style:m.bulletPointsContainer,children:M?x.map((function(e,t){return(0,g.jsx)(o.sg,{expand:!0,noMargin:!0,children:(0,g.jsxs)(o.x1,{noMargin:!0,alignItems:"center",children:[(0,g.jsx)(s.Z,{style:(0,r.Z)((0,r.Z)({},m.bulletIcon),{},{color:y.message.error})}),(0,g.jsx)(l.Z,{style:m.bulletPointText,children:e})]})},t)})):L.map((function(e,t){return(0,g.jsx)(o.sg,{expand:!0,noMargin:!0,children:(0,g.jsxs)(o.x1,{noMargin:!0,alignItems:"center",children:[(0,g.jsx)(s.Z,{style:(0,r.Z)((0,r.Z)({},m.bulletIcon),b?{color:y.message.valid}:{})}),(0,g.jsx)(l.Z,{style:m.bulletPointText,children:(0,p.a)(i,e)})]})},t)}))}),(0,g.jsx)(o.sg,{noMargin:!0,alignItems:"flex-start",expand:!0,justifyContent:"flex-end",children:(0,g.jsx)(l.Z,{size:"body-small",noMargin:!0,color:"secondary",align:"left",children:b?(0,d.XN)({marketingPlan:t,i18n:i,hasErrors:M,activeGameFeaturings:I}):(0,p.a)(i,T)})}),(0,g.jsx)(h.Z,{primary:!b||w,onClick:function(){return v(i)},label:n?b?w?(0,g.jsx)(a.Trans,{id:"Extend"}):(0,g.jsx)(a.Trans,{id:"Activated"}):(0,g.jsx)(a.Trans,{id:"Purchase"}):(0,g.jsx)(a.Trans,{id:"Loading..."}),fullWidth:!0,disabled:!n})]})},Z)}})}},58582:function(e,t,n){"use strict";n.d(t,{XN:function(){return x},j8:function(){return f},aq:function(){return h},ap:function(){return m},Ib:function(){return g}});var r=n(36600),i=n(28381),a=n(16999),o=n(1413),s=n(78118),l=n(29343),c=i.memo((function(e){return(0,l.jsxs)(s.Z,(0,o.Z)((0,o.Z)({},e),{},{width:"35",height:"40",viewBox:"0 0 35 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M3.66272 3.00012L3.1062 3.55664L5.71722 6.16766L6.27374 5.61114L3.66272 3.00012Z",fill:"#848B99"}),(0,l.jsx)("path",{d:"M0.442144 10.2565L0.202881 11.0063L3.67081 12.1129L3.91007 11.3631L0.442144 10.2565Z",fill:"#848B99"}),(0,l.jsx)("path",{d:"M4.4833 23.2356L1.41846 25.2949L1.85739 25.9482L4.92223 23.8888L4.4833 23.2356Z",fill:"#848B99"}),(0,l.jsx)("path",{d:"M3.61608 17.009L0 17.4272L0.0904321 18.2091L3.70651 17.7909L3.61608 17.009Z",fill:"#848B99"}),(0,l.jsx)("path",{d:"M29.4879 22.873L27.1136 32.1143C26.9168 32.9604 26.0773 33.4851 25.2312 33.2883C25.2247 33.2883 25.2181 33.2883 25.2116 33.2818L23.7424 32.9079C22.8963 32.6784 22.3913 31.8192 22.6012 30.9665L24.4376 23.483L29.4879 22.873Z",fill:"#11A8E4"}),(0,l.jsx)("path",{d:"M33.9873 19.1739L33.6922 21.2333C33.5151 22.4467 32.387 23.2928 31.1671 23.1157L29.488 22.873L30.5899 16.4258L32.105 16.6488C33.3183 16.8259 34.1644 17.954 33.9873 19.1739Z",fill:"#11A8E4"}),(0,l.jsx)("path",{d:"M20.9681 28.6839L23.0342 29.2021L24.1688 24.6831L20.7124 27.405C20.2401 27.7788 20.391 28.5397 20.9681 28.6839Z",fill:"#FE664C"}),(0,l.jsx)("path",{d:"M30.59 16.4258L29.4881 22.873L24.4444 23.483L22.4243 23.7978C23.1458 22.0335 23.6508 20.1839 23.9263 18.295C24.1755 16.616 24.2345 14.9173 24.1099 13.2251L30.59 16.4258Z",fill:"#64D2FF"}),(0,l.jsx)("path",{d:"M18.2724 17.3312C17.8264 20.3941 16.823 23.0701 15.5833 24.8606C14.4552 26.4937 13.1238 27.3989 11.8383 27.2086C10.8938 27.0709 10.1002 26.3691 9.49683 25.2607C9.84444 25.6608 10.2511 25.91 10.6971 25.969C11.4448 26.074 12.2121 25.6608 12.9336 24.8541C13.4977 24.2244 14.0355 23.3587 14.5143 22.3093C14.9931 21.2664 15.3997 20.0399 15.7145 18.6954C15.7342 18.597 16.0621 16.8721 16.0621 16.8721C16.1408 16.3408 16.2917 14.6814 16.3048 14.3797C16.4032 12.0251 16.1212 9.96569 15.5243 8.549C15.0586 7.44713 14.4028 6.7519 13.6092 6.64041C13.2747 6.59449 12.9336 6.65352 12.5991 6.80437C13.3534 6.19441 14.147 5.91238 14.9275 6.02388C16.3376 6.23376 17.4198 7.70948 18.0101 9.9001C18.5545 11.9136 18.6856 14.5306 18.2724 17.3312Z",fill:"#26B2D1"}),(0,l.jsx)("path",{d:"M16.3048 14.3795C16.2917 14.6812 16.1409 16.3406 16.0622 16.8719C16.0622 16.8719 15.7342 18.5968 15.7145 18.6952C15.3997 20.0397 14.9931 21.2662 14.5143 22.3091C14.0421 23.3585 13.4977 24.2242 12.9336 24.8539C12.2056 25.6606 11.4448 26.0738 10.6971 25.9688C10.2511 25.9033 9.84447 25.6606 9.49685 25.2605C8.92624 24.6112 8.49992 23.5487 8.25069 22.2172C8.25069 22.2172 7.68664 19.4232 8.25069 15.7569C8.87377 11.5921 10.4741 8.19463 12.1663 7.04685C12.3106 6.94847 12.4548 6.86976 12.5991 6.80417C12.9402 6.65332 13.2813 6.59429 13.6092 6.6402C14.4028 6.7517 15.0521 7.44693 15.5243 8.5488C16.1212 9.96549 16.4032 12.0249 16.3048 14.3795Z",fill:"#3A6CA7"}),(0,l.jsx)("path",{d:"M16.2457 15.3045C16.2064 15.8161 16.1473 16.3408 16.0686 16.8721C16.0686 16.8721 15.885 17.9871 15.7997 18.3937C15.7801 18.4921 15.7538 18.597 15.7341 18.6954C14.4224 18.597 13.0254 18.4396 12.8745 18.4134C11.7267 18.2494 10.92 17.2787 11.0709 16.249C11.2217 15.2193 12.2711 14.524 13.4189 14.688C13.5698 14.7274 14.9864 14.9897 16.2457 15.3045Z",fill:"#FFC061"}),(0,l.jsx)("path",{d:"M23.9197 18.2951C23.6442 20.184 23.1392 22.027 22.4177 23.7913L15.5835 24.8604C16.8231 23.0699 17.8266 20.3939 18.2726 17.331C18.6858 14.5304 18.5546 11.9134 18.0102 9.8999L24.1033 13.2252C24.2279 14.9173 24.1689 16.6161 23.9197 18.2951Z",fill:"#C2C5C6"})]}))})),u=i.memo((function(e){return(0,l.jsxs)(s.Z,(0,o.Z)((0,o.Z)({},e),{},{width:"34",height:"40",viewBox:"0 0 34 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M17 31.8398C24.732 31.8398 31 25.5718 31 17.8398C31 10.1079 24.732 3.83984 17 3.83984C9.26801 3.83984 3 10.1079 3 17.8398C3 25.5718 9.26801 31.8398 17 31.8398Z",fill:"#C2C5C6"}),(0,l.jsx)("path",{d:"M29.3084 17.8396H24.5251C24.5251 16.4396 24.1751 15.2146 23.5334 14.0479C22.8917 12.8812 21.9001 11.9479 20.7917 11.3062L23.1834 7.16455C25.0501 8.27288 26.6251 9.78955 27.6751 11.6562C28.6667 13.5229 29.3084 15.6229 29.3084 17.8396Z",fill:"#F8B64C"}),(0,l.jsx)("path",{d:"M29.3084 17.8396C29.3084 20.0563 28.7251 22.1563 27.6751 23.9646C26.6251 25.8313 25.0501 27.4063 23.1834 28.4563L20.7917 24.3146C21.9584 23.6729 22.8917 22.6813 23.5334 21.5729C24.1751 20.4646 24.5251 19.1813 24.5251 17.7812H29.3084V17.8396Z",fill:"#FF7058"}),(0,l.jsx)("path",{d:"M13.2083 11.3065C12.0417 11.9481 11.1083 12.9398 10.4667 14.0481C9.82498 15.1565 9.47498 16.4398 9.47498 17.8398H4.69165C4.69165 15.6231 5.27498 13.5231 6.32498 11.7148C7.37498 9.84814 8.94998 8.27314 10.8167 7.22314L13.2083 11.3065Z",fill:"#54C0EB"}),(0,l.jsx)("path",{d:"M13.2083 24.3732L10.8167 28.5148C8.94998 27.4648 7.37498 25.8898 6.32498 24.0232C5.33332 22.1565 4.69165 20.0565 4.69165 17.8398H9.47498C9.47498 19.2398 9.82498 20.5232 10.4667 21.6315C11.1667 22.7398 12.1 23.6732 13.2083 24.3732Z",fill:"#84DBFF"}),(0,l.jsx)("path",{d:"M23.125 7.22292L20.7333 11.3646C19.625 10.7229 18.3416 10.3729 16.9416 10.3729C15.5416 10.3729 14.3166 10.7229 13.15 11.3646L10.7583 7.22292C12.6833 6.17292 14.7833 5.53125 17 5.53125C19.2166 5.53125 21.3166 6.17292 23.125 7.22292Z",fill:"#FFD15C"}),(0,l.jsx)("path",{d:"M17.0001 25.3649C21.156 25.3649 24.5251 21.9959 24.5251 17.8399C24.5251 13.684 21.156 10.3149 17.0001 10.3149C12.8442 10.3149 9.4751 13.684 9.4751 17.8399C9.4751 21.9959 12.8442 25.3649 17.0001 25.3649Z",fill:"#F2F2F2"}),(0,l.jsx)("path",{d:"M17.9335 16.4399C18.6335 16.9649 18.8085 17.9566 18.3418 18.6566C17.8168 19.3566 16.8251 19.5316 16.1251 19.0649C15.4251 18.5399 11.3418 13.8149 11.3418 13.8149C11.3418 13.8149 17.1751 15.9149 17.9335 16.4399Z",fill:"#40596B"}),(0,l.jsx)("path",{d:"M17 18.6562C17.5155 18.6562 17.9333 18.2383 17.9333 17.7229C17.9333 17.2074 17.5155 16.7896 17 16.7896C16.4845 16.7896 16.0667 17.2074 16.0667 17.7229C16.0667 18.2383 16.4845 18.6562 17 18.6562Z",fill:"#FF7058"}),(0,l.jsx)("path",{opacity:"0.15",d:"M17 6.69792C23.5917 6.69792 28.9583 11.8896 29.25 18.4229C29.25 18.2479 29.3083 18.0146 29.3083 17.8396C29.3083 11.0729 23.825 5.53125 17 5.53125C10.175 5.53125 4.69165 11.0729 4.69165 17.8396C4.69165 18.0146 4.69165 18.2479 4.74998 18.4229C5.04165 11.8896 10.4083 6.69792 17 6.69792Z",fill:"#40596B"})]}))})),d=i.memo((function(e){return(0,l.jsxs)(s.Z,(0,o.Z)((0,o.Z)({},e),{},{width:"34",height:"40",viewBox:"0 0 34 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M25.9447 4.00023C25.9887 4.00023 26.0332 4.00369 26.0777 4.01071C26.3972 4.06135 26.6601 4.28882 26.7562 4.59767L27.8579 8.14205L31.4023 9.24382C31.7112 9.33982 31.9387 9.60281 31.9893 9.92226C32.0399 10.2417 31.9047 10.5621 31.6407 10.7489L28.6102 12.892L28.6577 16.6034C28.6618 16.9267 28.482 17.2244 28.1939 17.3712C27.9058 17.5181 27.5592 17.4885 27.3001 17.2951L24.3253 15.0753L20.8102 16.2673C20.5039 16.3711 20.1652 16.2921 19.9366 16.0634C19.7079 15.8348 19.6288 15.4961 19.7327 15.1898L20.9247 11.6747L18.7049 8.6999C18.5114 8.44077 18.4819 8.09425 18.6287 7.80612C18.7756 7.51799 19.0744 7.33912 19.3966 7.34229L23.108 7.38976L25.2511 4.35927C25.4119 4.13198 25.6717 4.00023 25.9447 4.00023Z",fill:"#F7BB22"}),(0,l.jsx)("path",{d:"M9.93509 20.409C10.1525 20.409 10.37 20.4919 10.5358 20.6579C10.8676 20.9896 10.8676 21.5276 10.5358 21.8594L6.53073 25.8644C6.19893 26.1962 5.66096 26.1963 5.32922 25.8644C4.99742 25.5327 4.99742 24.9947 5.32922 24.6629L9.33431 20.6579C9.50027 20.492 9.71771 20.409 9.93509 20.409Z",fill:"#F4901B"}),(0,l.jsx)("path",{d:"M7.93241 27.2178C8.14985 27.2178 8.36729 27.3008 8.53313 27.4667C8.86493 27.7985 8.86493 28.3364 8.53313 28.6682L4.45016 32.7512C4.11842 33.0829 3.58045 33.0829 3.24865 32.7512C2.91685 32.4195 2.91685 31.8815 3.24865 31.5497L7.33162 27.4667C7.49752 27.3008 7.71497 27.2178 7.93241 27.2178Z",fill:"#F8B64C"}),(0,l.jsx)("path",{d:"M11.7372 19.4563C12.069 19.788 12.607 19.788 12.9388 19.4563L18.1742 14.2208C18.506 13.889 18.506 13.3511 18.1742 13.0193C18.0083 12.8534 17.7909 12.7704 17.5735 12.7704C17.3561 12.7704 17.1386 12.8534 16.9728 13.0193L11.7373 18.2548C11.4054 18.5865 11.4054 19.1245 11.7372 19.4563Z",fill:"#F8B64C"}),(0,l.jsx)("path",{d:"M20.9491 21.0588L22.9802 19.0278C23.312 18.696 23.312 18.1581 22.9802 17.8263C22.8143 17.6603 22.5968 17.5774 22.3794 17.5774C22.162 17.5774 21.9445 17.6604 21.7787 17.8263L19.7476 19.8573C19.4158 20.189 19.4158 20.7269 19.7476 21.0588C20.0793 21.3906 20.6172 21.3906 20.9491 21.0588Z",fill:"#F8B64C"}),(0,l.jsx)("path",{d:"M10.9363 26.2649L17.3444 19.8568C17.6762 19.525 17.6762 18.987 17.3444 18.6552C17.1785 18.4893 16.9611 18.4064 16.7437 18.4064C16.5263 18.4064 16.3088 18.4893 16.143 18.6552L9.73485 25.0634C9.40305 25.3951 9.40305 25.9331 9.73485 26.2649C10.0666 26.5966 10.6046 26.5966 10.9363 26.2649Z",fill:"#F4B24E"}),(0,l.jsx)("path",{d:"M17.3446 22.26L10.1354 29.4691C9.80365 29.8009 9.80365 30.3388 10.1354 30.6706C10.4672 31.0024 11.0052 31.0024 11.337 30.6706L18.5461 23.4615C18.8779 23.1298 18.8779 22.5918 18.5461 22.26C18.3802 22.0941 18.1627 22.0111 17.9453 22.0111C17.728 22.0111 17.5105 22.0941 17.3446 22.26Z",fill:"#F4901B"}),(0,l.jsx)("path",{d:"M10.7595 11.9302L11.6092 11.9302L11.6092 12.7798C11.6092 13.249 11.9895 13.6294 12.4588 13.6294C12.928 13.6294 13.3084 13.249 13.3084 12.7798L13.3084 11.9302L14.158 11.9302C14.6272 11.9302 15.0076 11.5498 15.0076 11.0806C15.0076 10.6114 14.6272 10.231 14.158 10.231L13.3084 10.231L13.3084 9.38137C13.3084 8.91217 12.928 8.53177 12.4588 8.53177C11.9895 8.53177 11.6092 8.91216 11.6092 9.38137L11.6092 10.231L10.7595 10.231C10.2903 10.231 9.90994 10.6114 9.90994 11.0806C9.90994 11.5498 10.2903 11.9302 10.7595 11.9302Z",fill:"#FFAA5C"}),(0,l.jsx)("path",{d:"M27.7517 31.3008L28.6013 31.3008L28.6013 32.1504C28.6013 32.6196 28.9817 33 29.4509 33C29.9202 33 30.3005 32.6196 30.3005 32.1504L30.3005 31.3008L31.1502 31.3008C31.6194 31.3008 31.9998 30.9204 31.9998 30.4512C31.9998 29.982 31.6194 29.6016 31.1502 29.6016L30.3005 29.6016L30.3005 28.752C30.3005 28.2828 29.9202 27.9024 29.4509 27.9024C28.9817 27.9024 28.6013 28.2828 28.6013 28.752L28.6013 29.6016L27.7517 29.6016C27.2825 29.6016 26.9021 29.982 26.9021 30.4512C26.9021 30.9204 27.2825 31.3008 27.7517 31.3008Z",fill:"#FFAA5C"}),(0,l.jsx)("path",{d:"M22.9373 25.2403C22.9373 24.7711 22.5569 24.3907 22.0877 24.3907C21.6185 24.3907 21.2381 24.7711 21.2381 25.2403L21.2381 26.0899L20.3885 26.0899C19.9192 26.0899 19.5388 26.4703 19.5388 26.9395C19.5388 27.4087 19.9192 27.7891 20.3885 27.7891L21.2381 27.7891L21.2381 28.6387C21.2381 29.1079 21.6185 29.4883 22.0877 29.4883C22.5569 29.4883 22.9373 29.1079 22.9373 28.6387L22.9373 27.7891L23.7869 27.7891C24.2561 27.7891 24.6365 27.4087 24.6365 26.9395C24.6365 26.4703 24.2561 26.0899 23.7869 26.0899L22.9373 26.0899L22.9373 25.2403Z",fill:"#F6C547"}),(0,l.jsx)("path",{d:"M16.707 30.3374C16.2378 30.3374 15.8574 30.7178 15.8574 31.187C15.8574 31.6562 16.2378 32.0366 16.707 32.0366C17.1763 32.0366 17.5566 31.6562 17.5566 31.187C17.5566 30.7178 17.1763 30.3374 16.707 30.3374Z",fill:"#F8B64C"}),(0,l.jsx)("path",{d:"M28.0349 21.8418C27.5657 21.8418 27.1853 22.2222 27.1853 22.6914C27.1853 23.1606 27.5657 23.541 28.0349 23.541C28.5041 23.541 28.8845 23.1606 28.8845 22.6914C28.8845 22.2222 28.5041 21.8418 28.0349 21.8418Z",fill:"#FFD15C"}),(0,l.jsx)("path",{d:"M8.21094 4.84962C7.74172 4.84962 7.36134 5.23 7.36134 5.69922C7.36134 6.16845 7.74172 6.54883 8.21094 6.54883C8.68017 6.54883 9.06055 6.16845 9.06055 5.69922C9.06055 5.23 8.68017 4.84962 8.21094 4.84962Z",fill:"#F8B64C"}),(0,l.jsx)("path",{d:"M4.81251 16.1777C4.34328 16.1777 3.9629 16.5581 3.9629 17.0273C3.9629 17.4966 4.34328 17.877 4.81251 17.877C5.28173 17.877 5.66211 17.4966 5.66211 17.0273C5.66211 16.5581 5.28173 16.1777 4.81251 16.1777Z",fill:"#FFD15C"})]}))})),p={iconStyle:{width:40,height:40}},f=function(e){switch(e.icon){case"speaker":return(0,l.jsx)(c,{style:p.iconStyle});case"speedometer":return(0,l.jsx)(u,{style:p.iconStyle});case"stars":return(0,l.jsx)(d,{style:p.iconStyle});default:return null}},h=function(e,t){if(!t)return null;var n=t.credits.prices[e.id];return n?n.priceInCredits:null},g=function(e,t){return!!t&&e.includedFeaturings.every((function(e){return t.some((function(t){return t.featuring===e}))}))},m=function(e,t){var n=[],i=t.gameRequirements;return i.hasThumbnail&&!(0,a.nC)(e)&&n.push((0,l.jsx)(r.Trans,{id:"You don't have a thumbnail"})),i.isPublished||e.publicWebBuildId||n.push((0,l.jsx)(r.Trans,{id:"Your game is not published on gd.games"})),i.isDiscoverable&&!e.discoverable&&n.push((0,l.jsx)(r.Trans,{id:"Your game is hidden on gd.games"})),n},x=function(e){var t=e.marketingPlan,n=e.i18n,i=e.hasErrors,a=e.activeGameFeaturings;if(i)return(0,l.jsx)(r.Trans,{id:"Fix those issues to get the campaign up!"});var o=function(e,t){return t.filter((function(t){return e.includedFeaturings.includes(t.featuring)}))}(t,a);if(0===o.length||!t.showExpirationDate)return null;var s=o[0];return t.requiresManualContact?t.requiresManualContact?(0,l.jsx)(r.Trans,{id:"Active, we will get in touch to get the campaign up!"}):(0,l.jsx)(r.Trans,{id:"Active"}):(0,l.jsx)(r.Trans,{id:"Active until {0}",values:{0:n.date(1e3*s.expiresAt)}})}},35666:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(36600),i=n(28381),a=n(1773),o=n(10888),s=n(74165),l=n(15861),c=n(29439),u=n(71106),d=n(61325),p=n(16999),f=n(86278),h=n(96591),g=n(2066),m=n(78081),x=n(75383),v=n(5051),b=n(58582),C=n(21762),j=n(81840),y=n(29343),Z=function(e){var t=e.game,n=i.useContext(u.ZP),a=n.profile,o=n.getAuthorizationHeader,Z=i.useContext(v.Y),k=Z.marketingPlans,w=Z.error,T=Z.fetchMarketingPlans,S=i.useState(null),P=(0,c.Z)(S,2),I=P[0],E=P[1],M=i.useState(null),L=(0,c.Z)(M,2),A=L[0],O=L[1],R=i.useMemo((function(){return I?I.filter((function(e){return e.expiresAt>Date.now()/1e3})):null}),[I]);i.useEffect((function(){T()}),[T]);var F=i.useCallback((0,l.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&t){e.next=3;break}return E([]),e.abrupt("return");case 3:return e.prev=3,O(null),e.next=7,(0,p.LK)(o,{gameId:t.id,userId:a.id});case 7:n=e.sent,E(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("An error occurred while fetching game featurings.",e.t0),O(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),[t,o,a]);i.useEffect((function(){F()}),[F]);var D=(0,j.Z)({game:t,activeGameFeaturings:R,fetchGameFeaturings:F}).onPurchaseMarketingPlan;return(0,y.jsx)(r.I18n,{children:function(e){e.i18n;return w||A?(0,y.jsx)(x.Z,{onRetry:function(){T(),F()},children:(0,y.jsx)(r.Trans,{id:"Error while loading the marketing plans. Verify your internet connection or try again later."})}):k?(0,y.jsxs)(d.ak,{noMargin:!0,children:[(0,y.jsx)(f.Z,{color:"secondary",noMargin:!0,children:(0,y.jsx)(r.Trans,{id:"Make your game visible to the GDevelop community and to the world with Marketing Boosts. <0>Read more</0> about how they increase your views.",components:[(0,y.jsx)(h.Z,{href:"https://wiki.gdevelop.io/gdevelop5/interface/games-dashboard/marketing",onClick:function(){return g.ZP.openExternalURL("https://wiki.gdevelop.io/gdevelop5/interface/games-dashboard/marketing")}})]})}),(0,y.jsx)(d.ep,{noColumnMargin:!0,children:k.map((function(e){var n=(0,b.Ib)(e,R),r=n&&t?(0,b.ap)(t,e):[];return(0,y.jsx)(C.Z,{gameFeaturings:I,marketingPlan:e,onPurchase:function(t){return D(t,e)},isPlanActive:n,requirementsErrors:r})}))})]}):(0,y.jsx)(m.Z,{})}})},k=function(e){var t=e.game,n=e.onClose;return(0,y.jsx)(a.ZP,{title:(0,y.jsx)(r.Trans,{id:"Marketing campaigns"}),actions:[(0,y.jsx)(o.Z,{label:(0,y.jsx)(r.Trans,{id:"Back"}),primary:!1,onClick:n},"close")],open:!0,onRequestClose:n,children:(0,y.jsx)(Z,{game:t})})}},5051:function(e,t,n){"use strict";n.d(t,{Y:function(){return u},c:function(){return d}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(16999),l=n(4900),c=n(29343),u=o.createContext({fetchMarketingPlans:function(){},marketingPlans:null,error:null}),d=function(e){var t=e.children,n=o.useState(null),d=(0,a.Z)(n,2),p=d[0],f=d[1],h=o.useState(null),g=(0,a.Z)(h,2),m=g[0],x=g[1],v=o.useRef(!1),b=o.useCallback((function(){v.current||m||(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),v.current=!0,e.prev=2,e.next=5,(0,s.lX)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," marketing plans from the store.")),x(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Unable to load the marketing plans from the store:",e.t0),f(e.t0);case 14:v.current=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()}),[m]);o.useEffect((function(){if(!v.current){var e=setTimeout((function(){console.info("Pre-fetching marketing plans..."),b()}),l.NH);return function(){return clearTimeout(e)}}}),[b]);var C=o.useMemo((function(){return{marketingPlans:m,fetchMarketingPlans:b,error:p}}),[m,b,p]);return(0,c.jsx)(u.Provider,{value:C,children:t})}},81840:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(36600),o=n(28381),s=n(16999),l=n(92078),c=n(58582),u=n(62903),d=n(65056),p=n(71106),f=n(29343);t.Z=function(e){var t=e.game,n=e.activeGameFeaturings,h=e.fetchGameFeaturings,g=o.useContext(p.ZP),m=g.profile,x=g.getAuthorizationHeader,v=g.limits,b=o.useContext(u.q$),C=b.openCreditsPackageDialog,j=b.openCreditsUsageDialog,y=(0,d.Z)().showAlert,Z=o.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(o,u){var d,p,g,b,Z,k,w,T,S;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&m&&v){e.next=4;break}return e.next=3,y({title:{id:"Select a game"},message:{id:"In order to purchase a marketing boost, log-in and select a game in your dashboard."}});case 3:return e.abrupt("return");case 4:if(d=u.id,p=u.nameByLocale,g=u.canExtend,b=u.requiresManualContact,Z=u.additionalSuccessMessageByLocale,k=(0,c.aq)(u,v)){e.next=8;break}return e.abrupt("return");case 8:if(w=(0,l.a)(o,p),!(T=(0,c.Ib)(u,n))||g){e.next=15;break}if(!b){e.next=14;break}return e.next=14,y({title:{id:"Featuring already active"},message:{id:"You already have an active {translatedName} featuring for your game {0}. Check your emails or discord, we will get in touch with you to get the campaign up!",values:{0:t.gameName,translatedName:w}}});case 14:return e.abrupt("return");case 15:if(!((S=v.credits.userBalance.amount)<k)){e.next=19;break}return C({missingCredits:k-S}),e.abrupt("return");case 19:j({title:T&&g?(0,f.jsx)(a.Trans,{id:"Extend Featuring"}):(0,f.jsx)(a.Trans,{id:"Get Featuring"}),message:T&&g?(0,f.jsx)(a.Trans,{id:"You are about to use {planCreditsAmount} credits to extend the game featuring {translatedName} for your game {0} and push it to the top of gd.games. Continue?",values:{0:t.gameName,planCreditsAmount:k,translatedName:w}}):(0,f.jsx)(a.Trans,{id:"You are about to use {planCreditsAmount} credits to purchase the game featuring {translatedName} for your game {0}. Continue?",values:{0:t.gameName,planCreditsAmount:k,translatedName:w}}),onConfirm:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Ui)(x,{gameId:t.id,usageType:d,userId:m.id});case 2:return e.next=4,h();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),successMessage:(0,f.jsxs)("span",{children:[(0,f.jsx)(a.Trans,{id:"\ud83c\udf89 Congrats on getting the {translatedName} featuring for your game {0}!",values:{0:t.gameName,translatedName:w}})," ",(0,l.a)(o,Z)]})});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t,x,v,m,y,h,C,j,n]);return{onPurchaseMarketingPlan:Z}}},87567:function(e,t,n){"use strict";var r=n(29439),i=n(36600),a=n(28381),o=n(10888),s=n(1773),l=n(42986),c=n(4076),u=n(61325),d=n(86278),p=n(29343);t.Z=function(e){var t=e.initialName,n=e.onApply,f=e.onCancel,h=e.isDuplicationBeforeEdition,g=a.useState(t),m=(0,r.Z)(g,2),x=m[0],v=m[1],b=a.useCallback((function(){n(x)}),[n,x]);return(0,p.jsx)(s.ZP,{title:(0,p.jsx)(i.Trans,{id:"Create a new variant"}),id:"create-variant-dialog",actions:[(0,p.jsx)(o.Z,{label:(0,p.jsx)(i.Trans,{id:"Cancel"}),onClick:f},"cancel"),(0,p.jsx)(s.vF,{label:(0,p.jsx)(i.Trans,{id:"Create"}),primary:!0,onClick:b},"apply")],secondaryActions:[(0,p.jsx)(c.Z,{helpPagePath:"/objects/custom-objects-prefab-template"},"help-button")],onRequestClose:f,onApply:b,open:!0,maxWidth:"sm",children:(0,p.jsxs)(u.ak,{noMargin:!0,children:[h&&(0,p.jsx)(d.Z,{children:(0,p.jsx)(i.Trans,{id:"This variant can't be modified directly. It must be duplicated first."})}),(0,p.jsx)(l.Z,{fullWidth:!0,id:"variant-name",commitOnBlur:!0,floatingLabelText:(0,p.jsx)(i.Trans,{id:"Variant name"}),floatingLabelFixed:!0,value:x,translatableHintText:{id:"Variant name"},onChange:v,autoFocus:"desktop"})]})})}},43416:function(e,t,n){"use strict";n.d(t,{R$:function(){return $},fh:function(){return ee},h:function(){return ne},jj:function(){return te},jy:function(){return Q}});var r=n(29439),i=n(74165),a=n(15861),o=n(36600),s=n(28381),l=n(25777),c=n(40243),u=n(44397),d=n(94446),p=n(38092),f=n(95644),h=n(18455),g=n(92666),m=n(86278),x=n(38501),v=n(3108),b=n(33133),C=n(36262),j=n(8005),y=n(13498),Z=n(92319),k=n(8278),w=n(29050),T=n(72410),S=n(2632),P=n(10888),I=n(60022),E=n(9383),M=n(61325),L=n(6996),A=n(1491),O=n(90264),R=n(53162),F=n(44634),D=n(1773),N=n(4076),_=n(50813),B=n(81683),U=n(90242),V=n(87567),H=n(79431),z=n(41006),W=n(65056),G=n(32832),Y=n(26807),q=n(94258),J=n(29343),X=n.g.gd,K={icon:{width:16,height:16}},Q=function(){return(0,J.jsx)(p.Z,{kind:"warning",children:(0,J.jsx)(G.r,{translatableSource:{id:"Children configurations are deprecated. This [migration documentation](https://wiki.gdevelop.io/gdevelop5/objects/custom-objects-prefab-template/migrate-to-variants/) can help you use variants instead."},isStandaloneText:!0})})},$=function(e,t){return e&&e.getVariants().hasVariantNamed(t.getVariantName())?t.getVariantName():""},ee=function(e,t,n){return!!(e&&t&&n)&&(""===function(e,t){var n=$(e,t),r=e.getVariants();return n?r.getVariant(n):e.getDefaultVariant()}(t,e).getAssetStoreAssetId()&&(!!$(t,e)||"gdevelop-extension-store"!==n.getOriginName()))},te=function(e,t,n,r,i,a){if(n&&t){var o=n.getVariants(),s=(0,H.Z)(e||a._({id:"New variant"}),(function(e){return o.hasVariantNamed(e)})),l=$(n,t),c=l?o.getVariant(l):n.getDefaultVariant(),u=o.insertNewVariant(s,0);(0,z.qx)(u,(0,z.XH)(c),"unserializeFrom",i),u.setName(s),u.setAssetStoreAssetId(""),u.setAssetStoreOriginalName(""),t.setVariantName(s)}},ne=function(e,t,n,r,i){if(e&&t&&n&&i){var a=t.getVariants(),o=e.getVariantName();a.hasVariantNamed(o)&&(e.setVariantName(""),i(n,t,a.getVariant(o)))}};t.ZP=function(e){var t=(0,x.Z)(),n=e.objectConfiguration,H=e.project,z=e.layout,G=e.eventsFunctionsExtension,re=e.eventsBasedObject,ie=e.object,ae=e.objectName,oe=e.resourceManagementProps,se=e.projectScopedContainersAccessor,le=e.onSizeUpdated,ce=e.onObjectUpdated,ue=e.unsavedChanges,de=e.renderObjectNameField,pe=e.isChildObject,fe=e.onOpenEventBasedObjectVariantEditor,he=e.onDeleteEventsBasedObjectVariant,ge=(0,L.UQ)().isMobile,me=X.asCustomObjectConfiguration(n),xe=(0,u.gF)()[me.getType()],ve=(0,W.Z)().showDeleteConfirmation,be=s.useContext(C.ZP).values,Ce=(0,d.cG)(me.getType()),je=X.PlatformExtension.getExtensionFromFullObjectType(me.getType()),ye=H.hasEventsFunctionsExtensionNamed(je)?H.getEventsFunctionsExtension(je):null,Ze=H.hasEventsBasedObject(me.getType())?H.getEventsBasedObject(me.getType()):null,ke=me.getAnimations(),we=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n,r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,k.Ng)(ke)){e.next=3;break}return e.abrupt("return");case 3:return r=n.getImageName(),a=T.Z.getResourceFullUrl(H,r,{}),o=null,e.prev=6,e.next=9,(0,w.U)(a);case 9:o=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.error("Unable to create a matching collision mask for the sprite, fallback to full image collision mask.",e.t0);case 15:(0,k.E8)(ke,o),t();case 17:case"end":return e.stop()}}),e,null,[[6,12]])}))),[ke,H,t]),Te=s.useRef(null),Se=s.useRef(null),Pe=s.useState(null),Ie=(0,r.Z)(Pe,2),Ee=Ie[0],Me=Ie[1],Le=s.useRef(null);s.useEffect((function(){Te.current&&Le.current&&Ee&&(Te.current.scrollTo(Le.current),Me(null),Le.current=null)}),[Ee]);var Ae=s.useState(!1),Oe=(0,r.Z)(Ae,2),Re=Oe[0],Fe=Oe[1],De=s.useState(!1),Ne=(0,r.Z)(De,2),_e=Ne[0],Be=Ne[1],Ue=s.useState(!1),Ve=(0,r.Z)(Ue,2),He=Ve[0],ze=Ve[1],We=s.useState(!1),Ge=(0,r.Z)(We,2),Ye=Ge[0],qe=Ge[1],Je=s.useCallback((function(){ee(me,Ze,ye)?ye&&Ze&&fe&&fe(ye.getName(),Ze.getName(),me.getVariantName()):qe(!0)}),[me,fe,ye,Ze]),Xe=s.useCallback((function(e,n){te(n,me,Ze,ye,H,e),ze(!1),t()}),[me,Ze,ye,t,H]),Ke=s.useCallback((function(e,n){te(n,me,Ze,ye,H,e),qe(!1),t(),Je()}),[me,Ze,ye,t,H,Je]),Qe=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve({title:{id:"Remove variant"},message:{id:"Are you sure you want to remove this variant from your project? This can't be undone."}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:ne(me,Ze,ye,H,he),t();case 7:case"end":return e.stop()}}),e)}))),[me,Ze,t,he,H,ye,ve]),$e=$(Ze,me),et=s.useMemo((function(){return(0,q.ZP)({properties:me.getProperties(),defaultValueProperties:Ze?Ze.getPropertyDescriptors():null,getProperties:function(e){return e.getProperties()},onUpdateProperty:function(e,t,n){e.updateProperty(t,n)},object:ie,visibility:"All"})}),[me,Ze,ie]);return(0,J.jsx)(o.I18n,{children:function(e){var n=e.i18n;return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(S.Z,{ref:Te,children:(0,J.jsxs)(M.ak,{noMargin:!0,children:[de&&de(),Ce.map((function(e){return(0,J.jsx)(f.Z,{tutorialId:e},e)})),(0,J.jsxs)(s.Fragment,{children:[xe?(0,J.jsx)(c.x1,{children:(0,J.jsx)(M.ak,{noMargin:!0,children:xe.map((function(e,t){var r=e.kind,i=e.message;return(0,J.jsx)(p.Z,{kind:r,children:n._(i)},t)}))})}):null,(0,J.jsx)(l.Z,{project:H,object:ie,schema:et,instances:[me],unsavedChanges:ue,resourceManagementProps:oe,projectScopedContainersAccessor:se,placeholder:Ze&&0===Ze.getObjects().getObjectsCount()&&!Ze.isAnimatable()?(0,J.jsx)(o.Trans,{id:"There is nothing to configure for this object. You can still use events to interact with the object."}):null}),!me.isForcedToOverrideEventsBasedObjectChildrenConfiguration()&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(M.pJ,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,J.jsx)(m.Z,{size:"block-title",children:"Variant"}),(0,J.jsx)(c.sg,{children:(0,J.jsxs)(M.pJ,{children:[(0,J.jsx)(Y.Z,{label:(0,J.jsx)(o.Trans,{id:"Delete"}),leftIcon:(0,J.jsx)(R.Z,{}),onClick:Qe,disabled:!$e},"delete-variant"),(0,J.jsx)(Y.Z,{label:(0,J.jsx)(o.Trans,{id:"Duplicate"}),leftIcon:(0,J.jsx)(O.Z,{}),onClick:function(){return ze(!0)}},"duplicate-variant"),(0,J.jsx)(P.Z,{label:(0,J.jsx)(o.Trans,{id:"Edit"}),leftIcon:(0,J.jsx)(F.Z,{}),onClick:Je},"edit-variant")]})})]}),(0,J.jsx)(M.ak,{expand:!0,noMargin:!0,children:(0,J.jsxs)(B.Z,{id:"variant-name",floatingLabelText:(0,J.jsx)(o.Trans,{id:"Variant"}),value:$e,onChange:function(e,n,r){me.setVariantName(r),ce&&ce(),t()},children:[(0,J.jsx)(U.Z,{value:"",label:{id:"Default"}},"default-variant"),Ze&&(0,h.mapFor)(0,Ze.getVariants().getVariantsCount(),(function(e){if(!Ze)return null;var t=Ze.getVariants().getVariantAt(e);return(0,J.jsx)(U.Z,{value:t.getName(),label:t.getName()},"variant-"+t.getName())}))]})})]}),(!$e||me.isForcedToOverrideEventsBasedObjectChildrenConfiguration())&&Ze&&(me.isForcedToOverrideEventsBasedObjectChildrenConfiguration()||me.isMarkedAsOverridingEventsBasedObjectChildrenConfiguration()?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(c.x1,{alignItems:"center",children:[(0,J.jsx)(c.sg,{expand:!0,noMargin:!0,children:(0,J.jsx)(m.Z,{size:"block-title",children:"Children objects"})}),!me.isForcedToOverrideEventsBasedObjectChildrenConfiguration()&&(0,J.jsx)(c.sg,{alignItems:"right",children:(0,J.jsx)(P.Z,{leftIcon:(0,J.jsx)(_.Z,{style:K.icon}),label:(0,J.jsx)(o.Trans,{id:"Reset and hide children configuration"}),onClick:function(){me.setMarkedAsOverridingEventsBasedObjectChildrenConfiguration(!1),me.clearChildrenConfiguration(),ce&&ce(),t()}})})]}),!me.isForcedToOverrideEventsBasedObjectChildrenConfiguration()&&(0,J.jsx)(Q,{}),(0,h.mapFor)(0,Ze.getObjects().getObjectsCount(),(function(e){var n=Ze.getObjects().getObjectAt(e),r=me.getChildObjectConfiguration(n.getName()),i=g.Z.getEditorConfiguration(H,r.getType()).component,a=X.MetadataProvider.getObjectMetadata(X.JsPlatform.get(),r.getType()).getIconFilename(),o=(0,d.cG)(r.getType()),s=o.filter((function(e){return!be.hiddenTutorialHints[e]}));return(0,J.jsxs)(v.UQ,{defaultExpanded:!0,children:[(0,J.jsxs)(v._m,{children:[a?(0,J.jsx)(b.q,{src:a,alt:n.getName(),size:20}):null,(0,J.jsx)(c.sg,{expand:!0,children:(0,J.jsx)(m.Z,{size:"block-title",children:n.getName()})})]}),(0,J.jsx)(v.X1,{children:(0,J.jsxs)(c.sg,{expand:!0,noMargin:!0,noOverflowParent:!0,children:[s.length?(0,J.jsx)(c.x1,{children:(0,J.jsx)(M.ak,{expand:!0,children:o.map((function(e){return(0,J.jsx)(f.Z,{tutorialId:e},e)}))})}):null,(0,J.jsx)(c.x1,{noMargin:!0,children:(0,J.jsx)(c.sg,{expand:!0,children:(0,J.jsx)(i,{isChildObject:!0,objectConfiguration:r,project:H,layout:z,eventsFunctionsExtension:G,eventsBasedObject:re,projectScopedContainersAccessor:se,resourceManagementProps:oe,onSizeUpdated:t,objectName:ae+" "+n.getName(),onObjectUpdated:ce,unsavedChanges:ue})})})]})})]},n.getName())}))]}):null),Ze&&Ze.isAnimatable()&&(0,J.jsxs)(c.sg,{expand:!0,children:[(0,J.jsx)(m.Z,{size:"block-title",children:(0,J.jsx)(o.Trans,{id:"Animations"})}),(0,J.jsx)(j.Z,{ref:Se,animations:ke,project:H,layout:z,eventsFunctionsExtension:G,eventsBasedObject:re,object:ie,objectName:ae,resourceManagementProps:oe,onSizeUpdated:le,onObjectUpdated:ce,isAnimationListLocked:!1,scrollView:Te,onCreateMatchingSpriteCollisionMask:we})]})]})]})}),Ze&&Ze.isAnimatable()&&!pe&&(0,J.jsx)(c.sg,{noMargin:!0,children:(0,J.jsxs)(M.ep,{justifyContent:"space-between",noColumnMargin:!0,children:[ge?(0,J.jsx)(E.Z,{label:(0,J.jsx)(o.Trans,{id:"Edit collision masks"}),onClick:function(){return Be(!0)},disabled:!(0,k.K3)(ke),buildMenuTemplate:function(e){return[{label:e._({id:"Edit points"}),disabled:!(0,k.K3)(ke),click:function(){return Fe(!0)}}]}}):(0,J.jsxs)(M.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,J.jsx)(P.Z,{label:(0,J.jsx)(o.Trans,{id:"Edit collision masks"}),onClick:function(){return Be(!0)},disabled:!(0,k.K3)(ke)}),(0,J.jsx)(P.Z,{label:(0,J.jsx)(o.Trans,{id:"Edit points"}),onClick:function(){return Fe(!0)},disabled:!(0,k.K3)(ke)})]}),(0,J.jsx)(I.Z,{label:(0,J.jsx)(o.Trans,{id:"Add an animation"}),primary:!0,onClick:function(){Se.current&&Se.current.addAnimation()},icon:(0,J.jsx)(A.Z,{})})]})}),Re&&(0,J.jsx)(D.ZP,{title:(0,J.jsx)(o.Trans,{id:"Edit points"}),actions:[(0,J.jsx)(I.Z,{label:(0,J.jsx)(o.Trans,{id:"Apply"}),primary:!0,onClick:function(){return Fe(!1)}},"apply")],secondaryActions:[(0,J.jsx)(N.Z,{helpPagePath:"/objects/sprite/edit-points"},"help")],onRequestClose:function(){return Fe(!1)},maxWidth:"lg",flexBody:!0,fullHeight:!0,open:Re,children:(0,J.jsx)(y.Z,{animations:ke,resourcesLoader:T.Z,project:H,onPointsUpdated:ce,onRenamedPoint:function(e,t){ie&&(z?X.WholeProjectRefactorer.renameObjectPointInScene(H,z,ie,e,t):G&&re&&X.WholeProjectRefactorer.renameObjectPointInEventsBasedObject(H,G,re,ie,e,t))}})}),_e&&(0,J.jsx)(D.ZP,{title:(0,J.jsx)(o.Trans,{id:"Edit collision masks"}),actions:[(0,J.jsx)(I.Z,{label:(0,J.jsx)(o.Trans,{id:"Apply"}),primary:!0,onClick:function(){return Be(!1)}},"apply")],secondaryActions:[(0,J.jsx)(N.Z,{helpPagePath:"/objects/sprite/collision-mask"},"help")],maxWidth:"lg",flexBody:!0,fullHeight:!0,onRequestClose:function(){return Be(!1)},open:_e,children:(0,J.jsx)(Z.Z,{animations:ke,resourcesLoader:T.Z,project:H,onMasksUpdated:ce,onCreateMatchingSpriteCollisionMask:we})}),He&&Ze&&(0,J.jsx)(V.Z,{initialName:$e||n._({id:"New variant"}),onApply:function(e){return Xe(n,e)},onCancel:function(){ze(!1)}}),Ye&&Ze&&(0,J.jsx)(V.Z,{isDuplicationBeforeEdition:!0,initialName:$e||n._({id:"New variant"}),onApply:function(e){return Ke(n,e)},onCancel:function(){qe(!1)}})]})}})}},8005:function(e,t,n){"use strict";n.d(t,{Z:function(){return me}});var r=n(4942),i=n(1413),a=n(74165),o=n(15861),s=n(37762),l=n(29439),c=n(36600),u=n(28381),d=n(93433),p=n(59863),f=n(18455),h=n(25588),g=n(42699),m=n(73693),x=n(42986),v=n(1773),b=n(35924),C=n(72410),j=n(6996),y=n(3290),Z=n(38501),k=n(61325),w=n(3781),T=n(86278),S=n(37571),P=n(14331),I=n(96355),E=n(24910),M=n(29343),L={container:{paddingLeft:12,paddingRight:12,display:"flex",alignItems:"center"},timeField:{width:75,fontSize:14},timeIcon:{paddingLeft:6,paddingRight:6},spacer:{width:16}},A=function(e){var t=e.animationName,n=e.direction,r=e.resourcesLoader,a=e.project,o=e.resourceExternalEditors,s=e.onEditWith,d=e.onDirectionUpdated,p=(0,Z.Z)(),f=u.useState(!1),C=(0,l.Z)(f,2),A=C[0],O=C[1],R=n.getTimeBetweenFrames(),F=(0,I.q)(n.getTimeBetweenFrames(),6),D=0===n.getSpritesCount(),N=u.useContext(E.Z),_=function(e){if(e){var t=Math.max(parseFloat(e),1e-5);if(R!==t)!isNaN(t)&&(n.setTimeBetweenFrames(t),d&&d(),p())}},B=function(e){O(e)},U=o.filter((function(e){return"image"===e.kind})),V=n.getSpritesCount(),H=(0,j.UQ)().isMobile;return(0,M.jsx)(c.I18n,{children:function(e){var o=e.i18n;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(k.ep,{alignItems:"center",justifyContent:"flex-end",noColumnMargin:!0,noResponsiveLandscape:!0,children:[(0,M.jsxs)(k.pJ,{noMargin:!0,children:[!!U.length&&(0,M.jsx)(g.Z,{label:o._(H?V?{id:"Edit"}:{id:"Create"}:V?U[0].editDisplayName:U[0].createDisplayName),icon:(0,M.jsx)(S.Z,{}),onClick:function(){return s(o,U[0])}}),(0,M.jsx)(g.Z,{label:(0,M.jsx)(c.Trans,{id:"Preview"}),icon:(0,M.jsx)(P.Z,{}),onClick:function(){return B(!0)},disabled:D})]}),(0,M.jsxs)(k.pJ,{noMargin:!0,alignItems:"center",children:[(0,M.jsx)(w.ZP,{title:(0,M.jsx)(c.Trans,{id:"Time between frames"}),children:(0,M.jsx)(h.Z,{style:(0,i.Z)((0,i.Z)({},L.timeIcon),{},{color:D?N.text.color.disabled:N.text.color.primary})})}),(0,M.jsx)(x.Z,{id:"direction-time-between-frames",margin:"none",style:L.timeField,type:"number",step:.005,precision:2,min:.01,max:5,commitOnBlur:!0,value:F,onChange:_,disabled:D}),(0,M.jsx)(m.Z,{checked:n.isLooping(),label:(0,M.jsx)(T.Z,{size:"body-small",color:"primary",style:{opacity:D?.5:1},children:(0,M.jsx)(c.Trans,{id:"Loop"})}),onCheck:function(e,t){return function(e){n.setLoop(!!e),p(),d&&d()}(t)},disabled:D})]})]}),A&&(0,M.jsx)(v.ZP,{title:(0,M.jsx)(c.Trans,{id:"Preview {animationName}",values:{animationName:t}}),actions:[(0,M.jsx)(v.vF,{label:(0,M.jsx)(c.Trans,{id:"Ok"}),primary:!0,onClick:function(){return B(!1)}},"ok")],onRequestClose:function(){return B(!1)},onApply:function(){return B(!1)},open:A,fullHeight:!0,flexBody:!0,children:(0,M.jsx)(b.Z,{animationName:t,resourceNames:n.getSpriteNames().toJSArray(),getImageResourceSource:function(e){return r.getResourceFullUrl(a,e,{})},isImageResourceSmooth:function(e){return(0,y.X)(a,e)},timeBetweenFrames:R,onChangeTimeBetweenFrames:_,isLooping:n.isLooping(),hideAnimationLoader:!0})})]})}})},O=n(70729),R=n(8278),F=n(57974),D=n(57244),N=n(40243),_=n(1491),B=n(32628),U=n(65056),V=n(70983),H=n.n(V),z=n(40271),W=n.n(z),G=[" ","_","-","."],Y=function(e){var t=new Map;if(0===e.length)return t;var n,r=e.map((function(e){var t=H().basename(e.getName(),H().extname(e.getName())),n=t.match(/\(\d+\)$|\d+$/g),r=n&&n[0].match(/\(\d+\)$|\d+$/g),i=r?parseInt(r[0]):null,a=function(e){for(var t=0,n=0;n<e.length;n++)if(!G.includes(e.charAt(n))){t=n-1;break}for(var r=e.length-1,i=e.length-1;i>=t;i--)if(!G.includes(e.charAt(i))){r=i+1;break}return e.substring(t,r+1)}(n?t.substring(0,t.length-n[0].length):t);return G.some((function(e){return a.endsWith(e)}))&&(a=a.substring(0,a.length-1)),{resource:e,name:a,index:isNaN(i)?null:i}})),i=function(e){if(0===e.length)return"";if(1===e.length)return e[0];for(var t=!0,n=0,r=function(r){var i=e[0].charAt(r);(t=e.every((function(e){return e.length>r&&e.charAt(r)===i})))||(n=r)},i=0;t;i++)r(i);return e[0].substring(0,n)}(r.map((function(e){return e.name}))),a=(0,s.Z)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.name=o.name.substring(i.length)}}catch(d){a.e(d)}finally{a.f()}var l=W()(r,(function(e){return e.name}));for(var c in l){var u=l[c];t.set(c,u.sort((function(e,t){return(e.index||0)-(t.index||0)})).map((function(e){return e.resource})))}return t},q=n.g.gd,J={spritesList:{display:"flex",overflowY:"hidden",flex:1},thumbnailExtraStyle:{marginLeft:5}},X=(0,p.SortableElement)((function(e){var t=e.sprite,n=e.project,r=e.resourcesLoader,i=e.selected,a=e.onSelect,o=e.onContextMenu,s=e.isFirst;return(0,M.jsx)(O.Z,{selectable:!0,selected:i,onSelect:a,onContextMenu:o,resourceName:t.getImageName(),resourcesLoader:r,project:n,style:s?{}:J.thumbnailExtraStyle,size:100})})),K=(0,p.SortableContainer)((function(e){var t=e.direction,n=e.project,r=e.resourcesLoader,i=(e.resourceManagementProps,e.selectedSprites),a=e.onSelectSprite,o=e.onOpenSpriteContextMenu,s=t.getSpritesCount(),l=s>1;return(0,M.jsx)("div",{style:J.spritesList,children:[].concat((0,d.Z)((0,f.mapFor)(0,s,(function(e){var s=t.getSprite(e);return l?(0,M.jsx)(X,{sprite:s,index:e,isFirst:0===e,selected:!!i[s.ptr],onContextMenu:function(e,t){return o(e,t,s)},onSelect:function(e){return a(s,e)},resourcesLoader:r,project:n},s.ptr):(0,M.jsx)(O.Z,{selectable:!0,selected:!!i[s.ptr],onSelect:function(e){return a(s,e)},onContextMenu:function(e,t){return o(e,t,s)},resourceName:s.getImageName(),resourcesLoader:r,project:n,size:100},s.ptr)}))),[0===s&&(0,M.jsx)(O.Z,{project:n,resourceName:"",resourcesLoader:r,size:100},"empty")])})})),Q=function(e,t,n){var r=function(e){var t=!1,n=!1,r=e.getSpritesCount()>0?e.getSprite(0):null;return r&&(t=(0,R.ir)(r,e),n=(0,R.sL)(r,e)),{allDirectionSpritesHaveSamePoints:t,allDirectionSpritesHaveSameCollisionMasks:n}}(t),i=r.allDirectionSpritesHaveSameCollisionMasks,a=r.allDirectionSpritesHaveSamePoints,o=function(e){var t=!1,n=!1,r=(0,R.tY)(e,0,0,0).sprite;return r&&(t=(0,R.fd)(r,e),n=(0,R.Gn)(r,e)),{allObjectSpritesHaveSamePoints:t,allObjectSpritesHaveSameCollisionMasks:n}}(e),s=o.allObjectSpritesHaveSameCollisionMasks,l=o.allObjectSpritesHaveSamePoints,c=(0,R.eS)(e),u=(0,R.tY)(e,0,0,0).sprite,d=t.getSpritesCount()>0?t.getSprite(0):null;l&&u?(0,R.xw)(u,n):a&&d&&(0,R.xw)(d,n),s&&u?(0,R.Vv)(u,n):i&&d&&(0,R.Vv)(d,n),c&&n.setFullImageCollisionMask(!0)},$=function(e,t,n,r){var i=new q.Sprite;i.setImageName(n.getName()),Q(e,t,i),r(i),t.addSprite(i),i.delete()},ee=function(e){var t=e.animations,n=e.direction,l=e.project,d=e.resourcesLoader,p=e.resourceManagementProps,h=e.editDirectionWith,g=(e.onReplaceByDirection,e.onSpriteAdded),m=e.onSpriteUpdated,x=e.onFirstSpriteUpdated,v=e.addAnimations,b=(e.onChangeName,e.objectName,e.animationName),C=u.useRef({}),j=u.useRef(null),y=(0,Z.Z)(),w=(0,U.Z)().showConfirmation,T=p.getStorageProvider(),S=p.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===T.internalName})),P=u.useCallback((function(e,t,r){for(var i=e;i<=t;++i){var a=n.getSprite(i);if(i===t)C.current[a.ptr]=r;else{var o=i+1,s=!!C.current[n.getSprite(o).ptr];C.current[a.ptr]=s}}}),[n]),I=u.useCallback((function(e,t,r){for(var i=e;i>=t;--i){var a=n.getSprite(i);if(i===t)C.current[a.ptr]=r;else{var o=i-1,s=!!C.current[n.getSprite(o).ptr];C.current[a.ptr]=s}}}),[n]),E=u.useCallback((function(e){var t=e.oldIndex,r=e.newIndex;if(t!==r){var i=!!C.current[n.getSprite(t).ptr];n.moveSprite(t,r),t<r?P(t,r,i):I(t,r,i),y(),m&&m(),0!==t&&0!==r||x&&x()}}),[n,y,m,x,I,P]),L=u.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(r){var i,o,c,u,d,f,h,b,C,j,Z,k,w,T,P,I;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.getSpritesCount(),e.next=3,p.onChooseResource({initialSourceName:r.name,multiSelection:!0,resourceKind:"image"});case 3:if(o=e.sent,c=o.selectedResources,u=o.selectedSourceName,c.length){e.next=8;break}return e.abrupt("return");case 8:if(d=S.find((function(e){return e.name===u}))){e.next=11;break}return e.abrupt("return");case 11:if(f=!1,d.shouldCreateResource&&c.forEach((function(e){(0,F.r3)(l,e);var t=l.getResourcesManager().addResource(e);f=f||t})),0===i&&c.length>1&&d.shouldGuessAnimationsFromName)if((h=Y(c)).size>1)v(h);else{b=(0,s.Z)(h.values());try{for(b.s();!(C=b.n()).done;){j=C.value,Z=(0,s.Z)(j);try{for(Z.s();!(k=Z.n()).done;)w=k.value,$(t,n,w,g)}catch(a){Z.e(a)}finally{Z.f()}}}catch(a){b.e(a)}finally{b.f()}}else{T=(0,s.Z)(c);try{for(T.s();!(P=T.n()).done;)I=P.value,$(t,n,I,g)}catch(a){T.e(a)}finally{T.f()}}if(d.shouldCreateResource&&c.forEach((function(e){return e.delete()})),y(),!f){e.next=20;break}return e.next=19,p.onFetchNewlyAddedResources();case 19:p.onNewResourcesAdded();case 20:c.length&&m&&m(),0===i&&x&&x();case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,p,y,m,x,l,v,t,g,S]),O=u.useCallback((0,o.Z)((0,a.Z)().mark((function e(){var r,i,o,s,l,c,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C.current,i=t.getAnimation(0).getDirection(0).getSprite(0).ptr,o=!!r[i],s=(0,R.__)(t),l=Object.keys(r).length===s,c=n.getSpritesCount()>0?n.getSprite(0):null,u=!t.adaptCollisionMaskAutomatically()&&c&&!c.isFullImageCollisionMask(),!(d=l&&u)){e.next=14;break}return e.next=11,w({title:{id:"Remove the sprite"},message:{id:"You are about to remove the last sprite of this object, which has a custom collision mask. The custom collision mask will be lost. Are you sure you want to continue?"},confirmButtonLabel:{id:"Remove"},dismissButtonLabel:{id:"Cancel"}});case 11:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:(0,f.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);(0,R.lg)(n,r)})),C.current={},y(),m&&m(),o&&x&&x(),d&&t.setAdaptCollisionMaskAutomatically(!0);case 20:case"end":return e.stop()}}),e)}))),[m,x,t,y,w,n]),V=u.useCallback((function(){var e=C.current;(0,f.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);(0,R.DJ)(r,e)})),C.current={},y(),m&&m()}),[m,t,y]),H=u.useCallback((function(e,t){C.current=(0,i.Z)((0,i.Z)({},C.current),{},(0,r.Z)({},e.ptr,t)),y()}),[y]),z=u.useCallback((function(e){C.current=(0,r.Z)({},e.ptr,!0),y()}),[y]),W=u.useCallback((function(e,t,n){C.current[n.ptr]||z(n),j.current&&j.current.open(e,t)}),[z]);return(0,M.jsxs)(k.ak,{noMargin:!0,children:[(0,M.jsx)(A,{animationName:b,direction:n,resourcesLoader:d,project:l,resourceExternalEditors:p.resourceExternalEditors,onEditWith:function(e,t){return h(e,t,n)},onDirectionUpdated:m}),(0,M.jsxs)(k.ep,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,M.jsx)(K,{resourcesLoader:d,direction:n,project:l,resourceManagementProps:p,selectedSprites:C.current,onSelectSprite:H,onOpenSpriteContextMenu:W,onSortEnd:E,helperClass:"sortable-helper",lockAxis:"x",axis:"x"}),(0,M.jsx)(B.Z,{ref:j,buildMenuTemplate:function(e){return[{label:e._({id:"Delete selection"}),click:O},{label:e._({id:"Duplicate selection"}),click:V}]}}),(0,M.jsx)(N.sg,{noMargin:!0,children:(0,M.jsx)(D.Z,{onClick:function(){L(S[0])},disabled:0===S.length,label:(0,M.jsx)(c.Trans,{id:"Add a sprite"}),icon:(0,M.jsx)(_.Z,{}),primary:!0,buildMenuTemplate:function(e){var t=p.getStorageProvider();return p.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){var n=e.onlyForStorageProvider;return!n||n===t.internalName})).map((function(t){return{label:e._(t.displayName),click:function(){return L(t)}}}))}})})]})]})},te=n(51598),ne=n(68196),re=n(53162),ie=n(43228),ae=n(62572),oe=n(65752),se=n(85076),le=n(30141),ce=n(61804),ue=n(54168),de=n.g.gd,pe=function(e){var t=e.lastIndexOf(".");return t<0?e:e.substring(0,t)},fe=(0,ie.x)("sprite-animations-list"),he={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"},animationLine:{marginBottom:16}},ge=u.forwardRef((function(e,t){var n=e.animations,d=e.project,p=e.layout,h=e.eventsFunctionsExtension,g=e.eventsBasedObject,m=e.object,v=e.objectName,b=e.resourceManagementProps,y=e.onSizeUpdated,k=e.onObjectUpdated,w=e.isAnimationListLocked,P=void 0!==w&&w,I=e.scrollView,L=e.onCreateMatchingSpriteCollisionMask,A=u.useState(!1),O=(0,l.Z)(A,2),D=O[0],_=O[1],B=u.useRef(null),V=(0,Z.Z)(),H=(0,j.UQ)().isMobile,z=(0,U.Z)().showConfirmation,W=n.getAnimationsCount(),G=new Array(W).fill(0).map((function(e,t){return t})),q=u.useState(null),J=(0,l.Z)(q,2),X=J[0],K=J[1],ie=u.useRef(null);u.useEffect((function(){I.current&&ie.current&&X&&(I.current.scrollTo(ie.current),K(null),ie.current=null)}),[X,I]);var ge=(0,U.Z)().showDeleteConfirmation,me=u.useRef(null),xe=u.useContext(E.Z),ve=u.useState({}),be=(0,l.Z)(ve,2),Ce=be[0],je=be[1],ye=u.useCallback((function(e){var t=(0,R.Ng)(n);t&&(e.setFullImageCollisionMask(t.isFullImageCollisionMask()),e.setCustomCollisionMask(t.getCustomCollisionMask()),V())}),[n,V]),Ze=u.useCallback((function(e,t){je({}),n.moveAnimation(e,t),0!==e&&0!==t||!n.adaptCollisionMaskAutomatically()||L(),V()}),[n,V,L]),ke=u.useCallback((function(e){var t=me.current;null!==t&&Ze(t,e>t?e-1:e)}),[Ze]),we=u.useCallback((function(e){n.adaptCollisionMaskAutomatically()&&ye(e)}),[ye,n]),Te=u.useCallback((function(e){je({});var t,r=(0,s.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=(0,l.Z)(t.value,2),a=i[0],o=i[1],c=new de.Animation;c.setName(a),c.setDirectionsCount(1);var u,d=c.getDirection(0),p=(0,s.Z)(o);try{for(p.s();!(u=p.n()).done;){var f=u.value;$(n,d,f,we)}}catch(h){p.e(h)}finally{p.f()}n.addAnimation(c),c.delete()}}catch(h){r.e(h)}finally{r.f()}V(),y(),k&&k()}),[V,k,y,we,n]),Se=u.useCallback((function(){je({});var e=new de.Animation;e.setDirectionsCount(1),n.addAnimation(e),e.delete(),V(),y(),k&&k(),setTimeout((function(){I.current&&I.current.scrollToBottom()}),100)}),[n,V,y,k,I]);u.useImperativeHandle(t,(function(){return{forceUpdate:V,addAnimation:Se}}));var Pe=u.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var i,o,s,l,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,R.__)(n),o=n.getAnimation(t).getDirection(0).getSpritesCount()===i,s=(0,R.tY)(n,t,0,0).sprite,l=!n.adaptCollisionMaskAutomatically()&&s&&!s.isFullImageCollisionMask(),u=(c=o&&l)?{id:"Are you sure you want to remove this animation? You will lose the custom collision mask you have set for this object."}:{id:"Are you sure you want to remove this animation?"},e.next=8,ge({title:{id:"Remove the animation"},message:u,confirmButtonLabel:{id:"Remove"},dismissButtonLabel:{id:"Cancel"}});case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:je({}),n.removeAnimation(t),V(),y(),0===t&&n.adaptCollisionMaskAutomatically()&&L(),c&&n.setAdaptCollisionMaskAutomatically(!0),k&&k();case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[V,k,y,ge,n,L]),Ie=u.useCallback((function(e,t){var a=n.getAnimation(e),o=a.getName();if(o!==t){je({});var s=(0,f.mapFor)(0,n.getAnimationsCount(),(function(t){return t===e?void 0:n.getAnimation(t).getName()})).filter(Boolean);""!==t&&s.some((function(e){return e===t}))?je((0,i.Z)((0,i.Z)({},Ce),{},(0,r.Z)({},e,(0,M.jsx)(c.Trans,{id:"The animation name {newName} is already taken",values:{newName:t}})))):(a.setName(t),m&&(p?de.WholeProjectRefactorer.renameObjectAnimationInScene(d,p,m,o,t):h&&g&&de.WholeProjectRefactorer.renameObjectAnimationInEventsBasedObject(d,h,g,m,o,t)),V(),k&&k())}}),[n,p,m,h,g,V,k,Ce,d]),Ee=u.useCallback((function(e,t,r){n.getAnimation(e).setDirection(r,t),V(),k&&k()}),[V,k,n]),Me=b.getStorageProvider(),Le=b.resourceSources.filter((function(e){return"image"===e.kind})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===Me.internalName})),Ae=u.useCallback((function(){n.adaptCollisionMaskAutomatically()&&L()}),[L,n]),Oe=u.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r,i,o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onChooseResource({initialSourceName:t.name,multiSelection:!0,resourceKind:"image"});case 2:if(n=e.sent,r=n.selectedResources,i=n.selectedSourceName,r.length){e.next=7;break}return e.abrupt("return");case 7:if(o=Le.find((function(e){return e.name===i}))){e.next=10;break}return e.abrupt("return");case 10:if(!o.shouldCreateResource){e.next=22;break}if(s=!1,r.forEach((function(e){(0,F.r3)(d,e);var t=d.getResourcesManager().addResource(e);s=s||t})),l=o.shouldGuessAnimationsFromName?Y(r):new Map,Te(l),r.forEach((function(e){return e.delete()})),!s){e.next=20;break}return e.next=19,b.onFetchNewlyAddedResources();case 19:b.onNewResourcesAdded();case 20:e.next=25;break;case 22:(c=new Map).set("default",r),Te(c);case 25:V(),Ae(),k&&k();case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b,Te,V,Ae,k,d,Le]),Re=u.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r,i,o,s){var l,c,u,p,h,g,m,x,j;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B.current=new AbortController,l=B.current.signal,c=(0,f.mapFor)(0,i.getSpritesCount(),(function(e){return i.getSprite(e).getImageName()})),u=n.getAnimation(o),p=u.getName(),e.prev=5,_(!0),e.next=9,r.edit({project:d,i18n:t,getStorageProvider:b.getStorageProvider,resourceManagementProps:b,resourceNames:c,extraOptions:{singleFrame:!1,fps:i.getTimeBetweenFrames()>0?1/i.getTimeBetweenFrames():1,name:p||c[0]&&pe(c[0])||v,isLooping:i.isLooping(),existingMetadata:i.getMetadata()},signal:l});case 9:if(h=e.sent,_(!1),h){e.next=13;break}return e.abrupt("return");case 13:g=h.resources,m=h.newMetadata,x=h.newName,(j=new de.Direction).setTimeBetweenFrames(i.getTimeBetweenFrames()),j.setLoop(i.isLooping()),g.forEach((function(e){var t=new de.Sprite;if(t.setImageName(e.name),void 0!==e.originalIndex&&null!==e.originalIndex){var r=i.getSprite(e.originalIndex);(0,R.xw)(r,t),(0,R.Vv)(r,t)}else Q(n,i,t);we(t),j.addSprite(t),t.delete()})),m&&j.setMetadata(JSON.stringify(m)),C.Z.burstUrlsCacheForResources(d,c),Ee(o,s,j),x&&Ie(o,x),j.delete(),k&&k(),0===o&&Ae(),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(5),"UserCancellationError"!==e.t0.name&&(console.error("An exception was thrown when launching or reading resources from the external editor:",e.t0),(0,le.gR)({message:"There was an error while using the external editor. Try with another resource and if this persists, please report this as a bug.",rawError:e.t0,errorId:"external-editor-error"})),_(!1);case 31:return e.prev=31,B.current=null,e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[5,27,31,34]])})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),[n,d,b,v,Ee,k,we,Ie,Ae]),Fe=u.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z({title:{id:"Cancel editing"},message:{id:"You will lose any progress made with the external editor. Do you wish to cancel?"},confirmButtonLabel:{id:"Cancel edition"},dismissButtonLabel:{id:"Continue editing"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:B.current?B.current.abort():console.error("Cannot cancel editing with external editor, abort controller is missing.");case 6:case"end":return e.stop()}}),e)}))),[z]),De=u.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se(),i=n.getAnimation(0).getDirection(0),e.next=4,Re(t,r,i,0,0);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Se,Re,n]),Ne=b.resourceExternalEditors.filter((function(e){return"image"===e.kind}));return(0,M.jsx)(c.I18n,{children:function(e){var t=e.i18n;return(0,M.jsxs)(M.Fragment,{children:[0===W&&Ne.length>0?(0,M.jsx)(N.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,M.jsx)(ne.$,{title:(0,M.jsx)(c.Trans,{id:"Add your first animation"}),description:(0,M.jsx)(c.Trans,{id:"Animations are a sequence of images."}),actionLabel:(0,M.jsx)(c.Trans,{id:"Import images"}),secondaryActionLabel:t._(H?{id:"Draw"}:Ne[0].createDisplayName),secondaryActionIcon:(0,M.jsx)(S.Z,{}),helpPagePath:"/objects/sprite",tutorialId:"intermediate-changing-animations",onAction:function(){Oe(Le[0])},actionBuildSplitMenuTemplate:Le.length<2?void 0:function(e){return Le.map((function(t){return{label:e._(t.displayName),click:function(){return Oe(t)}}}))},onSecondaryAction:function(){De(t,Ne[0])}})}):(0,M.jsx)(M.Fragment,{children:(0,f.mapFor)(0,W,(function(e){var r=n.getAnimation(e),a=r.getName(),o=X===a?ie:null;return(0,M.jsx)(fe,{beginDrag:function(){return me.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){ke(e)},children:function(s){var l=s.connectDragSource,u=s.connectDropTarget,p=s.isOver,h=s.canDrop;return u((0,M.jsxs)("div",{style:he.rowContainer,children:[P&&(0,M.jsx)(N.sg,{expand:!0,noMargin:!0,children:(0,M.jsx)(T.Z,{size:"block-title",children:a})}),!P&&p&&(0,M.jsx)(oe.Z,{canDrop:h}),!P&&(0,M.jsxs)("div",{ref:o,style:(0,i.Z)((0,i.Z)({},he.rowContent),{},{backgroundColor:xe.list.itemsBackgroundColor}),children:[(0,M.jsxs)(N.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[l((0,M.jsx)("span",{children:(0,M.jsx)(N.sg,{children:(0,M.jsx)(ae.V,{})})})),(0,M.jsx)(T.Z,{noMargin:!0,noShrink:!0,children:(0,M.jsx)(c.Trans,{id:"Animation #{animationIndex}",values:{animationIndex:e}})}),(0,M.jsx)(N.LZ,{}),(0,M.jsx)(x.Z,{margin:"none",commitOnBlur:!0,errorText:Ce[e],translatableHintText:{id:"Optional animation name"},value:r.getName(),onChange:function(t){return Ie(e,t)},fullWidth:!0}),(0,M.jsx)(te.Z,{size:"small",onClick:function(){return Pe(e,t)},children:(0,M.jsx)(re.Z,{})}),(0,M.jsx)(ue.Z,{element:(0,M.jsx)(te.Z,{size:"small",children:(0,M.jsx)(ce.Z,{})}),buildMenuTemplate:function(t){return G.map((function(n){var r;return r=0===n?{id:"Move to top"}:n===W-1?{id:"Move to bottom"}:{id:"Move to position {index}",values:{index:n}},{label:t._(r),click:function(){return Ze(e,n)},enabled:n!==e}}))}},"menu")]}),(0,M.jsx)(N.LZ,{})]}),(0,M.jsx)("div",{style:he.animationLine,children:(0,M.jsx)(N.sg,{expand:!0,noMargin:!0,children:(0,f.mapFor)(0,r.getDirectionsCount(),(function(t){var i=r.getDirection(t);return(0,M.jsx)(ee,{animations:n,direction:i,project:d,resourcesLoader:C.Z,resourceManagementProps:b,editDirectionWith:function(n,r,i){return Re(n,r,i,e,t)},onReplaceByDirection:function(n){return Ee(e,t,n)},objectName:v,animationName:a,onChangeName:function(t){return Ie(e,t)},onSpriteUpdated:k,onFirstSpriteUpdated:0===e?Ae:void 0,onSpriteAdded:we,addAnimations:Te},t)}))})})]},e))}},e)}))}),D&&(0,M.jsx)(se.G,{onClose:Fe})]})}})})),me=ge},35924:function(e,t,n){"use strict";var r=n(29439),i=n(36600),a=n(28381),o=n(40243),s=n(61325),l=n(3290),c=n(2597),u=n(25588),d=n(42986),p=n(10888),f=n(86278),h=n(38501),g=n(78081),m=n(14331),x=n(58758),v=n(96355),b=n(29343),C={imageContainer:{position:"relative",display:"flex",flex:1,width:"100%",height:"calc(100% - 80px)"},loaderContainer:{position:"absolute",left:"calc(50% - 30px)",top:"calc(50% - 30px)"},timeField:{width:75},timeIcon:{paddingLeft:6,paddingRight:8}};t.Z=function(e){var t=e.animationName,n=e.resourceNames,j=e.getImageResourceSource,y=e.isImageResourceSmooth,Z=e.timeBetweenFrames,k=e.onChangeTimeBetweenFrames,w=e.isLooping,T=e.hideCheckeredBackground,S=e.deactivateControls,P=e.displaySpacedView,I=e.fixedHeight,E=e.fixedWidth,M=e.isAssetPrivate,L=e.hideAnimationLoader,A=(0,h.Z)(),O=Number.parseFloat((1/Z).toFixed(4)),R=a.useRef(),F=a.useRef(),D=a.useRef(0),N=a.useRef(Z),_=a.useRef(!1),B=a.useRef(0),U=a.useRef(n[0]),V=a.useRef(w),H=a.useRef(t),z=a.useRef(new Array(n.length).fill(!1)),W=a.useRef(null),G=a.useState(!0),Y=(0,r.Z)(G,2),q=Y[0],J=Y[1];a.useEffect((function(){w!==V.current&&(V.current=w),t!==H.current&&(H.current=t,z.current=new Array(n.length).fill(!1))}),[Z,w,t,n]);var X=function(){B.current=0,D.current=0,_.current=!1,A()},K=a.useCallback((function(e){var t=F.current,r=B.current,i=D.current,a=N.current,o=_.current,s=V.current,l=n.length,c=z.current[r];if(t&&c){var u=r,d=i+(o?0:(e-t)/1e3);if(d>a){var p=Math.floor(d/a);u+=p,(d-=p*a)<0&&(d=0)}u>=l&&(u=s?u%l:l-1),u<0&&(u=0),B.current=u,D.current=d;var f=n[B.current];r!==u&&(f===U.current?z.current[B.current]=!0:(z.current[B.current]=!1,W.current=setTimeout((function(){console.warn("The image took too long to load, displaying a loader."),J(!0)}),500)),U.current=f,A())}R.current=requestAnimationFrame(K),F.current=e}),[A,n]);a.useEffect((function(){return R.current=requestAnimationFrame(K),function(){R.current&&cancelAnimationFrame(R.current)}}),[K]);var Q=a.useCallback((function(){z.current[B.current]=!0,!z.current.some((function(e){return!e}))&&J(!1),W.current&&(clearTimeout(W.current),W.current=null),A()}),[A]);B.current>=n.length&&(B.current=0);var $=n[B.current];return(0,b.jsxs)(o.sg,{expand:!0,noOverflowParent:!0,noMargin:!0,children:[(0,b.jsxs)("div",{style:C.imageContainer,children:[(0,b.jsx)(l.Z,{resourceName:$,imageResourceSource:j($),isImageResourceSmooth:y($),displaySpacedView:P,hideCheckeredBackground:T,deactivateControls:S,fixedHeight:I,fixedWidth:E,onImageLoaded:Q,isImagePrivate:M,hideLoader:!0}),!L&&q&&(0,b.jsx)("div",{style:C.loaderContainer,children:(0,b.jsx)(g.Z,{})})]}),!S&&(0,b.jsx)(o.sg,{noMargin:!0,children:(0,b.jsxs)(s.ep,{alignItems:"center",noResponsiveLandscape:!0,children:[(0,b.jsxs)(s.pJ,{alignItems:"center",justifyContent:"center",noMargin:!0,children:[(0,b.jsx)(f.Z,{children:(0,b.jsx)(i.Trans,{id:"FPS:"})}),(0,b.jsx)(d.Z,{commitOnBlur:!0,margin:"none",value:O.toString(),onChange:function(e){if(e){var t=Number.parseFloat(e);if(t>0){var n=1/t;N.current=n,k&&k(n),X()}}},id:"direction-time-between-frames",type:"number",min:0,max:100,style:C.timeField}),(0,b.jsx)(u.Z,{style:C.timeIcon}),(0,b.jsx)(d.Z,{commitOnBlur:!0,margin:"none",value:(0,v.q)(N.current,6),onChange:function(e){if(e){var t=Number.parseFloat(e);t>0&&(N.current=t,k&&k(t),X())}},id:"direction-time-between-frames",type:"number",step:.005,precision:2,min:.01,max:5,style:C.timeField})]}),(0,b.jsxs)(s.pJ,{alignItems:"center",justifyContent:"center",noMargin:!0,children:[(0,b.jsx)(p.Z,{leftIcon:(0,b.jsx)(c.Z,{}),label:(0,b.jsx)(i.Trans,{id:"Replay"}),onClick:X}),(0,b.jsx)(p.Z,{leftIcon:_.current?(0,b.jsx)(m.Z,{}):(0,b.jsx)(x.Z,{}),label:_.current?"Play":"Pause",onClick:function(){_.current=!_.current,A()}})]})]})})]})}},29050:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var r=n(74165),i=n(15861),a=n(85919),o=n.g.gd,s=function(e,t){return new Promise((function(n,r){e.addEventListener("load",(function(){return n(e)})),e.addEventListener("error",(function(){return r(new Error("Failed to load image"))})),e.src=t}))},l=function(e,t,n,r){return e[(n*r+t<<2)+3]>=64},c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,c,u,d,p,f,h,g,m,x,v,b,C,j,y,Z,k,w,T,S,P,I,E,M,L,A,O,R;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Image,(t.startsWith("http://")||t.startsWith("https://"))&&(n.crossOrigin=(0,a.bc)(t)?"use-credentials":"anonymous"),e.prev=2,e.next=5,s(n,t);case 5:if(i=document.createElement("canvas"),c=n.width,u=n.height,i.width=c,i.height=u,d=i.getContext("2d")){e.next=13;break}throw new Error("Unable to get 2D context.");case 13:d.drawImage(n,0,0),p=d.getImageData(0,0,i.width,i.height),f=p.data,h=null,g=null,m=null,x=null,v=0;case 21:if(!(v<u)){e.next=37;break}b=!1,C=0;case 24:if(!(C<c)){e.next=32;break}if(!l(f,C,v,c)){e.next=29;break}return m=v,b=!0,e.abrupt("break",32);case 29:C++,e.next=24;break;case 32:if(!b){e.next=34;break}return e.abrupt("break",37);case 34:v++,e.next=21;break;case 37:if(null!==m){e.next=39;break}throw new Error("No non-transparent pixel found while scanning rows from top to bottom.");case 39:j=u-1;case 40:if(!(j>=0)){e.next=56;break}y=!1,Z=0;case 43:if(!(Z<c)){e.next=51;break}if(!l(f,Z,j,c)){e.next=48;break}return x=j,y=!0,e.abrupt("break",51);case 48:Z++,e.next=43;break;case 51:if(!y){e.next=53;break}return e.abrupt("break",56);case 53:j--,e.next=40;break;case 56:if(null!==x){e.next=58;break}throw new Error("No non-transparent pixel found while scanning rows from bottom to top.");case 58:k=0;case 59:if(!(k<c)){e.next=75;break}w=!1,T=m;case 62:if(!(T<=x)){e.next=70;break}if(!l(f,k,T,c)){e.next=67;break}return h=k,w=!0,e.abrupt("break",70);case 67:T++,e.next=62;break;case 70:if(!w){e.next=72;break}return e.abrupt("break",75);case 72:k++,e.next=59;break;case 75:if(null!==h){e.next=77;break}throw new Error("No non-transparent pixel found while scanning columns from left to right.");case 77:S=c-1;case 78:if(!(S>=0)){e.next=94;break}P=!1,I=m;case 81:if(!(I<=x)){e.next=89;break}if(!l(f,S,I,c)){e.next=86;break}return g=S,P=!0,e.abrupt("break",89);case 86:I++,e.next=81;break;case 89:if(!P){e.next=91;break}return e.abrupt("break",94);case 91:S--,e.next=78;break;case 94:if(null!==g){e.next=96;break}throw new Error("No non-transparent pixel found while scanning columns from right to left.");case 96:if(M=x-m+1,L=(h+g+1)/2,A=(m+x+1)/2,!((E=g-h+1)<=0||M<=0)){e.next=102;break}throw new Error("Invalid collision mask size.");case 102:return(O=o.Polygon2d.createRectangle(E,M)).move(L,A),(R=new o.VectorPolygon2d).push_back(O),e.abrupt("return",R);case 109:throw e.prev=109,e.t0=e.catch(2),new Error("Unable to load image: "+e.t0);case 112:case"end":return e.stop()}}),e,null,[[2,109]])})));return function(t){return e.apply(this,arguments)}}()},92319:function(e,t,n){"use strict";n.d(t,{Z:function(){return ee}});var r=n(1413),i=n(74165),a=n(15861),o=n(29439),s=n(36600),l=n(28381),c=n(10888),u=n(86578),d=n(40243),p=n(18455),f=n(11374),h={coordinateColumn:{width:96},toolColumn:{width:24}},g=n(45987),m=n(51598),x=n(42986),v=n(96355),b=n(24910),C=n(53162),j=n(29343),y=["verticeX","verticeY","parentVerticeId"],Z=function(e){var t=e.verticeX,n=e.verticeY,r=(e.parentVerticeId,(0,g.Z)(e,y)),i=l.useContext(b.Z);return(0,j.jsxs)(f.SC,{style:{backgroundColor:r.selected?i.listItem.selectedBackgroundColor:i.list.itemsBackgroundColor},onPointerEnter:r.onPointerEnter,onPointerLeave:r.onPointerLeave,onClick:r.onClick,children:[(0,j.jsx)(f.Nn,{style:h.coordinateColumn,children:(0,j.jsx)(x.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:(0,v.R)(t,4).toString(),type:"number",step:.5,id:"vertice-x",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangeVerticeX(t)},onBlur:function(e){r.onChangeVerticeX(parseFloat(e.currentTarget.value)||0)}})}),(0,j.jsx)(f.Nn,{style:h.coordinateColumn,children:(0,j.jsx)(x.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:(0,v.R)(n,4).toString(),type:"number",step:.5,id:"vertice-y",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangeVerticeY(t)},onBlur:function(e){r.onChangeVerticeY(parseFloat(e.currentTarget.value)||0)}})}),(0,j.jsx)(f.Nn,{style:h.toolColumn,children:!!r.onRemove&&(0,j.jsx)(m.Z,{size:"small",onClick:r.onRemove,disabled:!r.canRemove,children:(0,j.jsx)(C.Z,{})})})]})},k=n(3108),w=n(86278),T=n(57244),S=n(38092),P=n(2632),I=n.g.gd,E=function(e,t,n,r,i){var a=r*r,o=i*i,s=Number.POSITIVE_INFINITY,l=0,c=0,u=[0,0];if((0,p.mapVector)(e,(function(e,r){var i=e.getVertices(),o=i.at(i.size()-1),d=o.x,f=o.y;(0,p.mapVector)(i,(function(e,i){var o=e.x,p=e.y;u=A(t,n,d,f,o,p,u);var h=L(u[0],u[1],d,f)>a&&L(u[0],u[1],o,p)>a,g=L(t,n,u[0],u[1]);g<s&&h&&(s=g,l=r,c=i),d=o,f=p}))})),s<o){var d=e.at(l).getVertices(),f=d.at(M(c-1,d.size())),h=d.at(c);return{x:(u=A(t,n,f.x,f.y,h.x,h.y,u))[0],y:u[1],polygonIndex:l,vertexIndex:c}}return null},M=function(e,t){return(e%t+t)%t},L=function(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a},A=function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],s=L(n,r,i,a);if(0===s)return[n,r];var l=Math.max(0,Math.min(1,((e-n)*(i-n)+(t-r)*(a-r))/s));return o[0]=n+l*(i-n),o[1]=r+l*(a-r),o},O=n(1491),R=n(75779),F=n.g.gd,D=function(e){return(0,j.jsxs)(d.sg,{expand:!0,children:[(0,j.jsxs)(f.iA,{children:[(0,j.jsx)(f.xD,{children:(0,j.jsxs)(f.SC,{children:[(0,j.jsx)(f.bY,{style:h.coordinateColumn,children:"X"}),(0,j.jsx)(f.bY,{style:h.coordinateColumn,children:"Y"}),(0,j.jsx)(f.Nn,{style:h.toolColumn})]})}),(0,j.jsx)(f.RM,{children:(0,p.mapVector)(e.vertices,(function(t,n){return(0,j.jsx)(Z,{parentVerticeId:e.vertices.ptr.toString(),onPointerEnter:function(){return e.onHoverVertice(t.ptr)},onPointerLeave:e.onHoverVertice,selected:e.selectedVerticePtr===t.ptr,onClick:function(){return e.onClickVertice(t.ptr)},verticeX:t.get_x(),verticeY:t.get_y(),onChangeVerticeX:function(n){return function(t,n){t.set_x(Math.min(e.spriteWidth,Math.max(n,0))),e.onUpdated()}(t,n)},onChangeVerticeY:function(n){return function(t,n){t.set_y(Math.min(e.spriteHeight,Math.max(n,0))),e.onUpdated()}(t,n)},onRemove:function(){F.removeFromVectorVector2f(e.vertices,n),e.onUpdated()},canRemove:e.vertices.size()>3},t.ptr)}))})]}),(0,j.jsx)(d.LZ,{}),e.hasWarning&&(0,j.jsx)(S.Z,{kind:"warning",children:(0,j.jsx)(s.Trans,{id:"The polygon is not convex. Ensure it is, otherwise the collision mask won't work."})}),(0,j.jsx)(d.x1,{justifyContent:"center",children:(0,j.jsx)(c.Z,{leftIcon:(0,j.jsx)(O.Z,{}),label:(0,j.jsx)(s.Trans,{id:"Add a vertex"}),onClick:function(){!function(e){var t=e.size();if(t>0){var n=0,r=e.at(t-1),i=r.x,a=r.y,o=-1;(0,p.mapFor)(0,t,(function(t){var r=e.at(t),s=r.x,l=r.y,c=s-i,u=l-a,d=c*c+u*u;d>o&&(o=d,n=t),i=s,a=l}));var s=e.at(M(n-1,t)),l=e.at(n),c=new I.Vector2f;c.x=(s.x+l.x)/2,c.y=(s.y+l.y)/2,e.push_back(c),e.moveVector2fInVector(t,n),c.delete()}else{var u=new I.Vector2f;e.push_back(u),u.delete()}}(e.vertices),e.onUpdated()}})})]})},N=function(e){var t=l.useContext(b.Z).message.warning,n=e.polygon.getVertices(),r=n.size(),i=e.polygon.isConvex(),a=[i?null:(0,j.jsx)(m.Z,{size:"small",tooltip:{id:"Polygon is not convex!"},children:(0,j.jsx)(R.Z,{style:{color:t}})},"not-convex"),(0,j.jsx)(m.Z,{size:"small",onClick:function(t){t.stopPropagation(),e.onRemove()},tooltip:{id:"Delete collision mask"},children:(0,j.jsx)(C.Z,{})},"delete-mask")];return(0,j.jsxs)(k.UQ,{defaultExpanded:!0,children:[(0,j.jsx)(k._m,{actions:a,children:(0,j.jsxs)(w.Z,{displayInlineAsSpan:!0,children:[3===r&&(0,j.jsx)(s.Trans,{id:"Triangle"}),4===r&&(0,j.jsx)(s.Trans,{id:"Quadrilateral"}),r>=5&&(0,j.jsx)(s.Trans,{id:"Polygon with {verticesCount} vertices",values:{verticesCount:r}})]})}),(0,j.jsx)(k.X1,{disableGutters:!0,children:(0,j.jsx)(D,{vertices:n,hasWarning:!i,onHoverVertice:e.onHoverVertice,onClickVertice:e.onClickVertice,selectedVerticePtr:e.selectedVerticePtr,onUpdated:e.onUpdated,spriteWidth:e.spriteWidth,spriteHeight:e.spriteHeight})})]})},_=function(e){var t=e.polygons,n=e.spriteSize,r=e.onPolygonsUpdated,i=e.onSetFullImageCollisionMask,a=e.onSetAutomaticallyAdaptCollisionMasks,c=e.onHoverVertice,u=e.onClickVertice,f=e.selectedVerticePtr,h=(0,o.Z)(n,2),g=h[0],m=h[1],x=l.useCallback((function(){var e=F.Polygon2d.createRectangle(g,m);e.move(g/2,m/2),t.push_back(e),r()}),[m,g,t,r]),v=l.useCallback((function(e){F.removeFromVectorPolygon2d(t,e),0===t.size()&&i(),r()}),[t,r,i]);return l.useEffect((function(){0===t.size()&&x()}),[t,x]),(0,j.jsx)(l.Fragment,{children:(0,j.jsxs)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:[(0,j.jsx)(P.Z,{children:(0,p.mapVector)(t,(function(e,t){return(0,j.jsx)(N,{polygon:e,onUpdated:r,onRemove:function(){return v(t)},onHoverVertice:c,onClickVertice:u,selectedVerticePtr:f,spriteWidth:g,spriteHeight:m},"polygon-".concat(t))}))}),(0,j.jsx)(d.sg,{children:(0,j.jsx)(d.x1,{alignItems:"center",justifyContent:"center",children:(0,j.jsx)(T.Z,{primary:!0,icon:(0,j.jsx)(O.Z,{}),label:(0,j.jsx)(s.Trans,{id:"Add collision mask"}),onClick:x,buildMenuTemplate:function(e){return[{label:e._({id:"Reset to automatic collision mask"}),click:a},{label:e._({id:"Use full image as collision mask"}),click:i}]}})})})]})})},B=n(38501),U=n(16792),V=n.g.gd,H=function(e){var t=l.useRef(null),n=l.useState(null),i=(0,o.Z)(n,2),a=i[0],s=i[1],c=l.useState(null),u=(0,o.Z)(c,2),d=u[0],f=u[1],h=e.polygons,g=e.imageZoomFactor,m=e.imageHeight,x=e.imageWidth,v=e.imageOffsetTop,b=e.imageOffsetLeft,C=e.isDefaultBoundingBox,y=e.onPolygonsUpdated,Z=e.onClickVertice,k=e.forcedCursor,w=e.deactivateControls,T=e.hideControls;w&&(a&&s(null),d&&f(null));var S=(0,B.Z)(),P=l.useCallback((function(e,t,n){a||s({vertex:e,polygonIndex:t,vertexIndex:n})}),[a]),I=l.useCallback((function(e){if(!t.current)return null;var n=t.current.createSVGPoint();n.x=e.clientX,n.y=e.clientY;var r=t.current.getScreenCTM().inverse(),i=n.matrixTransform(r);return[i.x,i.y]}),[]),O=l.useCallback((function(e,t){var n=x*g,r=m*g;return{frameX:Math.min(n,Math.max(e,0)),frameY:Math.min(r,Math.max(t,0))}}),[g,m,x]),R=l.useCallback((function(e){var t=h.at(e.polygonIndex).getVertices(),n=t.size(),r=new V.Vector2f;r.x=e.x,r.y=e.y,t.push_back(r),r.delete(),t.moveVector2fInVector(n,e.vertexIndex);var i=t.at(e.vertexIndex);s({vertex:i,polygonIndex:e.polygonIndex,vertexIndex:e.vertexIndex}),f(null),Z(i.ptr),y()}),[Z,y,h]),F=l.useCallback((function(){if(!a)return!1;var e=h.at(a.polygonIndex).getVertices(),t=10/g,n=5/g,r=function(e,t,n,r){var i=n*n,a=r*r,o=e.at(t);if(e.size()<=3)return null;var s=e.at(M(t-1,e.size())),l=e.at(M(t+1,e.size())),c=o.x,u=o.y,d=s.x,p=s.y,f=l.x,h=l.y;if(L(c,u,d,p)<i)return[d,p];if(L(c,u,f,h)<i)return[f,h];var g=A(c,u,s.x,s.y,l.x,l.y);return L(c,u,g[0],g[1])<a?g:null}(e,a.vertexIndex,t,n);return!!r&&(a.vertex.set_x(r[0]),a.vertex.set_y(r[1]),!0)}),[a,g,h]),D=l.useCallback((function(){if(a)if(F()){var e=h.at(a.polygonIndex).getVertices();V.removeFromVectorVector2f(e,a.vertexIndex),y(),Z(null)}else(t=a.vertex).set_x(Math.round(2*t.get_x())/2),t.set_y(Math.round(2*t.get_y())/2),y(),Z(a.vertex.ptr);var t;s(null)}),[h,a,y,Z,F]),N=l.useCallback((function(e){var t=I(e);if(t){var n=O(t[0],t[1]),r=n.frameX/g,i=n.frameY/g,a=E(h,r,i,20/g,10/g);a&&R(a)}}),[h,R,O,I,g]),_=k?{cursor:k}:{},H=(0,r.Z)({cursor:"move"},_),z=(0,r.Z)({},_),W=(0,r.Z)({position:"relative",width:"100%",height:"100%"},_),G=(0,r.Z)({position:"absolute",top:v||0,left:b||0,width:x*g,height:m*g,overflow:"visible"},_);return(0,j.jsx)("div",{style:W,onPointerMove:w?null:function(e){var t=I(e);if(t)if(a){var n=O(t[0],t[1]),r=n.frameX/g,i=n.frameY/g;a.vertex.set_x(r),a.vertex.set_y(i),F(),S()}else{var o=t[0]/g,s=t[1]/g;f(E(h,o,s,20/g,40/g))}},onPointerUp:w?null:D,onPointerDown:w?null:N,children:(0,j.jsxs)("svg",{style:G,ref:t,children:[C&&(0,j.jsx)("polygon",{style:_,fill:"rgba(255,133,105,0.2)",stroke:"rgba(255,133,105,0.5)",strokeWidth:1,fillRule:"evenodd",points:"0,0 ".concat(x*g,",0 ").concat(x*g,",").concat(m*g," 0,").concat(m*g)}),!C&&(0,j.jsxs)(l.Fragment,{children:[(0,p.mapVector)(h,(function(e,t){var n=e.getVertices();return(0,j.jsx)("polygon",{fill:"rgba(255,133,105,0.2)",stroke:"rgba(255,133,105,0.5)",strokeWidth:2,fillRule:"evenodd",points:(0,p.mapVector)(n,(function(e,t){return"".concat(e.get_x()*g,",").concat(e.get_y()*g)})).join(" "),style:z},"polygon-".concat(t))})),!T&&(0,p.mapVector)(h,(function(t,n){var i=t.getVertices();return(0,p.mapVector)(i,(function(t,i){return(0,l.createElement)("circle",(0,r.Z)((0,r.Z)({onPointerDown:w?null:function(){return P(t,n,i)}},(0,U.Y)({draggable:"true"})),{},{key:"polygon-".concat(n,"-vertex-").concat(i),fill:t.ptr===e.highlightedVerticePtr?"rgba(0,0,0,0.75)":t.ptr===e.selectedVerticePtr?"rgba(107,175,255,0.75)":"rgba(255,133,105,0.75)",stroke:t.ptr===e.highlightedVerticePtr?"white":void 0,strokeWidth:2,cx:t.get_x()*g,cy:t.get_y()*g,r:7,style:H}))}))})),!T&&d&&(0,j.jsx)("circle",{onPointerDown:w?null:function(){return R(d)},fill:"rgba(0,0,0,0.75)",stroke:"white",strokeWidth:2,cx:d.x*g,cy:d.y*g,r:5,style:H},"new-vertex")]})]})})},z=n(3290),W=n(8278),G=n(34974),Y=(n(72410),n(28519)),q=n(6996),J=n(20914),X=n(65056),K={leftContainer:{display:"flex",overflow:"hidden",flexDirection:"column"},rightContainer:{display:"flex",paddingLeft:4,paddingRight:4}},Q={direction:"row",first:"preview",second:"properties",splitPercentage:66.67},$={direction:"column",first:"preview",second:"properties",splitPercentage:50},ee=function(e){var t=e.animations,n=e.resourcesLoader,f=e.project,h=e.onMasksUpdated,g=e.onCreateMatchingSpriteCollisionMask,m=l.useState(0),x=(0,o.Z)(m,2),v=x[0],b=x[1],C=l.useState(0),y=(0,o.Z)(C,2),Z=y[0],k=y[1],w=l.useState(0),T=(0,o.Z)(w,2),I=T[0],E=T[1],M=l.useState(null),L=(0,o.Z)(M,2),A=L[0],O=L[1],R=l.useState(null),F=(0,o.Z)(R,2),D=F[0],N=F[1],U=l.useState([0,0]),V=(0,o.Z)(U,2),ee=V[0],te=V[1],ne=(0,B.Z)(),re=(0,X.Z)().showConfirmation,ie=(0,W.tY)(t,v,Z,I),ae=ie.animation,oe=ie.sprite,se=l.useState(!!oe&&(0,W.Gn)(oe,t)),le=(0,o.Z)(se,2),ce=le[0],ue=le[1],de=l.useState(!(!oe||!ae)&&(0,W.rY)(oe,ae)),pe=(0,o.Z)(de,2),fe=pe[0],he=pe[1],ge=l.useCallback((function(e,n){ae&&oe&&(e?(0,p.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);(0,W.CO)(oe,n)})):n&&(0,W.CO)(oe,ae)),ne(),h&&h()}),[ae,oe,t,ne,h]),me=function(e){b(e),k(0),E(0)},xe=function(e){k(e),E(0)},ve=function(e){E(e)};l.useEffect((function(){ae&&oe&&he((0,W.rY)(oe,ae))}),[ae,oe]);var be=l.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n,r=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(r.length>0&&void 0!==r[0])||r[0],oe){e.next=3;break}return e.abrupt("return");case 3:n&&t.setAdaptCollisionMaskAutomatically(!1),oe.setFullImageCollisionMask(n),ge(ce,fe);case 6:case"end":return e.stop()}}),e)}))),[oe,ge,ce,fe,t]),Ce=l.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,re({title:{id:"Use same collision mask for all animations?"},message:{id:"Having the same collision masks for all animations will erase and reset all the other animations collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the animations of the object?"},confirmButtonLabel:{id:"Use same collision mask"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t||fe,ue(n=t),he(r),ge(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[fe,ge,re]),je=l.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,re({title:{id:"Use same collision mask for all frames?"},message:{id:"Having the same collision masks for all frames will erase and reset all the other frames collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the frames of the animation?"},confirmButtonLabel:{id:"Use same collision mask"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t,ue(n=t&&ce),he(r),ge(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ce,ge,re]),ye=l.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!oe||oe.isFullImageCollisionMask()){e.next=6;break}return e.next=3,re({title:{id:"Adapt collision mask?"},message:{id:"You will lose all custom collision masks. Do you want to continue?"},confirmButtonLabel:{id:"Adapt automatically"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:t.setAdaptCollisionMaskAutomatically(n),n&&(g(),ue(!0),he(!0)),ne();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,ne,g,re,oe]),Ze=l.useCallback((function(){be(!1),ye(!1)}),[be,ye]),ke=l.useCallback((function(){t.setAdaptCollisionMaskAutomatically(!1),ge(ce,fe)}),[t,ge,ce,fe]),we=(0,q.UQ)().isMobile?$:Q;if(!t.getAnimationsCount())return null;var Te=oe?oe.getImageName():"",Se={preview:{type:"primary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,j.jsx)(J.Z,{background:"medium",style:K.leftContainer,square:!0,children:(0,j.jsx)(d.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:(0,j.jsx)(z.Z,{resourceName:Te,imageResourceSource:n.getResourceFullUrl(f,Te,{}),isImageResourceSmooth:(0,z.X)(f,Te),onImageSize:te,renderOverlay:function(e){return oe&&(0,j.jsx)(H,(0,r.Z)((0,r.Z)({},e),{},{isDefaultBoundingBox:oe.isFullImageCollisionMask(),hideControls:t.adaptCollisionMaskAutomatically(),polygons:oe.getCustomCollisionMask(),onPolygonsUpdated:ke,highlightedVerticePtr:A,selectedVerticePtr:D,onClickVertice:N}))}})})})}},properties:{type:"secondary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,j.jsx)(J.Z,{background:"medium",style:K.rightContainer,square:!0,children:(0,j.jsxs)(d.sg,{expand:!0,noMargin:!0,children:[(0,j.jsx)(d.x1,{children:(0,j.jsx)(d.sg,{expand:!0,noMargin:!0,children:(0,j.jsx)(G.Z,{animations:t,animationIndex:v,directionIndex:Z,spriteIndex:I,chooseAnimation:me,chooseDirection:xe,chooseSprite:ve,sameForAllAnimations:ce,sameForAllSprites:fe,setSameForAllAnimations:Ce,setSameForAllSprites:je,setSameForAllAnimationsLabel:(0,j.jsx)(s.Trans,{id:"Share same collision masks for all animations"}),setSameForAllSpritesLabel:(0,j.jsx)(s.Trans,{id:"Share same collision masks for all sprites of this animation"}),hideControlsForSprite:function(e){return t.adaptCollisionMaskAutomatically()||e.isFullImageCollisionMask()}})})}),(0,j.jsxs)(P.Z,{children:[!!oe&&!oe.isFullImageCollisionMask()&&!t.adaptCollisionMaskAutomatically()&&(0,j.jsx)(l.Fragment,{children:(0,j.jsx)(_,{polygons:oe.getCustomCollisionMask(),onPolygonsUpdated:ke,onSetFullImageCollisionMask:function(){return be(!0)},onSetAutomaticallyAdaptCollisionMasks:function(){return ye(!0)},onHoverVertice:O,onClickVertice:N,selectedVerticePtr:D,spriteSize:ee})}),!!oe&&!oe.isFullImageCollisionMask()&&t.adaptCollisionMaskAutomatically()&&(0,j.jsxs)(l.Fragment,{children:[(0,j.jsx)(S.Z,{kind:"info",children:(0,j.jsx)(s.Trans,{id:"Automatic collision mask activated. Click on the button to replace it with a custom one."})}),(0,j.jsx)(d.x1,{justifyContent:"center",children:(0,j.jsx)(c.Z,{label:(0,j.jsx)(s.Trans,{id:"Use a custom collision mask"}),primary:!1,onClick:Ze})})]}),!!oe&&oe.isFullImageCollisionMask()&&(0,j.jsxs)(l.Fragment,{children:[(0,j.jsx)(S.Z,{kind:"info",children:(0,j.jsx)(s.Trans,{id:"This sprite uses a rectangle that is as large as the sprite for its collision mask."})}),(0,j.jsx)(d.x1,{justifyContent:"center",children:(0,j.jsx)(c.Z,{label:(0,j.jsx)(s.Trans,{id:"Use a custom collision mask"}),primary:!1,onClick:Ze})})]}),!oe&&(0,j.jsx)(u.Z,{children:(0,j.jsx)(s.Trans,{id:"Choose an animation and frame to edit the collision masks"})})]})]})})}}};return(0,j.jsx)("div",{style:{flex:1},children:(0,j.jsx)(Y.Z,{editors:Se,initialNodes:we,centralNodeId:""})})}},13498:function(e,t,n){"use strict";n.d(t,{Z:function(){return K}});var r=n(1413),i=n(74165),a=n(15861),o=n(29439),s=n(36600),l=n(28381),c=n(86578),u=n(40243),d=n(18455),p=n(93433),f=n(4942),h=n(11374),g=n(79431),m=n(2066),x=n(38501),v=n(60022),b=n(45987),C=n(51598),j=n(42986),y=n(96355),Z=n(24910),k={nameColumn:{width:"40%"},coordinateColumn:{width:96},toolColumn:{width:24,height:32}},w=n(53162),T=n(37571),S=n(29343),P=["pointX","pointY"],I=function(e){var t=e.pointX,n=e.pointY,r=(0,b.Z)(e,P),i=l.useContext(Z.Z);return(0,S.jsxs)(h.SC,{style:{backgroundColor:r.selected?i.listItem.selectedBackgroundColor:i.list.itemsBackgroundColor},onClick:function(){return r.onClick(r.pointName)},onPointerEnter:function(){return r.onPointerEnter(r.pointName)},onPointerLeave:r.onPointerLeave,children:[(0,S.jsx)(h.Nn,{style:k.nameColumn,children:(0,S.jsx)(j.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:r.pointName,id:r.pointName,fullWidth:!0,errorText:r.nameError?"This name is already taken":void 0,disabled:!r.onChangePointName,commitOnBlur:!0,onChange:r.onChangePointName||function(e){}})}),(0,S.jsx)(h.Nn,{style:k.coordinateColumn,padding:"none",children:(0,S.jsx)(u.sg,{children:(0,S.jsx)(j.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:(0,y.R)(t,4).toString(),type:"number",step:.5,id:"point-x",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangePointX(t)},onBlur:function(e){r.onChangePointX(parseFloat(e.currentTarget.value)||0)},disabled:r.isAutomatic})})}),(0,S.jsx)(h.Nn,{style:k.coordinateColumn,padding:"none",children:(0,S.jsx)(u.sg,{children:(0,S.jsx)(j.Z,{margin:"none",inputStyle:r.selected?{color:i.listItem.selectedTextColor}:void 0,value:(0,y.R)(n,4).toString(),type:"number",step:.5,id:"point-y",onChange:function(e){var t=parseFloat(e);isNaN(t)||r.onChangePointY(t)},onBlur:function(e){r.onChangePointY(parseFloat(e.currentTarget.value)||0)},disabled:r.isAutomatic})})}),(0,S.jsxs)(h.Nn,{style:k.toolColumn,children:[!!r.onRemove&&(0,S.jsx)(C.Z,{size:"small",onClick:r.onRemove,children:(0,S.jsx)(w.Z,{})}),!!r.onEdit&&(0,S.jsx)(C.Z,{size:"small",onClick:r.onEdit,children:(0,S.jsx)(T.Z,{})})]})]})},E=n(1491),M=n.g.gd,L=function(e){var t=l.useState({}),n=(0,o.Z)(t,2),i=n[0],a=n[1],s=e.pointsContainer,c=e.onHoverPoint,u=(0,x.Z)(),g=function(){u(),e.onPointsUpdated()},v=l.useCallback((function(){return c(null)}),[c]),b=s.getAllNonDefaultPoints(),C=(0,d.mapVector)(b,(function(t,n){var o=t.getName();return(0,S.jsx)(I,{pointX:t.getX(),pointY:t.getY(),onChangePointX:function(e){return function(e,t){e.setX(t),g()}(t,e)},onChangePointY:function(e){return function(e,t){e.setY(t),g()}(t,e)},pointName:o,selected:o===e.selectedPointName,nameError:i[o],onChangePointName:function(n){if(o!==n&&n){var i=!0;if(s.hasPoint(n))i=!1;else{var l=t.getName();t.setName(n),e.onRenamedPoint(l,n),e.selectedPointName===o&&e.onSelectPoint(n),g()}a((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,f.Z)({},o,!i))}))}},onPointerEnter:e.onHoverPoint,onPointerLeave:v,onClick:e.onSelectPoint,onRemove:function(){m.ZP.showConfirmDialog("Are you sure you want to remove this point? This can't be undone.")&&(s.delPoint(o),g())}},"point-".concat(t.ptr))})),j=s.getOrigin(),y=s.getCenter(),Z=(0,S.jsx)(I,{pointName:"Origin",pointX:j.getX(),pointY:j.getY(),onChangePointX:function(e){s.getOrigin().setX(e),g()},onChangePointY:function(e){s.getOrigin().setY(e),g()},onPointerEnter:e.onHoverPoint,onPointerLeave:v,onClick:e.onSelectPoint,selected:"Origin"===e.selectedPointName},"origin-point-row"),k=s.isDefaultCenterPoint(),w=(0,S.jsx)(I,{pointName:"Center",isAutomatic:k,pointX:k?e.spriteSize[0]/2:y.getX(),pointY:k?e.spriteSize[1]/2:y.getY(),onChangePointX:function(e){s.getCenter().setX(e),g()},onChangePointY:function(e){s.getCenter().setY(e),g()},onPointerEnter:e.onHoverPoint,onPointerLeave:v,onClick:e.onSelectPoint,selected:"Center"===e.selectedPointName,onEdit:s.isDefaultCenterPoint()?function(){s.setDefaultCenterPoint(!1),g()}:null,onRemove:s.isDefaultCenterPoint()?null:function(){s.setDefaultCenterPoint(!0),g()}},"center-point-row");return(0,S.jsx)(h.RM,{children:[Z,w].concat((0,p.Z)(C))})},A=function(e){return(0,S.jsxs)(u.sg,{expand:!0,children:[(0,S.jsxs)(h.iA,{children:[(0,S.jsx)(h.xD,{children:(0,S.jsxs)(h.SC,{children:[(0,S.jsx)(h.bY,{style:k.nameColumn,children:(0,S.jsx)(s.Trans,{id:"Point name"})}),(0,S.jsx)(h.bY,{style:k.coordinateColumn,padding:"none",children:(0,S.jsx)(u.sg,{children:"X"})}),(0,S.jsx)(h.bY,{style:k.coordinateColumn,padding:"none",children:(0,S.jsx)(u.sg,{children:"Y"})}),(0,S.jsx)(h.bY,{style:k.toolColumn})]})}),(0,S.jsx)(L,{pointsContainer:e.pointsContainer,onHoverPoint:e.onHoverPoint,onSelectPoint:e.onSelectPoint,selectedPointName:e.selectedPointName,onPointsUpdated:e.onPointsUpdated,onRenamedPoint:e.onRenamedPoint,spriteSize:e.spriteSize})]}),(0,S.jsx)(u.LZ,{}),(0,S.jsx)(u.x1,{alignItems:"center",justifyContent:"center",children:(0,S.jsx)(v.Z,{primary:!0,icon:(0,S.jsx)(E.Z,{}),label:(0,S.jsx)(s.Trans,{id:"Add a point"}),onClick:function(){var t=(0,g.Z)("Point",(function(t){return e.pointsContainer.hasPoint(t)})),n=new M.Point(t);e.pointsContainer.addPoint(n),n.delete(),e.onSelectPoint(t),e.onPointsUpdated()}})})]})},O=n(16792),R=1,F=2,D=3,N=function(e,t){return e===F?"Origin":e===D?"Center":t.getName()},_=function(e){var t=l.useRef(null),n=l.useState({draggedPoint:null,draggedPointKind:null}),i=(0,o.Z)(n,2),a=i[0],s=i[1],c=e.pointsContainer,u=e.imageWidth,f=e.imageHeight,h=e.imageOffsetTop,g=e.imageOffsetLeft,m=e.imageZoomFactor,v=e.highlightedPointName,b=e.selectedPointName,C=e.onClickPoint,j=e.onPointsUpdated,y=e.forcedCursor,Z=e.deactivateControls;Z&&(a.draggedPoint||a.draggedPointKind)&&s({draggedPoint:null,draggedPointKind:null});var k=(0,x.Z)(),w=l.useCallback((function(e){if(!t.current)return null;var n=t.current.createSVGPoint();n.x=e.clientX,n.y=e.clientY;var r=t.current.getScreenCTM().inverse(),i=n.matrixTransform(r);return[i.x,i.y]}),[]),T=l.useCallback((function(e,t){a.draggedPoint||s({draggedPoint:e,draggedPointKind:t})}),[a.draggedPoint]),P=l.useCallback((function(){var e;a.draggedPoint&&((e=a.draggedPoint).setX(Math.round(2*e.getX())/2),e.setY(Math.round(2*e.getY())/2),j(),a.draggedPointKind&&a.draggedPoint&&C(N(a.draggedPointKind,a.draggedPoint))),s({draggedPoint:null,draggedPointKind:null})}),[a.draggedPoint,a.draggedPointKind,j,C]),I=l.useCallback((function(t){var n=w(t);if(n){var r=a.draggedPoint,i=a.draggedPointKind;if(r&&i){var o=n[0]/m,s=n[1]/m;i===D&&e.pointsContainer.setDefaultCenterPoint(!1),r.setX(o),r.setY(s),k()}}}),[k,w,m,e.pointsContainer,a]),E=l.useCallback((function(e){var t=e.x,n=e.y,i=e.kind,a=e.point,o=N(i,a),s={cursor:y||"move"};return(0,S.jsxs)(l.Fragment,{children:[(0,S.jsx)("line",{x1:"0",y1:-7,x2:"0",y2:7,style:{stroke:"white",strokeWidth:1,transform:"translate(".concat(t,"px, ").concat(n,"px)")}}),(0,S.jsx)("line",{x1:-7,y1:"0",x2:7,y2:"0",style:{stroke:"white",strokeWidth:1,transform:"translate(".concat(t,"px, ").concat(n,"px)")}}),(0,S.jsx)("circle",(0,r.Z)((0,r.Z)({onPointerDown:function(){return T(a,i)}},(0,O.Y)({draggable:"true"})),{},{fill:o===v?"rgba(0,0,0,0.75)":o===b?"rgba(107,175,255,0.6)":"rgba(255,133,105,0.6)",stroke:o===v?"white":void 0,strokeWidth:2,cx:t,cy:n,r:7,style:s}))]},"point-".concat(o))}),[y,v,T,b]),M=c.isDefaultCenterPoint(),L=l.useCallback((function(e){if("Origin"===e){var t=c.getOrigin();return E({x:t.getX()*m,y:t.getY()*m,kind:F,point:t})}if("Center"===e){var n=c.getCenter();return E({x:(M?u/2:n.getX())*m,y:(M?f/2:n.getY())*m,kind:D,point:n})}var r=c.getPoint(e);return E({x:r.getX()*m,y:r.getY()*m,kind:R,point:r})}),[M,f,u,m,c,E]),A=y?{cursor:y}:{},_=(0,r.Z)({position:"relative",width:"100%",height:"100%"},A),B=(0,r.Z)({position:"absolute",top:h||0,left:g||0,width:u*m,height:f*m,overflow:"visible"},A),U=c.getAllNonDefaultPoints(),V=[].concat((0,p.Z)((0,d.mapVector)(U,(function(e,t){return e.getName()}))),["Origin","Center"]).filter((function(e){return e!==b&&e!==v}));return(0,S.jsx)("div",{style:_,onPointerMove:Z?null:I,onPointerUp:Z?null:P,children:(0,S.jsxs)("svg",{style:B,ref:t,children:[V.map((function(e){return L(e)})),v&&b&&b===v?null:b?L(b):null,v&&L(v)]})})},B=n(3290),U=n(8278),V=n(34974),H=(n(72410),n(28519)),z=n(6996),W=n(2632),G=n(20914),Y=n(65056),q={leftContainer:{display:"flex",overflow:"hidden",flexDirection:"column"},rightContainer:{display:"flex"}},J={direction:"row",first:"preview",second:"properties",splitPercentage:66.67},X={direction:"column",first:"preview",second:"properties",splitPercentage:50},K=function(e){var t=e.animations,n=e.resourcesLoader,p=e.project,f=e.onPointsUpdated,h=e.onRenamedPoint,g=l.useState(0),m=(0,o.Z)(g,2),v=m[0],b=m[1],C=l.useState(0),j=(0,o.Z)(C,2),y=j[0],Z=j[1],k=l.useState(0),w=(0,o.Z)(k,2),T=w[0],P=w[1],I=l.useState(null),E=(0,o.Z)(I,2),M=E[0],L=E[1],O=l.useState(null),R=(0,o.Z)(O,2),F=R[0],D=R[1],N=l.useState([0,0]),K=(0,o.Z)(N,2),Q=K[0],$=K[1],ee=(0,x.Z)(),te=(0,Y.Z)().showConfirmation,ne=(0,U.tY)(t,v,y,T),re=ne.animation,ie=ne.sprite,ae=l.useState(!!ie&&(0,U.fd)(ie,t)),oe=(0,o.Z)(ae,2),se=oe[0],le=oe[1],ce=l.useState(!(!ie||!re)&&(0,U.Mr)(ie,re)),ue=(0,o.Z)(ce,2),de=ue[0],pe=ue[1],fe=l.useCallback((function(e,n){re&&ie&&(e?(0,d.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);(0,U.c)(ie,n)})):n&&(0,U.c)(ie,re)),ee(),f&&f()}),[re,ie,t,ee,f]),he=function(e){b(e),Z(0),P(0)},ge=function(e){Z(e),P(0)},me=function(e){P(e)};l.useEffect((function(){ie&&re&&pe((0,U.Mr)(ie,re))}),[re,ie]);var xe=l.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,te({title:{id:"Use same points for all animations?"},message:{id:"Having the same points for all animations will erase and reset all the other animations points. This can't be undone. Are you sure you want to share these points amongst all the animations of the object?"},confirmButtonLabel:{id:"Use same points"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t||de,le(n=t),pe(r),fe(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[de,fe,te]),ve=l.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,te({title:{id:"Use same points for all frames?"},message:{id:"Having the same points for all frames will erase and reset all the other frames points. This can't be undone. Are you sure you want to share these points amongst all the frames of the animation?"},confirmButtonLabel:{id:"Use same points"},dismissButtonLabel:{id:"Cancel"}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:r=t,le(n=t&&se),pe(r),fe(n,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[se,fe,te]),be=(0,z.UQ)().isMobile?X:J;if(!t.getAnimationsCount())return null;var Ce=ie?ie.getImageName():"",je={preview:{type:"primary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,S.jsx)(G.Z,{background:"medium",style:q.leftContainer,square:!0,children:(0,S.jsx)(u.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:(0,S.jsx)(B.Z,{resourceName:Ce,imageResourceSource:n.getResourceFullUrl(p,Ce,{}),isImageResourceSmooth:(0,B.X)(p,Ce),onImageSize:$,renderOverlay:function(e){return ie&&(0,S.jsx)(_,(0,r.Z)((0,r.Z)({},e),{},{pointsContainer:ie,onPointsUpdated:function(){return fe(se,de)},selectedPointName:M,highlightedPointName:F,onClickPoint:L}))}})})})}},properties:{type:"secondary",noTitleBar:!0,noSoftKeyboardAvoidance:!0,renderEditor:function(){return(0,S.jsx)(G.Z,{background:"medium",style:q.rightContainer,square:!0,children:(0,S.jsxs)(u.sg,{noMargin:!0,expand:!0,children:[(0,S.jsx)(u.x1,{children:(0,S.jsx)(u.sg,{expand:!0,children:(0,S.jsx)(V.Z,{animations:t,animationIndex:v,directionIndex:y,spriteIndex:T,chooseAnimation:he,chooseDirection:ge,chooseSprite:me,sameForAllAnimations:se,sameForAllSprites:de,setSameForAllAnimations:xe,setSameForAllSprites:ve,setSameForAllAnimationsLabel:(0,S.jsx)(s.Trans,{id:"Share same points for all animations"}),setSameForAllSpritesLabel:(0,S.jsx)(s.Trans,{id:"Share same points for all sprites of this animation"})})})}),(0,S.jsxs)(W.Z,{children:[!!ie&&(0,S.jsx)(A,{pointsContainer:ie,onPointsUpdated:function(){return fe(se,de)},selectedPointName:M,onHoverPoint:D,onSelectPoint:L,onRenamedPoint:h,spriteSize:Q}),!ie&&(0,S.jsx)(c.Z,{children:(0,S.jsx)(s.Trans,{id:"Choose an animation and frame to edit the points"})})]})]})})}}};return(0,S.jsx)("div",{style:{flex:1},children:(0,S.jsx)(H.Z,{editors:je,initialNodes:be,centralNodeId:""})})}},8278:function(e,t,n){"use strict";n.d(t,{CO:function(){return b},DJ:function(){return T},E8:function(){return I},Gn:function(){return Z},K3:function(){return S},Mr:function(){return m},Ng:function(){return P},Vv:function(){return v},__:function(){return c},c:function(){return f},eS:function(){return k},fd:function(){return x},ge:function(){return u},ir:function(){return g},lg:function(){return w},rY:function(){return y},sL:function(){return j},tY:function(){return l},xw:function(){return p}});var r=n(93433),i=n(18455),a=n(49179),o=n.n(a),s=n.g.gd,l=function(e,t,n,r){var i=t<e.getAnimationsCount()?e.getAnimation(t):null;if(!i)return{animation:null,direction:null,sprite:null};var a=n<i.getDirectionsCount()?i.getDirection(n):null;if(!a)return{animation:i,direction:null,sprite:null};var o=r<a.getSpritesCount()?a.getSprite(r):null;return{animation:i,direction:a,sprite:o}},c=function(e){for(var t=0,n=0;n<e.getAnimationsCount();n++)for(var r=e.getAnimation(n),i=0;i<r.getDirectionsCount();i++){t+=r.getDirection(i).getSpritesCount()}return t},u=function(e){for(var t=new Set,n=0;n<e.getAnimationsCount();n++)for(var i=e.getAnimation(n),a=0;a<i.getDirectionsCount();a++)for(var o=i.getDirection(a),s=0;s<o.getSpritesCount();s++)for(var l=o.getSprite(s).getAllNonDefaultPoints(),c=0;c<l.size();c++){var u=l.at(c);t.add(u.getName())}return(0,r.Z)(t)},d=function(e,t){t.setX(e.getX()),t.setY(e.getY()),t.setName(e.getName())},p=function(e,t){e.ptr!==t.ptr&&(d(e.getCenter(),t.getCenter()),d(e.getOrigin(),t.getOrigin()),t.setDefaultCenterPoint(e.isDefaultCenterPoint()),t.getAllNonDefaultPoints().clear(),(0,i.mapVector)(e.getAllNonDefaultPoints(),(function(e){t.addPoint(e)})))},f=function(e,t){(0,i.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);(0,i.mapFor)(0,r.getSpritesCount(),(function(t){var n=r.getSprite(t);p(e,n)}))}))},h=function(e,t){return e.getX()===t.getX()&&e.getY()===t.getY()&&e.getName()===t.getName()},g=function(e,t){return o()((0,i.mapFor)(0,t.getSpritesCount(),(function(n){var r,a,s=t.getSprite(n);return a=e,!!h((r=s).getCenter(),a.getCenter())&&!!h(r.getOrigin(),a.getOrigin())&&r.isDefaultCenterPoint()===a.isDefaultCenterPoint()&&r.getAllNonDefaultPoints().size()===a.getAllNonDefaultPoints().size()&&o()((0,i.mapVector)(r.getAllNonDefaultPoints(),(function(e){return!!a.hasPoint(e.getName())&&h(e,a.getPoint(e.getName()))})))})))},m=function(e,t){return o()((0,i.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);return g(e,r)})))},x=function(e,t){return o()((0,i.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);return m(e,r)})))},v=function(e,t){e.ptr!==t.ptr&&(t.setFullImageCollisionMask(e.isFullImageCollisionMask()),t.getCustomCollisionMask().clear(),(0,i.mapVector)(e.getCustomCollisionMask(),(function(e){t.getCustomCollisionMask().push_back(e)})))},b=function(e,t){(0,i.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);(0,i.mapFor)(0,r.getSpritesCount(),(function(t){var n=r.getSprite(t);v(e,n)}))}))},C=function(e,t){if(e.isFullImageCollisionMask()!==t.isFullImageCollisionMask())return!1;if(e.isFullImageCollisionMask()&&t.isFullImageCollisionMask())return!0;var n=e.getCustomCollisionMask(),r=t.getCustomCollisionMask();return n.size()===r.size()&&o()((0,i.mapVector)(n,(function(e,t){return function(e,t){var n=e.getVertices(),r=t.getVertices();return n.size()===r.size()&&o()((0,i.mapVector)(n,(function(e,t){var n=r.at(t);return e.get_x()===n.get_x()&&e.get_y()===n.get_y()})))}(e,r.at(t))})))},j=function(e,t){return o()((0,i.mapFor)(0,t.getSpritesCount(),(function(n){var r=t.getSprite(n);return C(r,e)})))},y=function(e,t){return o()((0,i.mapFor)(0,t.getDirectionsCount(),(function(n){var r=t.getDirection(n);return j(e,r)})))},Z=function(e,t){return o()((0,i.mapFor)(0,t.getAnimationsCount(),(function(n){var r=t.getAnimation(n);return y(e,r)})))},k=function(e){var t=l(e,0,0,0).sprite;return!!t&&t.isFullImageCollisionMask()},w=function(e,t){(0,i.mapFor)(0,e.getDirectionsCount(),(function(n){for(var r=e.getDirection(n),a=(0,i.mapFor)(0,r.getSpritesCount(),(function(e){var n=r.getSprite(e);return!!t[n.ptr]})),o=r.getSpritesCount()-1;o>=0;o--)a[o]&&r.removeSprite(o)}))},T=function(e,t){(0,i.mapFor)(0,e.getDirectionsCount(),(function(n){for(var r=e.getDirection(n),a=(0,i.mapFor)(0,r.getSpritesCount(),(function(e){var n=r.getSprite(e);return!!t[n.ptr]})),o=r.getSpritesCount()-1;o>=0;o--)if(a[o]){var l=r.getSprite(o),c=new s.Sprite;c.setImageName(l.getImageName()),p(l,c),v(l,c),r.addSprite(c),r.moveSprite(r.getSpritesCount()-1,o),c.delete()}}))},S=function(e){for(var t=0;t<e.getAnimationsCount();t++)for(var n=e.getAnimation(t),r=0;r<n.getDirectionsCount();r++){if(n.getDirection(r).getSpritesCount()>0)return!0}return!1},P=function(e){if(0===e.getAnimationsCount())return null;var t=e.getAnimation(0);if(0===t.getDirectionsCount())return null;var n=t.getDirection(0);return 0===n.getSpritesCount()?null:n.getSprite(0)},I=function(e,t){for(var n=0;n<e.getAnimationsCount();n++)for(var r=e.getAnimation(n),i=0;i<r.getDirectionsCount();i++)for(var a=r.getDirection(i),o=0;o<a.getSpritesCount();o++){var s=a.getSprite(o);s.setFullImageCollisionMask(!t),t&&s.setCustomCollisionMask(t)}}},34974:function(e,t,n){"use strict";var r=n(36600),i=n(28381),a=n(81683),o=n(90242),s=n(57597),l=n(18455),c=n(8278),u=n(61325),d=n(29343);t.Z=function(e){var t=e.animations,n=e.animationIndex,p=e.directionIndex,f=e.spriteIndex,h=e.sameForAllAnimations,g=e.sameForAllSprites,m=e.chooseAnimation,x=e.chooseDirection,v=e.chooseSprite,b=e.setSameForAllAnimations,C=e.setSameForAllSprites,j=e.setSameForAllAnimationsLabel,y=e.setSameForAllSpritesLabel,Z=e.hideControlsForSprite,k=(0,c.tY)(t,n,p,f),w=k.animation,T=k.direction,S=k.sprite,P=!T||!T.getSpritesCount()||!S||Z&&Z(S);return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)(u.ep,{noColumnMargin:!0,noResponsiveLandscape:!0,children:[(0,d.jsx)(a.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(r.Trans,{id:"Animation"}),value:n,onChange:function(e,t,n){return m(parseInt(n,10)||0)},children:(0,l.mapFor)(0,t.getAnimationsCount(),(function(e){var n=t.getAnimation(e);return(0,d.jsx)(o.Z,{value:e,label:{id:"Animation #{i} {0}",values:{0:n.getName(),i:e}}},e)}))}),w&&w.getDirectionsCount()>1&&(0,d.jsx)(a.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(r.Trans,{id:"Direction"}),value:p,onChange:function(e,t,n){return x(parseInt(n,10)||0)},children:(0,l.mapFor)(0,w.getDirectionsCount(),(function(e){return(0,d.jsx)(o.Z,{value:e,label:{id:"Direction #{i}",values:{i:e}}},e)}))}),T&&(0,d.jsx)(a.Z,{fullWidth:!0,floatingLabelText:(0,d.jsx)(r.Trans,{id:"Frame"}),value:f,onChange:function(e,t,n){return v(parseInt(n,10)||0)},children:(0,l.mapFor)(0,T.getSpritesCount(),(function(e){return(0,d.jsx)(o.Z,{value:e,label:{id:"Frame #{i}",values:{i:e}}},e)}))})]}),!P&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Z,{label:j,labelPosition:"right",toggled:h,onToggle:function(e,t){return b(t)}}),(0,d.jsx)(s.Z,{label:y,labelPosition:"right",toggled:g,onToggle:function(e,t){return C(t)}})]})]})}},92666:function(e,t,n){"use strict";n.d(t,{Z:function(){return lt}});var r=n(15671),i=n(43144),a=n(60136),o=n(29388),s=n(1413),l=n(36600),c=n(28381),u=n(21601),d=n(40243),p=n(37237),f=n(94854),h=n(61325),g=n(26554),m=n(72410),x=n(42986),v=n(89267),b=n(51535),C=n(78118),j=n(29343),y=c.memo((function(e){return(0,j.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 6.66667C3.5 6.39052 3.72386 6.16667 4 6.16667H11.3333C11.6095 6.16667 11.8333 6.39052 11.8333 6.66667C11.8333 6.94281 11.6095 7.16667 11.3333 7.16667H4C3.72386 7.16667 3.5 6.94281 3.5 6.66667Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 12C3.5 11.7239 3.72386 11.5 4 11.5H11.3333C11.6095 11.5 11.8333 11.7239 11.8333 12C11.8333 12.2761 11.6095 12.5 11.3333 12.5H4C3.72386 12.5 3.5 12.2761 3.5 12Z",fill:"currentColor"})]}))})),Z=c.memo((function(e){return(0,j.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6.66667C5.5 6.39052 5.72386 6.16667 6 6.16667H11.3333C11.6095 6.16667 11.8333 6.39052 11.8333 6.66667C11.8333 6.94281 11.6095 7.16667 11.3333 7.16667H6C5.72386 7.16667 5.5 6.94281 5.5 6.66667Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.7239 5.72386 11.5 6 11.5H11.3333C11.6095 11.5 11.8333 11.7239 11.8333 12C11.8333 12.2761 11.6095 12.5 11.3333 12.5H6C5.72386 12.5 5.5 12.2761 5.5 12Z",fill:"currentColor"})]}))})),k=c.memo((function(e){return(0,j.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6.66667C5.5 6.39052 5.72386 6.16667 6 6.16667H13.3333C13.6095 6.16667 13.8333 6.39052 13.8333 6.66667C13.8333 6.94281 13.6095 7.16667 13.3333 7.16667H6C5.72386 7.16667 5.5 6.94281 5.5 6.66667Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 4C3.5 3.72386 3.72386 3.5 4 3.5H13.3333C13.6095 3.5 13.8333 3.72386 13.8333 4C13.8333 4.27614 13.6095 4.5 13.3333 4.5H4C3.72386 4.5 3.5 4.27614 3.5 4Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 9.33333C3.5 9.05719 3.72386 8.83333 4 8.83333H13.3333C13.6095 8.83333 13.8333 9.05719 13.8333 9.33333C13.8333 9.60948 13.6095 9.83333 13.3333 9.83333H4C3.72386 9.83333 3.5 9.60948 3.5 9.33333Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 12C5.5 11.7239 5.72386 11.5 6 11.5H13.3333C13.6095 11.5 13.8333 11.7239 13.8333 12C13.8333 12.2761 13.6095 12.5 13.3333 12.5H6C5.72386 12.5 5.5 12.2761 5.5 12Z",fill:"currentColor"})]}))})),w=c.memo((function(e){return(0,j.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2303 12.2803C13.9374 12.5732 13.4626 12.5732 13.1697 12.2803L12.7 11.8107L12.7 18C12.7 18.4142 12.3642 18.75 11.95 18.75C11.5358 18.75 11.2 18.4142 11.2 18V11.8107L10.7303 12.2803C10.4374 12.5732 9.96256 12.5732 9.66967 12.2803C9.37677 11.9874 9.37677 11.5126 9.66967 11.2197L11.4197 9.46967C11.7126 9.17678 12.1874 9.17678 12.4803 9.46967L14.2303 11.2197C14.5232 11.5126 14.5232 11.9874 14.2303 12.2803Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 6C3.25 5.58579 3.58579 5.25 4 5.25L20 5.25C20.4142 5.25 20.75 5.58579 20.75 6C20.75 6.41421 20.4142 6.75 20 6.75L4 6.75C3.58579 6.75 3.25 6.41421 3.25 6Z",fill:"currentColor"})]}))})),T=c.memo((function(e){return(0,j.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2303 5.21967C14.5232 5.51256 14.5232 5.98744 14.2303 6.28033L12.4803 8.03033C12.1874 8.32322 11.7126 8.32322 11.4197 8.03033L9.66967 6.28033C9.37677 5.98744 9.37677 5.51256 9.66967 5.21967C9.96256 4.92678 10.4374 4.92678 10.7303 5.21967L11.2 5.68934V2C11.2 1.58579 11.5358 1.25 11.95 1.25C12.3642 1.25 12.7 1.58579 12.7 2V5.68934L13.1697 5.21967C13.4626 4.92678 13.9374 4.92678 14.2303 5.21967Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2303 18.2803C14.5232 17.9874 14.5232 17.5126 14.2303 17.2197L12.4803 15.4697C12.1874 15.1768 11.7126 15.1768 11.4197 15.4697L9.66967 17.2197C9.37677 17.5126 9.37677 17.9874 9.66967 18.2803C9.96256 18.5732 10.4374 18.5732 10.7303 18.2803L11.2 17.8107V21.5C11.2 21.9142 11.5358 22.25 11.95 22.25C12.3642 22.25 12.7 21.9142 12.7 21.5V17.8107L13.1697 18.2803C13.4626 18.5732 13.9374 18.5732 14.2303 18.2803Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 12C3.25 11.5858 3.58579 11.25 4 11.25H20C20.4142 11.25 20.75 11.5858 20.75 12C20.75 12.4142 20.4142 12.75 20 12.75H4C3.58579 12.75 3.25 12.4142 3.25 12Z",fill:"currentColor"})]}))})),S=c.memo((function(e){return(0,j.jsxs)(C.Z,(0,s.Z)((0,s.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2303 11.7197C14.5232 12.0126 14.5232 12.4874 14.2303 12.7803L12.4803 14.5303C12.1874 14.8232 11.7126 14.8232 11.4197 14.5303L9.66967 12.7803C9.37677 12.4874 9.37677 12.0126 9.66967 11.7197C9.96256 11.4268 10.4374 11.4268 10.7303 11.7197L11.2 12.1893L11.2 6C11.2 5.58579 11.5358 5.25 11.95 5.25C12.3642 5.25 12.7 5.58579 12.7 6L12.7 12.1893L13.1697 11.7197C13.4626 11.4268 13.9374 11.4268 14.2303 11.7197Z",fill:"currentColor"}),(0,j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.25 18C3.25 17.5858 3.58579 17.25 4 17.25H20C20.4142 17.25 20.75 17.5858 20.75 18C20.75 18.4142 20.4142 18.75 20 18.75H4C3.58579 18.75 3.25 18.4142 3.25 18Z",fill:"currentColor"})]}))})),P=n(86278),I=n(11858),E=n(90286),M=n.g.gd,L={marginRight:10},A={sizeTextField:(0,s.Z)({width:90},L),resourcesSelector:{alignSelf:"center"},toolbarItem:L,checkbox:L},O=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,i=t.projectScopedContainersAccessor,a=t.resourceManagementProps,o=t.renderObjectNameField,s=M.asTextObjectConfiguration(n),c=s.getTextAlignment(),C=s.getVerticalTextAlignment();return(0,j.jsxs)(h.ak,{noMargin:!0,children:[o&&o(),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,noMargin:!0,alignItems:"center",children:[(0,j.jsxs)(d.x1,{noMargin:!0,alignItems:"center",children:[(0,j.jsx)(f.c,{firstChild:!0,children:(0,j.jsx)(l.Trans,{id:"Size:"})}),(0,j.jsx)(x.Z,{commitOnBlur:!0,id:"text-object-font-size",type:"number",margin:"none",style:A.sizeTextField,value:s.getCharacterSize(),onChange:function(t){s.setCharacterSize(parseInt(t,10)||0),e.forceUpdate()}}),(0,j.jsx)(f.c,{children:(0,j.jsx)(l.Trans,{id:"Color:"})}),(0,j.jsx)(p.Z,{style:A.toolbarItem,disableAlpha:!0,color:(0,I.A0)(s.getColor(),255),onChangeComplete:function(t){var n=(0,I.KC)(t.rgb);s.setColor(n),e.forceUpdate()}}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Bold"}),checked:s.isBold(),onCheck:function(t,n){s.setBold(n),e.forceUpdate()},style:A.checkbox}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Italic"}),checked:s.isItalic(),onCheck:function(t,n){s.setItalic(n),e.forceUpdate()},style:A.checkbox})]}),(0,j.jsxs)(h.pJ,{noMargin:!0,alignItems:"center",children:[(0,j.jsxs)(v.Z,{size:"small",children:[(0,j.jsx)(b.Z,{variant:"left"===c?"contained":"outlined",color:"left"===c?"secondary":"default",onClick:function(){s.setTextAlignment("left"),e.forceUpdate()},children:(0,j.jsx)(y,{})}),(0,j.jsx)(b.Z,{variant:"center"===c?"contained":"outlined",color:"center"===c?"secondary":"default",onClick:function(){s.setTextAlignment("center"),e.forceUpdate()},children:(0,j.jsx)(Z,{})}),(0,j.jsx)(b.Z,{variant:"right"===c?"contained":"outlined",color:"right"===c?"secondary":"default",onClick:function(){s.setTextAlignment("right"),e.forceUpdate()},children:(0,j.jsx)(k,{})})]}),(0,j.jsxs)(v.Z,{size:"small",children:[(0,j.jsx)(b.Z,{variant:"top"===C?"contained":"outlined",color:"top"===C?"secondary":"default",onClick:function(){s.setVerticalTextAlignment("top"),e.forceUpdate()},children:(0,j.jsx)(w,{})}),(0,j.jsx)(b.Z,{variant:"center"===C?"contained":"outlined",color:"center"===C?"secondary":"default",onClick:function(){s.setVerticalTextAlignment("center"),e.forceUpdate()},children:(0,j.jsx)(T,{})}),(0,j.jsx)(b.Z,{variant:"bottom"===C?"contained":"outlined",color:"bottom"===C?"secondary":"default",onClick:function(){s.setVerticalTextAlignment("bottom"),e.forceUpdate()},children:(0,j.jsx)(S,{})})]})]})]}),(0,j.jsx)(g.Z,{project:r,projectScopedContainersAccessor:i,resourceManagementProps:a,resourcesLoader:m.Z,resourceKind:"font",fullWidth:!0,canBeReset:!0,initialResourceName:s.getFontName(),onChange:function(t){s.setFontName(t),e.forceUpdate()},floatingLabelText:(0,j.jsx)(l.Trans,{id:"Choose a font"}),hintText:(0,j.jsx)(l.Trans,{id:"Choose a font"})}),(0,j.jsx)(d.x1,{noMargin:!0,children:(0,j.jsx)(x.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Initial text to display"}),floatingLabelFixed:!0,id:"text-object-initial-text",commitOnBlur:!0,translatableHintText:{id:"Enter the text to be displayed by the object"},fullWidth:!0,multiline:!0,rows:8,rowsMax:8,value:s.getText(),onChange:function(t){s.setText(t),e.forceUpdate(),e.props.onSizeUpdated()}})}),(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Outline"})}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Enabled"}),checked:s.isOutlineEnabled(),onCheck:function(t,n){s.setOutlineEnabled(n),e.forceUpdate()}}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,noMargin:!0,noColumnMargin:!0,children:[(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(E.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Color"}),disableAlpha:!0,fullWidth:!0,color:s.getOutlineColor(),onChange:function(t){var n=0===t.length?"":(0,I.JO)(t);s.setOutlineColor(n),e.forceUpdate()}})}),(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(x.Z,{floatingLabelFixed:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Thickness"}),type:"number",value:s.getOutlineThickness(),onChange:function(t){s.setOutlineThickness(parseInt(t,10)||0),e.forceUpdate()}})})]}),(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Shadow"})}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Enabled"}),checked:s.isShadowEnabled(),onCheck:function(t,n){s.setShadowEnabled(n),e.forceUpdate()}}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,noMargin:!0,noColumnMargin:!0,children:[(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(x.Z,{floatingLabelFixed:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Distance"}),type:"number",value:s.getShadowDistance(),onChange:function(t){s.setShadowDistance(parseInt(t,10)||0),e.forceUpdate()}})}),(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(x.Z,{floatingLabelFixed:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Angle"}),type:"number",value:s.getShadowAngle(),onChange:function(t){s.setShadowAngle(parseInt(t,10)||0),e.forceUpdate()}})})]}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(E.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Color"}),disableAlpha:!0,fullWidth:!0,color:s.getShadowColor(),onChange:function(t){var n=0===t.length?"":(0,I.JO)(t);s.setShadowColor(n),e.forceUpdate()}})}),(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(x.Z,{floatingLabelFixed:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Opacity (0 - 255)"}),type:"number",value:s.getShadowOpacity(),onChange:function(t){s.setShadowOpacity(parseInt(t,10)||0),e.forceUpdate()}})})]}),(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(x.Z,{floatingLabelFixed:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Blur radius"}),type:"number",value:s.getShadowBlurRadius(),onChange:function(t){s.setShadowBlurRadius(parseInt(t,10)||0),e.forceUpdate()}})}),(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Multiline"})}),(0,j.jsx)(d.x1,{noMargin:!0,children:(0,j.jsx)(x.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Line height"}),type:"number",fullWidth:!0,value:s.getLineHeight(),onChange:function(t){s.setLineHeight(parseFloat(t)||0),e.forceUpdate()}})})]})}}]),n}(c.Component),R=n(65035),F=n.g.gd,D=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,i=t.resourceManagementProps,a=t.projectScopedContainersAccessor,o=t.objectName,s=t.renderObjectNameField,c=F.asTiledSpriteConfiguration(n);return(0,j.jsxs)(h.ak,{noMargin:!0,children:[s&&s(),(0,j.jsx)(R.Z,{project:r,resourceManagementProps:i,projectScopedContainersAccessor:a,resourceKind:"image",resourceName:c.getTexture(),defaultNewResourceName:o,onChange:function(t){c.setTexture(t),e.forceUpdate()},floatingLabelText:(0,j.jsx)(l.Trans,{id:"Select an image"})}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Default width (in pixels)"}),fullWidth:!0,type:"number",value:c.getWidth(),onChange:function(t){c.setWidth(parseInt(t,10)||0),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Default height (in pixels)"}),fullWidth:!0,type:"number",value:c.getHeight(),onChange:function(t){c.setHeight(parseInt(t,10)||0),e.forceUpdate()}})]})]})}}]),n}(c.Component),N=n.g.gd,_=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,i=t.resourceManagementProps,a=t.projectScopedContainersAccessor,o=t.objectName,s=t.renderObjectNameField,c=N.asPanelSpriteConfiguration(n);return(0,j.jsxs)(h.ak,{noMargin:!0,children:[s&&s(),(0,j.jsx)(R.Z,{project:r,resourceManagementProps:i,projectScopedContainersAccessor:a,resourceKind:"image",resourceName:c.getTexture(),defaultNewResourceName:o,onChange:function(t){c.setTexture(t),e.forceUpdate()},floatingLabelText:(0,j.jsx)(l.Trans,{id:"Select an image"})}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Repeat borders and center textures (instead of stretching them)"}),checked:c.isTiled(),onCheck:function(t,n){c.setTiled(n),e.forceUpdate()}}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Top margin"}),fullWidth:!0,type:"number",value:c.getTopMargin(),onChange:function(t){c.setTopMargin(parseInt(t,10)||0),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Bottom margin"}),fullWidth:!0,type:"number",value:c.getBottomMargin(),onChange:function(t){c.setBottomMargin(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Left margin"}),fullWidth:!0,type:"number",value:c.getLeftMargin(),onChange:function(t){c.setLeftMargin(parseInt(t,10)||0),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Right margin"}),fullWidth:!0,type:"number",value:c.getRightMargin(),onChange:function(t){c.setRightMargin(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,noMargin:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Default width (in pixels)"}),fullWidth:!0,type:"number",value:c.getWidth(),onChange:function(t){c.setWidth(parseInt(t,10)||0),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Default height (in pixels)"}),fullWidth:!0,type:"number",value:c.getHeight(),onChange:function(t){c.setHeight(parseInt(t,10)||0),e.forceUpdate()}})]})]})}}]),n}(c.Component),B=n(74165),U=n(15861),V=n(29439),H=n(8005),z=n(10888),W=n(60022),G=n(1773),Y=n(4076),q=n(13498),J=n(92319),X=n(2632),K=n(38501),Q=n(3429),$=function(){var e=(0,Q.Z)("intermediate-changing-animations").DismissableTutorialMessage;return e?(0,j.jsxs)(d.sg,{noMargin:!0,children:[e,(0,j.jsx)(d.LZ,{})]}):null},ee=n(6996),te=n(9383),ne=n(1491),re=n(29050),ie=n(8278),ae=n.g.gd,oe={scrollView:{display:"flex",flexDirection:"column"}};var se=n(86578);var le=n(81683),ce=n(90242),ue=n.g.gd,de=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.renderObjectNameField,i=ue.asShapePainterConfiguration(n);return(0,j.jsxs)(h.ak,{noMargin:!0,children:[r&&r(),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Draw the shapes relative to the object position on the scene"}),checked:!i.areCoordinatesAbsolute(),onCheck:function(t,n){n?i.setCoordinatesRelative():i.setCoordinatesAbsolute(),e.forceUpdate()}}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Clear the rendered image between each frame"}),checked:i.isClearedBetweenFrames(),onCheck:function(t,n){i.setClearBetweenFrames(n),e.forceUpdate()}}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(E.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Outline color"}),disableAlpha:!0,fullWidth:!0,color:i.getOutlineColor(),onChange:function(t){var n=(0,I.A0)(t);n&&(i.setOutlineColor((0,I.KC)(n)),e.forceUpdate())}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Outline opacity (0-255)"}),fullWidth:!0,type:"number",value:i.getOutlineOpacity(),onChange:function(t){i.setOutlineOpacity(parseInt(t,10)||0),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Outline size (in pixels)"}),fullWidth:!0,type:"number",value:i.getOutlineSize(),onChange:function(t){i.setOutlineSize(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(E.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Fill color"}),disableAlpha:!0,fullWidth:!0,color:i.getFillColor(),onChange:function(t){var n=(0,I.A0)(t);n&&(i.setFillColor((0,I.KC)(n)),e.forceUpdate())}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Fill opacity (0-255)"}),fullWidth:!0,type:"number",value:i.getFillOpacity(),onChange:function(t){i.setFillOpacity(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,j.jsx)(h.ep,{alignItems:"center",noMargin:!0,noResponsiveLandscape:!0,children:(0,j.jsxs)(le.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Anti-aliasing"}),value:i.getAntialiasing(),onChange:function(t,n,r){i.setAntialiasing(r),e.forceUpdate()},children:[(0,j.jsx)(ce.Z,{value:"none",label:{id:"None"}},"none"),(0,j.jsx)(ce.Z,{value:"low",label:{id:"Low quality"}},"low"),(0,j.jsx)(ce.Z,{value:"medium",label:{id:"Medium quality"}},"medium"),(0,j.jsx)(ce.Z,{value:"high",label:{id:"High quality"}},"high")]})})]})}}]),n}(c.Component),pe=n(95644),fe=n(94446),he=n.g.gd,ge=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.objectConfiguration,r=t.project,i=t.resourceManagementProps,a=t.projectScopedContainersAccessor,o=t.objectName,s=t.renderObjectNameField,c=he.asParticleEmitterConfiguration(n),d=(0,fe.cG)(n.getType());return(0,j.jsxs)(h.ak,{noMargin:!0,children:[s&&s(),d.map((function(e){return(0,j.jsx)(pe.Z,{tutorialId:e},e)})),(0,j.jsxs)(le.Z,{fullWidth:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particle type"}),value:c.getRendererType(),onChange:function(t,n,r){var i=parseInt(r,10)||0;c.setRendererType(i),i!==he.ParticleEmitterObject.Quad&&c.setParticleTexture(""),e.forceUpdate()},children:[(0,j.jsx)(ce.Z,{value:he.ParticleEmitterObject.Point,label:{id:"Circle"}}),(0,j.jsx)(ce.Z,{value:he.ParticleEmitterObject.Line,label:{id:"Line"}}),(0,j.jsx)(ce.Z,{value:he.ParticleEmitterObject.Quad,label:{id:"Image"}})]}),c.getRendererType()===he.ParticleEmitterObject.Point&&(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Size"}),fullWidth:!0,type:"number",value:c.getRendererParam1(),onChange:function(t){c.setRendererParam1(parseFloat(t)),e.forceUpdate()}}),c.getRendererType()===he.ParticleEmitterObject.Line&&(0,j.jsxs)(h.ep,{noMargin:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Lines length"}),fullWidth:!0,type:"number",value:c.getRendererParam1(),onChange:function(t){c.setRendererParam1(parseFloat(t)),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Lines thickness"}),fullWidth:!0,type:"number",value:c.getRendererParam2(),onChange:function(t){c.setRendererParam2(parseFloat(t)),e.forceUpdate()}})]}),c.getRendererType()===he.ParticleEmitterObject.Quad&&(0,j.jsx)(R.Z,{project:r,resourceManagementProps:i,projectScopedContainersAccessor:a,resourceKind:"image",resourceName:c.getParticleTexture(),defaultNewResourceName:o,onChange:function(t){c.setParticleTexture(t),e.forceUpdate()},floatingLabelText:(0,j.jsx)(l.Trans,{id:"Select an image"})}),c.getRendererType()===he.ParticleEmitterObject.Quad&&(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particles start width"}),fullWidth:!0,type:"number",value:c.getRendererParam1(),onChange:function(t){c.setRendererParam1(Math.max(0,parseFloat(t))),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particles start height"}),fullWidth:!0,type:"number",value:c.getRendererParam2(),onChange:function(t){c.setRendererParam2(Math.max(0,parseFloat(t))),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(E.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particles start color"}),disableAlpha:!0,fullWidth:!0,color:c.getParticleColor1(),onChange:function(t){var n=(0,I.A0)(t);n&&(c.setParticleColor1((0,I.KC)(n)),e.forceUpdate())}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Start opacity (0-255)"}),fullWidth:!0,type:"number",value:c.getParticleAlpha1(),onChange:function(t){c.setParticleAlpha1(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(E.Z,{floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particles end color"}),disableAlpha:!0,fullWidth:!0,color:c.getParticleColor2(),onChange:function(t){var n=(0,I.A0)(t);n&&(c.setParticleColor2((0,I.KC)(n)),e.forceUpdate())}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"End opacity (0-255)"}),fullWidth:!0,type:"number",value:c.getParticleAlpha2(),onChange:function(t){c.setParticleAlpha2(parseInt(t,10)||0),e.forceUpdate()}})]}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Additive rendering"}),checked:c.isRenderingAdditive(),onCheck:function(t,n){n?c.setRenderingAdditive():c.setRenderingAlpha(),e.forceUpdate()}}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Delete when out of particles"}),checked:c.getDestroyWhenNoParticles(),onCheck:function(t,n){c.setDestroyWhenNoParticles(n),e.forceUpdate()}}),(0,j.jsx)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Maximum number of particles displayed"}),fullWidth:!0,type:"number",value:c.getMaxParticleNb(),onChange:function(t){c.setMaxParticleNb(parseInt(t,10)||0),e.forceUpdate()}})}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Number of particles in tank (-1 for infinite)"}),fullWidth:!0,type:"number",value:c.getTank(),onChange:function(t){c.setTank(parseInt(t,10)||0),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Flow of particles (particles/seconds)"}),fullWidth:!0,type:"number",value:c.getFlow(),onChange:function(t){c.setFlow(parseFloat(t)||0),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Minimum emitter force applied on particles"}),fullWidth:!0,type:"number",value:c.getEmitterForceMin(),onChange:function(t){c.setEmitterForceMin(parseFloat(t)||0),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Maximum emitter force applied on particles"}),fullWidth:!0,type:"number",value:c.getEmitterForceMax(),onChange:function(t){c.setEmitterForceMax(parseFloat(t)||0),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Spray cone angle (in degrees)"}),fullWidth:!0,type:"number",value:c.getConeSprayAngle(),onChange:function(t){c.setConeSprayAngle(parseFloat(t)||0),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Radius of the emitter"}),fullWidth:!0,type:"number",value:c.getZoneRadius(),onChange:function(t){c.setZoneRadius(parseFloat(t)||0),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Gravity on particles on X axis"}),fullWidth:!0,type:"number",value:c.getParticleGravityX(),onChange:function(t){c.setParticleGravityX(parseFloat(t)),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Gravity on particles on Y axis"}),fullWidth:!0,type:"number",value:c.getParticleGravityY(),onChange:function(t){c.setParticleGravityY(parseFloat(t)),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particle minimum lifetime (in seconds)"}),fullWidth:!0,type:"number",value:c.getParticleLifeTimeMin(),onChange:function(t){c.setParticleLifeTimeMin(parseFloat(t)),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particle maximum lifetime (in seconds)"}),fullWidth:!0,type:"number",value:c.getParticleLifeTimeMax(),onChange:function(t){c.setParticleLifeTimeMax(parseFloat(t)),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particle start size (in percents)"}),fullWidth:!0,type:"number",value:c.getParticleSize1(),onChange:function(t){c.setParticleSize1(parseFloat(t)),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particle end size (in percents)"}),fullWidth:!0,type:"number",value:c.getParticleSize2(),onChange:function(t){c.setParticleSize2(parseFloat(t)),e.forceUpdate()}})]}),(0,j.jsxs)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particle minimum rotation speed (degrees/second)"}),fullWidth:!0,type:"number",value:c.getParticleAngle1(),onChange:function(t){c.setParticleAngle1(parseFloat(t)),e.forceUpdate()}}),(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Particle maximum rotation speed (degrees/second)"}),fullWidth:!0,type:"number",value:c.getParticleAngle2(),onChange:function(t){c.setParticleAngle2(parseFloat(t)),e.forceUpdate()}})]}),(0,j.jsx)(h.ep,{noMargin:!0,noResponsiveLandscape:!0,children:(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Jump forward in time on creation (in seconds)"}),fullWidth:!0,type:"number",value:c.getJumpForwardInTimeOnCreation(),onChange:function(t){c.setJumpForwardInTimeOnCreation(parseFloat(t)),e.forceUpdate()}})})]})}}]),n}(c.Component),me=n(57309),xe=n(94258),ve=n(44397),be=n(38092),Ce=n.g.gd,je=function(e){var t=e.objectConfiguration,n=e.project,r=e.resourceManagementProps,i=e.projectScopedContainersAccessor,a=e.unsavedChanges,o=e.renderObjectNameField,s=Ce.castObject(t,Ce.ObjectConfiguration),u=s.getProperties(),p=(0,xe.ZP)({properties:u,defaultValueProperties:null,getProperties:function(e){return e.getProperties()},onUpdateProperty:function(e,t,n){return e.updateProperty(t,n)}}),f=(0,ve.gF)()[s.getType()],g=(0,fe.cG)(s.getType());return(0,j.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,j.jsxs)(h.ak,{noMargin:!0,children:[o&&o(),g.map((function(e){return(0,j.jsx)(pe.Z,{tutorialId:e},e)})),p.length?(0,j.jsxs)(c.Fragment,{children:[f?(0,j.jsx)(d.x1,{children:(0,j.jsx)(h.ak,{noMargin:!0,children:f.map((function(e,n){var r=e.kind,i=e.message;return(0,j.jsx)(be.Z,{kind:r,children:t._(i)},n)}))})}):null,(0,j.jsx)(me.Z,{unsavedChanges:a,schema:p,instances:[s],project:n,resourceManagementProps:r,projectScopedContainersAccessor:i})]}):(0,j.jsx)(se.Z,{children:(0,j.jsx)(l.Trans,{id:"There is nothing to configure for this object. You can still use events to interact with the object."})})]})}})},ye=n(43416),Ze=n(66733),ke=n(51626),we=n(3781),Te=n(32832),Se=n(13923),Pe=n(4942),Ie=n(37762),Ee=n(51598),Me=n(18455),Le=n(68196),Ae=n(53162),Oe=n(43228),Re=n(62572),Fe=n(65752),De=n(24910),Ne=n(58247),_e=n(65056),Be=n(94002),Ue=n(46564),Ve=(n.g.gd,function(e){var t=e.objectConfiguration,n=e.propertyName,r=e.onChange,i=(0,K.Z)(),a=t.getProperties(),o=c.useCallback((function(e){var a=t.getProperties().get(n).getValue();t.updateProperty(n,e);var o=t.getProperties().get(n).getValue();r&&o!==a&&r(),i()}),[t,n,r,i]),s=a.get(n),l=s.getMeasurementUnit(),u={label:(0,xe.jz)(l),tooltipContent:(0,j.jsx)(Se.Z,{label:l.getLabel(),description:l.getDescription(),elementsWithWords:l.getElementsWithWords()})};return(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(x.Z,{floatingLabelFixed:!0,floatingLabelText:s.getLabel(),onChange:o,value:s.getValue(),endAdornment:(0,j.jsx)(we.ZP,{title:u.tooltipContent,children:(0,j.jsx)(ke.Z,{position:"end",children:u.label})})})},n)}),He=function(e){var t=e.objectConfiguration,n=e.propertyName,r=(0,K.Z)(),i=t.getProperties(),a=c.useCallback((function(e,n){t.updateProperty(e,n),r()}),[t,r]),o=i.get(n);return(0,j.jsx)(u.Z,{checked:"true"===o.getValue(),label:(0,j.jsxs)(c.Fragment,{children:[(0,j.jsx)(d.x1,{noMargin:!0,children:o.getLabel()}),(0,j.jsx)(Ze.Z,{style:{display:"inline"},children:(0,j.jsx)(Te.r,{source:o.getDescription()})})]}),onCheck:function(e,t){a(n,t?"1":"0")}})},ze=function(e){var t=e.objectConfiguration,n=e.propertyName,r=e.project,i=e.projectScopedContainersAccessor,a=e.resourceManagementProps,o=e.onChange,s=(0,K.Z)(),l=c.useRef(m.Z).current,u=t.getProperties(),d=c.useCallback((function(e,n){t.updateProperty(e,n),o(n),s()}),[t,o,s]),p=u.get(n),f=p.getExtraInfo(),h=p.getValue(),x=p.getLabel();return(0,j.jsx)(g.Z,{project:r,projectScopedContainersAccessor:i,resourceKind:f.size()>0?f.at(0):"",floatingLabelText:x,resourceManagementProps:a,initialResourceName:h,onChange:function(e){e!==h&&d(n,e)},resourcesLoader:l,fullWidth:!0})},We=n.g.gd,Ge=(0,Oe.x)("model3d-animations-list"),Ye={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"}},qe=1/65536,Je=function(e){for(var t=e.length-1;t>0;t--){if("."===e.charAt(t))return e.substring(0,t);if("0"!==e.charAt(t))return e}return e},Xe=function(e){if(!e)return!0;for(var t=0;t<e.getLayersCount();t++){var n=e.getLayerAt(t);if("2d"!==n.getRenderingType())for(var r=n.getEffects(),i=0;i<r.getEffectsCount();i++){var a=r.getEffectAt(i).getEffectType();if("Scene3D::AmbientLight"===a||"Scene3D::DirectionalLight"===a||"Scene3D::HemisphereLight"===a)return!0}}return!1},Ke=function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,i=e.eventsFunctionsExtension,a=e.eventsBasedObject,o=e.object,p=e.onSizeUpdated,f=e.onObjectUpdated,g=e.resourceManagementProps,m=e.projectScopedContainersAccessor,v=e.renderObjectNameField,b=c.useRef(null),C=c.useState(null),y=(0,V.Z)(C,2),Z=y[0],k=y[1],w=c.useRef(null);c.useEffect((function(){b.current&&w.current&&Z&&(b.current.scrollTo(w.current),k(null),w.current=null)}),[Z]);var T=(0,_e.Z)().showAlert,S=c.useRef(null),I=c.useContext(De.Z),E=(0,K.Z)(),M=We.asModel3DConfiguration(t),L=t.getProperties(),A=c.useState({}),O=(0,V.Z)(A,2),F=O[0],D=O[1],N=c.useCallback((function(e,n){t.updateProperty(e,n),E()}),[t,E]),_=c.useState(null),H=(0,V.Z)(_,2),G=H[0],Y=H[1],q=c.useCallback(function(){var e=(0,U.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.Z.get3DModel(n,t);case 2:r=e.sent,Y(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]);G||q(L.get("modelResourceName").getValue());var J=c.useMemo((function(){if(!G)return null;var e=Be.clone(G.scene),t=new Ue.Group;return t.rotation.order="ZYX",t.add(e),t}),[G]),Q=c.useState((function(){return L.get("originLocation").getValue()})),$=(0,V.Z)(Q,2),ee=$[0],te=$[1],re=c.useCallback((function(e,t,n){N("originLocation",n),te(n)}),[N]),ie=c.useState((function(){return parseFloat(L.get("rotationX").getValue())||0})),ae=(0,V.Z)(ie,2),oe=ae[0],se=ae[1],ue=c.useState((function(){return parseFloat(L.get("rotationY").getValue())||0})),de=(0,V.Z)(ue,2),pe=de[0],fe=de[1],he=c.useState((function(){return parseFloat(L.get("rotationZ").getValue())||0})),ge=(0,V.Z)(he,2),me=ge[0],xe=ge[1],ve=c.useCallback((function(){se(parseFloat(L.get("rotationX").getValue())),fe(parseFloat(L.get("rotationY").getValue())),xe(parseFloat(L.get("rotationZ").getValue()))}),[L]),Ce=c.useMemo((function(){if(!J)return null;J.rotation.set(oe*Math.PI/180,pe*Math.PI/180,me*Math.PI/180),J.updateMatrixWorld(!0);var e=(new Ue.Box3).setFromObject(J);"ModelOrigin"===ee&&e.expandByPoint(new Ue.Vector3(0,0,0));var t=e.max.x-e.min.x,n=e.max.y-e.min.y,r=e.max.z-e.min.z;return{x:t<qe?0:t,y:n<qe?0:n,z:r<qe?0:r}}),[J,ee,oe,pe,me]),je=c.useState((function(){return parseFloat(L.get("width").getValue())||0})),ye=(0,V.Z)(je,2),Ze=ye[0],ke=ye[1],we=c.useState((function(){return parseFloat(L.get("height").getValue())||0})),Te=(0,V.Z)(we,2),Se=Te[0],Oe=Te[1],ze=c.useState((function(){return parseFloat(L.get("depth").getValue())||0})),Ke=(0,V.Z)(ze,2),Qe=Ke[0],$e=Ke[1],et=c.useCallback((function(){ke(parseFloat(L.get("width").getValue())),Oe(parseFloat(L.get("height").getValue())),$e(parseFloat(L.get("depth").getValue()))}),[L]),tt=c.useMemo((function(){return Ce?Math.min(Ce.x<qe?Number.POSITIVE_INFINITY:Ze/Ce.x,Ce.y<qe?Number.POSITIVE_INFINITY:Se/Ce.y,Ce.z<qe?Number.POSITIVE_INFINITY:Qe/Ce.z):null}),[Qe,Se,Ce,Ze]),nt=c.useCallback((function(e){if(Ce){var n=e*Ce.x,r=e*Ce.y,i=e*Ce.z;t.updateProperty("width",n.toString(10)),t.updateProperty("height",r.toString(10)),t.updateProperty("depth",i.toString(10)),et(),E()}}),[E,Ce,t,et]),rt=c.useCallback((function(){if(G){D({});var e,t=(0,Me.mapFor)(0,M.getAnimationsCount(),(function(e){return M.getAnimation(e).getSource()})),n=!1,r=(0,Ie.Z)(G.animations);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!t.includes(i.name)){var a=M.hasAnimationNamed(i.name)?"":i.name,o=new We.Model3DAnimation;o.setName(a),o.setSource(i.name),M.addAnimation(o),o.delete(),n=!0}}}catch(s){r.e(s)}finally{r.f()}n?(E(),p(),f&&f(),setTimeout((function(){b.current&&b.current.scrollToBottom()}),100)):T({title:{id:"No new animation"},message:{id:"Every animation from the GLB file is already in the list."}})}}),[E,G,M,f,p,T]),it=c.useCallback((function(){D({});var e=new We.Model3DAnimation;M.addAnimation(e),e.delete(),E(),p(),f&&f(),setTimeout((function(){b.current&&b.current.scrollToBottom()}),100)}),[E,f,p,M]),at=c.useCallback((function(e){D({}),M.removeAnimation(e),E(),p(),f&&f()}),[E,f,p,M]),ot=c.useCallback((function(e){var t=S.current;null!==t&&(D({}),M.moveAnimation(t,e>t?e-1:e),E())}),[M,E]),st=c.useCallback((function(e,t){var c=M.getAnimation(e).getName();if(c!==t){var u=M.getAnimation(e);D({}),""!==t&&M.hasAnimationNamed(t)?D((0,s.Z)((0,s.Z)({},F),{},(0,Pe.Z)({},e,(0,j.jsx)(l.Trans,{id:"The animation name {newName} is already taken",values:{newName:t}})))):(u.setName(t),o&&(r?We.WholeProjectRefactorer.renameObjectAnimationInScene(n,r,o,c,t):i&&a&&We.WholeProjectRefactorer.renameObjectAnimationInEventsBasedObject(n,i,a,o,c,t)),E(),f&&f())}}),[M,r,o,i,a,E,f,F,n]),lt=G?G.animations.map((function(e){return(0,j.jsx)(ce.Z,{value:e.name,label:e.name,shouldNotTranslate:!0},e.name)})):[];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.Z,{ref:b,children:(0,j.jsxs)(h.ak,{noMargin:!0,children:[v&&v(),(0,j.jsx)(R.Z,{project:n,resourceKind:"model3D",floatingLabelText:L.get("modelResourceName").getLabel(),resourceManagementProps:g,projectScopedContainersAccessor:m,resourceName:L.get("modelResourceName").getValue(),onChange:function(e){N("modelResourceName",e),q(e),E()},id:"model3d-object-modelResourceName"}),(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Default orientation"})}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,expand:!0,noColumnMargin:!0,children:[(0,j.jsx)(Ve,{objectConfiguration:t,propertyName:"rotationX",onChange:ve}),(0,j.jsx)(Ve,{objectConfiguration:t,propertyName:"rotationY",onChange:ve}),(0,j.jsx)(Ve,{objectConfiguration:t,propertyName:"rotationZ",onChange:ve})]}),(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Default size"})}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,expand:!0,noColumnMargin:!0,children:[(0,j.jsx)(Ve,{objectConfiguration:t,propertyName:"width",onChange:et}),(0,j.jsx)(Ve,{objectConfiguration:t,propertyName:"height",onChange:et}),(0,j.jsx)(Ve,{objectConfiguration:t,propertyName:"depth",onChange:et})]}),(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(x.Z,{floatingLabelFixed:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Scaling factor"}),onChange:function(e){return nt(parseFloat(e)||0)},value:null===tt?"":Je(tt.toPrecision(5))})},"ScalingRatio"),(0,j.jsx)(He,{objectConfiguration:t,propertyName:"keepAspectRatio"}),(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Points"})}),(0,j.jsxs)(h.ep,{noResponsiveLandscape:!0,expand:!0,noColumnMargin:!0,children:[(0,j.jsxs)(le.Z,{value:ee,floatingLabelText:L.get("originLocation").getLabel(),helperMarkdownText:L.get("originLocation").getDescription(),onChange:re,fullWidth:!0,children:[(0,j.jsx)(ce.Z,{label:{id:"Model origin"},value:"ModelOrigin"},"ModelOrigin"),(0,j.jsx)(ce.Z,{label:{id:"Top-left corner"},value:"TopLeft"},"TopLeftCorner"),(0,j.jsx)(ce.Z,{label:{id:"Object center"},value:"ObjectCenter"},"ObjectCenter"),(0,j.jsx)(ce.Z,{label:{id:"Bottom center (on Z axis)"},value:"BottomCenterZ"},"BottomCenterZ"),(0,j.jsx)(ce.Z,{label:{id:"Bottom center (on Y axis)"},value:"BottomCenterY"},"BottomCenterY")]}),(0,j.jsxs)(le.Z,{value:L.get("centerLocation").getValue(),floatingLabelText:L.get("centerLocation").getLabel(),helperMarkdownText:L.get("centerLocation").getDescription(),onChange:function(e,t,n){N("centerLocation",n)},fullWidth:!0,children:[(0,j.jsx)(ce.Z,{label:{id:"Model origin"},value:"ModelOrigin"},"ModelOrigin"),(0,j.jsx)(ce.Z,{label:{id:"Object center"},value:"ObjectCenter"},"ObjectCenter"),(0,j.jsx)(ce.Z,{label:{id:"Bottom center (on Z axis)"},value:"BottomCenterZ"},"BottomCenterZ"),(0,j.jsx)(ce.Z,{label:{id:"Bottom center (on Y axis)"},value:"BottomCenterY"},"BottomCenterY")]})]}),(0,j.jsx)(P.Z,{size:"block-title",children:"Lighting"}),(0,j.jsxs)(le.Z,{value:L.get("materialType").getValue(),floatingLabelText:L.get("materialType").getLabel(),helperMarkdownText:L.get("materialType").getDescription(),onChange:function(e,t,n){N("materialType",n)},children:[(0,j.jsx)(ce.Z,{label:{id:"No lighting effect"},value:"Basic"},"Basic"),(0,j.jsx)(ce.Z,{label:{id:"Emit all ambient light"},value:"StandardWithoutMetalness"},"StandardWithoutMetalness"),(0,j.jsx)(ce.Z,{label:{id:"Keep model material"},value:"KeepOriginal"},"KeepOriginal")]}),"Basic"!==L.get("materialType").getValue()&&!Xe(r)&&(0,j.jsx)(be.Z,{kind:"error",children:(0,j.jsx)(l.Trans,{id:'Make sure to set up a light in the effects of the layer or choose "No lighting effect" - otherwise the object will appear black.'})}),(0,j.jsx)(He,{objectConfiguration:t,propertyName:"isCastingShadow"}),(0,j.jsx)(He,{objectConfiguration:t,propertyName:"isReceivingShadow"}),(0,j.jsx)(P.Z,{size:"block-title",children:"Animations"}),(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(Ve,{objectConfiguration:t,propertyName:"crossfadeDuration"})}),(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:0===M.getAnimationsCount()?(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,j.jsx)(Le.$,{title:(0,j.jsx)(l.Trans,{id:"Add your first animation"}),description:(0,j.jsx)(l.Trans,{id:"Animations are a sequence of images."}),actionLabel:(0,j.jsx)(l.Trans,{id:"Add an animation"}),helpPagePath:"/objects/sprite",tutorialId:"intermediate-changing-animations",onAction:it})}):(0,j.jsx)(c.Fragment,{children:(0,Me.mapFor)(0,M.getAnimationsCount(),(function(e){var t=M.getAnimation(e),n=Z===t.getName()?w:null;return(0,j.jsx)(Ge,{beginDrag:function(){return S.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){ot(e)},children:function(r){var i=r.connectDragSource,a=r.connectDropTarget,o=r.isOver,c=r.canDrop;return a((0,j.jsxs)("div",{style:Ye.rowContainer,children:[o&&(0,j.jsx)(Fe.Z,{canDrop:c}),(0,j.jsxs)("div",{ref:n,style:(0,s.Z)((0,s.Z)({},Ye.rowContent),{},{backgroundColor:I.list.itemsBackgroundColor}),children:[(0,j.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[i((0,j.jsx)("span",{children:(0,j.jsx)(d.sg,{children:(0,j.jsx)(Re.V,{})})})),(0,j.jsx)(P.Z,{noMargin:!0,noShrink:!0,children:(0,j.jsx)(l.Trans,{id:"Animation #{animationIndex}",values:{animationIndex:e}})}),(0,j.jsx)(d.LZ,{}),(0,j.jsx)(x.Z,{margin:"none",commitOnBlur:!0,errorText:F[e],translatableHintText:{id:"Optional animation name"},value:t.getName(),onChange:function(t){return st(e,t)},fullWidth:!0}),(0,j.jsx)(Ee.Z,{size:"small",onClick:function(){return at(e)},children:(0,j.jsx)(Ae.Z,{})})]}),(0,j.jsx)(d.LZ,{})]}),(0,j.jsx)(d.LZ,{}),(0,j.jsxs)(h.ak,{expand:!0,children:[(0,j.jsx)(le.Z,{id:"animation-source-field",value:t.getSource(),onChange:function(e,n){t.setSource(e.target.value),E()},margin:"dense",fullWidth:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"GLB animation name"}),translatableHintText:{id:"Choose an animation"},children:lt}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Loop"}),checked:t.shouldLoop(),onCheck:function(e,n){t.setShouldLoop(n),E()}})]})]},e))}},e)}))})})]})}),(0,j.jsx)(d.sg,{noMargin:!0,children:(0,j.jsxs)(h.ep,{justifyContent:"space-between",noColumnMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(z.Z,{label:(0,j.jsx)(l.Trans,{id:"Scan missing animations"}),onClick:rt}),(0,j.jsx)(W.Z,{label:(0,j.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:it,icon:(0,j.jsx)(ne.Z,{})})]})})]})},Qe=[{id:"frontFace",blockName:(0,j.jsx)(l.Trans,{id:"Front face"}),visibilityProperty:"frontFaceVisible",resourceRepeatProperty:"frontFaceResourceRepeat",resourceNameProperty:"frontFaceResourceName",newResourceNameSuffix:"Front"},{id:"backFace",blockName:(0,j.jsx)(l.Trans,{id:"Back face"}),visibilityProperty:"backFaceVisible",resourceRepeatProperty:"backFaceResourceRepeat",resourceNameProperty:"backFaceResourceName",newResourceNameSuffix:"Back"},{id:"leftFace",blockName:(0,j.jsx)(l.Trans,{id:"Left face"}),visibilityProperty:"leftFaceVisible",resourceRepeatProperty:"leftFaceResourceRepeat",resourceNameProperty:"leftFaceResourceName",newResourceNameSuffix:"Left"},{id:"rightFace",blockName:(0,j.jsx)(l.Trans,{id:"Right face"}),visibilityProperty:"rightFaceVisible",resourceRepeatProperty:"rightFaceResourceRepeat",resourceNameProperty:"rightFaceResourceName",newResourceNameSuffix:"Right"},{id:"topFace",blockName:(0,j.jsx)(l.Trans,{id:"Top face"}),visibilityProperty:"topFaceVisible",resourceRepeatProperty:"topFaceResourceRepeat",resourceNameProperty:"topFaceResourceName",newResourceNameSuffix:"Top"},{id:"bottomFace",blockName:(0,j.jsx)(l.Trans,{id:"Bottom face"}),visibilityProperty:"bottomFaceVisible",resourceRepeatProperty:"bottomFaceResourceRepeat",resourceNameProperty:"bottomFaceResourceName",newResourceNameSuffix:"Bottom"}],$e=function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,i=e.resourceManagementProps,a=e.projectScopedContainersAccessor,o=e.objectName,s=e.renderObjectNameField,p=(0,K.Z)(),f=t.getProperties(),g=c.useCallback((function(e,n){t.updateProperty(e,n),p()}),[t,p]),m=f.get("facesOrientation").getChoices(),v=f.get("backFaceUpThroughWhichAxisRotation").getChoices();return(0,j.jsxs)(h.ak,{noMargin:!0,children:[s&&s(),(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Default size"})}),(0,j.jsx)(h.ep,{expand:!0,noColumnMargin:!0,noResponsiveLandscape:!0,children:["width","height","depth"].map((function(e){var t=f.get(e),n=t.getMeasurementUnit(),r={label:(0,xe.jz)(n),tooltipContent:(0,j.jsx)(Se.Z,{label:n.getLabel(),description:n.getDescription(),elementsWithWords:n.getElementsWithWords()})};return(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,children:(0,j.jsx)(x.Z,{commitOnBlur:!0,floatingLabelFixed:!0,floatingLabelText:t.getLabel(),onChange:function(t){return g(e,t)},value:t.getValue(),endAdornment:(0,j.jsx)(we.ZP,{title:r.tooltipContent,children:(0,j.jsx)(ke.Z,{position:"end",children:r.label})}),id:"cube3d-object-".concat(e)})},e)}))}),(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Settings"})}),(0,j.jsxs)(h.ak,{noMargin:!0,expand:!0,children:[(0,j.jsx)(u.Z,{checked:"true"===f.get("enableTextureTransparency").getValue(),label:(0,j.jsxs)(c.Fragment,{children:[(0,j.jsx)(d.x1,{noMargin:!0,children:f.get("enableTextureTransparency").getLabel()}),(0,j.jsx)(Ze.Z,{style:{display:"inline"},children:(0,j.jsx)(Te.r,{source:f.get("enableTextureTransparency").getDescription()})})]}),onCheck:function(e,t){g("enableTextureTransparency",t?"1":"0")}}),(0,j.jsx)(le.Z,{value:f.get("facesOrientation").getValue(),floatingLabelText:f.get("facesOrientation").getLabel(),helperMarkdownText:f.get("facesOrientation").getDescription(),onChange:function(e,t,n){g("facesOrientation",n)},children:(0,Me.mapVector)(m,(function(e){return(0,j.jsx)(ce.Z,{label:e.getLabel(),value:e.getValue()},e.getValue())}))}),(0,j.jsx)(le.Z,{value:f.get("backFaceUpThroughWhichAxisRotation").getValue(),floatingLabelText:f.get("backFaceUpThroughWhichAxisRotation").getLabel(),helperMarkdownText:f.get("backFaceUpThroughWhichAxisRotation").getDescription(),onChange:function(e,t,n){g("backFaceUpThroughWhichAxisRotation",n)},children:(0,Me.mapVector)(v,(function(e){return(0,j.jsx)(ce.Z,{label:e.getLabel(),value:e.getValue()},e.getValue())}))}),(0,j.jsx)(P.Z,{size:"block-title",children:"Lighting"}),(0,j.jsxs)(le.Z,{value:f.get("materialType").getValue(),floatingLabelText:f.get("materialType").getLabel(),helperMarkdownText:f.get("materialType").getDescription(),onChange:function(e,t,n){g("materialType",n)},children:[(0,j.jsx)(ce.Z,{label:{id:"No lighting effect"},value:"Basic"},"Basic"),(0,j.jsx)(ce.Z,{label:{id:"React to lights"},value:"StandardWithoutMetalness"},"StandardWithoutMetalness")]}),(0,j.jsx)(He,{objectConfiguration:t,propertyName:"isCastingShadow"}),(0,j.jsx)(He,{objectConfiguration:t,propertyName:"isReceivingShadow"}),"Basic"!==f.get("materialType").getValue()&&!Xe(r)&&(0,j.jsx)(be.Z,{kind:"error",children:(0,j.jsx)(l.Trans,{id:'Make sure to set up a light in the effects of the layer or choose "No lighting effect" - otherwise the object will appear black.'})})]}),Qe.map((function(e){return(0,j.jsxs)(c.Fragment,{children:[(0,j.jsx)(P.Z,{size:"block-title",children:e.blockName}),(0,j.jsxs)(h.ak,{noMargin:!0,children:[(0,j.jsxs)(h.ak,{noMargin:!0,children:[(0,j.jsx)(u.Z,{checked:"true"===f.get(e.visibilityProperty).getValue(),label:f.get(e.visibilityProperty).getLabel(),onCheck:function(t,n){g(e.visibilityProperty,n?"1":"0")},id:"cube3d-object-".concat(e.visibilityProperty)}),(0,j.jsx)(u.Z,{checked:"true"===f.get(e.resourceRepeatProperty).getValue(),label:f.get(e.resourceRepeatProperty).getLabel(),onCheck:function(t,n){g(e.resourceRepeatProperty,n?"1":"0")},id:"cube3d-object-".concat(e.resourceRepeatProperty)})]}),(0,j.jsx)(R.Z,{project:n,resourceKind:"image",floatingLabelText:f.get(e.resourceNameProperty).getLabel(),resourceManagementProps:i,projectScopedContainersAccessor:a,resourceName:f.get(e.resourceNameProperty).getValue(),defaultNewResourceName:o+"_"+e.newResourceNameSuffix,onChange:function(t){return g(e.resourceNameProperty,t)},id:"cube3d-object-".concat(e.resourceNameProperty)})]})]},e.id)}))]})},et=n(2066),tt=n.g.gd,nt=(0,Oe.x)("spine-animations-list"),rt={rowContainer:{display:"flex",flexDirection:"column",marginTop:5},rowContent:{display:"flex",flex:1,alignItems:"center"},neverShrinkingButton:{flexShrink:0}},it=function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,i=e.eventsFunctionsExtension,a=e.eventsBasedObject,o=e.object,p=e.onSizeUpdated,f=e.onObjectUpdated,g=e.resourceManagementProps,m=e.projectScopedContainersAccessor,v=e.renderObjectNameField,b=c.useRef(null),C=c.useState(null),y=(0,V.Z)(C,2),Z=y[0],k=y[1],w=c.useRef(null);c.useEffect((function(){b.current&&w.current&&Z&&(b.current.scrollTo(w.current),k(null),w.current=null)}),[Z]);var T=(0,_e.Z)().showAlert,S=c.useRef(null),I=c.useContext(De.Z),E=(0,K.Z)(),M=tt.asSpineConfiguration(t),L=c.useState({}),A=(0,V.Z)(L,2),O=A[0],R=A[1],F=c.useState({skeleton:null,loadingError:null,loadingErrorReason:null}),D=(0,V.Z)(F,2),N=D[0],_=D[1],H=c.useState([]),G=(0,V.Z)(H,2),Y=G[0],q=G[1],J=M.getSpineResourceName();c.useEffect((function(){(0,U.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.Z.getSpineData(n,J);case 2:t=e.sent,_(t),t.skeleton&&q(t.skeleton.animations.map((function(e){return(0,j.jsx)(ce.Z,{value:e.name,label:e.name,shouldNotTranslate:!0},e.name)})));case 5:case"end":return e.stop()}}),e)})))()}),[n,J,q]);var Q=c.useCallback((function(){M.removeAllAnimations(),E()}),[E,M]),$=c.useCallback((function(){var e=N.skeleton;if(e){R({});var t,n=(0,Me.mapFor)(0,M.getAnimationsCount(),(function(e){return M.getAnimation(e).getSource()})),r=!1,i=(0,Ie.Z)(e.animations);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(!n.includes(a.name)){var o=M.hasAnimationNamed(a.name)?"":a.name,s=new tt.SpineAnimation;s.setName(o),s.setSource(a.name),M.addAnimation(s),s.delete(),r=!0}}}catch(l){i.e(l)}finally{i.f()}r?(E(),p(),f&&f(),setTimeout((function(){b.current&&b.current.scrollToBottom()}),100)):T({title:{id:"No new animation"},message:{id:"Every animation from the Spine file is already in the list."}})}}),[E,N,M,f,p,T]),ee=c.useCallback((function(){R({});var e=new tt.SpineAnimation;M.addAnimation(e),e.delete(),E(),p(),f&&f(),setTimeout((function(){b.current&&b.current.scrollToBottom()}),100)}),[E,f,p,M]),te=c.useCallback((function(e){R({}),M.removeAnimation(e),E(),p(),f&&f()}),[E,f,p,M]),re=c.useCallback((function(e){var t=S.current;null!==t&&(R({}),M.moveAnimation(t,e>t?e-1:e),E())}),[M,E]),ie=c.useCallback((function(e,t){var c=M.getAnimation(e).getName();if(c!==t){var u=M.getAnimation(e);R({}),""!==t&&M.hasAnimationNamed(t)?R((0,s.Z)((0,s.Z)({},O),{},(0,Pe.Z)({},e,(0,j.jsx)(l.Trans,{id:"The animation name {newName} is already taken",values:{newName:t}})))):(u.setName(t),o&&(r?tt.WholeProjectRefactorer.renameObjectAnimationInScene(n,r,o,c,t):i&&a&&tt.WholeProjectRefactorer.renameObjectAnimationInEventsBasedObject(n,i,a,o,c,t)),E(),f&&f())}}),[M,r,o,i,a,E,f,O,n]);return(0,j.jsx)(X.Z,{ref:b,children:(0,j.jsxs)(h.ak,{noMargin:!0,children:[v&&v(),(0,j.jsx)(be.Z,{kind:"warning",renderRightButton:function(){return(0,j.jsx)(z.Z,{style:rt.neverShrinkingButton,label:(0,j.jsx)(l.Trans,{id:"Purchase Spine"}),onClick:function(){return et.ZP.openExternalURL("https://esotericsoftware.com/spine-purchase")}})},children:(0,j.jsx)(l.Trans,{id:"You must own a Spine license to publish a game with a Spine object."})}),(0,j.jsx)(ze,{objectConfiguration:t,propertyName:"spineResourceName",project:n,resourceManagementProps:g,projectScopedContainersAccessor:m,onChange:Q}),!N.skeleton&&N.loadingErrorReason?(0,j.jsx)(be.Z,{kind:"error",children:"invalid-spine-resource"===N.loadingErrorReason?(0,j.jsx)(l.Trans,{id:"The selected resource is not a proper Spine resource."}):"missing-texture-atlas-name"===N.loadingErrorReason?(0,j.jsx)(l.Trans,{id:"Missing texture atlas name in the Spine file."}):"spine-resource-loading-error"===N.loadingErrorReason?(0,j.jsx)(l.Trans,{id:"Error while loading the Spine resource ( {0} ).",values:{0:N.loadingError?N.loadingError.message:"Unknown error"}}):"invalid-atlas-resource"===N.loadingErrorReason?(0,j.jsx)(l.Trans,{id:"The Atlas embedded in the Spine fine can't be located."}):"missing-texture-resources"===N.loadingErrorReason?(0,j.jsx)(l.Trans,{id:"Missing texture for an atlas in the Spine file."}):"atlas-resource-loading-error"===N.loadingErrorReason?(0,j.jsx)(l.Trans,{id:"Error while loading the Spine Texture Atlas resource ( {0} ).",values:{0:N.loadingError?N.loadingError.message:"Unknown error"}}):null}):null,(0,j.jsx)(P.Z,{size:"block-title",noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Default size"})}),(0,j.jsx)(Ve,{objectConfiguration:t,propertyName:"scale"}),Y.length&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(P.Z,{size:"block-title",children:"Animations"}),(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,useFullHeight:!0,children:0===M.getAnimationsCount()?(0,j.jsx)(d.sg,{noMargin:!0,expand:!0,justifyContent:"center",children:(0,j.jsx)(Le.$,{title:(0,j.jsx)(l.Trans,{id:"Add your first animation"}),description:(0,j.jsx)(l.Trans,{id:"Import one or more animations that are available in this Spine file."}),actionLabel:(0,j.jsx)(l.Trans,{id:"Add an animation"}),onAction:ee})}):(0,j.jsx)(c.Fragment,{children:(0,Me.mapFor)(0,M.getAnimationsCount(),(function(e){var t=M.getAnimation(e),n=Z===t.getName()?w:null;return(0,j.jsx)(nt,{beginDrag:function(){return S.current=e,{}},canDrag:function(){return!0},canDrop:function(){return!0},drop:function(){re(e)},children:function(r){var i=r.connectDragSource,a=r.connectDropTarget,o=r.isOver,c=r.canDrop;return a((0,j.jsxs)("div",{style:rt.rowContainer,children:[o&&(0,j.jsx)(Fe.Z,{canDrop:c}),(0,j.jsxs)("div",{ref:n,style:(0,s.Z)((0,s.Z)({},rt.rowContent),{},{backgroundColor:I.list.itemsBackgroundColor}),children:[(0,j.jsxs)(d.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[i((0,j.jsx)("span",{children:(0,j.jsx)(d.sg,{children:(0,j.jsx)(Re.V,{})})})),(0,j.jsx)(P.Z,{noMargin:!0,noShrink:!0,children:(0,j.jsx)(l.Trans,{id:"Animation #{animationIndex}",values:{animationIndex:e}})}),(0,j.jsx)(d.LZ,{}),(0,j.jsx)(x.Z,{margin:"none",commitOnBlur:!0,errorText:O[e],translatableHintText:{id:"Optional animation name"},value:t.getName(),onChange:function(t){return ie(e,t)},fullWidth:!0}),(0,j.jsx)(Ee.Z,{size:"small",onClick:function(){return te(e)},children:(0,j.jsx)(Ae.Z,{})})]}),(0,j.jsx)(d.LZ,{})]}),(0,j.jsx)(d.LZ,{}),(0,j.jsxs)(h.ak,{expand:!0,children:[(0,j.jsx)(le.Z,{id:"animation-source-field",value:t.getSource(),onChange:function(e,n){t.setSource(e.target.value),E()},margin:"dense",fullWidth:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Spine animation name"}),translatableHintText:{id:"Choose an animation"},children:Y}),(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Loop"}),checked:t.shouldLoop(),onCheck:function(e,n){t.setShouldLoop(n),E()}})]})]},e))}},e)}))})}),(0,j.jsx)(d.sg,{noMargin:!0,children:(0,j.jsxs)(h.ep,{justifyContent:"space-between",noColumnMargin:!0,noResponsiveLandscape:!0,children:[(0,j.jsx)(z.Z,{label:(0,j.jsx)(l.Trans,{id:"Scan missing animations"}),onClick:$}),(0,j.jsx)(W.Z,{label:(0,j.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:ee,icon:(0,j.jsx)(ne.Z,{})})]})})]})]})})},at=n(67790),ot=function(e){var t=e.objectConfiguration,n=e.project,r=(e.layout,e.object,e.onObjectUpdated),i=e.onSizeUpdated,a=e.resourceManagementProps,o=e.projectScopedContainersAccessor,u=e.renderObjectNameField,p=c.useRef(null),f=(0,K.Z)(),g=t.getProperties(),m=parseFloat(g.get("tileSize").getValue()),v=parseFloat(g.get("rowCount").getValue()),b=parseFloat(g.get("columnCount").getValue()),C=c.useState(null),y=(0,V.Z)(C,2),Z=y[0],k=y[1],w=g.get("atlasImage").getValue(),T=c.useRef(w),S=g.get("tilesWithHitBox").getValue().split(",").filter((function(e){return!!e})).map((function(e){return parseInt(e,10)})),I=S.map((function(e){return(0,at.nJ)({id:e,columnCount:b})})),E=c.useState(null),M=(0,V.Z)(E,2),L=M[0],A=M[1],O={kind:"multiple",coordinates:I},R=c.useCallback((function(e,n){var r=Math.floor(e.height/n),i=Math.floor(e.width/n);if(v!==r||b!==i){k(null),t.updateProperty("rowCount",r.toString()),t.updateProperty("columnCount",i.toString());var a=i*r-1;t.updateProperty("tilesWithHitBox",S.filter((function(e){return e<=a})).join(","))}}),[b,v,t,S]),F=c.useCallback((function(e){e&&(t.updateProperty("tileSize",e.toString()),L&&R(L,e),r&&r(),f())}),[f,t,R,L,r]),D=c.useCallback((function(e){e&&"multiple"===e.kind&&(t.updateProperty("tilesWithHitBox",e.coordinates.map((function(e){return(0,at.FZ)((0,s.Z)((0,s.Z)({},e),{},{columnCount:b}))})).join(",")),r&&r(),f())}),[b,t,f,r]),N=c.useCallback((function(e){p.current&&p.current.scrollBy(e)}),[]),_=c.useCallback((function(){r&&r(),k(null),i(),f()}),[f,r,i]);c.useEffect((function(){L&&(v<=0||b<=0)&&k((0,j.jsx)(l.Trans,{id:"The atlas image is smaller than the tile size."}))}),[v,b,L]);var B=c.useCallback((function(e,t){k(null);var n={width:e.currentTarget.naturalWidth,height:e.currentTarget.naturalHeight};A(n),T.current=t,R(n,m)}),[m,R]);return(0,j.jsx)(X.Z,{ref:p,children:(0,j.jsxs)(h.ak,{noMargin:!0,children:[!!u&&u(),(0,j.jsx)(x.Z,{floatingLabelFixed:!0,floatingLabelText:(0,j.jsx)(l.Trans,{id:"Tile size"}),id:"tileSize",onChange:function(e){return F(Math.max(parseInt(e,10)||0,0))},value:m.toString()}),(0,j.jsx)(ze,{objectConfiguration:t,propertyName:"atlasImage",project:n,resourceManagementProps:a,projectScopedContainersAccessor:o,onChange:_}),Z&&(0,j.jsx)(be.Z,{kind:"error",children:Z}),w&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(d.x1,{children:(0,j.jsxs)(d.sg,{noMargin:!0,children:[(0,j.jsx)(P.Z,{noMargin:!0,size:"sub-title",children:(0,j.jsx)(l.Trans,{id:"Configure tile\u2019s hit boxes"})}),(0,j.jsx)(P.Z,{noMargin:!0,children:(0,j.jsx)(l.Trans,{id:"Click on the tilemap grid to activate or deactivate hit boxes."})})]})}),(0,j.jsx)(at.ZP,{project:n,objectConfiguration:t,tileMapTileSelection:O,onSelectTileMapTile:D,showPaintingToolbar:!1,allowMultipleSelection:!0,allowRectangleSelection:!1,onAtlasImageLoaded:B,interactive:!0,onScrollY:N})]})]})})},st=n.g.gd,lt={getEditorConfiguration:function(e,t){if(this.editorConfigurations[t])return this.editorConfigurations[t];if(e.hasEventsBasedObject(t)){var n=st.MetadataProvider.getObjectMetadata(st.JsPlatform.get(),t);return this.getCustomObjectPropertiesEditor({helpPagePath:n.getHelpPath()})}return console.warn("Object with type ".concat(t," has no editor configuration registered. Please use registerEditorConfiguration to register your editor.")),this.getDefaultObjectJsImplementationPropertiesEditor({helpPagePath:""})},registerEditorConfiguration:function(e,t){t.component?t.createNewObject?t.castToObjectType?this.editorConfigurations.hasOwnProperty(e)?console.warn('Tried to register editor configuration for object "'.concat(e,'", but an editor configuration already exists.')):this.editorConfigurations[e]=t:console.warn('Tried to register editor configuration for object "'.concat(e,'", but "castToObjectType" property is not defined.')):console.warn('Tried to register editor configuration for object "'.concat(e,'", but "createNewObject" property is not defined.')):console.warn('Tried to register editor configuration for object "'.concat(e,'", but "component" property is not defined.'))},getDefaultObjectJsImplementationPropertiesEditor:function(e){return{component:je,createNewObject:function(e){return st.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return st.asObjectJsImplementation(e)},helpPagePath:e.helpPagePath}},getCustomObjectPropertiesEditor:function(e){return{component:ye.ZP,createNewObject:function(e){return st.asCustomObjectConfiguration(st.asCustomObjectConfiguration(e).clone().release())},castToObjectType:function(e){return st.asCustomObjectConfiguration(e)},helpPagePath:e.helpPagePath}},editorConfigurations:{Sprite:{component:function(e){var t=e.objectConfiguration,n=e.project,r=e.layout,i=e.eventsFunctionsExtension,a=e.eventsBasedObject,o=e.object,s=e.objectName,p=e.resourceManagementProps,f=e.onSizeUpdated,g=e.onObjectUpdated,v=e.isChildObject,b=e.renderObjectNameField,C=c.useState(!1),y=(0,V.Z)(C,2),Z=y[0],k=y[1],w=c.useState(!1),T=(0,V.Z)(w,2),S=T[0],P=T[1],I=c.useState(!1),E=(0,V.Z)(I,2),M=E[0],L=E[1],A=(0,K.Z)(),O=ae.asSpriteConfiguration(t),R=O.getAnimations(),F=(0,ee.UQ)().isMobile,D=c.useRef(null),N=c.useRef(null),_=c.useState(null),Q=(0,V.Z)(_,2),se=Q[0],le=Q[1],ce=c.useRef(null);c.useEffect((function(){D.current&&ce.current&&se&&(D.current.scrollTo(ce.current),le(null),ce.current=null)}),[se]);var ue=c.useCallback((0,U.Z)((0,B.Z)().mark((function e(){var t,r,i,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,ie.Ng)(R)){e.next=3;break}return e.abrupt("return");case 3:return r=t.getImageName(),i=m.Z.getResourceFullUrl(n,r,{}),a=null,e.prev=6,e.next=9,(0,re.U)(i);case 9:a=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.error("Unable to create a matching collision mask for the sprite, fallback to full image collision mask.",e.t0);case 15:(0,ie.E8)(R,a),A();case 17:case"end":return e.stop()}}),e,null,[[6,12]])}))),[R,n,A]);return(0,j.jsx)(l.I18n,{children:function(e){e.i18n;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(X.Z,{ref:D,style:oe.scrollView,children:[b&&b(),(0,j.jsx)($,{}),(0,j.jsx)(H.Z,{ref:N,animations:R,project:n,layout:r,eventsFunctionsExtension:i,eventsBasedObject:a,object:o,objectName:s,resourceManagementProps:p,onSizeUpdated:f,onObjectUpdated:g,isAnimationListLocked:v,scrollView:D,onCreateMatchingSpriteCollisionMask:ue})]}),(0,j.jsx)(d.sg,{noMargin:!0,children:(0,j.jsxs)(h.ep,{justifyContent:"space-between",noColumnMargin:!0,noResponsiveLandscape:!0,children:[F?(0,j.jsx)(te.Z,{label:(0,j.jsx)(l.Trans,{id:"Edit collision masks"}),onClick:function(){return L(!0)},disabled:!(0,ie.K3)(R),buildMenuTemplate:function(e){return[{label:e._({id:"Edit points"}),disabled:!(0,ie.K3)(R),click:function(){return k(!0)}},v?{label:e._({id:"Advanced options"}),disabled:!(0,ie.K3)(R),click:function(){return P(!0)}}:null].filter(Boolean)}}):(0,j.jsxs)(h.ep,{noMargin:!0,noColumnMargin:!0,children:[(0,j.jsx)(z.Z,{label:(0,j.jsx)(l.Trans,{id:"Edit collision masks"}),onClick:function(){return L(!0)},disabled:!(0,ie.K3)(R)}),(0,j.jsx)(z.Z,{label:(0,j.jsx)(l.Trans,{id:"Edit points"}),onClick:function(){return k(!0)},disabled:!(0,ie.K3)(R)}),!v&&(0,j.jsx)(z.Z,{label:(0,j.jsx)(l.Trans,{id:"Advanced options"}),onClick:function(){return P(!0)},disabled:!(0,ie.K3)(R)})]}),!v&&(0,j.jsx)(W.Z,{label:(0,j.jsx)(l.Trans,{id:"Add an animation"}),primary:!0,onClick:function(){N.current&&N.current.addAnimation()},icon:(0,j.jsx)(ne.Z,{})})]})}),S&&(0,j.jsx)(G.ZP,{title:(0,j.jsx)(l.Trans,{id:"Advanced options"}),actions:[(0,j.jsx)(z.Z,{label:(0,j.jsx)(l.Trans,{id:"Close"}),primary:!0,onClick:function(){return P(!1)}},"close")],maxWidth:"sm",flexBody:!0,onRequestClose:function(){return P(!1)},open:!0,children:(0,j.jsxs)(h.ak,{noMargin:!0,children:[(0,j.jsx)(u.Z,{label:(0,j.jsx)(l.Trans,{id:"Don't play the animation when the object is far from the camera or hidden (recommended for performance)"}),checked:!O.getUpdateIfNotVisible(),onCheck:function(e,t){O.setUpdateIfNotVisible(!t),A(),g&&g()}}),(0,j.jsx)(x.Z,{fullWidth:!0,value:O.getPreScale().toString(10),floatingLabelText:(0,j.jsx)(l.Trans,{id:"Scaling factor to apply to the default dimensions"}),onChange:function(e){O.setPreScale(parseFloat(e)||0),A(),g&&g()},type:"number"})]})}),Z&&(0,j.jsx)(G.ZP,{title:(0,j.jsx)(l.Trans,{id:"Edit points"}),actions:[(0,j.jsx)(W.Z,{label:(0,j.jsx)(l.Trans,{id:"Apply"}),primary:!0,onClick:function(){return k(!1)}},"apply")],secondaryActions:[(0,j.jsx)(Y.Z,{helpPagePath:"/objects/sprite/edit-points"},"help")],onRequestClose:function(){return k(!1)},maxWidth:"lg",flexBody:!0,fullHeight:!0,open:Z,children:(0,j.jsx)(q.Z,{animations:R,resourcesLoader:m.Z,project:n,onPointsUpdated:g,onRenamedPoint:function(e,t){o&&(r?ae.WholeProjectRefactorer.renameObjectPointInScene(n,r,o,e,t):i&&a&&ae.WholeProjectRefactorer.renameObjectPointInEventsBasedObject(n,i,a,o,e,t))}})}),M&&(0,j.jsx)(G.ZP,{title:(0,j.jsx)(l.Trans,{id:"Edit collision masks"}),actions:[(0,j.jsx)(W.Z,{label:(0,j.jsx)(l.Trans,{id:"Apply"}),primary:!0,onClick:function(){return L(!1)}},"apply")],secondaryActions:[(0,j.jsx)(Y.Z,{helpPagePath:"/objects/sprite/collision-mask"},"help")],maxWidth:"lg",flexBody:!0,fullHeight:!0,onRequestClose:function(){return L(!1)},open:M,children:(0,j.jsx)(J.Z,{animations:R,resourcesLoader:m.Z,project:n,onMasksUpdated:g,onCreateMatchingSpriteCollisionMask:ue})})]})}})},createNewObject:function(){return new st.SpriteObject},castToObjectType:function(e){return st.asSpriteConfiguration(e)},helpPagePath:"/objects/sprite"},"Scene3D::Cube3DObject":{component:$e,createNewObject:function(e){return st.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return st.asObjectJsImplementation(e)},helpPagePath:"/objects/3d-box"},"Scene3D::Model3DObject":{component:Ke,createNewObject:function(e){return st.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return st.asObjectJsImplementation(e)},helpPagePath:"/objects/3d-model"},"SpineObject::SpineObject":{component:it,createNewObject:function(e){return st.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return st.asObjectJsImplementation(e)},helpPagePath:"/objects/spine"},"TileMap::SimpleTileMap":{component:ot,createNewObject:function(e){return st.asObjectJsImplementation(e).clone().release()},castToObjectType:function(e){return st.asObjectJsImplementation(e)},helpPagePath:"/objects/simple_tilemap"},"TiledSpriteObject::TiledSprite":{component:D,createNewObject:function(){return new st.TiledSpriteObject},castToObjectType:function(e){return st.asTiledSpriteConfiguration(e)},helpPagePath:"/objects/tiled_sprite"},"PanelSpriteObject::PanelSprite":{component:_,createNewObject:function(){return new st.PanelSpriteObject},castToObjectType:function(e){return st.asPanelSpriteConfiguration(e)},helpPagePath:"/objects/panel_sprite"},"TextObject::Text":{component:O,createNewObject:function(){return new st.TextObject},castToObjectType:function(e){return st.asTextObjectConfiguration(e)},helpPagePath:"/objects/text"},"PrimitiveDrawing::Drawer":{component:de,createNewObject:function(){return new st.ShapePainterObject},castToObjectType:function(e){return st.asShapePainterConfiguration(e)},helpPagePath:"/objects/shape_painter"},"TextEntryObject::TextEntry":{component:function(e){var t=e.renderObjectNameField;return(0,j.jsxs)(d.sg,{noMargin:!0,children:[t&&t(),(0,j.jsx)(d.x1,{children:(0,j.jsx)(se.Z,{children:(0,j.jsx)(l.Trans,{id:"This object does not have any specific configuration. Add it on the scene and use events to interact with it."})})})]})},createNewObject:function(){return new st.TextEntryObject},castToObjectType:function(e){return st.asTextEntryConfiguration(e)},helpPagePath:"/objects/text_entry"},"ParticleSystem::ParticleEmitter":{component:ge,createNewObject:function(){return new st.ParticleEmitterObject},castToObjectType:function(e){return st.asParticleEmitterConfiguration(e)},helpPagePath:"/objects/particles_emitter"}}}},63347:function(e,t,n){"use strict";n.d(t,{$8:function(){return u},TE:function(){return d},Yj:function(){return c},p3:function(){return a},wf:function(){return l}});var r=n(93433),i=n(18455),a=function(e){return e.isFolder()?e.getFolderName():e.getObject().getName()},o=function e(t,n,r){(0,i.mapFor)(0,t.getChildrenCount(),(function(i){var a=t.getChildAt(i);if(a.isFolder()){var o=n?n+" > "+a.getFolderName():a.getFolderName();r.push({path:o,folder:a}),e(a,o,r)}}))},s=function e(t,n){(0,i.mapFor)(0,t.getChildrenCount(),(function(r){var i=t.getChildAt(r);i.isFolder()?e(i,n):n.push(i.getObject())}))},l=function(e){if(!e.isFolder())return[];var t=[];return s(e,t),t},c=function(e){if(!e.isFolder())return[];var t=[];return o(e,"",t),t},u=function(e){var t=e.getRootFolder(),n=[];return o(t,"",n),n},d=function e(t){if(t.isRootFolder())return[];var n=t.getParent();return n.isRootFolder()?[]:[n].concat((0,r.Z)(e(n)))}},23816:function(e,t,n){"use strict";n.d(t,{ND:function(){return l},Wr:function(){return c},el:function(){return s},hU:function(){return u}});var r=n(18455),i=n(10952),a=n.n(i),o=n.g.gd,s=function(e,t,n){var i=n&&n.type||null,a=n&&n.names||null,s=i?function(n){return o.getTypeOfObject(e||t,t,n.getName(),!1)===i}:null,l=a?function(e){return a.includes(e.getName())}:null,c=(0,r.mapFor)(0,t.getObjectsCount(),(function(e){var n=t.getObjectAt(e);return s&&!s(n)||l&&!l(n)?null:n})).filter(Boolean).map((function(e){return{object:e,global:!1}})),u=e!==t&&e?(0,r.mapFor)(0,e.getObjectsCount(),(function(t){var n=e.getObjectAt(t);return s&&!s(n)||l&&!l(n)?null:n})).filter(Boolean).map((function(e){return{object:e,global:!0}})):[],d=c.concat(u);return{containerObjectsList:c,projectObjectsList:u,allObjectsList:d}},l=function(e){var t=e.getCurrentPlatform().getAllPlatformExtensions();return a()((0,r.mapFor)(0,t.size(),(function(e){var n=t.at(e);return n.getExtensionObjectsTypes().toJSArray().map((function(e){return n.getObjectMetadata(e)})).filter((function(e){return!e.isHidden()&&!e.isPrivate()})).map((function(e){return{extension:n,objectMetadata:e,name:e.getName(),fullName:e.getFullName(),description:e.getDescription(),iconFilename:e.getIconFilename(),categoryFullName:e.getCategoryFullName(),isRenderedIn3D:e.isRenderedIn3D()}}))})))},c=function(e){return(0,r.mapFor)(0,e.count(),(function(t){return e.getAt(t)}))},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===e.getObjectsContainersCount())return console.error("Called enumerateObjectsAndGroups without any object container."),{allObjectsList:[],allGroupsList:[]};e.getObjectsContainersCount()>2&&console.error("Called enumerateObjectsAndGroups with more than 2 object containers.");var i=e.getObjectsContainersCount()>1?e.getObjectsContainer(0):null,a=e.getObjectsContainer(e.getObjectsContainersCount()-1),o=function(r){return(!t||e.getTypeOfObject(r.getName())===t)&&n.every((function(t){return e.getBehaviorNamesInObjectOrGroup(r.getName(),t,!1).size()>0}))},s=function(r){return(!t||e.getTypeOfObject(r.getName())===t)&&n.every((function(t){return e.getBehaviorNamesInObjectOrGroup(r.getName(),t,!0).size()>0}))},l=(0,r.mapFor)(0,a.getObjectsCount(),(function(e){return a.getObjectAt(e)})).filter(o).map((function(e){return{object:e,global:!1}})),u=a.getObjectGroups(),d=c(u).filter(s).map((function(e){return{group:e,global:!1}})),p=i!==a&&i?(0,r.mapFor)(0,i.getObjectsCount(),(function(e){return i.getObjectAt(e)})).filter(o).map((function(e){return{object:e,global:!0}})):[],f=i!==a&&i?c(i.getObjectGroups()).filter(s).map((function(e){return{group:e,global:!0}})):[];return{allObjectsList:l.concat(p),allGroupsList:d.concat(f)}}},65260:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Se},En:function(){return ie},eK:function(){return ye}});var r=n(1413),i=n(29439),a=n(93433),o=n(15671),s=n(43144),l=n(36600),c=n(28381),u=n(38509),d=n(30696),p=n(12949),f=n(77987),h=n(5946),g=n(79431),m=n(2066),x=n(30141),v=n(17271),b=n(38501),C=n(40243),j=n(1491),y=n(3550),Z=n(63347),k=n(18455),w=n(61325),T=n(86268),S=n(96591),P=n(39949),I=n(65056),E=n(6996),M=n(61651),L=n(68145),A=n(74165),O=n(15861),R=n(26926),F=n(36062),D=n(41006),N=n(8462),_=n(45735),B=n(43416),U=n.g.gd,V="Object",H=function(e){return"".concat(e.getName(),"-").concat(e.ptr)},z=function(e){var t,n,r=e.project,i=e.globalObjectsContainer,a=e.objectsContainer,o=e.objectName,s=e.positionObjectFolderOrObjectWithContext,l=e.objectType,c=e.serializedObject,u=e.addInsideFolder,d=(0,g.Z)(o,(function(e){return a.hasObjectNamed(e)||!!i&&i.hasObjectNamed(e)}),""),p=s.objectFolderOrObject,f=s.global;u&&p.isFolder()?(t=p,n=p.getChildrenCount()):n=(t=p.getParent()).getChildPosition(p);var h=f&&i?i.insertNewObjectInFolder(r,l,d,t,n+1):a.insertNewObjectInFolder(r,l,d,t,n+1);return(0,D.qx)(h,c,"unserializeFrom",r),h.setName(d),{object:h,global:f}},W=function(){function e(t,n,r){(0,o.Z)(this,e),this.object=t,this._isGlobal=n,this.props=r}return(0,s.Z)(e,[{key:"getObjectFolderOrObject",value:function(){return this.object}},{key:"isDescendantOf",value:function(e){var t=e.getObjectFolderOrObject();return!!t&&this.object.isADescendantOf(t)}},{key:"isSibling",value:function(e){var t=e.getObjectFolderOrObject();return!!t&&this.object.getParent()===t.getParent()}},{key:"getIndex",value:function(){return this.object.getParent().getChildPosition(this.object)}},{key:"isGlobal",value:function(){return this._isGlobal}},{key:"is3D",value:function(){return U.MetadataProvider.getObjectMetadata(this.props.project.getCurrentPlatform(),this.object.getObject().getType()).isRenderedIn3D()}},{key:"getName",value:function(){return this.object.getObject().getName()}},{key:"getId",value:function(){return H(this.object.getObject())}},{key:"getHtmlId",value:function(e){return null}},{key:"getDataSet",value:function(){return{objectName:this.object.getObject().getName(),global:this._isGlobal.toString()}}},{key:"getThumbnail",value:function(){return this.props.getThumbnail(this.props.project,this.object.getObject().getConfiguration())}},{key:"onClick",value:function(){this.props.selectObjectFolderOrObjectWithContext({objectFolderOrObject:this.object,global:this._isGlobal})}},{key:"rename",value:function(e){var t=this;if(this.getName()!==e){var n=this.props.getValidatedObjectOrGroupName(e,this._isGlobal);this.props.onRenameObjectFolderOrObjectWithContextFinish({objectFolderOrObject:this.object,global:this._isGlobal},n,(function(e){e&&t.props.onObjectModified(!1)}))}}},{key:"edit",value:function(){this.props.onEditObject(this.object.getObject())}},{key:"_getPasteLabel",value:function(e,t){var n=t.isGlobalObject,r=(t.isFolder,{id:"Paste"});if(R.Z.has(V)){var i=R.Z.get(V),a=F.$.extractStringProperty(i,"name")||"";r=n?{id:"Paste {clipboardObjectName} as a Global Object",values:{clipboardObjectName:a}}:{id:"Paste {clipboardObjectName}",values:{clipboardObjectName:a}}}return e._(r)}},{key:"buildMenuTemplate",value:function(e,t){var n=this,r=this.props,i=r.project,o=r.globalObjectsContainer,s=r.objectsContainer,l=r.initialInstances,c=r.onSelectAllInstancesOfObjectInLayout,u=r.onEditObject,d=r.onMovedObjectFolderOrObjectToAnotherFolderInSameContainer,p=r.onAddObjectInstance,f=r.swapObjectAsset,h=r.canSetAsGlobalObject,g=r.setAsGlobalObject,m=r.onOpenEventBasedObjectVariantEditor,x=r.selectObjectFolderOrObjectWithContext,v=r.addFolder,b=r.isListLocked,C=this._isGlobal?o:s;if(!C)return[];var j=(0,Z.$8)(C);j.unshift({path:e._({id:"Root folder"}),folder:C.getRootFolder()});var y=this.object.getObject(),k=l?(0,_.pG)(l,y.getName()):void 0,w=U.MetadataProvider.getObjectMetadata(i.getCurrentPlatform(),y.getType()),T=U.PlatformExtension.getExtensionFromFullObjectType(y.getType()),S=i.hasEventsFunctionsExtensionNamed(T)?i.getEventsFunctionsExtension(T):null;return[{label:e._({id:"Copy"}),click:function(){return n.copy()}},{label:e._({id:"Cut"}),click:function(){return n.cut()},enabled:!b},{label:this._getPasteLabel(e,{isGlobalObject:this._isGlobal,isFolder:!1}),enabled:R.Z.has(V)&&!b,click:function(){return n.paste()}},{label:e._({id:"Duplicate"}),click:function(){return n.duplicate()},accelerator:"CmdOrCtrl+D",enabled:!b},{label:e._({id:"Rename"}),click:function(){return n.props.editName(n.getId())},accelerator:"F2",enabled:!b},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace",enabled:!b},{type:"separator"},{label:e._({id:"Edit object"}),click:function(){return u(y)}},{label:e._({id:"Edit object variables"}),click:function(){return u(y,"variables")}},{label:e._({id:"Edit behaviors"}),click:function(){return u(y,"behaviors")}},{label:e._({id:"Edit effects"}),click:function(){return u(y,"effects")},enabled:w.hasDefaultBehavior("EffectCapability::EffectBehavior")},i.hasEventsBasedObject(y.getType())?{label:e._({id:"Edit children"}),enabled:(0,B.fh)(U.asCustomObjectConfiguration(y.getConfiguration()),i.getEventsBasedObject(y.getType()),S),click:function(){var e=U.asCustomObjectConfiguration(y.getConfiguration());m(U.PlatformExtension.getExtensionFromFullObjectType(y.getType()),U.PlatformExtension.getObjectNameFromFullObjectType(y.getType()),e.getVariantName())}}:null,{type:"separator"},{label:e._({id:"Swap assets"}),click:function(){return f({object:n.object.getObject(),global:n._isGlobal})},enabled:(0,N.s)(y)},{type:"separator"},o&&{label:e._({id:"Set as global object"}),enabled:!this._isGlobal&&!b,click:function(){x(null),g({i18n:e,objectFolderOrObject:n.object})},visible:!1!==h},b?{label:e._("Move to folder"),enabled:!1}:{label:e._("Move to folder"),submenu:[].concat((0,a.Z)(j.map((function(e){var t=e.folder;return{label:e.path,enabled:t!==n.object.getParent(),click:function(){n.object.getParent().moveObjectFolderOrObjectToAnotherFolder(n.object,t,0),d({objectFolderOrObject:t,global:n._isGlobal})}}}))),[{type:"separator"},{label:e._({id:"Create new folder..."}),click:function(){return v([{objectFolderOrObject:n.object.getParent(),global:n._isGlobal}])}}])},{type:"separator"},{label:e._({id:"Add instance to the scene"}),click:function(){return p(y.getName())}},void 0!==k&&c?{label:e._({id:"Select instances on scene ({instanceCountOnScene})",values:{instanceCountOnScene:k}}),click:function(){return c(y.getName())},enabled:k>0}:void 0].filter(Boolean)}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this._delete()}},{key:"_delete",value:function(){var e=(0,O.Z)((0,A.Z)().mark((function e(){var t,n,r,i,a,o,s,l,c,u=this;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.globalObjectsContainer,r=t.objectsContainer,i=t.onObjectModified,a=t.showDeleteConfirmation,o=t.onDeleteObjects,s=t.selectObjectFolderOrObjectWithContext,e.next=3,a({title:{id:"Remove object"},message:{id:"Are you sure you want to remove this object? This can't be undone."}});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:l=[this.object.getObject()],c=l.map((function(e){return{object:e,global:u._isGlobal}})),s(null),o(c,(function(e){if(e){var t=u._isGlobal?n:r;t&&l.forEach((function(e){t.removeObject(e.getName())})),i(!1)}}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"copy",value:function(){R.Z.set(V,{type:this.object.getObject().getType(),name:this.object.getObject().getName(),object:(0,D.XH)(this.object.getObject())})}},{key:"cut",value:function(){this.copy(),this.delete()}},{key:"paste",value:function(){if(R.Z.has(V)){var e=R.Z.get(V),t=F.$.extractObjectProperty(e,"object"),n=F.$.extractStringProperty(e,"name"),r=F.$.extractStringProperty(e,"type");if(n&&r&&t){var i=this.props,a=i.project,o=i.globalObjectsContainer,s=i.objectsContainer,l=i.onObjectPasted,c=i.onObjectModified,u=i.onObjectCreated,d=!U.UsedObjectTypeFinder.scanProject(a,r),p=z({project:a,globalObjectsContainer:o,objectsContainer:s,objectName:n,positionObjectFolderOrObjectWithContext:{objectFolderOrObject:this.object,global:this._isGlobal},objectType:r,serializedObject:t,addInsideFolder:!1});c(!1),l&&l(p.object),u([p.object],d)}}}},{key:"duplicate",value:function(){var e=this.props,t=e.project,n=e.globalObjectsContainer,r=e.objectsContainer,i=e.forceUpdateList,a=e.editName,o=e.selectObjectFolderOrObjectWithContext,s=e.onObjectCreated,l=this.object.getObject(),c=(0,D.XH)(l),u=!U.UsedObjectTypeFinder.scanProject(t,l.getType()),d=z({project:t,globalObjectsContainer:n,objectsContainer:r,objectName:l.getName(),positionObjectFolderOrObjectWithContext:{objectFolderOrObject:this.object,global:this._isGlobal},objectType:l.getType(),serializedObject:c}),p={objectFolderOrObject:this.object.getParent().getObjectChild(d.object.getName()),global:this._isGlobal};s([d.object],u),i(),a(H(d.object)),o(p)}},{key:"getRightButton",value:function(e){return null}}]),e}(),G=n(41370),Y=n.g.gd,q=function(e,t,n){var r=(0,Z.Yj)(e).map((function(e){return e.folder}));n([e].concat((0,a.Z)(r)).map((function(e){return{objectFolderOrObject:e,global:t}})))},J=function(e){return"object-folder-".concat(e.ptr)},X=function(){function e(t,n,r){(0,o.Z)(this,e),this.objectFolder=t,this._isGlobal=n,this.props=r}return(0,s.Z)(e,[{key:"getObjectFolderOrObject",value:function(){return this.objectFolder}},{key:"isDescendantOf",value:function(e){var t=e.getObjectFolderOrObject();return!!t&&this.objectFolder.isADescendantOf(t)}},{key:"isSibling",value:function(e){var t=e.getObjectFolderOrObject();return!!t&&this.objectFolder.getParent()===t.getParent()}},{key:"getIndex",value:function(){return this.objectFolder.getParent().getChildPosition(this.objectFolder)}},{key:"isGlobal",value:function(){return this._isGlobal}},{key:"is3D",value:function(){return!1}},{key:"getName",value:function(){return this.objectFolder.getFolderName()}},{key:"getId",value:function(){return J(this.objectFolder)}},{key:"getHtmlId",value:function(e){return null}},{key:"getDataSet",value:function(){return{folderName:this.objectFolder.getFolderName(),global:this._isGlobal.toString()}}},{key:"getThumbnail",value:function(){return"FOLDER"}},{key:"onClick",value:function(){}},{key:"rename",value:function(e){var t=this;this.getName()!==e&&this.props.onRenameObjectFolderOrObjectWithContextFinish({objectFolderOrObject:this.objectFolder,global:this._isGlobal},e,(function(e){e&&t.props.onObjectModified(!1)}))}},{key:"edit",value:function(){}},{key:"_getPasteLabel",value:function(e,t){var n=t.isGlobalObject,r=(t.isFolder,{id:"Paste"});if(R.Z.has(V)){var i=R.Z.get(V),a=F.$.extractStringProperty(i,"name")||"";r=n?{id:"Paste {clipboardObjectName} as a Global Object inside folder",values:{clipboardObjectName:a}}:{id:"Paste {clipboardObjectName} inside folder",values:{clipboardObjectName:a}}}return e._(r)}},{key:"buildMenuTemplate",value:function(e,t){var n=this,r=this.props,i=r.globalObjectsContainer,o=r.objectsContainer,s=r.expandFolders,l=r.addFolder,c=r.onAddNewObject,u=r.onMovedObjectFolderOrObjectToAnotherFolderInSameContainer,d=r.forceUpdate,p=r.isListLocked,f=this._isGlobal?i:o;if(!f)return[];var h=(0,Z.$8)(f);h.unshift({path:e._({id:"Root folder"}),folder:f.getRootFolder()});var g=h.filter((function(e){return!e.folder.isADescendantOf(n.objectFolder)&&e.folder!==n.objectFolder}));return[{label:this._getPasteLabel(e,{isGlobalObject:this._isGlobal,isFolder:!0}),enabled:R.Z.has(V)&&!p,click:function(){return n.paste()}},{label:e._({id:"Rename"}),click:function(){return n.props.editName(n.getId())},accelerator:"F2",enabled:!p},{label:e._({id:"Delete"}),click:function(){return n.delete()},accelerator:"Backspace",enabled:!p},p?{label:e._("Move to folder"),enabled:!1}:{label:e._("Move to folder"),submenu:[].concat((0,a.Z)(g.map((function(e){var t=e.folder;return{label:e.path,enabled:t!==n.objectFolder.getParent(),click:function(){t!==n.objectFolder.getParent()&&(n.objectFolder.getParent().moveObjectFolderOrObjectToAnotherFolder(n.objectFolder,t,0),u({objectFolderOrObject:t,global:n._isGlobal}))}}}))),[{type:"separator"},{label:e._({id:"Create new folder..."}),click:function(){return l([{objectFolderOrObject:n.objectFolder.getParent(),global:n._isGlobal}])}}])}].concat((0,a.Z)((0,G.Z)({i18n:e,visibility:this.objectFolder.getQuickCustomizationVisibility(),onChangeVisibility:function(e){n.objectFolder.setQuickCustomizationVisibility(e),d()}})),[{type:"separator"},{label:e._({id:"Add a new object"}),click:function(){return c({objectFolderOrObject:n.objectFolder,global:n._isGlobal})},enabled:!p},{label:e._({id:"Add a new folder"}),click:function(){return l([{objectFolderOrObject:n.objectFolder,global:n._isGlobal}])},enabled:!p},{type:"separator"},{label:e._({id:"Expand all sub folders"}),click:function(){return q(n.objectFolder,n._isGlobal,s)}}])}},{key:"renderRightComponent",value:function(e){return null}},{key:"delete",value:function(){this._delete()}},{key:"_delete",value:function(){var e=(0,O.Z)((0,A.Z)().mark((function e(){var t,n,r,i,a,o,s,l,c,u,d,p,f,h=this;return(0,A.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.globalObjectsContainer,r=t.objectsContainer,i=t.onObjectModified,a=t.forceUpdateList,o=t.showDeleteConfirmation,s=t.onDeleteObjects,l=t.selectObjectFolderOrObjectWithContext,0!==(c=(0,Z.wf)(this.objectFolder)).length){e.next=7;break}return l(null),this.objectFolder.getParent().removeFolderChild(this.objectFolder),a(),e.abrupt("return");case 7:return 1===c.length?(u={id:"Are you sure you want to remove this folder and with it the object {0}? This can't be undone.",values:{0:c[0].getName()}},d={id:"Remove folder and object"}):(u={id:"Are you sure you want to remove this folder and all its content (objects {0})? This can't be undone.",values:{0:c.map((function(e){return e.getName()})).join(", ")}},d={id:"Remove folder and objects"}),e.next=10,o({message:u,title:d});case 10:if(e.sent){e.next=13;break}return e.abrupt("return");case 13:p=c.map((function(e){return{object:e,global:h._isGlobal}})),l(null),f=this.objectFolder,s(p,(function(e){if(e){var t=h._isGlobal?n:r;t&&c.forEach((function(e){t.removeObject(e.getName())})),f.getParent().removeFolderChild(f),a(),i(!1)}}));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"copy",value:function(){}},{key:"cut",value:function(){}},{key:"paste",value:function(){if(R.Z.has(V)){var e=R.Z.get(V),t=F.$.extractObjectProperty(e,"object"),n=F.$.extractStringProperty(e,"name"),r=F.$.extractStringProperty(e,"type");if(n&&r&&t){var i=this.props,a=i.project,o=i.globalObjectsContainer,s=i.objectsContainer,l=i.onObjectPasted,c=i.expandFolders,u=i.onObjectModified,d=i.onObjectCreated,p=!Y.UsedObjectTypeFinder.scanProject(a,r),f=z({project:a,globalObjectsContainer:o,objectsContainer:s,objectName:n,positionObjectFolderOrObjectWithContext:{objectFolderOrObject:this.objectFolder,global:this._isGlobal},objectType:r,serializedObject:t,addInsideFolder:!0});d([f.object],p),u(!1),l&&l(f.object),c([{objectFolderOrObject:this.objectFolder,global:this._isGlobal}])}}}},{key:"duplicate",value:function(){}},{key:"getRightButton",value:function(e){return null}}]),e}(),K=n(29343),Q=n.g.gd,$="scene-objects",ee="global-objects",te="global-empty-placeholder",ne=(0,P.vA)("/interface/scene-editor/global-objects/",":~:text=Global%20objects%20are%20objects%20which,are%20usable%20by%20all%20Scenes"),re={listContainer:{flex:1,display:"flex",flexDirection:"column"},autoSizerContainer:{flex:1},autoSizer:{width:"100%"}},ie=function(e){if(e.layout)return{localScopeObjectsTitle:{id:"Scene Objects"},higherScopeObjectsTitle:{id:"Global Objects"},localScopeGroupsTitle:{id:"Scene Groups"},higherScopeGroupsTitle:{id:"Global Groups"}};if(e.eventsBasedObject)return{localScopeObjectsTitle:{id:"Object's children"},higherScopeObjectsTitle:null,localScopeGroupsTitle:{id:"Object's groups"},higherScopeGroupsTitle:null};throw new Error("Scope not recognized.")},ae=function(){function e(t){(0,o.Z)(this,e),this.content=t}return(0,s.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),oe=function(){function e(t,n){(0,o.Z)(this,e),this.isPlaceholder=!0,this.content=new ce(t,n)}return(0,s.Z)(e,[{key:"getChildren",value:function(e){return null}}]),e}(),se=function(e){var t=e.objectFolderOrObject,n=e.isGlobal,r=e.objectFolderTreeViewItemProps,i=e.objectTreeViewItemProps;return t.isFolder()?new le({objectFolderOrObject:t,global:n,isRoot:!1,objectFolderTreeViewItemProps:r,objectTreeViewItemProps:i,content:new X(t,n,r)}):new ae(new W(t,n,i))},le=function(){function e(t){var n=t.objectFolderOrObject,r=t.global,i=t.isRoot,a=t.content,s=t.placeholder,l=t.objectFolderTreeViewItemProps,c=t.objectTreeViewItemProps;(0,o.Z)(this,e),this.isPlaceholder=!1,this.isRoot=i,this.global=r,this.content=a,this.objectFolderOrObject=n,this.placeholder=s,this.objectFolderTreeViewItemProps=l,this.objectTreeViewItemProps=c}return(0,s.Z)(e,[{key:"getChildren",value:function(e){var t=this;return 0===this.objectFolderOrObject.getChildrenCount()?this.placeholder?[this.placeholder]:[]:(0,k.mapFor)(0,this.objectFolderOrObject.getChildrenCount(),(function(e){var n=t.objectFolderOrObject.getChildAt(e);return se({objectFolderOrObject:n,isGlobal:t.global,objectFolderTreeViewItemProps:t.objectFolderTreeViewItemProps,objectTreeViewItemProps:t.objectTreeViewItemProps})}))}}]),e}(),ce=function(){function e(t,n,r,i){(0,o.Z)(this,e),this.id=t,this.label=n,this.buildMenuTemplateFunction=function(e,t){return[r?{id:r.id,label:e._(r.label),click:r.click,enabled:r.enabled}:null].concat((0,a.Z)(i?i():[])).filter(Boolean)},this.rightButton=r}return(0,s.Z)(e,[{key:"getName",value:function(){return this.label}},{key:"getId",value:function(){return this.id}},{key:"getRightButton",value:function(e){return this.rightButton}},{key:"getHtmlId",value:function(e){return this.id}},{key:"getDataSet",value:function(){return{}}},{key:"getThumbnail",value:function(){return null}},{key:"onClick",value:function(){}},{key:"buildMenuTemplate",value:function(e,t){return this.buildMenuTemplateFunction(e,t)}},{key:"renderRightComponent",value:function(e){return null}},{key:"rename",value:function(e){}},{key:"edit",value:function(){}},{key:"delete",value:function(){}},{key:"copy",value:function(){}},{key:"paste",value:function(){}},{key:"cut",value:function(){}},{key:"duplicate",value:function(){}},{key:"getIndex",value:function(){return 0}},{key:"isDescendantOf",value:function(e){return!1}},{key:"isSibling",value:function(e){return!1}},{key:"isGlobal",value:function(){return!1}},{key:"is3D",value:function(){return!1}},{key:"getObjectFolderOrObject",value:function(){return null}}]),e}(),ue=function(e){return e.content.getName()},de=function(e){return e.content.getId()},pe=function(e,t){return e.content.getHtmlId(t)},fe=function(e){return function(t){return t.getChildren(e)}},he=function(e){return e.content.getThumbnail()},ge=function(e){return e.content.getDataSet()},me=function(e){return function(t,n){return t.content.buildMenuTemplate(e,n)}},xe=function(e){return function(t){return t.content.renderRightComponent(e)}},ve=function(e,t){e.content.rename(t)},be=function(e){e.content.onClick()},Ce=function(e){e.content.edit()},je=function(e){return function(t){return t.content.getRightButton(e)}},ye="GD_OBJECT_WITH_CONTEXT",Ze={Sprite:"NewSprite","TiledSpriteObject::TiledSprite":"NewTiledSprite","ParticleSystem::ParticleEmitter":"NewParticlesEmitter","PanelSpriteObject::PanelSprite":"NewPanelSprite","PrimitiveDrawing::Drawer":"NewShapePainter","TextObject::Text":"NewText","BBText::BBText":"NewBBText","BitmapText::BitmapTextObject":"NewBitmapText","TextEntryObject::TextEntry":"NewTextEntry","TileMap::SimpleTileMap":"NewTileMap","TileMap::TileMap":"NewExternalTileMap","TileMap::CollisionMask":"NewExternalTileMapMask","MyDummyExtension::DummyObject":"NewDummyObject","Lighting::LightObject":"NewLight","TextInput::TextInputObject":"NewTextInput","Scene3D::Model3DObject":"New3DModel","Scene3D::Cube3DObject":"New3DBox","SpineObject::SpineObject":"NewSpine","Video::VideoObject":"NewVideo"},ke=c.forwardRef((function(e,t){var n=e.project,r=e.layout,a=e.eventsBasedObject,o=e.initialInstances,s=e.projectScopedContainersAccessor,k=e.globalObjectsContainer,P=e.objectsContainer,M=e.resourceManagementProps,A=e.onSelectAllInstancesOfObjectInLayout,O=e.onDeleteObjects,R=e.onRenameObjectFolderOrObjectWithContextFinish,F=e.selectedObjectFolderOrObjectsWithContext,D=e.beforeSetAsGlobalObject,N=e.canSetAsGlobalObject,_=e.onSetAsGlobalObject,B=e.onEditObject,U=e.onOpenEventBasedObjectEditor,V=e.onOpenEventBasedObjectVariantEditor,z=e.onExportAssets,W=e.onObjectCreated,G=e.onObjectEdited,Y=e.onObjectFolderOrObjectWithContextSelected,X=e.onObjectPasted,ae=e.getValidatedObjectOrGroupName,ke=e.onAddObjectInstance,we=e.onWillInstallExtension,Te=e.onExtensionInstalled,Se=e.getThumbnail,Pe=e.unsavedChanges,Ie=(e.hotReloadPreviewButtonProps,e.isListLocked),Ee=c.useContext(y.Z).currentlyRunningInAppTutorial,Me=c.useState(""),Le=(0,i.Z)(Me,2),Ae=Le[0],Oe=Le[1],Re=(0,I.Z)().showDeleteConfirmation,Fe=c.useRef(null),De=(0,b.Z)(),Ne=(0,E.UQ)().isMobile,_e=c.useCallback((function(){De(),Fe.current&&Fe.current.forceUpdateList()}),[De]),Be=c.useState(null),Ue=(0,i.Z)(Be,2),Ve=Ue[0],He=Ue[1];c.useImperativeHandle(t,(function(){return{forceUpdateList:function(){De(),Fe.current&&Fe.current.forceUpdateList()},openNewObjectDialog:function(){He({from:null})},closeNewObjectDialog:function(){He(null)}}}));var ze=c.useState(null),We=(0,i.Z)(ze,2),Ge=We[0],Ye=We[1],qe=c.useRef(new T.ZP({shortcutCallbacks:{}})),Je=c.useCallback((function(e){Fe.current&&Fe.current.scrollToItemFromId(e)}),[]),Xe=c.useCallback((function(e){var t,r,i=n.hasEventsBasedObject(e)?"New"+(n.getEventsBasedObject(e).getDefaultName()||n.getEventsBasedObject(e).getName()):Ze[e]||"NewObject",a=(0,g.Z)(i,(function(e){return P.hasObjectNamed(e)||!!k&&k.hasObjectNamed(e)})),o=!Q.UsedObjectTypeFinder.scanProject(n,e);if(Ve&&Ve.from&&!Ve.from.global){var s=Ve.from.objectFolderOrObject,l=(0,L.c)(s),c=l.folder,u=l.position;t=P.insertNewObjectInFolder(n,e,a,c,u),r={objectFolderOrObject:c.getObjectChild(a),global:!1},Fe.current&&Fe.current.openItems([J(c)])}else t=P.insertNewObject(n,e,a,P.getObjectsCount()),r={objectFolderOrObject:P.getRootFolder().getObjectChild(a),global:!1};Fe.current&&Fe.current.openItems([$]),setTimeout((function(){Je(H(t))}),100),He(null),B&&(B(t),Y(r)),W([t],o)}),[n,Ve,B,P,k,Je,W,Y]),Ke=c.useCallback((function(e){var t=e.createdObjects,n=e.isTheFirstOfItsTypeInProject;if(0!==t.length){W(t,n);var r=t[t.length-1];if(Ve&&Ve.from){var i=Ve.from.objectFolderOrObject;Fe.current&&Fe.current.openItems((0,Z.TE)(i).map((function(e){return J(e)})))}else Fe.current&&Fe.current.openItems([$]);setTimeout((function(){Je(H(r))}),100)}}),[W,Je,Ve]),Qe=c.useCallback((function(e){Ye({objectWithContext:e})}),[]),$e=c.useCallback((function(e){He({from:e})}),[]),et=c.useCallback((function(e){Pe&&Pe.triggerUnsavedChanges(),e?_e():De()}),[De,_e,Pe]),tt=c.useCallback((function(e){Y(e)}),[Y]),nt=c.useCallback((function(e){var t=Fe.current;t&&(Ne&&t.scrollToItemFromId(e,"start"),t.renameItemFromId(e))}),[Ne]),rt=function(e){var t=Fe.current;if(!t)return null;var n=e.objectFolderOrObject,r=(0,Z.TE)(n).reverse().map((function(e){return J(n)})),i=t.areItemsOpenFromId(r).indexOf(!1);return-1===i?function(e){return e.isFolder()?J(e):H(e.getObject())}(n):r[i]},it=c.useCallback((function(e){var t=e.i18n,r=e.objectFolderOrObject,i=e.index,a=e.folder;if(k){var o=a&&a.isFolder()?a:k.getRootFolder();if(!r.isFolder()){var s=r.getObject(),l=s.getName();if(P.hasObjectNamed(l))if(k.hasObjectNamed(l))(0,x.T4)(t._({id:"A global object with this name already exists. Please change the object name before setting it as a global object"}),{delayToNextTick:!0});else if(!D||D(l))if(m.ZP.showConfirmDialog(t._({id:"Global elements help manage objects across multiple scenes and are recommended for frequently used objects. This action cannot be undone. Do you want to set this as global object?"})))P.moveObjectFolderOrObjectToAnotherContainerInFolder(r,k,o,"number"===typeof i?i:k.getObjectsCount()),Q.WholeProjectRefactorer.updateBehaviorsSharedData(n),et(!0),_(s),tt({objectFolderOrObject:r,global:!0}),setTimeout((function(){Je(H(s))}),100)}}}),[n,k,P,D,_,et,tt,Je]),at=c.useCallback((function(e){var t;if(1===e.length){var n=e[0],r=n.objectFolderOrObject,i=n.global;if(r.isFolder()){t={objectFolderOrObject:r.insertNewFolder("NewFolder",0),global:i},Fe.current&&Fe.current.openItems([J(e[0].objectFolderOrObject)])}else{var a=r.getParent();t={objectFolderOrObject:a.insertNewFolder("NewFolder",a.getChildPosition(r)+1),global:i}}}else{t={objectFolderOrObject:P.getRootFolder().insertNewFolder("NewFolder",0),global:!1}}tt(t);var o=(0,Z.TE)(t.objectFolderOrObject).map((function(e){return J(e)}));o.push(t.global?ee:$),Fe.current&&Fe.current.openItems(o),nt(J(t.objectFolderOrObject)),_e()}),[_e,P,tt,nt]),ot=c.useCallback((function(e){var t=Fe.current;if(t){var n=rt(e);n&&t.animateItemFromId(n)}et(!0)}),[et]),st=c.useCallback((function(e){Fe.current&&Fe.current.openItems(e.map((function(e){return J(e.objectFolderOrObject)})))}),[]),lt=c.useMemo((function(){return{project:n,globalObjectsContainer:k,objectsContainer:P,onObjectPasted:X,onSelectAllInstancesOfObjectInLayout:A,editName:nt,onEditObject:B,onDeleteObjects:O,onAddObjectInstance:ke,initialInstances:o,onOpenEventBasedObjectEditor:U,onOpenEventBasedObjectVariantEditor:V,getValidatedObjectOrGroupName:ae,onRenameObjectFolderOrObjectWithContextFinish:R,onObjectModified:et,onObjectCreated:W,swapObjectAsset:Qe,onMovedObjectFolderOrObjectToAnotherFolderInSameContainer:ot,canSetAsGlobalObject:N,setAsGlobalObject:it,getThumbnail:Se,showDeleteConfirmation:Re,selectObjectFolderOrObjectWithContext:tt,addFolder:at,forceUpdateList:_e,forceUpdate:De,isListLocked:Ie}}),[n,k,P,X,A,nt,B,O,ke,o,U,V,ae,R,et,W,Qe,ot,N,it,Se,Re,tt,at,_e,De,Ie]),ct=c.useMemo((function(){return{project:n,globalObjectsContainer:k,objectsContainer:P,onObjectPasted:X,onObjectModified:et,onObjectCreated:W,editName:nt,expandFolders:st,addFolder:at,onAddNewObject:$e,onMovedObjectFolderOrObjectToAnotherFolderInSameContainer:ot,onRenameObjectFolderOrObjectWithContextFinish:R,onDeleteObjects:O,selectObjectFolderOrObjectWithContext:tt,showDeleteConfirmation:Re,forceUpdateList:_e,forceUpdate:De,isListLocked:Ie}}),[n,k,P,X,et,W,nt,st,at,$e,ot,R,O,tt,Re,_e,De,Ie]),ut=k?k.getRootFolder():null,dt=P.getRootFolder(),pt=c.useMemo((function(){return ie(s.getScope())}),[s]),ft=0===P.getObjectsCount()&&(!k||0===k.getObjectsCount()),ht=c.useCallback((function(e){return[ut&&new le({objectFolderOrObject:ut,global:!0,isRoot:!0,content:new ce(ee,e._(pt.higherScopeObjectsTitle),null,(function(){return[{label:e._({id:"Add a folder"}),click:function(){return at([{objectFolderOrObject:ut,global:!0}])}},{type:"separator"},{label:e._({id:"Expand all sub folders"}),click:function(){return q(ut,!0,st)}}]})),placeholder:new oe(te,(0,K.jsx)(l.Trans,{id:"There is no <0>global object</0> yet.",components:[(0,K.jsx)(S.Z,{href:ne,onClick:function(){return m.ZP.openExternalURL(ne)}})]})),objectTreeViewItemProps:lt,objectFolderTreeViewItemProps:ct}),new le({objectFolderOrObject:dt,global:!1,isRoot:!0,content:new ce($,e._(pt.localScopeObjectsTitle),{primary:!0,showPrimaryLabel:ft,icon:(0,K.jsx)(j.Z,{}),label:{id:"Add object"},click:function(){$e(F[0])},id:"add-new-object-button",enabled:!Ie},(function(){return[{label:e._({id:"Add a folder"}),click:function(){return at([{objectFolderOrObject:dt,global:!1}])},enabled:!Ie},{type:"separator"},{label:e._({id:"Expand all sub folders"}),click:function(){return q(dt,!1,st)}},{type:"separator"},{label:e._({id:"Export as assets"}),click:function(){return z()}}]})),placeholder:new oe("scene-empty-placeholder",e._({id:"Start by adding a new object."})),objectTreeViewItemProps:lt,objectFolderTreeViewItemProps:ct})].filter(Boolean)}),[ut,pt.higherScopeObjectsTitle,pt.localScopeObjectsTitle,lt,ct,dt,Ie,at,st,$e,F,z,ft]),gt=c.useMemo((function(){return F.map((function(e){var t=e.objectFolderOrObject,n=e.global;return se({objectFolderOrObject:t,isGlobal:n,objectFolderTreeViewItemProps:ct,objectTreeViewItemProps:lt})}))}),[F,ct,lt]);c.useEffect((function(){qe.current&&(qe.current.setShortcutCallback("onDelete",(function(){Ie||gt[0].content.delete()})),qe.current.setShortcutCallback("onDuplicate",(function(){Ie||gt[0].content.duplicate()})),qe.current.setShortcutCallback("onRename",(function(){Ie||nt(gt[0].content.getId())})))}),[F,nt,gt,Ie]);var mt=c.useCallback((function(e){if(e.isRoot)return!1;if(e.isPlaceholder){if(e.content.getId()===te&&1===gt.length&&!gt[0].content.isGlobal()){var t=gt[0].content.getObjectFolderOrObject();return!!t&&!t.isFolder()}return!1}if(gt.every((function(t){return t.content.isGlobal()===e.content.isGlobal()})))return!gt[0]||!e.content.isDescendantOf(gt[0].content);if(1===gt.length&&gt.every((function(e){return!1===e.content.isGlobal()}))&&e.content.isGlobal()){var n=gt[0].content.getObjectFolderOrObject();return!!n&&!n.isFolder()}return!1}),[gt]),xt=c.useCallback((function(e,t,n){if(!t.isRoot&&1===gt.length){var r=gt[0],i=r.content.getObjectFolderOrObject();if(i&&t.content.getId()!==r.content.getId())if(t.isPlaceholder)t.content.getId()!==te||1!==gt.length||r.content.isGlobal()||it({i18n:e,objectFolderOrObject:i});else{var a=t.content.getObjectFolderOrObject();if(a){var o,s;if(!1===r.content.isGlobal()&&t.content.isGlobal())return"inside"===n&&a.isFolder()?(o=a,s=0):(o=a.getParent(),s=t.content.getIndex()+("after"===n?1:0)),void it({i18n:e,objectFolderOrObject:i,folder:o,index:s});if(r.content.isGlobal()===t.content.isGlobal()){var l;l="inside"===n&&a.isFolder()?a:a.getParent();var c=i.getParent();if(l===c){var u=r.content.getIndex(),d=t.content.getIndex();d>u&&(d-=1),"after"===n&&(d+=1),c.moveChild(u,d)}else{if(t.content.isDescendantOf(r.content))return;var p="inside"===n?0:t.content.getIndex()+("after"===n?1:0);c.moveObjectFolderOrObjectToAnotherFolder(i,l,p);var f=Fe.current;if(f){var h=rt({objectFolderOrObject:l,global:t.content.isGlobal()});h&&f.animateItemFromId(h)}}et(!0)}}}}}),[et,gt,it]),vt=c.useCallback((function(e){if(gt&&1===gt.length){var t=gt[0];t&&t.content.isDescendantOf(e.content)&&tt(null)}}),[tt,gt]),bt=n.ptr+";"+P.ptr,Ct=[ut&&ut.getChildrenCount()>0?ee:null,$].filter(Boolean),jt=c.useMemo((function(){return{onGetItemInside:function(e){if(e.isPlaceholder||e.isRoot)return null;var t=e.content.getObjectFolderOrObject();return t&&t.isFolder()?0===t.getChildrenCount()?null:se({objectFolderOrObject:t.getChildAt(0),isGlobal:e.content.isGlobal(),objectFolderTreeViewItemProps:ct,objectTreeViewItemProps:lt}):null},onGetItemOutside:function(e){if(e.isPlaceholder||e.isRoot)return null;var t=e.content.getObjectFolderOrObject();if(!t)return null;var n=t.getParent();return n.isRootFolder()?null:se({objectFolderOrObject:n,isGlobal:e.content.isGlobal(),objectFolderTreeViewItemProps:ct,objectTreeViewItemProps:lt})}}}),[ct,lt]);return(0,K.jsxs)(d.Z,{maxWidth:!0,children:[(0,K.jsx)(w.pJ,{children:(0,K.jsx)(C.sg,{expand:!0,children:(0,K.jsx)(p.Z,{value:Ae,onRequestSearch:function(){},onChange:Oe,placeholder:{id:"Search objects"}})})}),(0,K.jsx)("div",{style:re.listContainer,onKeyDown:qe.current.onKeyDown,onKeyUp:qe.current.onKeyUp,id:"objects-list",children:(0,K.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,K.jsx)("div",{style:re.autoSizerContainer,children:(0,K.jsx)(u.qj,{style:re.autoSizer,disableWidth:!0,children:function(e){var n=e.height;return(0,K.jsx)(v.Z,{ref:Fe,items:ht(t),height:n,forceAllOpened:!!Ee,searchText:Ae,getItemName:ue,getItemThumbnail:he,getItemChildren:fe(t),multiSelect:!1,getItemId:de,getItemHtmlId:pe,getItemDataset:ge,onEditItem:Ce,onClickItem:be,onCollapseItem:vt,selectedItems:gt,onSelectItems:function(e){if(e){var t=e[0].content,n=t.getObjectFolderOrObject();tt(n?{objectFolderOrObject:n,global:t.isGlobal()}:null)}else tt(null)},onRenameItem:ve,buildMenuTemplate:me(t),onMoveSelectionToItem:function(e,n){return xt(t,e,n)},canMoveSelectionToItem:mt,reactDndType:ye,initiallyOpenedNodeIds:Ct,arrowKeyNavigationProps:jt,shouldSelectUponContextMenuOpening:!0,getItemRightButton:je(t),renderRightComponent:xe(t)},bt)}})})}})}),Ve&&(0,K.jsx)(f.ZP,{onClose:function(){return He(null)},onCreateNewObject:Xe,onObjectsAddedFromAssets:Ke,project:n,layout:r,eventsBasedObject:a,objectsContainer:P,resourceManagementProps:M,targetObjectFolderOrObjectWithContext:Ve.from,onWillInstallExtension:we,onExtensionInstalled:Te}),Ge&&(0,K.jsx)(h.Z,{onClose:function(e){var t=e.swappingDone;Ye(null),t&&G(Ge.objectWithContext,!0)},project:n,layout:r,eventsBasedObject:a,objectsContainer:P,object:Ge.objectWithContext.object,resourceManagementProps:M,onWillInstallExtension:we,onExtensionInstalled:Te})]})})),we=function(e,t){return e.selectedObjectFolderOrObjectsWithContext===t.selectedObjectFolderOrObjectsWithContext&&e.project===t.project&&e.globalObjectsContainer===t.globalObjectsContainer&&e.objectsContainer===t.objectsContainer},Te=c.memo(ke,we),Se=c.forwardRef((function(e,t){return(0,K.jsx)(M.ZP,{componentTitle:(0,K.jsx)(l.Trans,{id:"Objects list"}),scope:"scene-editor-objects-list",children:(0,K.jsx)(Te,(0,r.Z)({ref:t},e))})}))},29571:function(e,t,n){"use strict";n.d(t,{Z:function(){return be}});var r=n(1413),i=n(86289),a=n(15671),o=n(43144),s=n(11752),l=n(61120),c=n(60136),u=n(29388),d=n(79916),p=n(58247),f=n(72410),h=n(36425),g=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s){var l;return(0,a.Z)(this,n),(l=t.call(this,e,r,i,o,s))._pixiObject=new h.Sprite(l._pixiResourcesLoader.getInvalidPIXITexture()),l._pixiContainer.addChild(l._pixiObject),l}return(0,o.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy()}},{key:"update",value:function(){if(this._pixiObject){var e=this._pixiObject.texture.frame;if(e){this._pixiObject.anchor.x=.5,this._pixiObject.anchor.y=.5,this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle()),this._pixiObject.scale.x=this.getWidth()/e.width,this._pixiObject.scale.y=this.getHeight()/e.height,this._pixiObject.position.x=this._instance.getX()+this.getCenterX(),this._pixiObject.position.y=this._instance.getY()+this.getCenterY();var t=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=t,this._pixiObject.scale.x=Math.abs(this._pixiObject.scale.x)*(this._instance.isFlippedX()?-1:1),this._pixiObject.scale.y=Math.abs(this._pixiObject.scale.y)*(this._instance.isFlippedY()?-1:1)}}}}],[{key:"getThumbnail",value:function(e,t,n){return"res/unknown32.png"}}]),n}(d.Z),m=n.g.gd,x=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s){var l;return(0,a.Z)(this,n),(l=t.call(this,e,r,i,o,s))._sprite=null,l._shouldNotRotate=!1,l._preScale=1,l._renderedAnimation=0,l._renderedDirection=0,l._centerX=0,l._centerY=0,l._originX=0,l._originY=0,l._pixiObject=new h.Sprite(l._pixiResourcesLoader.getInvalidPIXITexture()),l._pixiContainer.addChild(l._pixiObject),l.updatePIXITextureAndSprite(),l}return(0,o.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!1),this._pixiObject=null}},{key:"updatePIXISprite",value:function(){if(this._pixiObject){var e=this._pixiObject.texture.frame;if(e){this._pixiObject.anchor.x=this._centerX/e.width,this._pixiObject.anchor.y=this._centerY/e.height,this._pixiObject.rotation=this._shouldNotRotate?0:d.Z.toRad(this._instance.getAngle()),this._instance.hasCustomSize()?(this._pixiObject.scale.x=this.getCustomWidth()/e.width,this._pixiObject.scale.y=this.getCustomHeight()/e.height):(this._pixiObject.scale.x=this._preScale,this._pixiObject.scale.y=this._preScale),this._pixiObject.position.x=this._instance.getX()+(this._centerX-this._originX)*Math.abs(this._pixiObject.scale.x),this._pixiObject.position.y=this._instance.getY()+(this._centerY-this._originY)*Math.abs(this._pixiObject.scale.y);var t=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=t,this._pixiObject.scale.x=Math.abs(this._pixiObject.scale.x)*(this._instance.isFlippedX()?-1:1),this._pixiObject.scale.y=Math.abs(this._pixiObject.scale.y)*(this._instance.isFlippedY()?-1:1)}}}},{key:"updateSprite",value:function(){this._sprite=null,this._shouldNotRotate=!1;var e=m.asSpriteConfiguration(this._associatedObjectConfiguration);this._preScale=e.getPreScale();var t=e.getAnimations();if(t.hasNoAnimations())return!1;this._renderedAnimation=this._instance.getRawDoubleProperty("animation"),this._renderedAnimation>=t.getAnimationsCount()&&(this._renderedAnimation=0);var n=t.getAnimation(this._renderedAnimation);if(n.hasNoDirections())return!1;if(this._renderedDirection=0,n.useMultipleDirections()){var r=Math.floor(this._instance.getAngle())%360;r<0&&(r+=360),this._renderedDirection=Math.round(r/45)%8}this._renderedDirection>=n.getDirectionsCount()&&(this._renderedDirection=0);var i=n.getDirection(this._renderedDirection);return 0!==i.getSpritesCount()&&(this._shouldNotRotate=n.useMultipleDirections(),this._sprite=i.getSprite(0),!0)}},{key:"updatePIXITextureAndSprite",value:function(){var e=this;if(this._pixiObject){this.updateSprite();var t=this._sprite;if(t){var n=this._pixiResourcesLoader.getPIXITexture(this._project,t.getImageName());if(this._pixiObject.texture=n,n.baseTexture.valid){var r=t.getOrigin();if(this._originX=r.getX(),this._originY=r.getY(),t.isDefaultCenterPoint())this._centerX=n.width/2,this._centerY=n.height/2;else{var i=t.getCenter();this._centerX=i.getX(),this._centerY=i.getY()}this.updatePIXISprite()}else n.once("update",(function(){e._wasDestroyed||e.updatePIXITextureAndSprite()}))}}}},{key:"update",value:function(){var e=this._instance.getRawDoubleProperty("animation");this._renderedAnimation!==e?this.updatePIXITextureAndSprite():this.updatePIXISprite()}},{key:"getOriginX",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getX()*Math.abs(this._pixiObject.scale.x):0}},{key:"getOriginY",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getY()*Math.abs(this._pixiObject.scale.y):0}},{key:"getDefaultWidth",value:function(){var e=this._pixiObject.texture.frame;return e?Math.abs(e.width)*this._preScale:32}},{key:"getDefaultHeight",value:function(){var e=this._pixiObject.texture.frame;return e?Math.abs(e.height)*this._preScale:32}},{key:"getCenterX",value:function(){return this._sprite&&this._pixiObject?this._centerX*Math.abs(this._pixiObject.scale.x):0}},{key:"getCenterY",value:function(){return this._sprite&&this._pixiObject?this._centerY*Math.abs(this._pixiObject.scale.y):0}}],[{key:"getThumbnail",value:function(e,t,n){var r=m.asSpriteConfiguration(n).getAnimations();if(r.getAnimationsCount()>0&&r.getAnimation(0).getDirectionsCount()>0&&r.getAnimation(0).getDirection(0).getSpritesCount()>0){var i=r.getAnimation(0).getDirection(0).getSprite(0).getImageName();return t.getResourceFullUrl(e,i,{})}return"res/unknown32.png"}}]),n}(d.Z),v=n.g.gd,b=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s){var l;(0,a.Z)(this,n),l=t.call(this,e,r,i,o,s);var c=v.asTiledSpriteConfiguration(i);return l._texture=c.getTexture(),l._pixiObject=new h.TilingSprite(p.Z.getPIXITexture(e,c.getTexture()),c.getWidth(),c.getHeight()),l._pixiObject.anchor.x=.5,l._pixiObject.anchor.y=.5,l._pixiContainer.addChild(l._pixiObject),l}return(0,o.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!1)}},{key:"update",value:function(){var e=v.asTiledSpriteConfiguration(this._associatedObjectConfiguration);this._instance.hasCustomSize()?(this._pixiObject.width=this.getCustomWidth(),this._pixiObject.height=this.getCustomHeight()):(this._pixiObject.width=e.getWidth(),this._pixiObject.height=e.getHeight()),this._texture!==e.getTexture()&&(this._texture=e.getTexture(),this._pixiObject.texture=p.Z.getPIXITexture(this._project,e.getTexture())),this._pixiObject.x=this._instance.getX()+this._pixiObject.width/2,this._pixiObject.y=this._instance.getY()+this._pixiObject.height/2,this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle());var t=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=t}},{key:"getDefaultWidth",value:function(){return v.asTiledSpriteConfiguration(this._associatedObjectConfiguration).getWidth()}},{key:"getDefaultHeight",value:function(){return v.asTiledSpriteConfiguration(this._associatedObjectConfiguration).getHeight()}}],[{key:"getThumbnail",value:function(e,t,n){var r=v.asTiledSpriteConfiguration(n);return f.Z.getResourceFullUrl(e,r.getTexture(),{})}}]),n}(d.Z),C=n(37762),j=n.g.gd,y=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s){var l;return(0,a.Z)(this,n),(l=t.call(this,e,r,i,o,s)).makeObjectsAndUpdateTextures(),l}return(0,o.Z)(n,[{key:"update",value:function(){var e=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);e.isTiled()!==this._tiled&&this.makeObjectsAndUpdateTextures(),e.getTexture()===this._textureName&&e.getLeftMargin()===this._leftMargin&&e.getTopMargin()===this._topMargin&&e.getRightMargin()===this._rightMargin&&e.getBottomMargin()===this._bottomMargin||this.updateTextures(),this.updateAngle(),this.updatePosition();var t=this._width,n=this._height;if(this._instance.hasCustomSize())this._width=this.getCustomWidth(),this._height=this.getCustomHeight();else{var r=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._width=r.getWidth(),this._height=r.getHeight()}this._width===t&&this._height===n||this.updateWidthHeight();var i=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=i}},{key:"makeObjectsAndUpdateTextures",value:function(){var e=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration),t=p.Z.getLoadingPIXITexture();this._tiled=e.isTiled();var n=this._tiled?h.TilingSprite:h.Sprite;this._pixiObject||(this._pixiObject=new h.Container,this._pixiContainer.addChild(this._pixiObject)),this._centerSprite=new n(new h.Texture(t)),this._borderSprites=[new n(new h.Texture(t)),new h.Sprite(new h.Texture(t)),new n(new h.Texture(t)),new h.Sprite(new h.Texture(t)),new n(new h.Texture(t)),new h.Sprite(new h.Texture(t)),new n(new h.Texture(t)),new h.Sprite(new h.Texture(t))],this._pixiObject.removeChildren(),this._pixiObject.addChild(this._centerSprite);for(var r=0;r<this._borderSprites.length;++r)this._pixiObject.addChild(this._borderSprites[r]);this.updateTextures()}},{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this);var e,t=(0,C.Z)(this._borderSprites);try{for(t.s();!(e=t.n()).done;){e.value.destroy({texture:!0})}}catch(r){t.e(r)}finally{t.f()}this._centerSprite.destroy({texture:!0}),this._pixiObject.destroy(!1)}},{key:"updateAngle",value:function(){this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle())}},{key:"updatePosition",value:function(){this._pixiObject.x=this._instance.getX()+this._width/2,this._pixiObject.y=this._instance.getY()+this._height/2}},{key:"_updateLocalPositions",value:function(){var e=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._centerSprite.width=Math.max(this._width-e.getRightMargin()-e.getLeftMargin(),0),this._centerSprite.height=Math.max(this._height-e.getTopMargin()-e.getBottomMargin(),0);var t=e.getLeftMargin(),n=e.getRightMargin();0===this._centerSprite.width&&t+n>0&&(t=this._width*t/(t+n),n=this._width-t);var r=e.getTopMargin(),i=e.getBottomMargin();0===this._centerSprite.height&&r+i>0&&(r=this._height*r/(r+i),i=this._height-r),this._borderSprites[0].width=n,this._borderSprites[0].height=Math.max(this._height-r-i,0),this._borderSprites[2].height=r,this._borderSprites[2].width=Math.max(this._width-n-t,0),this._borderSprites[4].width=t,this._borderSprites[4].height=Math.max(this._height-r-i,0),this._borderSprites[6].height=i,this._borderSprites[6].width=Math.max(this._width-n-t,0),this._borderSprites[1].width=n,this._borderSprites[1].height=r,this._borderSprites[3].width=t,this._borderSprites[3].height=r,this._borderSprites[5].width=t,this._borderSprites[5].height=i,this._borderSprites[7].width=n,this._borderSprites[7].height=i,this._pixiObject.cacheAsBitmap=!1;var a=t,o=r,s=this._width-n,l=this._height-i;this._centerSprite.position.x=a,this._centerSprite.position.y=o,this._borderSprites[0].position.x=s,this._borderSprites[0].position.y=o,this._borderSprites[1].position.x=s,this._borderSprites[1].position.y=0,this._borderSprites[2].position.x=a,this._borderSprites[2].position.y=0,this._borderSprites[3].position.x=0,this._borderSprites[3].position.y=0,this._borderSprites[4].position.x=0,this._borderSprites[4].position.y=o,this._borderSprites[5].position.x=0,this._borderSprites[5].position.y=l,this._borderSprites[6].position.x=a,this._borderSprites[6].position.y=l,this._borderSprites[7].position.x=s,this._borderSprites[7].position.y=l}},{key:"updateTextures",value:function(){var e=this,t=j.asPanelSpriteConfiguration(this._associatedObjectConfiguration);this._textureName=t.getTexture(),this._leftMargin=t.getLeftMargin(),this._topMargin=t.getTopMargin(),this._rightMargin=t.getRightMargin(),this._bottomMargin=t.getBottomMargin();var n=p.Z.getPIXITexture(this._project,this._textureName);function r(e){return e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.x<0&&(e.x=0),e.y<0&&(e.y=0),e.x>n.width&&(e.x=n.width),e.y>n.height&&(e.y=n.height),e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y),e}n.baseTexture.valid?(this._centerSprite.texture.valid&&this._centerSprite.texture.destroy(!1),this._centerSprite.texture=new h.Texture(n,r(new h.Rectangle(t.getLeftMargin(),t.getTopMargin(),n.width-t.getLeftMargin()-t.getRightMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[0].texture.valid&&this._borderSprites[0].texture.destroy(!1),this._borderSprites[0].texture=new h.Texture(n,r(new h.Rectangle(n.width-t.getRightMargin(),t.getTopMargin(),t.getRightMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[1].texture.valid&&this._borderSprites[1].texture.destroy(!1),this._borderSprites[1].texture=new h.Texture(n,r(new h.Rectangle(n.width-t.getRightMargin(),0,t.getRightMargin(),t.getTopMargin()))),this._borderSprites[2].texture.valid&&this._borderSprites[2].texture.destroy(!1),this._borderSprites[2].texture=new h.Texture(n,r(new h.Rectangle(t.getLeftMargin(),0,n.width-t.getLeftMargin()-t.getRightMargin(),t.getTopMargin()))),this._borderSprites[3].texture.valid&&this._borderSprites[3].texture.destroy(!1),this._borderSprites[3].texture=new h.Texture(n,r(new h.Rectangle(0,0,t.getLeftMargin(),t.getTopMargin()))),this._borderSprites[4].texture.valid&&this._borderSprites[4].texture.destroy(!1),this._borderSprites[4].texture=new h.Texture(n,r(new h.Rectangle(0,t.getTopMargin(),t.getLeftMargin(),n.height-t.getTopMargin()-t.getBottomMargin()))),this._borderSprites[5].texture.valid&&this._borderSprites[5].texture.destroy(!1),this._borderSprites[5].texture=new h.Texture(n,r(new h.Rectangle(0,n.height-t.getBottomMargin(),t.getLeftMargin(),t.getBottomMargin()))),this._borderSprites[6].texture.valid&&this._borderSprites[6].texture.destroy(!1),this._borderSprites[6].texture=new h.Texture(n,r(new h.Rectangle(t.getLeftMargin(),n.height-t.getBottomMargin(),n.width-t.getLeftMargin()-t.getRightMargin(),t.getBottomMargin()))),this._borderSprites[7].texture.valid&&this._borderSprites[7].texture.destroy(!1),this._borderSprites[7].texture=new h.Texture(n,r(new h.Rectangle(n.width-t.getRightMargin(),n.height-t.getBottomMargin(),t.getRightMargin(),t.getBottomMargin()))),this._updateLocalPositions(),this.updatePosition()):n.once("update",(function(){e._wasDestroyed||e.updateTextures()}))}},{key:"updateWidthHeight",value:function(){this._pixiObject.pivot.x=this._width/2,this._pixiObject.pivot.y=this._height/2,this._updateLocalPositions(),this.updatePosition()}},{key:"getDefaultWidth",value:function(){return j.asPanelSpriteConfiguration(this._associatedObjectConfiguration).getWidth()}},{key:"getDefaultHeight",value:function(){return j.asPanelSpriteConfiguration(this._associatedObjectConfiguration).getHeight()}}],[{key:"getThumbnail",value:function(e,t,n){var r=j.asPanelSpriteConfiguration(n);return f.Z.getResourceFullUrl(e,r.getTexture(),{})}}]),n}(d.Z),Z=n(11858),k=n.g.gd,w=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s,l){var c;(0,a.Z)(this,n),(c=t.call(this,e,r,i,o,s,l))._isItalic=!1,c._isBold=!1,c._characterSize=0,c._wrapping=!1,c._wrappingWidth=0,c._styleFontDirty=!0,c._fontName="",c._fontFamily="",c._color="0;0;0",c._textAlignment="left",c._verticalTextAlignment="top",c._isOutlineEnabled=!1,c._outlineColor="255;255;255",c._outlineThickness=2,c._isShadowEnabled=!1,c._shadowDistance=3,c._shadowAngle=90,c._shadowColor="0;0;0",c._shadowOpacity=127,c._shadowBlurRadius=2,c._lineHeight=0;var u=new h.TextStyle({fontFamily:"Arial",fontSize:20,align:"left",padding:5});return c._pixiObject=new h.Text("",u),c._pixiObject.anchor.x=.5,c._pixiObject.anchor.y=.5,c._pixiContainer.addChild(c._pixiObject),c._styleFontDirty=!0,c.update(),c}return(0,o.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!0)}},{key:"update",value:function(){var e=this,t=k.asTextObjectConfiguration(this._associatedObjectConfiguration),n=this.getPropertyOverridings();if(this._pixiObject.text=n&&n.has("Text")?n.get("Text"):t.getText(),(t.isItalic()!==this._isItalic||t.isBold()!==this._isBold||t.getCharacterSize()!==this._characterSize||t.getLineHeight()!==this._lineHeight||t.getTextAlignment()!==this._textAlignment||t.getVerticalTextAlignment()!==this._verticalTextAlignment||t.getColor()!==this._color||t.isOutlineEnabled()!==this._isOutlineEnabled||t.getOutlineColor()!==this._outlineColor||t.getOutlineThickness()!==this._outlineThickness||t.isShadowEnabled()!==this._isShadowEnabled||t.getShadowDistance()!==this._shadowDistance||t.getShadowAngle()!==this._shadowAngle||t.getShadowColor()!==this._shadowColor||t.getShadowOpacity()!==this._shadowOpacity||t.getShadowBlurRadius()!==this._shadowBlurRadius||this._instance.hasCustomSize()!==this._wrapping||this.getCustomWidth()!==this._wrappingWidth&&this._wrapping)&&(this._isItalic=t.isItalic(),this._isBold=t.isBold(),this._characterSize=t.getCharacterSize(),this._lineHeight=t.getLineHeight(),this._textAlignment=t.getTextAlignment(),this._verticalTextAlignment=t.getVerticalTextAlignment(),this._color=t.getColor(),this._isOutlineEnabled=t.isOutlineEnabled(),this._outlineColor=t.getOutlineColor(),this._outlineThickness=t.getOutlineThickness(),this._isShadowEnabled=t.isShadowEnabled(),this._shadowDistance=t.getShadowDistance(),this._shadowAngle=t.getShadowAngle(),this._shadowColor=t.getShadowColor(),this._shadowOpacity=t.getShadowOpacity(),this._shadowBlurRadius=t.getShadowBlurRadius(),this._wrapping=this._instance.hasCustomSize(),this._wrappingWidth=this.getCustomWidth(),this._styleFontDirty=!0),this._fontName!==t.getFontName()&&(this._fontName=t.getFontName(),p.Z.loadFontFamily(this._project,t.getFontName()).then((function(t){e._wasDestroyed||(e._fontFamily=t,e._styleFontDirty=!0)})).catch((function(e){console.warn("Unable to load font family for RenderedTextInstance",e)}))),this._styleFontDirty){var r=this._pixiObject.style;r.fontFamily=this._fontFamily||"Arial",r.fontSize=Math.max(1,this._characterSize),r.fontStyle=this._isItalic?"italic":"normal",r.fontWeight=this._isBold?"bold":"normal",r.lineHeight=0!==this._lineHeight?this._lineHeight:void 0,r.fill=(0,Z.UQ)(this._color),r.wordWrap=this._wrapping,r.wordWrapWidth=this._wrappingWidth<=1?1:this._wrappingWidth,r.breakWords=!0,r.align=this._textAlignment,r.stroke=(0,Z.UQ)(this._outlineColor),r.strokeThickness=this._isOutlineEnabled?this._outlineThickness:0,r.dropShadow=this._isShadowEnabled,r.dropShadowColor=(0,Z.UQ)(this._shadowColor),r.dropShadowAlpha=this._shadowOpacity/255,r.dropShadowBlur=this._shadowBlurRadius,r.dropShadowAngle=d.Z.toRad(this._shadowAngle),r.dropShadowDistance=this._shadowDistance;var i=r.dropShadow?r.dropShadowDistance+r.dropShadowBlur:0;r.padding=Math.ceil(i),this._pixiObject.dirty=!0,this._styleFontDirty=!1}if(this._instance.hasCustomSize()&&0!==this._pixiObject.width){var a="right"===this._textAlignment?1:"center"===this._textAlignment?.5:0,o=this.getCustomWidth(),s=(o-this._pixiObject.width)*(a-.5);this._pixiObject.position.x=this._instance.getX()+o/2,this._pixiObject.anchor.x=.5-s/this._pixiObject.width}else this._pixiObject.position.x=this._instance.getX()+this._pixiObject.width/2,this._pixiObject.anchor.x=.5;var l="bottom"===this._verticalTextAlignment?1:"center"===this._verticalTextAlignment?.5:0;this._pixiObject.position.y=this._instance.getY()+this._pixiObject.height*(.5-l),this._pixiObject.anchor.y=.5,this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle());var c=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=c}},{key:"getDefaultWidth",value:function(){return this._pixiObject.width}},{key:"getDefaultHeight",value:function(){return this._pixiObject.height}},{key:"getOriginY",value:function(){var e=this.getHeight();return"bottom"===this._verticalTextAlignment?e:"center"===this._verticalTextAlignment?e/2:0}}],[{key:"getThumbnail",value:function(e,t,n){return"CppPlatform/Extensions/texticon24.png"}}]),n}(d.Z);function T(e){return function(t){(0,c.Z)(r,t);var n=(0,u.Z)(r);function r(t,i,o,s,l){var c;return(0,a.Z)(this,r),(c=n.call(this,t,i,o,s,l))._pixiObject=new h.Sprite(h.Texture.from(e)),c._pixiContainer.addChild(c._pixiObject),c}return(0,o.Z)(r,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(r.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!1)}},{key:"update",value:function(){this._pixiObject.position.x=this._instance.getX(),this._pixiObject.position.y=this._instance.getY(),this._pixiObject.angle=this._instance.getAngle();var e=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=e}}],[{key:"getThumbnail",value:function(t,n,r){return e}}]),r}(d.Z)}var S=T("CppPlatform/Extensions/primitivedrawingicon.png"),P=T("CppPlatform/Extensions/textentry.png"),I=n.g.gd,E=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s){var l;return(0,a.Z)(this,n),(l=t.call(this,e,r,i,o,s))._pixiObject=new h.Graphics,l._pixiContainer.addChild(l._pixiObject),l.updateGraphics(),l}return(0,o.Z)(n,[{key:"update",value:function(){this._pixiObject.position.x=this._instance.getX(),this._pixiObject.position.y=this._instance.getY();var e=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=e,this.updateGraphics()}},{key:"updateGraphics",value:function(){var e=I.asParticleEmitterConfiguration(this._associatedObjectConfiguration);this._pixiObject.clear();var t=this._instance.getAngle()/180*3.14159,n=e.getConeSprayAngle(),r=t-n/2/180*3.14159,i=t+n/2/180*3.14159;this._pixiObject.beginFill(0,0),this._pixiObject.lineStyle(3,(0,Z.gO)(e.getParticleColor2()),1),this._pixiObject.moveTo(0,0),this._pixiObject.lineTo(64*Math.cos(r),64*Math.sin(r)),this._pixiObject.moveTo(0,0),this._pixiObject.lineTo(64*Math.cos(i),64*Math.sin(i)),this._pixiObject.endFill(),this._pixiObject.lineStyle(0,0,1),this._pixiObject.beginFill((0,Z.gO)(e.getParticleColor1())),this._pixiObject.drawCircle(0,0,8),this._pixiObject.endFill()}},{key:"getDefaultWidth",value:function(){return 128}},{key:"getDefaultHeight",value:function(){return 128}},{key:"getOriginX",value:function(){return 64}},{key:"getOriginY",value:function(){return 64}}],[{key:"getThumbnail",value:function(e,t,n){return"CppPlatform/Extensions/particleSystemicon.png"}}]),n}(d.Z),M=n(29439),L=n(82963),A=n(97326),O=n(77672),R=n.g.gd,F=function(e,t){return e.has(t)?R.CustomObjectConfiguration.getEdgeAnchorFromString(e.get(t).getValue()):R.CustomObjectConfiguration.NoAnchor},D=function(){return{leftEdgeAnchor:R.CustomObjectConfiguration.NoAnchor,topEdgeAnchor:R.CustomObjectConfiguration.NoAnchor,rightEdgeAnchor:R.CustomObjectConfiguration.NoAnchor,bottomEdgeAnchor:R.CustomObjectConfiguration.NoAnchor}},N=function(){function e(t){(0,a.Z)(this,e),this.x=0,this.y=0,this.z=0,this._hasCustomSize=!1,this._hasCustomDepth=!1,this._customWidth=0,this._customHeight=0,this._customDepth=0,this.instance=t,this.ptr=t.ptr,this._hasCustomSize=t.hasCustomSize(),this._hasCustomDepth=t.hasCustomDepth(),this._customWidth=t.getCustomWidth(),this._customHeight=t.getCustomHeight(),this._customDepth=t.getCustomWidth()}return(0,o.Z)(e,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getZ",value:function(){return this.z}},{key:"getAngle",value:function(){return 0}},{key:"getRotationX",value:function(){return 0}},{key:"getRotationY",value:function(){return 0}},{key:"getObjectName",value:function(){return this.instance.getObjectName()}},{key:"setX",value:function(e){}},{key:"setY",value:function(e){}},{key:"setZ",value:function(e){}},{key:"setAngle",value:function(e){}},{key:"setRotationX",value:function(e){}},{key:"setRotationY",value:function(e){}},{key:"isLocked",value:function(){return!1}},{key:"setLocked",value:function(e){}},{key:"isSealed",value:function(){return!1}},{key:"setSealed",value:function(e){}},{key:"getZOrder",value:function(){return 0}},{key:"setZOrder",value:function(e){}},{key:"getOpacity",value:function(){return this.instance.getOpacity()}},{key:"setOpacity",value:function(e){}},{key:"isFlippedX",value:function(){return this.instance.isFlippedX()}},{key:"setFlippedX",value:function(e){}},{key:"isFlippedY",value:function(){return this.instance.isFlippedY()}},{key:"setFlippedY",value:function(e){}},{key:"isFlippedZ",value:function(){return this.instance.isFlippedZ()}},{key:"setFlippedZ",value:function(e){}},{key:"getLayer",value:function(){return""}},{key:"setLayer",value:function(e){}},{key:"setHasCustomSize",value:function(e){this._hasCustomSize=e}},{key:"hasCustomSize",value:function(){return this._hasCustomSize}},{key:"hasCustomDepth",value:function(){return this._hasCustomDepth}},{key:"setCustomWidth",value:function(e){this._customWidth=e,this._hasCustomSize=!0}},{key:"getCustomWidth",value:function(){return this._customWidth}},{key:"setCustomHeight",value:function(e){this._customHeight=e,this._hasCustomSize=!0}},{key:"getCustomHeight",value:function(){return this._customHeight}},{key:"setCustomDepth",value:function(e){this._customDepth=e,this._hasCustomDepth=!0}},{key:"getCustomDepth",value:function(){return this._customDepth}},{key:"resetPersistentUuid",value:function(){return this}},{key:"updateCustomProperty",value:function(e,t,n,r){}},{key:"getCustomProperties",value:function(e,t){return null}},{key:"getRawDoubleProperty",value:function(e){return 0}},{key:"getRawStringProperty",value:function(e){return""}},{key:"setRawDoubleProperty",value:function(e,t){}},{key:"setRawStringProperty",value:function(e,t){}},{key:"getVariables",value:function(){return[]}},{key:"serializeTo",value:function(e){}},{key:"unserializeFrom",value:function(e){}}]),e}(),_=function(e,t){var n=e.getVariant();if(!n)return null;var r=e.getLayoutedInstance(t),i=e.getRendererOfInstance(r),a=function(e,t){var n=e.getObjects();if(!n.hasObjectNamed(t))return D();var r=n.getObject(t);if(!r.hasBehaviorNamed("Anchor"))return D();var i=r.getBehavior("Anchor").getProperties();return{leftEdgeAnchor:F(i,"leftEdgeAnchor"),topEdgeAnchor:F(i,"topEdgeAnchor"),rightEdgeAnchor:F(i,"rightEdgeAnchor"),bottomEdgeAnchor:F(i,"bottomEdgeAnchor")}}(n,r.getObjectName()),o=a?a.leftEdgeAnchor:R.CustomObjectConfiguration.NoAnchor,s=a?a.topEdgeAnchor:R.CustomObjectConfiguration.NoAnchor,l=a?a.rightEdgeAnchor:R.CustomObjectConfiguration.NoAnchor,c=a?a.bottomEdgeAnchor:R.CustomObjectConfiguration.NoAnchor,u=n.getAreaMinX(),d=n.getAreaMinY(),p=n.getAreaMaxX(),f=n.getAreaMaxY(),h=p-u,g=f-d,m=e.getWidth(),x=e.getHeight(),v=m/h,b=x/g;if((1===v||!o&&!l)&&(1===b||!s&&!c))return r.x=t.getX(),r.y=t.getY(),t.hasCustomSize()?(r.setCustomWidth(t.getCustomWidth()),r.setCustomHeight(t.getCustomHeight())):r.setHasCustomSize(!1),i;var C=t.getX(),j=t.hasCustomSize()?t.getCustomWidth():i.getDefaultWidth();if(1===v||!o&&!l)r.x=C,r.setCustomWidth(j);else{var y=(p+u)/2,Z=u*v,k=p*v,w=(k+Z)/2,T=C-i.getOriginX()*j/Math.max(1,i.getWidth()),S=T+j,P=T;o===R.CustomObjectConfiguration.MinEdge?P=Z+T-u:o===R.CustomObjectConfiguration.MaxEdge?P=k+T-p:o===R.CustomObjectConfiguration.Proportional?P=Z+(T-u)/h*m:o===R.CustomObjectConfiguration.Center&&(P=w+T-y);var I=S;l===R.CustomObjectConfiguration.MinEdge?I=Z+S-u:l===R.CustomObjectConfiguration.MaxEdge?I=k+S-p:l===R.CustomObjectConfiguration.Proportional?I=Z+(S-u)/h*m:l===R.CustomObjectConfiguration.Center&&(I=w+S-y);var E=l===R.CustomObjectConfiguration.NoAnchor||o===R.CustomObjectConfiguration.NoAnchor?j:I-P;r.setCustomWidth(E);var M=i.getOriginX(),L=l===R.CustomObjectConfiguration.NoAnchor?P+M:o===R.CustomObjectConfiguration.NoAnchor?I-E+M:P+M;r.x=L}var A=t.getY(),O=t.hasCustomSize()?t.getCustomHeight():i.getDefaultHeight();if(1===b||!s&&!c)r.y=A,r.setCustomHeight(O);else{var N=(f+d)/2,_=d*b,B=f*b,U=(B+_)/2,V=A-i.getOriginY()*O/Math.max(1,i.getHeight()),H=V+O,z=H;c===R.CustomObjectConfiguration.MinEdge?z=_+H-d:c===R.CustomObjectConfiguration.MaxEdge?z=B+H-f:c===R.CustomObjectConfiguration.Proportional?z=_+(H-d)/g*x:c===R.CustomObjectConfiguration.Center&&(z=U+H-N);var W=V;s===R.CustomObjectConfiguration.MinEdge?W=_+V-d:s===R.CustomObjectConfiguration.MaxEdge?W=B+V-f:s===R.CustomObjectConfiguration.Proportional?W=_+(V-d)/g*x:s===R.CustomObjectConfiguration.Center&&(W=U+V-N);var G=c===R.CustomObjectConfiguration.NoAnchor||s===R.CustomObjectConfiguration.NoAnchor?O:z-W;r.setCustomHeight(G);var Y=i.getOriginY(),q=c===R.CustomObjectConfiguration.NoAnchor?W+Y:s===R.CustomObjectConfiguration.NoAnchor?z-G+Y:W+Y;r.y=q}return i},B=n(18455),U=n(46564),V=n.g.gd,H=function(e,t){var n=t.getType();return e.hasEventsBasedObject(n)?e.getEventsBasedObject(n):null},z=function(e,t){var n=e.getVariants(),r=t.getVariantName();return n.hasVariantNamed(r)?n.getVariant(r):e.getDefaultVariant()},W=function(e,t,n,r){if(n.isForcedToOverrideEventsBasedObjectChildrenConfiguration()||r===t.getDefaultVariant()&&n.isMarkedAsOverridingEventsBasedObjectChildrenConfiguration())return n.getChildObjectConfiguration(e);var i=r.getObjects();return i.hasObjectNamed(e)?i.getObject(e).getConfiguration():null},G=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s,l){var c,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if((0,a.Z)(this,n),(c=t.call(this,e,r,i,o,s,l,u))._isRenderedIn3D=!1,c.layoutedInstances=new Map,c.renderedInstances=new Map,c._getChildObjectConfiguration=function(e){var t=V.asCustomObjectConfiguration(c._associatedObjectConfiguration),n=H(c._project,t);if(!n)return null;var r=z(n,t);return r?W(e,n,t,r):null},c.getRendererOfInstance=function(e){var t=c.renderedInstances.get(e.ptr);if(!t){var n=V.asCustomObjectConfiguration(c._associatedObjectConfiguration),r=c._getChildObjectConfiguration(e.getObjectName());t=r?be.createNewInstanceRenderer(c._project,e,r,c._pixiObject,c._threeObject,(function(){var t,r=new Map,i=c.getPropertyOverridings(),a=n.getProperties(),o=(0,C.Z)(c._propertyMappingRules);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.targetChild===e.getObjectName()){var l=i&&i.has(s.sourceProperty)?i.get(s.sourceProperty):a.get(s.sourceProperty).getValue();void 0!==l&&r.set(s.targetProperty,l)}}}catch(u){o.e(u)}finally{o.f()}return r})):new g(c._project,e,null,c._pixiObject,p.Z),c.renderedInstances.set(e.ptr,t)}return t},c.getLayoutedInstance=function(e){var t=c.layoutedInstances.get(e.ptr);return t||(t=new N(e),c.layoutedInstances.set(e.ptr,t)),t},c._pixiObject=new h.Container,c._pixiContainer.addChild(c._pixiObject),c._threeGroup){var d=new U.Group;d.rotation.order="ZYX",c._threeGroup.add(d),c._threeObject=d}var f=V.asCustomObjectConfiguration(i),m=H(e,f);return m?(c._propertyMappingRules=function(e){var t=e.getPropertyDescriptors();return t.has("_PropertyMapping")?(0,B.mapVector)(t.get("_PropertyMapping").getChoices(),(function(e){var t=e.getValue().split("=");if(t.length<2)return null;var n=t[0].split(".");return t.length<2?null:{targetChild:n[0],targetProperty:n[1],sourceProperty:t[1]}})).filter(Boolean):[]}(m),c._isRenderedIn3D=m.isRenderedIn3D(),c.instancesRenderer=new V.InitialInstanceJSFunctor,c.instancesRenderer.invoke=function(e){var t=V.wrapPointer(e,V.InitialInstance),n=m.isInnerAreaFollowingParentSize()?_((0,A.Z)(c),t):c.getRendererOfInstance(t);if(n){var r=n.getPixiObject();r&&(n.isRenderedIn3D()?r.zOrder=t.getZ()+n.getDepth():r.zOrder=t.getZOrder());try{var i=!0;if(r&&(r.visible=i,r.eventMode="auto"),n.update(),n instanceof O.Z){var a=n.getThreeObject();a&&(a.visible=i)}}catch(o){if(o instanceof TypeError)return void console.error("An error occurred when rendering instance for object ".concat(t.getObjectName(),":"),o);throw o}finally{n.wasUsed=!0}}},c):(0,L.Z)(c)}return(0,o.Z)(n,[{key:"_destroyUnusedInstanceRenderers",value:function(){var e,t=(0,C.Z)(this.renderedInstances);try{for(t.s();!(e=t.n()).done;){var n=(0,M.Z)(e.value,2),r=n[0],i=n[1];i.wasUsed||(i.onRemovedFromScene(),i._wasDestroyed||console.error("Rendered instance was not marked as destroyed by onRemovedFromScene - verify the implementation.",i),this.renderedInstances.delete(r),this.layoutedInstances.delete(r)),i.wasUsed=!1}}catch(a){t.e(a)}finally{t.f()}}},{key:"isRenderedIn3D",value:function(){return this._isRenderedIn3D}},{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this);var e,t=(0,C.Z)(this.renderedInstances.values());try{for(t.s();!(e=t.n()).done;){var r=e.value;r.onRemovedFromScene(),r._wasDestroyed||console.error("Rendered instance (of a custom object) was not marked as destroyed by onRemovedFromScene - verify the implementation.",r)}}catch(i){t.e(i)}finally{t.f()}this.renderedInstances.clear(),this.layoutedInstances.clear(),this.instancesRenderer&&this.instancesRenderer.delete(),this._pixiObject.destroy(!1)}},{key:"_updatePixiObjectsZOrder",value:function(){this._pixiContainer.children.sort((function(e,t){return e.zOrder=e.zOrder||0,t.zOrder=t.zOrder||0,e.zOrder-t.zOrder}))}},{key:"getVariant",value:function(){var e=V.asCustomObjectConfiguration(this._associatedObjectConfiguration),t=H(this._project,e);return t?z(t,e):null}},{key:"update",value:function(){var e=V.asCustomObjectConfiguration(this._associatedObjectConfiguration),t=H(this._project,e);if(t){var n=z(t,e);if(n){for(var r=n.getLayers(),i=0;i<r.getLayersCount();i++){var a=r.getLayerAt(i);a.getVisibility()&&n.getInitialInstances().iterateOverInstancesWithZOrdering(this.instancesRenderer,a.getName())}this._updatePixiObjectsZOrder(),this._destroyUnusedInstanceRenderers();var o=this.isRenderedIn3D();if(t.isInnerAreaFollowingParentSize()){var s=this.getOriginX(),l=this.getOriginY(),c=this.getOriginZ(),u=this.getCenterX(),p=this.getCenterY(),f=this.getCenterZ(),h=this._threeObject;h&&o&&(h.rotation.set(d.Z.toRad(this._instance.getRotationX()),d.Z.toRad(this._instance.getRotationY()),d.Z.toRad(this._instance.getAngle())),h.position.set(-u,-p,-f),h.position.applyEuler(h.rotation),h.position.x+=this._instance.getX()+u-s,h.position.y+=this._instance.getY()+p-l,h.position.z+=this._instance.getZ()+f-c),this._pixiObject.pivot.x=u,this._pixiObject.pivot.y=p,this._pixiObject.position.x=this._instance.getX()+u-s,this._pixiObject.position.y=this._instance.getY()+p-l,this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle()),this._pixiObject.scale.x=1,this._pixiObject.scale.y=1}else{var g=this.getWidth()/this.getDefaultWidth(),m=this.getHeight()/this.getDefaultHeight(),x=this.getDepth()/this.getDefaultDepth(),v=this._threeObject;if(v&&o){var b=this.getCenterX()-this.getOriginX(),C=this.getCenterY()-this.getOriginY(),j=this.getCenterZ()-this.getOriginZ();v.rotation.set(d.Z.toRad(this._instance.getRotationX()),d.Z.toRad(this._instance.getRotationY()),d.Z.toRad(this._instance.getAngle())),v.position.set(-b,-C,-j),v.position.applyEuler(v.rotation),v.position.x+=this._instance.getX()+b,v.position.y+=this._instance.getY()+C,v.position.z+=this._instance.getZ()+j,v.scale.set(g,m,x)}var y=this.getDefaultWidth()/2+n.getAreaMinX(),Z=this.getDefaultHeight()/2+n.getAreaMinY();this._pixiObject.pivot.x=y,this._pixiObject.pivot.y=Z,this._pixiObject.position.x=this._instance.getX()+y*Math.abs(g),this._pixiObject.position.y=this._instance.getY()+Z*Math.abs(m),this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle()),this._pixiObject.scale.x=g,this._pixiObject.scale.y=m}if(!o){var k=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=k,this._pixiObject.scale.x=Math.abs(this._pixiObject.scale.x)*(this._instance.isFlippedX()?-1:1),this._pixiObject.scale.y=Math.abs(this._pixiObject.scale.y)*(this._instance.isFlippedY()?-1:1)}}}}},{key:"getDefaultWidth",value:function(){var e=this.getVariant();return e?e.getAreaMaxX()-e.getAreaMinX():48}},{key:"getDefaultHeight",value:function(){var e=this.getVariant();return e?e.getAreaMaxY()-e.getAreaMinY():48}},{key:"getDefaultDepth",value:function(){var e=this.getVariant();return e?e.getAreaMaxZ()-e.getAreaMinZ():48}},{key:"getOriginX",value:function(){var e=this.getVariant();return e?-e.getAreaMinX()/this.getDefaultWidth()*this.getWidth():0}},{key:"getOriginY",value:function(){var e=this.getVariant();return e?-e.getAreaMinY()/this.getDefaultHeight()*this.getHeight():0}},{key:"getOriginZ",value:function(){var e=this.getVariant();return e?-e.getAreaMinZ()/this.getDefaultDepth()*this.getDepth():0}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getCenterZ",value:function(){return this.getDepth()/2}}],[{key:"getThumbnail",value:function(e,t,n){var r=V.asCustomObjectConfiguration(n),i=H(e,r);if(!i)return"res/unknown32.png";if(i.isAnimatable()){var a=r.getAnimations();if(a.getAnimationsCount()>0&&a.getAnimation(0).getDirectionsCount()>0&&a.getAnimation(0).getDirection(0).getSpritesCount()>0){var o=a.getAnimation(0).getDirection(0).getSprite(0).getImageName();return t.getResourceFullUrl(e,o,{})}return"res/unknown32.png"}for(var s=z(i,r),l=s.getObjects(),c=0;c<l.getObjectsCount();c++){var u=l.getObjectAt(c),d=W(u.getName(),i,r,s);if(d){var p=d.getType();if("Sprite"===p||"TiledSpriteObject::TiledSprite"===p||"PanelSpriteObject::PanelSprite"===p||"Scene3D::Cube3DObject"===p){var f=be.getThumbnail(e,d);if(f)return f}}}return"res/unknown32.png"}}]),n}(O.Z),Y=["Show","LeftPadding","TopPadding","RightPadding","BottomPadding","HorizontalAnchorOrigin","HorizontalAnchorTarget","VerticalAnchorOrigin","VerticalAnchorTarget","AnchorOrigin","AnchorTarget","AnchorDeltaX","AnchorDeltaY","IsScaledProportionallyOnX","IsScaledProportionallyOnY","IsScaledProportionallyOnZ","IsScaledProportionally"],q=function(e){var t=(e.includes("-")?e.split("-")[1]:e).toLowerCase();return"left"===t?0:"right"===t?1:"center"===t?.5:null},J=function(e){var t=(e.includes("-")?e.split("-")[0]:e).toLowerCase();return"top"===t?0:"bottom"===t?1:"center"===t?.5:null},X=function(e){var t=(e.includes("-")?e.split("-")[2]||"":e).toLowerCase();return"Zmin"===t?0:"Zmax"===t?1:"center"===t?.5:null},K=function(e,t){var n=q(e);return null!==n?n:t&&t.has(e)?q(t.get(e).getValue()):null},Q=function(e,t){var n=J(e);return null!==n?n:t&&t.has(e)?J(t.get(e).getValue()):null},$=function(e,t,n){var r=(e.includes("-")?e.split("-")[1]:e).toLowerCase();return"same"===r?n:"opposite"===r&&null!==n?1-n:K(r,t)},ee=function(e,t,n){var r=(e.includes("-")?e.split("-")[0]:e).toLowerCase();return"same"===r?n:"opposite"===r&&null!==n?1-n:Q(r,t)},te=function(){function e(){(0,a.Z)(this,e),this.x=0,this.y=0,this.z=0,this._customWidth=0,this._customHeight=0,this._customDepth=0,this._hasCustomSize=!1,this._hasCustomDepth=!1}return(0,o.Z)(e,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getZ",value:function(){return this.z}},{key:"getAngle",value:function(){return 0}},{key:"getRotationX",value:function(){return 0}},{key:"getRotationY",value:function(){return 0}},{key:"setObjectName",value:function(e){}},{key:"getObjectName",value:function(){return""}},{key:"setX",value:function(e){}},{key:"setY",value:function(e){}},{key:"setZ",value:function(e){}},{key:"setAngle",value:function(e){}},{key:"setRotationX",value:function(e){}},{key:"setRotationY",value:function(e){}},{key:"isLocked",value:function(){return!1}},{key:"setLocked",value:function(e){}},{key:"isSealed",value:function(){return!1}},{key:"setSealed",value:function(e){}},{key:"getZOrder",value:function(){return 0}},{key:"setZOrder",value:function(e){}},{key:"getOpacity",value:function(){return 255}},{key:"setOpacity",value:function(e){}},{key:"isFlippedX",value:function(){return!1}},{key:"setFlippedX",value:function(e){}},{key:"isFlippedY",value:function(){return!1}},{key:"setFlippedY",value:function(e){}},{key:"isFlippedZ",value:function(){return!1}},{key:"setFlippedZ",value:function(e){}},{key:"getLayer",value:function(){return""}},{key:"setLayer",value:function(e){}},{key:"setHasCustomSize",value:function(e){this._hasCustomSize=e}},{key:"hasCustomSize",value:function(){return this._hasCustomSize}},{key:"hasCustomDepth",value:function(){return this._hasCustomDepth}},{key:"setCustomWidth",value:function(e){this._customWidth=e,this._hasCustomSize=!0}},{key:"getCustomWidth",value:function(){return this._customWidth}},{key:"setCustomHeight",value:function(e){this._customHeight=e,this._hasCustomSize=!0}},{key:"getCustomHeight",value:function(){return this._customHeight}},{key:"setCustomDepth",value:function(e){this._customDepth=e,this._hasCustomDepth=!0}},{key:"getCustomDepth",value:function(){return this._customDepth}},{key:"resetPersistentUuid",value:function(){return this}},{key:"updateCustomProperty",value:function(e,t,n,r){}},{key:"getCustomProperties",value:function(e,t){return null}},{key:"getRawDoubleProperty",value:function(e){return 0}},{key:"getRawStringProperty",value:function(e){return""}},{key:"setRawDoubleProperty",value:function(e,t){}},{key:"setRawStringProperty",value:function(e,t){}},{key:"getVariables",value:function(){return[]}},{key:"serializeTo",value:function(e){}},{key:"unserializeFrom",value:function(e){}}]),e}(),ne=n.g.gd,re=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s,l){var c;if((0,a.Z)(this,n),(c=t.call(this,e,r,i,o,s,l))._isRenderedIn3D=!1,c._pixiObject=new h.Container,c._pixiContainer.addChild(c._pixiObject),c._threeGroup){var u=new U.Group;u.rotation.order="ZYX",c._threeGroup.add(u),c._threeObject=u}var d=ne.asCustomObjectConfiguration(i),f=d.getProperties(),g=f.has("ParentOrigin")&&f.get("ParentOrigin").getValue(),m=f.has("ParentOriginX")&&f.get("ParentOriginX").getValue(),x=f.has("ParentOriginY")&&f.get("ParentOriginY").getValue(),v=f.has("ParentOriginZ")&&f.get("ParentOriginZ").getValue();c._proportionalOriginX=g&&q(g)||m&&q(m)||null,c._proportionalOriginY=g&&J(g)||x&&J(x)||null,c._proportionalOriginZ=g&&X(g)||v&&X(v)||null;var b=e.hasEventsBasedObject(d.getType())?e.getEventsBasedObject(d.getType()):null;if(c.childrenInstances=[],c.childrenLayouts=[],c.childrenRenderedInstances=[],c.childrenRenderedInstanceByNames=new Map,!b)return(0,L.Z)(c);c._isRenderedIn3D=b.isRenderedIn3D();var C=function(e,t){for(var n=new Map,r=e.getPropertyDescriptors(),i=t.getProperties(),a=function(){var e=r.getAt(o),t=e.getExtraInfo();if(!t)return 1;var a=e.getName(),s=i.get(a).getValue(),l="true"===s,c=Number.parseFloat(s)||0,u=Y.find((function(e){return a.includes(e)})),d="",p=null,f=null;if("HorizontalAnchorOrigin"===u||"VerticalAnchorOrigin"===u||"AnchorOrigin"===u){var h=a.replace("AnchorOrigin","AnchorTarget");if(r.has(h)){var g=r.get(h);d=g.getExtraInfo().size()>0?g.getExtraInfo().at(0):"";var m=i.get(h).getValue(),x=Number.parseFloat(m)||0;"HorizontalAnchorOrigin"!==u&&"AnchorOrigin"!==u||(p=K(m,i)||x),"VerticalAnchorOrigin"!==u&&"AnchorOrigin"!==u||(f=Q(m,i)||x)}}for(var v=0;v<t.size();v++){var b=t.at(v),C=n.get(b);if(C||(C={isShown:!0,horizontalLayout:{},verticalLayout:{},depthLayout:{}},n.set(b,C)),"Show"===u)"true"!==s&&(C.isShown=!1);else if("LeftPadding"===u)C.horizontalLayout.minSideAbsoluteMargin=c;else if("RightPadding"===u)C.horizontalLayout.maxSideAbsoluteMargin=c;else if("TopPadding"===u)C.verticalLayout.minSideAbsoluteMargin=c;else if("BottomPadding"===u)C.verticalLayout.maxSideAbsoluteMargin=c;else if("AnchorDeltaX"===u)C.horizontalLayout.anchorDelta=c;else if("AnchorDeltaY"===u)C.verticalLayout.anchorDelta=c;else if("IsScaledProportionallyOnX"===u)C.horizontalLayout.isScaledProportionally=l;else if("IsScaledProportionallyOnY"===u)C.verticalLayout.isScaledProportionally=l;else if("IsScaledProportionallyOnZ"===u)C.depthLayout.isScaledProportionally=l;else if("IsScaledProportionally"===u)C.horizontalLayout.isScaledProportionally=l,C.verticalLayout.isScaledProportionally=l,C.depthLayout.isScaledProportionally=l;else{if("HorizontalAnchorOrigin"===u||"AnchorOrigin"===u){var j=$(s,i,p)||c;null!==j&&(C.horizontalLayout.anchorOrigin=j),null!==p&&(C.horizontalLayout.anchorTarget=p),C.horizontalLayout.anchorTargetObject=d}if("VerticalAnchorOrigin"===u||"AnchorOrigin"===u){var y=ee(s,i,p)||c;null!==y&&(C.verticalLayout.anchorOrigin=y),null!==f&&(C.verticalLayout.anchorTarget=f),C.verticalLayout.anchorTargetObject=d}}}},o=0;o<r.getCount();o++)a();return n}(b,d),j=b.getObjects();return(0,B.mapReverseFor)(0,j.getObjectsCount(),(function(t){var n=j.getObjectAt(t),r=C.get(n.getName())||{isShown:!0,horizontalLayout:{},verticalLayout:{},depthLayout:{}},i=d.getChildObjectConfiguration(n.getName()),a=new te,o=be.createNewInstanceRenderer(e,a,i,c._pixiObject,c._threeObject);r.isShown||(c._pixiObject.removeChild(o._pixiObject),c._threeObject&&o instanceof O.Z&&c._threeObject.remove(o._threeObject)),o instanceof w&&(o._pixiObject.style.align="center"),c.childrenInstances.push(a),c.childrenLayouts.push(r),c.childrenRenderedInstances.push(o),c.childrenRenderedInstanceByNames.set(n.getName(),o)})),0===c.childrenRenderedInstances.length&&(c._pixiObject=new h.Sprite(p.Z.getInvalidPIXITexture()),c._pixiContainer.addChild(c._pixiObject)),c}return(0,o.Z)(n,[{key:"isRenderedIn3D",value:function(){return this._isRenderedIn3D}},{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this);var e,t=(0,C.Z)(this.childrenRenderedInstances);try{for(t.s();!(e=t.n()).done;){e.value.onRemovedFromScene()}}catch(r){t.e(r)}finally{t.f()}this._pixiObject.destroy(!1)}},{key:"_updatePixiObjectsZOrder",value:function(){this._pixiContainer.children.sort((function(e,t){return e.zOrder=e.zOrder||0,t.zOrder=t.zOrder||0,e.zOrder-t.zOrder}))}},{key:"update",value:function(){!function(e){for(var t=e.getWidth(),n=e.getHeight(),r=0;r<e.childrenRenderedInstances.length;r++){var i=e.childrenRenderedInstances[r],a=e.childrenInstances[r],o=e.childrenLayouts[r],s=i.getOriginX(),l=i.getOriginY();if(null==o.horizontalLayout.anchorOrigin){var c=o.horizontalLayout.minSideAbsoluteMargin||(o.horizontalLayout.minSideProportionalMargin||0)*t,u=t-(o.horizontalLayout.maxSideAbsoluteMargin||(o.horizontalLayout.maxSideProportionalMargin||0)*t);a.x=c+s,a.setCustomWidth(u-c)}else{var d=o.horizontalLayout.anchorOrigin||0,p=o.horizontalLayout.anchorTarget||0,f=e.childrenRenderedInstanceByNames.get(o.horizontalLayout.anchorTargetObject||"")||e.childrenRenderedInstances[0],h=f._instance,g=h.hasCustomSize()?h.getCustomWidth():f.getDefaultWidth(),m=o.horizontalLayout.isScaledProportionally?g*i.getDefaultWidth()/f.getDefaultWidth():i.getDefaultWidth();a.x=h.getX()-f.getOriginX()+(o.horizontalLayout.anchorDelta||0)+p*g-d*m+s,a.setCustomWidth(m)}if(null==o.verticalLayout.anchorOrigin){var x=o.verticalLayout.minSideAbsoluteMargin||(o.verticalLayout.minSideProportionalMargin||0)*n,v=n-(o.verticalLayout.maxSideAbsoluteMargin||(o.verticalLayout.maxSideProportionalMargin||0)*n);a.y=x+l;var b=v-x;a.setCustomHeight(v-x),i.update(),a.y+=(b-i._pixiObject.height)/2}else{var C=o.verticalLayout.anchorOrigin||0,j=o.verticalLayout.anchorTarget||0,y=e.childrenRenderedInstanceByNames.get(o.horizontalLayout.anchorTargetObject||"")||e.childrenRenderedInstances[0],Z=y._instance,k=Z.hasCustomSize()?Z.getCustomHeight():y.getDefaultHeight(),w=o.horizontalLayout.isScaledProportionally?k*i.getDefaultHeight()/y.getDefaultHeight():i.getDefaultHeight();a.y=Z.getY()-y.getOriginY()+(o.verticalLayout.anchorDelta||0)+j*k-C*w+l,a.setCustomHeight(w)}a.z=0,a.setCustomDepth(e.getDepth()),i.update()}}(this);var e=this.childrenRenderedInstances[0],t=!!e&&e instanceof O.Z,n=this.getOriginX(),r=this.getOriginY(),i=this.getOriginZ(),a=this.getCenterX(),o=this.getCenterY(),s=this.getCenterZ(),l=this._threeObject;if(l&&t&&(l.rotation.set(d.Z.toRad(this._instance.getRotationX()),d.Z.toRad(this._instance.getRotationY()),d.Z.toRad(this._instance.getAngle())),l.position.set(-a,-o,-s),l.position.applyEuler(l.rotation),l.position.x+=this._instance.getX()+a-n,l.position.y+=this._instance.getY()+o-r,l.position.z+=this._instance.getZ()+s-i),this._pixiObject.pivot.x=a,this._pixiObject.pivot.y=o,this._pixiObject.position.x=this._instance.getX()+a-n,this._pixiObject.position.y=this._instance.getY()+o-r,this._pixiObject.rotation=d.Z.toRad(this._instance.getAngle()),this._pixiObject.scale.x=1,this._pixiObject.scale.y=1,!t){var c=Math.max(this._instance.getOpacity()/255,.5);this._pixiObject.alpha=c,this._pixiObject.scale.x=Math.abs(this._pixiObject.scale.x)*(this._instance.isFlippedX()?-1:1),this._pixiObject.scale.y=Math.abs(this._pixiObject.scale.y)*(this._instance.isFlippedY()?-1:1)}}},{key:"getDefaultWidth",value:function(){return this.childrenRenderedInstances.length>0?this.childrenRenderedInstances[0].getDefaultWidth():48}},{key:"getDefaultHeight",value:function(){return this.childrenRenderedInstances.length>0?this.childrenRenderedInstances[0].getDefaultHeight():48}},{key:"getDefaultDepth",value:function(){var e=this.childrenRenderedInstances[0];return e&&e instanceof O.Z?e.getDefaultDepth():48}},{key:"getOriginX",value:function(){return null===this._proportionalOriginX?0===this.childrenRenderedInstances.length?0:this.childrenRenderedInstances[0].getOriginX()/this.childrenRenderedInstances[0].getWidth()*this.getWidth():this._proportionalOriginX*this.getWidth()}},{key:"getOriginY",value:function(){return null===this._proportionalOriginY?0===this.childrenRenderedInstances.length?0:this.childrenRenderedInstances[0].getOriginY()/this.childrenRenderedInstances[0].getHeight()*this.getHeight():this._proportionalOriginY*this.getHeight()}},{key:"getOriginZ",value:function(){return null===this._proportionalOriginZ?0===this.childrenRenderedInstances.length?0:this.childrenRenderedInstances[0].getOriginZ()/this.childrenRenderedInstances[0].getDepth()*this.getDepth():this._proportionalOriginZ*this.getDepth()}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getCenterZ",value:function(){return this.getDepth()/2}}],[{key:"getThumbnail",value:function(e,t,n){var r=ne.asCustomObjectConfiguration(n),i=e.hasEventsBasedObject(r.getType())?e.getEventsBasedObject(r.getType()):null;if(!i)return"res/unknown32.png";if(i.isAnimatable()){var a=r.getAnimations();if(a.getAnimationsCount()>0&&a.getAnimation(0).getDirectionsCount()>0&&a.getAnimation(0).getDirection(0).getSpritesCount()>0){var o=a.getAnimation(0).getDirection(0).getSprite(0).getImageName();return t.getResourceFullUrl(e,o,{})}return"res/unknown32.png"}for(var s=i.getObjects(),l=0;l<s.getObjectsCount();l++){var c=s.getObjectAt(l),u=r.getChildObjectConfiguration(c.getName()),d=u.getType();if("Sprite"===d||"TiledSpriteObject::TiledSprite"===d||"PanelSpriteObject::PanelSprite"===d||"Scene3D::Cube3DObject"===d){var p=be.getThumbnail(e,u);if(p)return p}}return"res/unknown32.png"}}]),n}(O.Z),ie=n(74165),ae=n(15861),oe=n.g.gd,se=null,le=[],ce=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o,s,l){var c;(0,a.Z)(this,n),(c=t.call(this,e,r,i,o,s,l))._sprite=null,c._shouldNotRotate=!1,c._textureWidth=32,c._textureHeight=32,c._renderedAnimation=0,c._renderedDirection=0,c._centerX=0,c._centerY=0,c._originX=0,c._originY=0,c._pixiObject=new h.Graphics,c._pixiContainer.addChild(c._pixiObject),c.updateSprite();var u=new U.PlaneGeometry(1,-1);le.length=3*u.attributes.position.count,le.fill(1),u.setAttribute("color",new U.BufferAttribute(new Float32Array(le),3));var d=new U.Mesh(u,(se||(se=new U.MeshBasicMaterial({transparent:!0,opacity:0,alphaTest:1})),se));return d.rotation.order="ZYX",c._threeGroup.add(d),c._threeObject=d,c.updateTextureAndSprite(),c}return(0,o.Z)(n,[{key:"onRemovedFromScene",value:function(){(0,s.Z)((0,l.Z)(n.prototype),"onRemovedFromScene",this).call(this),this._pixiObject.destroy(!1)}},{key:"updateThreeObject",value:function(){var e=this._threeObject;if(e){var t=this.getWidth(),n=this.getHeight(),r=this._centerX-this._textureWidth/2,i=this._centerY-this._textureHeight/2,a=this._originX-this._textureWidth/2,o=this._originY-this._textureHeight/2;e.rotation.set(O.Z.toRad(this._instance.getRotationX()),O.Z.toRad(this._instance.getRotationY()),O.Z.toRad(this._instance.getAngle())),e.position.set(-r,-i,0),e.position.applyEuler(e.rotation),e.position.x+=r-a,e.position.y+=i-o,e.position.x*=t/this._textureWidth,e.position.y*=n/this._textureHeight,e.position.x+=this._instance.getX(),e.position.y+=this._instance.getY(),e.position.z+=this._instance.getZ();var s=t*(this._instance.isFlippedX()?-1:1),l=n*(this._instance.isFlippedY()?-1:1),c=1*(this._instance.isFlippedZ()?-1:1);e.scale.set(s,l,c)}}},{key:"updateSprite",value:function(){this._sprite=null,this._shouldNotRotate=!1;var e=oe.asCustomObjectConfiguration(this._associatedObjectConfiguration).getAnimations();if(e.hasNoAnimations())return!1;this._renderedAnimation=this._instance.getRawDoubleProperty("animation"),this._renderedAnimation>=e.getAnimationsCount()&&(this._renderedAnimation=0);var t=e.getAnimation(this._renderedAnimation);if(t.hasNoDirections())return!1;if(this._renderedDirection=0,t.useMultipleDirections()){var n=Math.floor(this._instance.getAngle())%360;n<0&&(n+=360),this._renderedDirection=Math.round(n/45)%8}this._renderedDirection>=t.getDirectionsCount()&&(this._renderedDirection=0);var r=t.getDirection(this._renderedDirection);return 0!==r.getSpritesCount()&&(this._shouldNotRotate=t.useMultipleDirections(),this._sprite=r.getSprite(0),!0)}},{key:"updateTextureAndSprite",value:function(){var e=(0,ae.Z)((0,ie.Z)().mark((function e(){var t,n,r,i,a,o=this;return(0,ie.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.updateSprite(),t=this._sprite,n=t?t.getImageName():"",r=this._pixiResourcesLoader.getPIXITexture(this._project,n),this._pixiObject.texture=r,r.baseTexture.valid){e.next=8;break}return r.once("update",(function(){o._wasDestroyed||o.updateTextureAndSprite()})),e.abrupt("return");case 8:return this._textureWidth=r.width,this._textureHeight=r.height,e.next=12,this._pixiResourcesLoader.getThreeMaterial(this._project,n,{useTransparentTexture:!0});case 12:if(i=e.sent,!this._wasDestroyed){e.next=15;break}return e.abrupt("return");case 15:this._threeObject&&(this._threeObject.material=i),this._originX=t?t.getOrigin().getX():0,this._originY=t?t.getOrigin().getY():0,!t||t.isDefaultCenterPoint()?(this._centerX=this._textureWidth/2,this._centerY=this._textureHeight/2):t&&(a=t.getCenter(),this._centerX=a.getX(),this._centerY=a.getY()),this.updateThreeObject();case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=this._instance.getRawDoubleProperty("animation");this._renderedAnimation!==e?this.updateTextureAndSprite():this.updateThreeObject(),this.updatePixiObject()}},{key:"updatePixiObject",value:function(){var e=this.getDefaultWidth(),t=this.getDefaultHeight(),n=-this._originX,r=-this._originY,i=n+e,a=r+t;this._pixiObject.clear(),this._pixiObject.beginFill(10066329,.2),this._pixiObject.lineStyle(1,16767232,0),this._pixiObject.moveTo(n,r),this._pixiObject.lineTo(i,r),this._pixiObject.lineTo(i,a),this._pixiObject.lineTo(n,a),this._pixiObject.endFill(),this._pixiObject.pivot.x=this._centerX-this._originX,this._pixiObject.pivot.y=this._centerY-this._originY,this._pixiObject.rotation=this._shouldNotRotate?0:O.Z.toRad(this._instance.getAngle()),this._instance.hasCustomSize()?(this._pixiObject.scale.x=this.getCustomWidth()/e,this._pixiObject.scale.y=this.getCustomHeight()/t):(this._pixiObject.scale.x=1,this._pixiObject.scale.y=1),this._pixiObject.position.x=this._instance.getX()+(this._centerX-this._originX)*Math.abs(this._pixiObject.scale.x),this._pixiObject.position.y=this._instance.getY()+(this._centerY-this._originY)*Math.abs(this._pixiObject.scale.y)}},{key:"getOriginX",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getX()*this._pixiObject.scale.x:0}},{key:"getOriginY",value:function(){return this._sprite&&this._pixiObject?this._sprite.getOrigin().getY()*this._pixiObject.scale.y:0}},{key:"getDefaultWidth",value:function(){return this._textureWidth}},{key:"getDefaultHeight",value:function(){return this._textureHeight}},{key:"getDefaultDepth",value:function(){return 0}},{key:"getCenterX",value:function(){return this._sprite&&this._pixiObject?this._centerX*this._pixiObject.scale.x:0}},{key:"getCenterY",value:function(){return this._sprite&&this._pixiObject?this._centerY*this._pixiObject.scale.y:0}}],[{key:"getThumbnail",value:function(e,t,n){var r=oe.asCustomObjectConfiguration(n).getAnimations();if(r.getAnimationsCount()>0&&r.getAnimation(0).getDirectionsCount()>0&&r.getAnimation(0).getDirection(0).getSpritesCount()>0){var i=r.getAnimation(0).getDirection(0).getSprite(0).getImageName();return t.getResourceFullUrl(e,i,{})}return"res/unknown32.png"}}]),n}(O.Z),ue=n(94002),de=n(50057),pe=n.n(de),fe=pe()("path"),he=pe()("electron"),ge=n.g.gd,me=(0,r.Z)((0,r.Z)({},h),i);n.g.PIXI=me;var xe={},ve={renderers:{unknownObjectType:g,Sprite:x,"TiledSpriteObject::TiledSprite":b,"PanelSpriteObject::PanelSprite":y,"TextObject::Text":w,"PrimitiveDrawing::Drawer":S,"TextEntryObject::TextEntry":P,"ParticleSystem::ParticleEmitter":E},renderers3D:{},getThumbnail:function(e,t){var n=t.getType();return this.renderers.hasOwnProperty(n)?this.renderers[n].getThumbnail(e,f.Z,t):e.hasEventsBasedObject(n)?G.getThumbnail(e,f.Z,t):this.renderers.unknownObjectType.getThumbnail(e,f.Z,t)},createNewUnknownInstanceRenderer:function(e,t,n){return new this.renderers.unknownObjectType(e,t,null,n,p.Z)},createNewInstanceRenderer:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=n.getType();if(i&&this.renderers3D.hasOwnProperty(o))return new this.renderers3D[o](e,t,n,r,i,p.Z);if(this.renderers.hasOwnProperty(o))return new this.renderers[o](e,t,n,r,p.Z,a);if(e.hasEventsBasedObject(o)){var s=e.getEventsBasedObject(o);return s.isRenderedIn3D()&&s.isAnimatable()&&0===s.getObjects().getObjectsCount()?new ce(e,t,n,r,i,p.Z):s.isUsingLegacyInstancesRenderer()?new re(e,t,n,r,i,p.Z):new G(e,t,n,r,i,p.Z,a)}return console.warn("Object with type ".concat(o," has no instance renderer registered. Please use registerInstanceRenderer to register your renderer.")),new this.renderers.unknownObjectType(e,t,n,r,p.Z)},registerInstanceRenderer:function(e,t){t.getThumbnail?this.renderers.hasOwnProperty(e)?console.warn('Tried to register renderer for object "'.concat(e,'", but a renderer already exists.')):this.renderers[e]=t:console.warn('Tried to register renderer for object "'.concat(e,'", but getThumbnail is not defined.'))},registerInstance3DRenderer:function(e,t){this.renderers3D.hasOwnProperty(e)?console.warn('Tried to register 3D renderer for object "'.concat(e,'", but a renderer already exists.')):this.renderers3D[e]=t},renderersCacheClearingMethods:[],registerClearCache:function(e){this.renderersCacheClearingMethods.push(e)},registerModule:function(e,t){xe[e]=t},requireModule:function(e,t){if(he&&fe){var r=fe.join(e,t),i=pe()("module");if(!i._load)throw new Error('module._load does not exist. This is possibly a change in Node.js that is breaking the custom loader, in ObjectsRenderingService.requireModule, that is injected to expose Pixi.js to extensions using "require".');var a=i._load,o={"pixi.js-legacy":me,"pixi.js":me,"@pixi/core":me,"@pixi/display":me,"@pixi/constants":me,"@pixi/sprite":me,"@pixi/math":me,"@pixi/utils":me,"@pixi/graphics":me};i._load=function(e,t,n){var i=o[e];return i||(0===e.indexOf("./")||e===r?a(e,t,n):(console.error('A module ("'.concat(e,'") was required from ').concat(r,' but is not an allowed module or a relative file path starting with "./". null will be returned instead.')),console.warn("Allowed modules are: ",Object.keys(o)),console.warn("Please use only allowed modules or a reference a local file."),null))};var s=null;try{s=n.g.require(r)}catch(l){console.error('Unable to load module "'.concat(t,'". Only files located in ').concat(e," are supported. Exception was:"),l),s=null}return i._load=a,s}return xe[t]?xe[t]:(console.error('Unable to load module "'.concat(t,'". Are you sure you registered it using ObjectsRenderingService.registerModule? This is mandatory for the web-app to have the file bundled.')),null)},rgbOrHexToHexNumber:Z.gO,hexNumberToRGBArray:Z.vc,gd:ge,PIXI:me,THREE:U,THREE_ADDONS:{SkeletonUtils:ue},RenderedInstance:d.Z,Rendered3DInstance:O.Z},be=ve},58247:function(e,t,n){"use strict";n.d(t,{Z:function(){return W},k:function(){return H}});var r=n(29439),i=n(93433),a=n(74165),o=n(15861),s=n(15671),l=n(43144),c=n(37762),u=n(86289),d=n(91479),p=n.n(d),f=n(14446),h=n.n(f),g=n(36425),m=n(46564),x=n(79362),v=n(87845),b=n(72410),C=n(38830),j=n.n(C),y=n(85919),Z=n.g.gd,k={},w={},T={},S=g.Texture.from("res/invalid_texture.png"),P=g.Texture.from("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAAA1BMVEXX19f5cgrAAAAAAXRSTlMz/za5cAAAAApJREFUCNdjQAMAABAAAbSqgB8AAAAASUVORK5CYII="),I={},E={},M={},L={},A={},O=function(){var e=new m.Group;return e.add(new m.Mesh(new m.BoxGeometry(1,1,1),new m.MeshBasicMaterial({color:"#ff00ff"}))),{scene:e,animations:[],cameras:[],scenes:[],asset:{},userData:{},parser:null}}(),R=null,F=function(){if(!R){R=new x.E;var e=new v._;e.setDecoderPath("./external/draco/gltf/"),R.setDRACOLoader(e)}return R},D=function(e){return(0,y.bc)(e)?"use-credentials":"anonymous"},N=function(e,t){"image"===e.getKind()&&(Z.asImageResource(e).isSmooth()||(t.baseTexture.scaleMode=g.SCALE_MODES.NEAREST))},_=function(e,t){"image"===e.getKind()&&(Z.asImageResource(e).isSmooth()||(t.magFilter=m.NearestFilter,t.minFilter=m.NearestFilter))},B=function(e){e.metalness&&(e.metalness=0)},U=function(e){var t=e;if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)B(t.material[n]);else B(t.material)},V=function(e){return e.traverse(U)},H=function(e){var t=e.getMetadata();try{var n=JSON.parse(t);return n.embeddedResourcesMapping&&"object"===typeof n.embeddedResourcesMapping?n.embeddedResourcesMapping:null}catch(r){return null}},z=function(e,t,n){var r,i=e.getResourcesManager(),a=[],o=(0,c.Z)(i.getAllResourceNames().toJSArray());try{for(o.s();!(r=o.n()).done;){var s=r.value;if(t!==s){var l=i.getResource(s);if(l.getKind()===n){var u=H(l);if(u)Object.values(u).includes(t)&&a.push(l)}}}}catch(d){o.e(d)}finally{o.f()}return a},W=function(){function e(){(0,s.Z)(this,e)}return(0,l.Z)(e,null,[{key:"burstCache",value:function(){k={},w={},T={},I={},E={},M={},L={},A={}}},{key:"_reloadEmbedderResources",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){var i,o=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=z(t,n,r),e.next=3,Promise.all(i.map((function(e){return o.reloadResource(t,e.getName())})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"reloadResource",value:function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n,r){var i,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=T[r])||!i.textureCacheIds){t.next=7;break}return t.next=4,g.Assets.unload(i.textureCacheIds);case 4:return delete T[r],t.next=7,this._reloadEmbedderResources(n,r,"atlas");case 7:return t.next=9,e.loadTextures(n,[r]);case 9:if(M[r]&&delete M[r],w[r]&&delete w[r],k[r]&&delete k[r],!I[r]){t.next=18;break}return t.next=15,I[r];case 15:t.sent.dispose(),delete I[r];case 18:if(!L[r]){t.next=24;break}return t.next=21,g.Assets.unload(r).catch((0,o.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L[r];case 2:t=e.sent,(n=t.textureAtlas)&&n.dispose();case 5:case"end":return e.stop()}}),e)}))));case 21:return delete L[r],t.next=24,this._reloadEmbedderResources(n,r,"spine");case 24:if(!A[r]){t.next=29;break}return t.next=27,g.Assets.unload(r);case 27:delete A[r],g.Assets.resolver.prefer();case 29:if(!((s=Object.keys(E).filter((function(e){return e.startsWith(r)}))).length>0)){t.next=33;break}return t.next=33,Promise.all(s.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E[t];case 2:e.sent.dispose(),delete E[t];case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 33:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"loadTextures",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getResourcesManager(),s=n.map((function(e){if(!r.hasResource(e))return null;var t=r.getResource(e);return"image"!==t.getKind()?null:t})).filter(Boolean),l=n.map((function(e){if(!r.hasResource(e))return null;var t=r.getResource(e);return"video"!==t.getKind()?null:t})).filter(Boolean),e.next=5,Promise.all([].concat((0,i.Z)(s.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getName(),e.prev=1,i=b.Z.getResourceFullUrl(t,r,{isResourceForPixi:!0}),g.Assets.setPreferences({preferWorkers:!1,preferCreateImageBitmap:!1,crossOrigin:D(i)}),e.next=6,g.Assets.load(i);case 6:o=e.sent,T[r]=o,N(n,o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("Unable to load file ".concat(n.getFile()," for image resource ").concat(r,":"),e.t0?e.t0:"(unknown error)");case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())),(0,i.Z)(l.map(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getName();try{i=b.Z.getResourceFullUrl(t,r,{isResourceForPixi:!0}),T[r]=g.Texture.from(i,{scaleMode:g.SCALE_MODES.LINEAR,resourceOptions:{autoPlay:!1,autoLoad:!0,crossorigin:D(i)}}),T[r]||(console.error("Texture loading for ".concat(i," returned nothing")),T[r]=S),T[r].baseTexture.resource.load().catch((function(e){console.error("Unable to load video texture from url ".concat(i,":"),e),T[r]=S}))}catch(a){console.error("Unable to load file ".concat(n.getFile()," for video resource ").concat(r,":"),a||"(unknown error)")}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPIXITexture",value:function(e,t){if(T[t])return T[t];if(0===t.length||!e.getResourcesManager().hasResource(t))return S;var n=e.getResourcesManager().getResource(t);if("image"!==n.getKind())return S;var r=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return T[t]=g.Texture.from(r,{resourceOptions:{crossorigin:D(r),autoLoad:!1}}),T[t]?(T[t].baseTexture.resource.load().catch((function(e){console.error("Unable to load texture from url ".concat(r,":"),e),T[t]=S})),N(n,T[t]),T[t]):(console.error("Texture loading for ".concat(r," returned nothing")),T[t]=S,T[t])}},{key:"getThreeTexture",value:function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n,r){var i,o,s,l,c,u=this;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=I[r])){t.next=3;break}return t.abrupt("return",i);case 3:if((o=e.getPIXITexture(n,r)).baseTexture.valid){t.next=6;break}return t.abrupt("return",new Promise((function(e){o.once("update",(function(){return e(u.getThreeTexture(n,r))}))})));case 6:if((s=o.baseTexture.resource.source)instanceof HTMLImageElement){t.next=9;break}throw new Error("Can't load texture for resource \"".concat(r,"\" as it's not an image."));case 9:return(l=new m.Texture(s)).magFilter=m.LinearFilter,l.minFilter=m.LinearFilter,l.wrapS=m.RepeatWrapping,l.wrapT=m.RepeatWrapping,l.colorSpace=m.SRGBColorSpace,l.needsUpdate=!0,c=n.getResourcesManager().getResource(r),_(c,l),t.abrupt("return",I[r]=Promise.resolve(l));case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getThreeMaterial",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n,r){var i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.useTransparentTexture,o="".concat(n,"|transparent:").concat(i.toString()),!(s=E[o])){e.next=5;break}return e.abrupt("return",s);case 5:return e.abrupt("return",E[o]=this.getThreeTexture(t,n).then((function(e){return new m.MeshBasicMaterial({map:e,side:i?m.DoubleSide:m.FrontSide,transparent:i,vertexColors:!0})})));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get3DModel",value:function(e,t){var n=M[t];if(n)return n;var r=function(e,t){if(0===t.length||!e.getResourcesManager().hasResource(t))return Promise.resolve(O);if("model3D"!==e.getResourcesManager().getResource(t).getKind())return Promise.resolve(O);var n=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0}),r=F();return r.withCredentials=(0,y.bc)(n),new Promise((function(e,t){r.load(n,(function(t){V(t.scene),e(t)}),void 0,(function(e){t(e)}))}))}(e,t);return M[t]=r,r}},{key:"_getSpineTextureAtlas",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var i,o,s,l,c,d,p=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=L[n])){e.next=3;break}return e.abrupt("return",i);case 3:if(n){e.next=5;break}return e.abrupt("return",{textureAtlas:null,loadingError:null,loadingErrorReason:"invalid-atlas-resource"});case 5:if(o=t.getResourcesManager(),0!==n.length&&o.hasResource(n)){e.next=8;break}return e.abrupt("return",{textureAtlas:null,loadingError:null,loadingErrorReason:"invalid-atlas-resource"});case 8:if("atlas"===(s=o.getResource(n)).getKind()){e.next=11;break}return e.abrupt("return",{textureAtlas:null,loadingError:null,loadingErrorReason:"invalid-atlas-resource"});case 11:if(l=H(s),(c=l?Object.entries(l):[]).length){e.next=15;break}return e.abrupt("return",{textureAtlas:null,loadingError:null,loadingErrorReason:"missing-texture-resources"});case 15:return d=c.reduce((function(e,n){var i=(0,r.Z)(n,2),a=i[0],o=i[1];return"string"===typeof o&&(e[a]=p.getPIXITexture(t,o)),e}),{}),e.abrupt("return",L[n]=new Promise((function(e){var r=b.Z.getResourceFullUrl(t,n,{isResourceForPixi:!0});g.Assets.setPreferences({preferWorkers:!1,crossOrigin:(0,y.bc)(r)?"use-credentials":"anonymous"}),g.Assets.add({alias:n,src:r,data:{images:d}}),g.Assets.load(n).then((function(t){"string"===typeof t?new u.TextureAtlas(t,(function(e,t){return t(d[e].baseTexture)}),(function(t){return e({textureAtlas:t,loadingError:null,loadingErrorReason:null})})):e({textureAtlas:t,loadingError:null,loadingErrorReason:null})}),(function(t){console.error('Error while loading Spine atlas "'.concat(n,'": ').concat(t,".\nCheck if you selected the correct pair of atlas and image files.")),e({textureAtlas:null,loadingError:t,loadingErrorReason:"atlas-resource-loading-error"})}))})));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSpineData",value:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,n){var r,i,o,s,l,c=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=A[n])){e.next=3;break}return e.abrupt("return",r);case 3:if(i=t.getResourcesManager(),n&&i.hasResource(n)){e.next=6;break}return e.abrupt("return",{skeleton:null,loadingError:null,loadingErrorReason:"invalid-spine-resource"});case 6:if("spine"===(o=i.getResource(n)).getKind()){e.next=9;break}return e.abrupt("return",{skeleton:null,loadingError:null,loadingErrorReason:"invalid-spine-resource"});case 9:if(s=H(o),"string"===typeof(l=s?Object.values(s)[0]:null)){e.next=13;break}return e.abrupt("return",{skeleton:null,loadingError:null,loadingErrorReason:"missing-texture-atlas-name"});case 13:return e.abrupt("return",A[n]=new Promise((function(e){c._getSpineTextureAtlas(t,l).then((function(r){if(!r.textureAtlas)return e({skeleton:null,loadingError:r.loadingError,loadingErrorReason:r.loadingErrorReason});var i=b.Z.getResourceFullUrl(t,n,{isResourceForPixi:!0});g.Assets.setPreferences({preferWorkers:!1,crossOrigin:(0,y.bc)(i)?"use-credentials":"anonymous"}),g.Assets.add({alias:n,src:i,data:{spineAtlas:r.textureAtlas}}),g.Assets.load(n).then((function(t){e({skeleton:t.spineData,loadingError:null,loadingErrorReason:null})}),(function(t){console.error('Error while loading Spine data "'.concat(n,'": ').concat(t,".\nCheck if you selected correct files.")),e({skeleton:null,loadingError:t,loadingErrorReason:"spine-resource-loading-error"})}))}))})));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPIXIVideoTexture",value:function(e,t){if(T[t])return T[t];if(0===t.length||!e.getResourcesManager().hasResource(t))return S;if("video"!==e.getResourcesManager().getResource(t).getKind())return S;var n=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return T[t]=g.Texture.from(n,{scaleMode:g.SCALE_MODES.LINEAR,resourceOptions:{autoPlay:!1,autoLoad:!0,crossorigin:D(n)}}),T[t]?(T[t].baseTexture.resource.load().catch((function(e){console.error("Unable to load video texture from url ".concat(n,":"),e),T[t]=S})),T[t]):(console.error("Texture loading for ".concat(n," returned nothing")),T[t]=S,T[t])}},{key:"loadFontFamily",value:function(e,t){if(w[t])return Promise.resolve(w[t]);var n=p()(t),r=null;t.length>0&&e.getResourcesManager().hasResource(t)?"font"===e.getResourcesManager().getResource(t).getKind()&&(r=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0})):r=b.Z.getFullUrl(e,t,{isResourceForPixi:!0});return r?function(e,t){if("undefined"!==typeof FontFace)return fetch(t,{credentials:(0,y.bc)(t)?"include":"same-origin"}).then((function(e){if(!e.ok){var n="Unable to fetch "+t+" to be loaded as a font. HTTP status is: "+e.status+".";throw console.error(n),new Error(n)}return e.arrayBuffer()})).then((function(t){var n=new FontFace(e,t,{});document.fonts.add(n)}));var n=document.createElement("style");return n.appendChild(document.createTextNode("@font-face {\n          font-family: ".concat(e,";\n          src: ").concat(t,";\n        }"))),document.head.appendChild(n),new(j())(e,{}).load().catch((function(t){throw console.warn("Error while loading font ".concat(e),t),t}))}(n,r).then((function(e){return w[t]=n,n})):Promise.resolve("Arial")}},{key:"getFontFamily",value:function(e,t){return w[t]?w[t]:p()(t)}},{key:"getBitmapFontData",value:function(e,t){if(k[t])return Promise.resolve(k[t].data);if(0===t.length||!e.getResourcesManager().hasResource(t))return Promise.reject(new Error("Can't find resource called ".concat(t,".")));if("bitmapFont"!==e.getResourcesManager().getResource(t).getKind())return Promise.reject(new Error("The resource called ".concat(t," is not a bitmap font file. Require .fnt or .xml format.")));var n=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return n?h().get(n,{withCredentials:(0,y.bc)(n)}).then((function(e){return k[t]=e,e.data})):Promise.reject(new Error("The resource called ".concat(t," was no found.\nThe default bitmap font will be used.")))}},{key:"getInvalidPIXITexture",value:function(){return S}},{key:"getLoadingPIXITexture",value:function(){return P}},{key:"getResourceJsonData",value:function(e,t){if(0===t.length||!e.getResourcesManager().hasResource(t))return Promise.reject(new Error("Can't find resource called ".concat(t,".")));var n=e.getResourcesManager().getResource(t);if("json"!==n.getKind()&&"tilemap"!==n.getKind()&&"tileset"!==n.getKind())return Promise.reject(new Error("The resource called ".concat(t," is not a json file.")));var r=b.Z.getResourceFullUrl(e,t,{isResourceForPixi:!0});return h().get(r,{withCredentials:(0,y.bc)(r)}).then((function(e){return e.data}))}}]),e}()},77672:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),a=(n(36425),n(58247),function(){function e(t,n,i,a,o,s){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,r.Z)(this,e),this._pixiObject=null,this._threeObject=null,this._instance=n,this._associatedObjectConfiguration=i,this._pixiContainer=a,this._threeGroup=o,this._project=t,this._pixiResourcesLoader=s,this._getPropertyOverridings=l,this.wasUsed=!0,this._wasDestroyed=!1}return(0,i.Z)(e,[{key:"isRenderedIn3D",value:function(){return!0}},{key:"update",value:function(){}},{key:"getPixiObject",value:function(){return this._pixiObject}},{key:"getThreeObject",value:function(){return this._threeObject}},{key:"getInstance",value:function(){return this._instance}},{key:"onRemovedFromScene",value:function(){this._wasDestroyed=!0,null!==this._pixiObject&&this._pixiContainer.removeChild(this._pixiObject),null!==this._threeObject&&this._threeGroup.remove(this._threeObject)}},{key:"getOriginX",value:function(){return 0}},{key:"getOriginY",value:function(){return 0}},{key:"getOriginZ",value:function(){return 0}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getCenterZ",value:function(){return this.getDepth()/2}},{key:"getCustomWidth",value:function(){return this._instance.getCustomWidth()}},{key:"getCustomHeight",value:function(){return this._instance.getCustomHeight()}},{key:"getCustomDepth",value:function(){return this._instance.getCustomDepth()}},{key:"getWidth",value:function(){return this._instance.hasCustomSize()?this.getCustomWidth():this.getDefaultWidth()}},{key:"getHeight",value:function(){return this._instance.hasCustomSize()?this.getCustomHeight():this.getDefaultHeight()}},{key:"getDepth",value:function(){return this._instance.hasCustomDepth()?this.getCustomDepth():this.getDefaultDepth()}},{key:"getDefaultWidth",value:function(){return 32}},{key:"getDefaultHeight",value:function(){return 32}},{key:"getDefaultDepth",value:function(){return 32}},{key:"getPropertyOverridings",value:function(){return this._getPropertyOverridings&&this._getPropertyOverridings()}}],[{key:"toRad",value:function(e){return e/180*Math.PI}},{key:"applyRatio",value:function(e){var t=e.oldReferenceValue;return e.newReferenceValue/t*e.valueToApplyTo}}]),e}())},79916:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(15671),i=n(43144),a=(n(36425),n(58247),function(){function e(t,n,i,a,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,r.Z)(this,e),this._pixiObject=null,this._instance=n,this._associatedObjectConfiguration=i,this._pixiContainer=a,this._project=t,this._pixiResourcesLoader=o,this._getPropertyOverridings=s,this.wasUsed=!0,this._wasDestroyed=!1}return(0,i.Z)(e,[{key:"isRenderedIn3D",value:function(){return!1}},{key:"update",value:function(){}},{key:"getPixiObject",value:function(){return this._pixiObject}},{key:"getInstance",value:function(){return this._instance}},{key:"onRemovedFromScene",value:function(){this._wasDestroyed=!0,null!==this._pixiObject&&this._pixiContainer.removeChild(this._pixiObject)}},{key:"getOriginX",value:function(){return 0}},{key:"getOriginY",value:function(){return 0}},{key:"getOriginZ",value:function(){return 0}},{key:"getCenterX",value:function(){return this.getWidth()/2}},{key:"getCenterY",value:function(){return this.getHeight()/2}},{key:"getCustomWidth",value:function(){return this._instance.getCustomWidth()}},{key:"getCustomHeight",value:function(){return this._instance.getCustomHeight()}},{key:"getWidth",value:function(){return this._instance.hasCustomSize()?this.getCustomWidth():this.getDefaultWidth()}},{key:"getHeight",value:function(){return this._instance.hasCustomSize()?this.getCustomHeight():this.getDefaultHeight()}},{key:"getDepth",value:function(){return 0}},{key:"getDefaultWidth",value:function(){return 32}},{key:"getDefaultHeight",value:function(){return 32}},{key:"getDefaultDepth",value:function(){return 0}},{key:"getPropertyOverridings",value:function(){return this._getPropertyOverridings&&this._getPropertyOverridings()}}],[{key:"toRad",value:function(e){return e/180*Math.PI}}]),e}())},71106:function(e,t,n){"use strict";n.d(t,{Jo:function(){return s},Pu:function(){return c},aZ:function(){return l}});var r=n(74165),i=n(15861),a=n(1413),o=n(28381),s=(n(71445),{cloudProjects:null,receivedAssetPacks:null,receivedAssetShortHeaders:null,receivedGameTemplates:null,receivedBundles:null,badges:null,notifications:null}),l=(0,a.Z)((0,a.Z)({authenticated:!1,firebaseUser:null,profile:null,loginState:null,creatingOrLoggingInAccount:!1,cloudProjectsFetchingErrorLabel:null,gameTemplatePurchases:null,assetPackPurchases:null,coursePurchases:null,bundlePurchases:null,recommendations:null,subscription:null,usages:null,userEarningsBalance:null,limits:null},s),{},{authenticationError:null,onLogin:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onLoginWithProvider:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCancelLoginOrSignUp:function(){},onLogout:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCreateAccount:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onEditProfile:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onResetPassword:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onOpenLoginDialog:function(){},onOpenLoginWithPurchaseClaimDialog:function(){},onOpenEditProfileDialog:function(){},onOpenChangeEmailDialog:function(){},onOpenCreateAccountDialog:function(){},onOpenCreateAccountWithPurchaseClaimDialog:function(){},onOpenPurchaseClaimDialog:function(){},onBadgesChanged:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onCloudProjectsChanged:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshUserProfile:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshFirebaseProfile:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshSubscription:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshLimits:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshGameTemplatePurchases:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshAssetPackPurchases:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshCoursePurchases:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshBundlePurchases:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshEarningsBalance:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onRefreshNotifications:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onPurchaseSuccessful:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSendEmailVerification:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onOpenEmailVerificationDialog:function(){},onAcceptGameStatsEmail:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAuthorizationHeader:function(){return Promise.reject(new Error("Unimplemented"))},achievements:null}),c={authenticated:!1,firebaseUser:null,profile:null,loginState:"done",badges:null,cloudProjects:[],cloudProjectsFetchingErrorLabel:null,receivedAssetPacks:[],receivedAssetShortHeaders:[],receivedGameTemplates:[],receivedBundles:[],subscription:null,userEarningsBalance:null,usages:null,limits:null},u=o.createContext(l);t.ZP=u},54458:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(10888)),a=n(60022),o=n(40243),s=n(86278),l=n(61325),c=n(29343),u={container:{maxWidth:"480px",whiteSpace:"normal"}};t.Z=function(e){var t=e.message,n=e.onOpenLoginDialog,d=e.onOpenCreateAccountDialog;e.justifyContent;return(0,c.jsx)(o.sg,{alignItems:"center",children:(0,c.jsx)("div",{style:u.container,children:(0,c.jsxs)(l.ak,{children:[(0,c.jsx)(s.Z,{noMargin:!0,align:"center",children:t||(0,c.jsx)(r.Trans,{id:"You are not connected. Create an account to build your game for Android, Windows, macOS and Linux in one click, and get access to metrics for your game."})}),(0,c.jsxs)(l.ep,{justifyContent:"center",noMargin:!0,children:[(0,c.jsx)(a.Z,{id:"create-account-button",label:(0,c.jsx)(r.Trans,{id:"Create my account"}),onClick:d,primary:!0}),(0,c.jsx)(i.Z,{label:(0,c.jsx)(r.Trans,{id:"Login"}),onClick:n})]})]})})})}},73412:function(e,t,n){"use strict";n.d(t,{O:function(){return P},Z:function(){return S}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(36600),l=n(1773),c=n(10888),u=n(1413),d=n(24910),p=n(78081),f=n(75383),h=n(38501),g=n(58336),m=n(12813),x=n(29343),v={border:0,flex:1},b="https://gd.games",C=function(e){var t=e.loadErrorMessage,n=e.path,a=e.onMessageReceived,s=e.supportedMessageIds,l=o.useContext(d.Z).palette.type,c=o.useRef("loading"),C=(0,m.t)(),j=(0,h.Z)(),y=new URL(n,b);return y.searchParams.set("supportedMessageIds",s.join(",")),y.searchParams.set("theme",l),o.useEffect((function(){var e=function(e){e.origin===b&&e.data&&"object"===typeof e.data&&("pageLoaded"===e.data.id?(c.current="loaded",j()):a(e.data))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[j,a]),o.useEffect((function(){(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.g)(6e3);case 2:if(C.current){e.next=4;break}return e.abrupt("return");case 4:if("loaded"!==c.current){e.next=6;break}return e.abrupt("return");case 6:c.current="errored",j();case 8:case"end":return e.stop()}}),e)})))()}),[j,C]),(0,x.jsxs)(x.Fragment,{children:["errored"!==c.current&&(0,x.jsx)("iframe",{src:y.toString(),title:"gdgames",style:(0,u.Z)((0,u.Z)({},v),{},{visibility:"loaded"===c.current?"visible":"hidden"})}),"loading"===c.current&&(0,x.jsx)("div",{style:{position:"absolute",inset:30},children:(0,x.jsx)(p.Z,{style:{width:"100%",height:"100%"}})}),"errored"===c.current&&(0,x.jsx)(f.Z,{onRetry:function(){c.current="loading",j()},children:t})]})},j=n(85545),y=n(74802),Z=function(e){var t=e.userId,n=e.onClose,r=e.onAssetPackOpen,i=e.onGameTemplateOpen,u=e.onGameOpen,d=e.onExampleOpen,p=o.useMemo((function(){return{openAssetPack:r?function(e){e.privateAssetPackListingData&&r(e.privateAssetPackListingData)}:null,openGameTemplate:i?function(e){e.privateGameTemplateListingData&&i(e.privateGameTemplateListingData)}:null,openGame:u?function(e){e.gameId&&u(e.gameId)}:null,openExample:d?function(e){e.exampleShortHeader&&d(e.exampleShortHeader)}:null}}),[r,i,u,d]),f=o.useCallback((function(e){e.id&&p[e.id]&&p[e.id](e)}),[p]),h=(0,j._)(f);return(0,x.jsx)(l.ZP,{title:null,open:!0,fullHeight:!0,maxWidth:"md",actions:[(0,x.jsx)(c.Z,{label:(0,x.jsx)(s.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],flexColumnBody:!0,onRequestClose:n,children:(0,x.jsx)(C,{path:"/app-embedded/".concat(y.GN,"/user/").concat(t),loadErrorMessage:(0,x.jsx)(s.Trans,{id:"Can't load the profile. Verify your internet connection or try again later."}),supportedMessageIds:Object.entries(p).filter((function(e){var t=(0,a.Z)(e,2);t[0];return!!t[1]})).map((function(e){return(0,a.Z)(e,1)[0]})),onMessageReceived:h})})},k=n(30609),w={openUserPublicProfile:function(){},configureNewProjectActions:function(){}},T=o.createContext(w),S=T,P=function(e){var t=e.children,n=o.useState(null),s=(0,a.Z)(n,2),l=s[0],c=s[1],u=o.useState(null),d=(0,a.Z)(u,2),p=d[0],f=d[1],h=o.useContext(k.ZP).navigateToRoute,g=o.useState(null),m=(0,a.Z)(g,2),v=m[0],b=m[1],C=o.useCallback((function(e){var t=e.userId,n=e.callbacks;c(t),f(n)}),[c]),j=o.useCallback((function(){c(null),f(null)}),[c]),y=o.useCallback((function(e){b(e)}),[b]),w=o.useMemo((function(){return{openUserPublicProfile:C,configureNewProjectActions:y}}),[C,y]),S=o.useCallback((function(e){h("store",{"asset-pack":"product-".concat(e.id)})}),[h]),P=o.useCallback((function(e){h("store",{"game-template":"product-".concat(e.id)})}),[h]),I=o.useCallback((function(e){h("play",{"playable-game-id":e})}),[h]),E=o.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,v.fetchAndOpenNewProjectSetupDialogForExample(t.slug);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v]),M=o.useCallback((function(e){(p&&p.onAssetPackOpen||S)(e),j()}),[p,j,S]),L=o.useCallback((function(e){(p&&p.onGameTemplateOpen||P)(e),j()}),[p,j,P]),A=o.useCallback((function(e){(p&&p.onGameOpen||I)(e),j()}),[p,j,I]),O=o.useCallback((function(e){(p&&p.onExampleOpen||E)(e),j()}),[p,j,E]);return(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)(T.Provider,{value:w,children:t}),l&&(0,x.jsx)(Z,{userId:l,onClose:j,onAssetPackOpen:M,onGameTemplateOpen:L,onGameOpen:A,onExampleOpen:O})]})}},42016:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(74165),i=n(15861),a=n(29439),o=n(36600),s=n(28381),l=n(10888),c=n(1773),u=n(61325),d=n(42986),p=n(63854),f=n(68151),h=n(91),g=n(38092),m=n(86567),x=n(29343),v=function(e){if(e){var t=(0,h.T)(e);if(t){if(404===t.status)return(0,x.jsx)(o.Trans,{id:"This code is not valid - verify you've entered it properly."});if("redemption-code/code-is-a-coupon"===t.code)return(0,x.jsx)(o.Trans,{id:"This code is a coupon code and can't be redeemed here. Start a purchase and enter it there to get a discount."});if("redemption-code/cannot-be-redeemed-anymore"===t.code)return(0,x.jsx)(o.Trans,{id:"This code was valid but can't be redeemed anymore. If this is unexpected, contact us or the code provider."});if("user-redeemed-code/already-redeemed-by-user"===t.code)return(0,x.jsx)(o.Trans,{id:"You already used this code - you can't reuse a code multiple times."})}return(0,x.jsx)(o.Trans,{id:"There was an unknown error when trying to apply the code. Double check the code, try again later or contact us if this persists."})}};function b(e){var t=e.onClose,n=e.authenticatedUser,h=s.useState(""),b=(0,a.Z)(h,2),C=b[0],j=b[1],y=s.useState(!1),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=s.useState(null),S=(0,a.Z)(T,2),P=S[0],I=S[1],E=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w(!0),i=n.getAuthorizationHeader,a=n.profile,e.prev=2,a){e.next=5;break}throw new Error("User should be logged in");case 5:return e.next=7,(0,f.XT)(i,a.id,C.trim().toLowerCase());case 7:t(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),I(e.t0);case 13:return e.prev=13,w(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),M=!!C&&!k,L=n.subscription;return(0,x.jsx)(o.I18n,{children:function(e){var n=e.i18n;return(0,x.jsx)(c.ZP,{title:(0,x.jsx)(o.Trans,{id:"Redeem a code"}),actions:[(0,x.jsx)(l.Z,{label:(0,x.jsx)(o.Trans,{id:"Close"}),primary:!1,disabled:k,onClick:function(){return t(!1)}},"close"),(0,x.jsx)(p.Z,{isLoading:k,children:(0,x.jsx)(c.vF,{label:(0,x.jsx)(o.Trans,{id:"Redeem"}),disabled:!M,primary:!0,onClick:E})},"redeem")],cannotBeDismissed:k,onRequestClose:function(){return t(!1)},onApply:function(){M&&E()},maxWidth:"sm",open:!0,children:(0,x.jsx)(m.Z,{onSubmit:E,name:"redeemSubscriptionCoupon",children:(0,x.jsxs)(u.ak,{noMargin:!0,children:[(0,x.jsx)(d.Z,{value:C,onChange:j,translatableHintText:{id:"Enter your code here"},floatingLabelText:(0,x.jsx)(o.Trans,{id:"Redemption code"}),floatingLabelFixed:!0,errorText:v(P),autoFocus:"desktop",disabled:k}),L&&L.planId?L.redemptionCodeValidUntil?L.redemptionCodeValidUntil>Date.now()?(0,x.jsx)(g.Z,{kind:"warning",children:(0,x.jsx)(o.Trans,{id:"You currently have a subscription, applied thanks to a redemption code, valid until {0}. If you redeem another code, your existing subscription will be canceled and not redeemable anymore!",values:{0:n.date(L.redemptionCodeValidUntil)}})}):null:(0,x.jsx)(g.Z,{kind:"info",children:(0,x.jsx)(o.Trans,{id:"You currently have a subscription. If you redeem a code, the existing subscription will be cancelled and replaced by the one given by the code."})}):null]})})})}})}},49522:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(29439),i=n(36600),a=n(28381),o=n(40243),s=n(61325),l=n(56885),c=n(60022),u=n(10888),d=n(84482),p="GetSubscriptionCard_premiumContainer__zncJ7",f=n(20914),h=n(20400),g=n(6996),m=n(71106),x=n(68151),v=n(51598),b=n(23198),C=n(29343),j={topRightHideButton:{position:"absolute",right:1,top:1},paper:{zIndex:2,flex:1},diamondIcon:{width:70,height:70},coinIcon:{width:12,height:12,aspectRatio:"1"}},y=function(e){var t=e.children,n=e.subscriptionDialogOpeningReason,y=e.label,Z=e.hideButton,k=e.payWithCreditsOptions,w=e.onUpgrade,T=e.forceColumnLayout,S=e.filter,P=e.recommendedPlanIdIfNoSubscription,I=e.canHide,E=e.placementId,M=a.useState(!1),L=(0,r.Z)(M,2),A=L[0],O=L[1],R=a.useContext(m.ZP).subscription,F=(0,x.e_)(R)?void 0:P,D=a.useContext(l.J).openSubscriptionDialog,N=(0,g.UQ)().isMobile,_=T||N;return A?null:(0,C.jsx)("div",{className:p,children:(0,C.jsxs)(f.Z,{style:j.paper,background:"medium",children:[(0,C.jsxs)(o.x1,{expand:!0,alignItems:"center",noMargin:!_,children:[(0,C.jsx)("img",{src:"res/diamond.svg",style:j.diamondIcon,alt:"diamond"}),(0,C.jsx)(o.sg,{expand:!0,justifyContent:"center",children:(0,C.jsxs)(s.ep,{alignItems:"center",noColumnMargin:!0,noMargin:!0,forceMobileLayout:_,children:[(0,C.jsx)(o.sg,{noMargin:!0,expand:!0,children:t}),k&&(0,C.jsx)(u.Z,{leftIcon:(0,C.jsx)(d.Z,{style:j.coinIcon}),label:k.label,primary:!0,onClick:k.onPayWithCredits}),!Z&&(0,C.jsx)(c.Z,{label:y||(0,C.jsx)(i.Trans,{id:"Upgrade"}),primary:!0,onClick:function(){w&&w(),D({analyticsMetadata:{reason:n,recommendedPlanId:F,placementId:E},filter:S})},icon:(0,C.jsx)(h.Z,{fontSize:"small"})})]})})]}),I&&(0,C.jsx)("div",{style:j.topRightHideButton,children:(0,C.jsx)(v.Z,{"aria-label":"hide",onClick:function(){O(!0)},size:"small",children:(0,C.jsx)(b.Z,{fontSize:"small"})})})]})})}},78377:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"42",height:"43",viewBox:"0 0 42 43",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1893_85)",children:(0,o.jsx)("path",{d:"M17.1841 33.9319L12.2352 31.2924C9.62842 29.902 8.00011 27.1881 8.00009 24.2337L8.00004 18.9593C8.00002 16.0529 9.57631 13.375 12.1175 11.9645L17.2554 9.11264C19.6285 7.7954 22.5077 7.77125 24.9025 9.04848L29.7646 11.6415C32.3716 13.0318 34 15.7458 34 18.7004V24.0171C34 26.9008 32.448 29.5614 29.9377 30.9809L24.8867 33.837C22.5045 35.1841 19.5989 35.2199 17.1841 33.9319Z",fill:"#3888FF"})}),(0,o.jsx)("path",{d:"M15.5625 9H27.4375L31 12.8658V28.658L27.4375 32.5238H15.5625L12 28.658V12.8658L15.5625 9Z",fill:"url(#paint0_linear_1893_85)"}),(0,o.jsx)("path",{d:"M17.8244 12.619H25.1756L27.3809 15.2954V26.2284L25.1756 28.9048H17.8244L15.619 26.2284V15.2954L17.8244 12.619Z",fill:"#569EF4"}),(0,o.jsx)("path",{d:"M27.3809 15.3333L31 12.8543L27.4714 9L25.119 12.619L27.3809 15.3333Z",fill:"#4E98F0"}),(0,o.jsx)("path",{d:"M15.6191 15.3333L12 12.8543L15.5286 9L17.881 12.619L15.6191 15.3333Z",fill:"#2E82E5"}),(0,o.jsx)("path",{d:"M27.3809 26.1905L31 28.6695L27.4714 32.5238L25.119 28.9048L27.3809 26.1905Z",fill:"#2178E0"}),(0,o.jsx)("path",{d:"M15.6191 26.1905L12 28.6695L15.5286 32.5238L17.881 28.9048L15.6191 26.1905Z",fill:"#1564C2"}),(0,o.jsx)("path",{d:"M31 12.8519V28.6734L27.381 26.1905V15.3333L31 12.8519Z",fill:"#3187ED"}),(0,o.jsx)("path",{d:"M25.1149 12.619L17.8768 12.619L15.5343 9L27.4714 9L25.1149 12.619Z",fill:"#3491FF"}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"filter0_f_1893_85",x:"0",y:"0.107361",width:"42",height:"42.7658",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,o.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,o.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1893_85"})]}),(0,o.jsxs)("linearGradient",{id:"paint0_linear_1893_85",x1:"31",y1:"9",x2:"21.9524",y2:"35.6905",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#78B3F9"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#0C64CC"})]})]})]}))}))},46976:function(e,t,n){"use strict";n.d(t,{ZP:function(){return M},sG:function(){return E},FZ:function(){return P},H$:function(){return S},eO:function(){return I}});var r=n(1413),i=n(28381),a=n(36600),o=n(18930),s=n(86278),l=n(40243),c=n(24910),u=n(61325),d=n(82422),p=n(20914),f=n(6996),h=n(78118),g=n(29343),m=i.memo((function(e){return(0,g.jsxs)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"40",height:"54",viewBox:"0 0 40 54",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1852_139)",children:(0,g.jsx)("path",{d:"M15.9349 33.6183L11.9977 31.3434C9.52385 29.9139 8.00011 27.2737 8.00008 24.4166L8.00004 18.7744C8.00001 15.9671 9.47152 13.3651 11.8774 11.9184L16.0154 9.4302C18.5091 7.93064 21.6205 7.90344 24.1401 9.35916L28.0021 11.5905C30.4761 13.0199 32 15.6602 32 18.5175V24.2028C32 26.9866 30.5528 29.5703 28.1789 31.0245L24.1162 33.5133C21.6146 35.0457 18.475 35.086 15.9349 33.6183Z",fill:"#B4C8D1"})}),(0,g.jsx)("g",{filter:"url(#filter1_f_1852_139)",children:(0,g.jsx)("ellipse",{cx:"8.40804",cy:"0.459081",rx:"8.40804",ry:"0.459081",transform:"matrix(0.904419 0.426646 -0.444506 0.895776 11.0721 36.003)",fill:"black",fillOpacity:"0.9"})}),(0,g.jsx)("path",{d:"M19.7878 9.82303L29.5755 22.3621L19.7878 25.1757V9.82303Z",fill:"#CBD7DE"}),(0,g.jsx)("path",{d:"M19.7878 35.6775L10.0002 22.3627L19.7878 25.1766L19.7878 35.6775Z",fill:"#474E53"}),(0,g.jsx)("path",{d:"M19.7876 9.82401V25.1765L10 22.3629L19.7876 9.82401Z",fill:"#969B9C"}),(0,g.jsx)("path",{d:"M19.7876 35.6773L19.7876 25.1766L29.5752 22.3627L19.7876 35.6773Z",fill:"#969B9C"}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("filter",{id:"filter0_f_1852_139",x:"0",y:"0.286133",width:"40",height:"42.4054",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,g.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1852_139"})]}),(0,g.jsxs)("filter",{id:"filter1_f_1852_139",x:"0.865234",y:"26.3904",width:"35.2145",height:"27.2222",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,g.jsx)("feGaussianBlur",{stdDeviation:"5",result:"effect1_foregroundBlur_1852_139"})]})]})]}))})),x=i.memo((function(e){return(0,g.jsxs)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"41",height:"52",viewBox:"0 0 41 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1852_149)",children:(0,g.jsx)("path",{d:"M16.4529 32.7606L12.5127 30.5624C9.97992 29.1494 8.41026 26.4764 8.41024 23.5761L8.4102 18.6059C8.41017 15.7547 9.92765 13.119 12.3934 11.6874L16.5293 9.28617C18.9705 7.8688 21.9781 7.84296 24.4433 9.21817L28.3075 11.3737C30.8404 12.7867 32.4102 15.4598 32.4102 18.3602V23.3732C32.4102 26.2013 30.917 28.8192 28.4828 30.259L24.4232 32.6601C21.9735 34.109 18.9384 34.1473 16.4529 32.7606Z",fill:"#FFF69B"})}),(0,g.jsx)("g",{filter:"url(#filter1_f_1852_149)",children:(0,g.jsx)("ellipse",{cx:"8.40812",cy:"0.459085",rx:"8.40812",ry:"0.459085",transform:"matrix(0.904419 0.426646 -0.444506 0.895776 12.072 34.0032)",fill:"black",fillOpacity:"0.9"})}),(0,g.jsx)("path",{d:"M20.7878 7.82306L30.5756 20.3622L20.7878 23.1759V7.82306Z",fill:"#FFF69B"}),(0,g.jsx)("path",{d:"M20.7878 33.6774L11.0001 20.3625L20.7878 23.1764L20.7878 33.6774Z",fill:"#D39902"}),(0,g.jsx)("path",{d:"M20.7877 7.82476V23.1774L11 20.3637L20.7877 7.82476Z",fill:"#FED501"}),(0,g.jsx)("path",{d:"M20.7875 33.6769L20.7875 23.1761L30.5752 20.3621L20.7875 33.6769Z",fill:"#FED501"}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("filter",{id:"filter0_f_1852_149",x:"0.410156",y:"0.204651",width:"40",height:"41.5696",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,g.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1852_149"})]}),(0,g.jsxs)("filter",{id:"filter1_f_1852_149",x:"1.86511",y:"24.3906",width:"35.2146",height:"27.2222",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,g.jsx)("feGaussianBlur",{stdDeviation:"5",result:"effect1_foregroundBlur_1852_149"})]})]})]}))})),v=i.memo((function(e){return(0,g.jsxs)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"43",height:"45",viewBox:"0 0 43 45",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1852_159)",children:(0,g.jsx)("path",{d:"M17.4264 35.4835L12.1452 32.5793C9.58858 31.1733 8.00012 28.487 8.00009 25.5693L8.00004 19.3058C8.00002 16.4368 9.53633 13.7874 12.0264 12.3624L17.501 9.22931C19.9206 7.84462 22.8865 7.81932 25.3293 9.16254L30.5213 12.0175C33.0781 13.4233 34.6667 16.1097 34.6667 19.0276V25.3337C34.6667 28.1798 33.1546 30.8115 30.696 32.245L25.3106 35.3847C22.8823 36.8004 19.8893 36.8379 17.4264 35.4835Z",fill:"#FF846A"})}),(0,g.jsx)("path",{d:"M9.33337 23.3333L15.3334 12.941L27.3334 12.941L33.3334 23.3333L27.3334 33.7256L15.3334 33.7256L9.33337 23.3333Z",fill:"url(#paint0_linear_1852_159)"}),(0,g.jsx)("path",{d:"M14.3334 23.3333L17.8334 17.2712L24.8334 17.2712L28.3334 23.3333L24.8334 29.3955L17.8334 29.3955L14.3334 23.3333Z",fill:"#FF4D4D"}),(0,g.jsx)("path",{d:"M24.8334 17.2333L27.3333 12.9333L33.3333 23.3333H28.3333L24.8334 17.2333Z",fill:"#ED2B00"}),(0,g.jsx)("path",{d:"M17.8334 17.2333L15.3334 12.9333L9.3334 23.3333H14.3334L17.8334 17.2333Z",fill:"#D21E13"}),(0,g.jsx)("path",{d:"M17.7571 29.3774L15.2783 33.6896L27.2849 33.6994L24.7899 29.3664L17.7571 29.3774Z",fill:"#B71409"}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("filter",{id:"filter0_f_1852_159",x:"0",y:"0.172668",width:"42.6666",height:"44.3008",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,g.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1852_159"})]}),(0,g.jsxs)("linearGradient",{id:"paint0_linear_1852_159",x1:"15.3334",y1:"35.3333",x2:"35.3334",y2:"15.8333",gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#D32A05"}),(0,g.jsx)("stop",{offset:"1",stopColor:"#FF3B3B"})]})]})]}))})),b=i.memo((function(e){return(0,g.jsxs)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"43",height:"45",viewBox:"0 0 43 45",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("g",{opacity:"0.2",filter:"url(#filter0_f_1852_168)",children:(0,g.jsx)("path",{d:"M17.4264 35.4835L12.1452 32.5793C9.58858 31.1733 8.00012 28.487 8.00009 25.5693L8.00004 19.3058C8.00002 16.4368 9.53633 13.7874 12.0264 12.3624L17.501 9.22931C19.9206 7.84462 22.8865 7.81932 25.3293 9.16254L30.5213 12.0175C33.0781 13.4233 34.6667 16.1097 34.6667 19.0276V25.3337C34.6667 28.1798 33.1546 30.8115 30.696 32.245L25.3106 35.3847C22.8823 36.8004 19.8893 36.8379 17.4264 35.4835Z",fill:"#99FF6A"})}),(0,g.jsx)("path",{d:"M9.33337 23.3333L15.3334 12.941L27.3334 12.941L33.3334 23.3333L27.3334 33.7256L15.3334 33.7256L9.33337 23.3333Z",fill:"url(#paint0_linear_1852_168)"}),(0,g.jsx)("path",{d:"M14.3334 23.3333L17.8334 17.2712L24.8334 17.2712L28.3334 23.3333L24.8334 29.3955L17.8334 29.3955L14.3334 23.3333Z",fill:"#15E8AE"}),(0,g.jsx)("path",{d:"M24.8334 17.2333L27.3333 12.9333L33.3333 23.3333H28.3333L24.8334 17.2333Z",fill:"#00D684"}),(0,g.jsx)("path",{d:"M17.8334 17.2333L15.3334 12.9333L9.3334 23.3333H14.3334L17.8334 17.2333Z",fill:"#03D388"}),(0,g.jsx)("path",{d:"M17.7572 29.3774L15.2784 33.6896L27.2851 33.6994L24.79 29.3664L17.7572 29.3774Z",fill:"#12835A"}),(0,g.jsxs)("defs",{children:[(0,g.jsxs)("filter",{id:"filter0_f_1852_168",x:"0",y:"0.172668",width:"42.6666",height:"44.3008",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,g.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,g.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,g.jsx)("feGaussianBlur",{stdDeviation:"4",result:"effect1_foregroundBlur_1852_168"})]}),(0,g.jsxs)("linearGradient",{id:"paint0_linear_1852_168",x1:"16.6667",y1:"39",x2:"21.3334",y2:"3.66667",gradientUnits:"userSpaceOnUse",children:[(0,g.jsx)("stop",{stopColor:"#13947C"}),(0,g.jsx)("stop",{offset:"1",stopColor:"#00D581"})]})]})]}))})),C=n(78377),j=n(24893),y=n(92078),Z=n(74394),k={bulletIcon:{width:20,height:20,marginRight:10},planPricesPaper:{padding:10,display:"flex",flexDirection:"column",alignItems:"center"},bulletText:{flex:1},discountedPrice:{textDecoration:"line-through",opacity:.7},discountContainer:{position:"absolute",top:10,right:10,padding:"4px 8px",borderRadius:4,display:"flex",alignItems:"center"}},w=function(e){return"USD"===e.currency?"$".concat(e.amountInCents/100):"".concat(e.amountInCents/100).concat("EUR"===e.currency?"\u20ac":e.currency)},T=function(e){var t=(0,g.jsx)(l.sg,{noMargin:!0,alignItems:"center",children:(0,g.jsx)("b",{children:w(e)})});return"week"===e.period?1===e.periodCount?e.isPerUser?(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per seat, each week",values:{price:t}})},"week"):(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per week",values:{price:t}})},"week"):e.isPerUser?(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per seat, every {0} weeks",values:{0:e.periodCount,price:t}})},"week"):(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} every {0} weeks",values:{0:e.periodCount,price:t}})},"week"):"month"===e.period?1===e.periodCount?e.isPerUser?(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per seat, each month",values:{price:t}})},"month"):(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per month",values:{price:t}})},"month"):e.isPerUser?(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per seat, every {0} months",values:{0:e.periodCount,price:t}})},"month"):(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} every {0} months",values:{0:e.periodCount,price:t}})},"month"):1===e.periodCount?e.isPerUser?(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per seat, each year",values:{price:t}})},"year"):(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per year",values:{price:t}})},"year"):e.isPerUser?(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} per seat, every {0} years",values:{0:e.periodCount,price:t}})},"year"):(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"{price} every {0} years",values:{0:e.periodCount,price:t}})},"year")},S=function(e){var t=e.pricingSystems;return e.hidePrice?null:t.length>0?t.map((function(e,t){return[0!==t?(0,g.jsx)(s.Z,{noMargin:!0,size:"body2",color:"primary",children:(0,g.jsx)(a.Trans,{id:"or"})}):null,T(e)]})).flat():(0,g.jsx)(s.Z,{noMargin:!0,color:"primary",children:(0,g.jsx)(a.Trans,{id:"Free"})})},P=function(e){switch(e){case"gdevelop_silver":case"gdevelop_indie":return"Silver";case"gdevelop_gold":case"gdevelop_pro":return"Gold";case"gdevelop_education":return"Education";case"gdevelop_startup":case"gdevelop_enterprise":return"Pro";default:return"GDevelop"}},I=function(e,t){var n=["gdevelop_free","gdevelop_indie","gdevelop_silver","gdevelop_gold","gdevelop_pro","gdevelop_education","gdevelop_startup","gdevelop_enterprise"];return n.indexOf(e)-n.indexOf(t)},E=function(e){var t=e.planId,n=e.logoSize,r=n+20;switch(t){case"gdevelop_silver":case"gdevelop_indie":return(0,g.jsx)(m,{style:{width:r,height:r}});case"gdevelop_gold":case"gdevelop_pro":return(0,g.jsx)(x,{style:{width:r,height:r}});case"gdevelop_education":return(0,g.jsx)(C.Z,{style:{width:r,height:r}});case"gdevelop_startup":return(0,g.jsx)(v,{style:{width:r,height:r}});case"gdevelop_enterprise":return(0,g.jsx)(b,{style:{width:r,height:r}});default:return(0,g.jsx)(j.Z,{style:{width:n,height:n,padding:10}})}},M=function(e){var t=i.useContext(c.Z),n=(0,f.UQ)().isMobile,h=E({planId:e.subscriptionPlanWithPricingSystems.id,logoSize:25}),m=e.subscriptionPlanWithPricingSystems.pricingSystems.find((function(t){return t.period===e.periodToDisplay})),x="year"===e.periodToDisplay?e.subscriptionPlanWithPricingSystems.pricingSystems.find((function(e){return"month"===e.period})):null,v="year"===e.periodToDisplay?function(e){var t=e.pricingSystems.find((function(e){return"month"===e.period})),n=e.pricingSystems.find((function(e){return"year"===e.period}));return t&&n?"-"+(100-n.amountInCents/(12*t.amountInCents)*100).toFixed(0)+"%":null}(e.subscriptionPlanWithPricingSystems):null;return(0,g.jsx)(a.I18n,{children:function(i){var a,c=i.i18n;return(0,g.jsxs)(p.Z,{background:e.background,style:(0,r.Z)({padding:n?8:16,border:"1px solid ".concat(t.text.color.disabled),maxWidth:n?void 0:350,minWidth:280,display:"flex",flex:1,position:"relative"},e.isHighlighted?{borderTopWidth:5,borderTopColor:t.palette.secondary}:{}),children:[v&&(0,g.jsxs)("span",{style:(0,r.Z)((0,r.Z)({},k.discountContainer),{},{backgroundColor:t.message.hot.backgroundColor,color:t.message.hot.color}),children:[(0,g.jsx)(Z.Z,{fontSize:"small"}),(0,g.jsx)(l.LZ,{}),(0,g.jsx)(s.Z,{color:"inherit",noMargin:!0,children:v})]}),(0,g.jsxs)(l.sg,{expand:!0,noMargin:!0,alignItems:"stretch",children:[(0,g.jsxs)(l.sg,{noMargin:!0,alignItems:"center",children:[h,(0,g.jsxs)(u.ak,{noMargin:!0,justifyContent:"space-between",alignItems:"center",children:[(0,g.jsx)(s.Z,{size:"block-title",noMargin:!0,children:(0,g.jsx)("span",{style:{textTransform:"uppercase"},children:(0,g.jsx)("b",{children:(0,y.a)(c,e.subscriptionPlanWithPricingSystems.nameByLocale)})})}),(0,g.jsx)(s.Z,{size:"section-title",noMargin:!0,align:"center",children:(0,g.jsx)("div",{style:{minHeight:82},children:(0,y.a)(c,e.subscriptionPlanWithPricingSystems.descriptionByLocale)})})]})]}),(0,g.jsx)(l.x1,{expand:!0,alignItems:"flex-start",children:(0,g.jsx)(l.sg,{noMargin:!0,children:e.subscriptionPlanWithPricingSystems.bulletPointsByLocale.map((function(n,i){return(0,g.jsx)(l.sg,{expand:!0,noMargin:!0,children:(0,g.jsxs)(l.x1,{noMargin:!0,alignItems:"center",children:[e.isHighlighted?(0,g.jsx)(d.Z,{style:(0,r.Z)((0,r.Z)({},k.bulletIcon),{},{color:t.message.valid})}):(0,g.jsx)(d.Z,{style:k.bulletIcon}),(0,g.jsx)(s.Z,{style:k.bulletText,children:(0,y.a)(c,n)})]})},i)}))})}),m&&(0,g.jsx)(p.Z,{background:"light",style:k.planPricesPaper,children:(0,g.jsxs)(u.pJ,{noMargin:!0,children:[x&&(0,g.jsx)("span",{style:k.discountedPrice,children:S({pricingSystems:[(a=x,(0,r.Z)((0,r.Z)({},a),{},{amountInCents:12*a.amountInCents,period:"year"}))]})}),x&&(0,g.jsx)(o.Z,{orientation:"vertical"}),S({pricingSystems:[m]})]})}),(0,g.jsx)(l.LZ,{}),e.actions&&(0,g.jsx)(u.ak,{noMargin:!0,alignItems:"center",justifyContent:"flex-end",children:e.actions})]})]})}})}},54998:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var r=n(1413),i=n(28381),a=n(36600),o=n(86278),s=n(40243),l=n(68151),c=n(92078),u=n(46976),d=n(61325),p=n(24910),f="SubscriptionPlanPricingSummary_choosePlanContainer__I5sB5",h=n(20914),g=n(60022),m=n(63854),x=n(50463),v=n(19345),b=n(3698),C=n(74394),j=n(42986),y=n(8511),Z=n(29343),k={paper:{display:"flex",alignItems:"center",flex:1,zIndex:2,padding:16},descriptionContainer:{minHeight:70},discountContainer:{padding:"4px 8px",borderRadius:4,display:"flex",alignItems:"center"},radioGroup:{flex:1},formControlLabel:{borderRadius:4,marginLeft:0,marginRight:0,cursor:"default"},discountedPrice:{textDecoration:"line-through"},discountChip:{height:24,backgroundColor:"#F03F18",color:"white"}},w=function(e,t){return"USD"===t?"$".concat(e/100):"".concat(e/100).concat("EUR"===t?"\u20ac":t)},T=function(e){var t=e.subscriptionPlanWithPricingSystems,n=e.disabled,T=e.onClickChoosePlan,S=e.seatsCount,P=e.setSeatsCount,I=e.period,E=e.setPeriod,M=e.onlyShowDiscountedPrice,L=i.useContext(p.Z),A=(0,u.sG)({planId:t.id,logoSize:12}),O=t.pricingSystems.find((function(e){return e.period===I})),R=t.pricingSystems.find((function(e){return"year"===e.period})),F=t.pricingSystems.find((function(e){return"month"===e.period}));if(!O||!R||!F)return console.error("No pricing system found for period",I,"in",t),null;var D,N=Math.floor(12*F.amountInCents),_=(D=F,"-"+(100-R.amountInCents/(12*D.amountInCents)*100).toFixed(0)+"%");return(0,Z.jsx)(a.I18n,{children:function(e){var i=e.i18n;return(0,Z.jsx)("div",{className:f,children:(0,Z.jsx)(h.Z,{background:"dark",style:k.paper,children:(0,Z.jsxs)(d.ak,{children:[(0,Z.jsxs)(s.x1,{alignItems:"center",justifyContent:"center",children:[A,(0,Z.jsx)(o.Z,{size:"block-title",children:(0,Z.jsx)("span",{style:{textTransform:"uppercase"},children:(0,Z.jsx)("b",{children:(0,c.a)(i,t.nameByLocale)})})})]}),(0,Z.jsx)(o.Z,{size:"section-title",noMargin:!0,align:"center",children:(0,Z.jsx)("div",{style:k.descriptionContainer,children:(0,c.a)(i,t.descriptionByLocale)})}),"gdevelop_education"===t.id&&!M&&(0,Z.jsx)(d.ak,{expand:!0,noMargin:!0,children:(0,Z.jsx)(j.Z,{value:S.toString(),floatingLabelFixed:!0,fullWidth:!0,floatingLabelText:(0,Z.jsx)(a.Trans,{id:"Number of seats"}),commitOnBlur:!0,type:"number",onChange:function(e){var t=parseInt(e);P(Math.min(l.VZ,Math.max(Number.isNaN(t)?l.Gs:t,l.Gs)))},min:l.Gs,max:l.VZ,step:1,helperMarkdownText:i._({id:"As a teacher, you will use one seat in the plan so make sure to include yourself!"})})},"options"),!M&&(0,Z.jsx)(s.x1,{noMargin:!0,expand:!0,children:(0,Z.jsxs)(x.Z,{value:I,onChange:function(e){E(e.target.value)},style:k.radioGroup,children:[(0,Z.jsx)(v.Z,{style:(0,r.Z)((0,r.Z)({},k.formControlLabel),{},{backgroundColor:"year"===I?L.paper.backgroundColor.light:L.paper.backgroundColor.medium}),value:"year",control:(0,Z.jsx)(b.Z,{color:"secondary",disabled:n}),label:(0,Z.jsxs)(s.x1,{children:[(0,Z.jsxs)(s.sg,{children:[(0,Z.jsx)(o.Z,{noMargin:!0,color:"inherit",size:"sub-title",children:R.isPerUser?(0,Z.jsx)(a.Trans,{id:"Yearly, {0} per seat",values:{0:w(R.amountInCents,R.currency)}}):(0,Z.jsx)(a.Trans,{id:"Yearly, {0}",values:{0:w(R.amountInCents,R.currency)}})}),(0,Z.jsx)(o.Z,{color:"secondary",noMargin:!0,children:(0,Z.jsx)(a.Trans,{id:"Instead of <0>{0}</0>",values:{0:w(N,R.currency)},components:[(0,Z.jsx)("span",{style:k.discountedPrice})]})})]}),(0,Z.jsx)(s.sg,{alignItems:"center",justifyContent:"center",children:(0,Z.jsxs)("span",{style:(0,r.Z)((0,r.Z)({},k.discountContainer),{},{backgroundColor:L.message.hot.backgroundColor,color:L.message.hot.color}),children:[(0,Z.jsx)(C.Z,{fontSize:"small"}),(0,Z.jsx)(s.LZ,{}),(0,Z.jsx)(o.Z,{color:"inherit",noMargin:!0,children:_})]})})]})}),(0,Z.jsx)(s.LZ,{}),(0,Z.jsx)(v.Z,{style:(0,r.Z)((0,r.Z)({},k.formControlLabel),{},{backgroundColor:"month"===I?L.paper.backgroundColor.light:L.paper.backgroundColor.medium}),value:"month",control:(0,Z.jsx)(b.Z,{color:"secondary",disabled:n}),label:(0,Z.jsx)(s.x1,{children:(0,Z.jsx)(s.sg,{children:(0,Z.jsx)(o.Z,{noMargin:!0,size:"sub-title",color:"inherit",children:F.isPerUser?(0,Z.jsx)(a.Trans,{id:"Monthly, {0} per seat",values:{0:w(F.amountInCents,F.currency)}}):(0,Z.jsx)(a.Trans,{id:"Monthly, {0}",values:{0:w(F.amountInCents,F.currency)}})})})})})]})}),!M&&(0,Z.jsx)(s.x1,{alignItems:"center",justifyContent:"center",children:(0,Z.jsx)(g.Z,{color:"premium",disabled:n,label:(0,Z.jsx)(m.Z,{isLoading:n,children:(0,Z.jsx)(o.Z,{size:"block-title",color:"inherit",children:(0,Z.jsx)(a.Trans,{id:"Choose this plan"})})}),onClick:function(){return T(O)},size:"large",fullWidth:!0},"upgrade")}),M&&(0,Z.jsxs)(s.sg,{children:[(0,Z.jsx)(s.x1,{alignItems:"center",justifyContent:"center",children:(0,Z.jsx)("span",{style:k.discountedPrice,children:(0,Z.jsx)(o.Z,{noMargin:!0,color:"secondary",children:F.isPerUser?(0,Z.jsx)(a.Trans,{id:"Monthly, {0} per seat",values:{0:w(F.amountInCents,F.currency)}}):(0,Z.jsx)(a.Trans,{id:"Monthly, {0}",values:{0:w(F.amountInCents,F.currency)}})})})}),(0,Z.jsx)(s.x1,{noMargin:!0,alignItems:"center",justifyContent:"center",children:(0,Z.jsx)(y.Z,{label:(0,Z.jsx)(a.Trans,{id:"Included"}),style:k.discountChip})})]})]})})})}})}},59202:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(36600),o=n(86278),s=n(40243),l=n(68151),c=n(92078),u=n(96591),d=n(2066),p=n(24910),f=n(42352),h=n(83607),g=n(60022),m=n(56885),x=n(29343),v={summarizeFeatureRow:{paddingTop:4,paddingBottom:4},tableRightItemContainer:{width:120,display:"flex",justifyContent:"center",alignItems:"center"},bulletText:{flex:1},bulletIcon:{width:20,height:20},unlimitedContainer:{padding:"4px 8px",borderRadius:4,display:"flex",alignItems:"center",color:"black"}};t.Z=function(e){var t=e.subscriptionPlanWithPricingSystems,n=e.displayedFeatures,b=e.hideFullTableLink,C=e.actionLabel,j=i.useContext(p.Z),y=i.useContext(m.J).openSubscriptionDialog;return(0,x.jsx)(a.I18n,{children:function(e){var i=e.i18n;return(0,x.jsxs)(s.sg,{justifyContent:"center",noMargin:!0,children:[(0,x.jsx)("div",{style:{backgroundColor:j.paper.backgroundColor.light},children:(0,x.jsx)(s.x1,{alignItems:"center",justifyContent:"flex-end",noMargin:!0,children:(0,x.jsx)("div",{style:v.tableRightItemContainer,children:(0,x.jsxs)(o.Z,{size:"sub-title",children:[(0,c.a)(i,t.nameByLocale)," "]})})})}),(0,l.rA)(i,t).filter((function(e){return!n||n.includes(e.featureName)})).map((function(e,t){return(0,x.jsx)(s.sg,{noMargin:!0,children:(0,x.jsx)("div",{style:(0,r.Z)((0,r.Z)({},v.summarizeFeatureRow),{},{borderTop:0!==t&&"1px solid ".concat(j.listItem.separatorColor)}),children:(0,x.jsxs)(s.x1,{noMargin:!0,alignItems:"center",justifyContent:"space-between",children:[(0,x.jsx)(o.Z,{style:v.bulletText,children:e.displayedFeatureName}),(0,x.jsx)("div",{style:v.tableRightItemContainer,children:"yes"===e.enabled?(0,x.jsx)(f.Z,{style:(0,r.Z)((0,r.Z)({},v.bulletIcon),{},{color:j.message.valid})}):"no"===e.enabled?(0,x.jsx)(h.Z,{style:v.bulletIcon}):e.unlimited?(0,x.jsx)("div",{style:(0,r.Z)((0,r.Z)({},v.unlimitedContainer),{},{backgroundColor:j.message.valid}),children:(0,x.jsxs)(o.Z,{noMargin:!0,color:"inherit",children:["\u221e ",(0,x.jsx)(a.Trans,{id:"Unlimited"})]})}):(0,x.jsx)(o.Z,{children:e.description})})]})})},t)})),C&&(0,x.jsx)(s.x1,{alignItems:"center",justifyContent:"flex-end",children:(0,x.jsx)("div",{style:v.tableRightItemContainer,children:(0,x.jsx)(g.Z,{color:"premium",label:C,onClick:function(){y({analyticsMetadata:{reason:"AI requests (subscribe)",recommendedPlanId:t.id,placementId:"ai-requests"}})}})})}),!b&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.hS,{}),(0,x.jsx)(s.x1,{noMargin:!0,justifyContent:"center",children:(0,x.jsx)(o.Z,{size:"body",color:"secondary",children:(0,x.jsx)(a.Trans,{id:"Compare all the advantages of the different plans in this <0>big feature comparison table</0>.",components:[(0,x.jsx)(u.Z,{href:"https://gdevelop.io/pricing#feature-comparison",onClick:function(){return d.ZP.openExternalURL("https://gdevelop.io/pricing#feature-comparison")}})]})})})]})]})}})}},79987:function(e,t,n){"use strict";var r=n(29439),i=n(36600),a=n(28381),o=n(10888),s=n(1773),l=n(71106),c=n(40243),u=n(75333),d=n(86278),p=n(68151),f=n(48409),h=n(3550),g=n(49522),m=n(61325),x=n(29343),v=a.forwardRef((function(e,t){var n=e.mode,v=e.id,b=e.title,C=e.onChangeSubscription,j=e.placementId,y=e.isNotShownDuringInAppTutorial,Z=a.useContext(l.ZP),k=a.useState(!1),w=(0,r.Z)(k,2),T=w[0],S=w[1],P=function(){(0,u.KT)(),S(!1)},I=a.useContext(h.Z).currentlyRunningInAppTutorial,E=function(){return(0,p.e_)(Z.subscription)||y&&I?(S(!1),!0):((0,f._F)()||(S(!0),(0,u.w1)({mode:n,id:v})),!1)},M=function(){return(0,p.e_)(Z.subscription)};return a.useImperativeHandle(t,(function(){return{checkUserHasSubscription:E,hasUserSubscription:M}})),(0,x.jsx)(s.ZP,{open:T,title:b,actions:[(0,x.jsx)(o.Z,{label:"try"===n?(0,x.jsx)(i.Trans,{id:"Continue anyway"}):(0,x.jsx)(i.Trans,{id:"Not now, thanks!"}),primary:!1,onClick:P},"close")],onRequestClose:P,maxWidth:"sm",children:(0,x.jsxs)(m.ak,{noMargin:!0,children:[(0,x.jsxs)(d.Z,{size:"sub-title",children:["\u2764\ufe0f ",(0,x.jsx)(i.Trans,{id:"Support What You Love"})]}),(0,x.jsx)(d.Z,{color:"secondary",children:(0,x.jsx)(i.Trans,{id:"Your membership helps the GDevelop company maintain servers, build new features and keep the open-source project thriving. Our goal: make game development fast, fun and accessible to all."})}),(0,x.jsx)(g.Z,{subscriptionDialogOpeningReason:v,label:(0,x.jsx)(i.Trans,{id:"Get Premium"}),onUpgrade:function(){C&&C(),S(!1)},recommendedPlanIdIfNoSubscription:"gdevelop_silver",placementId:j,children:(0,x.jsx)(c.sg,{noMargin:!0,expand:!0,children:(0,x.jsx)(d.Z,{children:(0,x.jsx)(i.Trans,{id:"Upgrade to get more cloud projects, publishing, multiplayer, courses and credits every month with GDevelop Premium."})})})})]})})}));t.Z=v},56885:function(e,t,n){"use strict";n.d(t,{J:function(){return Oe},q:function(){return Re}});var r=n(74165),i=n(15861),a=n(29439),o=n(1413),s=n(28381),l=n(93433),c=n(36600),u=n(10888),d=n(1773),p=n(71106),f=n(68151),h=n(30141),g=n(75333),m=n(2066),x=n(86278),v=n(61325),b=n(65056),C=n(46976),j=n(63854),y=n(60022),Z=n(42986),k=n(38092),w=n(78081),T=n(6996),S=n(96591),P=n(92078),I=n(60575),E=n.n(I),M=n(24893),L=n(86567),A=n(40243),O=n(29277),R=n(21601),F=n(78118),D=n(29343),N=s.memo((function(e){return(0,D.jsx)(F.Z,(0,o.Z)((0,o.Z)({},e),{},{width:"27",height:"26",viewBox:"0 0 27 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,D.jsx)("path",{d:"M13.5 0L17.5487 8.42749L26.8148 9.67376L20.0509 16.1285L21.729 25.3262L13.5 20.888L5.27101 25.3262L6.94912 16.1285L0.185208 9.67376L9.45133 8.42749L13.5 0Z",fill:"currentColor"})}))})),_=function(e){var t=e.onClose,n=e.onCloseAfterSuccess,o=s.useState(!1),l=(0,a.Z)(o,2),h=l[0],g=l[1],m=s.useState(!1),C=(0,a.Z)(m,2),j=C[0],y=C[1],Z=s.useState(!1),k=(0,a.Z)(Z,2),w=k[0],T=k[1],S=s.useState(!1),P=(0,a.Z)(S,2),I=P[0],E=P[1],F=s.useState(!1),_=(0,a.Z)(F,2),B=_[0],U=_[1],V=s.useState(!1),H=(0,a.Z)(V,2),z=H[0],W=H[1],G=s.useState(!1),Y=(0,a.Z)(G,2),q=Y[0],J=Y[1],X=s.useState(!1),K=(0,a.Z)(X,2),Q=K[0],$=K[1],ee=s.useState(""),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],ie=s.useContext(p.ZP),ae=(0,b.Z)().showAlert,oe=(w||I||B||q||z||Q)&&(!z&&!Q||ne.trim().length>0),se=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h&&oe){e.next=2;break}return e.abrupt("return");case 2:if(t=ie.getAuthorizationHeader,n=ie.subscription,(i=ie.profile)&&n){e.next=5;break}return e.abrupt("return");case 5:return g(!0),e.prev=6,e.next=9,(0,f.YB)(t,i.id,{planId:null},{cancelImmediately:!1,cancelReasons:{"stopped-making-games":w,"struggling-with-gdevelop":I,"prefer-free-version":B,"missing-feature":z,"quality-issues":q,other:Q,freeText:ne}});case 9:return e.next=11,ie.onRefreshSubscription();case 11:y(!0),e.next=20;break;case 14:return e.prev=14,e.t0=e.catch(6),e.next=18,ie.onRefreshSubscription();case 18:console.error("Error while canceling subscription:",e.t0),ae({title:{id:"Could not cancel your subscription"},message:{id:"There was an error while canceling your subscription. Verify your internet connection or try again later."}});case 20:return e.prev=20,g(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[6,14,20,23]])}))),[ie,ae,h,oe,ne,w,I,B,q,z,Q]),le=!ie.subscription||!ie.profile||h,ce=j?[(0,D.jsx)(d.vF,{label:(0,D.jsx)(c.Trans,{id:"Close"}),onClick:n,primary:!0},"close")]:[(0,D.jsx)(d.vF,{label:(0,D.jsx)(c.Trans,{id:"Submit and cancel"}),onClick:se,disabled:!oe||le,primary:!0},"submit")],ue=j?[]:[(0,D.jsx)(u.Z,{label:(0,D.jsx)(c.Trans,{id:"Back"}),onClick:t,disabled:le},"back")];return(0,D.jsx)(c.I18n,{children:function(e){e.i18n;return(0,D.jsx)(d.ZP,{title:null,actions:ce,secondaryActions:ue,open:!0,cannotBeDismissed:!0,onApply:se,maxWidth:"sm",children:j?(0,D.jsxs)(v.ak,{expand:!0,justifyContent:"center",alignItems:"center",children:[(0,D.jsx)(M.Z,{fontSize:"large"}),(0,D.jsx)(x.Z,{size:"block-title",align:"center",children:(0,D.jsx)(c.Trans,{id:"Your subscription has been canceled"})}),(0,D.jsxs)(v.pJ,{noMargin:!0,alignItems:"center",children:[(0,D.jsx)(N,{}),(0,D.jsx)(x.Z,{size:"sub-title",align:"center",children:(0,D.jsx)(c.Trans,{id:"Thank you for your feedback"})})]})]}):(0,D.jsxs)(v.ak,{expand:!0,justifyContent:"center",alignItems:"center",children:[(0,D.jsx)(M.Z,{fontSize:"large"}),(0,D.jsx)(x.Z,{size:"block-title",align:"center",children:(0,D.jsx)(c.Trans,{id:"Before you go..."})}),(0,D.jsx)(x.Z,{size:"body2",noMargin:!0,align:"center",children:(0,D.jsx)(c.Trans,{id:"Your feedback is valuable to help us improve our premium services. Why are you canceling your subscription?"})}),(0,D.jsx)(A.LZ,{}),(0,D.jsx)(L.Z,{onSubmit:se,autoComplete:"off",name:"cancel",fullWidth:!0,children:(0,D.jsxs)(v.ak,{noMargin:!0,expand:!0,children:[(0,D.jsx)(R.Z,{label:(0,D.jsx)(c.Trans,{id:"I've stopped using GDevelop"}),checked:w,onCheck:function(e,t){return T(t)},disabled:le}),(0,D.jsx)(R.Z,{label:(0,D.jsx)(c.Trans,{id:"I'm struggling to create what I want"}),checked:I,onCheck:function(e,t){return E(t)},disabled:le}),(0,D.jsx)(R.Z,{label:(0,D.jsx)(c.Trans,{id:"The free version is enough for me"}),checked:B,onCheck:function(e,t){return U(t)},disabled:le}),(0,D.jsx)(R.Z,{label:(0,D.jsx)(c.Trans,{id:"It's missing a feature (please specify)"}),checked:z,onCheck:function(e,t){return W(t)},disabled:le}),(0,D.jsx)(R.Z,{label:(0,D.jsx)(c.Trans,{id:"I have encountered bugs or performance problems"}),checked:q,onCheck:function(e,t){return J(t)},disabled:le}),(0,D.jsx)(R.Z,{label:(0,D.jsx)(c.Trans,{id:"Other reason (please specify)"}),checked:Q,onCheck:function(e,t){return $(t)},disabled:le}),(0,D.jsx)(A.LZ,{}),(0,D.jsx)(O.ZP,{autoFocus:"desktop",value:ne,multiline:!0,translatableHintText:{id:"Please tell us more"},floatingLabelText:(0,D.jsx)(c.Trans,{id:"Details"}),floatingLabelFixed:!0,onChange:function(e,t){re(t)},onBlur:function(e){re(e.currentTarget.value.trim())},fullWidth:!0,disabled:le,rows:4})]})})]})})}})},B=n(78265),U=n(32694),V=n(38295),H=n(38742),z=n(74394),W=n(84900),G=n(24910),Y={paper:{padding:10},buttonLabel:{fontWeight:"bold",cursor:"default"}},q=function(e){var t=e.title,n=e.message,r=e.onClickRightButton,i=e.rightButtonLabel,a=s.useContext(G.Z);return(0,D.jsx)(U.Z,{style:(0,o.Z)((0,o.Z)({},Y.paper),{},{backgroundColor:a.message.hot.backgroundColor,color:a.message.hot.color}),children:(0,D.jsxs)(A.x1,{noMargin:!0,alignItems:"center",children:[(0,D.jsx)(z.Z,{fontSize:"large"}),(0,D.jsxs)(A.sg,{expand:!0,children:[(0,D.jsx)(x.Z,{noMargin:!0,color:"inherit",size:"sub-title",children:t}),(0,D.jsx)(x.Z,{noMargin:!0,color:"inherit",children:n})]}),r&&i&&(0,D.jsxs)(A.x1,{alignItems:"center",children:[(0,D.jsx)(H.Z,{onClick:r,color:"inherit",children:(0,D.jsx)(V.Z,{color:"inherit",style:Y.buttonLabel,children:i})}),(0,D.jsx)(W.Z,{})]})]})})},J=n(20914),X={descriptionText:{marginLeft:16,marginRight:16},bulletIcon:{width:20,height:20,marginRight:10},bulletText:{flex:1},diamondIcon:{width:90,height:90,flexShrink:0,objectFit:"contain"},scrollablePlanCardsContainer:{display:"flex",flexDirection:"row",overflowX:"auto",justifyContent:"center"},planCardsContainer:{display:"inline-flex",flexDirection:"column",flex:1,gap:8,alignItems:"center",overflowY:"auto"},planCardsMobileContainer:{display:"inline-flex",flexDirection:"column",flex:1,gap:8,alignItems:"stretch",overflowY:"auto"},planCardsLineContainer:{display:"inline-flex",flexDirection:"row",alignItems:"stretch",gap:8,overflowY:"auto"},currentPlanPaper:{padding:"8px 12px"}},K={title:{id:"Cancel your subscription?"},message:{id:"By canceling your subscription, you will lose all your premium features at the end of the period you already paid for. Continue?"},confirmButtonLabel:{id:"Continue"},dismissButtonLabel:{id:"Keep subscription"},maxWidth:"sm"},Q={level:"normal",dialogTexts:{title:{id:"Update your subscription"},message:{id:"To get this new subscription, we need to stop your existing one before you can pay for the new one. This is immediate but your payment will NOT be pro-rated (you will pay the full price for the new subscription). You won't lose any project, game or other data."},confirmButtonLabel:{id:"Cancel and upgrade my subscription"},dismissButtonLabel:{id:"Go back"},maxWidth:"sm"}},$={level:"danger",dialogTexts:{title:{id:"Update your subscription"},message:{id:"To buy this new subscription, we need to stop your existing one before you can pay for the new one. This means the redemption code you're currently used won't be usable anymore."},confirmButtonLabel:{id:"Forfeit my redeemed subscription and continue"},dismissButtonLabel:{id:"Go back"},maxWidth:"sm"}},ee=function(e,t){return t?E()(t.map((function(t){return t.specificRequirementByLocale?(0,P.a)(e,t.specificRequirementByLocale):null})).filter(Boolean)):[]};function te(e){var t=e.onClose,n=e.availableSubscriptionPlansWithPrices,o=e.userLegacySubscriptionPlanWithPricingSystem,I=e.filter,E=e.onOpenPendingDialog,M=s.useState(!1),L=(0,a.Z)(M,2),O=L[0],R=L[1],F=s.useState(20),N=(0,a.Z)(F,2),U=N[0],V=N[1],H=s.useContext(p.ZP),z=s.useState(function(e,t){if(!e||!t)return null;var n=t.map((function(e){return e.pricingSystems})).flat().find((function(t){return t.id===e.pricingSystemId}));return n&&"week"!==n.period?n.period:null}(H.subscription,n)||"year"),W=(0,a.Z)(z,2),G=W[0],Y=W[1],te=(0,b.Z)(),ne=te.showConfirmation,re=te.showDeleteConfirmation,ie=s.useState(!1),ae=(0,a.Z)(ie,2),oe=ae[0],se=ae[1],le=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l,c,u,d,p,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=H.getAuthorizationHeader,a=H.subscription,(o=H.profile)&&a){e.next=3;break}return e.abrupt("return");case 3:if(n&&(0,g.Ct)({planId:n.planId,pricingSystemId:n.id}),a.planId||!n){e.next=10;break}return E(!0),s=n&&"gdevelop_education"===n.planId,l=s?U:void 0,m.ZP.openExternalURL((0,f.f3)({pricingSystemId:n.id,userId:o.id,userEmail:o.email,quantity:l})),e.abrupt("return");case 10:if(n){e.next=18;break}return e.next=13,ne(K);case 13:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:return se(!0),e.abrupt("return");case 18:if(c=!!a.redemptionCodeValidUntil&&a.redemptionCodeValidUntil>Date.now(),u=!!a.redemptionCodeValidUntil&&a.redemptionCodeValidUntil<Date.now(),!(d=u?null:c?$:Q)){e.next=35;break}if(p=d.level,x=d.dialogTexts,"danger"!==p){e.next=29;break}return e.next=26,re({title:x.title,message:x.message,confirmButtonLabel:x.confirmButtonLabel,dismissButtonLabel:x.dismissButtonLabel});case 26:e.t0=e.sent,e.next=32;break;case 29:return e.next=31,ne(x);case 31:e.t0=e.sent;case 32:if(e.t0){e.next=35;break}return e.abrupt("return");case 35:return R(!0),e.next=38,(0,g.py)({planId:n.planId,pricingSystemId:n.id});case 38:return e.prev=38,e.next=41,(0,f.YB)(i,o.id,{planId:null},{cancelImmediately:!0,cancelReasons:{"changing-subscription":!0}});case 41:return e.next=43,H.onRefreshSubscription();case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(38),(0,h.gR)({message:t._({id:"Your subscription could not be cancelled. Please try again later!"}),rawError:e.t1,errorId:"subscription-update-error"});case 48:return e.prev=48,R(!1),e.finish(48);case 51:E(!0),m.ZP.openExternalURL((0,f.f3)({pricingSystemId:n.id,userId:o.id,userEmail:o.email}));case 53:case"end":return e.stop()}}),e,null,[[38,45,48,51]])})));return function(t,n){return e.apply(this,arguments)}}(),ce=!H.subscription||!H.profile||O,ue=(0,f.e_)(H.subscription),de=!!H.subscription&&!!H.subscription.cancelAtPeriodEnd,pe=H.subscription?H.subscription.planId:null,fe=H.subscription?H.subscription.pricingSystemId:null,he=pe&&n?n.find((function(e){return e.id===pe})):null,ge=(0,T.UQ)(),me=ge.windowSize,xe=ge.isMobile,ve=n?[o].concat((0,l.Z)(n)).filter(Boolean).filter((function(e){return"individual"===I?ue?["free","gdevelop_silver","gdevelop_gold"].includes(e.id):["gdevelop_silver","gdevelop_gold"].includes(e.id):"team"===I?["gdevelop_startup","gdevelop_enterprise"].includes(e.id):"education"===I?["gdevelop_education"].includes(e.id):!["gdevelop_education","free"].includes(e.id)})):null,be=ve&&1!==ve.length?ve.length<3?"md":ve.length<4?"lg":ve.length<5&&"xl":"sm",Ce=function(e){var t=e.subscriptionPlansWithPricingSystems;if(!t)return 0;var n=0;return t.forEach((function(e){if(!e.isLegacy){var t=e.pricingSystems,r=t.find((function(e){return"month"===e.period})),i=t.find((function(e){return"year"===e.period}));if(r&&i){var a=100-i.amountInCents/(12*r.amountInCents)*100;a>n&&(n=a)}}})),n}({subscriptionPlansWithPricingSystems:n});return(0,D.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(d.ZP,{title:null,fullHeight:!0,maxWidth:be,actions:[(0,D.jsx)(u.Z,{label:(0,D.jsx)(c.Trans,{id:"Close"}),primary:!1,onClick:t},"close")],open:!0,children:[ue&&he&&(0,D.jsxs)(A.sg,{noMargin:!0,children:[(0,D.jsx)(x.Z,{children:(0,D.jsx)(c.Trans,{id:"Your plan:"})}),(0,D.jsx)(J.Z,{background:"medium",variant:"outlined",style:X.currentPlanPaper,children:(0,D.jsxs)(A.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,D.jsxs)(A.x1,{alignItems:"center",noMargin:!0,children:[(0,C.sG)({planId:he.id,logoSize:20}),(0,D.jsx)(x.Z,{size:"block-title",children:(0,P.a)(n,he.nameByLocale)})]}),!(0,f.mX)(H.subscription)&&!(0,f.iY)(H.subscription)&&!de&&"REDEMPTION_CODE"!==fe&&(0,D.jsx)(u.Z,{primary:!0,label:(0,D.jsx)(c.Trans,{id:"Cancel subscription"}),onClick:function(){return le(n,null)}})]})})]}),(0,D.jsxs)(v.ak,{noMargin:!0,children:[(0,D.jsxs)(A.x1,{justifyContent:"space-between",alignItems:"center",children:[(0,D.jsx)(x.Z,{size:"block-title",children:(0,D.jsx)(c.Trans,{id:"Get GDevelop Premium"})}),(0,D.jsx)(B.Z,{value:G,leftButton:{label:(0,D.jsx)(c.Trans,{id:"Monthly"}),value:"month"},rightButton:{label:(0,D.jsx)(c.Trans,{id:"Yearly"}),value:"year"},onChange:Y})]}),"year"!==G&&Ce>0&&(0,D.jsx)(q,{title:(0,D.jsx)(c.Trans,{id:"Up to {0}% discount",values:{0:Ce.toFixed(0)}}),message:(0,D.jsx)(c.Trans,{id:"Get a yearly subscription and enjoy discounts up to {0}%!",values:{0:Ce.toFixed(0)}}),onClickRightButton:function(){return Y("year")},rightButtonLabel:xe?(0,D.jsx)(c.Trans,{id:"Check out"}):(0,D.jsx)(c.Trans,{id:"See yearly subs"})}),de&&(0,D.jsx)(k.Z,{kind:"warning",children:(0,D.jsx)(c.Trans,{id:"Your subscription is being cancelled: you will lose the benefits at the end of the period you already paid for."})}),ve?(0,D.jsx)("div",{style:X.scrollablePlanCardsContainer,children:(0,D.jsx)("div",{style:"large"===me||"xlarge"===me?X.planCardsLineContainer:xe?X.planCardsMobileContainer:X.planCardsContainer,children:ve.map((function(e){var t="free"===e.id,r=pe===e.id,i=t?null:e.pricingSystems.find((function(e){return e.period===G})),a=null;if(t||!i);else if("gdevelop_education"===e.id)if(r)a=[(0,D.jsx)(x.Z,{children:(0,D.jsx)(c.Trans,{id:"Contact us for more information."})},"contact")];else{var o=e.pricingSystems.find((function(e){return"year"===e.period})),s=e.pricingSystems.find((function(e){return"month"===e.period}));o&&s&&(a=[(0,D.jsx)(v.ak,{expand:!0,noMargin:!0,children:(0,D.jsx)(Z.Z,{value:U.toString(),floatingLabelFixed:!0,fullWidth:!0,floatingLabelText:(0,D.jsx)(c.Trans,{id:"Number of seats"}),commitOnBlur:!0,type:"number",onChange:function(e){var t=parseInt(e);V(Math.min(f.VZ,Math.max(Number.isNaN(t)?f.Gs:t,f.Gs)))},min:f.Gs,max:f.VZ,step:1,helperMarkdownText:n._({id:"As a teacher, you will use one seat in the plan so make sure to include yourself!"})})},"options"),(0,D.jsx)(y.Z,{primary:!0,disabled:ce,fullWidth:!0,label:(0,D.jsx)(j.Z,{isLoading:ce,children:(0,D.jsx)(c.Trans,{id:"Choose this plan"})}),onClick:function(){return le(n,"year"===G?o:s)}},"upgrade")])}else if(r&&ue){var l=!!i&&i.id===fe;a=de?[(0,D.jsx)(u.Z,{disabled:!0,fullWidth:!0,label:(0,D.jsx)(j.Z,{isLoading:ce,children:(0,D.jsx)(c.Trans,{id:"Already cancelled - will expire in the future"})}),onClick:function(){}},"cancel")]:l?[(0,D.jsx)(u.Z,{disabled:ce,fullWidth:!0,label:(0,D.jsx)(j.Z,{isLoading:ce,children:(0,D.jsx)(c.Trans,{id:"Cancel your subscription"})}),onClick:function(){return le(n,null)}},"cancel")]:[(0,D.jsx)(y.Z,{disabled:ce,fullWidth:!0,label:(0,D.jsx)(j.Z,{isLoading:ce,children:"year"===G?(0,D.jsx)(c.Trans,{id:"Switch to yearly pricing"}):(0,D.jsx)(c.Trans,{id:"Switch to monthly pricing"})}),onClick:function(){return le(n,i)}},"switch")]}else{var d=e.pricingSystems.find((function(e){return e.period===G}));d&&(a=[(0,D.jsx)(y.Z,{color:"premium",disabled:ce,fullWidth:!0,label:(0,D.jsx)(j.Z,{isLoading:ce,children:(0,D.jsx)(c.Trans,{id:"Choose this plan"})}),onClick:function(){return le(n,d)}},"upgrade")])}return(0,D.jsx)(C.ZP,{subscriptionPlanWithPricingSystems:e,periodToDisplay:G,actions:a,isPending:ce,isHighlighted:r,background:"medium"},e.id||"free")}))})}):(0,D.jsx)(w.Z,{}),(0,D.jsx)(A.x1,{noMargin:!0,justifyContent:"center",children:(0,D.jsx)(x.Z,{size:"body",color:"secondary",children:(0,D.jsx)(c.Trans,{id:"Compare all the advantages of the different plans in this <0>big feature comparison table</0>.",components:[(0,D.jsx)(S.Z,{href:"https://gdevelop.io/pricing#feature-comparison",onClick:function(){return m.ZP.openExternalURL("https://gdevelop.io/pricing#feature-comparison")}})]})})}),(0,D.jsxs)(A.sg,{noMargin:!0,children:[(0,D.jsxs)(v.pJ,{noMargin:!0,children:[(0,D.jsx)(x.Z,{size:"sub-title",children:"\u2764\ufe0f"}),(0,D.jsx)(x.Z,{size:"sub-title",children:(0,D.jsx)(c.Trans,{id:"Support What You Love"})})]}),(0,D.jsx)(x.Z,{size:"body",color:"secondary",children:(0,D.jsx)(c.Trans,{id:"The GDevelop project is open-source, powered by passion and community. Your membership helps the GDevelop company maintain servers, build new features, develop commercial offerings and keep the open-source project thriving. Our goal: make game development fast, fun and accessible to all."})})]}),ee(n,ve).map((function(e){return(0,D.jsx)(k.Z,{kind:"info",children:e},e.substring(0,25))}))]})]}),(0,f.rq)(H.subscription)&&(0,D.jsx)(d.ZP,{open:!0,title:(0,D.jsx)(c.Trans,{id:"Subscription with the Apple App store or Google Play store"}),maxWidth:"sm",cannotBeDismissed:!0,actions:[(0,D.jsx)(u.Z,{label:(0,D.jsx)(c.Trans,{id:"Understood, I'll check my Apple or Google account"}),onClick:t},"close")],children:(0,D.jsx)(x.Z,{children:(0,D.jsx)(c.Trans,{id:"The subscription of this account was done using Apple or Google Play. Connect on your account on your Apple or Google device to manage it."})})}),!H.authenticated&&"loggingIn"!==H.loginState&&(0,D.jsx)(d.ZP,{open:!0,title:(0,D.jsx)(c.Trans,{id:"Create a GDevelop account to continue"}),maxWidth:"sm",cannotBeDismissed:!0,secondaryActions:[(0,D.jsx)(u.Z,{label:(0,D.jsx)(c.Trans,{id:"Maybe later"}),onClick:t},"later")],actions:[(0,D.jsx)(u.Z,{label:(0,D.jsx)(c.Trans,{id:"Login"}),onClick:H.onOpenLoginDialog},"login"),(0,D.jsx)(d.vF,{label:(0,D.jsx)(c.Trans,{id:"Create my account"}),primary:!0,onClick:function(){return H.onOpenCreateAccountDialog()}},"create-account")],children:(0,D.jsx)(x.Z,{children:(0,D.jsx)(c.Trans,{id:"Create an account to get started with GDevelop and access to cloud projects, cloud builds, game analytics, leaderboards and more."})})}),oe&&(0,D.jsx)(_,{onClose:function(){se(!1)},onCloseAfterSuccess:function(){se(!1),t()}})]})}})}var ne=n(48409),re=n(42016),ie=n(4942),ae=n(3798),oe=n(65111),se="SubscriptionOptions_optionAndBadgeContainer__LHi5H",le="SubscriptionOptions_optionContainer__4dzhX",ce="SubscriptionOptions_selected__497de",ue="SubscriptionOptions_recommendedBadge__ppqCD",de="SubscriptionOptions_mobile__Icohk",pe=n(82954),fe=n.n(pe),he={height:"100%",width:"100%",borderRadius:8,padding:8,cursor:"default",overflow:"hidden",boxSizing:"border-box",alignItems:"flex-start"},ge=function(e){var t,n,r=e.children,i=e.onClick,a=e.selected,l=e.recommended,u=e.disabled,d=(0,T.UQ)(),p=d.windowSize,f=d.isMobile,h=f||"medium"===p,g=s.useContext(G.Z);return(0,D.jsxs)("div",{className:se,children:[l&&(0,D.jsx)("div",{className:fe()((t={},(0,ie.Z)(t,ue,!0),(0,ie.Z)(t,de,f),t)),children:(0,D.jsx)(x.Z,{color:"inherit",noMargin:!0,children:h?(0,D.jsx)(c.Trans,{id:"Recommended"}):(0,D.jsx)(c.Trans,{id:"Recommended for you"})})}),(0,D.jsx)("div",{className:fe()((n={},(0,ie.Z)(n,le,!0),(0,ie.Z)(n,ce,a),n)),children:(0,D.jsx)(ae.Z,{onClick:i,elevation:2,style:(0,o.Z)((0,o.Z)({},he),{},{backgroundColor:a?g.paper.backgroundColor.dark:g.paper.backgroundColor.medium}),tabIndex:0,onKeyPress:function(e){(0,oe.ph)(e)&&!a&&i()},disableTouchRipple:a,disabled:u,children:r})})]})},me=function(e){var t=e.subscriptionPlansWithPricingSystems,n=e.selectedPlanId,r=e.recommendedPlanId,i=e.onClick,a=e.disabled;return(0,D.jsx)(c.I18n,{children:function(e){var o=e.i18n;return(0,D.jsx)(v.ep,{noMargin:!0,children:t.map((function(e,t){var s=n===e.id,l=r===e.id;return(0,D.jsx)(A.sg,{expand:!0,noMargin:!0,children:(0,D.jsx)(ge,{onClick:function(){return i(e.id)},selected:s,recommended:l,disabled:a,children:(0,D.jsxs)(A.sg,{expand:!0,noMargin:!0,children:[(0,D.jsxs)(v.pJ,{noMargin:!0,alignItems:"center",children:[(0,C.sG)({planId:e.id,logoSize:12}),(0,D.jsx)(x.Z,{noMargin:!0,align:"left",color:s?"primary":"secondary",children:(0,P.a)(o,e.nameByLocale)})]}),(0,D.jsx)(A.sg,{children:(0,D.jsx)(x.Z,{noMargin:!0,align:"left",color:s?"primary":"secondary",children:(0,P.a)(o,e.descriptionByLocale)})})]})})},e.id)}))})}})},xe=n(20928),ve=n(59202),be=n(54998),Ce=n(40480),je={simpleSizeContainer:{display:"flex",flex:1,justifyContent:"center",alignItems:"center"},doubleSizeContainer:{display:"flex",flex:2,justifyContent:"center",alignItems:"center"}},ye=function(e){var t=e.subscriptionPlanWithPricingSystems,n=e.disabled,r=e.onClickRedeemCode,i=e.onClickChoosePlan,o=e.seatsCount,l=e.setSeatsCount,d=(0,T.UQ)().windowSize,p="large"===d||"xlarge"===d,f=s.useState("year"),h=(0,a.Z)(f,2),g=h[0],m=h[1];return(0,D.jsx)(c.I18n,{children:function(e){e.i18n;return(0,D.jsxs)(v.ep,{expand:!0,noColumnMargin:!0,children:[(0,D.jsx)("div",{style:p?je.doubleSizeContainer:je.simpleSizeContainer,children:(0,D.jsx)(ve.Z,{subscriptionPlanWithPricingSystems:t})}),(0,D.jsx)("div",{style:je.simpleSizeContainer,children:(0,D.jsxs)(v.ak,{expand:!0,noMargin:!0,children:[(0,D.jsx)(be.Z,{subscriptionPlanWithPricingSystems:t,disabled:n,onClickChoosePlan:i,seatsCount:o,setSeatsCount:l,period:g,setPeriod:m}),(0,D.jsx)(Ce.Z,{includeCancelInformation:!0}),(0,D.jsx)(u.Z,{leftIcon:(0,D.jsx)(xe.Z,{}),label:(0,D.jsx)(c.Trans,{id:"Redeem a code"}),disabled:n,onClick:r,primary:!0},"redeem-code")]})})]})}})};function Ze(e){var t=e.onClose,n=e.availableSubscriptionPlansWithPrices,o=e.recommendedPlanId,l=e.onOpenPendingDialog,u=s.useState(!1),h=(0,a.Z)(u,2),b=h[0],C=h[1],j=s.useState(20),y=(0,a.Z)(j,2),Z=y[0],T=y[1],S=s.useState(!1),P=(0,a.Z)(S,2),I=P[0],E=P[1],M=s.useContext(p.ZP),L=s.useState(o),O=(0,a.Z)(L,2),R=O[0],F=O[1],N=s.useState(o),_=(0,a.Z)(N,2),B=_[0],U=_[1],V=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=M.subscription,(a=M.profile)&&i){e.next=3;break}return e.abrupt("return");case 3:if(!i.planId){e.next=5;break}return e.abrupt("return");case 5:(0,g.Ct)({planId:n.planId,pricingSystemId:n.id}),l(!0),o=n&&"gdevelop_education"===n.planId,s=o?Z:void 0,m.ZP.openExternalURL((0,f.f3)({pricingSystemId:n.id,userId:a.id,userEmail:a.email,quantity:s}));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=s.useMemo((function(){return n?n.filter((function(e){return e.pricingSystems.length>0})):null}),[n]);s.useEffect((function(){if(H&&!H.find((function(e){return e.id===o}))){var e=H[0].id;U(e),F(e)}}),[H,o]);var z=s.useMemo((function(){return H?H.find((function(e){return e.id===B})):null}),[H,B]),W=b;return(0,D.jsx)(c.I18n,{children:function(e){var a=e.i18n;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(d.ZP,{title:(0,D.jsx)(c.Trans,{id:"Get GDevelop Premium"}),subtitle:(0,D.jsx)(c.Trans,{id:"Choose a subscription to enjoy the best of game creation."}),open:!0,onRequestClose:t,minHeight:"lg",maxWidth:"lg",flexColumnBody:!0,topBackgroundSrc:"res/premium/premium_dialog_background.png",children:H&&z&&"loggingIn"!==M.loginState?(0,D.jsxs)(v.ak,{noMargin:!0,justifyContent:"space-between",expand:!0,children:[(0,D.jsxs)(v.ak,{expand:!0,noMargin:!0,children:[(0,D.jsx)(ye,{onClickRedeemCode:M.authenticated?function(){return E(!0)}:M.onOpenCreateAccountDialog,subscriptionPlanWithPricingSystems:z,disabled:W,onClickChoosePlan:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M.authenticated){e.next=4;break}M.onOpenCreateAccountDialog(),e.next=6;break;case 4:return e.next=6,V(a,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),seatsCount:Z,setSeatsCount:T}),(0,D.jsx)(me,{subscriptionPlansWithPricingSystems:H,selectedPlanId:B,recommendedPlanId:R,onClick:U,disabled:W})]}),(0,D.jsx)(A.x1,{children:(0,D.jsxs)(v.ak,{noMargin:!0,children:[(0,D.jsxs)(A.sg,{noMargin:!0,children:[(0,D.jsxs)(v.pJ,{noMargin:!0,children:[(0,D.jsx)(x.Z,{size:"sub-title",children:"\u2764\ufe0f"}),(0,D.jsx)(x.Z,{size:"sub-title",children:(0,D.jsx)(c.Trans,{id:"Support What You Love"})})]}),(0,D.jsx)(x.Z,{size:"body",color:"secondary",children:(0,D.jsx)(c.Trans,{id:"The GDevelop project is open-source, powered by passion and community. Your membership helps the GDevelop company maintain servers, build new features, develop commercial offerings and keep the open-source project thriving. Our goal: make game development fast, fun and accessible to all."})})]}),ee(a,n).map((function(e){return(0,D.jsx)(k.Z,{kind:"info",children:e},e.substring(0,25))}))]})})]}):(0,D.jsx)(w.Z,{})}),I&&(0,D.jsx)(re.Z,{authenticatedUser:M,onClose:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!1),!t){e.next=10;break}return e.prev=2,l(!0),C(!0),e.next=7,M.onRefreshSubscription();case 7:return e.prev=7,C(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[2,,7,10]])})));return function(t){return e.apply(this,arguments)}}()})]})}})}var ke=n(1589),we=n(49536),Te=n(21676),Se=n(66789),Pe=n(41418),Ie=n(36262);function Ee(e){var t=e.onClose,n=e.authenticatedUser,o=e.onSuccess,l=s.useRef(n.subscription?n.subscription.planId:null),p=(n.subscription?n.subscription.planId:null)!==l.current,h=!!n&&(0,f.u0)(n.subscription);(0,Te.Y)((function(){n.onRefreshSubscription().catch((function(){}))}),p?null:3900);var g=n&&n.profile?n.profile.discordUsername:null,m=s.useState(""),v=(0,a.Z)(m,2),b=v[0],C=v[1],y=s.useState(!1),Z=(0,a.Z)(y,2),k=Z[0],w=Z[1],T=s.useContext(Ie.ZP).values,S=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.profile){e.next=2;break}return e.abrupt("return");case 2:if(b){e.next=4;break}return e.abrupt("return");case 4:return w(!0),e.prev=5,e.next=8,n.onEditProfile({discordUsername:b},T);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Error while editing profile:",e.t0);case 13:return e.prev=13,w(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[5,10,13,16]])}))),[n,b,T]),P=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=3;break}return e.next=3,S();case 3:t();case 4:case"end":return e.stop()}}),e)}))),[t,S,b]);return s.useEffect((function(){p&&o()}),[p,o]),(0,D.jsx)(c.I18n,{children:function(e){var n=e.i18n;return(0,D.jsx)(d.ZP,{title:(0,D.jsx)(c.Trans,{id:"Confirming your subscription"}),actions:[p?(0,D.jsx)(j.Z,{isLoading:k,children:(0,D.jsx)(d.vF,{label:(0,D.jsx)(c.Trans,{id:"Done!"}),primary:!0,onClick:P,disabled:k})},"close"):(0,D.jsx)(u.Z,{label:(0,D.jsx)(c.Trans,{id:"Cancel and close"}),primary:!1,onClick:t,disabled:k},"close")],onRequestClose:t,maxWidth:"sm",open:!0,children:p?(0,D.jsxs)(A.sg,{noMargin:!0,children:[(0,D.jsx)(A.x1,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,D.jsxs)(x.Z,{children:[(0,D.jsx)(c.Trans,{id:"Thanks for getting a subscription and supporting GDevelop!"})," ","\ud83d\udc9c"]})}),(0,D.jsxs)(A.x1,{justifyContent:"center",alignItems:"center",children:[(0,D.jsx)(we.Z,{}),(0,D.jsx)(A.LZ,{}),(0,D.jsx)(x.Z,{children:(0,D.jsx)("b",{children:(0,D.jsx)(c.Trans,{id:"Your new plan is now activated."})})})]}),(0,D.jsx)(A.LZ,{}),(0,D.jsx)(A.x1,{justifyContent:"center",children:(0,D.jsx)(ke.Z,{children:(0,D.jsx)(c.Trans,{id:"Your account is upgraded, with the extra exports and online services. If you wish to change later, come back to your profile and choose another plan."})})}),!g&&h&&(0,D.jsx)(A.x1,{children:(0,D.jsx)(O.ZP,{value:b,fullWidth:!0,translatableHintText:{id:"Enter your Discord username"},onChange:function(e,t){C(t)},disabled:k,maxLength:Pe.RR.maxLength,helperMarkdownText:n._({id:"Add your Discord username to get access to a dedicated channel! Join the [GDevelop Discord](https://discord.gg/gdevelop)."})})})]}):(0,D.jsxs)(A.sg,{noMargin:!0,children:[(0,D.jsx)(A.x1,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,D.jsxs)(x.Z,{children:[(0,D.jsx)(c.Trans,{id:"Thanks for getting a subscription and supporting GDevelop!"})," ","\ud83d\udc9c"]})}),(0,D.jsx)(A.x1,{expand:!0,alignItems:"center",justifyContent:"center",noMargin:!0,children:(0,D.jsx)(x.Z,{children:(0,D.jsx)("b",{children:(0,D.jsx)(c.Trans,{id:"Your browser will now open to enter your payment details."})})})}),(0,D.jsxs)(A.x1,{justifyContent:"center",alignItems:"center",children:[(0,D.jsx)(Se.Z,{size:20}),(0,D.jsx)(A.LZ,{}),(0,D.jsx)(x.Z,{children:(0,D.jsx)(c.Trans,{id:"Waiting for the subscription confirmation..."})})]}),(0,D.jsx)(A.LZ,{}),(0,D.jsx)(A.x1,{justifyContent:"center",children:(0,D.jsx)(ke.Z,{children:(0,D.jsx)(c.Trans,{id:"Once you're done, come back to GDevelop and your account will be upgraded automatically, unlocking the extra exports and online services."})})})]})})}})}var Me=n(934),Le=n(19438),Ae=function(e,t){return e.map((function(e){if("free"===e.id)return(0,o.Z)((0,o.Z)({},e),{},{pricingSystems:[]});var n=t.filter((function(t){return t.planId===e.id}));return 0===n.length?null:(0,o.Z)((0,o.Z)({},e),{},{pricingSystems:n})})).filter(Boolean)},Oe=s.createContext({getSubscriptionPlansWithPricingSystems:function(){return null},getSubscriptionPlansWithPricingSystemsIncludingLegacy:function(){return null},openSubscriptionDialog:function(){},openSubscriptionPendingDialog:function(){}}),Re=function(e){var t=e.children,n=e.simulateMobileApp,l=s.useState(null),c=(0,a.Z)(l,2),u=c[0],d=c[1],h=u?u.recommendedPlanId:null,m=s.useState(null),x=(0,a.Z)(m,2),v=x[0],C=x[1],j=s.useContext(p.ZP),y=(0,b.Z)().showAlert,Z=s.useState(!1),k=(0,a.Z)(Z,2),w=k[0],T=k[1],S=j&&j.profile?j.profile.id:null,P=j?j.getAuthorizationHeader:null,I=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("Fetching subscription plans and pricing systems (includeLegacy=true, userId=".concat(S||"null",")...")),e.next=3,Promise.all([(0,f.nj)({includeLegacy:!0,getAuthorizationHeader:P,userId:S}),(0,f.Ri)({includeLegacy:!0,getAuthorizationHeader:P,userId:S})]);case 3:return t=e.sent,n=(0,a.Z)(t,2),i=n[0],s=n[1],l=Ae(i,s),e.abrupt("return",{subscriptionPlansWithPricingSystemsIncludingLegacy:l,subscriptionPlansWithPricingSystems:(r=l,r.filter((function(e){return!e.isLegacy})).map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{pricingSystems:e.pricingSystems.filter((function(e){return"active"===e.status}))})})))});case 9:case"end":return e.stop()}var r}),e)}))),[P,S]),E=(0,Le.o)(I),M=s.useCallback((function(){var e=E();return e?e.subscriptionPlansWithPricingSystems:null}),[E]),L=s.useCallback((function(){var e=E();return e?e.subscriptionPlansWithPricingSystemsIncludingLegacy:null}),[E]),A=s.useCallback((function(){return T(!0)}),[]),O=function(){return d(null)},R=s.useCallback((function(e){var t=e.analyticsMetadata,r=e.filter;if((0,ne._F)()||n){if((0,f.e_)(j.subscription)&&!(0,f.rq)(j.subscription))return void y({title:{id:"Subscription outside the app store"},message:{id:"The subscription of this account comes from outside the app store. Connect with your account on gdevelop.io from your web-browser to manage it."}})}else C(r||null),d(t)}),[j.subscription,y,n]),F=s.useCallback((function(){var e=M();if(!j.subscription||!j.subscription.planId||!j.subscription.pricingSystemId||!e)return null;var t=j.subscription,n=t.planId,r=t.pricingSystemId,i=e.find((function(e){return e.id===n}));if(!i||!i.isLegacy)return null;var a=i.pricingSystems.find((function(e){return e.id===r}));return a?(0,o.Z)((0,o.Z)({},i),{},{pricingSystems:[a]}):null}),[M,j.subscription]),N=s.useMemo((function(){return{getSubscriptionPlansWithPricingSystems:M,getSubscriptionPlansWithPricingSystemsIncludingLegacy:L,openSubscriptionDialog:R,openSubscriptionPendingDialog:A}}),[M,L,R,A]);return s.useEffect((function(){u&&(0,g.Bn)(u)}),[u]),(0,D.jsxs)(Oe.Provider,{value:N,children:[t,w&&(0,D.jsx)(Ee,{authenticatedUser:j,onClose:function(){T(!1),j.onRefreshSubscription()},onSuccess:O}),u?"loggingIn"===j.loginState?(0,D.jsx)(Me.Z,{showImmediately:!0}):!(0,f.e_)(j.subscription)&&h?(0,D.jsx)(Ze,{availableSubscriptionPlansWithPrices:M(),onClose:O,recommendedPlanId:h,onOpenPendingDialog:function(e){return T(e)}}):(0,D.jsx)(te,{availableSubscriptionPlansWithPrices:M(),userLegacySubscriptionPlanWithPricingSystem:F(),onClose:O,filter:v,onOpenPendingDialog:function(e){return T(e)}}):null]})}},45019:function(e,t,n){"use strict";n.d(t,{Jh:function(){return m},UT:function(){return g},js:function(){return h},uR:function(){return x}});var r=n(74165),i=n(15861),a=n(29439),o=n(36600),s=n(28381),l=n(66789),c=n(29277),u=n(41418),d=n(68009),p=n(29343),f={circularProgress:{height:20,width:20}},h=function(e,t){return!(!t||!t.allowEmpty||""!==e)||!!e&&/^[\w|-]+$/.test(e)&&e.length<31},g=(0,p.jsx)(o.Trans,{id:"Please pick a short username with only alphanumeric characters as well as _ and -"}),m=(0,p.jsx)(o.Trans,{id:"This username is already used, please pick another one."}),x=function(e){var t=e.initialUsername,n=e.value,x=e.onChange,v=e.errorText,b=e.allowEmpty,C=e.onAvailabilityChecked,j=e.onAvailabilityCheckLoading,y=e.isValidatingUsername,Z=e.disabled,k=h(n,{allowEmpty:!!b})?void 0:g,w=s.useState(null),T=(0,a.Z)(w,2),S=T[0],P=T[1],I=function(e){var t=e.usernameAvailability,n=e.error;C(t),P(n),j(!1)},E=(0,d.N)(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||t.toLowerCase()!==n.toLowerCase()){e.next=3;break}return I({usernameAvailability:{username:n,isAvailable:!0},error:null}),e.abrupt("return");case 3:if(n&&h(n,{allowEmpty:!!b})){e.next=6;break}return I({usernameAvailability:null,error:null}),e.abrupt("return");case 6:return e.prev=6,j(!0),e.next=10,(0,u.HW)(n);case 10:if(i=e.sent){e.next=15;break}throw new Error("Could not get username availability.");case 15:I({usernameAvailability:i,error:i.isAvailable?null:m});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),console.error("Unable to check username availability.",e.t0),I({usernameAvailability:null,error:null});case 22:return e.prev=22,j(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[6,18,22,25]])})));return function(t){return e.apply(this,arguments)}}(),500);return s.useEffect((function(){E(n)}),[n,E]),(0,p.jsx)(c.ZP,{autoFocus:"desktop",value:n,floatingLabelText:(0,p.jsx)(o.Trans,{id:"Username"}),fullWidth:!0,onChange:x,errorText:k||S||v,endAdornment:y&&(0,p.jsx)(l.Z,{style:f.circularProgress}),disabled:Z,maxLength:50})}},794:function(e,t,n){"use strict";n.d(t,{Cf:function(){return j},Ke:function(){return x},cX:function(){return b},gr:function(){return y},rM:function(){return Z},uB:function(){return C}});var r,i=n(1413),a=n(74165),o=n(15861),s=n(43144),l=n(15671),c=n(97326),u=n(60136),d=n(29388),p=n(98737),f=n(34517),h=n(4964),g=n(1236),m="cache-autosave:",x=function(){return r||(r=new g.Z)},v=function(e){(0,u.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,l.Z)(this,n),e=t.call(this),Error.captureStackTrace&&Error.captureStackTrace((0,c.Z)(e),n),e.name="CloudProjectReadingError",e}return(0,s.Z)(n)}((0,p.Z)(Error)),b=function(e){return function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n,r){var i,o,s,l,c,u,d,p;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=n.fileIdentifier).startsWith(m)){t.next=17;break}if(g.Z.isAvailable()){t.next=4;break}throw new Error("Cache is not available.");case 4:if(o=e.profile){t.next=7;break}throw new Error("User seems to not be logged in. Cannot retrieve autosaved file from cache.");case 7:return s=n.fileIdentifier.replace(m,""),l=x(),t.next=11,l.get({userId:o.id,cloudProjectId:s});case 11:if(c=t.sent){t.next=14;break}throw new Error("Could not find cache entry for project id ".concat(s,"."));case 14:return t.next=16,(0,f.LG)(e,s);case 16:return t.abrupt("return",{content:JSON.parse(c)});case 17:if(r&&r(25,{id:"Calibrating sensors"}),!n.ownerId){t.next=24;break}return t.next=21,(0,f.Fz)(e,i,n.ownerId);case 21:u=t.sent,t.next=27;break;case 24:return t.next=26,(0,f.Xj)(e,i);case 26:u=t.sent;case 27:if(u){t.next=29;break}throw new Error("Cloud project couldn't be fetched.");case 29:return r&&r(50,{id:"Starting engine"}),t.next=32,(0,f.LG)(e,i);case 32:return r&&r(75,{id:"Checking tools"}),t.next=35,(0,f.Sx)(u,n.version);case 35:return d=t.sent,r&&r(100,{id:"Opening portal"}),t.prev=37,t.next=40,(0,h.H)(d);case 40:return p=t.sent,t.abrupt("return",{content:JSON.parse(p)});case 44:throw t.prev=44,t.t0=t.catch(37),new v;case 47:case"end":return t.stop()}}),t,null,[[37,44]])})));return function(e,n){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n,r,i){var o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.fileIdentifier,t.next=3,(0,f.LG)(e,o);case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},j=function(e){return g.Z.isAvailable()?function(){var t=(0,o.Z)((0,a.Z)().mark((function t(n,r){var i,o,s,l,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.profile){t.next=3;break}return t.abrupt("return",null);case 3:return t.prev=3,o=n.fileIdentifier,s=x(),t.next=8,s.getCreationDate({userId:i.id,cloudProjectId:o});case 8:if(l=t.sent){t.next=11;break}return t.abrupt("return",null);case 11:if(r){t.next=13;break}return t.abrupt("return",l);case 13:if(c=n.lastModifiedDate){t.next=16;break}return t.abrupt("return",null);case 16:return t.abrupt("return",l>c+5e3?l:null);case 19:return t.prev=19,t.t0=t.catch(3),console.error("An error occurred while getting autosave creation date:",t.t0),t.abrupt("return",null);case 23:case"end":return t.stop()}}),t,null,[[3,19]])})));return function(e,n){return t.apply(this,arguments)}}():void 0},y=function(e){return g.Z.isAvailable()?function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)((0,i.Z)({},t),{},{fileIdentifier:m+t.fileIdentifier}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():void 0},Z=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.burst();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},527:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(74165),i=n(15861),a=n(34517),o=n(81303),s=n(36465),l=n(57974),c=n(72702),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,u,d,p,f,h,g,m,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,i=t.fileMetadata,u=t.authenticatedUser,d=t.onProgress,p={erroredResources:[]},f=i.fileIdentifier,h=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().map((function(e){var n=t.getResource(e),r=n.getFile();if((0,l.PX)(r)){if((0,s.bW)(r))return{resource:n,url:r,filename:(0,s.jV)(r)};if((0,l.Gu)(r)){var i=(0,l.OI)(n).extension;return{resource:n,url:r,filename:(0,c.B)(n.getName()+(i||""))}}return null}return p.erroredResources.push({resourceName:n.getName(),error:new Error("Unsupported relative file.")}),null})).filter(Boolean)},0!==(g=h(n)).length){e.next=7;break}return e.abrupt("return",p);case 7:return e.next=9,(0,o.R7)({urlContainers:g,onProgress:function(e,t){d(e,2*t)}});case 9:return m=e.sent,x=(0,o.At)(m,(function(e,t){p.erroredResources.push({resourceName:e,error:t})})),e.next=13,(0,a.LG)(u,f);case 13:return e.next=15,(0,a.ll)(u,f,x.map((function(e){return e.file})),(function(e,t){d(t+e,2*t)}));case 15:return e.sent.forEach((function(e,t){var n=e.url,r=e.error,i=x[t].resource;!r&&n?i.setFile(n):p.erroredResources.push({resourceName:i.getName(),error:r||new Error("Unknown error during upload.")})})),e.abrupt("return",p);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},10822:function(e,t,n){"use strict";n.d(t,{G:function(){return p}});var r=n(74165),i=n(15861),a=n(38428),o=n.n(a),s=n(34517),l=n(85919),c=n(81303),u=n(57974),d=n(36465),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,p,f,h,g,m,x,v,b,C,j;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,a=t.authenticatedUser,p=t.oldFileMetadata,f=t.newFileMetadata,t.oldStorageProvider,h=t.oldStorageProviderOperations,t.newStorageProvider,t.newStorageProviderOperations,g=t.onProgress,m={erroredResources:[]},x=f.fileIdentifier,v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,c,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getResourcesManager(),c=n.getAllResourceNames().toJSArray(),p=[],e.next=5,(0,d._w)({authenticatedUser:a,allResourcePaths:c.map((function(e){return n.getResource(e).getFile()}))});case 5:return f=e.sent,e.next=8,o().withConcurrency(50).for(c).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,a,o,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.getResource(t),a=i.getFile(),!(0,u.PX)(a)){e.next=24;break}if(!(0,l.yk)(a)){e.next=9;break}if((0,s.u_)(a)!==x){e.next=6;break}return e.abrupt("return");case 6:p.push({resource:i,url:a,filename:(0,s.dh)(a)}),e.next=22;break;case 9:if(!(0,d.uG)(a)||!f){e.next=16;break}(o=new URL(a)).searchParams.set("token",f),c=o.href,p.push({resource:i,url:c,filename:(0,d.jV)(a)}),e.next=22;break;case 16:if(!(0,u.Gu)(a)){e.next=21;break}return m.erroredResources.push({resourceName:i.getName(),error:new Error("Unsupported blob URL.")}),e.abrupt("return");case 21:return e.abrupt("return");case 22:e.next=26;break;case 24:return m.erroredResources.push({resourceName:i.getName(),error:new Error("Unsupported relative file.")}),e.abrupt("return");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",p);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=6,v(n);case 6:return b=e.sent,h.onEnsureCanAccessResources&&h.onEnsureCanAccessResources(n,p),e.next=10,(0,c.R7)({urlContainers:b,onProgress:function(e,t){g(e,2*t)}});case 10:return C=e.sent,j=(0,c.At)(C,(function(e,t){m.erroredResources.push({resourceName:e,error:t})})),e.next=14,(0,s.LG)(a,x);case 14:return e.next=16,(0,s.ll)(a,x,j.map((function(e){return e.file})),(function(e,t){g(t+e,2*t)}));case 16:return e.sent.forEach((function(e,t){var n=e.url,r=e.error,i=j[t].resource;!r&&n?i.setFile(n):m.erroredResources.push({resourceName:i.getName(),error:r||new Error("Unknown error during upload.")})})),e.abrupt("return",m);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},71799:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(74165),i=n(15861),a=(n(28381),n(1413)),o=n(29439),s=n(34517),l=n(41006),c=n(4964),u=n(1236),d=n(794),p=n(997),f=n(91),h=n(61785),g=n(29343),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.h_)(t),e.next=3,(0,c.G)(n,"game.json");case 3:return i=e.sent,e.abrupt("return",[i,n]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.H)(t);case 3:return i=e.sent,e.abrupt("return",i===n&&!!JSON.parse(i));case 7:return e.prev=7,e.t0=e.catch(0),console.error("An error occurred when checking zipped project.",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,l,c,u,d,f,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.authenticatedUser,i=t.project,a=t.cloudProjectId,l=t.options,e.next=3,m(i);case 3:return c=e.sent,u=(0,o.Z)(c,2),d=u[0],f=u[1],e.next=9,x(d,f);case 9:if(e.sent){e.next=12;break}throw new Error("Project compression failed before saving the project.");case 12:return e.next=14,(0,p.x)({times:2},(function(){return(0,s.Z7)({authenticatedUser:n,cloudProjectId:a,zippedProject:d,previousVersion:l?l.previousVersion:null,restoredFromVersionId:l?l.restoredFromVersionId:null})}));case 14:return h=e.sent,e.abrupt("return",h);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o){var l,c,u,d,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=i.fileIdentifier,c=n.getProjectUuid(),u=Date.now(),i.gameId){t.next=13;break}return console.info("Game id was never set, updating the cloud project."),t.prev=5,t.next=8,(0,s.np)(e,l,{gameId:c});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),console.error("Could not update cloud project with gameId",t.t0);case 13:return t.next=15,v({authenticatedUser:e,project:n,cloudProjectId:l,options:o});case 15:if(d=t.sent,p=(0,a.Z)((0,a.Z)({},i),{},{gameId:c,lastModifiedDate:u}),d){t.next=19;break}return t.abrupt("return",{wasSaved:!1,fileMetadata:p});case 19:return p.version=d,t.abrupt("return",{wasSaved:!0,fileMetadata:p});case 21:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,n,r){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.authenticated){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,(0,s.np)(e,i.fileIdentifier,a);case 5:return t.next=7,v({authenticatedUser:e,project:n,cloudProjectId:i.fileIdentifier});case 7:if(o=t.sent){t.next=10;break}throw new Error("Couldn't save project following property update.");case 10:return t.abrupt("return",{version:o,lastModifiedDate:Date.now()});case 13:return t.prev=13,t.t0=t.catch(2),console.warn("An error occurred while changing cloud project name. Ignoring.",t.t0),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()},j=function(e){var t=(0,f.T)(e);return t&&"project-creation/too-many-projects"===t.code?{id:"You've reached the limit of cloud projects you can have. Delete some existing cloud projects of yours before trying again."}:{id:"An error occurred when saving the project, please verify your internet connection or try again later."}},y=function(e){var t=e.authenticatedUser,n=e.setDialog,a=e.closeDialog;return function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var o,l,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.project,l=i.fileMetadata,c=i.displayOptionToGenerateNewProjectUuid,t.authenticated){e.next=3;break}return e.abrupt("return",{saveAsLocation:null,saveAsOptions:null});case 3:return e.next=5,new Promise((function(e){n((function(){return(0,g.jsx)(h.Z,{onCancel:function(){a(),e(null)},nameMaxLength:s.v9,nameSuggestion:l?"".concat(o.getName()," - Copy"):o.getName(),displayOptionToGenerateNewProjectUuid:c,onSave:function(t){a(),e(t)}})}))}));case 5:if(u=e.sent){e.next=8;break}return e.abrupt("return",{saveAsLocation:null,saveAsOptions:null});case 8:return e.abrupt("return",{saveAsLocation:{name:u.name},saveAsOptions:{generateNewProjectUuid:u.generateNewProjectUuid}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Z=function(e,t,n){return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var o,l,c,u,d,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i){t.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(o=i.name){t.next=5;break}throw new Error("A name was not chosen before saving as.");case 5:if(e.authenticated){t.next=7;break}return t.abrupt("return",{wasSaved:!1,fileMetadata:null});case 7:return a.onStartSaving(),l=n.getProjectUuid(),t.prev=9,t.next=12,(0,s.eM)(e,{name:o,gameId:l});case 12:if(c=t.sent){t.next=15;break}throw new Error("No cloud project was returned from creation api call.");case 15:return u=c.id,d={fileIdentifier:u,gameId:l},t.next=19,a.onMoveResources({newFileMetadata:d});case 19:return t.next=21,(0,s.LG)(e,u);case 21:return t.next=23,v({authenticatedUser:e,project:n,cloudProjectId:u});case 23:if(p=t.sent){t.next=26;break}throw new Error("No version id was returned from committing api call.");case 26:return d.version=p,t.abrupt("return",{wasSaved:!0,fileMetadata:d});case 30:throw t.prev=30,t.t0=t.catch(9),console.error("An error occurred while creating a cloud project",t.t0),t.t0;case 34:case"end":return t.stop()}}),t,null,[[9,30]])})));return function(e,n,r){return t.apply(this,arguments)}}()},k=function(e){var t=e.projectName;e.saveAsLocation,e.newProjectsDefaultFolder;return{name:t}},w=function(e){return u.Z.isAvailable()?function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){var a,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.profile){t.next=3;break}return t.abrupt("return");case 3:o=i.fileIdentifier,(0,d.Ke)().put({userId:a.id,cloudProjectId:o},n);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}():void 0},T=n(2066),S=n(34294),P=n(36600),I=n(50057),E=n.n(I),M=n(19431),L=n(72410),A=E()("path"),O=E()("@electron/remote"),R=O?O.shell:null,F=O?O.app:null,D=n(93453),N=n(41418),_={internalName:"Cloud",name:{id:"GDevelop Cloud"},renderIcon:function(e){return(0,g.jsx)(S.Z,{fontSize:e.size})},hiddenInOpenDialog:!0,needUserAuthentication:!0,getFileMetadataFromAppArguments:function(e){if(!e[T.rM])return null;if(!e[T.rM].length)return null;var t,n=e[T.rM][0];return(t=n).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:")?null:{fileIdentifier:n}},getProjectLocation:k,renderNewProjectSaveAsLocationChooser:function(e){var t=e.projectName,n=e.saveAsLocation,r=e.setSaveAsLocation,i=e.newProjectsDefaultFolder;return n&&n.name===t||r(k({projectName:t,saveAsLocation:n,newProjectsDefaultFolder:i})),null},createOperations:function(e){var t=e.setDialog,n=e.closeDialog,a=e.authenticatedUser;return{onOpen:(0,d.cX)(a),onEnsureCanAccessResources:(0,d.uB)(a),onSaveProject:b(a),onChooseSaveProjectAsLocation:y({authenticatedUser:a,setDialog:t,closeDialog:n}),onSaveProjectAs:Z(a),onAutoSaveProject:w(a),getAutoSaveCreationDate:(0,d.Cf)(a),onGetAutoSave:(0,d.gr)(a),onChangeProjectProperty:C(a),getOpenErrorMessage:function(e){return{id:"An error occurred when opening the project. Check that your internet connection is working and that your browser allows the use of cookies."}},getWriteErrorMessage:j,canFileMetadataBeSafelySaved:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,l,c,u,d,p,f,h,g,m,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fileIdentifier,o=t.version,e.next=4,(0,s.Xj)(a,i);case 4:if(l=e.sent){e.next=9;break}return e.next=8,n.showAlert({title:{id:"Unable to save the project"},message:{id:"The project could not be saved. Please try again later."}});case 8:return e.abrupt("return",!1);case 9:if(c=l.currentVersion,u=l.committedAt,!(o&&c&&u&&c!==o)){e.next=25;break}if(d=null,p=new Date(u),f=(0,D.Z)(p,"dd-MM-yyyy"),h=(0,D.Z)(p,"HH:mm:ss"),!(g=l.lastCommittedBy)){e.next=21;break}return e.next=19,(0,N.D1)(g);case 19:(m=e.sent)&&(d=m.username);case 21:return e.next=23,n.showConfirmation({title:{id:"Project was modified"},message:d?{id:"This project was modified by {lastUsernameWhoModifiedProject} on the {formattedDate} at {formattedTime}. Do you want to overwrite their changes?",values:{lastUsernameWhoModifiedProject:d,formattedDate:f,formattedTime:h}}:{id:"This project was modified by someone else on the {formattedDate} at {formattedTime}. Do you want to overwrite their changes?",values:{formattedDate:f,formattedTime:h}},level:"warning",confirmButtonLabel:{id:"Overwrite"},makeDismissButtonPrimary:!0});case 23:return x=e.sent,e.abrupt("return",x);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},createResourceOperations:function(e){e.authenticatedUser;return function(e){var t=e.project,n=e.resource,a=e.i18n,o=(e.fileMetadata,e.informUser),s=F&&A?{id:'Save in the "Downloads" folder'}:{id:"Open resource in browser"},l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i){var a,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.askUserForDownloadDestination,s=L.Z.getResourceFullUrl(t,n.getName(),{}),!(F&&A&&R)){e.next=16;break}if(l=A.join(F.getPath("downloads"),n.getName()),!a){e.next=10;break}if(c=O.dialog.showSaveDialogSync(null,{defaultPath:l,properties:["createDirectory","showOverwriteConfirmation"]})){e.next=8;break}return e.abrupt("return");case 8:e.next=11;break;case 10:c=l;case 11:return e.next=13,(0,M.t)({urlContainers:[{url:s,filePath:c}],onProgress:function(){},throwIfAnyError:!1});case 13:o({actionLabel:(0,g.jsx)(P.Trans,{id:"Open folder"}),message:(0,g.jsx)(P.Trans,{id:"The resource has been downloaded"}),onActionClick:function(){return R.showItemInFolder(A.resolve(c))}}),e.next=17;break;case 16:T.ZP.openExternalURL(s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=[{label:a._(s),click:function(){return l({askUserForDownloadDestination:!1})}}];return F&&A&&c.push({label:a._({id:"Save as..."}),click:function(){return l({askUserForDownloadDestination:!0})}}),c}}}},56924:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var r=n(29439),i=n(28381),a=n(71106),o=n(29343),s={internalName:"Empty",name:"No storage",createOperations:function(){return{}}};t.Z=function(e){var t=i.useRef(null),n=i.useRef(null),l=i.useState(null),c=(0,r.Z)(l,2),u=c[0],d=c[1],p=function(e,t,n){var r=t.map((function(e){return{currentStorageProvider:e,initialFileMetadataToOpen:e.getFileMetadataFromAppArguments?e.getFileMetadataFromAppArguments(n):null}})).filter((function(e){return!!e.initialFileMetadataToOpen}));return 0===r.length?{currentStorageProvider:e,initialFileMetadataToOpen:null}:(r.length>1&&console.warn("More than one storage provider can understand the app arguments. Selecting the first one."),r[0])}(e.defaultStorageProvider,e.storageProviders,e.appArguments),f=i.useRef(p.currentStorageProvider),h=i.useContext(a.ZP),g=i.useCallback((function(e){d((function(){return e}))}),[d]),m=i.useCallback((function(){d(null)}),[]),x=i.useCallback((function(e){if(!e)return t.current||(f.current=s,n.current=null,t.current=s.createOperations({setDialog:g,closeDialog:m,authenticatedUser:h})),t.current;if(e===f.current&&t.current)return t.current;var r=e.createOperations({setDialog:g,closeDialog:m,authenticatedUser:h});return!!r.onOpen&&(f.current=e,t.current=r,n.current=e.createResourceOperations?e.createResourceOperations({authenticatedUser:h}):null),r}),[h,g,m]),v=i.useCallback((function(){return f.current||s}),[]),b=i.useCallback((function(){return n.current}),[]);return i.useEffect((function(){var e=f.current;e&&(t.current=e.createOperations({setDialog:g,closeDialog:m,authenticatedUser:h}),n.current=e.createResourceOperations?e.createResourceOperations({authenticatedUser:h}):null)}),[h,g,m]),(0,o.jsxs)(i.Fragment,{children:[e.children({storageProviders:e.storageProviders,getStorageProviderOperations:x,initialFileMetadataToOpen:p.initialFileMetadataToOpen,getStorageProvider:v,getStorageProviderResourceOperations:b}),u&&u()]})}},61785:function(e,t,n){"use strict";var r=n(29439),i=n(28381),a=n(36600),o=n(1773),s=n(10888),l=n(29277),c=n(81683),u=n(90242),d=n(61325),p=n(29343);t.Z=function(e){var t=i.useState(e.nameSuggestion),n=(0,r.Z)(t,2),f=n[0],h=n[1],g=i.useState(!e.displayOptionToGenerateNewProjectUuid),m=(0,r.Z)(g,2),x=m[0],v=m[1],b=i.useState(null),C=(0,r.Z)(b,2),j=C[0],y=C[1],Z=function(t){y(null),f?e.onSave({name:f,generateNewProjectUuid:x}):y(t._({id:"Project name cannot be empty."}))};return(0,p.jsx)(a.I18n,{children:function(t){var n=t.i18n;return(0,p.jsx)(o.ZP,{title:(0,p.jsx)(a.Trans,{id:"Save project as"}),onApply:function(){return Z(n)},actions:[(0,p.jsx)(s.Z,{label:(0,p.jsx)(a.Trans,{id:"Cancel"}),primary:!1,onClick:e.onCancel},"cancel"),(0,p.jsx)(o.vF,{label:e.mainActionLabel||(0,p.jsx)(a.Trans,{id:"Save"}),primary:!0,onClick:function(){return Z(n)}},"save")],open:!0,onRequestClose:e.onCancel,maxWidth:"sm",flexBody:!0,children:(0,p.jsxs)(d.ak,{noMargin:!0,expand:!0,children:[(0,p.jsx)(l.ZP,{autoFocus:"desktop",fullWidth:!0,maxLength:e.nameMaxLength,errorText:j,type:"text",value:f,floatingLabelText:(0,p.jsx)(a.Trans,{id:"Project name"}),onChange:function(e,t){h(t)}}),e.displayOptionToGenerateNewProjectUuid&&(0,p.jsxs)(c.Z,{value:x?"generate":"keep",onChange:function(e,t,n){return v("generate"===n)},children:[(0,p.jsx)(u.Z,{label:{id:"Keep the new project linked to this game"},value:"keep"}),(0,p.jsx)(u.Z,{label:{id:"Start a new game from this project"},value:"generate"})]})]})})}})}},58271:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var r=n(74165),i=n(15861),a=n(38428),o=n.n(a),s=n(14446),l=n.n(s),c=n(57974),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,s,u,d,p,f,h,g,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,a=t.fileMetadata,s=t.onProgress,u=n.getResourcesManager(),d=u.getAllResourceNames().toJSArray(),p=[],f=a.fileIdentifier,h=f.substr(0,f.lastIndexOf("/")+1),(0,c.MX)(h)){e.next=8;break}return e.abrupt("return",{erroredResources:[]});case 8:return g=0,m=d.filter((function(e){var t=u.getResource(e);return!(0,c.PX)(t.getFile())})),e.next=12,o().withConcurrency(20).for(m).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.getResource(t),e.prev=1,i=new URL(n.getFile(),h).href,e.next=5,l().get(i,{timeout:3e3});case 5:n.setFile(i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),p.push({resourceName:t,error:e.t0});case 11:s(g++,m.length);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}());case 12:return e.abrupt("return",{erroredResources:p});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},8018:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(14446),o=n.n(a),s=n(2066),l=function(e){return e.startsWith("example://")};t.Z={internalName:"UrlStorageProvider",name:{id:"URL"},hiddenInOpenDialog:!0,hiddenInSaveDialog:!0,getFileMetadataFromAppArguments:function(e){if(!e[s.rM])return null;if(!e[s.rM].length)return null;var t,n=e[s.rM][0];return(t=n).startsWith("http://")||t.startsWith("https://")||t.startsWith("ftp://")||t.startsWith("blob:")||t.startsWith("data:")||l(n)?{fileIdentifier:n}:null},createOperations:function(e){e.setDialog,e.closeDialog;return{onOpen:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileIdentifier,l(n)&&(i=n.replace("example://",""),n="https://resources.gdevelop-app.com/examples/".concat(i,"/").concat(i,".json")),e.next=4,o().get(n);case 4:if((a=e.sent).data){e.next=7;break}throw new Error("Can't parse data from the URL (is it valid JSON?)");case 7:return e.abrupt("return",{content:a.data});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}},13923:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(36600),i=(n(28381),n(40243)),a=n(86278),o=n(29343);function s(e){var t=e.label,n=e.description,s=e.elementsWithWords;return(0,o.jsxs)(i.sg,{noMargin:!0,children:[(0,o.jsx)(a.Z,{size:"sub-title",children:t}),n&&(0,o.jsx)(a.Z,{size:"body",children:n}),s&&(0,o.jsx)(a.Z,{size:"body",children:(0,o.jsx)("i",{children:(0,o.jsx)(r.Trans,{id:"in {elementsWithWords}",values:{elementsWithWords:s}})})})]})}},25777:function(e,t,n){"use strict";n.d(t,{k:function(){return g}});var r=n(29439),i=n(36600),a=n(28381),o=n(57309),s=n(86578),l=n(40243),c=n(10888),u=n(86278),d=n(3108),p=n(61325),f=n(70834),h=n(29343),g=function(e){return!e.every((function(e){return e.isHiddenWhenOnlyOneChoice&&e.getChoices&&e.getChoices().length<=1}))};t.Z=function(e){var t=e.onInstancesModified,n=e.instances,m=e.schema,x=(e.object,e.renderExtraDescriptionText),v=e.unsavedChanges,b=e.project,C=e.projectScopedContainersAccessor,j=e.resourceManagementProps,y=e.placeholder,Z=a.useState(!1),k=(0,r.Z)(Z,2),w=k[0],T=k[1],S=a.useMemo((function(){return(0,f.Gt)(m,"basic")}),[m]),P=a.useMemo((function(){return(0,f.Gt)(m,"advanced")}),[m]),I=a.useMemo((function(){return(0,f.Gt)(m,"deprecated")}),[m]),E=a.useMemo((function(){return g(S)||g(P)||I.length>0}),[S,P,I]),M=a.useMemo((function(){return(0,f.M2)(P,n)}),[n,P]);return E?(0,h.jsxs)(p.ak,{expand:!0,noMargin:!0,children:[(0,h.jsx)(o.Z,{project:b,schema:S,instances:n,onInstancesModified:t,resourceManagementProps:j,projectScopedContainersAccessor:C,renderExtraDescriptionText:x,unsavedChanges:v}),(P.length>0||I.length>0)&&(0,h.jsxs)(d.UQ,{defaultExpanded:M,noMargin:!0,children:[(0,h.jsx)(d._m,{noMargin:!0,children:(0,h.jsx)(u.Z,{size:"sub-title",children:(0,h.jsx)(i.Trans,{id:"Advanced properties"})})}),(0,h.jsx)(d.X1,{disableGutters:!0,children:(0,h.jsxs)(l.sg,{expand:!0,noMargin:!0,children:[(0,h.jsx)(o.Z,{project:b,schema:P,instances:n,onInstancesModified:t,resourceManagementProps:j,projectScopedContainersAccessor:C,renderExtraDescriptionText:x,unsavedChanges:v}),I.length>0&&(w?(0,h.jsx)(o.Z,{project:b,schema:I,instances:n,onInstancesModified:t,resourceManagementProps:j,projectScopedContainersAccessor:C,renderExtraDescriptionText:x,unsavedChanges:v}):(0,h.jsx)(l.x1,{justifyContent:"center",children:(0,h.jsx)(c.Z,{label:(0,h.jsx)(i.Trans,{id:"Show deprecated options"}),onClick:function(){return T(!0)}},"show-deprecated")}))]})})]})]}):y&&(0,h.jsx)(l.sg,{expand:!0,children:(0,h.jsx)(s.Z,{children:y})})}},94258:function(e,t,n){"use strict";n.d(t,{ew:function(){return h},jz:function(){return x}});var r=n(37762),i=n(93433),a=(n(28381),n(18455)),o=n(13923),s=n(50326),l=n(29343),c=n.g.gd,u=function(e,t,n,r,c,u,d,p,f,h,g){var m=t.getDescription(),v=function(t){var n=h(t).get(e).getLabel();return n||e.charAt(0).toUpperCase()+e.slice(1).split(/(?=[A-Z])/).join(" ")},b=function(){return m},C=t.isDeprecated()?"deprecated":t.isAdvanced()?"advanced":"basic",j=t.getType().toLowerCase();if("number"===j)return{name:e,valueType:j,getValue:function(t){return n(t,e)},setValue:function(t,n){u(t,e,n)},defaultValue:f?parseFloat(f)||0:null,getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),canBeUnlimitedUsingMinus1:t.getExtraInfo().toJSArray().includes("canBeUnlimitedUsingMinus1"),getEndAdornment:function(t){var n=h(t).get(e).getMeasurementUnit();return{label:x(n),tooltipContent:(0,l.jsx)(o.Z,{label:n.getLabel(),description:n.getDescription(),elementsWithWords:n.getElementsWithWords()})}},visibility:C};if("string"===j||""===j)return{name:e,valueType:"string",getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},defaultValue:f,getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),visibility:C};if("boolean"===j)return{name:e,valueType:j,getValue:function(t){return c(t,e)},setValue:function(t,n){p(t,e,n)},defaultValue:f?"true"===f:null,getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),visibility:C};if("choice"===j){var y=(0,a.mapVector)(t.getChoices(),(function(e){return{value:e.getValue(),label:e.getValue()+(e.getLabel()&&e.getLabel()!==e.getValue()?" \u2014 ".concat(e.getLabel()):"")}})),Z=t.getExtraInfo().toJSArray().map((function(e){return{value:e,label:e}}));return{name:e,valueType:"string",getChoices:function(){return[].concat((0,i.Z)(y),(0,i.Z)(Z))},getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),visibility:C}}if("behavior"===j){var k=t.getExtraInfo().size()>0?t.getExtraInfo().at(0):"";return{name:e,isHiddenWhenOnlyOneChoice:!0,valueType:"string",getChoices:function(){return g&&""!==k?g.getAllBehaviorNames().toJSArray().map((function(e){return g.getBehavior(e).getTypeName()===k?e:null})).filter(Boolean).map((function(e){return{value:e,label:e}})):[]},getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),visibility:C}}if("leaderboardid"===j)return{name:e,valueType:"leaderboardId",getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),visibility:C};if("resource"===j){var w=t.getExtraInfo().toJSArray()[0]||"";return{name:e,valueType:"resource",resourceKind:w,getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),visibility:C}}return"color"===j?{name:e,valueType:"color",getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),visibility:C}:"multilinestring"===j?{name:e,valueType:"multilinestring",getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},getLabel:v,getDescription:b,hasImpactOnAllOtherFields:t.hasImpactOnOtherProperties(),visibility:C}:"objectanimationname"===j?{getChoices:function(){if(!g)return[];var e=(0,a.mapFor)(0,g.getConfiguration().getAnimationsCount(),(function(e){var t=g.getConfiguration().getAnimationName(e);return""===t?null:{value:t,label:t}})).filter(Boolean);return e.push({value:"",label:"(no animation)"}),e},name:e,valueType:"string",getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},getLabel:v,getDescription:b,visibility:C}:"keyboardkey"===j?{getChoices:function(){var e=s.J.map((function(e){return{value:e,label:e}}));return e.push({value:"",label:"(no key)"}),e},name:e,valueType:"string",getValue:function(t){return r(t,e)},setValue:function(t,n){d(t,e,n)},getLabel:v,getDescription:b,visibility:C}:(console.error("A property with type=".concat(j," could not be mapped to a field. Ensure that this type is correct and understood by the IDE.")),null)},d=[["X","Y","Z"],["Width","Height","Depth"],["Top","Bottom"],["Left","Right"],["Front","Back"],["Up","Down"],["Min","Max"],["Low","High"],["Color","Opacity"],["Horizontal","Vertical"],["Acceleration","Deceleration"],["Duration","Easing"],["EffectName","EffectProperty"],["Gravity","MaxFallingSpeed"],["JumpSpeed","JumpSustainTime"],["XGrabTolerance","YGrabOffset"],["MaxSpeed","SlopeMaxAngle"],["Beginning","End"],["Start","End"],["Rear","Front"],["1","2"],["3","4"],["5","6"]],p=function(e){return e?e[0].toLowerCase()+e.substr(1):e},f=function(e){var t=e.properties,n=e.name,r=e.visibility,i=e.quickCustomizationVisibilities;if(!t.has(n))return!1;var a=t.get(n);if(a.isHidden())return!1;if("All"===r)return!0;if("Deprecated"===r)return a.isDeprecated();if("Advanced"===r)return a.isAdvanced();if("Basic"===r)return!a.isAdvanced()&&!a.isDeprecated();if("Basic-Quick"===r){if(a.isDeprecated())return!1;if(a.isAdvanced())return!1;if(a.getQuickCustomizationVisibility()===c.QuickCustomization.Hidden)return!1;if(a.getQuickCustomizationVisibility()===c.QuickCustomization.Visible)return!0;if(i){var o=i.get(n);if(o===c.QuickCustomization.Hidden)return!1;if(o===c.QuickCustomization.Visible)return!0}if("Behavior"===a.getType())return!1}return!0},h=function(e){var t=e.defaultValueProperties,n=e.getProperties,r=e.object,i=e.visibility,a=void 0===i?"All":i,o=e.quickCustomizationVisibilities;return g({properties:t,defaultValueProperties:t,getProperties:n,object:r,visibility:a,quickCustomizationVisibilities:o,getNumberValue:function(e,n){return e.hasDoubleParameter(n)?e.getDoubleParameter(n):t.has(n)&&parseFloat(t.get(n).getValue())||0},getStringValue:function(e,n){return e.hasStringParameter(n)?e.getStringParameter(n):t.has(n)?t.get(n).getValue():""},getBooleanValue:function(e,n){return e.hasBooleanParameter(n)?e.getBooleanParameter(n):!!t.has(n)&&"true"===t.get(n).getValue()},setNumberValue:function(e,t,n){return e.setDoubleParameter(t,n)},setStringValue:function(e,t,n){return e.setStringParameter(t,n)},setBooleanValue:function(e,t,n){return e.setBooleanParameter(t,n)}})},g=function(e){var t=e.properties,n=e.defaultValueProperties,o=e.getProperties,s=e.object,l=e.visibility,c=void 0===l?"All":l,h=e.quickCustomizationVisibilities,g=e.getNumberValue,m=e.getStringValue,x=e.getBooleanValue,v=e.setNumberValue,b=e.setStringValue,C=e.setBooleanValue,j=t.keys(),y=new Map,Z=new Set;if((0,a.mapFor)(0,j.size(),(function(e){var i=j.at(e),a=t.get(i);if(!f({properties:t,name:i,visibility:c,quickCustomizationVisibilities:h}))return null;if(Z.has(i))return null;var l=a.getGroup()||"",k=y.get(l);k||(k=[],y.set(l,k));for(var w=null,T=function(){for(var e=P[S],a=[],l=function(){var n=e[d];if(i.includes(n)){var o,s=e.map((function(e){return i.replace(n,e)})),l=(0,r.Z)(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;f({properties:t,name:u,visibility:c,quickCustomizationVisibilities:h})&&a.push(u)}}catch(C){l.e(C)}finally{l.f()}}var g=p(n);if(i.startsWith(g)){var m,x=e.map((function(e){return i.replace(g,p(e))})),v=(0,r.Z)(x);try{for(v.s();!(m=v.n()).done;){var b=m.value;f({properties:t,name:b,visibility:c,quickCustomizationVisibilities:h})&&a.push(b)}}catch(C){v.e(C)}finally{v.f()}}},d=0;d<e.length;d++)l();if(a.length>1){var j=a.map((function(e){return t.get(e)}));if(j.every((function(e){return e.getGroup()===j[0].getGroup()}))){for(var y=[],k=0;k<j.length&&k<a.length;k++){var T=j[k],I=a[k],E=n?n.has(I)?n.get(I).getValue():"":null,M=u(I,T,g,m,x,v,b,C,E,o,s);M&&y.push(M)}y.length===j.length&&(w={name:a.join("-"),type:"row",children:y},a.forEach((function(e){Z.add(e)})))}}},S=0,P=d;S<P.length;S++)T();w||(w=u(i,a,g,m,x,v,b,C,n?n.has(i)?n.get(i).getValue():"":null,o,s)),w&&k.push(w)})),0===y.size)return[];var k=y.get("");return 1===y.size&&k?k:(0,i.Z)(y.keys()).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{name:e,type:"column",title:e,children:y.get(e)||[]}}))},m=["\u2070","\xb9","\xb2","\xb3","\u2074","\u2075"],x=function(e){return(0,a.mapFor)(0,e.getElementsCount(),(function(t){var n=e.getElementBaseUnit(t),r=e.getElementPower(t),i=Math.abs(r),a=r<0||i>1&&i<6;return n.getSymbol()+(r<0?"\u207b":"")+(a?m[i]:"")})).join(" \xb7 ")};t.ZP=function(e){var t=e.properties,n=e.defaultValueProperties,r=e.getProperties,i=e.onUpdateProperty,a=e.object,o=e.visibility,s=void 0===o?"All":o,l=e.quickCustomizationVisibilities;return g({properties:t,defaultValueProperties:n,getProperties:r,object:a,visibility:s,quickCustomizationVisibilities:l,getNumberValue:function(e,t){return parseFloat(r(e).get(t).getValue())||0},getStringValue:function(e,t){return r(e).get(t).getValue()},getBooleanValue:function(e,t){return"true"===r(e).get(t).getValue()},setNumberValue:function(e,t,n){return i(e,t,""+n)},setStringValue:function(e,t,n){return i(e,t,n)},setBooleanValue:function(e,t,n){return i(e,t,n?"1":"0")}})}},57309:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(36600),i=n(28381),a=n(42986),o=n(73693),s=n(65035),l=n(36607),c=n(81683),u=n(90242),d=n(90286),p=n(32832),f=n(11858),h=n(66733),g=n(51626),m=n(61325),x=n(60022),v=n(19174),b=n(40243),C=n(86278),j=n(38501),y=n(57244),Z=n(3781),k=n(37571),w=n(29439),T=n(73321),S=n(14737),P=n(83297),I=n(9383),E=n(44634),M=n(3970),L=n(29343),A=i.forwardRef((function(e,t){var n=(0,P.k)(),o=(0,M.eh)(),s=i.useState(!1),l=(0,w.Z)(s,2),d=l[0],p=l[1],f=i.useRef(null),h=function(e){f.current&&f.current.focus(e)};i.useImperativeHandle(t,(function(){return{focus:h}}));var g=o&&!!o.find((function(t){return t.id===e.value})),x=i.useState(!o||!!e.value&&!g),v=(0,w.Z)(x,2),b=v[0],C=v[1],j=function(t,n){e.onChange(t.target.value)},y=function(t){e.onChange(t)},Z=o&&o.length>0,k=i.useMemo((function(){return o&&Z?o.map((function(e){return(0,L.jsx)(u.Z,{value:e.id,label:"".concat(e.name," ").concat(e.id?"(".concat((0,S.GA)(e.id),")"):""),shouldNotTranslate:!0},e.id)})):[(0,L.jsx)(u.Z,{disabled:!0,value:"empty",label:""},"empty")]}),[o,Z]);return(0,L.jsx)(r.I18n,{children:function(t){var i=t.i18n;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(m.ad,{renderTextField:function(){return b?(0,L.jsx)(a.Z,{ref:f,onChange:y,value:e.value,floatingLabelText:e.floatingLabelText,floatingLabelFixed:!0,helperMarkdownText:e.helperMarkdownText,multiline:!0,style:e.fieldStyle,errorText:o?null:n?(0,L.jsx)(r.Trans,{id:"Your game may not be registered, create one in the leaderboard manager."}):(0,L.jsx)(r.Trans,{id:"Unable to fetch leaderboards as you are offline."})}):(0,L.jsx)(c.Z,{ref:f,value:e.value,onChange:j,margin:"dense",fullWidth:!0,floatingLabelText:e.floatingLabelText,translatableHintText:Z?{id:"Choose a leaderboard"}:{id:"No leaderboards"},helperMarkdownText:Z?e.helperMarkdownText||null:i._({id:"There are currently no leaderboards created for this game. Open the leaderboards manager to create one."}),children:k})},renderButton:function(e){return(0,L.jsx)(I.Z,{id:"open-leaderboard-admin-button",icon:(0,L.jsx)(E.Z,{}),style:e,primary:!0,onClick:function(){return p(!0)},buildMenuTemplate:function(e){return[{label:b?e._({id:"Select the leaderboard from a list"}):e._({id:"Enter the leaderboard id"}),disabled:!o,click:function(){return C(!b)}}]}})}}),d&&!!e.project&&(0,L.jsx)(T.Z,{onClose:function(){return p(!1)},open:d,project:e.project,leaderboardId:g?e.value:void 0})]})}})})),O=n(72402),R={columnContainer:{display:"flex",flexDirection:"column"},fieldContainer:{flex:1,display:"flex",flexDirection:"row",alignItems:"baseline"},field:{flex:1,width:"auto"},subHeader:{paddingLeft:0}},F=function(e){var t=e.instances,n=e.field;return"boolean"===typeof n.disabled?n.disabled:"function"===typeof n.disabled&&n.disabled(t)},D=function(e){var t=e.instances,n=e.field,r=e.defaultValue;if(!t[0])return console.log("getFieldValue was called with an empty list of instances (or containing undefined). This is a bug that should be fixed"),r;var i=n.getValue;if(!i)return null;for(var a=i(t[0]),o=1;o<t.length;++o)if(a!==i(t[o])){"undefined"!==typeof r&&(a=r);break}return a},N=function(e){var t=e.instances,n=e.field;return t[0]?n.getLabel?n.getLabel(t[0]):n.name:(console.log("PropertiesEditor._getFieldLabel was called with an empty list of instances (or containing undefined). This is a bug that should be fixed"),n.name)},_=function e(t){var n=t.onInstancesModified,w=t.instances,T=t.schema,S=t.mode,P=t.renderExtraDescriptionText,I=t.unsavedChanges,E=t.project,M=t.projectScopedContainersAccessor,_=t.resourceManagementProps,B=(0,j.Z)(),U=i.useCallback((function(e){I&&I.triggerUnsavedChanges(),n&&n(e),B()}),[I,n,B]),V=i.useCallback((function(e){if(w[0]){var t=[];return e.getDescription&&t.push(e.getDescription(w[0])),P&&e.getExtraDescription&&t.push(P(e.getExtraDescription(w[0]))),t.join("\n")||void 0}console.log("PropertiesEditor._getFieldDescription was called with an empty list of instances (or containing undefined). This is a bug that should be fixed")}),[w,P]),H=i.useCallback((function(e){if("PLEASE_ALSO_SHOW_EDIT_BUTTON_THANKS"===e.name)return null;if("boolean"===e.valueType){var t=e.setValue,n=V(e);return(0,L.jsx)(o.Z,{label:n?(0,L.jsxs)(i.Fragment,{children:[(0,L.jsx)(b.x1,{noMargin:!0,children:N({instances:w,field:e})}),(0,L.jsx)(h.Z,{style:{display:"inline"},children:(0,L.jsx)(p.r,{source:n})})]}):N({instances:w,field:e}),id:e.name,checked:D({instances:w,field:e}),onCheck:function(e,n){w.forEach((function(e){return t(e,!!n)})),U(w)},disabled:F({instances:w,field:e})},e.name)}if("number"===e.valueType){var s=e.setValue,l=e.getEndAdornment,c=l&&l(w[0]);return(0,L.jsx)(a.Z,{value:D({instances:w,field:e}),id:e.name,floatingLabelText:N({instances:w,field:e}),floatingLabelFixed:!0,helperMarkdownText:V(e),onChange:function(e){var t=parseFloat(e);isNaN(t)||(w.forEach((function(e){return s(e,t)})),U(w))},type:"number",style:R.field,disabled:F({instances:w,field:e}),endAdornment:c&&(0,L.jsx)(Z.ZP,{title:c.tooltipContent,children:(0,L.jsx)(g.Z,{position:"end",children:c.label})})},e.name)}if("color"===e.valueType){var u=e.setValue;return(0,L.jsx)(b.sg,{expand:!0,noMargin:!0,children:(0,L.jsx)(d.Z,{id:e.name,floatingLabelText:N({instances:w,field:e}),helperMarkdownText:V(e),disableAlpha:!0,fullWidth:!0,color:D({instances:w,field:e}),onChange:function(e){var t=0===e.length?"":(0,f.JO)(e);w.forEach((function(e){return u(e,t)})),U(w)}})},e.name)}if("multilinestring"===e.valueType){var v=e.setValue;return(0,L.jsx)(a.Z,{id:e.name,onChange:function(e){w.forEach((function(t){return v(t,e||"")})),U(w)},value:D({instances:w,field:e}),floatingLabelText:N({instances:w,field:e}),floatingLabelFixed:!0,helperMarkdownText:V(e),multiline:!0,style:R.field},e.name)}var C=e.onEditButtonBuildMenuTemplate,j=e.onEditButtonClick,T=e.setValue;return(0,L.jsx)(m.ad,{renderTextField:function(){return(0,L.jsx)(a.Z,{value:D({instances:w,field:e,defaultValue:"(Multiple values)"}),id:e.name,floatingLabelText:N({instances:w,field:e}),floatingLabelFixed:!0,helperMarkdownText:V(e),onChange:function(e){w.forEach((function(t){return T(t,e||"")})),U(w)},style:R.field,disabled:F({instances:w,field:e})})},renderButton:function(e){return j&&!C?(0,L.jsx)(x.Z,{style:e,primary:!0,disabled:1!==w.length,icon:(0,L.jsx)(k.Z,{}),label:(0,L.jsx)(r.Trans,{id:"Edit"}),onClick:j}):C?(0,L.jsx)(y.Z,{style:e,primary:!0,disabled:1!==w.length,icon:(0,L.jsx)(k.Z,{}),label:(0,L.jsx)(r.Trans,{id:"Edit"}),onClick:j,buildMenuTemplate:C}):null}},e.name)}),[w,V,U]),z=i.useCallback((function(e){if(e.getChoices&&e.getValue){var t=e.getChoices();if(!(t.length<2&&e.isHiddenWhenOnlyOneChoice)){var n=t.map((function(e){var t=e.value,n=e.label,r=e.labelIsUserDefined;return(0,L.jsx)(u.Z,{value:t,label:n,shouldNotTranslate:r},t)}));if("number"===e.valueType){var r=e.setValue;return(0,L.jsx)(c.Z,{value:D({instances:w,field:e}),id:e.name,floatingLabelText:N({instances:w,field:e}),helperMarkdownText:V(e),onChange:function(e,t,n){w.forEach((function(e){return r(e,parseFloat(n)||0)})),U(w)},style:R.field,disabled:e.disabled,children:n},e.name)}if("string"===e.valueType){var i=e.setValue;return(0,L.jsx)(c.Z,{value:D({instances:w,field:e,defaultValue:"(Multiple values)"}),id:e.name,floatingLabelText:N({instances:w,field:e}),helperMarkdownText:V(e),onChange:function(e,t,n){w.forEach((function(e){return i(e,n||"")})),U(w)},style:R.field,disabled:F({instances:w,field:e}),children:n},e.name)}}}}),[w,U,V]),W=i.useCallback((function(e){if(e.getChoices&&e.getValue&&"string"===e.valueType){var t=e.getChoices(),n=e.setValue,i=D({instances:w,field:e,defaultValue:"(Multiple values)"});return(0,L.jsx)(O.ZP,{value:i,id:e.name,floatingLabelText:N({instances:w,field:e}),helperMarkdownText:V(e),onChange:function(e){w.forEach((function(t){return n(t,e||"")})),U(w)},dataSource:t.map((function(e){var t=e.value;return{value:t,text:t}})),fullWidth:!0,errorText:e.isAllowingAnyValue||"(Multiple values)"===i||t.some((function(e){return e.value===i}))?void 0:i?(0,L.jsx)(r.Trans,{id:'You must select a valid value. "{value}" is not valid.',values:{value:i}}):(0,L.jsx)(r.Trans,{id:"You must select a value."})},e.name)}}),[w,U,V]),G=i.useCallback((function(e){var t=!1;if("onValuesDifferent"===e.disabled){var n="DIFFERENT_VALUES";t=D({instances:w,field:e,defaultValue:n})===n}return(0,L.jsx)(x.Z,{fullWidth:!0,primary:!0,icon:(0,L.jsx)(k.Z,{}),disabled:t,label:e.label,onClick:function(){e.onClick(w[0])}},"button-".concat(e.label))}),[w]),Y="row"===S?function(e){return(0,L.jsx)(m.ep,{noMargin:!0,noResponsiveLandscape:Array.isArray(e)&&e.length<=3,children:e})}:function(e){return(0,L.jsx)(m.ak,{noMargin:!0,children:e})},q=i.useCallback((function(e){return(0,L.jsx)(b.x1,{children:(0,L.jsx)(C.Z,{displayInlineAsSpan:!0,children:e.name})},"section-title-".concat(e.name))}),[]);return Y(T.map((function(t){if(t.nonFieldType)return"sectionTitle"===t.nonFieldType?q(t):"button"===t.nonFieldType?G(t):null;if(t.children){if("row"===t.type){var r=(0,L.jsx)(v.Z.Consumer,{children:function(r){return(0,L.jsx)(e,{project:E,resourceManagementProps:_,projectScopedContainersAccessor:M,schema:t.children,instances:w,mode:"row",unsavedChanges:r,onInstancesModified:n})}},t.name);return t.title?[(0,L.jsx)(C.Z,{size:"block-title",children:t.title},t.name+"-title"),r]:r}return(0,L.jsxs)("div",{children:[(0,L.jsx)(l.Z,{children:t.name}),(0,L.jsx)(v.Z.Consumer,{children:function(r){return(0,L.jsx)(e,{project:E,resourceManagementProps:_,projectScopedContainersAccessor:M,schema:t.children,instances:w,mode:"column",unsavedChanges:r,onInstancesModified:n})}},t.name)]},t.name)}return"resource"===t.valueType?function(e){if(!E||!_||!M)return console.error("You tried to display a resource field in a PropertiesEditor that does not support display resources. If you need to display resources, pass additional props (project, resourceManagementProps)."),null;var t=e.setValue;return(0,L.jsx)(s.Z,{project:E,projectScopedContainersAccessor:M,resourceManagementProps:_,resourceKind:e.resourceKind,resourceName:D({instances:w,field:e,defaultValue:"(Multiple values)"}),onChange:function(e){w.forEach((function(n){return t(n,e)})),U(w)},floatingLabelText:N({instances:w,field:e}),helperMarkdownText:V(e)},e.name)}(t):"leaderboardId"===t.valueType?function(e){if(!E)return null;var t=e.setValue;return(0,L.jsx)(A,{project:E,value:D({instances:w,field:e,defaultValue:"(Multiple values)"}),onChange:function(e){w.forEach((function(n){return t(n,e)})),U(w)},floatingLabelText:N({instances:w,field:e}),helperMarkdownText:V(e),fieldStyle:R.field},e.name)}(t):t.getChoices&&t.getValue?t.isAutocompleted?W(t):z(t):t.getValue?H(t):null})))}},41370:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2066),i=n.g.gd,a=function(e){var t=e.i18n,n=e.visibility,a=e.onChangeVisibility;return r.ZP.isDev()?[{label:t._({id:"Quick Customization settings"}),submenu:[{type:"checkbox",label:t._({id:"Visible"}),checked:n===i.QuickCustomization.Visible,click:function(){a(i.QuickCustomization.Visible)}},{type:"checkbox",label:t._({id:"Hidden"}),checked:n===i.QuickCustomization.Hidden,click:function(){a(i.QuickCustomization.Hidden)}},{type:"checkbox",label:t._({id:"Default visibility"}),checked:n===i.QuickCustomization.Default,click:function(){a(i.QuickCustomization.Default)}}]}]:[]}},10283:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r=n(36600),i=(n(28381),n(29343)),a=function(e){if(e<30)return(0,i.jsx)(r.Trans,{id:"{durationInDays} days",values:{durationInDays:e}});var t=Math.round(e/30);return 1===t?(0,i.jsx)(r.Trans,{id:"1 month"}):(0,i.jsx)(r.Trans,{id:"{roundedMonths} months",values:{roundedMonths:t}})}},58893:function(e,t,n){"use strict";var r=n(28381),i=n(24910),a=n(29343);t.Z=function(e){var t={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:e.borderRadius,background:'url("res/transparentback.png") repeat',filter:r.useContext(i.Z).imagePreview.backgroundFilter||"none"};return(0,a.jsx)("div",{style:t})}},13035:function(e,t,n){"use strict";n.d(t,{t:function(){return E}});var r=n(93433),i=n(4942),a=n(74165),o=n(15861),s=n(29439),l=n(28381),c=n(72410),u=n(20995),d=n(61325),p=n(51598),f=n(37571),h=n(54168),g=n(85076),m=n(57974),x=n(94703),v=n(65056),b=n(30141),C=n(38501),j="CompactResourceSelectorWithThumbnail_container__4jw73",y="CompactResourceSelectorWithThumbnail_compactResourceSelector__7A23U",Z="CompactResourceSelectorWithThumbnail_disabled__MNnTH",k="CompactResourceSelectorWithThumbnail_errored__Xsiqz",w=n(82954),T=n.n(w),S=n(28842),P=n(29343),I={icon:{fontSize:18}},E=function(e){var t,n=e.project,w=e.resourceManagementProps,E=e.resourceKind,M=e.resourceName,L=e.defaultNewResourceName,A=e.onChange,O=e.id,R=c.Z,F=(0,C.Z)(),D=u.f.includes(E),N=l.useRef(O||(0,S._)()),_=w.getStorageProvider(),B=w.resourceSources.filter((function(e){return e.kind===E})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===_.internalName})),U=(0,v.Z)().showConfirmation,V=l.useRef(null),H=l.useState(!1),z=(0,s.Z)(H,2),W=z[0],G=z[1],Y=(0,x.Z)({project:n,callback:function(){}}).triggerResourcesHaveChanged,q=l.useCallback((function(e){e!==M&&(A(e),w.onResourceUsageChanged&&w.onResourceUsageChanged())}),[M,A,w]),J=l.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var r,i,o,s,l,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w.onChooseResource({initialSourceName:t.name,multiSelection:!1,resourceKind:E});case 5:if(r=e.sent,i=r.selectedResources,o=r.selectedSourceName,i.length){e.next=10;break}return e.abrupt("return");case 10:if(s=B.find((function(e){return e.name===o}))){e.next=13;break}return e.abrupt("return");case 13:if(l=i[0],c=l.getName(),!s.shouldCreateResource){e.next=24;break}if((0,m.r3)(n,l),u=n.getResourcesManager().addResource(l),i.forEach((function(e){return e.delete()})),!u){e.next=23;break}return e.next=22,w.onFetchNewlyAddedResources();case 22:w.onNewResourcesAdded();case 23:Y();case 24:q(c),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),console.error("Unable to choose a resource",e.t0);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t){return e.apply(this,arguments)}}(),[n,w,E,q,Y,B]),X=l.useCallback(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t,r){var i,o,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V.current=new AbortController,i=V.current.signal,o=n.getResourcesManager(),s=o.getResource(M),e.prev=4,G(!0),e.next=8,r.edit({project:n,i18n:t,getStorageProvider:w.getStorageProvider,resourceManagementProps:w,resourceNames:[M],extraOptions:{existingMetadata:s.getMetadata(),singleFrame:!0,fps:0,name:M||L,isLooping:!1},signal:i});case 8:if(l=e.sent,G(!1),l){e.next=12;break}return e.abrupt("return");case 12:if((c=l.resources).length){e.next=15;break}return e.abrupt("return");case 15:R.burstUrlsCacheForResources(n,[c[0].name]),q(c[0].name),Y(),F(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),"UserCancellationError"!==e.t0.name&&(console.error("An exception was thrown when launching or reading resources from the external editor:",e.t0),(0,b.gR)({message:"There was an error while using the external editor. Try with another resource and if this persists, please report this as a bug.",rawError:e.t0,errorId:"external-editor-error"})),G(!1);case 25:return e.prev=25,V.current=null,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,21,25,28]])})));return function(t,n){return e.apply(this,arguments)}}(),[L,F,q,n,w,M,R,Y]),K=l.useCallback((0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({title:{id:"Cancel editing"},message:{id:"You will lose any progress made with the external editor. Do you wish to cancel?"},confirmButtonLabel:{id:"Cancel edition"},dismissButtonLabel:{id:"Continue editing"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:V.current?V.current.abort():console.error("Cannot cancel editing with external editor, abort controller is missing.");case 6:case"end":return e.stop()}}),e)}))),[U]),Q=w.resourceExternalEditors.filter((function(e){return e.kind===E})),$=M&&!n.getResourcesManager().hasResource(M);return(0,P.jsxs)(d.pJ,{noMargin:!0,expand:!0,id:N.current,children:[D&&(0,P.jsx)(u.Z,{resourceName:M,resourcesLoader:c.Z,project:n,resourceKind:E,size:24}),(0,P.jsx)("div",{className:T()((t={},(0,i.Z)(t,j,!0),(0,i.Z)(t,Z,!1),(0,i.Z)(t,k,$),t)),children:(0,P.jsx)("div",{className:T()((0,i.Z)({},y,!0)),children:(0,P.jsx)("input",{type:"text",spellCheck:!1,value:M,onChange:function(e){return q(e.currentTarget.value)}})})}),(0,P.jsx)(h.Z,{element:(0,P.jsx)(p.Z,{size:"small",children:(0,P.jsx)(f.Z,{style:I.icon})}),buildMenuTemplate:function(e){return[].concat((0,r.Z)(B.map((function(t){return{label:e._(t.displayName),click:function(){return J(t)}}}))),(0,r.Z)(Q.length?[{type:"separator"}]:[]),(0,r.Z)(Q.map((function(t){return{label:M?e._(t.editDisplayName):e._(t.createDisplayName),click:function(){return X(e,t)}}}))))}}),W&&(0,P.jsx)(g.G,{onClose:K})]})}},46673:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});var r=function(e,t){if(!t)return e;var n=t.toLowerCase();return e.filter((function(e){return-1!==e.getName().toLowerCase().indexOf(n)}))}},15684:function(e,t,n){"use strict";n.d(t,{V:function(){return T}});var r=n(74165),i=n(15861),a=n(29439),o=n(93433),s=n(36600),l=n(28381),c=n(70983),u=n.n(c),d=n(17037),p=n(71106),f=n(38092),h=n(61325),g=n(34517),m=n(40243),x=n(64480),v=n(20914),b=n(24910),C=n(60022),j=n(29343),y={audio:["audio/aac","audio/x-wav","audio/mpeg","audio/mp3","audio/ogg"],image:["image/jpeg","image/png","image/webp"],font:["font/ttf","font/otf"],video:["video/mp4","video/webm"],json:["application/json"],tilemap:["application/json"],tileset:["application/json"],bitmapFont:[],model3D:["file"],atlas:[],spine:["application/json"],javascript:["text/javascript"]},Z=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=d.QP.find((function(t){return t.kind===e}))||null;return n?t?n.fileExtensions.map((function(e){return"."+e})):n.fileExtensions:[]},k=function(e){return y[e]||[]},w=function(e){var t=Z(e),n=k(e);return[].concat((0,o.Z)(n),(0,o.Z)(t)).join(",")},T=function(e){var t=e.options,n=e.fileMetadata,o=e.getStorageProvider,c=e.onChooseResources,d=e.createNewResource,y=e.automaticallyOpenInput,T=l.useRef(null),S=l.useRef(!1),P=l.useContext(b.Z),I=l.useContext(p.ZP),E=l.useState(null),M=(0,a.Z)(E,2),L=M[0],A=M[1],O=l.useState(!1),R=(0,a.Z)(O,2),F=R[0],D=R[1],N=l.useState([]),_=(0,a.Z)(N,2),B=_[0],U=_[1],V=l.useState([]),H=(0,a.Z)(V,2),z=H[0],W=H[1],G=B.length>0,Y=l.useMemo(o,[o]),q=n?n.fileIdentifier:null,J=l.useState(0),X=(0,a.Z)(J,2),K=X[0],Q=X[1],$=l.useCallback((0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T.current){e.next=3;break}return e.abrupt("return");case 3:if(q){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,D(!0),A(null),Q(0),e.next=11,(0,g.ll)(I,q,B,(function(e,t){Q(e/t*100)}));case 11:if(t=e.sent,n=t.filter((function(e){return!!e.error})),i=t.filter((function(e){return!!e.url})),!n.length){e.next=18;break}throw n[0];case 18:i.length&&c(i.map((function(e){var t=e.url,n=e.resourceFile,r=d();return r.setFile(t||""),r.setName(n.name),r.setOrigin("cloud-project-resource",t||""),r})));case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),A(e.t0);case 24:return e.prev=24,D(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[5,21,24,27]])}))),[B,I,c,d,q]),ee=B.map((function(e){return e.size>g.j4?{filename:e.name,error:"too-large"}:null})).filter(Boolean),te="Cloud"===Y.internalName&&!!n,ne=!!I.authenticated,re=!F&&ne&&te;l.useLayoutEffect((function(){y&&!S.current&&(S.current=!0,T.current&&T.current.click())}),[y]);var ie=!F&&re&&G&&0===ee.length;l.useEffect((function(){ie&&!L&&$()}),[ie,$,L]);var ae=l.useMemo((function(){var e=k(t.resourceKind);return 1===e.length&&"file"===e[0]}),[t.resourceKind]),oe=l.useCallback((function(e){return Z(t.resourceKind,!1).includes(u().extname(e.name).replace(/^\./,""))}),[t.resourceKind]);return(0,j.jsxs)(h.ak,{noMargin:!0,children:[ne?te?null:(0,j.jsx)(f.Z,{kind:"warning",children:(0,j.jsx)(s.Trans,{id:"Your need to first save your game on GDevelop Cloud to upload your own resources."})}):(0,j.jsx)(f.Z,{kind:"warning",children:(0,j.jsx)(s.Trans,{id:"Your need to first create your account, or login, to upload your own resources."})}),(0,j.jsx)(v.Z,{variant:"outlined",background:"medium",children:(0,j.jsx)(m.x1,{expand:!0,children:(0,j.jsxs)(m.sg,{expand:!0,children:[(0,j.jsx)("input",{accept:w(t.resourceKind),style:{color:P.text.color.primary},multiple:t.multiSelection,type:"file",ref:T,disabled:!re,onChange:function(e){for(var t=[],n=[],r=0;r<e.currentTarget.files.length;r++){var i=e.currentTarget.files[r];!ae||oe(i)?t.push(i):n.push(i)}W(n),U(t),A(null)}}),z.length>0&&(0,j.jsx)(f.Z,{kind:"warning",children:(0,j.jsx)(s.Trans,{id:"The following file(s) cannot be used for this kind of object: {0}",values:{0:z.map((function(e){return e.name})).join(", ")}})})]})})}),ee.map((function(e){return"too-large"===e.error?(0,j.jsx)(f.Z,{kind:"error",children:(0,j.jsx)(s.Trans,{id:"The file {0} is too large. Use files that are smaller for your game: each must be less than {1} MB.",values:{0:e.filename,1:g.j4/1e3/1e3}})}):(0,j.jsx)(f.Z,{kind:"error",children:(0,j.jsx)(s.Trans,{id:"The file {0} is invalid.",values:{0:e.filename}})})})),L&&(0,j.jsx)(f.Z,{kind:"error",children:(0,j.jsx)(s.Trans,{id:"There was an error while uploading some resources. Verify your internet connection or try again later."})}),(0,j.jsx)(h.pJ,{alignItems:"center",justifyContent:"stretch",expand:!0,children:F?(0,j.jsx)(x.Z,{value:K,variant:"determinate"}):null}),L&&(0,j.jsx)(m.x1,{noMargin:!0,expand:!0,justifyContent:"flex-end",children:(0,j.jsx)(C.Z,{primary:!0,label:(0,j.jsx)(s.Trans,{id:"Retry"}),onClick:$})})]})}},52716:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var r=n(93433),i=n(29439),a=n(36600),o=n(28381),s=n(46673),l=n(1413),c=n(3798),u=n(72410),d=n(24910),p=n(23818),f=n(86278),h=n(2139),g=n(39909),m=n(3290),x=n(65671),v=n(58893),b=n(29343),C={previewImage:{position:"relative",objectFit:"contain",verticalAlign:"middle",pointerEvents:"none"},previewImagePixelated:{imageRendering:(0,g.g)()},cardContainer:{overflow:"hidden",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},titleContainer:{position:"absolute",bottom:0,left:0,right:0,color:"#fff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",backgroundColor:"rgb(0,0,0,0.5)"},title:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},icon:{width:32,height:32},resourceSimpleImage:{zIndex:1,width:40,height:40}},j=function(e){var t=e.resource,n=e.project,r=t.getName(),i=u.Z.getResourceFullUrl(n,r,{}),a=(0,m.X)(n,r);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Z,{}),(0,b.jsx)(p.W,{style:(0,l.Z)((0,l.Z)({},C.previewImage),{},{maxWidth:108,maxHeight:108},a?void 0:C.previewImagePixelated),src:i,alt:r},r)]})},y=function(e){var t=e.resource,n=t.getName(),r=(0,h.Y)(t);return(0,b.jsx)(p.W,{title:n,alt:n,src:r,style:C.resourceSimpleImage})},Z=function(e){var t=e.project,n=e.resource,r=e.onChoose,i=e.size,a=e.isSelected,s=o.useContext(d.Z),p=n.getName();return(0,b.jsx)(c.Z,{onClick:r,focusRipple:!0,children:(0,b.jsxs)("div",{style:(0,l.Z)((0,l.Z)({},C.cardContainer),{},{width:i,height:i,outline:a?"1px solid ".concat(s.palette.secondary):void 0}),children:[function(){switch(n.getKind()){case"image":return(0,b.jsx)(j,{resource:n,project:t});case"model3D":return(0,b.jsx)(x.Z,{modelUrl:u.Z.getResourceFullUrl(t,p,{}),fullWidth:!0});default:return(0,b.jsx)(y,{resource:n})}}(),(0,b.jsx)("div",{style:C.titleContainer,children:(0,b.jsx)(f.Z,{noMargin:!0,style:C.title,color:"inherit",children:p})})]})})},k=n(40243),w=n(2351),T=n(61325),S=n(12949),P=n(78081),I=n(86578),E=function(e){var t=e.project,n=e.searchResults,r=e.onSelectResource,i=e.selectedResources;return(0,b.jsx)(k.x1,{expand:!0,overflow:"hidden",noMargin:!0,children:(0,b.jsx)(w.t,{baseSize:128,spacing:8,error:null,onRetry:function(){},searchItems:n,renderSearchItem:function(e,n,a){return(0,b.jsx)(Z,{project:t,size:n,resource:e,onChoose:function(){return r(e)},isSelected:i.includes(e)})},noResultPlaceholder:(0,b.jsx)(I.Z,{children:(0,b.jsx)(a.Trans,{id:"Could not find any resources matching your search."})})})})},M=function(e){var t=e.project,n=e.onResourcesSelected,a=e.resourceKind,l=e.multiSelection,c=o.useState(""),u=(0,i.Z)(c,2),d=u[0],p=u[1],f=o.useMemo((function(){var e=t.getResourcesManager(),n=e.getAllResourceNames().toJSArray().map((function(t){return e.getResource(t)})).filter((function(e){return e.getKind()===a}));return(0,s.c)(n,d)}),[t,d,a]),h=o.useState([]),g=(0,i.Z)(h,2),m=g[0],x=g[1],v=o.useCallback((function(e){x((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):l?[].concat((0,r.Z)(t),[e]):[e]}))}),[l]);return o.useEffect((function(){n&&n(m)}),[m,n]),(0,b.jsxs)(k.sg,{expand:!0,noMargin:!0,useFullHeight:!0,children:[(0,b.jsx)(T.pJ,{children:(0,b.jsx)(k.sg,{expand:!0,noMargin:!0,children:(0,b.jsx)(S.Z,{value:d,onChange:p,onRequestSearch:function(){},placeholder:{id:"Search resources"}})})}),f?(0,b.jsx)(E,{project:t,searchResults:f,selectedResources:m,onSelectResource:v}):(0,b.jsx)(P.Z,{})]})}},32705:function(e,t,n){"use strict";n.d(t,{$N:function(){return d},TD:function(){return p},Z2:function(){return f},Zv:function(){return u}});var r=n(4942),i=n(74165),a=n(15861),o=n(17037),s=n(79431),l=n(57974),c=n(81303),u=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,u,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.baseNameForNewResources,a=t.resources,u=t.resourceKind,d=n.getResourcesManager(),p=a.map((function(e){var t=e.name,i=e.dataUrl,a=e.localFilePath,p=e.extension,f=e.originalIndex,h=(0,c.Um)(i),g=h?URL.createObjectURL(h):"";if(t&&d.hasResource(t)){console.info("Updating resource "+t+".");var m=d.getResource(t);return m.setFile(g),(0,l.kX)(m,{localFilePath:a,extension:p}),{resource:m,originalIndex:f,blobUrl:g}}var x=(0,s.Z)(0===r.length?"Untitled":r,(function(e){return d.hasResource(e)}));console.info("Creating new resource "+x+"...");var v=(0,o.hh)(u);return v?(v.setName(x),v.setFile(g),v.setMetadata(JSON.stringify({localFilePath:a,extension:p})),(0,l.r3)(n,v),d.addResource(v),v.delete(),{resource:d.getResource(x),originalIndex:f,blobUrl:g}):(console.error("Could not create a resource for kind: "+u),null)})).filter(Boolean),e.abrupt("return",p);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){var t=e.modifiedResources,n=e.metadataKey,i=e.metadata;t.forEach((function(e){var t=e.resource,a=e.blobUrl;URL.revokeObjectURL(a),i&&(0,l.kX)(t,(0,r.Z)({},n,i))}))},p=function(e,t){t&&"object"===typeof t&&Array.isArray(t.resourceNames)&&(t.resourceNames=e)},f=function(e,t){if(!t)return null;try{var n=JSON.parse(t);if(n&&"object"===typeof n&&n[e])return n[e]}catch(r){console.warn("Malformed metadata for a resource - ignoring it.",r)}return null}},3290:function(e,t,n){"use strict";n.d(t,{Z:function(){return L},X:function(){return M}});var r=n(1413),i=n(74165),a=n(15861),o=n(29439),s=n(36600),l=n(51598),c=n(50301),u=n(28381),d=n(94854),p=n(87199),f=n(78118),h=n(29343),g=u.memo((function(e){return(0,h.jsxs)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 3.66663C5.30828 3.66663 3.66666 5.30825 3.66666 7.33329C3.66666 9.35834 5.30828 11 7.33332 11C9.35837 11 11 9.35834 11 7.33329C11 5.30825 9.35837 3.66663 7.33332 3.66663ZM2.66666 7.33329C2.66666 4.75596 4.75599 2.66663 7.33332 2.66663C9.91065 2.66663 12 4.75596 12 7.33329C12 9.91062 9.91065 12 7.33332 12C4.75599 12 2.66666 9.91062 2.66666 7.33329Z",fill:"currentColor"}),(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.97977 9.97974C10.175 9.78448 10.4916 9.78448 10.6869 9.97974L13.1869 12.4797C13.3821 12.675 13.3821 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L9.97977 10.6868C9.78451 10.4916 9.78451 10.175 9.97977 9.97974Z",fill:"currentColor"}),(0,h.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33332 7.33329C5.33332 7.05715 5.55718 6.83329 5.83332 6.83329H8.83332C9.10947 6.83329 9.33332 7.05715 9.33332 7.33329C9.33332 7.60944 9.10947 7.83329 8.83332 7.83329H5.83332C5.55718 7.83329 5.33332 7.60944 5.33332 7.33329Z",fill:"currentColor"})]}))})),m=n(75268),x=n(41332),v=n(86278),b=n(23818),C=n(24910),j=n(58893),y=n(39909),Z=n(65111),k=n(91153),w=n(76683),T=n(5675),S=n(86268),P=n.g.gd,I=function(e,t){return[(e.x+t.x)/2,(e.y+t.y)/2]},E={previewImagePixelated:{imageRendering:(0,y.g)()},contentContainer:{position:"relative",height:"100%",overflow:"hidden"},container:{display:"flex",flexDirection:"column",alignItems:"stretch",flex:1,minHeight:0,width:"100%"},imagePreviewContainer:{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",outline:"none",touchAction:"none"},spriteThumbnailImage:{},sliderContainer:{maxWidth:150,width:"100%",display:"flex",padding:"0 10px"}},M=function(e,t){var n=e.getResourcesManager().getResource(t);return"image"===n.getKind()&&P.asImageResource(n).isSmooth()},L=function(e){var t=e.resourceName,n=e.imageResourceSource,f=e.isImageResourceSmooth,y=e.fixedHeight,P=e.fixedWidth,M=e.renderOverlay,L=e.onImageSize,A=e.hideCheckeredBackground,O=e.deactivateControls,R=e.displaySpacedView,F=e.isImagePrivate,D=e.onImageLoaded,N=e.hideLoader,_=u.useState(!1),B=(0,o.Z)(_,2),U=B[0],V=B[1],H=u.useState(null),z=(0,o.Z)(H,2),W=z[0],G=z[1],Y=u.useState(null),q=(0,o.Z)(Y,2),J=q[0],X=q[1],K=u.useState(null),Q=(0,o.Z)(K,2),$=Q[0],ee=Q[1],te=u.useState(null),ne=(0,o.Z)(te,2),re=ne[0],ie=ne[1],ae=u.useState({factor:1,xOffset:0,yOffset:0}),oe=(0,o.Z)(ae,2),se=oe[0],le=oe[1],ce=se.xOffset,ue=se.yOffset,de=se.factor,pe=u.useRef(null),fe=u.useRef(null),he=u.useRef(null),ge=u.useRef(!1),me=u.useRef(null),xe=function(){V(!0)},ve=u.useState(!1),be=(0,o.Z)(ve,2),Ce=be[0],je=be[1],ye=u.useRef(new S.ZP({isActive:function(){return!O},shortcutCallbacks:{onToggleGrabbingTool:je}})),Ze=u.useCallback((function(){if(!W||!J||!re||!$)return 1;var e=Math.min($/W,re/J)*(R?.7:.95);return e>1&&(e=Math.floor(e)),e}),[W,J,re,$,R]),ke=u.useCallback((function(){if(!W||!J||!re||!$)return!1;var e=Ze();return le({factor:e,xOffset:($-W*e)/2,yOffset:(re-J*e)/2}),!0}),[W,J,re,$,Ze]),we=u.useCallback((function(e){var t=Ze();return Math.max(Math.min(e,4*t),.25*t)}),[Ze]),Te=u.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=we(de*t),se.factor!==r&&le((function(e){return{xOffset:e.xOffset+(n[0]-e.xOffset)*(1-r/e.factor),yOffset:e.yOffset+(n[1]-e.yOffset)*(1-r/e.factor),factor:r}}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[we,de,se.factor]),Se=u.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le((function(e){return{xOffset:e.xOffset+(n[0]-e.xOffset)*(1-t/e.factor),yOffset:e.yOffset+(n[1]-e.yOffset)*(1-t/e.factor),factor:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),Pe=u.useCallback((function(e){var t=e.deltaY,n=e.deltaX,i=e.clientX,a=e.clientY;if(e.preventDefault(),e.stopPropagation(),(0,Z.DM)(e)&&me.current){var o=me.current.getBoundingClientRect();Te((0,T.$u)(-t),[i-o.left,a-o.top])}else le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset-n/4,yOffset:e.yOffset-t/4})}))}),[Te]),Ie=u.useCallback(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,s,l,c,u,d,p,f,h,g,m,x,v,b;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==t.touches.length||!me.current){e.next=11;break}return n=me.current.getBoundingClientRect(),t.preventDefault(),t.stopPropagation(),a=t.touches[0],s=a.clientX,l=a.clientY,c=t.touches[1],u=c.clientX,d=c.clientY,i={x:s,y:l},C={x:u,y:d},p=Math.sqrt(Math.pow(C.x-i.x,2)+Math.pow(C.y-i.y,2)),f=I({x:s-n.left,y:l-n.top},{x:u-n.left,y:d-n.top}),pe.current&&(le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(f[0]-pe.current.center[0]),yOffset:e.yOffset+(f[1]-pe.current.center[1])})})),Te(p/pe.current.distance,f)),pe.current={distance:p,center:f},e.abrupt("return");case 11:if(!(t.target&&(t.target instanceof HTMLElement||t.target instanceof SVGElement)&&t.target.dataset&&"draggable"in t.target.dataset)){e.next=13;break}return e.abrupt("return");case 13:h=t.touches[0],g=h.clientX,m=h.clientY,t.preventDefault(),t.stopPropagation(),fe.current&&(x=(0,o.Z)(fe.current,2),v=x[0],b=x[1],le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(g-v),yOffset:e.yOffset+(m-b)})}))),fe.current=[g,m];case 18:case"end":return e.stop()}var i,C}),e)})));return function(t){return e.apply(this,arguments)}}(),[Te]);u.useEffect((function(){if(!O)return me.current?(me.current.addEventListener("wheel",Pe,{passive:!1}),function(){me.current&&me.current.removeEventListener("wheel",Pe,{passive:!1})}):void 0}),[Pe,O]),u.useEffect((function(){ge.current=!1}),[n]);var Ee=u.useMemo((function(){return[($||0)/2,(re||0)/2]}),[$,re]);u.useEffect((function(){ge.current||(ge.current=ke())}),[ke]);var Me=u.useCallback((function(e){var t=e.target,n=t?t.naturalWidth||t.clientWidth:0,r=t?t.naturalHeight||t.clientHeight:0;X(r),G(n),L&&L([n,r]),D&&D()}),[D,L]),Le=u.useCallback((function(e){1===e.touches.length&&(fe.current=[e.touches[0].clientX,e.touches[0].clientY]),pe.current=null}),[]),Ae=u.useCallback((function(e){1===e.touches.length?fe.current=[e.touches[0].clientX,e.touches[0].clientY]:2===e.touches.length&&(fe.current=null)}),[]),Oe=u.useCallback((function(e){me.current&&me.current.focus(),Ce&&(he.current=[e.clientX,e.clientY])}),[Ce]),Re=u.useCallback((function(e){if(Ce&&he.current){var t=(0,o.Z)(he.current,2),n=t[0],i=t[1],a=[e.clientX,e.clientY];he.current=a,le((function(e){return(0,r.Z)((0,r.Z)({},e),{},{xOffset:e.xOffset+(a[0]-n),yOffset:e.yOffset+(a[1]-i)})}))}}),[Ce]),Fe=u.useCallback((function(e){he.current=null}),[]),De=u.useCallback((function(e){he.current=null,je(!1)}),[]),Ne=u.useContext(C.Z).imagePreview.frameBorderColor||"#aaa",_e=!!$&&!!re,Be=!!W&&!!J&&!U,Ue=_e?void 0:"hidden",Ve=Ce?"grab":null,He=Ve?{cursor:Ve}:{},ze={transform:"translate(".concat(ce,"px, ").concat(ue,"px)"),outline:M?"1px solid ".concat(Ne):void 0,width:null!=W?W*de:null,height:null!=J?J*de:null,transformOrigin:"0 0"},We={transform:"scale(".concat(de,")"),width:W,height:J,transformOrigin:"0 0",display:"flex"},Ge=(0,r.Z)((0,r.Z)((0,r.Z)({},E.spriteThumbnailImage),{},{visibility:Ue},f?void 0:E.previewImagePixelated),{},{cursor:Ve}),Ye={position:"absolute",top:0,left:0,width:"100%",height:"100%",visibility:Ue};return(0,h.jsx)(c.Z,{bounds:!0,onResize:function(e){ee(e.bounds.width),ie(e.bounds.height)},children:function(e){var i=e.measureRef;return(0,h.jsxs)("div",{style:E.container,children:[!O&&(0,h.jsxs)(d.Z,{noPadding:!0,children:[(0,h.jsx)(l.Z,{onClick:function(){return Te(T.e_,Ee)},tooltip:{id:"Zoom out (you can also use Ctrl + Mouse wheel)"},children:(0,h.jsx)(g,{})}),(0,h.jsx)("div",{style:E.sliderContainer,children:(0,h.jsx)(k.Z,{min:Math.log2(.25*Ze()),max:Math.log2(4*Ze()),step:1/16,value:Math.log2(de),onChange:function(e){Se(Math.pow(2,e),Ee)}})}),(0,h.jsx)(l.Z,{onClick:function(){return Te(T.Qi,Ee)},tooltip:{id:"Zoom in (you can also use Ctrl + Mouse wheel)"},children:(0,h.jsx)(p.Z,{})}),(0,h.jsx)(l.Z,{onClick:function(){ke()},tooltip:{id:"Fit content to window"},children:(0,h.jsx)(m.Z,{})})]}),(0,h.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},E.contentContainer),{},{height:y||"100%",width:P}),children:[!A&&(0,h.jsx)(j.Z,{}),(0,h.jsxs)("div",{dir:"ltr",style:(0,r.Z)((0,r.Z)({},E.imagePreviewContainer),{},{overflow:_e?"unset":"hidden"},He),ref:function(e){i(e),me.current=e},onTouchStart:O?null:Ae,onTouchMove:O?null:Ie,onTouchEnd:O?null:Le,tabIndex:0,onPointerDown:O?null:Oe,onPointerMove:O?null:Re,onPointerUp:O?null:Fe,onPointerLeave:O?null:De,onKeyDown:O?null:ye.current.onKeyDown,onKeyUp:O?null:ye.current.onKeyUp,children:[!!U&&(0,h.jsx)(x.Z,{children:(0,h.jsx)(v.Z,{children:(0,h.jsx)(s.Trans,{id:"Unable to load the image"})})}),!U&&(0,h.jsx)("div",{style:ze,children:(0,h.jsx)("div",{style:We,children:F?(0,h.jsx)(w.Z,{style:Ge,alt:t,url:n,onError:xe,onLoad:Me,hideLoader:N}):(0,h.jsx)(b.W,{style:Ge,alt:t,src:n,onError:xe,onLoad:Me})})}),Be&&M&&(0,h.jsx)("div",{style:Ye,children:M({imageWidth:W||0,imageHeight:J||0,imageOffsetTop:ue,imageOffsetLeft:ce,imageZoomFactor:de,forcedCursor:Ve,deactivateControls:Ce})})]})]})]})}})}},65671:function(e,t,n){"use strict";var r=n(1413),i=n(74165),a=n(15861),o=n(29439),s=n(28381),l=n(85841),c=n(78081),u=n(58893),d=n(23818),p=n(12813),f=n(29343),h={container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"stretch",minHeight:0},screenshot:{position:"relative",objectFit:"contain",width:"100%",height:"100%"},loader:{padding:0}};t.Z=function(e){var t=e.modelUrl,n=e.size,g=e.expand,m=e.fullWidth,x=s.useContext(l.Z).getResourcePreview,v=s.useState(t?null:""),b=(0,o.Z)(v,2),C=b[0],j=b[1],y=(0,p.t)();return s.useEffect((function(){(0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,x(t);case 4:if(n=e.sent,y.current){e.next=7;break}return e.abrupt("return");case 7:j(n);case 8:case"end":return e.stop()}}),e)})))()}),[t,x,y]),(0,f.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},h.container),{},{flex:g?1:void 0,width:m?"100%":n,height:n||"100%"}),children:[(0,f.jsx)(u.Z,{borderRadius:4}),null===C?(0,f.jsx)(c.Z,{size:24,style:h.loader}):""!==C&&(0,f.jsx)(d.W,{src:C,alt:"3D Model Preview",style:(0,r.Z)((0,r.Z)({},h.screenshot),{},{maxWidth:n,maxHeight:n})})]})}},85841:function(e,t,n){"use strict";n.d(t,{f:function(){return b},Z:function(){return f}});var r=n(29439),i=n(15671),a=n(43144),o=n(74165),s=n(15861),l=n(28381);function c(){return new Worker(n.p+"Resource3DPreview.worker.bf51c3b4bf3046ded6d1.worker.js")}var u=n(29343),d={getResourcePreview:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=l.createContext(d),f=p,h="RENDER_MODEL",g="RENDER_COMPLETE",m="RENDER_ERROR",x="INIT",v=function(){function e(){(0,i.Z)(this,e),this.isInitialized=!1,this.pendingPromises=new Map,this.fallbackImagePath="JsPlatform/Extensions/3d_model.svg",this.worker=new c,this.setupMessageHandlers(),this.initWorker()}return(0,a.Z)(e,[{key:"setupMessageHandlers",value:function(){var e=this;this.worker.onmessage=function(t){var n=t.data,r=n.type;switch(r){case x:var i=n.success;e.isInitialized=i;break;case g:var a=n,o=a.resourceUrl,s=a.screenshot,l=e.pendingPromises.get(o);l&&(l.resolve(s),e.pendingPromises.delete(o));break;case m:var c=n,u=c.resourceUrl,d=c.error;console.error("Worker error rendering 3D model:",d);var p=e.pendingPromises.get(u);p&&(p.resolve(e.fallbackImagePath),e.pendingPromises.delete(u));break;default:console.warn("Unknown message type from worker:",r)}},this.worker.onerror=function(t){console.error("Worker error:",t),e.pendingPromises.forEach((function(t){t.resolve(e.fallbackImagePath)})),e.pendingPromises.clear()}}},{key:"initWorker",value:function(){var e={type:x};this.worker.postMessage(e)}},{key:"renderModel",value:function(e){var t=this;return new Promise((function(n,r){if(t.isInitialized){t.pendingPromises.set(e,{resolve:n,reject:r});var i={type:h,resourceUrl:e};t.worker.postMessage(i)}else n(t.fallbackImagePath)}))}},{key:"terminate",value:function(){this.worker&&this.worker.terminate()}}]),e}(),b=function(e){var t=e.children,n=l.useState(null),i=(0,r.Z)(n,2),a=i[0],c=i[1],d=l.useRef([]),f=l.useRef({}),h=l.useRef(null);l.useEffect((function(){return h.current=new v,function(){d.current=[],f.current={},h.current&&(h.current.terminate(),h.current=null)}}),[]);var g=l.useCallback((function(e){return new Promise((function(t){f.current[e]?t(f.current[e]):(d.current.push({url:e,resolve:t}),1===d.current.length&&c(e))}))}),[]),m=l.useCallback(function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.current){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,h.current.renderModel(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),console.error("Error rendering 3D model:",e.t0),e.abrupt("return","JsPlatform/Extensions/3d_model.svg");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);return l.useEffect((function(){if(a){var e=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(a);case 2:(t=e.sent)&&(f.current[a]=t,d.current.filter((function(e){return e.url===a})).forEach((function(e){var n=e.resolve;n&&n(t)})),d.current=d.current.filter((function(e){return e.url!==a})),(n=d.current[0])&&c(n.url));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[a,m]),(0,u.jsx)(p.Provider,{value:{getResourcePreview:g},children:t})}},26554:function(e,t,n){"use strict";var r=n(74165),i=n(15861),a=n(93433),o=n(29439),s=n(28381),l=n(36600),c=n(72402),u=(n(72410),n(57974)),d=n(9383),p=n(61325),f=n(51598),h=n(60022),g=n(10888),m=n(40243),x=n(30141),v=n(85076),b=n(1491),C=n(37571),j=n(23198),y=n(94703),Z=n(38501),k=n(65056),w=n(18455),T=n(29343),S={textFieldStyle:{display:"flex",flex:1}},P=s.forwardRef((function(e,t){var n=e.project,P=e.projectScopedContainersAccessor,I=e.initialResourceName,E=e.defaultNewResourceName,M=e.resourceManagementProps,L=e.resourcesLoader,A=e.resourceKind,O=e.fallbackResourceKind,R=e.onChange,F=e.disabled,D=(0,Z.Z)(),N=s.useRef(null),_=s.useState(e.initialResourceName),B=(0,o.Z)(_,2),U=B[0],V=B[1],H=(0,k.Z)().showConfirmation,z=s.useRef(null),W=s.useRef([]),G=s.useState(!1),Y=(0,o.Z)(G,2),q=Y[0],J=Y[1],X=s.useState(e.initialResourceName),K=(0,o.Z)(X,2),Q=K[0],$=K[1],ee=s.useState(!1),te=(0,o.Z)(ee,2),ne=te[0],re=te[1],ie=s.useState(!1),ae=(0,o.Z)(ie,2),oe=ae[0],se=ae[1],le=M.getStorageProvider(),ce=M.resourceSources.filter((function(e){return e.kind===A})).filter((function(e){var t=e.onlyForStorageProvider;return!t||t===le.internalName})),ue=s.useCallback((function(e){N.current&&N.current.focus(e)}),[]);s.useImperativeHandle(t,(function(){return{focus:ue}})),s.useEffect((function(){$(I),N.current&&N.current.forceInputValueTo(I)}),[I]);var de=s.useCallback((function(e){e!==Q&&(R&&R(e),M.onResourceUsageChanged&&M.onResourceUsageChanged())}),[Q,R,M]),pe=s.useCallback((function(){$(""),N.current&&N.current.forceInputValueTo(""),J(!1),de("")}),[de]),fe=s.useCallback((function(e){if(""!==e){if(e!==Q){var t=-1===W.current.indexOf(e);t||de(e),$(e),N.current&&N.current.forceInputValueTo(e),J(t)}}else pe()}),[Q,de,pe]),he=s.useCallback((function(e){oe&&se(!1),V(e)}),[V,oe]),ge=s.useCallback((function(e){for(var t=new Set,n=function(){var n=e.getResourcesContainer(r);(0,w.mapVector)(n.getAllResourceNames(),(function(e,r){n.getResource(e).getKind()===A&&t.add(e)})),O&&(0,w.mapVector)(n.getAllResourceNames(),(function(e,r){n.getResource(e).getKind()===O&&t.add(e)})),W.current=(0,a.Z)(t)},r=0;r<e.getResourcesContainersCount();r++)n()}),[A,O]),me=s.useCallback((function(){ge(P.get().getResourcesContainersList()),D()}),[P,D,ge]);s.useEffect(me,[me]);var xe=(0,y.Z)({project:n,callback:me}).triggerResourcesHaveChanged,ve=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,a,o,s,l,c,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,M.onChooseResource({initialSourceName:t.name,multiSelection:!1,resourceKind:A});case 5:if(i=e.sent,a=i.selectedResources,o=i.selectedSourceName,a.length){e.next=10;break}return e.abrupt("return");case 10:if(s=ce.find((function(e){return e.name===o}))){e.next=13;break}return e.abrupt("return");case 13:if(l=a[0],c=l.getName(),N.current&&N.current.forceInputValueTo(c),!s.shouldCreateResource){e.next=25;break}if((0,u.r3)(n,l),d=n.getResourcesManager().addResource(l),a.forEach((function(e){return e.delete()})),!d){e.next=24;break}return e.next=23,M.onFetchNewlyAddedResources();case 23:M.onNewResourcesAdded();case 24:xe();case 25:fe(c),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.error("Unable to choose a resource",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}(),[n,M,A,fe,xe,ce]),be=s.useCallback((function(){return[].concat((0,a.Z)(ce.map((function(e){return{text:"",value:"",translatableValue:e.displayName,renderIcon:function(){return(0,T.jsx)(b.Z,{})},onClick:function(){return ve(e)}}}))),[{type:"separator"}])}),[ve,ce]),Ce=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,i){var a,o,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z.current=new AbortController,a=z.current.signal,o=n.getResourcesManager(),s=o.getResource(Q),e.prev=4,re(!0),e.next=8,i.edit({project:n,i18n:t,getStorageProvider:M.getStorageProvider,resourceManagementProps:M,resourceNames:[Q],extraOptions:{existingMetadata:s.getMetadata(),singleFrame:!0,fps:0,name:Q||E,isLooping:!1},signal:a});case 8:if(l=e.sent,re(!1),l){e.next=12;break}return e.abrupt("return");case 12:if((c=l.resources).length){e.next=15;break}return e.abrupt("return");case 15:L.burstUrlsCacheForResources(n,[c[0].name]),de(c[0].name),xe(),D(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),"UserCancellationError"!==e.t0.name&&(console.error("An exception was thrown when launching or reading resources from the external editor:",e.t0),(0,x.gR)({message:"There was an error while using the external editor. Try with another resource and if this persists, please report this as a bug.",rawError:e.t0,errorId:"external-editor-error"})),re(!1);case 25:return e.prev=25,z.current=null,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,21,25,28]])})));return function(t,n){return e.apply(this,arguments)}}(),[E,D,de,n,M,Q,L,xe]),je=s.useCallback((0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H({title:{id:"Cancel editing"},message:{id:"You will lose any progress made with the external editor. Do you wish to cancel?"},confirmButtonLabel:{id:"Cancel edition"},dismissButtonLabel:{id:"Continue editing"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:z.current?z.current.abort():console.error("Cannot cancel editing with external editor, abort controller is missing.");case 6:case"end":return e.stop()}}),e)}))),[H]),ye=q?(0,T.jsx)(l.Trans,{id:"This resource does not exist in the game"}):null,Ze=M.resourceExternalEditors.filter((function(e){return e.kind===A})),ke=be(),we=W.current.map((function(e){return{text:e,value:e}})),Te=U&&!oe?we:[].concat((0,a.Z)(ke),[{text:"",value:"",translatableValue:{id:"Or start typing..."},disabled:!0}]);return(0,T.jsx)(l.I18n,{children:function(t){var n=t.i18n;return(0,T.jsxs)(p.ep,{noMargin:!0,expand:!0,alignItems:"center",noResponsiveLandscape:!0,children:[(0,T.jsx)(m.sg,{expand:!0,noMargin:!0,children:(0,T.jsxs)(p.pJ,{expand:!0,noMargin:!0,alignItems:"center",children:[(0,T.jsx)(c.ZP,{style:e.style,textFieldStyle:S.textFieldStyle,floatingLabelText:e.floatingLabelText,helperMarkdownText:e.helperMarkdownText,hintText:e.hintText,openOnFocus:!0,dataSource:Te,value:Q,onChange:fe,onInputValueChange:he,errorText:ye,fullWidth:e.fullWidth,margin:e.margin,onRequestClose:e.onRequestClose,onApply:e.onApply,ref:N,id:e.id,disabled:F,onBlur:function(){oe&&se(!1)}}),e.canBeReset&&(0,T.jsx)(f.Z,{size:"small",onClick:pe,children:(0,T.jsx)(j.Z,{})})]})}),(0,T.jsx)(h.Z,{label:Q?(0,T.jsx)(l.Trans,{id:"Replace"}):(0,T.jsx)(l.Trans,{id:"Choose a file"}),onClick:function(){var e=N.current;e&&(se(!0),e.focus())},primary:!0,disabled:F}),1===Ze.length&&(0,T.jsx)(g.Z,{leftIcon:(0,T.jsx)(C.Z,{fontSize:"small"}),label:n._(Q?Ze[0].editDisplayName:Ze[0].createDisplayName),onClick:function(){return Ce(n,Ze[0])},disabled:F}),Ze.length>1?(0,T.jsx)(d.Z,{icon:(0,T.jsx)(C.Z,{fontSize:"small"}),label:n._(Q?Ze[0].editDisplayName:Ze[0].createDisplayName),onClick:function(){return Ce(n,Ze[0])},buildMenuTemplate:function(e){return Ze.map((function(t){return{label:e._(Q?t.editDisplayName:t.createDisplayName),click:function(){return Ce(e,t)}}}))},disabled:F}):null,ne&&(0,T.jsx)(v.G,{onClose:je})]})}})}));t.Z=P},65035:function(e,t,n){"use strict";n(28381);var r=n(72410),i=n(26554),a=n(20995),o=n(61325),s=n(6996),l=n(40243),c=n(29343);t.Z=function(e){var t=e.project,n=e.projectScopedContainersAccessor,u=e.resourceManagementProps,d=e.resourceKind,p=e.resourceName,f=e.defaultNewResourceName,h=e.onChange,g=e.floatingLabelText,m=e.hintText,x=e.helperMarkdownText,v=e.fallbackResourceKind,b=e.id,C=e.disabled,j=(0,s.UQ)().isMobile?"center":"flex-end",y=a.f.includes(d),Z=(0,c.jsx)(i.Z,{project:t,projectScopedContainersAccessor:n,resourceManagementProps:u,resourcesLoader:r.Z,resourceKind:d,fullWidth:!0,initialResourceName:p,defaultNewResourceName:f,onChange:h,floatingLabelText:g,hintText:m,helperMarkdownText:x,fallbackResourceKind:v,id:b,disabled:C});return y?(0,c.jsxs)(o.pJ,{noMargin:!0,expand:!0,alignItems:j,children:[(0,c.jsx)(a.Z,{resourceName:p,resourcesLoader:r.Z,project:t,resourceKind:d}),Z]}):(0,c.jsx)(l.x1,{noMargin:!0,expand:!0,children:Z})}},17037:function(e,t,n){"use strict";n.d(t,{QP:function(){return a},hh:function(){return p},xz:function(){return i}});n(28381);for(var r=n.g.gd,i=["audio","font"],a=[{kind:"audio",displayName:{id:"Audio"},fileExtensions:["aac","wav","mp3","ogg"],createNewResource:function(){return new r.AudioResource}},{kind:"image",displayName:{id:"Image"},fileExtensions:["png","jpg","jpeg","webp"],createNewResource:function(){return new r.ImageResource}},{kind:"font",displayName:{id:"Font"},fileExtensions:["ttf","otf"],createNewResource:function(){return new r.FontResource}},{kind:"video",displayName:{id:"Video"},fileExtensions:["mp4","webm"],createNewResource:function(){return new r.VideoResource}},{kind:"json",displayName:{id:"Json"},fileExtensions:["json"],createNewResource:function(){return new r.JsonResource}},{kind:"tilemap",displayName:{id:"Tile Map"},fileExtensions:["json","ldtk","tmj"],createNewResource:function(){return new r.TilemapResource}},{kind:"tileset",displayName:{id:"Tile Set"},fileExtensions:["json","tsj"],createNewResource:function(){return new r.TilesetResource}},{kind:"bitmapFont",displayName:{id:"Bitmap Font"},fileExtensions:["fnt","xml"],createNewResource:function(){return new r.BitmapFontResource}},{kind:"model3D",displayName:{id:"3D model"},fileExtensions:["glb"],createNewResource:function(){return new r.Model3DResource}},{kind:"atlas",displayName:{id:"Atlas"},fileExtensions:["atlas"],createNewResource:function(){return new r.AtlasResource}},{kind:"spine",displayName:{id:"Spine Json"},fileExtensions:["json"],createNewResource:function(){return new r.SpineResource}},{kind:"javascript",displayName:{id:"JavaScript file"},fileExtensions:["js"],createNewResource:function(){return new r.JavaScriptResource}}],o={},s=0,l=a;s<l.length;s++){var c=l[s],u=c.kind,d=c.createNewResource;o[u]=d}function p(e){return o[e]?o[e]():null}},70729:function(e,t,n){"use strict";var r=n(1413),i=n(29439),a=n(28381),o=(n(72410),n(21601)),s=n(23818),l=n(24910),c=n(39631),u=n(58893),d=n(29343),p={spriteThumbnail:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",boxSizing:"border-box",flexShrink:0},spriteThumbnailImage:{position:"relative",pointerEvents:"none"},checkboxContainer:{textAlign:"initial",position:"absolute",width:34,height:25,bottom:0,right:0}};t.Z=function(e){var t=e.onContextMenu,n=e.resourcesLoader,f=e.resourceName,h=e.project,g=a.useContext(l.Z),m=a.useState(!1),x=(0,i.Z)(m,2),v=x[0],b=x[1],C=(0,c.i)(a.useCallback((function(e){t&&t(e.clientX,e.clientY)}),[t])),j=g.imagePreview.borderColor,y=e.selected?g.palette.secondary:v?g.message.error:j,Z=(0,r.Z)((0,r.Z)({},p.spriteThumbnail),{},{width:e.size||100,height:e.size||100,border:"1px solid ".concat(y),borderRadius:4},e.style);return(0,d.jsxs)("div",(0,r.Z)((0,r.Z)({title:f,style:Z,onContextMenu:function(e){e.stopPropagation(),t&&t(e.clientX,e.clientY)}},C),{},{children:[(0,d.jsx)(u.Z,{borderRadius:4}),(0,d.jsx)(s.W,{style:(0,r.Z)((0,r.Z)({},p.spriteThumbnailImage),{},{maxWidth:e.size||100,maxHeight:e.size||100,display:v?"none":void 0}),alt:f,src:n.getResourceFullUrl(h,f,{}),onError:function(e){b(e)},onLoad:function(){b(!1)}}),e.selectable&&(0,d.jsx)("div",{style:p.checkboxContainer,children:(0,d.jsx)(o.Z,{checked:!!e.selected,onCheck:function(t,n){return e.onSelect&&e.onSelect(n)}})})]}))}},20995:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});n(28381);var r=n(72410),i=n(70729),a=n(65671),o=n(29343),s=["image","model3D"];t.Z=function(e){var t=e.project,n=e.resourceName,s=e.resourcesLoader,l=e.resourceKind,c=e.style,u=e.selectable,d=e.selected,p=e.onSelect,f=e.onContextMenu,h=e.size;switch(l){case"image":return(0,o.jsx)(i.Z,{project:t,resourceName:n,resourcesLoader:s,style:c,selectable:u,selected:d,onSelect:p,onContextMenu:f,size:h||100});case"model3D":return(0,o.jsx)(a.Z,{modelUrl:r.Z.getResourceFullUrl(t,n,{}),size:h||100});default:return null}}},57974:function(e,t,n){"use strict";n.d(t,{Gu:function(){return y},MX:function(){return C},OI:function(){return v},PX:function(){return j},Te:function(){return f},U3:function(){return p},ZC:function(){return h},iz:function(){return g},jJ:function(){return x},kX:function(){return b},r3:function(){return m}});var r=n(1413),i=n(72410),a=n(50057),o=n.n(a),s=n(79431),l=n(84360),c=o()("fs"),u=o()("path"),d=n.g.gd,p=function(e,t){var n=i.Z.getResourceFullUrl(e,t,{}).substring(7);return-1!==n.indexOf("?cache=")&&(n=n.substring(0,n.lastIndexOf("?cache="))),n},f=function(e,t){var n=u.dirname(e.getProjectFile());return t.includes(n)},h=function(e,t,n){if(!c||!u)return Promise.resolve(t);var r=u.dirname(e.getProjectFile());return Promise.all(t.map((function(t){if(f(e,t))return n.set(t,t),t;var i=u.basename(t),a=u.extname(i),o=u.basename(i,a),l=(0,s.Z)(o,(function(e){var t=u.join(r,e)+a;return c.existsSync(t)})),d=u.join(r,l+a);return new Promise((function(e){c.copyFile(t,d,(function(r){return r?(n.set(t,t),e(t)):(n.set(d,t),e(d))}))}))})))},g=function(e,t){if(!e.getResourcesManager().hasResource(t))return"";if(!c)return"";var n=e.getResourcesManager().getResource(t).getFile();if(j(n))return"";var r=u.resolve(u.dirname(e.getProjectFile()),n);return c.existsSync(r)?f(e,r)?"":"warning":"error"},m=function(e,t){t instanceof d.ImageResource&&t.setSmooth("nearest"!==e.getScaleMode())},x=function(e,t){var n=(0,l.R)(t),r=new d.ResourcesRenamer(e.getResourcesManager(),n);n.delete(),d.ResourceExposer.exposeWholeProjectResources(e,r),r.delete()},v=function(e){var t=e.getMetadata();if(t)try{var n=JSON.parse(t);if(n&&"object"===typeof n)return{localFilePath:n.localFilePath&&"string"===typeof n.localFilePath?n.localFilePath:null,extension:n.extension&&"string"===typeof n.extension?n.extension:null}}catch(r){console.warn("Malformed metadata for resource with name "+e.getName()+" - ignoring it.")}return{localFilePath:null,extension:null}},b=function(e,t){var n=e.getMetadata();try{var i=n?JSON.parse(n):{};return void e.setMetadata(JSON.stringify((0,r.Z)((0,r.Z)({},i),t)))}catch(a){}e.setMetadata(JSON.stringify(t))},C=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")},j=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},y=function(e){return e.startsWith("blob:")}},94703:function(e,t,n){"use strict";var r=n(28381),i=n(23865),a=n.n(i),o={},s=function(e){return o[e.ptr.toString()]};t.Z=function(e){var t=e.project,n=e.callback,i=r.useCallback((function(e){var n=function(e){var t=e.ptr.toString();return o.hasOwnProperty(t)||(o[t]={}),o[t]}(t),r=a()();return n[r]=e,r}),[t]),l=r.useCallback((function(e){var n=s(t);n&&delete n[e]}),[t]),c=r.useCallback((function(){var e=s(t);e&&Object.keys(e).forEach((function(t){try{e[t]()}catch(n){}}))}),[t]);return r.useEffect((function(){var e=i(n);return function(){l(e)}}),[n,i,l]),{triggerResourcesHaveChanged:c}}},2139:function(e,t,n){"use strict";n.d(t,{Z:function(){return z},Y:function(){return H}});var r=n(1413),i=n(29439),a=n(36600),o=n(28381),s=n(38509),l=n(30696),c=n(12949),u=n(30141),d=n(46673),p=n(57974),f=n(17037),h=n(72410),g=n(40243),m=n(22537),x=n(38501),v=n(15671),b=n(43144),C=n(60136),j=n(29388),y=n(15169),Z=n(74044),k=n(29277),w=n(65111),T=n(31318),S=n(24910),P=n(86278),I=n(29343),E={textField:{top:k.B2,fontSize:12}};var M=function(e){var t=e.item,n=e.itemName,i=e.id,a=e.data,s=e.isBold,l=e.onRename,c=e.editingName,u=e.getThumbnail,d=e.renderItemLabel,p=e.selected,f=e.onItemSelected,h=e.errorStatus,g=e.buildMenuTemplate,m=e.onEdit,x=e.hideMenuButton,v=o.useRef(null),b=o.useRef(!1),C=o.useContext(S.Z);o.useEffect((function(){if(c){b.current=!1;var e=setTimeout((function(){v.current&&v.current.focus()}),100);return function(){return clearTimeout(e)}}}),[c]);var j=c?(0,I.jsx)(k.ZP,{id:"rename-item-field",margin:"none",ref:v,defaultValue:n,onBlur:function(e){l(b.current?n:e.currentTarget.value)},onKeyPress:function(e){(0,w.ph)(e)&&v.current&&v.current.blur()},onKeyUp:function(e){if((0,w.W$)(e)){var t=v.current;t&&(b.current=!0,t.blur())}},fullWidth:!0,style:E.textField}):(0,I.jsx)("div",{title:"string"===typeof n?n:void 0,style:(0,r.Z)((0,r.Z)({},T.t),{},{color:p?C.listItem.selectedTextColor:void 0,fontStyle:s?"italic":void 0,fontWeight:s?"bold":"normal"}),children:d?d():(0,I.jsx)(P.Z,{noMargin:!0,size:"body-small",children:n})}),M={backgroundColor:p?""===h?C.listItem.selectedBackgroundColor:"error"===h?C.listItem.selectedErrorBackgroundColor:C.listItem.selectedWarningBackgroundColor:void 0,color:""===h?void 0:"error"===h?C.listItem.errorTextColor:C.listItem.warningTextColor},L=u?(0,I.jsx)(Z.Z,{iconSize:24,src:u()}):null;return(0,I.jsx)(y.HC,{style:(0,r.Z)({},M),primaryText:j,leftIcon:L,displayMenuButton:!x,rightIconColor:p?C.listItem.selectedRightIconColor:C.listItem.rightIconColor,buildMenuTemplate:g,onClick:function(){f&&(c||f(p?null:t))},onDoubleClick:function(e){0===e.button&&m&&(c||(f(null),m(t)))},id:i,data:a})},L=n(1491),A=n(72662),O=n(60022),R=function(e){return(0,I.jsx)(g.sg,{expand:!0,noMargin:e.noMargin,children:(0,I.jsx)(g.x1,{children:(0,I.jsx)(O.Z,{primary:!0,onClick:e.onClick,label:e.primaryText,id:e.id,icon:"search"===e.kind?(0,I.jsx)(A.Z,{}):(0,I.jsx)(L.Z,{}),fullWidth:!0})})})},F=n(43228),D=n(65752),N=n(6996),_=n(35213),B=function(e){(0,C.Z)(n,e);var t=(0,j.Z)(n);function n(){var e;(0,v.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).DragSourceAndDropTarget=(0,F.x)(e.props.reactDndType),e}return(0,b.Z)(n,[{key:"forceUpdateGrid",value:function(){this._list&&this._list.forceUpdateGrid()}},{key:"scrollToItem",value:function(e){var t=this,n=this.props.fullList.findIndex((function(n){return t.props.getItemName(n)===t.props.getItemName(e)}));this._list&&-1!==n&&this._list.scrollToRow(n)}},{key:"_renderItemRow",value:function(e,t,n){var r=this,i=this.props,a=i.selectedItems,o=i.getItemThumbnail,s=i.erroredItems,l=i.isItemBold,c=i.onEditItem,u=i.renamedItem,d=i.getItemName,p=i.getItemId,f=i.getItemData,h=i.renderItemLabel,g=u===e,m=d(e),x=-1!==a.findIndex((function(e){return d(e)===m}));return(0,I.jsx)(M,{item:e,itemName:m,id:p?p(e,t):void 0,data:f?f(e,t):void 0,renderItemLabel:h?function(){return h(e)}:void 0,isBold:!!l&&l(e),onRename:function(t){return r.props.onRename(e,t)},editingName:g,getThumbnail:o?function(){return o(e)}:void 0,selected:x,onItemSelected:this.props.onItemSelected,errorStatus:s&&s[m]||"",buildMenuTemplate:function(){return r.props.buildMenuTemplate(e,t)},onEdit:c,hideMenuButton:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.height,r=t.width,i=t.fullList,a=t.addNewItemLabel,o=t.addNewItemId,l=t.renamedItem,c=t.getItemThumbnail,u=t.getItemName,d=t.onAddNewItem,p=t.onMoveSelectionToItem,f=t.canMoveSelectionToItem,h=t.selectedItems,g=this.DragSourceAndDropTarget,m=new Image;return m.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",(0,I.jsx)(N.Ip,{children:function(t){var x=t.isMobile;return(0,I.jsx)(_.wh,{children:function(t){return(0,I.jsx)(s.aV,{ref:function(t){return e._list=t},overscanIndicesGetter:function(e){var t=e.cellCount,n=(e.overscanCellsCount,e.startIndex),r=e.stopIndex;return{overscanStartIndex:Math.max(0,n-20),overscanStopIndex:Math.min(t-1,r+20)}},height:n,rowCount:i.length+(d?1:0),rowHeight:c?y.xD:y.Sv,rowRenderer:function(n){var s=n.index,v=n.key,b=n.style;if(s>=i.length)return(0,I.jsx)("div",{style:b,children:(0,I.jsx)(R,{onClick:d,primaryText:r<200?"":a,id:o})},v);var C=i[s],j=l===C,y=-1!==h.findIndex((function(e){return u(e)===u(C)})),Z=!j&&("touch"!==t||y);return(0,I.jsx)("div",{style:b,children:(0,I.jsx)(g,{beginDrag:function(){return"touch"===t&&e._list&&(e._list.props.style.overflow="hidden"),e.props.onItemSelected(C),{name:u(C),thumbnail:"GD_OBJECT_WITH_CONTEXT"===e.props.reactDndType&&c?c(C):void 0}},canDrag:function(){return Z},canDrop:function(){return!f||f(C)},drop:function(){p(C)},endDrag:function(){"touch"===t&&e._list&&(e._list.props.style.overflow="auto",e.forceUpdate())},children:function(t){var n=t.connectDragSource,r=t.connectDropTarget,i=t.connectDragPreview,a=t.isOver,o=t.canDrop;i(m);var l=r((0,I.jsxs)("div",{children:[a&&(0,I.jsx)(D.Z,{canDrop:o}),e._renderItemRow(C,s,x)]}));return l?n(l):null}})},v)},width:r})}})}})}}]),n}(o.Component),U={listContainer:{flex:1}},V=function(e){return e.getName()},H=function(e){switch(e.getKind()){case"audio":return"res/actions/music24.png";case"json":case"tilemap":case"tileset":case"spine":return"res/actions/fichier24.png";case"video":return"JsPlatform/Extensions/videoicon24.png";case"font":return"res/actions/font24.png";case"bitmapFont":return"JsPlatform/Extensions/bitmapfont32.png";case"model3D":return"JsPlatform/Extensions/3d_model.svg";case"javascript":return"res/javascript.svg";default:return"res/unknown32.png"}},z=o.memo(o.forwardRef((function(e,t){var n=e.project,v=e.selectedResource,b=e.onSelectResource,C=e.onDeleteResource,j=e.onRenameResource,y=e.fileMetadata,Z=e.onRemoveUnusedResources,k=e.getResourceActionsSpecificToStorageProvider,w=(0,x.Z)(),T=o.useState(null),S=(0,i.Z)(T,2),P=S[0],E=S[1],M=o.useState(""),L=(0,i.Z)(M,2),A=L[0],O=L[1],R=o.useState({}),F=(0,i.Z)(R,2),D=F[0],N=F[1],_=o.useState(null),z=(0,i.Z)(_,2),W=z[0],G=z[1],Y=o.useRef(null),q=o.useCallback((function(e){C(e)}),[C]),J=o.useCallback((function(e){E(e),Y.current&&Y.current.forceUpdateGrid()}),[]),X=o.useCallback((function(e){return"image"===e.getKind()?h.Z.getResourceFullUrl(n,e.getName(),{}):H(e)}),[n]),K=o.useCallback((function(){w(),Y.current&&Y.current.forceUpdateGrid()}),[w]),Q=o.useCallback((function(e,t){E(null),e.getName()!==t&&0!==t.length&&(n.getResourcesManager().hasResource(t)?(0,u.T4)("Another resource with this name already exists",{delayToNextTick:!0}):j(e,t,(function(n){n&&(e.setName(t),K())})))}),[n,j,K]),$=o.useCallback((function(e){if(v){var t=n.getResourcesManager();t.moveResource(t.getResourcePosition(v.getName()),t.getResourcePosition(e.getName())),K()}}),[n,v,K]),ee=o.useCallback((function(e){return function(t,r){var i=[{label:e._({id:"Rename"}),click:function(){return J(t)}},{label:e._({id:"Delete"}),click:function(){return q(t)}},{type:"separator"},{label:e._({id:"Remove unused..."}),submenu:f.QP.map((function(t){var n=t.displayName,r=t.kind;return{label:e._(n),click:function(){Z(r)}}})).concat([{label:e._({id:"Resources (any kind)"}),click:function(){f.QP.forEach((function(e){Z(e.kind)}))}}])}];return k&&y&&(i.push({type:"separator"}),i=i.concat(k({project:n,fileMetadata:y,resource:t,i18n:e,informUser:G,updateInterface:function(){return K()},cleanUserSelectionOfResources:function(){return b(null)}}))),i}}),[n,y,J,q,Z,k,b,K]),te=o.useCallback((function(){var e=n.getResourcesManager().getAllResourceNames().toJSArray(),t={};e.forEach((function(e){t[e]=(0,p.iz)(n,e)})),N(t),K()}),[n,K]);o.useImperativeHandle(t,(function(){return{forceUpdateList:K,checkMissingPaths:te}})),o.useEffect((function(){te()}),[te]);var ne=n.getResourcesManager(),re=ne.getAllResourceNames().toJSArray().map((function(e){return ne.getResource(e)})),ie=(0,d.c)(re,A),ae=n.ptr;return(0,I.jsxs)(l.Z,{children:[(0,I.jsx)(g.x1,{children:(0,I.jsx)(g.sg,{expand:!0,children:(0,I.jsx)(c.Z,{value:A,onRequestSearch:function(){},onChange:function(e){return O(e)},placeholder:{id:"Search resources"}})})}),(0,I.jsx)("div",{style:U.listContainer,children:(0,I.jsx)(s.qj,{children:function(e){var t=e.height,n=e.width;return(0,I.jsx)(a.I18n,{children:function(e){var r=e.i18n;return(0,I.jsx)(B,{ref:Y,fullList:ie,width:n,height:t,getItemName:V,getItemThumbnail:X,selectedItems:v?[v]:[],onItemSelected:b,renamedItem:P,onRename:Q,onMoveSelectionToItem:$,buildMenuTemplate:ee(r),erroredItems:D,reactDndType:"GD_RESOURCE"},ae)}})}})}),!!W&&(0,I.jsx)(m.Z,(0,r.Z)({duration:7e3,visible:!0,hide:function(){return G(null)}},W))]})})),(function(e,t){return e.project!==t.project||e.selectedResource!==t.selectedResource}))},72410:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(15671),i=n(43144),a=n(85919),o=n(50057),s=n.n(o),l=s()("electron"),c=s()("path"),u=function(){function e(){(0,r.Z)(this,e),this.projectCache={}}return(0,i.Z)(e,[{key:"_getProjectCache",value:function(e){var t=this.projectCache[e.ptr];return t||(this.projectCache[e.ptr]={})}},{key:"getCachedUrl",value:function(e,t){return this._getProjectCache(e)[t]}},{key:"cacheUrl",value:function(e,t){return this._getProjectCache(e)[t]=t}},{key:"burstUrl",value:function(e,t){delete this._getProjectCache(e)[t]}},{key:"cacheLocalFileUrl",value:function(e,t,n,r){var i=this._getProjectCache(e);return i[t]=r?n:"".concat(n,"?cache=").concat(Date.now())}}]),e}(),d=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,null,[{key:"burstUrlsCacheForResources",value:function(t,n){var r=t.getResourcesManager();n.forEach((function(n){r.hasResource(n)&&e._cache.burstUrl(t,r.getResource(n).getFile())}))}},{key:"burstAllUrlsCache",value:function(){e._cache=new u}},{key:"getFullUrl",value:function(t,n,r){var i=r.isResourceForPixi,o=r.disableCacheBurst;if(l&&function(e){return!(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:"))}(n)){var s=e._cache.getCachedUrl(t,n);if(s)return s;var u=t.getProjectFile(),d=c.dirname(u),p=c.resolve(d,n).replace(/\\/g,"/");return console.info("Caching resolved local filename:",p),this._cache.cacheLocalFileUrl(t,n,"file://"+p,!!o)}var f=(0,a.WN)(n);i&&(f=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n}(f,"gdUsage","pixi"));var h=e._cache.getCachedUrl(t,f);return h||(console.info("Caching resolved url:",f),this._cache.cacheUrl(t,f))}},{key:"getResourceFullUrl",value:function(t,n,r){if(t.getResourcesManager().hasResource(n)){var i=t.getResourcesManager().getResource(n).getFile();return e.getFullUrl(t,i,r)}return n}}]),e}();d._cache=new u},72291:function(e,t,n){"use strict";n.d(t,{b:function(){return u},n:function(){return c}});var r=n(74165),i=n(15861),a=n(29439),o=n(28381),s=n(94446),l=n(29343),c=o.createContext({tutorials:null,fetchTutorials:function(){},error:null}),u=function(e){var t=e.children,n=o.useState(null),u=(0,a.Z)(n,2),d=u[0],p=u[1],f=o.useState(null),h=(0,a.Z)(f,2),g=h[0],m=h[1],x=o.useRef(!1),v=o.useCallback((function(){d||x.current||(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),x.current=!0,e.prev=2,e.next=5,(0,s.Qp)();case 5:t=e.sent,console.info("Loaded ".concat(t?t.length:0," tutorials.")),p(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Unable to load the tutorials:",e.t0),m(e.t0);case 14:x.current=!1;case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()}),[d,x]),b=o.useMemo((function(){return{tutorials:d,fetchTutorials:v,error:g}}),[d,v,g]);return(0,l.jsx)(c.Provider,{value:b,children:t})}},67412:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(48409),i=function(e){return(0,r.tq)()?"":(0,r.z1)()?e.replace(/CmdOrCtrl\+/,"\u2318").replace(/CommandOrControl\+/,"\u2318").replace(/Super\+/,"\u2318").replace(/Shift\+/,"\u21e7").replace(/Alt\+/,"\u2325").replace(/Option\+/,"\u2325").replace(/Delete/,"\u2326").replace(/Backspace/,"\u232b").replace(/numadd/,"+").replace(/numsub/,"-").replace(/num1/,"1").replace(/num2/,"2").replace(/num3/,"3"):e.replace(/CmdOrCtrl\+/,"Ctrl+").replace(/CommandOrControl\+/,"Ctrl+").replace(/Super\+/,"Win+").replace(/Option\+/,"Alt+").replace(/Delete/,"DEL").replace(/numadd/,"+").replace(/numsub/,"-").replace(/num1/,"1").replace(/num2/,"2").replace(/num3/,"3")}},3108:function(e,t,n){"use strict";n.d(t,{UQ:function(){return b},X1:function(){return v},_m:function(){return x}});var r=n(45987),i=n(1413),a=n(28381),o=n(17358),s=n(53220),l=n(35008),c=n(6180),u=n(51598),d=n(24910),p=n(40243),f=n(84900),h=n(29343),g=["costlyBody","noMargin","kind"],m={bodyRoot:{padding:0},accordionSummaryWithExpandOnLeft:{flexDirection:"row-reverse",paddingLeft:0,paddingRight:0},accordionSummaryContent:{flexGrow:1,display:"flex",alignItems:"center",marginLeft:16},actionsContainer:{flexGrow:0,flexShrink:0,alignSelf:"center"}},x=function(e){var t=(0,o.Z)((function(e){return{root:{"& .Mui-expanded svg":{transform:"rotate(-90deg)"}}}}))();return(0,h.jsx)(p.sg,{noMargin:e.noMargin,expand:!0,children:(0,h.jsxs)(p.x1,{noMargin:!0,expand:!0,alignItems:"center",children:[(0,h.jsx)(p.sg,{noMargin:!0,expand:!0,children:(0,h.jsx)(l.Z,{classes:t,style:m.accordionSummaryWithExpandOnLeft,expandIcon:e.expandIcon||(0,h.jsx)(u.Z,{size:"small",children:(0,h.jsx)(f.Z,{})}),children:(0,h.jsx)("div",{style:m.accordionSummaryContent,children:e.children})})}),e.actions&&(0,h.jsx)("div",{style:m.actionsContainer,children:e.actions})]})})},v=function(e){return(0,h.jsx)(c.Z,{style:(0,i.Z)((0,i.Z)({},e.disableGutters&&m.bodyRoot),e.style),children:e.children})},b=a.forwardRef((function(e,t){var n=e.costlyBody,o=e.noMargin,l=e.kind,c=(0,r.Z)(e,g),u=a.useContext(d.Z),p={backgroundColor:"answer"===l?u.message.answer.backgroundColor:u.paper.backgroundColor.medium,marginLeft:0,border:"answer"===l?"2px solid ".concat(u.message.answer.borderColor):o?"0px":"1px solid ".concat(u.toolbar.separatorColor),padding:o?"0px":void 0,margin:o?"0px":void 0,borderRadius:"answer"===l?4:0};return(0,h.jsx)(s.Z,(0,i.Z)((0,i.Z)({},c),{},{ref:t,square:"answer"!==l,elevation:0,style:p,TransitionProps:{unmountOnExit:!!n}}))}))},91739:function(e,t,n){"use strict";var r={showAlertDialog:function(e){},showConfirmDialog:function(e){},showConfirmDeleteDialog:function(e){},showYesNoCancelDialog:function(e){}},i=n(28381).createContext(r);t.Z=i},65056:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(91739);t.Z=function(){var e=i.useContext(a.Z),t=e.showAlertDialog,n=e.showConfirmDialog,o=e.showConfirmDeleteDialog,s=e.showYesNoCancelDialog;return{showAlert:i.useCallback((function(e){return new Promise((function(n){t((0,r.Z)({callback:n},e))}))}),[t]),showConfirmation:i.useCallback((function(e){return new Promise((function(t){n((0,r.Z)({callback:t},e))}))}),[n]),showDeleteConfirmation:i.useCallback((function(e){return new Promise((function(t){o((0,r.Z)({callback:t},e))}))}),[o]),showYesNoCancel:i.useCallback((function(e){return new Promise((function(t){s((0,r.Z)({callback:t},e))}))}),[s])}}},38092:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(1413),i=n(28381),a=n(40243),o=n(98411),s=n(89141),l=n(86278),c=n(24910),u=n(61325),d=n(51598),p=n(20914),f=n(23198),h=n(78118),g=n(29343),m=i.memo((function(e){return(0,g.jsxs)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,g.jsx)("path",{d:"M2.96262 18.0041L10.2087 3.52252C11.2247 1.49207 14.1171 1.49261 15.1323 3.52342L22.3719 18.0051C23.2889 19.8397 21.9577 22 19.9099 22H5.42417C3.37586 22 2.04457 19.8389 2.96262 18.0041Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M12.667 8C13.2193 8 13.667 8.44772 13.667 9V12C13.667 12.5523 13.2193 13 12.667 13C12.1147 13 11.667 12.5523 11.667 12V9C11.667 8.44772 12.1147 8 12.667 8Z",fill:"#32323B"}),(0,g.jsx)("path",{d:"M12.667 17C13.2193 17 13.667 16.5523 13.667 16C13.667 15.4477 13.2193 15 12.667 15C12.1147 15 11.667 15.4477 11.667 16C11.667 16.5523 12.1147 17 12.667 17Z",fill:"#32323B"})]}))})),x=i.memo((function(e){return(0,g.jsx)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,g.jsxs)("g",{id:"icon/Information",children:[(0,g.jsx)("path",{id:"Vector",d:"M2 12C2 6.47716 6.47716 2 12 2C17.5229 2 22 6.47716 22 12C22 17.5229 17.5229 22 12 22C6.47716 22 2 17.5229 2 12Z",fill:"#45D9A1"}),(0,g.jsx)("path",{id:"symbol",fillRule:"evenodd",clipRule:"evenodd",d:"M14.7477 8.88263C15.2267 9.15749 15.3922 9.76864 15.1174 10.2477L12.8238 14.245C12.0182 15.6487 9.96598 15.5643 9.27842 14.0992L8.84468 13.1747C8.6101 12.6747 8.82526 12.0793 9.32525 11.8447C9.82524 11.6101 10.4207 11.8253 10.6553 12.3252L11.089 13.2496L13.3826 9.25231C13.6575 8.77328 14.2686 8.60776 14.7477 8.88263Z",fill:"#32323B"})]})}))})),v=i.memo((function(e){return(0,g.jsxs)(h.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,g.jsx)("path",{d:"M2.66699 12C2.66699 6.47716 7.14415 2 12.667 2C18.1899 2 22.667 6.47716 22.667 12C22.667 17.5229 18.1899 22 12.667 22C7.14415 22 2.66699 17.5229 2.66699 12Z",fill:"currentColor"}),(0,g.jsx)("path",{d:"M15.9285 10.0114C16.28 9.6599 16.28 9.09005 15.9285 8.73858C15.577 8.38711 15.0072 8.38711 14.6557 8.73858L12.6671 10.7272L10.6785 8.73858C10.327 8.38711 9.75717 8.38711 9.40569 8.73858C9.05422 9.09005 9.05422 9.6599 9.40569 10.0114L11.3943 12L9.40569 13.9886C9.05422 14.3401 9.05422 14.9099 9.40569 15.2614C9.75717 15.6128 10.327 15.6128 10.6785 15.2614L12.6671 13.2728L14.6557 15.2614C15.0072 15.6128 15.577 15.6128 15.9285 15.2614C16.28 14.9099 16.28 14.3401 15.9285 13.9886L13.9399 12L15.9285 10.0114Z",fill:"#32323B"})]}))})),b=n(47956),C={icon:{width:28,height:28,marginRight:10,marginLeft:10},topRightHideButton:{position:"absolute",right:0,top:0},paper:{position:"relative",overflow:"hidden"},content:{flex:1}},j=function(e){var t=e.kind,n=e.children,h=e.onHide,j=e.hideButtonSize,y=e.renderRightButton,Z=e.renderLeftIcon,k=e.markdownImageOnly,w=e.background,T=void 0===w?"dark":w,S=i.useContext(c.Z),P=(0,o.Z)(),I=(0,r.Z)({},C.paper),E={display:"flex",alignItems:"center",borderLeft:"1px solid ".concat(P.palette.divider)};return"error"!==t&&"warning"!==t&&"valid"!==t||(I.borderColor=S.message[t],"light"===P.palette.type&&(I.backgroundColor=(0,s.$n)(S.message[t],.9))),(0,g.jsxs)(p.Z,{variant:"outlined",style:I,background:T,children:[k?n:(0,g.jsxs)(a.x1,{noMargin:!0,children:[(0,g.jsx)(a.sg,{expand:!0,children:(0,g.jsx)(a.x1,{expand:!0,children:(0,g.jsxs)(u.ep,{alignItems:"center",justifyContent:"space-between",noMargin:!0,expand:!0,noResponsiveLandscape:!0,children:[(0,g.jsxs)(a.x1,{noMargin:!0,alignItems:"center",children:[Z?(0,g.jsxs)(i.Fragment,{children:[Z(),(0,g.jsx)(a.LZ,{})]}):(0,g.jsxs)(i.Fragment,{children:["info"===t&&(0,g.jsx)(b.Z,{style:C.icon}),"warning"===t&&(0,g.jsx)(m,{style:(0,r.Z)((0,r.Z)({},C.icon),{},{color:S.message.warning})}),"error"===t&&(0,g.jsx)(v,{style:(0,r.Z)((0,r.Z)({},C.icon),{},{color:S.message.error})}),"valid"===t&&(0,g.jsx)(x,{style:(0,r.Z)((0,r.Z)({},C.icon),{},{color:S.message.valid})})]}),(0,g.jsx)(l.Z,{style:C.content,children:n})]}),y&&y()]})})}),h&&!("small"===j)&&(0,g.jsx)("div",{style:E,children:(0,g.jsx)(d.Z,{onClick:h,color:"default",children:(0,g.jsx)(f.Z,{fontSize:"small"})})})]}),h&&"small"===j&&(0,g.jsx)("div",{style:C.topRightHideButton,children:(0,g.jsx)(d.Z,{"aria-label":"hide",onClick:function(){return h()},size:"small",children:(0,g.jsx)(f.Z,{fontSize:"small"})})})]})}},30696:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(20914)),a=n(29343),o={container:{display:"flex",flexDirection:"column"},maxWidth:{maxWidth:"100%"}};t.Z=function(e){return(0,a.jsx)(i.Z,{square:!0,style:(0,r.Z)((0,r.Z)({},o.container),{},{height:e.noFullHeight?void 0:"100%",width:e.width?e.width:void 0,flex:e.noExpand?void 0:1},e.maxWidth?o.maxWidth:void 0),background:"dark",children:e.children})}},1589:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(38295),o=n(24910),s=n(29343);t.Z=function(e){var t=i.useContext(o.Z);return(0,s.jsx)(a.Z,{variant:"body2",align:e.align||"center",component:"div",style:(0,r.Z)({opacity:.6,textShadow:"1px 1px 0px ".concat(t.emptyMessage.shadowColor),userSelect:e.allowSelection?"text":void 0,cursor:e.allowSelection?"text":void 0},e.style),title:e.tooltipText,children:e.children})}},24289:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(1412),i=function(e){var t=r.findDOMNode(e);if(t instanceof HTMLButtonElement)t.focus();else if(t instanceof HTMLElement){var n=t.getElementsByTagName("button");n&&n.length&&n[0]instanceof HTMLButtonElement&&n[0].focus()}}},87284:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(57216),o=n(58396),s=n(24910),l=n(40243),c=n(6996),u=n(29343),d={minWidth:0,flex:1,display:"flex",alignItems:"center"},p={minWidth:0};t.Z=function(e){var t=e.children,n=e.header,f=e.background,h=e.cardCornerAction,g=e.isHighlighted,m=e.disabled,x=e.padding,v=(0,c.UQ)().isMobile,b=i.useContext(s.Z),C=(0,r.Z)((0,r.Z)({},p),{paddingTop:x||0,paddingBottom:x||18,paddingRight:x||(v?8:24),paddingLeft:Math.max(0,x||(v?8:24)-4)});return(0,u.jsx)(a.Z,{elevation:0,style:(0,r.Z)({opacity:m?.5:1,backgroundColor:"dark"===f?b.paper.backgroundColor.dark:b.paper.backgroundColor.medium},g?{borderWidth:"0 0 0 ".concat(4,"px"),borderStyle:"solid",borderLeftColor:b.message.valid}:{}),children:(0,u.jsxs)(l.sg,{expand:!0,noMargin:!0,children:[n&&(0,u.jsxs)(l.x1,{justifyContent:"space-between",expand:!0,children:[(0,u.jsx)("div",{style:(0,r.Z)((0,r.Z)({},d),{},{paddingLeft:v?8:24,paddingRight:h?v?8:24:0}),children:n}),(0,u.jsx)(l.sg,{children:h})]}),(0,u.jsx)(o.Z,{style:C,children:t})]})})}},21601:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(69186)),a=n(19345),o=n(62802),s=n(7172),l=n(66733),c=n(29343),u=(0,i.Z)({root:{marginLeft:9,marginRight:9,marginTop:0,marginBottom:0,padding:0}}),d=(0,i.Z)({root:{display:"block"}});t.Z=function(e){var t=e.onCheck,n=u(),i=d(),p=(0,c.jsx)(s.Z,{className:n.root,disabled:e.disabled,checked:e.checked,onChange:t?function(e){return t(e,e.target.checked)}:void 0,icon:e.uncheckedIcon,checkedIcon:e.checkedIcon,style:e.label?void 0:e.style,id:e.id});return e.label?(0,c.jsxs)(o.Z,{classes:i,children:[(0,c.jsx)(a.Z,{control:p,label:e.label,style:(0,r.Z)((0,r.Z)({},e.style),{},{cursor:"default"})}),e.tooltipOrHelperText&&(0,c.jsx)(l.Z,{children:e.tooltipOrHelperText})]}):p}},8511:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(33028),o=n(69186),s=n(15955),l=n(29343),c=(0,o.Z)({root:{cursor:"default"},deleteIcon:{cursor:"default"}}),u=i.forwardRef((function(e,t){var n=i.useRef(null),o=(0,s.Z)(),u=function(){n.current&&n.current.focus()};return i.useImperativeHandle(t,(function(){return{focus:u}})),(0,l.jsx)(a.Z,{label:e.label,icon:e.icon,size:e.size,variant:e.variant,avatar:e.avatar,style:(0,r.Z)((0,r.Z)({},e.style),e.textColor?{color:o.palette.text[e.textColor]}:void 0),onClick:e.onClick,onBlur:e.onBlur,onFocus:e.onFocus,onDelete:e.onDelete,classes:c(),className:e.disableAutoTranslate?"notranslate":"",ref:n,color:e.color})}));t.Z=u},66789:function(e,t,n){"use strict";n(28381);var r=n(92709),i=n(29343);t.Z=function(e){return(0,i.jsx)(r.Z,{color:"secondary",style:e.style,size:e.size,disableShrink:e.disableShrink,variant:"determinate"===e.variant?"static":e.variant,value:e.value})}},37237:function(e,t,n){"use strict";var r=n(1413),i=n(29439),a=n(28381),o=n(14238),s=n(64684),l=n(80845),c=n(29343),u={color:{width:"100%",height:"100%",borderRadius:"2px",textAlign:"center",fontSize:"10px"},swatch:{padding:"2px",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},disabled:{opacity:.2,cursor:"default"},popover:{zIndex:l.Z.tooltip+100}};t.Z=function(e){var t=e.color,n=e.style,l=e.onChange,d=e.onChangeComplete,p=e.disableAlpha,f=e.disabled,h=e.size,g=a.useRef(null),m=a.useState(!1),x=(0,i.Z)(m,2),v=x[0],b=x[1],C=t||{r:200,g:200,b:200,a:1};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)((0,r.Z)({},u.swatch),f?u.disabled:{}),{},{width:"compact"===h?16:38,height:"compact"===h?16:18},n),onClick:function(){f||b(!v)},ref:g,children:(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)({},u.color),{},{background:"rgba(".concat(C.r,", ").concat(C.g,", ").concat(C.b,", ").concat(C.a||1,")")}),children:t?null:"?"})}),v&&g.current?(0,c.jsx)(s.ZP,{open:!0,onClose:function(){b(!1)},anchorEl:g.current,style:u.popover,children:(0,c.jsx)(o.xS,{color:C,onChange:l,onChangeComplete:d,disableAlpha:p})}):null]})}},90286:function(e,t,n){"use strict";var r=n(1413),i=n(29439),a=n(36600),o=n(28381),s=n(29277),l=n(37237),c=n(11858),u=n(29343),d={container:{position:"relative",display:"inline-block"},picker:{position:"absolute",right:"8px",top:"19px"}};t.Z=function(e){var t=e.fullWidth,n=e.disableAlpha,p=e.id,f=e.floatingLabelText,h=e.helperMarkdownText,g=e.onChange,m=e.color,x=e.alpha,v=e.disabled,b=o.useState(m),C=(0,i.Z)(b,2),j=C[0],y=C[1],Z=o.useState(n||void 0===x?1:x),k=(0,i.Z)(Z,2),w=k[0],T=k[1],S=function(e,t){y(e),T(t)},P=function(){var e=parseFloat(w);e<0&&(e=0),e>1&&(e=1),T(e),g(j,e)};return(0,u.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},d.container),{},{width:t?"100%":void 0}),children:[(0,u.jsx)(s.ZP,{id:p,fullWidth:n,style:n?void 0:{width:"70%"},floatingLabelText:f,floatingLabelFixed:!v,helperMarkdownText:h,type:"text",translatableHintText:v?null:{id:"R;G;B, like 100;200;180"},value:j,onChange:function(e){return S(e.target.value,w)},onBlur:P,disabled:v}),!n&&(0,u.jsx)(s.ZP,{id:"".concat(p||"","-alpha"),floatingLabelText:(0,u.jsx)(a.Trans,{id:"Alpha"}),floatingLabelFixed:!0,style:{width:"30%"},translatableHintText:{id:"Number between 0 and 1"},value:w.toString(),onChange:function(e,t){return S(j,parseFloat(t))},onBlur:P,type:"number",step:.1,disabled:v}),(0,u.jsx)("div",{style:d.picker,children:(0,u.jsx)(l.Z,{disableAlpha:n,onChangeComplete:function(e){var t=(0,c.KC)(e.rgb),r=n?1:e.rgb.a;y(t),r&&T(r),g(t,r)},color:(0,c.A0)(j,w),disabled:v})})]})}},7906:function(e,t,n){"use strict";var r=n(28381),i=n(63307),a=n(69186),o=n(24910),s=n(29343),l={linearProgress:{flex:1}};t.Z=function(e){var t=r.useContext(o.Z),n=(0,a.Z)({root:{height:10,borderRadius:5},colorPrimary:{backgroundColor:t.paper.backgroundColor.medium},bar:{borderRadius:5,backgroundColor:100===e.value?t.linearProgress.color.complete:t.linearProgress.color.incomplete}})();return(0,s.jsx)(i.Z,{classes:n,style:l.linearProgress,variant:"determinate",value:e.value})}},70619:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(4942),i=(n(28381),n(3781)),a=n(82954),o=n.n(a),s="CompactSelectField_container__yhyda",l="CompactSelectField_rounded__g1ul0",c="CompactSelectField_compactSelectField__lhXNq",u="CompactSelectField_disabled__SAl+a",d="CompactSelectField_errored__BZ3tv",p="CompactSelectField_withOptionIcon__hfkSV",f="CompactSelectField_arrowContainer__a+H1H",h="CompactSelectField_arrow__P9Yez",g="CompactSelectField_leftIconContainer__eU4s0",m="CompactSelectField_leftIcon__Yb4z8",x="CompactSelectField_optionIconContainer__rxnQq",v="CompactSelectField_optionIcon__43Wt3",b=n(84361),C=n(29343),j=function(e){var t,n,a=e.onChange,j=e.value,y=e.id,Z=e.disabled,k=e.errored,w=e.children,T=e.renderLeftIcon,S=e.renderOptionIcon,P=e.leftIconTooltip,I=e.rounded;return(0,C.jsxs)("div",{className:o()((t={},(0,r.Z)(t,s,!0),(0,r.Z)(t,u,Z),(0,r.Z)(t,d,k),(0,r.Z)(t,l,I),t)),children:[T&&(0,C.jsx)(i.ZP,{title:P,enterDelay:b.K,placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-20"}}},children:(0,C.jsx)("div",{className:g,children:T(m)})}),(0,C.jsxs)("div",{className:o()((n={},(0,r.Z)(n,c,!0),(0,r.Z)(n,p,!!S),n)),children:[S&&(0,C.jsx)("div",{className:x,children:S(v)}),(0,C.jsx)("select",{id:y,disabled:Z,value:j,onChange:function(e){return a(e.currentTarget.value)},children:w}),(0,C.jsx)("div",{className:o()((0,r.Z)({},f,!0)),children:(0,C.jsx)("span",{className:o()((0,r.Z)({},h,!0))})})]})]})}},12470:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(1413),i=n(29439),a=n(45987),o=n(28381),s=n(64949),l="CompactSemiControlledTextField_container__gsIo5",c="CompactSemiControlledTextField_error__4Coa2",u=n(29343),d=["value","onChange","errorText","commitOnBlur"],p=function(e){var t=e.value,n=e.onChange,p=e.errorText,f=e.commitOnBlur,h=(0,a.Z)(e,d),g=o.useState(!1),m=(0,i.Z)(g,2),x=m[0],v=m[1],b=o.useState(""),C=(0,i.Z)(b,2),j=C[0],y=C[1];return(0,u.jsxs)("div",{className:l,children:[(0,u.jsx)(s.Z,(0,r.Z)({type:"text",value:x?j:t,onFocus:function(e){v(!0),y(t)},onChange:function(e){y(e),f||n(e)},onBlur:function(e){t!==e.currentTarget.value&&n(e.currentTarget.value),v(!1),y("")}},h)),p&&(0,u.jsx)("div",{className:c,children:p})]})}},81040:function(e,t,n){"use strict";n.d(t,{Q:function(){return C}});var r=n(4942),i=n(28381),a=n(36600),o=n(82954),s=n.n(o),l="CompactTextAreaField_container__Hd8oF",c="CompactTextAreaField_compactTextAreaField__z-VP-",u="CompactTextAreaField_disabled__denfn",d="CompactTextAreaField_errored__wzrf+",p=n(28842),f=n(3781),h=n(86278),g=n(32832),m=n(84361),x=n(65111),v=n(29343),b={label:{overflow:"hidden",textOverflow:"ellipsis",lineHeight:"17px",maxHeight:34,opacity:.7}},C=function(e){var t=e.label,n=e.markdownDescription,o=e.value,C=e.onChange,j=e.id,y=e.disabled,Z=e.errored,k=e.placeholder,w=e.rows,T=e.maxLength,S=e.onSubmit,P=i.useRef(j||(0,p._)()),I=n?[t," - ",(0,v.jsx)(g.r,{source:n},"markdown-desc")]:t;return(0,v.jsx)(a.I18n,{children:function(e){var n,i=e.i18n;return(0,v.jsxs)("label",{className:s()((n={},(0,r.Z)(n,l,!0),(0,r.Z)(n,u,y),(0,r.Z)(n,d,Z),n)),children:[t&&(0,v.jsx)(f.ZP,{title:I,enterDelay:m.K,placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-20"}}},children:(0,v.jsx)(h.Z,{noMargin:!0,style:b.label,children:t})}),(0,v.jsx)("div",{className:s()((0,r.Z)({},c,!0)),children:(0,v.jsx)("textarea",{id:P.current,disabled:y,value:null===o?"":o,onChange:function(e){return C(e.currentTarget.value)},placeholder:i._(k),onKeyDown:S?function(e){(0,x.Fc)(e)&&S()}:void 0,rows:w||3,maxLength:T})})]})}})}},64949:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(1413),i=n(4942),a=n(28381),o=n(3781),s=n(82954),l=n.n(s),c="CompactTextField_container__4yvkt",u="CompactTextField_compactTextField__+85-+",d="CompactTextField_disabled__oW2P4",p="CompactTextField_errored__eIW79",f="CompactTextField_withEndAdornment__jVEcY",h="CompactTextField_leftIconContainer__sKE-P",g="CompactTextField_label__C6nCR",m="CompactTextField_control__z3J+V",x="CompactTextField_leftIcon__ZoAxD",v="CompactTextField_endAdornmentButton__d7-Em",b="CompactTextField_endAdornmentIcon__W+X8x",C=n(84361),j=function(e){var t=e.onChange,n=e.onGetInitialValue,r=a.useRef(null);return{onMouseDown:a.useCallback((function(e){var t=e.currentTarget;t instanceof Element&&t.requestPointerLock&&(t.requestPointerLock(),r.current={initialValue:n(),accumulatedValue:0,previouslyChangedValue:null})}),[n]),onMouseMove:a.useCallback((function(e){if(r.current){var n=r.current,i=n.initialValue,a=n.previouslyChangedValue;r.current.accumulatedValue+=e.movementX/2;var o=Math.round(r.current.accumulatedValue)+i,s=(i.toString().split(".")[1]||"").length,l=parseFloat(o.toFixed(s));if(l!==a){if(!r.current)return;r.current.previouslyChangedValue=l,t(l)}}}),[t]),onMouseUp:a.useCallback((function(){r.current&&(document.exitPointerLock(),r.current=null)}),[])}},y=n(28842),Z=n(96355),k=n(29343),w=a.forwardRef((function(e,t){e.type;var n,s,w,T=e.value,S=e.onChange,P=e.id,I=e.disabled,E=e.errored,M=e.placeholder,L=e.renderLeftIcon,A=e.leftIconTooltip,O=e.useLeftIconAsNumberControl,R=e.renderEndAdornmentOnHover,F=e.onClickEndAdornment,D=e.onBlur,N=e.onFocus,_=e.onKeyDown,B=e.onKeyUp,U=e.onWheel,V=a.useRef(P||(0,y._)()),H=a.useRef(null),z=j({onChange:function(e){return S(e.toString(),"iconControl")},onGetInitialValue:function(){return parseFloat(T)}}),W=a.useCallback((function(e){D&&D(e)}),[D]),G=a.useCallback((function(e){N&&N(e)}),[N]);a.useImperativeHandle(t,(function(){return{blur:function(){H.current&&H.current.blur()},focus:function(){H.current&&H.current.focus()}}}));var Y=a.useCallback((function(e){H.current&&H.current===document.activeElement&&U&&U(e)}),[U]);return a.useEffect((function(){var e=H.current;return e&&e.addEventListener("wheel",Y,{passive:!1}),function(){e&&e.removeEventListener("wheel",Y,{passive:!1})}}),[Y]),(0,k.jsxs)("div",{className:l()((n={},(0,i.Z)(n,c,!0),(0,i.Z)(n,d,I),(0,i.Z)(n,p,E),n)),children:[L&&A&&(0,k.jsx)(o.ZP,{title:A,enterDelay:C.K,placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-20"}}},children:(0,k.jsx)("div",(0,r.Z)((0,r.Z)({className:l()((s={},(0,i.Z)(s,h,!0),(0,i.Z)(s,m,!!O),s))},O?z:{}),{},{children:(0,k.jsx)("label",{htmlFor:V.current,className:g,children:L(x)})}))}),(0,k.jsxs)("div",{className:l()((w={},(0,i.Z)(w,u,!0),(0,i.Z)(w,f,!!R),w)),children:[(0,k.jsx)("input",{id:V.current,type:"text",ref:H,disabled:I,value:null===T?"":"number"===typeof T?(0,Z.q)(T,2):T,onChange:function(e){return S(e.currentTarget.value,"keyInput")},placeholder:M,onBlur:W,onFocus:G,onKeyDown:_,onKeyUp:B}),R&&(0,k.jsx)("button",{onClick:F,className:v,children:R(b)})]})]})}))},15637:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(4942),i=n(28381),a=n(3781),o=n(82954),s=n.n(o),l="CompactToggleButtons_container__SoC42",c="CompactToggleButtons_containerExpand__wB5t4",u="CompactToggleButtons_compactToggleButton__FzWf9",d="CompactToggleButtons_label__u1cKh",p="CompactToggleButtons_active__XZcR9",f="CompactToggleButtons_separator__KOKHc",h="CompactToggleButtons_icon__Jyx0d",g=n(84361),m=n(29343),x=function(e){var t,n=e.id,o=e.noSeparator,x=e.buttons,v=e.expand;return(0,m.jsx)("div",{id:n,className:s()((t={},(0,r.Z)(t,l,!0),(0,r.Z)(t,c,v),t)),children:x.map((function(e,t){var n;return(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(a.ZP,{title:e.tooltip,enterDelay:g.K,placement:"top",children:(0,m.jsxs)("button",{className:s()((n={},(0,r.Z)(n,u,!0),(0,r.Z)(n,p,e.isActive),n)),onClick:e.onClick,children:[e.renderIcon(h),e.label&&(0,m.jsx)("span",{className:d,children:e.label})]})}),t<x.length-1&&!o&&(0,m.jsx)("div",{className:s()((0,r.Z)({},f,!0))},"spacer-".concat(t))]},e.id)}))})}},70263:function(e,t,n){"use strict";n.d(t,{K:function(){return j}});var r=n(4942),i=(n(28381),n(3781)),a=n(86278),o=n(32832),s=n(84361),l="CompactToggleField_container__H0o7B",c="CompactToggleField_fullWidth__duhQi",u="CompactToggleField_toggleSwitch__hIB5a",d="CompactToggleField_checkbox__yW+e7",p="CompactToggleField_slider__6UeX8",f="CompactToggleField_handle__f4rUK",h="CompactToggleField_handleContainer__KfUDH",g="CompactToggleField_disabled__z7xWg",m="CompactToggleField_checked__4h-Ur",x=n(82954),v=n.n(x),b=n(29343),C={label:{overflow:"hidden",textOverflow:"ellipsis",lineHeight:"17px",maxHeight:34}},j=function(e){var t,n,x,j,y=e.hideTooltip?null:e.markdownDescription?[e.label," - ",(0,b.jsx)(o.r,{source:e.markdownDescription},"markdown-desc")]:e.label,Z=(0,b.jsx)(a.Z,{noMargin:!0,style:C.label,color:"primary"===e.labelColor?"primary":"secondary",children:e.label});return(0,b.jsxs)("label",{className:v()((t={},(0,r.Z)(t,l,!0),(0,r.Z)(t,c,e.fullWidth),t)),id:e.id,children:[(0,b.jsxs)("div",{className:u,children:[(0,b.jsx)("input",{type:"checkbox",className:d,onChange:function(){return e.onCheck(!e.checked)},disabled:e.disabled}),(0,b.jsx)("span",{className:v()((n={},(0,r.Z)(n,p,!0),(0,r.Z)(n,m,e.checked),(0,r.Z)(n,g,e.disabled),n)),children:(0,b.jsx)("span",{className:v()((x={},(0,r.Z)(x,h,!0),(0,r.Z)(x,m,e.checked),(0,r.Z)(x,g,e.disabled),x)),children:(0,b.jsx)("span",{className:v()((j={},(0,r.Z)(j,f,!0),(0,r.Z)(j,m,e.checked),(0,r.Z)(j,g,e.disabled),j))})})})]}),e.hideTooltip?Z:(0,b.jsx)(i.ZP,{title:y,enterDelay:s.K,placement:"bottom",PopperProps:{modifiers:{offset:{enabled:!0,offset:"0,-20"}}},children:Z})]})}},23818:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(1413),i=n(45987),a=(n(28381),n(29343)),o=["src"],s=function(e){var t=e.src,n=(0,i.Z)(e,o),s=t?function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n}(t,"gdUsage","img"):void 0;return(0,a.jsx)("img",(0,r.Z)((0,r.Z)({},n),{},{src:s}))}},1491:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 3.33337C8.27612 3.33337 8.49998 3.55723 8.49998 3.83337V12.1667C8.49998 12.4428 8.27612 12.6667 7.99998 12.6667C7.72384 12.6667 7.49998 12.4428 7.49998 12.1667V3.83337C7.49998 3.55723 7.72384 3.33337 7.99998 3.33337Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 8.00004C3.33331 7.7239 3.55717 7.50004 3.83331 7.50004H12.1666C12.4428 7.50004 12.6666 7.7239 12.6666 8.00004C12.6666 8.27618 12.4428 8.50004 12.1666 8.50004H3.83331C3.55717 8.50004 3.33331 8.27618 3.33331 8.00004Z",fill:"currentColor"})]}))}))},99221:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"-80 0 1078.6 515.1",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,o.jsx)("path",{d:"M918.6 515.1h-918.6c14.7-155.7 103.7-288.7 235.1-359.9l-76.2-132c-4.3-7.4-1.8-16.8 5.6-21.1s16.8-1.8 21.1 5.6l77.2 133.7c58.9-26.9 125.2-41.9 196.5-41.9s137.6 15 196.5 41.9l77.2-133.7c4.2-7.4 13.7-9.9 21-5.6s9.9 13.7 5.6 21.1l-76.2 132c131.5 71.2 220.5 204.2 235.2 359.9zm-248.5-129c21.3 0 38.6-17.3 38.5-38.5 0-21.2-17.2-38.5-38.5-38.5-21.2 0-38.5 17.2-38.5 38.5 0 21.2 17.2 38.5 38.5 38.5zm-421.7 0c21.3 0 38.6-17.3 38.5-38.5 0-21.2-17.2-38.5-38.5-38.5-21.2 0-38.5 17.2-38.5 38.5 0 21.2 17.2 38.5 38.5 38.5z"})}))}))},35638:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,o.jsx)("path",{fill:"currentColor",d:"M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z"})}))}))},56809:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.195 0.154763C5.38567 0.354512 5.37831 0.671009 5.17856 0.861679L1.89079 4L5.17856 7.13832C5.37831 7.32899 5.38567 7.64549 5.195 7.84524C5.00433 8.04499 4.68783 8.05235 4.48809 7.86168L0.821419 4.36168C0.722578 4.26733 0.666656 4.13664 0.666656 4C0.666656 3.86336 0.722578 3.73267 0.821419 3.63832L4.48809 0.138323C4.68783 -0.0523465 5.00433 -0.0449861 5.195 0.154763Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.833323 4C0.833323 3.72386 1.05718 3.5 1.33332 3.5H10.8333C11.1095 3.5 11.3333 3.72386 11.3333 4C11.3333 4.27614 11.1095 4.5 10.8333 4.5H1.33332C1.05718 4.5 0.833323 4.27614 0.833323 4Z",fill:"currentColor"})]}))}))},61062:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.80498 0.154763C6.99565 -0.0449861 7.31215 -0.0523465 7.5119 0.138323L11.1786 3.63832C11.2774 3.73267 11.3333 3.86336 11.3333 4C11.3333 4.13664 11.2774 4.26733 11.1786 4.36168L7.5119 7.86168C7.31215 8.05235 6.99565 8.04499 6.80498 7.84524C6.61431 7.64549 6.62167 7.32899 6.82142 7.13832L10.1092 4L6.82142 0.861679C6.62167 0.671009 6.61431 0.354512 6.80498 0.154763Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.666656 4C0.666656 3.72386 0.890514 3.5 1.16666 3.5H10.6667C10.9428 3.5 11.1667 3.72386 11.1667 4C11.1667 4.27614 10.9428 4.5 10.6667 4.5H1.16666C0.890514 4.5 0.666656 4.27614 0.666656 4Z",fill:"currentColor"})]}))}))},60274:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.16683 4.49996C8.16683 3.48744 8.98762 2.66663 10.0002 2.66663H12.8335C13.4778 2.66663 14.0002 3.18897 14.0002 3.83329V10.8333C14.0002 11.4776 13.4778 12 12.8335 12H11.1048C10.5301 12 9.97901 12.2282 9.57265 12.6346L9.02038 13.1868C8.87738 13.3298 8.66232 13.3726 8.47549 13.2952C8.28865 13.2178 8.16683 13.0355 8.16683 12.8333V4.49996ZM10.0002 3.66663C9.53991 3.66663 9.16683 4.03972 9.16683 4.49996V11.6622C9.71864 11.2352 10.3996 11 11.1048 11H12.8335C12.9256 11 13.0002 10.9253 13.0002 10.8333V3.83329C13.0002 3.74124 12.9255 3.66663 12.8335 3.66663H10.0002Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50016 3.66663C4.40812 3.66663 4.3335 3.74125 4.3335 3.83329V10.8333C4.3335 10.9253 4.40811 11 4.50016 11H6.22893C6.93411 11 7.61502 11.2352 8.16683 11.6622V4.49996C8.16683 4.03972 7.79375 3.66663 7.3335 3.66663H4.50016ZM3.3335 3.83329C3.3335 3.18896 3.85583 2.66663 4.50016 2.66663H7.3335C8.34604 2.66663 9.16683 3.48744 9.16683 4.49996V12.8333C9.16683 13.0355 9.04501 13.2178 8.85817 13.2952C8.67133 13.3726 8.45627 13.3298 8.31328 13.1868L7.76101 12.6346C7.35464 12.2282 6.80356 12 6.22893 12H4.50016C3.85584 12 3.3335 11.4776 3.3335 10.8333V3.83329Z",fill:"currentColor"})]}))}))},24233:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{},{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4509 4.08872C12.6781 4.24571 12.735 4.55714 12.578 4.78431L8.14508 11.1986L8.14507 11.1987C7.42761 12.2368 5.90028 12.2566 5.15616 11.2374L5.55998 10.9426L5.15616 11.2374L3.42953 8.87255C3.26669 8.64953 3.31549 8.33673 3.53851 8.17389C3.76153 8.01106 4.07433 8.05985 4.23717 8.28288L5.9638 10.6477C6.30202 11.111 6.99628 11.102 7.32242 10.6301C7.32242 10.6301 7.32242 10.6301 7.32242 10.6301L11.7554 4.21578C11.9123 3.98861 12.2238 3.93172 12.4509 4.08872Z",fill:"currentColor"})}))}))},82422:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.74883 6.06628C9.98835 6.20371 10.0711 6.50928 9.93367 6.7488L8.4046 9.41367C7.9347 10.2325 6.73757 10.1833 6.33649 9.32864L6.04733 8.71233C5.93004 8.46234 6.03762 8.16459 6.28762 8.0473C6.53761 7.93001 6.83536 8.03759 6.95265 8.28759L7.24176 8.90381C7.24175 8.9038 7.24177 8.90382 7.24176 8.90381C7.29909 9.0259 7.47008 9.03298 7.53724 8.91599C7.53724 8.916 7.53725 8.91598 7.53724 8.91599L9.06631 6.25112C9.20374 6.0116 9.50932 5.92885 9.74883 6.06628Z",fill:"currentColor"})]}))}))},42352:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,o.jsx)("path",{d:"M2.66699 12C2.66699 6.47716 7.14415 2 12.667 2C18.1899 2 22.667 6.47716 22.667 12C22.667 17.5229 18.1899 22 12.667 22C7.14415 22 2.66699 17.5229 2.66699 12Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.4149 8.88269C15.8939 9.15755 16.0595 9.7687 15.7846 10.2477L13.491 14.245C12.6854 15.6487 10.6332 15.5644 9.94566 14.0993L9.51192 13.1748C9.27734 12.6748 9.49249 12.0793 9.99248 11.8447C10.4925 11.6102 11.088 11.8253 11.3225 12.3253L11.7562 13.2496L14.0499 9.25237C14.3247 8.77334 14.9359 8.60783 15.4149 8.88269Z",fill:"#32323B"})]}))}))},25638:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16"},e),{},{fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.49309 6.80023C5.69544 6.61233 6.01181 6.62405 6.19971 6.8264L7.99998 8.76515L9.80025 6.8264C9.98815 6.62405 10.3045 6.61233 10.5069 6.80023C10.7092 6.98813 10.7209 7.3045 10.533 7.50685L8.36638 9.84019C8.27177 9.94207 8.13902 9.99996 7.99998 9.99996C7.86095 9.99996 7.72819 9.94207 7.63358 9.84019L5.46692 7.50685C5.27902 7.3045 5.29073 6.98813 5.49309 6.80023Z",fill:"currentColor"})}))}))},45047:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.19973 5.49315C9.38763 5.69551 9.37591 6.01187 9.17356 6.19977L7.23481 8.00004L9.17356 9.80031C9.37591 9.98821 9.38763 10.3046 9.19973 10.5069C9.01183 10.7093 8.69546 10.721 8.49311 10.5331L6.15977 8.36644C6.05789 8.27183 6 8.13908 6 8.00004C6 7.86101 6.05789 7.72825 6.15977 7.63365L8.49311 5.46698C8.69546 5.27908 9.01183 5.2908 9.19973 5.49315Z",fill:"currentColor"})}))}))},84900:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16"},e),{},{fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.80029 5.49309C6.98819 5.29073 7.30456 5.27902 7.50691 5.46692L9.84025 7.63358C9.94213 7.72819 10 7.86095 10 7.99998C10 8.13902 9.94213 8.27177 9.84025 8.36638L7.50691 10.533C7.30456 10.7209 6.98819 10.7092 6.80029 10.5069C6.61239 10.3045 6.62411 9.98815 6.82646 9.80025L8.76522 7.99998L6.82646 6.19971C6.62411 6.01181 6.61239 5.69544 6.80029 5.49309Z",fill:"currentColor"})}))}))},29324:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99998 6.66663C8.13902 6.66663 8.27177 6.72452 8.36638 6.8264L10.533 9.15973C10.7209 9.36209 10.7092 9.67845 10.5069 9.86636C10.3045 10.0543 9.98815 10.0425 9.80025 9.84018L7.99998 7.90143L6.19971 9.84018C6.01181 10.0425 5.69544 10.0543 5.49309 9.86636C5.29073 9.67845 5.27902 9.36209 5.46692 9.15973L7.63358 6.8264C7.72819 6.72452 7.86095 6.66663 7.99998 6.66663Z",fill:"currentColor"})}))}))},51375:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{children:(0,o.jsx)("path",{d:"M 12.008 20 L 15.468 14 L 15.458 14 C 15.798 13.4 16.008 12.73 16.008 12 C 16.008 10.8 15.468 9.73 14.628 9 L 19.418 9 C 19.798 9.93 20.008 10.94 20.008 12 C 20.008 16.418 16.426 20 12.008 20 M 4.008 12 C 4.008 10.54 4.398 9.18 5.078 8 L 8.548 14 L 8.558 14 C 9.248 15.19 10.508 16 12.008 16 C 12.458 16 12.888 15.91 13.298 15.77 L 10.898 19.91 C 7.008 19.37 4.008 16.04 4.008 12 M 15.008 12 C 15.008 13.657 13.665 15 12.008 15 C 10.351 15 9.008 13.657 9.008 12 C 9.008 10.343 10.351 9 12.008 9 C 13.665 9 15.008 10.343 15.008 12 M 12.008 4 C 14.968 4 17.548 5.61 18.928 8 L 12.008 8 C 10.068 8 8.458 9.38 8.088 11.21 L 5.708 7.08 C 7.168 5.21 9.448 4 12.008 4 M 12.008 3.054 C 7.684 3.054 3.008 6.477 3.008 12 C 3.008 16.341 6.485 21 12.008 21 C 17.531 21 20.883 16.5 20.883 12 C 20.883 6.571 16.469 3.054 12.008 3.054 Z"})}))}))},83607:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5C8.41015 5.5 5.5 8.41015 5.5 12C5.5 15.5899 8.41015 18.5 12 18.5C15.5899 18.5 18.5 15.5899 18.5 12C18.5 8.41015 15.5899 5.5 12 5.5ZM4 12C4 7.58173 7.58173 4 12 4C16.4183 4 20 7.58173 20 12C20 16.4183 16.4183 20 12 20C7.58173 20 4 16.4183 4 12Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.21967 9.21967C9.51256 8.92678 9.98744 8.92678 10.2803 9.21967L14.7803 13.7197C15.0732 14.0126 15.0732 14.4874 14.7803 14.7803C14.4874 15.0732 14.0126 15.0732 13.7197 14.7803L9.21967 10.2803C8.92678 9.98744 8.92678 9.51256 9.21967 9.21967Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7803 9.21967C15.0732 9.51256 15.0732 9.98744 14.7803 10.2803L10.2803 14.7803C9.98744 15.0732 9.51256 15.0732 9.21967 14.7803C8.92678 14.4874 8.92678 14.0126 9.21967 13.7197L13.7197 9.21967C14.0126 8.92678 14.4874 8.92678 14.7803 9.21967Z",fill:"currentColor"})]}))}))},70931:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo(i.forwardRef((function(e,t){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 7.99996C8.36818 7.99996 8.66666 8.29844 8.66666 8.66663V9.99996C8.66666 10.3681 8.36818 10.6666 7.99999 10.6666C7.6318 10.6666 7.33332 10.3681 7.33332 9.99996V8.66663C7.33332 8.29844 7.6318 7.99996 7.99999 7.99996Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M7.99999 6.66663C8.36818 6.66663 8.66666 6.36815 8.66666 5.99996C8.66666 5.63177 8.36818 5.33329 7.99999 5.33329C7.6318 5.33329 7.33332 5.63177 7.33332 5.99996C7.33332 6.36815 7.6318 6.66663 7.99999 6.66663Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05444 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05447 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"})]}))})))},34294:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 16 12",style:{fill:"none"},children:(0,o.jsx)("path",{d:"M0.75 8C0.75 9.7949 2.20507 11.25 4 11.25H12C13.7949 11.25 15.25 9.7949 15.25 8C15.25 6.2869 13.9246 4.8834 12.2433 4.759C12.1183 2.5239 10.2663 0.75 8 0.75C5.73368 0.75 3.88168 2.5239 3.75672 4.759C2.07542 4.8834 0.75 6.2869 0.75 8Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))}))},44032:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 16 16",style:{fill:"none"},children:(0,o.jsx)("path",{d:"M5.75 11.25C5.75 11.25 6 14.25 4 15.25H12C10 14.25 10.25 11.25 10.25 11.25M5.75 11.25H13.25C14.3546 11.25 15.25 10.3546 15.25 9.25V2.75C15.25 1.64543 14.3546 0.75 13.25 0.75H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V9.25C0.75 10.3546 1.64543 11.25 2.75 11.25H5.75Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))}))},90264:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.49999 3.66663C4.03975 3.66663 3.66666 4.03972 3.66666 4.49996V8.99996C3.66666 9.36815 3.96513 9.66663 4.33332 9.66663C4.60947 9.66663 4.83332 9.89048 4.83332 10.1666C4.83332 10.4428 4.60947 10.6666 4.33332 10.6666C3.41285 10.6666 2.66666 9.92043 2.66666 8.99996V4.49996C2.66666 3.48744 3.48747 2.66663 4.49999 2.66663H8.99999C9.92047 2.66663 10.6667 3.41282 10.6667 4.33329C10.6667 4.60944 10.4428 4.83329 10.1667 4.83329C9.89051 4.83329 9.66666 4.60944 9.66666 4.33329C9.66666 3.9651 9.36818 3.66663 8.99999 3.66663H4.49999Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.16666 6.33329C6.70642 6.33329 6.33332 6.70639 6.33332 7.16663V11.5C6.33332 11.9602 6.70642 12.3333 7.16666 12.3333H11.5C11.9602 12.3333 12.3333 11.9602 12.3333 11.5V7.16663C12.3333 6.70639 11.9602 6.33329 11.5 6.33329H7.16666ZM5.33332 7.16663C5.33332 6.1541 6.15413 5.33329 7.16666 5.33329H11.5C12.5125 5.33329 13.3333 6.1541 13.3333 7.16663V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H7.16666C6.15413 13.3333 5.33332 12.5125 5.33332 11.5V7.16663Z",fill:"currentColor"})]}))}))},23198:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8536 4.14645C12.0488 4.34171 12.0488 4.65829 11.8536 4.85355L4.85355 11.8536C4.65829 12.0488 4.34171 12.0488 4.14645 11.8536C3.95118 11.6583 3.95118 11.3417 4.14645 11.1464L11.1464 4.14645C11.3417 3.95118 11.6583 3.95118 11.8536 4.14645Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.14645 4.14645C4.34171 3.95118 4.65829 3.95118 4.85355 4.14645L11.8536 11.1464C12.0488 11.3417 12.0488 11.6583 11.8536 11.8536C11.6583 12.0488 11.3417 12.0488 11.1464 11.8536L4.14645 4.85355C3.95118 4.65829 3.95118 4.34171 4.14645 4.14645Z",fill:"currentColor"})]}))}))},20400:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M7.99999 0.166656C8.27613 0.166656 8.49999 0.390514 8.49999 0.666656V1.33332C8.49999 1.60947 8.27613 1.83332 7.99999 1.83332C7.72385 1.83332 7.49999 1.60947 7.49999 1.33332V0.666656C7.49999 0.390514 7.72385 0.166656 7.99999 0.166656Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M14.1667 7.99999C14.1667 7.72385 14.3905 7.49999 14.6667 7.49999H15.3333C15.6095 7.49999 15.8333 7.72385 15.8333 7.99999C15.8333 8.27613 15.6095 8.49999 15.3333 8.49999H14.6667C14.3905 8.49999 14.1667 8.27613 14.1667 7.99999Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M8.49999 14.6667C8.49999 14.3905 8.27613 14.1667 7.99999 14.1667C7.72385 14.1667 7.49999 14.3905 7.49999 14.6667V15.3333C7.49999 15.6095 7.72385 15.8333 7.99999 15.8333C8.27613 15.8333 8.49999 15.6095 8.49999 15.3333V14.6667Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M12.3131 12.3131C12.5084 12.1178 12.8249 12.1178 13.0202 12.3131L13.6869 12.9798C13.8821 13.175 13.8821 13.4916 13.6869 13.6869C13.4916 13.8821 13.175 13.8821 12.9798 13.6869L12.3131 13.0202C12.1178 12.8249 12.1178 12.5084 12.3131 12.3131Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M13.6869 3.02021C13.8821 2.82495 13.8821 2.50837 13.6869 2.3131C13.4916 2.11784 13.175 2.11784 12.9798 2.3131L12.3131 2.97977C12.1178 3.17503 12.1178 3.49161 12.3131 3.68688C12.5084 3.88214 12.8249 3.88214 13.0202 3.68688L13.6869 3.02021Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M3.68688 12.3131C3.88214 12.5084 3.88214 12.8249 3.68688 13.0202L3.02021 13.6869C2.82495 13.8821 2.50837 13.8821 2.3131 13.6869C2.11784 13.4916 2.11784 13.175 2.3131 12.9798L2.97977 12.3131C3.17503 12.1178 3.49161 12.1178 3.68688 12.3131Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M3.02021 2.3131C2.82495 2.11784 2.50837 2.11784 2.3131 2.3131C2.11784 2.50837 2.11784 2.82495 2.3131 3.02021L2.97977 3.68688C3.17503 3.88214 3.49161 3.88214 3.68688 3.68688C3.88214 3.49161 3.88214 3.17503 3.68688 2.97977L3.02021 2.3131Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M0.166656 7.99999C0.166656 7.72385 0.390514 7.49999 0.666656 7.49999H1.33332C1.60947 7.49999 1.83332 7.72385 1.83332 7.99999C1.83332 8.27613 1.60947 8.49999 1.33332 8.49999H0.666656C0.390514 8.49999 0.166656 8.27613 0.166656 7.99999Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.22361 5.21944C4.05503 5.13515 3.85337 5.15282 3.70202 5.26515C3.55067 5.37748 3.47535 5.56537 3.50719 5.75114L4.30719 10.4178C4.34834 10.6578 4.55646 10.8333 4.8 10.8333H11.2C11.4435 10.8333 11.6517 10.6578 11.6928 10.4178L12.4928 5.75114C12.5247 5.56537 12.4493 5.37748 12.298 5.26515C12.1466 5.15282 11.945 5.13515 11.7764 5.21944L9.32557 6.44486L8.37963 5.34126C8.28464 5.23044 8.14597 5.16666 8 5.16666C7.85404 5.16666 7.71537 5.23044 7.62037 5.34126L6.67444 6.44486L4.22361 5.21944ZM5.22158 9.83332L4.65967 6.55551L6.5764 7.51387C6.78161 7.61648 7.03032 7.56625 7.17963 7.39205L8 6.43495L8.82038 7.39205C8.96969 7.56625 9.2184 7.61648 9.42361 7.51387L11.3403 6.55551L10.7784 9.83332H5.22158Z",fill:"currentColor"})]}))}))},50583:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33337 4.49996C3.33337 3.48744 4.15418 2.66663 5.16671 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V8.83329C14 9.84583 13.1792 10.6666 12.1667 10.6666H10.671C10.6819 10.8097 10.7023 10.9741 10.7389 11.1452C10.8512 11.669 11.0908 12.153 11.557 12.3861C11.7644 12.4898 11.8733 12.7225 11.82 12.9482C11.7667 13.1739 11.5653 13.3333 11.3334 13.3333H6.00004C5.76815 13.3333 5.56669 13.1739 5.51342 12.9482C5.46014 12.7225 5.56903 12.4898 5.77643 12.3861C6.24265 12.153 6.48223 11.669 6.59447 11.1452C6.63115 10.9741 6.65156 10.8097 6.66238 10.6666H5.16671C4.15419 10.6666 3.33337 9.84584 3.33337 8.83329V4.49996ZM7.66465 10.6666C7.65285 10.8628 7.62668 11.1008 7.57228 11.3547C7.50754 11.6568 7.3973 12.0046 7.20863 12.3333H10.1248C9.93611 12.0046 9.82588 11.6568 9.76114 11.3547C9.70673 11.1008 9.68056 10.8628 9.66876 10.6666H7.66465ZM10.1714 9.66663H12.1667C12.627 9.66663 13 9.29355 13 8.83329V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H5.16671C4.70647 3.66663 4.33337 4.03972 4.33337 4.49996V8.83329C4.33337 9.29355 4.70646 9.66663 5.16671 9.66663H7.162C7.16552 9.66659 7.16903 9.66659 7.17253 9.66663H10.1609C10.1644 9.66659 10.1679 9.66659 10.1714 9.66663Z",fill:"currentColor"})}))}))},17361:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16666 9.33329C3.44281 9.33329 3.66666 9.55715 3.66666 9.83329V10.8333C3.66666 11.6617 4.33823 12.3333 5.16666 12.3333H10.8333C11.6618 12.3333 12.3333 11.6618 12.3333 10.8333V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1095 9.33329 13.3333 9.55715 13.3333 9.83329V10.8333C13.3333 12.214 12.2141 13.3333 10.8333 13.3333H5.16666C3.78596 13.3333 2.66666 12.214 2.66666 10.8333V9.83329C2.66666 9.55715 2.89052 9.33329 3.16666 9.33329Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.66663C8.27614 2.66663 8.5 2.89048 8.5 3.16663V9.49996C8.5 9.7761 8.27614 9.99996 8 9.99996C7.72386 9.99996 7.5 9.7761 7.5 9.49996V3.16663C7.5 2.89048 7.72386 2.66663 8 2.66663Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.49311 6.80023C5.69546 6.61233 6.01183 6.62405 6.19973 6.8264L8 8.76515L9.80027 6.8264C9.98817 6.62405 10.3045 6.61233 10.5069 6.80023C10.7092 6.98813 10.721 7.3045 10.5331 7.50685L8.36639 9.84019C8.27179 9.94207 8.13903 9.99996 8 9.99996C7.86096 9.99996 7.72821 9.94207 7.6336 9.84019L5.46693 7.50685C5.27903 7.3045 5.29075 6.98813 5.49311 6.80023Z",fill:"currentColor"})]}))}))},37571:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5126 5.17677C15.196 4.49332 16.3041 4.49332 16.9875 5.17677L18.8232 7.01253C19.5066 7.69595 19.5066 8.80397 18.8233 9.48739L9.53034 18.7803C9.43172 18.8789 9.30756 18.9481 9.17179 18.98L4.92179 19.98C4.66896 20.0395 4.40335 19.964 4.21968 19.7803C4.03602 19.5966 3.96046 19.331 4.01995 19.0782L5.01995 14.8282C5.0519 14.6924 5.12106 14.5683 5.21969 14.4696L14.5126 5.17677ZM15.9268 6.23739C15.8292 6.13978 15.6709 6.13978 15.5733 6.23739L6.43121 15.3794L5.75757 18.2424L8.62055 17.5688L17.7626 8.42677C17.7626 8.42678 17.7626 8.42677 17.7626 8.42677C17.8602 8.32913 17.8602 8.17081 17.7626 8.07317L15.9268 6.23739Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 19.25C13 18.8358 13.3358 18.5 13.75 18.5H19.25C19.6642 18.5 20 18.8358 20 19.25C20 19.6642 19.6642 20 19.25 20H13.75C13.3358 20 13 19.6642 13 19.25Z",fill:"currentColor"})]}))}))},16590:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.14644 6.14641C6.3417 5.95114 6.65828 5.95114 6.85354 6.14641L9.85354 9.14641C10.0488 9.34167 10.0488 9.65825 9.85354 9.85351C9.65828 10.0488 9.3417 10.0488 9.14644 9.85351L6.14644 6.85351C5.95117 6.65825 5.95117 6.34167 6.14644 6.14641Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.85354 6.14641C10.0488 6.34167 10.0488 6.65825 9.85354 6.85351L6.85354 9.85351C6.65828 10.0488 6.3417 10.0488 6.14644 9.85351C5.95117 9.65825 5.95117 9.34167 6.14644 9.14641L9.14644 6.14641C9.3417 5.95114 9.65828 5.95114 9.85354 6.14641Z",fill:"currentColor"})]}))}))},22853:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),{},{fill:"none",children:[(0,o.jsx)("path",{d:"M21 8V16C21 18.7614 18.7614 21 16 21H8C5.23858 21 3 18.7614 3 16V8C3 5.23858 5.23858 3 8 3H16C18.7614 3 21 5.23858 21 8Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,o.jsx)("path",{d:"M11 21C11 18 11 15 11 12C11 9.8125 11.5 8 15 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,o.jsx)("path",{d:"M9 13H11H15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}))}))},62981:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.00024 4.49996C4.00024 3.48744 4.82106 2.66663 5.83358 2.66663H10.0002C10.1329 2.66663 10.26 2.7193 10.3538 2.81307L13.1871 5.64641C13.2809 5.74017 13.3336 5.86735 13.3336 5.99996V11.5C13.3336 12.5125 12.5128 13.3333 11.5002 13.3333H5.83358C4.82106 13.3333 4.00024 12.5125 4.00024 11.5V4.49996ZM5.83358 3.66663C5.37334 3.66663 5.00024 4.03972 5.00024 4.49996V11.5C5.00024 11.9602 5.37333 12.3333 5.83358 12.3333H11.5002C11.9605 12.3333 12.3336 11.9602 12.3336 11.5V6.20707L9.79314 3.66663H5.83358Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.83358 2.83329C10.1097 2.83329 10.3336 3.05715 10.3336 3.33329V5.66663H12.6669C12.9431 5.66663 13.1669 5.89048 13.1669 6.16663C13.1669 6.44277 12.9431 6.66663 12.6669 6.66663H9.83358C9.55743 6.66663 9.33358 6.44277 9.33358 6.16663V3.33329C9.33358 3.05715 9.55743 2.83329 9.83358 2.83329Z",fill:"currentColor"})]}))}))},9311:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.71604 2.95003C2.7993 2.7768 2.97449 2.66663 3.16669 2.66663H12.8334C13.0256 2.66663 13.2007 2.7768 13.284 2.95003C13.3673 3.12326 13.3439 3.32889 13.2238 3.47897L10.1827 7.28044C10.0644 7.42819 10 7.61179 10 7.80103V12.1666C10 12.811 9.4777 13.3333 8.83336 13.3333H7.16669C6.52235 13.3333 6.00003 12.811 6.00003 12.1666V7.80103C6.00003 7.61176 5.93562 7.42819 5.81743 7.28045L2.77626 3.47897C2.65619 3.32889 2.63278 3.12326 2.71604 2.95003ZM4.207 3.66663L6.59828 6.65573C6.59827 6.65573 6.59828 6.65574 6.59828 6.65573C6.85834 6.9808 7.00003 7.3847 7.00003 7.80103V12.1666C7.00003 12.2587 7.07463 12.3333 7.16669 12.3333H8.83336C8.92542 12.3333 9.00002 12.2587 9.00002 12.1666V7.80103C9.00002 7.38467 9.14175 6.98078 9.4018 6.65573L11.7931 3.66663H4.207Z",fill:"currentColor"})}))}))},59517:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21.75C11.5858 21.75 11.25 21.4142 11.25 21L11.25 3C11.25 2.58579 11.5858 2.25 12 2.25C12.4142 2.25 12.75 2.58579 12.75 3L12.75 21C12.75 21.4142 12.4142 21.75 12 21.75Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.36893 11.2451C8.70724 11.6915 8.70724 12.3085 8.36893 12.7549L4.24627 18.1954C3.52265 19.1504 2 18.6386 2 17.4405L2 6.5595C2 5.36136 3.52265 4.84962 4.24627 5.80455L8.36893 11.2451ZM7.05899 12L3.5 7.30335L3.5 16.6966L7.05899 12Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.6311 11.2451C15.2928 11.6915 15.2928 12.3085 15.6311 12.7549L19.7537 18.1954C20.4773 19.1504 22 18.6386 22 17.4405V6.5595C22 5.36136 20.4773 4.84962 19.7537 5.80455L15.6311 11.2451ZM16.941 12L20.5 7.30335V16.6966L16.941 12Z",fill:"currentColor"})]}))}))},6217:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.25 12C2.25 11.5858 2.58579 11.25 3 11.25L21 11.25C21.4142 11.25 21.75 11.5858 21.75 12C21.75 12.4142 21.4142 12.75 21 12.75L3 12.75C2.58579 12.75 2.25 12.4142 2.25 12Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7549 8.36893C12.3085 8.70724 11.6915 8.70724 11.2451 8.36893L5.80455 4.24627C4.84963 3.52265 5.36137 2 6.5595 2L17.4405 2C18.6386 2 19.1504 3.52265 18.1954 4.24627L12.7549 8.36893ZM12 7.05899L16.6967 3.5L7.30335 3.5L12 7.05899Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7549 15.6311C12.3085 15.2928 11.6915 15.2928 11.2451 15.6311L5.80455 19.7537C4.84963 20.4773 5.36137 22 6.5595 22H17.4405C18.6386 22 19.1504 20.4773 18.1954 19.7537L12.7549 15.6311ZM12 16.941L16.6967 20.5H7.30335L12 16.941Z",fill:"currentColor"})]}))}))},73612:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("path",{d:"M6.75 19.25H17.25C18.3546 19.25 19.25 18.3546 19.25 17.25V9.82843C19.25 9.29799 19.0393 8.78929 18.6642 8.41421L15.5858 5.33579C15.2107 4.96071 14.702 4.75 14.1716 4.75H6.75C5.64543 4.75 4.75 5.64543 4.75 6.75V17.25C4.75 18.3546 5.64543 19.25 6.75 19.25Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,o.jsx)("path",{d:"M8.75 19V15.75C8.75 15.1977 9.19772 14.75 9.75 14.75H14.25C14.8023 14.75 15.25 15.1977 15.25 15.75V19",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),(0,o.jsx)("path",{d:"M8.75 5V8.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}))}))},68262:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo(i.forwardRef((function(e,t){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,o.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",children:[(0,o.jsx)("path",{d:"m19.25 17.25v-7.5c0-1.1046-0.8954-2-2-2h-12.5v9.5c0 1.1046 0.89543 2 2 2h10.5c1.1046 0 2-0.8954 2-2z"}),(0,o.jsx)("path",{d:"m13.5 7.5-0.9315-1.7077c-0.3504-0.64253-1.0239-1.0423-1.7558-1.0423h-4.0627c-1.1046 0-2 0.89543-2 2v4.25"})]})}))})))},24893:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"115",height:"93",viewBox:"-5 -1 115 93",fill:"none",children:[(0,o.jsx)("path",{d:"M60.9224 67.0771C52.3232 67.0771 44.0446 64.752 36.7313 59.6893C31.6337 56.1619 25.7339 48.197 25.7339 34.6939C25.7339 9.64282 38.5302 0.5 64.2455 0.5H110.542L115 14.7683H67.7736C50.801 14.7683 40.7089 16.0919 40.7089 34.6939C40.7089 40.8384 42.4416 45.2112 46.008 48.0604C52.0354 52.8764 63.7507 53.0813 70.9092 52.3913C70.9092 52.3913 73.8463 42.9467 74.33 41.4134C74.8966 39.6166 74.6485 39.188 72.881 39.188C70.328 39.188 65.7384 39.188 60.8673 39.188C57.4536 39.188 54.0998 37.4699 54.0998 33.3432C54.0998 29.3579 57.2201 27.0447 61.4974 27.0447C68.9034 27.0447 84.1565 27.0447 87.0113 27.0447C90.754 27.0447 94.5734 27.5814 92.6247 33.5063L82.3047 64.8043C82.3054 64.805 73.8741 67.0771 60.9224 67.0771V67.0771Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M89.8255 72.3901C84.6241 76.0318 76.9198 78.0446 63.8468 78.0446C41.3145 78.0446 24.8236 69.9479 18.0999 54.2515C14.9211 46.8323 15.227 38.4234 15.227 27.051H0.252679C0.252679 39.043 0.0463766 48.4458 3.25452 57.1063C11.6669 79.8247 33.3301 92.0307 62.4312 92.0307C90.5999 92.0307 102.273 83.9981 109.882 72.3901H89.8255Z",fill:"currentColor"})]}))}))},44378:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.82764 6.4557C3.82764 3.99488 5.81925 2 8.27603 2C10.7328 2 12.7244 3.99488 12.7244 6.4557L12.6938 9.97255C12.6938 12.4334 10.7328 14 8.27603 14C5.81925 14 3.85823 12.4334 3.85823 9.97255L3.82764 6.4557ZM8.26302 4.45359C7.05025 4.45359 6.22005 5.28379 6.22005 6.49657C6.22005 7.70934 7.05025 8.53954 8.26302 8.53954C9.30424 8.53954 10.0671 7.92706 10.2852 6.9267H9.08722C8.92372 7.20265 8.62294 7.44884 8.27894 7.44884C7.76043 7.44884 7.27892 6.96733 7.27892 6.44883C7.27892 5.93032 7.72984 5.4794 8.24835 5.4794C8.59276 5.4794 8.92445 5.66486 9.08781 5.94136L10.9363 5.97145C11.2 5.97145 11.4137 6.18518 11.4137 6.44883V6.44941C11.4134 8.17819 10.0138 9.64723 8.26302 9.64723C6.52296 9.64723 5.11236 8.23663 5.11236 6.49657C5.11236 4.7565 6.52296 3.3459 8.26302 3.3459C9.24584 3.3459 10.185 3.82706 10.762 4.53111C10.9292 4.73502 10.9659 5.18332 10.762 5.35044C10.5581 5.51757 10.1296 5.49317 9.96243 5.28927C9.55895 4.79698 8.94771 4.45359 8.26302 4.45359ZM5.16969 9.75624C5.47088 9.68225 5.77963 9.85803 5.85957 10.1433C5.85957 10.1433 5.90756 10.2714 5.94136 10.3403C6.00936 10.4788 6.12133 10.6653 6.29417 10.8513C6.62721 11.2097 7.21449 11.6304 8.26302 11.6304C9.31156 11.6304 9.89884 11.2097 10.2319 10.8513C10.4047 10.6653 10.5167 10.4788 10.5847 10.3403C10.6185 10.2714 10.6549 10.174 10.668 10.1384C10.7479 9.85321 11.0552 9.68225 11.3564 9.75625C11.6589 9.83058 11.8408 10.124 11.7626 10.4116L11.757 10.4269L11.757 10.4269C11.7282 10.5059 11.6586 10.6967 11.6102 10.7952C11.5069 11.0056 11.3396 11.2842 11.0802 11.5634C10.5488 12.1353 9.6602 12.7061 8.26302 12.7061C6.86584 12.7061 5.97726 12.1353 5.44587 11.5634C5.18649 11.2842 5.0191 11.0056 4.9158 10.7952C4.86394 10.6896 4.76343 10.4116 4.76343 10.4116C4.68522 10.124 4.86711 9.83058 5.16969 9.75624Z",fill:"currentColor"})}))}))},31370:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({width:"24",height:"24",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,o.jsx)("path",{d:"M24,1.9a21.6,21.6,0,0,0-6.8,42.2c1,.2,1.8-.9,1.8-1.8V39.4c-6,1.3-7.9-2.9-7.9-2.9a6.5,6.5,0,0,0-2.2-3.2C6.9,31.9,9,32,9,32a4.3,4.3,0,0,1,3.3,2c1.7,2.9,5.5,2.6,6.7,2.1a5.4,5.4,0,0,1,.5-2.9C12.7,32,9,28,9,22.6A10.7,10.7,0,0,1,11.9,15a6.2,6.2,0,0,1,.3-6.4,8.9,8.9,0,0,1,6.4,2.9,15.1,15.1,0,0,1,5.4-.8,17.1,17.1,0,0,1,5.4.7,9,9,0,0,1,6.4-2.8,6.5,6.5,0,0,1,.4,6.4A10.7,10.7,0,0,1,39,22.6C39,28,35.3,32,28.5,33.2a5.4,5.4,0,0,1,.5,2.9v6.2a1.8,1.8,0,0,0,1.9,1.8A21.7,21.7,0,0,0,24,1.9Z",fill:"currentColor"})}))}))},5295:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({width:"24",height:"24",viewBox:"2 2 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,o.jsx)("path",{d:"M13 8.1C13 7.81727 12.9735 7.53428 12.921 7.25954C12.8973 7.13517 12.7883 7.04529 12.6619 7.04529H8.51758C8.37184 7.04529 8.25391 7.16322 8.25391 7.30897V8.891C8.25391 9.03674 8.37184 9.15467 8.51758 9.15467H10.644C10.5115 9.42288 10.3289 9.65559 10.1145 9.85138L11.6048 11.3417C12.4622 10.5247 13 9.3751 13 8.1Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M8.5 5.70937C9.01731 5.70937 9.50937 5.87366 9.9229 6.1847C10.0274 6.26324 10.175 6.25372 10.2677 6.16023L11.3929 5.03499C11.4452 4.98271 11.4733 4.91087 11.4699 4.83697C11.4666 4.76307 11.4326 4.69406 11.3759 4.64642C10.5708 3.97156 9.54927 3.6 8.5 3.6C6.95578 3.6 5.59156 4.38493 4.78509 5.57669L6.33281 7.12441C6.70206 6.29269 7.53283 5.70937 8.5 5.70937Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M8.5 12.6C9.50658 12.6 10.4335 12.2625 11.1825 11.7002L9.66422 10.182C9.31719 10.3774 8.92056 10.4906 8.5 10.4906C7.53283 10.4906 6.70206 9.90731 6.33281 9.07558L4.78509 10.6233C5.59156 11.8151 6.95578 12.6 8.5 12.6Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M6.14777 8.47977C6.12757 8.35534 6.10938 8.23002 6.10938 8.1C6.10938 7.96997 6.12757 7.84466 6.14777 7.72022L4.49324 6.0657C4.18021 6.67707 4 7.36727 4 8.1C4 8.83273 4.18021 9.52293 4.49326 10.1343L6.14777 8.47977Z",fill:"currentColor"})]}))}))},68789:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.8427 1.23901C10.5452 1.0407 10.1491 1.07992 9.89633 1.33272L8.83567 2.39338C8.69501 2.53403 8.616 2.7248 8.616 2.92371C8.616 3.12262 8.69502 3.31339 8.83567 3.45404C10.5106 5.12894 11.2421 6.69567 11.5617 7.81432C11.7222 8.37618 11.7804 8.83058 11.7994 9.13557C11.8038 9.20557 11.8061 9.26768 11.8071 9.3214L2.11811 19.0103C1.82522 19.3032 1.82521 19.7781 2.1181 20.071L4.23942 22.1924C4.38007 22.3331 4.57084 22.4121 4.76975 22.4121C4.96867 22.4121 5.15943 22.3331 5.30009 22.1924L15.0228 12.4696L15.3764 12.8232L14.8461 13.3536C14.5532 13.6465 14.5532 14.1213 14.8461 14.4142L17.3209 16.8891C17.4616 17.0298 17.6523 17.1088 17.8512 17.1088C18.0502 17.1088 18.2409 17.0298 18.3816 16.8891L23.3314 11.9393C23.472 11.7987 23.551 11.6079 23.551 11.409C23.551 11.2101 23.472 11.0193 23.3314 10.8786L20.8565 8.40378C20.5636 8.11089 20.0887 8.11089 19.7958 8.40377L19.2655 8.93412L18.9119 8.58057L19.4423 8.05024C19.6012 7.89136 19.6804 7.66961 19.6583 7.446C19.6362 7.2224 19.5149 7.0205 19.328 6.89586L10.8427 1.23901ZM12.1944 13.1768L11.1337 12.1161L3.70909 19.5407L4.76977 20.6014L12.1944 13.1768ZM13.0783 10.1715C13.1987 10.0511 13.2746 9.89331 13.2934 9.72405L13.2936 9.72213L13.2938 9.71991L13.2944 9.71457L13.2957 9.70037C13.2967 9.68934 13.2979 9.67521 13.2991 9.65807C13.3016 9.62378 13.3042 9.5774 13.3059 9.51965C13.3093 9.40416 13.3091 9.24305 13.2965 9.04202C13.2714 8.6399 13.197 8.07783 13.0039 7.40225C12.6543 6.1786 11.9205 4.60016 10.4137 2.93665L10.5222 2.82815L17.7347 7.63646L17.3209 8.05022C17.1803 8.19087 17.1012 8.38164 17.1012 8.58055C17.1012 8.77947 17.1803 8.97023 17.3209 9.11089L18.7351 10.5251C19.028 10.818 19.5029 10.818 19.7958 10.5251L20.3261 9.99476L21.7404 11.409L17.8513 15.2981L16.4371 13.8839L16.9674 13.3535C17.2603 13.0606 17.2603 12.5857 16.9674 12.2929L15.5532 10.8787C15.2603 10.5858 14.7854 10.5858 14.4925 10.8786L13.255 12.1161L12.1944 11.0555L13.0783 10.1715Z",fill:"currentColor"})}))}))},86065:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99999 3.66663C5.60676 3.66663 3.66666 5.60673 3.66666 7.99996C3.66666 10.3932 5.60676 12.3333 7.99999 12.3333C10.3932 12.3333 12.3333 10.3932 12.3333 7.99996C12.3333 5.60673 10.3932 3.66663 7.99999 3.66663ZM2.66666 7.99996C2.66666 5.05444 5.05447 2.66663 7.99999 2.66663C10.9455 2.66663 13.3333 5.05445 13.3333 7.99996C13.3333 10.9455 10.9455 13.3333 7.99999 13.3333C5.05448 13.3333 2.66666 10.9455 2.66666 7.99996Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.99689 6.72225C6.9968 6.72298 6.99672 6.72371 6.99664 6.72444C6.99658 6.72489 6.99661 6.72465 6.99664 6.72444L6.99677 6.72329L6.99689 6.72225ZM8.47298 7.42017C8.04992 7.58361 7.49999 7.99263 7.49999 8.66663V8.83329C7.49999 9.10944 7.72385 9.33329 7.99999 9.33329C8.27613 9.33329 8.49999 9.10944 8.49999 8.83329V8.66663C8.49999 8.63219 8.51235 8.58558 8.56778 8.52461C8.62638 8.46015 8.71978 8.39685 8.83338 8.35296C9.60577 8.05452 9.99999 7.35738 9.99999 6.66663C9.99999 6.31089 9.96035 5.80089 9.65686 5.37601C9.32845 4.91624 8.77702 4.66663 7.99999 4.66663C7.09835 4.66663 6.58004 5.19298 6.31291 5.6738C6.18242 5.9087 6.10646 6.13862 6.06287 6.30677C6.04081 6.39184 6.02636 6.46376 6.01721 6.51617C6.01262 6.54245 6.00933 6.56401 6.00707 6.5801L6.0044 6.60009L6.00357 6.60686L6.00327 6.60942L6.00315 6.61049C6.00313 6.61071 6.00305 6.61141 6.49999 6.66663L6.00305 6.61141C5.97255 6.88586 6.17032 7.13307 6.44477 7.16357C6.71836 7.19397 6.96488 6.99754 6.99664 6.72444L6.99731 6.71946C6.99814 6.71358 6.99973 6.70292 7.0023 6.68817C7.00748 6.65855 7.01646 6.61328 7.03086 6.55773C7.06019 6.44463 7.10923 6.29956 7.18707 6.15945C7.33661 5.89028 7.56829 5.66663 7.99999 5.66663C8.55629 5.66663 8.75486 5.83368 8.84312 5.95725C8.9563 6.11569 8.99999 6.35569 8.99999 6.66663C8.99999 6.9776 8.82964 7.28234 8.47298 7.42017Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 10.6666C7.33332 10.2985 7.63183 9.99996 7.99999 9.99996C8.36815 9.99996 8.66666 10.2985 8.66666 10.6666C8.66666 11.0348 8.36815 11.3333 7.99999 11.3333C7.63183 11.3333 7.33332 11.0348 7.33332 10.6666Z",fill:"currentColor"})]}))}))},63843:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.71627 2.75526C7.88716 2.63741 8.11311 2.63741 8.284 2.75526L13.1173 6.0886C13.2527 6.18193 13.3335 6.33582 13.3335 6.50021V11.5002C13.3335 12.5127 12.5127 13.3335 11.5001 13.3335H4.50016C3.48765 13.3335 2.66683 12.5127 2.66683 11.5002V6.50021C2.66683 6.33582 2.74763 6.18193 2.88296 6.0886L7.71627 2.75526ZM8.00014 3.77425L3.66683 6.76276V11.5002C3.66683 11.9604 4.03992 12.3335 4.50016 12.3335H11.5001C11.9604 12.3335 12.3335 11.9604 12.3335 11.5002V6.76276L8.00014 3.77425Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.83307 9.66624C7.37287 9.66624 6.99975 10.0393 6.99975 10.4996V12.3329H8.99974V10.4996C8.99974 10.0393 8.62666 9.66624 8.1664 9.66624H7.83307ZM5.99975 10.4996C5.99975 9.48703 6.8206 8.66624 7.83307 8.66624H8.1664C9.17894 8.66624 9.99974 9.48703 9.99974 10.4996V12.8329C9.99974 13.1091 9.77588 13.3329 9.49974 13.3329H6.49975C6.22361 13.3329 5.99975 13.1091 5.99975 12.8329V10.4996Z",fill:"currentColor"})]}))}))},17581:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{children:(0,o.jsx)("path",{d:"M5.06 3C4.63 3 4.22 3.14 3.84 3.42C3.46 3.7 3.24 4.06 3.14 4.5L2.11 8.91C1.86 10 2.06 10.92 2.69 11.73C2.81 11.85 2.93 11.97 3.04 12.07C3.63 12.64 4.28 13 5.22 13C6.16 13 6.91 12.59 7.47 12.05C8.1 12.67 8.86 13 9.8 13C10.64 13 11.44 12.63 12 12.07C12.68 12.7 13.45 13 14.3 13C15.17 13 15.91 12.67 16.54 12.05C17.11 12.62 17.86 13 18.81 13C19.76 13 20.43 12.65 21 12.06C21.09 11.97 21.18 11.87 21.28 11.77C21.94 10.95 22.14 10 21.89 8.91L20.86 4.5C20.73 4.06 20.5 3.7 20.13 3.42C19.77 3.14 19.38 3 18.94 3M18.89 4.97L19.97 9.38C20.06 9.81 19.97 10.2 19.69 10.55C19.44 10.86 19.13 11 18.75 11C18.44 11 18.17 10.9 17.95 10.66C17.73 10.43 17.61 10.16 17.58 9.84L16.97 5M5.06 5H7.03L6.42 9.84C6.3 10.63 5.91 11 5.25 11C4.84 11 4.53 10.86 4.31 10.55C4.03 10.2 3.94 9.81 4.03 9.38M9.05 5H11V9.7C11 10.05 10.89 10.35 10.64 10.62C10.39 10.88 10.08 11 9.7 11C9.36 11 9.07 10.88 8.84 10.59C8.61 10.3 8.5 10 8.5 9.66V9.5M13 5H14.95L15.5 9.5C15.58 9.92 15.5 10.27 15.21 10.57C14.95 10.87 14.61 11 14.2 11C13.89 11 13.61 10.88 13.36 10.62C13.11 10.35 13 10.05 13 9.7M3 14.03V19C3 20.11 3.89 21 5 21C9.67 21 14.33 21 19 21C20.1 21 21 20.11 21 19V14.05C20.45 14.63 19.75 14.96 19 15C18 15.03 17.25 14.74 16.54 14.05C15.94 14.65 15.14 15 14.3 15C13.4 15 12.6 14.64 12 14.07C11.43 14.64 10.65 15 9.78 15C8.87 15 8.07 14.65 7.47 14.05C6.89 14.64 6.1 15 5.23 15C4.33 15 3.66 14.65 3 14.03Z"})}))}))},64680:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.02295 17.5426L3.02293 14.9464C3.02297 13.9799 3.80645 13.1964 4.77291 13.1964L9.16024 13.1964C9.57445 13.1964 9.91024 13.5322 9.91024 13.9464C9.91024 14.3606 9.57446 14.6964 9.16024 14.6964L4.77297 14.6964C4.63491 14.6964 4.52296 14.8083 4.52293 14.9464L4.52295 17.5426C4.52294 17.6806 4.63487 17.7926 4.77291 17.7926L9.16025 17.7926C9.57447 17.7926 9.91025 18.1284 9.91025 18.5426C9.91025 18.9568 9.57447 19.2926 9.16025 19.2926L4.77297 19.2926C3.80648 19.2926 3.02293 18.509 3.02295 17.5426Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5467 14.2885C20.9397 14.1575 21.3644 14.3699 21.4954 14.7629C21.9101 16.0072 21.809 17.0878 21.2554 17.88C20.7101 18.6604 19.8236 19.0173 18.9687 19.0173C18.1489 19.0173 17.522 18.7815 16.9977 18.3439C16.5231 17.9477 16.1593 17.4019 15.8142 16.8843L15.8034 16.8681C15.4817 16.3855 15.1994 16.1236 14.9288 15.9733C14.6632 15.8257 14.3449 15.75 13.8864 15.75C13.3597 15.75 12.5181 16.3145 12.8067 17.7571C12.8879 18.1633 12.6245 18.5584 12.2183 18.6397C11.8122 18.7209 11.417 18.4575 11.3358 18.0513C10.8982 15.8637 12.2349 14.25 13.8864 14.25C14.5169 14.25 15.1061 14.3558 15.6573 14.6621C16.2035 14.9655 16.6472 15.4297 17.0515 16.0361C17.4293 16.6028 17.6774 16.9573 17.9589 17.1923C18.1958 17.39 18.4764 17.5173 18.9687 17.5173C19.4259 17.5173 19.8101 17.3296 20.0258 17.0208C20.2332 16.724 20.3836 16.171 20.0723 15.2372C19.9414 14.8442 20.1537 14.4195 20.5467 14.2885Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.77298 10.403C3.80648 10.403 3.02293 9.61945 3.02296 8.65294L3.02295 6.05677C3.02299 5.09031 3.80646 4.3068 4.77293 4.30676L16.8906 4.30677C16.8957 4.30647 16.9013 4.30617 16.9073 4.30586C16.9354 4.30443 16.9734 4.30295 17.0199 4.30222C17.1127 4.30077 17.241 4.30227 17.3934 4.31339C17.6938 4.33529 18.1105 4.3961 18.5395 4.56038C18.9707 4.7255 19.4398 5.00543 19.8003 5.4787C20.1665 5.95958 20.3774 6.58377 20.3774 7.35669C20.3774 8.12958 20.1665 8.75371 19.8 9.2344C19.4394 9.70747 18.97 9.9869 18.5386 10.1515C18.1095 10.3152 17.6928 10.3755 17.3924 10.397C17.24 10.4079 17.1117 10.4092 17.0189 10.4076C16.9724 10.4069 16.9344 10.4053 16.9063 10.4039C16.9005 10.4036 16.8951 10.4033 16.8902 10.403L4.77298 10.403ZM16.9766 8.90549C16.9561 8.9038 16.9356 8.90296 16.9151 8.90296L4.77295 8.90296C4.63492 8.90296 4.52296 8.79103 4.52296 8.653L4.52295 6.0568C4.52295 5.91873 4.63489 5.80678 4.77295 5.80676L16.9151 5.80677C16.9354 5.80677 16.9556 5.80595 16.9758 5.80431L16.9731 5.80452L16.9838 5.80391C16.9955 5.80331 17.0157 5.80247 17.0434 5.80204C17.0989 5.80117 17.1825 5.80198 17.2843 5.80941C17.4926 5.8246 17.754 5.8658 18.003 5.96118C18.2499 6.05572 18.4588 6.19311 18.607 6.38756C18.7493 6.5744 18.8774 6.86833 18.8774 7.35669C18.8774 7.84506 18.7493 8.1386 18.6072 8.32495C18.4593 8.51892 18.2506 8.6559 18.0039 8.75006C17.7549 8.84506 17.4936 8.88591 17.2853 8.90081C17.1835 8.90811 17.0999 8.90881 17.0444 8.90787C17.0167 8.9074 16.9965 8.90653 16.9848 8.90592L16.9741 8.90528M16.9741 8.90528L16.9766 8.90549L16.9741 8.90528Z",fill:"currentColor"})]}))}))},30268:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4509 4.08872C12.6781 4.24571 12.735 4.55714 12.578 4.78431L8.14508 11.1986L8.14507 11.1987C7.42761 12.2368 5.90028 12.2566 5.15616 11.2374L5.55998 10.9426L5.15616 11.2374L3.42953 8.87255C3.26669 8.64953 3.31549 8.33673 3.53851 8.17389C3.76153 8.01106 4.07433 8.05985 4.23717 8.28288L5.9638 10.6477C6.30202 11.111 6.99628 11.102 7.32242 10.6301C7.32242 10.6301 7.32242 10.6301 7.32242 10.6301L11.7554 4.21578C11.9123 3.98861 12.2238 3.93172 12.4509 4.08872Z",fill:"currentColor"})}))}))},75268:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.83337 9.33329C4.10952 9.33329 4.33337 9.55715 4.33337 9.83329V11.5C4.33337 11.9602 4.70646 12.3333 5.16671 12.3333H6.83337C7.10952 12.3333 7.33337 12.5572 7.33337 12.8333C7.33337 13.1094 7.10952 13.3333 6.83337 13.3333H5.16671C4.15419 13.3333 3.33337 12.5125 3.33337 11.5V9.83329C3.33337 9.55715 3.55723 9.33329 3.83337 9.33329Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 9.33329C13.7762 9.33329 14 9.55715 14 9.83329V11.5C14 12.5125 13.1792 13.3333 12.1667 13.3333H10.5C10.2239 13.3333 10 13.1094 10 12.8333C10 12.5572 10.2239 12.3333 10.5 12.3333H12.1667C12.627 12.3333 13 11.9602 13 11.5V9.83329C13 9.55715 13.2239 9.33329 13.5 9.33329Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 3.16663C10 2.89048 10.2239 2.66663 10.5 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V6.16663C14 6.44277 13.7762 6.66663 13.5 6.66663C13.2239 6.66663 13 6.44277 13 6.16663V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H10.5C10.2239 3.66663 10 3.44277 10 3.16663Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16671 3.66663C4.70647 3.66663 4.33337 4.03972 4.33337 4.49996V6.16663C4.33337 6.44277 4.10952 6.66663 3.83337 6.66663C3.55723 6.66663 3.33337 6.44277 3.33337 6.16663V4.49996C3.33337 3.48744 4.15418 2.66663 5.16671 2.66663H6.83337C7.10952 2.66663 7.33337 2.89048 7.33337 3.16663C7.33337 3.44277 7.10952 3.66663 6.83337 3.66663H5.16671Z",fill:"currentColor"})]}))}))},43717:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33337 10.3333C4.78109 10.3333 4.33337 10.781 4.33337 11.3333C4.33337 11.8856 4.78109 12.3333 5.33337 12.3333C5.88566 12.3333 6.33337 11.8856 6.33337 11.3333C6.33337 10.781 5.88566 10.3333 5.33337 10.3333ZM3.33337 11.3333C3.33337 10.2287 4.2288 9.33329 5.33337 9.33329C6.43794 9.33329 7.33337 10.2287 7.33337 11.3333C7.33337 12.4379 6.43794 13.3333 5.33337 13.3333C4.2288 13.3333 3.33337 12.4379 3.33337 11.3333Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.16671 3.66663C7.70645 3.66663 7.33337 4.03972 7.33337 4.49996V11.3333C7.33337 11.6094 7.10952 11.8333 6.83337 11.8333C6.55723 11.8333 6.33337 11.6094 6.33337 11.3333V4.49996C6.33337 3.48744 7.15416 2.66663 8.16671 2.66663H12.1667C13.1793 2.66663 14 3.48744 14 4.49996V9.33329C14 9.60944 13.7762 9.83329 13.5 9.83329C13.2239 9.83329 13 9.60944 13 9.33329V4.49996C13 4.03972 12.627 3.66663 12.1667 3.66663H8.16671Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8.33329C11.4478 8.33329 11 8.78101 11 9.33329C11 9.88558 11.4478 10.3333 12 10.3333C12.5523 10.3333 13 9.88558 13 9.33329C13 8.78101 12.5523 8.33329 12 8.33329ZM10 9.33329C10 8.22872 10.8955 7.33329 12 7.33329C13.1046 7.33329 14 8.22872 14 9.33329C14 10.4379 13.1046 11.3333 12 11.3333C10.8955 11.3333 10 10.4379 10 9.33329Z",fill:"currentColor"})]}))}))},22536:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,o.jsx)("path",{d:"m3.254 1.746c-1.299 1.883-2.013 4.062-2.203 6.254-0.1918 2.208 0.1464 4.371 1.119 6.254l0.8203-0.6953c-0.8199-1.688-1.075-3.606-0.9043-5.559 0.1698-1.941 0.7583-3.87 1.877-5.559zm10.59 0-0.8535 0.6953c0.8268 1.688 1.073 3.606 0.9023 5.559-0.1698 1.941-0.7563 3.87-1.875 5.559l0.7285 0.6953c1.299-1.883 2.01-4.062 2.201-6.254 0.1915-2.201-0.1377-4.371-1.104-6.254zm-8.117 3.1 1.539 3.332-2.721 3.512 1.416-0.007812 1.852-2.57 1.086 2.607h1.248l-1.584-3.416 2.643-3.449-1.365-0.007812-1.834 2.535-1.02-2.527z",fill:"currentColor"})}))}))},58758:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1666 4C10.4427 4 10.6666 4.22386 10.6666 4.5V11.5C10.6666 11.7761 10.4427 12 10.1666 12C9.89044 12 9.66659 11.7761 9.66659 11.5V4.5C9.66659 4.22386 9.89044 4 10.1666 4Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.83325 4C6.10939 4 6.33325 4.22386 6.33325 4.5V11.5C6.33325 11.7761 6.10939 12 5.83325 12C5.55711 12 5.33325 11.7761 5.33325 11.5V4.5C5.33325 4.22386 5.55711 4 5.83325 4Z",fill:"currentColor"})]}))}))},14331:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.23713 3.40805C4.38454 3.31695 4.56861 3.30866 4.72361 3.38616L13.0569 7.55283C13.2263 7.63752 13.3333 7.81066 13.3333 8.00004C13.3333 8.18943 13.2263 8.36256 13.0569 8.44726L4.72361 12.6139C4.56861 12.6914 4.38454 12.6831 4.23713 12.592C4.08973 12.5009 4 12.34 4 12.1667V3.83337C4 3.66009 4.08973 3.49915 4.23713 3.40805ZM5 4.64239V11.3577L11.7153 8.00004L5 4.64239Z",fill:"currentColor"})}))}))},23664:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"-2 -1 16 16",fill:"none",children:(0,o.jsx)("path",{d:"M6.48609 4C7.19334 4 7.87161 4.28095 8.37171 4.78105C8.87181 5.28115 9.15276 5.95942 9.15276 6.66667C9.15276 7.37391 8.87181 8.05219 8.37171 8.55229C7.87161 9.05238 7.19334 9.33333 6.48609 9.33333C5.77885 9.33333 5.10057 9.05238 4.60048 8.55229C4.10038 8.05219 3.81943 7.37391 3.81943 6.66667C3.81943 5.95942 4.10038 5.28115 4.60048 4.78105C5.10057 4.28095 5.77885 4 6.48609 4ZM6.48609 5.33333C6.13247 5.33333 5.79333 5.47381 5.54328 5.72386C5.29324 5.97391 5.15276 6.31304 5.15276 6.66667C5.15276 7.02029 5.29324 7.35943 5.54328 7.60948C5.79333 7.85952 6.13247 8 6.48609 8C6.83972 8 7.17885 7.85952 7.4289 7.60948C7.67895 7.35943 7.81943 7.02029 7.81943 6.66667C7.81943 6.31304 7.67895 5.97391 7.4289 5.72386C7.17885 5.47381 6.83972 5.33333 6.48609 5.33333ZM5.15276 13.3333C4.98609 13.3333 4.84609 13.2133 4.81943 13.0533L4.57276 11.2867C4.15276 11.12 3.79276 10.8933 3.44609 10.6267L1.78609 11.3C1.63943 11.3533 1.45943 11.3 1.37943 11.1533L0.0460937 8.84667C0.00529077 8.77798 -0.00909376 8.69677 0.00563013 8.61825C0.020354 8.53972 0.0631781 8.46924 0.126094 8.42L1.53276 7.31333L1.48609 6.66667L1.53276 6L0.126094 4.91333C0.0631781 4.86409 0.020354 4.79361 0.00563013 4.71509C-0.00909376 4.63656 0.00529077 4.55536 0.0460937 4.48667L1.37943 2.18C1.45943 2.03333 1.63943 1.97333 1.78609 2.03333L3.44609 2.7C3.79276 2.44 4.15276 2.21333 4.57276 2.04667L4.81943 0.28C4.84609 0.12 4.98609 0 5.15276 0H7.81943C7.98609 0 8.12609 0.12 8.15276 0.28L8.39943 2.04667C8.81943 2.21333 9.17943 2.44 9.52609 2.7L11.1861 2.03333C11.3328 1.97333 11.5128 2.03333 11.5928 2.18L12.9261 4.48667C13.0128 4.63333 12.9728 4.81333 12.8461 4.91333L11.4394 6L11.4861 6.66667L11.4394 7.33333L12.8461 8.42C12.9728 8.52 13.0128 8.7 12.9261 8.84667L11.5928 11.1533C11.5128 11.3 11.3328 11.36 11.1861 11.3L9.52609 10.6333C9.17943 10.8933 8.81943 11.12 8.39943 11.2867L8.15276 13.0533C8.12609 13.2133 7.98609 13.3333 7.81943 13.3333H5.15276ZM5.98609 1.33333L5.73943 3.07333C4.93943 3.24 4.23276 3.66667 3.71943 4.26L2.11276 3.56667L1.61276 4.43333L3.01943 5.46667C2.75276 6.24444 2.75276 7.08889 3.01943 7.86667L1.60609 8.90667L2.10609 9.77333L3.72609 9.08C4.23943 9.66667 4.93943 10.0933 5.73276 10.2533L5.97943 12H6.99276L7.23943 10.26C8.03276 10.0933 8.73276 9.66667 9.24609 9.08L10.8661 9.77333L11.3661 8.90667L9.95276 7.87333C10.2194 7.09333 10.2194 6.24667 9.95276 5.46667L11.3594 4.43333L10.8594 3.56667L9.25276 4.26C8.72891 3.65355 8.01832 3.23845 7.23276 3.08L6.98609 1.33333H5.98609Z",fill:"currentColor"})}))}))},45658:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,o.jsx)("path",{d:"M8.5 13.25C7.80964 13.25 7.25 13.8096 7.25 14.5C7.25 15.1904 7.80964 15.75 8.5 15.75C9.19036 15.75 9.75 15.1904 9.75 14.5C9.75 13.8096 9.19036 13.25 8.5 13.25Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M15.5 13.25C14.8096 13.25 14.25 13.8096 14.25 14.5C14.25 15.1904 14.8096 15.75 15.5 15.75C16.1904 15.75 16.75 15.1904 16.75 14.5C16.75 13.8096 16.1904 13.25 15.5 13.25Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.8556 5.46116C15.3 5.46116 14.8102 5.17892 14.522 4.74999H11.935L12.7321 8.3373C12.738 8.36345 12.7423 8.3896 12.7453 8.41564C14.6963 8.55488 16.477 9.13974 17.8608 10.0436C18.3792 9.54612 19.0846 9.23909 19.861 9.23909C21.4565 9.23909 22.75 10.5325 22.75 12.128C22.75 13.428 21.892 14.5256 20.7131 14.8891C20.6394 16.6616 19.561 18.1849 18.01 19.2461C16.399 20.3484 14.215 21.006 11.8391 21.006C9.46325 21.006 7.27923 20.3484 5.66825 19.2461C4.0817 18.1606 2.98972 16.5915 2.96167 14.7668C1.9535 14.3163 1.25 13.3051 1.25 12.128C1.25 10.5325 2.54343 9.23909 4.13895 9.23909C4.85091 9.23909 5.50321 9.49727 6.00633 9.92373C7.42828 9.04697 9.2386 8.49623 11.2093 8.39897L10.2679 4.16269C10.2185 3.94062 10.2726 3.70815 10.415 3.5307C10.5573 3.35325 10.7725 3.24999 11 3.24999H14.3681C14.6072 2.66343 15.1831 2.25 15.8556 2.25C16.7423 2.25 17.4612 2.96884 17.4612 3.85558C17.4612 4.74232 16.7423 5.46116 15.8556 5.46116ZM4.46112 14.6947C4.46112 13.4788 5.1809 12.2943 6.51528 11.3813C7.84605 10.4708 9.72605 9.88347 11.8391 9.88347C13.9522 9.88347 15.8322 10.4708 17.163 11.3813C18.4974 12.2943 19.2172 13.4788 19.2172 14.6947C19.2172 15.9107 18.4974 17.0952 17.163 18.0082C15.8322 18.9187 13.9522 19.506 11.8391 19.506C9.72605 19.506 7.84605 18.9187 6.51528 18.0082C5.1809 17.0952 4.46112 15.9107 4.46112 14.6947ZM4.74928 10.8798C4.56503 10.7895 4.35801 10.7391 4.13895 10.7391C3.37185 10.7391 2.75 11.3609 2.75 12.128C2.75 12.5415 2.9309 12.9136 3.21839 13.1683C3.51425 12.3105 4.05048 11.5373 4.74928 10.8798ZM21.25 12.128C21.25 12.6563 20.9547 13.117 20.5191 13.3518C20.2547 12.4724 19.7389 11.6773 19.0522 10.9986C19.2802 10.8349 19.5592 10.7391 19.861 10.7391C20.6281 10.7391 21.25 11.3609 21.25 12.128Z",fill:"currentColor"})]}))}))},20928:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 17 16",style:{fill:"none"},children:[(0,o.jsx)("path",{d:"M10.6668 6.66663C11.035 6.66663 11.3334 6.36815 11.3334 5.99996C11.3334 5.63177 11.035 5.33329 10.6668 5.33329C10.2986 5.33329 10.0001 5.63177 10.0001 5.99996C10.0001 6.36815 10.2986 6.66663 10.6668 6.66663Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.32027 2.80616C8.41341 2.71663 8.53758 2.66663 8.66677 2.66663H13.5001C13.7762 2.66663 14.0001 2.89048 14.0001 3.16663V7.99996C14.0001 8.1329 13.9472 8.26037 13.853 8.35419L9.38864 12.8014C8.65615 13.531 7.46558 13.5111 6.758 12.7572L3.82881 9.63613C3.14175 8.90408 3.1713 7.75557 3.89511 7.05982L8.32027 2.80616ZM8.86811 3.66663L4.58811 7.78076C4.25911 8.09701 4.24567 8.61904 4.55797 8.95179L7.48713 12.0728C7.80876 12.4155 8.34992 12.4246 8.6829 12.0929L13.0001 7.79229V3.66663H8.86811Z",fill:"currentColor"})]}))}))},44439:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,o.jsx)("path",{d:"M2.5 8C2.5 4.96499 4.97482 2.5 8.03379 2.5C10.1843 2.5 12.0485 3.7193 12.9644 5.50003H10.8667C10.5905 5.50003 10.3667 5.72389 10.3667 6.00003C10.3667 6.27618 10.5905 6.50003 10.8667 6.50003H13.8C13.9045 6.50003 14.0097 6.48365 14.1104 6.45029C14.2109 6.41697 14.3084 6.36618 14.3952 6.29674C14.4821 6.22721 14.5585 6.13865 14.6136 6.03239C14.6689 5.92548 14.7 5.80533 14.7 5.68003V2.8667C14.7 2.59056 14.4761 2.3667 14.2 2.3667C13.9239 2.3667 13.7 2.59056 13.7 2.8667V4.76132C12.5718 2.81196 10.4562 1.5 8.03379 1.5C4.42784 1.5 1.5 4.40741 1.5 8C1.5 11.5926 4.42784 14.5 8.03379 14.5C11.3074 14.5 14.0208 12.1042 14.4944 8.97482C14.5357 8.70178 14.3478 8.44695 14.0748 8.40563C13.8018 8.36431 13.5469 8.55215 13.5056 8.82518C13.1055 11.469 10.8096 13.5 8.03379 13.5C4.97482 13.5 2.5 11.035 2.5 8Z",fill:"currentColor"})}))}))},19210:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33331 8.16663C3.33331 7.89048 3.55717 7.66663 3.83331 7.66663H12.1666C12.4428 7.66663 12.6666 7.89048 12.6666 8.16663C12.6666 8.44277 12.4428 8.66663 12.1666 8.66663H3.83331C3.55717 8.66663 3.33331 8.44277 3.33331 8.16663Z",fill:"currentColor"})}))}))},50813:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,o.jsx)("path",{d:"M2.5 8C2.5 4.96499 4.97482 2.5 8.03379 2.5C10.1843 2.5 12.0485 3.71928 12.9644 5.5H10.8667C10.5905 5.5 10.3667 5.72386 10.3667 6C10.3667 6.27614 10.5905 6.5 10.8667 6.5H13.8C13.9045 6.5 14.0097 6.48361 14.1103 6.45026C14.2109 6.41694 14.3084 6.36614 14.3952 6.29671C14.4821 6.22717 14.5585 6.13862 14.6136 6.03235C14.6689 5.92544 14.7 5.8053 14.7 5.68V2.86667C14.7 2.59052 14.4761 2.36667 14.2 2.36667C13.9239 2.36667 13.7 2.59052 13.7 2.86667V4.76132C12.5718 2.81196 10.4562 1.5 8.03379 1.5C4.42784 1.5 1.5 4.40741 1.5 8C1.5 11.5926 4.42784 14.5 8.03379 14.5C11.3074 14.5 14.0208 12.1042 14.4944 8.97482C14.5357 8.70178 14.3478 8.44695 14.0748 8.40563C13.8018 8.36431 13.5469 8.55215 13.5056 8.82518C13.1055 11.469 10.8096 13.5 8.03379 13.5C4.97482 13.5 2.5 11.035 2.5 8Z",fill:"currentColor"})}))}))},3247:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5594 14.5532C19.9524 14.4222 20.3771 14.6346 20.5081 15.0276C20.9015 16.2079 20.8078 17.2404 20.2765 18.0006C19.7536 18.7489 18.9045 19.0898 18.0882 19.0898C17.307 19.0898 16.7067 18.8647 16.2049 18.4457C15.7532 18.0687 15.4078 17.5505 15.0843 17.0652L15.0724 17.0474C14.772 16.5968 14.5111 16.3563 14.2645 16.2193C14.0229 16.0851 13.7313 16.0147 13.3048 16.0147C12.8422 16.0147 12.0647 16.5151 12.3319 17.851C12.4131 18.2572 12.1497 18.6523 11.7435 18.7335C11.3374 18.8148 10.9423 18.5514 10.861 18.1452C10.4448 16.0644 11.7174 14.5147 13.3048 14.5147C13.9033 14.5147 14.4658 14.6152 14.993 14.9081C15.5152 15.1982 15.9376 15.641 16.3205 16.2154C16.6769 16.75 16.907 17.0779 17.1661 17.2942C17.3805 17.4732 17.6345 17.5898 18.0882 17.5898C18.5068 17.5898 18.8536 17.4181 19.047 17.1414C19.232 16.8766 19.3749 16.3716 19.0851 15.5019C18.9541 15.1089 19.1665 14.6842 19.5594 14.5532Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.98529 18.5C8.98529 18.0858 8.64951 17.75 8.23529 17.75H7.57353V12.4265H18.3971L18.3971 6.73532C18.3971 5.28152 17.2186 4.10297 15.7647 4.10297H5.88235C4.42854 4.10297 3.25 5.28151 3.25 6.73532V16.6177C3.25 18.0715 4.42855 19.25 5.88235 19.25H8.23529C8.64951 19.25 8.98529 18.9142 8.98529 18.5ZM5.88235 5.60297C5.25697 5.60297 4.75 6.10994 4.75 6.73532V7.86768H6.07353V5.60297H5.88235ZM4.75 16.6177C4.75 17.2431 5.25696 17.75 5.88235 17.75H6.07353V15.4853H4.75V16.6177ZM16.8971 6.73532C16.8971 6.10993 16.3901 5.60297 15.7647 5.60297H15.5735V7.86768H16.8971V6.73532ZM4.75 13.9853V12.4265H6.07353V13.9853H4.75ZM6.07353 10.9265H4.75V9.36768H6.07353V10.9265ZM16.8971 9.36768V10.9265H15.5735V9.36768H16.8971ZM7.57353 10.9265H14.0735V5.60297H7.57353V10.9265Z",fill:"currentColor"})]}))}))},98981:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,o.jsx)("path",{fill:"currentColor",d:"M7.99996 2L0.666626 6L3.33329 7.45333V11.4533L7.99996 14L12.6666 11.4533V7.45333L14 6.72667V11.3333H15.3333V6L7.99996 2ZM12.5466 6L7.99996 8.48L3.45329 6L7.99996 3.52L12.5466 6ZM11.3333 10.6667L7.99996 12.48L4.66663 10.6667V8.18L7.99996 10L11.3333 8.18V10.6667Z"})}))}))},72662:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),{},{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33334 3.66663C5.30829 3.66663 3.66667 5.30825 3.66667 7.33329C3.66667 9.35835 5.30829 11 7.33334 11C9.3584 11 11 9.35835 11 7.33329C11 5.30825 9.3584 3.66663 7.33334 3.66663ZM2.66667 7.33329C2.66667 4.75596 4.75601 2.66663 7.33334 2.66663C9.91068 2.66663 12 4.75596 12 7.33329C12 8.44185 11.6135 9.46012 10.9678 10.2607L13.1869 12.4797C13.3822 12.675 13.3822 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L10.2607 10.9678C9.46017 11.6134 8.4419 12 7.33334 12C4.75601 12 2.66667 9.91064 2.66667 7.33329Z",fill:"currentColor"})}))}))},37502:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"-1 -1 18 18",fill:"none",children:(0,o.jsx)("path",{d:"M8.48609 5C9.19334 5 9.87161 5.28095 10.3717 5.78105C10.8718 6.28115 11.1528 6.95942 11.1528 7.66667C11.1528 8.37391 10.8718 9.05219 10.3717 9.55229C9.87161 10.0524 9.19334 10.3333 8.48609 10.3333C7.77885 10.3333 7.10057 10.0524 6.60048 9.55229C6.10038 9.05219 5.81943 8.37391 5.81943 7.66667C5.81943 6.95942 6.10038 6.28115 6.60048 5.78105C7.10057 5.28095 7.77885 5 8.48609 5ZM8.48609 6.33333C8.13247 6.33333 7.79333 6.47381 7.54328 6.72386C7.29324 6.97391 7.15276 7.31305 7.15276 7.66667C7.15276 8.02029 7.29324 8.35943 7.54328 8.60948C7.79333 8.85952 8.13247 9 8.48609 9C8.83972 9 9.17885 8.85952 9.4289 8.60948C9.67895 8.35943 9.81943 8.02029 9.81943 7.66667C9.81943 7.31305 9.67895 6.97391 9.4289 6.72386C9.17885 6.47381 8.83972 6.33333 8.48609 6.33333ZM7.15276 14.3333C6.98609 14.3333 6.84609 14.2133 6.81943 14.0533L6.57276 12.2867C6.15276 12.12 5.79276 11.8933 5.44609 11.6267L3.78609 12.3C3.63943 12.3533 3.45943 12.3 3.37943 12.1533L2.04609 9.84667C2.00529 9.77798 1.99091 9.69677 2.00563 9.61825C2.02035 9.53972 2.06318 9.46924 2.12609 9.42L3.53276 8.31333L3.48609 7.66667L3.53276 7L2.12609 5.91333C2.06318 5.86409 2.02035 5.79361 2.00563 5.71509C1.99091 5.63656 2.00529 5.55536 2.04609 5.48667L3.37943 3.18C3.45943 3.03333 3.63943 2.97333 3.78609 3.03333L5.44609 3.7C5.79276 3.44 6.15276 3.21333 6.57276 3.04667L6.81943 1.28C6.84609 1.12 6.98609 1 7.15276 1H9.81943C9.98609 1 10.1261 1.12 10.1528 1.28L10.3994 3.04667C10.8194 3.21333 11.1794 3.44 11.5261 3.7L13.1861 3.03333C13.3328 2.97333 13.5128 3.03333 13.5928 3.18L14.9261 5.48667C15.0128 5.63333 14.9728 5.81333 14.8461 5.91333L13.4394 7L13.4861 7.66667L13.4394 8.33333L14.8461 9.42C14.9728 9.52 15.0128 9.7 14.9261 9.84667L13.5928 12.1533C13.5128 12.3 13.3328 12.36 13.1861 12.3L11.5261 11.6333C11.1794 11.8933 10.8194 12.12 10.3994 12.2867L10.1528 14.0533C10.1261 14.2133 9.98609 14.3333 9.81943 14.3333H7.15276ZM7.98609 2.33333L7.73943 4.07333C6.93943 4.24 6.23276 4.66667 5.71943 5.26L4.11276 4.56667L3.61276 5.43333L5.01943 6.46667C4.75276 7.24444 4.75276 8.08889 5.01943 8.86667L3.60609 9.90667L4.10609 10.7733L5.72609 10.08C6.23943 10.6667 6.93943 11.0933 7.73276 11.2533L7.97943 13H8.99276L9.23943 11.26C10.0328 11.0933 10.7328 10.6667 11.2461 10.08L12.8661 10.7733L13.3661 9.90667L11.9528 8.87333C12.2194 8.09333 12.2194 7.24667 11.9528 6.46667L13.3594 5.43333L12.8594 4.56667L11.2528 5.26C10.7289 4.65355 10.0183 4.23845 9.23276 4.08L8.98609 2.33333H7.98609Z",fill:"currentColor"})}))}))},44634:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66663 4.49996C2.66663 3.48744 3.48744 2.66663 4.49996 2.66663H6.16663C6.44277 2.66663 6.66663 2.89048 6.66663 3.16663C6.66663 3.44277 6.44277 3.66663 6.16663 3.66663H4.49996C4.03972 3.66663 3.66663 4.03972 3.66663 4.49996V11.5C3.66663 11.9602 4.03972 12.3333 4.49996 12.3333H11.5C11.9602 12.3333 12.3333 11.9602 12.3333 11.5V9.83329C12.3333 9.55715 12.5572 9.33329 12.8333 9.33329C13.1094 9.33329 13.3333 9.55715 13.3333 9.83329V11.5C13.3333 12.5125 12.5125 13.3333 11.5 13.3333H4.49996C3.48744 13.3333 2.66663 12.5125 2.66663 11.5V4.49996Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33329 3.16663C9.33329 2.89048 9.55715 2.66663 9.83329 2.66663H12.8333C13.1094 2.66663 13.3333 2.89048 13.3333 3.16663V6.16663C13.3333 6.44277 13.1094 6.66663 12.8333 6.66663C12.5572 6.66663 12.3333 6.44277 12.3333 6.16663V3.66663H9.83329C9.55715 3.66663 9.33329 3.44277 9.33329 3.16663Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0202 2.97974C13.2154 3.175 13.2154 3.49158 13.0202 3.68685L8.18685 8.52018C7.99158 8.71544 7.675 8.71544 7.47974 8.52018C7.28448 8.32492 7.28448 8.00834 7.47974 7.81307L12.3131 2.97974C12.5083 2.78448 12.8249 2.78448 13.0202 2.97974Z",fill:"currentColor"})]}))}))},86022:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({width:"17",height:"16",viewBox:"0 0 17 16",fill:"none"},e),{},{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0591 3.38717C13.2273 3.47228 13.3333 3.64478 13.3333 3.83332V12.1666C13.3333 12.3552 13.2273 12.5277 13.0591 12.6128C12.8908 12.6979 12.689 12.6812 12.5371 12.5695L6.87047 8.40281C6.74233 8.30859 6.66667 8.15903 6.66667 7.99998C6.66667 7.84093 6.74233 7.69137 6.87047 7.59716L12.5371 3.43049C12.689 3.3188 12.8908 3.30205 13.0591 3.38717ZM8.0107 7.99998L12.3333 11.1784V4.82158L8.0107 7.99998Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 3.33332C4.77614 3.33332 5 3.55717 5 3.83332V12.1666C5 12.4428 4.77614 12.6666 4.5 12.6666C4.22386 12.6666 4 12.4428 4 12.1666V3.83332C4 3.55717 4.22386 3.33332 4.5 3.33332Z",fill:"currentColor"})]}))}))},47956:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.01074 4.6875C6.99145 4.6875 5.35449 6.32446 5.35449 8.34375V15.6562C5.35449 17.6755 6.99146 19.3125 9.01074 19.3125H16.3232C18.3425 19.3125 19.9795 17.6755 19.9795 15.6562V8.34375C19.9795 6.32446 18.3425 4.6875 16.3232 4.6875H9.01074ZM3.66699 8.34375C3.66699 5.39248 6.05947 3 9.01074 3H16.3232C19.2745 3 21.667 5.39247 21.667 8.34375V15.6562C21.667 18.6075 19.2745 21 16.3232 21H9.01074C6.05946 21 3.66699 18.6075 3.66699 15.6562V8.34375Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.667 12C13.2883 12 13.792 12.5037 13.792 13.125V15.375C13.792 15.9963 13.2883 16.5 12.667 16.5C12.0457 16.5 11.542 15.9963 11.542 15.375V13.125C11.542 12.5037 12.0457 12 12.667 12Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M12.667 9.75C13.2883 9.75 13.792 9.24632 13.792 8.625C13.792 8.00368 13.2883 7.5 12.667 7.5C12.0457 7.5 11.542 8.00368 11.542 8.625C11.542 9.24632 12.0457 9.75 12.667 9.75Z",fill:"currentColor"})]}))}))},6879:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"1 1 14 14",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.18971 3.90807C3.48721 3.25358 4.13978 2.83337 4.85871 2.83337H11.1416C11.8605 2.83337 12.5131 3.25359 12.8106 3.90803L13.1692 4.69689C13.2774 4.93513 13.3335 5.19384 13.3335 5.45552V11.5002C13.3335 12.5127 12.5127 13.3335 11.5001 13.3335H4.50016C3.48765 13.3335 2.66683 12.5127 2.66683 11.5002V5.45552C2.66683 5.1938 2.72287 4.93513 2.83115 4.69689L3.18971 3.90807C3.18971 3.90807 3.18971 3.90807 3.18971 3.90807ZM4.85871 3.83337C4.53193 3.83337 4.2353 4.02438 4.10008 4.32187L3.74153 5.11067C3.74153 5.11068 3.74153 5.11067 3.74153 5.11067C3.6923 5.21899 3.66683 5.33657 3.66683 5.45552V11.5002C3.66683 11.9604 4.03992 12.3335 4.50016 12.3335H11.5001C11.9604 12.3335 12.3335 11.9604 12.3335 11.5002V5.45552C12.3335 5.33656 12.308 5.21897 12.2588 5.11067M12.2588 5.11067L11.9003 4.3219C11.9003 4.32189 11.9003 4.32192 11.9003 4.3219C11.765 4.0244 11.4684 3.83337 11.1416 3.83337H4.85871",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.16667 4.66671C3.44281 4.66671 3.66667 4.89057 3.66667 5.16671C3.66667 5.48724 3.76452 5.78846 3.9324 5.99873C4.09013 6.19628 4.32286 6.33337 4.66667 6.33337C5.3577 6.33337 5.83333 5.753 5.83333 5.16671C5.83333 4.89057 6.05719 4.66671 6.33333 4.66671C6.60948 4.66671 6.83333 4.89057 6.83333 5.16671C6.83333 6.23727 5.97563 7.33337 4.66667 7.33337C4.01047 7.33337 3.4932 7.05135 3.15094 6.62267C2.81882 6.20672 2.66667 5.6746 2.66667 5.16671C2.66667 4.89057 2.89053 4.66671 3.16667 4.66671Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.66667 4.66671C9.94281 4.66671 10.1667 4.89057 10.1667 5.16671C10.1667 5.753 10.6423 6.33337 11.3333 6.33337C11.6771 6.33337 11.9099 6.19628 12.0676 5.99873C12.2355 5.78846 12.3333 5.48724 12.3333 5.16671C12.3333 4.89057 12.5572 4.66671 12.8333 4.66671C13.1095 4.66671 13.3333 4.89057 13.3333 5.16671C13.3333 5.6746 13.1812 6.20672 12.8491 6.62267C12.5068 7.05135 11.9895 7.33337 11.3333 7.33337C10.0244 7.33337 9.16667 6.23727 9.16667 5.16671C9.16667 4.89057 9.39053 4.66671 9.66667 4.66671Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.33333 4.66671C6.60948 4.66671 6.83333 4.89057 6.83333 5.16671C6.83333 5.753 7.30896 6.33337 8 6.33337C8.69104 6.33337 9.16667 5.753 9.16667 5.16671C9.16667 4.89057 9.39053 4.66671 9.66667 4.66671C9.94281 4.66671 10.1667 4.89057 10.1667 5.16671C10.1667 6.23727 9.30896 7.33337 8 7.33337C6.69104 7.33337 5.83333 6.23727 5.83333 5.16671C5.83333 4.89057 6.05719 4.66671 6.33333 4.66671Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.83307 9.66624C7.37287 9.66624 6.99975 10.0393 6.99975 10.4996V12.3329H8.99973V10.4996C8.99973 10.0393 8.62666 9.66624 8.1664 9.66624H7.83307ZM5.99975 10.4996C5.99975 9.48703 6.8206 8.66624 7.83307 8.66624H8.1664C9.17894 8.66624 9.99973 9.48703 9.99973 10.4996V12.8329C9.99973 13.109 9.77588 13.3329 9.49973 13.3329H6.49975C6.22361 13.3329 5.99975 13.109 5.99975 12.8329V10.4996Z",fill:"currentColor"})]}))}))},58978:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,o.jsx)("path",{d:"M10.8134 2.64645C11.0087 2.45118 11.3253 2.45118 11.5205 2.64645L13.5205 4.64645C13.6143 4.74021 13.667 4.86739 13.667 5C13.667 5.13261 13.6143 5.25979 13.5205 5.35355L11.5205 7.35355C11.3253 7.54882 11.0087 7.54882 10.8134 7.35355C10.6182 7.15829 10.6182 6.84171 10.8134 6.64645L11.9599 5.5H5.16699C4.89085 5.5 4.66699 5.27614 4.66699 5C4.66699 4.72386 4.89085 4.5 5.16699 4.5H11.9599L10.8134 3.35355C10.6182 3.15829 10.6182 2.84171 10.8134 2.64645Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M7.02055 9.35355C7.21581 9.15829 7.21581 8.84171 7.02055 8.64645C6.82528 8.45118 6.5087 8.45118 6.31344 8.64645L4.31344 10.6464C4.21967 10.7402 4.16699 10.8674 4.16699 11C4.16699 11.1326 4.21967 11.2598 4.31344 11.3536L6.31344 13.3536C6.5087 13.5488 6.82528 13.5488 7.02055 13.3536C7.21581 13.1583 7.21581 12.8417 7.02055 12.6464L5.8741 11.5L12.667 11.5C12.9431 11.5 13.167 11.2761 13.167 11C13.167 10.7239 12.9431 10.5 12.667 10.5L5.8741 10.5L7.02055 9.35355Z",fill:"currentColor"})]}))}))},6307:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,o.jsx)("path",{d:"M10.6668 6.66663C11.035 6.66663 11.3334 6.36815 11.3334 5.99996C11.3334 5.63177 11.035 5.33329 10.6668 5.33329C10.2986 5.33329 10.0001 5.63177 10.0001 5.99996C10.0001 6.36815 10.2986 6.66663 10.6668 6.66663Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.32027 2.80616C8.41341 2.71663 8.53758 2.66663 8.66677 2.66663H13.5001C13.7762 2.66663 14.0001 2.89048 14.0001 3.16663V7.99996C14.0001 8.1329 13.9472 8.26037 13.853 8.35419L9.38864 12.8014C8.65615 13.531 7.46558 13.5111 6.758 12.7572L3.82881 9.63613C3.14175 8.90408 3.1713 7.75557 3.89511 7.05982L8.32027 2.80616ZM8.86811 3.66663L4.58811 7.78076C4.25911 8.09701 4.24567 8.61904 4.55797 8.95179L7.48713 12.0728C7.80876 12.4155 8.34992 12.4246 8.6829 12.0929L13.0001 7.79229V3.66663H8.86811Z",fill:"currentColor"})]}))}))},61804:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{d:"M8.66668 8.00002C8.66668 8.36822 8.36821 8.66669 8.00001 8.66669C7.63181 8.66669 7.33334 8.36822 7.33334 8.00002C7.33334 7.63182 7.63181 7.33335 8.00001 7.33335C8.36821 7.33335 8.66668 7.63182 8.66668 8.00002Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M8.66668 5.33335C8.66668 5.70154 8.36821 6.00002 8.00001 6.00002C7.63181 6.00002 7.33334 5.70154 7.33334 5.33335C7.33334 4.96517 7.63181 4.66669 8.00001 4.66669C8.36821 4.66669 8.66668 4.96517 8.66668 5.33335Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M8.66668 10.6667C8.66668 11.0349 8.36821 11.3334 8.00001 11.3334C7.63181 11.3334 7.33334 11.0349 7.33334 10.6667C7.33334 10.2985 7.63181 10 8.00001 10C8.36821 10 8.66668 10.2985 8.66668 10.6667Z",fill:"currentColor"})]}))}))},53162:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.1667 5.16669C13.1667 4.89054 12.9428 4.66669 12.6667 4.66669H10V4.50002C10 3.4875 9.17925 2.66669 8.16671 2.66669H7.83337C6.82083 2.66669 6.00004 3.4875 6.00004 4.50002V4.66669H3.33337C3.05723 4.66669 2.83337 4.89054 2.83337 5.16669C2.83337 5.44283 3.05723 5.66669 3.33337 5.66669H4.04163L4.56269 11.6589C4.64507 12.6063 5.43818 13.3334 6.38913 13.3334H9.61097C10.5619 13.3334 11.355 12.6062 11.4374 11.6588L11.9584 5.66669H12.6667C12.9428 5.66669 13.1667 5.44283 13.1667 5.16669ZM7.83337 3.66669C7.37312 3.66669 7.00004 4.03978 7.00004 4.50002V4.66669H9.00004V4.50002C9.00004 4.03978 8.62696 3.66669 8.16671 3.66669H7.83337ZM10.4411 11.5723L10.9547 5.66669H5.04541L5.55893 11.5722C5.59637 12.0028 5.95686 12.3334 6.38913 12.3334H9.61097C10.0432 12.3334 10.4037 12.0028 10.4411 11.5723Z",fill:"currentColor"})}))}))},82676:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66669 5.33337C2.66669 5.05723 2.89054 4.83337 3.16669 4.83337H4.83335C5.1095 4.83337 5.33335 5.05723 5.33335 5.33337C5.33335 5.60952 5.1095 5.83337 4.83335 5.83337H3.16669C2.89054 5.83337 2.66669 5.60952 2.66669 5.33337Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00002 5.33337C8.00002 5.05723 8.22388 4.83337 8.50002 4.83337H12.8334C13.1095 4.83337 13.3334 5.05723 13.3334 5.33337C13.3334 5.60952 13.1095 5.83337 12.8334 5.83337H8.50002C8.22388 5.83337 8.00002 5.60952 8.00002 5.33337Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66669 4.33337C6.1144 4.33337 5.66669 4.78109 5.66669 5.33337C5.66669 5.88566 6.1144 6.33337 6.66669 6.33337C7.21897 6.33337 7.66669 5.88566 7.66669 5.33337C7.66669 4.78109 7.21897 4.33337 6.66669 4.33337ZM4.66669 5.33337C4.66669 4.2288 5.56212 3.33337 6.66669 3.33337C7.77126 3.33337 8.66669 4.2288 8.66669 5.33337C8.66669 6.43794 7.77126 7.33337 6.66669 7.33337C5.56212 7.33337 4.66669 6.43794 4.66669 5.33337Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.66669 10.6667C2.66669 10.3906 2.89054 10.1667 3.16669 10.1667H8.16669C8.44283 10.1667 8.66669 10.3906 8.66669 10.6667C8.66669 10.9428 8.44283 11.1667 8.16669 11.1667H3.16669C2.89054 11.1667 2.66669 10.9428 2.66669 10.6667Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3334 10.6667C11.3334 10.3906 11.5572 10.1667 11.8334 10.1667H12.8334C13.1095 10.1667 13.3334 10.3906 13.3334 10.6667C13.3334 10.9428 13.1095 11.1667 12.8334 11.1667H11.8334C11.5572 11.1667 11.3334 10.9428 11.3334 10.6667Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 9.66671C9.44774 9.66671 9.00002 10.1144 9.00002 10.6667C9.00002 11.219 9.44774 11.6667 10 11.6667C10.5523 11.6667 11 11.219 11 10.6667C11 10.1144 10.5523 9.66671 10 9.66671ZM8.00002 10.6667C8.00002 9.56214 8.89545 8.66671 10 8.66671C11.1046 8.66671 12 9.56214 12 10.6667C12 11.7713 11.1046 12.6667 10 12.6667C8.89545 12.6667 8.00002 11.7713 8.00002 10.6667Z",fill:"currentColor"})]}))}))},42839:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"24",height:"24",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M18 5L6 19M16.0288 18.8199L5.10657 5.75317C4.85035 5.44664 5.08511 5 5.50246 5H7.57527C7.73003 5 7.87614 5.06648 7.97115 5.18016L18.8934 18.2468C19.1497 18.5534 18.9149 19 18.4975 19H16.4248C16.27 19 16.1238 18.9335 16.0288 18.8199Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none"})}))}))},49536:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"11",height:"12",viewBox:"0 0 11 12",style:{fill:"none"},children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1.66663C4.07953 1.66663 3.33333 2.41282 3.33333 3.33329C3.33333 4.25377 4.07953 4.99996 5 4.99996C5.92048 4.99996 6.66667 4.25377 6.66667 3.33329C6.66667 2.41282 5.92048 1.66663 5 1.66663ZM2.33333 3.33329C2.33333 1.86053 3.52724 0.666626 5 0.666626C6.47276 0.666626 7.66667 1.86053 7.66667 3.33329C7.66667 4.80605 6.47276 5.99996 5 5.99996C3.52724 5.99996 2.33333 4.80605 2.33333 3.33329Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.16667 7.83329C2.6693 7.83329 1.58173 8.88923 1.0908 9.71832C0.998733 9.8738 1.02215 9.99692 1.10056 10.1007C1.1926 10.2224 1.38217 10.3333 1.63302 10.3333H5.16667C5.44281 10.3333 5.66667 10.5572 5.66667 10.8333C5.66667 11.1094 5.44281 11.3333 5.16667 11.3333H1.63302C1.09754 11.3333 0.600568 11.0976 0.302804 10.7036C-0.00859044 10.2917 -0.0782384 9.72992 0.230335 9.2088C0.901565 8.07522 2.3165 6.83329 5.16667 6.83329C5.44281 6.83329 5.66667 7.05715 5.66667 7.33329C5.66667 7.60944 5.44281 7.83329 5.16667 7.83329Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1261 7.42795C10.3499 7.58963 10.4004 7.90217 10.2387 8.12604L8.07201 11.126C7.98157 11.2513 7.83834 11.3276 7.68398 11.333C7.52961 11.3383 7.38144 11.272 7.28256 11.1534L6.44922 10.1534C6.27244 9.94125 6.3011 9.62596 6.51324 9.44918C6.72538 9.2724 7.04066 9.30106 7.21744 9.5132L7.63844 10.0184L9.42799 7.54055C9.58967 7.31668 9.90222 7.26627 10.1261 7.42795Z",fill:"currentColor"})]}))}))},81730:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.50002 3.66663C4.03978 3.66663 3.66669 4.03972 3.66669 4.49996V11.5C3.66669 11.9602 4.03978 12.3333 4.50002 12.3333H11.5C11.9603 12.3333 12.3334 11.9602 12.3334 11.5V4.49996C12.3334 4.03972 11.9603 3.66663 11.5 3.66663H4.50002ZM2.66669 4.49996C2.66669 3.48744 3.4875 2.66663 4.50002 2.66663H11.5C12.5126 2.66663 13.3334 3.48744 13.3334 4.49996V11.5C13.3334 12.5125 12.5126 13.3333 11.5 13.3333H4.50002C3.4875 13.3333 2.66669 12.5125 2.66669 11.5V4.49996Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25221 5.39902C6.40815 5.31004 6.59982 5.31149 6.75438 5.40283L10.4211 7.5695C10.5733 7.65945 10.6667 7.82313 10.6667 7.99996C10.6667 8.17679 10.5733 8.34046 10.4211 8.43042L6.75438 10.5971C6.59982 10.6884 6.40815 10.6899 6.25221 10.6009C6.09628 10.5119 6.00002 10.3462 6.00002 10.1666V5.83329C6.00002 5.65376 6.09628 5.488 6.25221 5.39902ZM7.00002 6.70952V9.2904L9.18385 7.99996L7.00002 6.70952Z",fill:"currentColor"})]}))}))},57588:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo(i.forwardRef((function(e,t){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,o.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",children:[(0,o.jsx)("path",{d:"m19.25 12c0 1-1.75 6.25-7.25 6.25s-7.25-5.25-7.25-6.25 1.75-6.25 7.25-6.25 7.25 5.25 7.25 6.25z"}),(0,o.jsx)("circle",{cx:"12",cy:"12",r:"2.25"})]})}))})))},85477:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo(i.forwardRef((function(e,t){return(0,o.jsx)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,o.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",children:[(0,o.jsx)("path",{d:"m18.6247 10c0.4399 0.8986 0.6253 1.6745 0.6253 2 0 1-1.75 6.25-7.25 6.25-0.7314 0-1.3965-0.0928-2-0.2562m-3-1.7252c-1.63791-1.5993-2.25-3.6772-2.25-4.2686 0-1 1.75-6.25 7.25-6.25 1.7947 0 3.1901 0.55902 4.2558 1.34698"}),(0,o.jsx)("path",{d:"m19.25 4.75-14.5 14.5"}),(0,o.jsx)("path",{d:"m10.409 13.591c-0.87867-0.8787-0.87867-2.3033 0-3.182 0.8787-0.8787 2.3033-0.8787 3.182 0"})," "]})}))})))},75779:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo(i.forwardRef((function(e,t){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:[(0,o.jsx)("path",{d:"M8.66705 5.5C8.9432 5.5 9.16705 5.72386 9.16705 6V8C9.16705 8.27614 8.9432 8.5 8.66705 8.5C8.39091 8.5 8.16705 8.27614 8.16705 8V6C8.16705 5.72386 8.39091 5.5 8.66705 5.5Z",fill:"currentColor"}),(0,o.jsx)("path",{d:"M8.66703 11.3333C9.03522 11.3333 9.3337 11.0349 9.3337 10.6667C9.3337 10.2985 9.03522 10 8.66703 10C8.29884 10 8.00037 10.2985 8.00037 10.6667C8.00037 11.0349 8.29884 11.3333 8.66703 11.3333Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5935 2.69047C9.80011 1.10352 7.53887 1.10307 6.74495 2.68977L2.39727 11.3787C1.68083 12.8106 2.71895 14.5 4.32135 14.5H13.0128C14.6148 14.5 15.6529 12.8112 14.9372 11.3795L10.5935 2.69047ZM7.63925 3.13725C8.06446 2.28742 9.27407 2.28762 9.69902 3.13762L14.0427 11.8266C14.4275 12.5964 13.8681 13.5 13.0128 13.5H4.32135C3.46577 13.5 2.90635 12.5961 3.29157 11.8262L7.63925 3.13725Z",fill:"currentColor"})]}))})))},87199:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 3.66663C5.30828 3.66663 3.66666 5.30825 3.66666 7.33329C3.66666 9.35834 5.30828 11 7.33332 11C9.35837 11 11 9.35834 11 7.33329C11 5.30825 9.35837 3.66663 7.33332 3.66663ZM2.66666 7.33329C2.66666 4.75596 4.75599 2.66663 7.33332 2.66663C9.91065 2.66663 12 4.75596 12 7.33329C12 9.91062 9.91065 12 7.33332 12C4.75599 12 2.66666 9.91062 2.66666 7.33329Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.97977 9.97974C10.175 9.78448 10.4916 9.78448 10.6869 9.97974L13.1869 12.4797C13.3821 12.675 13.3821 12.9916 13.1869 13.1868C12.9916 13.3821 12.675 13.3821 12.4798 13.1868L9.97977 10.6868C9.78451 10.4916 9.78451 10.175 9.97977 9.97974Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33332 5.33329C7.60947 5.33329 7.83332 5.55715 7.83332 5.83329V8.83329C7.83332 9.10944 7.60947 9.33329 7.33332 9.33329C7.05718 9.33329 6.83332 9.10944 6.83332 8.83329V5.83329C6.83332 5.55715 7.05718 5.33329 7.33332 5.33329Z",fill:"currentColor"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33332 7.33329C5.33332 7.05715 5.55718 6.83329 5.83332 6.83329H8.83332C9.10947 6.83329 9.33332 7.05715 9.33332 7.33329C9.33332 7.60944 9.10947 7.83329 8.83332 7.83329H5.83332C5.55718 7.83329 5.33332 7.60944 5.33332 7.33329Z",fill:"currentColor"})]}))}))},1773:function(e,t,n){"use strict";n.d(t,{N2:function(){return P},vF:function(){return L}});var r=n(4942),i=n(1413),a=n(28381),o=n(69186),s=n(37477),l=n(44827),c=n(97865),u=n(6996),d=n(82954),p=n.n(d),f=n(36262),h=n(65111),g=n(61325),m=n(60022),x=n(86278),v=n(23198),b=n(51598),C=n(40243),j=n(24910),y=n(64207),Z=n(19131),k=n(86443),w=n(29343),T=0,S=[],P=function(e){return S.push(e),e({openedDialogsCount:T}),function(){S.splice(S.indexOf(e),1)}},I=function(){S.forEach((function(e){return e({openedDialogsCount:T})}))},E=function(e){switch(e){case"small":return!1;case"medium":default:return"md";case"large":case"xlarge":return"lg"}},M={dialogContainer:{display:"flex",flexDirection:"column",flex:1,overflowY:"auto"},dialogContent:{overflowX:"hidden",paddingLeft:0,paddingRight:0},flexColumnBody:{display:"flex",flexDirection:"column"},flexBody:{display:"flex"},titleContainer:{textAlign:"left",overflowWrap:"anywhere"},closeDialogContainer:{WebkitAppRegion:"no-drag"},fixedContentContainer:{paddingBottom:8},actionsContainer:{paddingTop:24,paddingBottom:0,paddingLeft:0,paddingRight:0},actionsContainerWithSecondaryActions:{display:"flex",justifyContent:"space-between"},minHeightForFullHeightModal:"calc(100% - 64px)",minHeightForSmallHeightModal:"min(100% - 64px, 350px)",minHeightForLargeHeightModal:"min(100% - 64px, 800px)",topBackground:{position:"absolute",top:0,zIndex:-1,left:24,right:24,height:"100%",backgroundSize:"contain",backgroundRepeat:"no-repeat"}},L=m.Z,A=function(e){var t=e.onApply,n=e.secondaryActions,d=e.dangerLevel,m=e.actions,S=e.open,P=e.onRequestClose,L=e.maxWidth,A=e.minHeight,O=e.title,R=e.subtitle,F=e.fixedContent,D=e.children,N=e.flexColumnBody,_=e.flexBody,B=e.fullHeight,U=e.id,V=e.cannotBeDismissed,H=e.exceptionallyStillAllowRenderingInstancesEditors,z=e.fullscreen,W=e.noPadding,G=e.actionsFullWidthOnMobile,Y=e.forceScrollVisible,q=e.topBackgroundSrc,J=a.useContext(f.ZP),X=a.useContext(j.Z),K=J.values.backdropClickBehavior,Q=(0,u.UQ)(),$=Q.windowSize,ee=Q.isMobile,te=m&&m.filter(Boolean).length>0||n&&n.filter(Boolean).length>0,ne="never-even-on-mobile"!==z&&("always-even-on-desktop"===z||ee),re=function(e){return(0,o.Z)((function(t){if(!e)return{};var n="warning"===e?t.palette.warning:t.palette.error;return{paper:{"&:before":{content:'""',height:60,background:"repeating-linear-gradient(110deg, ".concat(n.dark,", ").concat(n.dark," 25px, ").concat(n.main," 25px, ").concat(n.main," 40px)")}}}}))()}(d),ie=function(e){var t=e.forceScroll;return a.useMemo((function(){return(0,o.Z)({root:(0,i.Z)((0,i.Z)({},t?{overflowY:"scroll"}:{}),{},{"&::-webkit-scrollbar":{width:11},"&::-webkit-scrollbar-track":{background:"rgba(0, 0, 0, 0.04)",borderRadius:6},"&::-webkit-scrollbar-thumb":{border:"3px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:6}})})}),[t])()}({forceScroll:!!Y}),ae=a.useMemo((function(){return(0,w.jsxs)(a.Fragment,{children:[n&&(0,w.jsx)(g.pJ,{noMargin:!0,expand:ee&&G,children:n},"secondary-actions"),m&&(0,w.jsx)(g.pJ,{noMargin:!0,expand:ee&&G,children:m},"actions")]})}),[m,n,ee,G]),oe=N?M.flexColumnBody:_?M.flexBody:{},se={paddingTop:0,paddingBottom:te||W?0:24},le=(0,i.Z)((0,i.Z)((0,i.Z)({},M.dialogContent),oe),se),ce=(0,i.Z)((0,i.Z)({},M.dialogContainer),{},{margin:W?0:ne?8:"".concat(16,"px ").concat(24,"px ").concat(24,"px ").concat(24,"px")}),ue=a.useCallback((function(e,n){if(!V)if("escapeKeyDown"===n)P&&P();else if("backdropClick"===n)if("cancel"===K)P&&P();else if("apply"===K)t?t():P&&P();else if("nothing"===K)return}),[P,t,K,V]),de=a.useCallback((function(e){if((0,h.W$)(e))return ue(e,"escapeKeyDown"),void e.stopPropagation();if(t&&(0,h.Fc)(e)){e.stopPropagation();var n=document.activeElement;n&&n.blur(),t()}}),[ue,t]),pe=(0,Z.T)(),fe=B?M.minHeightForFullHeightModal:"lg"===A?M.minHeightForLargeHeightModal:"sm"===A?M.minHeightForSmallHeightModal:void 0,he=a.useMemo((function(){return(0,i.Z)({backgroundColor:X.dialog.backgroundColor,minHeight:fe},(0,Z.E)(pe))}),[X.dialog.backgroundColor,fe,pe]);return a.useEffect((function(){if(S)return T++,I(),function(){T--,I()}}),[S]),(0,w.jsxs)(s.Z,{classes:re,open:S,onClose:ue,fullWidth:!0,fullScreen:ne,className:p()((0,r.Z)({"safe-area-aware-container":ne},y.zL,H)),PaperProps:{id:U,style:he},maxWidth:void 0!==L?L:E($),disableBackdropClick:!1,onKeyDown:de,children:[q&&(0,w.jsx)("div",{style:(0,i.Z)((0,i.Z)({},M.topBackground),{},{backgroundImage:"url(".concat(q,")")})}),(0,w.jsxs)("div",{style:ce,children:[(0,w.jsx)("div",{style:(0,i.Z)((0,i.Z)({},M.titleContainer),{},{paddingBottom:O?16:0}),children:(0,w.jsxs)(C.x1,{noMargin:!0,justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsxs)(C.x1,{noMargin:!0,alignItems:"center",children:[ne&&(0,w.jsx)(k.A,{backgroundColor:X.dialog.backgroundColor}),(0,w.jsxs)(g.ak,{noMargin:!0,children:[(0,w.jsx)(x.Z,{noMargin:!0,size:"section-title",children:O}),R&&(0,w.jsx)(x.Z,{noMargin:!0,children:R})]})]}),(0,w.jsx)(C.sg,{noMargin:!0,children:(0,w.jsxs)(C.x1,{noMargin:!0,alignItems:"center",children:[P&&!V&&(0,w.jsx)("div",{style:M.closeDialogContainer,children:(0,w.jsx)(b.Z,{onClick:P,size:"small",disabled:V,children:(0,w.jsx)(v.Z,{})})}),ne&&(0,w.jsx)(k.$,{backgroundColor:X.dialog.backgroundColor})]})})]})}),F&&(0,w.jsx)("div",{style:M.fixedContentContainer,children:F}),(0,w.jsx)(c.Z,{classes:ie,style:le,children:D}),te&&(0,w.jsx)(l.Z,{style:(0,i.Z)((0,i.Z)({},M.actionsContainer),n?M.actionsContainerWithSecondaryActions:{}),children:ae})]})]})};t.ZP=function(e){return(0,w.jsx)(u.eC,{children:(0,w.jsx)(A,(0,i.Z)({},e))})}},24830:function(e,t,n){"use strict";n(28381);var r=n(36262),i=n(38092),a=n(2066),o=n(29343);t.Z=function(e){var t=e.identifier,n=e.kind,s=e.children;return(0,o.jsx)(r.ZP.Consumer,{children:function(e){var r=e.values,l=e.showAlertMessage;return!r.hiddenAlertMessages[t]&&(0,o.jsx)(i.Z,{kind:n,children:s,onHide:function(){a.ZP.showConfirmDialog("Are you sure you want to hide this hint? You won't see it again, unless you re-activate it from the preferences.")&&l(t,!1)}})}})}},43228:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var r=n(1413),i=(n(28381),n(17777)),a=(0,n(48409)._F)()?null:function(e){var t=e.durationInMs;try{window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(t)}catch(n){console.warn("Vibration API not supported:",n)}},o=n(29343),s=function(e,t){var n={canDrag:function(e,t){var n=t.getItem(),r=e.canDrag||null;return!r||r(n)},beginDrag:function(e){return a&&t&&t.vibrate&&a({durationInMs:t.vibrate}),e.beginDrag()},endDrag:function(e,t){e.endDrag&&e.endDrag()}};var s=(0,i.DragSource)(e,n,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((0,i.DropTarget)(e,{canDrop:function(e,t){var n=t.getItem();return n&&e.canDrop(n)},drop:function(e,t){t.didDrop()||e.drop()},hover:function(e,t){e.hover&&e.hover(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0}),isOverLazy:t.isOver({shallow:!1}),canDrop:t.canDrop()}}))((function(e){return(0,e.children)({connectDragSource:e.connectDragSource,connectDropTarget:e.connectDropTarget,connectDragPreview:e.connectDragPreview,isDragging:e.isDragging,isOver:e.isOver,isOverLazy:e.isOverLazy,canDrop:e.canDrop})})));return function(e){return(0,o.jsx)(s,(0,r.Z)({},e))}}},92582:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var r=n(1413),i=(n(28381),n(17777)),a=n(29343),o=function(e){var t=(0,i.DropTarget)(e,{canDrop:function(e,t){var n=t.getItem();return n&&e.canDrop(n)},hover:function(e,t){e.hover&&e.hover(t)},drop:function(e,t){t.didDrop()||e.drop(t)}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0}),isOverLazy:t.isOver({shallow:!1}),canDrop:t.canDrop()}}))((function(e){return(0,e.children)({connectDropTarget:e.connectDropTarget,isOver:e.isOver,isOverLazy:e.isOverLazy,canDrop:e.canDrop})}));return function(e){return(0,a.jsx)(t,(0,r.Z)({},e))}}},62572:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});n(28381);var r=n(43662),i=n(59863),a=n(29343),o={handle:{display:"flex",cursor:"move"},disabledHandle:{display:"flex",opacity:.4},handleColor:"#DDD"},s=function(e){return(0,a.jsx)("span",{style:e.disabled?o.disabledHandle:o.handle,children:(0,a.jsx)(r.Z,{htmlColor:e.color||o.handleColor})})},l=(0,i.SortableHandle)(s);t.Z=l},18624:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(28381),i=n(51598),a=n(23198),o=n(99855),s=n(29343),l={container:{padding:0,width:32,height:32},icon:{width:16,height:16}};function c(e){var t=r.useContext(o.DF).mosaicActions,n=r.useContext(o.Jy).mosaicWindowActions;return(0,s.jsx)(i.Z,{onClick:function(){t.remove(n.getPath())},style:l.container,children:(0,s.jsx)(a.Z,{htmlColor:"inherit",style:l.icon})})}},28519:function(e,t,n){"use strict";n.d(t,{Z:function(){return R},J:function(){return Z}});var r=n(29439),i=n(45987),a=n(1413),o=n(36600),s=n(28381),l=n(99855),c=n(18624),u=n(68009),d=n(93433),p=function(e){return"string"!==typeof e},f=function e(t,n){if("string"===typeof t)return{found:t===n,path:[]};var r=e(t.first,n);if(r.found)return{found:!0,path:[{parent:t,side:"first"}].concat((0,d.Z)(r.path))};var i=e(t.second,n);return i.found?{found:!0,path:[{parent:t,side:"second"}].concat((0,d.Z)(i.path))}:{found:!1,path:[]}},h=function e(t,n){return t?p(t)&&"column"===t.direction?(0,a.Z)((0,a.Z)({},t),{},{second:e(t.second,n)}):{direction:"column",first:t,second:n,splitPercentage:50}:n},g=function e(t,n){return t?p(t)&&"row"===t.direction?(0,a.Z)((0,a.Z)({},t),{},{second:e(t.second,n)}):{direction:"row",first:t,second:n,splitPercentage:50}:n},m=function(e,t){var n=f(e,t),r=n.found,i=n.path;if(!r)return{stacks:{leftStack:null,rightStack:null,bottomStack:null},splits:{leftSplit:null,rightSplit:null,bottomSplit:null}};for(var a=null,o=null,s=null,l=null,c=null,u=null,d=0;d<i.length;d++){var p=i[d],m=p.parent,x="first"===p.side?m.second:m.first;"row"===m.direction?"first"===p.side?(o=h(o,x),null==c&&(c=m.splitPercentage)):(a=h(a,x),null==l&&(l=m.splitPercentage)):"first"===p.side?(s=g(s,x),null==u&&(u=m.splitPercentage)):(s=s?g(x,s):x,null==u&&(u=m.splitPercentage))}return{stacks:{leftStack:a,rightStack:o,bottomStack:s},splits:{leftSplit:l,rightSplit:c,bottomSplit:u}}},x=function(e,t,n,r){var i=t.leftStack,a=t.rightStack,o=t.bottomStack,s=n.leftSplit,l=n.rightSplit,c=n.bottomSplit,u=e;return o&&(u={direction:"column",first:u,second:o,splitPercentage:null!=c?c:r.bottom}),i&&a?{direction:"row",first:i,second:{direction:"row",first:u,second:a,splitPercentage:null!=l?l:r.right},splitPercentage:null!=s?s:r.left}:i&&!a?{direction:"row",first:i,second:u,splitPercentage:null!=s?s:r.left}:!i&&a?{direction:"row",first:u,second:a,splitPercentage:null!=l?l:r.right}:u},v=function(e,t,n,r){var i=function(e,t){if(p(e)&&"row"===e.direction&&p(e.second)&&"row"===e.second.direction&&p(e.second.first)&&"column"===e.second.first.direction&&e.second.first.first===t)return e;var n=m(e,t),r=n.stacks,i=n.splits;return x(t,r,i,{left:20,right:75,bottom:75})}(e,r),a=m(i,r),o=a.stacks,s=a.splits,l=o.leftStack,c=o.rightStack,u=o.bottomStack,d=s.leftSplit,f=s.rightSplit,v=s.bottomSplit;if("left"===n){var b=!!l;l=h(l,t),b||(d=20)}else if("right"===n){var C=!!c;c=h(c,t),C||(f=75)}else{var j=!!u;u=g(u,t),j||(v=75)}return x(r,{leftStack:l,rightStack:c,bottomStack:u},{leftSplit:d,rightSplit:f,bottomSplit:v},{left:20,right:75,bottom:75})},b=(n(2367),n(82954)),C=n.n(b),j=n(29343),y=["source"],Z=function e(t,n){return!!t&&(t===n||!!t.first&&e(t.first,n)||!!t.second&&e(t.second,n))},k=function e(t,n,r){return t?"string"===typeof t?t:t.first===n?(0,a.Z)((0,a.Z)({},t),{},{splitPercentage:r}):t.second===n?(0,a.Z)((0,a.Z)({},t),{},{splitPercentage:100-r}):(0,a.Z)((0,a.Z)({},t),{},{first:e(t.first,n,r),second:e(t.second,n,r)}):t},w=function e(t,n){return t?"string"===typeof t?0:t.first===n?t.splitPercentage:t.second===n?100-t.splitPercentage:e(t.first,n)||e(t.second,n):0},T=function e(t){if("string"===typeof t)return t;var n=e(t.first),r=e(t.second),i=n&&!t.firstHidden,a=r&&!t.secondHidden;return i||a?i?a?n&&r?{direction:t.direction,splitPercentage:t.splitPercentage,first:n,second:r,source:t}:null:n:r:null},S=function e(t){if("string"===typeof t)return t;t.source;var n=(0,i.Z)(t,y);return(0,a.Z)((0,a.Z)({},n),{},{first:e(n.first),second:e(n.second)})},P=function e(t,n){if("string"!==typeof t){var r=t.first,i=t.second;r!==n?i!==n?(e(r,n),e(i,n)):t.secondHidden=!t.secondHidden:t.firstHidden=!t.firstHidden}},I=function e(t){if("string"!==typeof t){var n=t.source,r=t.first,i=t.second;n&&"string"!==typeof n&&(n.splitPercentage=t.splitPercentage),e(r),e(i)}},E=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("string"===typeof t)return n.push(t),n;var r=t.first,i=t.second,a=t.firstHidden,o=t.secondHidden;return a||e(r,n),o||e(i,n),n},M=function e(t,n){return"string"===typeof t||"string"===typeof n?t===n:e(t.first,n.first)&&e(t.second,n.second)},L=function(e){return"string"===typeof e?e:(0,a.Z)({},e)},A=[(0,j.jsx)(c.Z,{},"close")],O=function(e){return(0,j.jsxs)("div",{className:"mosaic-preview",children:[(0,j.jsx)("div",{className:"mosaic-window-toolbar",children:(0,j.jsx)("div",{className:"mosaic-window-title",children:e.title})}),(0,j.jsx)("div",{className:"mosaic-window-body"})]})},R=s.forwardRef((function(e,t){var n=e.initialNodes,i=e.centralNodeId,a=e.editors,c=e.onOpenedEditorsChanged,d=e.onPersistNodes,p=e.onDragOrResizedStarted,f=e.onDragOrResizedEnded,h=e.isTransparent,g=s.useRef(!1),m=s.useState(n),x=(0,r.Z)(m,2),b=x[0],y=x[1],Z=s.useMemo((function(){return T(b)}),[b]),R=s.useCallback((function(e){Z&&M(e,Z)?(I(e),y((function(e){return L(e)}))):y(e)}),[Z]),F=s.useRef(new Map),D=s.useCallback((function(e,t){if(!a[e])return!1;if(-1!==(0,l.fY)(b).indexOf(e))return!1;var n=v(b,e,t,i);return y(n),!0}),[a,b,i]);s.useImperativeHandle(t,(function(){return{getOpenedEditorNames:function(){return Z?E(Z):[]},toggleEditor:function(e,t){return!!a[e]&&(-1!==(0,l.fY)(b).indexOf(e)?(P(b,e),y(L(b)),!1):D(e,t))},collapseEditor:function(e){return!!a[e]&&(w(Z,e)>0&&F.current.set(e,w(Z,e)),!!Z&&(R(k(Z,e,0)),!0))},uncollapseEditor:function(e,t){return!!a[e]&&(0===w(Z,e)&&(!!Z&&(R(k(Z,e,F.current.get(e)||t)),!0)))}}}));var N=(0,u.N)((function(){d&&b&&d(S(b))}),2e3);s.useEffect((function(){c&&c(),N()}),[Z,c,N]);var _=s.useCallback((function(e){g.current||(p&&p(),g.current=!0),R(e)}),[g,p,R]),B=s.useCallback((function(){g.current&&(f&&f(),g.current=!1)}),[g,f]);return(0,j.jsx)(o.I18n,{children:function(e){var t=e.i18n;return(0,j.jsx)(l.wB,{className:C()({"mosaic-gd-theme":!0,"mosaic-blueprint-theme":!0,opaque:!h,"avoid-soft-keyboard":!0}),style:{position:"relative",width:"100%",height:"100%"},renderTile:function(e,n){var r=a[e];return void 0===r?(console.error("Trying to render un unknown editor: "+e),null):null===r?null:r.noTitleBar?r.renderEditor():(0,j.jsx)(l.h1,{path:n,title:t._(r.title),onDragStart:p,onDragEnd:f,toolbarControls:r.toolbarControls||A,renderPreview:O,children:r.renderEditor()})},value:Z,onChange:_,onRelease:B})}})}))},86578:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(1589)),a=n(29343),o={display:"flex",alignItems:"center",justifyContent:"center",flex:1,padding:10};t.Z=function(e){return(0,a.jsx)("div",{style:(0,r.Z)((0,r.Z)({},o),e.style),children:(0,a.jsx)(i.Z,{style:e.messageStyle,children:e.children})})}},68196:function(e,t,n){"use strict";n.d(t,{$:function(){return x}});var r=n(36600),i=(n(28381),n(89317)),a=n(61325),o=n(60022),s=n(10888),l=n(40243),c=n(4076),u=n(86278),d=n(36595),p=n(66789),f=n(1491),h=n(57244),g=n(29343),m=function(e){var t=e.helpPagePath,n=e.helpPageAnchor;return(0,g.jsx)(c.Z,{label:(0,g.jsx)(r.Trans,{id:"Read the doc"}),helpPagePath:t,anchor:n})},x=function(e){return(0,g.jsx)(l.sg,{alignItems:"center",children:(0,g.jsx)(i.Z,{style:{maxWidth:"480px",whiteSpace:"normal"},children:(0,g.jsxs)(l.sg,{children:[(0,g.jsx)(u.Z,{size:"block-title",align:"center",children:e.title}),(0,g.jsx)(u.Z,{align:"center",noMargin:!0,children:e.description}),(0,g.jsx)(l.hS,{}),(0,g.jsxs)(a.ak,{alignItems:"center",noMargin:!0,children:[(0,g.jsxs)(a.ep,{noMargin:!0,noResponsiveLandscape:!0,children:[e.secondaryActionLabel&&e.onSecondaryAction&&(0,g.jsx)(s.Z,{label:e.secondaryActionLabel,primary:!0,onClick:e.onSecondaryAction,disabled:!!e.isLoading,leftIcon:e.secondaryActionIcon}),e.actionBuildSplitMenuTemplate?(0,g.jsx)(h.Z,{label:e.actionLabel,primary:!0,onClick:e.onAction,disabled:!!e.isLoading,icon:e.isLoading?(0,g.jsx)(p.Z,{size:24}):e.actionIcon?e.actionIcon:(0,g.jsx)(f.Z,{}),id:e.actionButtonId,buildMenuTemplate:e.actionBuildSplitMenuTemplate}):(0,g.jsx)(o.Z,{label:e.actionLabel,primary:!0,onClick:e.onAction,disabled:!!e.isLoading,icon:e.isLoading?(0,g.jsx)(p.Z,{size:24}):e.actionIcon?e.actionIcon:(0,g.jsx)(f.Z,{}),id:e.actionButtonId})]}),e.tutorialId?(0,g.jsx)(d.Z,{tutorialId:e.tutorialId,label:(0,g.jsx)(r.Trans,{id:"Watch tutorial"}),renderIfNotFound:(0,g.jsx)(m,{helpPagePath:e.helpPagePath,helpPageAnchor:e.helpPageAnchor})}):(0,g.jsx)(m,{helpPagePath:e.helpPagePath,helpPageAnchor:e.helpPageAnchor})]})]})})})}},61651:function(e,t,n){"use strict";n.d(t,{Ap:function(){return Z},Z9:function(){return k}});var r=n(1413),i=n(36600),a=n(28381),o=n(27734),s=n(52975),l=n(41332),c=n(18930),u=n(75333),d=n(86278),p=n(40243),f=n(52578),h=n(48409),g=n(61325),m=n(38092),x=n(1589),v=n(95016),b=n(51598),C=n(23198),j=n(29343),y={errorMessage:{maxWidth:600,textAlign:"left",wordBreak:"break-word"}},Z=function(e){return e.startsWith("debugger")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Debugger"}),scope:"debugger"}:e.startsWith("start page")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Home page"}),scope:"start-page"}:e.startsWith("resources")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Resources"}),scope:"resources"}:e.startsWith("events functions extension")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Events functions extension"}),scope:"extension-editor"}:e.startsWith("layout events")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Events"}),scope:"scene-events"}:e.startsWith("layout")?{componentTitle:(0,j.jsx)(i.Trans,{id:"Scene"}),scope:"scene-editor"}:e.startsWith("external layout")?{componentTitle:(0,j.jsx)(i.Trans,{id:"External layout"}),scope:"external-layout-editor"}:e.startsWith("external events")?{componentTitle:(0,j.jsx)(i.Trans,{id:"External events"}),scope:"external-events-editor"}:{componentTitle:(0,j.jsx)(i.Trans,{id:"Editor"}),scope:"editor"}},k=function(e){var t=e.componentStack,n=e.error,r=e.componentTitle,a=e.uniqueErrorId,o=e.onClose,u=e.showOnTop,f=n.stack&&n.stack.includes(".wasm");return(0,j.jsx)(l.Z,{showOnTop:u,data:{errorBoundary:"true"},children:(0,j.jsxs)(g.ak,{children:[(0,j.jsxs)(p.x1,{justifyContent:"space-between",alignItems:"center",noMargin:!0,children:[(0,j.jsxs)(p.x1,{children:[(0,j.jsx)(s.Z,{fontSize:"large"}),(0,j.jsx)(p.LZ,{}),(0,j.jsx)(d.Z,{size:"block-title",children:f?(0,j.jsx)(i.Trans,{id:"A critical error occurred in the {componentTitle}.",values:{componentTitle:r}}):(0,j.jsx)(i.Trans,{id:"An error occurred in the {componentTitle}.",values:{componentTitle:r}})})]}),o&&(0,j.jsx)(b.Z,{onClick:o,size:"small",children:(0,j.jsx)(C.Z,{})})]}),(0,j.jsx)(c.Z,{}),(0,j.jsx)(p.x1,{children:(0,j.jsxs)(g.ak,{children:[(0,j.jsx)(m.Z,{kind:f?"error":"warning",children:(0,j.jsx)(i.Trans,{id:"Please <0>backup your game file</0> and save your game to ensure that you don't lose anything. You can try to reload this panel or restart GDevelop.",components:[(0,j.jsx)("b",{})]})}),(0,j.jsxs)(x.Z,{allowSelection:!0,children:["Unique Error ID for debugging: ",a]}),n&&n.stack&&(0,j.jsxs)(x.Z,{allowSelection:!0,style:y.errorMessage,children:[n.stack.slice(0,400),"..."]}),t&&(0,j.jsxs)(x.Z,{allowSelection:!0,style:y.errorMessage,children:[t.slice(0,300),"..."]})]})})]})})};t.ZP=function(e){var t=a.useRef((0,v.DO)());return(0,j.jsx)(o.ZP,{FallbackComponent:function(n){return(0,j.jsx)(k,(0,r.Z)((0,r.Z)({},n),{},{componentTitle:e.componentTitle,uniqueErrorId:t.current,onClose:e.onClose,showOnTop:e.showOnTop}))},onError:function(n,r){t.current=(0,v.DO)(),function(e,t,n,r){console.error("Error ".concat(t," caught by Boundary:"),e,n),(0,u.pl)("Error caught by error boundary","error-boundary_".concat(r),{error:e,uniqueErrorId:t,errorMessage:e.message||"",errorStack:e.stack||"",errorName:e.name||"",IDEVersion:(0,f.r1)(),IDEVersionWithHash:(0,f.Us)(),arch:(0,h.bj)(),platformName:(0,h.y8)(),systemVersion:(0,h.eP)(),userAgent:(0,h.ij)(),componentStack:n},"error-boundary-error")}(n,t.current,r,e.scope)},children:e.children})}},85076:function(e,t,n){"use strict";n.d(t,{G:function(){return d}});var r=n(36600),i=n(50057),a=n.n(i),o=n(1773),s=n(86278),l=n(10888),c=n(29343),u=a()("electron"),d=function(e){var t=e.onClose;return u?null:(0,c.jsx)(o.ZP,{title:(0,c.jsx)(r.Trans,{id:"An external editor is opened."}),cannotBeDismissed:!0,fullscreen:"never-even-on-mobile",open:!0,maxWidth:"sm",id:"external-editor-opened-dialog",actions:t?[(0,c.jsx)(l.Z,{label:(0,c.jsx)(r.Trans,{id:"Cancel"}),onClick:t},"close")]:null,children:(0,c.jsx)(s.Z,{children:(0,c.jsx)(r.Trans,{id:"Save your changes or close the external editor to continue."})})})}},10888:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(1413),i=n(4942),a=n(45987),o=n(28381),s=n(51535),l=n(40243),c="FlatButton_fullWidthButtonContainer__QinDo",u="FlatButton_buttonContainer__0zsEA",d="FlatButton_backgroundButtonContainer__ztpri",p="FlatButton_coloredButtonContainer__+CS0v",f="FlatButton_buttonContainerSuccess__g37Nb",h="FlatButton_buttonContainerDanger__dE6qs",g="FlatButton_buttonContainerPremium__1RxaU",m="FlatButton_buttonContainerAi__DUE5L",x=n(82954),v=n.n(x),b=n(29343),C=["label","primary","color","leftIcon","rightIcon","keyboardFocused","disabled","size","id","style","noBackground"],j=o.forwardRef((function(e,t){var n,o=e.label,x=e.primary,j=e.color,y=e.leftIcon,Z=e.rightIcon,k=e.keyboardFocused,w=e.disabled,T=e.size,S=e.id,P=e.style,I=e.noBackground,E=(0,a.Z)(e,C);return(0,b.jsx)("div",{className:v()((n={},(0,i.Z)(n,u,!0),(0,i.Z)(n,d,!I),(0,i.Z)(n,c,!!E.fullWidth),(0,i.Z)(n,p,!!j),(0,i.Z)(n,f,"success"===j),(0,i.Z)(n,h,"danger"===j),(0,i.Z)(n,g,"premium"===j),(0,i.Z)(n,m,"ai"===j),n)),style:P,children:(0,b.jsxs)(s.Z,(0,r.Z)((0,r.Z)({variant:"outlined",size:T||"small",color:x||"primary"===j?"secondary":"default",autoFocus:k,focusRipple:!0,disabled:w,id:S},E),{},{ref:t,children:[y,y&&o&&(0,b.jsx)(l.LZ,{}),o?(0,b.jsx)("span",{children:o}):null,Z&&o&&(0,b.jsx)(l.LZ,{}),Z]}))})}))},9383:function(e,t,n){"use strict";n(28381);var r=n(54168),i=n(89267),a=n(51535),o=n(40243),s=n(25638),l=n(29343),c=function(){throw new Error("This FlatButtonWithSplitMenu onClick should never be called")},u={mainButton:{flex:1},arrowDropDownButton:{minWidth:30,maxWidth:30,paddingLeft:0,paddingRight:0}};t.Z=function(e){var t=e.id,n=e.splitMenuButtonId,d=e.buildMenuTemplate,p=e.onClick,f=e.label,h=e.primary,g=e.icon,m=e.disabled,x=e.fullWidth;return(0,l.jsxs)(i.Z,{variant:"outlined",disableElevation:!0,color:h?"secondary":"default",disabled:m,size:"small",style:e.style,fullWidth:x,children:[(0,l.jsxs)(a.Z,{id:t,focusRipple:true,onClick:p,style:u.mainButton,children:[g,!!g&&!!f&&(0,l.jsx)(o.LZ,{}),f]}),(0,l.jsx)(r.Z,{passExtraProps:!0,element:(0,l.jsx)(a.Z,{id:n,onClick:c,focusRipple:true,style:u.arrowDropDownButton,children:(0,l.jsx)(s.Z,{})}),buildMenuTemplate:d})]})}},86567:function(e,t,n){"use strict";n(28381);var r=n(29343);t.Z=function(e){var t=e.onSubmit,n=e.autoComplete,i=void 0===n?"off":n,a=e.name,o=e.children,s=e.fullWidth;return(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t()},autoComplete:i,name:a,style:{width:s?"100%":void 0},children:[o,(0,r.jsx)("input",{type:"submit",value:"Submit",style:{display:"none"}})]})}},73298:function(e,t,n){"use strict";n.d(t,{y:function(){return a}});var r=n(59847),i=n.n(r),a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{size:40}).size,n=i()(e.trim().toLowerCase());return"https://www.gravatar.com/avatar/".concat(n,"?s=").concat(t,"&d=retro")}},40243:function(e,t,n){"use strict";n.d(t,{LZ:function(){return u},Qc:function(){return f},XW:function(){return o},hS:function(){return p},sg:function(){return l},x1:function(){return s}});var r=n(28381),i=n(6996),a=n(29343),o=8,s=function(e){return(0,a.jsx)("div",{id:e.id,style:{display:"flex",marginTop:e.noMargin?0:o,marginBottom:e.noMargin?0:o,alignItems:e.alignItems,justifyContent:e.justifyContent,flex:e.expand?1:void 0,overflow:e.overflow,minHeight:e.useFullHeight?"0":void 0,minWidth:0,flexShrink:e.neverShrink?0:void 0},children:e.children})},l=function(e){return(0,a.jsx)("div",{id:e.id,style:{display:"flex",marginLeft:e.noMargin?0:o,marginRight:e.noMargin?0:o,flexDirection:"column",alignItems:e.alignItems||"stretch",justifyContent:e.justifyContent,flex:e.expand?1:void 0,minHeight:e.useFullHeight?"0":void 0,minWidth:e.noOverflowParent?0:void 0},children:e.children})},c={width:o,height:o,flexShrink:0},u=r.memo((function(){return(0,a.jsx)("span",{style:c})})),d={width:24,height:24,flexShrink:0},p=r.memo((function(){return(0,a.jsx)("span",{style:d})})),f=function(e){var t=e.children,n=e.heights,r=(0,i.UQ)().windowSize,o="xlarge"===r?n.xlarge||n.large||n.medium||n.small:"large"===r?n.large||n.medium||n.small:"medium"===r&&n.medium||n.small;return(0,a.jsx)("div",{style:{display:"flex",height:o,alignItems:"center"},children:t})}},4076:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(42699)),a=n(2066),o=n(39949),s=n(6996),l=n(14932),c=n(86065),u=n(29343);t.Z=function(e){var t=(0,s.UQ)().isMobile;if(!e.helpPagePath)return null;var n=(0,o.vA)(e.helpPagePath,e.anchor);if(!n)return null;return t?(0,u.jsx)(l.Z,{size:"small",helpPagePath:e.helpPagePath}):(0,u.jsx)(i.Z,{onClick:function(){e.helpPagePath&&a.ZP.openExternalURL(n)},target:"_blank",label:e.label||(0,u.jsx)(r.Trans,{id:"Help"}),icon:(0,u.jsx)(c.Z,{})})}},14932:function(e,t,n){"use strict";n(28381);var r=n(51598),i=n(39949),a=n(2066),o=n(86065),s=n(29343);t.Z=function(e){var t=e.helpPagePath;return t?(0,s.jsx)(r.Z,{onClick:function(){return a.ZP.openExternalURL((0,i.vA)(t))},disabled:e.disabled,style:e.style,size:e.size,children:(0,s.jsx)(o.Z,{})}):null}},74394:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{width:"39",height:"40",viewBox:"0 0 39 40",fill:"none",children:[(0,o.jsx)("g",{clipPath:"url(#clip0_1247_1919)",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.1834 11.5444C29.4891 13.0111 30.9423 14.6434 32.1787 16.7728C33.6421 19.3072 34.3534 21.8642 34.3534 24.5902C34.3534 32.8115 27.6921 39.4999 19.5045 39.4999C11.3229 39.4999 4.66546 32.8213 4.65579 24.6083C4.40282 16.364 9.39071 11.7033 9.60338 11.5088C10.3125 10.86 11.4569 11.3239 11.5144 12.2835C11.515 12.2929 11.6073 13.5928 12.2475 15.0609C12.7417 16.1942 13.4126 17.109 14.2519 17.7975C13.9973 15.1227 14.204 12.6567 14.8708 10.4423C15.567 8.13015 16.7594 6.09423 18.4149 4.39126C21.2255 1.5 24.3943 0.58175 24.5278 0.544044C25.3715 0.306007 26.1577 1.06811 25.9464 1.9191C25.9336 1.97196 24.6396 7.48513 27.9492 11.2812C28.0267 11.3684 28.1048 11.4561 28.1834 11.5444ZM15.3449 21.3693C14.3616 21.3693 13.5645 22.0701 13.5645 22.9345C13.5645 23.799 14.3616 24.4997 15.3449 24.4997C16.3282 24.4997 17.1253 23.7989 17.1253 22.9345C17.1253 22.0701 16.3282 21.3693 15.3449 21.3693ZM15.0224 34.1895C15.8655 34.6342 16.9593 34.3939 17.4651 33.6526L24.5869 23.2182C25.0928 22.477 24.8194 21.5155 23.9762 21.0708C23.1331 20.6261 22.0393 20.8664 21.5334 21.6077L14.4117 32.0421C13.9058 32.7833 14.1792 33.7448 15.0224 34.1895ZM21.8731 32.3256C21.8731 33.19 22.6703 33.8907 23.6536 33.8907C24.6369 33.8907 25.434 33.1901 25.434 32.3256C25.434 31.4612 24.6369 30.7604 23.6536 30.7604C22.6703 30.7604 21.8731 31.4612 21.8731 32.3256Z",fill:"url(#paint0_linear_1247_1919)"})}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("linearGradient",{id:"paint0_linear_1247_1919",x1:"19.4999",y1:"39.4999",x2:"19.4999",y2:"0.499943",gradientUnits:"userSpaceOnUse",children:[(0,o.jsx)("stop",{stopColor:"#100C0B"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#541400"})]}),(0,o.jsx)("clipPath",{id:"clip0_1247_1919",children:(0,o.jsx)("rect",{width:"39",height:"39",fill:"white",transform:"translate(0 0.5)"})})]})]}))}))},51598:function(e,t,n){"use strict";var r=n(1413),i=n(45987),a=n(28381),o=n(65512),s=n(3781),l=n(36600),c=n(67412),u=n(84361),d=n(24910),p=n(69186),f=n(29343),h=["selected","tooltip","acceleratorString","color","style","disableHover"],g=a.forwardRef((function(e,t){var n=e.selected,g=e.tooltip,m=e.acceleratorString,x=e.color,v=e.style,b=e.disableHover,C=(0,i.Z)(e,h),j=function(e){var t=e.theme,n=e.selected,r=e.disableHover;return(0,p.Z)({root:{color:n?t.iconButton.selectedColor:void 0,"&:hover":r?{backgroundColor:"transparent"}:{}},label:{backgroundColor:n?t.iconButton.selectedBackgroundColor:void 0,borderRadius:n?4:void 0}})()}({theme:a.useContext(d.Z),selected:n,disableHover:b}),y=(0,f.jsx)(o.Z,(0,r.Z)((0,r.Z)({},C),{},{classes:j,style:v,color:n?"inherit":x||"secondary",ref:t}));return g&&!e.disabled?(0,f.jsx)(l.I18n,{children:function(e){var t=e.i18n;return(0,f.jsx)(s.ZP,{title:t._(g)+(m?" ("+(0,c.Q)(m)+")":""),placement:"bottom",enterDelay:u.K,children:y})}}):y}));t.Z=g},33133:function(e,t,n){"use strict";n.d(t,{b:function(){return o},q:function(){return l}});var r=n(1413),i=(n(28381),n(23818)),a=n(29343),o={background:"linear-gradient(45deg, #FFFFFF33, #FFFFFF)",borderRadius:4},s={iconBackground:{display:"inline",textAlign:"center"},icon:o},l=function(e){var t=e.src,n=e.alt,o=e.size,l=o>24?4:2;return(0,a.jsx)("span",{style:s.iconBackground,children:(0,a.jsx)(i.W,{style:(0,r.Z)((0,r.Z)({},s.icon),{},{padding:l,width:o-2*l,height:o-2*l}),src:t,alt:n})})}},73693:function(e,t,n){"use strict";n(28381);var r=n(69186),i=n(19345),a=n(62802),o=n(66733),s=n(7172),l=n(3781),c=n(29343),u=(0,r.Z)({root:{cursor:"default"}}),d=(0,r.Z)({root:{display:"block"}}),p=(0,r.Z)({root:{padding:3}});t.Z=function(e){var t=e.id,n=e.onCheck,r=e.disabled,f=e.checked,h=e.label,g=e.uncheckedIcon,m=e.checkedIcon,x=e.tooltipOrHelperText,v=e.paddingSize,b=u(),C=d(),j=p(),y=(0,c.jsx)(s.Z,{id:t,disabled:r,checked:f,onChange:n?function(e){return n(e,e.target.checked)}:void 0,classes:"small"===v?j:null,icon:g,checkedIcon:m,color:"secondary"});return h?(0,c.jsxs)(a.Z,{classes:C,children:[(0,c.jsx)(i.Z,{control:y,label:h,classes:b}),x&&(0,c.jsx)(o.Z,{children:x})]}):x&&!r?(0,c.jsx)(l.ZP,{title:x,children:y}):y}},65111:function(e,t,n){"use strict";n.d(t,{DM:function(){return l},Fc:function(){return s},W$:function(){return r},Zq:function(){return a},_x:function(){return o},bo:function(){return u},ph:function(){return i},xj:function(){return c}});var r=function(e){return"Escape"===e.key},i=function(e){return"Enter"===e.key&&!e.shiftKey},a=function(e){return e.shiftKey&&"Enter"===e.key},o=function(e){return"Enter"===e.key||" "===e.key},s=function(e){return(e.metaKey||e.ctrlKey)&&"Enter"===e.key},l=function(e){return e.metaKey||e.ctrlKey},c=function(e){return"Tab"===e.key&&!e.shiftKey},u=function(e){return"Tab"===e.key&&e.shiftKey}},86268:function(e,t,n){"use strict";n.d(t,{KR:function(){return s},ZP:function(){return l},rA:function(){return o}});var r=n(15671),i=n(43144),a=n(48409),o=5,s=1,l=function(){function e(t){var n=this,i=t.isActive,a=t.shortcutCallbacks;(0,r.Z)(this,e),this._shiftPressed=!1,this._ctrlPressed=!1,this._altPressed=!1,this._metaPressed=!1,this._mouseMidButtonPressed=!1,this._spacePressed=!1,this.resetModifiers=function(){n._metaPressed=!1,n._altPressed=!1,n._ctrlPressed=!1,n._shiftPressed=!1,n._setMouseMidButtonPressed(!1),n._setSpacePressed(!1)},this._updateModifiersFromEvent=function(e){var t=n._metaPressed!==e.metaKey||n._altPressed!==e.altKey||n._ctrlPressed!==e.ctrlKey||n._shiftPressed!==e.shiftKey;return n._metaPressed=e.metaKey,n._altPressed=e.altKey,n._ctrlPressed=e.ctrlKey,n._shiftPressed=e.shiftKey,t},this._updateSpecialKeysStatus=function(e,t){32===e.which&&(n._shortcutCallbacks.onToggleGrabbingTool&&(e.preventDefault(),e.stopPropagation()),n._setSpacePressed(t))},this._isControlOrCmdPressed=function(){return n._metaPressed||n._ctrlPressed},this.onMouseDown=function(e){e.button===s?n._setMouseMidButtonPressed(!0):n._setMouseMidButtonPressed(!1)},this.onMouseUp=function(e){e.button===s&&n._setMouseMidButtonPressed(!1)},this.onDragOver=function(e){n._updateModifiersFromEvent(e)},this.onKeyUp=function(e){n._updateModifiersFromEvent(e),n._updateSpecialKeysStatus(e,!1)},this.onKeyDown=function(e){if(n._updateModifiersFromEvent(e),!n._isActive||n._isActive()){if(!e.target||!e.target.closest('textarea, input, [contenteditable="true"]')){n._updateSpecialKeysStatus(e,!0);var t=n._shortcutCallbacks,r=t.onDelete,i=t.onMove,a=t.onCopy,o=t.onCut,s=t.onPaste,l=t.onDuplicate,c=t.onUndo,u=t.onRedo,d=t.onSearch,p=t.onZoomOut,f=t.onZoomIn,h=t.onEscape,g=t.onShift1,m=t.onShift2,x=t.onShift3,v=t.onRename;i&&(38===e.which?(e.preventDefault(),n._shiftPressed?i(0,-5):i(0,-1)):40===e.which?(e.preventDefault(),n._shiftPressed?i(0,5):i(0,1)):37===e.which?(e.preventDefault(),n._shiftPressed?i(-5,0):i(-1,0)):39===e.which&&(e.preventDefault(),n._shiftPressed?i(5,0):i(1,0))),!r||8!==e.which&&46!==e.which||(e.preventDefault(),r()),v&&113===e.which&&(e.preventDefault(),v()),a&&n._isControlOrCmdPressed()&&67===e.which&&(e.preventDefault(),a()),o&&n._isControlOrCmdPressed()&&88===e.which&&(e.preventDefault(),o()),s&&n._isControlOrCmdPressed()&&86===e.which&&(e.preventDefault(),s()),l&&n._isControlOrCmdPressed()&&68===e.which&&(e.preventDefault(),l()),(c||u)&&n._isControlOrCmdPressed()&&90===e.which&&(e.preventDefault(),e.shiftKey?u&&u():c&&c()),u&&n._isControlOrCmdPressed()&&89===e.which&&(e.preventDefault(),u()),d&&n._isControlOrCmdPressed()&&70===e.which&&(e.preventDefault(),d()),h&&27===e.which&&(e.preventDefault(),h()),p&&n._isControlOrCmdPressed()&&189===e.which&&(e.preventDefault(),p(e)),p&&109===e.which&&(e.preventDefault(),p(e)),f&&n._isControlOrCmdPressed()&&187===e.which&&(e.preventDefault(),f(e)),f&&107===e.which&&(e.preventDefault(),f(e)),g&&n._shiftPressed&&(49===e.which||97===e.which)&&(e.preventDefault(),g()),m&&n._shiftPressed&&(50===e.which||98===e.which)&&(e.preventDefault(),m()),x&&n._shiftPressed&&(51===e.which||99===e.which)&&(e.preventDefault(),x())}}},this._shortcutCallbacks=a,this._isActive=i}return(0,i.Z)(e,[{key:"setShortcutCallback",value:function(e,t){this._shortcutCallbacks[e]=t}},{key:"shouldCloneInstances",value:function(){return this._isControlOrCmdPressed()}},{key:"shouldMultiSelect",value:function(){return this._shiftPressed}},{key:"shouldFollowAxis",value:function(){return this._shiftPressed}},{key:"shouldStartRectangleSelectionInsteadOfSelecting",value:function(){return this._shiftPressed}},{key:"shouldNotSnapToGrid",value:function(){return this._altPressed}},{key:"shouldResizeProportionally",value:function(){return this._shiftPressed}},{key:"shouldScrollHorizontally",value:function(){return this._altPressed}},{key:"shouldMoveView",value:function(){return this._spacePressed||this._mouseMidButtonPressed}},{key:"_setSpacePressed",value:function(e){var t=this.shouldMoveView();this._spacePressed=e,this._callOnToggleGrabbingToolIfNeeded(t)}},{key:"_setMouseMidButtonPressed",value:function(e){var t=this.shouldMoveView();this._mouseMidButtonPressed=e,this._callOnToggleGrabbingToolIfNeeded(t)}},{key:"_callOnToggleGrabbingToolIfNeeded",value:function(e){var t=this.shouldMoveView();if(t!==e){var n=this._shortcutCallbacks.onToggleGrabbingTool;n&&n(t)}}},{key:"shouldZoom",value:function(e){return!(!e.ctrlKey&&!e.metaKey)||((0,a.z1)()?this._isControlOrCmdPressed():!this._isControlOrCmdPressed()&&!this._altPressed&&!this._shiftPressed)}},{key:"shouldIgnoreDoubleClick",value:function(){return this._metaPressed||this._altPressed||this._ctrlPressed||this._shiftPressed}}]),e}()},61325:function(e,t,n){"use strict";n.d(t,{ad:function(){return u},ak:function(){return f},ep:function(){return p},pJ:function(){return d}});var r=n(1413),i=n(28381),a=n(40243),o=n(6996),s=n(29343),l={flexShrink:0},c={filledTextFieldWithLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:15,marginLeft:8}),filledTextFieldWithoutLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:6,marginLeft:8}),standardTextFieldWithLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:17,marginLeft:8}),standardTextFieldWithoutLabelRightButtonMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:0,marginLeft:8}),textFieldOnMobileMargins:(0,r.Z)((0,r.Z)({},l),{},{marginTop:0,marginLeft:0})},u=function(e){var t=e.margin,n=e.noFloatingLabelText,r=e.renderTextField,i=e.renderButton,a=(0,o.UQ)(),l=a.isMobile,u=a.isLandscape;return(0,s.jsxs)(p,{alignItems:"flex-start",expand:!0,noMargin:!0,noResponsiveLandscape:!0,children:[r(),i(l&&!u?c.textFieldOnMobileMargins:"none"===t?n?c.standardTextFieldWithoutLabelRightButtonMargins:c.standardTextFieldWithLabelRightButtonMargins:n?c.filledTextFieldWithoutLabelRightButtonMargins:c.filledTextFieldWithLabelRightButtonMargins)]})},d=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,o=e.expand,l=e.noMargin,c=e.children,u=e.useLargeSpacer,d=e.overflow,p=e.neverShrink,f=!0;return(0,s.jsx)(a.x1,{id:t,alignItems:n,justifyContent:r,expand:o,noMargin:l,overflow:d,neverShrink:p,children:i.Children.map(c,(function(e,t){if(!e)return null;var n=!f;return f=!1,(0,s.jsxs)(i.Fragment,{children:[n&&(u?(0,s.jsx)(a.hS,{}):(0,s.jsx)(a.LZ,{})),e]})}))})},p=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,i=e.expand,a=e.noMargin,l=e.noColumnMargin,c=e.forceMobileLayout,u=e.noOverflowParent,p=e.noResponsiveLandscape,h=e.useLargeSpacer,g=e.children,m=(0,o.UQ)(),x=m.isMobile,v=m.isLandscape;return(c||x)&&!(p&&v)?(0,s.jsx)(f,{id:t,noMargin:a||l,expand:!0,useLargeSpacer:h,noOverflowParent:u,children:g}):(0,s.jsx)(d,{id:t,alignItems:n,justifyContent:r,expand:i,noMargin:a,useLargeSpacer:h,children:g})},f=function(e){var t=e.id,n=e.alignItems,r=e.justifyContent,o=e.expand,l=e.noMargin,c=e.children,u=e.noOverflowParent,d=e.useFullHeight,p=e.useLargeSpacer,f=!0;return(0,s.jsx)(a.sg,{id:t,alignItems:n,justifyContent:r,expand:o,noMargin:l,noOverflowParent:u,useFullHeight:d,children:i.Children.map(c,(function(e,t){if(!e)return null;var n=!f;return f=!1,(0,s.jsxs)(i.Fragment,{children:[n&&(p?(0,s.jsx)(a.hS,{}):(0,s.jsx)(a.LZ,{})),e]})}))})}},63854:function(e,t,n){"use strict";n(28381);var r=n(66789),i=n(29343),a={container:{flexShrink:0},progress:{marginRight:8,verticalAlign:"middle"}};t.Z=function(e){var t=e.children,n=e.isLoading,o=e.reserveSpace;return(0,i.jsxs)("span",{style:a.container,children:[(n||o)&&(0,i.jsx)(r.Z,{size:18,style:a.progress,variant:n?"indeterminate":"determinate"}),t]})}},64480:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(63307),o=n(24910),s=n(69186),l=n(29343);t.Z=function(e){var t=i.useContext(o.Z),n=function(e,t){return(0,s.Z)({colorSecondary:{backgroundColor:t.paper.backgroundColor.light},barColorSecondary:{backgroundColor:"success"===e?t.statusIndicator.success:t.palette.secondary}})()}(e.color,t);return(0,l.jsx)(a.Z,{classes:n,color:"secondary",style:(0,r.Z)({flex:1},e.style),variant:e.variant,value:e.value})}},96591:function(e,t,n){"use strict";var r=n(28381),i=n(38742),a=n(24910),o=n(69186),s=n(29343);t.Z=function(e){var t,n,l,c=r.useContext(a.Z),u=(t=c,n=e.color||"primary",l=!!e.disabled,(0,o.Z)({root:{color:"inherit"===n?"inherit":"primary"===n?t.link.color.default:void 0,textDecoration:"underline","&:hover":{color:"primary"!==n||l?void 0:t.link.color.hover,cursor:l?"default":"pointer"},"&:focus":{color:"primary"!==n||l?void 0:t.link.color.hover}}})());return(0,s.jsx)(i.Z,{color:"secondary",href:e.href,onClick:function(t){t.preventDefault(),e.disabled||e.onClick()},classes:u,children:e.children})}},15169:function(e,t,n){"use strict";n.d(t,{HC:function(){return M},Sv:function(){return P},aV:function(){return L},xD:function(){return S}});var r=n(1413),i=n(29439),a=n(28381),o=n(69186),s=n(67674),l=n(71944),c=n(33620),u=n(81666),d=n(99415),p=n(61701),f=n(65512),h=n(54168),g=n(3781),m=n(16792),x=n(39631),v=n(87622),b=n(61804),C=n(44634),j=n(29324),y=n(25638),Z=n(44439),k=n(19210),w=n(29343),T=!0,S=32,P=29,I={listItemText:{margin:"1px 0",wordBreak:"break-word"},listWithGap:{display:"flex",alignItems:"flex-start",gap:10,flexDirection:"column"},noLeftPaddingListItem:{paddingLeft:0},dot:{height:10,width:10,marginLeft:10,borderRadius:5,flexShrink:0}},E=(0,o.Z)((function(e){return(0,s.Z)({root:{color:e.palette.text.secondary}})})),M=a.forwardRef((function(e,t){var n=a.useState(!!e.initiallyOpen),o=(0,i.Z)(n,2),s=o[0],S=o[1],P=a.useRef(null),M=E(),L=a.useCallback((function(){P.current&&P.current.open()}),[P]),A=(0,x.i)(L),O=function(){return e.displayReloadButton?(0,w.jsx)(p.Z,{children:(0,w.jsx)(g.ZP,{title:e.reloadButtonTooltip,children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"reload",onClick:e.onReload,children:(0,w.jsx)(Z.Z,{})})})}):e.buildMenuTemplate?e.displayMenuButton?(0,w.jsx)(p.Z,{children:(0,w.jsx)(h.Z,{ref:P,element:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"menu",children:(0,w.jsx)(b.Z,{style:{color:e.rightIconColor}})}),buildMenuTemplate:e.buildMenuTemplate})}):(0,w.jsx)(h.Z,{ref:P,element:(0,w.jsx)("div",{}),buildMenuTemplate:e.buildMenuTemplate}):e.displayLinkButton?(0,w.jsx)(p.Z,{children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"open link",onClick:e.onOpenLink,children:(0,w.jsx)(C.Z,{style:{color:e.rightIconColor}})})}):e.displayRemoveButton?(0,w.jsx)(p.Z,{children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"remove",onClick:e.onRemove,children:(0,w.jsx)(k.Z,{style:{color:e.rightIconColor}})})}):e.displayDot?(0,w.jsx)("span",{style:(0,r.Z)((0,r.Z)({},I.dot),{},{backgroundColor:e.dotColor})}):null},R=e.noPadding?I.noLeftPaddingListItem:void 0,F=e.renderNestedItems;if(F){var D=void 0===e.open?s:e.open,N=function(){S(!D),e.onClick&&e.onClick()};return(0,w.jsxs)(a.Fragment,{children:[(0,w.jsxs)(c.Z,(0,r.Z)((0,r.Z)({button:!e.disableButtonBehaviorForParentItem,dense:T,disableRipple:!0,onClick:N,disabled:e.disabled,style:(0,r.Z)((0,r.Z)({},R),e.style),ref:t,id:e.id},(0,m.Y)(e.data)),{},{children:[e.leftIcon&&(0,w.jsx)(u.Z,{children:e.leftIcon}),(0,w.jsx)(d.Z,{style:I.listItemText,primary:e.primaryText,secondary:e.secondaryText,className:e.disableAutoTranslate?"notranslate":""}),e.autoGenerateNestedIndicator?D?(0,w.jsx)(p.Z,{children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"collapse",onClick:N,children:(0,w.jsx)(j.Z,{})})}):(0,w.jsx)(p.Z,{children:(0,w.jsx)(f.Z,{size:"small",edge:"end","aria-label":"expand",onClick:N,children:(0,w.jsx)(y.Z,{})})}):null,O()]})),(0,w.jsx)(v.Z,{in:D,timeout:"auto",unmountOnExit:!0,children:(0,w.jsx)(l.Z,{component:"div",disablePadding:!0,style:(0,r.Z)({paddingLeft:16},e.nestedListStyle),dense:T,children:F()})})]})}return(0,w.jsxs)(c.Z,(0,r.Z)((0,r.Z)((0,r.Z)({button:!0,dense:T,disableRipple:!0,ContainerComponent:"div",onClick:e.onClick,onDoubleClick:e.onDoubleClick,disabled:e.disabled,selected:e.selected,style:(0,r.Z)((0,r.Z)({},R),e.style),onContextMenu:e.buildMenuTemplate?L:void 0},A),{},{alignItems:2===e.secondaryTextLines?"flex-start":void 0,ref:t,id:e.id},(0,m.Y)(e.data)),{},{children:[e.leftIcon&&(0,w.jsx)(u.Z,{classes:e.isGreyed?M:void 0,style:{marginTop:0},children:e.leftIcon}),(0,w.jsx)(d.Z,{classes:e.isGreyed?M:void 0,style:I.listItemText,primary:e.primaryText,secondary:e.secondaryText,secondaryTypographyProps:(0,r.Z)({variant:"body-small"===e.secondaryTextSize?"caption":"body1"},e.isGreyed?{color:"inherit"}:void 0),primaryTypographyProps:e.isGreyed?{color:"inherit"}:void 0,className:e.disableAutoTranslate?"notranslate":""}),O()]}))})),L=function(e){var t=(0,r.Z)({},e.style);return e.useGap&&(t=(0,r.Z)((0,r.Z)({},t),I.listWithGap)),(0,w.jsx)(l.Z,{style:t,dense:T,children:e.children})}},74044:function(e,t,n){"use strict";var r=n(28381),i=n(23818),a=n(24910),o=n(29343);function s(e){var t=r.useContext(a.Z),n=t.palette.type,s=e.src,l=e.tooltip,c=e.disabled,u=e.isGDevelopIcon,d=e.useExactIconSize,p=e.brightness,f=void 0!==e.iconWidth?e.iconWidth:e.iconSize,h=void 0!==e.iconHeight?e.iconHeight:e.iconSize,g=f>40?16:0,m=s.startsWith("data:image/svg+xml")||s.includes("_black"),x="dark"===n&&m,v=void 0;null!=p&&Number.isFinite(p)?v="grayscale(1) invert(1) brightness(".concat(p,")"):x?v="grayscale(1) invert(1)":u&&!m&&(v=c?"grayscale(100%)":t.gdevelopIconsCSSFilter);var b={maxWidth:d?void 0:f,maxHeight:d?void 0:h,width:d?f:void 0,height:d?h:void 0,verticalAlign:"middle",filter:v};return(0,o.jsx)("div",{style:{width:f,height:h,lineHeight:"".concat(h,"px"),textAlign:"center",paddingRight:g},children:u?(0,o.jsx)("img",{title:l,alt:l,src:s,style:b}):(0,o.jsx)(i.W,{title:l,alt:l,src:s,style:b})})}var l=r.memo(s);t.Z=l},934:function(e,t,n){"use strict";var r=n(29439),i=n(28381),a=n(36600),o=n(37477),s=n(97865),l=n(86278),c=n(66789),u=n(40243),d=n(29343),p={dialogContent:{padding:10,overflow:"hidden",display:"flex",flexDirection:"row"}};var f={enter:0,exit:150};t.Z=function(e){var t=e.progress,n=e.message,h=e.showImmediately,g=function(e,t){var n=i.useState(!1),a=(0,r.Z)(n,2),o=a[0],s=a[1],l=i.useRef(null);return i.useEffect((function(){return e?(l.current&&clearTimeout(l.current),l.current=setTimeout((function(){s(!0),l.current=null}),t)):(s(!1),l.current&&(clearTimeout(l.current),l.current=null)),function(){l.current&&clearTimeout(l.current)}}),[e,t]),o}(!!e.showAfterDelay,150),m=null===t||void 0===t;return(0,d.jsx)(a.I18n,{children:function(e){var r=e.i18n;return(0,d.jsx)(o.Z,{open:h||g,transitionDuration:f,children:(0,d.jsx)(s.Z,{style:p.dialogContent,children:(0,d.jsx)("div",{style:{width:n?250:void 0},children:(0,d.jsxs)(u.sg,{noMargin:!0,alignItems:"center",expand:!0,children:[(0,d.jsx)(c.Z,{size:50,disableShrink:m,value:m?void 0:t,variant:m?"indeterminate":"determinate"}),n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.LZ,{}),(0,d.jsx)(l.Z,{noMargin:!0,align:"center",children:r._(n)})]})]})})})})}})}},73818:function(e,t,n){"use strict";var r=n(1413),i=n(74165),a=n(15861),o=n(29439),s=n(36600),l=n(28381),c=n(29277),u=n(50057),d=n.n(u),p=n(10888),f=n(29343),h=d()("electron"),g=d()("@electron/remote"),m=g?g.dialog:null,x={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}};t.Z=function(e){var t=e.type,n=e.value,u=e.onChange,d=e.defaultPath,v=e.fullWidth,b=l.useState(n),C=(0,o.Z)(b,2),j=C[0],y=C[1],Z=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.title,r=t.message,m&&h){e.next=3;break}return e.abrupt("return");case 3:return a=g.getCurrentWindow(),e.next=6,m.showOpenDialog(a,{title:n,properties:["openDirectory","createDirectory"],message:r,defaultPath:d});case 6:if(o=e.sent,(s=o.filePaths)&&s.length){e.next=10;break}return e.abrupt("return");case 10:l=s[0],u(l),y(l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){u(j)};return(0,f.jsx)(s.I18n,{children:function(e){var n=function(e){return"export"===t?{title:e._({id:"Choose an export folder"}),message:e._({id:"Choose where to export the game"})}:"default-workspace"===t?{title:e._({id:"Choose a workspace folder"}),message:e._({id:"Choose where to create your projects"})}:{title:e._({id:"Choose a folder for the new game"}),message:e._({id:"Choose where to create the game"})}}(e.i18n);return(0,f.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},x.container),{},{width:v?"100%":void 0}),children:[(0,f.jsx)(c.ZP,{margin:"dense",style:x.textField,type:"text",hintText:n.title,value:j,onChange:function(e,t){return y(t)},onBlur:k}),(0,f.jsx)(p.Z,{label:(0,f.jsx)(s.Trans,{id:"Choose folder"}),style:x.button,onClick:function(){return Z(n)}})]})}})}},32832:function(e,t,n){"use strict";n.d(t,{r:function(){return h}});var r=n(1413),i=n(45987),a=n(28381),o=n(15092),s=n(62407),l=n(36600),c=n(82954),u=n.n(c),d=n(2066),p=n(29343),f=["node"],h=function(e){var t=a.useMemo((function(){return t=e.isStandaloneText||!1,n=e.allowParagraphs||!1,a=e.withTextEllipsis||!1,{a:function(e){return e.href?(0,p.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",onClick:function(t){t.preventDefault(),d.ZP.openExternalURL(e.href)},children:e.children}):e.children},p:function(e){var r=e.children&&e.children[0]&&"\t"===e.children[0][0];return!a||1===e.node.position.start.line&&1===e.node.position.start.column&&0===e.node.position.start.offset?t||n?r?(0,p.jsx)("ul",{className:"generated-list-item",children:(0,p.jsx)("li",{children:(0,p.jsx)("p",{children:e.children})})}):(0,p.jsx)("p",{children:e.children}):e.children:null},img:function(e){e.node;var t=(0,i.Z)(e,f);return(0,p.jsx)("img",(0,r.Z)({style:{display:"flex"}},t))}};var t,n,a}),[e.isStandaloneText,e.allowParagraphs,e.withTextEllipsis]),n=(0,p.jsx)(l.I18n,{children:function(n){var r=n.i18n;return(0,p.jsx)(o.D,{components:t,remarkPlugins:[s.Z],children:e.translatableSource?r._(e.translatableSource):e.source})}}),c=u()({"gd-markdown":!0,"standalone-text-container":e.isStandaloneText,"text-ellipsis":e.withTextEllipsis});return e.isStandaloneText?(0,p.jsx)("div",{className:c,children:n}):(0,p.jsx)("span",{className:c,children:n})}},64207:function(e,t,n){"use strict";n.d(t,{BI:function(){return r},EU:function(){return a},NL:function(){return s},Rz:function(){return l},h$:function(){return u},le:function(){return c},yP:function(){return o},zL:function(){return i}});var r=1501,i="allow-rendering-instances",a=function(){var e=document.querySelector('body > div[role="presentation"].MuiDialog-root');return!!e&&!e.classList.contains(i)},o=function(e,t){return!("DIV"!==e.tagName||"presentation"!==e.getAttribute("role"))&&(!t||!t.isVisible||!e.getAttribute("aria-hidden"))},s=function(e){var t=e.attributes.getNamedItem("type");return t&&"checkbox"===t.value&&"indeterminate"in e.dataset},l=function(e){var t=e.parentElement;if(t){var n=t.parentElement;return!!n&&n.classList.contains("Mui-checked")}return!0},c=function(e){try{return o(e[e.length-5],{isVisible:!0})}catch(t){return console.error("An error occurred when determining if path ".concat(e&&e.join?e.join(" > "):"[not serializable]"," leads to a dialog"),t),!1}},u=function(e){return e.classList.contains("MuiInputBase-root")}},32628:function(e,t,n){"use strict";n.d(t,{Z:function(){return U}});var r=n(1413),i=n(29439),a=n(28381),o=n(36600),s=n(48556),l=n(89765),c=n(15671),u=n(43144),d=n(50057),p=n.n(d),f=p()("electron"),h=p()("@electron/remote"),g=function(){function e(){(0,c.Z)(this,e)}return(0,u.Z)(e,[{key:"buildFromTemplate",value:function(e){this.menuTemplate=e}},{key:"showMenu",value:function(e){if(f){var t=h.Menu,n=h.getCurrentWindow();this.menu=t.buildFromTemplate(this.menuTemplate),this.menu.popup({window:n,x:Math.round(e.left),y:Math.round(e.top+e.height),async:!0})}}},{key:"getMenuProps",value:function(){return{open:!1}}}]),e}(),m=n(74165),x=n(15861),v=n(58369),b=n(59239),C=n(67413),j=n(81666),y=n(99415),Z=n(18930),k=n(17358),w=n(67412),T=n(84900),S=n(35213),P=n(60494),I=n(29343),E=p()("electron"),M=(0,k.Z)({backdropRootForMouse:{pointerEvents:"none"}}),L={divider:{marginLeft:16,marginRight:16},labelWithAccelerator:{width:"100%",display:"flex",justifyContent:"space-between"},accelerator:{opacity:.65,marginLeft:16},menuItemWithSubMenu:{height:32,justifyContent:"space-between"},menuItem:{height:32,paddingLeft:16,paddingRight:16}},A=function(e){var t=e.item,n=e.buildFromTemplate,r=M(),o=a.useState(null),c=(0,i.Z)(o,2),u=c[0],d=c[1],p=a.useRef(!1),f=a.useState(null),h=(0,i.Z)(f,2),g=h[0],m=h[1];function x(){m(null)}function b(e){"mouse"===e.pointerType&&(p.current=!1,setTimeout((function(){p.current||x()}),75))}var C="touch"===(0,S.BF)();return(0,I.jsxs)(a.Fragment,{children:[(0,I.jsxs)(v.Z,{dense:!!E||!C,style:L.menuItemWithSubMenu,disabled:!1===t.enabled,onClick:function(e){!1!==t.enabled&&(g||m(e.currentTarget))},onPointerOver:function(e){!1!==t.enabled&&(d("mouse"===e.pointerType?"mouse":"other"),"mouse"===e.pointerType&&(g||m(e.currentTarget)))},onPointerLeave:b,children:[t.label,(0,I.jsx)(T.Z,{})]},t.label),(0,I.jsx)(s.Z,{open:!!g,anchorEl:g,onClose:x,TransitionComponent:l.Z,MenuListProps:{onPointerEnter:function(){p.current=!0},onPointerLeave:b,style:{pointerEvents:"auto"}},style:{zIndex:P.d},getContentAnchorEl:null,anchorOrigin:{horizontal:"right",vertical:"top"},PopoverClasses:{root:"mouse"===u?r.backdropRootForMouse:void 0},children:n(t.submenu)})]})},O=function(){function e(t){var n=t.onClose;(0,c.Z)(this,e),this._onClose=n}return(0,u.Z)(e,[{key:"buildFromTemplate",value:function(e,t){var n=this,r="touch"===(0,S.BF)();return e.map((function(e,i){if(!1===e.visible)return null;var a=e.accelerator?(0,w.Q)(e.accelerator):void 0;return"separator"===e.type?(0,I.jsx)(Z.Z,{style:L.divider},"separator"+i):"checkbox"===e.type?(0,I.jsxs)(v.Z,{dense:!!E||!r,checked:e.checked,disabled:!1===e.enabled,onClick:function(){var r=(0,x.Z)((0,m.Z)().mark((function r(i){return(0,m.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.stopPropagation(),!1!==e.enabled){r.next=3;break}return r.abrupt("return");case 3:if(!e.click){r.next=9;break}return r.next=6,e.click();case 6:if("checkbox"!==e.type){r.next=9;break}return t&&t(),r.abrupt("return");case 9:n._onClose();case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),style:L.menuItem,children:[(0,I.jsx)(j.Z,{children:e.checked?(0,I.jsx)(b.Z,{fontSize:"small"}):(0,I.jsx)(C.Z,{fontSize:"small"})}),(0,I.jsx)(y.Z,{primary:e.label})]},"checkbox"+e.label):e.submenu?(0,I.jsx)(A,{item:e,buildFromTemplate:function(e){return n.buildFromTemplate(e,t)}},"submenu"+e.label):(0,I.jsx)(v.Z,{dense:!!E||!r,disabled:!1===e.enabled,onClick:function(t){t.stopPropagation(),!1!==e.enabled&&e.click&&(e.click(),n._onClose())},style:L.menuItem,children:a?(0,I.jsxs)("div",{style:L.labelWithAccelerator,children:[(0,I.jsx)("span",{children:e.label}),(0,I.jsx)("span",{style:L.accelerator,children:a})]}):e.label},"item"+e.label)})).filter(Boolean)}},{key:"showMenu",value:function(){}},{key:"getMenuProps",value:function(){return{}}}]),e}(),R=n(38501),F=n(82054),D=n(48409),N=p()("electron"),_=a.forwardRef((function(e,t){var n=a.useState([0,0]),o=(0,i.Z)(n,2),c=o[0],u=o[1],d=a.useState(!1),p=(0,i.Z)(d,2),f=p[0],h=p[1],g=a.useState({}),m=(0,i.Z)(g,2),x=m[0],v=m[1],b=(0,R.Z)(),C=new O({onClose:function(){return h(!1)}}),j=function(e,t,n){u([e,t]),v(n),h(!0)};if(a.useImperativeHandle(t,(function(){return{open:j}})),!f)return null;if((0,D.tq)()){var y=e.buildMenuTemplate(e.i18n,x);return y.length?(0,I.jsx)(F.ZP,{anchor:"bottom",open:!0,onClose:function(){return h(!1)},transitionDuration:200,PaperProps:{style:{animation:"swipe-up-ending 0.2s ease-out",paddingTop:4,paddingBottom:18,maxWidth:600,margin:"auto",maxHeight:"80vh"}},style:{zIndex:P.d},children:C.buildFromTemplate(y,b)}):(h(!1),null)}return(0,I.jsx)(s.Z,(0,r.Z)((0,r.Z)({open:!0,anchorPosition:{left:c[0],top:c[1]},style:{zIndex:P.d},anchorReference:"anchorPosition",onClose:function(e,t){"backdropClick"===t&&e.stopPropagation(),h(!1)},TransitionComponent:l.Z},C.getMenuProps()),{},{children:C.buildFromTemplate(e.buildMenuTemplate(e.i18n,x),b)}))})),B=N?a.forwardRef((function(e,t){var n=new g,r=function(t,r,i){n.buildFromTemplate(e.buildMenuTemplate(e.i18n,i)),n.showMenu({left:t||0,top:r||0,width:0,height:0})};return a.useImperativeHandle(t,(function(){return{open:r}})),null})):_,U=a.forwardRef((function(e,t){var n=a.useRef(null);return a.useImperativeHandle(t,(function(){return{open:function(e,t,r){n.current&&n.current.open(e,t,r)}}})),(0,I.jsx)(o.I18n,{children:function(t){var i=t.i18n;return(0,I.jsx)(B,(0,r.Z)((0,r.Z)({},e),{},{i18n:i,ref:n}))}})}))},54168:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(1413),i=n(45987),a=n(15671),o=n(43144),s=n(97326),l=n(60136),c=n(29388),u=n(28381),d=n(1412),p=n(32628),f=n(29343),h=["element","buildMenuTemplate","openMenuWithSecondaryClick","passExtraProps"],g=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).open=function(t){t&&t.stopPropagation&&t.stopPropagation();var n=(0,s.Z)(e)._contextMenu;if(n){var r=d.findDOMNode(e._wrappedElement);if(r instanceof HTMLElement){var i=r.getBoundingClientRect();n.open(Math.round(i.left+i.width/2),Math.round(i.top+i.height))}}},e}return(0,o.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.element,a=t.buildMenuTemplate,o=t.openMenuWithSecondaryClick,s=t.passExtraProps,l=(0,i.Z)(t,h);return(0,f.jsxs)(u.Fragment,{children:[u.cloneElement(n,(0,r.Z)((0,r.Z)({onContextMenu:this.open},o?{}:{onClick:this.open}),{},{ref:function(t){return e._wrappedElement=t}},s?l:{})),(0,f.jsx)(p.Z,{ref:function(t){return e._contextMenu=t},buildMenuTemplate:a})]})}}]),n}(u.Component)},22537:function(e,t,n){"use strict";var r=n(28381),i=n(51535),a=n(65512),o=n(53385),s=n(35213),l=n(23198),c=n(29343);t.Z=function(e){var t=e.visible,n=e.touchScreenMessage,u=e.message,d=e.hide,p=e.actionLabel,f=e.onActionClick,h=e.closable,g=e.duration,m=void 0===g?3e3:g,x=(0,s.BF)();return r.useEffect((function(){if(!(m<=0)&&t){var e=setTimeout((function(){d()}),m);return function(){return clearTimeout(e)}}}),[t,d,m]),(0,c.jsx)(o.Z,{open:t,message:"touch"===x&&n?n:u,action:(0,c.jsxs)(c.Fragment,{children:[p&&f?(0,c.jsx)(i.Z,{color:"secondary",size:"small",onClick:f,children:p}):null,h&&(0,c.jsx)(a.Z,{color:"secondary",size:"small",onClick:d,children:(0,c.jsx)(l.Z,{})})]})})}},94854:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var r=n(1413),i=(n(28381),n(86278)),a=n(29343),o={display:"flex",alignItems:"center",paddingLeft:8,paddingRight:8},s={marginRight:4},l={marginLeft:4,marginRight:4},c=function(e){var t=e.children,n=e.firstChild;return(0,a.jsx)(i.Z,{noShrink:!0,style:n?s:l,children:t})};t.Z=function(e){var t=e.justifyContent,n=e.children,i=e.noPadding;return(0,a.jsx)("div",{style:(0,r.Z)((0,r.Z)((0,r.Z)({},o),i?{padding:0}:{}),{},{height:32,justifyContent:t}),children:n})}},19131:function(e,t,n){"use strict";n.d(t,{E:function(){return i},T:function(){return r}});var r=function(e){return 0},i=function(e){return{transform:"translateY(0px)",transition:"transform 0.2s linear",willChange:"transform"}}},20914:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var r=n(1413),i=n(28381),a=n(32694),o=n(24910),s=n(29343),l=function(e,t){return"dark"===t?e.paper.backgroundColor.dark:"medium"===t?e.paper.backgroundColor.medium:e.paper.backgroundColor.light},c=i.forwardRef((function(e,t){var n=e.id,c=e.children,u=e.background,d=e.elevation,p=e.variant,f=e.style,h=e.square,g=i.useContext(o.Z),m=l(g,u);return(0,s.jsx)(a.Z,{id:n,ref:t,variant:p,elevation:d||0,style:(0,r.Z)({backgroundColor:m},f),square:!!h,children:c})}));t.Z=c},75383:function(e,t,n){"use strict";var r=n(36600),i=(n(28381),n(40243)),a=n(60022),o=n(86578),s=n(61325),l=n(29343);t.Z=function(e){var t=e.onRetry,n=e.children;return(0,l.jsx)(i.sg,{expand:!0,alignItems:"center",justifyContent:"center",children:(0,l.jsx)(i.x1,{noMargin:!0,children:(0,l.jsxs)(s.ak,{noMargin:!0,alignItems:"center",children:[(0,l.jsx)(o.Z,{children:n}),(0,l.jsx)(i.x1,{noMargin:!0,children:t&&(0,l.jsx)(a.Z,{primary:!0,label:(0,l.jsx)(r.Trans,{id:"Retry"}),onClick:t})})]})})})}},78081:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(66789)),a=n(29343),o={display:"flex",alignItems:"center",justifyContent:"center",flex:1,padding:10};t.Z=function(e){return(0,a.jsx)("div",{style:(0,r.Z)((0,r.Z)({},o),e.style),children:(0,a.jsx)(i.Z,{size:e.size||40})})}},41332:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(16792)),a=n(20914),o=n(29343);t.Z=function(e){return(0,o.jsx)("div",(0,r.Z)((0,r.Z)({},(0,i.Y)(e.data)),{},{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:e.showOnTop?9999:void 0,pointerEvents:"all"},children:(0,o.jsx)(a.Z,{elevation:3,style:{padding:10,width:"100%",maxWidth:600},background:"dark",children:e.children})}))}},94553:function(e,t,n){"use strict";var r=n(28381),i=n(20715),a=n(24910),o=n(29343),s={qrCodeContainer:{imageRendering:"pixelated"}};t.Z=function(e){var t=e.url,n=e.size,l=void 0===n?128:n,c=r.useContext(a.Z),u=r.useRef(null);return r.useEffect((function(){var e=u.current;if(e)return i.Z.render({text:t,radius:0,ecLevel:"L",fill:c.palette.secondary,background:null,size:l},e),function(){e.firstChild&&e.removeChild(e.firstChild)}}),[t,l,c]),(0,o.jsx)("div",{ref:u,style:s.qrCodeContainer})}},60022:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(1413),i=n(4942),a=n(45987),o=n(28381),s=n(51535),l=n(40243),c="RaisedButton_buttonSuccess__lw0yh",u="RaisedButton_buttonDanger__Yb+xE",d="RaisedButton_buttonPremium__dCuxb",p="RaisedButton_buttonAi__EDtih",f=n(82954),h=n.n(f),g=n(29343),m=["label","primary","color","size","icon","rightIcon","disabled","keyboardFocused","style"],x=o.forwardRef((function(e,t){var n,o=e.label,f=e.primary,x=e.color,v=e.size,b=e.icon,C=e.rightIcon,j=e.disabled,y=e.keyboardFocused,Z=e.style,k=(0,a.Z)(e,m);return(0,g.jsxs)(s.Z,(0,r.Z)((0,r.Z)({variant:"contained",size:v||"small",disableElevation:!0,color:f||"primary"===x?"primary":"default",autoFocus:y,focusRipple:!0,disabled:j,className:h()((n={},(0,i.Z)(n,c,"success"===x),(0,i.Z)(n,u,"danger"===x),(0,i.Z)(n,d,"premium"===x&&!j),(0,i.Z)(n,p,"ai"===x&&!j),n)),style:Z||!o?(0,r.Z)({minWidth:o?void 0:0},Z):void 0},k),{},{ref:t,children:[b,!!b&&!!o&&(0,g.jsx)(l.LZ,{}),o?(0,g.jsx)("span",{children:o}):null,!!C&&!!o&&(0,g.jsx)(l.LZ,{}),C]}))}))},57244:function(e,t,n){"use strict";n(28381);var r=n(54168),i=n(89267),a=n(51535),o=n(40243),s=n(25638),l=n(29343),c=function(){throw new Error("This RaisedButtonWithSplitMenu onClick should never be called")},u={mainButton:{flex:1},arrowDropDownButton:{minWidth:30,paddingLeft:0,paddingRight:0,flexBasis:0}};t.Z=function(e){var t=e.id,n=e.buildMenuTemplate,d=e.onClick,p=e.label,f=e.icon,h=e.disabled,g=e.fullWidth;return(0,l.jsxs)(i.Z,{variant:"contained",disableElevation:!0,color:"primary",disabled:h,size:"small",style:e.style,fullWidth:g,children:[(0,l.jsxs)(a.Z,{id:t,focusRipple:true,onClick:d,style:u.mainButton,children:[f,!!f&&!!p&&(0,l.jsx)(o.LZ,{}),p]}),(0,l.jsx)(r.Z,{passExtraProps:!0,element:(0,l.jsx)(a.Z,{onClick:c,focusRipple:true,style:u.arrowDropDownButton,children:(0,l.jsx)(s.Z,{})}),buildMenuTemplate:n})]})}},6996:function(e,t,n){"use strict";n.d(t,{Ip:function(){return x},UQ:function(){return v},eC:function(){return g},mA:function(){return m}});var r=n(29439),i=n(28381),a=n(51265),o=n(29343),s=500,l=600,c=1150,u=1800,d=function(e,t){return(e<l||t<s?"small":e<c?"medium":e<u?"large":"xlarge")+"-"+(e>t?"landscape":"portrait")},p={"small-portrait":{windowSize:"small",isMobile:!0,isMediumScreen:!1,isLandscape:!1},"medium-portrait":{windowSize:"medium",isMobile:!1,isMediumScreen:!0,isLandscape:!1},"large-portrait":{windowSize:"large",isMobile:!1,isMediumScreen:!1,isLandscape:!1},"xlarge-portrait":{windowSize:"xlarge",isMobile:!1,isMediumScreen:!1,isLandscape:!1},"small-landscape":{windowSize:"small",isMobile:!0,isMediumScreen:!1,isLandscape:!0},"medium-landscape":{windowSize:"medium",isMobile:!1,isMediumScreen:!0,isLandscape:!0},"large-landscape":{windowSize:"large",isMobile:!1,isMediumScreen:!1,isLandscape:!0},"xlarge-landscape":{windowSize:"xlarge",isMobile:!1,isMediumScreen:!1,isLandscape:!0}},f=function(){return"undefined"===typeof window?null:p[d(window.innerWidth,window.innerHeight)]},h=i.createContext(null),g=function(e){var t=e.children;return(0,o.jsx)(h.Provider,{value:null,children:t})},m=function(e){var t=e.children,n=e.innerWidth,r=e.innerHeight,a=i.useMemo((function(){return null===n||null===r?null:p[d(n,r)]}),[n,r]);return(0,o.jsx)(h.Provider,{value:a,children:a?t:null})},x=function(e){return(0,e.children)(v())},v=function(){var e=i.useContext(h),t=i.useState(f),n=(0,r.Z)(t,2),o=n[0],s=n[1];return(0,a.Z)(i.useCallback((function(){if(!e){var t=f();t!==o&&s(t)}}),[o,e])),e||o||p["medium-landscape"]}},35213:function(e,t,n){"use strict";n.d(t,{BF:function(){return o},bX:function(){return s},wh:function(){return a}});n(28381);var r=!1,i=!1;"undefined"!==typeof window&&(window.addEventListener("touchstart",(function e(){console.info("Touch detected, considering the screen as touch enabled."),r=!0,window.removeEventListener("touchstart",e,!1)}),!1),window.addEventListener("pointermove",(function e(t){console.info("Pointer move detected."),"mouse"===t.pointerType&&(console.info("Pointer type is mouse, considering the device is a desktop/laptop computer."),i=!0),window.removeEventListener("pointermove",e,!1)}),!1));var a=function(e){return(0,e.children)(o())},o=function(){return"undefined"===typeof window?"normal":r?"touch":"normal"},s=function(){return!("touch"===o()&&!i)}},26807:function(e,t,n){"use strict";var r=n(1413),i=(n(28381),n(10888)),a=n(6996),o=n(29343);t.Z=function(e){var t=(0,a.UQ)(),n=t.isMobile,s=t.isLandscape;return(0,o.jsx)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{label:n&&!s?"":e.label}))}},22726:function(e,t,n){"use strict";var r=n(1413),i=n(29439),a=n(28381),o=n(50301),s=n(69186),l=n(39700),c=n(41693),u=n(23818),d=n(40243),p=n(65111),f=n(6996),h=n(86278),g=n(61325),m=n(29343),x={selectedMedia:{width:"100%",aspectRatio:"16 / 9",objectFit:"cover",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},carouselItem:{display:"inline-block",outlineOffset:-1,borderRadius:4},imageCarouselItem:{height:80,aspectRatio:"16 / 9",display:"block",borderRadius:4},mobileImageCarouselItem:{aspectRatio:"16 / 9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},desktopGallery:{flex:1,display:"grid",grid:"auto / auto-flow max-content",overflowX:"scroll",gap:"8px"},mobileGrid:{overflowX:"scroll",overflowY:"hidden",scrollSnapType:"x mandatory"},flex:{display:"flex"},flexColumn:{display:"flex",flexDirection:"column"},disabledText:{opacity:.6}};t.Z=function(e){var t=e.mediaItems,n=e.altTextTemplate,v=e.horizontalOuterMarginToEatOnMobile,b=a.useState(0),C=(0,i.Z)(b,2),j=C[0],y=C[1],Z=(0,f.UQ)().isMobile,k=Z&&v?2*v:0,w=a.useMemo((function(){return(0,s.Z)({"spacing-xs-1":{margin:0,"& > .MuiGrid-item:first-child":{paddingLeft:k},"& > .MuiGrid-item:last-child":{paddingRight:k}},root:Z?{scrollbarHeight:"none","-ms-overflow-style":"none","&::-webkit-scrollbar":{height:0}}:void 0})}),[k,Z])(),T=a.useState(0),S=(0,i.Z)(T,2),P=S[0],I=S[1],E=a.useState(0),M=(0,i.Z)(E,2),L=M[0],A=M[1],O=a.useState(0),R=(0,i.Z)(O,2),F=R[0],D=R[1],N=Math.max(P-30-(v||0),0)||320;a.useEffect((function(){if(N&&L){var e=Math.round(L/(N+1));D(e)}}),[N,L]);var _=t[j];return Z?(0,m.jsxs)("div",{style:(0,r.Z)((0,r.Z)({},x.flexColumn),{},{marginLeft:v?-v:0,marginRight:v?-v:0}),children:[(0,m.jsx)(o.Z,{bounds:!0,onResize:function(e){I(e.bounds.width)},children:function(e){e.contentRect;var i=e.measureRef;return(0,m.jsx)("div",{style:x.flex,ref:i,children:(0,m.jsx)(c.Z,{classes:w,container:!0,spacing:1,wrap:"nowrap",style:x.mobileGrid,onScroll:function(e){return A(e.currentTarget.scrollLeft)},children:t.map((function(e,t){var i=e.kind,a=e.url;return(0,m.jsx)(c.Z,{item:!0,style:{scrollSnapAlign:v?"center":"start"},children:(0,m.jsx)(l.Z,{children:"image"===i?(0,m.jsx)(u.W,{src:a,style:(0,r.Z)((0,r.Z)({},x.mobileImageCarouselItem),{},{height:N/(16/9)}),alt:n.replace(/{mediaIndex}/g,String(j+1))}):(0,m.jsx)("div",{style:x.mobileImageCarouselItem,children:(0,m.jsx)("audio",{controls:!0,src:a,children:"Audio preview is unsupported."})})})},a)}))})})}}),(0,m.jsx)(d.x1,{justifyContent:"center",children:(0,m.jsxs)(h.Z,{noMargin:!0,size:"body2",style:x.disabledText,children:[F+1,"/",t.length]})})]}):(0,m.jsxs)(g.ak,{noMargin:!0,children:["image"===_.kind?(0,m.jsx)(u.W,{style:x.selectedMedia,src:_.url,alt:n.replace(/{mediaIndex}/g,String(j+1))}):(0,m.jsx)("div",{style:x.selectedMedia,children:(0,m.jsx)("audio",{controls:!0,src:_.url,children:"Audio preview is unsupported."})}),(0,m.jsx)("div",{style:x.desktopGallery,children:t.map((function(e,t){var i=e.kind,a=e.url;return(0,m.jsx)("div",{onClick:function(){return y(t)},tabIndex:0,style:(0,r.Z)((0,r.Z)({},x.carouselItem),{},{outline:t===j?"solid 1px white":void 0}),onKeyPress:function(e){(0,p.ph)(e)&&y(t)},children:"image"===i?(0,m.jsx)(u.W,{src:a,style:x.imageCarouselItem,alt:n.replace(/{mediaIndex}/g,(t+1).toString())}):(0,m.jsx)("img",{src:"res/audio-placeholder.jpg",style:x.imageCarouselItem,alt:"sound"})},a)}))})]})}},97228:function(e,t,n){"use strict";n.d(t,{y:function(){return u}});n(28381);var r=n(20914),i=n(6996),a=n(82054),o=n(29343),s={paper:{display:"flex",width:250},drawerPaper:{display:"flex",maxWidth:"80%"}},l={style:s.drawerPaper},c={keepMounted:!0},u=function(e){var t=e.open,n=e.onClose,u=e.children;return(0,i.UQ)().isMobile?(0,o.jsx)(a.ZP,{anchor:"right",open:t,onClose:n,PaperProps:l,ModalProps:c,children:u}):t?(0,o.jsx)(r.Z,{style:s.paper,background:"medium",children:u}):null}},2632:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(1412),o=n(16792),s=n(29343),l={flex:1};t.Z=i.forwardRef((function(e,t){var n=e.id,c=e.data,u=e.children,d=e.autoHideScrollbar,p=e.style,f=e.onScroll,h=i.useRef(null);i.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=h.current;if(!e)return 0;var t=e.getBoundingClientRect().top;return e.scrollTop+t},scrollTo:function(e){var t=h.current;if(t){var n=a.findDOMNode(e);if(n instanceof HTMLElement){var r=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top;t.scrollTop+=r-i}else console.error("Tried to scroll to something that is not a HTMLElement")}},scrollBy:function(e){var t=h.current;t&&t.scrollBy(0,e)},scrollToPosition:function(e){var t=h.current;if(t){var n=t.getBoundingClientRect().top;t.scrollTop=e-n}},scrollToBottom:function(e){var t=h.current;t&&t.scrollTo({top:t.scrollHeight,behavior:e?e.behavior:void 0})}}}));var g=i.useCallback((function(){if(f){var e=h.current;e&&f({remainingScreensToBottom:(e.scrollHeight-(e.clientHeight+e.scrollTop))/e.clientHeight})}}),[f]);return(0,s.jsx)("div",(0,r.Z)((0,r.Z)({id:n},(0,o.Y)(c)),{},{style:(0,r.Z)((0,r.Z)({},l),{},{overflowY:d?"auto":"scroll"},p),onScroll:g,ref:h,children:u}))}))},2351:function(e,t,n){"use strict";n.d(t,{t:function(){return f}});var r=n(1413),i=n(36600),a=n(28381),o=n(78081),s=n(75383),l=n(61651),c=n(38509),u=n(86578),d=n(29343),p={container:{flex:1},grid:{overflowX:"hidden"}},f=a.forwardRef((function(e,t){var n=e.searchItems,f=e.renderSearchItem,h=e.spacing,g=e.error,m=e.onRetry,x=e.baseSize,v=e.noResultPlaceholder,b=e.noScroll,C=a.useRef(null);return a.useImperativeHandle(t,(function(){return{getScrollPosition:function(){var e=C.current;return e?e.state.scrollTop:0},scrollToPosition:function(e){var t=C.current;t&&t.scrollToPosition({scrollLeft:0,scrollTop:e})}}})),n?0===n.length?v||(0,d.jsx)(u.Z,{children:(0,d.jsx)(i.Trans,{id:"No results returned for your search. Try something else, browse the categories or create your object from scratch!"})}):(0,d.jsx)(l.ZP,{componentTitle:(0,d.jsx)(i.Trans,{id:"Search results"}),scope:"box-search-result",children:(0,d.jsx)("div",{style:p.container,children:(0,d.jsx)(c.qj,{children:function(e){var t=e.width,i=e.height,a=Math.max(Math.floor((t-5)/x),1),o=Math.max(Math.floor(t/a),30),s=Math.max(1,Math.ceil(n.length/a)),l=o,u=b?l*s:i,g=t;return(0,d.jsx)(c.rj,{ref:C,width:g,height:u,columnCount:a,columnWidth:o,rowHeight:l,rowCount:s,cellRenderer:function(e){var t=e.columnIndex,i=e.key,s=e.rowIndex,l=e.style,c=s*a+t,u=c<n.length?n[c]:null;return(0,d.jsx)("div",{style:(0,r.Z)((0,r.Z)({},l),{},{left:l.left+h/2,top:l.top+h/2,width:l.width-h,height:l.height-h}),children:u?f(u,o-h,c):null},i)},style:p.grid})}})})}):g?(0,d.jsx)(s.Z,{onRetry:m,children:(0,d.jsx)(i.Trans,{id:"Can't load the results. Verify your internet connection or retry later."})}):(0,d.jsx)(o.Z,{})}))},81442:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(37762),i=n(29439),a=n(28381),o=function(){var e=a.useState(null),t=(0,i.Z)(e,2),n=t[0],o=t[1],s=a.useState((function(){return new Set})),l=(0,i.Z)(s,2),c=l[0],u=l[1];return{chosenCategory:n,setChosenCategory:a.useCallback((function(e){if(e){var t,n=new Set,i=(0,r.Z)(c.keys());try{for(i.s();!(t=i.n()).done;){var a=t.value;e.node.allChildrenTags.includes(a)&&n.add(a)}}catch(s){i.e(s)}finally{i.f()}u(n),o(e)}else o(null)}),[c]),chosenFilters:c,addFilter:function(e){var t=new Set(c);t.add(e),u(t)},removeFilter:function(e){var t=new Set(c);t.delete(e),u(t)}}}},37090:function(e,t,n){"use strict";var r=n(28381),i=n(24910),a=n(29343),o=function(e,t,n,r,i){var o=t[0],s=t[1]+1,l=e.slice(n,o),c=e.slice(o,s),u=e.slice(s,r||e.length);return[l,(0,a.jsx)("span",{style:i,children:c},"".concat(c).concat(o)),u]};t.Z=function(e){var t=e.text,n=e.matchesCoordinates,s=r.useContext(i.Z);if(0===n.length)return[t];for(var l=[],c=0;c<n.length;c++){var u=n[c+1]?n[c+1][0]:void 0,d=0===c?0:n[c][0];l.push(o(t,n[c],d,u,s.text.highlighted))}return l.map((function(e,t){return(0,a.jsx)(r.Fragment,{children:e},t)}))}},49819:function(e,t,n){"use strict";n.d(t,{az:function(){return h},hM:function(){return p}});var r=n(29439),i=n(37762),a=n(15671),o=n(43144),s=n(28381),l=n(16243),c=n.n(l),u=n(92417),d=n.n(u),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;(0,a.Z)(this,e),this.tags=t}return(0,o.Z)(e,[{key:"getPertinence",value:function(e){var t=this;return 0===this.tags.size||e.tags.some((function(e){return t.tags.has(e)}))?1:0}},{key:"hasFilters",value:function(){return this.tags.size>0}}]),e}(),f=function(e,t,n,r){if(!e)return null;var a=performance.now(),o=e.filter((function(e){if(!t)return!0;if(t&&!e.tags)return!1;if(!(t.node.isTagContainerOnly||e.tags&&e.tags.some((function(e){return e===t.node.name}))))return!1;var n,r=(0,i.Z)(t.parentNodes);try{var a,o=function(){var t=n.value;return t.isTagContainerOnly?{v:!0}:e.tags&&e.tags.some((function(e){return e===t.name}))?void 0:{v:!1}};for(r.s();!(n=r.n()).done;)if(a=o())return a.v}catch(s){r.e(s)}finally{r.f()}return!0})).filter((function(e){return!n||0===n.size||e.tags&&e.tags.some((function(e){return n.has(e)}))||e.categories&&e.categories.some((function(e){return n.has(e)}))})),s=o;if(r){var l=1,c=0,u=o.map((function(e){var t,n=1,a=(0,i.Z)(r);try{for(a.s();!(t=a.n()).done;){if(0===(n*=t.value.getPertinence(e)))return null}}catch(o){a.e(o)}finally{a.f()}return l=Math.min(l,n),c=Math.max(c,n),{pertinence:n,searchItem:e}})).filter(Boolean);!function(e,t,n,r){if(!(n>=r))for(var i=e.length-1,a=.5;a>1/128&&i>0;a/=2)for(var o=n+(r-n)*(1-a),s=-1,l=i+1;;){do{s++}while(s<i&&t(e[s])>o);if(s===i)break;do{l--}while(l>0&&t(e[l])<o);if(0===l)return;if(s>=l){i=l;break}var c=e[s];e[s]=e[l],e[l]=c}}(u,(function(e){return e.pertinence}),l,c),s=u.map((function(e){return e.searchItem}))}var d=performance.now()-a;return console.info("Filtered items by category/filters in ".concat(d.toFixed(3),"ms.")),s},h=function(e,t,n,i,a,o){var l=s.useRef(null),u=s.useState(null),p=(0,r.Z)(u,2),h=p[0],g=p[1],m=s.useMemo((function(){return e?c()(Object.keys(e).map((function(t){return e[t]}))):null}),[e]),x=s.useMemo((function(){return e?Object.keys(e).map((function(t){return e[t]})):null}),[e]);s.useEffect((function(){if(e){var n=performance.now();l.current&&(l.current.terminate(),l.current=null);try{var r=new(d()),i=Object.keys(e);i.forEach((function(n){var i=e[n];r.indexDocument(n,t(i))}));var a=performance.now()-n;console.info("Indexed ".concat(i.length," items in ").concat(a.toFixed(3),"ms.")),l.current=r}catch(o){console.error("Error while indexing items: ",o)}}}),[e,t]);var v=l.current;return s.useEffect((function(){var t=!1;if(n){if(!e||!v)return void console.info("Search for items skipped because items are not ready - will be retried when ready");var r=performance.now();v.search(n).then((function(n){if(t)console.info("Discarding search results as a new search was launched.");else{var s=n.map((function(t){return e[t]})).filter(Boolean),l=performance.now()-r;console.info("Found ".concat(s.length," items in ").concat(l.toFixed(3),"ms.")),g(f(s,i,a,o))}}))}else g(f(i?x:m,i,a,o));return function(){t=!0}}),[m,x,e,n,i,a,o,v]),h}},82069:function(e,t,n){"use strict";n.d(t,{Bg:function(){return g},G9:function(){return f},KE:function(){return p},_f:function(){return m},qg:function(){return C},wV:function(){return v},zi:function(){return x}});var r=n(29439),i=n(93433),a=n(1413),o=n(37762),s=n(4942),l=n(28381),c=n(16243),u=n.n(c),d=n(40755),p={minMatchCharLength:1,threshold:.35,includeMatches:!0,ignoreLocation:!0,useExtendedSearch:!0,findAllMatches:!0},f=function(e,t){return{$or:e.trim().split(" ").map((function(e){return{$or:t.map((function(t){return(0,s.Z)({},t,e)}))}}))}},h=function(e,t){var n=t.toLowerCase();return e.indices.map((function(r){var i=e.value.slice(r[0],r[1]+1).toLowerCase();if(i===n)return r;var a=i.indexOf(n);return-1!==a?[r[0]+a,r[0]+a+t.length-1]:void 0})).filter(Boolean)},g=function(e){var t=e.matches.map((function(e){var t=e.indices.map((function(e){return e[1]-e[0]>0?e:null})).filter(Boolean);return t.length>0?(0,a.Z)((0,a.Z)({},e),{},{indices:t}):null})).filter(Boolean);return t.length>0?(0,a.Z)((0,a.Z)({},e),{},{matches:t}):null},m=function(e,t){return{item:e.item,score:e.score,matches:e.matches.map((function(e){return(0,a.Z)((0,a.Z)({},e),function(e,t){var n,r=null,i=null,a=(0,o.Z)(e.indices);try{for(a.s();!(n=a.n()).done;){var s=n.value;if(e.value.slice(s[0],s[1]+1).toLowerCase().startsWith(t)&&(null===r&&(r=s[0]),null===i&&(0===s[0]?" ":e.value[s[0]-1]).match(/[\s\-_/]/))){i=s[0];break}}}catch(l){a.e(l)}finally{a.f()}return{closestExactMatchIndex:r,closestExactMatchAtStartOfWordIndex:i}}(e,t))}))}},x=function(e,t){return e.matches.map((function(e){return{key:e.key,value:e.value,indices:h(e,t)}}))},v=function(e){return function(t,n){var r=t.matches.filter((function(e){return null!==e.closestExactMatchAtStartOfWordIndex})).length,i=n.matches.filter((function(e){return null!==e.closestExactMatchAtStartOfWordIndex})).length;if(r>0&&0===i)return-1;if(0===r&&i>0)return 1;var a=t.matches.filter((function(e){return null!==e.closestExactMatchIndex})).length,s=n.matches.filter((function(e){return null!==e.closestExactMatchIndex})).length;if(a>0&&0===s)return-1;if(0===a&&s>0)return 1;var l,c=(0,o.Z)(e);try{var u,d=function(){var e=l.value,r=t.matches.find((function(t){return t.key===e})),i=n.matches.find((function(t){return t.key===e}));if(r&&null!==r.closestExactMatchAtStartOfWordIndex&&!i)return{v:-1};if(!r&&i&&null!==i.closestExactMatchAtStartOfWordIndex)return{v:1};if(r&&i){if(null!==r.closestExactMatchAtStartOfWordIndex&&null!==i.closestExactMatchAtStartOfWordIndex)return{v:r.closestExactMatchAtStartOfWordIndex-i.closestExactMatchAtStartOfWordIndex};if(null!==r.closestExactMatchAtStartOfWordIndex&&null===i.closestExactMatchAtStartOfWordIndex)return{v:-1};if(null===r.closestExactMatchAtStartOfWordIndex&&null!==i.closestExactMatchAtStartOfWordIndex)return{v:1};if(null!==r.closestExactMatchIndex&&null!==i.closestExactMatchIndex)return{v:r.closestExactMatchIndex-i.closestExactMatchIndex};if(null!==r.closestExactMatchIndex&&null===i.closestExactMatchIndex)return{v:-1};if(null===r.closestExactMatchIndex&&null!==i.closestExactMatchIndex)return{v:1}}};for(c.s();!(l=c.n()).done;)if(u=d())return u.v}catch(p){c.e(p)}finally{c.f()}return void 0!==t.score&&void 0!==n.score?t.score-n.score:-(t.matches.length-n.matches.length)}},b=function(e,t,n,r,a){if(!e)return null;var s=performance.now(),l=e.filter((function(e){var n=e.item;return!t||!!n.category&&n.category===t})).filter((function(e){var t=e.item;if(!n)return!0;if(!(n.node.isTagContainerOnly||t.tags&&t.tags.some((function(e){return e===n.node.name}))))return!1;var r,i=(0,o.Z)(n.parentNodes);try{var a,s=function(){var e=r.value;return e.isTagContainerOnly?{v:!0}:t.tags&&t.tags.some((function(t){return t===e.name}))?void 0:{v:!1}};for(i.s();!(r=i.n()).done;)if(a=s())return a.v}catch(l){i.e(l)}finally{i.f()}return!0})).filter((function(e){var t=e.item,n=t.isInstalled||!t.tier||!a.has(t.tier),o=new Set((0,i.Z)(r).map((function(e){return e.toLowerCase()}))),s=0===o.size||t.tags&&t.tags.some((function(e){return o.has(e.toLowerCase())}))||t.categories&&Array.isArray(t.categories)&&t.categories.some((function(e){return"string"===typeof e&&o.has(e.toLowerCase())}));return n&&s})),c=performance.now()-s;return console.info("Filtered items by category/filters/tier in ".concat(c.toFixed(3),"ms.")),l},C=function(e,t){var n=t.searchText,a=t.chosenItemCategory,o=t.chosenCategory,s=t.chosenFilters,c=t.excludedTiers,p=t.defaultFirstSearchItemIds,h=t.shuffleResults,g=void 0===h||h,m=l.useRef(null),v=l.useState(null),C=(0,r.Z)(v,2),j=C[0],y=C[1],Z=l.useMemo((function(){if(!e||!Object.keys(e).length)return null;var t=new Set(p),n=Object.keys(e).filter((function(e){return!t.has(e)}));return[].concat((0,i.Z)(p),(0,i.Z)(g?u()(n):n)).map((function(t){return{item:e[t],matches:[]}}))}),[e,p,g]);l.useEffect((function(){if(e){var t=performance.now();m.current&&(m.current=null);try{var n=new d.Z(Object.values(e),{keys:[{name:"name",weight:2},{name:"fullName",weight:5},{name:"shortDescription",weight:1},{name:"tags",weight:4}],minMatchCharLength:2,threshold:.35,includeMatches:!0,ignoreLocation:!0,useExtendedSearch:!0,findAllMatches:!0}),r=performance.now()-t;console.info("Indexed ".concat(Object.keys(e).length," items in ").concat(r.toFixed(3),"ms.")),m.current=n}catch(i){console.error("Error while indexing items: ",i)}}}),[e]);var k=m.current;return l.useEffect((function(){var t=!1;if(n){if(!e||!k)return void console.info("Search for items skipped because items are not ready - will be retried when ready");var r=performance.now(),i=k.search(f(n,["name","fullName","shortDescription","tags"])),l=performance.now()-r;if(console.info("Found ".concat(i.length," items in ").concat(l.toFixed(3),"ms.")),t)return void console.info("Discarding search results as a new search was launched.");y(b(i.map((function(e){return{item:e.item,matches:x(e,n)}})),a,o,s,c))}else y(b(Z,a,o,s,c));return function(){t=!0}}),[Z,e,n,a,o,s,k,c]),j}},12949:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var r=n(1413),i=n(29439),a=n(28381),o=n(29277),s=n(87622),l=n(39173),c=n(86278),u=n(19169),d=n(35213),p=n(65111),f=n(31595),h=n(36600),g=n(68009),m=n(40243),x=n(32694),v=n(69186),b=n(24910),C=n(31318),j=n(72662),y=n(16792),Z=n(9311),k=n(14932),w=n(51598),T=n(23198),S=n(54168),P=n(29343),I=function(e){var t=e.renderContent,n=e.disabled,i=e.isSearchBarEmpty,o=e.isFocused,s=e.helpPagePath,l=e.aspect,c=e.buildMenuTemplate,u=e.onCancel,d=e.renderSubLine,p=a.useContext(b.Z),f=function(e){var t=e.nonEmpty,n=e.disabled,i=e.theme,a=e.aspect,o=e.focused,s=e.hasHelpPage,l=n?.38:1;return{root:{height:30,display:"flex",flex:1,justifyContent:"space-between",backgroundColor:n?i.searchBar.backgroundColor.disabled:i.searchBar.backgroundColor.default,borderRadius:"integrated-search-bar"===a?0:4},iconButtonClose:{style:{opacity:l,visibility:t&&!n?"visible":"hidden",transition:"visibility 0s linear 0.1s"}},iconButtonSearch:{container:{padding:"5px 10px"},iconStyle:{fontSize:18,opacity:o?1:.5,transition:"opacity 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},iconButtonFilter:{style:{opacity:l,transform:t?"translateX(0)":"translateX(".concat(30,"px)"),transition:"transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},iconButtonHelp:{style:{opacity:l,transform:t?"translateX(0)":"translateX(".concat(30,"px)"),transition:"transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)"}},inputStyle:(0,r.Z)({padding:0,color:n?i.searchBar.textColor.disabled:t&&o?i.searchBar.textColor.focused:i.searchBar.textColor.default},C.t),searchContainer:{position:"relative",display:"flex",width:"100%"},inputContainer:{margin:"auto 4px",flex:1},popperContainer:{left:"-".concat(43,"px"),right:"-".concat(s?66:33,"px"),position:"absolute",zIndex:1}}}({nonEmpty:!i,disabled:!!n,theme:p,aspect:l,focused:o,hasHelpPage:!!s}),h=function(e){var t=e.theme,n=e.disabled,r=(e.nonEmpty,e.focused);return(0,v.Z)({root:{border:"1px solid ".concat(r?t.searchBar.borderColor.focused:"transparent"),"&:hover":{border:!r&&!n&&"1px solid ".concat(t.searchBar.borderColor.hovered)}}})()}({theme:p,disabled:!!n,nonEmpty:!i,focused:o}),g=a.useMemo((function(){return t({inputStyle:f.inputStyle,popperContainerStyle:f.popperContainer})}),[t,f.inputStyle,f.popperContainer]);return(0,P.jsxs)(m.sg,{noMargin:!0,children:[(0,P.jsx)(m.x1,{noMargin:!0,children:(0,P.jsxs)(x.Z,{classes:h,style:f.root,children:[(0,P.jsx)("div",{style:f.iconButtonSearch.container,children:(0,P.jsx)(j.Z,{style:f.iconButtonSearch.iconStyle,viewBox:"2 2 12 12"})}),(0,P.jsx)("div",(0,r.Z)((0,r.Z)({style:f.searchContainer},(0,y.Y)({searchBarContainer:"true"})),{},{children:(0,P.jsx)("div",{style:f.inputContainer,children:g})})),c&&(0,P.jsx)(S.Z,{element:(0,P.jsx)(w.Z,{style:f.iconButtonFilter.style,disabled:n,size:"small",children:(0,P.jsx)(Z.Z,{})}),buildMenuTemplate:c}),s&&(0,P.jsx)(k.Z,{disabled:n,helpPagePath:s,style:f.iconButtonHelp.style,size:"small"}),(0,P.jsx)(w.Z,{onClick:u,style:f.iconButtonClose.style,disabled:n,size:"small",children:(0,P.jsx)(T.Z,{})})]})}),d&&d()]})},E=n(6996),M=function(){},L=a.forwardRef((function(e,t){var n=e.id,m=e.disabled,x=e.placeholder,v=e.onChange,b=e.onRequestSearch,C=e.value,j=e.aspect,y=e.tagsHandler,Z=e.tags,k=e.buildMenuTemplate,w=e.helpPagePath,T=e.autoFocus;a.useImperativeHandle(t,(function(){return{focus:S,blur:L}}));var S=function(){G.current&&G.current.focus()},L=function(){G.current&&G.current.blur()},A=(0,E.UQ)().isMobile,O=a.useState(!1),R=(0,i.Z)(O,2),F=R[0],D=R[1],N=a.useState(C),_=(0,i.Z)(N,2),B=_[0],U=_[1],V=a.useState(C),H=(0,i.Z)(V,2),z=H[0],W=H[1],G=a.useRef(null),Y=!!B&&B.length>0,q=(0,g.N)(v||M,250),J=a.useCallback((function(e){U(e),q(e)}),[q,U]),X=a.useCallback((function(e){U(e),v&&v(e)}),[v,U]);a.useEffect((function(){U(C)}),[C]);var K=(0,d.bX)(),Q=!!T&&("desktopAndMobileDevices"===T||K),$=a.useRef(y?y.chosenTags.size:0);a.useEffect((function(){Q&&y&&0===y.chosenTags.size&&$.current>0&&S()}),[y,Q]);var ee=function(){D(!1),B&&""!==B.trim()||X("")},te=function(){D(!0)},ne=function(e){J(e.target.value)},re=function(){X(""),A||S()},ie=function(e){(0,p.ph)(e)&&b(B)},ae=function(e,t,n){"select-option"===n?(y&&y.add(t||""),X(""),W("")):X(t||"")},oe=function(e,t,n){"reset"===n?(X(""),W("")):J(t||"")};return(0,P.jsx)(h.I18n,{children:function(e){var t=e.i18n;return(0,P.jsx)(I,{onCancel:re,isFocused:F,disabled:m,isSearchBarEmpty:!Y,helpPagePath:w,aspect:j,buildMenuTemplate:k,renderSubLine:y?function(){return(0,P.jsx)(s.Z,{in:y.chosenTags.size>0,children:(0,P.jsx)(f.Z,{tags:Array.from(y.chosenTags),onRemove:function(e){1===y.chosenTags.size&&S(),y.remove(e)}})})}:null,renderContent:function(e){var i=e.inputStyle,a=e.popperContainerStyle;return Z?(0,P.jsx)(u.ZP,{id:n,options:Z,freeSolo:!0,fullWidth:!0,defaultValue:"",inputValue:B,value:z,onChange:ae,onInputChange:oe,onKeyPress:ie,onBlur:ee,onFocus:te,getOptionDisabled:function(e){return e.disabled||!!y&&!!y.chosenTags.has(e)},getOptionSelected:function(e,t){return!!y&&y.chosenTags.has(e)},PopperComponent:function(e){return(0,P.jsx)("div",{style:a,children:e.children})},renderOption:function(e){return(0,P.jsx)(c.Z,{noMargin:!0,children:e})},renderInput:function(e){return(0,P.jsx)(l.Z,(0,r.Z)((0,r.Z)({margin:"none"},e),{},{autoFocus:Q,inputRef:G,InputProps:(0,r.Z)((0,r.Z)({},e.InputProps),{},{disableUnderline:!0,endAdornment:null,placeholder:t._(x||{id:"Search"}),style:i})}))}}):(0,P.jsx)(o.ZP,{id:n,margin:"none",dataset:{searchBar:"true"},translatableHintText:x||{id:"Search"},onBlur:ee,value:B,onChange:ne,onKeyUp:ie,fullWidth:!0,underlineShow:!1,disabled:m,ref:G,inputStyle:i,onFocus:te,autoFocus:T})}})}})}))},81683:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(36600),o=n(39173),s=n(29277),l=n(32832),c=n(69186),u=n(25638),d=n(29343),p=function(e){return e.stopPropagation()},f=i.forwardRef((function(e,t){var n=i.useRef(null),f=function(e){n.current&&n.current.focus()};i.useImperativeHandle(t,(function(){return{focus:f}}));var h,g=(h=e.textAlign,(0,c.Z)({root:{textAlign:h||"left",cursor:"default"}})()),m=e.onChange||void 0,x=!0,v=i.Children.map(e.children,(function(e){return null!==e&&e.props?e.props.value:null}));v?x=0!==v.filter((function(t){return t===e.value})).length:console.error("SelectField has been passed no or invalid children. Only SelectOption and null are supported.");var b=x?e.value:"",C=e.errorText?e.errorText:e.helperMarkdownText?(0,d.jsx)(l.r,{source:e.helperMarkdownText}):null;return(0,d.jsx)(a.I18n,{children:function(t){var i=t.i18n;return(0,d.jsxs)(o.Z,(0,r.Z)((0,r.Z)({id:e.id,select:!0,color:"secondary"},(0,s.P8)(e)),{},{disabled:e.disabled,fullWidth:e.fullWidth,label:e.floatingLabelText,helperText:C,error:!!e.errorText,value:b,onClick:e.stopPropagationOnClick?p:void 0,onChange:m?function(e){m(e,-1,e.target.value)}:void 0,InputProps:{style:e.inputStyle,disableUnderline:!!e.disableUnderline},InputLabelProps:{shrink:!0},SelectProps:{native:!0,classes:g,IconComponent:u.Z},style:e.style,inputRef:n,children:[x?null:(0,d.jsx)("option",{value:"",disabled:!0,children:e.translatableHintText?i._(e.translatableHintText):i._({id:"Choose an option"})}),e.children]}))}})}));t.Z=f},90242:function(e,t,n){"use strict";var r=n(28381),i=n(36600),a=n(24910),o=n(29343);t.Z=function(e){var t=r.useContext(a.Z);return(0,o.jsx)(i.I18n,{children:function(n){var r=n.i18n;return(0,o.jsx)("option",{value:e.value,disabled:e.disabled,style:{color:t.text.color.primary,backgroundColor:t.palette.canvasColor},children:e.shouldNotTranslate?e.label:r._(e.label)})}})}},72402:function(e,t,n){"use strict";n.d(t,{lp:function(){return Z},nT:function(){return k}});var r=n(29439),i=n(45987),a=n(1413),o=n(28381),s=n(36600),l=n(39173),c=(n(74044),n(81666)),u=n(99415),d=n(32832),p=n(19169),f=n(33620),h=n(29277),g=n(69186),m=n(80845),x=n(65111),v=n(31318),b=n(20914),C=n(29343),j=["InputProps","inputProps","InputLabelProps"],y=["InputProps","inputProps"],Z=function(e){return(0,C.jsx)(b.Z,(0,a.Z)((0,a.Z)({},e),{},{background:"light"}))},k={container:{position:"relative",width:"100%"},listItem:{padding:0,margin:0},listbox:{padding:0,margin:0},listItemText:{margin:"1px 0"}},w=(0,g.Z)({option:{cursor:"default"},listbox:k.listbox,input:{width:"auto",flexGrow:1},inputRoot:{flexWrap:"wrap"},popper:{zIndex:m.Z.tooltip+100}}),T=function(e){return function(t,n){if(t.type&&"separator"===t.type)return(0,C.jsx)(f.Z,{divider:!0,disableGutters:!0,component:"div",style:k.listItem});var r=t.translatableValue?e._(t.translatableValue):t.value;return(0,C.jsxs)(f.Z,{dense:!0,component:"div",style:k.listItem,children:[t.renderIcon&&(0,C.jsx)(c.Z,{children:t.renderIcon()}),(0,C.jsx)(u.Z,{style:k.listItemText,primary:(0,C.jsx)("div",{title:r,style:v.t,children:r})})]})}},S=function(e){return"separator"===e.type||!!e.disabled};t.ZP=o.forwardRef((function(e,t){var n=o.useRef(null),c=(0,o.useState)(null),u=(0,r.Z)(c,2),f=u[0],g=u[1],m=(0,o.useState)(!1),v=(0,r.Z)(m,2),b=v[0],P=v[1],I=w(),E=function(e){var t=n.current;t&&(t.focus(),e&&e.selectAll&&t.select())};o.useImperativeHandle(t,(function(){return{focus:E,forceInputValueTo:function(t){null!==f&&g(t),e.onInputValueChange&&e.onInputValueChange(t)},getInputValue:function(){return n.current?n.current.value:""}}}));var M=null!==f?f:e.value,L=e.helperMarkdownText?(0,C.jsx)(d.r,{source:e.helperMarkdownText}):null,A=function(t,n,r){g(n),e.onInputValueChange&&e.onInputValueChange(n),b||P(!0),e.commitOnInputChange&&e.onChange(n)};return(0,C.jsx)(s.I18n,{children:function(t){var r=t.i18n;return(0,C.jsx)(p.ZP,{freeSolo:!0,classes:I,onChange:function(t,r){null!==r&&n.current&&(!function(e,t,n){"separator"===t.type||t.disabled||(t.onClick?t.onClick():(e.value=t.value,n.onChoose?n.onChoose(t.value):n.onChange(t.value),n.onApply?n.onApply():n.onRequestClose&&n.onRequestClose()))}(n.current,r,e),g(null),P(!1))},open:b,style:(0,a.Z)((0,a.Z)({},e.style),k.container),inputValue:M,value:M,onInputChange:A,PaperComponent:Z,options:e.dataSource,renderOption:T(r),getOptionDisabled:S,getOptionLabel:function(e){return function(e,t){return e.value?e.value:t}(e,M)},filterOptions:function(e,t){return function(e,t,n){var r=n.toLowerCase(),i=e.filter((function(e){return"separator"===e.type||!e.text||-1!==e.text.toLowerCase().indexOf(r)}));if(!i.filter((function(e){return"separator"!==e.type&&(e.value||e.translatableValue)})).length)return[];for(;void 0!==i[i.length-1]&&void 0!==i[i.length-1].type;)i.pop();for(;void 0!==i[0]&&void 0!==i[0].type;)i.shift();return i}(e,0,M)},id:e.id,renderInput:function(t){var o=function(e,t){var n=e.InputProps,r=e.inputProps,o=(e.InputLabelProps,(0,i.Z)(e,j));return(0,a.Z)((0,a.Z)({},o),{},{InputProps:(0,a.Z)((0,a.Z)({},n),{},{className:null,endAdornment:null,style:t.inputStyle}),inputProps:(0,a.Z)((0,a.Z)({},r),{},{className:null,disabled:t.disabled,onKeyDown:function(e){(0,x.W$)(e)?t.onRequestClose&&t.onRequestClose():(0,x.Fc)(e)?(t.onChange(e.currentTarget.value),t.onApply?t.onApply():t.onRequestClose&&t.onRequestClose()):(0,x.ph)(e)&&t.onChange(e.currentTarget.value)}})})}(t,e),s=o.InputProps,c=o.inputProps,u=(0,i.Z)(o,y);return(0,C.jsx)(l.Z,(0,a.Z)((0,a.Z)((0,a.Z)({color:"secondary",InputProps:(0,a.Z)((0,a.Z)({},s),{},{placeholder:"string"===typeof e.hintText?e.hintText:r._(e.hintText)}),inputProps:(0,a.Z)((0,a.Z)({},c),{},{onClick:e.onClick,onFocus:function(e){P(!0),n.current&&(n.current.selectionStart=n.current.value.length)},onBlur:function(t){g(null),P(!1),e.onChange(t.currentTarget.value),e.onBlur&&e.onBlur(t)},onMouseDown:function(e){n.current&&!n.current.value.length&&P(!b)}})},u),(0,h.P8)(e)),{},{style:e.textFieldStyle,label:e.floatingLabelText,inputRef:n,disabled:e.disabled,error:!!e.errorText,helperText:L||e.errorText,fullWidth:e.fullWidth}))}})}})}))},42986:function(e,t,n){"use strict";var r=n(1413),i=n(45987),a=n(29439),o=n(28381),s=n(29277),l=n(29343),c=["value","onChange","commitOnBlur","onFocus","onBlur","type"],u=o.forwardRef((function(e,t){var n=o.useState(!1),u=(0,a.Z)(n,2),d=u[0],p=u[1],f=o.useState(null),h=(0,a.Z)(f,2),g=h[0],m=h[1],x=o.useRef(null),v=function(e){m(e)},b=function(e,t){var n=j();n&&(n.selectionStart=e,n.selectionEnd=t)},C=function(e){x.current&&x.current.focus(e)},j=function(){if(x.current)return x.current.getInputNode()},y=function(){if(x.current)return x.current.getFieldWidth()},Z=function(){if(x.current)return x.current.getCaretPosition()};o.useImperativeHandle(t,(function(){return{focus:C,getInputNode:j,forceSetSelection:b,forceSetValue:v,getFieldWidth:y,getCaretPosition:Z}}));var k=e.value,w=e.onChange,T=e.commitOnBlur,S=e.onFocus,P=e.onBlur,I=e.type,E=(0,i.Z)(e,c);return(0,l.jsx)(s.ZP,(0,r.Z)((0,r.Z)({},E),{},{type:I||"text",ref:x,value:d?g:k,onFocus:function(e){p(!0),m(k),S&&S(e)},onChange:function(e,t){m(t),T||w(t)},onBlur:function(e){w(e.currentTarget.value),p(!1),m(null),P&&P(e)}}))}));t.Z=u},75087:function(e,t,n){"use strict";var r=n(29439),i=n(36600),a=n(28381),o=n(90264),s=n(51598),l=n(61325),c=n(60022),u=n(2066),d=n(22537),p=n(20914),f=n(86278),h=n(96591),g=n(31318),m=n(29343),x={linkContainer:{display:"flex",padding:"0px 8px",alignItems:"center",justifyContent:"space-between",borderRadius:4,minWidth:0,flex:1}};t.Z=function(e){var t=e.url,n=e.withOpenButton,v=a.useState(!1),b=(0,r.Z)(v,2),C=b[0],j=b[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(l.pJ,{alignItems:"center",noMargin:!0,children:[(0,m.jsx)(p.Z,{style:x.linkContainer,background:"light",children:(0,m.jsxs)(l.pJ,{alignItems:"center",justifyContent:"space-between",expand:!0,children:[(0,m.jsx)(f.Z,{noMargin:!0,style:g.t,children:(0,m.jsx)(h.Z,{href:t,onClick:function(){return u.ZP.openExternalURL(t)},children:t.replace("https://","")})}),(0,m.jsx)(s.Z,{size:"small",onClick:function(){t&&(navigator.clipboard.writeText(t),j(!0))},children:(0,m.jsx)(o.Z,{fontSize:"small"})})]})}),n&&(0,m.jsx)(c.Z,{primary:!0,id:"open-online-export-button",label:(0,m.jsx)(i.Trans,{id:"Open"}),onClick:function(){t&&u.ZP.openExternalURL(t)}})]}),(0,m.jsx)(d.Z,{message:(0,m.jsx)(i.Trans,{id:"Copied to clipboard!"}),visible:C,hide:function(){return j(!1)}})]})}},10928:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(28381),i=n(17358),a=n(90569),o=n(83126),s=n(7614),l=n(48651),c=n(81476),u=n(91622),d=n(22853),p=n(42839),f=n(45658),h=n(1413),g=n(78118),m=n(29343),x=r.memo((function(e){return(0,m.jsxs)(g.Z,(0,h.Z)((0,h.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.75 6.5C6.05964 6.5 5.5 7.05964 5.5 7.75V16.25C5.5 16.9404 6.05964 17.5 6.75 17.5H17.25C17.9404 17.5 18.5 16.9404 18.5 16.25V7.75C18.5 7.05964 17.9404 6.5 17.25 6.5H6.75ZM4 7.75C4 6.23122 5.23122 5 6.75 5H17.25C18.7688 5 20 6.23122 20 7.75V16.25C20 17.7688 18.7688 19 17.25 19H6.75C5.23122 19 4 17.7688 4 16.25V7.75Z",fill:"currentColor"}),(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.93825 6.00308C5.21269 5.69283 5.68668 5.66381 5.99692 5.93826L12 11.2487L18.0031 5.93826C18.3133 5.66381 18.7873 5.69283 19.0617 6.00308C19.3362 6.31332 19.3072 6.78731 18.9969 7.06176L12.4969 12.8118C12.2132 13.0628 11.7868 13.0628 11.5031 12.8118L5.00306 7.06176C4.69282 6.78731 4.6638 6.31332 4.93825 6.00308Z",fill:"currentColor"})]}))})),v=r.memo((function(e){return(0,m.jsxs)(g.Z,(0,h.Z)((0,h.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,m.jsx)("path",{d:"M10.2857 7.99996H8.72727C8.32561 7.99996 8 8.32557 8 8.72723C8 12.7439 11.2561 16 15.2727 16C15.6744 16 16 15.6743 16 15.2727V13.7142L14.2857 12.5714L13.3968 13.4603C13.2424 13.6147 13.0117 13.6627 12.8177 13.5625C12.4887 13.3925 11.9548 13.0732 11.4286 12.5714C10.8898 12.0576 10.5741 11.504 10.4156 11.1691C10.3268 10.9813 10.3782 10.7646 10.5251 10.6177L11.4286 9.71425L10.2857 7.99996Z",fill:"currentColor"}),(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0959 3.81886C8.57886 3.24862 4.44622 6.46626 3.87208 11.0143C3.638 12.8685 4.03143 14.6541 4.88575 16.1591C4.99604 16.3534 5.01398 16.5867 4.93467 16.7956L4.91709 16.842L4.86694 16.975C4.82374 17.0898 4.76211 17.2542 4.68857 17.452C4.54138 17.8478 4.34699 18.3763 4.15733 18.9088C4.0314 19.2623 3.90884 19.6141 3.80397 19.9282C4.08842 19.8473 4.40246 19.7525 4.71771 19.6526C5.2306 19.4901 5.73313 19.3183 6.10368 19.1767C6.29155 19.1049 6.43056 19.0465 6.5164 19.0051L6.51898 19.0038C6.57464 18.9525 6.63846 18.9093 6.70887 18.8763C6.94139 18.7673 7.2135 18.7849 7.43009 18.9228L7.8409 19.1845C8.78459 19.7477 9.857 20.1296 11.0183 20.2762C15.5354 20.8465 19.668 17.6288 20.2422 13.0808C20.8163 8.53284 17.613 4.3891 13.0959 3.81886ZM7.00323 20.431C7.02271 20.4429 7.04225 20.4547 7.06183 20.4664C8.18227 21.1369 9.45554 21.5909 10.8304 21.7644C16.1762 22.4393 21.0533 18.6318 21.7303 13.2687C22.4074 7.90565 18.6296 3.00553 13.2838 2.33068C7.93799 1.65582 3.06093 5.46333 2.38389 10.8264C2.12402 12.8849 2.52081 14.8764 3.41072 16.586C3.3743 16.6832 3.33099 16.7991 3.2826 16.9292C3.13404 17.3288 2.93708 17.8642 2.74429 18.4055C2.55222 18.9447 2.36136 19.4979 2.22669 19.9301C2.1601 20.1438 2.10256 20.3427 2.06597 20.5009C2.04841 20.5769 2.03007 20.6669 2.02144 20.7543C2.01732 20.796 2.01239 20.8651 2.01963 20.9447L2.01982 20.9467C2.02406 20.9938 2.04378 21.2127 2.2184 21.4059C2.39583 21.6023 2.61428 21.6423 2.66521 21.6516C2.74789 21.6666 2.82012 21.6671 2.86316 21.6661C2.95317 21.664 3.04474 21.6514 3.11968 21.6391C3.27646 21.6131 3.4719 21.5686 3.68028 21.5156C4.10243 21.4084 4.64189 21.2502 5.17089 21.0825C5.69991 20.9149 6.23206 20.7334 6.63909 20.5779C6.76941 20.5281 6.89324 20.4786 7.00323 20.431Z",fill:"currentColor"})]}))})),b={icon:{padding:5},container:{display:"flex",flexWrap:"wrap",alignItems:"center"}},C=function(e){var t=e.url,n=(0,i.Z)((function(e){return(0,a.Z)({root:{padding:5,display:"flex",cursor:"pointer","& svg":{transition:"color 0.1s",cursor:"pointer"},"& path":{cursor:"unset"},"&:hover svg":{color:e.palette.secondary.dark},"&:focus svg":{color:e.palette.secondary.dark}}})}))();return(0,m.jsxs)("div",{style:b.container,children:[(0,m.jsx)(o.Z,{url:t,className:n.root,style:b.icon,hashtag:"#gdevelop",children:(0,m.jsx)(d.Z,{})}),(0,m.jsx)(s.Z,{url:t,className:n.root,title:"Try the game I just created with r/gdevelop",style:b.icon,children:(0,m.jsx)(f.Z,{})}),(0,m.jsx)(l.Z,{title:"Try the game I just created with GDevelop.io",hashtags:["gdevelop"],url:t,className:n.root,style:b.icon,children:(0,m.jsx)(p.Z,{})}),(0,m.jsx)(c.Z,{title:"Try the game I just created with GDevelop.io",url:t,className:n.root,style:b.icon,children:(0,m.jsx)(v,{})}),(0,m.jsx)(u.Z,{subject:"My GDevelop game",body:"Try the game I just created with GDevelop.io",url:t,className:n.root,style:b.icon,children:(0,m.jsx)(x,{})})]})}},91153:function(e,t,n){"use strict";n(28381);var r=n(26086),i=n(17358),a=n(29343),o=(0,i.Z)((function(e){return{valueLabel:{"& > span > span":{color:e.palette.secondary.contrastText}}}}));t.Z=function(e){var t=o();return(0,a.jsx)(r.Z,{classes:t,color:"secondary",marks:e.marks,valueLabelDisplay:e.valueLabelDisplay,valueLabelFormat:e.valueLabelFormat,value:e.value,scale:e.scale,track:!1,onChange:function(t,n){return e.onChange(n)},min:e.min,max:e.max,step:e.step})}},65752:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(1413),i=n(28381),a=n(24910),o=n(29343),s={dropIndicator:{borderTop:"2px solid black",height:0,marginTop:"-1px",marginBottom:"-1px",width:"100%",pointerEvents:"none",boxSizing:"border-box"}};function l(e){var t=e.canDrop,n=e.zIndex,l=i.useContext(a.Z);return(0,o.jsx)("div",{style:(0,r.Z)((0,r.Z)({},s.dropIndicator),{},{borderColor:t?l.dropIndicator.canDrop:l.dropIndicator.cannotDrop,zIndex:n||void 0})})}},36607:function(e,t,n){"use strict";n(28381);var r=n(38295),i=n(29343),a={paddingLeft:8};t.Z=function(e){var t=e.children;return t?(0,i.jsx)(r.Z,{variant:"overline",style:a,children:t}):null}},11374:function(e,t,n){"use strict";n.d(t,{Nn:function(){return C},RM:function(){return m},SC:function(){return b},bY:function(){return v},iA:function(){return g},xD:function(){return x}});var r=n(1413),i=n(15671),a=n(43144),o=n(60136),s=n(29388),l=n(28381),c=n(33114),u=n(38962),d=n(79337),p=n(98470),f=n(9940),h=n(29343),g=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(c.Z,(0,r.Z)({size:"small"},this.props))}}]),n}(l.Component),m=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(u.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),x=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(p.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),v=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(d.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),b=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(f.Z,(0,r.Z)({},this.props))}}]),n}(l.Component),C=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){return(0,h.jsx)(d.Z,(0,r.Z)({},this.props))}}]),n}(l.Component)},28894:function(e,t,n){"use strict";n.d(t,{m:function(){return h}});var r=n(1413),i=n(28381),a=n(93196),o=n(64623),s=n(69186),l=n(6996),c=n(24910),u=n(29343),d={tabs:{borderTopLeftRadius:5,borderTopRightRadius:5},tab:{flexGrow:1},selectedTab:{borderTopLeftRadius:5,borderTopRightRadius:5},tabIndicator:{height:3},tabScrollButton:{display:"none"}},p=(0,s.Z)({wrapper:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}});function f(e){var t=p();return(0,u.jsx)(o.Z,(0,r.Z)({classes:t},e))}function h(e){var t=e.value,n=e.onChange,o=e.options,s=e.variant,p=(0,l.UQ)().windowSize,h=i.useContext(c.Z),g="small"===p&&o.length>=2||"medium"===p&&o.length>=4||"large"===p&&o.length>=7||"xlarge"===p&&o.length>=8,m=g?"scrollable":"fullWidth";return(0,u.jsx)(a.Z,{variant:s||m,textColor:"primary",value:t,onChange:function(e,t){return n(t)},scrollButtons:s||g?"on":"off",style:d.tabs,TabIndicatorProps:{style:(0,r.Z)((0,r.Z)({},d.tabIndicator),{},{backgroundColor:h.tabs.indicator.backgroundColor})},TabScrollButtonProps:{style:d.tabScrollButton},children:o.map((function(e,n){var i=e.value===t,a=o.findIndex((function(e){return e.value===t})),s=0!==n&&(n-a>=2||a-n>=1);return(0,u.jsx)(f,{value:e.value,disabled:e.disabled,label:e.label,id:e.id,tabIndex:n,style:(0,r.Z)((0,r.Z)({},d.tab),i?d.selectedTab:s?{borderLeft:"1px solid ".concat(h.tabs.separator.color)}:{})},n)}))})}},31595:function(e,t,n){"use strict";var r=n(1413),i=n(29439),a=n(28381),o=n(8511),s=n(29343),l={chipContainer:{display:"flex",flexWrap:"wrap",overflowX:"auto",marginTop:4},chip:{marginRight:4,marginBottom:4}};t.Z=function(e){var t=e.tags,n=e.tagsWithLabel,c=e.onRemove,u=a.useState(null),d=(0,i.Z)(u,2),p=d[0],f=d[1],h=a.useRef([]),g=a.useCallback((function(e){var t=!!p&&p===e;return(0,r.Z)((0,r.Z)({},l.chip),{},{filter:t?"brightness(1.2)":void 0})}),[p]),m=function(e){return function(n){if(t){var r=t.indexOf(e);if(h.current.splice(r,1),n.nativeEvent instanceof KeyboardEvent){var i=Math.min(h.current.length-1,r),a=h.current[i];a&&a.current&&a.current.focus()}c(e)}}};return t&&t.length||n&&n.length?(0,s.jsxs)("div",{style:l.chipContainer,children:[t&&t.map((function(e,t){var n=a.createRef();return h.current[t]=n,(0,s.jsx)(o.Z,{size:"small",style:g(e),onBlur:function(){return f(null)},onFocus:function(){return f(e)},onDelete:m(e),label:e,ref:n},e)})),n&&n.map((function(e,t){var r,i=a.createRef();return h.current[t]=i,(0,s.jsx)(o.Z,{size:"small",style:g(e.value),onBlur:function(){return f(null)},onFocus:function(){return f(e.value)},onDelete:(r=e.value,function(e){if(n){var t=n.findIndex((function(e){return e.value===r}));if(h.current.splice(t,1),e.nativeEvent instanceof KeyboardEvent){var i=Math.min(h.current.length-1,t),a=h.current[i];a&&a.current&&a.current.focus()}c(r)}}),label:e.label,ref:i},e.value)}))]}):null}},86278:function(e,t,n){"use strict";var r=n(1413),i=n(45987),a=n(28381),o=n(38295),s=n(29343),l=["children","style","size","color","align","noShrink","noMargin","allowSelection","allowBrowserAutoTranslate","displayInlineAsSpan","displayAsListItem","tooltip","hidden"],c=function(e){switch(e){case"bold-title":return"h1";case"title":return"h2";case"section-title":return"h3";case"block-title":return"h4";case"sub-title":return"h5";case"body2":return"body2";case"body-small":return"caption";default:return"body1"}},u=function(e){switch(e){case"error":return"error";case"primary":default:return"textPrimary";case"secondary":return"textSecondary";case"inherit":return"inherit"}},d=a.forwardRef((function(e,t){var n=e.children,a=e.style,d=e.size,p=e.color,f=e.align,h=e.noShrink,g=e.noMargin,m=e.allowSelection,x=e.allowBrowserAutoTranslate,v=void 0===x||x,b=e.displayInlineAsSpan,C=e.displayAsListItem,j=e.tooltip,y=e.hidden,Z=(0,i.Z)(e,l);return(0,s.jsx)(o.Z,(0,r.Z)((0,r.Z)({variant:c(d),ref:t,translate:v?void 0:"no",color:u(p),component:b?"span":C?"li":void 0,title:j,style:(0,r.Z)((0,r.Z)({},a),{},{display:b?"inline-block":C?"list-item":void 0,flexShrink:h?0:void 0,marginTop:g?0:6,marginBottom:g?0:6,userSelect:m?"text":void 0,cursor:m?"text":void 0,visibility:y?"hidden":void 0}),align:f||"inherit"},Z),{},{children:n}))}));t.Z=d},42699:function(e,t,n){"use strict";var r=n(1413),i=n(45987),a=n(28381),o=n(51535),s=n(40243),l=n(29343),c=["label","primary","secondary","icon","rightIcon","keyboardFocused","disabled","id","allowBrowserAutoTranslate"],u=a.forwardRef((function(e,t){var n=e.label,a=e.primary,u=e.secondary,d=e.icon,p=e.rightIcon,f=e.keyboardFocused,h=e.disabled,g=e.id,m=e.allowBrowserAutoTranslate,x=void 0===m||m,v=(0,i.Z)(e,c);return(0,l.jsxs)(o.Z,(0,r.Z)((0,r.Z)({variant:"text",size:"small",translate:x?void 0:"no",color:a?"primary":u?"secondary":"default",autoFocus:f,focusRipple:!0,disabled:h,id:g},v),{},{ref:t,children:[d,d&&(0,l.jsx)(s.LZ,{}),n?(0,l.jsx)("span",{children:n}):null,p&&(0,l.jsx)(s.LZ,{}),p]}))}));t.Z=u},31318:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},29277:function(e,t,n){"use strict";n.d(t,{B2:function(){return x},P8:function(){return g}});var r=n(1413),i=n(29439),a=n(28381),o=n(36600),s=n(65512),l=n(39173),c=n(51626),u=n(57588),d=n(32832),p=n(35213),f=n(16792),h=n(29343),g=function(e){return{variant:"none"===e.margin?"standard":"filled",margin:"none"===e.margin?"none":"dense",hiddenLabel:"none"!==e.margin&&!e.floatingLabelText}},m=a.forwardRef((function(e,t){var n=a.useRef(null),m=a.useRef(null),x=a.useState(!1),v=(0,i.Z)(x,2),b=v[0],C=v[1],j=function(t){var r=n.current;if(r&&(r.focus(),t&&t.selectAll&&r.select(),t&&"end"===t.caretPosition&&e.value&&r.setSelectionRange(e.value.toString().length,e.value.toString().length),t&&Number.isInteger(t.caretPosition)&&e.value)){var i=Number(t.caretPosition);r.setSelectionRange(i,i)}},y=function(){n.current&&n.current.blur()},Z=function(){return n.current?n.current:null},k=function(){return m.current?m.current.clientWidth:null},w=function(){return n.current?n.current.selectionStart:null};a.useImperativeHandle(t,(function(){return{focus:j,blur:y,getInputNode:Z,getFieldWidth:k,getCaretPosition:w}}));var T=e.onChange||void 0,S=e.helperMarkdownText?(0,h.jsx)(d.r,{source:e.helperMarkdownText}):null,P=(0,p.bX)(),I=!!e.autoFocus&&("desktopAndMobileDevices"===e.autoFocus||P);return(0,h.jsx)(o.I18n,{children:function(t){var i=t.i18n;return(0,h.jsx)(l.Z,(0,r.Z)((0,r.Z)({ref:m,color:"secondary",type:void 0!==e.type?"password"===e.type?b?"text":"password":e.type:void 0,value:void 0!==e.value?e.value:void 0,defaultValue:void 0!==e.defaultValue?e.defaultValue:void 0,onChange:T?function(e){return T(e,e.target.value)}:void 0,onContextMenu:e.stopContextMenuPropagation?function(e){return e.stopPropagation()}:void 0,error:!!e.errorText,helperText:e.errorText||S,disabled:e.disabled,required:e.required,InputLabelProps:{shrink:!!e.floatingLabelFixed||void 0},label:e.floatingLabelText,name:e.name,placeholder:e.hintText?e.hintText:e.translatableHintText?i._(e.translatableHintText):void 0,id:e.id,autoFocus:I,multiline:e.multiline,rows:e.rows,rowsMax:e.rowsMax},g(e)),{},{fullWidth:e.fullWidth,InputProps:{disableUnderline:void 0!==e.underlineShow&&!e.underlineShow,style:{fontSize:e.style?e.style.fontSize:void 0,fontStyle:e.style?e.style.fontStyle:void 0,padding:e.style?e.style.padding:void 0},readOnly:e.readOnly,inputProps:(0,r.Z)({onKeyPress:e.onKeyPress,onKeyUp:e.onKeyUp,onKeyDown:e.onKeyDown,onClick:e.onClick,maxLength:e.maxLength,max:e.max,min:e.min,step:e.step,autoCapitalize:"off",style:e.inputStyle},(0,f.Y)(e.dataset)),endAdornment:void 0!==e.type&&"password"===e.type?(0,h.jsx)(c.Z,{position:"end",children:(0,h.jsx)(s.Z,{size:"small",onClick:function(){return C(!b)},children:(0,h.jsx)(u.Z,{})})}):e.endAdornment?(0,h.jsx)(c.Z,{position:"end",style:e.multiline?{marginTop:-17}:void 0,children:e.endAdornment}):void 0,startAdornment:e.startAdornment?(0,h.jsx)(c.Z,{position:"start",children:e.startAdornment}):void 0},style:e.style?{width:e.style.width||void 0,flex:e.style.flex||void 0,top:e.style.top||void 0}:void 0,onFocus:e.onFocus,onBlur:e.onBlur,inputRef:n,spellCheck:"false"}))}})}));t.ZP=m;var x=0},43756:function(e,t,n){"use strict";n.d(t,{E:function(){return m},Q:function(){return x}});var r=n(93433),i=n(78351),a=n(98555),o=n(18026),s=n(28381),l=n(99584),c=n(76436),u=n(59509),d=n(24910),p=n(36262),f=n(6996),h=n(29343),g=(0,c.Ue)({plugins:[].concat((0,r.Z)((0,a.Z)().plugins),[(0,u.Z)()])}),m=function(e){var t=e.children,n=s.useContext(p.ZP).values,r=n.themeName,a=n.language,o=(0,f.UQ)().isMobile,c=s.useMemo((function(){return(0,l.l)({themeName:r,language:a,isMobile:o})}),[r,a,o]);return(0,h.jsx)(i.Z,{theme:c.muiTheme,children:t})},x=function(e){var t=e.children,n=e.forcedThemeName,r=s.useContext(p.ZP).values,a=r.themeName,c=r.language,u=(0,f.UQ)().isMobile,m=n||a,x=s.useMemo((function(){var e=(0,l.l)({themeName:m,language:c,isMobile:u});try{var t=document.body;if(!t)throw new Error("Document has no body.");t.className=e.gdevelopTheme.uiRootClassName}catch(n){console.error("An error occurred while changing global theme:",n)}return e}),[m,c,u]);return(0,h.jsx)(d.Z.Provider,{value:x.gdevelopTheme,children:(0,h.jsx)(o.ZP,{jss:g,children:(0,h.jsx)(i.Z,{theme:x.muiTheme,children:t})})})}},24910:function(e,t,n){"use strict";var r=n(28381),i=n(66666),a=r.createContext(i.Z.gdevelopTheme);t.Z=a},86443:function(e,t,n){"use strict";n.d(t,{$:function(){return h},A:function(){return f}});var r=n(1413),i=(n(28381),n(48409)),a=n(38501),o=n(2066),s=n(50057),l=n.n(s),c=n(29343),u=l()("electron"),d={alignSelf:"stretch",flexShrink:0},p={alignSelf:"stretch",flexShrink:0},f=function(e){var t=e.backgroundColor,n=(0,a.Z)();(0,o.C)({onChanged:n});var s=0;if(!!u&&(0,i.z1)()&&o.ZP.isFullScreen())s=0;else{var l=navigator.windowControlsOverlay;if(l)if(l.visible)s=l.getTitlebarAreaRect().x}return s?(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)({},d),{},{width:s,backgroundColor:t||"transparent"})}):null},h=function(e){var t=e.backgroundColor,n=(0,a.Z)();(0,o.C)({onChanged:n});var s=!!u&&!(0,i.z1)()?150:0,l=navigator.windowControlsOverlay;if(l&&l.visible){var d=l.getTitlebarAreaRect(),f=d.x,h=d.width;s=window.innerWidth-f-h}return(0,c.jsx)("div",{style:(0,r.Z)((0,r.Z)({},p),{},{minWidth:s,backgroundColor:t||"transparent"})})}},57597:function(e,t,n){"use strict";var r=n(28381),i=n(19345),a=n(54204),o=n(69186),s=n(24910),l=n(29343),c=(0,o.Z)({root:{cursor:"default"},labelPlacementStart:{marginLeft:0},label:{flex:1}});t.Z=function(e){var t=e.label,n=e.toggled,u=e.onToggle,d=e.disabled,p=e.labelPosition,f=e.style,h=c(),g=function(e){var t=e.theme,n=e.toggled,r=e.disabled;return(0,o.Z)({thumb:{backgroundColor:r?t.switch.thumbColor.disabled:n?t.switch.thumbColor.toggled:t.switch.thumbColor.default},track:{backgroundColor:r?t.switch.trackColor.disabled:n?t.switch.trackColor.toggled:t.switch.trackColor.default,opacity:"1 !important"}})()}({theme:r.useContext(s.Z),toggled:n,disabled:!!d});return(0,l.jsx)(i.Z,{control:(0,l.jsx)(a.Z,{checked:n,onChange:function(e){return u(e,e.target.checked)},classes:g,color:"default"}),labelPlacement:"right"===p?"end":"start",label:t,disabled:d,classes:h,style:f})}},11123:function(e,t,n){"use strict";n.d(t,{k:function(){return u},o:function(){return l}});var r=n(1413),i=n(28381),a=n(24910),o=n(29343),s={flexShrink:0,display:"flex",overflowX:"overlay",overflowY:"hidden",paddingLeft:8,paddingRight:8,alignItems:"center",position:"relative"},l=i.memo((function(e){var t=e.children,n=e.borderBottomColor,l=e.height,c=void 0===l?40:l,u=e.paddingBottom,d=e.hidden,p=i.useContext(a.Z);return(0,o.jsx)("div",{className:"almost-invisible-scrollbar",style:(0,r.Z)((0,r.Z)((0,r.Z)({},s),{},{backgroundColor:p.toolbar.backgroundColor,height:c,borderBottom:n?"2px solid ".concat(n):void 0},u?{paddingBottom:u}:void 0),{},{visibility:d?"hidden":"visible",contentVisibility:d?"hidden":"visible",pointerEvents:d?void 0:"all"}),children:t})})),c=function(e){return{flex:1,display:"flex",alignItems:"center",justifyContent:e.spaceOut?"space-around":e.firstChild?"flex-start":e.lastChild?"flex-end":"center"}},u=i.memo((function(e){return(0,o.jsx)("span",{style:c(e),children:e.children})}))},84361:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var r=300},17271:function(e,t,n){"use strict";n.d(t,{Z:function(){return H},G:function(){return B}});var r=n(93433),i=n(29439),a=n(28381),o=n(2860),s=n(82723),l=n(72717),c=n(32628),u=n(6996),d=n(1413),p=n(4942),f=n(65752),h=n(51598),g=n(25638),m=n(84900),x=n(68262),v=n(74044),b=n(38501),C=n(65111),j=n(61804),y=n(39631),Z=n(16792),k=n(82954),w=n.n(k),T=n(45987),S=n(36600),P=n(51535),I=n(40243),E=n(29343),M=["label","icon","disabled"],L=a.forwardRef((function(e,t){var n=e.label,r=e.icon,i=e.disabled,a=(0,T.Z)(e,M);return(0,E.jsx)(S.I18n,{children:function(e){var o=e.i18n;return(0,E.jsxs)(P.Z,(0,d.Z)((0,d.Z)({variant:"contained",size:"small",disableElevation:!0,color:"primary",focusRipple:true,disabled:i,style:{minWidth:n?void 0:0,padding:n?"2px 8px 2px 2px":"2px 2px 2px 2px",marginRight:n?2:0,flexShrink:0}},a),{},{ref:t,children:[r,!!r&&!!n&&(0,E.jsx)(I.LZ,{}),n?(0,E.jsx)("span",{children:o._(n)}):null]}))}})})),A=function(e){return e.stopPropagation()},O=function(e){(B.includes(e.key)||(0,C.W$)(e))&&e.stopPropagation()},R=function(e){var t=e.initialValue,n=e.onEndRenaming,r=e.onBlur,o=a.useState(t),s=(0,i.Z)(o,2),c=s[0],u=s[1],d=a.useRef(null);return a.useEffect((function(){d.current&&d.current.select()}),[]),a.useEffect((function(){return r}),[r]),(0,E.jsx)("div",{className:l.Z.itemNameInputContainer,children:(0,E.jsx)("input",{autoFocus:!0,ref:d,type:"text",className:l.Z.itemNameInput,value:c,spellCheck:!1,onChange:function(e){u(e.currentTarget.value)},onClick:A,onDoubleClick:A,onBlur:function(){n(c)},onKeyDown:O,onKeyUp:function(e){(0,C.W$)(e)?(e.preventDefault(),n(t)):(0,C.ph)(e)&&n(c)}})})},F=(0,s.Z)((function(e,t){return t()})),D=function(e){var t=e.data,n=e.index,r=e.style,o=t.flattenedData,s=t.onOpen,c=t.onClick,u=t.onSelect,C=t.onBlurField,k=t.onEndRenaming,T=t.renamedItemId,S=t.onContextMenu,P=t.canDrop,I=t.onDrop,M=t.onEditItem,A=t.isMobile,O=t.DragSourceAndDropTarget,D=t.getItemHtmlId,N=t.forceDefaultDraggingPreview,_=t.shouldSelectUponContextMenuOpening,B=o[n],U=16*B.depth,V=(0,b.Z)(),H=a.useRef(!1),z=a.useRef(null),W=a.useState("before"),G=(0,i.Z)(W,2),Y=G[0],q=G[1],J=a.useRef(null),X=a.useCallback((function(e){var t=e.clientX,r=e.clientY;S({index:n,item:B.item,x:t,y:r})}),[S,n,B.item]),K=(0,y.i)(X,{delay:1e3}),Q=a.useCallback((function(e){B&&!B.item.isPlaceholder&&(B.item.isRoot?s(B):(u({node:B,exclusive:!(e.metaKey||e.ctrlKey)}),c(B)))}),[c,u,B,s]),$=a.useCallback((function(e){B&&B.hasChildren&&!B.disableCollapse&&s(B)}),[B,s]),ee=a.useCallback((function(e){B.item.isRoot||Q(e),X(e)}),[B,Q,X]),te=a.useCallback((function(e,t){!t&&e||e!==H.current&&(H.current=e,V())}),[V]);a.useEffect((function(){if(H.current&&!z.current&&B.canHaveChildren&&B.collapsed)return z.current=setTimeout((function(){s(B)}),800),function(){clearTimeout(z.current),z.current=null}}),[s,B,V,H.current]);var ne=a.useCallback((function(e){k(B.item,e)}),[k,B.item]),re=a.useCallback((function(){if(J.current)return J.current.getBoundingClientRect().top}),[]),ie=B.canHaveChildren,ae=new Image;return ae.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",(0,E.jsx)("div",{style:r,ref:J,children:(0,E.jsx)(O,{beginDrag:function(){return B.selected||u({node:B,exclusive:!B.selected}),N||"string"!==typeof B.name||ie?{}:{name:B.name,thumbnail:B.thumbnailSrc||void 0,is3D:!!B.item.content&&!!B.item.content.is3D&&B.item.content.is3D()}},canDrag:function(){return!B.item.isRoot&&!B.item.isPlaceholder&&T!==B.id},canDrop:P?function(){return P(B.item,Y)}:function(){return!0},drop:function(){I(B.item,Y)},hover:function(e){if(B.item.isRoot)"inside"!==Y&&q("inside");else{var t=e.getClientOffset().y,n=F(Math.floor(Date.now()/1e3),re);n&&(ie?B.collapsed?q(t-n<=6?"before":t-n<=38?"inside":"after"):q(t-n<=6?"before":"inside"):q(t-n<=16?"before":"after"))}},children:function(e){var t,r,i=e.connectDragSource,a=e.connectDropTarget,o=e.connectDragPreview,c=e.isOver,u=e.canDrop;te(c,u);var b=(0,E.jsxs)("div",{className:w()(l.Z.rowContentSide,(t={},(0,p.Z)(t,l.Z.rowContentSideLeft,!B.item.isRoot),(0,p.Z)(t,l.Z.rowContentExtraPadding,!ie),t)),children:[ie?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(h.Z,{size:"small",onClick:function(e){e.stopPropagation(),s(B)},disabled:B.disableCollapse,children:B.collapsed?(0,E.jsx)(m.Z,{viewBox:"2 2 12 12",fontSize:"small"}):(0,E.jsx)(g.Z,{viewBox:"2 2 12 12",fontSize:"small"})}),B.thumbnailSrc&&"FOLDER"!==B.thumbnailSrc?(0,E.jsx)("div",{className:l.Z.thumbnail,children:(0,E.jsx)(v.Z,{iconSize:20,src:B.thumbnailSrc})}):!B.item.isRoot&&(0,E.jsx)(x.Z,{className:l.Z.folderIcon})]}):B.thumbnailSrc?(0,E.jsx)("div",{className:l.Z.thumbnail,children:(0,E.jsx)(v.Z,{iconSize:20,src:B.thumbnailSrc})}):null,T===B.id&&"string"===typeof B.name?(0,E.jsx)(R,{initialValue:B.name,onEndRenaming:ne,onBlur:C}):(0,E.jsx)("span",{className:w()(l.Z.itemName,(r={},(0,p.Z)(r,l.Z.rootFolder,B.item.isRoot),(0,p.Z)(r,l.Z.placeholder,B.item.isPlaceholder),r),B.extraClass),children:B.name})]});"string"!==typeof B.name||ie?b=o(b):o(ae);var y=Array.isArray(B.rightButton)?B.rightButton:B.rightButton?[B.rightButton]:[],k=!B.shouldHideMenuIcon&&!A&&(!B.item.isRoot||null!==B.shouldHideMenuIcon)&&!B.item.isPlaceholder,P=i((0,E.jsxs)("div",{className:l.Z.fullSpaceContainer,children:[c&&"before"===Y&&(0,E.jsx)(f.Z,{canDrop:u}),(0,E.jsxs)("div",(0,d.Z)((0,d.Z)({className:l.Z.rowContent,onDoubleClick:M?function(){return M(B.item)}:void 0,onContextMenu:_?ee:X},K),{},{children:[b,(B.rightComponent||y.length>0||k)&&(0,E.jsxs)("div",{className:w()(l.Z.rowContentSide,l.Z.rowContentSideRight),children:[B.rightComponent,y.map((function(e){return e.primary?(0,E.jsx)(L,{id:e.id,onClick:function(t){t.stopPropagation(),e.click&&e.click()},label:e.showPrimaryLabel?e.label:null,disabled:void 0!==e.enabled&&!e.enabled,icon:e.icon},e.id):(0,E.jsx)(h.Z,{id:e.id,size:"small",onClick:function(t){t.stopPropagation(),e.click&&e.click()},tooltip:e.label,disabled:void 0!==e.enabled&&!e.enabled,children:e.icon},e.id)})),k&&(0,E.jsx)(h.Z,{size:"small",onClick:function(e){e.stopPropagation(),S({item:B.item,index:n,x:e.clientX,y:e.clientY})},children:(0,E.jsx)(j.Z,{})})]})]})),c&&"after"===Y&&(0,E.jsx)(f.Z,{canDrop:u})]})),I=c&&"inside"===Y&&ie&&!B.item.isRoot?u?l.Z.withCanDropInsideIndicator:l.Z.withCannotDropInsideIndicator:null,O=a((0,E.jsx)("div",(0,d.Z)((0,d.Z)({id:D?D(B.item,n):void 0,onClick:Q,onDoubleClick:$,className:w()(l.Z.rowContainer,I,(0,p.Z)({},l.Z.selected,B.selected)),"aria-selected":B.selected,"aria-expanded":!!ie&&!B.collapsed},(0,Z.Y)(B.dataset)),{},{children:P})));return(0,E.jsx)("div",{style:{paddingLeft:U},className:w()(l.Z.fullHeightFlexContainer,(0,p.Z)({},l.Z.withDivider,B.item.isRoot&&n>0)),children:O})}})})},N=a.memo(D,o.wy),_=n(43228),B=["ArrowDown","ArrowUp","ArrowRight","ArrowLeft","Enter"],U=(0,s.Z)((function(e,t,n,r,i,a,o,s,l,c,u,d,p,f,h,g){return{onOpen:t,onClick:n,onSelect:r,onBlurField:i,flattenedData:e,onEndRenaming:a,renamedItemId:o,onContextMenu:s,canDrop:l,onDrop:c,onEditItem:u,isMobile:d,DragSourceAndDropTarget:p,getItemHtmlId:f,forceDefaultDraggingPreview:h,shouldSelectUponContextMenuOpening:g}})),V=function(e,t){var n=e.height,s=e.width,d=e.items,p=e.searchText,f=e.getItemName,h=e.getItemId,g=e.getItemHtmlId,m=e.getItemChildren,x=e.getItemThumbnail,v=e.getItemDataset,C=e.onEditItem,j=e.buildMenuTemplate,y=e.getItemRightButton,Z=e.renderRightComponent,k=e.selectedItems,w=e.onClickItem,T=e.onSelectItems,S=e.multiSelect,P=e.onRenameItem,I=e.onCollapseItem,M=e.onMoveSelectionToItem,L=e.canMoveSelectionToItem,A=e.reactDndType,O=e.forceAllOpened,R=e.initiallyOpenedNodeIds,F=e.arrowKeyNavigationProps,D=e.forceDefaultDraggingPreview,V=e.shouldSelectUponContextMenuOpening,H=e.shouldHideMenuIcon,z=k.map(h),W=a.useState(R||[]),G=(0,i.Z)(W,2),Y=G[0],q=G[1],J=a.useState(null),X=(0,i.Z)(J,2),K=X[0],Q=X[1],$=a.useRef(null),ee=a.useRef(null),te=a.useRef(null),ne=a.useState([]),re=(0,i.Z)(ne,2),ie=re[0],ae=re[1],oe=(0,u.UQ)().isMobile,se=(0,b.Z)(),le=a.useState(""),ce=(0,i.Z)(le,2),ue=ce[0],de=ce[1],pe=!!p,fe=a.useCallback((function(e,t,n,i){var a=h(e),o=m(e),s=Array.isArray(o),c=!O&&!Y.includes(a),u=ie.includes(a),d=[];o&&(O||!c||n||u)&&(d=o.map((function(e){return fe(e,t+1,n,u)})).flat());var p=f(e),g=Z&&Z(e),b=y&&y(e),C=v?v(e):void 0,j=ue&&a===ue?l.Z.animate:"";if(!n||O||i||"string"===typeof p&&p.toLowerCase().includes(n)||d.length>0){var k=x?x(e):null,w=z.includes(a);return[{id:a,name:p,rightComponent:g,rightButton:b,shouldHideMenuIcon:H?H(e):null,hasChildren:!!o&&o.length>0,canHaveChildren:s,depth:t,selected:w,thumbnailSrc:k,dataset:C,item:e,extraClass:j,collapsed:n?0===d.length||!u:c,disableCollapse:!!n&&d.length>0&&!u}].concat((0,r.Z)(d))}return[]}),[h,m,O,Y,ie,f,Z,y,v,ue,x,z,H]),he=a.useCallback((function(e,t){return e.map((function(e){return fe(e,0,t,!1)})).flat()}),[fe]),ge=a.useCallback((function(e){pe?e.collapsed?ae([].concat((0,r.Z)(ie),[e.id])):O||ae(ie.filter((function(t){return t!==e.id}))):e.collapsed?q([].concat((0,r.Z)(Y),[e.id])):O||(I&&I(e.item),q(Y.filter((function(t){return t!==e.id}))))}),[ie,Y,pe,O,I]),me=a.useCallback((function(e){var t=e.node,n=e.exclusive;if(S)if(t.selected)if(n){if(1===k.length)return;T([t.item])}else T(k.filter((function(e){return e!==t.item})));else T(n?[t.item]:[].concat((0,r.Z)(k),[t.item]));else{if(t.selected&&1===k.length)return;T([t.item])}}),[S,T,k]),xe=a.useCallback((function(e){w&&w(e.item)}),[w]),ve=a.useMemo((function(){return he(d,p?p.toLowerCase():null)}),[he,d,p]),be=a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smart",n=te.current;if(n){var r=ve.findLastIndex((function(t){return t.id===e}));r>=0&&n.scrollToItem(r,t)}}),[ve]),Ce=a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smart";return be(h(e),t)}),[h,be]),je=a.useCallback((function(e){Q(h(e))}),[h]),ye=a.useCallback((function(e){Q(e)}),[]),Ze=a.useCallback((function(e){var t=e.filter((function(e){return!Y.includes(e)}));t.length>0&&q([].concat((0,r.Z)(Y),(0,r.Z)(t)))}),[Y]),ke=a.useCallback((function(e){var t=Y.filter((function(t){return!e.includes(t)}));q(t)}),[Y]),we=a.useCallback((function(e){de(h(e))}),[h]),Te=a.useCallback((function(e){de(e)}),[]),Se=a.useCallback((function(e){var t=e.map(h),n=new Set(Y);return t.map((function(e){return n.has(e)}))}),[Y,h]),Pe=a.useCallback((function(e){var t=new Set(Y);return e.map((function(e){return t.has(e)}))}),[Y]);a.useEffect((function(){if(ue){var e=setTimeout((function(){return de("")}),400);return function(){return clearTimeout(e)}}}),[ue]),a.useImperativeHandle(t,(function(){return{forceUpdateList:se,scrollToItem:Ce,scrollToItemFromId:be,renameItem:je,renameItemFromId:ye,openItems:Ze,closeItems:ke,animateItem:we,animateItemFromId:Te,areItemsOpen:Se,areItemsOpenFromId:Pe}}));var Ie=a.useMemo((function(){return(0,_.x)(A,{vibrate:100})}),[A]),Ee=a.useCallback((function(e){var t=e.x,n=e.y,r=e.item,i=e.index;$.current&&$.current.open(t,n,{item:r,index:i})}),[]),Me=a.useCallback((function(){ee.current&&ee.current.focus()}),[]),Le=U(ve,ge,xe,me,Me,(function(e,t){var n=t.trim();Q(null),n&&f(e)!==n&&P(e,n)}),K,Ee,L,M,C,oe,Ie,g,D,V);a.useEffect((function(){(!p||p.length>0)&&ae([])}),[p]);var Ae=a.useCallback((function(e){if(B.includes(e.key)){var t,n=k[0],r=-1;if(n&&(r=ve.findIndex((function(e){return e.id===h(n)}))),-1===r){for(var i=0,a=ve[i];a&&(a.item.isRoot||a.item.isPlaceholder);)(i+=1)>ve.length-1&&(a=null),a=ve[i];a&&(t=a.item)}else if("ArrowDown"===e.key){if(e.preventDefault(),r<ve.length-1){for(var o=1,s=ve[r+o];s&&(s.item.isRoot||s.item.isPlaceholder);)r+o>ve.length-1&&(s=null),s=ve[r+(o+=1)];s&&(t=s.item)}}else if("ArrowUp"===e.key){if(e.preventDefault(),r>0){for(var l=-1,c=ve[r+l];c&&(c.item.isRoot||c.item.isPlaceholder);)r+l<0&&(c=null),c=ve[r+(l-=1)];c&&(t=c.item)}}else if("ArrowRight"===e.key&&F){e.preventDefault();var u=ve[r];u.canHaveChildren&&u.collapsed?Ze([u.id]):t=F.onGetItemInside(n)}else if("ArrowLeft"===e.key&&F){e.preventDefault();var d=ve[r];d.canHaveChildren&&!d.collapsed?ke([d.id]):t=F.onGetItemOutside(n)}else if("Enter"===e.key){e.preventDefault();var p=ve[r];w&&w(p.item)}t&&(Ce(t),T([t]))}}),[k,F,ve,h,Ze,ke,w,Ce,T]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{tabIndex:0,className:l.Z.treeView,onKeyDown:Ae,ref:ee,children:(0,E.jsx)(o.t7,{height:n,itemCount:ve.length,itemSize:32,width:"number"===typeof s?s:"100%",itemKey:function(e){return ve[e].id},itemData:Le,ref:te,overscanCount:20,children:N})}),(0,E.jsx)(c.Z,{ref:$,buildMenuTemplate:function(e,t){return j(t.item,t.index)}})]})},H=a.forwardRef(V)},36595:function(e,t,n){"use strict";var r=n(28381),i=n(36600),a=n(42699),o=n(2066),s=n(72291),l=n(81730),c=n(92078),u=n(29343);t.Z=function(e){var t=r.useContext(s.n).tutorials;if(!t||!e.tutorialId)return e.renderIfNotFound||null;var n=t.find((function(t){return t.id===e.tutorialId}));return n?(0,u.jsx)(i.I18n,{children:function(t){var r=t.i18n;return(0,u.jsx)(a.Z,{onClick:function(){var e=(0,c.a)(r,n.linkByLocale)||n.link;e&&o.ZP.openExternalURL(e)},target:"_blank",label:e.label||(0,u.jsx)(i.Trans,{id:"Tutorial"}),icon:(0,u.jsx)(l.Z,{})})}}):(console.warn("Tutorial with id ".concat(e.tutorialId||""," not found")),e.renderIfNotFound||null)}},78265:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(89267),o=n(51535),s=n(16792),l=n(24289),c=n(40243),u=n(29343),d=i.forwardRef((function(e,t){var n=e.leftButton,d=e.rightButton,p=e.onChange,f=e.value,h=e.disabled,g=i.useRef(null),m=i.useCallback((function(){g.current&&(0,l.o)(g.current)}),[]);i.useImperativeHandle(t,(function(){return{focusLeftButton:m}}));var x=f===n.value,v=x?{effective:"true"}:void 0,b=x?void 0:{effective:"true"};return(0,u.jsxs)(a.Z,{size:"small",disableElevation:!0,disabled:h,children:[(0,u.jsxs)(o.Z,(0,r.Z)((0,r.Z)({id:n.id},(0,s.Y)(v)),{},{variant:x?"contained":"outlined",color:x?"secondary":"default",onClick:function(){return p(n.value)},ref:g,children:[n.icon,n.icon&&n.label&&(0,u.jsx)(c.LZ,{}),n.label]})),(0,u.jsxs)(o.Z,(0,r.Z)((0,r.Z)({id:d.id},(0,s.Y)(b)),{},{variant:x?"outlined":"contained",color:x?"default":"secondary",onClick:function(){return p(d.value)},children:[d.icon,d.icon&&d.label&&(0,u.jsx)(c.LZ,{}),d.label]}))]})}));t.Z=d},47221:function(e,t,n){"use strict";n(28381);var r=n(36600),i=n(46538),a=n(73298),o=n(40243),s=n(86278),l=n(51598),c=n(53162),u=n(53358),d=n(29343);t.Z=function(e){var t=e.username,n=e.fullName,p=e.email,f=e.level,h=e.onDelete,g=e.disabled;return(0,d.jsx)(r.I18n,{children:function(e){var m=e.i18n;return(0,d.jsxs)(o.x1,{justifyContent:"space-between",children:[(0,d.jsxs)(o.x1,{noMargin:!0,expand:!0,children:[(0,d.jsx)(i.Z,{src:(0,a.y)(p,{size:40})}),(0,d.jsxs)(o.sg,{expand:!0,justifyContent:"flex-end",children:[(t||n)&&(0,d.jsx)(s.Z,{noMargin:!0,children:n?t?(0,d.jsx)(r.Trans,{id:"{fullName} ({username})",values:{fullName:n,username:t}}):n:t}),(0,d.jsx)(s.Z,{noMargin:!0,color:"secondary",children:p})]})]}),(0,d.jsx)(o.sg,{children:!!f&&(0,d.jsx)(s.Z,{color:"secondary",children:m._((0,u.R)(f))})}),h&&(0,d.jsx)(o.sg,{noMargin:!0,children:(0,d.jsx)(l.Z,{size:"small",onClick:h,disabled:g,children:(0,d.jsx)(c.Z,{})})})]})}})}},95074:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var r=n(1413),i=(n(28381),n(51535)),a=n(40243),o=n(29343),s=30,l={button:{justifyContent:"start",minWidth:0,minHeight:s,padding:"4px 6px",fontWeight:400,transition:"none"},buttonWithoutLabel:{marginTop:10,justifyContent:"center"},iconWrapperWithoutLabel:{justifyContent:"center",display:"flex"},iconWrapperWithLabel:{padding:"3px 8px",justifyContent:"center",display:"flex"}};t.Z=function(e){var t=e.label,n=e.getIcon,s=e.onClick,c=e.isActive,u=e.hideLabel,d=e.id;return(0,o.jsxs)(i.Z,{variant:c?"contained":"text",size:"small",style:(0,r.Z)((0,r.Z)({},l.button),u?l.buttonWithoutLabel:{}),fullWidth:!0,onClick:s,color:c?"primary":"default",id:d,disableElevation:!0,children:[(0,o.jsx)("div",{style:u?l.iconWrapperWithoutLabel:l.iconWrapperWithLabel,children:n({color:c?"inherit":"secondary",fontSize:"small"})}),!u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.LZ,{}),(0,o.jsx)("span",{children:t})]})]})}},53358:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var r=function(e){switch(e){case"owner":return{id:"Owner"};case"writer":return{id:"Read & Write"};case"reader":return{id:"Read only"};default:return e}}},51137:function(e,t,n){"use strict";n.d(t,{PN:function(){return a},ZA:function(){return s},e_:function(){return o}});var r=n(74165),i=n(15861),a=function(){return!1},o=function(e){return null},s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},37054:function(e,t,n){"use strict";n.d(t,{j:function(){return a},z:function(){return o}});var r=n(29439),i=n(28381),a=function(e){var t=e.blob,n=e.children,a=i.useState(""),o=(0,r.Z)(a,2),s=o[0],l=o[1],c=i.useState(null),u=(0,r.Z)(c,2),d=u[0],p=u[1];return i.useEffect((function(){t&&t!==d&&(l(URL.createObjectURL(t)),p(t))}),[t,d]),i.useEffect((function(){return function(){s&&URL.revokeObjectURL(s)}}),[s]),n(s)},o=function(e,t){var n=document.body;if(n){var r=document.createElement("a");n.appendChild(r),r.style.display="none",r.href=e,r.download=t,r.click(),n.removeChild(r)}}},81303:function(e,t,n){"use strict";n.d(t,{At:function(){return u},R7:function(){return c},Um:function(){return p},oT:function(){return d}});var r=n(74165),i=n(15861),a=n(85919),o=n(38428),s=n.n(o),l=function(e,t,n){if(e.startsWith("data:")||e.startsWith("blob:"))return e;var r=-1===e.indexOf("?")?"?":"&";return e+r+t+"="+n},c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,o,c,u,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlContainers,o=t.onProgress,c=0,e.next=4,s().withConcurrency(20).for(n).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i,s,u,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.url,e.prev=1,s=l(i,"gdUsage","export"),e.next=5,fetch(s,{credentials:(0,a.bc)(s)?"include":"same-origin"});case 5:if((u=e.sent).ok){e.next=8;break}throw new Error('Error while downloading "'.concat(s,'" (status: ').concat(u.status,")"));case 8:return e.next=10,u.blob();case 10:return d=e.sent,p={item:t,blob:d},e.abrupt("return",p);case 15:return e.prev=15,e.t0=e.catch(1),f={item:t,error:e.t0},e.abrupt("return",f);case 19:return e.prev=19,o(c++,n.length),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t){return e.apply(this,arguments)}}());case 4:return u=e.sent,d=u.results,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e,t){return e.map((function(e){var n=e.item,r=e.blob,i=e.error;return i||!r?(t(n.resource.getName(),i||new Error("Unknown error during download")),null):{resource:n.resource,file:new File([r],n.filename,{type:r.type})}})).filter(Boolean)};function d(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(r.result)},r.onerror=function(e){return n(r.error)},r.onabort=function(e){return n(new Error("Read aborted"))},r.readAsDataURL(e)}))}function p(e){var t=e.split(",");if(t.length<2)return null;for(var n=t[0].match(/:(.*?);/),r=n?n[1]:"application/octet-stream",i=atob(t[1]),a=i.length,o=new Uint8Array(a);a--;)o[a]=i.charCodeAt(a);return new Blob([o],{type:r})}},29514:function(){throw new Error("This is a fake @blueprintjs/core (or @blueprintjs/icons) package that is just throwing an error. It's used by react-mosaic, which will fallback to using something else.This is useful for avoiding webpack/create-react-app warnings in the developmentconsole about a missing package - while avoiding to import blueprint.")},96826:function(e,t,n){"use strict";n.d(t,{I:function(){return d},f:function(){return p}});var r=n(74165),i=n(15861),a=n(20392),o=n(81303),s=n(70983),l=n.n(s),c=n(95562);function u(e,t,n){if(e.length){var r=0;!function i(){t(e[r],(function(){++r>=e.length?n():i()}))}()}else n()}var d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,i=t.onProgress,e.next=3,(0,o.R7)({urlContainers:n.filter((function(e){return-1===e.url.indexOf(".h")})),onProgress:i});case 3:if(a=e.sent,!(s=a.filter((function(e){return!!e.error||!e.blob}))).length){e.next=8;break}throw l=s.map((function(e){var t=e.error;return t?t.message:"Unknown error during download."})).filter(Boolean).join(",\n"),new Error("Could not download ".concat(s.length," files:\n ").concat((0,c.S)(l,300)));case 8:return e.abrupt("return",a.map((function(e){var t=e.item;return{blob:e.blob,filePath:t.filePath}})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,s,c,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.textFiles,i=t.blobFiles,o=t.basePath,s=t.onProgress,c=t.sizeLimit,e.next=3,(0,a.k)();case 3:return d=e.sent,p=0,f=i.length+n.length,e.abrupt("return",new Promise((function(e,t){d.createWriter(new d.BlobWriter("application/zip"),(function(r){u(i,(function(e,t){var n=e.filePath,i=e.blob,a=l().relative(o,n);r.add(a,new d.BlobReader(i),(function(){p++,s(p,f),t()}),(function(){}))}),(function(){u(n,(function(e,t){var n=e.filePath,i=e.text,a=l().relative(o,n);r.add(a,new d.TextReader(i),(function(){p++,s(p,f),t()}),(function(){}))}),(function(){r.close((function(n){var r=n.size;if(c&&r>c){var i=Math.round(r/1e6);t(new Error("Archive is of size ".concat(i," MB, which is above the limit allowed of ").concat(c/1e6," MB.")))}e(n)}))}))}))}),(function(e){console.error("Error while making zip:",e),t(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},26926:function(e,t,n){"use strict";n.d(t,{T:function(){return c},Z:function(){return d}});var r=n(15671),i=n(43144),a=n(50057),o=n.n(a)()("electron"),s=o?o.clipboard:null,l="",c=function(e){return navigator.clipboard.writeText(e)},u=function(e){return"GDEVELOP_"+e+"_CLIPBOARD_KIND-jsBdHbLy912y8Rc"},d=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,null,[{key:"set",value:function(e,t){var n=JSON.stringify({"000kind":u(e),content:t});s?s.writeText(n):l=n}},{key:"has",value:function(e){return 12===(s?s.readText():l).indexOf(u(e))}},{key:"get",value:function(t){if(!e.has(t))return null;var n="";n=s?s.readText():l;try{return JSON.parse(n).content}catch(r){return console.warn("The clipboard content is not valid JSON"),null}}}]),e}()},85919:function(e,t,n){"use strict";n.d(t,{WN:function(){return s},bc:function(){return o},yk:function(){return a}});var r=n(48409),i=n(34517),a=function(e){return e.startsWith("https://project-resources.gdevelop.io/")||e.startsWith("https://project-resources-dev.gdevelop.io/")},o=function(e){return!(0,r._F)()&&!!a(e)},s=function(e){return(0,r._F)()&&a(e)?(0,i.so)(e):e}},39909:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=null,i=function(){return r||(r=n.g.CSS.supports("image-rendering: crisp-edges")?"crisp-edges":"pixelated")}},58336:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},68107:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{noNullDuration:!0}).noNullDuration,n=Math.floor(e/3600);if(n>0){var r=Math.floor((e-3600*n)/60),i=Math.ceil(e-3600*n-60*r);return"".concat(n,":").concat(r.toFixed(0).padStart(2,"0"),":").concat(i.toFixed(0).padStart(2,"0"))}var a=Math.floor(e/60),o=(t?Math.ceil:Math.round)(e-60*a);return"".concat(a,":").concat(o.toFixed(0).padStart(2,"0"))}},32677:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var r=/^(.+)@(.+)$/},51771:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var r=function(e,t){if(!t)return e;switch(e){case"Ads":return t._({id:"Ads"});case"Visual effect":return t._({id:"Visual effect"});case"Text":return t._({id:"Text"});case"Audio":return t._({id:"Audio"});case"Advanced":return t._({id:"Advanced"});case"Camera":return t._({id:"Camera"});case"Input":return t._({id:"Input"});case"Game mechanic":return t._({id:"Game mechanic"});case"Movement":return t._({id:"Movement"});case"Network":return t._({id:"Network"});case"Third-party":return t._({id:"Third-party"});case"User interface":return t._({id:"User interface"});case"General":return t._({id:"General"});default:return e}}},11896:function(e,t,n){"use strict";n.d(t,{Lv:function(){return p},XB:function(){return c},ZF:function(){return h},dY:function(){return u},nG:function(){return d}});var r=n(29439),i=n(37762),a=n(55736),o=n.n(a),s=n(335),l=n.n(s),c=function(e,t){return!t||o()(e,t,{includePrerelease:!0})},u=function(e,t){if(!t.changelog)return[];var n,r=[],a=(0,i.Z)(t.changelog);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.version,c=o.breaking;c&&l()(s,e)&&r.push({version:s,changes:c})}}catch(u){a.e(u)}finally{a.f()}return r},d=function(e){var t,n="",a=(0,i.Z)(e);try{for(a.s();!(t=a.n()).done;){var o=(0,r.Z)(t.value,2),s=o[0],l=o[1];n+="- "+s.fullName+"\n",n+=p(l,"  ")}}catch(c){a.e(c)}finally{a.f()}return n},p=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="",a=(0,i.Z)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;r+=f(o.changes,n)}}catch(s){a.e(s)}finally{a.f()}return r},f=function(e,t){return t+e.replace(/\n/g,"\n"+t)+"\n"},h=function(e,t){if(!t.changelog)return"";var n,r=[],a=(0,i.Z)(t.changelog);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.version,c=o.breaking;c&&!l()(s,e)&&r.push({version:s,changes:c})}}catch(x){a.e(x)}finally{a.f()}for(var u="",d=0,p=r;d<p.length;d++){var h=p[d],g=h.version,m=h.changes;u+="- "+g+"\n",u+=f(m,"  ")}return u}},4217:function(e,t,n){"use strict";n.d(t,{fZ:function(){return f},y:function(){return p},zn:function(){return d}});var r=n(74165),i=n(15861),a=n(50057),o=n.n(a),s=o()("fs"),l=s?s.promises:null,c=o()("@electron/remote"),u=c?c.dialog:null,d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:return e.prev=2,e.next=5,l.readFile(t,{encoding:"utf8"});case 5:return n=e.sent,i=JSON.parse(n),e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(2),new Error(t+" is a corrupted/malformed file.");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.title,n=e.properties,r=e.message,i=e.filters;if(!u)return Promise.reject("Not supported");var a=c.getCurrentWindow();return u.showOpenDialog(a,{title:t,properties:n,message:r,filters:i}).then((function(e){var t=e.filePaths;return t&&t.length?t[0]:null}))},f=function(e){var t=e.title,n=e.properties,r=e.message,i=e.filters;if(!u)return Promise.reject("Not supported");var a=c.getCurrentWindow();return u.showOpenDialog(a,{title:t,properties:n,message:r,filters:i}).then((function(e){return e.filePaths}))}},72702:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var r=/[/?<>\\:*|"]/g,i=/[\x00-\x1f\x80-\x9f]/g,a=/^\.+$/,o=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,s=/[. ]+$/,l=/[&$+/=?@#]/g,c=/[|^%]/g,u="_";function d(e){return e.replace(r,u).replace(l,u).replace(c,u).replace(i,u).replace(a,u).replace(o,u).replace(s,u)}},84140:function(e,t,n){"use strict";n.d(t,{$l:function(){return j},Dz:function(){return C},FV:function(){return g},Fm:function(){return D},Lj:function(){return F},N:function(){return T},N$:function(){return L},O3:function(){return h},QR:function(){return E},R5:function(){return b},Tm:function(){return I},V0:function(){return S},WY:function(){return m},Xt:function(){return _},_N:function(){return x},bX:function(){return v},bq:function(){return M},d0:function(){return A},kI:function(){return Z},kt:function(){return P},kw:function(){return N},s0:function(){return f},sH:function(){return w},tL:function(){return y},z4:function(){return k}});var r=n(29439),i=n(74165),a=n(15861),o=n(14446),s=n.n(o),l=n(45911),c=n(36465),u=n(90349),d=s().create({baseURL:l.Ud.baseUrl}),p=s().create(),f=function(e){var t=Object.keys(e.content);return 1===t.length&&"audio"===t[0]},h=function(e){return!!e.content.audio&&e.content.audio>0},g=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,s,c,u,f,h,g,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.environment,e.next=3,d.get("/asset",{params:{environment:n}});case 3:return r=e.sent,a=r.data,o=a.assetShortHeadersUrl,s=a.filtersUrl,c=a.assetPacksUrl,(u=a.assetCdn).baseUrl&&(l.z$.baseUrl.live=u.baseUrl.live||l.z$.baseUrl.live,l.z$.baseUrl.staging=u.baseUrl.staging||l.z$.baseUrl.staging),e.next=8,Promise.all([p.get(o).then((function(e){return e.data})).catch((function(e){return e})),p.get(s).then((function(e){return e.data})).catch((function(e){return e})),p.get(c).then((function(e){return e.data})).catch((function(e){return e}))]);case 8:if(!(f=e.sent).some((function(e){return!e||e instanceof Error}))){e.next=11;break}throw new Error("Unexpected response from the assets endpoints.");case 11:if(h=f[0],g=f[1],(m=f[2]).starterPacks){e.next=16;break}throw new Error("Unexpected response from the public asset packs endpoint.");case 16:return e.abrupt("return",{publicAssetShortHeaders:h,publicFilters:g,publicAssetPacks:m});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.environment,e.next=3,p.get("".concat(l.z$.baseUrl[r],"/assets/").concat(t.id,".json"));case 3:return a=e.sent,e.abrupt("return",(0,u.Bm)({data:a.data,propertyName:"id",endpointName:"/assets/{id}.json of Asset API"}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,s,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.environment,a=t.assetPackId){e.next=4;break}throw new Error("The asset does not have a private asset pack id.");case 4:return o="".concat(l.kw.baseUrl,"/").concat(a,"/").concat(t.id,".json"),s=(0,c.mR)(o,n),e.next=8,d.get(s);case 8:return p=e.sent,e.abrupt("return",(0,u.Bm)({data:p.data,propertyName:"id",endpointName:"/private-assets/{packId}/{assetId}.json of Asset API"}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(e,t){var n="".concat(l.kw.baseUrl,"/").concat(e,"/resources/audio.zip");return(0,c.mR)(n,t)},b=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,o,s,l,c,u,p,f,h,g;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.environment,e.next=3,d.get("/resource",{params:{environment:n}});case 3:if(a=e.sent,o=a.data,s=o.resourcesUrl,l=o.resourcesV2Url,c=o.filtersUrl,s&&c){e.next=7;break}throw new Error("Unexpected response from the resource endpoint.");case 7:return e.next=9,Promise.all([d.get(s).then((function(e){return e.data})),d.get(l).then((function(e){return e.data})),d.get(c).then((function(e){return e.data}))]);case 9:if(u=e.sent,p=(0,r.Z)(u,3),f=p[0],h=p[1],g=p[2],f&&h&&g){e.next=13;break}throw new Error("Unexpected response from the resources endpoints.");case 13:return e.abrupt("return",{resources:f,resourcesV2:h,filters:g});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.environment;return d.get("/author",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.authorsUrl;if(!t)throw new Error("Unexpected response from author endpoint.");return d.get(t)})).then((function(e){return(0,u.TC)({data:e.data,endpointName:"/author of Asset API"})}))},j=function(e){var t=e.environment;return d.get("/license",{params:{environment:t}}).then((function(e){return e.data})).then((function(e){var t=e.licensesUrl;if(!t)throw new Error("Unexpected response from license endpoint.");return d.get(t)})).then((function(e){return(0,u.TC)({data:e.data,endpointName:"/license of Asset API"})}))},y=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/asset-pack/".concat(t));case 2:return n=e.sent,e.abrupt("return",(0,u.Bm)({data:n.data,propertyName:"id",endpointName:"/asset-pack/{id} of Asset API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/game-template/".concat(t));case 2:return n=e.sent,e.abrupt("return",(0,u.Bm)({data:n.data,propertyName:"id",endpointName:"/game-template/{id} of Asset API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/bundle/".concat(t));case 2:return n=e.sent,e.abrupt("return",(0,u.Bm)({data:n.data,propertyName:"id",endpointName:"/bundle/{id} of Asset API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,a=n.tutorialId,e.next=3,t();case 3:return o=e.sent,e.next=6,d.get("/pdf-tutorial/".concat(a),{params:{userId:r},headers:{Authorization:o}});case 6:return s=e.sent,e.abrupt("return",(0,u.Bm)({data:s.data,propertyName:"id",endpointName:"/pdf-tutorial/{id} of Asset API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(l.sT.baseUrl,"/").concat(t.id,"/game.json"),a=(0,c.mR)(r,n),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(e){return e.tags.some((function(e){return"pixel art"===e.toLowerCase()}))},P=function(e){var t=e.previewImageUrls[0];return!!t&&(0,c.SS)(t)},I=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return a=e.sent,e.next=6,d.get("/asset-short-header",{headers:{Authorization:a},params:{userId:r}});case 6:return o=e.sent,e.abrupt("return",(0,u.TC)({data:o.data,endpointName:"/asset-short-header of Asset API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return a=e.sent,e.next=6,d.get("/asset-pack",{headers:{Authorization:a},params:{userId:r}});case 6:return o=e.sent,e.abrupt("return",(0,u.TC)({data:o.data,endpointName:"/asset-pack of Asset API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return a=e.sent,e.next=6,d.get("/game-template",{headers:{Authorization:a},params:{userId:r}});case 6:return o=e.sent,e.abrupt("return",(0,u.TC)({data:o.data,endpointName:"/game-template of Asset API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.userId,e.next=3,t();case 3:return a=e.sent,e.next=6,d.get("/bundle",{headers:{Authorization:a},params:{userId:r}});case 6:return o=e.sent,e.abrupt("return",(0,u.TC)({data:o.data,endpointName:"/bundle of Asset API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(e){return e.startsWith(l.Ck)||e.startsWith(l.vF)},O=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},R=new RegExp("(".concat(O(l.Ck),"|").concat(O(l.vF),")\\/public-resources\\/(.*)\\/([a-z0-9]{64})_(.*)")),F=function(e){var t=R.exec(e);if(!t)throw new Error("The URL is not a valid public asset resource URL: "+e);var n=t[4];return decodeURIComponent(n)},D=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n.userId)){e.next=9;break}return e.next=4,t();case 4:return a=e.sent,e.next=7,d.get("/course",{params:{userId:r},headers:{Authorization:a}});case 7:return o=e.sent,e.abrupt("return",(0,u.TC)({data:o.data,endpointName:"/course of Asset API"}));case 9:return e.t0=u.TC,e.next=12,d.get("/course");case 12:return e.t1=e.sent.data,e.t2={data:e.t1,endpointName:"/course of Asset API"},e.abrupt("return",(0,e.t0)(e.t2));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.userId,a=n.courseId,o=n.language,!r){e.next=9;break}return e.next=4,t();case 4:return s=e.sent,e.next=7,d.get("/course/".concat(a,"/chapter"),{params:{userId:r,language:o},headers:{Authorization:s}});case 7:return l=e.sent,e.abrupt("return",(0,u.TC)({data:l.data,endpointName:"/course/{id}/chapter of Asset API"}));case 9:return e.t0=u.TC,e.next=12,d.get("/course/".concat(a,"/chapter"),{params:{language:o}});case 12:return e.t1=e.sent.data,e.t2={data:e.t1,endpointName:"/course/{id}/chapter of Asset API"},e.abrupt("return",(0,e.t0)(e.t2));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(e){var t=e.courseId,n=e.chapterId,r=e.userId,i=e.language,a=new URL("".concat(l.Ud.baseUrl,"/course/").concat(t,"/chapter/").concat(n,"/action/redirect-to-rating"));return a.searchParams.set("userId",r),a.searchParams.set("language",i),a.toString()}},1333:function(e,t,n){"use strict";n.d(t,{T:function(){return a},g:function(){return o}});var r,i=n(45911),a=function(e){var t=e.onConnectionEstablished,n=e.onTokenReceived,a=e.onError,o=e.onTimeout;r=new WebSocket(i.zB.baseUrl);var s=setTimeout(o,1e4);return r.onopen=function(){console.info("WebSocket - Open."),r&&r.send(JSON.stringify({action:"getConnectionId"}))},r.onclose=function(){console.info("WebSocket - Closed."),clearTimeout(s)},r.onerror=function(e){console.error("WebSocket - Error:",e),clearTimeout(s),a(e)},r.onmessage=function(e){if(e.data){if("string"!==typeof e.data)return void console.error("WebSocket - event data of type ".concat(typeof e.data," not supported."));var r=JSON.parse(e.data);if("authenticationResult"===r.type){var i=r.data;return void n(i)}if("connectionId"===r.type){var a=r.data.connectionId;return a?(clearTimeout(s),void t(a)):void console.error("WebSocket - No connectionId received.")}}},r},o=function(){r&&(r.close(),r=null)}},2861:function(e,t,n){"use strict";n.d(t,{$A:function(){return f},Ch:function(){return h},Ey:function(){return d},M7:function(){return y},OV:function(){return g},SH:function(){return p},gK:function(){return b},jy:function(){return j},l8:function(){return u},tP:function(){return Z},vO:function(){return x},x9:function(){return m},zi:function(){return C}});var r=n(74165),i=n(15861),a=n(14446),o=n.n(a),s=n(45911),l=n(91),c=n(90349),u="trivial_first-event",d="trivial_first-behavior",p="trivial_first-preview",f="trivial_first-web-export",h="trivial_first-extension",g="trivial_first-effect",m="trivial_first-debug",x=function(e){return"trivial_in-app-tutorial-completed_"+e},v=function(e,t){return e.map((function(e){return e.achievementId})).includes(t)},b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,u,d,p,f,h,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.badges,a=t.profile,u=t.getAuthorizationHeader,d=t.onBadgesChanged,i&&a){e.next=3;break}return e.abrupt("return",null);case 3:if(!v(i,n)){e.next=5;break}return e.abrupt("return",null);case 5:return p=a.id,e.prev=6,e.next=9,u();case 9:return f=e.sent,e.next=12,o().post("".concat(s.ST.baseUrl,"/user/").concat(p,"/badge"),{achievementId:n},{params:{userId:p},headers:{Authorization:f}});case 12:return h=e.sent,d(),e.abrupt("return",(0,c.je)({data:h.data,propertyName:"achievementId",endpointName:"/user/{id}/badge of User API"}));case 17:if(e.prev=17,e.t0=e.catch(6),!(g=(0,l.T)(e.t0))||409!==g.status){e.next=24;break}console.warn("Badge already exists"),e.next=25;break;case 24:throw e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e,t,n){var r=e.badges;return r?v(r,t)?n:function(){try{b(e,t)}catch(o){console.error("Couldn't create badge ".concat(t,"; ").concat(o))}for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.apply(null,i)}:n},j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("".concat(s.ST.baseUrl,"/achievement"));case 2:return t=e.sent,e.abrupt("return",(0,c.TC)({data:t.data,endpointName:"/achievement of User API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,l,c,u,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.badges,i=t.firebaseUser,a=t.getAuthorizationHeader,l=t.onBadgesChanged,n&&i){e.next=3;break}return e.abrupt("return",null);case 3:if(0!==(c=n.filter((function(e){return!e.seen}))).length){e.next=6;break}return e.abrupt("return");case 6:return u=i.uid,e.prev=7,e.next=10,a();case 10:return d=e.sent,e.next=13,o().patch("".concat(s.ST.baseUrl,"/user/").concat(u,"/badge"),c.map((function(e){return{achievementId:e.achievementId,seen:!0}})),{params:{userId:u},headers:{Authorization:d}});case 13:return p=e.sent,l(),f=p.data,e.abrupt("return",f);case 19:e.prev=19,e.t0=e.catch(7),console.error("Couldn't mark badges as seen: ".concat(e.t0));case 22:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(e,t){return t.unlockedAt&&e.unlockedAt?t.unlockedAt-e.unlockedAt:e.unlockedAt&&!t.unlockedAt?-1:!e.unlockedAt&&t.unlockedAt?1:0}},10959:function(e,t,n){"use strict";n.d(t,{$C:function(){return C},BY:function(){return Z},Bc:function(){return b},Bh:function(){return T},Fp:function(){return m},NZ:function(){return j},QX:function(){return k},Xr:function(){return y},Zi:function(){return x},c8:function(){return w},ch:function(){return v},n2:function(){return S},oj:function(){return h},q7:function(){return f}});var r=n(1413),i=n(74165),a=n(15861),o=n(14446),s=n.n(o),l=n(28842),c=n(45911),u=n(68151),d=n(90349),p=s().create({baseURL:c.pB.baseUrl}),f=function(e){return e?e.filter((function(e){return"apple-certificate"===e.type})):null},h=function(e){return e?e.filter((function(e){return"apple-auth-key"===e.type})):null},g=function(e){var t=e.gameName,n=e.gameVersion;try{var r=/[./\\[\]<>&$@=;:+,?^{}%#~|'"*]/g;return"".concat(t.slice(0,50).replace(r,"_"),"-").concat(n.slice(0,15).replace(r,"_"))}catch(i){return console.warn("An error happened when computing game extensionless filename:",i),"game"}},m=function(e,t){return e&&e[t]?"s3Key"===t?c.Zw.getInstantBuildUrl(e.id):"https://builds.gdevelop-app.com/".concat(e[t]):null},x=function(){var e="game-archive-"+(0,l._)(),t="application/zip",n=e+"/game-archive.zip";return(0,u.eu)({uploadType:"build",key:n,contentType:t}).then((function(e){return{signedUrl:e.signedUrl,contentType:t,key:n}}))},v=function(e,t,n,r,i,a,o){return e().then((function(e){return p.post("/build",null,{params:{userId:t,key:n,type:"electron-build",targets:r.join(","),gameId:i,filename:g(a),payWithCredits:o},headers:{Authorization:e}})})).then((function(e){return(0,d.Bm)({data:e.data,propertyName:"id",endpointName:"/build of Build API"})}))},b=function(e,t,n,r,i,a){return e().then((function(e){return p.post("/build",null,{params:{userId:t,key:n,type:"web-build",targets:"s3",gameId:r,payWithCredits:a},headers:{Authorization:e}})})).then((function(e){return(0,d.Bm)({data:e.data,propertyName:"id",endpointName:"/build of Build API"})}))},C=function(e,t,n,r,i,a,o,s){return e().then((function(e){return p.post("/build",JSON.stringify({signing:{keystore:i}}),{params:{userId:t,key:n,type:"cordova-build",targets:r.join(","),gameId:a,filename:g(o),payWithCredits:s},headers:{Authorization:e}})})).then((function(e){return(0,d.Bm)({data:e.data,propertyName:"id",endpointName:"/build of Build API"})}))},j=function(e,t,n,r,i,a,o,s){return e().then((function(e){return p.post("/build",{signing:i},{params:{userId:t,key:n,type:"cordova-ios-build",targets:r.join(","),gameId:a,filename:g(o),payWithCredits:s},headers:{Authorization:e}})})).then((function(e){return(0,d.Bm)({data:e.data,propertyName:"id",endpointName:"/build of Build API"})}))},y=function(e,t,n){return e().then((function(e){return p.get("/build/".concat(n),{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return(0,d.Bm)({data:e.data,propertyName:"id",endpointName:"/build/{id} of Build API"})}))},Z=function(e,t,n){return e().then((function(e){return p.get("/build",{params:{userId:t,gameId:n},headers:{Authorization:e}})})).then((function(e){return(0,d.TC)({data:e.data,endpointName:"/build of Build API"})}))},k=function(e,t,n,r){var i=r.name,a=r.description;return e().then((function(e){return p.patch("/build/".concat(n),{name:i,description:a},{params:{userId:t},headers:{Authorization:e}})})).then((function(e){return(0,d.Bm)({data:e.data,propertyName:"id",endpointName:"/build/{id} of Build API"})}))},w=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,p.delete("/build/".concat(r),{params:{userId:n},headers:{Authorization:a}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,p.get("/signing-credential",{params:{userId:n},headers:{Authorization:r}});case 5:return a=e.sent,e.abrupt("return",(0,d.TC)({data:a.data,endpointName:"/signing-credential of Build API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S={createCertificateSigningRequest:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,a){var o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,p.post("/signing-credential/action/create-csr",(0,r.Z)({},a),{params:{userId:n},headers:{Authorization:o}});case 5:return s=e.sent,e.abrupt("return",(0,d.FR)({data:s.data,endpointName:"/signing-credential/action/create-csr of Build API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uploadCertificate:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,a){var o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,p.post("".concat(c.pB.baseUrl,"/signing-credential/action/upload-certificate"),(0,r.Z)({},a),{params:{userId:n},headers:{Authorization:o}});case 5:return s=e.sent,e.abrupt("return",(0,d.FR)({data:s.data,endpointName:"/signing-credential/action/create-csr of Build API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),createCertificateP12:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,a){var o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,p.post("".concat(c.pB.baseUrl,"/signing-credential/action/create-certificate-p12"),(0,r.Z)({},a),{params:{userId:n},headers:{Authorization:o}});case 5:return s=e.sent,e.abrupt("return",(0,d.FR)({data:s.data,endpointName:"/signing-credential/action/create-csr of Build API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uploadMobileProvision:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,a){var o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,p.post("".concat(c.pB.baseUrl,"/signing-credential/action/upload-mobile-provision"),(0,r.Z)({},a),{params:{userId:n},headers:{Authorization:o}});case 5:return s=e.sent,e.abrupt("return",(0,d.FR)({data:s.data,endpointName:"/signing-credential/action/create-csr of Build API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uploadAuthKey:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,a){var o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,p.post("/signing-credential/action/upload-auth-key",(0,r.Z)({},a),{params:{userId:n},headers:{Authorization:o}});case 5:return s=e.sent,e.abrupt("return",(0,d.FR)({data:s.data,endpointName:"/signing-credential/action/create-csr of Build API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteSigningCredential:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,a){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,p.delete("/signing-credential",{params:(0,r.Z)({userId:n},a),headers:{Authorization:o}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}},91:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var r=function(e){return e?"object"!=typeof e?null:"object"===typeof e.response&&e.response&&"number"===typeof e.response.status?{status:e.response.status,code:"object"===typeof e.response.data&&e.response.data&&"string"===typeof e.response.data.code?e.response.data.code:null,data:"object"===typeof e.response.data&&e.response.data&&"object"===typeof e.response.data.data?e.response.data.data:null}:null:null}},69197:function(e,t,n){"use strict";n.d(t,{Ex:function(){return p},W7:function(){return d},rx:function(){return u}});var r=n(74165),i=n(29439),a=n(15861),o=n(14446),s=n.n(o),l=n(45911),c=n(997),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,o,u,d,p,f,h,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/example"),{params:{environment:"live"}});case 2:return t=e.sent,n=t.data,o=n.exampleShortHeadersUrl,u=n.filtersUrl,e.next=6,Promise.all([(0,c.x)({times:2},(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get(o);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))),(0,c.x)({times:2},(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get(u);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))))]);case 6:return d=e.sent,p=(0,i.Z)(d,2),f=p[0],h=p[1],g={exampleShortHeaders:f,filters:h},e.abrupt("return",g);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/example-v2/").concat(t.id));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(l.Ud.baseUrl,"/example-short-header"),{params:{authorId:t}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},39126:function(e,t,n){"use strict";n.d(t,{E:function(){return x},Fk:function(){return b},In:function(){return m},RT:function(){return C},y7:function(){return j}});var r=n(37762),i=n(74165),a=n(15861),o=n(1413),s=n(14446),l=n.n(s),c=n(45911),u=n(997),d=n(90349),p=n.g.gd,f=function(e){return Array.isArray(e.tags)?e:(0,o.Z)((0,o.Z)({},e),{},{tags:e.tags.split(",").map((function(e){return e.trim().toLowerCase()}))})},h=l().create({baseURL:c.Ud.baseUrl}),g=l().create(),m=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,s,l,c,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/extension",{params:{environment:"live"}});case 2:return t=e.sent,n=t.data.databaseUrl,e.next=6,(0,u.x)({times:2},(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get(n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))));case 6:if(s=e.sent){e.next=9;break}throw new Error("Unexpected response from the extensions endpoint.");case 9:s.headers||(s.headers=s.extensionShortHeaders),s.views.default.firstIds||(s.views.default.firstIds=s.views.default.firstExtensionIds),l=(0,r.Z)(s.headers);try{for(l.s();!(c=l.n()).done;)"community"===(d=c.value).tier&&(d.tier="experimental")}catch(p){l.e(p)}finally{l.f()}return e.abrupt("return",(0,o.Z)((0,o.Z)({},s),{},{headers:s.headers.map(f)}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/behavior",{params:{environment:"live"}});case 2:return t=e.sent,n=t.data.databaseUrl,e.next=6,(0,u.x)({times:2},(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get(n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))));case 6:if(r=e.sent){e.next=9;break}throw new Error("Unexpected response from the behaviors endpoint.");case 9:return e.abrupt("return",(0,o.Z)((0,o.Z)({},r),{},{headers:r.headers.map(v)}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){return e.type=p.PlatformExtension.getBehaviorFullType(e.extensionNamespace||e.extensionName,e.name),"community"===(e=f(e)).tier&&(e.tier="experimental"),e},b=function(e){return g.get(e.headerUrl).then((function(e){var t=e.data,n=f(t);return"community"===t.tier&&(t.tier="experimental"),n}))},C=function(e){return g.get(e.url).then((function(e){var t=e.data;return f(t)}))},j=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/extension-short-header",{params:{authorId:t,environment:"live"}});case 2:return n=e.sent,e.abrupt("return",(0,d.TC)({data:n.data,endpointName:"/extension-short-header of Asset API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},16999:function(e,t,n){"use strict";n.d(t,{Bi:function(){return m},IH:function(){return f},LK:function(){return w},Oo:function(){return p},Pv:function(){return y},TT:function(){return C},UC:function(){return P},Ui:function(){return k},WO:function(){return h},b:function(){return v},bb:function(){return Z},cF:function(){return b},lX:function(){return T},m7:function(){return j},nC:function(){return I},r$:function(){return g},sQ:function(){return S},wC:function(){return x}});var r=n(74165),i=n(15861),a=n(14446),o=n.n(a),s=n(65522),l=n.n(s),c=n(45911),u=n(90349),d=o().create({baseURL:c.qD.baseUrl}),p=function(e,t){switch(e){case"action":return t._({id:"Action"});case"adventure":return t._({id:"Adventure"});case"shooter":return t._({id:"Shooter"});case"platformer":return t._({id:"Platformer"});case"rpg":return t._({id:"RPG"});case"horror":return t._({id:"Horror"});case"strategy":return t._({id:"Strategy"});case"puzzle":return t._({id:"Puzzle"});case"racing":return t._({id:"Racing"});case"simulation":return t._({id:"Simulation"});case"sport":return t._({id:"Sport"});case"story-rich":return t._({id:"Story-Rich"});case"survival":return t._({id:"Survival"});case"building":return t._({id:"Building"});case"multiplayer":return t._({id:"Multiplayer"});case"leaderboard":return t._({id:"Leaderboard"});case"educational":return t._({id:"Educational"});default:return l()(e)}},f=function(e){if(!e)return null;var t=e.cachedCurrentSlug;return t?c.Zw.getGameUrlWithSlug(t.username,t.gameSlug):c.Zw.getGameUrl(e.id)},h=function(e){return e.map((function(e){return{userId:e,level:"owner"}}))},g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s,l,c,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.gameId,o=i.gameName,s=i.authorName,l=i.templateSlug,c=i.savedStatus,e.next=3,t();case 3:return p=e.sent,e.next=6,d.post("/game/".concat(a),{gameName:o,authorName:s,templateSlug:l,savedStatus:c},{params:{userId:n},headers:{Authorization:p}});case 6:return f=e.sent,e.abrupt("return",(0,u.Bm)({data:f.data,propertyName:"id",endpointName:"/game/{id} of Game API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){var o,s,l,c,p,f,h,g,m,x,v,b,C,j,y,Z,k,w;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.gameName,s=a.categories,l=a.authorName,c=a.publicWebBuildId,p=a.description,f=a.playWithKeyboard,h=a.playWithGamepad,g=a.playWithMobile,m=a.orientation,x=a.thumbnailUrl,v=a.screenshotUrls,b=a.discoverable,C=a.acceptsBuildComments,j=a.acceptsGameComments,y=a.displayAdsOnGamePage,Z=a.savedStatus,e.next=3,t();case 3:return k=e.sent,e.next=6,d.patch("/game/".concat(i),{gameName:o,categories:s,authorName:l,publicWebBuildId:c,description:p,playWithKeyboard:f,playWithGamepad:h,playWithMobile:g,orientation:m,thumbnailUrl:x,screenshotUrls:v,discoverable:b,acceptsBuildComments:C,acceptsGameComments:j,displayAdsOnGamePage:y,savedStatus:Z},{params:{userId:n},headers:{Authorization:k}});case 6:return w=e.sent,e.abrupt("return",(0,u.Bm)({data:w.data,propertyName:"id",endpointName:"/game/{id} of Game API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){var o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,d.post("/game/action/set-acls",{gameId:i,newAcls:a},{params:{userId:n},headers:{Authorization:o}});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a,o){var s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,d.post("/game/action/set-slug",{gameId:i,userSlug:a,gameSlug:o},{params:{userId:n},headers:{Authorization:s}});case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,d.get("/game/".concat(i),{params:{userId:n},headers:{Authorization:a}});case 5:return o=e.sent,e.abrupt("return",(0,u.Bm)({data:o.data,propertyName:"id",endpointName:"/game/{id} of Game API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,d.delete("/game/".concat(i),{params:{userId:n},headers:{Authorization:a}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,d.get("/game",{params:{userId:n},headers:{Authorization:i}});case 5:return a=e.sent,e.abrupt("return",(0,u.TC)({data:a.data,endpointName:"/game of Game API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/public-game/".concat(t));case 2:return n=e.sent,e.abrupt("return",(0,u.Bm)({data:n.data,propertyName:"id",endpointName:"/public-game/{id} of Game API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/game-category");case 2:return t=e.sent,e.abrupt("return",(0,u.TC)({data:t.data,endpointName:"/game-category of Game API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.gameId,a=n.userId,o=n.usageType,e.next=3,t();case 3:return s=e.sent,e.next=6,d.post("/game/action/buy-with-credits",{},{params:{userId:a,gameId:i,usageType:o},headers:{Authorization:s}});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.gameId,a=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,d.get("/game-featuring",{params:{userId:a,gameId:i},headers:{Authorization:o}});case 6:return s=e.sent,e.abrupt("return",(0,u.TC)({data:s.data,endpointName:"/game-featuring of Game API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/marketing-plan");case 2:return t=e.sent,e.abrupt("return",(0,u.TC)({data:t.data,endpointName:"/marketing-plan of Game API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.gameId,a=n.userId,e.next=3,t();case 3:return o=e.sent,e.next=6,d.get("/marketing-plan",{headers:{Authorization:o},params:{gameId:i,userId:a}});case 6:return s=e.sent,e.abrupt("return",(0,u.TC)({data:s.data,endpointName:"/marketing-plan of Game API"})[0]);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uploadType,i=t.files,e.next=3,d.post("/resource-signed-url",{uploadType:n,files:i});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){return e.thumbnailUrl?e.thumbnailUrl:e.screenshotUrls&&e.screenshotUrls.length?e.screenshotUrls[e.screenshotUrls.length-1]:null}},39688:function(e,t,n){"use strict";n.d(t,{Hh:function(){return b},I8:function(){return y},Mn:function(){return v},_Z:function(){return x},hP:function(){return f},m5:function(){return h},n1:function(){return j},rX:function(){return C},v7:function(){return m},zi:function(){return g},zn:function(){return p}});var r=n(74165),i=n(15861),a=n(14446),o=n.n(a),s=n(45911),l=n(52578),c=n(14737),u=n(90349),d=o().create({baseURL:s.xP.baseUrl}),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.aiRequestId,e.next=3,t();case 3:return l=e.sent,e.next=6,o().get("".concat(s.xP.baseUrl,"/ai-request/").concat(a),{params:{userId:i},headers:{Authorization:l}});case 6:return c=e.sent,e.abrupt("return",(0,u.Bm)({data:c.data,propertyName:"id",endpointName:"/ai-request/{id} of Generation API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.forceUri,e.next=3,t();case 3:return o=e.sent,s=a||"/ai-request",e.next=7,d.get(s,{headers:{Authorization:o},params:a?{userId:i}:{userId:i,perPage:10}});case 7:return l=e.sent,p=l.headers.link?(0,c.be)(l.headers.link):null,e.abrupt("return",{aiRequests:(0,u.TC)({data:l.data,endpointName:"/ai-request of Generation API"}),nextPageUri:p});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,c,p,f,h,g,m,x,v,b,C,j;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.userRequest,o=n.gameProjectJson,s=n.gameProjectJsonUserRelativeKey,c=n.projectSpecificExtensionsSummaryJson,p=n.projectSpecificExtensionsSummaryJsonUserRelativeKey,f=n.payWithCredits,h=n.mode,g=n.aiConfiguration,m=n.gameId,x=n.fileMetadata,v=n.storageProviderName,b=n.toolsVersion,e.next=3,t();case 3:return C=e.sent,e.next=6,d.post("/ai-request",{gdevelopVersionWithHash:(0,l.Us)(),userRequest:a,gameProjectJson:o,gameProjectJsonUserRelativeKey:s,projectSpecificExtensionsSummaryJson:c,projectSpecificExtensionsSummaryJsonUserRelativeKey:p,payWithCredits:!!f,payWithAiCredits:!f,mode:h,aiConfiguration:g,gameId:m,fileMetadata:x,storageProviderName:v,toolsVersion:b},{params:{userId:i},headers:{Authorization:C}});case 6:return j=e.sent,e.abrupt("return",(0,u.Bm)({data:j.data,propertyName:"id",endpointName:"/ai-request of Generation API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,c,p,f,h,g,m,x,v,b,C,j;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.aiRequestId,o=n.functionCallOutputs,s=n.userMessage,c=n.gameId,p=n.payWithCredits,f=n.gameProjectJson,h=n.gameProjectJsonUserRelativeKey,g=n.projectSpecificExtensionsSummaryJson,m=n.projectSpecificExtensionsSummaryJsonUserRelativeKey,x=n.paused,v=n.mode,b=n.toolsVersion,e.next=3,t();case 3:return C=e.sent,e.next=6,d.post("/ai-request/".concat(a,"/action/add-message"),{gdevelopVersionWithHash:(0,l.Us)(),functionCallOutputs:o,userMessage:s,gameId:c,payWithCredits:!!p,payWithAiCredits:!p,gameProjectJson:f,gameProjectJsonUserRelativeKey:h,projectSpecificExtensionsSummaryJson:g,projectSpecificExtensionsSummaryJsonUserRelativeKey:m,paused:x,mode:v,toolsVersion:b},{params:{userId:i},headers:{Authorization:C}});case 6:return j=e.sent,e.abrupt("return",(0,u.Bm)({data:j.data,propertyName:"id",endpointName:"/ai-request/{id}/action/add-message of Generation API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,c,p,f,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.aiRequestId,o=n.messageIndex,s=n.feedback,c=n.reason,p=n.freeFormDetails,e.next=3,t();case 3:return f=e.sent,e.next=6,d.post("/ai-request/".concat(a,"/action/set-feedback"),{gdevelopVersionWithHash:(0,l.Us)(),messageIndex:o,feedback:s,reason:c,freeFormDetails:p},{params:{userId:i},headers:{Authorization:f}});case 6:return h=e.sent,e.abrupt("return",(0,u.Bm)({data:h.data,propertyName:"id",endpointName:"/ai-request/{id}/action/set-feedback of Generation API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,c,p,f,h,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.aiRequestId,o=n.suggestionsType,s=n.gameProjectJson,c=n.gameProjectJsonUserRelativeKey,p=n.projectSpecificExtensionsSummaryJson,f=n.projectSpecificExtensionsSummaryJsonUserRelativeKey,e.next=3,t();case 3:return h=e.sent,e.next=6,d.post("/ai-request/".concat(a,"/action/get-suggestions"),{suggestionsType:o,gdevelopVersionWithHash:(0,l.Us)(),gameProjectJson:s,gameProjectJsonUserRelativeKey:c,projectSpecificExtensionsSummaryJson:p,projectSpecificExtensionsSummaryJsonUserRelativeKey:f},{params:{userId:i},headers:{Authorization:h}});case 6:return g=e.sent,e.abrupt("return",(0,u.Bm)({data:g.data,propertyName:"id",endpointName:"/ai-request/{id}/action/get-suggestions of Generation API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,c,p,f,h,g,m,x,v,b,C,j;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.gameProjectJson,o=n.gameProjectJsonUserRelativeKey,s=n.projectSpecificExtensionsSummaryJson,c=n.projectSpecificExtensionsSummaryJsonUserRelativeKey,p=n.sceneName,f=n.eventsDescription,h=n.extensionNamesList,g=n.objectsList,m=n.existingEventsAsText,x=n.placementHint,v=n.relatedAiRequestId,e.next=3,t();case 3:return b=e.sent,e.next=6,d.post("/ai-generated-event",{gdevelopVersionWithHash:(0,l.Us)(),gameProjectJson:a,gameProjectJsonUserRelativeKey:o,projectSpecificExtensionsSummaryJson:s,projectSpecificExtensionsSummaryJsonUserRelativeKey:c,sceneName:p,eventsDescription:f,extensionNamesList:h,objectsList:g,existingEventsAsText:m,placementHint:x,relatedAiRequestId:v},{params:{userId:i},headers:{Authorization:b},validateStatus:function(e){return!0}});case 6:if(200!==(C=e.sent).status){e.next=12;break}return j=(0,u.Bm)({data:C.data,propertyName:"id",endpointName:"/ai-generated-event of Generation API"}),e.abrupt("return",{creationSucceeded:!0,aiGeneratedEvent:j});case 12:if(400!==C.status){e.next=14;break}return e.abrupt("return",{creationSucceeded:!1,errorMessage:JSON.stringify(C.data)});case 14:throw new Error("Error while running AI event generation: ".concat(C.statusText));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.aiGeneratedEventId,e.next=3,t();case 3:return o=e.sent,e.next=6,d.get("/ai-generated-event/".concat(a),{params:{userId:i},headers:{Authorization:o}});case 6:return s=e.sent,e.abrupt("return",(0,u.Bm)({data:s.data,propertyName:"id",endpointName:"/ai-generated-event/{id} of Generation API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,c,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.searchTerms,o=n.description,s=n.objectType,c=n.twoDimensionalViewKind,e.next=3,t();case 3:return p=e.sent,e.next=6,d.post("/asset-search",{gdevelopVersionWithHash:(0,l.Us)(),searchTerms:a,description:o,objectType:s,twoDimensionalViewKind:c},{params:{userId:i},headers:{Authorization:p}});case 6:return f=e.sent,e.abrupt("return",(0,u.Bm)({data:f.data,propertyName:"id",endpointName:"/asset-search of Generation API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.gameProjectJsonHash,o=n.projectSpecificExtensionsSummaryJsonHash,e.next=3,t();case 3:return s=e.sent,e.next=6,d.post("/ai-user-content/action/create-presigned-urls",{gdevelopVersionWithHash:(0,l.Us)(),gameProjectJsonHash:a,projectSpecificExtensionsSummaryJsonHash:o},{params:{userId:i},headers:{Authorization:s}});case 6:return c=e.sent,e.abrupt("return",(0,u.FR)({data:c.data,endpointName:"/ai-user-content/action/create-presigned-urls of Generation API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.environment,e.next=3,o().get("".concat(s.Yf.baseUrl[n],"/ai-settings.json"));case 3:return i=e.sent,e.abrupt("return",(0,u.Bm)({data:i.data,propertyName:"aiRequest",endpointName:"/ai-settings.json of Generation API"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},19817:function(e,t,n){"use strict";n.d(t,{EB:function(){return f},HD:function(){return h},Hx:function(){return x},PP:function(){return j},Rv:function(){return g},TO:function(){return Z},UO:function(){return d},UY:function(){return v},Xj:function(){return u},bs:function(){return c},hr:function(){return b},oO:function(){return y},rM:function(){return m},v0:function(){return C},yw:function(){return p}});var r=n(74165),i=n(15861),a=n(14446),o=n.n(a),s=n(45911),l=n(90349),c="flingGame",u="plinkoMultiplier",d="cameraParallax",p="healthBar",f="joystick",h="timer",g="object3d",m="knightPlatformer",x="topDownRPGMovement",v="fireABullet",b="coopPlatformer",C="tilemapPlatformer",j=[u,h,d,p,f,g,m,x,v,b,C],y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get("".concat(s.Ud.baseUrl,"/in-app-tutorial-short-header"));case 2:return t=e.sent,e.abrupt("return",(0,l.TC)({data:t.data,endpointName:"/in-app-tutorial-short-header of Asset API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().get(t.contentUrl);case 2:return n=e.sent,e.abrupt("return",(0,l.Bm)({data:n.data,propertyName:"id",endpointName:"in-app-tutorial contentUrl of Asset API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},50631:function(e,t,n){"use strict";n.d(t,{nq:function(){return d},wd:function(){return u}});var r=n(74165),i=n(15861),a=n(14446),o=n.n(a),s=n(45911),l=n(90349),c=o().create({baseURL:s.ST.baseUrl}),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,e.next=3,t();case 3:return a=e.sent,e.next=6,c.get("/notification",{headers:{Authorization:a},params:{userId:i,perPage:25}});case 6:return o=e.sent,e.abrupt("return",(0,l.TC)({data:o.data,endpointName:"/notification of User API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.notificationIds,o=n.allStartingFromNotificationId,e.next=3,t();case 3:if(s=e.sent,!a){e.next=8;break}l={notifications:a.map((function(e){return{notificationId:e,seen:!0}}))},e.next=13;break;case 8:if(!o){e.next=12;break}l={afterNotification:{notificationId:o}},e.next=13;break;case 12:throw new Error("Either parameter notificationIds or allStartingFromNotificationId must be defined.");case 13:return e.next=15,c.post("/notification/action/mark-as-seen",l,{headers:{Authorization:s},params:{userId:i}});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},14737:function(e,t,n){"use strict";n.d(t,{BM:function(){return j},GA:function(){return u},Q9:function(){return P},QN:function(){return b},RE:function(){return x},Rc:function(){return g},VE:function(){return k},Wk:function(){return v},YJ:function(){return h},YO:function(){return w},be:function(){return f},fJ:function(){return I},hO:function(){return y},iv:function(){return S},mf:function(){return p},nI:function(){return C},s3:function(){return T},uA:function(){return Z},vW:function(){return m}});var r=n(74165),i=n(15861),a=n(14446),o=n.n(a),s=n(45911),l=n(11858),c=n(90349),u=function(e){return"".concat(e.split("-")[0],"-...")},d=o().create({baseURL:s.eU.baseUrl}),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,d.get("/game/".concat(i,"/leaderboard"),{headers:{Authorization:a},params:{userId:n,deleted:"false"}});case 5:return o=e.sent,e.abrupt("return",(0,c.Ii)({data:o.data,endpointName:"/game/{id}/leaderboard of Play API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(e){var t=e.split(",").map((function(e){return e.trim()})).reduce((function(e,t){var n=t.match(/;\srel="(\w*)"/),r=t.match(/^<(.*)>/);return e&&n&&r&&(e[n[1]]=r[1]),e}),{});return Object.keys(t).includes("next")?t.next:null},h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.forceUri||"/game/".concat(t,"/leaderboard/").concat(n,"/entry"),e.next=3,d.get(a,{params:i.forceUri?null:{onlyBestEntry:i.onlyBestEntry,perPage:i.pageSize}});case 3:return o=e.sent,s=o.headers.link?f(o.headers.link):null,e.abrupt("return",{entries:(0,c.TC)({data:o.data,endpointName:"/game/{id}/leaderboard/{id}/entry of Play API"}),nextPageUri:s});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s,l,u,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.name,o=i.sort,s=t.getAuthorizationHeader,l=t.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return u=l.uid,e.next=7,s();case 7:return p=e.sent,e.next=10,d.post("/game/".concat(n,"/leaderboard"),{name:a,sort:o},{headers:{Authorization:p},params:{userId:u}});case 10:return f=e.sent,e.abrupt("return",(0,c.je)({data:f.data,propertyName:"id",endpointName:"/game/{id}/leaderboard of Play API"}));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}throw new Error("User is not authenticated.");case 3:return s=o.uid,e.next=6,a();case 6:return l=e.sent,e.next=9,d.post("/game/".concat(n,"/leaderboard/action/copy"),i,{headers:{Authorization:l},params:{userId:s}});case 9:return u=e.sent,e.abrupt("return",(0,c.Bm)({data:u.data,propertyName:"id",endpointName:"/game/{id}/leaderboard/action/copy of Play API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){var o,s,l,u,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,s=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return l=s.uid,e.next=6,o();case 6:return u=e.sent,e.next=9,d.patch("/game/".concat(n,"/leaderboard/").concat(i),a,{headers:{Authorization:u},params:{userId:l}});case 9:return p=e.sent,e.abrupt("return",(0,c.je)({data:p.data,propertyName:"id",endpointName:"/game/{id}/leaderboard/{id} of Play API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return s=o.uid,e.next=6,a();case 6:return l=e.sent,e.next=9,d.put("/game/".concat(n,"/leaderboard/").concat(i,"/reset"),{},{headers:{Authorization:l},params:{userId:s}});case 9:return u=e.sent,e.abrupt("return",(0,c.je)({data:u.data,propertyName:"id",endpointName:"/game/{id}/leaderboard/{id}/reset of Play API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return s=o.uid,e.next=6,a();case 6:return l=e.sent,e.next=9,d.delete("/game/".concat(n,"/leaderboard/").concat(i),{headers:{Authorization:l},params:{userId:s}});case 9:return u=e.sent,e.abrupt("return",(0,c.je)({data:u.data,propertyName:"id",endpointName:"/game/{id}/leaderboard/{id} of Play API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){var o,s,l,u,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,s=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return l=s.uid,e.next=6,o();case 6:return u=e.sent,e.next=9,d.delete("/game/".concat(n,"/leaderboard/").concat(i,"/entry/").concat(a),{headers:{Authorization:u},params:{userId:l}});case 9:return p=e.sent,e.abrupt("return",(0,c.je)({data:p.data,propertyName:"id",endpointName:"/game/{id}/leaderboard/{id}/entry/{id} of Play API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.gameId,o=i.type,e.abrupt("return",t().then((function(e){return d.get("/game/".concat(a,"/comment"),{params:{userId:n,type:o},headers:{Authorization:e}})})).then((function(e){return(0,c.TC)({data:e.data,endpointName:"/game/{id}/comment of Play API"})})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(e){return!!e.text},Z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.gameId,o=i.commentId,s=i.processed,l=i.qualityRating,e.abrupt("return",t().then((function(e){return d.patch("/game/".concat(a,"/comment/").concat(o),{processed:s,qualityRating:l},{params:{userId:n},headers:{Authorization:e}})})).then((function(e){return(0,c.je)({data:e.data,propertyName:"id",endpointName:"/game/{id}/comment/{id} of Play API"})})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(e){var t=e.limits;return{canUseTheme:!!t&&!!t.capabilities.leaderboards&&("BASIC"===t.capabilities.leaderboards.themeCustomizationCapabilities||"FULL"===t.capabilities.leaderboards.themeCustomizationCapabilities),canUseCustomCss:!!t&&!!t.capabilities.leaderboards&&!!t.capabilities.leaderboards.canUseCustomCss}},w=function(e){var t=e&&e.theme?{backgroundColor:e.theme.backgroundColor,textColor:e.theme.textColor,highlightBackgroundColor:e.theme.highlightBackgroundColor,highlightTextColor:e.theme.highlightTextColor}:{backgroundColor:"#d0d1ff",textColor:"#000000",highlightBackgroundColor:"#5763dd",highlightTextColor:"#ffffff"};return{backgroundColor:(0,l.JO)(t.backgroundColor),textColor:(0,l.JO)(t.textColor),highlightBackgroundColor:(0,l.JO)(t.highlightBackgroundColor),highlightTextColor:(0,l.JO)(t.highlightTextColor)}},T=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.gameId,e.next=3,t();case 3:return o=e.sent,e.next=6,d.get("/game/".concat(a,"/lobby-configuration"),{params:{userId:n},headers:{Authorization:o}});case 6:return s=e.sent,e.abrupt("return",(0,c.oz)({data:s.data,propertyName:"maxPlayers",propertyType:"number",endpointName:"/game/{id}/lobby-configuration of Play API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s,l,u,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.gameId,o=i.maxPlayers,s=i.minPlayers,l=i.canJoinAfterStart,e.next=3,t();case 3:return u=e.sent,e.next=6,d.patch("/game/".concat(a,"/lobby-configuration"),{maxPlayers:o,minPlayers:s,canJoinAfterStart:l},{params:{userId:n},headers:{Authorization:u}});case 6:return p=e.sent,e.abrupt("return",(0,c.oz)({data:p.data,propertyName:"maxPlayers",propertyType:"number",endpointName:"/game/{id}/lobby-configuration of Play API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getAuthorizationHeader,i=t.userId,a=t.gameId,o=t.sourceGameId,e.next=3,n();case 3:return s=e.sent,e.next=6,d.post("/game/".concat(a,"/lobby-configuration/action/copy"),{sourceGameId:o},{headers:{Authorization:s},params:{userId:i}});case 6:return l=e.sent,e.abrupt("return",(0,c.oz)({data:l.data,propertyName:"maxPlayers",propertyType:"number",endpointName:"/game/{id}/lobby-configuration/action/copy of Play API"}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getAuthorizationHeader,i=t.userId,a=t.gameId,e.next=3,n();case 3:return o=e.sent,e.next=6,d.post("/game/".concat(a,"/player-token"),{},{headers:{Authorization:o},params:{userId:i}});case 6:return s=e.sent,e.abrupt("return",(0,c.RO)({data:s.data,endpointName:"/game/{id}/player-token of Play API"}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},34517:function(e,t,n){"use strict";n.d(t,{v9:function(){return W},XU:function(){return G},j4:function(){return Y},so:function(){return $},nZ:function(){return ae},Z7:function(){return se},eM:function(){return oe},Dj:function(){return je},Hj:function(){return he},ml:function(){return ye},dh:function(){return be},u_:function(){return Ce},Xj:function(){return de},LG:function(){return ie},NC:function(){return Q},MH:function(){return re},Fz:function(){return pe},Sx:function(){return xe},Rn:function(){return ee},Un:function(){return ue},hj:function(){return Ze},xU:function(){return ce},If:function(){return we},np:function(){return fe},Gk:function(){return ke},ll:function(){return le}});var r=n(1413),i=n(74165),a=n(15861),o=n(14446),s=n.n(o),l=n(45911),c=n(38428),u=n.n(c),d=n(60136),p=n(29388),f=n(43144),h=n(15671),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function m(e,t,n,r){var i,a,o,s=t||[0],l=(n=n||0)>>>3,c=-1===r?3:0;for(i=0;i<e.length;i+=1)a=(o=i+l)>>>2,s.length<=a&&s.push(0),s[a]|=e[i]<<8*(c+r*(o%4));return{value:s,binLen:8*e.length+n}}function x(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":return function(e,t,r){return function(e,t,n,r){var i,a,o,s;if(0!=e.length%2)throw new Error("String of HEX type must be in byte increments");var l=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(i=0;i<e.length;i+=2){if(a=parseInt(e.substr(i,2),16),isNaN(a))throw new Error("String of HEX type contains invalid characters");for(o=(s=(i>>>1)+c)>>>2;l.length<=o;)l.push(0);l[o]|=a<<8*(u+r*(s%4))}return{value:l,binLen:4*e.length+n}}(e,t,r,n)};case"TEXT":return function(e,r,i){return function(e,t,n,r,i){var a,o,s,l,c,u,d,p,f=0,h=n||[0],g=(r=r||0)>>>3;if("UTF8"===t)for(d=-1===i?3:0,s=0;s<e.length;s+=1)for(o=[],128>(a=e.charCodeAt(s))?o.push(a):2048>a?(o.push(192|a>>>6),o.push(128|63&a)):55296>a||57344<=a?o.push(224|a>>>12,128|a>>>6&63,128|63&a):(s+=1,a=65536+((1023&a)<<10|1023&e.charCodeAt(s)),o.push(240|a>>>18,128|a>>>12&63,128|a>>>6&63,128|63&a)),l=0;l<o.length;l+=1){for(c=(u=f+g)>>>2;h.length<=c;)h.push(0);h[c]|=o[l]<<8*(d+i*(u%4)),f+=1}else for(d=-1===i?2:0,p="UTF16LE"===t&&1!==i||"UTF16LE"!==t&&1===i,s=0;s<e.length;s+=1){for(a=e.charCodeAt(s),!0===p&&(a=(l=255&a)<<8|a>>>8),c=(u=f+g)>>>2;h.length<=c;)h.push(0);h[c]|=a<<8*(d+i*(u%4)),f+=2}return{value:h,binLen:8*f+r}}(e,t,r,i,n)};case"B64":return function(e,t,r){return function(e,t,n,r){var i,a,o,s,l,c,u=0,d=t||[0],p=(n=n||0)>>>3,f=-1===r?3:0,h=e.indexOf("=");if(-1===e.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(e=e.replace(/=/g,""),-1!==h&&h<e.length)throw new Error("Invalid '=' found in base-64 string");for(i=0;i<e.length;i+=4){for(s=e.substr(i,4),o=0,a=0;a<s.length;a+=1)o|=g.indexOf(s.charAt(a))<<18-6*a;for(a=0;a<s.length-1;a+=1){for(l=(c=u+p)>>>2;d.length<=l;)d.push(0);d[l]|=(o>>>16-8*a&255)<<8*(f+r*(c%4)),u+=1}}return{value:d,binLen:8*u+n}}(e,t,r,n)};case"BYTES":return function(e,t,r){return function(e,t,n,r){var i,a,o,s,l=t||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(a=0;a<e.length;a+=1)i=e.charCodeAt(a),o=(s=a+c)>>>2,l.length<=o&&l.push(0),l[o]|=i<<8*(u+r*(s%4));return{value:l,binLen:8*e.length+n}}(e,t,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(g){throw new Error("ARRAYBUFFER not supported by this environment")}return function(e,t,r){return function(e,t,n,r){return m(new Uint8Array(e),t,n,r)}(e,t,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(g){throw new Error("UINT8ARRAY not supported by this environment")}return function(e,t,r){return m(e,t,r,n)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function v(e,t,n,r){switch(e){case"HEX":return function(e){return function(e,t,n,r){var i,a,o="0123456789abcdef",s="",l=t/8,c=-1===n?3:0;for(i=0;i<l;i+=1)a=e[i>>>2]>>>8*(c+n*(i%4)),s+=o.charAt(a>>>4&15)+o.charAt(15&a);return r.outputUpper?s.toUpperCase():s}(e,t,n,r)};case"B64":return function(e){return function(e,t,n,r){var i,a,o,s,l,c="",u=t/8,d=-1===n?3:0;for(i=0;i<u;i+=3)for(s=i+1<u?e[i+1>>>2]:0,l=i+2<u?e[i+2>>>2]:0,o=(e[i>>>2]>>>8*(d+n*(i%4))&255)<<16|(s>>>8*(d+n*((i+1)%4))&255)<<8|l>>>8*(d+n*((i+2)%4))&255,a=0;a<4;a+=1)c+=8*i+6*a<=t?g.charAt(o>>>6*(3-a)&63):r.b64Pad;return c}(e,t,n,r)};case"BYTES":return function(e){return function(e,t,n){var r,i,a="",o=t/8,s=-1===n?3:0;for(r=0;r<o;r+=1)i=e[r>>>2]>>>8*(s+n*(r%4))&255,a+=String.fromCharCode(i);return a}(e,t,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(g){throw new Error("ARRAYBUFFER not supported by this environment")}return function(e){return function(e,t,n){var r,i=t/8,a=new ArrayBuffer(i),o=new Uint8Array(a),s=-1===n?3:0;for(r=0;r<i;r+=1)o[r]=e[r>>>2]>>>8*(s+n*(r%4))&255;return a}(e,t,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(g){throw new Error("UINT8ARRAY not supported by this environment")}return function(e){return function(e,t,n){var r,i=t/8,a=-1===n?3:0,o=new Uint8Array(i);for(r=0;r<i;r+=1)o[r]=e[r>>>2]>>>8*(a+n*(r%4))&255;return o}(e,t,n)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],C=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],j=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function y(e){var t={outputUpper:!1,b64Pad:"=",outputLen:-1},n=e||{},r="Output length must be a multiple of 8";if(t.outputUpper=n.outputUpper||!1,n.b64Pad&&(t.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(r);t.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(r);t.outputLen=n.shakeLen}if("boolean"!=typeof t.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw new Error("Invalid b64Pad formatting option");return t}var Z=(0,f.Z)((function e(t,n){(0,h.Z)(this,e),this.t=t,this.i=n}));function k(e,t){var n;return t<32?(n=32-t,new Z(e.t>>>t|e.i<<n,e.i>>>t|e.t<<n)):(n=64-t,new Z(e.i>>>t|e.t<<n,e.t>>>t|e.i<<n))}function w(e,t){return new Z(e.t>>>t,e.i>>>t|e.t<<32-t)}function T(e,t,n){return new Z(e.t&t.t^e.t&n.t^t.t&n.t,e.i&t.i^e.i&n.i^t.i&n.i)}function S(e){var t=k(e,28),n=k(e,34),r=k(e,39);return new Z(t.t^n.t^r.t,t.i^n.i^r.i)}function P(e,t){var n,r;n=(65535&e.i)+(65535&t.i);var i=(65535&(r=(e.i>>>16)+(t.i>>>16)+(n>>>16)))<<16|65535&n;return n=(65535&e.t)+(65535&t.t)+(r>>>16),r=(e.t>>>16)+(t.t>>>16)+(n>>>16),new Z((65535&r)<<16|65535&n,i)}function I(e,t,n,r){var i,a;i=(65535&e.i)+(65535&t.i)+(65535&n.i)+(65535&r.i);var o=(65535&(a=(e.i>>>16)+(t.i>>>16)+(n.i>>>16)+(r.i>>>16)+(i>>>16)))<<16|65535&i;return i=(65535&e.t)+(65535&t.t)+(65535&n.t)+(65535&r.t)+(a>>>16),a=(e.t>>>16)+(t.t>>>16)+(n.t>>>16)+(r.t>>>16)+(i>>>16),new Z((65535&a)<<16|65535&i,o)}function E(e,t,n,r,i){var a,o;a=(65535&e.i)+(65535&t.i)+(65535&n.i)+(65535&r.i)+(65535&i.i);var s=(65535&(o=(e.i>>>16)+(t.i>>>16)+(n.i>>>16)+(r.i>>>16)+(i.i>>>16)+(a>>>16)))<<16|65535&a;return a=(65535&e.t)+(65535&t.t)+(65535&n.t)+(65535&r.t)+(65535&i.t)+(o>>>16),o=(e.t>>>16)+(t.t>>>16)+(n.t>>>16)+(r.t>>>16)+(i.t>>>16)+(a>>>16),new Z((65535&o)<<16|65535&a,s)}function M(e){var t=k(e,19),n=k(e,61),r=w(e,6);return new Z(t.t^n.t^r.t,t.i^n.i^r.i)}function L(e){var t=k(e,1),n=k(e,8),r=w(e,7);return new Z(t.t^n.t^r.t,t.i^n.i^r.i)}function A(e){var t=k(e,14),n=k(e,18),r=k(e,41);return new Z(t.t^n.t^r.t,t.i^n.i^r.i)}var O=[new Z(b[0],3609767458),new Z(b[1],602891725),new Z(b[2],3964484399),new Z(b[3],2173295548),new Z(b[4],4081628472),new Z(b[5],3053834265),new Z(b[6],2937671579),new Z(b[7],3664609560),new Z(b[8],2734883394),new Z(b[9],1164996542),new Z(b[10],1323610764),new Z(b[11],3590304994),new Z(b[12],4068182383),new Z(b[13],991336113),new Z(b[14],633803317),new Z(b[15],3479774868),new Z(b[16],2666613458),new Z(b[17],944711139),new Z(b[18],2341262773),new Z(b[19],2007800933),new Z(b[20],1495990901),new Z(b[21],1856431235),new Z(b[22],3175218132),new Z(b[23],2198950837),new Z(b[24],3999719339),new Z(b[25],766784016),new Z(b[26],2566594879),new Z(b[27],3203337956),new Z(b[28],1034457026),new Z(b[29],2466948901),new Z(b[30],3758326383),new Z(b[31],168717936),new Z(b[32],1188179964),new Z(b[33],1546045734),new Z(b[34],1522805485),new Z(b[35],2643833823),new Z(b[36],2343527390),new Z(b[37],1014477480),new Z(b[38],1206759142),new Z(b[39],344077627),new Z(b[40],1290863460),new Z(b[41],3158454273),new Z(b[42],3505952657),new Z(b[43],106217008),new Z(b[44],3606008344),new Z(b[45],1432725776),new Z(b[46],1467031594),new Z(b[47],851169720),new Z(b[48],3100823752),new Z(b[49],1363258195),new Z(b[50],3750685593),new Z(b[51],3785050280),new Z(b[52],3318307427),new Z(b[53],3812723403),new Z(b[54],2003034995),new Z(b[55],3602036899),new Z(b[56],1575990012),new Z(b[57],1125592928),new Z(b[58],2716904306),new Z(b[59],442776044),new Z(b[60],593698344),new Z(b[61],3733110249),new Z(b[62],2999351573),new Z(b[63],3815920427),new Z(3391569614,3928383900),new Z(3515267271,566280711),new Z(3940187606,3454069534),new Z(4118630271,4000239992),new Z(116418474,1914138554),new Z(174292421,2731055270),new Z(289380356,3203993006),new Z(460393269,320620315),new Z(685471733,587496836),new Z(852142971,1086792851),new Z(1017036298,365543100),new Z(1126000580,2618297676),new Z(1288033470,3409855158),new Z(1501505948,4234509866),new Z(1607167915,987167468),new Z(1816402316,1246189591)];function R(e){return"SHA-384"===e?[new Z(3418070365,C[0]),new Z(1654270250,C[1]),new Z(2438529370,C[2]),new Z(355462360,C[3]),new Z(1731405415,C[4]),new Z(41048885895,C[5]),new Z(3675008525,C[6]),new Z(1203062813,C[7])]:[new Z(j[0],4089235720),new Z(j[1],2227873595),new Z(j[2],4271175723),new Z(j[3],1595750129),new Z(j[4],2917565137),new Z(j[5],725511199),new Z(j[6],4215389547),new Z(j[7],327033209)]}function F(e,t){var n,r,i,a,o,s,l,c,u,d,p,f,h,g,m,x=[];for(n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],p=0;p<80;p+=1)p<16?(f=2*p,x[p]=new Z(e[f],e[f+1])):x[p]=I(M(x[p-2]),x[p-7],L(x[p-15]),x[p-16]),u=E(c,A(o),(g=s,m=l,new Z((h=o).t&g.t^~h.t&m.t,h.i&g.i^~h.i&m.i)),O[p],x[p]),d=P(S(n),T(n,r,i)),c=l,l=s,s=o,o=P(a,u),a=i,i=r,r=n,n=P(u,d);return t[0]=P(n,t[0]),t[1]=P(r,t[1]),t[2]=P(i,t[2]),t[3]=P(a,t[3]),t[4]=P(o,t[4]),t[5]=P(s,t[5]),t[6]=P(l,t[6]),t[7]=P(c,t[7]),t}var D=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i){var a;if((0,h.Z)(this,n),"SHA-384"!==e&&"SHA-512"!==e)throw new Error("Chosen SHA variant is not supported");var o=i||{};return(a=t.call(this,e,r,i)).S=a.k,a.N=!0,a.C=-1,a.g=x(a.o,a.h,a.C),a.H=F,a.L=function(e){return e.slice()},a.M=R,a.I=function(t,n,r,i){return function(e,t,n,r,i){for(var a,o=31+(t+129>>>10<<5),s=t+n;e.length<=o;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[o]=4294967295&s,e[o-1]=s/4294967296|0,a=0;a<e.length;a+=32)r=F(e.slice(a,a+32),r);return"SHA-384"===i?[r[0].t,r[0].i,r[1].t,r[1].i,r[2].t,r[2].i,r[3].t,r[3].i,r[4].t,r[4].i,r[5].t,r[5].i]:[r[0].t,r[0].i,r[1].t,r[1].i,r[2].t,r[2].i,r[3].t,r[3].i,r[4].t,r[4].i,r[5].t,r[5].i,r[6].t,r[6].i,r[7].t,r[7].i]}(t,n,r,i,e)},a.B=R(e),a.m=1024,a.v="SHA-384"===e?384:512,a.Y=!1,o.hmacKey&&a.X(function(e,t,n,r){var i="hmacKey must include a value and format";if(!t)throw new Error(i);if(void 0===t.value||!t.format)throw new Error(i);return x(t.format,t.encoding||"UTF8",n)(t.value)}(0,o.hmacKey,a.C)),a}return(0,f.Z)(n)}(function(){function e(t,n,r){(0,h.Z)(this,e);var i=r||{};if(this.o=n,this.h=i.encoding||"UTF8",this.numRounds=i.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.u=t,this.l=[],this.A=0,this.p=!1,this.R=0,this.U=!1,this.T=[],this.F=[]}return(0,f.Z)(e,[{key:"update",value:function(e){var t,n=0,r=this.m>>>5,i=this.g(e,this.l,this.A),a=i.binLen,o=i.value,s=a>>>5;for(t=0;t<s;t+=r)n+this.m<=a&&(this.B=this.H(o.slice(t,t+r),this.B),n+=this.m);return this.R+=n,this.l=o.slice(n>>>5),this.A=a%this.m,this.p=!0,this}},{key:"getHash",value:function(e,t){var n,r,i=this.v,a=y(t);if(this.Y){if(-1===a.outputLen)throw new Error("Output length must be specified in options");i=a.outputLen}var o=v(e,i,this.C,a);if(this.U&&this.S)return o(this.S(a));for(r=this.I(this.l.slice(),this.A,this.R,this.L(this.B),i),n=1;n<this.numRounds;n+=1)this.Y&&i%32!=0&&(r[r.length-1]&=16777215>>>24-i%32),r=this.I(r,i,0,this.M(this.u),i);return o(r)}},{key:"setHMACKey",value:function(e,t,n){if(!this.N)throw new Error("Variant does not support HMAC");if(this.p)throw new Error("Cannot set MAC key after calling update");var r=x(t,(n||{}).encoding||"UTF8",this.C);this.X(r(e))}},{key:"X",value:function(e){var t,n=this.m>>>3,r=n/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.U)throw new Error("MAC key already set");for(n<e.binLen/8&&(e.value=this.I(e.value,e.binLen,0,this.M(this.u),this.v));e.value.length<=r;)e.value.push(0);for(t=0;t<=r;t+=1)this.T[t]=909522486^e.value[t],this.F[t]=1549556828^e.value[t];this.B=this.H(this.T,this.B),this.R=this.m,this.U=!0}},{key:"getHMAC",value:function(e,t){var n=y(t);return v(e,this.v,this.C,n)(this.k())}},{key:"k",value:function(){var e;if(!this.U)throw new Error("Cannot call getHMAC without first setting MAC key");var t=this.I(this.l.slice(),this.A,this.R,this.L(this.B),this.v);return e=this.H(this.F,this.M(this.u)),e=this.I(t,this.v,this.m,e,this.v)}}]),e}()),N=function(e){crypto&&crypto.subtle&&crypto.subtle.digest("SHA-512",e).then((function(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("").substr(0,64)})),console.warn("crypto.subtle is not available in this environment - using jsSHA instead.");var t=new D("SHA-512","ARRAYBUFFER");t.update(e);var n=t.getHash("HEX");return Promise.resolve(n.substr(0,64))},_=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(t){var r=t.target?t.target.result:null;r instanceof ArrayBuffer?e(N(r)):n(new Error("Error reading file (arraybuffer issue)."))},r.onerror=function(){n(new Error("Error reading file (errored)."))},r.onabort=function(){n(new Error("Error reading file (aborted)."))},r.readAsArrayBuffer(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=n(48409),U=n(4964),V=n(91),H=n(14737),z=n(90349),W=60,G=50,Y=15e6,q=s().create({baseURL:l.O1.baseUrl,withCredentials:!(0,B._F)()}),J=s().create({baseURL:l.Nx.baseUrl}),X=s().create({baseURL:l.Nx.baseUrl,withCredentials:!(0,B._F)()}),K=null,Q=function(){return K},$=function(e){if(!K)return e;var t=-1===e.indexOf("?")?"?":"&";return e+t+"gd_resource_token="+encodeURIComponent(K)},ee=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t,n,(function(){return q.get($("/".concat(n,"/versions/").concat(r,".zip")),{responseType:"blob"})}));case 2:return a=e.sent,e.prev=3,e.next=6,(0,U.H)(a.data);case 6:return o=e.sent,JSON.parse(o),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),te=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r();case 3:return a=e.sent,e.abrupt("return",a);case 7:if(e.prev=7,e.t0=e.catch(0),!(o=(0,V.T)(e.t0))||403!==o.status){e.next=17;break}return e.next=13,ie(t,n);case 13:return e.next=15,r();case 15:return s=e.sent,e.abrupt("return",s);case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ne=function(e){var t=e,n=e.indexOf("?");n>=0&&(t=e.substring(0,n));var r=t.lastIndexOf("/")+1,i=t.indexOf(".zip");return e.substring(r,i)},re=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return o=a.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,J.get("/project/".concat(n,"/version"),{headers:{Authorization:s},params:{userId:o}});case 9:return l=e.sent,e.abrupt("return",(0,z.TC)({data:l.data,endpointName:"/project/{id}/version of Project API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return",!1);case 3:return o=a.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,X.get("/project/".concat(n,"/action/authorize"),{headers:{Authorization:s},params:{userId:o},validateStatus:function(e){return!0}});case 9:return l=e.sent,(0,B._F)()&&l.data&&"string"===typeof l.data.gd_resource_jwt&&(i=l.data.gd_resource_jwt,K=i),e.abrupt("return",l.status>=200&&l.status<400);case 12:case"end":return e.stop()}var i}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,B._F)()){e.next=4;break}K=null,e.next=6;break;case 4:return e.next=6,X.get("/action/clear-authorization");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var a,o,s,l,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return",null);case 3:return s=(0,r.Z)((0,r.Z)({},n),{},{name:n.name.slice(0,W)}),l=o.uid,e.next=7,a();case 7:return c=e.sent,e.next=10,J.post("/project",s,{headers:{Authorization:c},params:{userId:l}});case 10:return u=e.sent,e.abrupt("return",(0,z.je)({data:u.data,propertyName:"id",endpointName:"/project of Project API"}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,s,l,c,u,d,p,f,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.authenticatedUser,r=t.cloudProjectId,a=t.zippedProject,o=t.previousVersion,s=t.restoredFromVersionId,l=n.getAuthorizationHeader,c=n.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return u=c.uid,e.next=7,l();case 7:return d=e.sent,e.next=10,ge(n,r);case 10:if(p=e.sent){e.next=13;break}return e.abrupt("return");case 13:return f=ne(p),e.next=16,te(n,r,(function(){return q.post($(p),a,{headers:{"content-type":"application/zip"}})}));case 16:return h={newVersion:f},o&&(h.previousVersion=o),s&&(h.restoredFromVersionId=s),e.prev=19,e.next=22,J.post("/project/".concat(r,"/action/commit"),h,{headers:{Authorization:d},params:{userId:u}});case 22:return e.abrupt("return",f);case 25:return e.prev=25,e.t0=e.catch(19),console.error("Error while committing version",e.t0),e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,null,[[19,25]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,o){var s,c,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,me(t,n,r);case 4:return s=e.sent,c=Array(s.length),d=0,e.next=9,u().withConcurrency(10).for(s).process(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(r){var a,u,p,f,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.resourceFile,u=r.presignedUrl,p=r.index,e.prev=1,e.next=4,te(t,n,(function(){return q.post($(u),a,{headers:{"content-type":a.type}})}));case 4:f="".concat(l.O1.baseUrl).concat(u),h=f.substr(0,f.indexOf("?")),c[p]={error:null,resourceFile:a,url:h},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c[p]={error:e.t0,resourceFile:a,url:null};case 12:o(++d,s.length);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,J.get("project",{headers:{Authorization:r},params:{userId:n}});case 5:return a=e.sent,e.abrupt("return",(0,z.TC)({data:a.data,endpointName:"/project of Project API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,J.get("user/".concat(r,"/project"),{headers:{Authorization:a},params:{userId:n}});case 5:return o=e.sent,e.abrupt("return",(0,z.TC)({data:o.data,endpointName:"/user/{id}/project of Project API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return o=a.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,J.get("/project/".concat(n),{headers:{Authorization:s},params:{userId:o}});case 9:return l=e.sent,e.abrupt("return",(0,z.je)({data:l.data,propertyName:"id",endpointName:"/project/{id} of Project API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return s=o.uid,e.next=6,a();case 6:return l=e.sent,e.next=9,J.get("/user/".concat(r,"/project/").concat(n),{headers:{Authorization:l},params:{userId:s}});case 9:return c=e.sent,e.abrupt("return",(0,z.je)({data:c.data,propertyName:"id",endpointName:"/user/{id}/project/{id} of Project API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),fe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,o,s,l,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getAuthorizationHeader,o=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return s={name:r.name?r.name.slice(0,W):void 0,gameId:r.gameId},l=o.uid,e.next=7,a();case 7:return c=e.sent,e.next=10,J.patch("/project/".concat(n),s,{headers:{Authorization:c},params:{userId:l}});case 10:return u=e.sent,e.abrupt("return",(0,z.je)({data:u.data,propertyName:"id",endpointName:"/project/{id} of Project API"}));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),he=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return o=a.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,J.delete("/project/".concat(n),{headers:{Authorization:s},params:{userId:o}});case 9:return l=e.sent,e.abrupt("return",(0,z.je)({data:l.data,propertyName:"id",endpointName:"/project/{id} of Project API"}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAuthorizationHeader,a=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return o=a.uid,e.next=6,r();case 6:return s=e.sent,e.next=9,J.post("/project/".concat(n,"/action/create-presigned-urls"),{resources:["newProjectVersion"]},{headers:{Authorization:s},params:{userId:o}});case 9:if((l=e.sent).data&&l.data[0]){e.next=12;break}return e.abrupt("return");case 12:return e.abrupt("return",l.data[0]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var o,s,l,c,u,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,s=t.firebaseUser){e.next=3;break}throw new Error("User is not authenticated.");case 3:if(0!==r.length){e.next=5;break}return e.abrupt("return",[]);case 5:return l=s.uid,e.next=8,o();case 8:return c=e.sent,e.next=11,Promise.all(r.map(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name,e.t1=t.size,e.next=4,_(t);case 4:return e.t2=e.sent,e.abrupt("return",{type:"project-resource",filename:e.t0,size:e.t1,sha512TruncatedTo256:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return u=e.sent,e.next=14,J.post("/project/".concat(n,"/action/create-presigned-urls"),{requestedResources:u},{headers:{Authorization:c},params:{userId:l}});case 14:if((d=e.sent).data&&Array.isArray(d.data)){e.next=17;break}throw new Error("Response does not contain pre-signed urls for upload.");case 17:return p=d.data.map((function(e,t){return{resourceFile:r[t],presignedUrl:e,index:t}})),e.abrupt("return",p);case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),xe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentVersion){e.next=2;break}throw new Error("Opening of project without current version not handled");case 2:return e.next=4,q.get($("/".concat(t.id,"/versions/").concat(n||t.currentVersion,".zip")),{responseType:"blob"});case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=new RegExp("".concat(l.O1.baseUrl.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"\\/(.*)\\/resources\\/(.*\\/)*([a-zA-Z0-9]+)-([^\\?\\n\\r]+)")),be=function(e){if(e.startsWith(l.O1.baseUrl)){var t=ve.exec(e);if(t)return decodeURIComponent(t[4])}return-1!==e.lastIndexOf("/")?decodeURIComponent(e.substring(e.lastIndexOf("/")+1)):e},Ce=function(e){if(e.startsWith(l.O1.baseUrl)){var t=ve.exec(e);if(t)return t[1]}return null},je=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l,c,u,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.projectId,a=n.email,o=n.feature,s=n.level,l=t.getAuthorizationHeader,c=t.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return u=c.uid,e.next=7,l();case 7:return d=e.sent,e.next=10,J.post("/project-user-acl",{userId:u,projectId:r,feature:o,level:s,email:a},{headers:{Authorization:d},params:{userId:u}});case 10:return p=e.sent,e.abrupt("return",(0,z.je)({data:p.data,propertyName:"projectId",endpointName:"/project-user-acl of Project API"}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l,c,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.projectId,a=n.userId,o=n.feature,s=t.getAuthorizationHeader,l=t.firebaseUser){e.next=4;break}return e.abrupt("return");case 4:return c=l.uid,e.next=7,s();case 7:return u=e.sent,e.next=10,J.delete("/project-user-acl",{headers:{Authorization:u},params:{userId:c,projectId:r,feature:o,targetUserId:a}});case 10:return d=e.sent,e.abrupt("return",d.data);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.projectId,a=t.getAuthorizationHeader,o=t.firebaseUser){e.next=4;break}return e.abrupt("return",[]);case 4:return s=o.uid,e.next=7,a();case 7:return l=e.sent,e.next=10,J.get("/project-user-acl",{headers:{Authorization:l},params:{userId:s,projectId:r}});case 10:return c=e.sent,e.abrupt("return",(0,z.TC)({data:c.data,endpointName:"/project-user-acl of Project API"}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a){var o,s,l,c,u,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getAuthorizationHeader,s=t.firebaseUser){e.next=3;break}return e.abrupt("return");case 3:return l=a.label.trim(),c={label:l?l.slice(0,G):""},u=s.uid,e.next=8,o();case 8:return d=e.sent,e.next=11,J.patch("/project/".concat(n,"/version/").concat(r),c,{headers:{Authorization:d},params:{userId:u}});case 11:return p=e.sent,e.abrupt("return",(0,z.je)({data:p.data,propertyName:"id",endpointName:"/project/{id}/version/{id} of Project API"}));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),we=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a){var o,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,s=a.forceUri||"/project/".concat(r,"/version"),e.next=6,J.get(s,{headers:{Authorization:o},params:a.forceUri?{userId:n}:{userId:n,goal:"history",perPage:15}});case 6:return l=e.sent,c=l.headers.link?(0,H.be)(l.headers.link):null,e.abrupt("return",{versions:(0,z.TC)({data:l.data,endpointName:"/project/{id}/version of Project API"}),nextPageUri:c});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},36465:function(e,t,n){"use strict";n.d(t,{Ab:function(){return C},Af:function(){return y},Al:function(){return T},B$:function(){return P},GN:function(){return j},GT:function(){return F},Gf:function(){return b},ID:function(){return B},LN:function(){return _},Nt:function(){return V},Po:function(){return U},RB:function(){return R},SS:function(){return M},W_:function(){return I},YO:function(){return v},_w:function(){return D},bW:function(){return A},cx:function(){return S},eZ:function(){return k},jV:function(){return O},mR:function(){return E},uG:function(){return L},vq:function(){return w},w7:function(){return Z},yw:function(){return N},zv:function(){return x}});var r=n(74165),i=n(15861),a=n(1413),o=n(36600),s=(n(28381),n(14446)),l=n.n(s),c=n(70983),u=n.n(c),d=n(45911),p=n(57974),f=n(90349),h=n(29343),g=l().create({baseURL:d.$e.baseUrl}),m=function(e){var t=e.asset;return{id:t.id,sellerId:"R0F5QGNCzgOY5w2cxGeKJOq2UaD2",isSellerGDevelop:!0,name:t.name,description:t.longDescription,categories:[],updatedAt:t.updatedAt,createdAt:t.createdAt,thumbnailUrls:t.previewImageUrls,listing:"BUNDLE",productType:"BUNDLE"}},x=function(e){var t=e.bundle;return(0,a.Z)((0,a.Z)({},m({asset:t})),{},{productType:"BUNDLE",listing:"BUNDLE",includedListableProducts:t.includedProducts,includedRedemptionCodes:t.includedRedemptionCodes,descriptionByLocale:t.longDescriptionByLocale,nameByLocale:t.nameByLocale,appStoreProductId:"",prices:[],sellerStripeAccountId:"",stripeProductId:""})},v=function(e){var t=e.assetPack;return(0,a.Z)((0,a.Z)({},m({asset:t})),{},{productType:"ASSET_PACK",listing:"ASSET_PACK",includedListableProductIds:t.includedPackIds,appStoreProductId:"",prices:[],creditPrices:[],sellerStripeAccountId:"",stripeProductId:""})},b=function(e){var t=e.gameTemplate;return(0,a.Z)((0,a.Z)({},m({asset:t})),{},{productType:"GAME_TEMPLATE",listing:"GAME_TEMPLATE",includedListableProductIds:t.includedTemplateIds,appStoreProductId:"",prices:[],creditPrices:[],sellerStripeAccountId:"",stripeProductId:""})},C=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/asset-pack");case 2:return t=e.sent,e.abrupt("return",(0,f.TC)({data:t.data,endpointName:"/asset-pack of Shop API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/game-template");case 2:return t=e.sent,e.abrupt("return",(0,f.TC)({data:t.data,endpointName:"/game-template of Shop API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/credits-package");case 2:return t=e.sent,e.abrupt("return",(0,f.TC)({data:t.data,endpointName:"/credits-package of Shop API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/course-chapter");case 2:return t=e.sent,e.abrupt("return",(0,f.TC)({data:t.data,endpointName:"/course-chapter of Shop API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/course");case 2:return t=e.sent,e.abrupt("return",(0,f.TC)({data:t.data,endpointName:"/course of Shop API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/bundle");case 2:return t=e.sent,e.abrupt("return",(0,f.TC)({data:t.data,endpointName:"/bundle of Shop API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bundleId,i=t.visibility,e.next=3,g.get("/bundle/".concat(n),{params:{visibility:i}});case 3:return a=e.sent,e.abrupt("return",(0,f.je)({data:a.data,propertyName:"id",endpointName:"/bundle/{id} of Shop API"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.productType,o=n.role,e.next=3,t();case 3:return s=e.sent,e.next=6,g.get("/purchase",{params:{userId:i,productType:a,role:o},headers:{Authorization:s}});case 6:return l=e.sent,e.abrupt("return",(0,f.TC)({data:l.data,endpointName:"/purchase of Shop API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,e.next=3,t();case 3:return a=e.sent,e.next=6,g.post("/asset-pack/action/authorize",{},{headers:{Authorization:a},params:{userId:i}});case 6:return o=e.sent,e.abrupt("return",(0,f.RO)({data:o.data,endpointName:"/asset-pack/action/authorize of Shop API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,e.next=3,t();case 3:return a=e.sent,e.next=6,g.post("/game-template/action/authorize",{},{headers:{Authorization:a},params:{userId:i}});case 6:return o=e.sent,e.abrupt("return",(0,f.RO)({data:o.data,endpointName:"/game-template/action/authorize of Shop API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e,t){return-1!==e.indexOf("?")?"".concat(e,"&token=").concat(encodeURIComponent(t)):"".concat(e,"?token=").concat(encodeURIComponent(t))},M=function(e){return e.startsWith("https://private-assets.gdevelop.io/")||e.startsWith("https://private-assets-dev.gdevelop.io/")},L=function(e){return e.startsWith("https://private-game-templates.gdevelop.io/")||e.startsWith("https://private-game-templates-dev.gdevelop.io/")},A=function(e){return M(e)||L(e)},O=function(e){var t=e.split("?")[0];return decodeURIComponent(u().basename(t))},R=function(e){var t=e.productId,n=e.priceName,r=e.userId,i=e.userEmail,a=e.password,o=new URL("".concat(d.$e.baseUrl,"/purchase/action/redirect-to-checkout"));return o.searchParams.set("productId",t),o.searchParams.set("priceName",n),o.searchParams.set("userId",r),o.searchParams.set("customerEmail",i),a&&o.searchParams.set("password",a),o.toString()},F=function(e){var t=e.userId,n=e.userUuid,r=e.productId,i=e.priceName,a=e.userEmail,o=e.password,s=new URL("".concat(d.$e.baseUrl,"/purchase/action/redirect-to-stripe-checkout"));return s.searchParams.set("productId",r),s.searchParams.set("priceName",i),n&&s.searchParams.set("userUuid",n),t&&s.searchParams.set("userId",t),a&&s.searchParams.set("customerEmail",a),o&&s.searchParams.set("password",o),s.toString()},D=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.authenticatedUser,i=t.allResourcePaths,!i.some((function(e){return(0,p.PX)(e)&&L(e)}))){e.next=10;break}if(a=n.profile&&n.profile.id){e.next=6;break}throw new Error("Can not fetch resources from a private game template without being authenticated.");case 6:return e.next=8,I(n.getAuthorizationHeader,{userId:a});case 8:return o=e.sent,e.abrupt("return",o);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.productType,e.next=3,g.get("/product-license",{params:{productType:n}});case 3:return i=e.sent,e.abrupt("return",(0,f.TC)({data:i.data,endpointName:"/product-license of Shop API"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.productId,a=n.usageType,o=n.userId,s=n.password,e.next=3,t();case 3:return l=e.sent,c={userId:o},s&&(c.password=s),e.next=8,g.post("/product/".concat(i,"/action/buy-with-credits"),{usageType:"product-purchase",priceUsageType:a},{params:c,headers:{Authorization:l}});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(e){var t=e.subscription,n=e.privateAssetPackListingData;if(e.isAlreadyReceived||!n.redeemConditions)return null;if(t&&t.benefitsFromEducationPlan)return null;var r=n.redeemConditions.filter((function(e){return n.prices.some((function(t){return t.usageType===e.usageType&&"subscription"===e.reason}))}))[0];if(!r)return null;var i=function(e){var t=e.redeemCondition,n=e.subscription;if("subscription"===t.reason){var r=t.condition.split(",");if(n&&!n.benefitsFromEducationPlan)return r.includes(n.planId)?{canRedeem:!0}:{canRedeem:!1,canUpgrade:["gdevelop_indie","gdevelop_pro","gdevelop_silver","gdevelop_gold"].some((function(e){return n.planId===e&&!r.includes(e)}))}}return{canRedeem:!1}}({redeemCondition:r,subscription:t}),a=i.canRedeem?(0,h.jsx)(o.Trans,{id:"Claim this pack"}):t&&t.planId?i.canUpgrade?(0,h.jsx)(o.Trans,{id:"Upgrade"}):null:(0,h.jsx)(o.Trans,{id:"Get a Sub"});return"commercial"===r.usageType?{actionLabel:a,canRedeemAssetPack:i.canRedeem,message:(0,h.jsx)(o.Trans,{id:"Single commercial use license for claim with Gold or Pro subscription"})}:"personal"===r.usageType?{actionLabel:a,canRedeemAssetPack:i.canRedeem,message:(0,h.jsx)(o.Trans,{id:"Personal license for claim with Gold or Pro subscription"})}:"unlimited"===r.usageType?{actionLabel:a,canRedeemAssetPack:i.canRedeem,message:(0,h.jsx)(o.Trans,{id:"Unlimited commercial use license for claim with Gold or Pro subscription"})}:void 0},U=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.privateAssetPackListingData,i=t.getAuthorizationHeader,a=t.userId,o=t.password,e.next=3,i();case 3:return s=e.sent,l={priceUsageType:"commercial"},o&&(l.password=o),e.next=8,g.post("/product/".concat(n.id,"/action/redeem"),l,{headers:{Authorization:s},params:{userId:a}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getAuthorizationHeader,i=t.userId,a=t.purchaseId,o=t.claimableToken,e.next=3,n();case 3:return s=e.sent,e.next=6,g.post("/purchase/".concat(a,"/action/claim"),{claimableToken:o},{params:{userId:i},headers:{Authorization:s}});case 6:return l=e.sent,e.abrupt("return",(0,f.Bm)({data:l.data,propertyName:"id",endpointName:"/purchase/{id}/action/claim of Shop API"}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},94446:function(e,t,n){"use strict";n.d(t,{$S:function(){return s},Qp:function(){return c},cG:function(){return u},cT:function(){return p},r1:function(){return d}});var r=n(14446),i=n.n(r),a=n(45911),o=n(90349),s=function(e,t){return!e.isPrivateTutorial||!!(t&&t.privateTutorials&&t.privateTutorials.allowedIdPrefixes.some((function(t){return e.id.startsWith(t)})))},l=i().create({baseURL:a.Ud.baseUrl}),c=function(){return l.get("/tutorial",{params:{include:"upcoming"}}).then((function(e){return(0,o.TC)({data:e.data,endpointName:"/tutorial of Asset API"})}))},u=function(e){switch(e){case"ParticleSystem::ParticleEmitter":return["in-depth-tutorial-particle-emitter"];case"Lighting::LightObject":return["flickering-dynamic-light-effect"];case"BitmapText::BitmapTextObject":case"TileMap::TileMap":return["intermediate-bitmap-text-and-tilemap"];default:return[]}},d=function(e){switch(e){case"Tween::TweenBehavior":return["tween-behavior"];case"AnchorBehavior::AnchorBehavior":return["responsive-ui"];case"Physics2::Physics2Behavior":return["in-depth-tutorial-physics-engine-two"];case"PlatformBehavior::PlatformerObjectBehavior":case"PlatformBehavior::PlatformBehavior":return["in-depth-tutorial-platformer"];case"TopDownMovementBehavior::TopDownMovementBehavior":return["in-depth-tutorial-top-down-behavior"];default:return[]}},p=function(e){switch(e){case"CameraX":case"CameraY":case"RotateCamera":case"ZoomCamera":case"FixCamera":case"CentreCamera":return["smooth-camera-movement"];case"ChangeTimeScale":return["pause-menu"];case"EcrireFichierExp":case"EcrireFichierTxt":case"LireFichierExp":case"LireFichierTxt":case"ReadNumberFromStorage":case"ReadStringFromStorage":return["intermediate-storage"];case"PlatformBehavior::SimulateJumpKey":return["simple-trampoline-platformer"];case"AjoutObjConcern":case"PickNearest":case"AjoutHasard":return["intermediate-object-picking"];case"ToggleObjectVariableAsBoolean":case"ToggleGlobalVariableAsBoolean":case"ToggleSceneVariableAsBoolean":case"SetBooleanObjectVariable":case"SetBooleanVariable":return["intermediate-toggle-states-with-variable"];case"Scene":case"PushScene":case"PopScene":return["intermediate-level-select-menu"];case"Animation":case"AnimationName":case"ChangeAnimation":case"ChangeAnimationName":case"AnimatableCapability::AnimatableBehavior::Index":case"AnimatableCapability::AnimatableBehavior::Name":case"AnimatableCapability::AnimatableBehavior::SetIndex":case"AnimatableCapability::AnimatableBehavior::SetName":return["intermediate-changing-animations"];case"PopStartedTouch":case"MouseButtonPressed":case"HasAnyTouchOrMouseStarted":case"HasTouchEnded":return["intermediate-touchscreen-controls"];default:return[]}}},68151:function(e,t,n){"use strict";n.d(t,{$D:function(){return _},Gs:function(){return f},Lf:function(){return F},Mm:function(){return Z},Ri:function(){return b},SS:function(){return M},VZ:function(){return h},XT:function(){return O},Xp:function(){return C},YB:function(){return w},e_:function(){return I},eu:function(){return E},f3:function(){return A},iY:function(){return P},jX:function(){return N},jj:function(){return L},kM:function(){return m},mM:function(){return j},mX:function(){return S},nj:function(){return x},rA:function(){return B},rE:function(){return k},rL:function(){return y},rq:function(){return T},tY:function(){return v},u0:function(){return R},w6:function(){return U},zV:function(){return D}});var r=n(1413),i=n(74165),a=n(15861),o=n(14446),s=n.n(o),l=n(45911),c=n(92078),u=n(91),d=n(48409),p=n(90349),f=5,h=300,g=s().create({baseURL:l.l7.baseUrl}),m=function(e){return!["REDEMPTION_CODE","MANUALLY_ADDED","TEAM_MEMBER"].includes(e)&&!e.startsWith("PURCHASELY_")},x=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.userId||!t.getAuthorizationHeader){e.next=8;break}return e.next=3,t.getAuthorizationHeader();case 3:return n=e.sent,e.next=6,g.get("/subscription-plan",{params:{includeLegacy:t.includeLegacy?"true":"false",userId:t.userId},headers:{Authorization:n}});case 6:return r=e.sent,e.abrupt("return",(0,p.TC)({data:r.data,endpointName:"/subscription-plan of Usage API"}));case 8:return e.t0=p.TC,e.next=11,g.get("/subscription-plan",{params:{includeLegacy:t.includeLegacy?"true":"false"}});case 11:return e.t1=e.sent.data,e.t2={data:e.t1,endpointName:"/subscription-plan of Usage API"},e.abrupt("return",(0,e.t0)(e.t2));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.get("/subscription-plan-pricing-system/".concat(t));case 3:return n=e.sent,e.abrupt("return",(0,p.ke)({data:n.data,endpointName:"/subscription-plan-pricing-system/{id} of Usage API"}));case 7:if(e.prev=7,e.t0=e.catch(0),!(r=(0,u.T)(e.t0))||404!==r.status){e.next=12;break}return e.abrupt("return",null);case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={includeLegacy:t.includeLegacy?"true":"false"},t.subscriptionPlanIds&&t.subscriptionPlanIds.length>0&&(n.subscriptionPlanIds=t.subscriptionPlanIds.join(",")),!t.userId||!t.getAuthorizationHeader){e.next=11;break}return n.userId=t.userId,e.next=6,t.getAuthorizationHeader();case 6:return r=e.sent,e.next=9,g.get("/subscription-plan-pricing-system",{params:n,headers:{Authorization:r}});case 9:return a=e.sent,e.abrupt("return",(0,p.TC)({data:a.data,endpointName:"/subscription-plan-pricing-system of Usage API"}));case 11:return e.t0=p.TC,e.next=14,g.get("/subscription-plan-pricing-system",{params:n});case 14:return e.t1=e.sent.data,e.t2={data:e.t1,endpointName:"/subscription-plan-pricing-system of Usage API"},e.abrupt("return",(0,e.t0)(e.t2));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,g.get("/usage",{params:{userId:n},headers:{Authorization:r}});case 5:return a=e.sent,e.abrupt("return",(0,p.TC)({data:a.data,endpointName:"/usage of Usage API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,g.get("/user-earnings-balance",{params:{userId:n},headers:{Authorization:r}});case 5:if(a=e.sent,0!==(o=(0,p.TC)({data:a.data,endpointName:"/user-earnings-balance of Usage API"})).length){e.next=9;break}throw new Error("No user earnings balance found");case 9:return e.abrupt("return",o[0]);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,g.post("/user-earnings-balance/action/cash-out",{type:r},{params:{userId:n},headers:{Authorization:a}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Z=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,a={userId:n},(0,d._F)()&&(a.platform="mobile"),e.next=7,g.get("/limits",{params:a,headers:{Authorization:r}});case 7:return o=e.sent,e.abrupt("return",(0,p.Bm)({data:o.data,propertyName:"capabilities",endpointName:"/limits of Usage API"}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,g.get("/subscription-v2",{params:{userId:n},headers:{Authorization:r}});case 5:return a=e.sent,e.abrupt("return",(0,p.Bm)({data:a.data,propertyName:"userId",endpointName:"/subscription-v2 of Usage API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,a,o){var s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,g.post("/subscription-v2",(0,r.Z)((0,r.Z)({},a),{},{cancelImmediately:o.cancelImmediately,cancelReasons:o.cancelReasons}),{params:{userId:n},headers:{Authorization:s}});case 5:return l=e.sent,e.abrupt("return",(0,p.Bm)({data:l.data,propertyName:"userId",endpointName:"/subscription-v2 of Usage API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),T=function(e){return!!e&&!!e.purchaselyPlan},S=function(e){return!!e&&"MANUALLY_ADDED"===e.pricingSystemId},P=function(e){return!!e&&"TEAM_MEMBER"===e.pricingSystemId},I=function(e){return!(!e||!e.planId||e.redemptionCodeValidUntil&&!(e.redemptionCodeValidUntil>Date.now()))},E=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/upload-options/signed-url",t);case 2:return n=e.sent,e.abrupt("return",(0,p.oz)({data:n.data,propertyName:"signedUrl",propertyType:"string",endpointName:"/upload-options/signed-url of Usage API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/upload-options/signed-url",t);case 2:return n=e.sent,e.abrupt("return",(0,p.oz)({data:n.data,propertyName:"signedUrls",propertyType:"array",endpointName:"/upload-options/signed-url of Usage API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,g.post("/subscription-v2/action/redirect-to-portal",{},{params:{userId:n},headers:{Authorization:r}});case 5:return a=e.sent,o=(0,p.oz)({data:a.data,propertyName:"sessionPortalUrl",propertyType:"string",endpointName:"/subscription-v2/action/redirect-to-portal of Usage API"}),e.abrupt("return",o.sessionPortalUrl);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(e){var t=e.pricingSystemId,n=e.userId,r=e.userEmail,i=e.quantity,a=new URL("".concat(l.l7.baseUrl,"/subscription-v2/action/redirect-to-checkout-v2"));return a.searchParams.set("pricingSystemId",t),a.searchParams.set("userId",n),a.searchParams.set("customerEmail",r),void 0!==i&&i>1&&a.searchParams.set("quantity",i.toString()),a.toString()},O=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,g.post("/redemption-code/action/redeem-code",{code:r},{params:{userId:n},headers:{Authorization:a}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),R=function(e){return!!e&&["gdevelop_education","gdevelop_startup","gdevelop_gold"].includes(e.planId)&&!e.benefitsFromEducationPlan},F=function(e){return!!e&&!["gdevelop_education","gdevelop_startup"].includes(e.planId)&&!e.benefitsFromEducationPlan},D=function(e){return e&&e.capabilities.classrooms&&e.capabilities.classrooms.showClassroomTab},N=function(e){return!(!e||!e.capabilities.classrooms||e.capabilities.classrooms.showClassroomTab)},_=function(e){return e&&e.capabilities.versionHistory.enabled?e.capabilities.versionHistory.retentionDays:0};function B(e,t){var n=[];return t.fullFeatures.forEach((function(r){var i=null,a=t.featureNamesByLocale[r.featureName];a&&r.displayInSummary&&(i={featureName:r.featureName,displayedFeatureName:(0,c.a)(e,a)},r.enabled&&(i.enabled=r.enabled),r.unlimited&&(i.unlimited=r.unlimited),r.upcoming&&(i.upcoming=r.upcoming),r.trialLike&&(i.trialLike=r.trialLike),r.descriptionByLocale&&(i.description=(0,c.a)(e,r.descriptionByLocale)),n.push(i))})),n}var U=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,e.next=5,g.get("/redemption-code",{params:{userId:n},headers:{Authorization:r}});case 5:return a=e.sent,e.abrupt("return",(0,p.TC)({data:a.data,endpointName:"/redemption-code of Usage API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},41418:function(e,t,n){"use strict";n.d(t,{$E:function(){return V},Bw:function(){return U},Ty:function(){return ne},sS:function(){return O},UD:function(){return H},iE:function(){return R},RR:function(){return te},Pk:function(){return ee},uz:function(){return oe},ql:function(){return re},Nd:function(){return ae},r0:function(){return S},D1:function(){return B},TL:function(){return _},HW:function(){return W},NV:function(){return D},HU:function(){return F},hV:function(){return E},TA:function(){return L},on:function(){return I},YB:function(){return M},wO:function(){return P},MS:function(){return Y},me:function(){return T},Qo:function(){return z},Zb:function(){return G},mD:function(){return A},qX:function(){return ie},GX:function(){return N}});var r=n(74165),i=n(15861),a=n(36600),o=n(28381),s=n(14446),l=n.n(s),c=n(1413),u=n(78118),d=n(29343),p=o.memo((function(e){return(0,d.jsx)(u.Z,(0,c.Z)((0,c.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,d.jsx)("path",{d:"M16.9309 3.64148C15.6562 3.0566 14.2892 2.62566 12.86 2.37883C12.8339 2.37406 12.8079 2.38598 12.7945 2.40977C12.6187 2.72246 12.424 3.13035 12.2876 3.45098C10.7504 3.22082 9.22101 3.22082 7.7153 3.45098C7.5789 3.12324 7.3771 2.72246 7.2005 2.40977C7.1871 2.38676 7.16108 2.37484 7.13507 2.37883C5.70663 2.62484 4.33968 3.05578 3.06413 3.64148C3.05308 3.64625 3.04362 3.65418 3.03733 3.66449C0.444522 7.53813 -0.265791 11.3166 0.0826466 15.0481C0.0842091 15.0664 0.0944825 15.0838 0.108662 15.0949C1.81933 16.3512 3.47643 17.1139 5.10272 17.6194C5.12874 17.6273 5.15632 17.6179 5.17288 17.5964C5.55757 17.0711 5.9005 16.5171 6.19452 15.9346C6.21186 15.9005 6.1953 15.86 6.15983 15.8465C5.61589 15.6402 5.09796 15.3886 4.59972 15.1029C4.5603 15.0799 4.55714 15.0235 4.59343 14.9965C4.69827 14.918 4.80315 14.8362 4.90327 14.7537C4.9214 14.7386 4.94663 14.7354 4.96792 14.7449C8.24104 16.2393 11.7846 16.2393 15.0191 14.7449C15.0404 14.7346 15.0656 14.7378 15.0845 14.7529C15.1847 14.8354 15.2895 14.9179 15.3951 14.9965C15.4314 15.0235 15.429 15.0798 15.3896 15.1029C14.8914 15.3941 14.3735 15.6401 13.8287 15.8457C13.7933 15.8591 13.7775 15.9004 13.7949 15.9345C14.0952 16.5163 14.4382 17.0702 14.8157 17.5956C14.8315 17.6178 14.8599 17.6273 14.8859 17.6194C16.5201 17.1139 18.1772 16.3512 19.8878 15.0949C19.9028 15.0838 19.9123 15.0671 19.9139 15.0489C20.3309 10.7348 19.2154 6.9873 16.9568 3.66523C16.9514 3.65418 16.9419 3.64625 16.9309 3.64148ZM6.68339 12.776C5.69796 12.776 4.88597 11.8713 4.88597 10.7602C4.88597 9.6491 5.68218 8.74441 6.68339 8.74441C7.69241 8.74441 8.49655 9.65707 8.48077 10.7602C8.48077 11.8713 7.68452 12.776 6.68339 12.776ZM13.329 12.776C12.3436 12.776 11.5316 11.8713 11.5316 10.7602C11.5316 9.6491 12.3278 8.74441 13.329 8.74441C14.338 8.74441 15.1421 9.65707 15.1264 10.7602C15.1264 11.8713 14.3381 12.776 13.329 12.776Z",fill:"currentColor"})}))})),f=n(22853),h=o.memo((function(e){return(0,d.jsxs)(u.Z,(0,c.Z)((0,c.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:[(0,d.jsx)("path",{d:"M19.9437 5.8767C19.8957 4.81185 19.7237 4.08327 19.4796 3.44676C19.2236 2.79023 18.8835 2.22978 18.3274 1.67734C17.7713 1.1249 17.2152 0.776621 16.559 0.52442C15.9229 0.276221 15.1948 0.108086 14.1305 0.060048C13.0623 0.0120096 12.7223 0 10.0097 0C7.29317 0 6.95311 0.0120096 5.88889 0.060048C4.82468 0.108086 4.09654 0.280224 3.46041 0.52442C2.80028 0.780625 2.24016 1.1209 1.68805 1.67734C1.13594 2.23379 0.787874 2.79023 0.535824 3.44676C0.291775 4.08327 0.11974 4.81185 0.0717308 5.8767C0.0237211 6.94556 0.0117188 7.28583 0.0117188 10C0.0117188 12.7182 0.0237211 13.0584 0.0717308 14.1233C0.11974 15.1882 0.291775 15.9167 0.535824 16.5532C0.791875 17.2098 1.13194 17.7702 1.68805 18.3227C2.24016 18.8791 2.80028 19.2234 3.45641 19.4756C4.09253 19.7238 4.82068 19.8919 5.88489 19.94C6.95311 19.988 7.29317 20 10.0057 20C12.7223 20 13.0623 19.988 14.1265 19.94C15.1908 19.8919 15.9189 19.7198 16.555 19.4756C17.2112 19.2194 17.7713 18.8791 18.3234 18.3227C18.8755 17.7662 19.2236 17.2098 19.4756 16.5532C19.7237 15.9167 19.8917 15.1882 19.9397 14.1233C19.9877 13.0544 19.9997 12.7142 19.9997 10C19.9997 7.28583 19.9917 6.94155 19.9437 5.8767ZM18.1473 14.0432C18.1033 15.02 17.9393 15.5524 17.8033 15.9007C17.6232 16.3651 17.4032 16.7014 17.0511 17.0536C16.6991 17.4059 16.367 17.6181 15.8989 17.8062C15.5468 17.9424 15.0147 18.1065 14.0425 18.1505C12.9903 18.1986 12.6743 18.2106 10.0017 18.2106C7.32918 18.2106 7.01312 18.1986 5.96091 18.1505C4.98471 18.1065 4.45261 17.9424 4.10454 17.8062C3.64044 17.6261 3.30438 17.4059 2.95231 17.0536C2.60024 16.7014 2.38819 16.3691 2.20016 15.9007C2.06413 15.5484 1.9001 15.016 1.85609 14.0432C1.80808 12.9904 1.79608 12.6741 1.79608 10C1.79608 7.32586 1.80808 7.00961 1.85609 5.95677C1.9001 4.97998 2.06413 4.44756 2.20016 4.09928C2.38019 3.63491 2.60024 3.29864 2.95231 2.94636C3.30438 2.59408 3.63644 2.38191 4.10454 2.19376C4.45661 2.05765 4.98871 1.89351 5.96091 1.84948C7.01312 1.80144 7.32918 1.78943 10.0017 1.78943C12.6743 1.78943 12.9903 1.80144 14.0425 1.84948C15.0187 1.89351 15.5508 2.05765 15.8989 2.19376C16.363 2.3739 16.6991 2.59408 17.0511 2.94636C17.4032 3.29864 17.6152 3.63091 17.8033 4.09928C17.9393 4.45156 18.1033 4.98399 18.1473 5.95677C18.1954 7.00961 18.2074 7.32586 18.2074 10C18.2074 12.6741 18.1914 12.9904 18.1473 14.0432Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M10.0013 4.85989C7.16072 4.85989 4.86426 7.16173 4.86426 10C4.86426 12.8423 7.16472 15.1401 10.0013 15.1401C12.8379 15.1401 15.1383 12.8343 15.1383 10C15.1383 7.15772 12.8419 4.85989 10.0013 4.85989ZM10.0013 13.3347C8.16092 13.3347 6.66862 11.8415 6.66862 10C6.66862 8.15852 8.16092 6.66533 10.0013 6.66533C11.8417 6.66533 13.334 8.15852 13.334 10C13.334 11.8415 11.8417 13.3347 10.0013 13.3347Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M15.3389 5.86069C16.0018 5.86069 16.5392 5.323 16.5392 4.65973C16.5392 3.99646 16.0018 3.45877 15.3389 3.45877C14.676 3.45877 14.1387 3.99646 14.1387 4.65973C14.1387 5.323 14.676 5.86069 15.3389 5.86069Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M0 10C0 12.7182 0.0120024 13.0584 0.060012 14.1233C0.108022 15.1882 0.280056 15.9167 0.524105 16.5532C0.780156 17.2098 1.12022 17.7702 1.67634 18.3227C2.22845 18.8751 2.78856 19.2234 3.44469 19.4756C4.08082 19.7238 4.80896 19.8919 5.87318 19.94C6.94139 19.988 7.28146 20 9.994 20C12.7105 20 13.0506 19.988 14.1148 19.94C15.179 19.8919 15.9072 19.7198 16.5433 19.4756C17.1994 19.2194 17.7596 18.8791 18.3117 18.3227C18.8638 17.7702 19.2118 17.2098 19.4639 16.5532C19.7119 15.9167 19.88 15.1882 19.928 14.1233C19.976 13.0544 19.988 12.7142 19.988 10C19.988 7.28183 19.976 6.94155 19.928 5.8767C19.88 4.81185 19.7079 4.08327 19.4639 3.44676C19.2078 2.79023 18.8678 2.22978 18.3117 1.67734C17.7636 1.1209 17.2034 0.776621 16.5473 0.52442C15.9112 0.276221 15.183 0.108086 14.1188 0.060048C13.0506 0.0120096 12.7105 0 9.998 0C7.28146 0 6.94139 0.0120096 5.87718 0.060048C4.81296 0.108086 4.08482 0.280224 3.44869 0.52442C2.79256 0.780625 2.23245 1.1209 1.68034 1.67734C1.12823 2.23379 0.780156 2.79023 0.528106 3.44676C0.280056 4.08327 0.108022 4.81185 0.060012 5.8767C0.0120024 6.94155 0 7.28183 0 10ZM1.80436 10C1.80436 7.32986 1.81636 7.00961 1.86437 5.95677C1.90838 4.97998 2.07241 4.44756 2.20844 4.09928C2.38848 3.63491 2.60852 3.29864 2.96059 2.94636C3.31266 2.59408 3.64473 2.38191 4.11282 2.19376C4.46489 2.05765 4.997 1.89351 5.96919 1.84948C7.0214 1.80144 7.33747 1.78943 10.01 1.78943C12.6825 1.78943 12.9986 1.80144 14.0508 1.84948C15.027 1.89351 15.5591 2.05765 15.9072 2.19376C16.3713 2.3739 16.7073 2.59408 17.0594 2.94636C17.4115 3.29864 17.6235 3.63091 17.8116 4.09928C17.9476 4.45156 18.1116 4.98399 18.1556 5.95677C18.2036 7.00961 18.2156 7.32586 18.2156 10C18.2156 12.6741 18.2036 12.9904 18.1556 14.0432C18.1116 15.02 17.9476 15.5524 17.8116 15.9007C17.6315 16.3651 17.4115 16.7014 17.0594 17.0536C16.7073 17.4059 16.3753 17.6181 15.9072 17.8062C15.5551 17.9424 15.023 18.1065 14.0508 18.1505C12.9986 18.1986 12.6825 18.2106 10.01 18.2106C7.33747 18.2106 7.0214 18.1986 5.96919 18.1505C4.993 18.1065 4.46089 17.9424 4.11282 17.8062C3.64873 17.6261 3.31266 17.4059 2.96059 17.0536C2.60852 16.7014 2.39648 16.3691 2.20844 15.9007C2.07241 15.5484 1.90838 15.016 1.86437 14.0432C1.81236 12.9904 1.80436 12.6701 1.80436 10Z",fill:"currentColor"})]}))})),g=o.memo((function(e){return(0,d.jsx)(u.Z,(0,c.Z)((0,c.Z)({},e),{},{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,d.jsx)("path",{d:"M9.99 0C4.47 0 0 4.48 0 10C0 15.52 4.47 20 9.99 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 9.99 0ZM16.92 6H13.97C13.65 4.75 13.19 3.55 12.59 2.44C14.43 3.07 15.96 4.35 16.92 6ZM10 2.04C10.83 3.24 11.48 4.57 11.91 6H8.09C8.52 4.57 9.17 3.24 10 2.04ZM2.26 12C2.1 11.36 2 10.69 2 10C2 9.31 2.1 8.64 2.26 8H5.64C5.56 8.66 5.5 9.32 5.5 10C5.5 10.68 5.56 11.34 5.64 12H2.26ZM3.08 14H6.03C6.35 15.25 6.81 16.45 7.41 17.56C5.57 16.93 4.04 15.66 3.08 14ZM6.03 6H3.08C4.04 4.34 5.57 3.07 7.41 2.44C6.81 3.55 6.35 4.75 6.03 6ZM10 17.96C9.17 16.76 8.52 15.43 8.09 14H11.91C11.48 15.43 10.83 16.76 10 17.96ZM12.34 12H7.66C7.57 11.34 7.5 10.68 7.5 10C7.5 9.32 7.57 8.65 7.66 8H12.34C12.43 8.65 12.5 9.32 12.5 10C12.5 10.68 12.43 11.34 12.34 12ZM12.59 17.56C13.19 16.45 13.65 15.25 13.97 14H16.92C15.96 15.65 14.43 16.93 12.59 17.56ZM14.36 12C14.44 11.34 14.5 10.68 14.5 10C14.5 9.32 14.44 8.66 14.36 8H17.74C17.9 8.64 18 9.31 18 10C18 10.69 17.9 11.36 17.74 12H14.36Z",fill:"currentColor"})}))})),m=n(45658),x=o.memo((function(e){return(0,d.jsx)(u.Z,(0,c.Z)((0,c.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,d.jsx)("path",{d:"M17.5881 13.5462C17.4864 13.2694 17.2926 13.1213 17.0719 12.9986C17.0304 12.9743 16.9922 12.9548 16.9597 12.9399C16.8939 12.9058 16.8265 12.8729 16.7596 12.8381C16.0717 12.4734 15.5345 12.0133 15.162 11.4679C15.0562 11.3144 14.9644 11.1517 14.8878 10.9817C14.856 10.8908 14.8575 10.8392 14.8803 10.792C14.9029 10.7557 14.9329 10.7245 14.9682 10.7004C15.0864 10.6222 15.2084 10.5429 15.291 10.4894C15.4384 10.394 15.5551 10.3185 15.6303 10.265C15.9127 10.0675 16.1102 9.85762 16.2337 9.62309C16.3198 9.46105 16.37 9.28236 16.3809 9.09918C16.3918 8.916 16.3632 8.73262 16.2969 8.56151C16.1098 8.06925 15.6449 7.76364 15.0816 7.76364C14.9627 7.76353 14.8442 7.77607 14.7281 7.80105C14.697 7.80778 14.666 7.81489 14.6357 7.82274C14.6409 7.48609 14.6334 7.13073 14.6035 6.78099C14.4973 5.55146 14.0667 4.90695 13.6179 4.393C13.3304 4.07093 12.9918 3.79845 12.6158 3.58652C11.9346 3.1975 11.1622 3 10.3202 3C9.47815 3 8.70946 3.1975 8.02755 3.58652C7.65054 3.79852 7.31128 4.07154 7.02358 4.39449C6.5747 4.90845 6.14416 5.55407 6.03793 6.78248C6.00801 7.13223 6.00052 7.48946 6.00539 7.82424C5.97509 7.81638 5.94442 7.80928 5.91337 7.80254C5.7972 7.77756 5.67871 7.76502 5.55988 7.76514C4.99618 7.76514 4.53047 8.07074 4.34419 8.563C4.27761 8.73419 4.24866 8.91771 4.25931 9.10108C4.26996 9.28445 4.31996 9.46338 4.40591 9.62571C4.52973 9.86024 4.72723 10.0701 5.00964 10.2676C5.08445 10.32 5.20154 10.3955 5.34891 10.492C5.42859 10.5436 5.54492 10.6192 5.65901 10.6948C5.69893 10.7206 5.73285 10.7546 5.75851 10.7946C5.78245 10.8436 5.7832 10.8964 5.74766 10.9936C5.67208 11.1601 5.58182 11.3194 5.47796 11.4698C5.11363 12.0029 4.59219 12.4547 3.92637 12.8164C3.57363 13.0035 3.20705 13.1284 3.05219 13.5492C2.93549 13.8668 3.0118 14.2281 3.30842 14.5326C3.41729 14.6463 3.54356 14.7418 3.68248 14.8158C3.97155 14.9746 4.27893 15.0976 4.5978 15.182C4.66361 15.1989 4.72608 15.2269 4.78259 15.2646C4.89069 15.3593 4.87536 15.5018 5.01937 15.7105C5.09166 15.8184 5.18352 15.9118 5.29019 15.9858C5.59243 16.1946 5.93207 16.2076 6.29192 16.2215C6.61697 16.2338 6.98542 16.248 7.40624 16.3868C7.58055 16.4444 7.76159 16.5559 7.97144 16.6861C8.4753 16.9958 9.16506 17.4196 10.3194 17.4196C11.4738 17.4196 12.1684 16.9935 12.676 16.6827C12.8843 16.5548 13.0643 16.4444 13.2337 16.3883C13.6545 16.2492 14.023 16.2353 14.348 16.223C14.7079 16.2091 15.0475 16.1961 15.3497 15.9873C15.4761 15.8992 15.5813 15.7843 15.658 15.6507C15.7616 15.4745 15.759 15.3514 15.8562 15.2654C15.9092 15.2294 15.9679 15.2026 16.0298 15.1861C16.353 15.1015 16.6646 14.9773 16.9575 14.8165C17.1051 14.7373 17.2379 14.6333 17.3502 14.509L17.354 14.5046C17.6323 14.2068 17.7022 13.8559 17.5881 13.5462Z",fill:"currentColor"})}))})),v=o.memo((function(e){return(0,d.jsx)(u.Z,(0,c.Z)((0,c.Z)({},e),{},{width:"32",height:"32",viewBox:"0 0 32 32",children:(0,d.jsx)("path",{fill:"currentColor",d:"M16.708 0.027c1.745-0.027 3.48-0.011 5.213-0.027 0.105 2.041 0.839 4.12 2.333 5.563 1.491 1.479 3.6 2.156 5.652 2.385v5.369c-1.923-0.063-3.855-0.463-5.6-1.291-0.76-0.344-1.468-0.787-2.161-1.24-0.009 3.896 0.016 7.787-0.025 11.667-0.104 1.864-0.719 3.719-1.803 5.255-1.744 2.557-4.771 4.224-7.88 4.276-1.907 0.109-3.812-0.411-5.437-1.369-2.693-1.588-4.588-4.495-4.864-7.615-0.032-0.667-0.043-1.333-0.016-1.984 0.24-2.537 1.495-4.964 3.443-6.615 2.208-1.923 5.301-2.839 8.197-2.297 0.027 1.975-0.052 3.948-0.052 5.923-1.323-0.428-2.869-0.308-4.025 0.495-0.844 0.547-1.485 1.385-1.819 2.333-0.276 0.676-0.197 1.427-0.181 2.145 0.317 2.188 2.421 4.027 4.667 3.828 1.489-0.016 2.916-0.88 3.692-2.145 0.251-0.443 0.532-0.896 0.547-1.417 0.131-2.385 0.079-4.76 0.095-7.145 0.011-5.375-0.016-10.735 0.025-16.093z"})}))})),b=n(42839),C=o.memo((function(e){return(0,d.jsx)(u.Z,(0,c.Z)((0,c.Z)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{},{children:(0,d.jsx)("path",{d:"M18.9789 5.31353C18.7628 4.51027 18.1295 3.87707 17.3264 3.66077C15.8591 3.25932 9.99001 3.25932 9.99001 3.25932C9.99001 3.25932 4.12113 3.25932 2.65388 3.64555C1.86619 3.86162 1.21742 4.51038 1.00136 5.31353C0.615234 6.78066 0.615234 9.8233 0.615234 9.8233C0.615234 9.8233 0.615234 12.8813 1.00136 14.3331C1.21765 15.1362 1.85074 15.7694 2.654 15.9857C4.13658 16.3873 9.99023 16.3873 9.99023 16.3873C9.99023 16.3873 15.8591 16.3873 17.3264 16.0011C18.1296 15.7849 18.7628 15.1517 18.9791 14.3485C19.3651 12.8813 19.3651 9.83875 19.3651 9.83875C19.3651 9.83875 19.3806 6.78066 18.9789 5.31353ZM8.12141 12.6342V7.01241L13.0019 9.8233L8.12141 12.6342Z",fill:"currentColor"})}))})),j=n(31370),y=n(45911),Z=n(91),k=n(90349),w=l().create({baseURL:y.ST.baseUrl}),T=function(e){return w.get("/user-public-profile/search",{params:{username:e,type:"creator"}}).then((function(e){return(0,k.TC)({data:e.data,endpointName:"/user-public-profile/search of User API"})}))},S=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/user/".concat(t,"/badge"));case 2:return n=e.sent,e.abrupt("return",(0,k.TC)({data:n.data,endpointName:"/user/{id}/badge of User API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,w.get("/team",{headers:{Authorization:i},params:{userId:n,role:"admin"}});case 5:return a=e.sent,e.abrupt("return",(0,k.TC)({data:a.data,endpointName:"/team of User API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,w.get("/user",{headers:{Authorization:a},params:{userId:n,teamId:i,memberType:"basic",include:"decryptedPassword"}});case 5:return o=e.sent,e.abrupt("return",(0,k.TC)({data:o.data,endpointName:"/user of User API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,w.get("/user",{headers:{Authorization:a},params:{userId:n,teamId:i,memberType:"admin"}});case 5:return o=e.sent,e.abrupt("return",(0,k.TC)({data:o.data,endpointName:"/user of User API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),M=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,w.get("/team-membership",{headers:{Authorization:a},params:{userId:n,teamId:i}});case 5:return o=e.sent,e.abrupt("return",(0,k.TC)({data:o.data,endpointName:"/team-membership of User API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,w.get("/team/".concat(i,"/group"),{headers:{Authorization:a},params:{userId:n}});case 5:return o=e.sent,e.abrupt("return",(0,k.TC)({data:o.data,endpointName:"/team/{id}/group of User API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a,o){var s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,w.patch("/team/".concat(i,"/group/").concat(a),o,{headers:{Authorization:s},params:{userId:n}});case 5:return l=e.sent,e.abrupt("return",(0,k.Bm)({data:l.data,propertyName:"id",endpointName:"/team/{id}/group/{id} of User API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),O=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){var o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,w.post("/team/".concat(i,"/group"),a,{headers:{Authorization:o},params:{userId:n}});case 5:return s=e.sent,e.abrupt("return",(0,k.Bm)({data:s.data,propertyName:"id",endpointName:"/team/{id}/group of User API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),R=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return o=e.sent,e.next=5,w.delete("/team/".concat(i,"/group/").concat(a),{headers:{Authorization:o},params:{userId:n}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),F=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,e.next=3,t();case 3:return a=e.sent,e.next=6,w.get("/recommendation",{headers:{Authorization:a},params:{userId:i}});case 6:return o=e.sent,e.abrupt("return",(0,k.TC)({data:o.data,endpointName:"/recommendation of User API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/recommendation");case 2:return t=e.sent,e.abrupt("return",(0,k.TC)({data:t.data,endpointName:"/recommendation of User API"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,a,o){var s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return s=e.sent,e.next=5,w.post("/team/".concat(i,"/action/update-members"),[{groupId:a,userId:o}],{headers:{Authorization:s},params:{userId:n}});case 5:return l=e.sent,e.abrupt("return",(0,k.TC)({data:l.data,endpointName:"/team/{id}/action/update-members of User API"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",{});case 2:return e.next=4,w.get("/user-public-profile",{params:{id:t.join(",")}});case 4:return n=e.sent,e.abrupt("return",(0,k.FR)({data:n.data,endpointName:"/user-public-profile of User API"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/user-public-profile/".concat(t));case 2:return n=e.sent,e.abrupt("return",(0,k.Bm)({data:n.data,propertyName:"id",endpointName:"/user-public-profile/{id} of User API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userId,a=n.adminUserId,o=n.newPassword,e.next=3,t();case 3:return s=e.sent,e.next=6,w.post("/user/action/change-password",{userId:i,newPassword:o},{headers:{Authorization:s},params:{userId:a}});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.userIds,a=n.teamId,o=n.adminUserId,s=n.activate,e.next=3,t();case 3:return l=e.sent,e.next=6,w.post("/user/action/activate-users",{userIds:i,teamId:a,activate:s},{params:{userId:o},headers:{Authorization:l}});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.quantity,a=n.teamId,o=n.adminUserId,e.next=3,t();case 3:return s=e.sent,e.next=6,w.post("/team/".concat(a,"/action/batch-create-users"),{quantity:i},{params:{userId:o},headers:{Authorization:s}});case 6:return l=e.sent,e.abrupt("return",(0,k.TC)({data:l.data,endpointName:"/team/{id}/action/batch-create-users of User API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.email,a=n.activate,o=n.teamId,s=n.adminUserId,e.next=3,t();case 3:return l=e.sent,e.next=6,w.post("/team/".concat(o,"/action/set-admin"),{email:i,activate:a},{params:{userId:s},headers:{Authorization:l}});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("/username-availability/".concat(t));case 2:return n=e.sent,e.abrupt("return",(0,k.oz)({data:n.data,propertyName:"isAvailable",propertyType:"boolean",endpointName:"/username-availability/{username} of User API"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,w.post("/user/".concat(n,"/action/update-discord-role"),{},{headers:{Authorization:i},params:{userId:n}});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.next=5,w.post("/action/register-user-interest",i,{headers:{Authorization:a},params:{userId:n}});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),q=/^https:\/\/[^ ]+$/,J=(0,d.jsx)(a.Trans,{id:"Please enter a valid URL, starting with https://"}),X=/^https:\/\/discord[^ ]+$/,K=(0,d.jsx)(a.Trans,{id:"Please enter a valid URL, starting with https://discord"}),Q=/^$|^(?!@)/,$=(0,d.jsx)(a.Trans,{id:"You don't need to add the @ in your username"}),ee={getFormattingError:function(e){return e&&!q.test(e)?J:void 0},maxLength:150},te={maxLength:32},ne={personalWebsiteLink:{icon:(0,d.jsx)(g,{}),getFormattingError:function(e){return e&&!q.test(e)?J:void 0},maxLength:150},personalWebsite2Link:{icon:(0,d.jsx)(g,{}),getFormattingError:function(e){return e&&!q.test(e)?J:void 0},maxLength:150},githubUsername:{icon:(0,d.jsx)(j.Z,{style:{width:24,height:24}}),prefix:"https://github.com/",maxLength:39,getMessageFromUpdate:function(e){return"github-star/badge-given"===e||"github-star/badge-already-given"===e?{title:{id:"You're awesome!"},message:{id:"Thanks for starring GDevelop repository. We added credits to your account as a thank you gift."}}:"github-star/repository-not-starred"===e?{title:{id:"We could not find your GitHub star"},message:{id:"Make sure you star the repository called 4ian/GDevelop with your GitHub user and try again."}}:"github-star/user-not-found"===e?{title:{id:"We could not find your GitHub user and star"},message:{id:"Make sure you create your GitHub account, star the repository called 4ian/GDevelop, enter your username here and try again."}}:null},getRewardMessage:function(e,t){return e?{id:"Thank you for supporting the GDevelop open-source community. Credits were added to your account as a thank you."}:{id:"[Star the GDevelop repository](https://github.com/4ian/GDevelop) and add your GitHub username here to get {rewardValueInCredits} free credits as a thank you!",values:{rewardValueInCredits:t}}}},twitterUsername:{icon:(0,d.jsx)(b.Z,{}),prefix:"https://twitter.com/",maxLength:15,getMessageFromUpdate:function(e){return"twitter-follow/badge-given"===e||"twitter-follow/badge-already-given"===e?{title:{id:"You're awesome!"},message:{id:"Thanks for following GDevelop. We added credits to your account as a thank you gift."}}:"twitter-follow/account-not-followed"===e?{title:{id:"We could not check your follow"},message:{id:"Make sure you follow the GDevelop account and try again."}}:"twitter-follow/user-not-found"===e?{title:{id:"We could not find your user"},message:{id:"Make sure your username is correct, follow the GDevelop account and try again."}}:null},getRewardMessage:function(e,t){return e?{id:"Thank you for supporting GDevelop. Credits were added to your account as a thank you."}:{id:"[Follow GDevelop](https://twitter.com/GDevelopApp) and enter your Twitter username here to get {rewardValueInCredits} free credits as a thank you!",values:{rewardValueInCredits:t}}}},facebookUsername:{icon:(0,d.jsx)(f.Z,{}),prefix:"https://facebook.com/",maxLength:50},youtubeUsername:{icon:(0,d.jsx)(C,{}),prefix:"https://youtube.com/@",maxLength:100,getMessageFromUpdate:function(e){return"youtube-subscription/badge-given"===e||"youtube-subscription/badge-already-given"===e?{title:{id:"You're awesome!"},message:{id:"Thanks for following GDevelop. We added credits to your account as a thank you gift."}}:"youtube-subscription/channel-not-subscribed"===e?{title:{id:"We could not check your subscription"},message:{id:"Make sure you subscribed to the GDevelop channel and try again."}}:"youtube-subscription/user-not-found"===e?{title:{id:"We could not find your user"},message:{id:"Make sure your username is correct, subscribe to the GDevelop channel and try again."}}:null},getRewardMessage:function(e,t){return e?{id:"Thank you for supporting GDevelop. Credits were added to your account as a thank you."}:{id:"[Subscribe to GDevelop](https://youtube.com/@gdevelopapp) and enter your YouTube username here to get {rewardValueInCredits} free credits as a thank you!",values:{rewardValueInCredits:t}}}},tiktokUsername:{icon:(0,d.jsx)(v,{}),prefix:"https://tiktok.com/@",getFormattingError:function(e){return Q.test(e)?void 0:$},maxLength:30,getMessageFromUpdate:function(e){return"tiktok-follow/badge-given"===e||"tiktok-follow/badge-already-given"===e?{title:{id:"You're awesome!"},message:{id:"Thanks for following GDevelop. We added credits to your account as a thank you gift."}}:"tiktok-follow/account-not-followed"===e?{title:{id:"We could not check your follow"},message:{id:"Make sure you follow the GDevelop account and try again."}}:"tiktok-follow/user-not-found"===e?{title:{id:"We could not find your user"},message:{id:"Make sure your username is correct, follow the GDevelop account and try again."}}:null},getRewardMessage:function(e,t){return e?{id:"Thank you for supporting GDevelop. Credits were added to your account as a thank you."}:{id:"[Follow GDevelop](https://tiktok.com/@gdevelop) and enter your TikTok username here to get {rewardValueInCredits} free credits as a thank you!",values:{rewardValueInCredits:t}}}},instagramUsername:{icon:(0,d.jsx)(h,{}),prefix:"https://instagram.com/",maxLength:30},redditUsername:{icon:(0,d.jsx)(m.Z,{}),prefix:"https://reddit.com/user/",maxLength:20},snapchatUsername:{icon:(0,d.jsx)(x,{}),prefix:"https://snapchat.com/add/",maxLength:15},discordServerLink:{icon:(0,d.jsx)(p,{}),getFormattingError:function(e){return e&&!X.test(e)?K:void 0},maxLength:150}},re=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i){var a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return a=e.sent,e.prev=3,e.next=6,w.get("/course/".concat(i,"/progress"),{headers:{Authorization:a},params:{userId:n}});case 6:return o=e.sent,e.abrupt("return",(0,k.je)({data:o.data,propertyName:"userId",endpointName:"/course/{id}/progress of User API"}));case 10:if(e.prev=10,e.t0=e.catch(3),!(s=(0,Z.T)(e.t0))||404!==s.status){e.next=15;break}return e.abrupt("return",null);case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ie=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,w.put("/course/".concat(n.courseId,"/progress"),{progress:n.progress},{headers:{Authorization:i},params:{userId:n.userId}});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return i=e.sent,e.next=5,w.post("/user/action/generate-custom-auth-token",{},{headers:{Authorization:i},params:{userId:n}});case 5:return a=e.sent,o=(0,k.oz)({data:a.data,propertyName:"customAuthToken",propertyType:"string",endpointName:"/user/action/generate-custom-auth-token of User API"}),e.abrupt("return",o.customAuthToken);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a,o,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.editedUserId,a=n.userId,o=n.changes,e.next=3,t();case 3:return s=e.sent,e.next=6,w.patch("/user/".concat(i),o,{headers:{Authorization:s},params:{userId:a}});case 6:return l=e.sent,e.abrupt("return",(0,k.Bm)({data:l.data,propertyName:"id",endpointName:"/user/{id} of User API"}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},82465:function(e,t,n){"use strict";function r(e,t,n){return t&&t.hasObjectNamed(n)?t.getObject(n):e&&e.hasObjectNamed(n)?e.getObject(n):null}n.d(t,{Z:function(){return r}})},16792:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(29439),i=n(95562),a=function(e){return e?Object.entries(e).reduce((function(e,t){var n=(0,r.Z)(t,2),a=n[0],o=n[1];return o&&(e["data-".concat((0,i.m)(a))]=o),e}),{}):void 0}},39949:function(e,t,n){"use strict";n.d(t,{KL:function(){return i},Q1:function(){return r},vA:function(){return a}});var r=function(e){return e.startsWith("/")},i=function(e){return e.startsWith("http://")||e.startsWith("https://")},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r(e)?"https://wiki.gdevelop.io/gdevelop5".concat(e,"?utm_source=gdevelop&utm_medium=help-link").concat(t?"#".concat(t):""):i(e)?e:""}},50326:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var r=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","LShift","RShift","LControl","RControl","LAlt","RAlt","LSystem","RSystem","SemiColon","Comma","Period","Quote","Slash","BackSlash","Equal","Dash","Menu","LBracket","RBracket","Tilde","Space","Back","Tab","Delete","Insert","Escape","PageUp","PageDown","End","Home","Return","NumpadPageUp","NumpadPageDown","NumpadEnd","NumpadHome","NumpadReturn","Add","Subtract","Multiply","Divide","NumpadAdd","NumpadSubtract","NumpadMultiply","NumpadDivide","Left","Up","Right","Down","NumpadLeft","NumpadUp","NumpadRight","NumpadDown","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Pause"]},45735:function(e,t,n){"use strict";n.d(t,{MK:function(){return i},mC:function(){return a},pG:function(){return s},sf:function(){return o}});var r=n.g.gd,i=function(e,t){if(0===e.getInstancesCount())return null;var n=null,i=new r.InitialInstanceJSFunctor;return i.invoke=function(e){var i=r.wrapPointer(e,r.InitialInstance);i.getPersistentUuid()===t&&(n=i)},e.iterateOverInstances(i),i.delete(),n},a=function(e,t){if(0===e.getInstancesCount())return[];var n=[],i=new r.InitialInstanceJSFunctor;return i.invoke=function(e){var i=r.wrapPointer(e,r.InitialInstance);i.getObjectName()===t&&n.push(i)},e.iterateOverInstances(i),i.delete(),n},o=function(e,t){if(0===e.getInstancesCount())return[];var n=[],i=new r.InitialInstanceJSFunctor;return i.invoke=function(e){var i=r.wrapPointer(e,r.InitialInstance);i.getLayer()===t&&n.push(i)},e.iterateOverInstances(i),i.delete(),n},s=function(e,t){return a(e,t).length}},19431:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var r=n(74165),i=n(15861),a=n(38428),o=n.n(a),s=n(997),l=n(50057),c=n.n(l)()("electron"),u=c?c.ipcRenderer:null,d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,a,l,c,d,p,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlContainers,a=t.onProgress,l=t.throwIfAnyError,c=0,d=null,u){e.next=5;break}throw new Error("Download to local files is not supported.");case 5:return e.next=7,o().withConcurrency(20).for(n).process(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var o,l,p,f,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.url,l=t.filePath,e.prev=1,e.next=4,(0,s.x)({times:2},(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(o).href,e.next=3,u.invoke("local-file-download",t,l);case 3:case"end":return e.stop()}}),e)}))));case 4:return p={item:t},e.abrupt("return",p);case 8:return e.prev=8,e.t0=e.catch(1),f=new Error("Failed to download file from ".concat(o,": ").concat(e.t0.message)),console.error("Error while downloading file ".concat(o,":"),f),d=f,h={item:t,error:f},e.abrupt("return",h);case 15:return e.prev=15,a(c++,n.length),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,8,15,18]])})));return function(t){return e.apply(this,arguments)}}());case 7:if(p=e.sent,f=p.results,!l||!d){e.next=11;break}throw d;case 11:return e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},18455:function(e){var t=function(e,t,n){for(var r=[],i=e;i<t;i++)r.push(n(i));return r};e.exports={mapFor:t,mapReverseFor:function(e,t,n){for(var r=[],i=t-1;i>=e;i--)r.push(n(i));return r},mapVector:function(e,n){return t(0,e.size(),(function(t){return n(e.at(t),t)}))}}},84360:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var r=n.g.gd,i=function(e){var t=new r.MapStringString;for(var n in e)t.set(n,e[n]);return t}},96355:function(e,t,n){"use strict";n.d(t,{R:function(){return r},q:function(){return i}});var r=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},i=function(e,t){return Number.parseFloat(e.toFixed(t)).toString()}},68145:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});var r=function(e){var t=e.isFolder()?e:e.getParent(),n=e.isFolder()?t.getChildrenCount():t.getChildPosition(e)+1;return{folder:t,position:n}}},83297:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var r=n(29439),i=n(28381);var a=function(){var e=i.useState("undefined"===typeof navigator||"boolean"!==typeof navigator.onLine||navigator.onLine),t=(0,r.Z)(e,2),n=t[0],a=t[1],o=function(){return a(!0)},s=function(){return a(!1)};return i.useEffect((function(){return window.addEventListener("online",o),window.addEventListener("offline",s),function(){window.removeEventListener("online",o),window.removeEventListener("offline",s)}}),[]),n}},1236:function(e,t,n){"use strict";var r=n(4942),i=n(74165),a=n(15861),o=n(15671),s=n(43144),l=n(41006),c="gdevelop-cloud-project-autosave",u="cloud-project-autosaves",d="userProjectKey",p=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,[{key:"_initializeDatabase",value:function(){return this.databasePromise||(this.databasePromise=new Promise((function(t,n){e._removeDatabaseIfCorrupt().then((function(){var e=window.indexedDB.open(c);e.onsuccess=function(e){var n=e.target.result;n.objectStoreNames.contains(u)||console.error("Couldn't find the object store ".concat(u,". An issue must have happened when creating the database.")),t(n)},e.onerror=function(e){console.error("IndexedDB could not be opened:",e),n(e)},e.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(u)||t.createObjectStore(u,{keyPath:d})}}),(function(e){console.error("An error occurred while clearing a corrupt database.",e)}))}))),this.databasePromise}},{key:"_getEntry",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initializeDatabase();case 2:return r=t.sent,t.abrupt("return",new Promise((function(t,i){try{var a=r.transaction(u,"readonly"),o=e._stringifyCacheKey(n),s=a.objectStore(u).get(o);s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){console.error("An error occurred while reading from indexedDB:",e),i(e)}}catch(l){console.error("An error occurred while reading from indexedDB:",l),i(l)}})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getEntry(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return r=n.project,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCreationDate",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getEntry(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return r=n.createdAt,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n,a){var o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initializeDatabase();case 2:return o=t.sent,t.abrupt("return",new Promise((function(t,i){try{var s,c=o.transaction(u,"readwrite"),p=e._stringifyCacheKey(n);c.oncomplete=function(e){t()},c.onerror=function(e){console.error("An error occurred while writing to indexedDB:",e),i(e)},c.objectStore(u).put((s={},(0,r.Z)(s,d,p),(0,r.Z)(s,"project",(0,l.h_)(a)),(0,r.Z)(s,"createdAt",Date.now()),s))}catch(f){console.error("An error occurred while writing to indexedDB:",f),i(f)}})));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}],[{key:"isAvailable",value:function(){return"undefined"!==typeof window&&"indexedDB"in window&&"databases"in window.indexedDB&&"function"===typeof window.indexedDB.databases}},{key:"burst",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAvailable()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,window.indexedDB.databases();case 4:if(t.sent.find((function(e){return e.name===c}))){t.next=7;break}return t.abrupt("return");case 7:return t.abrupt("return",new Promise((function(e){window.indexedDB.open(c).onsuccess=function(t){var n=t.target.result;n.objectStoreNames.contains(u)||e();try{n.transaction(u,"readwrite").objectStore(u).clear()}catch(r){console.warn("An error occurred while clearing the cloud project autosave indexedDB:",r)}e()}})));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"_stringifyCacheKey",value:function(e){return"".concat(e.userId,"/").concat(e.cloudProjectId)}},{key:"_removeDatabaseIfCorrupt",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.indexedDB.databases();case 2:if(e.sent.find((function(e){return e.name===c}))){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,new Promise((function(e,t){window.indexedDB.open(c).onsuccess=function(n){var r=n.target.result;if(r.objectStoreNames.contains(u))e();else{console.warn("The cloud project autosave indexed db exist but the object store is not available. Deleting the indexedDB..."),r.close();var i=window.indexedDB.deleteDatabase(c);i.onsuccess=function(){console.warn("Deleted indexedDB successfully!"),e()},i.onerror=function(e){console.error("Couldn't delete indexedDB: ",e),t()},i.onblocked=function(){console.error("Couldn't delete indexedDB due to the operation being blocked."),t()}}}}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.Z=p},32921:function(e,t,n){"use strict";n.d(t,{IE:function(){return u},O8:function(){return s},nu:function(){return l},vv:function(){return c}});var r=n(30141),i=n(50394),a=n.n(i),o=n.g.gd,s=function(e){return/^([A-Za-z]{1}[A-Za-z\d_]*\.)+[A-Za-z][A-Za-z\d_]*$/i.test(e)},l=function(e,t){var n={},r=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";n[e]||(n[e]=[]),n[e].push({type:t,message:r,extraExplanation:i})};return t.getPackageName()?t.getPackageName().length>=255?r("packageName","error",e._({id:"The package name is too long."}),e._({id:"Change the package name in the game properties."})):s(t.getPackageName())||r("packageName","error",e._({id:'The package name is containing invalid characters or not following the convention "xxx.yyy.zzz" (numbers allowed after a letter only).'}),e._({id:"Change the package name in the game properties."})):r("packageName","error",e._({id:"The package name is empty."}),e._({id:"Choose and enter a package name in the game properties."})),t.getName()||r("name","error",e._({id:"The name of your game is empty"}),e._({id:"Change the name in the project properties."})),(!t.getVersion()||t.getVersion().split(".").length<3)&&r("packageName","error",e._({id:"The version that you've set for the game is invalid."}),e._({id:"Enter a version in the game properties."})),n},c=function(e,t){return!Object.keys(t).length||((0,r.gR)({message:e._({id:"Your game has some invalid elements, please fix these before continuing:"})+"\n\n"+a()(t).map((function(e){return e.map((function(e){return"- ".concat(e.message)})).join("\n")})).join("\n"),rawError:void 0,errorId:"project-invalid-settings-error",doNotReport:!0}),!1)},u=function(e){for(var t=o.WholeProjectRefactorer.findInvalidRequiredBehaviorProperties(e),n=0;n<t.size();n++){var r=t.at(n),i=o.WholeProjectRefactorer.getBehaviorsWithType(r.getSourceObject(),r.getExpectedBehaviorTypeName()).toJSArray();console.error('Invalid value for required behavior property "'.concat(r.getSourcePropertyName(),'" in object ').concat(r.getSourceObject().getName()," for behavior ").concat(r.getSourceBehaviorContent().getName(),".")),console.info("Expected behavior of type ".concat(r.getExpectedBehaviorTypeName(),". Possibles values are: ").concat(i.join(", ")||"(none)","."))}}},36062:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var r=n(15671),i=n(43144),a=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,null,[{key:"extractNumberProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"number"!==typeof n?null:n}},{key:"extractStringProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"string"!==typeof n?null:n}},{key:"extractBooleanProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return"boolean"!==typeof n?null:n}},{key:"extractObjectProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return this.extractObject(n)}},{key:"extractArrayProperty",value:function(e,t){if(!this.extractObject(e))return null;var n=e[t];return this.extractArray(n)}},{key:"extractObject",value:function(e){return null===e||void 0===e||"object"!==typeof e||Array.isArray(e)?null:e}},{key:"extractArray",value:function(e){return null!==e&&void 0!==e&&"object"===typeof e&&Array.isArray(e)?e:null}}]),e}()},41006:function(e,t,n){"use strict";n.d(t,{VY:function(){return a},XH:function(){return i},ax:function(){return o},h_:function(){return s},qx:function(){return l}});var r=n.g.gd;function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"serializeTo",n=new r.SerializerElement;e[t](n);var i=r.Serializer.toJSON(n);try{var a=JSON.parse(i);return n.delete(),a}catch(o){throw n.delete(),console.error("Invalid JSON when serializing to JS object. toJSON should always return a valid JSON string.",{json:i,error:o}),o}}function a(e){var t=new r.SerializerElement;r.BehaviorDefaultFlagClearer.serializeObjectWithCleanDefaultBehaviorFlags(e,t);var n=r.Serializer.toJSON(t);try{var i=JSON.parse(n);return t.delete(),i}catch(a){throw t.delete(),console.error("Invalid JSON when serializing to JS object. toJSON should always return a valid JSON string.",{json:n,error:a}),a}}function o(e,t,n,i){var a=new r.VectorString,o=new r.SerializerElement;r.ObjectAssetSerializer.serializeTo(e,t,n,o,a),i.push.apply(i,a.toJSArray()),a.delete();var s=JSON.parse(r.Serializer.toJSON(o));return o.delete(),s}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"serializeTo",n=new r.SerializerElement;e[t](n);var i=r.Serializer.toJSON(n);return n.delete(),i}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unserializeFrom",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=r.Serializer.fromJSObject(t);i?e[n](i,a):e[n](a),a.delete()}},95562:function(e,t,n){"use strict";n.d(t,{S:function(){return r},m:function(){return i}});var r=function(e,t){return e.length>t?e.substring(0,t)+"...":e},i=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}},61165:function(e,t,n){"use strict";n.d(t,{AD:function(){return o},Jv:function(){return s},TN:function(){return a}});var r=function(e,t){return e.x===t.x&&e.y===t.y},i=function(e){var t=e.tileMapTileSelection,n=e.tileCoordinates;if("rectangle"===t.kind){var r=t.coordinates[0],i=t.coordinates[1],a=i.x-r.x+1,o=i.y-r.y+1,s=n.x-r.x,l=n.y-r.y;return{x:r.x+(t.flipHorizontally?a-s-1:s),y:r.y+(t.flipVertically?o-l-1:l)}}return n},a=function(e){var t=e.tileMapTileSelection,n=e.coordinates,a=e.tileSize,o=e.sceneToTileMapTransformation;if(0===n.length)return[];if(1===n.length){var s=[0,0];o.transform([n[0].x,n[0].y],s);var l,c=Math.floor(s[0]/a),u=Math.floor(s[1]/a);if("rectangle"===t.kind){var d=t.coordinates[0];l=i({tileMapTileSelection:t,tileCoordinates:d})}return[{erase:"erase"===t.kind,tileCoordinates:l,topLeftCorner:{x:c,y:u},bottomRightCorner:{x:c,y:u}}]}var p=[];if(2===n.length){var f=[0,0];o.transform([n[0].x,n[0].y],f);var h=[0,0];o.transform([n[1].x,n[1].y],h);var g=[Math.min(f[0],h[0]),Math.min(f[1],h[1])],m=[Math.max(f[0],h[0]),Math.max(f[1],h[1])],x=[Math.floor(g[0]/a),Math.floor(g[1]/a)],v=[Math.floor(m[0]/a),Math.floor(m[1]/a)];if("erase"===t.kind)return p.push({erase:!0,topLeftCorner:{x:x[0],y:x[1]},bottomRightCorner:{x:v[0],y:v[1]}}),p;if("rectangle"===t.kind){var b=t.coordinates[0],C=t.coordinates[1],j=C.x-b.x+1,y=C.y-b.y+1;if(function(e){return"rectangle"===e.kind&&2===e.coordinates.length&&e.coordinates[0].x===e.coordinates[1].x&&e.coordinates[0].y===e.coordinates[1].y}(t))return p.push({tileCoordinates:i({tileMapTileSelection:t,tileCoordinates:b}),topLeftCorner:{x:x[0],y:x[1]},bottomRightCorner:{x:v[0],y:v[1]}}),p;for(var Z=x[0];Z<=v[0];Z++)for(var k=x[1];k<=v[1];k++){var w=Z-x[0],T=k-x[1],S=v[0]-Z,P=v[1]-k;if(0!==w||0!==T)if(0!==S||0!==P){var I=void 0,E=void 0;I=0===w||1===j?b.x:0===S||2===j?C.x:(w-1)%(j-2)+1+b.x,E=0===T||1===y?b.y:0===P||2===y?C.y:(T-1)%(y-2)+1+b.y,p.push({tileCoordinates:i({tileMapTileSelection:t,tileCoordinates:{x:I,y:E}}),topLeftCorner:{x:Z,y:k},bottomRightCorner:{x:Z,y:k}})}else p.push({tileCoordinates:i({tileMapTileSelection:t,tileCoordinates:C}),topLeftCorner:{x:Z,y:k},bottomRightCorner:{x:Z,y:k}});else p.push({tileCoordinates:i({tileMapTileSelection:t,tileCoordinates:b}),topLeftCorner:{x:Z,y:k},bottomRightCorner:{x:Z,y:k}})}return j>=4&&y>=4?p:function(e){for(var t=e.tileMapTilePatches,n=(e.minX,e.minY,e.maxX),i=e.maxY,a=[],o=function(){var e=t[0];if(!e||!e.tileCoordinates)return 0;var o=e.tileCoordinates;if(!o)return 0;for(var s=t.slice(1).filter((function(e){return e.tileCoordinates&&r(o,e.tileCoordinates)})),l=0,c=0,u=s.filter((function(t){return t.topLeftCorner.x>e.topLeftCorner.x&&t.topLeftCorner.y===e.topLeftCorner.y&&r(t.topLeftCorner,t.bottomRightCorner)})).map((function(e){return e.topLeftCorner.x})),d=1;d<=n-e.topLeftCorner.x&&u.includes(d+e.topLeftCorner.x);d++)l=d;for(var p=s.filter((function(t){return t.topLeftCorner.x===e.topLeftCorner.x&&t.topLeftCorner.y>e.topLeftCorner.y&&r(t.topLeftCorner,t.bottomRightCorner)})).map((function(e){return e.topLeftCorner.y})),f=1;f<=i-e.topLeftCorner.y&&p.includes(f+e.topLeftCorner.y);f++)c=f;if(0===l&&0===c)return a.push(t.shift()),1;for(var h=!0,g=[],m=function(n){for(var i,a=function(i){if(0===n&&0===i)return g.push(0),0;var a=t.findIndex((function(t){return t.topLeftCorner.x===n+e.topLeftCorner.x&&t.topLeftCorner.y===i+e.topLeftCorner.y&&t.tileCoordinates&&r(o,t.tileCoordinates)}));if(-1===a)return h=!1,1;g.push(a)},s=0;s<=c&&(0===(i=a(s))||1!==i);s++);if(!h)return 1},x=0;x<=l&&!m(x);x++);h?(a.push({tileCoordinates:o,topLeftCorner:e.topLeftCorner,bottomRightCorner:{x:e.topLeftCorner.x+l,y:e.topLeftCorner.y+c}}),g.sort((function(e,t){return e>t?-1:1})),g.forEach((function(e){return t.splice(e,1)}))):a.push(t.shift())};t[0]&&0!==o(););return a}({tileMapTilePatches:p,minX:x[0],minY:x[1],maxX:v[0],maxY:v[1]})}}return[]},o=function(e){var t=e.getConfiguration().getProperties(),n=parseFloat(t.get("columnCount").getValue());return{rowCount:parseFloat(t.get("rowCount").getValue()),columnCount:n,tileSize:parseFloat(t.get("tileSize").getValue()),atlasImage:t.get("atlasImage").getValue()}},s=function(e){var t=e.rowCount,n=e.columnCount;e.tileSize,e.atlasImage;return!Number.isInteger(n)||n<=0||!Number.isInteger(t)||t<=0}},28842:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var r=function(){return Date.now()+"-"+Math.floor(1e6*Math.random())}},68009:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(28381),i=n(12813),a=n(71046),o=n.n(a),s=function(e,t){var n=(0,i.t)(),a=(0,r.useRef)({cb:e,delay:t});return(0,r.useEffect)((function(){a.current={cb:e,delay:t}})),(0,r.useCallback)(o()((function(){var e;a.current.delay===t&&n.current&&(e=a.current).cb.apply(e,arguments)}),t,{leading:!1,trailing:!0}),[t,o()])}},38501:function(e,t,n){"use strict";n.d(t,{W:function(){return o},Z:function(){return a}});var r=n(29439),i=n(28381);function a(){var e=i.useState(),t=(0,r.Z)(e,2)[1];return i.useCallback((function(){return t({})}),[])}function o(){var e=i.useState({}),t=(0,r.Z)(e,2),n=t[0],a=t[1];return[n,i.useCallback((function(){return a({})}),[])]}},31689:function(e,t,n){"use strict";n.d(t,{IG:function(){return x},Px:function(){return v},dN:function(){return m}});var r=n(1413),i=n(74165),a=n(15861),o=n(29439),s=n(28381),l=n(65056),c=n(71106),u=n(10959),d=n(16999),p=n(91),f=n(15954),h=n(63873),g=n(56487),m=function(e){var t=e.projectId,n=e.projectName;return{gameId:t,authorName:e.projectAuthor||"Unspecified publisher",gameName:n||"Untitled game",savedStatus:e.savedStatus}},x=function(e){var t=e.project,n=e.copyLeaderboardsAndMultiplayerLobbiesFromGameId,r=e.onGameRegistered,l=s.useContext(c.ZP),u=l.profile,x=l.getAuthorizationHeader,v=(0,f.h)().configureMultiplayerLobbiesIfNeeded,b=s.useState(null),C=(0,o.Z)(b,2),j=C[0],y=C[1],Z=t?t.getProjectUuid():null,k=(0,g.ZA)(Z),w=s.useState(null),T=(0,o.Z)(w,2),S=T[0],P=T[1],I=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&t){e.next=2;break}return e.abrupt("return");case 2:return n=u.id,e.prev=3,P(null),e.next=7,(0,d.cF)(x,n,t.getProjectUuid());case 7:r=e.sent,y(r),e.next=22;break;case 11:if(e.prev=11,e.t0=e.catch(3),console.error("Unable to load the game",e.t0),!(a=(0,p.T)(e.t0))||404!==a.status){e.next=18;break}return P("not-found"),e.abrupt("return");case 18:if(!a||403!==a.status){e.next=21;break}return P("not-owned"),e.abrupt("return");case 21:P("unexpected");case 22:case"end":return e.stop()}}),e,null,[[3,11]])}))),[t,x,u]);s.useEffect((function(){j||I()}),[I,j]);var E=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&t){e.next=2;break}return e.abrupt("return");case 2:return n=(0,d.WO)(t.getAuthorIds().toJSArray()),e.prev=3,e.next=6,(0,d.wC)(x,u.id,t.getProjectUuid(),{author:n});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Error while updating game authors:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])}))),[u,t,x]),M=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var a,o,s,c,u,f,g;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.profile,o=l.getAuthorizationHeader,t&&a){e.next=3;break}return e.abrupt("return");case 3:return s=t.getProjectUuid(),c=a.id,e.prev=5,e.next=8,(0,d.cF)(o,c,s);case 8:e.next=26;break;case 10:if(e.prev=10,e.t0=e.catch(5),!(u=(0,p.T)(e.t0))||404!==u.status){e.next=26;break}return f=k.length>0,e.next=17,(0,d.r$)(o,c,m({projectId:s,projectName:t.getName(),projectAuthor:t.getAuthor(),savedStatus:f?"saved":"draft"}));case 17:if(E(),!r){e.next=21;break}return e.next=21,r();case 21:if(!n){e.next=25;break}return g=(0,h.bf)({project:t}),e.next=25,Promise.all([v(t,n),(0,h.oK)({project:t,leaderboardsToReplace:g,sourceGameId:n,authenticatedUser:l,setProgress:function(){}})]).catch((function(e){console.error("Error while copying leaderboards or setting up multiplayer lobbies:",e)}));case 25:I();case 26:case"end":return e.stop()}}),e,null,[[5,10]])}))),[t,E,n,I,v,l,r,k]);return s.useMemo((function(){return{game:j,setGame:y,refreshGame:I,gameAvailabilityError:S,registerGameIfNeeded:M}}),[j,y,I,S,M])},v=function(e){var t=e.project,n=e.copyLeaderboardsAndMultiplayerLobbiesFromGameId,d=e.onGameRegistered,p=s.useContext(c.ZP),f=p.profile,h=p.getAuthorizationHeader,g=(0,l.Z)().showAlert,m=x({project:t,copyLeaderboardsAndMultiplayerLobbiesFromGameId:n,onGameRegistered:d}),v=m.game,b=s.useState(null),C=(0,o.Z)(b,2),j=C[0],y=C[1],Z=s.useCallback((0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&v){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,u.BY)(h,f.id,v.id);case 5:t=e.sent,y(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error while loading builds:",e.t0),g({title:{id:"Error while loading builds"},message:{id:"An error occurred while loading your builds. Verify your internet connection and try again."}});case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[f,h,g,v]);return s.useEffect((function(){Z()}),[Z]),s.useMemo((function(){return(0,r.Z)((0,r.Z)({},m),{},{gameBuilds:j,refreshGameBuilds:Z})}),[m,Z,j])}},51063:function(e,t,n){"use strict";n.d(t,{s:function(){return v}});var r=n(74165),i=n(15861),a=n(29439),o=n(36600),s=n(28381),l=n(1773),c=n(10888),u=n(40243),d=n(86278),p=n(11374),f=n(61325),h=n(64480),g=n(29343),m={tableCell:{wordBreak:"break-word"}},x=function(e){var t=e.progress,n=e.result,r=e.onAbandon,i=e.onRetry,a=e.genericError,s=n&&n.erroredResources.length>0||!!a;return(0,g.jsx)(l.ZP,{title:(0,g.jsx)(o.Trans,{id:"Importing project resources"}),actions:[r?(0,g.jsx)(c.Z,{label:(0,g.jsx)(o.Trans,{id:"Retry"}),primary:!0,onClick:i},"retry"):null,i?(0,g.jsx)(l.vF,{label:(0,g.jsx)(o.Trans,{id:"Ignore and continue"}),primary:!0,disabled:!r,onClick:r},"close"):null],cannotBeDismissed:!s,fullscreen:"never-even-on-mobile",open:!0,maxWidth:"sm",children:(0,g.jsxs)(f.ak,{noMargin:!0,expand:!0,children:[(0,g.jsx)(d.Z,{children:s?(0,g.jsx)(o.Trans,{id:"There were errors when importing resources for the project. You can retry (recommended) or continue despite the errors. In this case, the project might be missing some resources."}):null}),(0,g.jsx)(u.x1,{noMargin:!0,expand:!0,children:(0,g.jsx)(h.Z,{variant:t>0?"determinate":"indeterminate",value:t})}),s?(0,g.jsxs)(p.iA,{children:[(0,g.jsx)(p.xD,{children:(0,g.jsxs)(p.SC,{children:[(0,g.jsx)(p.bY,{children:(0,g.jsx)(o.Trans,{id:"Resource name"})}),(0,g.jsx)(p.bY,{children:(0,g.jsx)(o.Trans,{id:"Error"})})]})}),(0,g.jsxs)(p.RM,{children:[n?n.erroredResources.map((function(e){var t=e.resourceName,n=e.error;return(0,g.jsxs)(p.SC,{children:[(0,g.jsx)(p.Nn,{style:m.tableCell,children:t}),(0,g.jsx)(p.Nn,{style:m.tableCell,children:n.toString()})]},t)})):null,a?(0,g.jsxs)(p.SC,{children:[(0,g.jsx)(p.Nn,{style:m.tableCell,children:"-"}),(0,g.jsx)(p.Nn,{style:m.tableCell,children:a.toString()})]}):null]})]}):null]})})},v=function(e){var t=e.onDoProcess,n=s.useState(0),o=(0,a.Z)(n,2),l=o[0],c=o[1],u=s.useState(null),d=(0,a.Z)(u,2),p=d[0],f=d[1],h=s.useState(!1),m=(0,a.Z)(h,2),v=m[0],b=m[1],C=s.useState(null),j=(0,a.Z)(C,2),y=j[0],Z=j[1],k=s.useState(null),w=(0,a.Z)(k,2),T=w[0],S=w[1],P=s.useState(null),I=(0,a.Z)(P,2),E=I[0],M=I[1],L=s.useCallback(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(0),S(null),M(null),Z(null),f(null),b(!0),i=null,e.prev=7,e.next=10,t(n,(function(e,t){c(e/t*100)}));case 10:if(i=e.sent,c(100),0!==i.erroredResources.length){e.next=17;break}return b(!1),f(null),Z(null),e.abrupt("return");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),f(e.t0);case 22:return e.abrupt("return",new Promise((function(e){S((function(){return function(){e(L(n))}})),M((function(){return function(){b(!1),f(null),Z(null),e()}})),Z(i),b(!1)})));case 23:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t){return e.apply(this,arguments)}}(),[t]),A=s.useCallback((function(){var e=y&&y.erroredResources.length>=0||!!p;return v||e?(0,g.jsx)(x,{progress:l,result:y,genericError:p,onAbandon:E,onRetry:T}):null}),[v,l,y,E,T,p]);return s.useMemo((function(){return{ensureProcessIsDone:L,renderProcessDialog:A}}),[L,A])}},21676:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var r=n(28381),i=function(e,t){var n=(0,r.useRef)();(0,r.useEffect)((function(){n.current=e})),(0,r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}},12813:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(28381),i=function(){var e=r.useRef(!1);return r.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),e}},19438:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(29439),i=n(28381),a=n(85545),o=function(e){var t=i.useState(null),n=(0,r.Z)(t,2),o=n[0],s=n[1],l=i.useState(0),c=(0,r.Z)(l,2),u=c[0],d=c[1],p=i.useRef(0),f=i.useRef({}),h=(0,a.i)(u);return i.useEffect((function(){d((function(e){return e+1}))}),[e]),i.useCallback((function(){return(p.current<u||null===o)&&!f.current[u]&&(f.current[u]=!0,e().then((function(e){u===h.current&&(s(e),p.current=u)})).finally((function(){delete f.current[u]}))),o}),[o,e,u,h])}},39631:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(28381),i={},a=function(e,t){var n=r.useRef(null),a=t&&t.context?t.context:null,o=t&&t.delay?t.delay:600,s=r.useRef(null),l=r.useCallback((function(){a&&delete i[a],n.current&&clearTimeout(n.current)}),[a]),c=!t||!t.doNotCancelOnScroll;return r.useEffect((function(){if(c)return document.addEventListener("scroll",l,{capture:!0}),function(){l(),document.removeEventListener("scroll",l,{capture:!0})}}),[l,c]),{onTouchStart:r.useCallback((function(t){if(n.current&&clearTimeout(n.current),a){if(i[a])return;i[a]=!0}var r=function(e){return e.touches&&e.touches.length>0?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,currentTarget:e.currentTarget}:{clientX:0,clientY:0,currentTarget:e.currentTarget}}(t);s.current=r,n.current=setTimeout((function(){e(r)}),o)}),[e,a,o]),onTouchMove:r.useCallback((function(e){if(1===e.touches.length){var t=e.touches[0];if(s.current){var n=s.current,r=n.clientX,i=n.clientY;(Math.abs(t.clientX-r)>10||Math.abs(t.clientY-i)>10)&&l()}}else l()}),[s,l]),onTouchEnd:l}}},51265:function(e,t,n){"use strict";var r=n(28381),i=new Set;if("undefined"!==typeof window){var a,o=function(){return i.forEach((function(e){return e()}))};window.addEventListener("resize",(function(){var e=document.activeElement;(!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName)&&(clearTimeout(a),a=setTimeout(o,200))}))}t.Z=function(e){r.useEffect((function(){return i.add(e),function(){i.delete(e)}}),[e])}},46771:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});var r=n(28381);t.Z=function(e){var t=(0,r.useRef)(null),n=t.current;if(null!==n)return n;var i=e();return t.current=i,i};var i=function(e){var t=(0,r.useRef)(null);if(null!==t.current)return t;var n=e();return t.current=n,t}},85545:function(e,t,n){"use strict";n.d(t,{_:function(){return i},i:function(){return a}});var r=n(28381);function i(e){var t=r.useRef(e);r.useEffect((function(){t.current=e}),[e]);var n=r.useCallback((function(){return t.current.apply(t,arguments)}),[]);return n}function a(e){var t=r.useRef(e);return r.useEffect((function(){t.current=e}),[e]),t}},4964:function(e,t,n){"use strict";n.d(t,{G:function(){return s},H:function(){return o}});var r=n(74165),i=n(15861),a=n(20392),o=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.k)();case 2:return n=e.sent,e.abrupt("return",new Promise((function(e,r){n.createReader(new n.BlobReader(t),(function(t){t.getEntries((function(t){t[0].getData(new n.TextWriter,(function(t){e(t)}))}))}),(function(e){console.error("An error occurred when unzipping blob",e),r(e)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,s=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"file.txt",e.next=3,(0,a.k)();case 3:return i=e.sent,o=new i.TextReader(t),e.abrupt("return",new Promise((function(e,t){i.createWriter(new i.BlobWriter("application/zip"),(function(t){t.add(n,o,(function(){t.close((function(t){e(t)}))}))}),(function(e){console.error("An error occurred when zipping content",e),t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},20392:function(e,t,n){"use strict";n.d(t,{k:function(){return c}});var r=n(95018),i=".",a="/external/zip.js/WebContent",o="/external/zlib-asm",s=!1,l=null,c=function(){if(s){var e=n.g.zip;return Promise.resolve(e)}return l||(l=(0,r.v)(i+a+"/zip.js").then((function(){var e=n.g.zip;if(!e)throw new Error('Can not find "zip" in the global namespace after loading zip.js. Has the zip.js script being loaded properly?');return l=null,s=!0,e.workerScripts={deflater:[i+a+"/z-worker.js",i+o+"/zlib.js",i+a+"/zlib-asm/codecs.js"],inflater:[i+a+"/z-worker.js",i+o+"/zlib.js",i+a+"/zlib-asm/codecs.js"]},e})),l)}},5675:function(e,t,n){"use strict";n.d(t,{$u:function(){return l},Qi:function(){return a},e_:function(){return o},r9:function(){return c}});var r=1/16,i=Math.pow(2,.125),a=i,o=Math.pow(i,-1),s=Math.pow(1.7,r),l=function(e){return Math.pow(s,Math.sign(e))},c=function(e){return Math.max(Math.min(e,128),.0078125)}},92078:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});var r=function(e,t){if(!t)return"";if("string"===typeof t)return t;if("object"!==typeof t)return"";var n=e.language;if(t[n])return t[n];var r=n.split("-")[0];if(t[r])return t[r];if(t.en)return t.en;var i=Object.keys(t)[0];return t[i]?t[i]:""}},88991:function(e,t,n){"use strict";n.d(t,{L:function(){return i},P:function(){return r}});var r=function(e){var t=e;return t?function(e){return t._(e)}:null},i=function(e){var t=e;return t?function(e){return t._(e)}:function(e){return e}}},27195:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 10 12",children:[(0,o.jsx)("path",{d:"M3.67764 2.0539V0.930176H0.61294C0.450378 0.930176 0.294474 0.989372 0.179526 1.09474C0.0645775 1.20011 0 1.34302 0 1.49204V10.4818C0 10.6308 0.0645775 10.7737 0.179526 10.8791C0.294474 10.9845 0.450378 11.0437 0.61294 11.0437H3.67764V9.91996H1.22588V2.0539H3.67764Z"}),(0,o.jsx)("path",{d:"M5.5167 9.91998L5.5167 11.0437L8.5814 11.0437C8.74396 11.0437 8.89986 10.9845 9.01481 10.8791C9.12976 10.7738 9.19434 10.6309 9.19434 10.4818L9.19434 1.49206C9.19434 1.34305 9.12976 1.20013 9.01481 1.09476C8.89986 0.989394 8.74396 0.9302 8.5814 0.9302L5.5167 0.930199L5.5167 2.05392L7.96846 2.05392L7.96846 9.91998L5.5167 9.91998Z"})]}))}))},22654:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 17 7",children:[(0,o.jsx)("path",{fill:"none",d:"M9.5 3.5L11.8824 6L16 1",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{fill:"none",d:"M1 1L6 6M6 1L1 6",stroke:"currentColor",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]}))}))},79441:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 18 7",children:[(0,o.jsx)("path",{d:"M0.699536 1.81574C0.732104 1.93193 0.822074 2.02812 0.943348 2.07632C1.06462 2.12452 1.20367 2.1194 1.32026 2.06245L1.66832 1.89235V5.68893C1.66832 5.9038 1.86075 6.07801 2.09809 6.07801H2.94248C3.17982 6.07801 3.37225 5.9038 3.37225 5.68893V0.47563C3.37225 0.26076 3.17982 0.0865479 2.94248 0.0865479H2.29848C2.17914 0.0865479 2.06158 0.113205 1.95637 0.16423L0.738721 0.754181C0.56458 0.838594 0.476394 1.0196 0.524949 1.19294L0.699536 1.81574Z"}),(0,o.jsx)("path",{d:"M10.8866 5.68902V5.01903C10.8866 4.80416 10.6941 4.62994 10.4568 4.62994H9.05518C10.0388 3.74152 10.7474 2.93461 10.7474 1.92481C10.7474 0.997814 10.0548 0 8.53425 0C7.8269 0 7.14796 0.221131 6.62264 0.622734L6.5923 0.64589C6.4456 0.758105 6.3989 0.944837 6.47794 1.1033L6.76629 1.68127C6.82154 1.79207 6.93084 1.87305 7.06171 1.90031C7.19257 1.92757 7.32991 1.89782 7.43311 1.82007L7.4862 1.78009C7.6506 1.65609 7.98491 1.44815 8.37773 1.44815C8.83219 1.44815 9.01749 1.61139 9.01749 2.00701C9.01079 2.59898 8.43573 3.18913 7.05888 4.37543L6.44285 4.91698C6.35949 4.99022 6.3125 5.09092 6.3125 5.19607V5.68902C6.3125 5.90389 6.50493 6.0781 6.74228 6.0781H10.4568C10.6941 6.0781 10.8866 5.90389 10.8866 5.68902Z"}),(0,o.jsx)("path",{d:"M12.776 5.72618L12.8104 5.74657C13.135 5.9395 13.7841 6.16473 14.5449 6.16473C16.2926 6.16473 17.0887 5.14242 17.0887 4.19267C17.0887 3.62951 16.8073 3.13588 16.3383 2.81088C16.681 2.50406 16.8712 2.10448 16.8712 1.65717C16.8712 0.858943 16.214 0 14.7711 0C13.9993 0 13.3383 0.257885 13.0067 0.478679L12.9752 0.499614C12.8219 0.601597 12.761 0.782675 12.8253 0.944703L13.0621 1.54125C13.1077 1.65596 13.21 1.74468 13.3385 1.78103C13.4669 1.81731 13.6069 1.79705 13.7164 1.72617L13.7729 1.68961C13.9708 1.56151 14.3105 1.43227 14.6231 1.43227C15.1324 1.43227 15.1324 1.66706 15.1324 1.76736C15.1324 2.11794 14.5556 2.19683 14.3535 2.19683H13.8748C13.6374 2.19683 13.445 2.37105 13.445 2.58592V3.20071C13.445 3.41558 13.6374 3.58979 13.8748 3.58979H14.3535C14.5815 3.58979 15.3258 3.6324 15.3325 4.18479C15.3338 4.25062 15.3217 4.41763 15.1809 4.54748C15.0154 4.70016 14.7389 4.7322 14.5362 4.7322C14.1296 4.7322 13.7199 4.58033 13.5438 4.47822L13.4879 4.44584C13.3774 4.38182 13.2406 4.36701 13.1166 4.40565C12.9925 4.44429 12.8947 4.53207 12.8511 4.64408L12.6066 5.27126C12.5408 5.44022 12.6107 5.62789 12.776 5.72618Z"})]}))}))},99402:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 12 8",children:[(0,o.jsx)("path",{d:"M0.0850851 6.76784L2.39304 1.55591C2.55395 1.19651 2.84708 0.978882 3.24447 0.978882H3.3296C3.72674 0.978882 4.01061 1.19647 4.17135 1.55591L6.47939 6.76784C6.52669 6.8719 6.55513 6.96645 6.55513 7.06109C6.55513 7.44889 6.25241 7.76103 5.86457 7.76103C5.52407 7.76103 5.29701 7.56242 5.16463 7.25966L4.7201 6.21925H1.80671L1.34321 7.30704C1.22021 7.59078 0.974341 7.76103 0.671625 7.76103C0.293126 7.76103 0 7.45835 0 7.07998C0 6.97592 0.0377881 6.8719 0.0850851 6.76784ZM4.1809 4.93281L3.26332 2.74776L2.34583 4.93281H4.1809Z"}),(0,o.jsx)("path",{d:"M7.24512 6.24762V6.22868C7.24512 5.122 8.08699 4.6112 9.28827 4.6112C9.79911 4.6112 10.1681 4.69633 10.5275 4.81932V4.7342C10.5275 4.13823 10.1586 3.80723 9.43967 3.80723C9.0424 3.80723 8.72079 3.86396 8.44648 3.94913C8.36139 3.97749 8.30458 3.98691 8.23827 3.98691C7.90732 3.98691 7.64247 3.73154 7.64247 3.4005C7.64247 3.14508 7.80321 2.92753 8.03019 2.84236C8.48422 2.67211 8.97617 2.57751 9.64775 2.57751C10.4328 2.57751 11.0004 2.7856 11.3599 3.14504C11.7382 3.52337 11.9085 4.08151 11.9085 4.76256V7.07052C11.9085 7.4584 11.5963 7.76104 11.2085 7.76104C10.7923 7.76104 10.518 7.46783 10.518 7.16511V7.15564C10.168 7.54344 9.6855 7.79882 8.98564 7.79882C8.03019 7.79891 7.24512 7.25036 7.24512 6.24762ZM10.5463 5.91654V5.66116C10.3004 5.54767 9.97879 5.47197 9.62882 5.47197C9.01392 5.47197 8.63562 5.71792 8.63562 6.17192V6.19085C8.63562 6.57869 8.95723 6.80567 9.42069 6.80567C10.0923 6.80571 10.5463 6.43685 10.5463 5.91654Z"})]}))}))},92022:function(e,t,n){"use strict";var r=n(1413),i=n(28381),a=n(78118),o=n(29343);t.Z=i.memo((function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({},e),{},{viewBox:"0 0 12 12",children:[(0,o.jsx)("path",{d:"M9.40063 5.29672L9.40063 5.29673L10.34 6.23611L9.40065 7.17549C9.29799 7.27815 9.2403 7.41741 9.2403 7.56259V9.80103C9.2403 10.1849 8.92798 10.4972 8.54415 10.4972H7.6322C7.32986 10.4972 7.08477 10.7423 7.08477 11.0446C7.08477 11.347 7.32986 11.592 7.6322 11.592H8.54415C9.53177 11.592 10.3352 10.7886 10.3352 9.80103V7.78934L11.5013 6.62319C11.7151 6.40941 11.7151 6.0628 11.5013 5.84901L11.466 5.88436L11.5013 5.84901L10.3352 4.68287V2.67118C10.3352 1.68359 9.53177 0.880176 8.54415 0.880176H7.6322C7.32986 0.880176 7.08477 1.12527 7.08477 1.42761C7.08477 1.72995 7.32986 1.97504 7.6322 1.97504H8.54415C8.92798 1.97504 9.2403 2.28736 9.2403 2.67118V4.90962C9.2403 5.05481 9.29799 5.19406 9.40063 5.29672Z",strokeWidth:"0.1"}),(0,o.jsx)("path",{d:"M3.21104 7.17549L3.21103 7.17549L2.27163 6.23611L3.21101 5.29673C3.31367 5.19406 3.37136 5.05481 3.37136 4.90962V2.67118C3.37136 2.28736 3.68368 1.97504 4.06751 1.97504H4.97946C5.28181 1.97504 5.5269 1.72995 5.5269 1.42761C5.5269 1.12527 5.28181 0.880176 4.97946 0.880176H4.06751C3.07989 0.880176 2.2765 1.68359 2.2765 2.67118V4.68287L1.11035 5.84901C0.896552 6.0628 0.896552 6.40939 1.11035 6.62319L2.2765 7.78934V9.80103C2.2765 10.7886 3.07989 11.592 4.06751 11.592H4.97946C5.28181 11.592 5.5269 11.347 5.5269 11.0446C5.5269 10.7423 5.28181 10.4972 4.97946 10.4972H4.06751C3.68368 10.4972 3.37136 10.1849 3.37136 9.80103V7.56259C3.37136 7.41741 3.31368 7.27816 3.21104 7.17549Z",strokeWidth:"0.1"})]}))}))},82811:function(e,t,n){"use strict";n.d(t,{q:function(){return y}});var r,i,a,o=n(4942),s=n(28381),l=n(81683),c=n(90242),u=n(99402),d=n(79441),p=n(22654),f=n(27195),h=n(92022),g=n(23198),m=n(75779),x=n(40243),v=n(24910),b=n(3781),C=n(29343),j=n.g.gd,y=function(){var e;i||(e={},(0,o.Z)(e,j.Variable.MixedTypes,g.Z),(0,o.Z)(e,j.Variable.String,u.Z),(0,o.Z)(e,j.Variable.Number,d.Z),(0,o.Z)(e,j.Variable.Boolean,p.Z),(0,o.Z)(e,j.Variable.Array,f.Z),(0,o.Z)(e,j.Variable.Structure,h.Z),i=e);return i},Z=s.memo((function(e){var t=s.useContext(v.Z),n=y()[e.variableType];return(0,C.jsxs)(x.x1,{alignItems:"center",noMargin:!0,children:[e.errorMessage?(0,C.jsx)(b.ZP,{title:e.errorMessage,children:(0,C.jsx)(m.Z,{fontSize:"small",htmlColor:t.message.warning})}):(0,C.jsx)(n,{fontSize:"small",htmlColor:e.isHighlighted?t.message.selectedTextColor:void 0}),!e.readOnlyWithIcon&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.LZ,{}),(0,C.jsx)(l.Z,{value:e.variableType,translatableHintText:{id:"Mixed"},margin:"none",stopPropagationOnClick:!0,onChange:function(t){return e.onChange(function(){var e;return a||(e={},(0,o.Z)(e,j.Variable.String,"string"),(0,o.Z)(e,j.Variable.Number,"number"),(0,o.Z)(e,j.Variable.Boolean,"boolean"),(0,o.Z)(e,j.Variable.Array,"array"),(0,o.Z)(e,j.Variable.Structure,"structure"),a=e),a}()[t.target.value],e.nodeId)},inputStyle:{fontSize:14,color:e.isHighlighted?t.listItem.selectedTextColor:void 0},id:e.id,disabled:e.disabled,children:(r||(r=[(0,C.jsx)(c.Z,{label:{id:"Text"},value:j.Variable.String},"string"),(0,C.jsx)(c.Z,{label:{id:"Number"},value:j.Variable.Number},"number"),(0,C.jsx)(c.Z,{label:{id:"Boolean"},value:j.Variable.Boolean},"boolean"),(0,C.jsx)(c.Z,{label:{id:"Array"},value:j.Variable.Array},"array"),(0,C.jsx)(c.Z,{label:{id:"Structure"},value:j.Variable.Structure},"structure")]),r)})]})]})}));t.Z=Z},72717:function(e,t){"use strict";t.Z={fullHeightFlexContainer:"TreeView_fullHeightFlexContainer__wmGJz",withDivider:"TreeView_withDivider__vptv5",fullSpaceContainer:"TreeView_fullSpaceContainer__44HJa",rowContent:"TreeView_rowContent__C4pnW",rowContentSide:"TreeView_rowContentSide__hensj",rowContentExtraPadding:"TreeView_rowContentExtraPadding__EYV7L",rowContentSideLeft:"TreeView_rowContentSideLeft__Sdur6",rowContentSideRight:"TreeView_rowContentSideRight__KMTg6",rowContainer:"TreeView_rowContainer__PvQsE",itemName:"TreeView_itemName__APIe3",animate:"TreeView_animate__8Rdah",wiggle:"TreeView_wiggle__h6ISH",treeView:"TreeView_treeView__MbkSD",withCanDropInsideIndicator:"TreeView_withCanDropInsideIndicator__xdMtZ",withCannotDropInsideIndicator:"TreeView_withCannotDropInsideIndicator__WP3pW",selected:"TreeView_selected__PAb8M",itemDescription:"TreeView_itemDescription__gI2oO",itemNameInput:"TreeView_itemNameInput__p8-mU",itemTextContainer:"TreeView_itemTextContainer__X3Hgl",placeholder:"TreeView_placeholder__h7RIh",rootFolder:"TreeView_rootFolder__bbb9e",folderIcon:"TreeView_folderIcon__9Yhsk",thumbnail:"TreeView_thumbnail__NRB4n",itemNameInputContainer:"TreeView_itemNameInputContainer__GLbWu"}},63984:function(e){e.exports=[{languageCode:"af_ZA",languageName:"Afrikaans",languageNativeName:"Afrikaans",translationRatio:0},{languageCode:"ar_SA",languageName:"Arabic",languageNativeName:"\u0627\u064e\u0644\u0652\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629\u064f",translationRatio:.9861676159479251},{languageCode:"az_AZ",languageName:"Azerbaijani",languageNativeName:"az\u0259rbaycan dili",translationRatio:0},{languageCode:"bg_BG",languageName:"Bulgarian",languageNativeName:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",translationRatio:0},{languageCode:"bn_BD",languageName:"Bengali",languageNativeName:"\u09ac\u09be\u0982\u09b2\u09be",translationRatio:0},{languageCode:"br_FR",languageName:"Breton",languageNativeName:"brezhoneg",translationRatio:0},{languageCode:"ca_ES",languageName:"Catalan",languageNativeName:"Catal\xe0",translationRatio:.9798209926769732},{languageCode:"cs_CZ",languageName:"Czech",languageNativeName:"\u010de\u0161tina",translationRatio:.9806346623270952},{languageCode:"da_DK",languageName:"Danish",languageNativeName:"Dansk",translationRatio:.9698942229454841},{languageCode:"de_DE",languageName:"German",languageNativeName:"Deutsch",translationRatio:.978193653376729},{languageCode:"el_GR",languageName:"Greek",languageNativeName:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",translationRatio:.9842148087876322},{languageCode:"en",languageName:"English",languageNativeName:"English",translationRatio:0},{languageCode:"eo_UY",languageName:"Esperanto",languageNativeName:"Esperanto",translationRatio:.9824247355573638},{languageCode:"es_ES",languageName:"Spanish",languageNativeName:"Espa\xf1ol",translationRatio:.9811228641171684},{languageCode:"fa_IR",languageName:"Persian",languageNativeName:"\u0641\u0627\u0631\u0633\u06cc",translationRatio:.9798209926769732},{languageCode:"fi_FI",languageName:"Finnish",languageNativeName:"suomi",translationRatio:.9832384052074857},{languageCode:"fil_PH",languageName:"Filipino",languageNativeName:"Mga Filipino",translationRatio:.9625711960943857},{languageCode:"fr_FR",languageName:"French",languageNativeName:"Fran\xe7ais",translationRatio:.978193653376729},{languageCode:"ha_HG",languageName:"Hausa",languageNativeName:"\u0647\u064e\u0648\u064f\u0633\u064e",translationRatio:0},{languageCode:"he_IL",languageName:"Hebrew",languageNativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea",translationRatio:0},{languageCode:"hi_IN",languageName:"Hindi",languageNativeName:"\u0939\u093f\u0928\u094d\u0926\u0940",translationRatio:.9832384052074857},{languageCode:"hu_HU",languageName:"Hungarian",languageNativeName:"magyar",translationRatio:.9791700569568755},{languageCode:"id_ID",languageName:"Indonesian",languageNativeName:"Bahasa Indonesia",translationRatio:.9772172497965825},{languageCode:"ig_NG",languageName:"Igbo",languageNativeName:"As\u1ee5s\u1ee5 Igbo",translationRatio:0},{languageCode:"it_IT",languageName:"Italian",languageNativeName:"Italiano",translationRatio:.9817737998372661},{languageCode:"ja_JP",languageName:"Japanese",languageNativeName:"\u65e5\u672c\u8a9e",translationRatio:.9946297803091945},{languageCode:"ka_GE",languageName:"Georgian",languageNativeName:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",translationRatio:0},{languageCode:"km_KH",languageName:"Khmer",languageNativeName:"\u1781\u17c1\u1798\u179a\u1797\u17b6\u179f\u17b6",translationRatio:0},{languageCode:"ko_KR",languageName:"Korean",languageNativeName:"\ud55c\uad6d\uc5b4",translationRatio:.9565500406834825},{languageCode:"lt_LT",languageName:"Lithuanian",languageNativeName:"lietuvi\u0173 kalba",translationRatio:.9824247355573638},{languageCode:"lv_LV",languageName:"Latvian",languageNativeName:"latvie\u0161u valoda",translationRatio:0},{languageCode:"mr_IN",languageName:"Marathi",languageNativeName:"\u092e\u0930\u093e\u0920\u0940",translationRatio:0},{languageCode:"ms_MY",languageName:"Malay",languageNativeName:"Bahasa Melayu",translationRatio:0},{languageCode:"my_MM",languageName:"Burmese",languageNativeName:"\u1017\u1019\u102c\u1005\u102c",translationRatio:0},{languageCode:"nl_NL",languageName:"Dutch",languageNativeName:"Nederlands",translationRatio:.971033360455655},{languageCode:"no_NO",languageName:"Norwegian",languageNativeName:"Norsk",translationRatio:.9791700569568755},{languageCode:"pl_PL",languageName:"Polish",languageNativeName:"Polski",translationRatio:.9816110659072417},{languageCode:"pt_BR",languageName:"Brazilian Portuguese",languageNativeName:"Portugu\xeas brasileiro",translationRatio:.9806346623270952},{languageCode:"pt_PT",languageName:"Portuguese",languageNativeName:"Portugu\xeas",translationRatio:.9801464605370219},{languageCode:"ro_RO",languageName:"Romanian",languageNativeName:"Rom\xe2n\u0103",translationRatio:0},{languageCode:"ru_RU",languageName:"Russian",languageNativeName:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",translationRatio:.9835638730675346},{languageCode:"si_LK",languageName:"Sinhala",languageNativeName:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",translationRatio:.9767290480065094},{languageCode:"sk_SK",languageName:"Slovak",languageNativeName:"sloven\u010dina",translationRatio:.9184703010577705},{languageCode:"sl_SI",languageName:"Slovenian",languageNativeName:"sloven\u0161\u010dina",translationRatio:.9822620016273393},{languageCode:"sq_AL",languageName:"Albanian",languageNativeName:"Shqip",translationRatio:.980960130187144},{languageCode:"sr_CS",languageName:"Serbian (Latin)",languageNativeName:"srpski",translationRatio:.9803091944670463},{languageCode:"sr_SP",languageName:"Serbian",languageNativeName:"\u0441\u0440\u043f\u0441\u043a\u0438 \u0458\u0435\u0437\u0438\u043a",translationRatio:.983726606997559},{languageCode:"sv_SE",languageName:"Swedish",languageNativeName:"Svenska",translationRatio:.974613506916192},{languageCode:"sw_KE",languageName:"Swahili",languageNativeName:"Kiswahili",translationRatio:0},{languageCode:"th_TH",languageName:"Thai",languageNativeName:"\u0e44\u0e17\u0e22",translationRatio:.9780309194467046},{languageCode:"tr_TR",languageName:"Turkish",languageNativeName:"T\xfcrk\xe7e",translationRatio:.9811228641171684},{languageCode:"uk_UA",languageName:"Ukrainian",languageNativeName:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",translationRatio:.9835638730675346},{languageCode:"ur_PK",languageName:"Urdu",languageNativeName:"\u0627\u0631\u062f\u0648",translationRatio:0},{languageCode:"uz_UZ",languageName:"Uzbek",languageNativeName:"\u040e\u0437\u0431\u0435\u043a",translationRatio:0},{languageCode:"vi_VN",languageName:"Vietnamese",languageNativeName:"Ti\u1ebfng Vi\u1ec7t",translationRatio:.9814483319772173},{languageCode:"yo_NG",languageName:"Yoruba",languageNativeName:"Yor\xf9b\xe1",translationRatio:.9703824247355574},{languageCode:"zh_CN",languageName:"Chinese Simplified",languageNativeName:"\u7b80\u5316\u5b57",translationRatio:.9803091944670463},{languageCode:"zh_TW",languageName:"Chinese Traditional",languageNativeName:"\u6b63\u9ad4\u5b57",translationRatio:.9814483319772173}]},80511:function(e,t,n){var r={"./af_ZA/extension-messages":[26810,5958],"./ar_SA/extension-messages":[54001,4890],"./az_AZ/extension-messages":[39580,4271],"./bg_BG/extension-messages":[44171,7161],"./bn_BD/extension-messages":[57142,5412],"./br_FR/extension-messages":[3332,331],"./ca_ES/extension-messages":[81974,3750],"./cs_CZ/extension-messages":[87644,9237],"./da_DK/extension-messages":[85043,43],"./de_DE/extension-messages":[93260,1741],"./el_GR/extension-messages":[85987,7964],"./en/extension-messages":[8142,264],"./eo_UY/extension-messages":[71454,8542],"./es_ES/extension-messages":[36019,7021],"./fa_IR/extension-messages":[48097,441],"./fi_FI/extension-messages":[51707,9153],"./fil_PH/extension-messages":[37752,8461],"./fr_FR/extension-messages":[19111,1388],"./ha_HG/extension-messages":[30597,8975],"./he_IL/extension-messages":[77204,3716],"./hi_IN/extension-messages":[24135,3463],"./hu_HU/extension-messages":[23537,4506],"./id_ID/extension-messages":[17562,9299],"./ig_NG/extension-messages":[71075,5729],"./it_IT/extension-messages":[60680,7916],"./ja_JP/extension-messages":[45076,7771],"./ka_GE/extension-messages":[29761,666],"./km_KH/extension-messages":[3090,6086],"./ko_KR/extension-messages":[26327,5419],"./lt_LT/extension-messages":[32571,2017],"./lv_LV/extension-messages":[48792,5341],"./mr_IN/extension-messages":[49535,6720],"./ms_MY/extension-messages":[93630,2519],"./my_MM/extension-messages":[51391,5322],"./nl_NL/extension-messages":[2723,8329],"./no_NO/extension-messages":[15001,1940],"./pl_PL/extension-messages":[40183,6610],"./pseudo_LOCALE/extension-messages":[46178,6882],"./pt_BR/extension-messages":[65034,5944],"./pt_PT/extension-messages":[87878,3937],"./ro_RO/extension-messages":[32394,7839],"./ru_RU/extension-messages":[64550,7692],"./si_LK/extension-messages":[21467,4154],"./sk_SK/extension-messages":[39734,5446],"./sl_SI/extension-messages":[56077,4953],"./sq_AL/extension-messages":[28145,5073],"./sr_CS/extension-messages":[8263,9013],"./sr_SP/extension-messages":[39377,9227],"./sv_SE/extension-messages":[15927,4899],"./sw_KE/extension-messages":[87699,4268],"./th_TH/extension-messages":[90997,8509],"./tr_TR/extension-messages":[60946,4758],"./uk_UA/extension-messages":[61539,1281],"./ur_PK/extension-messages":[59053,1817],"./uz_UZ/extension-messages":[83465,8906],"./vi_VN/extension-messages":[40752,4645],"./yo_NG/extension-messages":[90484,5760],"./zh_CN/extension-messages":[49388,851],"./zh_TW/extension-messages":[38103,1636]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n.t(i,23)}))}i.keys=function(){return Object.keys(r)},i.id=80511,e.exports=i},91485:function(e,t,n){var r={"./af_ZA/messages":[39278,3190],"./ar_SA/messages":[94560,6067],"./az_AZ/messages":[46914,7902],"./bg_BG/messages":[31974,3883],"./bn_BD/messages":[46307,6337],"./br_FR/messages":[63195,2094],"./ca_ES/messages":[14692,683],"./cs_CZ/messages":[42947,1e3],"./da_DK/messages":[78356,3450],"./de_DE/messages":[50413,9569],"./el_GR/messages":[48435,5550],"./en/messages":[96781,2181],"./eo_UY/messages":[38909,2736],"./es_ES/messages":[35745,3458],"./fa_IR/messages":[42280,2548],"./fi_FI/messages":[22335,5897],"./fil_PH/messages":[62281,260],"./fr_FR/messages":[5155,8672],"./ha_HG/messages":[37288,9882],"./he_IL/messages":[94320,2402],"./hi_IN/messages":[19114,5719],"./hu_HU/messages":[40018,922],"./id_ID/messages":[34383,335],"./ig_NG/messages":[10374,7273],"./it_IT/messages":[88672,9840],"./ja_JP/messages":[94959,2855],"./ka_GE/messages":[54953,8680],"./km_KH/messages":[61072,7543],"./ko_KR/messages":[52488,4292],"./lt_LT/messages":[3157,1683],"./lv_LV/messages":[74372,3090],"./mr_IN/messages":[55850,7732],"./ms_MY/messages":[63596,8404],"./my_MM/messages":[27254,2247],"./nl_NL/messages":[35025,7274],"./no_NO/messages":[57657,7500],"./pl_PL/messages":[33102,3137],"./pseudo_LOCALE/messages":[98610,7699],"./pt_BR/messages":[30513,6163],"./pt_PT/messages":[22242,2437],"./ro_RO/messages":[23753,5229],"./ru_RU/messages":[46088,9917],"./si_LK/messages":[14313,2750],"./sk_SK/messages":[81651,7013],"./sl_SI/messages":[25413,6842],"./sq_AL/messages":[49622,3799],"./sr_CS/messages":[47207,9957],"./sr_SP/messages":[69323,7289],"./sv_SE/messages":[97400,9331],"./sw_KE/messages":[75457,4014],"./th_TH/messages":[91813,255],"./tr_TR/messages":[22415,1918],"./uk_UA/messages":[88582,5339],"./ur_PK/messages":[10472,6147],"./uz_UZ/messages":[44540,3418],"./vi_VN/messages":[12823,7883],"./yo_NG/messages":[79525,7018],"./zh_CN/messages":[70344,5188],"./zh_TW/messages":[66003,4003]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n.t(i,23)}))}i.keys=function(){return Object.keys(r)},i.id=91485,e.exports=i},97396:function(e){"use strict";e.exports=JSON.parse('{"\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0401":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041a":"K","\u041b":"L","\u041c":"M","\u041d":"N","\u041e":"O","\u041f":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"Ts","\u0427":"Ch","\u0428":"Sh","\u0429":"Shch","\u042b":"Y","\u042d":"E","\u042e":"Yu","\u042f":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0451":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043a":"k","\u043b":"l","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"ts","\u0447":"ch","\u0448":"sh","\u0449":"shch","\u044b":"y","\u044d":"e","\u044e":"yu","\u044f":"ya","\u042a":"","\u044a":"","\u042c":"","\u044c":""}')}}]);
//# sourceMappingURL=1621.df8169aa.chunk.js.map